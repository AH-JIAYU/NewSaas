
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aN as se,r as _,a3 as ie,n as re,a as b,q as ue,o as i,b as pe,f as t,w as o,e as u,j as c,g as l,s as K,i as d,aM as W,y as m,z as n,N as ce,b9 as de,ba as me,ap as fe,L as _e}from"./index-CW3FpIaN.js";import{_ as ge}from"./index-BlCSTxya.js";import{_ as be}from"./index.vue_vue_type_style_index_0_lang-D-395pj6.js";import{_ as ve}from"./index-BCLuOo_G.js";import{u as ye,o as he,a as X}from"./index-B8d8KNA7.js";import"./index-BkxWVgQp.js";import"./index.vue_vue_type_script_setup_true_lang-BgZORd71.js";import"./sortable.esm-C0-Qcoum.js";const ke={class:"tableBig"},Ne={class:"tableBig"},Se={class:"copyId tableSmall"},je={class:"id oneLine"},Ie={class:"tableBig oneLine"},we={class:"copyId tableSmall"},Le={class:"id oneLine"},ze={class:"tableBig"},Ce={class:"tableBig"},De={class:"copyId tableSmall"},xe={class:"id oneLine"},Ue={class:"tableBig"},Be={class:"copyId tableSmall"},He={class:"id oneLine"},Ae=ne({name:"outsource",__name:"list",setup(Re){const D=ye(),{pagination:f,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=se(),U=_(""),j=_(!0),y=_(!1),B=_(),I=_(!1),s=_([]),x=_(),H=_("formSearch-outsource"),h=_("default"),k=_(!1),w=_([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),g=ie({tenantId:"",tenantName:"",projectStatus:"",type:2}),L=_([]);function A(p){B.value.showEdit(p,g.type===2?1:0)}function R(p){Z(p).then(()=>S())}function N(p=1){ee(p).then(()=>S())}function P(){Object.assign(g,{tenantId:"",tenantName:"",projectStatus:"",type:2}),S()}async function S(){try{j.value=!0;const p={...Y(),...g};if(g.type===1){const a=await X.list(p);L.value=a.data.projectAllocationInfoList,f.value.total=a.data.total}else{const a=await X.meList(p);L.value=a.data.projectMeAllocationInfoList,f.value.total=a.data.total}j.value=!1}catch{}finally{j.value=!1}}re(()=>{w.value.forEach(p=>{p.checked&&s.value.push(p.prop)}),S(),x.value=[{index:1,show:!0,type:"input",modelName:"tenantId",placeholder:"租户id"},{index:2,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:3,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const te={projectStatus:()=>D.projectStatusList.map((p,a)=>({label:p,value:a+1}))};return(p,a)=>{const V=ve,E=b("ElDivider"),M=be,z=b("el-button"),O=de,F=me,$=b("el-row"),r=b("el-table-column"),C=ge,v=b("el-text"),Q=b("el-empty"),T=b("el-table"),q=b("ElPagination"),G=b("el-tab-pane"),ae=b("el-tabs"),oe=fe,J=ue("loading");return i(),pe("div",{class:ce({"absolute-container":I.value})},[t(oe,null,{default:o(()=>[t(ae,{modelValue:g.type,"onUpdate:modelValue":a[14]||(a[14]=e=>g.type=e),onTabChange:S},{default:o(()=>[t(G,{label:"外包项目",name:2},{default:o(()=>[g.type===2?(i(),u(V,{key:0,formSearchList:x.value,formSearchName:H.value,onCurrentChange:N,onOnReset:P,model:g,formOption:te},null,8,["formSearchList","formSearchName","model"])):c("",!0),t(E,{"border-style":"dashed"}),t($,{gutter:24},{default:o(()=>[t(M),t(F,null,{default:o(()=>[t(z,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(O,{border:y.value,"onUpdate:border":a[1]||(a[1]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>I.value=e),checkList:s.value,"onUpdate:checkList":a[3]||(a[3]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[4]||(a[4]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":a[6]||(a[6]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:N},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((i(),u(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:o(()=>[t(Q,{image:d(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(r,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(i(),u(r,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[m("span",ke,n(d(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):c("",!0),s.value.includes("tenantName")?(i(),u(r,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[m("div",Ne,n(e.tenantName),1)]),_:1})):c("",!0),s.value.includes("tenantId")?(i(),u(r,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[m("div",Se,[m("div",je,"ID: "+n(e.tenantId),1),t(C,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):c("",!0),s.value.includes("projectName")?(i(),u(r,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[m("div",Ie,n(e.projectName),1)]),_:1})):c("",!0),s.value.includes("projectId")?(i(),u(r,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[m("div",we,[m("div",Le,"ID: "+n(e.projectId),1),t(C,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):c("",!0),s.value.includes("participationNumber")?(i(),u(r,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(v,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),t(r,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(z,{type:"primary",plain:"",size:"small",onClick:le=>A(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),t(q,{"current-page":d(f).page,total:d(f).total,"page-size":d(f).size,"page-sizes":d(f).sizes,layout:d(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(G,{label:"接收项目",name:1},{default:o(()=>[g.type===1?(i(),u(V,{key:0,formSearchList:x.value,formSearchName:H.value,onCurrentChange:N,onOnReset:P,model:g},null,8,["formSearchList","formSearchName","model"])):c("",!0),t(E,{"border-style":"dashed"}),t($,{gutter:24},{default:o(()=>[t(M),t(F,null,{default:o(()=>[t(z,{size:"default",onClick:a[7]||(a[7]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(O,{border:y.value,"onUpdate:border":a[8]||(a[8]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":a[9]||(a[9]=e=>I.value=e),checkList:s.value,"onUpdate:checkList":a[10]||(a[10]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[11]||(a[11]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":a[12]||(a[12]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":a[13]||(a[13]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:N},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((i(),u(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:o(()=>[t(Q,{image:d(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(r,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(i(),u(r,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[m("span",ze,n(d(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):c("",!0),s.value.includes("tenantName")?(i(),u(r,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[m("div",Ce,n(e.tenantName),1)]),_:1})):c("",!0),s.value.includes("tenantId")?(i(),u(r,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[m("div",De,[m("div",xe,"ID: "+n(e.tenantId),1),t(C,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):c("",!0),s.value.includes("projectName")?(i(),u(r,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[m("div",Ue,n(e.projectName),1)]),_:1})):c("",!0),s.value.includes("projectId")?(i(),u(r,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[m("div",Be,[m("div",He,"ID: "+n(e.projectId),1),t(C,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):c("",!0),s.value.includes("participationNumber")?(i(),u(r,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(v,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(v,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),t(r,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(z,{type:"primary",plain:"",size:"small",onClick:le=>A(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),t(q,{"current-page":d(f).page,total:d(f).total,"page-size":d(f).size,"page-sizes":d(f).sizes,layout:d(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(he,{ref_key:"editRef",ref:B,onFetchData:S},null,512)]),_:1})],2)}}}),Te=_e(Ae,[["__scopeId","data-v-3d191162"]]);export{Te as default};
