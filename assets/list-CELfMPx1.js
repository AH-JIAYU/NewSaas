
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as me,aM as fe,r as m,a3 as _e,n as ye,a as b,q as ge,o as n,b as be,f as a,w as t,e as s,j as c,g as o,s as ae,i as f,aL as le,y as d,z as p,N as L,b8 as ve,b9 as he,bd as ke,ap as je,L as Ie}from"./index-BDWalcy-.js";import{_ as Ce}from"./index-Dl6iGclN.js";import{_ as Se}from"./index.vue_vue_type_style_index_0_lang-Da5S6H-d.js";import{_ as Ne}from"./index-CKou16G2.js";import{u as we,o as ze,a as oe}from"./index-gEz5lFiK.js";import Le from"./index-4GAcj-SP.js";import"./index-Dkck0YMN.js";import"./index.vue_vue_type_script_setup_true_lang-1icQRfyf.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-BrxkeqqD.js";import"./projectManagement-CaQsthHH.js";import"./user_cooperation-ByK_ffNz.js";import"./survey_vip_department-2UHHipnY.js";import"./user_supplier-BNlA6sR8.js";import"./user_supplier-CA014yb1.js";import"./survey_vipGroup-DcoAVt0f.js";import"./survey_vipGroup-Cr0hvxmp.js";const De={class:"tableBig"},xe={class:"tableBig"},Be={class:"copyId tableSmall"},Ue={class:"id oneLine projectId"},Ee={class:"tableBig oneLine"},Ae={class:"copyId tableSmall"},Pe={class:"id oneLine projectId"},Re={class:"tableBig"},He={class:"tableBig"},Te={class:"copyId tableSmall"},Me={class:"id oneLine projectId"},Oe={class:"tableBig"},Ve={class:"copyId tableSmall"},$e={class:"id oneLine projectId"},Fe=me({name:"outsource",__name:"list",setup(Qe){const A=we(),{pagination:_,getParams:ne,onSizeChange:se,onCurrentChange:ie}=fe(),P=m(""),B=m(),N=m(!0),k=m(!1),R=m(),w=m(!1),r=m([]),U=m(),H=m("formSearch-outsource"),j=m("default"),I=m(!1),z=m([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"分配",prop:"allocationType"},{sotrtable:!0,checked:!0,label:"项目价",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),v=_e({projectId:"",tenantId:"",tenantName:"",projectStatus:"",type:2}),D=m([]);function re(i){i.name=i.tenantName,B.value.showEdit(i,"distribution")}function ue(i){B.value.showEdit(i,"reassign")}function T(i){R.value.showEdit(i,v.type===2?1:0)}function M(i){se(i).then(()=>h())}function C(i=1){ie(i).then(()=>h())}function O(){Object.assign(v,{tenantId:"",tenantName:"",projectStatus:"",type:2}),h()}async function h(){try{N.value=!0;const i={...ne(),...v};if(v.type===1){const l=await oe.list(i);D.value=l.data.projectAllocationInfoList,_.value.total=l.data.total}else{const l=await oe.meList(i);D.value=l.data.projectMeAllocationInfoList,_.value.total=l.data.total}N.value=!1}catch{}finally{N.value=!1}}ye(()=>{z.value.forEach(i=>{i.checked&&r.value.push(i.prop)}),h(),U.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"tenantId",placeholder:"租户ID"},{index:3,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:4,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const V={projectStatus:()=>A.projectStatusList.map((i,l)=>({label:i,value:l+1}))},S=m();function $(i){i?S.value=i.projectId:S.value=""}return(i,l)=>{const F=Ne,Q=b("ElDivider"),q=Se,y=b("el-button"),G=ve,J=he,K=b("el-row"),u=b("el-table-column"),g=b("el-text"),x=Ce,W=b("el-tooltip"),X=b("el-empty"),Y=b("el-table"),Z=b("ElPagination"),ee=b("el-tab-pane"),pe=ke,ce=b("el-tabs"),de=je,te=ge("loading");return n(),be("div",{class:L({"absolute-container":w.value})},[a(de,null,{default:t(()=>[a(ce,{modelValue:v.type,"onUpdate:modelValue":l[14]||(l[14]=e=>v.type=e),onTabChange:h},{default:t(()=>[a(ee,{label:"外包项目",name:2},{default:t(()=>[v.type===2?(n(),s(F,{key:0,formSearchList:U.value,formSearchName:H.value,onCurrentChange:C,onOnReset:O,model:v,formOption:V},null,8,["formSearchList","formSearchName","model"])):c("",!0),a(Q,{"border-style":"dashed"}),a(K,{gutter:24},{default:t(()=>[a(q),a(J,null,{default:t(()=>[a(y,{size:"default",onClick:l[0]||(l[0]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),a(G,{border:k.value,"onUpdate:border":l[1]||(l[1]=e=>k.value=e),tableAutoHeight:w.value,"onUpdate:tableAutoHeight":l[2]||(l[2]=e=>w.value=e),checkList:r.value,"onUpdate:checkList":l[3]||(l[3]=e=>r.value=e),columns:z.value,"onUpdate:columns":l[4]||(l[4]=e=>z.value=e),"line-height":j.value,"onUpdate:lineHeight":l[5]||(l[5]=e=>j.value=e),stripe:I.value,"onUpdate:stripe":l[6]||(l[6]=e=>I.value=e),style:{"margin-left":"12px"},onQueryData:C},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ae((n(),s(Y,{ref_key:"tableSortRef",ref:P,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:j.value,stripe:I.value,"highlight-current-row":"",onCurrentChange:$},{empty:t(()=>[a(X,{image:f(le),"image-size":300},null,8,["image"])]),default:t(()=>[a(u,{align:"left",type:"selection"}),r.value.includes("projectStatus")?(n(),s(u,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",width:"140",label:"状态"},{default:t(({row:e})=>[d("span",De,[e.projectStatus===1?(n(),s(g,{key:0,type:"primary"},{default:t(()=>[o(" 进行中(在线)")]),_:1})):e.projectStatus===2?(n(),s(g,{key:1,type:"warning"},{default:t(()=>[o(" 已完成(审核通过)")]),_:1})):e.projectStatus===3?(n(),s(g,{key:2,type:"info"},{default:t(()=>[o(" 离线")]),_:1})):c("",!0)])]),_:1})):c("",!0),r.value.includes("tenantName")?(n(),s(u,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",xe,p(e.tenantName),1)]),_:1})):c("",!0),r.value.includes("tenantId")?(n(),s(u,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",width:"280",label:"租户ID"},{default:t(({row:e})=>[d("div",Be,[d("div",Ue,p(e.tenantId),1),a(x,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):c("",!0),r.value.includes("projectName")?(n(),s(u,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Ee,p(e.projectName),1)]),_:1})):c("",!0),r.value.includes("projectId")?(n(),s(u,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[d("div",Ae,[d("div",Pe,[a(W,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[o(p(e.projectId),1)]),_:2},1032,["content"])]),a(x,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):c("",!0),r.value.includes("participationNumber")?(n(),s(u,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[o("参与: "+p(e.participationNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[o("完成: "+p(e.doneNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[o("配额: "+p(e.num||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[o("限量: "+p(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(y,{type:"primary",plain:"",size:"small",onClick:E=>T(e)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[te,N.value]]),a(Z,{"current-page":f(_).page,total:f(_).total,"page-size":f(_).size,"page-sizes":f(_).sizes,layout:f(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:C},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(ee,{label:"接收项目",name:1},{default:t(()=>[v.type===1?(n(),s(F,{key:0,formSearchList:U.value,formSearchName:H.value,onCurrentChange:C,onOnReset:O,model:v,formOption:V},null,8,["formSearchList","formSearchName","model"])):c("",!0),a(Q,{"border-style":"dashed"}),a(K,{gutter:24},{default:t(()=>[a(q),a(J,null,{default:t(()=>[a(y,{size:"default",onClick:l[7]||(l[7]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),a(G,{border:k.value,"onUpdate:border":l[8]||(l[8]=e=>k.value=e),tableAutoHeight:w.value,"onUpdate:tableAutoHeight":l[9]||(l[9]=e=>w.value=e),checkList:r.value,"onUpdate:checkList":l[10]||(l[10]=e=>r.value=e),columns:z.value,"onUpdate:columns":l[11]||(l[11]=e=>z.value=e),"line-height":j.value,"onUpdate:lineHeight":l[12]||(l[12]=e=>j.value=e),stripe:I.value,"onUpdate:stripe":l[13]||(l[13]=e=>I.value=e),style:{"margin-left":"12px"},onQueryData:C},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ae((n(),s(Y,{ref_key:"tableSortRef",ref:P,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:j.value,"highlight-current-row":"",stripe:I.value,onCurrentChange:$},{empty:t(()=>[a(X,{image:f(le),"image-size":300},null,8,["image"])]),default:t(()=>[a(u,{align:"left",type:"selection"}),r.value.includes("projectStatus")?(n(),s(u,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态",width:"140"},{default:t(({row:e})=>[d("span",Re,p(f(A).projectStatusList[e.projectStatus-1]),1)]),_:1})):c("",!0),r.value.includes("tenantName")?(n(),s(u,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",He,p(e.tenantName),1)]),_:1})):c("",!0),r.value.includes("tenantId")?(n(),s(u,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID",width:"280"},{default:t(({row:e})=>[d("div",Te,[d("div",Me,p(e.tenantId),1),a(x,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):c("",!0),r.value.includes("allocationType")?(n(),s(u,{key:3,align:"left",label:"分配",width:"90"},{default:t(({row:e})=>[e.allocationType===1?(n(),s(y,{key:0,class:"tableBut",size:"small",type:"danger",plain:""},{default:t(()=>[o("自动分配")]),_:1})):e.allocationType===2?(n(),s(y,{key:1,class:"tableBut",size:"small",type:"danger"},{default:t(()=>[o("供应商")]),_:1})):e.allocationType===3?(n(),s(y,{key:2,class:"tableBut",size:"small",type:"success"},{default:t(()=>[o("部门")]),_:1})):e.allocationType===4?(n(),s(y,{key:3,class:"tableBut",size:"small",type:"primary"},{default:t(()=>[o("租户")]),_:1})):(n(),s(y,{key:4,size:"small",class:"tableBut"},{default:t(()=>[o(" 未分配")]),_:1}))]),_:1})):c("",!0),r.value.includes("doMoneyPrice")?(n(),s(u,{key:4,"show-overflow-tooltip":"",align:"left",label:"项目价",width:"100"},{default:t(({row:e})=>[d("div",null,[a(pe),o(p(e.doMoneyPrice||0),1)])]),_:1})):c("",!0),r.value.includes("projectName")?(n(),s(u,{key:5,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Oe,p(e.projectName),1)]),_:1})):c("",!0),r.value.includes("projectId")?(n(),s(u,{key:6,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[d("div",Ve,[d("div",$e,[a(W,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[o(p(e.projectId),1)]),_:2},1032,["content"])]),a(x,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):c("",!0),r.value.includes("participationNumber")?(n(),s(u,{key:7,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[o("参与: "+p(e.participationNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[o("完成: "+p(e.doneNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[o("配额: "+p(e.num||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[o("限量: "+p(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[e.allocationStatus===1?(n(),s(y,{key:0,plain:"",disabled:e.isOnline===2,type:"primary",size:"small",onClick:E=>re(e)},{default:t(()=>[o(" 分配 ")]),_:2},1032,["disabled","onClick"])):(n(),s(y,{key:1,plain:"",type:"primary",disabled:e.isOnline===2,size:"small",onClick:E=>ue(e)},{default:t(()=>[o(" 重新分配 ")]),_:2},1032,["disabled","onClick"])),a(y,{type:"primary",plain:"",size:"small",onClick:E=>T(e)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[te,N.value]]),a(Z,{"current-page":f(_).page,total:f(_).total,"page-size":f(_).size,"page-sizes":f(_).sizes,layout:f(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:C},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),a(Le,{ref_key:"addAllocationEditRef",ref:B,onFetchData:h},null,512),a(ze,{ref_key:"editRef",ref:R,onFetchData:h},null,512)]),_:1})],2)}}}),ut=Ie(Fe,[["__scopeId","data-v-776c9976"]]);export{ut as default};
