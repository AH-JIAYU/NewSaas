
/**
 * ç”± Fantastic-admin æä¾›æŠ€æœ¯æ”¯æŒ
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Pe}from"./index.vue_vue_type_script_setup_true_lang-C15HeTCs.js";import{k as Q,d as qe,l as Re,q as Se,Y as Fe,Z as Te,r as i,aJ as V,ba as W,aP as Le,$ as $e,b as K,f as a,w as o,A as d,ak as Z,al as M,i as e,s as ze,a as m,aH as Ae,aI as De,K as Be,bb as Ke,a2 as Ze,o as g,C as Me,aD as Ge,g as f,B as C,e as b,aA as X,j as E,az as G,F as ee,p as le,E as F,J as He,N as Je,ai as ae}from"./index-B3UlksPs.js";import Oe from"./index-BcfYORtV.js";const T={sendCode:h=>Q.post("user/sendCode",h),register:h=>Q.post("user/register",h)},N=h=>(Ae("data-v-8246243c"),h=h(),De(),h),je=N(()=>d("div",{class:"bg-banner"},null,-1)),Ye={id:"login-box"},Qe=N(()=>d("div",{class:"login-banner"},[d("h1",{style:{"font-size":"50px","font-weight":"normal"}},"æ¬¢è¿"),d("h3",{h1:"",style:{"font-size":"30px","font-weight":"normal"}},"æ¥åˆ°ç§Ÿæˆ·ç³»ç»Ÿ !")],-1)),We={class:"title-container"},Xe={class:"fx-c"},el={class:"flex-bar"},ll={class:"sub-link"},al=N(()=>d("span",{class:"text"},"è¿˜ä¸æ˜¯ä¼šå‘˜?",-1)),ol=N(()=>d("div",{class:"i-ic:round-supervisor-account w-1.5em h-1.5em"},null,-1)),tl={class:"sub-link"},rl=N(()=>d("span",{class:"text"},"å·²ç»æœ‰å¸å·?",-1)),nl=N(()=>d("div",{class:"title-container"},[d("h3",{class:"title"},"å¿˜è®°å¯†ç äº†? ğŸ”’")],-1)),sl={class:"sub-link"},oe=qe({name:"Login",__name:"login",setup(h){var O;const te=Re(),re=ze(),ne=Be(),se=Se(),ue=Fe(),{t:v}=Te();new URL(""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,import.meta.url).href,new URL(""+new URL("logo-CLz_KCqM.png",import.meta.url).href,import.meta.url).href;const y=i("login"),k=i(!1),ie=i(((O=re.query.redirect)==null?void 0:O.toString())??se.settings.home.fullPath),U=i(),_=i("code"),L=i("è·å–éªŒè¯ç "),$=i(!1),u=i({account:V.local.get("login_account")||"",remember:V.local.has("login_account")}),de=(s,l,n)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(u.value.account)?n():n(new Error("è¯·è¾“å…¥åˆæ³•æ‰‹æœºå·"))},pe=(s,l,n)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(u.value.account)?n():n(new Error("è¯·è¾“å…¥åˆæ³•é‚®ç®±"))},q=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]}),ce=()=>{u.value.account.includes("@")?q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"},{validator:pe,trigger:"blur"}]:q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"},{validator:de,trigger:"blur"}]};async function me(){U.value.validateField("account",async s=>{if(s){let l;u.value.account.includes("@")?l={email:u.value.account,type:"login_email"}:l={phone:u.value.account,type:"login_phone_number"};const{status:n}=await T.sendCode(l);n===1&&F.success({message:"å·²å‘é€"})}}),ge()}const ge=()=>{$.value=!0;let s=60;w.value=setInterval(()=>{s>0?(s--,L.value=`è¯·åœ¨${s}såé‡æ–°è·å–`):(clearInterval(w.value),L.value="è·å–éªŒè¯ç ",w.value=null,$.value=!1)},1e3)},z=W(()=>{U.value&&U.value.validate(s=>{if(s){let l={...u.value};_.value==="password"?l.type=1:u.value.account.includes("@")?l.type=3:l.type=2,k.value=!0,ue.login(l).then(()=>{k.value=!1,u.value.remember?V.local.set("login_account",u.value.account):V.local.remove("login_account"),ne.push(ie.value)}).catch(()=>{k.value=!1})}})},3e3),w=i(null),A=i("è·å–éªŒè¯ç "),D=i(!1),R=i(),fe=[{label:"å…¬å¸",value:"company"},{label:"ä¸ªäºº",value:"personal"}],H=i([]),r=i({name:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone",agreeToTheAgreement:!1,companyType:"personal",companyName:"",legalPersonName:"",taxID:""}),ve=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],companyName:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å…¬å¸åç§°"}],companyType:[{required:!0,trigger:"change",message:"è¯·é€‰æ‹©è´¦æˆ·ç±»å‹"}],legalPersonName:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ³•äººå§“å"}],email:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥é‚®ç®±"},{validator:(s,l,n)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r.value.email)?n():n(new Error("è¯·è¾“å…¥åˆæ³•é‚®ç®±"))},trigger:"blur"}],phoneNumber:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·ç "},{validator:(s,l,n)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(r.value.phoneNumber)?n():n(new Error("è¯·è¾“å…¥åˆæ³•æ‰‹æœºå·"))},trigger:"blur"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],country:[{required:!0,trigger:"change",message:"è¯·é€‰æ‹©å›½å®¶"}],name:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]}),ye=async()=>{const s={type:"register_phone_number",email:r.value.email,phone:r.value.phoneNumber};if(r.value.country==="CN"){const{status:l}=await T.sendCode(s);l===1&&F.success({message:"å·²å‘é€"})}else{s.type="register_email";const{status:l}=await T.sendCode(s);l===1&&F.success({message:"å·²å‘é€"})}_e()},_e=()=>{D.value=!0;let s=60;w.value=setInterval(()=>{s>0?(s--,A.value=`è¯·åœ¨${s}såé‡æ–°è·å–`):(clearInterval(w.value),A.value="è·å–éªŒè¯ç ",w.value=null,D.value=!1)},1e3)},be=W(async()=>{R.value&&R.value.validate(async s=>{if(s){r.value.type=r.value.country==="CN"?"phone":"email",r.value.companyName="",r.value.legalPersonName="",r.value.taxID="",delete r.value.agreeToTheAgreement;const{status:l}=await T.register(r.value);l===1&&Ke({type:"success",dangerouslyUseHTMLString:!0,duration:5e3,message:'<span>æ³¨å†ŒæˆåŠŸ,è·³è½¬è‡³<span id="ElNotification-goLogin" style="color:var(--el-color-primary);cursor:pointer;">ç™»å½•</span></span>',onClick(n){n.target.id&&n.target.id==="ElNotification-goLogin"&&(y.value="login",_.value="password",Ze(()=>{u.value.account=r.value.email||r.value.phoneNumber}))}})}})},3e3),B=i(),x=i({account:V.local.get("login_account"),code:"",newPassword:""}),he=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],newPassword:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]});function we(){F({message:"é‡ç½®å¯†ç ä»…æä¾›ç•Œé¢æ¼”ç¤ºï¼Œæ— å®é™…åŠŸèƒ½ï¼Œéœ€å¼€å‘è€…è‡ªè¡Œæ‰©å±•",type:"info"}),B.value&&B.value.validate(s=>{})}Le(()=>{clearInterval(w.value),w.value=null});const J=()=>{q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"}],U.value.resetFields()};return $e(()=>y.value,async s=>{switch(s){case"login":J(),u.value={account:V.local.get("login_account")||"",remember:V.local.has("login_account")};break;case"register":R.value.resetFields(),r.value={name:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone"};break}s==="register"&&(H.value=await te.getCountry())}),(s,l)=>{const n=He,I=Pe,j=m("el-radio-button"),xe=m("el-radio-group"),Ve=m("el-button"),c=m("ElInput"),p=m("ElFormItem"),ke=m("ElCheckbox"),S=m("ElLink"),P=m("ElButton"),Ce=m("el-form"),Ee=m("el-option"),Ne=m("el-select"),Ue=m("ElOption"),Ie=m("ElSelect"),Y=m("ElForm");return g(),K("div",null,[je,a(I,{placement:"bottom-end",class:"i18n-selector"},{default:o(()=>[a(n,{name:"i-ri:translate"})]),_:1}),d("div",Ye,[Qe,Z(a(Ce,{ref_key:"loginFormRef",ref:U,model:e(u),rules:e(q),class:"login-form","validate-on-rule-change":!1},{default:o(()=>[d("div",We,[d("div",Xe,[a(xe,{modelValue:e(_),"onUpdate:modelValue":l[0]||(l[0]=t=>Me(_)?_.value=t:null),size:"large",onChange:J},{default:o(()=>[a(j,{label:"éªŒè¯ç ç™»å½•",value:"code"}),a(j,{label:"å¯†ç ç™»å½•",value:"password"})]),_:1},8,["modelValue"])])]),d("div",null,[a(p,{prop:"account"},{default:o(()=>[a(c,{modelValue:e(u).account,"onUpdate:modelValue":l[1]||(l[1]=t=>e(u).account=t),placeholder:e(v)("app.account"),type:"text",tabindex:"1",onBlur:ce},Ge({prefix:o(()=>[a(n,{name:"i-ri:user-3-fill"})]),_:2},[e(_)==="code"?{name:"append",fn:o(()=>[a(Ve,{type:"primary",disabled:e($),onClick:me},{default:o(()=>[f(C(e(L)),1)]),_:1},8,["disabled"])]),key:"0"}:void 0]),1032,["modelValue","placeholder"])]),_:1}),e(_)==="password"?(g(),b(p,{key:0,prop:"password"},{default:o(()=>[a(c,{modelValue:e(u).password,"onUpdate:modelValue":l[2]||(l[2]=t=>e(u).password=t),type:"password",placeholder:e(v)("app.password"),tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:X(e(z),["enter"])},{prefix:o(()=>[a(n,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder","onKeyup"])]),_:1})):E("",!0),e(_)==="code"?(g(),b(p,{key:1,prop:"code"},{default:o(()=>[a(c,{modelValue:e(u).code,"onUpdate:modelValue":l[3]||(l[3]=t=>e(u).code=t),type:"text",placeholder:e(v)("app.captcha"),tabindex:"2",onKeyup:X(e(z),["enter"])},{prefix:o(()=>[a(n,{name:"i-ep:message"})]),_:1},8,["modelValue","placeholder","onKeyup"])]),_:1})):E("",!0)]),d("div",el,[a(ke,{modelValue:e(u).remember,"onUpdate:modelValue":l[4]||(l[4]=t=>e(u).remember=t),tabindex:"4"},{default:o(()=>[f(" ä¿æŒç™»å½• ")]),_:1},8,["modelValue"]),e(_)==="password"?(g(),b(S,{key:0,type:"primary",underline:!1,onClick:l[5]||(l[5]=t=>y.value="reset")},{default:o(()=>[f(" å¿˜è®°å¯†ç äº†? ")]),_:1})):E("",!0)]),a(P,{loading:e(k),type:"primary",size:"large",style:{width:"100%"},onClick:G(e(z),["prevent"]),tabindex:"5"},{default:o(()=>[f(C(e(v)("app.login")),1)]),_:1},8,["loading","onClick"]),d("div",ll,[al,a(S,{type:"primary",underline:!1,onClick:l[6]||(l[6]=t=>y.value="register")},{default:o(()=>[f(" ç«‹å³æ³¨å†Œ ")]),_:1})])]),_:1},8,["model","rules"]),[[M,e(y)==="login"]]),Z(a(Y,{ref_key:"registerFormRef",ref:R,model:e(r),rules:e(ve),class:"login-form","auto-complete":"on"},{default:o(()=>[d("div",null,[a(p,{prop:"companyType"},{default:o(()=>[a(Ne,{modelValue:e(r).companyType,"onUpdate:modelValue":l[7]||(l[7]=t=>e(r).companyType=t),"value-key":"",placeholder:"è´¦æˆ·ç±»å‹",clearable:"",filterable:""},{prefix:o(()=>[ol]),default:o(()=>[(g(),K(ee,null,le(fe,t=>a(Ee,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(r).companyType==="company"?(g(),b(p,{key:0,prop:"companyName"},{default:o(()=>[a(c,{modelValue:e(r).companyName,"onUpdate:modelValue":l[8]||(l[8]=t=>e(r).companyName=t),placeholder:"è¯·è¾“å…¥å…¬å¸åç§°"},null,8,["modelValue"])]),_:1})):E("",!0),e(r).companyType==="company"?(g(),b(p,{key:1,prop:"taxID"},{default:o(()=>[a(c,{modelValue:e(r).taxID,"onUpdate:modelValue":l[9]||(l[9]=t=>e(r).taxID=t),placeholder:"è¯·è¾“å…¥å…¬å¸ç¨å·"},null,8,["modelValue"])]),_:1})):E("",!0),e(r).companyType==="company"?(g(),b(p,{key:2,prop:"legalPersonName"},{default:o(()=>[a(c,{modelValue:e(r).legalPersonName,"onUpdate:modelValue":l[10]||(l[10]=t=>e(r).legalPersonName=t),placeholder:"è¯·è¾“å…¥æ³•äººå§“å"},null,8,["modelValue"])]),_:1})):E("",!0),a(p,{prop:"name"},{default:o(()=>[a(c,{modelValue:e(r).name,"onUpdate:modelValue":l[11]||(l[11]=t=>e(r).name=t),placeholder:"ç”¨æˆ·å",tabindex:"1"},{prefix:o(()=>[a(n,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),a(p,{prop:"country"},{default:o(()=>[a(Ie,{modelValue:e(r).country,"onUpdate:modelValue":l[12]||(l[12]=t=>e(r).country=t),placeholder:"å›½å®¶",clearable:"",filterable:"",tabindex:"2"},{prefix:o(()=>[a(n,{name:"i-mdi:format-list-bulleted-type"})]),default:o(()=>[(g(!0),K(ee,null,le(e(H),t=>(g(),b(Ue,{label:t.chineseName,value:t.code},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(r).country==="CN"?(g(),b(p,{key:3,prop:"phoneNumber"},{default:o(()=>[a(c,{modelValue:e(r).phoneNumber,"onUpdate:modelValue":l[13]||(l[13]=t=>e(r).phoneNumber=t),placeholder:"æ‰‹æœºå·",tabindex:"3"},{prefix:o(()=>[a(n,{name:"i-ant-design:phone-outlined"})]),_:1},8,["modelValue"])]),_:1})):(g(),b(p,{key:4,prop:"email"},{default:o(()=>[a(c,{modelValue:e(r).email,"onUpdate:modelValue":l[14]||(l[14]=t=>e(r).email=t),placeholder:"é‚®ç®±",tabindex:"3"},{prefix:o(()=>[a(n,{name:"i-mdi:email"})]),_:1},8,["modelValue"])]),_:1})),a(p,{prop:"code"},{default:o(()=>[a(c,{modelValue:e(r).code,"onUpdate:modelValue":l[15]||(l[15]=t=>e(r).code=t),placeholder:"éªŒè¯ç ",tabindex:"4"},{prefix:o(()=>[a(n,{name:"i-ic:baseline-verified-user"})]),append:o(()=>[a(P,{disabled:e(D),onClick:ye},{default:o(()=>[f(C(e(A)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(p,{prop:"password"},{default:o(()=>[a(c,{modelValue:e(r).password,"onUpdate:modelValue":l[16]||(l[16]=t=>e(r).password=t),type:"password",placeholder:"å¯†ç ",tabindex:"5","show-password":""},{prefix:o(()=>[a(n,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),a(P,{tabindex:"7",loading:e(k),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:G(e(be),["prevent"])},{default:o(()=>[f(" æ³¨å†Œ ")]),_:1},8,["loading","onClick"]),d("div",tl,[rl,a(S,{type:"primary",underline:!1,onClick:l[17]||(l[17]=t=>y.value="login")},{default:o(()=>[f(" å»ç™»å½• ")]),_:1})])]),_:1},8,["model","rules"]),[[M,e(y)==="register"]]),Z(a(Y,{ref_key:"resetFormRef",ref:B,model:e(x),rules:e(he),class:"login-form"},{default:o(()=>[nl,d("div",null,[a(p,{prop:"account"},{default:o(()=>[a(c,{modelValue:e(x).account,"onUpdate:modelValue":l[18]||(l[18]=t=>e(x).account=t),placeholder:e(v)("app.account"),type:"text",tabindex:"1"},{prefix:o(()=>[a(n,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(p,{prop:"code"},{default:o(()=>[a(c,{modelValue:e(x).code,"onUpdate:modelValue":l[19]||(l[19]=t=>e(x).code=t),placeholder:e(v)("app.code"),type:"text",tabindex:"2"},{prefix:o(()=>[a(n,{name:"i-ic:baseline-verified-user"})]),append:o(()=>[a(P,null,{default:o(()=>[f(C(e(v)("app.sendCaptcha")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(p,{prop:"newPassword"},{default:o(()=>[a(c,{modelValue:e(x).newPassword,"onUpdate:modelValue":l[20]||(l[20]=t=>e(x).newPassword=t),type:"password",placeholder:e(v)("app.newPassword"),tabindex:"3","show-password":""},{prefix:o(()=>[a(n,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),a(P,{loading:e(k),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:G(we,["prevent"])},{default:o(()=>[f(C(e(v)("app.check")),1)]),_:1},8,["loading"]),d("div",sl,[a(S,{type:"primary",underline:!1,onClick:l[21]||(l[21]=t=>y.value="login")},{default:o(()=>[f(C(e(v)("app.goLogin")),1)]),_:1})])]),_:1},8,["model","rules"]),[[M,e(y)==="reset"]])]),a(Oe)])}}});typeof ae=="function"&&ae(oe);const ml=Je(oe,[["__scopeId","data-v-8246243c"]]);export{ml as default};
