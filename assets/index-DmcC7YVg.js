
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as be,d as fe,aM as _e,r as b,a2 as R,D as ve,a as u,al as ge,o as s,b as z,f as t,w as a,i as e,am as C,a3 as $,a4 as G,e as p,g as f,G as _,l as k,j as d,P as he,L as ye,aO as Ie,aP as Ce,p as ke,aK as Se,aL as we,F as Ve,aE as w,_ as Le}from"./index-AlQFjtA_.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-DMz9BxI_.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-DPvwuZHR.js";import{u as Ee}from"./user_customer-Bs0Qz78g.js";import"./user_customer-jGGX54SM.js";const Ne={list:g=>be.post("callback/getMemberChildSurveyRecord",g)},Ue=g=>(Se("data-v-8cb8f37f"),g=g(),we(),g),ze=Ue(()=>Ve("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Pe=fe({name:"RecordSurveyIndex",__name:"index",setup(g){const H=Ee(),{getParams:A,pagination:h,onSizeChange:q,onCurrentChange:O}=_e(),N=b(!1),P=b([]),K=b(""),i=b([]),V=b(!0),L=b(!1),j=b("default"),D=b(!1),E=b([{prop:"memberChildId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberChildName",label:"所属组",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),r=R({memberChildId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),y=R({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间果断","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function Q(){r.pageNo=1,S()}function J(c){q(c).then(()=>S())}function T(c=1){O(c).then(()=>S())}async function S(){N.value=!0;const c={...A(),...r},{data:l}=await Ne.list(c);P.value=l.memberChildSurveyRecordInfoList,h.value.total=l.total,N.value=!1}function W(c){K.value=c}function X(){Object.assign(r,{memberChildId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),S()}return ve(async()=>{y.customerList=await H.getCustomerList(),E.value.forEach(c=>{c.checked&&i.value.push(c.prop)}),S()}),(c,l)=>{const I=u("el-input"),v=u("el-form-item"),M=u("el-option"),x=u("el-select"),B=ye,U=u("ElButton"),Y=u("ElFormItem"),Z=u("ElForm"),ee=De,te=u("ElDivider"),le=je,oe=u("el-button"),ae=Ie,ne=Ce,re=u("el-row"),m=u("el-table-column"),F=u("ElTableColumn"),se=u("el-empty"),ie=u("el-table"),ue=u("ElPagination"),pe=ke,de=ge("loading");return s(),z("div",{class:he({"absolute-container":e(D)})},[t(pe,null,{default:a(()=>[t(ee,{"show-toggle":!1},{default:a(({fold:o,toggle:ce})=>[t(Z,{model:e(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).memberChildId,"onUpdate:modelValue":l[0]||(l[0]=n=>e(r).memberChildId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:1}),C(t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).memberChildGroupId,"onUpdate:modelValue":l[1]||(l[1]=n=>e(r).memberChildGroupId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:2},1536),[[w,!o]]),t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).tenantSupplierId,"onUpdate:modelValue":l[2]||(l[2]=n=>e(r).tenantSupplierId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).projectId,"onUpdate:modelValue":l[3]||(l[3]=n=>e(r).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),C(t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).name,"onUpdate:modelValue":l[4]||(l[4]=n=>e(r).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[w,!o]]),C(t(v,{label:""},{default:a(()=>[t(x,{modelValue:e(r).projectName,"onUpdate:modelValue":l[5]||(l[5]=n=>e(r).projectName=n),clearable:"",placeholder:"客户简称"},{default:a(()=>[(s(!0),z($,null,G(e(y).customerList,n=>(s(),p(M,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!o]]),C(t(v,{label:""},{default:a(()=>[t(I,{modelValue:e(r).ip,"onUpdate:modelValue":l[6]||(l[6]=n=>e(r).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[w,!o]]),C(t(v,{label:""},{default:a(()=>[t(x,{modelValue:e(r).surveyStatus,"onUpdate:modelValue":l[7]||(l[7]=n=>e(r).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:a(()=>[(s(!0),z($,null,G(e(y).surveyStatusList,(n,me)=>(s(),p(M,{label:n,value:me+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!o]]),t(Y,null,{default:a(()=>[t(U,{type:"primary",onClick:l[8]||(l[8]=n=>T())},{icon:a(()=>[t(B,{name:"i-ep:search"})]),default:a(()=>[f(" 筛选 ")]),_:1}),t(U,{onClick:X},{icon:a(()=>[ze]),default:a(()=>[f(" 重置 ")]),_:1}),t(U,{link:"",onClick:ce},{icon:a(()=>[t(B,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[f(" "+_(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(te,{"border-style":"dashed"}),t(re,null,{default:a(()=>[t(le),t(ne,null,{default:a(()=>[t(oe,{size:"default"},{default:a(()=>[f(" 导出 ")]),_:1}),t(ae,{border:e(V),"onUpdate:border":l[9]||(l[9]=o=>k(V)?V.value=o:null),tableAutoHeight:e(D),"onUpdate:tableAutoHeight":l[10]||(l[10]=o=>k(D)?D.value=o:null),checkList:e(i),"onUpdate:checkList":l[11]||(l[11]=o=>k(i)?i.value=o:null),columns:e(E),"onUpdate:columns":l[12]||(l[12]=o=>k(E)?E.value=o:null),"line-height":e(j),"onUpdate:lineHeight":l[13]||(l[13]=o=>k(j)?j.value=o:null),stripe:e(L),"onUpdate:stripe":l[14]||(l[14]=o=>k(L)?L.value=o:null),style:{"margin-left":"12px"},onQueryData:Q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((s(),p(ie,{border:e(V),data:e(P),size:e(j),stripe:e(L),onSelectionChange:W},{empty:a(()=>[t(se,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[t(m,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),e(i).includes("memberChildId")?(s(),p(m,{key:0,align:"center",prop:"memberChildId","show-overflow-tooltip":"",label:"子会员ID"})):d("",!0),e(i).includes("memberChildName")?(s(),p(m,{key:1,align:"center",prop:"memberChildName","show-overflow-tooltip":"",label:"所属组"})):d("",!0),e(i).includes("tenantSupplierId")?(s(),p(m,{key:2,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):d("",!0),e(i).includes("projectId")?(s(),p(m,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):d("",!0),e(i).includes("randomIdentityId")?(s(),p(m,{key:4,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"})):d("",!0),e(i).includes("projectName")?(s(),p(m,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称/客户简称"})):d("",!0),e(i).includes("allocationType")?(s(),p(m,{key:6,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:a(({row:o})=>[f(_(e(y).allocationTypeList[o.allocationType-1]),1)]),_:1})):d("",!0),e(i).includes("price")?(s(),p(m,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"子会员价/供应商价/原价"},{default:a(({row:o})=>[f(_(o.memberChildPrice||0)+"/ "+_(o.supplierPrice||0)+"/ "+_(o.doMoneyPrice||0),1)]),_:1})):d("",!0),e(i).includes("ipBelong")?(s(),p(m,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):d("",!0),e(i).includes("surveyTime")?(s(),p(m,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:a(({row:o})=>[f(_(o.surveyTime||0)+"/ "+_(o.projectTime||0),1)]),_:1})):d("",!0),e(i).includes("surveyStatus")?(s(),p(F,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:a(({row:o})=>[f(_(e(y).surveyStatusList[o.surveyStatus-1]),1)]),_:1})):d("",!0),e(i).includes("viceStatus")?(s(),p(F,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:a(({row:o})=>[f(_(e(y).viceStatusList[o.viceStatus-1]),1)]),_:1})):d("",!0)]),_:1},8,["border","data","size","stripe"])),[[de,e(N)]]),t(ue,{"current-page":e(h).page,total:e(h).total,"page-size":e(h).size,"page-sizes":e(h).sizes,layout:e(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Re=Le(Pe,[["__scopeId","data-v-8cb8f37f"]]);export{Re as default};
