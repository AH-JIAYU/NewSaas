
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import R from"./index-D9RnVFid.js";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang-Dq8aOxUq.js";import{u as F}from"./projectManagement_list-Bpvk91tN.js";import{d as Q,ac as z,r as i,X as N,n as O,Z as Y,a as b,o as u,b as g,f as A,w as m,g as L,O as I,e as h,F as W,t as X,v as _,j as T,A as Z,ap as U,aI as P,aJ as G,M as K}from"./index-BDq3fI5e.js";import"./user_customer-DT397afO.js";import"./download-Dxrma3XS.js";import"./zh_Hans-BiAfgf-k.js";import"./index-Bmb2yTfB.js";/* empty css              */import"./projectManagement-CUXUh4Av.js";import"./index-BlIpspZX.js";import"./index.vue_vue_type_script_setup_true_lang-CuzXR9zZ.js";import"./index-YXBc8j3x.js";import"./index-BBdzIHbt.js";import"./index-BPWP68ti.js";import"./clipboard-DhgZaUm3.js";import"./index-KgSZdWNg.js";import"./department-Bs28s7yo.js";import"./position_manage-CFCuA6eT.js";import"./configuration_role-CtxVXTRc.js";import"./tenant_role-Brh2phNN.js";import"./configuration_manager-DzYLesIb.js";import"./configuration_siteSetting-E__Sut-i.js";import"./configuration_site_setting-CXFWKlxl.js";import"./apiLoading-BhJI3t5Q.js";import"./stagedData-DuQYjVGz.js";import"./index.vue_vue_type_script_setup_true_lang-DlL9nL1w.js";import"./otherFunctions_screenLibrary-Cz1o9C6t.js";import"./pdf-BhHCHn5I.js";const q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAAXNSR0IArs4c6QAAAl9JREFUOE+tlV1IVFEQx3/jmmWrZYUsUVRghkoFQdGDuKxFD0IkBUlpIK09SfVoUEEmFfVQDxYEhbtFFn1QyhZEX7j2IIhUFCWFlaJlRRFhkaXunbxra/fuutqCBy5c5sz8zszc/50jxFlrT+mcISeVYuBGWAlkAL9U6RZoEwhoDzeC1TIUjZBog8evGWpwUITd8Q602DsEdjV55Y7V1wZ1+zU7SQkAOf8B/OciHM10sv9aiYRM4yh0zXmdZ4R4/rdMG1MEXE74+CP+UQo1zV45MAotqtWp/U4eIOSPFVa5CopzoegCGDpODQYbgzukMZxpoV+9qtTFc09PgUAZFF+Cvt/jNqaLbrLDUE+ddiAsNt/npsOZDbGBaSkwEBp5rCvYCcdbbKYtUnBWlzscPI2Yp08B9yJ7oNnTqny49wYef7Dv9fbBs0822xUZzrJsOMv68YpyJMH9cjjRAjdfTaiLHin0aZXCsUmDKkNjQpe5oGSpVYaQvwDefoXeKFnVBGHQ2mcT6vFpOXDOmmnWbCjKtkM35cGjXuj6Zq/pdBuEDItN6ZQCn+Y54MUkln99RFI+bQdy44ET+lDKtoj4S1W5aEKnJUNykh1vQhu3wslWuPs69uifg6N/2ntT72Ho5qvq+PydNoQVe92wLmtC2dgctjeM9NpQih9WSCB6oDxZOJPMWamJQV9+gf5BjjRXyD4z0jb6PH7NQWlIePTBocw0qmNGXyS31bU6IzWNw8DOifJVaBfYE/TKLatvzOSPbHrqdb4MUKqwHlgCuMzrBOgBWsXgctM7blMtVpWGw/8A0EXSXcO+hTEAAAAASUVORK5CYII=",J=r=>(P("data-v-dd992f72"),r=r(),G(),r),H={key:0,src:q,alt:"",style:{"margin-right":"5px",width:"16px",height:"16px"}},$=J(()=>_("div",{style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},null,-1)),ee=Q({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(r,{expose:y,emit:V}){const B=F(),l=r,x=V,C=z("currentProjectTimeline"),D=i(),e=i(l.leftTabsData),S=i(l.validateTopTabs),v=i(),j=i(0),t=i(0);function k(){const{projectId:a,parentId:o,projectIdentification:p,countryIdList:c,uidUrl:f,...s}=U(e.value[0]);e.value[t.value].projectId&&(s.projectId=e.value[t.value].projectId,s.parentId=e.value[t.value].parentId),v.value[t.value].getUpLoad(s.descriptionUrl),e.value.splice(t.value,1,s)}function E(){t.value=++j.value;const{projectId:a,...o}=U(B.initialTopTabsData);e.value.push(o)}function M(a){e.value.splice(a,1),S.value.splice(a,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),j.value=Math.max(0,e.value.length-1))}return N(()=>t.value,(a,o)=>{l.validateAll.reduce((c,f,s)=>(f==="rejected"&&c.push(s),c),[]).includes(o)&&x("validate"),C(e.value[t.value].releaseTime)}),O(()=>{for(let a=0;a<v.value.length;a++)v.value[a].getUpLoad(e.value[a].descriptionUrl)}),e.value.forEach((a,o)=>{const p=i(null);Y(`formRef${o}`,p)}),y({activeLeftTab:t}),(a,o)=>{const p=b("el-button"),c=b("el-tooltip"),f=b("el-tab-pane"),s=b("el-tabs");return u(),g("div",null,[A(p,{class:I((l.title==="新增","button")),disabled:e.value.length>29||l.title==="编辑"&&e.value[0].parentId!=="0",onClick:o[0]||(o[0]=n=>E())},{default:m(()=>[L(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(u(),h(s,{key:0,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value=n),"tab-position":"left",onTabRemove:M,class:I(l.title==="新增"?"":"editHideCloseButton")},{default:m(()=>[(u(!0),g(W,null,X(e.value,(n,d)=>(u(),h(f,{key:d,style:{position:"relative"},closable:e.value.length!==1,name:d},{label:m(()=>[_("div",{class:I(["flex-c",l.validateAll[d]&&l.validateAll[d]==="rejected"?"validateRejected":""])},[n.parentId=="0"?(u(),g("img",H)):T("",!0),A(c,{class:"box-item",effect:"dark",content:n.name||"项目名称",placement:"top-start"},{default:m(()=>[_("span",null,Z(n.name||"项目名称"),1)]),_:2},1032,["content"])],2)]),default:m(()=>[$,A(R,{ref_for:!0,ref_key:"topTabsRef",ref:v,"left-tab":n,title:l.title,"tab-index":d,onSyncProject:k},null,8,["left-tab","title","tab-index"])]),_:2},1032,["closable","name"]))),128)),A(w,{ref_key:"settingsRef",ref:D},null,512)]),_:1},8,["modelValue","class"])):T("",!0)])}}}),De=K(ee,[["__scopeId","data-v-dd992f72"]]);export{De as default};
