
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,r as s,aK as de,a5 as me,k as fe,a as n,p as _e,q as B,o as p,b as F,f as e,w as l,az as N,F as ve,t as ge,g as u,H as $,e as v,j as h,i as g,S as be,N as ke,aM as he,aN as ye,ap as Ce,aG as we,aH as Se,s as ze,R as Ee}from"./index-DA77yZlp.js";import{_ as Ve}from"./index.vue_vue_type_style_index_0_lang-Df4KnnPF.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-D4NhD85G.js";import{_ as Ie}from"./index.vue_vue_type_script_setup_true_lang-BaBlx7MB.js";import{u as $e}from"./user_customer-DzoC3-q9.js";import{a as xe}from"./position_manage-DJTTc2Dl.js";import"./user_customer-BPkI_TYH.js";const Le=b=>(we("data-v-149d302d"),b=b(),Se(),b),Ue=Le(()=>ze("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Re=pe({name:"position_manage",__name:"list",setup(b){const P=$e(),A=s([]),{pagination:d,onSizeChange:K,onCurrentChange:O,onSortChange:He}=de(),M=s(""),x=s([]),k=s(!0),y=s(),C=s(!1),c=s([]),w=s(!0);s(!1);const S=s("default"),z=s(!1),j=s([]),q=[{lable:"启用",value:1},{lable:"禁用",value:2}],E=s([{label:"职位ID",prop:"id",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"name",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"count",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),r=me({page:1,limit:10,id:null,name:"",active:null});function T(){y.value.showEdit()}function G(o){y.value.showEdit(JSON.stringify(o))}function J(o){j.value=o}function Q(){Object.assign(r,{page:1,limit:10,id:null,name:"",active:null}),_()}function W(o){K(o).then(()=>{r.limit=o,_()})}function m(o=1){O(o).then(()=>{r.page=o,_()})}async function _(){try{k.value=!0,A.value=await P.getCustomerList();const{data:o}=await xe.list(r);x.value=o.data,d.value.total=parseInt(o.total)||0,k.value=!1}catch{}finally{k.value=!1}}return fe(()=>{E.value.forEach(o=>{o.checked&&c.value.push(o.prop)}),_()}),(o,t)=>{const L=n("el-input"),V=n("el-form-item"),X=n("ElOption"),Y=n("el-select"),U=ke,D=n("ElButton"),Z=n("ElFormItem"),ee=n("el-form"),te=De,le=n("ElDivider"),I=n("el-button"),ae=Ve,oe=he,ne=ye,se=n("el-row"),f=n("el-table-column"),ie=n("el-empty"),re=n("el-table"),ue=n("ElPagination"),ce=Ce,R=_e("loading");return B((p(),F("div",{class:be({"absolute-container":C.value})},[e(ce,null,{default:l(()=>[e(te,{"show-toggle":!1},{default:l(({fold:a,toggle:H})=>[e(ee,{model:r.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(V,{label:""},{default:l(()=>[e(L,{modelValue:r.id,"onUpdate:modelValue":t[0]||(t[0]=i=>r.id=i),placeholder:"职位ID",clearable:"",onKeydown:t[1]||(t[1]=N(i=>m(),["enter"]))},null,8,["modelValue"])]),_:1}),e(V,{label:""},{default:l(()=>[e(L,{modelValue:r.name,"onUpdate:modelValue":t[2]||(t[2]=i=>r.name=i),placeholder:"职位名称",clearable:"",onKeydown:t[3]||(t[3]=N(i=>m(),["enter"]))},null,8,["modelValue"])]),_:1}),e(V,{label:""},{default:l(()=>[e(Y,{modelValue:r.active,"onUpdate:modelValue":t[4]||(t[4]=i=>r.active=i),placeholder:"状态",clearable:"",filterable:"",onChange:t[5]||(t[5]=i=>m())},{default:l(()=>[(p(),F(ve,null,ge(q,i=>e(X,{label:i.lable,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(Z,null,{default:l(()=>[e(D,{type:"primary",onClick:t[6]||(t[6]=i=>m())},{icon:l(()=>[e(U,{name:"i-ep:search"})]),default:l(()=>[u(" 筛选 ")]),_:1}),e(D,{onClick:Q},{icon:l(()=>[Ue]),default:l(()=>[u(" 重置 ")]),_:1}),e(D,{disabled:"",link:"",onClick:H},{icon:l(()=>[e(U,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[u(" "+$(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(le,{"border-style":"dashed"}),e(se,{gutter:24},{default:l(()=>[e(ae,null,{default:l(()=>[e(I,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:T},{default:l(()=>[u(" 新增职位 ")]),_:1})]),_:1}),e(ne,null,{default:l(()=>[e(I,{size:"default",onClick:t[7]||(t[7]=()=>{})},{default:l(()=>[u(" 导出 ")]),_:1}),e(oe,{border:w.value,"onUpdate:border":t[8]||(t[8]=a=>w.value=a),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":t[9]||(t[9]=a=>C.value=a),checkList:c.value,"onUpdate:checkList":t[10]||(t[10]=a=>c.value=a),columns:E.value,"onUpdate:columns":t[11]||(t[11]=a=>E.value=a),"line-height":S.value,"onUpdate:lineHeight":t[12]||(t[12]=a=>S.value=a),stripe:z.value,"onUpdate:stripe":t[13]||(t[13]=a=>z.value=a),style:{"margin-left":"12px"},onQueryData:m},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),B((p(),v(re,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:w.value,size:S.value,stripe:z.value,onSelectionChange:J},{empty:l(()=>[e(ie,{description:"暂无数据"})]),default:l(()=>[e(f,{align:"center",type:"selection"}),c.value.includes("id")?(p(),v(f,{key:0,prop:"id","show-overflow-tooltip":"",align:"center",label:"职位ID"})):h("",!0),c.value.includes("name")?(p(),v(f,{key:1,prop:"name","show-overflow-tooltip":"",align:"center",label:"职位名称"})):h("",!0),c.value.includes("count")?(p(),v(f,{key:2,prop:"count","show-overflow-tooltip":"",align:"center",label:"账户数"},{default:l(({row:a})=>[u($(a.count?a.count:"-"),1)]),_:1})):h("",!0),c.value.includes("remark")?(p(),v(f,{key:3,prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"},{default:l(({row:a})=>[u($(a.remark?a.remark:"-"),1)]),_:1})):h("",!0),e(f,{align:"center",fixed:"right",label:"操作",width:"170"},{default:l(({row:a})=>[e(I,{size:"small",plain:"",type:"primary",onClick:H=>G(a)},{default:l(()=>[u(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[R,!1]]),e(ue,{"current-page":g(d).page,total:g(d).total,"page-size":g(d).size,"page-sizes":g(d).sizes,layout:g(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:m,onSizeChange:W},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ie,{onSuccess:_,ref_key:"editRef",ref:y},null,512)]),_:1})],2)),[[R,k.value]])}}}),Me=Ee(Re,[["__scopeId","data-v-149d302d"]]);export{Me as default};
