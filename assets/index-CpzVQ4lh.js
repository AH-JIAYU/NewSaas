
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ye,d as fe,l as _e,aN as be,r as _,a3 as U,n as he,a as b,q as ve,o as t,b as i,f as c,w as o,i as s,g as n,A as I,s as ke,e as a,aM as Se,j as l,y as m,z as y,N as v,F as V,b9 as ge,ba as Ie,be as xe,ao as Ce,aH as Le,aI as Ne,L as Te}from"./index-UdTJk9b4.js";import{_ as De}from"./index-DHQLEq5j.js";import{_ as Pe}from"./index.vue_vue_type_style_index_0_lang-BRf7mCgh.js";import{_ as je}from"./index-q5VR0I38.js";import{u as ze}from"./user_customer-DYpqt0Ba.js";import"./index-EvIG84aZ.js";import"./index.vue_vue_type_script_setup_true_lang-ChIIBAu4.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-BfayImql.js";const Be={list:S=>ye.post("callback/getMemberChildSurveyRecord",S)},Fe=S=>(Le("data-v-8a58588c"),S=S(),Ne(),S),Re={class:"copyId flex-s tableSmall"},Ee={class:"id oneLine idFont"},Me={class:"tableBig oneLine"},He={class:"copyId tableSmall flex-s"},Ue={class:"id oneLine"},Ve={key:0,class:"copyId flex-s tableSmall"},Ae={class:"oneLine color3"},$e={class:"id oneLine idFont"},qe={key:1},Oe={class:"copyId flex-s tableSmall color3"},we={class:"id oneLine idFont"},Ge={key:0},Qe={key:0},Je={class:"copyId tableSmall flex-s"},Ke={class:"id oneLine idFont"},We={key:1,class:"id"},Xe={key:0},Ye={class:"copyId tableSmall flex-s"},Ze={class:"id oneLine idFont"},et={key:1},tt={key:0,class:"copyId tableSmall flex-s"},ot={class:"oneLine"},lt={key:0,class:"id oneLine idFont"},at={key:1,class:"id"},st={key:0,class:"tableBig"},nt={key:1},rt={class:"copyId tableSmall flex-s"},ct={class:"id oneLine"},it={key:0,class:"fontC-System"},dt={key:0,class:"fontC-System",style:{color:"#fd8989"}},ut=Fe(()=>m("br",null,null,-1)),pt={key:5,style:{color:"#777"},class:"i-healthicons:no w-1.3em h-1.3em"},mt={key:6,style:{color:"#4797fb"},class:"i-healthicons:yes w-1.3em h-1.3em"},yt={key:7,style:{color:"#f1756c"},class:"i-healthicons:no w-1.3em h-1.3em"},ft={key:0},_t={key:0},bt=fe({name:"memberSurveyRecords",__name:"index",setup(S){const A=_e(),$=ze(),{getParams:q,pagination:g,onSizeChange:O,onCurrentChange:w}=be(),C=_(!1),F=_([]),G=_(""),u=_([]),L=_(!1),N=_(!1),T=_("default"),D=_(!1),Q=_(),R=_(),J=_("formSearch-memberSurveyRecords"),P=_([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID",sortable:!0,checked:!0},{prop:"tenantId",label:"租户ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortable:!0,checked:!0},{prop:"memberPrice",label:"成本价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),j=U({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:"",tenantId:"",memberType:"",id:""}),z=U({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function K(){j.pageNo=1,x()}function W(p){O(p).then(()=>x())}function E(p=1){w(p).then(()=>x())}async function x(){try{C.value=!0;const p={...q(),...j},{data:d}=await Be.list(p);F.value=d.memberChildSurveyRecordInfoList,Q.value=d.currencyType,g.value.total=d.total,C.value=!1}catch{}finally{C.value=!1}}function X(p){G.value=p}function Y(){Object.assign(j,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:"",tenantId:"",memberType:"",id:""}),x()}he(async()=>{z.customerList=await $.getCustomerList(),z.country=await A.getCountry(),P.value.forEach(p=>{p.checked&&u.value.push(p.prop)}),x(),R.value=[{index:1,show:!0,type:"input",modelName:"id",placeholder:"点击ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:4,show:!0,type:"select",modelName:"memberType",placeholder:"会员类型",option:"memberType",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID"},{index:7,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份"},{index:8,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:9,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:10,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:"surveyStatus",optionLabel:"label",optionValue:"value"},{index:11,show:!0,type:"select",modelName:"viceStatus",placeholder:"副状态",option:"viceStatus",optionLabel:"label",optionValue:"value"},{index:12,show:!0,type:"input",modelName:"tenantId",placeholder:"租户ID"}]});const Z={memberType:()=>[{label:"外部会员",value:1},{label:"内部会员",value:2},{label:"外包会员",value:3}],surveyStatus:()=>z.surveyStatusList.map((p,d)=>({label:p,value:d+1})),viceStatus:()=>z.viceStatusList.map((p,d)=>({label:p,value:d+1}))},h=_();function ee(p){p?h.value=p.id:h.value=""}return(p,d)=>{const te=je,oe=b("ElDivider"),le=Pe,ae=b("el-button"),se=ge,ne=Ie,re=b("el-row"),f=b("el-table-column"),r=b("el-tag"),k=De,M=xe,B=b("el-text"),ce=b("el-tooltip"),H=b("ElTableColumn"),ie=b("el-empty"),de=b("el-table"),ue=b("ElPagination"),pe=Ce,me=ve("loading");return t(),i("div",{class:v({"absolute-container":s(D)})},[c(pe,null,{default:o(()=>[c(te,{formSearchList:s(R),formSearchName:s(J),onCurrentChange:E,onOnReset:Y,model:s(j),formOption:Z},null,8,["formSearchList","formSearchName","model"]),c(oe,{"border-style":"dashed"}),c(re,null,{default:o(()=>[c(le),c(ne,null,{default:o(()=>[c(ae,{size:"default"},{default:o(()=>[n(" 导出 ")]),_:1}),c(se,{border:s(L),"onUpdate:border":d[0]||(d[0]=e=>I(L)?L.value=e:null),tableAutoHeight:s(D),"onUpdate:tableAutoHeight":d[1]||(d[1]=e=>I(D)?D.value=e:null),checkList:s(u),"onUpdate:checkList":d[2]||(d[2]=e=>I(u)?u.value=e:null),columns:s(P),"onUpdate:columns":d[3]||(d[3]=e=>I(P)?P.value=e:null),"line-height":s(T),"onUpdate:lineHeight":d[4]||(d[4]=e=>I(T)?T.value=e:null),stripe:s(N),"onUpdate:stripe":d[5]||(d[5]=e=>I(N)?N.value=e:null),style:{"margin-left":"12px"},onQueryData:K},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ke((t(),a(de,{border:s(L),data:s(F),size:s(T),stripe:s(N),"highlight-current-row":"",onSelectionChange:X,onCurrentChange:ee},{empty:o(()=>[c(ie,{image:s(Se),"image-size":300},null,8,["image"])]),default:o(()=>[c(f,{align:"left",type:"selection"}),s(u).includes("id")?(t(),a(f,{key:0,width:"200",align:"left",prop:"id","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:o(({row:e})=>[e.surveySource===1?(t(),a(r,{key:0,effect:"dark",type:"primary"},{default:o(()=>[n("内部会员")]),_:1})):l("",!0),e.surveySource===2?(t(),a(r,{key:1,effect:"dark",type:"warning"},{default:o(()=>[n("外部会员")]),_:1})):l("",!0),e.surveySource===3?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#aed500",border:"none"}},{default:o(()=>[n("外包会员")]),_:1})):l("",!0),m("div",Re,[m("div",Ee,y(e.id?e.id:"-"),1),c(k,{content:e.id,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])])]),_:1})):l("",!0),s(u).includes("projectId")?(t(),a(f,{key:1,width:"200",align:"left",prop:"projectId","show-overflow-tooltip":"",label:"项目"},{default:o(({row:e})=>[m("div",Me,"名称: "+y(e.projectName),1),m("div",He,[m("div",Ue,y(e.projectId?e.projectId:"-"),1),e.projectId?(t(),a(k,{key:0,content:e.projectId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])):l("",!0)])]),_:1})):l("",!0),s(u).includes("randomIdentityId")?(t(),a(f,{key:2,width:"200",align:"left","show-overflow-tooltip":"",label:"随机身份"},{default:o(({row:e})=>[e.surveySource!==3?(t(),i("div",Ve,[m("div",Ae,[m("span",$e,y(e.randomIdentityId?e.randomIdentityId:"-"),1)]),e.randomIdentityId?(t(),a(k,{key:0,content:e.randomIdentityId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])):l("",!0)])):(t(),i("span",qe,"-"))]),_:1})):l("",!0),s(u).includes("tenantId")?(t(),a(f,{key:3,width:"200",align:"left","show-overflow-tooltip":"",label:"租户ID"},{default:o(({row:e})=>[m("div",Oe,[m("div",we,y(e.tenantId?e.tenantId:"-"),1),c(k,{content:e.tenantId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])])]),_:1})):l("",!0),s(u).includes("surveySource")?(t(),a(f,{key:4,width:"200",align:"left","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[e.surveySource===1||e.surveySource===3?(t(),i("div",Ge,[e.memberId?(t(),i("div",Qe,[m("div",Je,[m("div",Ke,y(e.memberId?e.memberId:"-"),1),c(k,{content:e.memberId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])])])):(t(),i("span",We,"-"))])):l("",!0)]),_:1})):l("",!0),s(u).includes("memberChildId")?(t(),a(f,{key:5,width:"200",align:"left","show-overflow-tooltip":"",label:"子会员ID"},{default:o(({row:e})=>[e.surveySource&&e.surveySource!=2?(t(),i("div",Xe,[m("div",null,[m("div",Ye,[m("div",Ze,y(e.memberChildId?e.memberChildId:"-"),1),c(k,{content:e.memberChildId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])])])])):(t(),i("span",et,"-"))]),_:1})):l("",!0),s(u).includes("tenantSupplierId")?(t(),a(f,{key:6,width:"200",align:"left","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[e.surveySource===1||e.surveySource===3?(t(),i("div",tt,[m("div",ot,[e.tenantSupplierId?(t(),i("span",lt,y(e.tenantSupplierId?e.tenantSupplierId:"-"),1)):(t(),i("span",at,"-"))]),e.tenantSupplierId?(t(),a(k,{key:0,content:e.tenantSupplierId,class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])):l("",!0)])):l("",!0)]),_:1})):l("",!0),s(u).includes("customerShortName")?(t(),a(f,{key:7,align:"left",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"},{default:o(({row:e})=>[e.surveySource!==3?(t(),i("div",st,y(e.customerShortName?e.customerShortName:"-"),1)):(t(),i("span",nt,"-"))]),_:1})):l("",!0),s(u).includes("ipBelong")?(t(),a(f,{key:8,align:"left",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/区域"},{default:o(({row:e})=>[c(r,{type:"primary"},{default:o(()=>[n(y(e.ipBelong.split("/")[1]?e.ipBelong.split("/")[1]:"-"),1)]),_:2},1024),m("div",rt,[m("div",ct,y(e.ipBelong.split("/")[0]?e.ipBelong.split("/")[0]:"-"),1),c(k,{content:e.ipBelong.split("/")[0],class:v({rowCopy:"rowCopy",current:e.id===s(h)})},null,8,["content","class"])])]),_:1})):l("",!0),s(u).includes("allocationType")?(t(),a(f,{key:9,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型",fixed:"right"},{default:o(({row:e})=>[e.allocationType===1?(t(),a(r,{key:0,effect:"plain",type:"info",class:"mx-1"},{default:o(()=>[n("未分配")]),_:1})):l("",!0),e.allocationType===2?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("供应商")]),_:1})):l("",!0),e.allocationType===3?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("内部站")]),_:1})):l("",!0),e.allocationType===4?(t(),a(r,{key:3,effect:"dark",style:{"background-color":"#ffac54",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("合作商")]),_:1})):l("",!0)]),_:1})):l("",!0),s(u).includes("doMoneyPrice")?(t(),a(f,{key:10,align:"left",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"项目价"},{default:o(({row:e})=>[e.surveySource!=3?(t(),i("div",it,[c(M),n(y(e.doMoneyPrice||0),1)])):l("",!0)]),_:1})):l("",!0),s(u).includes("memberPrice")?(t(),a(f,{key:11,align:"left",prop:"memberPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"成本价"},{default:o(({row:e})=>[e.surveySource!=3?(t(),i("div",dt,[c(M),e.memberId?(t(),i(V,{key:0},[n(y(e.memberPrice||0),1)],64)):(t(),i(V,{key:1},[n(y(e.supplierPrice||0),1)],64))])):l("",!0)]),_:1})):l("",!0),s(u).includes("surveyTime")?(t(),a(f,{key:12,width:"120",align:"left",fixed:"right","show-overflow-tooltip":"",label:"调查时间"},{default:o(({row:e})=>[c(ce,{placement:"top"},{content:o(()=>[m("div",null,[c(B,{style:{color:"#fff"}},{default:o(()=>[n("开始时间："+y(e.surveyStartTime?e.surveyStartTime:"-"),1)]),_:2},1024),ut,c(B,{style:{color:"#fff"}},{default:o(()=>[n("结束时间："+y(e.surveyEndTime?e.surveyEndTime:"-"),1)]),_:2},1024)])]),default:o(()=>[c(r,{effect:"plain",type:"info"},{default:o(()=>[n(y(e.surveyTime?e.surveyTime+"min":0)+"/ "+y(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:2},1024)]),_:1})):l("",!0),s(u).includes("surveyStatus")?(t(),a(H,{key:13,align:"left","show-overflow-tooltip":"",fixed:"right",width:"120",prop:"",label:"调查状态"},{default:o(({row:e})=>[e.surveyStatus===3?(t(),a(r,{key:0,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("配额满")]),_:1})):l("",!0),e.surveyStatus===1?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#379aff",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[n("完成")]),_:1})):l("",!0),e.surveyStatus===2?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[n("被甄别")]),_:1})):l("",!0),e.surveyStatus===4?(t(),a(r,{key:3,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("安全终止")]),_:1})):l("",!0),e.surveyStatus===5?(t(),a(r,{key:4,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:o(()=>[n("未完成")]),_:1})):l("",!0),e.settlementStatus===0&&e.surveyStatus===1&&(e.viceStatus===3||e.viceStatus===4||e.viceStatus===5||e.viceStatus===6)?(t(),i("div",pt)):l("",!0),e.settlementStatus===1&&(e.viceStatus===3||e.viceStatus===4||e.viceStatus===5||e.viceStatus===6)?(t(),i("div",mt)):l("",!0),e.settlementStatus===2&&(e.viceStatus===3||e.viceStatus===4||e.viceStatus===5||e.viceStatus===6)?(t(),i("div",yt)):l("",!0)]),_:1})):l("",!0),s(u).includes("viceStatus")?(t(),a(H,{key:14,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:o(({row:e})=>[e.surveyStatus===1?(t(),i("div",ft,[e.viceStatus?(t(),i("div",_t,[e.viceStatus===1?(t(),a(r,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[n("待审")]),_:1})):l("",!0),e.viceStatus===2?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[n("完成")]),_:1})):l("",!0),e.viceStatus===3?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("过IR")]),_:1})):l("",!0),e.viceStatus===4?(t(),a(r,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("时间过短")]),_:1})):l("",!0),e.viceStatus===5?(t(),a(r,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:o(()=>[n("超时完成")]),_:1})):l("",!0),e.viceStatus===6?(t(),a(r,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:o(()=>[n("超量完成")]),_:1})):l("",!0),e.viceStatus===7?(t(),a(r,{key:6,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:o(()=>[n("审核成功")]),_:1})):l("",!0),e.viceStatus===8?(t(),a(r,{key:7,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:o(()=>[n("审核失败")]),_:1})):l("",!0),e.viceStatus===9?(t(),a(r,{key:8,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:o(()=>[n("数据冻结")]),_:1})):l("",!0),e.viceStatus===10?(t(),a(r,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:o(()=>[n("时间段过载")]),_:1})):l("",!0),e.viceStatus===11?(t(),a(r,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:o(()=>[n("IP不一致")]),_:1})):l("",!0),e.viceStatus===12?(t(),a(r,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:o(()=>[n("ID重复参与")]),_:1})):l("",!0),e.viceStatus===13?(t(),a(r,{key:12,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:o(()=>[n("和解")]),_:1})):l("",!0)])):(t(),a(B,{key:1},{default:o(()=>[n("-")]),_:1}))])):(t(),a(B,{key:1},{default:o(()=>[n("-")]),_:1}))]),_:1})):l("",!0)]),_:1},8,["border","data","size","stripe"])),[[me,s(C)]]),c(ue,{"current-page":s(g).page,total:s(g).total,"page-size":s(g).size,"page-sizes":s(g).sizes,layout:s(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Nt=Te(bt,[["__scopeId","data-v-8a58588c"]]);export{Nt as default};
