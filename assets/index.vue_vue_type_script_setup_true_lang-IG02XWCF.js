
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./position_manage--uh9IZA0.js";import{d as R,r as o,l as q,b as d,q as B,s as D,o as T,e as U,g as s,w as u,t as M,h as g,E as y,x as S}from"./index-C-pApz5G.js";const I={style:{flex:"auto"}},$=R({name:"Edit",__name:"index",emits:["success"],setup(J,{expose:V,emit:b}){const c=b,f=o(""),k=o(),a=o(!1),m=o(),n=o(!1),l=o({id:null,name:"",active:1,remark:1}),x=o({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function h(){return new Promise(t=>{l.value.id?m.value&&m.value.validate(e=>{if(e)try{a.value=!0;const r=S(l.value);_.edit(r).then(()=>{a.value=!1,y.success({message:"编辑成功",center:!0}),c("success"),n.value=!1,t()})}catch{}finally{a.value=!1}}):m.value&&m.value.validate(e=>{if(e)try{a.value=!0,delete l.value.id,_.create(l.value).then(()=>{a.value=!1,y.success({message:"新增成功",center:!0}),c("success"),n.value=!1,t()})}catch{}finally{a.value=!1}})})}async function C(t){try{a.value=!0,t?l.value=JSON.parse(t):l.value={id:null,name:"",active:1,remark:""},f.value=t!=null&&t.id?"编辑":"新增",a.value=!1,n.value=!0}catch{}finally{a.value=!1}}return q(async()=>{k.value=new Date}),V({showEdit:C}),(t,e)=>{const r=d("el-input"),v=d("el-form-item"),E=d("el-form"),p=d("el-button"),w=d("el-dialog"),N=B("loading");return D((T(),U("div",null,[s(w,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=i=>n.value=i),title:f.value,width:"700"},{footer:u(()=>[M("div",I,[s(p,{type:"",onClick:e[2]||(e[2]=i=>n.value=!1)},{default:u(()=>[g(" 取消 ")]),_:1}),s(p,{type:"primary",onClick:h},{default:u(()=>[g(" 确定 ")]),_:1})])]),default:u(()=>[s(E,{ref_key:"formRef",ref:m,"label-width":"7rem",model:l.value,rules:x.value,inline:!1},{default:u(()=>[s(v,{prop:"name",label:"职位名称"},{default:u(()=>[s(r,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=i=>l.value.name=i),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"备注"},{default:u(()=>[s(r,{modelValue:l.value.remark,"onUpdate:modelValue":e[1]||(e[1]=i=>l.value.remark=i),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[N,a.value]])}}});export{$ as _};
