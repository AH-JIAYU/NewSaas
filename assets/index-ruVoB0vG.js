
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ag as Q,r as p,d as W,n as X,a as d,o,e as c,w as e,y as _,f as a,g as s,b as S,z as r,t as N,j,F as T,p as Y,aH as Z,aI as ee,L as ae}from"./index-CDTafinC.js";import{a as P}from"./department--RlbEwgR.js";import{u as te}from"./tenant_role-Hpu2PUpk.js";import{u as le}from"./configuration_manager-BM0G_5nl.js";import{u as oe}from"./position_manage-BVrqLT3a.js";const se=Q("department",()=>{const f=p(null);return{department:f,getDepartment:async()=>{if(f.value)return f.value;const{data:m}=await P.list({name:""});return f.value=(m==null?void 0:m.data)||[],m==null?void 0:m.data}}}),ne=se,L=f=>(Z("data-v-2c9b9911"),f=f(),ee(),f),ue=L(()=>_("div",{class:"card-header"},[_("div",{class:"leftTitle"},"基本信息")],-1)),de={key:1,class:"avatar"},re={style:{"font-size":"14px"}},ce=L(()=>_("div",{class:"card-header"},[_("div",{class:"leftTitle"},"角色信息")],-1)),ie=L(()=>_("div",{class:"card-header"},[_("div",{class:"leftTitle"}," 部门信息 ")],-1)),_e={class:"flex-c"},fe=W({__name:"index",emits:["fetch-data"],setup(f,{expose:z,emit:m}){const B=le(),E=p([]),R=oe(),C=p(),U=te(),w=p();ne();const F={children:"children",label:"name"},h=p(),y=p({}),O=m,g=p(!1),D=p([]),l=p();async function H(x){y.value=x;const v={id:x.id},{status:n,data:I}=await Y.list(v);l.value=I.data[0],y.value.roleList=[l.value.role],D.value&&D.value.push(l.value.organizationalStructureId),g.value=!0}function M(){O("fetch-data"),g.value=!1}return X(async()=>{C.value=await R.getPositionManage(),E.value=await B.getStaff(),w.value=await U.getRole();const x=await P.list({name:""});x.data&&(h.value=x.data,h.value.forEach(v=>{v.disabled=!0}))}),z({showEdit:H}),(x,v)=>{const n=d("el-col"),I=d("el-avatar"),k=d("el-row"),u=d("el-text"),i=d("el-form-item"),V=d("el-card"),$=d("el-checkbox"),q=d("el-checkbox-group"),A=d("el-tree"),G=d("el-form"),J=d("el-button"),K=d("el-drawer");return o(),c(K,{modelValue:g.value,"onUpdate:modelValue":v[1]||(v[1]=t=>g.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:M},{footer:e(()=>[_("div",_e,[a(J,{type:"primary",onClick:M},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(G,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(V,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(k,{gutter:20},{default:e(()=>[a(n,{span:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(o(),c(I,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(o(),S("div",de,r(l.value.name),1))]),_:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[_("p",null,r(l.value.userName),1),_("p",re,[s("账号:"),_("span",null,r(l.value.userName),1)])]),_:1})]),_:1}),a(k,{gutter:24},{default:e(()=>[a(n,{span:6},{default:e(()=>[a(i,{label:"员工ID:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"姓名:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"手机号:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.phone?l.value.phone:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"邮箱:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"部门:"},{default:e(()=>[(o(!0),S(T,null,N(h.value,t=>(o(),c(u,null,{default:e(()=>[l.value.departmentId===t.id?(o(),c(u,{key:0},{default:e(()=>[s(r(t.name?t.name:"-"),1)]),_:2},1024)):j("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"职位:"},{default:e(()=>[(o(!0),S(T,null,N(C.value,t=>(o(),c(u,null,{default:e(()=>[l.value.positionId===t.id?(o(),c(u,{key:0},{default:e(()=>[s(r(t.name?t.name:"-"),1)]),_:2},1024)):j("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"帐号状态:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"创建时间:"},{default:e(()=>[a(u,{class:"mx-1"},{default:e(()=>{var t;return[s(r((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{class:"box-card"},{header:e(()=>[ce]),default:e(()=>[a(k,{gutter:24},{default:e(()=>[a(i,{label:"分配角色:"},{default:e(()=>{var t;return[(t=w.value)!=null&&t.length?(o(),c(q,{key:0,style:{"margin-left":"1.5rem"},modelValue:y.value.roleList,"onUpdate:modelValue":v[0]||(v[0]=b=>y.value.roleList=b)},{default:e(()=>[(o(!0),S(T,null,N(w.value,b=>(o(),c($,{key:b.id,label:b.roleName,value:b.roleName,disabled:""},{default:e(()=>[s(r(b.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(o(),c(u,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(V,{class:"box-card"},{header:e(()=>[ie]),default:e(()=>[a(k,{gutter:24},{default:e(()=>[a(i,{label:"分配部门:"},{default:e(()=>[h.value.length>0?(o(),c(A,{key:0,style:{"max-width":"600px"},ref:"treeRef",data:h.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":D.value,"default-expand-all":"",props:F},null,8,["data","default-checked-keys"])):(o(),c(u,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),pe=ae(fe,[["__scopeId","data-v-2c9b9911"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{pe as D,ye as i,ne as u};
