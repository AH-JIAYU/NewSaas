
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as O,r as g,A as G,a5 as X,bd as Y,n as Z,b as m,o as s,e as r,g as e,w as t,t as i,h as c,F as h,v as w,f as b,k as p,H as C,j as B,ar as ee,p as te,N as ae,aI as le,aJ as ne,R as oe}from"./index-CsUB5yuN.js";import{a as P}from"./user_customer-DV4O3MW5.js";import ue from"./index-CHycAjj-.js";import{u as se}from"./configuration_siteSetting-Cieel7wA.js";import"./department-Ckgy8IvB.js";import"./position_manage-BZ02dqW3.js";import"./department-Cprft6PB.js";import"./tenant_role-BhFphe6G.js";import"./configuration_role-B7bvfB06.js";import"./configuration_manager-BHEjflFo.js";import"./configuration_site_setting-hyeretwl.js";const f=y=>(le("data-v-a945d193"),y=y(),ne(),y),ie=f(()=>i("div",{class:"card-header"},[i("span",null,"基本信息")],-1)),de={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},re=f(()=>i("div",{class:"card-header"},[i("span",null,"权限信息")],-1)),me=f(()=>i("div",{class:"card-header"},[i("span",null,"重定向配置")],-1)),pe=f(()=>i("span",null," /redirect?status=c&uid=[uid] ",-1)),fe={key:0},ce=f(()=>i("span",null," /redirect?status=q&uid=[uid] ",-1)),ve={key:0},_e=f(()=>i("span",null," /redirect?status=s&uid=[uid] ",-1)),be={key:0},ge=f(()=>i("span",null," /redirect?status=t&uid=[uid] ",-1)),Ce={key:0},Ve={class:"card-header"},ye=f(()=>i("span",null,"服务端回调配置",-1)),Ie=f(()=>i("span",null,"/callback/serviceCallback?status=c&uid=[uid]",-1)),he={key:0},ke=f(()=>i("span",null,"/callback/serviceCallback?status=q&uid=[uid]",-1)),Le={key:0},xe=f(()=>i("span",null,"/callback/serviceCallback?status=s&uid=[uid]",-1)),Se={key:0},Ue=f(()=>i("span",null,"/callback/serviceCallback?status=t&uid=[uid]",-1)),Ne={key:0},we=O({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(y){const j=se(),R=y,v=g(),T=g([]),$=G("validateTopTabs"),z=X({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),A=g("basicSettings"),N=g(!1),k=g([]),L=g(!1),F=_=>{if(_)n.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const a=n.value.tenantCustomerConfigInfoList.findIndex(d=>d.callbackWay===1);a!==-1&&n.value.tenantCustomerConfigInfoList.splice(a,1)}},E=async(_,a)=>{if(_){const d=k.value.find(u=>u.id===_),o=await P.generateKey({type:d.name});n.value.tenantCustomerConfigInfoList[a].secretKey=o.data}},K=async()=>{const{data:_}=await te.getTenantStaffList();T.value=_};Y(async()=>{await K(),N.value=n.value.tenantCustomerConfigInfoList.length===2;const _=await P.getTenantSecretKeyConfigList();k.value=_.data;const a=await j.getSiteConfig();v.value=`${a.httpsStatus===1?"http":"https"}://${a.topLevelDomainName??a.personalizedDomainName}`});const D=g(null),n=g(R.leftTab);return Z(()=>{$(D.value)}),(_,a)=>{const d=m("el-input"),o=m("el-form-item"),u=m("el-col"),V=m("el-option"),M=ae,Q=m("el-button"),x=m("el-select"),S=m("el-row"),U=m("el-card"),I=m("el-switch"),W=m("el-input-number"),q=m("el-tab-pane"),H=m("el-checkbox"),J=m("el-tabs");return s(),r("div",null,[e(B(ee),{ref_key:"formRef",ref:D,rules:B(z),model:n.value,"label-width":"100px"},{default:t(()=>[e(J,{modelValue:A.value,"onUpdate:modelValue":a[25]||(a[25]=l=>A.value=l)},{default:t(()=>[e(q,{label:"基础设置",name:"basicSettings"},{default:t(()=>[e(U,{class:"box-card"},{header:t(()=>[ie]),default:t(()=>[e(S,{gutter:24},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(o,{label:"客户名称",prop:"customerAccord"},{default:t(()=>[e(d,{modelValue:n.value.customerAccord,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value.customerAccord=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户简称",prop:"customerShortName"},{default:t(()=>[e(d,{modelValue:n.value.customerShortName,"onUpdate:modelValue":a[1]||(a[1]=l=>n.value.customerShortName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"公司名称",prop:"companyName"},{default:t(()=>[e(d,{modelValue:n.value.companyName,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value.companyName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户姓名",prop:"customerName"},{default:t(()=>[e(d,{modelValue:n.value.customerName,"onUpdate:modelValue":a[3]||(a[3]=l=>n.value.customerName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"手机号码",prop:"customerPhone"},{default:t(()=>[e(d,{modelValue:n.value.customerPhone,"onUpdate:modelValue":a[4]||(a[4]=l=>n.value.customerPhone=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"电子邮箱",prop:"emailAddress"},{default:t(()=>[e(d,{modelValue:n.value.emailAddress,"onUpdate:modelValue":a[5]||(a[5]=l=>n.value.emailAddress=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"负责人",prop:"chargeId"},{default:t(()=>[e(x,{modelValue:n.value.chargeId,"onUpdate:modelValue":a[7]||(a[7]=l=>n.value.chargeId=l),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{empty:t(()=>[i("div",de,[c(" 暂无数据 "),e(Q,{type:"primary",link:"",onClick:a[6]||(a[6]=l=>L.value=!0),size:"small"},{default:t(()=>[c(" 快捷新增 "),e(M,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"2px",margin:"0 2px"}})]),_:1})])]),default:t(()=>[(s(!0),r(h,null,w(T.value,l=>(s(),b(V,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"结算周期",prop:"settlementCycle"},{default:t(()=>[e(x,{modelValue:n.value.settlementCycle,"onUpdate:modelValue":a[8]||(a[8]=l=>n.value.settlementCycle=l)},{default:t(()=>[e(V,{label:"net 30",value:30}),e(V,{label:"net 60",value:60}),e(V,{label:"net 90",value:90}),e(V,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{class:"box-card"},{header:t(()=>[re]),default:t(()=>[e(S,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(o,{label:"客户状态"},{default:t(()=>[e(I,{modelValue:n.value.customerStatus,"onUpdate:modelValue":a[9]||(a[9]=l=>n.value.customerStatus=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:4},{default:t(()=>[e(o,{label:"前置问卷"},{default:t(()=>[e(I,{modelValue:n.value.antecedentQuestionnaire,"onUpdate:modelValue":a[10]||(a[10]=l=>n.value.antecedentQuestionnaire=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:16},{default:t(()=>[e(o,{label:"风险控制"},{default:t(()=>[e(I,{modelValue:n.value.riskControl,"onUpdate:modelValue":a[11]||(a[11]=l=>n.value.riskControl=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.riskControl===2?(s(),b(u,{key:0,span:12},{default:t(()=>[e(o,{label:"营业限额/月"},{default:t(()=>[e(W,{modelValue:n.value.turnover,"onUpdate:modelValue":a[12]||(a[12]=l=>n.value.turnover=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):p("",!0),n.value.riskControl===2?(s(),b(u,{key:1,span:12},{default:t(()=>[e(o,{label:"审核率Min值"},{default:t(()=>[e(d,{modelValue:n.value.rateAudit,"onUpdate:modelValue":a[13]||(a[13]=l=>n.value.rateAudit=l),"controls-position":"right",min:1,type:"number"},{append:t(()=>[c(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),e(q,{label:"端口设置",name:"portSettings"},{default:t(()=>[e(U,{class:"box-card"},{header:t(()=>[me]),default:t(()=>[e(S,{gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(I,{modelValue:n.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":a[14]||(a[14]=l=>n.value.tenantCustomerConfigInfoList[0].isEncryption=l),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.tenantCustomerConfigInfoList[0].isEncryption===1?(s(),r(h,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(x,{onChange:a[15]||(a[15]=l=>E(l,0)),clearable:"",modelValue:n.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":a[16]||(a[16]=l=>n.value.tenantCustomerConfigInfoList[0].encryptionId=l)},{default:t(()=>[(s(!0),r(h,null,w(k.value,l=>(s(),b(V,{label:l.name,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(d,{disabled:"",modelValue:n.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":a[17]||(a[17]=l=>n.value.tenantCustomerConfigInfoList[0].secretKey=l)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),b(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(d,{placeholder:"输入ip两个ip之间用,分开",modelValue:n.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":a[18]||(a[18]=l=>n.value.tenantCustomerConfigInfoList[0].whitelistIp=l)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功重定向"},{default:t(()=>[c(C(v.value)+" ",1),pe,n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",fe,"&hash =[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满重定向"},{default:t(()=>[c(C(v.value)+" ",1),ce,n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",ve,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别重定向"},{default:t(()=>[c(C(v.value)+" ",1),_e,n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",be,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全重定向"},{default:t(()=>[c(C(v.value)+" ",1),ge,n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",Ce,"&hash=[hash]")):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{class:"box-card"},{header:t(()=>[i("div",Ve,[e(H,{modelValue:N.value,"onUpdate:modelValue":a[19]||(a[19]=l=>N.value=l),size:"large",onChange:F},{default:t(()=>[ye]),_:1},8,["modelValue"])])]),default:t(()=>[n.value.tenantCustomerConfigInfoList.length===2?(s(),b(S,{key:0,gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(I,{modelValue:n.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":a[20]||(a[20]=l=>n.value.tenantCustomerConfigInfoList[1].isEncryption=l),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.tenantCustomerConfigInfoList[1].isEncryption===1?(s(),r(h,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(x,{onChange:a[21]||(a[21]=l=>E(l,1)),clearable:"",modelValue:n.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":a[22]||(a[22]=l=>n.value.tenantCustomerConfigInfoList[1].encryptionId=l)},{default:t(()=>[(s(!0),r(h,null,w(k.value,l=>(s(),b(V,{label:l.name,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(d,{disabled:"",modelValue:n.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":a[23]||(a[23]=l=>n.value.tenantCustomerConfigInfoList[1].secretKey=l)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),b(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(d,{placeholder:"输入ip两个ip之间用,分开",modelValue:n.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":a[24]||(a[24]=l=>n.value.tenantCustomerConfigInfoList[1].whitelistIp=l)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功回调"},{default:t(()=>[c(C(v.value)+" ",1),Ie,n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",he,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满回调"},{default:t(()=>[c(C(v.value)+" ",1),ke,n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Le,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别回调"},{default:t(()=>[c(C(v.value)+" ",1),xe,n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Se,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全终止回调"},{default:t(()=>[c(C(v.value)+" ",1),Ue,n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Ne,"&hash=[hash]")):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"]),L.value?(s(),b(ue,{key:0,modelValue:L.value,"onUpdate:modelValue":a[26]||(a[26]=l=>L.value=l),onSuccess:K},null,8,["modelValue"])):p("",!0)])}}}),ze=oe(we,[["__scopeId","data-v-a945d193"]]);export{ze as default};
