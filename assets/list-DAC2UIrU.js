
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ce,aH as de,r as i,a1 as _e,C as fe,a as r,al as ge,o as z,b as be,f as e,w as o,am as G,g as m,E as M,e as F,j as ve,i as f,O as he,ak as ke,K as we,aJ as Ce,aK as ye,s as Ve,aF as Ee,aG as Se,l as Ie,aM as $,_ as Ne}from"./index-CX2PmK0L.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-BGNYSZwe.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-BwX7pCJF.js";import Me from"./index-thYN7AW8.js";import{a as B}from"./survey_vipGroup-BJnEl4Ab.js";import"./apiLoading-DuUE4E_v.js";import"./survey_vip-k8_FxtQS.js";const De=g=>(Ee("data-v-1aa1eea5"),g=g(),Se(),g),Le=De(()=>Ie("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ue=ce({name:"SurveyVipGroupList",__name:"list",setup(g){const{pagination:p,getParams:H,onSizeChange:P,onCurrentChange:A}=de(),k=i(!1),D=i([]);i();const w=i(),R=i(),C=i(!0),y=i(!1),V=i("default"),b=i([]),E=i(!1),S=i([{label:"等级名称",prop:"a",sortable:!0,disableCheck:!1,checked:!0}]),l=_e({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function T(){w.value.showEdit()}function j(n){w.value.showEdit(n)}function Y(n){R.value.showEdit(n)}function v(){p.value.page=1,h()}function q(n){P(n).then(()=>h())}function L(n=1){A(n).then(()=>h())}async function h(){k.value=!0;const n={...H(),...l};l.time&&l.time.length&&(n.beginTime=l.time[0]||"",n.endTime=l.time[1]||"");const{data:t}=await B.list(n);D.value=t.getMemberGroupInfoList,p.value.total=t.total,k.value=!1}function K(){Object.assign(l,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),h()}async function O(n,t){const _={memberGroupId:t,groupStatus:n},{status:c}=await B.changestatus(_);c===1&&ke.success({message:"修改成功"}),v()}return fe(()=>{S.value.forEach(n=>{n.checked&&b.value.push(n.prop)}),v()}),(n,t)=>{const _=r("el-input"),c=r("el-form-item"),U=r("el-option"),J=r("el-select"),Q=r("el-date-picker"),x=we,I=r("ElButton"),W=r("ElFormItem"),X=r("ElForm"),Z=Ge,ee=r("ElDivider"),N=r("el-button"),te=ze,oe=Ce,ae=ye,le=r("el-row"),u=r("el-table-column"),ne=r("el-link"),re=r("ElSwitch"),ie=r("el-empty"),se=r("el-table"),ue=r("ElPagination"),me=Ve,pe=ge("loading");return z(),be("div",{class:he({"absolute-container":E.value})},[e(me,null,{default:o(()=>[e(Z,{"show-toggle":!1},{default:o(({fold:a,toggle:d})=>[e(X,{model:l,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.memberGroupId,"onUpdate:modelValue":t[0]||(t[0]=s=>l.memberGroupId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.memberGroupName,"onUpdate:modelValue":t[1]||(t[1]=s=>l.memberGroupName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.groupLeaderMemberName,"onUpdate:modelValue":t[2]||(t[2]=s=>l.groupLeaderMemberName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称"},null,8,["modelValue"])]),_:1}),G(e(c,{label:""},{default:o(()=>[e(J,{modelValue:l.groupStatus,"onUpdate:modelValue":t[3]||(t[3]=s=>l.groupStatus=s),clearable:"",placeholder:"会员组状态"},{default:o(()=>[e(U,{label:"关闭",value:1}),e(U,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!a]]),G(e(c,null,{default:o(()=>[e(Q,{modelValue:l.time,"onUpdate:modelValue":t[4]||(t[4]=s=>l.time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[$,!a]]),e(W,null,{default:o(()=>[e(I,{type:"primary",onClick:t[5]||(t[5]=s=>L())},{icon:o(()=>[e(x,{name:"i-ep:search"})]),default:o(()=>[m(" 筛选 ")]),_:1}),e(I,{onClick:K},{icon:o(()=>[Le]),default:o(()=>[m(" 重置 ")]),_:1}),e(I,{link:"",onClick:d},{icon:o(()=>[e(x,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[m(" "+M(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(ee,{"border-style":"dashed"}),e(le,null,{default:o(()=>[e(te,null,{default:o(()=>[e(N,{type:"primary",size:"default",onClick:T},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),e(ae,null,{default:o(()=>[e(N,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),e(oe,{border:C.value,"onUpdate:border":t[6]||(t[6]=a=>C.value=a),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":t[7]||(t[7]=a=>E.value=a),checkList:b.value,"onUpdate:checkList":t[8]||(t[8]=a=>b.value=a),columns:S.value,"onUpdate:columns":t[9]||(t[9]=a=>S.value=a),"line-height":V.value,"onUpdate:lineHeight":t[10]||(t[10]=a=>V.value=a),stripe:y.value,"onUpdate:stripe":t[11]||(t[11]=a=>y.value=a),style:{"margin-left":"12px"},onQueryData:v},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),G((z(),F(se,{border:C.value,data:D.value,size:V.value,stripe:y.value},{empty:o(()=>[e(ie,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[b.value.includes("a")?(z(),F(u,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):ve("",!0),e(u,{align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"}),e(u,{align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:o(({row:a})=>[m(M(a.groupLeaderMemberName?a.groupLeaderMemberName:"-"),1)]),_:1}),e(u,{align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"}),e(u,{align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:o(({row:a})=>[e(ne,{type:"primary",onClick:d=>Y(a)},{default:o(()=>[m(M(a.projectNumber),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"}),e(u,{align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:o(({row:a})=>[e(re,{modelValue:a.groupStatus,"onUpdate:modelValue":d=>a.groupStatus=d,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:d=>O(d,a.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"180"},{default:o(({row:a})=>[e(N,{size:"small",plain:"",type:"primary",onClick:d=>j(a)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[pe,k.value]]),e(ue,{"current-page":f(p).page,total:f(p).total,"page-size":f(p).size,"page-sizes":f(p).sizes,layout:f(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:L},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Me,{ref_key:"editRef",ref:w,onFetchData:v},null,512)],2)}}}),Re=Ne(Ue,[["__scopeId","data-v-1aa1eea5"]]);export{Re as default};
