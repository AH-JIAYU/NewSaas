
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as we,aO as je,r as d,l as De,b as c,q as ze,o as p,e as Ne,g as t,w as l,az as B,h as f,H as b,s as me,f as m,j as v,aN as fe,t as i,k as _,S as H,bd as Ve,N as Se,aQ as Ue,aR as Ee,ap as $e,aI as xe,aJ as Le,R as Re}from"./index-BOIe6JP6.js";import{_ as Te}from"./index-DPUv1hQk.js";import{_ as Be}from"./index.vue_vue_type_style_index_0_lang-DdCfPL4K.js";import{_ as He}from"./index.vue_vue_type_script_setup_true_lang-CCuXacrE.js";import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-DhRcoDaD.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-IqpE1E_j.js";import Pe from"./index-Dzi72GzF.js";import{a as Ke}from"./projectManagement_materials-BMe8Hglr.js";import"./index-AvUmW2fa.js";import"./file-C2nuHzxj.js";import"./download-C8PHVIy1.js";const be=$=>(xe("data-v-31b5d6a2"),$=$(),Le(),$),qe=be(()=>i("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ge={class:"tableBig"},Me={class:"copyId tableSmall"},Qe={class:"id oneLine"},Oe={class:"tableBig"},Je={class:"copyId tableSmall"},We={class:"id oneLine"},Xe={class:"flex-c tableBig"},Ye={class:"oneLine",style:{width:"calc(100% - 20px)"}},Ze=be(()=>i("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),et={class:"tableBig"},tt={class:"copyId tableSmall"},lt={class:"id oneLine"},ot={class:"tableBig"},at={class:"copyId tableSmall"},nt={class:"id oneLine"},rt={class:"flex-c tableBig"},it={class:"oneLine",style:{width:"calc(100% - 20px)"}},st=we({name:"materials",__name:"list",setup($){const{format:A}=Ve(),{getParams:ve,pagination:h,onSizeChange:_e,onCurrentChange:he}=je(),F=d(""),U=d(!1),y=d(!1),P=d(),K=d(),q=d(),E=d(!1),n=d([]),w=d("default"),j=d(!1),G=d([]),g=d([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),r=d({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),L=d([]),R=d();function ge(a){a?R.value=a.projectId:R.value=""}const T=d();function ke(a){a?T.value=a.projectId:T.value=""}function M(a){G.value.length||K.value.showEdit(a)}function Q(a){q.value.showEdit(a)}function O(a){P.value.showEdit(a)}function J(a){G.value=a}function W(a){_e(a).then(()=>I())}function k(a=1){he(a).then(()=>I())}function X(){Object.assign(r.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),I()}async function I(){try{U.value=!0;const a={...ve(),...r.value},o=await Ke.list(a);L.value=o.data.projectMaterialInfoList,h.value.total=o.data.total,U.value=!1}catch{}finally{U.value=!1}}const Ce=()=>{r.value.type===1?(n.value=[],g.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I()):(n.value=[],g.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I())};return De(()=>{g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I()}),(a,o)=>{const D=c("el-input"),z=c("el-form-item"),N=Se,V=c("ElButton"),Y=c("ElFormItem"),Z=c("el-form"),ee=He,te=c("ElDivider"),le=Be,S=c("el-button"),oe=Ue,ae=Ee,ne=c("el-row"),s=c("el-table-column"),x=Te,re=c("el-tag"),ie=c("ElSpace"),se=c("el-empty"),ue=c("el-table"),de=c("ElPagination"),ce=c("el-tab-pane"),Ie=c("el-tabs"),ye=$e,pe=ze("loading");return p(),Ne("div",{class:H({"absolute-container":E.value})},[t(ye,null,{default:l(()=>[t(Ie,{modelValue:r.value.type,"onUpdate:modelValue":o[25]||(o[25]=e=>r.value.type=e),onTabChange:Ce},{default:l(()=>[t(ce,{label:"会员素材",name:1},{default:l(()=>[t(ee,{"show-toggle":!1},{default:l(({fold:e,toggle:C})=>[t(Z,{model:r.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.memberChildId,"onUpdate:modelValue":o[0]||(o[0]=u=>r.value.memberChildId=u),clearable:"",placeholder:"会员ID",onKeydown:o[1]||(o[1]=B(u=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.projectId,"onUpdate:modelValue":o[2]||(o[2]=u=>r.value.projectId=u),clearable:"",placeholder:"项目ID",onKeydown:o[3]||(o[3]=B(u=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.projectName,"onUpdate:modelValue":o[4]||(o[4]=u=>r.value.projectName=u),clearable:"",placeholder:"项目名称",onKeydown:o[5]||(o[5]=B(u=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),t(Y,null,{default:l(()=>[t(V,{type:"primary",onClick:o[6]||(o[6]=u=>k())},{icon:l(()=>[t(N,{name:"i-ep:search"})]),default:l(()=>[f(" 筛选 ")]),_:1}),t(V,{onClick:X},{icon:l(()=>[qe]),default:l(()=>[f(" 重置 ")]),_:1}),t(V,{link:"",onClick:C,disabled:""},{icon:l(()=>[t(N,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[f(" "+b(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(te,{"border-style":"dashed"}),t(ne,{gutter:24},{default:l(()=>[t(le),t(ae,null,{default:l(()=>[t(S,{size:"default",onClick:o[7]||(o[7]=()=>{})},{default:l(()=>[f(" 导出 ")]),_:1}),t(oe,{border:y.value,"onUpdate:border":o[8]||(o[8]=e=>y.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[9]||(o[9]=e=>E.value=e),checkList:n.value,"onUpdate:checkList":o[10]||(o[10]=e=>n.value=e),columns:g.value,"onUpdate:columns":o[11]||(o[11]=e=>g.value=e),"line-height":w.value,"onUpdate:lineHeight":o[12]||(o[12]=e=>w.value=e),stripe:j.value,"onUpdate:stripe":o[13]||(o[13]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((p(),m(ue,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:w.value,stripe:j.value,onSelectionChange:J,"highlight-current-row":"",onCurrentChange:ge},{empty:l(()=>[t(se,{image:v(fe),"image-size":300},null,8,["image"])]),default:l(()=>[t(s,{align:"center",type:"selection"}),n.value.includes("memberChildName")?(p(),m(s,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"会员名称"},{default:l(({row:e})=>[i("div",Ge,b(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("memberChildId")?(p(),m(s,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"会员ID"},{default:l(({row:e})=>[i("div",Me,[i("div",Qe,"ID: "+b(e.memberChildId),1),t(x,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("projectName")?(p(),m(s,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"},{default:l(({row:e})=>[i("div",Oe,b(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(p(),m(s,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"},{default:l(({row:e})=>[i("div",Je,[i("div",We,"ID: "+b(e.projectId),1),t(x,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("createTime")?(p(),m(s,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:l(({row:e})=>[t(re,{effect:"plain",type:"info"},{default:l(()=>[f(b(v(A)(e.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),n.value.includes("instructions")?(p(),m(s,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"},{default:l(({row:e})=>[i("div",Xe,[i("div",Ye,b(e.instructions?e.instructions:"-"),1),t(N,{onClick:C=>Q(e),class:H({edit:"edit",current:e.projectId===R.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(s,{align:"center",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[t(S,{type:"primary",plain:"",size:"small",onClick:C=>M(e)},{default:l(()=>[f(" 查看 ")]),_:2},1032,["onClick"]),t(S,{type:"danger",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,U.value]]),t(de,{"current-page":v(h).page,total:v(h).total,"page-size":v(h).size,"page-sizes":v(h).sizes,layout:v(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(ce,{label:"子会员素材",name:2},{default:l(()=>[t(ee,{"show-toggle":!1},{default:l(({fold:e,toggle:C})=>[t(Z,{model:r.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.memberChildId,"onUpdate:modelValue":o[14]||(o[14]=u=>r.value.memberChildId=u),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.projectId,"onUpdate:modelValue":o[15]||(o[15]=u=>r.value.projectId=u),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t(z,{label:""},{default:l(()=>[t(D,{modelValue:r.value.projectName,"onUpdate:modelValue":o[16]||(o[16]=u=>r.value.projectName=u),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),t(Y,null,{default:l(()=>[t(V,{type:"primary",onClick:o[17]||(o[17]=u=>k())},{icon:l(()=>[t(N,{name:"i-ep:search"})]),default:l(()=>[f(" 筛选 ")]),_:1}),t(V,{onClick:X},{icon:l(()=>[Ze]),default:l(()=>[f(" 重置 ")]),_:1}),t(V,{link:"",onClick:C,disabled:""},{icon:l(()=>[t(N,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[f(" "+b(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(te,{"border-style":"dashed"}),t(ne,{gutter:24},{default:l(()=>[t(le),t(ae,null,{default:l(()=>[t(S,{size:"default",onClick:o[18]||(o[18]=()=>{})},{default:l(()=>[f(" 导出 ")]),_:1}),t(oe,{border:y.value,"onUpdate:border":o[19]||(o[19]=e=>y.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[20]||(o[20]=e=>E.value=e),checkList:n.value,"onUpdate:checkList":o[21]||(o[21]=e=>n.value=e),columns:g.value,"onUpdate:columns":o[22]||(o[22]=e=>g.value=e),"line-height":w.value,"onUpdate:lineHeight":o[23]||(o[23]=e=>w.value=e),stripe:j.value,"onUpdate:stripe":o[24]||(o[24]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((p(),m(ue,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:w.value,stripe:j.value,onSelectionChange:J,"highlight-current-row":"",onCurrentChange:ke},{empty:l(()=>[t(se,{image:v(fe),"image-size":300},null,8,["image"])]),default:l(()=>[t(s,{type:"selection"}),n.value.includes("memberChildName")?(p(),m(s,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"子会员名称"},{default:l(({row:e})=>[i("div",et,b(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("memberChildId")?(p(),m(s,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"子会员ID"},{default:l(({row:e})=>[i("div",tt,[i("div",lt,"ID: "+b(e.memberChildId),1),t(x,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("projectName")?(p(),m(s,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"},{default:l(({row:e})=>[i("div",ot,b(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(p(),m(s,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"},{default:l(({row:e})=>[i("div",at,[i("div",nt,"ID: "+b(e.projectId),1),t(x,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("customerIdentification")?(p(),m(s,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"center",label:"客户简称/标识"})):_("",!0),n.value.includes("createTime")?(p(),m(s,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:l(({row:e})=>[t(re,{effect:"plain",type:"info"},{default:l(()=>[f(b(v(A)(e.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),n.value.includes("instructions")?(p(),m(s,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"},{default:l(({row:e})=>[i("div",rt,[i("div",it,b(e.instructions?e.instructions:"-"),1),t(N,{onClick:C=>Q(e),class:H({edit:"edit",current:e.projectId===T.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(s,{align:"center",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[t(S,{type:"primary",plain:"",size:"small",onClick:C=>M(e)},{default:l(()=>[f(" 查看 ")]),_:2},1032,["onClick"]),t(S,{type:"danger",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,U.value]]),t(de,{"current-page":v(h).page,total:v(h).total,"page-size":v(h).size,"page-sizes":v(h).sizes,layout:v(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(Ae,{ref_key:"deleteRef",ref:P},null,512),t(Fe,{ref_key:"detailsRef",ref:K,onFetchData:I},null,512),t(Pe,{ref_key:"editsRef",ref:q,onFetchData:I},null,512)]),_:1})],2)}}}),kt=Re(st,[["__scopeId","data-v-31b5d6a2"]]);export{kt as default};
