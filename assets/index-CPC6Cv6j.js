
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as V}from"./index-CtkeZ6ZK.js";import{a as w}from"./user_cooperation-C2HilBuk.js";import{d as x,r as f,o as I,a2 as h,a as n,i as l,f as r,w as m,b as u,g as c,h as s,t as i,N as y,O as b,j as v,k as D,y as C}from"./index-C7IrLSdY.js";import"./index-D4gJR_to.js";import"./clipboard-Dc18Jx48.js";const E={style:{height:"21.875rem",overflow:"auto"}},j={key:0,class:"idList"},z={key:1,class:"idList"},B={key:2,class:"idList"},A={style:{flex:"auto"}},q=x({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(F,{expose:N,emit:H}){const L=f(!1),_=f(!1);f();const e=f({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),S=async p=>{const{data:o}=await w.getTenantSupplierMemberNameInfo(p);return o},T=async p=>{e.value.supplierList=[],e.value.memberList=[],e.value.tenantList=[];for(let o of p.type){const d=await S({projectId:p.projectId,type:o});e.value.results.push({type:o,getTenantSupplierMemberNameList:d.getTenantSupplierMemberNameList}),e.value.results.forEach(a=>{a.type==2&&(e.value.supplierList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[]),a.type==3&&(e.value.memberList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[]),a.type==4&&(e.value.tenantList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[])})}};async function k(p){try{L.value=!0,T(p),L.value=!1,_.value=!0}catch{}finally{L.value=!1}}function g(){_.value=!1}return I(async()=>{}),N({showEdit:k}),(p,o)=>{const d=h("el-button"),a=V,M=h("el-dialog");return n(),l("div",null,[r(M,{modelValue:s(_),"onUpdate:modelValue":o[0]||(o[0]=t=>D(_)?_.value=t:null),title:"分配",width:"700","before-close":g},{footer:m(()=>[u("div",A,[r(d,{onClick:g},{default:m(()=>[c(" 关闭 ")]),_:1})])]),default:m(()=>[u("div",E,[s(e).supplierList.length!=0?(n(),l("div",j,[r(d,{size:"small",type:"danger"},{default:m(()=>[c("供应商 "+i(s(e).supplierList>1?s(e).supplierList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).supplierList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0),s(e).memberList.length!=0?(n(),l("div",z,[r(d,{size:"small",type:"success"},{default:m(()=>[c("内部站 "+i(s(e).memberList>1?s(e).memberList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).memberList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0),s(e).tenantList.length!=0?(n(),l("div",B,[r(d,{size:"small",type:"primary"},{default:m(()=>[c("合作商 "+i(s(e).tenantList>1?s(e).tenantList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).tenantList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0)])]),_:1},8,["modelValue"])])}}}),K=C(q,[["__scopeId","data-v-cec51b18"]]);export{K as default};
