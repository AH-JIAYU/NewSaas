
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./position_manage-Bv3Rn_IE.js";import{d as U,r as s,k as q,a as i,p as B,q as D,o as T,b as M,f as a,w as n,s as S,g as _,E as g,v as I}from"./index-CUMm1uz-.js";const J={style:{flex:"auto"}},j=U({name:"Edit",__name:"index",emits:["success"],setup(O,{expose:V,emit:b}){const c=b,v=s(""),x=s(),k=s(!1),r=s(),u=s(!1),l=s({id:null,name:"",active:1,remark:1}),y=s({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function w(){return new Promise(t=>{l.value.id?r.value&&r.value.validate(e=>{if(e){const m=I(l.value);p.edit(m).then(()=>{g.success({message:"编辑成功",center:!0}),c("success"),u.value=!1,t()})}}):r.value&&r.value.validate(e=>{e&&(delete l.value.id,p.create(l.value).then(()=>{g.success({message:"新增成功",center:!0}),c("success"),u.value=!1,t()}))})})}async function C(t){t?l.value=JSON.parse(t):l.value={id:null,name:"",active:1,remark:""},v.value=t!=null&&t.id?"编辑":"新增",u.value=!0}return q(async()=>{x.value=new Date}),V({showEdit:C}),(t,e)=>{const m=i("el-input"),d=i("el-form-item"),E=i("el-switch"),h=i("el-form"),f=i("el-button"),N=i("el-dialog"),R=B("loading");return D((T(),M("div",null,[a(N,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value=o),title:v.value,width:"700"},{footer:n(()=>[S("div",J,[a(f,{type:"",onClick:e[3]||(e[3]=o=>u.value=!1)},{default:n(()=>[_(" 取消 ")]),_:1}),a(f,{type:"primary",onClick:w},{default:n(()=>[_(" 确定 ")]),_:1})])]),default:n(()=>[a(h,{ref_key:"formRef",ref:r,"label-width":"80px",model:l.value,rules:y.value,inline:!1},{default:n(()=>[a(d,{prop:"name",label:"职位名称"},{default:n(()=>[a(m,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.name=o),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"职位日志"},{default:n(()=>[a(E,{modelValue:l.value.active,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.active=o),"inline-prompt":"","active-text":"启用","inactive-text":"禁用","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),a(d,{label:"备注"},{default:n(()=>[a(m,{modelValue:l.value.remark,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.remark=o),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[R,k.value]])}}});export{j as _};
