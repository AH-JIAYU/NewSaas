
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as De,aj as Ve,aM as Le,r as p,c as d,n as Ee,a as m,q as de,o as s,b as Te,f as t,w as l,i as r,g,A as c,s as y,e as u,aN as me,v as f,O as j,j as h,bi as Ue,aP as $e,aQ as Re,_ as Me,ao as Pe,aI as Be,aJ as He,M as Ae}from"./index-DZ7Gqds7.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-AEqSa9Df.js";import{_ as Ge}from"./index-CxbQtmJz.js";import{_ as qe}from"./index.vue_vue_type_style_index_0_lang-Bx5EbcAn.js";import{_ as Oe}from"./index-CJOKl1fW.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-BLR230bd.js";import{_ as Je}from"./index.vue_vue_type_script_setup_true_lang-BZJ6Tmf4.js";import Ke from"./index-BpBw4xFA.js";import{a as We}from"./projectManagement_materials-X_kmn-Db.js";import"./index-DFPCaSVm.js";import"./clipboard-DPGAy99p.js";import"./sortable.esm-C0-Qcoum.js";import"./download-DymZvW1b.js";const Xe=$=>(Be("data-v-32de5500"),$=$(),He(),$),Ye={class:"copyId tableSmall"},Ze={class:"id oneLine projectId"},et={class:"tableBig"},tt={class:"tableBig"},lt={class:"copyId tableSmall"},at={class:"id oneLine projectId"},ot={class:"flex-c fontC-System"},rt={class:"oneLine",style:{width:"calc(100% - 20px)"}},it=Xe(()=>f("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),nt={class:"copyId tableSmall"},st={class:"id oneLine projectId"},ct={class:"tableBig"},ut={class:"tableBig"},pt={class:"copyId tableSmall"},dt={class:"id oneLine projectId"},mt={class:"flex-c fontC-System"},ft={class:"oneLine",style:{width:"calc(100% - 20px)"}},bt=De({name:"materials",__name:"list",setup($){const{t:a}=Ve(),{format:fe}=Ue(),{getParams:be,pagination:v,onSizeChange:_e,onCurrentChange:he}=Le(),F=p(""),L=p(!1),w=p(!0),G=p(),q=p(),O=p(),E=p(!1),n=p([]),Q=p(),ve=p("formSearch-materials"),N=p("default"),S=p(!0),J=p([]),C=p([{label:d(()=>a("materials.vipId")),prop:"memberChildId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.vipName")),prop:"memberChildName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.vipGroupsId")),prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectID")),prop:"projectId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectName")),prop:"projectName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.instructions")),prop:"instructions",sotrtable:!0,checked:!0},{label:d(()=>a("materials.createTime")),prop:"createTime",sotrtable:!0,checked:!0}]),_=p({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),P=p([]),T=p();function ge(i){i?T.value=i.projectId:T.value=""}const U=p();function Ce(i){i?U.value=i.projectId:U.value=""}function K(i){J.value.length||q.value.showEdit(i)}function W(i){O.value.showEdit(i)}function X(i){G.value.showEdit(i)}function Y(i){J.value=i}function Z(i){_e(i).then(()=>I())}function z(i=1){he(i).then(()=>I())}function ee(){Object.assign(_.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),I()}async function I(){try{L.value=!0;const i={...be(),..._.value},o=await We.list(i);P.value=o.data.projectMaterialInfoList,v.value.total=o.data.total,L.value=!1}catch{}finally{L.value=!1}}const Ie=()=>{_.value.type===1?(n.value=[],C.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],C.value.forEach(i=>{i.checked&&n.value.push(i.prop)}),I()):(n.value=[],C.value=[{label:d(()=>a("materials.subVipId")),prop:"memberChildId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.subVipName")),prop:"memberChildName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.subVipGroupsId")),prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectID")),prop:"projectId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectName")),prop:"projectName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.instructions")),prop:"instructions",sotrtable:!0,checked:!0},{label:d(()=>a("materials.createTime")),prop:"createTime",sotrtable:!0,checked:!0}],C.value.forEach(i=>{i.checked&&n.value.push(i.prop)}),I())};return Ee(()=>{C.value.forEach(i=>{i.checked&&n.value.push(i.prop)}),I(),Q.value=[{index:1,show:!0,type:"input",modelName:"memberChildId",placeholder:d(()=>a("materials.vipId"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:d(()=>a("materials.projectID"))},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:d(()=>a("materials.projectName"))}]}),(i,o)=>{const ye=Oe,te=m("ElDivider"),le=qe,x=m("el-button"),ae=$e,oe=Re,re=m("el-row"),R=Ge,b=m("el-table-column"),ke=m("el-tag"),je=m("el-tooltip"),M=Me,ie=m("ElSpace"),ne=m("el-empty"),se=m("el-table"),ce=m("ElPagination"),ue=m("el-tab-pane"),B=m("el-input"),H=m("el-form-item"),A=m("ElButton"),we=m("ElFormItem"),Ne=m("el-form"),Se=Fe,ze=m("el-tabs"),xe=Pe,D=de("auth"),pe=de("loading");return s(),Te("div",{class:j({"absolute-container":E.value})},[t(xe,null,{default:l(()=>[t(ze,{modelValue:_.value.type,"onUpdate:modelValue":o[18]||(o[18]=e=>_.value.type=e),onTabChange:Ie},{default:l(()=>[t(ue,{label:r(a)("materials.vipMaterial"),name:1},{default:l(()=>[t(ye,{formSearchList:Q.value,formSearchName:ve.value,onCurrentChange:z,onOnReset:ee,model:_.value},null,8,["formSearchList","formSearchName","model"]),t(te,{"border-style":"dashed"}),t(re,{gutter:24},{default:l(()=>[t(le),t(oe,null,{default:l(()=>[t(x,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:l(()=>[g(c(r(a)("materials.export")),1)]),_:1}),t(ae,{border:w.value,"onUpdate:border":o[1]||(o[1]=e=>w.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>E.value=e),checkList:n.value,"onUpdate:checkList":o[3]||(o[3]=e=>n.value=e),columns:C.value,"onUpdate:columns":o[4]||(o[4]=e=>C.value=e),"line-height":N.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>N.value=e),stripe:S.value,"onUpdate:stripe":o[6]||(o[6]=e=>S.value=e),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),y((s(),u(se,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:P.value,border:w.value,size:N.value,stripe:S.value,onSelectionChange:Y,"highlight-current-row":"",onCurrentChange:ge},{empty:l(()=>[t(ne,{image:r(me),"image-size":300},null,8,["image"])]),default:l(()=>[n.value.includes("memberChildId")?(s(),u(b,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:r(a)("materials.vipId")},{default:l(({row:e})=>[f("div",Ye,[f("div",Ze,c(e.memberChildId),1),t(R,{content:e.memberChildId,class:j({rowCopy:"rowCopy",current:e.projectId===T.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),n.value.includes("memberChildName")?(s(),u(b,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:r(a)("materials.vipName")},{default:l(({row:e})=>[f("div",et,c(e.memberChildName),1)]),_:1},8,["label"])):h("",!0),n.value.includes("projectName")?(s(),u(b,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:r(a)("materials.projectName")},{default:l(({row:e})=>[f("div",tt,c(e.projectName),1)]),_:1},8,["label"])):h("",!0),n.value.includes("projectId")?(s(),u(b,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:r(a)("materials.projectID")},{default:l(({row:e})=>[f("div",lt,[f("div",at,c(e.projectId),1),t(R,{content:e.projectId,class:j({rowCopy:"rowCopy",current:e.projectId===T.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),n.value.includes("createTime")?(s(),u(b,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:r(a)("materials.create")},{default:l(({row:e})=>[t(je,{content:e.createTime,placement:"top"},{default:l(()=>[t(ke,{effect:"plain",type:"info"},{default:l(()=>[g(c(r(fe)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1},8,["label"])):h("",!0),n.value.includes("instructions")?(s(),u(b,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:r(a)("materials.instructions")},{default:l(({row:e})=>[f("div",ot,[f("div",rt,c(e.instructions?e.instructions:"-"),1),y(t(M,{onClick:k=>W(e),class:j({edit:"edit",current:e.projectId===T.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"]),[[D,"materials-update-updateProjectMaterialInstructions"]])])]),_:1},8,["label"])):h("",!0),t(b,{align:"left",fixed:"right",label:r(a)("materials.control"),width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[y((s(),u(x,{type:"primary",plain:"",size:"small",onClick:k=>K(e)},{default:l(()=>[g(c(r(a)("materials.view")),1)]),_:2},1032,["onClick"])),[[D,"materials-get-getMaterials-btn"]]),y((s(),u(x,{type:"danger",plain:"",size:"small",onClick:k=>X(e)},{default:l(()=>[g(c(r(a)("materials.delete")),1)]),_:2},1032,["onClick"])),[[D,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","border","size","stripe"])),[[pe,L.value]]),t(ce,{"current-page":r(v).page,total:r(v).total,"page-size":r(v).size,"page-sizes":r(v).sizes,layout:r(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["label"]),t(ue,{label:r(a)("materials.subVipMaterial"),name:2},{default:l(()=>[t(Se,{"show-toggle":!1},{default:l(({fold:e,toggle:k})=>[t(Ne,{model:_.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(H,{label:""},{default:l(()=>[t(B,{modelValue:_.value.memberChildId,"onUpdate:modelValue":o[7]||(o[7]=V=>_.value.memberChildId=V),clearable:"",placeholder:r(a)("materials.vipId")},null,8,["modelValue","placeholder"])]),_:1}),t(H,{label:""},{default:l(()=>[t(B,{modelValue:_.value.projectId,"onUpdate:modelValue":o[8]||(o[8]=V=>_.value.projectId=V),clearable:"",placeholder:r(a)("materials.projectID")},null,8,["modelValue","placeholder"])]),_:1}),t(H,{label:""},{default:l(()=>[t(B,{modelValue:_.value.projectName,"onUpdate:modelValue":o[9]||(o[9]=V=>_.value.projectName=V),clearable:"",placeholder:r(a)("materials.projectName")},null,8,["modelValue","placeholder"])]),_:1}),t(we,null,{default:l(()=>[t(A,{type:"primary",onClick:o[10]||(o[10]=V=>z())},{icon:l(()=>[t(M,{name:"i-ep:search"})]),default:l(()=>[g(" "+c(r(a)("materials.sift")),1)]),_:1}),t(A,{onClick:ee},{icon:l(()=>[it]),default:l(()=>[g(" "+c(r(a)("materials.reset")),1)]),_:1}),t(A,{link:"",onClick:k,disabled:""},{icon:l(()=>[t(M,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[g(" "+c(e?r(a)("materials.expand"):r(a)("materials.collapse")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(te,{"border-style":"dashed"}),t(re,{gutter:24},{default:l(()=>[t(le),t(oe,null,{default:l(()=>[t(x,{size:"default",onClick:o[11]||(o[11]=()=>{})},{default:l(()=>[g(c(r(a)("materials.export")),1)]),_:1}),t(ae,{border:w.value,"onUpdate:border":o[12]||(o[12]=e=>w.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[13]||(o[13]=e=>E.value=e),checkList:n.value,"onUpdate:checkList":o[14]||(o[14]=e=>n.value=e),columns:C.value,"onUpdate:columns":o[15]||(o[15]=e=>C.value=e),"line-height":N.value,"onUpdate:lineHeight":o[16]||(o[16]=e=>N.value=e),stripe:S.value,"onUpdate:stripe":o[17]||(o[17]=e=>S.value=e),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),y((s(),u(se,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:P.value,border:w.value,size:N.value,stripe:S.value,onSelectionChange:Y,"highlight-current-row":"",onCurrentChange:Ce},{empty:l(()=>[t(ne,{image:r(me),"image-size":300},null,8,["image"])]),default:l(()=>[n.value.includes("memberChildId")?(s(),u(b,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:r(a)("materials.subVipId")},{default:l(({row:e})=>[f("div",nt,[f("div",st,c(e.memberChildId),1),t(R,{content:e.memberChildId,class:j({rowCopy:"rowCopy",current:e.projectId===U.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),n.value.includes("memberChildName")?(s(),u(b,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:r(a)("materials.subVipName")},{default:l(({row:e})=>[f("div",ct,c(e.memberChildName),1)]),_:1},8,["label"])):h("",!0),n.value.includes("projectName")?(s(),u(b,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:r(a)("materials.projectName")},{default:l(({row:e})=>[f("div",ut,c(e.projectName),1)]),_:1},8,["label"])):h("",!0),n.value.includes("projectId")?(s(),u(b,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:r(a)("materials.projectID")},{default:l(({row:e})=>[f("div",pt,[f("div",dt,c(e.projectId),1),t(R,{content:e.projectId,class:j({rowCopy:"rowCopy",current:e.projectId===U.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),n.value.includes("customerIdentification")?(s(),u(b,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"left",label:r(a)("materials.customer")},null,8,["label"])):h("",!0),n.value.includes("createTime")?(s(),u(b,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:r(a)("materials.create")},{default:l(({row:e})=>[g(c(e.createTime),1)]),_:1},8,["label"])):h("",!0),n.value.includes("instructions")?(s(),u(b,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:r(a)("materials.instructions")},{default:l(({row:e})=>[f("div",mt,[f("div",ft,c(e.instructions?e.instructions:"-"),1),y(t(M,{onClick:k=>W(e),class:j({edit:"edit",current:e.projectId===U.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"]),[[D,"materials-update-updateProjectMaterialInstructions"]])])]),_:1},8,["label"])):h("",!0),t(b,{align:"left",fixed:"right",label:r(a)("materials.control"),width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[y((s(),u(x,{type:"primary",plain:"",size:"small",onClick:k=>K(e)},{default:l(()=>[g(" 查看 ")]),_:2},1032,["onClick"])),[[D,"materials-get-getMaterials-btn"]]),y((s(),u(x,{type:"danger",plain:"",size:"small",onClick:k=>X(e)},{default:l(()=>[g(" 删除 ")]),_:2},1032,["onClick"])),[[D,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","border","size","stripe"])),[[pe,L.value]]),t(ce,{"current-page":r(v).page,total:r(v).total,"page-size":r(v).size,"page-sizes":r(v).sizes,layout:r(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),t(Qe,{ref_key:"deleteRef",ref:G},null,512),t(Je,{ref_key:"detailsRef",ref:q,onFetchData:I},null,512),t(Ke,{ref_key:"editsRef",ref:O,onFetchData:I},null,512)]),_:1})],2)}}}),xt=Ae(bt,[["__scopeId","data-v-32de5500"]]);export{xt as default};
