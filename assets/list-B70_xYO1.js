
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as pe,d as me,aN as fe,r as f,a3 as M,n as ye,a as b,q as _e,o,b as v,f as r,w as t,i as l,g as s,A as x,s as be,e as a,aM as he,y,z as m,N as g,j as n,b9 as ve,ba as ge,be as ke,ao as Se,aH as Ie,aI as xe,L as Ce}from"./index-DzpGFSc8.js";import{_ as Ne}from"./index-C1xRrdDE.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-D7__SjzB.js";import{_ as Te}from"./index-DHJ65gjw.js";import{u as je}from"./user_customer-C2AZKUs5.js";import"./index-Cwa2ejCF.js";import"./index.vue_vue_type_script_setup_true_lang-DaIMPsPp.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-BPMW-_8T.js";const De={list:k=>pe.post("callback/getMemberSurveyRecord",k)},Pe=k=>(Ie("data-v-40f5cef2"),k=k(),xe(),k),Be={class:"hoverSvg"},we={class:"c-fx"},ze={key:0,class:"hoverSvg"},Re={class:"fineBom"},Ee={class:"c-fx"},He={key:0,class:"hoverSvg"},Me={class:"fineBom"},Ue={class:"c-fx"},Ae={key:0,class:"hoverSvg"},Ve={class:"fineBom"},$e={class:"c-fx"},Fe={key:0,class:"hoverSvg"},qe={class:"fineBom"},Ge={class:"c-fx"},Oe={key:0,class:"hoverSvg"},Qe={class:"fineBom"},Je=Pe(()=>y("br",null,null,-1)),Ke={key:0,style:{color:"#4797fb"},class:"i-healthicons:yes w-1.3em h-1.3em"},We={key:1,style:{color:"#f1756c"},class:"i-healthicons:no w-1.3em h-1.3em"},Xe=me({name:"investigation_records",__name:"list",setup(k){const U=je(),{getParams:A,pagination:S,onSizeChange:V,onCurrentChange:$}=fe(),N=f(!1),z=f([]),F=f(""),u=f([]),L=f(!1),T=f(!1),j=f("default"),D=f(!1),q=f(),R=f(),G=f("formSearch-investigation_records"),P=f([{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"memberName",label:"部门",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortable:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortable:!0,checked:!0},{prop:"ipBelong",label:"区域/IP",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),B=M({memberId:"",id:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),w=M({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:[{label:"完成",value:1},{label:"被甄别",value:2},{label:"配额满",value:3},{label:"安全终止",value:4},{label:"未完成",value:5}],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function O(){B.pageNo=1,C()}function Q(d){V(d).then(()=>C())}function E(d=1){$(d).then(()=>C())}async function C(){try{N.value=!0;const d={...A(),...B},{data:i}=await De.list(d);z.value=i.memberSurveyRecordInfoList,q.value=i.currencyType,S.value.total=i.total,N.value=!1}catch{}finally{N.value=!1}}function J(d){F.value=d}function K(){Object.assign(B,{memberId:"",id:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),C()}ye(async()=>{w.customerList=await U.getCustomerList(),P.value.forEach(d=>{d.checked&&u.value.push(d.prop)}),C(),R.value=[{index:1,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:2,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份",event:"keydown.enter"},{index:3,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID",event:"keydown.enter"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称",event:"keydown.enter"},{index:5,show:!0,type:"select",modelName:"customerId",placeholder:"客户简称",option:"customerId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:7,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:"surveyStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"input",modelName:"id",placeholder:"点击ID",event:"keydown.enter"}]});const W={customerId:()=>w.customerList,surveyStatus:()=>w.surveyStatusList},h=f();function X(d){d?h.value=d.id:h.value=""}return(d,i)=>{const Y=Te,Z=b("ElDivider"),ee=Le,te=b("el-button"),oe=ve,le=ge,ae=b("el-row"),_=b("el-table-column"),p=b("el-text"),I=Ne,c=b("el-tag"),H=ke,se=b("el-tooltip"),ne=b("ElTableColumn"),re=b("el-empty"),ce=b("el-table"),ue=b("ElPagination"),ie=Se,de=_e("loading");return o(),v("div",{class:g({"absolute-container":l(D)})},[r(ie,null,{default:t(()=>[r(Y,{formSearchList:l(R),formSearchName:l(G),onCurrentChange:E,onOnReset:K,model:l(B),formOption:W},null,8,["formSearchList","formSearchName","model"]),r(Z,{"border-style":"dashed"}),r(ae,null,{default:t(()=>[r(ee),r(le,null,{default:t(()=>[r(te,{size:"default"},{default:t(()=>[s(" 导出 ")]),_:1}),r(oe,{border:l(L),"onUpdate:border":i[0]||(i[0]=e=>x(L)?L.value=e:null),tableAutoHeight:l(D),"onUpdate:tableAutoHeight":i[1]||(i[1]=e=>x(D)?D.value=e:null),checkList:l(u),"onUpdate:checkList":i[2]||(i[2]=e=>x(u)?u.value=e:null),columns:l(P),"onUpdate:columns":i[3]||(i[3]=e=>x(P)?P.value=e:null),"line-height":l(j),"onUpdate:lineHeight":i[4]||(i[4]=e=>x(j)?j.value=e:null),stripe:l(T),"onUpdate:stripe":i[5]||(i[5]=e=>x(T)?T.value=e:null),style:{"margin-left":"12px"},onQueryData:O},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),be((o(),a(ce,{border:l(L),data:l(z),size:l(j),stripe:l(T),onSelectionChange:J,onCurrentChange:X,"highlight-current-row":""},{empty:t(()=>[r(re,{image:l(he),"image-size":300},null,8,["image"])]),default:t(()=>[r(_,{align:"left",type:"selection"}),l(u).includes("id")?(o(),a(_,{key:0,"show-overflow-tooltip":"",align:"left",prop:"id",fixed:"left",label:"点击ID",width:"200"},{default:t(({row:e})=>[y("div",Be,[r(p,{class:"fontColor"},{default:t(()=>[s(m(e.id?e.id:"-"),1)]),_:2},1024),y("span",we,[r(I,{content:e.randomIdentityId,class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])])]),_:1})):n("",!0),l(u).includes("projectName")?(o(),a(_,{key:1,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称",width:"200"},{default:t(({row:e})=>[r(p,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[s(m(e.projectName?e.projectName:"-"),1)]),_:2},1024)]),_:1})):n("",!0),l(u).includes("randomIdentityId")?(o(),a(_,{key:2,align:"left",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份",width:"200"},{default:t(({row:e})=>[e.randomIdentityId?(o(),v("div",ze,[y("p",Re,m(e.randomIdentityId),1),y("span",Ee,[r(I,{content:e.randomIdentityId,class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])])):(o(),a(p,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):n("",!0),l(u).includes("memberId")?(o(),a(_,{key:3,align:"left",prop:"memberId","show-overflow-tooltip":"",width:"200",label:"会员ID"},{default:t(({row:e})=>[e.memberId?(o(),v("div",He,[y("p",Me,m(e.memberId),1),y("span",Ue,[r(I,{content:e.memberId,class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])])):(o(),a(p,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):n("",!0),l(u).includes("projectId")?(o(),a(_,{key:4,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"200",label:"项目ID"},{default:t(({row:e})=>[e.projectId?(o(),v("div",Ae,[y("p",Ve,m(e.projectId),1),y("span",$e,[r(I,{content:e.projectId,class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])])):(o(),a(p,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):n("",!0),l(u).includes("memberName")?(o(),a(_,{key:5,width:"200",align:"left",prop:"memberName","show-overflow-tooltip":"",label:"部门"},{default:t(({row:e})=>[e.memberName?(o(),v("div",Fe,[r(p,{style:{color:"#333333"}},{default:t(()=>[s(m(e.memberName.split("/")[0]),1)]),_:2},1024),s("    "),y("p",qe,m(e.memberName.split("/")[1]),1),y("span",Ge,[r(I,{content:e.memberName.split("/")[1],class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])])):(o(),a(p,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):n("",!0),l(u).includes("allocationType")?(o(),a(_,{key:6,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型",fixed:"right"},{default:t(({row:e})=>[e.allocationType===1?(o(),a(c,{key:0,effect:"plain",type:"info"},{default:t(()=>[s(" 未分配 ")]),_:1})):n("",!0),e.allocationType===2?(o(),a(c,{key:1,style:{"background-color":"#626aef",color:"#fff"}},{default:t(()=>[s(" 供应商 ")]),_:1})):n("",!0),e.allocationType===3?(o(),a(c,{key:2,style:{"background-color":"#05c9be",color:"#fff"}},{default:t(()=>[s(" 会员组 ")]),_:1})):n("",!0)]),_:1})):n("",!0),l(u).includes("doMoneyPrice")?(o(),a(_,{key:7,width:"120",align:"left",prop:"h","show-overflow-tooltip":"",label:"项目价",fixed:"right"},{default:t(({row:e})=>[r(p,null,{default:t(()=>[r(H)]),_:1}),r(p,{style:{color:"#333333"}},{default:t(()=>[s(m(e.doMoneyPrice||0),1)]),_:2},1024)]),_:1})):n("",!0),l(u).includes("memberPrice")?(o(),a(_,{key:8,width:"120",align:"left",prop:"h","show-overflow-tooltip":"",label:"成本价(会员)",fixed:"right"},{default:t(({row:e})=>[r(p,null,{default:t(()=>[r(H)]),_:1}),r(p,{style:{color:"#333333"}},{default:t(()=>[s(m(e.memberPrice||0),1)]),_:2},1024)]),_:1})):n("",!0),l(u).includes("ipBelong")?(o(),a(_,{key:9,align:"left",width:"150",prop:"ipBelong","show-overflow-tooltip":"",label:"区域/IP",fixed:"right"},{default:t(({row:e})=>[e.ipBelong?(o(),v("div",Oe,[r(c,null,{default:t(()=>[s(m(e.ipBelong.split("/")[1]),1)]),_:2},1024),s("    "),y("p",Qe,m(e.ipBelong.split("/")[0]),1),r(I,{content:e.ipBelong.split("/")[0],class:g({rowCopy:"rowCopy",current:e.id===l(h)})},null,8,["content","class"])])):(o(),a(p,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):n("",!0),l(u).includes("surveyTime")?(o(),a(_,{key:10,align:"left","show-overflow-tooltip":"",label:"调查时间",width:"120",fixed:"right"},{default:t(({row:e})=>[r(se,{placement:"top"},{content:t(()=>[y("div",null,[r(p,{style:{color:"#fff"}},{default:t(()=>[s("开始时间："+m(e.surveyStartTime),1)]),_:2},1024),Je,r(p,{style:{color:"#fff"}},{default:t(()=>[s("结束时间："+m(e.surveyEndTime?e.surveyEndTime:"-"),1)]),_:2},1024)])]),default:t(()=>[r(c,{effect:"plain",type:"info"},{default:t(()=>[s(m(e.surveyTime?e.surveyTime+"min":0)+"/ "+m(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:2},1024)]),_:1})):n("",!0),l(u).includes("surveyStatus")?(o(),a(ne,{key:11,align:"left","show-overflow-tooltip":"",prop:"",label:"调查状态",width:"100",fixed:"right"},{default:t(({row:e})=>[e.surveyStatus===3?(o(),a(c,{key:0,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary",fixed:"right"},{default:t(()=>[s("配额满")]),_:1})):n("",!0),e.surveyStatus===2?(o(),a(c,{key:1,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[s("被甄别")]),_:1})):n("",!0),e.surveyStatus===4?(o(),a(c,{key:2,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[s("安全终止")]),_:1})):n("",!0),e.surveyStatus===5?(o(),a(c,{key:3,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:t(()=>[s("未完成")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===1?(o(),a(c,{key:4,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[s("待审")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===2?(o(),a(c,{key:5,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[s("完成")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===3?(o(),a(c,{key:6,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[s("过IR")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===4?(o(),a(c,{key:7,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[s("时间过短")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===5?(o(),a(c,{key:8,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:t(()=>[s("超时完成")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===6?(o(),a(c,{key:9,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:t(()=>[s("超量完成")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===7?(o(),a(c,{key:10,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:t(()=>[s("审核成功")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===8?(o(),a(c,{key:11,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:t(()=>[s("审核失败")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===9?(o(),a(c,{key:12,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:t(()=>[s("数据冻结")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===10?(o(),a(c,{key:13,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:t(()=>[s("时间段过载")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===11?(o(),a(c,{key:14,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:t(()=>[s("IP不一致")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===12?(o(),a(c,{key:15,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:t(()=>[s("ID重复参与")]),_:1})):n("",!0),e.surveyStatus===1&&e.viceStatus===13?(o(),a(c,{key:16,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:t(()=>[s("和解")]),_:1})):n("",!0),e.settlementRemarks?(o(),a(p,{key:17},{default:t(()=>[e.settlementRemarks==="结算成功"?(o(),v("div",Ke)):n("",!0),e.settlementRemarks==="结算失败"?(o(),v("div",We)):n("",!0)]),_:2},1024)):n("",!0)]),_:1})):n("",!0)]),_:1},8,["border","data","size","stripe"])),[[de,l(N)]]),r(ue,{"current-page":l(S).page,total:l(S).total,"page-size":l(S).size,"page-sizes":l(S).sizes,layout:l(S).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),rt=Ce(Xe,[["__scopeId","data-v-40f5cef2"]]);export{rt as default};
