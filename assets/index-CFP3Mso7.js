
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ee,d as te,aN as oe,r as s,Z as le,n as ae,a as d,q as re,o as n,b as ne,f as i,w as r,i as e,g as m,A as _,s as se,e as c,aM as ie,z as h,j as p,N as ce,bf as ue,bb as pe,bc as de,an as me,aH as be,aI as fe,y as he,L as ge}from"./index-BaoGh0WK.js";import{_ as _e}from"./index.vue_vue_type_style_index_0_lang-D4AaJJLM.js";import{_ as ke}from"./index--qq7_kYC.js";import"./index.vue_vue_type_script_setup_true_lang-QFze73GC.js";import"./sortable.esm-C0-Qcoum.js";const ye={list:g=>ee.post("callback/getCustomerCallbackRecordList",g)},ve=g=>(be("data-v-e60ece58"),g=g(),fe(),g),Ie=ve(()=>he("br",null,null,-1)),Ce=te({name:"callback",__name:"index",setup(g){const{pagination:b,getParams:L,onSizeChange:x,onCurrentChange:z}=oe(),{format:R}=ue(),y=s(!1),N=s([]),T=s(""),a=s([]),v=s(!1),I=s(!1),C=s("default"),S=s(!1),U=s(),H=s("formSearch-callback"),w=s([{prop:"projectQuestionnaireClickId",label:"点击ID",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID/会员ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调URL",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级URL",sortable:!0,checked:!0},{prop:"sourceUrl",label:"客户URL来源",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0}]),D=[{label:"内部会员",value:1},{label:"外部会员",value:2}],f=le({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""});function P(o){x(o).then(()=>k())}function j(o=1){z(o).then(()=>k())}function Q(){b.value.page=1,k()}async function k(){try{y.value=!0;const o={...L(),...f};f.time&&f.time.length&&(o.beginTime=f.time[0]||"",o.endTime=f.time[1]||""),delete o.time;const l=await ye.list(o);N.value=l.data.customerCallbackRecordInfoList,b.value.total=l.data.total,y.value=!1}catch{}finally{y.value=!1}}function E(){Object.assign(f,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""}),k()}function A(o){T.value=o}ae(async()=>{w.value.forEach(o=>{o.checked&&a.value.push(o.prop)}),k(),U.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:"点击ID"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID/会员ID"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const V={surveySource:()=>D};return(o,l)=>{const B=ke,F=d("ElDivider"),$=_e,q=d("el-button"),M=pe,O=de,Z=d("el-row"),u=d("el-table-column"),G=d("el-tag"),J=d("el-empty"),K=d("el-table"),W=d("ElPagination"),X=me,Y=re("loading");return n(),ne("div",{class:ce({"absolute-container":e(S)})},[i(X,null,{default:r(()=>[i(B,{formSearchList:e(U),formSearchName:e(H),onCurrentChange:j,onOnReset:E,model:e(f),formOption:V},null,8,["formSearchList","formSearchName","model"]),i(F,{"border-style":"dashed"}),i(Z,null,{default:r(()=>[i($),i(O,null,{default:r(()=>[i(q,{size:"default"},{default:r(()=>[m(" 导出 ")]),_:1}),i(M,{border:e(v),"onUpdate:border":l[0]||(l[0]=t=>_(v)?v.value=t:null),tableAutoHeight:e(S),"onUpdate:tableAutoHeight":l[1]||(l[1]=t=>_(S)?S.value=t:null),checkList:e(a),"onUpdate:checkList":l[2]||(l[2]=t=>_(a)?a.value=t:null),columns:e(w),"onUpdate:columns":l[3]||(l[3]=t=>_(w)?w.value=t:null),"line-height":e(C),"onUpdate:lineHeight":l[4]||(l[4]=t=>_(C)?C.value=t:null),stripe:e(I),"onUpdate:stripe":l[5]||(l[5]=t=>_(I)?I.value=t:null),style:{"margin-left":"12px"},onQueryData:Q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),se((n(),c(K,{border:e(v),data:e(N),size:e(C),stripe:e(I),onSelectionChange:A},{empty:r(()=>[i(J,{image:e(ie),"image-size":300},null,8,["image"])]),default:r(()=>[e(a).includes("projectQuestionnaireClickId")?(n(),c(u,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:"点击ID"},{default:r(({row:t})=>[m(h(t.projectQuestionnaireClickId?t.projectQuestionnaireClickId:"-"),1)]),_:1})):p("",!0),e(a).includes("customerShortName")?(n(),c(u,{key:1,align:"left",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型",width:"100"},{default:r(({row:t})=>[m(h(D[t.surveySource-1].label),1)]),_:1})):p("",!0),e(a).includes("customerShortName")?(n(),c(u,{key:2,align:"left",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):p("",!0),e(a).includes("memberChildId")?(n(),c(u,{key:3,align:"left","show-overflow-tooltip":"",label:"子会员ID/会员ID"},{default:r(({row:t})=>[m(h(t.memberChildId)+" ",1),Ie,m(" "+h(t.randomIdentityId),1)]),_:1})):p("",!0),e(a).includes("projectId")?(n(),c(u,{key:4,align:"left",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):p("",!0),e(a).includes("projectName")?(n(),c(u,{key:5,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):p("",!0),e(a).includes("callbackUrl")?(n(),c(u,{key:6,align:"left",prop:"callbackUrl",label:"回调URL"})):p("",!0),e(a).includes("subordinateUrl")?(n(),c(u,{key:7,align:"left",prop:"subordinateUrl",label:"下级URL"},{default:r(({row:t})=>[m(h(t.subordinateUrl?t.subordinateUrl:"-"),1)]),_:1})):p("",!0),e(a).includes("sourceUrl")?(n(),c(u,{key:8,align:"left",prop:"sourceUrl",label:"客户URL来源"},{default:r(({row:t})=>[m(h(t.sourceUrl?t.sourceUrl:"-"),1)]),_:1})):p("",!0),e(a).includes("callbackTime")?(n(),c(u,{key:9,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"},{default:r(({row:t})=>[i(G,{effect:"plain",type:"info"},{default:r(()=>[m(h(e(R)(t.callbackTime)),1)]),_:2},1024)]),_:1})):p("",!0)]),_:1},8,["border","data","size","stripe"])),[[Y,e(y)]]),i(W,{"current-page":e(b).page,total:e(b).total,"page-size":e(b).size,"page-sizes":e(b).sizes,layout:e(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:P,onCurrentChange:j},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),je=ge(Ce,[["__scopeId","data-v-e60ece58"]]);export{je as default};
