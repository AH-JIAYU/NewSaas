
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,am as Ne,aO as je,r as s,a5 as we,c as Le,l as Se,b as f,q as xe,o as a,e as h,g as l,w as o,j as t,h as i,I as v,s as Pe,f as r,aN as Re,H as m,k as p,t as E,F as G,v as Be,S as Ee,bf as ze,E as Te,aQ as De,aR as Ae,be as Me,ap as Ue,R as Oe}from"./index-B7BTTWpJ.js";import{_ as Fe}from"./index-JaEnPgcT.js";import{_ as He}from"./index.vue_vue_type_style_index_0_lang-CqEVTwxm.js";import{_ as $e}from"./index-aVEnCcbU.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-td_6zO3O.js";import Ge from"./index-Do6P1Bx0.js";import Qe from"./index-C_Exo8Au.js";import qe from"./index-B6uvLmJy.js";import{a as Je}from"./survey_myProjeck-BRNdqSnZ.js";import{u as Ke}from"./user_customer-BIpmBjSR.js";import{u as We}from"./index-DiJt1hKB.js";import"./index-BpGDWl11.js";import"./index.vue_vue_type_script_setup_true_lang-D6d-316s.js";import"./sortable.esm-C0-Qcoum.js";import"./index-Bd2ovgzx.js";import"./file-B0jIsjOQ.js";import"./download-C8PHVIy1.js";import"./apiLoading-C2oywoPw.js";import"./clipboard-KBgyZAZw.js";import"./projectManagement-4lgA2sok.js";import"./survey_vipGroup-mgoVFyCU.js";import"./survey_vipGroup-DyQPAeXI.js";import"./user_customer-stz4d7nN.js";const Xe={key:0,class:"crudeTop"},Ye={key:1,class:"hoverSvg"},Ze={class:"fineSize"},et={key:0,class:"crudeTop"},tt={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},ot={class:"fineBom"},lt={class:"parameter oneLine"},nt=Ie({name:"myProjeck",__name:"list",setup(at){const{format:Q}=ze(),{toClipboard:q}=We(),z=Ne(),J=Ke(),{pagination:b,getParams:K,onSizeChange:W,onCurrentChange:X,onSortChange:rt}=je(),T=s([]),D=s([]),A=s(),Y=s(""),M=s(),N=s(!0),Z=s(),U=s(),j=s(!1),u=s([]),w=s(!1),O=s(),ee=s("formSearch-myProjeck"),L=s("default"),S=s(!1),x=s([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=we({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),F=s([]),H=s();function te(n){M.value.showEdit(n)}function oe(n){U.value.showEdit(n)}function le(n){H.value.showEdit(n)}function ne(n){W(n).then(()=>C())}function B(n=1){X(n).then(()=>C())}function ae(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),C()}async function C(){try{N.value=!0;const n={...K(),..._};_.time&&_.time.length&&(n.beginTime=_.time[0]||"",n.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?n.countryId=[_.countryId]:n.countryId=[];const c=await Je.list(n);A.value=c.data.currencyType,F.value=c.data.getMemberProjectListInfoList,b.value.total=c.data.total,N.value=!1}catch{}finally{N.value=!1}}const re=n=>{q(n),Te({type:"success",message:"复制成功"})},ie=s();function ce(n){ie.value=n.projectId}const P=Le(()=>n=>T.value.filter(I=>n==null?void 0:n.includes(I.id)).map(I=>I.chineseName));Se(async()=>{x.value.forEach(n=>{n.checked&&u.value.push(n.prop)}),T.value=await z.getCountry(),D.value=await J.getCustomerList(),C(),O.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"国家地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const se={clientId:()=>D.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(n,c)=>{const I=$e,ue=f("ElDivider"),pe=He,R=f("el-button"),me=De,de=Ae,fe=f("el-row"),d=f("el-table-column"),_e=Fe,$=f("el-tooltip"),y=f("el-text"),ye=Me,V=f("el-link"),g=f("el-tag"),he=f("ElSpace"),be=f("el-empty"),ge=f("el-table"),ke=f("ElPagination"),ve=Ue,Ce=xe("loading");return a(),h("div",{class:Ee({"absolute-container":t(w)})},[l(ve,null,{default:o(()=>[l(I,{formSearchList:t(O),formSearchName:t(ee),onCurrentChange:B,onOnReset:ae,model:t(_),formOption:se},null,8,["formSearchList","formSearchName","model"]),l(ue,{"border-style":"dashed"}),l(fe,{gutter:24},{default:o(()=>[l(pe),l(de,null,{default:o(()=>[l(R,{size:"default",onClick:c[0]||(c[0]=()=>{})},{default:o(()=>[i(" 导出 ")]),_:1}),l(me,{border:t(j),"onUpdate:border":c[1]||(c[1]=e=>v(j)?j.value=e:null),tableAutoHeight:t(w),"onUpdate:tableAutoHeight":c[2]||(c[2]=e=>v(w)?w.value=e:null),checkList:t(u),"onUpdate:checkList":c[3]||(c[3]=e=>v(u)?u.value=e:null),columns:t(x),"onUpdate:columns":c[4]||(c[4]=e=>v(x)?x.value=e:null),"line-height":t(L),"onUpdate:lineHeight":c[5]||(c[5]=e=>v(L)?L.value=e:null),stripe:t(S),"onUpdate:stripe":c[6]||(c[6]=e=>v(S)?S.value=e:null),style:{"margin-left":"12px"},onQueryData:B},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Pe((a(),r(ge,{ref_key:"tableSortRef",ref:Y,style:{"margin-top":"10px"},"row-key":"id",data:t(F),border:t(j),size:t(L),stripe:t(S),onCurrentChange:ce},{empty:o(()=>[l(be,{image:t(Re),"image-size":300},null,8,["image"])]),default:o(()=>[l(d,{align:"left",type:"selection"}),t(u).includes("project")?(a(),r(d,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:o(({row:e})=>[t(u).includes("projectName")?(a(),h("p",Xe,"名称："+m(e.projectName),1)):p("",!0),t(u).includes("projectId")?(a(),h("div",Ye,[E("p",Ze,"ID："+m(e.projectId),1),l(_e,{class:"copy",content:e.projectId},null,8,["content"])])):p("",!0)]),_:1})):p("",!0),t(u).includes("projectIdentificationOrClientName")?(a(),r(d,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:o(({row:e})=>[t(u).includes("projectIdentification")?(a(),h("p",et," 名称："+m(e.projectIdentification),1)):p("",!0),t(u).includes("projectIdClientName")?(a(),h("p",tt,[i("标："),E("span",ot,m(e.clientName),1)])):p("",!0)]),_:1})):p("",!0),t(u).includes("withoutUrl")?(a(),r(d,{key:2,prop:"withoutUrl",align:"left",label:"URL"},{default:o(({row:e})=>[l($,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:o(()=>[l(R,{link:"",type:"primary",onClick:k=>re(e.withoutUrl)},{default:o(()=>[i("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):p("",!0),t(u).includes("participation")?(a(),r(d,{key:3,"show-overflow-tooltip":"",width:"180",align:"left",label:"参数"},{default:o(({row:e})=>[E("p",lt,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:o(()=>[i("参与："+m(e.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:o(()=>[i("完成："+m(e.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:o(()=>[i("配额："+m(e.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:o(()=>[i("限量："+m(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):p("",!0),t(u).includes("doMoneyPrice")?(a(),r(d,{key:4,"show-overflow-tooltip":"",align:"left",label:"原价"},{default:o(({row:e})=>[t(A)===3?(a(),r(y,{key:0,class:"mx-1"},{default:o(()=>[i("暂无数据")]),_:1})):(a(),r(y,{key:1,class:"mx-1"},{default:o(()=>[l(y,{style:{color:"#FD8989"}},{default:o(()=>[l(ye)]),_:1}),l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[i(m(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):p("",!0),t(u).includes("memberPrice")?(a(),r(d,{key:5,"show-overflow-tooltip":"",align:"left",label:"会员价"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(a(),r(V,{key:0,size:"small",plain:"",type:"primary",onClick:k=>oe(e)},{default:o(()=>[i(" 查看 ")]),_:2},1032,["onClick"])):(a(),r(y,{key:1},{default:o(()=>[i(" - ")]),_:1}))]),_:1})):p("",!0),t(u).includes("countryNameList")?(a(),r(d,{key:6,"show-overflow-tooltip":"",align:"left",label:"国家"},{default:o(({row:e})=>[e.countryNameList?(a(),h(G,{key:0},[e.countryNameList.length===t(z).country.length?(a(),r(g,{key:0,type:"primary"},{default:o(()=>[i("全球")]),_:1})):t(P)(e.countryNameList).length>1?(a(),r($,{key:1,class:"box-item",effect:"dark",content:t(P)(e.countryNameList).join(","),placement:"top"},{default:o(()=>[l(V,{type:"primary"},{default:o(()=>[l(g,{type:"primary"},{default:o(()=>[i("x"+m(t(P)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(a(!0),h(G,{key:2},Be(t(P)(e.countryNameList),k=>(a(),r(g,{key:k,type:"primary"},{default:o(()=>[i(m(k),1)]),_:2},1024))),128))],64)):p("",!0)]),_:1})):p("",!0),t(u).includes("ir")?(a(),r(d,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:o(({row:e})=>[l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[i(m(e.ir?e.ir:"-")+" / "+m(e.nir?e.nir:"-"),1)]),_:2},1024)]),_:1})):p("",!0),t(u).includes("memberStatus")?(a(),r(d,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(a(),r(g,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:o(()=>[i(" 会员组 ")]),_:1})):(a(),r(g,{key:1,effect:"plain",type:"info"},{default:o(()=>[i(" 未分配 ")]),_:1}))]),_:1})):p("",!0),t(u).includes("createTime")?(a(),r(d,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{default:o(({row:e})=>[l(g,{effect:"plain",type:"info"},{default:o(()=>[i(m(t(Q)(e.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),l(d,{align:"left",fixed:"right",label:"操作",width:"200"},{default:o(({row:e})=>[l(he,null,{default:o(()=>[e.getMemberGroupNameInfoList.length?p("",!0):(a(),r(R,{key:0,type:"primary",plain:"",size:"small",onClick:k=>le(e)},{default:o(()=>[i(" 分配 ")]),_:2},1032,["onClick"])),l(R,{size:"small",plain:"",type:"warning",onClick:k=>te(e)},{default:o(()=>[i(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ce,t(N)]]),l(ke,{"current-page":t(b).page,total:t(b).total,"page-size":t(b).size,"page-sizes":t(b).sizes,layout:t(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:B},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Ve,{ref_key:"CheckEditRef",ref:Z},null,512),l(Ge,{ref_key:"detailRef",ref:M},null,512),l(Qe,{ref_key:"checkMembershipPriceRef",ref:U},null,512),l(qe,{ref_key:"addAllocationEditRef",ref:H,onFetchData:C},null,512)],2)}}}),Pt=Oe(nt,[["__scopeId","data-v-2112545f"]]);export{Pt as default};
