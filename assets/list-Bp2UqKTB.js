
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aN as se,r as _,a3 as ie,n as re,a as v,q as ue,o as n,b as pe,f as a,w as t,e as s,j as c,g as l,s as K,i as m,aM as W,y as d,z as r,N as ce,b9 as de,ba as me,ap as fe,L as _e}from"./index-BseM2dkr.js";import{_ as ge}from"./index-SElPc0t3.js";import{_ as be}from"./index.vue_vue_type_style_index_0_lang-CHWwL0kz.js";import{_ as ve}from"./index-CwiycraC.js";import{u as ye,o as he,a as X}from"./index-DXPj-Gr1.js";import"./index-DY0c-a7S.js";import"./index.vue_vue_type_script_setup_true_lang-C-DFz3k8.js";import"./sortable.esm-C0-Qcoum.js";const ke={class:"tableBig"},Se={class:"tableBig"},Ne={class:"copyId tableSmall"},je={class:"id oneLine"},Ie={class:"tableBig oneLine"},we={class:"copyId tableSmall"},Le={class:"id oneLine"},ze={class:"tableBig"},Ce={class:"tableBig"},De={class:"copyId tableSmall"},xe={class:"id oneLine"},Ue={class:"tableBig"},Be={class:"copyId tableSmall"},He={class:"id oneLine"},Ae=ne({name:"outsource",__name:"list",setup(Re){const x=ye(),{pagination:f,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=se(),U=_(""),j=_(!0),y=_(!1),B=_(),I=_(!1),i=_([]),D=_(),H=_("formSearch-outsource"),h=_("default"),k=_(!1),w=_([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),b=ie({tenantId:"",tenantName:"",projectStatus:"",type:2}),L=_([]);function A(p){B.value.showEdit(p,b.type===2?1:0)}function R(p){Z(p).then(()=>N())}function S(p=1){ee(p).then(()=>N())}function P(){Object.assign(b,{tenantId:"",tenantName:"",projectStatus:"",type:2}),N()}async function N(){try{j.value=!0;const p={...Y(),...b};if(b.type===1){const o=await X.list(p);L.value=o.data.projectAllocationInfoList,f.value.total=o.data.total}else{const o=await X.meList(p);L.value=o.data.projectMeAllocationInfoList,f.value.total=o.data.total}j.value=!1}catch{}finally{j.value=!1}}re(()=>{w.value.forEach(p=>{p.checked&&i.value.push(p.prop)}),N(),D.value=[{index:1,show:!0,type:"input",modelName:"tenantId",placeholder:"租户id"},{index:2,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:3,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const te={projectStatus:()=>x.projectStatusList.map((p,o)=>({label:p,value:o+1}))};return(p,o)=>{const V=ve,E=v("ElDivider"),M=be,z=v("el-button"),O=de,F=me,$=v("el-row"),u=v("el-table-column"),g=v("el-text"),C=ge,Q=v("el-empty"),T=v("el-table"),q=v("ElPagination"),G=v("el-tab-pane"),ae=v("el-tabs"),oe=fe,J=ue("loading");return n(),pe("div",{class:ce({"absolute-container":I.value})},[a(oe,null,{default:t(()=>[a(ae,{modelValue:b.type,"onUpdate:modelValue":o[14]||(o[14]=e=>b.type=e),onTabChange:N},{default:t(()=>[a(G,{label:"外包项目",name:2},{default:t(()=>[b.type===2?(n(),s(V,{key:0,formSearchList:D.value,formSearchName:H.value,onCurrentChange:S,onOnReset:P,model:b,formOption:te},null,8,["formSearchList","formSearchName","model"])):c("",!0),a(E,{"border-style":"dashed"}),a($,{gutter:24},{default:t(()=>[a(M),a(F,null,{default:t(()=>[a(z,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:t(()=>[l(" 导出 ")]),_:1}),a(O,{border:y.value,"onUpdate:border":o[1]||(o[1]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>I.value=e),checkList:i.value,"onUpdate:checkList":o[3]||(o[3]=e=>i.value=e),columns:w.value,"onUpdate:columns":o[4]||(o[4]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":o[6]||(o[6]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((n(),s(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:t(()=>[a(Q,{image:m(W),"image-size":300},null,8,["image"])]),default:t(()=>[a(u,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(u,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:t(({row:e})=>[d("span",ke,[e.projectStatus===1?(n(),s(g,{key:0,type:"primary"},{default:t(()=>[l(" 进行中(在线)")]),_:1})):e.projectStatus===2?(n(),s(g,{key:1,type:"warning"},{default:t(()=>[l(" 已完成(审核通过)")]),_:1})):e.projectStatus===3?(n(),s(g,{key:2,type:"info"},{default:t(()=>[l(" 离线")]),_:1})):c("",!0)])]),_:1})):c("",!0),i.value.includes("tenantName")?(n(),s(u,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",Se,r(e.tenantName),1)]),_:1})):c("",!0),i.value.includes("tenantId")?(n(),s(u,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:t(({row:e})=>[d("div",Ne,[d("div",je,"ID: "+r(e.tenantId),1),a(C,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):c("",!0),i.value.includes("projectName")?(n(),s(u,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Ie,r(e.projectName),1)]),_:1})):c("",!0),i.value.includes("projectId")?(n(),s(u,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:t(({row:e})=>[d("div",we,[d("div",Le,"ID: "+r(e.projectId),1),a(C,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):c("",!0),i.value.includes("participationNumber")?(n(),s(u,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[l("参与: "+r(e.participationNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[l("完成: "+r(e.doneNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[l("配额: "+r(e.num||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[l("限量: "+r(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(z,{type:"primary",plain:"",size:"small",onClick:le=>A(e)},{default:t(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),a(q,{"current-page":m(f).page,total:m(f).total,"page-size":m(f).size,"page-sizes":m(f).sizes,layout:m(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(G,{label:"接收项目",name:1},{default:t(()=>[b.type===1?(n(),s(V,{key:0,formSearchList:D.value,formSearchName:H.value,onCurrentChange:S,onOnReset:P,model:b},null,8,["formSearchList","formSearchName","model"])):c("",!0),a(E,{"border-style":"dashed"}),a($,{gutter:24},{default:t(()=>[a(M),a(F,null,{default:t(()=>[a(z,{size:"default",onClick:o[7]||(o[7]=()=>{})},{default:t(()=>[l(" 导出 ")]),_:1}),a(O,{border:y.value,"onUpdate:border":o[8]||(o[8]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":o[9]||(o[9]=e=>I.value=e),checkList:i.value,"onUpdate:checkList":o[10]||(o[10]=e=>i.value=e),columns:w.value,"onUpdate:columns":o[11]||(o[11]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":o[12]||(o[12]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":o[13]||(o[13]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((n(),s(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:t(()=>[a(Q,{image:m(W),"image-size":300},null,8,["image"])]),default:t(()=>[a(u,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(u,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:t(({row:e})=>[d("span",ze,r(m(x).projectStatusList[e.projectStatus-1]),1)]),_:1})):c("",!0),i.value.includes("tenantName")?(n(),s(u,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",Ce,r(e.tenantName),1)]),_:1})):c("",!0),i.value.includes("tenantId")?(n(),s(u,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:t(({row:e})=>[d("div",De,[d("div",xe,"ID: "+r(e.tenantId),1),a(C,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):c("",!0),i.value.includes("projectName")?(n(),s(u,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Ue,r(e.projectName),1)]),_:1})):c("",!0),i.value.includes("projectId")?(n(),s(u,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:t(({row:e})=>[d("div",Be,[d("div",He,"ID: "+r(e.projectId),1),a(C,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):c("",!0),i.value.includes("participationNumber")?(n(),s(u,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[l("参与: "+r(e.participationNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[l("完成: "+r(e.doneNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[l("配额: "+r(e.num||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[l("限量: "+r(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(z,{type:"primary",plain:"",size:"small",onClick:le=>A(e)},{default:t(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),a(q,{"current-page":m(f).page,total:m(f).total,"page-size":m(f).size,"page-sizes":m(f).sizes,layout:m(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),a(he,{ref_key:"editRef",ref:B,onFetchData:N},null,512)]),_:1})],2)}}}),Te=_e(Ae,[["__scopeId","data-v-f5cc51f5"]]);export{Te as default};
