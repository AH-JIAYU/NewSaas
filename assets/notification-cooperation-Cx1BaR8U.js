
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as L,aL as H,r as u,a as s,o as y,b as x,y as c,z as h,i as l,f as o,w as a,g as r,j as N,e as M,A as O,b8 as b,_ as G,aH as J,aI as Q,L as W}from"./index-CDcFrPzE.js";import{u as X}from"./index-CaLduACg.js";import"./index-CJ95okTh.js";import"./index-B1BSnhPY.js";import"./department-C4UdYaqe.js";const Y=m=>(J("data-v-62df543a"),m=m(),Q(),m),Z={class:"news p-4"},ee=Y(()=>c("div",{class:"type"},[c("span"),r(" 合作邀约")],-1)),te={class:"news-content"},oe={class:"content"},ae={class:"time"},ne={key:0,class:"footer"},le={style:{display:"flex"},class:"inviteDialog"},re=L({name:"PersonalNotificationCooperation",__name:"notification-cooperation",emits:["delSelectId"],setup(m,{expose:V,emit:w}){const T=w,v=H(),e=u({rules:{priceRatio:[{required:!0,message:"请输入价格比例",trigger:"blur"},{type:"number",trigger:"blur",validator:(t,n,p)=>{if(/^(100|[1-9]?\d)$/.test(n)==!1)return p(new Error("请输入 0 到 100 之间的数字"));p()}}],sendProjectType:[{required:!0,message:"请选择发送项目",trigger:"change"}],receiveProjectType:[{required:!0,message:"请选择接收项目",trigger:"change"}]}}),d=u(!1);u([]);const U=u(),R=async t=>{e.value=t,S()},S=async()=>{const t={id:e.value.id,type:1};await b.updateTenantAudit(t),await v.getUnreadTodo()},E=async()=>{const t={id:e.value.id,type:2};T("delSelectId"),await b.updateTenantAudit(t),await v.getUnreadTodo()},A=async()=>{U.value.validate(async t=>{if(t){const n={id:e.value.id,priceRatio:e.value.priceRatio,type:3,beInvitationChargeUserId:e.value.chargeUserId,beInvitationType:e.value.invitationType,beInvitationChargeUserName:e.value.chargeUserName,sendProjectType:e.value.sendProjectType[0],receiveProjectType:e.value.receiveProjectType[0]};T("delSelectId"),await b.updateTenantAudit(n),await v.getUnreadTodo()}})},k=u();function D(){k.value.showEdit("","请选择负责部门/人")}function B(t){e.value.chargeUserId=t.chargeUserId,e.value.invitationType=t.invitationType,e.value.chargeUserName=t.chargeUserName}const q=t=>{Array.isArray(t)&&t.length>1&&(e.value.sendProjectType=[t[t.length-1]])},F=t=>{Array.isArray(t)&&t.length>1&&(e.value.receiveProjectType=[t[t.length-1]])},$=t=>{t.preventDefault()};return V({showEdit:R}),(t,n)=>{const p=s("el-button"),g=s("el-input"),_=s("el-form-item"),I=G,P=s("el-tooltip"),f=s("el-checkbox"),C=s("el-checkbox-group"),z=s("ElForm"),j=s("ElButton"),K=s("el-dialog");return y(),x("div",Z,[ee,c("div",te,[c("div",oe,"尊贵的"+h(l(e).beInvitedName),1),c("div",ae," 您好，我是"+h(l(e).invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+h(l(e).phoneOrEmail)+"。 ",1),l(e).auditStatus===1?(y(),x("div",ne,[o(p,{onClick:E},{default:a(()=>[r("拒绝合作")]),_:1}),o(p,{type:"primary",onClick:n[0]||(n[0]=i=>d.value=!0)},{default:a(()=>[r(" 同意合作 ")]),_:1})])):N("",!0)]),o(K,{modelValue:l(d),"onUpdate:modelValue":n[6]||(n[6]=i=>O(d)?d.value=i:null),title:"添加PM"},{footer:a(()=>[o(j,{size:"large",onClick:n[5]||(n[5]=i=>d.value=!1)},{default:a(()=>[r(" 取消 ")]),_:1}),o(j,{type:"primary",size:"large",onClick:A},{default:a(()=>[r(" 确定 ")]),_:1})]),default:a(()=>[o(z,{ref_key:"FormRef",ref:U,rules:l(e).rules,model:l(e),"label-width":"7rem",labelPosition:"left"},{default:a(()=>[o(_,{label:"价格比例",prop:"priceRatio"},{default:a(()=>[o(g,{modelValue:l(e).priceRatio,"onUpdate:modelValue":n[1]||(n[1]=i=>l(e).priceRatio=i),clearable:""},{append:a(()=>[r("%")]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"项目分配方式","label-width":"7rem"}),c("div",le,[o(_,{prop:"sendProjectType","label-width":"7rem"},{label:a(()=>[c("span",null,[o(P,{effect:"dark",content:"1111111",placement:"top-start"},{default:a(()=>[o(I,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1}),r(" 发送项目 ")])]),default:a(()=>[o(C,{modelValue:l(e).sendProjectType,"onUpdate:modelValue":n[2]||(n[2]=i=>l(e).sendProjectType=i),onChange:q},{default:a(()=>[o(f,{value:1},{default:a(()=>[r(" 自动 ")]),_:1}),o(f,{value:2},{default:a(()=>[r(" 手动 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"receiveProjectType",style:{"margin-left":"40px"}},{label:a(()=>[c("span",null,[o(P,{effect:"dark",content:"1111111",placement:"top-start"},{default:a(()=>[o(I,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1}),r(" 接收项目 ")])]),default:a(()=>[o(C,{modelValue:l(e).receiveProjectType,"onUpdate:modelValue":n[3]||(n[3]=i=>l(e).receiveProjectType=i),onChange:F},{default:a(()=>[o(f,{value:1},{default:a(()=>[r(" 自动 ")]),_:1}),o(f,{value:2},{default:a(()=>[r(" 手动 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),l(e).receiveProjectType&&l(e).receiveProjectType[0]==1?(y(),M(g,{key:0,placeholder:"请选择接收项目负责人",onKeydown:$,onClick:D,modelValue:l(e).chargeUserName,"onUpdate:modelValue":n[4]||(n[4]=i=>l(e).chargeUserName=i)},null,8,["modelValue"])):N("",!0)]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),o(X,{ref_key:"userRef",ref:k,onUserData:B},null,512)])}}}),me=W(re,[["__scopeId","data-v-62df543a"]]);export{me as default};
