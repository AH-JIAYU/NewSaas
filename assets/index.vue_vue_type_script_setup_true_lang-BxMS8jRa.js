
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as C}from"./project_settlement-CFXcDbGP.js";import{d as N,r as n,a as u,an as S,ak as B,o as d,b as v,f as a,w as s,A as D,g as b,B as m,e as T,j as A,E as y}from"./index-BVVfrBYG.js";const H={key:0,style:{"margin-bottom":"20px"}},L={key:1,style:{"margin-bottom":"20px"}},M={style:{flex:"auto"}},q=N({name:"InvoicingEdit",__name:"index",emits:["success"],setup(O,{expose:k,emit:x}){const h=x,p=n(!1),i=n({projectSettlementId:[],type:null}),t=n(),c=n(),l=n(!1);async function j(r,e){i.value.type=r,t.value=e,e.forEach(o=>{i.value.projectSettlementId.push(o.id)}),c.value=r===1?"开票":"结算",l.value=!0}async function I(){if(p.value=!0,(await C.InvoicingSettlementEdit(i.value)).status===-1)return y.warning({message:"操作失败",center:!0});h("success"),p.value=!1,y.success({message:"操作成功",center:!0}),_()}function _(){Object.assign(i.value,{projectSettlementId:[],type:null}),l.value=!1}return k({showEdit:j}),(r,e)=>{const o=u("el-table-column"),w=u("el-table"),f=u("el-button"),V=u("el-dialog"),E=S("loading");return B((d(),v("div",null,[a(V,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=g=>l.value=g),title:c.value,width:"700","before-close":_},{footer:s(()=>[D("div",M,[a(f,{onClick:e[0]||(e[0]=g=>l.value=!1)},{default:s(()=>[b(" 取消 ")]),_:1}),a(f,{type:"primary",onClick:I},{default:s(()=>[b(" 确定 ")]),_:1})])]),default:s(()=>[t.value.length>1?(d(),v("div",H,"确认对以下项目进行"+m(c.value)+"操作吗?",1)):(d(),v("div",L,"确认对项目ID:"+m(t.value[0].projectId)+"+项目名称:"+m(t.value[0].projectName)+"进行"+m(c.value)+"操作吗?",1)),t.value.length>1?(d(),T(w,{key:2,data:t.value,"row-key":"id"},{default:s(()=>[a(o,{width:"80",type:"index",align:"center",label:"序号"}),a(o,{align:"center",prop:"projectId",label:"项目ID"}),a(o,{align:"center",prop:"projectName",label:"项目名称"})]),_:1},8,["data"])):A("",!0)]),_:1},8,["modelValue","title"])])),[[E,p.value]])}}});export{q as _};
