
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as R,am as U,r as A,k as M,a as n,o as i,b as p,i as a,e as f,w as l,f as s,g as _,F as w,j as b,H as S,t as H,s as c,q as g,aq as y,an as q,aG as K,aH as z,R as F}from"./index-DSaDGYUV.js";import{u as G}from"./projectManagement_list-CQDOzpiu.js";import{u as Q}from"./stagedData-zif_AaSB.js";import{u as J}from"./user_customer-Yd4u7ar9.js";import{a as O}from"./projectManagement-BQ9yPasx.js";import"./user_customer-BUGUBMku.js";const W=m=>(K("data-v-7bbd0ae8"),m=m(),z(),m),X=W(()=>c("div",null,"小时准入量",-1)),Y={style:{float:"left"}},Z={style:{float:"right",color:"red","font-size":"13px"}},$=R({name:"ProjeckEdit",__name:"index",emits:["fetch-data"],setup(m,{expose:k,emit:ee}){const C=G();Q();const h=U(),v=J(),e=A({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},customerList:[]}),I={PCNL:"参数",customer:"客户",name:"名称/标识",doMoneyPrice:"原价",ir:"IR",remark:"备注"};async function L(d,o){e.value.title=I[o],e.value.type=o;try{e.value.loading=!0;const r=await O.detail({projectId:d.projectId});e.value.formData=r.data,e.value.dialogTableVisible=!0,e.value.loading=!1,C.dataBeforeEditing=q(e.value.formData)}catch{}finally{e.value.loading=!1}const u=await v.getCustomerList();console.log("resa",u),e.value.customerList=u}const V=d=>{d.key==="."&&d.preventDefault()};async function x(){console.log("提交")}function N(){e.value.dialogTableVisible=!1,e.value.formData={}}const T=async()=>{await v.getCustomerList(),await h.getCountry()};return M(async()=>{await T()}),k({showEdit:L}),(d,o)=>{const u=n("el-input-number"),r=n("el-form-item"),j=n("el-option"),B=n("el-select"),E=n("el-form"),D=n("el-button"),P=n("el-dialog");return i(),p("div",null,[a(e).dialogTableVisible?(i(),f(P,{key:0,modelValue:a(e).dialogTableVisible,"onUpdate:modelValue":o[3]||(o[3]=t=>a(e).dialogTableVisible=t),title:a(e).title+"编辑",draggable:""},{footer:l(()=>[s(D,{onClick:N,disabled:a(e).loading},{default:l(()=>[_(" 取消 ")]),_:1},8,["disabled"]),s(D,{type:"primary",onClick:x,disabled:a(e).loading},{default:l(()=>[_(" 确定 ")]),_:1},8,["disabled"])]),default:l(()=>[s(E,{model:a(e).formData,"label-width":"100","label-position":"right"},{default:l(()=>[a(e).type==="PCNL"?(i(),p(w,{key:0},[s(r,{label:"配额",prop:"num"},{default:l(()=>[s(u,{style:{width:"100%"},modelValue:a(e).formData.num,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).formData.num=t),step:1,"step-strictly":"",min:1,max:100,"controls-position":"right",onKeydown:V},null,8,["modelValue"])]),_:1}),s(r,null,{label:l(()=>[X]),default:l(()=>[s(u,{style:{width:"100%"},modelValue:a(e).formData.preNum,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).formData.preNum=t),min:1,step:1,"step-strictly":"","controls-position":"right",onKeydown:V},null,8,["modelValue"])]),_:1})],64)):b("",!0),a(e).type==="customer"?(i(),f(r,{key:1,label:"所属客户",prop:"clientId"},{default:l(()=>[_(S(a(e))+" ",1),s(B,{placeholder:"Select",modelValue:a(e).formData.clientId,"onUpdate:modelValue":o[2]||(o[2]=t=>a(e).formData.clientId=t),clearable:""},{default:l(()=>[(i(!0),p(w,null,H(a(e).customerList,t=>(i(),f(j,{key:t.tenantCustomerId,value:t.tenantCustomerId,label:t.customerAccord,disabled:t.isReveal===1},{default:l(()=>[c("span",Y,S(t.customerAccord),1),g(c("span",Z,[g(c("span",null," 营业额超限 ",512),[[y,t.turnover<t.practiceTurover]]),g(c("span",null," 审核率不合格 ",512),[[y,t.rateAudit>t.practiceRateAudit]])],512),[[y,t.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})):b("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])):b("",!0)])}}}),re=F($,[["__scopeId","data-v-7bbd0ae8"]]);export{re as default};
