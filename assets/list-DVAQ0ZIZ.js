
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ee,ao as Ue,aN as ze,r as d,a5 as Pe,c as Re,k as xe,a as c,p as Be,o as n,b as h,f as l,w as e,i as o,q as C,F as w,t as x,e as r,g as u,H as _,I as v,j as b,S as Me,b9 as Te,E as De,N as $e,aP as Ge,aQ as Oe,aq as Fe,aJ as Ae,aK as He,s as qe,ar as B,R as Qe}from"./index-BaLgkNXx.js";import{_ as Je}from"./index.vue_vue_type_script_setup_true_lang-wYCiKfRi.js";import{_ as Ke}from"./index.vue_vue_type_style_index_0_lang-Bn58Pfcb.js";import{_ as We}from"./index.vue_vue_type_script_setup_true_lang-Bh-sdYrF.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-BPZYq33T.js";import Ye from"./index-CKZadFtu.js";import Ze from"./index-B-TE0A9c.js";import et from"./index-BvRn7U1o.js";import{a as tt}from"./survey_myProjeck-BZlwNPEL.js";import{u as lt}from"./user_customer-CT26UWRE.js";import{u as ot}from"./index-Dwn6jvwS.js";import"./index-DMZ0RV1V.js";import"./file-CiU3B0DW.js";import"./download-C8PHVIy1.js";import"./apiLoading-DHgXrJV4.js";import"./projectManagement-BdFAMZmV.js";import"./survey_vipGroup-BecfDRvZ.js";import"./survey_vipGroup-G2A9qv-i.js";import"./user_customer-Cbtgqkro.js";const at=N=>(Ae("data-v-943366b6"),N=N(),He(),N),nt=at(()=>qe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),rt=Ee({name:"myProjeck",__name:"list",setup(N){const{format:Y}=Te(),{toClipboard:Z}=ot(),ee=Ue(),te=lt(),{pagination:y,getParams:it,onSizeChange:le,onCurrentChange:oe,onSortChange:st}=ze(),F=d([]),A=d([]),H=d(),ae=d(""),q=d(),M=d(!0),ne=d(),Q=d(),L=d(!0),m=d([]),j=d(!1),S=d("default"),V=d(!1),E=d([{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"客户简称/标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配状态",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),i=Pe({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),J=d([]),K=d();function re(p){q.value.showEdit(p)}function ie(p){Q.value.showEdit(p)}function se(p){K.value.showEdit(p)}function ce(p){le(p)}function W(p=1){oe(p)}function ue(){Object.assign(i,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:0,time:[],beginTime:"",endTime:""}),U()}const pe=Re(()=>J.value.slice((y.value.page-1)*y.value.size,y.value.page*y.value.size));async function U(){M.value=!0;const p={...i};i.time&&i.time.length&&(p.beginTime=i.time[0]||"",p.endTime=i.time[1]||"");const a=await tt.list(p);H.value=a.data.currencyType,J.value=a.data.getMemberProjectListInfoList,y.value.total=a.data.getMemberProjectListInfoList.length,M.value=!1}const me=p=>{Z(p),De({type:"success",message:"复制成功"})};return xe(async()=>{E.value.forEach(p=>{p.checked&&m.value.push(p.prop)}),F.value=await ee.getCountry(),A.value=await te.getCustomerList(),U()}),(p,a)=>{const T=c("el-input"),k=c("el-form-item"),de=c("ElOption"),D=c("el-select"),$=c("el-option"),fe=c("el-date-picker"),X=$e,G=c("ElButton"),_e=c("ElFormItem"),be=c("el-form"),ge=We,ye=c("ElDivider"),ke=Ke,z=c("el-button"),he=Ge,ve=Oe,Ie=c("el-row"),f=c("el-table-column"),O=c("el-tooltip"),I=c("el-text"),Ce=Je,P=c("el-link"),R=c("el-tag"),we=c("ElSpace"),Ne=c("el-empty"),Le=c("el-table"),je=c("ElPagination"),Se=Fe,Ve=Be("loading");return n(),h("div",{class:Me({"absolute-container":o(j)})},[l(Se,null,{default:e(()=>[l(ge,{"show-toggle":!1},{default:e(({fold:t,toggle:g})=>[l(be,{model:o(i).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[l(k,{label:""},{default:e(()=>[l(T,{modelValue:o(i).projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>o(i).projectId=s),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:e(()=>[l(T,{clearable:"",modelValue:o(i).projectName,"onUpdate:modelValue":a[1]||(a[1]=s=>o(i).projectName=s),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:e(()=>[l(T,{modelValue:o(i).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=s=>o(i).projectIdentification=s),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),C(l(k,{label:""},{default:e(()=>[l(D,{placeholder:"国家地区",modelValue:o(i).countryId,"onUpdate:modelValue":a[3]||(a[3]=s=>o(i).countryId=s),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:e(()=>[(n(!0),h(w,null,x(o(F),s=>(n(),r(de,{label:s.chineseName,value:s.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),C(l(k,{label:""},{default:e(()=>[l(D,{placeholder:"客户简称",modelValue:o(i).clientId,"onUpdate:modelValue":a[4]||(a[4]=s=>o(i).clientId=s)},{default:e(()=>[(n(!0),h(w,null,x(o(A),s=>(n(),r($,{key:s.tenantCustomerId,value:s.tenantCustomerId,label:s.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),C(l(k,{label:""},{default:e(()=>[l(D,{placeholder:"B2B/B2C",modelValue:o(i).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=s=>o(i).b2bOrB2cStatus=s)},{default:e(()=>[l($,{label:"B2B",value:"1"}),l($,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),C(l(k,null,{default:e(()=>[l(fe,{modelValue:o(i).time,"onUpdate:modelValue":a[6]||(a[6]=s=>o(i).time=s),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[B,!t]]),l(_e,null,{default:e(()=>[l(G,{type:"primary",onClick:a[7]||(a[7]=s=>U())},{icon:e(()=>[l(X,{name:"i-ep:search"})]),default:e(()=>[u(" 筛选 ")]),_:1}),l(G,{onClick:ue},{icon:e(()=>[nt]),default:e(()=>[u(" 重置 ")]),_:1}),l(G,{link:"",onClick:g},{icon:e(()=>[l(X,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[u(" "+_(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(ye,{"border-style":"dashed"}),l(Ie,{gutter:24},{default:e(()=>[l(ke),l(ve,null,{default:e(()=>[l(z,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:e(()=>[u(" 导出 ")]),_:1}),l(he,{border:o(L),"onUpdate:border":a[9]||(a[9]=t=>v(L)?L.value=t:null),tableAutoHeight:o(j),"onUpdate:tableAutoHeight":a[10]||(a[10]=t=>v(j)?j.value=t:null),checkList:o(m),"onUpdate:checkList":a[11]||(a[11]=t=>v(m)?m.value=t:null),columns:o(E),"onUpdate:columns":a[12]||(a[12]=t=>v(E)?E.value=t:null),"line-height":o(S),"onUpdate:lineHeight":a[13]||(a[13]=t=>v(S)?S.value=t:null),stripe:o(V),"onUpdate:stripe":a[14]||(a[14]=t=>v(V)?V.value=t:null),style:{"margin-left":"12px"},onQueryData:W},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((n(),r(Le,{ref_key:"tableSortRef",ref:ae,style:{"margin-top":"10px"},"row-key":"id",data:o(pe),border:o(L),size:o(S),stripe:o(V)},{empty:e(()=>[l(Ne,{description:"暂无数据"})]),default:e(()=>[l(f,{align:"center",type:"selection"}),o(m).includes("projectId")?(n(),r(f,{key:0,"show-overflow-tooltip":"",width:"180",fixed:"left",prop:"projectId",align:"center",label:"项目ID"})):b("",!0),o(m).includes("projectName")?(n(),r(f,{key:1,"show-overflow-tooltip":"",width:"180",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),o(m).includes("projectIdentificationOrClientName")?(n(),r(f,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"center",label:"客户简称/标识"})):b("",!0),o(m).includes("withoutUrl")?(n(),r(f,{key:3,prop:"withoutUrl",align:"center",label:"URL"},{default:e(({row:t})=>[l(O,{class:"box-item",effect:"dark",content:t.withoutUrl,placement:"top"},{default:e(()=>[l(z,{link:"",type:"primary",onClick:g=>me(t.withoutUrl)},{default:e(()=>[u("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):b("",!0),o(m).includes("participation")?(n(),r(f,{key:4,"show-overflow-tooltip":"",width:"170",align:"center",label:"参与/完成/配额/限量"},{default:e(({row:t})=>[u(_(t.participation)+"/ "+_(t.complete)+"/ "+_(t.num)+"/ "+_(t.limitedQuantity),1)]),_:1})):b("",!0),o(m).includes("doMoneyPrice")?(n(),r(f,{key:5,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[o(H)===3?(n(),r(I,{key:0,class:"mx-1"},{default:e(()=>[u("暂无数据")]),_:1})):(n(),r(I,{key:1,class:"mx-1"},{default:e(()=>[l(Ce),u(_(t.doMoneyPrice||0),1)]),_:2},1024))]),_:1})):b("",!0),o(m).includes("memberPrice")?(n(),r(f,{key:6,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(P,{key:0,size:"small",plain:"",type:"primary",onClick:g=>ie(t)},{default:e(()=>[u(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(I,{key:1},{default:e(()=>[u(" - ")]),_:1}))]),_:1})):b("",!0),o(m).includes("ir")?(n(),r(f,{key:7,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[u(_(t.ir)+"/ "+_(t.nir),1)]),_:1})):b("",!0),o(m).includes("countryNameList")?(n(),r(f,{key:8,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:e(({row:t})=>[t.countryNameList.length>4?(n(),h(w,{key:0},[t.countryNameList.length!==185?(n(),r(O,{key:0,class:"box-item",effect:"dark",content:t.countryNameList.join(","),placement:"top"},{default:e(()=>[l(P,{type:"primary"},{default:e(()=>[l(R,{type:"danger"},{default:e(()=>[u(_(t.countryNameList.length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(),r(R,{key:1,type:"warning"},{default:e(()=>[u("全球")]),_:1}))],64)):(n(!0),h(w,{key:1},x(t.countryNameList,g=>(n(),r(R,{key:g,type:"primary"},{default:e(()=>[u(_(g),1)]),_:2},1024))),128))]),_:1})):b("",!0),o(m).includes("memberStatus")?(n(),r(f,{key:9,"show-overflow-tooltip":"",align:"center",label:"分配状态"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(I,{key:0,type:"primary"},{default:e(()=>[u(" 已分配 ")]),_:1})):(n(),r(I,{key:1},{default:e(()=>[u(" 未分配 ")]),_:1}))]),_:1})):b("",!0),o(m).includes("memberGroupName")?(n(),r(f,{key:10,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(O,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:e(()=>[(n(!0),h(w,null,x(t.getMemberGroupNameInfoList,g=>(n(),h("div",null,_(g.memberGroupName)+"-"+_(g.memberGroupId),1))),256))]),default:e(()=>[l(P,{type:"primary"},{default:e(()=>[u(_(t.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)):(n(),r(P,{key:1},{default:e(()=>[u("-")]),_:1}))]),_:1})):b("",!0),o(m).includes("createTime")?(n(),r(f,{key:11,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{default:e(({row:t})=>[l(R,{effect:"plain",type:"info"},{default:e(()=>[u(_(o(Y)(t.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),l(f,{align:"center",fixed:"right",label:"操作",width:"200"},{default:e(({row:t})=>[l(we,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?b("",!0):(n(),r(z,{key:0,type:"primary",plain:"",size:"small",onClick:g=>se(t)},{default:e(()=>[u(" 分配 ")]),_:2},1032,["onClick"])),l(z,{size:"small",plain:"",type:"primary",onClick:g=>re(t)},{default:e(()=>[u(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ve,o(M)]]),l(je,{"current-page":o(y).page,total:o(y).total,"page-size":o(y).size,"page-sizes":o(y).sizes,layout:o(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ce,onCurrentChange:W},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Xe,{ref_key:"CheckEditRef",ref:ne},null,512),l(Ye,{ref_key:"detailRef",ref:q},null,512),l(Ze,{ref_key:"checkMembershipPriceRef",ref:Q},null,512),l(et,{ref_key:"addAllocationEditRef",ref:K,onFetchData:U},null,512)],2)}}}),St=Qe(rt,[["__scopeId","data-v-943366b6"]]);export{St as default};
