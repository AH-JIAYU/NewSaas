
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as m,d as R,r as i,a5 as U,b as u,q as D,o as w,e as B,g as t,w as a,t as f,h as n,s as L,f as q,E as g,R as O}from"./index-DQD169NL.js";const S={list:r=>m.post("tenant-update-record/getTenantUpdateRecordList",r),create:r=>m.post("notice/insertNotice",r),edit:r=>m.post("tenant-update-record/updateTenantUpdateRecord",r),delete:r=>m.post("notice/deleteNotice",r)},$={class:"shenhe"},M={class:"beizhu"},P={style:{"margin-top":"10px"}},F={style:{flex:"auto"}},H=R({name:"ProjectReview",__name:"index",emits:["success"],setup(r,{expose:k,emit:T}){const z=T,c=i(!1);i();const e=i({surveyType:null,viceType:null,type:"",remark:"",projectClickIdList:[],arr:[]});U({page:1,limit:10,type:null,createUserId:""});const I=i({type:[{required:!0,message:"请选择审核方式",trigger:"change"}],arr:[{required:!0,message:"请输入至少一个ID",trigger:"blur"},{validator:(v,l,o)=>{/^[\d\n]*$/.test(l)?o():o(new Error("请输入数字，支持换行"))},trigger:"blur"}]}),p=i(),d=i(!1);async function C(v){d.value=!0}async function h(){p.value&&p.value.validate(async v=>{if(v)try{c.value=!0;const l=e.value.type.split(",");e.value.surveyType=+l[0],l[1]==="null"?e.value.viceType=null:e.value.viceType=+l[1],e.value.projectClickIdList=e.value.arr.split(`
`)||[],delete e.value.arr,delete e.value.type;const{status:o}=await S.edit(e.value);o===1?(z("success"),c.value=!1,g.success({message:"操作成功",center:!0}),y()):g.error({message:"操作失败，请联系工作人员",center:!0})}catch{}finally{c.value=!1}else g({message:"请检查必填项,或数据格式不正确",type:"warning"})})}function y(){p.value.resetFields(),Object.assign(e.value,{surveyType:null,viceType:null,remark:"",projectClickIdList:[]}),e.value.arr=[],d.value=!1}return k({showEdit:C}),(v,l)=>{const o=u("el-radio"),b=u("el-radio-group"),_=u("el-form-item"),V=u("el-input"),j=u("el-form"),x=u("el-button"),E=u("el-drawer"),N=D("loading");return w(),B("div",null,[t(E,{modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=s=>d.value=s),title:"记录变更",size:"50%","before-close":y},{footer:a(()=>[f("div",F,[t(x,{onClick:l[3]||(l[3]=s=>d.value=!1)},{default:a(()=>[n(" 取消 ")]),_:1}),t(x,{type:"primary",onClick:h},{default:a(()=>[n(" 确定 ")]),_:1})])]),default:a(()=>[L((w(),q(j,{ref_key:"formRef",ref:p,model:e.value,rules:I.value,"label-width":"174px",inline:!1},{default:a(()=>[f("div",$,[t(_,{prop:"type",style:{display:"flex","align-items":"center"},label:"变更状态"},{default:a(()=>[t(b,{modelValue:e.value.type,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value.type=s)},{default:a(()=>[t(o,{value:"1,0",size:"large"},{default:a(()=>[n(" 完成 ")]),_:1}),t(o,{value:"1,7",size:"large"},{default:a(()=>[n(" 审核通过 ")]),_:1}),t(o,{value:"1,8",size:"large"},{default:a(()=>[n(" 审核失败 ")]),_:1}),t(o,{value:"1,9",size:"large"},{default:a(()=>[n(" 数据冻结 ")]),_:1}),t(o,{value:"2,null",size:"large"},{default:a(()=>[n(" 被甄别 ")]),_:1}),t(o,{value:"3,null",size:"large"},{default:a(()=>[n(" 配额满 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),f("div",M,[t(_,{label:"备注"},{default:a(()=>[t(V,{class:"custom-input",modelValue:e.value.remark,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value.remark=s),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),f("div",P,[t(_,{prop:"arr"},{default:a(()=>[t(V,{modelValue:e.value.arr,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.arr=s),placeholder:"请粘贴ID，每行一个,多个请回车换行",type:"textarea",rows:15},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])),[[N,c.value]])]),_:1},8,["modelValue"])])}}}),A=O(H,[["__scopeId","data-v-5b5d5471"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as E,S as a,K as i};
