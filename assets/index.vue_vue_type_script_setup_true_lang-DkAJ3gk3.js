
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./position_manage-Ct7XZM4Y.js";import{d as R,r as o,k as q,a as r,p as B,q as D,o as T,b as U,f as t,w as s,s as M,g as _,E as g,v as S}from"./index-C7GoWkMV.js";const I={style:{flex:"auto"}},$=R({name:"Edit",__name:"index",emits:["success"],setup(J,{expose:V,emit:b}){const d=b,c=o(""),k=o(),x=o(!1),i=o(),n=o(!1),l=o({id:null,name:"",active:1,remark:1}),y=o({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function C(){return new Promise(a=>{l.value.id?i.value&&i.value.validate(e=>{if(e){const m=S(l.value);p.edit(m).then(()=>{g.success({message:"编辑成功",center:!0}),d("success"),n.value=!1,a()})}}):i.value&&i.value.validate(e=>{e&&(delete l.value.id,p.create(l.value).then(()=>{g.success({message:"新增成功",center:!0}),d("success"),n.value=!1,a()}))})})}async function E(a){a?l.value=JSON.parse(a):l.value={id:null,name:"",active:1,remark:""},c.value=a!=null&&a.id?"编辑":"新增",n.value=!0}return q(async()=>{k.value=new Date}),V({showEdit:E}),(a,e)=>{const m=r("el-input"),f=r("el-form-item"),h=r("el-form"),v=r("el-button"),w=r("el-dialog"),N=B("loading");return D((T(),U("div",null,[t(w,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=u=>n.value=u),title:c.value,width:"700"},{footer:s(()=>[M("div",I,[t(v,{type:"",onClick:e[2]||(e[2]=u=>n.value=!1)},{default:s(()=>[_(" 取消 ")]),_:1}),t(v,{type:"primary",onClick:C},{default:s(()=>[_(" 确定 ")]),_:1})])]),default:s(()=>[t(h,{ref_key:"formRef",ref:i,"label-width":"80px",model:l.value,rules:y.value,inline:!1},{default:s(()=>[t(f,{prop:"name",label:"职位名称"},{default:s(()=>[t(m,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>l.value.name=u),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"备注"},{default:s(()=>[t(m,{modelValue:l.value.remark,"onUpdate:modelValue":e[1]||(e[1]=u=>l.value.remark=u),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[N,x.value]])}}});export{$ as _};
