
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{bh as Bt,bg as Pt,bi as wt,d as It,bj as Wt,i as w,v as Nt,O as Ot,t as Et,P as Rt,a1 as jt,x as Tt,y as _t,c as Be,r as He,af as Ft,av as Vt,G as Ze,a2 as qe,aw as Je,aO as Ht,o as oe,b as ue,l as ce,f as Le,w as Lt,F as At,n as zt,R as Ae,e as Qe,j as ze,g as Dt,I as et,ay as he,am as $t,aB as Kt,aN as Ut,N as Gt,aG as Yt,aH as Xt,a5 as Zt,b7 as Pe,$ as tt,_ as qt}from"./index-Da_FuzzH.js";import{S as Jt}from"./sortable.esm-BS5toX6s.js";import{c as Qt}from"./index-s8RpKhCK.js";import en from"./moreAction-BW5G2JLi.js";import{u as tn}from"./useTabbar-RX1TTO3P.js";import{u as nn}from"./useMainPage-DP9JjYIr.js";import"./HDropdown-Xx3d7sT2.js";import"./HTooltip.vue_vue_type_script_setup_true_lang-Cmi7XIHJ.js";var De={exports:{}};(function(de,we){(function(T,e){e(we,Bt)})(Pt,function(T,e){let b=null;function F(){return b!==null}function Ie(t){b&&K(),b=t}function We(t){t===b&&(b=null)}function K(){b&&(b.closeMenu(),b=null)}const A={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function I(t,n){let a=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(a-=t.offsetParent.scrollTop,a+=I(t.offsetParent,n)),a}function X(t,n){let a=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(a-=t.offsetParent.scrollLeft,a+=X(t.offsetParent,n)),a}function le(t,n,a,d){return{x:X(t,d)+n,y:I(t,d)+a}}const ae="mx-menu-default-container",Q="mx-menu-container-";let Ne=0;function ve(t){const{getContainer:n,zIndex:a}=t;if(n){const h=typeof n=="function"?n():n;if(h){let k=h.getAttribute("id");return k||(k=Q+Ne++,h.setAttribute("id",k)),{eleId:k,container:h,isNew:!1}}}let d=document.getElementById(ae);return d||(d=document.createElement("div"),d.setAttribute("id",ae),d.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(d)),d.style.zIndex=(a==null?void 0:a.toString())||A.defaultZindex.toString(),{eleId:ae,container:d,isNew:!0}}function se(t){return typeof t=="number"?`${t}px`:t}const V=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:a}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(a.value):n.value}}),ie=(t,n)=>{const a=t.__vccOpts||t;for(const[d,h]of n)a[d]=h;return a},Oe={},Ee={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Re=[e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1)];function je(t,n){return e.openBlock(),e.createElementBlock("svg",Ee,Re)}const be=ie(Oe,[["render",je]]),m={},s={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},B=[e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1)];function r(t,n){return e.openBlock(),e.createElementBlock("svg",s,B)}const z=ie(m,[["render",r]]),ee={class:"mx-item-row"},ge=["xlink:href"],U={key:1,class:"label"},nt={class:"mx-item-row"},ot={class:"mx-shortcut"},ke=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:a}){const d=t,h=a,{clickHandler:k,clickClose:W,clickableWhenHasChildren:j,disabled:M,hidden:C,label:o,icon:i,iconFontClass:L,showRightArrow:O,shortcut:D,hasChildren:P}=e.toRefs(d),v=e.ref(!1),u=e.ref(!1),p=e.ref(),g=e.inject("globalHasSlot"),x=e.inject("globalRenderSlot"),N=e.inject("globalTheme"),G=e.inject("globalIconFontClass"),Y=e.inject("globalMenuTransitionProps"),Z=e.inject("globalClickCloseClassName"),te=e.inject("globalIgnoreClickClassName"),f=e.inject("globalCloseMenu"),S=e.inject("menuContext"),$={showSubMenu:()=>v.value?(S.markActiveMenuItem($,!0),!0):P.value?(q(),!0):!1,isDisabledOrHidden:()=>M.value||C.value,getElement:()=>p.value,focus:()=>u.value=!0,blur:()=>u.value=!1,click:ne};e.onMounted(()=>{S.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let c=0;const _=S.getElement();if(_){let l=0;for(let y=0;y<_.children.length;y++){const E=_.children[y];if(E.getAttribute("data-type")==="ContextMenuItem"){if(E===p.value){c=l;break}l++}}}S.addChildMenuItem($,c)}):S.addChildMenuItem($)}),e.onBeforeUnmount(()=>{S.removeChildMenuItem($)});function ne(c){if(!M.value){if(c){const _=c.target;if(_.classList.contains("mx-context-no-clickable")||te&&_.classList.contains(te))return;if(Z&&_.classList.contains(Z)){c.stopPropagation(),f(d.rawMenuItem);return}}P.value?j.value?(typeof k.value=="function"&&k.value(c),h("click",c)):v.value||q():(typeof k.value=="function"&&k.value(c),h("click",c),W.value&&f(d.rawMenuItem))}}function q(c){u.value=!1,S.checkCloseOtherSubMenuTimeOut()||S.closeOtherSubMenu(),M.value||(S.markActiveMenuItem($),P.value&&(c||S.markThisOpenedByKeyBoard(),S.addOpenedSubMenu(()=>{u.value=!1,v.value=!1,h("subMenuClose")}),v.value=!0,h("subMenuOpen")))}function H(){return{disabled:M.value,label:o.value,icon:i.value,iconFontClass:L.value,showRightArrow:O.value,clickClose:W.value,clickableWhenHasChildren:j.value,shortcut:D.value,theme:N,isOpen:v,hasChildren:P,onClick:ne,onMouseEnter:q,closeMenu:f}}return n({showSubMenu:v,keyBoardFocusMenu:u}),(c,_)=>e.unref(C)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:p,"data-type":"ContextMenuItem"},[e.unref(g)("itemRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemRender",H())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(V),{key:1,vnode:t.customRender,data:H()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(M)?"disabled":"",u.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",v.value?"open":""]),onClick:ne,onMouseenter:q},[e.renderSlot(c.$slots,"default",{},()=>[e.createElementVNode("div",ee,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(c.$slots,"icon",{},()=>[e.unref(g)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemIconRender",H())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,ge)],16)):typeof e.unref(i)!="string"?(e.openBlock(),e.createBlock(e.unref(V),{key:2,vnode:e.unref(i),data:e.unref(i)},null,8,["vnode","data"])):typeof e.unref(i)=="string"&&e.unref(i)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(i)+" icon "+e.unref(L)+" "+e.unref(G))},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(c.$slots,"check",{key:0},()=>[e.unref(g)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemCheckRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(be)]):e.createCommentVNode("",!0)],2),e.renderSlot(c.$slots,"label",{},()=>[e.unref(g)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemLabelRender",H())},null,8,["vnode"])):typeof e.unref(o)=="string"?(e.openBlock(),e.createElementBlock("span",U,e.toDisplayString(e.unref(o)),1)):(e.openBlock(),e.createBlock(e.unref(V),{key:2,vnode:e.unref(o),data:e.unref(o)},null,8,["vnode","data"]))])]),e.createElementVNode("div",nt,[e.unref(D)?e.renderSlot(c.$slots,"shortcut",{key:0},()=>[e.unref(g)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemShortcutRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",ot,e.toDisplayString(e.unref(D)),1)]):e.createCommentVNode("",!0),e.unref(O)?e.renderSlot(c.$slots,"rightArrow",{key:1},()=>[e.unref(g)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(V),{key:0,vnode:()=>e.unref(x)("itemRightArrowRender",H())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(z)]):e.createCommentVNode("",!0)])])],34)),e.unref(Y)?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(Y))),{default:e.withCtx(()=>[v.value?e.renderSlot(c.$slots,"submenu",{key:0}):e.createCommentVNode("",!0)]),_:3},16)):v.value?e.renderSlot(c.$slots,"submenu",{key:4}):e.createCommentVNode("",!0)],512))}}),lt=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:V},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),at={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function it(t,n,a,d,h,k){const W=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(W,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",at))}const Ce=ie(lt,[["render",it]]),st=e.defineComponent({name:"ContextSubMenu",components:{ContextMenuItem:ke,ContextMenuSeparator:Ce,ContextMenuIconRight:z},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const n=e.inject("menuContext"),a=e.inject("globalOptions"),d=e.inject("globalHasSlot"),h=e.inject("globalRenderSlot"),k=e.inject("globalTheme"),{zIndex:W,getParentWidth:j,getParentHeight:M}=n,{adjustPosition:C}=e.toRefs(t),o=e.ref(),i=e.ref(),L=e.ref(),O=[],D=e.inject("globalSetCurrentSubMenu"),P=[];let v=null,u=0;function p(){v&&v.blur()}function g(l,y){if(l){for(let E=y!==void 0?y:0;E<P.length;E++)if(!P[E].isDisabledOrHidden()){x(E);break}}else for(let E=y!==void 0?y:P.length-1;E>=0;E--)if(!P[E].isDisabledOrHidden()){x(E);break}}function x(l){if(v&&p(),l!==void 0&&(v=P[Math.max(0,Math.min(l,P.length-1))]),!!v&&(v.focus(),H.value)){const y=v.getElement();y&&(f.value=Math.min(Math.max(-S.value,-y.offsetTop-y.offsetHeight+_.value),0))}}function N(){D(G)}const G={isTopLevel:()=>n.getParentContext()===null,closeSelfAndActiveParent:()=>{const l=te.getParentContext();if(l){l.closeOtherSubMenu();const y=l.getSubMenuInstanceContext();if(y)return y.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var l;return(l=te.getParentContext())==null?void 0:l.closeOtherSubMenu()},moveCurrentItemFirst:()=>g(!0),moveCurrentItemLast:()=>g(!1),moveCurrentItemDown:()=>g(!0,v?P.indexOf(v)+1:0),moveCurrentItemUp:()=>g(!1,v?P.indexOf(v)-1:0),focusCurrentItem:()=>x(),openCurrentItemSubMenu:()=>v?v==null?void 0:v.showSubMenu():!1,triggerCurrentItemClick:l=>v==null?void 0:v.click(l)};let Y=!1,Z=!1;const te={zIndex:W+1,container:n.container,adjustPadding:a.adjustPadding||A.defaultAdjustPadding,getParentWidth:()=>{var l;return((l=o.value)==null?void 0:l.offsetWidth)||0},getParentHeight:()=>{var l;return((l=o.value)==null?void 0:l.offsetHeight)||0},getParentX:()=>c.value.x,getParentY:()=>c.value.y,getParentAbsX:()=>o.value?X(o.value,n.container):0,getParentAbsY:()=>o.value?I(o.value,n.container):0,getPositon:()=>[0,0],addOpenedSubMenu(l){O.push(l)},closeOtherSubMenu(){O.forEach(l=>l()),O.splice(0,O.length),D(G)},checkCloseOtherSubMenuTimeOut(){return u?(clearTimeout(u),u=0,!0):!1},closeOtherSubMenuWithTimeOut(){u=setTimeout(()=>{u=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(l,y)=>{y===void 0?P.push(l):P.splice(y,0,l)},removeChildMenuItem:l=>{P.splice(P.indexOf(l),1)},markActiveMenuItem:(l,y=!1)=>{p(),v=l,y&&x()},markThisOpenedByKeyBoard:()=>{Y=!0},isOpenedByKeyBoardFlag:()=>Y?(Y=!1,!0):!1,isMenuItemDataCollectedFlag:()=>Z,getElement:()=>o.value||null,getParentContext:()=>n,getSubMenuInstanceContext:()=>G};e.provide("menuContext",te);const f=e.ref(0),S=e.ref(0);function $(l){l?f.value=Math.min(Math.max(f.value-50,-S.value),0):f.value=Math.min(f.value+50,0)}function ne(l){l.preventDefault(),l.stopPropagation(),$(l.deltaY>0)}function q(l){a.mouseScroll&&(l.preventDefault(),l.stopPropagation(),$(l.deltaY>0))}const H=e.ref(!1),c=e.ref({x:0,y:0}),_=e.ref(0);return e.onMounted(()=>{const l=n.getPositon();c.value={x:l[0]??a.xOffset??0,y:l[1]??a.yOffset??0},D(G),e.nextTick(()=>{var y,E;const R=o.value;if(R&&i.value){const{container:J}=n,re=(j==null?void 0:j())??0,ye=(M==null?void 0:M())??0,Me=typeof n.adjustPadding=="number"?n.adjustPadding:((y=n.adjustPadding)==null?void 0:y.x)??0,Se=typeof n.adjustPadding=="number"?n.adjustPadding:((E=n.adjustPadding)==null?void 0:E.y)??0,fe=ye>0?Se:0,xt=document.documentElement.scrollHeight,yt=document.documentElement.scrollWidth,Mt=Math.min(yt,J.offsetWidth),_e=Math.min(xt,J.offsetHeight);let Fe=X(R,J),Ve=I(R,J);t.direction.includes("l")?c.value.x-=R.offsetWidth+Me:t.direction.includes("r")?c.value.x+=re+Me:(c.value.x+=re/2,c.value.x-=(R.offsetWidth+Me)/2),t.direction.includes("t")?c.value.y-=R.offsetHeight+Se*2:t.direction.includes("b")?c.value.y-=Se:c.value.y-=(R.offsetHeight+Se)/2,C.value&&e.nextTick(()=>{Fe=X(R,J),Ve=I(R,J);const St=Fe+R.offsetWidth-Mt,Xe=Ve+R.offsetHeight+fe*2-_e;if(H.value=Xe>0,S.value=R.offsetHeight-_e+fe*2,St>0){const me=re+R.offsetWidth-Me,pe=Fe;me>pe?c.value.x-=pe:c.value.x-=me}if(H.value){const me=Xe,pe=Ve;me>pe?c.value.y-=pe-fe:c.value.y-=me-fe,_.value=_e-fe*2}else _.value=0})}R==null||R.focus({preventScroll:!0}),n.isOpenedByKeyBoardFlag()&&g(!0),Z=!0})}),{menu:o,scroll:i,options:a,zIndex:W,constOptions:A,scrollValue:f,upScrollButton:L,overflow:H,position:c,scrollHeight:S,maxHeight:_,globalHasSlot:d,globalRenderSlot:h,globalTheme:k,onScroll:$,onSubMenuBodyClick:N,onMouseWhell:q,onMouseWhellMx:ne,solveNumberOrStringSize:se}}}),rt={key:0,class:"mx-context-menu-updown placeholder"},ut={key:1,class:"mx-context-menu-updown placeholder"},ct={class:"mx-context-menu-scroll",ref:"scroll"};function dt(t,n,a,d,h,k){const W=e.resolveComponent("ContextMenuSeparator"),j=e.resolveComponent("ContextSubMenu",!0),M=e.resolveComponent("ContextMenuItem"),C=e.resolveComponent("ContextMenuIconRight");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass("mx-context-menu "+(t.options.customClass?t.options.customClass:"")+" "+t.globalTheme),style:e.normalizeStyle({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:n[4]||(n[4]=(...o)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...o)),onWheel:n[5]||(n[5]=(...o)=>t.onMouseWhell&&t.onMouseWhell(...o))},[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref:"menu",style:e.normalizeStyle({top:`${t.scrollValue}px`})},[e.renderSlot(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",rt)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(o,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:i},[o.hidden!==!0&&o.divided==="up"?(e.openBlock(),e.createBlock(W,{key:0})):e.createCommentVNode("",!0),o.hidden!==!0&&o.divided==="self"?(e.openBlock(),e.createBlock(W,{key:1})):(e.openBlock(),e.createBlock(M,{key:2,clickHandler:o.onClick?L=>o.onClick(L):void 0,disabled:o.disabled,hidden:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:o.onSubMenuOpen,onSubMenuClose:o.onSubMenuClose},e.createSlots({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:e.withCtx(()=>[e.createVNode(j,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:t.options.adjustPosition,direction:o.direction!==void 0?o.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(e.openBlock(),e.createBlock(W,{key:3})):e.createCommentVNode("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",ut)):e.createCommentVNode("",!0)])],4),e.createElementVNode("div",ct,[e.withDirectives(e.createElementVNode("div",{ref:"upScrollButton",class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:n[0]||(n[0]=o=>t.onScroll(!1)),onWheel:n[1]||(n[1]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(C)],34),[[e.vShow,t.overflow]]),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:n[2]||(n[2]=o=>t.onScroll(!0)),onWheel:n[3]||(n[3]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(C)],34),[[e.vShow,t.overflow]])],512)],38)}const xe=ie(st,[["render",dt]]),ft={class:"mx-menu-ghost-host"},Ke=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:a}){var d,h,k,W,j;const M=t,C=a,o=e.useSlots(),{options:i,show:L,container:O}=e.toRefs(M);e.onMounted(()=>{L.value&&v()}),e.onBeforeUnmount(()=>{x()}),e.watch(L,f=>{f?v():x()});const D={closeMenu:u,isClosed:p};let P=!1;function v(){g(),Ie(D)}function u(f){P=!0,C("close",f),i.value.menuTransitionProps||C("closeAnimFinished"),We(D)}function p(){return P}function g(){setTimeout(()=>{document.addEventListener("click",Z,!0),document.addEventListener("contextmenu",Z,!0),document.addEventListener("scroll",Y,!0),!M.isFullScreenContainer&&O.value&&O.value.addEventListener("scroll",Y,!0),i.value.keyboardControl!==!1&&document.addEventListener("keydown",G)},50)}function x(){document.removeEventListener("contextmenu",Z,!0),document.removeEventListener("click",Z,!0),document.removeEventListener("scroll",Y,!0),!M.isFullScreenContainer&&O.value&&O.value.removeEventListener("scroll",Y,!0),i.value.keyboardControl!==!1&&document.removeEventListener("keydown",G)}const N=e.ref();e.provide("globalSetCurrentSubMenu",f=>N.value=f);function G(f){var S,$,ne,q,H,c,_,l,y,E,R,J,re;let ye=!0;switch(f.key){case"Escape":{((S=N.value)==null?void 0:S.isTopLevel())===!1?($=N.value)==null||$.closeCurrentSubMenu():u();break}case"ArrowDown":(ne=N.value)==null||ne.moveCurrentItemDown();break;case"ArrowUp":(q=N.value)==null||q.moveCurrentItemUp();break;case"Home":(H=N.value)==null||H.moveCurrentItemFirst();break;case"End":(c=N.value)==null||c.moveCurrentItemLast();break;case"ArrowLeft":{(_=N.value)!=null&&_.closeSelfAndActiveParent()||(y=(l=i.value).onKeyFocusMoveLeft)==null||y.call(l);break}case"ArrowRight":(E=N.value)!=null&&E.openCurrentItemSubMenu()||(J=(R=i.value).onKeyFocusMoveRight)==null||J.call(R);break;case"Enter":(re=N.value)==null||re.triggerCurrentItemClick(f);break;default:ye=!1;break}ye&&N.value&&(f.stopPropagation(),f.preventDefault())}function Y(){i.value.closeWhenScroll!==!1&&u()}function Z(f){te(f.target)}function te(f){for(;f;){if(f.classList&&f.classList.contains("mx-menu-host"))return;f=f.parentNode}i.value.clickCloseOnOutside!==!1&&(x(),u())}return e.provide("globalOptions",i.value),e.provide("globalCloseMenu",u),e.provide("globalTheme",((d=i.value)==null?void 0:d.theme)||"light"),e.provide("globalIsFullScreenContainer",M.isFullScreenContainer),e.provide("globalClickCloseClassName",(h=i.value)==null?void 0:h.clickCloseClassName),e.provide("globalIgnoreClickClassName",(k=i.value)==null?void 0:k.ignoreClickClassName),e.provide("globalIconFontClass",((W=i.value)==null?void 0:W.iconFontClass)||"iconfont"),e.provide("globalMenuTransitionProps",(j=i.value)==null?void 0:j.menuTransitionProps),e.provide("globalHasSlot",f=>o[f]!==void 0),e.provide("globalRenderSlot",(f,S)=>e.renderSlot(o,f,{...S},()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:i.value.zIndex||A.defaultZindex,container:O.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>i.value.x,getParentAbsX:()=>i.value.y,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[i.value.x,i.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(D),(f,S)=>(e.openBlock(),e.createElementBlock("div",ft,[e.unref(i).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(i).menuTransitionProps,{onAfterLeave:S[0]||(S[0]=$=>C("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(L)?(e.openBlock(),e.createBlock(xe,{key:0,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(A).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(A).defaultMinWidth,direction:e.unref(i).direction||e.unref(A).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(f.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(L)?(e.openBlock(),e.createBlock(xe,{key:1,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(A).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(A).defaultMinWidth,direction:e.unref(i).direction||e.unref(A).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(f.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]))}}),Ue=e.defineComponent({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,n){const{options:a,show:d}=e.toRefs(t);return n.expose({closeMenu:()=>n.emit("update:show",!1),isClosed:()=>!d.value}),()=>{const{isNew:h,container:k,eleId:W}=ve(a.value);return[e.h(e.Teleport,{to:`#${W}`},[e.h(Ke,{options:a,show:d,container:k,isFullScreenContainer:!h,onClose:j=>{var M,C;n.emit("update:show",!1),n.emit("close"),(C=(M=a.value).onClose)==null||C.call(M,j)}},n.slots)])]}}}),Ge=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const a=e.inject("globalOptions"),{adjustSubMenuPosition:d,maxWidth:h,minWidth:k}=e.toRefs(t),W=typeof d.value<"u"?d.value:a.adjustPosition;return()=>e.h(ke,{...t,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0},n.slots.default?{submenu:()=>e.h(xe,{maxWidth:h.value,minWidth:k.value,adjustPosition:W},{default:n.slots.default})}:void 0)}});function mt(t,n,a,d){const h=e.ref(!0),k=e.h(Ke,{options:t,show:h,container:n,isFullScreenContainer:!a,onCloseAnimFinished:()=>{e.render(null,n)},onClose:W=>{var j;(j=t.onClose)==null||j.call(t,W),h.value=!1}},d);return e.render(k,n),k.component}function Ye(t,n){const a=ve(t);return mt(t,a.container,a.isNew,n).exposed}const Te={install(t){t.config.globalProperties.$contextmenu=Ye,t.component("ContextMenu",Ue),t.component("ContextMenuItem",ke),t.component("ContextMenuGroup",Ge),t.component("ContextMenuSperator",Ce),t.component("ContextMenuSeparator",Ce),t.component("ContextSubMenu",xe)},showContextMenu(t,n){return Ye(t,n)},isAnyContextMenuOpen(){return F()},closeContextMenu:K,transformMenuPosition:le},pt={},ht={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},vt=[e.createElementVNode("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),e.createElementVNode("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),e.createElementVNode("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1)];function bt(t,n){return e.openBlock(),e.createElementBlock("svg",ht,vt)}const gt=ie(pt,[["render",bt]]),kt=["onClick","onMouseenter"],Ct=e.defineComponent({__name:"MenuBar",props:{options:{type:Object,default:null}},setup(t){const n=t,a=e.ref(),d=e.ref(!1),h=e.ref([]),k=e.ref(null);function W(){d.value=!0}function j(){d.value=!1}e.onMounted(()=>{h.value=n.options.items||[]}),e.watch(()=>n.options,()=>{h.value=n.options.items||[]});let M=null,C=-1;function o(){C<h.value.length-1?C++:C=0,O(C,h.value[C])}function i(){C>0?C--:C=h.value.length-1,O(C,h.value[C])}function L(u){const p=n.options.barPopDirection??"bl";let g=0,x=0;return p.startsWith("b")?x=I(u)+u.offsetHeight:p.startsWith("t")?x=I(u):x=I(u)+u.offsetHeight/2,p.endsWith("l")?g=X(u):p.startsWith("r")?g=X(u)+u.offsetWidth:g=X(u)+u.offsetWidth/2,{x:g,y:x}}function O(u,p){var g;if(C=u,!p.children)return;M&&(M.closeMenu(),M=null,d.value=!0),k.value=p;const x=(g=a.value)==null?void 0:g.children[u];if(x){const{x:N,y:G}=L(x);M=Te.showContextMenu({...n.options,items:p.children,x:N,y:G,onKeyFocusMoveLeft(){i()},onKeyFocusMoveRight(){o()},onClose(){k.value==p&&(d.value=!1,k.value=null)}})}}function D(){C=0;const u=a.value;if(u){const{x:p,y:g}=L(u);M=Te.showContextMenu({...n.options,x:p,y:g})}}function P(u,p){p?(d.value=!0,O(u,p),p.onClick&&(p.clickableWhenHasChildren===!0&&p.children&&p.children.length>0||!p.children||p.children.length===0)&&p.onClick()):D()}function v(u,p){d.value&&O(u,p)}return(u,p)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-menu-bar",t.options.theme??"",t.options.mini?"mini":""]),onFocus:W,onBlur:j},[e.renderSlot(u.$slots,"prefix"),t.options.mini?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"menuBarContent",ref:a,class:"mx-menu-bar-content"},[e.createElementVNode("div",{class:"mx-menu-bar-item",onClick:p[0]||(p[0]=g=>P(0,null))},[e.createVNode(gt)])],512)):(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"menuBarContent",ref:a,class:"mx-menu-bar-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(g,x)=>(e.openBlock(),e.createElementBlock("div",{key:x,class:e.normalizeClass(["mx-menu-bar-item",g==k.value?"active":""]),onClick:N=>P(x,g),onMouseenter:N=>v(x,g)},e.toDisplayString(g.label),43,kt))),128))],512)),e.renderSlot(u.$slots,"suffix")],34))}});T.ContextMenu=Ue,T.ContextMenuGroup=Ge,T.ContextMenuItem=ke,T.ContextMenuSeparator=Ce,T.MenuBar=Ct,T.default=Te,Object.defineProperties(T,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(De,De.exports);var on=De.exports;const ln=wt(on),$e=de=>(Yt("data-v-04ca1da5"),de=de(),Xt(),de),an={class:"tabbar-container"},sn=["data-index","title","onClick","onContextmenu"],rn=$e(()=>ce("div",{class:"tab-dividers"},null,-1)),un=$e(()=>ce("div",{class:"tab-background"},null,-1)),cn={class:"tab-content"},dn={key:0,class:"action-icon"},fn={key:1,class:"action-icon"},mn=$e(()=>ce("div",{class:"drag-handle"},null,-1)),pn=It({name:"Tabbar",__name:"index",setup(de){Wt(m=>({"149054b0":w(Ne),"14c3be14":w(ve)}));const we=Nt(),T=Ot(),e=Et(),b=Rt(),F=tn(),Ie=nn(),We=Qt({reactive:!0}),{t:K}=jt(),A=Tt(_t,Function,!0),I=Be(()=>F.getId()),X=Be(()=>b.list.length>1&&(F.checkCloseOtherSide()||F.checkCloseLeftSide()||F.checkCloseRightSide())),le=He(),ae=He(),Q=Ft([]);Vt(()=>{Q.value=[]});const Ne=Be(()=>{var s,B;const m=b.list.findIndex(r=>r.tabId===I.value);return e.settings.app.direction==="ltr"?`${((s=Q.value.find(r=>Number.parseInt(r.dataset.index)===m))==null?void 0:s.offsetLeft)||0}px`:`${le.value.offsetWidth-(((B=Q.value.find(r=>Number.parseInt(r.dataset.index)===m))==null?void 0:B.getBoundingClientRect().right)||0)}px`}),ve=Be(()=>{var s;const m=b.list.findIndex(B=>B.tabId===I.value);return`${((s=Q.value.find(B=>Number.parseInt(B.dataset.index)===m))==null?void 0:s.offsetWidth)||0}px`}),se=He(!1);let V;Ze(()=>{V=new Jt(ae.value.$el,{animation:200,ghostClass:"tab-ghost",draggable:".tab",handle:".drag-handle",filter:".no-drag",onStart:()=>{se.value=!0},onEnd:()=>{se.value=!1},onUpdate:m=>{m.newIndex!==void 0&&m.oldIndex!==void 0&&b.sort(m.newIndex,m.oldIndex)}})}),qe([()=>e.mode,()=>e.settings.app.direction],m=>{Zt(()=>{V==null||V.option("disabled",m[0]==="mobile"||m[1]==="rtl")})},{immediate:!0}),qe(()=>we,m=>{e.settings.tabbar.enable&&b.add(m).then(()=>{const s=b.list.findIndex(B=>B.tabId===I.value);s!==-1&&(Re(Q.value[s].offsetLeft),ie())})},{immediate:!0,deep:!0});function ie(){ae.value.$el.clientWidth>le.value.clientWidth&&!Pe.local.has("tabbarScrollTip")&&(Pe.local.set("tabbarScrollTip",""),tt.info("标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",{title:"温馨提示",duration:5e3,closable:!0,zIndex:2e3}))}function Oe(){Pe.local.has("tabbarMaximizeTip")||(Pe.local.set("tabbarMaximizeTip",""),tt.info("可以通过双击标签栏进行最大化操作",{title:"温馨提示",duration:5e3,closable:!0,zIndex:2e3}))}function Ee(m){(m.deltaY||m.detail!==0)&&le.value.scrollBy({left:(m.deltaY||m.detail)>0?50:-50})}function Re(m){le.value.scrollTo({left:m-50,behavior:"smooth"})}function je(m,s){m.preventDefault(),ln.showContextMenu({x:m.x,y:m.y,zIndex:1050,iconFontClass:"",customClass:"contextmenu-custom",items:[{label:K("app.tabbar.reload"),icon:"i-ri:refresh-line",disabled:s.tabId!==I.value,onClick:()=>Ie.reload()},{label:K("app.tabbar.close"),icon:"i-ri:close-line",disabled:b.list.length<=1||s.isPin||s.isPermanent,divided:!0,onClick:()=>{F.closeById(s.tabId)}},{label:s.isPin?K("app.tabbar.unpin"):K("app.tabbar.pin"),icon:s.isPin?"i-lucide:pin-off":"i-lucide:pin",disabled:s.fullPath===e.settings.home.fullPath||s.isPermanent,onClick:()=>{s.isPin?b.unPin(s.tabId):b.pin(s.tabId)}},{label:K("app.tabbar.maximize"),icon:"i-ri:picture-in-picture-exit-line",onClick:()=>{s.tabId!==I.value&&T.push(s.fullPath),Oe(),e.setMainPageMaximize()}},{label:K("app.tabbar.newWindow"),icon:"i-ci:window",divided:!0,onClick:()=>{const B=T.resolve(s.fullPath);window.open(B.href,"_blank")}},{label:K("app.tabbar.closeOtherSide"),disabled:!F.checkCloseOtherSide(s.tabId),onClick:()=>{F.closeOtherSide(s.tabId)}},{label:K("app.tabbar.closeLeftSide"),disabled:!F.checkCloseLeftSide(s.tabId),onClick:()=>{F.closeLeftSide(s.tabId)}},{label:K("app.tabbar.closeRightSide"),disabled:!F.checkCloseRightSide(s.tabId),onClick:()=>{F.closeRightSide(s.tabId)}}]})}function be(m,s,B){let r;return!m&&s||m&&!B?r=s:m&&B&&(r=B),r}return Ze(()=>{Je("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(m,s)=>{var B,r;if(e.settings.tabbar.enable&&e.settings.tabbar.enableHotkeys)switch(m.preventDefault(),s.key){case"alt+left":if(b.list[0].tabId!==I.value){const z=b.list.findIndex(ee=>ee.tabId===I.value);T.push(b.list[z-1].fullPath)}break;case"alt+right":if(((B=b.list.at(-1))==null?void 0:B.tabId)!==I.value){const z=b.list.findIndex(ee=>ee.tabId===I.value);T.push(b.list[z+1].fullPath)}break;case"alt+w":F.closeById(I.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const z=Number(s.key.split("+")[1]);(r=b.list[z-1])!=null&&r.fullPath&&T.push(b.list[z-1].fullPath);break}case"alt+0":T.push(b.list[b.list.length-1].fullPath);break}})}),Ht(()=>{Je.unbind("alt+q,alt+e,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(m,s)=>{const B=Gt;return oe(),ue("div",an,[ce("div",{ref_key:"tabsRef",ref:le,class:Ae(["tabs",{"tabs-ontop":w(e).settings.topbar.switchTabbarAndToolbar,[`tabs-${w(e).settings.tabbar.style}`]:w(e).settings.tabbar.style!==""}]),onWheel:he(Ee,["prevent"])},[Le(Ut,{ref_key:"tabContainerRef",ref:ae,name:w(se)?void 0:"tabbar",tag:"div",class:Ae(["tab-container",{dragging:w(se)}])},{default:Lt(()=>[(oe(!0),ue(At,null,zt(w(b).list,(r,z)=>{var ee,ge;return oe(),ue("div",{key:w(e).settings.tabbar.mergeTabsBy==="routeName"&&r.routeName?r.routeName:r.tabId,ref_for:!0,ref_key:"tabRef",ref:Q,"data-index":z,class:Ae(["tab",{"tab-ontop":w(e).settings.topbar.switchTabbarAndToolbar,actived:r.tabId===w(I),"no-drag":r.isPermanent||r.isPin}]),title:((ee=r.customTitleList.find(U=>U.fullPath===r.fullPath))==null?void 0:ee.title)||w(A)(r.i18n,r.title),onClick:U=>w(T).push(r.fullPath),onDblclick:s[2]||(s[2]=U=>w(e).setMainPageMaximize()),onContextmenu:U=>je(U,r)},[rn,un,ce("div",cn,[(oe(),ue("div",{key:r.tabId,class:"title"},[w(e).settings.tabbar.enableIcon&&be(r.tabId===w(I),r.icon,r.activeIcon)?(oe(),Qe(B,{key:0,name:be(r.tabId===w(I),r.icon,r.activeIcon),class:"icon"},null,8,["name"])):ze("",!0),Dt(" "+et(((ge=r.customTitleList.find(U=>U.fullPath===r.fullPath))==null?void 0:ge.title)||w(A)(r.i18n,r.title)),1)])),!r.isPermanent&&r.isPin?(oe(),ue("div",dn,[Le(B,{name:"i-ri:pushpin-2-fill",onClick:he(U=>w(b).unPin(r.tabId),["stop"]),onDblclick:s[0]||(s[0]=he(()=>{},["stop"]))},null,8,["onClick"])])):!r.isPermanent&&w(b).list.length>1?(oe(),ue("div",fn,[Le(B,{name:"i-ri:close-fill",onClick:he(U=>w(F).closeById(r.tabId),["stop"]),onDblclick:s[1]||(s[1]=he(()=>{},["stop"]))},null,8,["onClick"])])):ze("",!0),$t(ce("div",{class:"hotkey-number"},et(z+1),513),[[Kt,w(We).alt&&z<9]]),mn])],42,sn)}),128))]),_:1},8,["name","class"])],34),w(X)?(oe(),Qe(en,{key:0,class:"more-action"})):ze("",!0)])}}}),Mn=qt(pn,[["__scopeId","data-v-04ca1da5"]]);export{Mn as default};
