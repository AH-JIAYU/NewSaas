
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as be,d as _e,aK as fe,r as b,a2 as R,D as ve,a as i,al as ge,o as s,b as U,f as l,w as a,i as e,am as I,a3 as $,a4 as G,e as p,g as _,G as f,l as k,j as m,P as ye,L as he,aM as Ie,aN as ke,p as we,aI as Se,aJ as Ce,F as Ve,aD as C,_ as Le}from"./index-gu6-sLbe.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-DCSyOcGP.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-Dl9s2I1e.js";import{u as De}from"./user_customer-BcQFbCdj.js";import"./user_customer-CQdDZ6s2.js";const ze={list:g=>be.post("callback/getMemberSurveyRecord",g)},Ee=g=>(Se("data-v-6086a075"),g=g(),Ce(),g),Ue=Ee(()=>Ve("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Pe=_e({name:"RecordSurveyIndex",__name:"index",setup(g){const H=De(),{getParams:A,pagination:y,onSizeChange:q,onCurrentChange:J}=fe(),z=b(!1),P=b([]),K=b(""),u=b([]),V=b(!0),L=b(!1),j=b("default"),N=b(!1),D=b([{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),r=R({memberId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),h=R({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间果断","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function O(){r.pageNo=1,w()}function Q(c){q(c).then(()=>w())}function T(c=1){J(c).then(()=>w())}async function w(){z.value=!0;const c={...A(),...r},{data:o}=await ze.list(c);P.value=o.memberSurveyRecordInfoList,y.value.total=o.total,z.value=!1}function W(c){K.value=c}function X(){Object.assign(r,{memberId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),w()}return ve(async()=>{h.customerList=await H.getCustomerList(),D.value.forEach(c=>{c.checked&&u.value.push(c.prop)}),w()}),(c,o)=>{const S=i("el-input"),v=i("el-form-item"),x=i("el-option"),B=i("el-select"),M=he,E=i("ElButton"),Y=i("ElFormItem"),Z=i("ElForm"),ee=Ne,te=i("ElDivider"),le=je,oe=i("el-button"),ae=Ie,ne=ke,re=i("el-row"),d=i("el-table-column"),F=i("ElTableColumn"),se=i("el-empty"),ie=i("el-table"),ue=i("ElPagination"),pe=we,ce=ge("loading");return s(),U("div",{class:ye({"absolute-container":e(N)})},[l(pe,null,{default:a(()=>[l(ee,{"show-toggle":!1},{default:a(({fold:t,toggle:me})=>[l(Z,{model:e(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(v,{label:""},{default:a(()=>[l(S,{modelValue:e(r).memberId,"onUpdate:modelValue":o[0]||(o[0]=n=>e(r).memberId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),I(l(v,{label:""},{default:a(()=>[l(S,{modelValue:e(r).memberGroupId,"onUpdate:modelValue":o[1]||(o[1]=n=>e(r).memberGroupId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),l(v,{label:""},{default:a(()=>[l(S,{modelValue:e(r).projectId,"onUpdate:modelValue":o[2]||(o[2]=n=>e(r).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),I(l(v,{label:""},{default:a(()=>[l(S,{modelValue:e(r).name,"onUpdate:modelValue":o[3]||(o[3]=n=>e(r).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),I(l(v,{label:""},{default:a(()=>[l(B,{modelValue:e(r).projectName,"onUpdate:modelValue":o[4]||(o[4]=n=>e(r).projectName=n),clearable:"",placeholder:"客户简称"},{default:a(()=>[(s(!0),U($,null,G(e(h).customerList,n=>(s(),p(x,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!t]]),I(l(v,{label:""},{default:a(()=>[l(S,{modelValue:e(r).ip,"onUpdate:modelValue":o[5]||(o[5]=n=>e(r).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),I(l(v,{label:""},{default:a(()=>[l(B,{modelValue:e(r).surveyStatus,"onUpdate:modelValue":o[6]||(o[6]=n=>e(r).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:a(()=>[(s(!0),U($,null,G(e(h).surveyStatusList,(n,de)=>(s(),p(x,{label:n,value:de+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!t]]),l(Y,null,{default:a(()=>[l(E,{type:"primary",onClick:o[7]||(o[7]=n=>T())},{icon:a(()=>[l(M,{name:"i-ep:search"})]),default:a(()=>[_(" 筛选 ")]),_:1}),l(E,{onClick:X},{icon:a(()=>[Ue]),default:a(()=>[_(" 重置 ")]),_:1}),l(E,{link:"",onClick:me},{icon:a(()=>[l(M,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[_(" "+f(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(te,{"border-style":"dashed"}),l(re,null,{default:a(()=>[l(le),l(ne,null,{default:a(()=>[l(oe,{size:"default"},{default:a(()=>[_(" 导出 ")]),_:1}),l(ae,{border:e(V),"onUpdate:border":o[8]||(o[8]=t=>k(V)?V.value=t:null),tableAutoHeight:e(N),"onUpdate:tableAutoHeight":o[9]||(o[9]=t=>k(N)?N.value=t:null),checkList:e(u),"onUpdate:checkList":o[10]||(o[10]=t=>k(u)?u.value=t:null),columns:e(D),"onUpdate:columns":o[11]||(o[11]=t=>k(D)?D.value=t:null),"line-height":e(j),"onUpdate:lineHeight":o[12]||(o[12]=t=>k(j)?j.value=t:null),stripe:e(L),"onUpdate:stripe":o[13]||(o[13]=t=>k(L)?L.value=t:null),style:{"margin-left":"12px"},onQueryData:O},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((s(),p(ie,{border:e(V),data:e(P),size:e(j),stripe:e(L),onSelectionChange:W},{empty:a(()=>[l(se,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(d,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),e(u).includes("memberId")?(s(),p(d,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"})):m("",!0),e(u).includes("memberName")?(s(),p(d,{key:1,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"})):m("",!0),e(u).includes("projectId")?(s(),p(d,{key:2,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):m("",!0),e(u).includes("projectName")?(s(),p(d,{key:3,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称/客户简称"})):m("",!0),e(u).includes("allocationType")?(s(),p(d,{key:4,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:a(({row:t})=>[_(f(e(h).allocationTypeList[t.allocationType-1]),1)]),_:1})):m("",!0),e(u).includes("price")?(s(),p(d,{key:5,align:"center",prop:"h","show-overflow-tooltip":"",label:"会员价/供应商价/原价"},{default:a(({row:t})=>[_(f(t.memberChildPrice||0)+"/ "+f(t.supplierPrice||0)+"/ "+f(t.doMoneyPrice||0),1)]),_:1})):m("",!0),e(u).includes("ipBelong")?(s(),p(d,{key:6,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):m("",!0),e(u).includes("surveyTime")?(s(),p(d,{key:7,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:a(({row:t})=>[_(f(t.surveyTime||0)+"/ "+f(t.projectTime||0),1)]),_:1})):m("",!0),e(u).includes("surveyStatus")?(s(),p(F,{key:8,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:a(({row:t})=>[_(f(e(h).surveyStatusList[t.surveyStatus-1]),1)]),_:1})):m("",!0),e(u).includes("viceStatus")?(s(),p(F,{key:9,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:a(({row:t})=>[_(f(e(h).viceStatusList[t.viceStatus-1]),1)]),_:1})):m("",!0)]),_:1},8,["border","data","size","stripe"])),[[ce,e(z)]]),l(ue,{"current-page":e(y).page,total:e(y).total,"page-size":e(y).size,"page-sizes":e(y).sizes,layout:e(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Re=Le(Pe,[["__scopeId","data-v-6086a075"]]);export{Re as default};
