
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aO as se,r as f,a5 as ie,l as re,b as g,q as ue,o as u,e as pe,g as t,w as o,h as l,s as K,f as p,j as c,aN as W,t as d,H as n,k as _,S as ce,aQ as de,aR as me,ap as fe,R as _e}from"./index-BuCeI957.js";import{_ as ge}from"./index-CCpxScu8.js";import{_ as ve}from"./index.vue_vue_type_style_index_0_lang-FfDbCI49.js";import{_ as be}from"./index-BOulowiv.js";import{u as ye,o as he,a as X}from"./index-DclM4JXB.js";import"./index-WZ6TF0EG.js";import"./index.vue_vue_type_script_setup_true_lang-BmRnAYv0.js";import"./sortable.esm-C0-Qcoum.js";const ke={class:"tableBig"},Se={class:"tableBig"},Ne={class:"copyId tableSmall"},je={class:"id oneLine"},Ie={class:"tableBig oneLine"},we={class:"copyId tableSmall"},Le={class:"id oneLine"},Ce={class:"tableBig"},ze={class:"tableBig"},De={class:"copyId tableSmall"},xe={class:"id oneLine"},Ue={class:"tableBig"},He={class:"copyId tableSmall"},Re={class:"id oneLine"},Be=ne({name:"outsource",__name:"list",setup(Ae){const D=ye(),{pagination:m,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=se(),U=f(""),j=f(!0),y=f(!1),H=f(),I=f(!1),s=f([]),x=f(),R=f("formSearch-outsource"),h=f("default"),k=f(!1),w=f([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),v=ie({tenantId:"",tenantName:"",projectStatus:"",type:2}),L=f([]);function B(r){H.value.showEdit(r,v.type===2?1:0)}function A(r){Z(r).then(()=>N())}function S(r=1){ee(r).then(()=>N())}function P(){Object.assign(v,{tenantId:"",tenantName:"",projectStatus:"",type:2}),N()}async function N(){try{j.value=!0;const r={...Y(),...v};if(v.type===1){const a=await X.list(r);L.value=a.data.projectAllocationInfoList,m.value.total=a.data.total}else{const a=await X.meList(r);L.value=a.data.projectMeAllocationInfoList,m.value.total=a.data.total}j.value=!1}catch{}finally{j.value=!1}}re(()=>{w.value.forEach(r=>{r.checked&&s.value.push(r.prop)}),N(),x.value=[{index:1,show:!0,type:"input",modelName:"tenantId",placeholder:"租户id"},{index:2,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:3,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const te={projectStatus:()=>D.projectStatusList.map((r,a)=>({label:r,value:a+1}))};return(r,a)=>{const V=be,E=g("ElDivider"),O=ve,C=g("el-button"),F=de,M=me,Q=g("el-row"),i=g("el-table-column"),z=ge,b=g("el-text"),$=g("el-empty"),T=g("el-table"),q=g("ElPagination"),G=g("el-tab-pane"),ae=g("el-tabs"),oe=fe,J=ue("loading");return u(),pe("div",{class:ce({"absolute-container":I.value})},[t(oe,null,{default:o(()=>[t(ae,{modelValue:v.type,"onUpdate:modelValue":a[14]||(a[14]=e=>v.type=e),onTabChange:N},{default:o(()=>[t(G,{label:"外包项目",name:2},{default:o(()=>[t(V,{formSearchList:x.value,formSearchName:R.value,onCurrentChange:S,onOnReset:P,model:v,formOption:te},null,8,["formSearchList","formSearchName","model"]),t(E,{"border-style":"dashed"}),t(Q,{gutter:24},{default:o(()=>[t(O),t(M,null,{default:o(()=>[t(C,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(F,{border:y.value,"onUpdate:border":a[1]||(a[1]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>I.value=e),checkList:s.value,"onUpdate:checkList":a[3]||(a[3]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[4]||(a[4]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":a[6]||(a[6]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((u(),p(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:o(()=>[t($,{image:c(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(i,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(u(),p(i,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[d("span",ke,n(c(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):_("",!0),s.value.includes("tenantName")?(u(),p(i,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[d("div",Se,n(e.tenantName),1)]),_:1})):_("",!0),s.value.includes("tenantId")?(u(),p(i,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[d("div",Ne,[d("div",je,"ID: "+n(e.tenantId),1),t(z,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("projectName")?(u(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[d("div",Ie,n(e.projectName),1)]),_:1})):_("",!0),s.value.includes("projectId")?(u(),p(i,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",we,[d("div",Le,"ID: "+n(e.projectId),1),t(z,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("participationNumber")?(u(),p(i,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(b,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(C,{type:"primary",plain:"",size:"small",onClick:le=>B(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),t(q,{"current-page":c(m).page,total:c(m).total,"page-size":c(m).size,"page-sizes":c(m).sizes,layout:c(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(G,{label:"接收项目",name:1},{default:o(()=>[t(V,{formSearchList:x.value,formSearchName:R.value,onCurrentChange:S,onOnReset:P,model:v},null,8,["formSearchList","formSearchName","model"]),t(E,{"border-style":"dashed"}),t(Q,{gutter:24},{default:o(()=>[t(O),t(M,null,{default:o(()=>[t(C,{size:"default",onClick:a[7]||(a[7]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(F,{border:y.value,"onUpdate:border":a[8]||(a[8]=e=>y.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":a[9]||(a[9]=e=>I.value=e),checkList:s.value,"onUpdate:checkList":a[10]||(a[10]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[11]||(a[11]=e=>w.value=e),"line-height":h.value,"onUpdate:lineHeight":a[12]||(a[12]=e=>h.value=e),stripe:k.value,"onUpdate:stripe":a[13]||(a[13]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((u(),p(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:h.value,stripe:k.value},{empty:o(()=>[t($,{image:c(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(i,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(u(),p(i,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[d("span",Ce,n(c(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):_("",!0),s.value.includes("tenantName")?(u(),p(i,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[d("div",ze,n(e.tenantName),1)]),_:1})):_("",!0),s.value.includes("tenantId")?(u(),p(i,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[d("div",De,[d("div",xe,"ID: "+n(e.tenantId),1),t(z,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("projectName")?(u(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[d("div",Ue,n(e.projectName),1)]),_:1})):_("",!0),s.value.includes("projectId")?(u(),p(i,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",He,[d("div",Re,"ID: "+n(e.projectId),1),t(z,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("participationNumber")?(u(),p(i,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(b,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(b,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(C,{type:"primary",plain:"",size:"small",onClick:le=>B(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,j.value]]),t(q,{"current-page":c(m).page,total:c(m).total,"page-size":c(m).size,"page-sizes":c(m).sizes,layout:c(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(he,{ref_key:"editRef",ref:H,onFetchData:N},null,512)]),_:1})],2)}}}),Te=_e(Be,[["__scopeId","data-v-cd2dd5be"]]);export{Te as default};
