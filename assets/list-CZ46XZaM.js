
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as j,L as J,aJ as Q,t as R,r as W,B as X,C as k,G as Y,a as s,ak as Z,o as p,b as ee,f as t,w as o,i as a,az as te,g as u,D as ae,e as f,j as h,al as oe,O as ne,aK as le,at as se,as as ie,K as re,q as de,_ as ue}from"./index-C32xF_ni.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-BG2qJ7FC.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-1-i8J9RS.js";import{a as z}from"./index-BBM5ul9n.js";import{u as pe}from"./useTabbar-CpgdsKnT.js";import"./index-BERQB40D.js";const fe=j({name:"OtherFunctionsQuestionLibrary List",__name:"list",setup(be){const y=J(),{pagination:m,getParams:L,onSizeChange:B,onCurrentChange:P,onSortChange:S}=Q(),E=pe(),b=R(),e=W({loading:!1,tableAutoHeight:!1,formMode:"drawer",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});X(()=>{c(),e.value.formMode==="router"&&k.on("get-data-list",()=>{c()})}),Y(()=>{e.value.formMode==="router"&&k.off("get-data-list")});function c(){e.value.loading=!0;const l={...L(),...e.value.search.title&&{title:e.value.search.title}};z.list(l).then(n=>{e.value.loading=!1,e.value.dataList=n.data.list,m.value.total=n.data.total})}function D(l){B(l).then(()=>c())}function g(l=1){P(l).then(()=>c())}function w({prop:l,order:n}){S(l,n).then(()=>c())}function $(){e.value.formMode==="router"?b.settings.tabbar.enable&&b.settings.tabbar.mergeTabsBy!=="activeMenu"?E.open({name:"questionLibraryCreate"}):y.push({name:"questionLibraryCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function x(l){e.value.formMode==="router"?b.settings.tabbar.enable&&b.settings.tabbar.mergeTabsBy!=="activeMenu"?E.open({name:"questionLibraryEdit",params:{id:l.id}}):y.push({name:"questionLibraryEdit",params:{id:l.id}}):(e.value.formModeProps.id=l.id,e.value.formModeProps.visible=!0)}function V(l){le.confirm(`确认删除「${l.title}」吗？`,"确认信息").then(()=>{z.delete(l.id).then(()=>{c(),se.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}return(l,n)=>{const T=ie,q=s("ElInput"),M=s("ElFormItem"),v=re,d=s("ElButton"),I=s("ElForm"),F=ce,K=s("ElDivider"),G=s("ElButtonGroup"),H=s("ElSpace"),i=s("ElTableColumn"),N=s("ElTable"),U=s("ElPagination"),A=de,O=Z("loading");return p(),ee("div",{class:ne({"absolute-container":a(e).tableAutoHeight})},[t(T,{title:"问题库管理"}),t(A,null,{default:o(()=>[t(F,{"show-toggle":!1},{default:o(({fold:r,toggle:C})=>[t(I,{model:a(e).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[t(M,{label:"标题"},{default:o(()=>[t(q,{modelValue:a(e).search.title,"onUpdate:modelValue":n[0]||(n[0]=_=>a(e).search.title=_),placeholder:"请输入标题，支持模糊查询",clearable:"",onKeydown:n[1]||(n[1]=te(_=>g(),["enter"])),onClear:n[2]||(n[2]=_=>g())},null,8,["modelValue"])]),_:1}),t(M,null,{default:o(()=>[t(d,{type:"primary",onClick:n[3]||(n[3]=_=>g())},{icon:o(()=>[t(v,{name:"i-ep:search"})]),default:o(()=>[u(" 筛选 ")]),_:1}),t(d,{link:"",disabled:"",onClick:C},{icon:o(()=>[t(v,{name:r?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[u(" "+ae(r?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(K,{"border-style":"dashed"}),t(H,{wrap:""},{default:o(()=>[t(d,{type:"primary",size:"default",onClick:$},{icon:o(()=>[t(v,{name:"i-ep:plus"})]),default:o(()=>[u(" 新增问题库 ")]),_:1}),a(e).batch.enable?(p(),f(d,{key:0,size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[u(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):h("",!0),a(e).batch.enable?(p(),f(G,{key:1},{default:o(()=>[t(d,{size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[u(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),t(d,{size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[u(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):h("",!0)]),_:1}),oe((p(),f(N,{class:"my-4",data:a(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:w,onSelectionChange:n[4]||(n[4]=r=>a(e).batch.selectionDataList=r)},{default:o(()=>[a(e).batch.enable?(p(),f(i,{key:0,type:"selection",align:"center",fixed:""})):h("",!0),t(i,{prop:"title",label:"标题"}),t(i,{prop:"question",label:"问题"}),t(i,{prop:"type",label:"类型"}),t(i,{prop:"option",label:"选项"}),t(i,{prop:"country",label:"所属国家"}),t(i,{prop:"name",label:"创建人"}),t(i,{prop:"time",label:"创建时间"}),t(i,{label:"操作",width:"250",align:"center",fixed:"right"},{default:o(r=>[t(d,{type:"primary",size:"small",plain:"",onClick:C=>x(r.row)},{default:o(()=>[u(" 编辑 ")]),_:2},1032,["onClick"]),t(d,{type:"danger",size:"small",plain:"",onClick:C=>V(r.row)},{default:o(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,a(e).loading]]),t(U,{"current-page":a(m).page,total:a(m).total,"page-size":a(m).size,"page-sizes":a(m).sizes,layout:a(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:D,onCurrentChange:g},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(e).formMode==="dialog"||a(e).formMode==="drawer"?(p(),f(me,{key:0,id:a(e).formModeProps.id,modelValue:a(e).formModeProps.visible,"onUpdate:modelValue":n[5]||(n[5]=r=>a(e).formModeProps.visible=r),mode:a(e).formMode,onSuccess:c},null,8,["id","modelValue","mode"])):h("",!0)],2)}}}),Ee=ue(fe,[["__scopeId","data-v-37d6f1e8"]]);export{Ee as default};
