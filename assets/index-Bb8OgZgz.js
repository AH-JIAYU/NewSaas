
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as A}from"./user_customer-CEugdQU_.js";import{d as C,ae as U,r as k,E as i,a2 as s,a as u,i as V,h as t,c as n,w as r,f as c,g as v,t as y,j as m,N as j,O as B,ak as M,aj as P,ai as R,y as H}from"./index-BitsiCFM.js";const O=C({name:"ProjeckEdit",__name:"index",emits:["fetch-data"],setup(Q,{expose:E,emit:h}){const{t:a}=U(),q=h,p=k(),e=k({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},staffList:[],rules:{customerAccord:[{required:!0,message:i(()=>a("quickEdit.enterName")),trigger:"blur"},{min:2,max:50,message:i(()=>a("quickEdit.2to50")),trigger:"blur"}],customerShortName:[{required:!0,message:i(()=>a("quickEdit.enterShortName")),trigger:"blur"},{min:2,max:50,message:i(()=>a("quickEdit.2to50")),trigger:"blur"}],chargeId:[{required:!0,message:i(()=>a("quickEdit.pmSelect")),trigger:"change"}]}}),N={customerAccord:i(()=>a("quickEdit.customerName")),customerShortName:i(()=>a("quickEdit.customerShortName")),chargeId:"PM"};async function S(d,l){e.value.title=N[l],e.value.type=l,e.value.loading=!0,e.value.formData=M(d),e.value.dialogTableVisible=!0,e.value.loading=!1,D()}const D=async()=>{const d=await P.getTenantStaffList();e.value.staffList=d.data};async function x(){e.value.loading=!0,p.value.validate(async d=>{if(d){const{status:l}=await A.edit(e.value.formData);l===1&&R.success({message:a("quickEdit.editSucess"),center:!0}),q("fetch-data"),g()}e.value.loading=!1})}function g(){e.value.dialogTableVisible=!1,e.value.formData={}}return E({showEdit:S}),(d,l)=>{const b=s("el-input"),f=s("el-form-item"),T=s("el-option"),I=s("el-select"),L=s("el-form"),_=s("el-button"),w=s("el-dialog");return u(),V("div",null,[t(e).dialogTableVisible?(u(),n(w,{key:0,modelValue:t(e).dialogTableVisible,"onUpdate:modelValue":l[3]||(l[3]=o=>t(e).dialogTableVisible=o),title:t(e).title+t(a)("quickEdit.editor"),draggable:""},{footer:r(()=>[c(_,{onClick:g,disabled:t(e).loading},{default:r(()=>[v(y(t(a)("quickEdit.cancel")),1)]),_:1},8,["disabled"]),c(_,{type:"primary",onClick:x,disabled:t(e).loading},{default:r(()=>[v(y(t(a)("quickEdit.confirm")),1)]),_:1},8,["disabled"])]),default:r(()=>[c(L,{ref_key:"formRef",ref:p,model:t(e).formData,rules:t(e).rules,"label-width":"100","label-position":"right"},{default:r(()=>[t(e).type==="customerAccord"?(u(),n(f,{key:0,label:t(a)("quickEdit.customerName"),prop:"customerAccord"},{default:r(()=>[c(b,{modelValue:t(e).formData.customerAccord,"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).formData.customerAccord=o),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])):m("",!0),t(e).type==="customerShortName"?(u(),n(f,{key:1,label:t(a)("quickEdit.customerShortName"),prop:"customerShortName"},{default:r(()=>[c(b,{modelValue:t(e).formData.customerShortName,"onUpdate:modelValue":l[1]||(l[1]=o=>t(e).formData.customerShortName=o),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])):m("",!0),t(e).type==="chargeId"?(u(),n(f,{key:2,label:"PM",prop:"chargeId"},{default:r(()=>[c(I,{modelValue:t(e).formData.chargeId,"onUpdate:modelValue":l[2]||(l[2]=o=>t(e).formData.chargeId=o),"value-key":"",placeholder:t(a)("quickEdit.pmSelect"),clearable:"",filterable:""},{default:r(()=>[(u(!0),V(j,null,B(t(e).staffList,o=>(u(),n(T,{key:o.id,label:o.userName,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1})):m("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):m("",!0)])}}}),G=H(O,[["__scopeId","data-v-d351b2ab"]]);export{G as default};
