
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as V}from"./apiLoading-DyaEYmQL.js";import{a as r,ag as I,r as d,d as j,a5 as D,b as p,o as E,f as M,w as a,g as o,h as f,j as n,I as U,an as h,E as y,R as B}from"./index-Ch_t1wnJ.js";const _={list:e=>r.post("tenantSupplierLevel/getTenantSupplierLevelList  ",e),create:e=>r.post("tenantSupplierLevel/addTenantSupplierLevel",e),edit:e=>r.post("tenantSupplierLevel/updateTenantSupplierLevel",e),delete:e=>r.post("tenantSupplierLevel/deleteTenantSupplierLevel",e),getLevelNameList:e=>r.post("tenantSupplierLevel/getTenantSupplierLevelName",e)},O=I("ConfigurationSupplierLevel",()=>{const e=d(null);return{LevelNameList:e,getLevelNameList:async()=>{if(!e.value){const{data:m}=await _.getLevelNameList({});e.value=m.getTenantSupplierLevelNameInfoList}return e.value}}}),$=O,z=j({__name:"index",emits:["queryData"],setup(e,{expose:L,emit:m}){const x=$(),T=m,i=d(!1),v=d(""),t=d(),c=d(),C=D({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function R(s){s?(v.value="编辑",t.value=h(s)):(v.value="新增",t.value={}),i.value=!0}function g(){c.value.resetFields(),i.value=!1}function w(){c.value.validate(async s=>{if(s){if(t.value.tenantSupplierLevelId){const{status:l}=await V(_.edit(t.value));l===1&&y.success({message:"编辑成功",center:!0})}else{const{status:l}=await V(_.create(t.value));l===1&&y.success({message:"新增成功",center:!0})}x.LevelNameList=null,T("queryData"),g()}})}return L({showEdit:R}),(s,l)=>{const S=p("el-input"),b=p("el-form-item"),k=p("el-form"),N=p("el-button"),q=p("el-dialog");return E(),M(q,{modelValue:n(i),"onUpdate:modelValue":l[2]||(l[2]=u=>U(i)?i.value=u:null),title:n(v),width:"600"},{footer:a(()=>[o(N,{onClick:g},{default:a(()=>[f(" 取消 ")]),_:1}),o(N,{type:"primary",onClick:w},{default:a(()=>[f(" 确定 ")]),_:1})]),default:a(()=>[o(k,{ref_key:"formRef",ref:c,model:n(t),rules:n(C),"label-width":"7rem",inline:!1},{default:a(()=>[o(b,{label:"等级名称",prop:"levelName"},{default:a(()=>[o(S,{modelValue:n(t).levelName,"onUpdate:modelValue":l[0]||(l[0]=u=>n(t).levelName=u),maxlength:"100"},null,8,["modelValue"])]),_:1}),o(b,{label:"价格比例",prop:"additionRatio"},{default:a(()=>[o(S,{modelValue:n(t).additionRatio,"onUpdate:modelValue":l[1]||(l[1]=u=>n(t).additionRatio=u),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;",type:"number"},{append:a(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),F=B(z,[["__scopeId","data-v-50c55233"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{_ as a,F as e,G as i,$ as u};
