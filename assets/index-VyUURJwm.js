
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as te,aN as ae,r as s,n as ne,$ as T,a as r,q as oe,o as p,b as le,f as l,w as n,g as f,i as t,A as d,s as se,e as m,aM as ie,y as L,z as S,j as k,N as re,aO as ue,E as ce,bb as pe,bc as de,_ as fe,an as me,L as _e}from"./index-BODpozrq.js";import{_ as ge}from"./index.vue_vue_type_style_index_0_lang-BnXtm__L.js";import{s as ve}from"./apiLoading-BGef7Ue2.js";import{S as be}from"./sortable.esm-C0-Qcoum.js";import he from"./index-D21Q81kw.js";import{u as ye,a as R}from"./configuration_supplierLevel-Be1at2WW.js";import{columns as w}from"./index-CODNa_6b.js";const Ce={class:"tableBig"},ke={class:"fontC-System"},we={class:"fontC-System"},ze=te({name:"supplierLevel",__name:"index",setup(Ee){const $=ye(),{pagination:u,getParams:P,onSizeChange:A,onCurrentChange:B}=ae(),_=s(!1),z=s(),x=s([]),c=s([]),g=s(!1),v=s(!1),b=s("default"),h=s(!1),D=s();function H(){z.value.showEdit()}function U(o){z.value.showEdit(o)}function I(o){ue.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:a}=await ve(R.delete({tenantSupplierLevelId:o.tenantSupplierLevelId}));a===1&&ce.success({message:"删除成功",center:!0}),$.LevelNameList=null,E()}).catch(()=>{})}function E(){u.value.page=1,y()}function M(o){A(o).then(()=>y())}function Q(o=1){B(o).then(()=>y())}async function y(){try{_.value=!0;const o={...P()},{data:a,status:i}=await R.list(o);a&&i===1&&(x.value=a.getTenantSupplierLevelInfoList,u.value.total=a.total),_.value=!1}catch{}finally{_.value=!1}}function N(){const o=D.value.$el.querySelector(".el-table__body-wrapper tbody");be.create(o,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:a,oldIndex:i})=>{a===void 0||i===void 0||T(()=>N())}})}return ne(()=>{w.forEach(o=>{o.checked&&c.value.push(o.prop)}),y(),T(()=>{N()})}),(o,a)=>{const i=r("el-button"),V=ge,q=pe,F=de,j=r("el-row"),O=fe,G=r("ElTag"),J=r("ElTableColumn"),C=r("el-table-column"),K=r("el-empty"),W=r("el-table"),X=r("ElPagination"),Y=me,Z=oe("loading");return p(),le("div",{class:re({"absolute-container":t(h)})},[l(Y,null,{default:n(()=>[l(j,null,{default:n(()=>[l(V,null,{default:n(()=>[l(i,{size:"default",type:"primary",onClick:H},{default:n(()=>[f(" 新增 ")]),_:1})]),_:1}),l(F,null,{default:n(()=>[l(i,{size:"default"},{default:n(()=>[f(" 导出 ")]),_:1}),l(q,{border:t(g),"onUpdate:border":a[0]||(a[0]=e=>d(g)?g.value=e:null),tableAutoHeight:t(h),"onUpdate:tableAutoHeight":a[1]||(a[1]=e=>d(h)?h.value=e:null),checkList:t(c),"onUpdate:checkList":a[2]||(a[2]=e=>d(c)?c.value=e:null),columns:t(w),"onUpdate:columns":a[3]||(a[3]=e=>d(w)?w.value=e:null),"line-height":t(b),"onUpdate:lineHeight":a[4]||(a[4]=e=>d(b)?b.value=e:null),stripe:t(v),"onUpdate:stripe":a[5]||(a[5]=e=>d(v)?v.value=e:null),style:{"margin-left":"12px"},onQueryData:E},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),se((p(),m(W,{ref_key:"elTableRef",ref:D,"row-key":"id",border:t(g),data:t(x),size:t(b),stripe:t(v),fit:""},{empty:n(()=>[l(K,{image:t(ie),"image-size":300},null,8,["image"])]),default:n(()=>[l(J,{width:"80",align:"left",fixed:""},{header:n(()=>[f(" 排序 ")]),default:n(()=>[l(G,{type:"info",class:"sortable"},{default:n(()=>[l(O,{name:"i-ep:d-caret"})]),_:1})]),_:1}),t(c).includes("levelName")?(p(),m(C,{key:0,align:"left",prop:"levelName","show-overflow-tooltip":"",label:"等级名称"},{default:n(({row:e})=>[L("div",Ce,S(e.levelName),1)]),_:1})):k("",!0),t(c).includes("additionRatio")?(p(),m(C,{key:1,align:"left",prop:"additionRatio","show-overflow-tooltip":"",label:"价格比例"},{default:n(({row:e})=>[L("div",ke,S(e.additionRatio)+"%",1)]),_:1})):k("",!0),t(c).includes("memberQuantity")?(p(),m(C,{key:2,align:"left",prop:"memberQuantity","show-overflow-tooltip":"",label:"成员数量"},{default:n(({row:e})=>[L("div",we,S(e.memberQuantity),1)]),_:1})):k("",!0),l(C,{align:"left",fixed:"right","show-overflow-tooltip":"",label:"操作"},{default:n(({row:e})=>[l(i,{size:"small",plain:"",type:"primary",onClick:ee=>U(e)},{default:n(()=>[f(" 编辑 ")]),_:2},1032,["onClick"]),e.isDelete===1?(p(),m(i,{key:0,size:"small",plain:"",type:"danger",onClick:ee=>I(e)},{default:n(()=>[f(" 删除 ")]),_:2},1032,["onClick"])):k("",!0)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Z,t(_)]]),l(X,{"current-page":t(u).page,total:t(u).total,"page-size":t(u).size,"page-sizes":t(u).sizes,layout:t(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(he,{ref_key:"EditRef",ref:z,onQueryData:E},null,512)],2)}}}),$e=_e(ze,[["__scopeId","data-v-a98f0161"]]);export{$e as default};
