
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as fe,aK as ve,r as b,k as ge,a as d,p as he,o as u,b as _e,f as e,w as t,az as x,g as m,H as E,q as ne,e as s,j as c,i as f,S as ke,bb as Ie,N as ye,aM as Ce,aN as we,ap as De,aG as je,aH as ze,s as ie,R as Ne}from"./index-BMiaO8YQ.js";import{_ as Ve}from"./index.vue_vue_type_style_index_0_lang-DmHO05zK.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-BMAvMc8j.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-Cnd0g3ut.js";import{_ as Ee,a as $e}from"./index.vue_vue_type_script_setup_true_lang-BRNlVxpu.js";import"./file-DfPte3fV.js";import"./download-C8PHVIy1.js";const ue=U=>(je("data-v-44c2c0f0"),U=U(),ze(),U),xe=ue(()=>ie("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Te=ue(()=>ie("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),He=fe({name:"materials",__name:"list",setup(U){const{format:T}=Ie(),{getParams:se,pagination:v,onSizeChange:pe,onCurrentChange:de}=ve(),H=b(""),N=b(!1),I=b(!0),R=b(),L=b(),V=b(!1),a=b([]),y=b("default"),C=b(!1),G=b([]),g=b([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"客户简称/标识",prop:"customerIdentification",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),i=b({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),$=b([]);function A(r){G.value.length||L.value.showEdit(r)}function B(r){R.value.showEdit(r)}function P(r){G.value=r}function F(r){pe(r).then(()=>_())}function h(r=1){de(r).then(()=>_())}function K(){Object.assign(i.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),_()}async function _(){try{N.value=!0;const r={...se(),...i.value},l=await $e.list(r);$.value=l.data.projectMaterialInfoList,v.value.total=l.data.total,N.value=!1}catch{}finally{N.value=!1}}const ce=()=>{i.value.type===1?(a.value=[],g.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"客户简称/标识",prop:"customerIdentification",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(r=>{r.checked&&a.value.push(r.prop)}),_()):(a.value=[],g.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"客户简称/标识",prop:"customerIdentification",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(r=>{r.checked&&a.value.push(r.prop)}),_())};return ge(()=>{g.value.forEach(r=>{r.checked&&a.value.push(r.prop)}),_()}),(r,l)=>{const w=d("el-input"),D=d("el-form-item"),S=ye,j=d("ElButton"),M=d("ElFormItem"),q=d("el-form"),Q=Ue,O=d("ElDivider"),J=Ve,z=d("el-button"),W=Ce,X=we,Y=d("el-row"),n=d("el-table-column"),Z=d("el-tag"),ee=d("ElSpace"),le=d("el-empty"),te=d("el-table"),oe=d("ElPagination"),ae=d("el-tab-pane"),me=d("el-tabs"),be=De,re=he("loading");return u(),_e("div",{class:ke({"absolute-container":V.value})},[e(be,null,{default:t(()=>[e(me,{modelValue:i.value.type,"onUpdate:modelValue":l[25]||(l[25]=o=>i.value.type=o),onTabChange:ce},{default:t(()=>[e(ae,{label:"会员素材",name:1},{default:t(()=>[e(Q,{"show-toggle":!1},{default:t(({fold:o,toggle:k})=>[e(q,{model:i.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.memberChildId,"onUpdate:modelValue":l[0]||(l[0]=p=>i.value.memberChildId=p),clearable:"",placeholder:"会员ID",onKeydown:l[1]||(l[1]=x(p=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.projectId,"onUpdate:modelValue":l[2]||(l[2]=p=>i.value.projectId=p),clearable:"",placeholder:"项目ID",onKeydown:l[3]||(l[3]=x(p=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.projectName,"onUpdate:modelValue":l[4]||(l[4]=p=>i.value.projectName=p),clearable:"",placeholder:"项目名称",onKeydown:l[5]||(l[5]=x(p=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),e(M,null,{default:t(()=>[e(j,{type:"primary",onClick:l[6]||(l[6]=p=>h())},{icon:t(()=>[e(S,{name:"i-ep:search"})]),default:t(()=>[m(" 筛选 ")]),_:1}),e(j,{onClick:K},{icon:t(()=>[xe]),default:t(()=>[m(" 重置 ")]),_:1}),e(j,{link:"",onClick:k,disabled:""},{icon:t(()=>[e(S,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[m(" "+E(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(O,{"border-style":"dashed"}),e(Y,{gutter:24},{default:t(()=>[e(J),e(X,null,{default:t(()=>[e(z,{size:"default",onClick:l[7]||(l[7]=()=>{})},{default:t(()=>[m(" 导出 ")]),_:1}),e(W,{border:I.value,"onUpdate:border":l[8]||(l[8]=o=>I.value=o),tableAutoHeight:V.value,"onUpdate:tableAutoHeight":l[9]||(l[9]=o=>V.value=o),checkList:a.value,"onUpdate:checkList":l[10]||(l[10]=o=>a.value=o),columns:g.value,"onUpdate:columns":l[11]||(l[11]=o=>g.value=o),"line-height":y.value,"onUpdate:lineHeight":l[12]||(l[12]=o=>y.value=o),stripe:C.value,"onUpdate:stripe":l[13]||(l[13]=o=>C.value=o),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ne((u(),s(te,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:$.value,border:I.value,size:y.value,stripe:C.value,onSelectionChange:P},{empty:t(()=>[e(le,{description:"暂无数据"})]),default:t(()=>[e(n,{align:"center",type:"selection"}),a.value.includes("memberChildId")?(u(),s(n,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"会员ID"})):c("",!0),a.value.includes("memberChildName")?(u(),s(n,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"会员名称"})):c("",!0),a.value.includes("memberChildGroupId")?(u(),s(n,{key:2,"show-overflow-tooltip":"",prop:"memberChildGroupId",align:"center",label:"会员组ID"})):c("",!0),a.value.includes("projectId")?(u(),s(n,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):c("",!0),a.value.includes("projectName")?(u(),s(n,{key:4,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):c("",!0),a.value.includes("customerIdentification")?(u(),s(n,{key:5,"show-overflow-tooltip":"",prop:"customerIdentification",align:"center",label:"客户简称/标识"})):c("",!0),a.value.includes("instructions")?(u(),s(n,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"})):c("",!0),a.value.includes("createTime")?(u(),s(n,{key:7,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{default:t(({row:o})=>[e(Z,{effect:"plain",type:"info"},{default:t(()=>[m(E(f(T)(o.createTime)),1)]),_:2},1024)]),_:1})):c("",!0),e(n,{align:"center",fixed:"right",label:"操作",width:"240"},{default:t(({row:o})=>[e(ee,null,{default:t(()=>[e(z,{type:"primary",plain:"",size:"small",onClick:k=>A(o)},{default:t(()=>[m(" 查看 ")]),_:2},1032,["onClick"]),e(z,{type:"danger",plain:"",size:"small",onClick:k=>B(o)},{default:t(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[re,N.value]]),e(oe,{"current-page":f(v).page,total:f(v).total,"page-size":f(v).size,"page-sizes":f(v).sizes,layout:f(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:F,onCurrentChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(ae,{label:"子会员素材",name:2},{default:t(()=>[e(Q,{"show-toggle":!1},{default:t(({fold:o,toggle:k})=>[e(q,{model:i.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.memberChildId,"onUpdate:modelValue":l[14]||(l[14]=p=>i.value.memberChildId=p),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.projectId,"onUpdate:modelValue":l[15]||(l[15]=p=>i.value.projectId=p),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(w,{modelValue:i.value.projectName,"onUpdate:modelValue":l[16]||(l[16]=p=>i.value.projectName=p),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(M,null,{default:t(()=>[e(j,{type:"primary",onClick:l[17]||(l[17]=p=>h())},{icon:t(()=>[e(S,{name:"i-ep:search"})]),default:t(()=>[m(" 筛选 ")]),_:1}),e(j,{onClick:K},{icon:t(()=>[Te]),default:t(()=>[m(" 重置 ")]),_:1}),e(j,{link:"",onClick:k,disabled:""},{icon:t(()=>[e(S,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[m(" "+E(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(O,{"border-style":"dashed"}),e(Y,{gutter:24},{default:t(()=>[e(J),e(X,null,{default:t(()=>[e(z,{size:"default",onClick:l[18]||(l[18]=()=>{})},{default:t(()=>[m(" 导出 ")]),_:1}),e(W,{border:I.value,"onUpdate:border":l[19]||(l[19]=o=>I.value=o),tableAutoHeight:V.value,"onUpdate:tableAutoHeight":l[20]||(l[20]=o=>V.value=o),checkList:a.value,"onUpdate:checkList":l[21]||(l[21]=o=>a.value=o),columns:g.value,"onUpdate:columns":l[22]||(l[22]=o=>g.value=o),"line-height":y.value,"onUpdate:lineHeight":l[23]||(l[23]=o=>y.value=o),stripe:C.value,"onUpdate:stripe":l[24]||(l[24]=o=>C.value=o),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ne((u(),s(te,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:$.value,border:I.value,size:y.value,stripe:C.value,onSelectionChange:P},{empty:t(()=>[e(le,{description:"暂无数据"})]),default:t(()=>[e(n,{type:"selection"}),a.value.includes("memberChildId")?(u(),s(n,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"会员ID"})):c("",!0),a.value.includes("memberChildName")?(u(),s(n,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"会员名称"})):c("",!0),a.value.includes("memberChildGroupId")?(u(),s(n,{key:2,"show-overflow-tooltip":"",prop:"memberChildGroupId",align:"center",label:"会员组ID"})):c("",!0),a.value.includes("projectId")?(u(),s(n,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):c("",!0),a.value.includes("projectName")?(u(),s(n,{key:4,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):c("",!0),a.value.includes("customerIdentification")?(u(),s(n,{key:5,"show-overflow-tooltip":"",prop:"customerIdentification",align:"center",label:"客户简称/标识"})):c("",!0),a.value.includes("instructions")?(u(),s(n,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"})):c("",!0),a.value.includes("createTime")?(u(),s(n,{key:7,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{default:t(({row:o})=>[e(Z,{effect:"plain",type:"info"},{default:t(()=>[m(E(f(T)(o.createTime)),1)]),_:2},1024)]),_:1})):c("",!0),e(n,{align:"center",fixed:"right",label:"操作",width:"240"},{default:t(({row:o})=>[e(ee,null,{default:t(()=>[e(z,{type:"primary",plain:"",size:"small",onClick:k=>A(o)},{default:t(()=>[m(" 查看 ")]),_:2},1032,["onClick"]),e(z,{type:"danger",plain:"",size:"small",onClick:k=>B(o)},{default:t(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[re,N.value]]),e(oe,{"current-page":f(v).page,total:f(v).total,"page-size":f(v).size,"page-sizes":f(v).sizes,layout:f(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:F,onCurrentChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),e(Se,{ref_key:"deleteRef",ref:R},null,512),e(Ee,{ref_key:"detailsRef",ref:L,onFetchData:_},null,512)]),_:1})],2)}}}),Ke=Ne(He,[["__scopeId","data-v-44c2c0f0"]]);export{Ke as default};
