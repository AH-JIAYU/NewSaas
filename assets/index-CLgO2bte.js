
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as N}from"./apiLoading-veSSAVkR.js";import{x as u,ag as I,r as d,d as D,a5 as E,a as m,o as T,e as U,w as a,f as s,g as f,i as o,I as j,an as B,E as x,R as O}from"./index-CWgqmEzW.js";const _={list:e=>u.post("memberLevel/getMemberLevelList",e),create:e=>u.post("memberLevel/addMemberLevel",e),edit:e=>u.post("memberLevel/updateMemberLevel",e),delete:e=>u.post("memberLevel/deleteMemberLevel",e),getLevelNameList:e=>u.post("memberLevel/getMemberLevelNameList",e)},$=I("surveyVipLevel",()=>{const e=d(null);return{LevelNameList:e,getLevelNameList:async()=>{if(!e.value){const{data:v}=await _.getLevelNameList({});e.value=v.getMemberLevelNameInfoList}return e.value}}}),h=$,z=D({__name:"index",emits:["queryData"],setup(e,{expose:L,emit:v}){const M=h(),S=v,i=d(!1),c=d(""),t=d(),p=d(),R=E({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function w(n){n?(c.value="编辑",t.value=B(n)):(c.value="新增",t.value={}),i.value=!0}function b(){p.value.resetFields(),i.value=!1}function k(){p.value.validate(async n=>{if(n){if(t.value.memberLevelId){const{status:l}=await N(_.edit(t.value));l===1&&x.success({message:"编辑成功",center:!0})}else{const{status:l}=await N(_.create(t.value));l===1&&x.success({message:"新增成功",center:!0})}M.LevelNameList=null,S("queryData"),b()}})}return L({showEdit:w}),(n,l)=>{const g=m("el-input"),V=m("el-form-item"),C=m("el-form"),y=m("el-button"),q=m("el-dialog");return T(),U(q,{modelValue:o(i),"onUpdate:modelValue":l[2]||(l[2]=r=>j(i)?i.value=r:null),title:o(c),width:"600"},{footer:a(()=>[s(y,{onClick:b},{default:a(()=>[f(" 取消 ")]),_:1}),s(y,{type:"primary",onClick:k},{default:a(()=>[f(" 确定 ")]),_:1})]),default:a(()=>[s(C,{ref_key:"formRef",ref:p,model:o(t),rules:o(R),"label-width":"7rem",inline:!1},{default:a(()=>[s(V,{label:"等级名称",prop:"levelName"},{default:a(()=>[s(g,{modelValue:o(t).levelName,"onUpdate:modelValue":l[0]||(l[0]=r=>o(t).levelName=r),maxlength:"100"},null,8,["modelValue"])]),_:1}),s(V,{label:"价格比例",prop:"additionRatio"},{default:a(()=>[s(g,{modelValue:o(t).additionRatio,"onUpdate:modelValue":l[1]||(l[1]=r=>o(t).additionRatio=r),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;",type:"number"},{append:a(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),F=O(z,[["__scopeId","data-v-a675b885"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{_ as a,F as e,G as i,h as u};
