
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as be,d as fe,aM as _e,r as _,a3 as R,l as ve,a as u,al as ge,o as i,b as z,f as l,w as a,i as e,am as C,F as $,n as G,e as d,g as p,G as c,p as k,j as m,Q as he,L as ye,aO as Ie,aP as Ce,ak as ke,aK as Se,aL as we,D as Ve,aE as w,P as Le}from"./index-CWfNE84P.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-6hkKwDDa.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-BTK1QCjm.js";import{u as De}from"./user_customer-B_E8YCrv.js";import"./user_customer-CUBCwvUV.js";const Ee={list:h=>be.post("callback/getMemberChildSurveyRecord",h)},Ue=h=>(Se("data-v-fdf70f0c"),h=h(),we(),h),ze=Ue(()=>Ve("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Pe=fe({name:"RecordSurveyIndex",__name:"index",setup(h){const H=De(),{getParams:A,pagination:y,onSizeChange:q,onCurrentChange:O}=_e(),E=_(!1),P=_([]),Q=_(""),s=_([]),V=_(!0),L=_(!1),j=_("default"),N=_(!1),D=_([{prop:"memberChildId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberChildName",label:"所属组",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),r=R({memberChildId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),g=R({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间果断","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function K(){r.pageNo=1,S()}function J(b){q(b).then(()=>S())}function T(b=1){O(b).then(()=>S())}async function S(){E.value=!0;const b={...A(),...r},{data:o}=await Ee.list(b);P.value=o.memberChildSurveyRecordInfoList,y.value.total=o.total,E.value=!1}function W(b){Q.value=b}function X(){Object.assign(r,{memberChildId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),S()}return ve(async()=>{g.customerList=await H.getCustomerList(),D.value.forEach(b=>{b.checked&&s.value.push(b.prop)}),S()}),(b,o)=>{const I=u("el-input"),v=u("el-form-item"),M=u("el-option"),x=u("el-select"),B=ye,U=u("ElButton"),Y=u("ElFormItem"),Z=u("ElForm"),ee=Ne,te=u("ElDivider"),le=je,oe=u("el-button"),ae=Ie,ne=Ce,re=u("el-row"),f=u("el-table-column"),F=u("ElTableColumn"),ie=u("el-empty"),se=u("el-table"),ue=u("ElPagination"),de=ke,pe=ge("loading");return i(),z("div",{class:he({"absolute-container":e(N)})},[l(de,null,{default:a(()=>[l(ee,{"show-toggle":!1},{default:a(({fold:t,toggle:ce})=>[l(Z,{model:e(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).memberChildId,"onUpdate:modelValue":o[0]||(o[0]=n=>e(r).memberChildId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:1}),C(l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).memberChildGroupId,"onUpdate:modelValue":o[1]||(o[1]=n=>e(r).memberChildGroupId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).tenantSupplierId,"onUpdate:modelValue":o[2]||(o[2]=n=>e(r).tenantSupplierId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).projectId,"onUpdate:modelValue":o[3]||(o[3]=n=>e(r).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),C(l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).name,"onUpdate:modelValue":o[4]||(o[4]=n=>e(r).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),C(l(v,{label:""},{default:a(()=>[l(x,{modelValue:e(r).projectName,"onUpdate:modelValue":o[5]||(o[5]=n=>e(r).projectName=n),clearable:"",placeholder:"客户简称"},{default:a(()=>[(i(!0),z($,null,G(e(g).customerList,n=>(i(),d(M,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!t]]),C(l(v,{label:""},{default:a(()=>[l(I,{modelValue:e(r).ip,"onUpdate:modelValue":o[6]||(o[6]=n=>e(r).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),C(l(v,{label:""},{default:a(()=>[l(x,{modelValue:e(r).surveyStatus,"onUpdate:modelValue":o[7]||(o[7]=n=>e(r).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:a(()=>[(i(!0),z($,null,G(e(g).surveyStatusList,(n,me)=>(i(),d(M,{label:n,value:me+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!t]]),l(Y,null,{default:a(()=>[l(U,{type:"primary",onClick:o[8]||(o[8]=n=>T())},{icon:a(()=>[l(B,{name:"i-ep:search"})]),default:a(()=>[p(" 筛选 ")]),_:1}),l(U,{onClick:X},{icon:a(()=>[ze]),default:a(()=>[p(" 重置 ")]),_:1}),l(U,{link:"",onClick:ce},{icon:a(()=>[l(B,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[p(" "+c(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(te,{"border-style":"dashed"}),l(re,null,{default:a(()=>[l(le),l(ne,null,{default:a(()=>[l(oe,{size:"default"},{default:a(()=>[p(" 导出 ")]),_:1}),l(ae,{border:e(V),"onUpdate:border":o[9]||(o[9]=t=>k(V)?V.value=t:null),tableAutoHeight:e(N),"onUpdate:tableAutoHeight":o[10]||(o[10]=t=>k(N)?N.value=t:null),checkList:e(s),"onUpdate:checkList":o[11]||(o[11]=t=>k(s)?s.value=t:null),columns:e(D),"onUpdate:columns":o[12]||(o[12]=t=>k(D)?D.value=t:null),"line-height":e(j),"onUpdate:lineHeight":o[13]||(o[13]=t=>k(j)?j.value=t:null),stripe:e(L),"onUpdate:stripe":o[14]||(o[14]=t=>k(L)?L.value=t:null),style:{"margin-left":"12px"},onQueryData:K},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((i(),d(se,{border:e(V),data:e(P),size:e(j),stripe:e(L),onSelectionChange:W},{empty:a(()=>[l(ie,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(f,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),e(s).includes("memberChildId")?(i(),d(f,{key:0,align:"center",prop:"memberChildId","show-overflow-tooltip":"",label:"子会员ID"})):m("",!0),e(s).includes("randomIdentityId")?(i(),d(f,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:a(({row:t})=>[p(c(t.randomIdentityId?t.randomIdentityId:"-"),1)]),_:1})):m("",!0),e(s).includes("memberChildName")?(i(),d(f,{key:2,align:"center",prop:"memberChildName","show-overflow-tooltip":"",label:"所属组"},{default:a(({row:t})=>[p(c(t.memberChildName?t.memberChildName:"-"),1)]),_:1})):m("",!0),e(s).includes("tenantSupplierId")?(i(),d(f,{key:3,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):m("",!0),e(s).includes("projectId")?(i(),d(f,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):m("",!0),e(s).includes("projectName")?(i(),d(f,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称/客户简称"},{default:a(({row:t})=>[p(c(t.projectName?t.projectName:"-"),1)]),_:1})):m("",!0),e(s).includes("allocationType")?(i(),d(f,{key:6,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:a(({row:t})=>[p(c(e(g).allocationTypeList[t.allocationType-1]),1)]),_:1})):m("",!0),e(s).includes("price")?(i(),d(f,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"子会员价/供应商价/原价"},{default:a(({row:t})=>[p(c(t.memberChildPrice||0)+"/ "+c(t.supplierPrice||0)+"/ "+c(t.doMoneyPrice||0),1)]),_:1})):m("",!0),e(s).includes("ipBelong")?(i(),d(f,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):m("",!0),e(s).includes("surveyTime")?(i(),d(f,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:a(({row:t})=>[p(c(t.surveyTime||0)+"/ "+c(t.projectTime||0),1)]),_:1})):m("",!0),e(s).includes("surveyStatus")?(i(),d(F,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:a(({row:t})=>[p(c(e(g).surveyStatusList[t.surveyStatus-1]),1)]),_:1})):m("",!0),e(s).includes("viceStatus")?(i(),d(F,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:a(({row:t})=>[p(c(e(g).viceStatusList[t.viceStatus-1]?e(g).viceStatusList[t.viceStatus-1]:"-"),1)]),_:1})):m("",!0)]),_:1},8,["border","data","size","stripe"])),[[pe,e(E)]]),l(ue,{"current-page":e(y).page,total:e(y).total,"page-size":e(y).size,"page-sizes":e(y).sizes,layout:e(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Re=Le(Pe,[["__scopeId","data-v-fdf70f0c"]]);export{Re as default};
