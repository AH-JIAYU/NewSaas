
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as M,T as S}from"./index-DvYDEtwV.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-DtWkC7N-.js";import{d as z,r as n,a3 as $,k as E,a4 as F,a as f,o as u,b as y,f as b,w as d,g as h,S as _,e as T,F as H,t as P,s as I,H as q,j,am as k,R as G}from"./index-VLp8k4vq.js";import"./index-C0teKjFA.js";import"./zh_Hans-GZR_-8fK.js";import"./zh_Hans-B39mJ-rS.js";import"./file-C37xGs9l.js";import"./projectManagement-CWZGYHq1.js";import"./user_customer-3aqAklnb.js";import"./user_customer-DtEwg5em.js";import"./index.vue_vue_type_script_setup_true_lang-DlpgcBEq.js";import"./index.vue_vue_type_script_setup_true_lang-DBgNWE6F.js";import"./index-CnurLyf0.js";import"./index-D2aduf0Y.js";import"./department-BdPMGWiz.js";import"./position_manage-B9W1r55m.js";import"./department-Dn522tKW.js";import"./tenant_role-6MLHrNpA.js";import"./configuration_role-CHdiYHhl.js";import"./configuration_manager-DN3AtSjF.js";import"./apiLoading-CKzeD40w.js";import"./stagedData-CAd-hmvv.js";const J={style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},K=z({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(x,{expose:L,emit:R}){const C=M(),o=x,V=R,A=n(),e=n(o.leftTabsData),B=n(o.validateTopTabs),c=n(),g=n(0),t=n(0);function D(){const{projectId:a,parentId:l,name:i,projectIdentification:p,clientId:m,countryIdList:s,uidUrl:r,...v}=k(e.value[0]);e.value[t.value].projectId&&(v.projectId=e.value[t.value].projectId,v.parentId=e.value[t.value].parentId),c.value[t.value].getUpLoad(v.descriptionUrl),e.value.splice(t.value,1,v)}function U(){t.value=++g.value;const{projectId:a,...l}=k(C.initialTopTabsData);e.value.push(l)}function w(a){e.value.splice(a,1),B.value.splice(a,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),g.value=Math.max(0,e.value.length-1))}return $(()=>t.value,(a,l)=>{o.validateAll.reduce((p,m,s)=>(m==="rejected"&&p.push(s),p),[]).includes(l)&&V("validate")}),E(()=>{for(let a=0;a<c.value.length;a++)c.value[a].getUpLoad(e.value[a].descriptionUrl)}),e.value.forEach((a,l)=>{const i=n(null);F(`formRef${l}`,i)}),L({activeLeftTab:t}),(a,l)=>{const i=f("el-button"),p=f("el-tab-pane"),m=f("el-tabs");return u(),y("div",null,[b(i,{class:_(o.title==="新增"?"button":"button hideButton"),disabled:e.value.length>29||o.title==="编辑"&&e.value[0].parentId!=="0",onClick:l[0]||(l[0]=s=>U())},{default:d(()=>[h(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(u(),T(m,{key:0,modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value=s),"tab-position":"left",onTabRemove:w,class:_(o.title==="新增"?"":"editHideCloseButton")},{default:d(()=>[(u(!0),y(H,null,P(e.value,(s,r)=>(u(),T(p,{key:r,style:{position:"relative"},closable:e.value.length!==1,name:r},{label:d(()=>[I("div",{class:_(o.validateAll[r]&&o.validateAll[r]==="rejected"?"validateRejected":"")},q(s.name||"项目名称"),3)]),default:d(()=>[I("div",J,[t.value>0?(u(),T(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:D},{default:d(()=>[h(" 同步数据 ")]),_:1})):j("",!0)]),b(S,{ref_for:!0,ref_key:"topTabsRef",ref:c,"left-tab":s,"tab-index":r},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),b(N,{ref_key:"settingsRef",ref:A},null,512)]),_:1},8,["modelValue","class"])):j("",!0)])}}}),be=G(K,[["__scopeId","data-v-70de29e6"]]);export{be as default};
