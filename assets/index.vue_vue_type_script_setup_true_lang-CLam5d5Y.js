
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./position_manage-DYgO5-iz.js";import{d as R,r as o,n as q,a as d,q as B,s as D,o as T,b as U,f as s,w as n,y as M,g,E as y,am as P}from"./index-ynKxKXgj.js";const S={style:{flex:"auto"}},$=R({name:"Edit",__name:"index",emits:["success"],setup(I,{expose:V,emit:b}){const c=b,f=o(""),k=o(),l=o(!1),m=o(),u=o(!1),a=o({id:null,name:"",active:1,remark:1}),x=o({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function h(){return new Promise(t=>{a.value.id?m.value&&m.value.validate(e=>{if(e)try{l.value=!0;const r=P(a.value);_.edit(r).then(()=>{l.value=!1,y.success({message:"编辑成功",center:!0}),c("success"),u.value=!1,t()})}catch{}finally{l.value=!1}}):m.value&&m.value.validate(e=>{if(e)try{l.value=!0,delete a.value.id,_.create(a.value).then(()=>{l.value=!1,y.success({message:"新增成功",center:!0}),c("success"),u.value=!1,t()})}catch{}finally{l.value=!1}})})}async function C(t){try{l.value=!0,t?a.value=JSON.parse(t):a.value={id:null,name:"",active:1,remark:""},f.value=t!=null&&t.id?"编辑":"新增",l.value=!1,u.value=!0}catch{}finally{l.value=!1}}return q(async()=>{k.value=new Date}),V({showEdit:C}),(t,e)=>{const r=d("el-input"),v=d("el-form-item"),E=d("el-form"),p=d("el-button"),w=d("el-dialog"),N=B("loading");return D((T(),U("div",null,[s(w,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=i=>u.value=i),title:f.value,width:"700"},{footer:n(()=>[M("div",S,[s(p,{type:"",onClick:e[2]||(e[2]=i=>u.value=!1)},{default:n(()=>[g(" 取消 ")]),_:1}),s(p,{type:"primary",onClick:h},{default:n(()=>[g(" 确定 ")]),_:1})])]),default:n(()=>[s(E,{ref_key:"formRef",ref:m,"label-width":"7rem",model:a.value,rules:x.value,inline:!1},{default:n(()=>[s(v,{prop:"name",label:"职位名称"},{default:n(()=>[s(r,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.name=i),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"备注"},{default:n(()=>[s(r,{modelValue:a.value.remark,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.remark=i),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[N,l.value]])}}});export{$ as _};
