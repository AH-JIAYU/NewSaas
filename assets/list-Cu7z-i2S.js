
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ve,l as Ce,aN as Ne,r as c,a3 as Ie,c as we,n as je,a as f,q as Le,o as n,b as h,f as l,w as o,i as t,g as s,A as k,s as Se,e as r,aM as xe,z as d,j as p,y as I,F as q,t as Pe,N as ze,be as Re,b9 as Be,ba as Te,bd as Ae,ap as Ee,L as De}from"./index--gIewHn0.js";import{_ as Ue}from"./index-DwUJCTek.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-BBlIBcJT.js";import{_ as Oe}from"./index-D-SQ15MR.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-SIAyYh1K.js";import He from"./index-VShkmS9H.js";import $e from"./index-BdbOcd4N.js";import Ve from"./index-BwocZ60x.js";import{a as Ge}from"./survey_myProjeck-BF4oYU_-.js";import{u as qe}from"./user_customer-D5CfCOTB.js";import"./clipboard-BL9WoAmE.js";import"./index-B1PsWhMP.js";import"./index.vue_vue_type_script_setup_true_lang-BwrECdo3.js";import"./sortable.esm-C0-Qcoum.js";import"./index-iBxi57a3.js";import"./file-B3Ts1JVn.js";import"./download-C8PHVIy1.js";import"./apiLoading-Ds6ilyJN.js";import"./index-DOvvOXVy.js";import"./projectManagement-DSjLxWur.js";import"./survey_vip_department-wMnS45Yo.js";import"./survey_vipGroup-DR7lNuLS.js";import"./survey_vipGroup-BlWSVBnt.js";import"./user_customer-DUqnLmIJ.js";const Qe={key:0,class:"crudeTop"},Je={key:1,class:"hoverSvg"},Ke={class:"fineSize"},We={key:0,class:"crudeTop"},Xe={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},Ye={class:"fineBom"},Ze={class:"hoverSvg"},et={class:"withoutUrlSize"},tt={class:"parameter oneLine"},ot=ve({name:"myProjeck",__name:"list",setup(lt){const{format:Q}=Re(),T=Ce(),J=qe(),{pagination:b,getParams:K,onSizeChange:W,onCurrentChange:X,onSortChange:nt}=Ne(),A=c([]),E=c([]),D=c(),Y=c(""),U=c(),w=c(!0),Z=c(),M=c(),j=c(!1),u=c([]),L=c(!1),O=c(),ee=c("formSearch-myProjeck"),S=c("default"),x=c(!1),P=c([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortabel:!0,checked:!0},{prop:"countryNameList",label:"区域",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=Ie({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),F=c([]),H=c();function te(a){U.value.showEdit(a)}function oe(a){M.value.showEdit(a)}function le(a){H.value.showEdit(a)}function ne(a){W(a).then(()=>v())}function R(a=1){X(a).then(()=>v())}function ae(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),v()}async function v(){try{w.value=!0;const a={...K(),..._};_.time&&_.time.length&&(a.beginTime=_.time[0]||"",a.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?a.countryId=[_.countryId]:a.countryId=[];const i=await Ge.list(a);D.value=i.data.currencyType,F.value=i.data.getMemberProjectListInfoList,b.value.total=i.data.total,w.value=!1}catch{}finally{w.value=!1}}const re=c();function ie(a){re.value=a.projectId}const z=we(()=>a=>A.value.filter(C=>a==null?void 0:a.includes(C.id)).map(C=>C.chineseName));je(async()=>{P.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),A.value=await T.getCountry(),E.value=await J.getCustomerList(),v(),O.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"区域地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const ce={clientId:()=>E.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(a,i)=>{const C=Oe,se=f("ElDivider"),ue=Me,B=f("el-button"),pe=Be,de=Te,me=f("el-row"),m=f("el-table-column"),$=Ue,V=f("el-tooltip"),y=f("el-text"),fe=Ae,G=f("el-link"),g=f("el-tag"),_e=f("ElSpace"),ye=f("el-empty"),he=f("el-table"),be=f("ElPagination"),ge=Ee,ke=Le("loading");return n(),h("div",{class:ze({"absolute-container":t(L)})},[l(ge,null,{default:o(()=>[l(C,{formSearchList:t(O),formSearchName:t(ee),onCurrentChange:R,onOnReset:ae,model:t(_),formOption:ce},null,8,["formSearchList","formSearchName","model"]),l(se,{"border-style":"dashed"}),l(me,{gutter:24},{default:o(()=>[l(ue),l(de,null,{default:o(()=>[l(B,{size:"default",onClick:i[0]||(i[0]=()=>{})},{default:o(()=>[s(" 导出 ")]),_:1}),l(pe,{border:t(j),"onUpdate:border":i[1]||(i[1]=e=>k(j)?j.value=e:null),tableAutoHeight:t(L),"onUpdate:tableAutoHeight":i[2]||(i[2]=e=>k(L)?L.value=e:null),checkList:t(u),"onUpdate:checkList":i[3]||(i[3]=e=>k(u)?u.value=e:null),columns:t(P),"onUpdate:columns":i[4]||(i[4]=e=>k(P)?P.value=e:null),"line-height":t(S),"onUpdate:lineHeight":i[5]||(i[5]=e=>k(S)?S.value=e:null),stripe:t(x),"onUpdate:stripe":i[6]||(i[6]=e=>k(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:R},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Se((n(),r(he,{ref_key:"tableSortRef",ref:Y,style:{"margin-top":"10px"},"row-key":"id",data:t(F),border:t(j),size:t(S),stripe:t(x),onCurrentChange:ie},{empty:o(()=>[l(ye,{image:t(xe),"image-size":300},null,8,["image"])]),default:o(()=>[l(m,{align:"left",type:"selection"}),t(u).includes("project")?(n(),r(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:o(({row:e})=>[t(u).includes("projectName")?(n(),h("p",Qe,"名称："+d(e.projectName),1)):p("",!0),t(u).includes("projectId")?(n(),h("div",Je,[I("p",Ke,d(e.projectId),1),l($,{class:"copy",content:e.projectId},null,8,["content"])])):p("",!0)]),_:1})):p("",!0),t(u).includes("projectIdentificationOrClientName")?(n(),r(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:o(({row:e})=>[t(u).includes("projectIdentification")?(n(),h("p",We," 名称："+d(e.projectIdentification),1)):p("",!0),t(u).includes("projectIdClientName")?(n(),h("p",Xe,[s("标："),I("span",Ye,d(e.clientName),1)])):p("",!0)]),_:1})):p("",!0),t(u).includes("withoutUrl")?(n(),r(m,{key:2,width:"150",prop:"withoutUrl",align:"left",label:"URL"},{default:o(({row:e})=>[l(V,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:o(()=>[I("div",Ze,[I("p",et,d(e.withoutUrl),1),l($,{class:"copy",content:e.withoutUrl},null,8,["content"])])]),_:2},1032,["content"])]),_:1})):p("",!0),t(u).includes("participation")?(n(),r(m,{key:3,"show-overflow-tooltip":"",width:"200",align:"left",label:"参数"},{default:o(({row:e})=>[I("p",tt,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:o(()=>[s("参与："+d(e.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:o(()=>[s("完成："+d(e.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:o(()=>[s("配额："+d(e.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:o(()=>[s("限量："+d(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):p("",!0),t(u).includes("doMoneyPrice")?(n(),r(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"项目价"},{default:o(({row:e})=>[t(D)===3?(n(),r(y,{key:0,class:"mx-1"},{default:o(()=>[s("暂无数据")]),_:1})):(n(),r(y,{key:1,class:"mx-1"},{default:o(()=>[l(y,{style:{color:"#FD8989"}},{default:o(()=>[l(fe)]),_:1}),l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[s(d(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):p("",!0),t(u).includes("memberPrice")?(n(),r(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"成本价(会员)"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(G,{key:0,size:"small",plain:"",type:"primary",onClick:N=>oe(e)},{default:o(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(y,{key:1},{default:o(()=>[s(" - ")]),_:1}))]),_:1})):p("",!0),t(u).includes("countryNameList")?(n(),r(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"区域"},{default:o(({row:e})=>[e.countryNameList?(n(),h(q,{key:0},[e.countryNameList.length===t(T).country.length?(n(),r(g,{key:0,type:"primary"},{default:o(()=>[s("全球")]),_:1})):t(z)(e.countryNameList).length>1?(n(),r(V,{key:1,class:"box-item",effect:"dark",content:t(z)(e.countryNameList).join(","),placement:"top"},{default:o(()=>[l(G,{type:"primary"},{default:o(()=>[l(g,{type:"primary"},{default:o(()=>[s("x"+d(t(z)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),h(q,{key:2},Pe(t(z)(e.countryNameList),N=>(n(),r(g,{key:N,type:"primary"},{default:o(()=>[s(d(N),1)]),_:2},1024))),128))],64)):p("",!0)]),_:1})):p("",!0),t(u).includes("ir")?(n(),r(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:o(({row:e})=>[l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[s(d(e.ir?e.ir:"-")+" / "+d(e.nir?e.nir:0),1)]),_:2},1024)]),_:1})):p("",!0),t(u).includes("memberStatus")?(n(),r(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(g,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:o(()=>[s(" 会员组 ")]),_:1})):(n(),r(g,{key:1,effect:"plain",type:"info"},{default:o(()=>[s(" 未分配 ")]),_:1}))]),_:1})):p("",!0),t(u).includes("createTime")?(n(),r(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{default:o(({row:e})=>[l(g,{effect:"plain",type:"info"},{default:o(()=>[s(d(t(Q)(e.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:o(({row:e})=>[l(_e,null,{default:o(()=>[e.getMemberGroupNameInfoList.length?p("",!0):(n(),r(B,{key:0,type:"primary",plain:"",size:"small",onClick:N=>le(e)},{default:o(()=>[s(" 分配 ")]),_:2},1032,["onClick"])),l(B,{size:"small",plain:"",type:"warning",onClick:N=>te(e)},{default:o(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ke,t(w)]]),l(be,{"current-page":t(b).page,total:t(b).total,"page-size":t(b).size,"page-sizes":t(b).sizes,layout:t(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Fe,{ref_key:"CheckEditRef",ref:Z},null,512),l(He,{ref_key:"detailRef",ref:U},null,512),l($e,{ref_key:"checkMembershipPriceRef",ref:M},null,512),l(Ve,{ref_key:"addAllocationEditRef",ref:H,onFetchData:v},null,512)],2)}}}),xt=De(ot,[["__scopeId","data-v-97a5ee66"]]);export{xt as default};
