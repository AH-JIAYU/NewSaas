
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as we,aM as je,r as d,a2 as Se,c as Ve,D as Ee,a as c,al as Pe,o as n,b as v,f as o,w as e,i as l,am as C,a3 as x,a4 as R,e as r,g as u,G as _,l as I,j as f,P as ze,L as Me,aO as Be,aP as xe,p as Re,aK as De,aL as Ue,F as Te,aE as D,_ as $e}from"./index-BEU4aNZB.js";import{_ as Ge}from"./index.vue_vue_type_style_index_0_lang-Cht6PVGW.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-CHLxvR0y.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-DKl3874M.js";import{c as Ae,a as He}from"./index-CPwA8cPS.js";import Qe from"./index-xSwuAsVL.js";import{u as qe}from"./otherFunctions_basicDictionary-DtlvvSBs.js";import{u as Ke}from"./user_customer-Bssy1Ur8.js";import"./apiLoading-DPgX_gC2.js";import"./projectManagement-DF93lvcx.js";import"./survey_vipGroup-8gqyuqTp.js";import"./survey_vipGroup-CSAOtqIW.js";import"./basicDictionary-8TM9p6qU.js";import"./user_customer-gvBX7VsR.js";const Je=N=>(De("data-v-b95ece3f"),N=N(),Ue(),N),We=Je(()=>Te("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe=we({name:"SurveyMyProjeckList",__name:"list",setup(N){const W=qe(),X=Ke(),{pagination:y,getParams:Ye,onSizeChange:Y,onCurrentChange:Z,onSortChange:Ze}=je(),O=d([]),F=d([]),L=d(),ee=d(""),U=d(!0),te=d(),A=d(),w=d(!0),m=d([]),j=d(!1),S=d("default"),V=d(!1),E=d([{prop:"projectId",label:"项目Id",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"项目标识",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配状态",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),i=Se({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),H=d([]),Q=d();function le(p){console.log("详情")}function oe(p){A.value.showEdit(p)}function ae(p){console.log("测查")}function ne(p){console.log("分配"),Q.value.showEdit(p)}function re(p){Y(p)}function q(p=1){Z(p)}function ie(){Object.assign(i,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:0,time:[],beginTime:"",endTime:""}),P()}const se=Ve(()=>H.value.slice((y.value.page-1)*y.value.size,y.value.page*y.value.size));async function P(){U.value=!0;const p={...i};i.time&&i.time.length&&(p.beginTime=i.time[0]||"",p.endTime=i.time[1]||"");const a=await He.list(p);L.value=a.data.currencyType,H.value=a.data.getMemberProjectListInfoList,y.value.total=a.data.getMemberProjectListInfoList.length,U.value=!1}return Ee(async()=>{E.value.forEach(p=>{p.checked&&m.value.push(p.prop)}),O.value=await W.getCountry(),F.value=await X.getCustomerList(),P()}),(p,a)=>{const T=c("el-input"),k=c("el-form-item"),ce=c("ElOption"),$=c("el-select"),z=c("el-option"),ue=c("el-date-picker"),K=Me,G=c("ElButton"),pe=c("ElFormItem"),me=c("el-form"),de=Oe,fe=c("ElDivider"),_e=Ge,M=c("el-button"),be=Be,ge=xe,ye=c("el-row"),b=c("el-table-column"),h=c("el-text"),B=c("el-link"),J=c("el-tooltip"),ke=c("el-tag"),he=c("ElSpace"),ve=c("el-empty"),Ie=c("el-table"),Ce=c("ElPagination"),Ne=Re,Le=Pe("loading");return n(),v("div",{class:ze({"absolute-container":l(j)})},[o(Ne,null,{default:e(()=>[o(de,{"show-toggle":!1},{default:e(({fold:t,toggle:g})=>[o(me,{model:l(i).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[o(k,{label:""},{default:e(()=>[o(T,{modelValue:l(i).projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>l(i).projectId=s),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),o(k,{label:""},{default:e(()=>[o(T,{clearable:"",modelValue:l(i).projectName,"onUpdate:modelValue":a[1]||(a[1]=s=>l(i).projectName=s),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),o(k,{label:""},{default:e(()=>[o(T,{modelValue:l(i).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=s=>l(i).projectIdentification=s),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),C(o(k,{label:""},{default:e(()=>[o($,{placeholder:"国家地区",modelValue:l(i).countryId,"onUpdate:modelValue":a[3]||(a[3]=s=>l(i).countryId=s),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:e(()=>[(n(!0),v(x,null,R(l(O),s=>(n(),r(ce,{label:s.chineseName,value:s.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!t]]),C(o(k,{label:""},{default:e(()=>[o($,{placeholder:"客户简称",modelValue:l(i).clientId,"onUpdate:modelValue":a[4]||(a[4]=s=>l(i).clientId=s)},{default:e(()=>[(n(!0),v(x,null,R(l(F),s=>(n(),r(z,{key:s.tenantCustomerId,value:s.tenantCustomerId,label:s.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!t]]),C(o(k,{label:""},{default:e(()=>[o($,{placeholder:"B2B/B2C",modelValue:l(i).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=s=>l(i).b2bOrB2cStatus=s)},{default:e(()=>[o(z,{label:"全部",value:""}),o(z,{label:"B2B",value:"1"}),o(z,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[D,!t]]),C(o(k,null,{default:e(()=>[o(ue,{modelValue:l(i).time,"onUpdate:modelValue":a[6]||(a[6]=s=>l(i).time=s),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[D,!t]]),o(pe,null,{default:e(()=>[o(G,{type:"primary",onClick:a[7]||(a[7]=s=>P())},{icon:e(()=>[o(K,{name:"i-ep:search"})]),default:e(()=>[u(" 筛选 ")]),_:1}),o(G,{onClick:ie},{icon:e(()=>[We]),default:e(()=>[u(" 重置 ")]),_:1}),o(G,{link:"",onClick:g},{icon:e(()=>[o(K,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[u(" "+_(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(fe,{"border-style":"dashed"}),o(ye,{gutter:24},{default:e(()=>[o(_e),o(ge,null,{default:e(()=>[o(M,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:e(()=>[u(" 导出 ")]),_:1}),o(be,{border:l(w),"onUpdate:border":a[9]||(a[9]=t=>I(w)?w.value=t:null),tableAutoHeight:l(j),"onUpdate:tableAutoHeight":a[10]||(a[10]=t=>I(j)?j.value=t:null),checkList:l(m),"onUpdate:checkList":a[11]||(a[11]=t=>I(m)?m.value=t:null),columns:l(E),"onUpdate:columns":a[12]||(a[12]=t=>I(E)?E.value=t:null),"line-height":l(S),"onUpdate:lineHeight":a[13]||(a[13]=t=>I(S)?S.value=t:null),stripe:l(V),"onUpdate:stripe":a[14]||(a[14]=t=>I(V)?V.value=t:null),style:{"margin-left":"12px"},onQueryData:q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((n(),r(Ie,{ref_key:"tableSortRef",ref:ee,style:{"margin-top":"10px"},"row-key":"id",data:l(se),border:l(w),size:l(S),stripe:l(V)},{empty:e(()=>[o(ve,{description:"暂无数据"})]),default:e(()=>[o(b,{type:"selection"}),l(m).includes("projectId")?(n(),r(b,{key:0,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):f("",!0),l(m).includes("projectName")?(n(),r(b,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):f("",!0),l(m).includes("projectIdentificationOrClientName")?(n(),r(b,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",align:"center",label:"客户简称/标识"})):f("",!0),l(m).includes("participation")?(n(),r(b,{key:3,"show-overflow-tooltip":"",align:"center",label:"参与/完成/配额/限量"},{default:e(({row:t})=>[u(_(t.participation)+"/ "+_(t.complete)+"/ "+_(t.num)+"/ "+_(t.limitedQuantity),1)]),_:1})):f("",!0),l(m).includes("doMoneyPrice")?(n(),r(b,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[l(L)===1?(n(),r(h,{key:0,class:"mx-1"},{default:e(()=>[u("$"+_(t.doMoneyPrice),1)]),_:2},1024)):f("",!0),l(L)===2?(n(),r(h,{key:1,class:"mx-1"},{default:e(()=>[u("￥"+_(t.doMoneyPrice),1)]),_:2},1024)):f("",!0),l(L)===3?(n(),r(h,{key:2,class:"mx-1"},{default:e(()=>[u("暂无数据")]),_:1})):f("",!0)]),_:1})):f("",!0),l(m).includes("memberPrice")?(n(),r(b,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(B,{key:0,size:"small",plain:"",type:"primary",onClick:g=>oe(t)},{default:e(()=>[u(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(h,{key:1},{default:e(()=>[u(" - ")]),_:1}))]),_:1})):f("",!0),l(m).includes("ir")?(n(),r(b,{key:6,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[u(_(t.ir)+"/ "+_(t.nir),1)]),_:1})):f("",!0),l(m).includes("countryNameList")?(n(),r(b,{key:7,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:e(({row:t})=>[t.countryNameList.length>4?(n(),r(J,{key:0,class:"box-item",effect:"dark",content:t.countryNameList.join(","),placement:"top"},{default:e(()=>[o(B,{type:"primary"},{default:e(()=>[u(_(t.countryNameList.length),1)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),v(x,{key:1},R(t.countryNameList,g=>(n(),r(ke,{key:g,type:"primary"},{default:e(()=>[u(_(g),1)]),_:2},1024))),128))]),_:1})):f("",!0),l(m).includes("memberStatus")?(n(),r(b,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配状态"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(h,{key:0,type:"primary"},{default:e(()=>[u(" 已分配 ")]),_:1})):(n(),r(h,{key:1},{default:e(()=>[u(" 未分配 ")]),_:1}))]),_:1})):f("",!0),l(m).includes("memberGroupName")?(n(),r(b,{key:9,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(J,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:e(()=>[(n(!0),v(x,null,R(t.getMemberGroupNameInfoList,g=>(n(),v("div",null,_(g.memberGroupName)+"-"+_(g.memberGroupId),1))),256))]),default:e(()=>[o(B,{type:"primary"},{default:e(()=>[u(_(t.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)):(n(),r(B,{key:1},{default:e(()=>[u("-")]),_:1}))]),_:1})):f("",!0),l(m).includes("createTime")?(n(),r(b,{key:10,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"})):f("",!0),o(b,{align:"center",label:"操作",width:"200"},{default:e(({row:t})=>[o(he,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?f("",!0):(n(),r(M,{key:0,type:"primary",plain:"",size:"small",onClick:g=>ne(t)},{default:e(()=>[u(" 分配 ")]),_:2},1032,["onClick"])),o(M,{type:"primary",plain:"",size:"small",onClick:g=>ae(t)},{default:e(()=>[u(" 测查 ")]),_:2},1032,["onClick"]),o(M,{size:"small",plain:"",type:"primary",onClick:g=>le(t)},{default:e(()=>[u(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Le,l(U)]]),o(Ce,{"current-page":l(y).page,total:l(y).total,"page-size":l(y).size,"page-sizes":l(y).sizes,layout:l(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(Fe,{ref_key:"CheckEditRef",ref:te},null,512),o(Ae,{ref_key:"checkMembershipPriceRef",ref:A},null,512),o(Qe,{ref_key:"addAllocationEditRef",ref:Q,onFetchData:P},null,512)],2)}}}),ft=$e(Xe,[["__scopeId","data-v-b95ece3f"]]);export{ft as default};
