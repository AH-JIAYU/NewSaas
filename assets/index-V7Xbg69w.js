
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,r as _,n as K,a as n,o as i,e as m,w as e,v as r,f as a,g as o,b as T,A as u,t as O,F as Q,p as W,aI as X,aJ as Y,M as Z}from"./index-C_u2Pe4I.js";import{u as $}from"./department-xsi1KNoV.js";import{u as ee}from"./tenant_role-DA9xrVL4.js";import{u as ae}from"./configuration_manager-DwuyxZIu.js";import{u as te}from"./position_manage-BteFajrl.js";import{a as le}from"./department-bZiaV7wU.js";import"./configuration_role-C1o0x33O.js";import"./position_manage-0LKPwPuN.js";const V=x=>(X("data-v-bf67296d"),x=x(),Y(),x),oe=V(()=>r("div",{class:"card-header"},[r("div",{class:"leftTitle"},"基本信息")],-1)),se={key:1,class:"avatar"},ne={style:{"font-size":"14px"}},ue=V(()=>r("div",{class:"card-header"},[r("div",{class:"leftTitle"},"角色信息")],-1)),de=V(()=>r("div",{class:"card-header"},[r("div",{class:"leftTitle"}," 部门信息 ")],-1)),ce={class:"flex-c"},re=H({__name:"index",emits:["fetch-data"],setup(x,{expose:L,emit:z}){const D=ae(),M=_([]),C=te(),B=_(),P=ee(),k=_();$();const E={children:"children",label:"name"},h=_(),b=_({}),R=z,y=_(!1),w=_([]),l=_();async function U(p){b.value=p;const f={id:p.id},{status:s,data:S}=await W.list(f);l.value=S.data[0],b.value.roleList=[l.value.role],w.value&&w.value.push(l.value.organizationalStructureId),y.value=!0}function I(){R("fetch-data"),y.value=!1}return K(async()=>{B.value=await C.getPositionManage(),M.value=await D.getStaff(),k.value=await P.getRole();const p=await le.list({name:""});p.data&&(h.value=p.data,h.value.forEach(f=>{f.disabled=!0}))}),L({showEdit:U}),(p,f)=>{const s=n("el-col"),S=n("el-avatar"),g=n("el-row"),d=n("el-text"),c=n("el-form-item"),N=n("el-card"),j=n("el-checkbox"),F=n("el-checkbox-group"),A=n("el-tree"),J=n("el-form"),q=n("el-button"),G=n("el-drawer");return i(),m(G,{modelValue:y.value,"onUpdate:modelValue":f[1]||(f[1]=t=>y.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:I},{footer:e(()=>[r("div",ce,[a(q,{type:"primary",onClick:I},{default:e(()=>[o(" 关闭 ")]),_:1})])]),default:e(()=>[a(J,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(N,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[a(g,{gutter:20},{default:e(()=>[a(s,{span:1}),a(s,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(i(),m(S,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(i(),T("div",se,u(l.value.name),1))]),_:1}),a(s,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[r("p",null,u(l.value.userName),1),r("p",ne,[o("账号:"),r("span",null,u(l.value.userName),1)])]),_:1})]),_:1}),a(g,{gutter:24},{default:e(()=>[a(s,{span:6},{default:e(()=>[a(c,{label:"员工ID:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"姓名:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"手机号:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.phone?l.value.phone:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"邮箱:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"部门:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.organizationalStructureName?l.value.organizationalStructureName:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"职位:"},{default:e(()=>[a(d,null,{default:e(()=>[o(u(l.value.positionName?l.value.positionName:"-"),1)]),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"帐号状态:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(c,{label:"创建时间:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(c,{label:"分配角色:"},{default:e(()=>{var t;return[(t=k.value)!=null&&t.length?(i(),m(F,{key:0,style:{"margin-left":"1.5rem"},modelValue:b.value.roleList,"onUpdate:modelValue":f[0]||(f[0]=v=>b.value.roleList=v)},{default:e(()=>[(i(!0),T(Q,null,O(k.value,v=>(i(),m(j,{key:v.id,label:v.roleName,value:v.roleName,disabled:""},{default:e(()=>[o(u(v.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(i(),m(d,{key:1},{default:e(()=>[o("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(N,{class:"box-card"},{header:e(()=>[de]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(c,{label:"分配部门:"},{default:e(()=>[h.value.length>0?(i(),m(A,{key:0,style:{"max-width":"600px"},ref:"treeRef",data:h.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":w.value,"default-expand-all":"",props:E},null,8,["data","default-checked-keys"])):(i(),m(d,{key:1},{default:e(()=>[o("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),be=Z(re,[["__scopeId","data-v-bf67296d"]]);export{be as default};
