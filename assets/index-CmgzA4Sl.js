
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as E}from"./apiLoading-BBFWqIRm.js";import{u as T}from"./survey_vipLevel-DGLzhkpt.js";import{a as _}from"./survey_vip-rkPPzXfD.js";import{d as D,r as m,M as b,a2 as s,a as c,c as L,w as l,f as i,g as y,h as o,i as F,O as M,N as O,k as U,ai as A,y as j}from"./index-BYyo152T.js";const z=D({__name:"index",emits:["queryData"],setup(G,{expose:g,emit:V}){const I=T(),k=V,n=m(!1),u=m(""),e=m(),d=m(),w=b({memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}]}),f=b({vipLevelList:[]}),x=async()=>{f.vipLevelList=await I.getLevelNameList()};async function C(r){if(!r)u.value="新增",e.value={};else{await x(),u.value="编辑";const{data:t}=await _.detail({memberId:r.memberId});e.value=t,e.value.countryType=e.value.subordinateCountryId==="343"?1:2}n.value=!0}function v(){d.value.resetFields(),n.value=!1}function N(){d.value.validate(async r=>{if(r){const{status:t}=await E(_.edit(e.value));t===1&&A.success({message:"修改成功",center:!0}),k("queryData"),v()}})}return g({showEdit:C}),(r,t)=>{const R=s("el-option"),S=s("el-select"),h=s("el-form-item"),q=s("el-form"),p=s("el-button"),B=s("el-dialog");return c(),L(B,{modelValue:o(n),"onUpdate:modelValue":t[1]||(t[1]=a=>U(n)?n.value=a:null),title:o(u),width:"600"},{footer:l(()=>[i(p,{onClick:v},{default:l(()=>[y(" 取消 ")]),_:1}),i(p,{type:"primary",onClick:N},{default:l(()=>[y(" 确定 ")]),_:1})]),default:l(()=>[i(q,{ref_key:"formRef",ref:d,model:o(e),rules:o(w),"label-width":"7rem",inline:!1},{default:l(()=>[i(h,{label:"会员等级",prop:"memberLevelId"},{default:l(()=>[i(S,{clearable:"",filterable:"",modelValue:o(e).memberLevelId,"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).memberLevelId=a)},{default:l(()=>[(c(!0),F(O,null,M(o(f).vipLevelList,a=>(c(),L(R,{key:a.memberLevelId,value:a.memberLevelId,label:a.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),Q=j(z,[["__scopeId","data-v-7230a38c"]]);export{Q as default};
