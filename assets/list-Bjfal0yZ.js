
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Me,am as Re,aK as Pe,r as d,a5 as $e,c as te,k as Be,a as p,p as De,o as a,b as C,f as l,w as e,i as o,az as K,q as j,F as S,t as D,e as i,g as s,H as f,I as N,j as b,s as le,S as Te,bb as Ge,E as He,N as Oe,aM as Fe,aN as Ae,ba as Ke,ap as Ye,aG as qe,aH as Qe,aq as T,R as Je}from"./index-DAuqqNLj.js";import{_ as We}from"./index.vue_vue_type_style_index_0_lang-Cw1mQ62F.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-CLokm7Yj.js";import{_ as Ze}from"./index.vue_vue_type_script_setup_true_lang-CMIQJmnh.js";import et from"./index-D98pAlOO.js";import tt from"./index-Dnw9F0AX.js";import lt from"./index-CZMC3kTs.js";import{a as ot}from"./survey_myProjeck-WzjZoCGe.js";import{u as nt}from"./user_customer-BpCDYG4t.js";import{u as at}from"./index-Bo4PhHKm.js";import"./index-VZKdWRO7.js";import"./file-5Ip4Cay_.js";import"./download-C8PHVIy1.js";import"./apiLoading-DdJOpzEV.js";import"./projectManagement-CmJsUmYY.js";import"./survey_vipGroup-BN1V-YH7.js";import"./survey_vipGroup-Be2PW_Et.js";import"./user_customer-CZU3pLnC.js";import"./clipboard-BeGH2OQu.js";const rt=V=>(qe("data-v-96e069d0"),V=V(),Qe(),V),it=rt(()=>le("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),st=Me({name:"myProjeck",__name:"list",setup(V){const{format:oe}=Ge(),{toClipboard:ne}=at(),Y=Re(),ae=nt(),{pagination:g,getParams:ut,onSizeChange:re,onCurrentChange:ie,onSortChange:ct}=Pe(),G=d([]),q=d([]),Q=d(),se=d(""),J=d(),E=d(!0),ue=d(),W=d(),x=d(!0),m=d([]),U=d(!1),z=d("default"),M=d(!1),R=d([{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"客户简称/标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配状态",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),c=$e({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),X=d([]),Z=d();function ce(u){J.value.showEdit(u)}function pe(u){W.value.showEdit(u)}function me(u){Z.value.showEdit(u)}function de(u){re(u).then(()=>w())}function k(u=1){ie(u).then(()=>w())}function fe(){Object.assign(c,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),w()}const _e=te(()=>X.value.slice((g.value.page-1)*g.value.size,g.value.page*g.value.size));async function w(){try{E.value=!0;const u={...c};c.time&&c.time.length&&(u.beginTime=c.time[0]||"",u.endTime=c.time[1]||"");const n=await ot.list(u);Q.value=n.data.currencyType,X.value=n.data.getMemberProjectListInfoList,g.value.total=n.data.getMemberProjectListInfoList.length,E.value=!1}catch{}finally{E.value=!1}}const be=u=>{ne(u),He({type:"success",message:"复制成功"})},P=te(()=>u=>G.value.filter(v=>u.includes(v.id)).map(v=>v.chineseName));return Be(async()=>{R.value.forEach(u=>{u.checked&&m.value.push(u.prop)}),G.value=await Y.getCountry(),q.value=await ae.getCustomerList(),w()}),(u,n)=>{const v=p("el-input"),I=p("el-form-item"),ye=p("ElOption"),H=p("el-select"),O=p("el-option"),ge=p("el-date-picker"),ee=Oe,F=p("ElButton"),ke=p("ElFormItem"),he=p("el-form"),ve=Xe,Ie=p("ElDivider"),Ce=We,$=p("el-button"),we=Fe,Ne=Ae,Le=p("el-row"),_=p("el-table-column"),h=p("el-text"),A=p("el-tooltip"),je=Ke,L=p("el-link"),B=p("el-tag"),Se=p("ElSpace"),Ve=p("el-empty"),Ee=p("el-table"),xe=p("ElPagination"),Ue=Ye,ze=De("loading");return a(),C("div",{class:Te({"absolute-container":o(U)})},[l(Ue,null,{default:e(()=>[l(ve,{"show-toggle":!1},{default:e(({fold:t,toggle:y})=>[l(he,{model:o(c).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[l(I,{label:""},{default:e(()=>[l(v,{modelValue:o(c).projectId,"onUpdate:modelValue":n[0]||(n[0]=r=>o(c).projectId=r),clearable:"",placeholder:"项目ID",onKeydown:n[1]||(n[1]=K(r=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),l(I,{label:""},{default:e(()=>[l(v,{clearable:"",modelValue:o(c).projectName,"onUpdate:modelValue":n[2]||(n[2]=r=>o(c).projectName=r),placeholder:"项目名称",onKeydown:n[3]||(n[3]=K(r=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),l(I,{label:""},{default:e(()=>[l(v,{modelValue:o(c).projectIdentification,"onUpdate:modelValue":n[4]||(n[4]=r=>o(c).projectIdentification=r),clearable:"",placeholder:"项目标识",onKeydown:n[5]||(n[5]=K(r=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),j(l(I,{label:""},{default:e(()=>[l(H,{placeholder:"国家地区",modelValue:o(c).countryId,"onUpdate:modelValue":n[6]||(n[6]=r=>o(c).countryId=r),clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:n[7]||(n[7]=r=>k())},{default:e(()=>[(a(!0),C(S,null,D(o(G),r=>(a(),i(ye,{label:r.chineseName,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),j(l(I,{label:""},{default:e(()=>[l(H,{placeholder:"客户简称",clearable:"",filterable:"",modelValue:o(c).clientId,"onUpdate:modelValue":n[8]||(n[8]=r=>o(c).clientId=r),onChange:n[9]||(n[9]=r=>k())},{default:e(()=>[(a(!0),C(S,null,D(o(q),r=>(a(),i(O,{key:r.tenantCustomerId,value:r.tenantCustomerId,label:r.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),j(l(I,{label:""},{default:e(()=>[l(H,{placeholder:"B2B/B2C",clearable:"",filterable:"",modelValue:o(c).b2bOrB2cStatus,"onUpdate:modelValue":n[10]||(n[10]=r=>o(c).b2bOrB2cStatus=r),onChange:n[11]||(n[11]=r=>k())},{default:e(()=>[l(O,{label:"B2B",value:"1"}),l(O,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),j(l(I,null,{default:e(()=>[l(ge,{modelValue:o(c).time,"onUpdate:modelValue":n[12]||(n[12]=r=>o(c).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"192px"},"clear-icon":"true",onChange:n[13]||(n[13]=r=>k())},null,8,["modelValue"])]),_:2},1536),[[T,!t]]),l(ke,null,{default:e(()=>[l(F,{type:"primary",onClick:n[14]||(n[14]=r=>w())},{icon:e(()=>[l(ee,{name:"i-ep:search"})]),default:e(()=>[s(" 筛选 ")]),_:1}),l(F,{onClick:fe},{icon:e(()=>[it]),default:e(()=>[s(" 重置 ")]),_:1}),l(F,{link:"",onClick:y},{icon:e(()=>[l(ee,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[s(" "+f(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(Ie,{"border-style":"dashed"}),l(Le,{gutter:24},{default:e(()=>[l(Ce),l(Ne,null,{default:e(()=>[l($,{size:"default",onClick:n[15]||(n[15]=()=>{})},{default:e(()=>[s(" 导出 ")]),_:1}),l(we,{border:o(x),"onUpdate:border":n[16]||(n[16]=t=>N(x)?x.value=t:null),tableAutoHeight:o(U),"onUpdate:tableAutoHeight":n[17]||(n[17]=t=>N(U)?U.value=t:null),checkList:o(m),"onUpdate:checkList":n[18]||(n[18]=t=>N(m)?m.value=t:null),columns:o(R),"onUpdate:columns":n[19]||(n[19]=t=>N(R)?R.value=t:null),"line-height":o(z),"onUpdate:lineHeight":n[20]||(n[20]=t=>N(z)?z.value=t:null),stripe:o(M),"onUpdate:stripe":n[21]||(n[21]=t=>N(M)?M.value=t:null),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),j((a(),i(Ee,{ref_key:"tableSortRef",ref:se,style:{"margin-top":"10px"},"row-key":"id",data:o(_e),border:o(x),size:o(z),stripe:o(M)},{empty:e(()=>[l(Ve,{description:"暂无数据"})]),default:e(()=>[l(_,{align:"center",type:"selection"}),o(m).includes("projectId")?(a(),i(_,{key:0,"show-overflow-tooltip":"",width:"180",fixed:"left",prop:"projectId",align:"center",label:"项目ID"})):b("",!0),o(m).includes("projectName")?(a(),i(_,{key:1,"show-overflow-tooltip":"",width:"180",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),o(m).includes("projectIdentificationOrClientName")?(a(),i(_,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"center",label:"客户简称/标识"},{default:e(({row:t})=>[l(h,{class:"mx-1"},{default:e(()=>[s(f(t.projectIdentification),1)]),_:2},1024),le("p",null,f(t.clientName),1)]),_:1})):b("",!0),o(m).includes("withoutUrl")?(a(),i(_,{key:3,prop:"withoutUrl",align:"center",label:"URL"},{default:e(({row:t})=>[l(A,{class:"box-item",effect:"dark",content:t.withoutUrl,placement:"top"},{default:e(()=>[l($,{link:"",type:"primary",onClick:y=>be(t.withoutUrl)},{default:e(()=>[s("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):b("",!0),o(m).includes("participation")?(a(),i(_,{key:4,"show-overflow-tooltip":"",width:"170",align:"center",label:"参与/完成/配额/限量"},{default:e(({row:t})=>[l(h,{class:"mx-1"},{default:e(()=>[s(f(t.participation||0),1)]),_:2},1024),s(" / "),l(h,{class:"mx-1",type:"success"},{default:e(()=>[s(f(t.complete||0),1)]),_:2},1024),s("/ "),l(h,{class:"mx-1",type:"warning"},{default:e(()=>[s(f(t.num||0),1)]),_:2},1024),s("/ "+f(t.limitedQuantity||"-"),1)]),_:1})):b("",!0),o(m).includes("doMoneyPrice")?(a(),i(_,{key:5,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[o(Q)===3?(a(),i(h,{key:0,class:"mx-1"},{default:e(()=>[s("暂无数据")]),_:1})):(a(),i(h,{key:1,class:"mx-1"},{default:e(()=>[l(je),s(f(t.doMoneyPrice||0),1)]),_:2},1024))]),_:1})):b("",!0),o(m).includes("memberPrice")?(a(),i(_,{key:6,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),i(L,{key:0,size:"small",plain:"",type:"primary",onClick:y=>pe(t)},{default:e(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(a(),i(h,{key:1},{default:e(()=>[s(" - ")]),_:1}))]),_:1})):b("",!0),o(m).includes("ir")?(a(),i(_,{key:7,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[s(f(t.ir?t.ir:"-")+" / "+f(t.nir?t.nir:"-"),1)]),_:1})):b("",!0),o(m).includes("countryNameList")?(a(),i(_,{key:8,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:e(({row:t})=>[t.countryNameList?(a(),C(S,{key:0},[t.countryNameList.length===o(Y).country.length?(a(),i(L,{key:0,type:"primary"},{default:e(()=>[l(B,{type:"warning"},{default:e(()=>[s("全球")]),_:1})]),_:1})):o(P)(t.countryNameList).length>4?(a(),i(A,{key:1,class:"box-item",effect:"dark",content:o(P)(t.countryNameList).join(","),placement:"top"},{default:e(()=>[l(L,{type:"primary"},{default:e(()=>[l(B,{type:"success"},{default:e(()=>[s(f(o(P)(t.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(a(!0),C(S,{key:2},D(o(P)(t.countryNameList),y=>(a(),i(B,{key:y,type:"primary"},{default:e(()=>[s(f(y),1)]),_:2},1024))),128))],64)):b("",!0)]),_:1})):b("",!0),o(m).includes("memberStatus")?(a(),i(_,{key:9,"show-overflow-tooltip":"",align:"center",label:"分配状态"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),i(h,{key:0,type:"primary"},{default:e(()=>[s(" 已分配 ")]),_:1})):(a(),i(h,{key:1},{default:e(()=>[s(" 未分配 ")]),_:1}))]),_:1})):b("",!0),o(m).includes("memberGroupName")?(a(),i(_,{key:10,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),i(A,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:e(()=>[(a(!0),C(S,null,D(t.getMemberGroupNameInfoList,y=>(a(),C("div",null,f(y.memberGroupName)+"-"+f(y.memberGroupId),1))),256))]),default:e(()=>[l(L,{type:"primary"},{default:e(()=>[s(f(t.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)):(a(),i(L,{key:1},{default:e(()=>[s("-")]),_:1}))]),_:1})):b("",!0),o(m).includes("createTime")?(a(),i(_,{key:11,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{default:e(({row:t})=>[l(B,{effect:"plain",type:"info"},{default:e(()=>[s(f(o(oe)(t.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),l(_,{align:"center",fixed:"right",label:"操作",width:"200"},{default:e(({row:t})=>[l(Se,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?b("",!0):(a(),i($,{key:0,type:"primary",plain:"",size:"small",onClick:y=>me(t)},{default:e(()=>[s(" 分配 ")]),_:2},1032,["onClick"])),l($,{size:"small",plain:"",type:"primary",onClick:y=>ce(t)},{default:e(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ze,o(E)]]),l(xe,{"current-page":o(g).page,total:o(g).total,"page-size":o(g).size,"page-sizes":o(g).sizes,layout:o(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:de,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Ze,{ref_key:"CheckEditRef",ref:ue},null,512),l(et,{ref_key:"detailRef",ref:J},null,512),l(tt,{ref_key:"checkMembershipPriceRef",ref:W},null,512),l(lt,{ref_key:"addAllocationEditRef",ref:Z,onFetchData:w},null,512)],2)}}}),Et=Je(st,[["__scopeId","data-v-96e069d0"]]);export{Et as default};
