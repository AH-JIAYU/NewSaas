
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as b}from"./apiLoading-Bw3JLAM0.js";import{G as _}from"./otherFunctions_screenLibrary-DpKF32L5.js";import{d as q,m as E,l as G,r,u as A,n as J,a as n,o as m,b as I,f as a,w as s,g as w,i as l,F as P,t as T,e as C,j as z,E as B}from"./index-Cjx6Hppb.js";import{u as H}from"./stagedData-Ch8zl-x-.js";const Y=q({__name:"index",props:E(["id","countryId","row"],{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:E(["success"],["update:modelValue"]),setup(v,{emit:S}){const D=G(),N=H(),d=v,y=r([]),k=S,c=A(v,"modelValue"),i=r("新增"),F=r(),e=r({countryId:d.countryId,status:2,isDefault:2}),M=r({categoryName:[{required:!0,message:"请输入名称",trigger:"blur"}],countryId:[{required:!0,message:"请选择区域",trigger:"blur"}]});async function U(){if(d.id){const{data:g,status:t}=await b(_.edit(e.value));t===1&&B.success({message:"编辑成功",center:!0})}else{const{data:g,status:t}=await b(_.create(e.value));t===1&&B.success({message:"新增成功",center:!0})}p(),k("success"),N.projectManagementList=null}function p(){c.value=!1,e.value={}}return J(async()=>{y.value=await D.getCountry(),i.value="新增",d.id&&(i.value="编辑",e.value=JSON.parse(d.row))}),(g,t)=>{const x=n("ElOption"),O=n("el-select"),u=n("ElFormItem"),L=n("ElInput"),f=n("ElSwitch"),j=n("ElForm"),V=n("ElButton"),R=n("ElDialog");return m(),I("div",null,[a(R,{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=o=>c.value=o),title:l(i),width:"50%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClose:p},{footer:s(()=>[a(V,{onClick:p},{default:s(()=>[w(" 取消 ")]),_:1}),a(V,{type:"primary",onClick:U},{default:s(()=>[w(" 确定 ")]),_:1})]),default:s(()=>[a(j,{ref_key:"formRef",ref:F,model:l(e),rules:l(M),"label-width":"5.5rem"},{default:s(()=>[a(u,{label:"区域",prop:"countryId"},{default:s(()=>[a(O,{filterable:"",modelValue:l(e).countryId,"onUpdate:modelValue":t[0]||(t[0]=o=>l(e).countryId=o),placeholder:"Select"},{default:s(()=>[(m(!0),I(P,null,T(l(y),o=>(m(),C(x,{label:o.chineseName,value:o.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"问卷标题",prop:"categoryName"},{default:s(()=>[a(L,{modelValue:l(e).categoryName,"onUpdate:modelValue":t[1]||(t[1]=o=>l(e).categoryName=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),a(u,{label:"状态"},{default:s(()=>[a(f,{modelValue:l(e).status,"onUpdate:modelValue":t[2]||(t[2]=o=>l(e).status=o),"active-value":1,"inactive-value":2,placeholder:"请输入状态"},null,8,["modelValue"])]),_:1}),l(e).projectProblemCategoryId?z("",!0):(m(),C(u,{key:0,label:"默认"},{default:s(()=>[a(f,{modelValue:l(e).isDefault,"onUpdate:modelValue":t[3]||(t[3]=o=>l(e).isDefault=o),"active-value":1,"inactive-value":2,placeholder:"请输入默认"},null,8,["modelValue"])]),_:1})),a(u,{label:"B2C"},{default:s(()=>[a(f,{modelValue:l(e).babOrB2c,"onUpdate:modelValue":t[4]||(t[4]=o=>l(e).babOrB2c=o),"active-value":2,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Y as _};
