
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import y from"./index-D28x4Aw8.js";import{U as N}from"./user_supplier-C97q4j4B.js";import{d as R,r as u,Z as S,X as U,a as v,o as n,b as m,F as T,f as b,w as d,g as h,t as z,e as f,v as g,A as E,O as F,j as I,ap as x}from"./index-BDq3fI5e.js";const M={style:{float:"right",position:"sticky",top:"19px",width:"85%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},X=R({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(k,{expose:A,emit:V}){const C=N(),s=k,j=V,e=u(s.leftTabsData),w=u(s.validateTopTabs);e.value.forEach((o,t)=>{const i=u(null);S(`formRef${t}`,i)});const _=u(0),a=u(0);function D(){const o=x(e.value[0]);e.value[a.value]=o}function B(){x(e.value[0]),a.value=++_.value,e.value.push({...C.initialTopTabsData})}function L(o){e.value.splice(o,1),w.value.splice(o,1),a.value>=e.value.length&&(a.value=Math.max(0,e.value.length-1),_.value=Math.max(0,e.value.length-1))}return U(()=>a.value,(o,t)=>{s.validateAll.reduce((c,p,l)=>(p==="rejected"&&c.push(l),c),[]).includes(t)&&j("validate")}),A({activeLeftTab:a}),(o,t)=>{const i=v("el-button"),c=v("el-tab-pane"),p=v("el-tabs");return n(),m("div",null,[e.value[0].id?(n(),f(y,{key:1,"left-tab":e.value[0]},null,8,["left-tab"])):(n(),m(T,{key:0},[b(i,{class:"button",disabled:e.value.length>9||s.title!=="新增",onClick:t[0]||(t[0]=l=>B())},{default:d(()=>[h(" 新增供应商 ")]),_:1},8,["disabled"]),b(p,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l),"tab-position":"left",onTabRemove:L},{default:d(()=>[(n(!0),m(T,null,z(e.value,(l,r)=>(n(),f(c,{key:r,closable:e.value.length!==1,label:l.supplierAccord,name:r},{label:d(()=>[g("div",{class:F(s.validateAll[r]&&s.validateAll[r]==="rejected"?"validateRejected":"")},E(l.supplierAccord||"供应商名称"),3)]),default:d(()=>[g("div",M,[a.value>0?(n(),f(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:D},{default:d(()=>[h(" 同步主项目数据 ")]),_:1})):I("",!0)]),b(y,{"left-tab":l,"tab-index":r},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","label","name"]))),128))]),_:1},8,["modelValue"])],64))])}}});export{X as _};
