
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{aB as lm,aC as cm,d as Yb,Z as Zb,aD as Xb,r as ob,a as ib,i as Ag,o as ab,e as sb,w as sm,f as Jb,g as lb,j as cb,y as Qb,$ as tw,E as ew,L as rw}from"./index-Bg-926fH.js";import{a as nw}from"./configuration_homepageSetting-BlSBvxEG.js";var ow={410:(wt,pe,Te)=>{var we,ke,Jt;/*!
* Backbone.Undo.js v0.2
*
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(Kt){ke=[Te(50),Te(316)],we=Kt,Jt=typeof we=="function"?we.apply(pe,ke):we,Jt!==void 0&&(wt.exports=Jt)})(function(Kt,ft){var Ot=Array.prototype.slice;function q(U,it,X){return X.length<=4?U.call(it,X[0],X[1],X[2],X[3]):U.apply(it,X)}function mt(U,it){return Ot.call(U,it)}function K(U,it){return U==null?!1:(Kt.isArray(it)||(it=mt(arguments,1)),Kt.all(it,function(X){return X in U}))}var st=function(){var U=!1,it=-1;function X(){it++,U=!0,Kt.defer(function(){U=!1})}return function(){return U||X(),it}}();function k(){this.registeredObjects=[],this.cidIndexes=[]}k.prototype={isRegistered:function(U){return U&&U.cid?this.registeredObjects[U.cid]:Kt.contains(this.registeredObjects,U)},register:function(U){return this.isRegistered(U)?!1:(U&&U.cid?(this.registeredObjects[U.cid]=U,this.cidIndexes.push(U.cid)):this.registeredObjects.push(U),!0)},unregister:function(U){if(this.isRegistered(U)){if(U&&U.cid)delete this.registeredObjects[U.cid],this.cidIndexes.splice(Kt.indexOf(this.cidIndexes,U.cid),1);else{var it=Kt.indexOf(this.registeredObjects,U);this.registeredObjects.splice(it,1)}return!0}return!1},get:function(){return Kt.map(this.cidIndexes,function(U){return this.registeredObjects[U]},this).concat(this.registeredObjects)}};function B(U,it,X,tt){for(var xt=0,Q=it.length,_t;xt<Q;xt++)if(_t=it[xt],!!_t){if(U==="on"){if(!tt.objectRegistry.register(_t))continue}else if(!tt.objectRegistry.unregister(_t))continue;Kt.isFunction(_t[U])&&_t[U]("all",X,tt)}}function ct(U,it){var X=it.type,tt=it.undoTypes,xt=!tt[X]||tt[X][U];Kt.isFunction(xt)&&xt(it.object,it.before,it.after,it.options)}function vt(U,it,X,tt,xt){if(!(X.isCurrentlyUndoRedoing||U==="undo"&&X.pointer===-1||U==="redo"&&X.pointer===X.length-1)){X.isCurrentlyUndoRedoing=!0;var Q,_t,W=U==="undo";for(xt?_t=W&&X.pointer===X.length-1||!W&&X.pointer===-1?Kt.clone(X.models):Ot.apply(X.models,W?[0,X.pointer]:[X.pointer,X.length-1]):(Q=X.at(W?X.pointer:X.pointer+1),_t=tt?X.where({magicFusionIndex:Q.get("magicFusionIndex")}):[Q]),X.pointer+=(W?-1:1)*_t.length;Q=W?_t.pop():_t.shift();)Q[U]();X.isCurrentlyUndoRedoing=!1,it.trigger(U,it)}}function dt(U,it){var X=U.condition,tt=typeof X;return tt==="function"?!!q(X,U,it):tt==="boolean"?X:!0}function H(U,it,X,tt){if(U.track&&!U.isCurrentlyUndoRedoing&&it in tt&&dt(tt[it],X)){var xt=q(tt[it].on,tt[it],X),Q;if(K(xt,"object","before","after")){if(xt.type=it,xt.magicFusionIndex=st(),xt.undoTypes=tt,U.pointer<U.length-1)for(var Q=U.length-U.pointer-1;Q--;)U.pop();U.pointer=U.length,U.add(xt),U.length>U.maximumStackLength&&(U.shift(),U.pointer--)}}}var R={add:{undo:function(U,it,X,tt){U.remove(X,tt)},redo:function(U,it,X,tt){tt.index&&(tt.at=tt.index),U.add(X,tt)},on:function(U,it,X){return{object:it,before:void 0,after:U,options:Kt.clone(X)}}},remove:{undo:function(U,it,X,tt){"index"in tt&&(tt.at=tt.index),U.add(it,tt)},redo:function(U,it,X,tt){U.remove(it,tt)},on:function(U,it,X){return{object:it,before:U,after:void 0,options:Kt.clone(X)}}},change:{undo:function(U,it,X,tt){Kt.isEmpty(it)?Kt.each(Kt.keys(X),U.unset,U):(U.set(it),tt&&tt.unsetData&&tt.unsetData.before&&tt.unsetData.before.length&&Kt.each(tt.unsetData.before,U.unset,U))},redo:function(U,it,X,tt){Kt.isEmpty(X)?Kt.each(Kt.keys(it),U.unset,U):(U.set(X),tt&&tt.unsetData&&tt.unsetData.after&&tt.unsetData.after.length&&Kt.each(tt.unsetData.after,U.unset,U))},on:function(U,it){var X=U.changedAttributes(),tt=Kt.keys(X),xt=Kt.pick(U.previousAttributes(),tt),Q=Kt.keys(xt),_t=(it||(it={})).unsetData={after:[],before:[]};return tt.length!=Q.length&&(tt.length>Q.length?Kt.each(tt,function(W){W in xt||_t.before.push(W)},this):Kt.each(Q,function(W){W in X||_t.after.push(W)})),{object:U,before:xt,after:X,options:Kt.clone(it)}}},reset:{undo:function(U,it,X){U.reset(it)},redo:function(U,it,X){U.reset(X)},on:function(U,it){return{object:U,before:it.previousModels,after:Kt.clone(U.models)}}}};function I(){}I.prototype=R;function N(U,it,X,tt){if(typeof it=="object")return Kt.each(it,function(xt,Q){U===2?N(U,xt,X,tt):N(U,Q,xt,X)});switch(U){case 0:K(X,"undo","redo","on")&&Kt.all(Kt.pick(X,"undo","redo","on"),Kt.isFunction)&&(tt[it]=X);break;case 1:tt[it]&&Kt.isObject(X)&&(tt[it]=Kt.extend({},tt[it],X));break;case 2:delete tt[it];break}return this}var $=ft.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(U){ct("undo",this.attributes)},redo:function(U){ct("redo",this.attributes)}}),F=ft.Collection.extend({model:$,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(U){this.maximumStackLength=U}}),V=ft.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(U){this.stack=new F,this.objectRegistry=new k,this.undoTypes=new I,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(it,X){this.stack.setMaxLength(X)},this),U&&U.track&&this.startTracking(),U&&U.register&&(Kt.isArray(U.register)||Kt.isArguments(U.register)?q(this.register,this,U.register):this.register(U.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(U){H(this.stack,U,mt(arguments,1),this.undoTypes)},register:function(){B("on",arguments,this._addToStack,this)},unregister:function(){B("off",arguments,this._addToStack,this)},unregisterAll:function(){q(this.unregister,this,this.objectRegistry.get())},undo:function(U){vt("undo",this,this.stack,U)},undoAll:function(){vt("undo",this,this.stack,!1,!0)},redo:function(U){vt("redo",this,this.stack,U)},redoAll:function(){vt("redo",this,this.stack,!1,!0)},isAvailable:function(U){var it=this.stack,X=it.length;switch(U){case"undo":return X>0&&it.pointer>-1;case"redo":return X>0&&it.pointer<X-1;default:return!1}},merge:function(U){for(var it=Kt.isArray(U)?U:mt(arguments),X;X=it.pop();)X instanceof V&&X.stack instanceof F&&(X.stack=this.stack)},addUndoType:function(U,it){N(0,U,it,this.undoTypes)},changeUndoType:function(U,it){N(1,U,it,this.undoTypes)},removeUndoType:function(U){N(2,U,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return Kt.extend(V,{defaults:function(U){Kt.extend(V.prototype.defaults,U)},addUndoType:function(U,it){N(0,U,it,R)},changeUndoType:function(U,it){N(1,U,it,R)},removeUndoType:function(U){N(2,U,void 0,R)}}),ft.UndoManager=V})},316:(wt,pe,Te)=>{var we,ke;(function(Jt){var Kt=typeof self=="object"&&self.self===self&&self||typeof Te.g=="object"&&Te.g.global===Te.g&&Te.g;we=[Te(50),Te(895),pe],ke=(function(ft,Ot,q){Kt.Backbone=Jt(Kt,q,ft,Ot)}).apply(pe,we),ke!==void 0&&(wt.exports=ke)})(function(Jt,Kt,ft,Ot){var q=Jt.Backbone,mt=Array.prototype.slice;Kt.VERSION="1.4.1",Kt.$=Ot,Kt.noConflict=function(){return Jt.Backbone=q,this},Kt.emulateHTTP=!1,Kt.emulateJSON=!1;var K=Kt.Events={},st=/\s+/,k,B=function(at,kt,Gt,ye,Ae){var pt=0,le;if(Gt&&typeof Gt=="object")for(ye!==void 0&&("context"in Ae)&&Ae.context===void 0&&(Ae.context=ye),le=ft.keys(Gt);pt<le.length;pt++)kt=B(at,kt,le[pt],Gt[le[pt]],Ae);else if(Gt&&st.test(Gt))for(le=Gt.split(st);pt<le.length;pt++)kt=at(kt,le[pt],ye,Ae);else kt=at(kt,Gt,ye,Ae);return kt};K.on=function(at,kt,Gt){if(this._events=B(ct,this._events||{},at,kt,{context:Gt,ctx:this,listening:k}),k){var ye=this._listeners||(this._listeners={});ye[k.id]=k,k.interop=!1}return this},K.listenTo=function(at,kt,Gt){if(!at)return this;var ye=at._listenId||(at._listenId=ft.uniqueId("l")),Ae=this._listeningTo||(this._listeningTo={}),pt=k=Ae[ye];pt||(this._listenId||(this._listenId=ft.uniqueId("l")),pt=k=Ae[ye]=new N(this,at));var le=vt(at,kt,Gt,this);if(k=void 0,le)throw le;return pt.interop&&pt.on(kt,Gt),this};var ct=function(at,kt,Gt,ye){if(Gt){var Ae=at[kt]||(at[kt]=[]),pt=ye.context,le=ye.ctx,se=ye.listening;se&&se.count++,Ae.push({callback:Gt,context:pt,ctx:pt||le,listening:se})}return at},vt=function(at,kt,Gt,ye){try{at.on(kt,Gt,ye)}catch(Ae){return Ae}};K.off=function(at,kt,Gt){return this._events?(this._events=B(dt,this._events,at,kt,{context:Gt,listeners:this._listeners}),this):this},K.stopListening=function(at,kt,Gt){var ye=this._listeningTo;if(!ye)return this;for(var Ae=at?[at._listenId]:ft.keys(ye),pt=0;pt<Ae.length;pt++){var le=ye[Ae[pt]];if(!le)break;le.obj.off(kt,Gt,this),le.interop&&le.off(kt,Gt)}return ft.isEmpty(ye)&&(this._listeningTo=void 0),this};var dt=function(at,kt,Gt,ye){if(at){var Ae=ye.context,pt=ye.listeners,le=0,se;if(!kt&&!Ae&&!Gt){for(se=ft.keys(pt);le<se.length;le++)pt[se[le]].cleanup();return}for(se=kt?[kt]:ft.keys(at);le<se.length;le++){kt=se[le];var or=at[kt];if(!or)break;for(var mr=[],er=0;er<or.length;er++){var Dr=or[er];if(Gt&&Gt!==Dr.callback&&Gt!==Dr.callback._callback||Ae&&Ae!==Dr.context)mr.push(Dr);else{var rn=Dr.listening;rn&&rn.off(kt,Gt)}}mr.length?at[kt]=mr:delete at[kt]}return at}};K.once=function(at,kt,Gt){var ye=B(H,{},at,kt,this.off.bind(this));return typeof at=="string"&&Gt==null&&(kt=void 0),this.on(ye,kt,Gt)},K.listenToOnce=function(at,kt,Gt){var ye=B(H,{},kt,Gt,this.stopListening.bind(this,at));return this.listenTo(at,ye)};var H=function(at,kt,Gt,ye){if(Gt){var Ae=at[kt]=ft.once(function(){ye(kt,Ae),Gt.apply(this,arguments)});Ae._callback=Gt}return at};K.trigger=function(at){if(!this._events)return this;for(var kt=Math.max(0,arguments.length-1),Gt=Array(kt),ye=0;ye<kt;ye++)Gt[ye]=arguments[ye+1];return B(R,this._events,at,void 0,Gt),this};var R=function(at,kt,Gt,ye){if(at){var Ae=at[kt],pt=at.all;Ae&&pt&&(pt=pt.slice()),Ae&&I(Ae,ye),pt&&I(pt,[kt].concat(ye))}return at},I=function(at,kt){var Gt,ye=-1,Ae=at.length,pt=kt[0],le=kt[1],se=kt[2];switch(kt.length){case 0:for(;++ye<Ae;)(Gt=at[ye]).callback.call(Gt.ctx);return;case 1:for(;++ye<Ae;)(Gt=at[ye]).callback.call(Gt.ctx,pt);return;case 2:for(;++ye<Ae;)(Gt=at[ye]).callback.call(Gt.ctx,pt,le);return;case 3:for(;++ye<Ae;)(Gt=at[ye]).callback.call(Gt.ctx,pt,le,se);return;default:for(;++ye<Ae;)(Gt=at[ye]).callback.apply(Gt.ctx,kt);return}},N=function(at,kt){this.id=at._listenId,this.listener=at,this.obj=kt,this.interop=!0,this.count=0,this._events=void 0};N.prototype.on=K.on,N.prototype.off=function(at,kt){var Gt;this.interop?(this._events=B(dt,this._events,at,kt,{context:void 0,listeners:void 0}),Gt=!this._events):(this.count--,Gt=this.count===0),Gt&&this.cleanup()},N.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},K.bind=K.on,K.unbind=K.off,ft.extend(Kt,K);var $=Kt.Model=function(at,kt){var Gt=at||{};kt||(kt={}),this.preinitialize.apply(this,arguments),this.cid=ft.uniqueId(this.cidPrefix),this.attributes={},kt.collection&&(this.collection=kt.collection),kt.parse&&(Gt=this.parse(Gt,kt)||{});var ye=ft.result(this,"defaults");Gt=ft.defaults(ft.extend({},ye,Gt),ye),this.set(Gt,kt),this.changed={},this.initialize.apply(this,arguments)};ft.extend($.prototype,K,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(at){return ft.clone(this.attributes)},sync:function(){return Kt.sync.apply(this,arguments)},get:function(at){return this.attributes[at]},escape:function(at){return ft.escape(this.get(at))},has:function(at){return this.get(at)!=null},matches:function(at){return!!ft.iteratee(at,this)(this.attributes)},set:function(at,kt,Gt){if(at==null)return this;var ye;if(typeof at=="object"?(ye=at,Gt=kt):(ye={})[at]=kt,Gt||(Gt={}),!this._validate(ye,Gt))return!1;var Ae=Gt.unset,pt=Gt.silent,le=[],se=this._changing;this._changing=!0,se||(this._previousAttributes=ft.clone(this.attributes),this.changed={});var or=this.attributes,mr=this.changed,er=this._previousAttributes;for(var Dr in ye)kt=ye[Dr],ft.isEqual(or[Dr],kt)||le.push(Dr),ft.isEqual(er[Dr],kt)?delete mr[Dr]:mr[Dr]=kt,Ae?delete or[Dr]:or[Dr]=kt;if(this.idAttribute in ye){var rn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,rn,Gt)}if(!pt){le.length&&(this._pending=Gt);for(var yt=0;yt<le.length;yt++)this.trigger("change:"+le[yt],this,or[le[yt]],Gt)}if(se)return this;if(!pt)for(;this._pending;)Gt=this._pending,this._pending=!1,this.trigger("change",this,Gt);return this._pending=!1,this._changing=!1,this},unset:function(at,kt){return this.set(at,void 0,ft.extend({},kt,{unset:!0}))},clear:function(at){var kt={};for(var Gt in this.attributes)kt[Gt]=void 0;return this.set(kt,ft.extend({},at,{unset:!0}))},hasChanged:function(at){return at==null?!ft.isEmpty(this.changed):ft.has(this.changed,at)},changedAttributes:function(at){if(!at)return this.hasChanged()?ft.clone(this.changed):!1;var kt=this._changing?this._previousAttributes:this.attributes,Gt={},ye;for(var Ae in at){var pt=at[Ae];ft.isEqual(kt[Ae],pt)||(Gt[Ae]=pt,ye=!0)}return ye?Gt:!1},previous:function(at){return at==null||!this._previousAttributes?null:this._previousAttributes[at]},previousAttributes:function(){return ft.clone(this._previousAttributes)},fetch:function(at){at=ft.extend({parse:!0},at);var kt=this,Gt=at.success;return at.success=function(ye){var Ae=at.parse?kt.parse(ye,at):ye;if(!kt.set(Ae,at))return!1;Gt&&Gt.call(at.context,kt,ye,at),kt.trigger("sync",kt,ye,at)},Xe(this,at),this.sync("read",this,at)},save:function(at,kt,Gt){var ye;at==null||typeof at=="object"?(ye=at,Gt=kt):(ye={})[at]=kt,Gt=ft.extend({validate:!0,parse:!0},Gt);var Ae=Gt.wait;if(ye&&!Ae){if(!this.set(ye,Gt))return!1}else if(!this._validate(ye,Gt))return!1;var pt=this,le=Gt.success,se=this.attributes;Gt.success=function(er){pt.attributes=se;var Dr=Gt.parse?pt.parse(er,Gt):er;if(Ae&&(Dr=ft.extend({},ye,Dr)),Dr&&!pt.set(Dr,Gt))return!1;le&&le.call(Gt.context,pt,er,Gt),pt.trigger("sync",pt,er,Gt)},Xe(this,Gt),ye&&Ae&&(this.attributes=ft.extend({},se,ye));var or=this.isNew()?"create":Gt.patch?"patch":"update";or==="patch"&&!Gt.attrs&&(Gt.attrs=ye);var mr=this.sync(or,this,Gt);return this.attributes=se,mr},destroy:function(at){at=at?ft.clone(at):{};var kt=this,Gt=at.success,ye=at.wait,Ae=function(){kt.stopListening(),kt.trigger("destroy",kt,kt.collection,at)};at.success=function(le){ye&&Ae(),Gt&&Gt.call(at.context,kt,le,at),kt.isNew()||kt.trigger("sync",kt,le,at)};var pt=!1;return this.isNew()?ft.defer(at.success):(Xe(this,at),pt=this.sync("delete",this,at)),ye||Ae(),pt},url:function(){var at=ft.result(this,"urlRoot")||ft.result(this.collection,"url")||Fr();if(this.isNew())return at;var kt=this.get(this.idAttribute);return at.replace(/[^\/]$/,"$&/")+encodeURIComponent(kt)},parse:function(at,kt){return at},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(at){return this._validate({},ft.extend({},at,{validate:!0}))},_validate:function(at,kt){if(!kt.validate||!this.validate)return!0;at=ft.extend({},this.attributes,at);var Gt=this.validationError=this.validate(at,kt)||null;return Gt?(this.trigger("invalid",this,Gt,ft.extend(kt,{validationError:Gt})),!1):!0}});var F=Kt.Collection=function(at,kt){kt||(kt={}),this.preinitialize.apply(this,arguments),kt.model&&(this.model=kt.model),kt.comparator!==void 0&&(this.comparator=kt.comparator),this._reset(),this.initialize.apply(this,arguments),at&&this.reset(at,ft.extend({silent:!0},kt))},V={add:!0,remove:!0,merge:!0},U={add:!0,remove:!1},it=function(at,kt,Gt){Gt=Math.min(Math.max(Gt,0),at.length);var ye=Array(at.length-Gt),Ae=kt.length,pt;for(pt=0;pt<ye.length;pt++)ye[pt]=at[pt+Gt];for(pt=0;pt<Ae;pt++)at[pt+Gt]=kt[pt];for(pt=0;pt<ye.length;pt++)at[pt+Ae+Gt]=ye[pt]};ft.extend(F.prototype,K,{model:$,preinitialize:function(){},initialize:function(){},toJSON:function(at){return this.map(function(kt){return kt.toJSON(at)})},sync:function(){return Kt.sync.apply(this,arguments)},add:function(at,kt){return this.set(at,ft.extend({merge:!1},kt,U))},remove:function(at,kt){kt=ft.extend({},kt);var Gt=!ft.isArray(at);at=Gt?[at]:at.slice();var ye=this._removeModels(at,kt);return!kt.silent&&ye.length&&(kt.changes={added:[],merged:[],removed:ye},this.trigger("update",this,kt)),Gt?ye[0]:ye},set:function(at,kt){if(at!=null){kt=ft.extend({},V,kt),kt.parse&&!this._isModel(at)&&(at=this.parse(at,kt)||[]);var Gt=!ft.isArray(at);at=Gt?[at]:at.slice();var ye=kt.at;ye!=null&&(ye=+ye),ye>this.length&&(ye=this.length),ye<0&&(ye+=this.length+1);var Ae=[],pt=[],le=[],se=[],or={},mr=kt.add,er=kt.merge,Dr=kt.remove,rn=!1,yt=this.comparator&&ye==null&&kt.sort!==!1,Wt=ft.isString(this.comparator)?this.comparator:null,ne,Ft;for(Ft=0;Ft<at.length;Ft++){ne=at[Ft];var _e=this.get(ne);if(_e){if(er&&ne!==_e){var Zt=this._isModel(ne)?ne.attributes:ne;kt.parse&&(Zt=_e.parse(Zt,kt)),_e.set(Zt,kt),le.push(_e),yt&&!rn&&(rn=_e.hasChanged(Wt))}or[_e.cid]||(or[_e.cid]=!0,Ae.push(_e)),at[Ft]=_e}else mr&&(ne=at[Ft]=this._prepareModel(ne,kt),ne&&(pt.push(ne),this._addReference(ne,kt),or[ne.cid]=!0,Ae.push(ne)))}if(Dr){for(Ft=0;Ft<this.length;Ft++)ne=this.models[Ft],or[ne.cid]||se.push(ne);se.length&&this._removeModels(se,kt)}var gr=!1,fr=!yt&&mr&&Dr;if(Ae.length&&fr?(gr=this.length!==Ae.length||ft.some(this.models,function(nn,tn){return nn!==Ae[tn]}),this.models.length=0,it(this.models,Ae,0),this.length=this.models.length):pt.length&&(yt&&(rn=!0),it(this.models,pt,ye??this.length),this.length=this.models.length),rn&&this.sort({silent:!0}),!kt.silent){for(Ft=0;Ft<pt.length;Ft++)ye!=null&&(kt.index=ye+Ft),ne=pt[Ft],ne.trigger("add",ne,this,kt);(rn||gr)&&this.trigger("sort",this,kt),(pt.length||se.length||le.length)&&(kt.changes={added:pt,removed:se,merged:le},this.trigger("update",this,kt))}return Gt?at[0]:at}},reset:function(at,kt){kt=kt?ft.clone(kt):{};for(var Gt=0;Gt<this.models.length;Gt++)this._removeReference(this.models[Gt],kt);return kt.previousModels=this.models,this._reset(),at=this.add(at,ft.extend({silent:!0},kt)),kt.silent||this.trigger("reset",this,kt),at},push:function(at,kt){return this.add(at,ft.extend({at:this.length},kt))},pop:function(at){var kt=this.at(this.length-1);return this.remove(kt,at)},unshift:function(at,kt){return this.add(at,ft.extend({at:0},kt))},shift:function(at){var kt=this.at(0);return this.remove(kt,at)},slice:function(){return mt.apply(this.models,arguments)},get:function(at){if(at!=null)return this._byId[at]||this._byId[this.modelId(this._isModel(at)?at.attributes:at,at.idAttribute)]||at.cid&&this._byId[at.cid]},has:function(at){return this.get(at)!=null},at:function(at){return at<0&&(at+=this.length),this.models[at]},where:function(at,kt){return this[kt?"find":"filter"](at)},findWhere:function(at){return this.where(at,!0)},sort:function(at){var kt=this.comparator;if(!kt)throw new Error("Cannot sort a set without a comparator");at||(at={});var Gt=kt.length;return ft.isFunction(kt)&&(kt=kt.bind(this)),Gt===1||ft.isString(kt)?this.models=this.sortBy(kt):this.models.sort(kt),at.silent||this.trigger("sort",this,at),this},pluck:function(at){return this.map(at+"")},fetch:function(at){at=ft.extend({parse:!0},at);var kt=at.success,Gt=this;return at.success=function(ye){var Ae=at.reset?"reset":"set";Gt[Ae](ye,at),kt&&kt.call(at.context,Gt,ye,at),Gt.trigger("sync",Gt,ye,at)},Xe(this,at),this.sync("read",this,at)},create:function(at,kt){kt=kt?ft.clone(kt):{};var Gt=kt.wait;if(at=this._prepareModel(at,kt),!at)return!1;Gt||this.add(at,kt);var ye=this,Ae=kt.success;return kt.success=function(pt,le,se){Gt&&ye.add(pt,se),Ae&&Ae.call(se.context,pt,le,se)},at.save(null,kt),at},parse:function(at,kt){return at},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(at,kt){return at[kt||this.model.prototype.idAttribute||"id"]},values:function(){return new tt(this,xt)},keys:function(){return new tt(this,Q)},entries:function(){return new tt(this,_t)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(at,kt){if(this._isModel(at))return at.collection||(at.collection=this),at;kt=kt?ft.clone(kt):{},kt.collection=this;var Gt;return this.model.prototype?Gt=new this.model(at,kt):Gt=this.model(at,kt),Gt.validationError?(this.trigger("invalid",this,Gt.validationError,kt),!1):Gt},_removeModels:function(at,kt){for(var Gt=[],ye=0;ye<at.length;ye++){var Ae=this.get(at[ye]);if(Ae){var pt=this.indexOf(Ae);this.models.splice(pt,1),this.length--,delete this._byId[Ae.cid];var le=this.modelId(Ae.attributes,Ae.idAttribute);le!=null&&delete this._byId[le],kt.silent||(kt.index=pt,Ae.trigger("remove",Ae,this,kt)),Gt.push(Ae),this._removeReference(Ae,kt)}}return Gt},_isModel:function(at){return at instanceof $},_addReference:function(at,kt){this._byId[at.cid]=at;var Gt=this.modelId(at.attributes,at.idAttribute);Gt!=null&&(this._byId[Gt]=at),at.on("all",this._onModelEvent,this)},_removeReference:function(at,kt){delete this._byId[at.cid];var Gt=this.modelId(at.attributes,at.idAttribute);Gt!=null&&delete this._byId[Gt],this===at.collection&&delete at.collection,at.off("all",this._onModelEvent,this)},_onModelEvent:function(at,kt,Gt,ye){if(kt){if((at==="add"||at==="remove")&&Gt!==this)return;if(at==="destroy"&&this.remove(kt,ye),at==="changeId"){var Ae=this.modelId(kt.previousAttributes(),kt.idAttribute),pt=this.modelId(kt.attributes,kt.idAttribute);Ae!=null&&delete this._byId[Ae],pt!=null&&(this._byId[pt]=kt)}}this.trigger.apply(this,arguments)}});var X=typeof Symbol=="function"&&Symbol.iterator;X&&(F.prototype[X]=F.prototype.values);var tt=function(at,kt){this._collection=at,this._kind=kt,this._index=0},xt=1,Q=2,_t=3;X&&(tt.prototype[X]=function(){return this}),tt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var at=this._collection.at(this._index);this._index++;var kt;if(this._kind===xt)kt=at;else{var Gt=this._collection.modelId(at.attributes,at.idAttribute);this._kind===Q?kt=Gt:kt=[Gt,at]}return{value:kt,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var W=Kt.View=function(at){this.cid=ft.uniqueId("view"),this.preinitialize.apply(this,arguments),ft.extend(this,ft.pick(at,$t)),this._ensureElement(),this.initialize.apply(this,arguments)},It=/^(\S+)\s*(.*)$/,$t=["model","collection","el","id","attributes","className","tagName","events"];ft.extend(W.prototype,K,{tagName:"div",$:function(at){return this.$el.find(at)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(at){return this.undelegateEvents(),this._setElement(at),this.delegateEvents(),this},_setElement:function(at){this.$el=at instanceof Kt.$?at:Kt.$(at),this.el=this.$el[0]},delegateEvents:function(at){if(at||(at=ft.result(this,"events")),!at)return this;this.undelegateEvents();for(var kt in at){var Gt=at[kt];if(ft.isFunction(Gt)||(Gt=this[Gt]),!!Gt){var ye=kt.match(It);this.delegate(ye[1],ye[2],Gt.bind(this))}}return this},delegate:function(at,kt,Gt){return this.$el.on(at+".delegateEvents"+this.cid,kt,Gt),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(at,kt,Gt){return this.$el.off(at+".delegateEvents"+this.cid,kt,Gt),this},_createElement:function(at){return document.createElement(at)},_ensureElement:function(){if(this.el)this.setElement(ft.result(this,"el"));else{var at=ft.extend({},ft.result(this,"attributes"));this.id&&(at.id=ft.result(this,"id")),this.className&&(at.class=ft.result(this,"className")),this.setElement(this._createElement(ft.result(this,"tagName"))),this._setAttributes(at)}},_setAttributes:function(at){this.$el.attr(at)}});var Yt=function(at,kt,Gt,ye){switch(kt){case 1:return function(){return at[Gt](this[ye])};case 2:return function(Ae){return at[Gt](this[ye],Ae)};case 3:return function(Ae,pt){return at[Gt](this[ye],et(Ae,this),pt)};case 4:return function(Ae,pt,le){return at[Gt](this[ye],et(Ae,this),pt,le)};default:return function(){var Ae=mt.call(arguments);return Ae.unshift(this[ye]),at[Gt].apply(at,Ae)}}},Ne=function(at,kt,Gt,ye){ft.each(Gt,function(Ae,pt){kt[pt]&&(at.prototype[pt]=Yt(kt,Ae,pt,ye))})},et=function(at,kt){return ft.isFunction(at)?at:ft.isObject(at)&&!kt._isModel(at)?Tt(at):ft.isString(at)?function(Gt){return Gt.get(at)}:at},Tt=function(at){var kt=ft.matches(at);return function(Gt){return kt(Gt.attributes)}},jt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},zt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};ft.each([[F,jt,"models"],[$,zt,"attributes"]],function(at){var kt=at[0],Gt=at[1],ye=at[2];kt.mixin=function(Ae){var pt=ft.reduce(ft.functions(Ae),function(le,se){return le[se]=0,le},{});Ne(kt,Ae,pt,ye)},Ne(kt,ft,Gt,ye)}),Kt.sync=function(at,kt,Gt){var ye=Ht[at];ft.defaults(Gt||(Gt={}),{emulateHTTP:Kt.emulateHTTP,emulateJSON:Kt.emulateJSON});var Ae={type:ye,dataType:"json"};if(Gt.url||(Ae.url=ft.result(kt,"url")||Fr()),Gt.data==null&&kt&&(at==="create"||at==="update"||at==="patch")&&(Ae.contentType="application/json",Ae.data=JSON.stringify(Gt.attrs||kt.toJSON(Gt))),Gt.emulateJSON&&(Ae.contentType="application/x-www-form-urlencoded",Ae.data=Ae.data?{model:Ae.data}:{}),Gt.emulateHTTP&&(ye==="PUT"||ye==="DELETE"||ye==="PATCH")){Ae.type="POST",Gt.emulateJSON&&(Ae.data._method=ye);var pt=Gt.beforeSend;Gt.beforeSend=function(or){if(or.setRequestHeader("X-HTTP-Method-Override",ye),pt)return pt.apply(this,arguments)}}Ae.type!=="GET"&&!Gt.emulateJSON&&(Ae.processData=!1);var le=Gt.error;Gt.error=function(or,mr,er){Gt.textStatus=mr,Gt.errorThrown=er,le&&le.call(Gt.context,or,mr,er)};var se=Gt.xhr=Kt.ajax(ft.extend(Ae,Gt));return kt.trigger("request",kt,se,Gt),se};var Ht={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};Kt.ajax=function(){return Kt.$.ajax.apply(Kt.$,arguments)};var Dt=Kt.Router=function(at){at||(at={}),this.preinitialize.apply(this,arguments),at.routes&&(this.routes=at.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},St=/\((.*?)\)/g,Vt=/(\(\?)?:\w+/g,Me=/\*\w+/g,de=/[\-{}\[\]+?.,\\\^$|#\s]/g;ft.extend(Dt.prototype,K,{preinitialize:function(){},initialize:function(){},route:function(at,kt,Gt){ft.isRegExp(at)||(at=this._routeToRegExp(at)),ft.isFunction(kt)&&(Gt=kt,kt=""),Gt||(Gt=this[kt]);var ye=this;return Kt.history.route(at,function(Ae){var pt=ye._extractParameters(at,Ae);ye.execute(Gt,pt,kt)!==!1&&(ye.trigger.apply(ye,["route:"+kt].concat(pt)),ye.trigger("route",kt,pt),Kt.history.trigger("route",ye,kt,pt))}),this},execute:function(at,kt,Gt){at&&at.apply(this,kt)},navigate:function(at,kt){return Kt.history.navigate(at,kt),this},_bindRoutes:function(){if(this.routes){this.routes=ft.result(this,"routes");for(var at,kt=ft.keys(this.routes);(at=kt.pop())!=null;)this.route(at,this.routes[at])}},_routeToRegExp:function(at){return at=at.replace(de,"\\$&").replace(St,"(?:$1)?").replace(Vt,function(kt,Gt){return Gt?kt:"([^/?]+)"}).replace(Me,"([^?]*?)"),new RegExp("^"+at+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(at,kt){var Gt=at.exec(kt).slice(1);return ft.map(Gt,function(ye,Ae){return Ae===Gt.length-1?ye||null:ye?decodeURIComponent(ye):null})}});var Le=Kt.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ar=/^[#\/]|\s+$/g,Er=/^\/+|\/+$/g,Nr=/#.*$/;Le.started=!1,ft.extend(Le.prototype,K,{interval:50,atRoot:function(){var at=this.location.pathname.replace(/[^\/]$/,"$&/");return at===this.root&&!this.getSearch()},matchRoot:function(){var at=this.decodeFragment(this.location.pathname),kt=at.slice(0,this.root.length-1)+"/";return kt===this.root},decodeFragment:function(at){return decodeURI(at.replace(/%25/g,"%2525"))},getSearch:function(){var at=this.location.href.replace(/#.*/,"").match(/\?.+/);return at?at[0]:""},getHash:function(at){var kt=(at||this).location.href.match(/#(.*)$/);return kt?kt[1]:""},getPath:function(){var at=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return at.charAt(0)==="/"?at.slice(1):at},getFragment:function(at){return at==null&&(this._usePushState||!this._wantsHashChange?at=this.getPath():at=this.getHash()),at.replace(ar,"")},start:function(at){if(Le.started)throw new Error("Backbone.history has already been started");if(Le.started=!0,this.options=ft.extend({root:"/"},this.options,at),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Er,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var kt=this.root.slice(0,-1)||"/";return this.location.replace(kt+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Gt=document.body,ye=Gt.insertBefore(this.iframe,Gt.firstChild).contentWindow;ye.document.open(),ye.document.close(),ye.location.hash="#"+this.fragment}var Ae=window.addEventListener||function(pt,le){return attachEvent("on"+pt,le)};if(this._usePushState?Ae("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Ae("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var at=window.removeEventListener||function(kt,Gt){return detachEvent("on"+kt,Gt)};this._usePushState?at("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&at("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Le.started=!1},route:function(at,kt){this.handlers.unshift({route:at,callback:kt})},checkUrl:function(at){var kt=this.getFragment();if(kt===this.fragment&&this.iframe&&(kt=this.getHash(this.iframe.contentWindow)),kt===this.fragment)return!1;this.iframe&&this.navigate(kt),this.loadUrl()},loadUrl:function(at){return this.matchRoot()?(at=this.fragment=this.getFragment(at),ft.some(this.handlers,function(kt){if(kt.route.test(at))return kt.callback(at),!0})):!1},navigate:function(at,kt){if(!Le.started)return!1;(!kt||kt===!0)&&(kt={trigger:!!kt}),at=this.getFragment(at||"");var Gt=this.root;(at===""||at.charAt(0)==="?")&&(Gt=Gt.slice(0,-1)||"/");var ye=Gt+at;at=at.replace(Nr,"");var Ae=this.decodeFragment(at);if(this.fragment!==Ae){if(this.fragment=Ae,this._usePushState)this.history[kt.replace?"replaceState":"pushState"]({},document.title,ye);else if(this._wantsHashChange){if(this._updateHash(this.location,at,kt.replace),this.iframe&&at!==this.getHash(this.iframe.contentWindow)){var pt=this.iframe.contentWindow;kt.replace||(pt.document.open(),pt.document.close()),this._updateHash(pt.location,at,kt.replace)}}else return this.location.assign(ye);if(kt.trigger)return this.loadUrl(at)}},_updateHash:function(at,kt,Gt){if(Gt){var ye=at.href.replace(/(javascript:|#).*$/,"");at.replace(ye+"#"+kt)}else at.hash="#"+kt}}),Kt.history=new Le;var Ar=function(at,kt){var Gt=this,ye;return at&&ft.has(at,"constructor")?ye=at.constructor:ye=function(){return Gt.apply(this,arguments)},ft.extend(ye,Gt,kt),ye.prototype=ft.create(Gt.prototype,at),ye.prototype.constructor=ye,ye.__super__=Gt.prototype,ye};$.extend=F.extend=Dt.extend=W.extend=Le.extend=Ar;var Fr=function(){throw new Error('A "url" property or function must be specified')},Xe=function(at,kt){var Gt=kt.error;kt.error=function(ye){Gt&&Gt.call(kt.context,at,ye,kt),at.trigger("error",at,ye,kt)}};return Kt})},210:(wt,pe,Te)=>{(function(we){we(Te(631))})(function(we){we.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(Jt,Kt){return/^[;{}]$/.test(Kt)}}),we.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(Jt,Kt,ft,Ot){return this.jsonMode?/^[\[,{]$/.test(Kt)||/^}/.test(ft):Kt==";"&&Ot.lexical&&Ot.lexical.type==")"?!1:/^[;{}]$/.test(Kt)&&!/^;/.test(ft)}});var ke=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;we.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(Jt,Kt,ft,Ot){var q=!1;return this.configuration=="html"&&(q=Ot.context?ke.test(Ot.context.tagName):!1),!q&&(Jt=="tag"&&/>$/.test(Kt)&&Ot.context||/^</.test(ft))}}),we.defineExtension("commentRange",function(Jt,Kt,ft){var Ot=this,q=we.innerMode(Ot.getMode(),Ot.getTokenAt(Kt).state).mode;Ot.operation(function(){if(Jt)Ot.replaceRange(q.commentEnd,ft),Ot.replaceRange(q.commentStart,Kt),Kt.line==ft.line&&Kt.ch==ft.ch&&Ot.setCursor(Kt.line,Kt.ch+q.commentStart.length);else{var mt=Ot.getRange(Kt,ft),K=mt.indexOf(q.commentStart),st=mt.lastIndexOf(q.commentEnd);K>-1&&st>-1&&st>K&&(mt=mt.substr(0,K)+mt.substring(K+q.commentStart.length,st)+mt.substr(st+q.commentEnd.length)),Ot.replaceRange(mt,Kt,ft)}})}),we.defineExtension("autoIndentRange",function(Jt,Kt){var ft=this;this.operation(function(){for(var Ot=Jt.line;Ot<=Kt.line;Ot++)ft.indentLine(Ot,"smart")})}),we.defineExtension("autoFormatRange",function(Jt,Kt){var ft=this,Ot=ft.getMode(),q=ft.getRange(Jt,Kt).split(`
`),mt=we.copyState(Ot,ft.getTokenAt(Jt).state),K=ft.getOption("tabSize"),st="",k=0,B=Jt.ch===0;function ct(){st+=`
`,B=!0,++k}for(var vt=0;vt<q.length;++vt){for(var dt=new we.StringStream(q[vt],K);!dt.eol();){var H=we.innerMode(Ot,mt),R=Ot.token(dt,mt),I=dt.current();dt.start=dt.pos,(!B||/\S/.test(I))&&(st+=I,B=!1),!B&&H.mode.newlineAfterToken&&H.mode.newlineAfterToken(R,I,dt.string.slice(dt.pos)||q[vt+1]||"",H.state)&&ct()}!dt.pos&&Ot.blankLine&&Ot.blankLine(mt),!B&&vt<q.length-1&&ct()}ft.operation(function(){ft.replaceRange(st,Jt,Kt);for(var N=Jt.line+1,$=Jt.line+k;N<=$;++N)ft.indentLine(N,"smart");ft.setSelection(Jt,ft.getCursor(!1))})})})},631:function(wt){(function(pe,Te){wt.exports=Te()})(this,function(){var pe=navigator.userAgent,Te=navigator.platform,we=/gecko\/\d/i.test(pe),ke=/MSIE \d/.test(pe),Jt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pe),Kt=/Edge\/(\d+)/.exec(pe),ft=ke||Jt||Kt,Ot=ft&&(ke?document.documentMode||6:+(Kt||Jt)[1]),q=!Kt&&/WebKit\//.test(pe),mt=q&&/Qt\/\d+\.\d+/.test(pe),K=!Kt&&/Chrome\/(\d+)/.exec(pe),st=K&&+K[1],k=/Opera\//.test(pe),B=/Apple Computer/.test(navigator.vendor),ct=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(pe),vt=/PhantomJS/.test(pe),dt=B&&(/Mobile\/\w+/.test(pe)||navigator.maxTouchPoints>2),H=/Android/.test(pe),R=dt||H||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(pe),I=dt||/Mac/.test(Te),N=/\bCrOS\b/.test(pe),$=/win/i.test(Te),F=k&&pe.match(/Version\/(\d*\.\d*)/);F&&(F=Number(F[1])),F&&F>=15&&(k=!1,q=!0);var V=I&&(mt||k&&(F==null||F<12.11)),U=we||ft&&Ot>=9;function it(c){return new RegExp("(^|\\s)"+c+"(?:$|\\s)\\s*")}var X=function(c,d){var b=c.className,y=it(d).exec(b);if(y){var C=b.slice(y.index+y[0].length);c.className=b.slice(0,y.index)+(C?y[1]+C:"")}};function tt(c){for(var d=c.childNodes.length;d>0;--d)c.removeChild(c.firstChild);return c}function xt(c,d){return tt(c).appendChild(d)}function Q(c,d,b,y){var C=document.createElement(c);if(b&&(C.className=b),y&&(C.style.cssText=y),typeof d=="string")C.appendChild(document.createTextNode(d));else if(d)for(var L=0;L<d.length;++L)C.appendChild(d[L]);return C}function _t(c,d,b,y){var C=Q(c,d,b,y);return C.setAttribute("role","presentation"),C}var W;document.createRange?W=function(c,d,b,y){var C=document.createRange();return C.setEnd(y||c,b),C.setStart(c,d),C}:W=function(c,d,b){var y=document.body.createTextRange();try{y.moveToElementText(c.parentNode)}catch{return y}return y.collapse(!0),y.moveEnd("character",b),y.moveStart("character",d),y};function It(c,d){if(d.nodeType==3&&(d=d.parentNode),c.contains)return c.contains(d);do if(d.nodeType==11&&(d=d.host),d==c)return!0;while(d=d.parentNode)}function $t(c){var d;try{d=c.activeElement}catch{d=c.body||null}for(;d&&d.shadowRoot&&d.shadowRoot.activeElement;)d=d.shadowRoot.activeElement;return d}function Yt(c,d){var b=c.className;it(d).test(b)||(c.className+=(b?" ":"")+d)}function Ne(c,d){for(var b=c.split(" "),y=0;y<b.length;y++)b[y]&&!it(b[y]).test(d)&&(d+=" "+b[y]);return d}var et=function(c){c.select()};dt?et=function(c){c.selectionStart=0,c.selectionEnd=c.value.length}:ft&&(et=function(c){try{c.select()}catch{}});function Tt(c){return c.display.wrapper.ownerDocument}function jt(c){return Tt(c).defaultView}function zt(c){var d=Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,d)}}function Ht(c,d,b){d||(d={});for(var y in c)c.hasOwnProperty(y)&&(b!==!1||!d.hasOwnProperty(y))&&(d[y]=c[y]);return d}function Dt(c,d,b,y,C){d==null&&(d=c.search(/[^\s\u00a0]/),d==-1&&(d=c.length));for(var L=y||0,z=C||0;;){var J=c.indexOf("	",L);if(J<0||J>=d)return z+(d-L);z+=J-L,z+=b-z%b,L=J+1}}var St=function(){this.id=null,this.f=null,this.time=0,this.handler=zt(this.onTimeout,this)};St.prototype.onTimeout=function(c){c.id=0,c.time<=+new Date?c.f():setTimeout(c.handler,c.time-+new Date)},St.prototype.set=function(c,d){this.f=d;var b=+new Date+c;(!this.id||b<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,c),this.time=b)};function Vt(c,d){for(var b=0;b<c.length;++b)if(c[b]==d)return b;return-1}var Me=50,de={toString:function(){return"CodeMirror.Pass"}},Le={scroll:!1},ar={origin:"*mouse"},Er={origin:"+move"};function Nr(c,d,b){for(var y=0,C=0;;){var L=c.indexOf("	",y);L==-1&&(L=c.length);var z=L-y;if(L==c.length||C+z>=d)return y+Math.min(z,d-C);if(C+=L-y,C+=b-C%b,y=L+1,C>=d)return y}}var Ar=[""];function Fr(c){for(;Ar.length<=c;)Ar.push(Xe(Ar)+" ");return Ar[c]}function Xe(c){return c[c.length-1]}function at(c,d){for(var b=[],y=0;y<c.length;y++)b[y]=d(c[y],y);return b}function kt(c,d,b){for(var y=0,C=b(d);y<c.length&&b(c[y])<=C;)y++;c.splice(y,0,d)}function Gt(){}function ye(c,d){var b;return Object.create?b=Object.create(c):(Gt.prototype=c,b=new Gt),d&&Ht(d,b),b}var Ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function pt(c){return/\w/.test(c)||c>""&&(c.toUpperCase()!=c.toLowerCase()||Ae.test(c))}function le(c,d){return d?d.source.indexOf("\\w")>-1&&pt(c)?!0:d.test(c):pt(c)}function se(c){for(var d in c)if(c.hasOwnProperty(d)&&c[d])return!1;return!0}var or=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function mr(c){return c.charCodeAt(0)>=768&&or.test(c)}function er(c,d,b){for(;(b<0?d>0:d<c.length)&&mr(c.charAt(d));)d+=b;return d}function Dr(c,d,b){for(var y=d>b?-1:1;;){if(d==b)return d;var C=(d+b)/2,L=y<0?Math.ceil(C):Math.floor(C);if(L==d)return c(L)?d:b;c(L)?b=L:d=L+y}}function rn(c,d,b,y){if(!c)return y(d,b,"ltr",0);for(var C=!1,L=0;L<c.length;++L){var z=c[L];(z.from<b&&z.to>d||d==b&&z.to==d)&&(y(Math.max(z.from,d),Math.min(z.to,b),z.level==1?"rtl":"ltr",L),C=!0)}C||y(d,b,"ltr")}var yt=null;function Wt(c,d,b){var y;yt=null;for(var C=0;C<c.length;++C){var L=c[C];if(L.from<d&&L.to>d)return C;L.to==d&&(L.from!=L.to&&b=="before"?y=C:yt=C),L.from==d&&(L.from!=L.to&&b!="before"?y=C:yt=C)}return y??yt}var ne=function(){var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(Pt){return Pt<=247?c.charAt(Pt):1424<=Pt&&Pt<=1524?"R":1536<=Pt&&Pt<=1785?d.charAt(Pt-1536):1774<=Pt&&Pt<=2220?"r":8192<=Pt&&Pt<=8203?"w":Pt==8204?"b":"L"}var y=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,C=/[stwN]/,L=/[LRr]/,z=/[Lb1n]/,J=/[1n]/;function ut(Pt,oe,ve){this.level=Pt,this.from=oe,this.to=ve}return function(Pt,oe){var ve=oe=="ltr"?"L":"R";if(Pt.length==0||oe=="ltr"&&!y.test(Pt))return!1;for(var Ue=Pt.length,Fe=[],sr=0;sr<Ue;++sr)Fe.push(b(Pt.charCodeAt(sr)));for(var dr=0,jr=ve;dr<Ue;++dr){var Rr=Fe[dr];Rr=="m"?Fe[dr]=jr:jr=Rr}for(var Kr=0,zr=ve;Kr<Ue;++Kr){var Zr=Fe[Kr];Zr=="1"&&zr=="r"?Fe[Kr]="n":L.test(Zr)&&(zr=Zr,Zr=="r"&&(Fe[Kr]="R"))}for(var mn=1,un=Fe[0];mn<Ue-1;++mn){var Yn=Fe[mn];Yn=="+"&&un=="1"&&Fe[mn+1]=="1"?Fe[mn]="1":Yn==","&&un==Fe[mn+1]&&(un=="1"||un=="n")&&(Fe[mn]=un),un=Yn}for(var qo=0;qo<Ue;++qo){var da=Fe[qo];if(da==",")Fe[qo]="N";else if(da=="%"){var _i=void 0;for(_i=qo+1;_i<Ue&&Fe[_i]=="%";++_i);for(var ta=qo&&Fe[qo-1]=="!"||_i<Ue&&Fe[_i]=="1"?"1":"N",Ka=qo;Ka<_i;++Ka)Fe[Ka]=ta;qo=_i-1}}for(var zo=0,ps=ve;zo<Ue;++zo){var ha=Fe[zo];ps=="L"&&ha=="1"?Fe[zo]="L":L.test(ha)&&(ps=ha)}for(var ea=0;ea<Ue;++ea)if(C.test(Fe[ea])){var zi=void 0;for(zi=ea+1;zi<Ue&&C.test(Fe[zi]);++zi);for(var ji=(ea?Fe[ea-1]:ve)=="L",Ya=(zi<Ue?Fe[zi]:ve)=="L",hf=ji==Ya?ji?"L":"R":ve,Ks=ea;Ks<zi;++Ks)Fe[Ks]=hf;ea=zi-1}for(var ga=[],Ms,mi=0;mi<Ue;)if(z.test(Fe[mi])){var Ru=mi;for(++mi;mi<Ue&&z.test(Fe[mi]);++mi);ga.push(new ut(0,Ru,mi))}else{var Pl=mi,Hu=ga.length,zc=oe=="rtl"?1:0;for(++mi;mi<Ue&&Fe[mi]!="L";++mi);for(var Za=Pl;Za<mi;)if(J.test(Fe[Za])){Pl<Za&&(ga.splice(Hu,0,new ut(1,Pl,Za)),Hu+=zc);var gf=Za;for(++Za;Za<mi&&J.test(Fe[Za]);++Za);ga.splice(Hu,0,new ut(2,gf,Za)),Hu+=zc,Pl=Za}else++Za;Pl<mi&&ga.splice(Hu,0,new ut(1,Pl,mi))}return oe=="ltr"&&(ga[0].level==1&&(Ms=Pt.match(/^\s+/))&&(ga[0].from=Ms[0].length,ga.unshift(new ut(0,0,Ms[0].length))),Xe(ga).level==1&&(Ms=Pt.match(/\s+$/))&&(Xe(ga).to-=Ms[0].length,ga.push(new ut(0,Ue-Ms[0].length,Ue)))),oe=="rtl"?ga.reverse():ga}}();function Ft(c,d){var b=c.order;return b==null&&(b=c.order=ne(c.text,d)),b}var _e=[],Zt=function(c,d,b){if(c.addEventListener)c.addEventListener(d,b,!1);else if(c.attachEvent)c.attachEvent("on"+d,b);else{var y=c._handlers||(c._handlers={});y[d]=(y[d]||_e).concat(b)}};function gr(c,d){return c._handlers&&c._handlers[d]||_e}function fr(c,d,b){if(c.removeEventListener)c.removeEventListener(d,b,!1);else if(c.detachEvent)c.detachEvent("on"+d,b);else{var y=c._handlers,C=y&&y[d];if(C){var L=Vt(C,b);L>-1&&(y[d]=C.slice(0,L).concat(C.slice(L+1)))}}}function nn(c,d){var b=gr(c,d);if(b.length)for(var y=Array.prototype.slice.call(arguments,2),C=0;C<b.length;++C)b[C].apply(null,y)}function tn(c,d,b){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),nn(c,b||d.type,c,d),je(d)||d.codemirrorIgnore}function wr(c){var d=c._handlers&&c._handlers.cursorActivity;if(d)for(var b=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]),y=0;y<d.length;++y)Vt(b,d[y])==-1&&b.push(d[y])}function tr(c,d){return gr(c,d).length>0}function Un(c){c.prototype.on=function(d,b){Zt(this,d,b)},c.prototype.off=function(d,b){fr(this,d,b)}}function Rt(c){c.preventDefault?c.preventDefault():c.returnValue=!1}function ee(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0}function je(c){return c.defaultPrevented!=null?c.defaultPrevented:c.returnValue==!1}function Je(c){Rt(c),ee(c)}function Et(c){return c.target||c.srcElement}function fe(c){var d=c.which;return d==null&&(c.button&1?d=1:c.button&2?d=3:c.button&4&&(d=2)),I&&c.ctrlKey&&d==1&&(d=3),d}var Pe=function(){if(ft&&Ot<9)return!1;var c=Q("div");return"draggable"in c||"dragDrop"in c}(),Ye;function Cr(c){if(Ye==null){var d=Q("span","​");xt(c,Q("span",[d,document.createTextNode("x")])),c.firstChild.offsetHeight!=0&&(Ye=d.offsetWidth<=1&&d.offsetHeight>2&&!(ft&&Ot<8))}var b=Ye?Q("span","​"):Q("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}var Wr;function zn(c){if(Wr!=null)return Wr;var d=xt(c,document.createTextNode("AخA")),b=W(d,0,1).getBoundingClientRect(),y=W(d,1,2).getBoundingClientRect();return tt(c),!b||b.left==b.right?!1:Wr=y.right-b.right<3}var Dn=`

b`.split(/\n/).length!=3?function(c){for(var d=0,b=[],y=c.length;d<=y;){var C=c.indexOf(`
`,d);C==-1&&(C=c.length);var L=c.slice(d,c.charAt(C-1)=="\r"?C-1:C),z=L.indexOf("\r");z!=-1?(b.push(L.slice(0,z)),d+=z+1):(b.push(L),d=C+1)}return b}:function(c){return c.split(/\r\n?|\n/)},lo=window.getSelection?function(c){try{return c.selectionStart!=c.selectionEnd}catch{return!1}}:function(c){var d;try{d=c.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=c?!1:d.compareEndPoints("StartToEnd",d)!=0},ho=function(){var c=Q("div");return"oncopy"in c?!0:(c.setAttribute("oncopy","return;"),typeof c.oncopy=="function")}(),vn=null;function ro(c){if(vn!=null)return vn;var d=xt(c,Q("span","x")),b=d.getBoundingClientRect(),y=W(d,0,1).getBoundingClientRect();return vn=Math.abs(b.left-y.left)>1}var In={},Yo={};function go(c,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),In[c]=d}function Fo(c,d){Yo[c]=d}function Co(c){if(typeof c=="string"&&Yo.hasOwnProperty(c))c=Yo[c];else if(c&&typeof c.name=="string"&&Yo.hasOwnProperty(c.name)){var d=Yo[c.name];typeof d=="string"&&(d={name:d}),c=ye(d,c),c.name=d.name}else{if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(c))return Co("application/xml");if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(c))return Co("application/json")}return typeof c=="string"?{name:c}:c||{name:"null"}}function yo(c,d){d=Co(d);var b=In[d.name];if(!b)return yo(c,"text/plain");var y=b(c,d);if(So.hasOwnProperty(d.name)){var C=So[d.name];for(var L in C)C.hasOwnProperty(L)&&(y.hasOwnProperty(L)&&(y["_"+L]=y[L]),y[L]=C[L])}if(y.name=d.name,d.helperType&&(y.helperType=d.helperType),d.modeProps)for(var z in d.modeProps)y[z]=d.modeProps[z];return y}var So={};function Gi(c,d){var b=So.hasOwnProperty(c)?So[c]:So[c]={};Ht(d,b)}function Wo(c,d){if(d===!0)return d;if(c.copyState)return c.copyState(d);var b={};for(var y in d){var C=d[y];C instanceof Array&&(C=C.concat([])),b[y]=C}return b}function Mo(c,d){for(var b;c.innerMode&&(b=c.innerMode(d),!(!b||b.mode==c));)d=b.state,c=b.mode;return b||{mode:c,state:d}}function ao(c,d,b){return c.startState?c.startState(d,b):!0}var Xn=function(c,d,b){this.pos=this.start=0,this.string=c,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=b};Xn.prototype.eol=function(){return this.pos>=this.string.length},Xn.prototype.sol=function(){return this.pos==this.lineStart},Xn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xn.prototype.eat=function(c){var d=this.string.charAt(this.pos),b;if(typeof c=="string"?b=d==c:b=d&&(c.test?c.test(d):c(d)),b)return++this.pos,d},Xn.prototype.eatWhile=function(c){for(var d=this.pos;this.eat(c););return this.pos>d},Xn.prototype.eatSpace=function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},Xn.prototype.skipToEnd=function(){this.pos=this.string.length},Xn.prototype.skipTo=function(c){var d=this.string.indexOf(c,this.pos);if(d>-1)return this.pos=d,!0},Xn.prototype.backUp=function(c){this.pos-=c},Xn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Dt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Dt(this.string,this.lineStart,this.tabSize):0)},Xn.prototype.indentation=function(){return Dt(this.string,null,this.tabSize)-(this.lineStart?Dt(this.string,this.lineStart,this.tabSize):0)},Xn.prototype.match=function(c,d,b){if(typeof c=="string"){var y=function(z){return b?z.toLowerCase():z},C=this.string.substr(this.pos,c.length);if(y(C)==y(c))return d!==!1&&(this.pos+=c.length),!0}else{var L=this.string.slice(this.pos).match(c);return L&&L.index>0?null:(L&&d!==!1&&(this.pos+=L[0].length),L)}},Xn.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xn.prototype.hideFirstChars=function(c,d){this.lineStart+=c;try{return d()}finally{this.lineStart-=c}},Xn.prototype.lookAhead=function(c){var d=this.lineOracle;return d&&d.lookAhead(c)},Xn.prototype.baseToken=function(){var c=this.lineOracle;return c&&c.baseToken(this.pos)};function $r(c,d){if(d-=c.first,d<0||d>=c.size)throw new Error("There is no line "+(d+c.first)+" in the document.");for(var b=c;!b.lines;)for(var y=0;;++y){var C=b.children[y],L=C.chunkSize();if(d<L){b=C;break}d-=L}return b.lines[d]}function co(c,d,b){var y=[],C=d.line;return c.iter(d.line,b.line+1,function(L){var z=L.text;C==b.line&&(z=z.slice(0,b.ch)),C==d.line&&(z=z.slice(d.ch)),y.push(z),++C}),y}function Jn(c,d,b){var y=[];return c.iter(d,b,function(C){y.push(C.text)}),y}function Lo(c,d){var b=d-c.height;if(b)for(var y=c;y;y=y.parent)y.height+=b}function fn(c){if(c.parent==null)return null;for(var d=c.parent,b=Vt(d.lines,c),y=d.parent;y;d=y,y=y.parent)for(var C=0;y.children[C]!=d;++C)b+=y.children[C].chunkSize();return b+d.first}function Oo(c,d){var b=c.first;t:do{for(var y=0;y<c.children.length;++y){var C=c.children[y],L=C.height;if(d<L){c=C;continue t}d-=L,b+=C.chunkSize()}return b}while(!c.lines);for(var z=0;z<c.lines.length;++z){var J=c.lines[z],ut=J.height;if(d<ut)break;d-=ut}return b+z}function bo(c,d){return d>=c.first&&d<c.first+c.size}function En(c,d){return String(c.lineNumberFormatter(d+c.firstLineNumber))}function rt(c,d,b){if(b===void 0&&(b=null),!(this instanceof rt))return new rt(c,d,b);this.line=c,this.ch=d,this.sticky=b}function Xt(c,d){return c.line-d.line||c.ch-d.ch}function ir(c,d){return c.sticky==d.sticky&&Xt(c,d)==0}function pr(c){return rt(c.line,c.ch)}function Hr(c,d){return Xt(c,d)<0?d:c}function wn(c,d){return Xt(c,d)<0?c:d}function Nn(c,d){return Math.max(c.first,Math.min(d,c.first+c.size-1))}function Xr(c,d){if(d.line<c.first)return rt(c.first,0);var b=c.first+c.size-1;return d.line>b?rt(b,$r(c,b).text.length):cr(d,$r(c,d.line).text.length)}function cr(c,d){var b=c.ch;return b==null||b>d?rt(c.line,d):b<0?rt(c.line,0):c}function Mt(c,d){for(var b=[],y=0;y<d.length;y++)b[y]=Xr(c,d[y]);return b}var xe=function(c,d){this.state=c,this.lookAhead=d},lr=function(c,d,b,y){this.state=d,this.doc=c,this.line=b,this.maxLookAhead=y||0,this.baseTokens=null,this.baseTokenPos=1};lr.prototype.lookAhead=function(c){var d=this.doc.getLine(this.line+c);return d!=null&&c>this.maxLookAhead&&(this.maxLookAhead=c),d},lr.prototype.baseToken=function(c){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=c;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-c}},lr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},lr.fromSaved=function(c,d,b){return d instanceof xe?new lr(c,Wo(c.mode,d.state),b,d.lookAhead):new lr(c,Wo(c.mode,d),b)},lr.prototype.save=function(c){var d=c!==!1?Wo(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new xe(d,this.maxLookAhead):d};function Yr(c,d,b,y){var C=[c.state.modeGen],L={};jo(c,d.text,c.doc.mode,b,function(Pt,oe){return C.push(Pt,oe)},L,y);for(var z=b.state,J=function(Pt){b.baseTokens=C;var oe=c.state.overlays[Pt],ve=1,Ue=0;b.state=!0,jo(c,d.text,oe.mode,b,function(Fe,sr){for(var dr=ve;Ue<Fe;){var jr=C[ve];jr>Fe&&C.splice(ve,1,Fe,C[ve+1],jr),ve+=2,Ue=Math.min(Fe,jr)}if(sr)if(oe.opaque)C.splice(dr,ve-dr,Fe,"overlay "+sr),ve=dr+2;else for(;dr<ve;dr+=2){var Rr=C[dr+1];C[dr+1]=(Rr?Rr+" ":"")+"overlay "+sr}},L),b.state=z,b.baseTokens=null,b.baseTokenPos=1},ut=0;ut<c.state.overlays.length;++ut)J(ut);return{styles:C,classes:L.bgClass||L.textClass?L:null}}function en(c,d,b){if(!d.styles||d.styles[0]!=c.state.modeGen){var y=gn(c,fn(d)),C=d.text.length>c.options.maxHighlightLength&&Wo(c.doc.mode,y.state),L=Yr(c,d,y);C&&(y.state=C),d.stateAfter=y.save(!C),d.styles=L.styles,L.classes?d.styleClasses=L.classes:d.styleClasses&&(d.styleClasses=null),b===c.doc.highlightFrontier&&(c.doc.modeFrontier=Math.max(c.doc.modeFrontier,++c.doc.highlightFrontier))}return d.styles}function gn(c,d,b){var y=c.doc,C=c.display;if(!y.mode.startState)return new lr(y,!0,d);var L=Ra(c,d,b),z=L>y.first&&$r(y,L-1).stateAfter,J=z?lr.fromSaved(y,z,L):new lr(y,ao(y.mode),L);return y.iter(L,d,function(ut){Mr(c,ut.text,J);var Pt=J.line;ut.stateAfter=Pt==d-1||Pt%5==0||Pt>=C.viewFrom&&Pt<C.viewTo?J.save():null,J.nextLine()}),b&&(y.modeFrontier=J.line),J}function Mr(c,d,b,y){var C=c.doc.mode,L=new Xn(d,c.options.tabSize,b);for(L.start=L.pos=y||0,d==""&&Wn(C,b.state);!L.eol();)wo(C,L,b.state),L.start=L.pos}function Wn(c,d){if(c.blankLine)return c.blankLine(d);if(c.innerMode){var b=Mo(c,d);if(b.mode.blankLine)return b.mode.blankLine(b.state)}}function wo(c,d,b,y){for(var C=0;C<10;C++){y&&(y[0]=Mo(c,b).mode);var L=c.token(d,b);if(d.pos>d.start)return L}throw new Error("Mode "+c.name+" failed to advance stream.")}var $o=function(c,d,b){this.start=c.start,this.end=c.pos,this.string=c.current(),this.type=d||null,this.state=b};function Vo(c,d,b,y){var C=c.doc,L=C.mode,z;d=Xr(C,d);var J=$r(C,d.line),ut=gn(c,d.line,b),Pt=new Xn(J.text,c.options.tabSize,ut),oe;for(y&&(oe=[]);(y||Pt.pos<d.ch)&&!Pt.eol();)Pt.start=Pt.pos,z=wo(L,Pt,ut.state),y&&oe.push(new $o(Pt,z,Wo(C.mode,ut.state)));return y?oe:new $o(Pt,z,ut.state)}function ol(c,d){if(c)for(;;){var b=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b)break;c=c.slice(0,b.index)+c.slice(b.index+b[0].length);var y=b[1]?"bgClass":"textClass";d[y]==null?d[y]=b[2]:new RegExp("(?:^|\\s)"+b[2]+"(?:$|\\s)").test(d[y])||(d[y]+=" "+b[2])}return c}function jo(c,d,b,y,C,L,z){var J=b.flattenSpans;J==null&&(J=c.options.flattenSpans);var ut=0,Pt=null,oe=new Xn(d,c.options.tabSize,y),ve,Ue=c.options.addModeClass&&[null];for(d==""&&ol(Wn(b,y.state),L);!oe.eol();){if(oe.pos>c.options.maxHighlightLength?(J=!1,z&&Mr(c,d,y,oe.pos),oe.pos=d.length,ve=null):ve=ol(wo(b,oe,y.state,Ue),L),Ue){var Fe=Ue[0].name;Fe&&(ve="m-"+(ve?Fe+" "+ve:Fe))}if(!J||Pt!=ve){for(;ut<oe.start;)ut=Math.min(oe.start,ut+5e3),C(ut,Pt);Pt=ve}oe.start=oe.pos}for(;ut<oe.pos;){var sr=Math.min(oe.pos,ut+5e3);C(sr,Pt),ut=sr}}function Ra(c,d,b){for(var y,C,L=c.doc,z=b?-1:d-(c.doc.mode.innerMode?1e3:100),J=d;J>z;--J){if(J<=L.first)return L.first;var ut=$r(L,J-1),Pt=ut.stateAfter;if(Pt&&(!b||J+(Pt instanceof xe?Pt.lookAhead:0)<=L.modeFrontier))return J;var oe=Dt(ut.text,null,c.options.tabSize);(C==null||y>oe)&&(C=J-1,y=oe)}return C}function xa(c,d){if(c.modeFrontier=Math.min(c.modeFrontier,d),!(c.highlightFrontier<d-10)){for(var b=c.first,y=d-1;y>b;y--){var C=$r(c,y).stateAfter;if(C&&(!(C instanceof xe)||y+C.lookAhead<d)){b=y+1;break}}c.highlightFrontier=Math.min(c.highlightFrontier,b)}}var il=!1,Go=!1;function al(){il=!0}function oa(){Go=!0}function qi(c,d,b){this.marker=c,this.from=d,this.to=b}function si(c,d){if(c)for(var b=0;b<c.length;++b){var y=c[b];if(y.marker==d)return y}}function yi(c,d){for(var b,y=0;y<c.length;++y)c[y]!=d&&(b||(b=[])).push(c[y]);return b}function Ha(c,d,b){var y=b&&window.WeakSet&&(b.markedSpans||(b.markedSpans=new WeakSet));y&&c.markedSpans&&y.has(c.markedSpans)?c.markedSpans.push(d):(c.markedSpans=c.markedSpans?c.markedSpans.concat([d]):[d],y&&y.add(c.markedSpans)),d.marker.attachLine(c)}function Ns(c,d,b){var y;if(c)for(var C=0;C<c.length;++C){var L=c[C],z=L.marker,J=L.from==null||(z.inclusiveLeft?L.from<=d:L.from<d);if(J||L.from==d&&z.type=="bookmark"&&(!b||!L.marker.insertLeft)){var ut=L.to==null||(z.inclusiveRight?L.to>=d:L.to>d);(y||(y=[])).push(new qi(z,L.from,ut?null:L.to))}}return y}function ts(c,d,b){var y;if(c)for(var C=0;C<c.length;++C){var L=c[C],z=L.marker,J=L.to==null||(z.inclusiveRight?L.to>=d:L.to>d);if(J||L.from==d&&z.type=="bookmark"&&(!b||L.marker.insertLeft)){var ut=L.from==null||(z.inclusiveLeft?L.from<=d:L.from<d);(y||(y=[])).push(new qi(z,ut?null:L.from-d,L.to==null?null:L.to-d))}}return y}function Ca(c,d){if(d.full)return null;var b=bo(c,d.from.line)&&$r(c,d.from.line).markedSpans,y=bo(c,d.to.line)&&$r(c,d.to.line).markedSpans;if(!b&&!y)return null;var C=d.from.ch,L=d.to.ch,z=Xt(d.from,d.to)==0,J=Ns(b,C,z),ut=ts(y,L,z),Pt=d.text.length==1,oe=Xe(d.text).length+(Pt?C:0);if(J)for(var ve=0;ve<J.length;++ve){var Ue=J[ve];if(Ue.to==null){var Fe=si(ut,Ue.marker);Fe?Pt&&(Ue.to=Fe.to==null?null:Fe.to+oe):Ue.to=C}}if(ut)for(var sr=0;sr<ut.length;++sr){var dr=ut[sr];if(dr.to!=null&&(dr.to+=oe),dr.from==null){var jr=si(J,dr.marker);jr||(dr.from=oe,Pt&&(J||(J=[])).push(dr))}else dr.from+=oe,Pt&&(J||(J=[])).push(dr)}J&&(J=Ba(J)),ut&&ut!=J&&(ut=Ba(ut));var Rr=[J];if(!Pt){var Kr=d.text.length-2,zr;if(Kr>0&&J)for(var Zr=0;Zr<J.length;++Zr)J[Zr].to==null&&(zr||(zr=[])).push(new qi(J[Zr].marker,null,null));for(var mn=0;mn<Kr;++mn)Rr.push(zr);Rr.push(ut)}return Rr}function Ba(c){for(var d=0;d<c.length;++d){var b=c[d];b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&c.splice(d--,1)}return c.length?c:null}function bi(c,d,b){var y=null;if(c.iter(d.line,b.line+1,function(Fe){if(Fe.markedSpans)for(var sr=0;sr<Fe.markedSpans.length;++sr){var dr=Fe.markedSpans[sr].marker;dr.readOnly&&(!y||Vt(y,dr)==-1)&&(y||(y=[])).push(dr)}}),!y)return null;for(var C=[{from:d,to:b}],L=0;L<y.length;++L)for(var z=y[L],J=z.find(0),ut=0;ut<C.length;++ut){var Pt=C[ut];if(!(Xt(Pt.to,J.from)<0||Xt(Pt.from,J.to)>0)){var oe=[ut,1],ve=Xt(Pt.from,J.from),Ue=Xt(Pt.to,J.to);(ve<0||!z.inclusiveLeft&&!ve)&&oe.push({from:Pt.from,to:J.from}),(Ue>0||!z.inclusiveRight&&!Ue)&&oe.push({from:J.to,to:Pt.to}),C.splice.apply(C,oe),ut+=oe.length-3}}return C}function Vs(c){var d=c.markedSpans;if(d){for(var b=0;b<d.length;++b)d[b].marker.detachLine(c);c.markedSpans=null}}function Ki(c,d){if(d){for(var b=0;b<d.length;++b)d[b].marker.attachLine(c);c.markedSpans=d}}function ka(c){return c.inclusiveLeft?-1:0}function xi(c){return c.inclusiveRight?1:0}function hs(c,d){var b=c.lines.length-d.lines.length;if(b!=0)return b;var y=c.find(),C=d.find(),L=Xt(y.from,C.from)||ka(c)-ka(d);if(L)return-L;var z=Xt(y.to,C.to)||xi(c)-xi(d);return z||d.id-c.id}function gs(c,d){var b=Go&&c.markedSpans,y;if(b)for(var C=void 0,L=0;L<b.length;++L)C=b[L],C.marker.collapsed&&(d?C.from:C.to)==null&&(!y||hs(y,C.marker)<0)&&(y=C.marker);return y}function Yi(c){return gs(c,!0)}function sl(c){return gs(c,!1)}function Ci(c,d){var b=Go&&c.markedSpans,y;if(b)for(var C=0;C<b.length;++C){var L=b[C];L.marker.collapsed&&(L.from==null||L.from<d)&&(L.to==null||L.to>d)&&(!y||hs(y,L.marker)<0)&&(y=L.marker)}return y}function Zo(c,d,b,y,C){var L=$r(c,d),z=Go&&L.markedSpans;if(z)for(var J=0;J<z.length;++J){var ut=z[J];if(ut.marker.collapsed){var Pt=ut.marker.find(0),oe=Xt(Pt.from,b)||ka(ut.marker)-ka(C),ve=Xt(Pt.to,y)||xi(ut.marker)-xi(C);if(!(oe>=0&&ve<=0||oe<=0&&ve>=0)&&(oe<=0&&(ut.marker.inclusiveRight&&C.inclusiveLeft?Xt(Pt.to,b)>=0:Xt(Pt.to,b)>0)||oe>=0&&(ut.marker.inclusiveRight&&C.inclusiveLeft?Xt(Pt.from,y)<=0:Xt(Pt.from,y)<0)))return!0}}}function An(c){for(var d;d=Yi(c);)c=d.find(-1,!0).line;return c}function vs(c){for(var d;d=sl(c);)c=d.find(1,!0).line;return c}function sn(c){for(var d,b;d=sl(c);)c=d.find(1,!0).line,(b||(b=[])).push(c);return b}function Do(c,d){var b=$r(c,d),y=An(b);return b==y?d:fn(y)}function li(c,d){if(d>c.lastLine())return d;var b=$r(c,d),y;if(!ci(c,b))return d;for(;y=sl(b);)b=y.find(1,!0).line;return fn(b)+1}function ci(c,d){var b=Go&&d.markedSpans;if(b){for(var y=void 0,C=0;C<b.length;++C)if(y=b[C],!!y.marker.collapsed){if(y.from==null)return!0;if(!y.marker.widgetNode&&y.from==0&&y.marker.inclusiveLeft&&Gn(c,d,y))return!0}}}function Gn(c,d,b){if(b.to==null){var y=b.marker.find(1,!0);return Gn(c,y.line,si(y.line.markedSpans,b.marker))}if(b.marker.inclusiveRight&&b.to==d.text.length)return!0;for(var C=void 0,L=0;L<d.markedSpans.length;++L)if(C=d.markedSpans[L],C.marker.collapsed&&!C.marker.widgetNode&&C.from==b.to&&(C.to==null||C.to!=b.from)&&(C.marker.inclusiveLeft||b.marker.inclusiveRight)&&Gn(c,d,C))return!0}function pn(c){c=An(c);for(var d=0,b=c.parent,y=0;y<b.lines.length;++y){var C=b.lines[y];if(C==c)break;d+=C.height}for(var L=b.parent;L;b=L,L=b.parent)for(var z=0;z<L.children.length;++z){var J=L.children[z];if(J==b)break;d+=J.height}return d}function ui(c){if(c.height==0)return 0;for(var d=c.text.length,b,y=c;b=Yi(y);){var C=b.find(0,!0);y=C.from.line,d+=C.from.ch-C.to.ch}for(y=c;b=sl(y);){var L=b.find(0,!0);d-=y.text.length-L.from.ch,y=L.to.line,d+=y.text.length-L.to.ch}return d}function Ii(c){var d=c.display,b=c.doc;d.maxLine=$r(b,b.first),d.maxLineLength=ui(d.maxLine),d.maxLineChanged=!0,b.iter(function(y){var C=ui(y);C>d.maxLineLength&&(d.maxLineLength=C,d.maxLine=y)})}var Hi=function(c,d,b){this.text=c,Ki(this,d),this.height=b?b(this):1};Hi.prototype.lineNo=function(){return fn(this)},Un(Hi);function ia(c,d,b,y){c.text=d,c.stateAfter&&(c.stateAfter=null),c.styles&&(c.styles=null),c.order!=null&&(c.order=null),Vs(c),Ki(c,b);var C=y?y(c):1;C!=c.height&&Lo(c,C)}function wi(c){c.parent=null,Vs(c)}var Si={},es={};function fi(c,d){if(!c||/^\s*$/.test(c))return null;var b=d.addModeClass?es:Si;return b[c]||(b[c]=c.replace(/\S+/g,"cm-$&"))}function ll(c,d){var b=_t("span",null,null,q?"padding-right: .1px":null),y={pre:_t("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:c,trailingSpace:!1,splitSpaces:c.getOption("lineWrapping")};d.measure={};for(var C=0;C<=(d.rest?d.rest.length:0);C++){var L=C?d.rest[C-1]:d.line,z=void 0;y.pos=0,y.addToken=Zi,zn(c.display.measure)&&(z=Ft(L,c.doc.direction))&&(y.addToken=Ro(y.addToken,z)),y.map=[];var J=d!=c.display.externalMeasured&&fn(L);Xo(L,y,en(c,L,J)),L.styleClasses&&(L.styleClasses.bgClass&&(y.bgClass=Ne(L.styleClasses.bgClass,y.bgClass||"")),L.styleClasses.textClass&&(y.textClass=Ne(L.styleClasses.textClass,y.textClass||""))),y.map.length==0&&y.map.push(0,0,y.content.appendChild(Cr(c.display.measure))),C==0?(d.measure.map=y.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(y.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(q){var ut=y.content.lastChild;(/\bcm-tab\b/.test(ut.className)||ut.querySelector&&ut.querySelector(".cm-tab"))&&(y.content.className="cm-tab-wrap-hack")}return nn(c,"renderLine",c,d.line,y.pre),y.pre.className&&(y.textClass=Ne(y.pre.className,y.textClass||"")),y}function Dl(c){var d=Q("span","•","cm-invalidchar");return d.title="\\u"+c.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function Zi(c,d,b,y,C,L,z){if(d){var J=c.splitSpaces?rs(d,c.trailingSpace):d,ut=c.cm.state.specialChars,Pt=!1,oe;if(!ut.test(d))c.col+=d.length,oe=document.createTextNode(J),c.map.push(c.pos,c.pos+d.length,oe),ft&&Ot<9&&(Pt=!0),c.pos+=d.length;else{oe=document.createDocumentFragment();for(var ve=0;;){ut.lastIndex=ve;var Ue=ut.exec(d),Fe=Ue?Ue.index-ve:d.length-ve;if(Fe){var sr=document.createTextNode(J.slice(ve,ve+Fe));ft&&Ot<9?oe.appendChild(Q("span",[sr])):oe.appendChild(sr),c.map.push(c.pos,c.pos+Fe,sr),c.col+=Fe,c.pos+=Fe}if(!Ue)break;ve+=Fe+1;var dr=void 0;if(Ue[0]=="	"){var jr=c.cm.options.tabSize,Rr=jr-c.col%jr;dr=oe.appendChild(Q("span",Fr(Rr),"cm-tab")),dr.setAttribute("role","presentation"),dr.setAttribute("cm-text","	"),c.col+=Rr}else Ue[0]=="\r"||Ue[0]==`
`?(dr=oe.appendChild(Q("span",Ue[0]=="\r"?"␍":"␤","cm-invalidchar")),dr.setAttribute("cm-text",Ue[0]),c.col+=1):(dr=c.cm.options.specialCharPlaceholder(Ue[0]),dr.setAttribute("cm-text",Ue[0]),ft&&Ot<9?oe.appendChild(Q("span",[dr])):oe.appendChild(dr),c.col+=1);c.map.push(c.pos,c.pos+1,dr),c.pos++}}if(c.trailingSpace=J.charCodeAt(d.length-1)==32,b||y||C||Pt||L||z){var Kr=b||"";y&&(Kr+=y),C&&(Kr+=C);var zr=Q("span",[oe],Kr,L);if(z)for(var Zr in z)z.hasOwnProperty(Zr)&&Zr!="style"&&Zr!="class"&&zr.setAttribute(Zr,z[Zr]);return c.content.appendChild(zr)}c.content.appendChild(oe)}}function rs(c,d){if(c.length>1&&!/  /.test(c))return c;for(var b=d,y="",C=0;C<c.length;C++){var L=c.charAt(C);L==" "&&b&&(C==c.length-1||c.charCodeAt(C+1)==32)&&(L=" "),y+=L,b=L==" "}return y}function Ro(c,d){return function(b,y,C,L,z,J,ut){C=C?C+" cm-force-border":"cm-force-border";for(var Pt=b.pos,oe=Pt+y.length;;){for(var ve=void 0,Ue=0;Ue<d.length&&(ve=d[Ue],!(ve.to>Pt&&ve.from<=Pt));Ue++);if(ve.to>=oe)return c(b,y,C,L,z,J,ut);c(b,y.slice(0,ve.to-Pt),C,L,null,J,ut),L=null,y=y.slice(ve.to-Pt),Pt=ve.to}}}function Fs(c,d,b,y){var C=!y&&b.widgetNode;C&&c.map.push(c.pos,c.pos+d,C),!y&&c.cm.display.input.needsContentAttribute&&(C||(C=c.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",b.id)),C&&(c.cm.display.input.setUneditable(C),c.content.appendChild(C)),c.pos+=d,c.trailingSpace=!1}function Xo(c,d,b){var y=c.markedSpans,C=c.text,L=0;if(!y){for(var z=1;z<b.length;z+=2)d.addToken(d,C.slice(L,L=b[z]),fi(b[z+1],d.cm.options));return}for(var J=C.length,ut=0,Pt=1,oe="",ve,Ue,Fe=0,sr,dr,jr,Rr,Kr;;){if(Fe==ut){sr=dr=jr=Ue="",Kr=null,Rr=null,Fe=1/0;for(var zr=[],Zr=void 0,mn=0;mn<y.length;++mn){var un=y[mn],Yn=un.marker;if(Yn.type=="bookmark"&&un.from==ut&&Yn.widgetNode)zr.push(Yn);else if(un.from<=ut&&(un.to==null||un.to>ut||Yn.collapsed&&un.to==ut&&un.from==ut)){if(un.to!=null&&un.to!=ut&&Fe>un.to&&(Fe=un.to,dr=""),Yn.className&&(sr+=" "+Yn.className),Yn.css&&(Ue=(Ue?Ue+";":"")+Yn.css),Yn.startStyle&&un.from==ut&&(jr+=" "+Yn.startStyle),Yn.endStyle&&un.to==Fe&&(Zr||(Zr=[])).push(Yn.endStyle,un.to),Yn.title&&((Kr||(Kr={})).title=Yn.title),Yn.attributes)for(var qo in Yn.attributes)(Kr||(Kr={}))[qo]=Yn.attributes[qo];Yn.collapsed&&(!Rr||hs(Rr.marker,Yn)<0)&&(Rr=un)}else un.from>ut&&Fe>un.from&&(Fe=un.from)}if(Zr)for(var da=0;da<Zr.length;da+=2)Zr[da+1]==Fe&&(dr+=" "+Zr[da]);if(!Rr||Rr.from==ut)for(var _i=0;_i<zr.length;++_i)Fs(d,0,zr[_i]);if(Rr&&(Rr.from||0)==ut){if(Fs(d,(Rr.to==null?J+1:Rr.to)-ut,Rr.marker,Rr.from==null),Rr.to==null)return;Rr.to==ut&&(Rr=!1)}}if(ut>=J)break;for(var ta=Math.min(J,Fe);;){if(oe){var Ka=ut+oe.length;if(!Rr){var zo=Ka>ta?oe.slice(0,ta-ut):oe;d.addToken(d,zo,ve?ve+sr:sr,jr,ut+zo.length==Fe?dr:"",Ue,Kr)}if(Ka>=ta){oe=oe.slice(ta-ut),ut=ta;break}ut=Ka,jr=""}oe=C.slice(L,L=b[Pt++]),ve=fi(b[Pt++],d.cm.options)}}}function Ni(c,d,b){this.line=d,this.rest=sn(d),this.size=this.rest?fn(Xe(this.rest))-b+1:1,this.node=this.text=null,this.hidden=ci(c,d)}function ns(c,d,b){for(var y=[],C,L=d;L<b;L=C){var z=new Ni(c.doc,$r(c.doc,L),L);C=L+z.size,y.push(z)}return y}var aa=null;function cl(c){aa?aa.ops.push(c):c.ownsGroup=aa={ops:[c],delayedCallbacks:[]}}function Il(c){var d=c.delayedCallbacks,b=0;do{for(;b<d.length;b++)d[b].call(null);for(var y=0;y<c.ops.length;y++){var C=c.ops[y];if(C.cursorActivityHandlers)for(;C.cursorActivityCalled<C.cursorActivityHandlers.length;)C.cursorActivityHandlers[C.cursorActivityCalled++].call(null,C.cm)}}while(b<d.length)}function os(c,d){var b=c.ownsGroup;if(b)try{Il(b)}finally{aa=null,d(b)}}var ri=null;function Jo(c,d){var b=gr(c,d);if(b.length){var y=Array.prototype.slice.call(arguments,2),C;aa?C=aa.delayedCallbacks:ri?C=ri:(C=ri=[],setTimeout(wc,0));for(var L=function(J){C.push(function(){return b[J].apply(null,y)})},z=0;z<b.length;++z)L(z)}}function wc(){var c=ri;ri=null;for(var d=0;d<c.length;++d)c[d]()}function rc(c,d,b,y){for(var C=0;C<d.changes.length;C++){var L=d.changes[C];L=="text"?pi(c,d):L=="gutter"?is(c,d,b,y):L=="class"?sa(c,d):L=="widget"&&nc(c,d,y)}d.changes=null}function Ua(c){return c.node==c.text&&(c.node=Q("div",null,null,"position: relative"),c.text.parentNode&&c.text.parentNode.replaceChild(c.node,c.text),c.node.appendChild(c.text),ft&&Ot<8&&(c.node.style.zIndex=2)),c.node}function _c(c,d){var b=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),d.background)b?d.background.className=b:(d.background.parentNode.removeChild(d.background),d.background=null);else if(b){var y=Ua(d);d.background=y.insertBefore(Q("div",null,b),y.firstChild),c.display.input.setUneditable(d.background)}}function Bi(c,d){var b=c.display.externalMeasured;return b&&b.line==d.line?(c.display.externalMeasured=null,d.measure=b.measure,b.built):ll(c,d)}function pi(c,d){var b=d.text.className,y=Bi(c,d);d.text==d.node&&(d.node=y.pre),d.text.parentNode.replaceChild(y.pre,d.text),d.text=y.pre,y.bgClass!=d.bgClass||y.textClass!=d.textClass?(d.bgClass=y.bgClass,d.textClass=y.textClass,sa(c,d)):b&&(d.text.className=b)}function sa(c,d){_c(c,d),d.line.wrapClass?Ua(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var b=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=b||""}function is(c,d,b,y){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var C=Ua(d);d.gutterBackground=Q("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(c.options.fixedGutter?y.fixedPos:-y.gutterTotalWidth)+"px; width: "+y.gutterTotalWidth+"px"),c.display.input.setUneditable(d.gutterBackground),C.insertBefore(d.gutterBackground,d.text)}var L=d.line.gutterMarkers;if(c.options.lineNumbers||L){var z=Ua(d),J=d.gutter=Q("div",null,"CodeMirror-gutter-wrapper","left: "+(c.options.fixedGutter?y.fixedPos:-y.gutterTotalWidth)+"px");if(J.setAttribute("aria-hidden","true"),c.display.input.setUneditable(J),z.insertBefore(J,d.text),d.line.gutterClass&&(J.className+=" "+d.line.gutterClass),c.options.lineNumbers&&(!L||!L["CodeMirror-linenumbers"])&&(d.lineNumber=J.appendChild(Q("div",En(c.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+y.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.display.lineNumInnerWidth+"px"))),L)for(var ut=0;ut<c.display.gutterSpecs.length;++ut){var Pt=c.display.gutterSpecs[ut].className,oe=L.hasOwnProperty(Pt)&&L[Pt];oe&&J.appendChild(Q("div",[oe],"CodeMirror-gutter-elt","left: "+y.gutterLeft[Pt]+"px; width: "+y.gutterWidth[Pt]+"px"))}}}function nc(c,d,b){d.alignable&&(d.alignable=null);for(var y=it("CodeMirror-linewidget"),C=d.node.firstChild,L=void 0;C;C=L)L=C.nextSibling,y.test(C.className)&&d.node.removeChild(C);la(c,d,b)}function ni(c,d,b,y){var C=Bi(c,d);return d.text=d.node=C.pre,C.bgClass&&(d.bgClass=C.bgClass),C.textClass&&(d.textClass=C.textClass),sa(c,d),is(c,d,b,y),la(c,d,y),d.node}function la(c,d,b){if(ms(c,d.line,d,b,!0),d.rest)for(var y=0;y<d.rest.length;y++)ms(c,d.rest[y],d,b,!1)}function ms(c,d,b,y,C){if(d.widgets)for(var L=Ua(b),z=0,J=d.widgets;z<J.length;++z){var ut=J[z],Pt=Q("div",[ut.node],"CodeMirror-linewidget"+(ut.className?" "+ut.className:""));ut.handleMouseEvents||Pt.setAttribute("cm-ignore-events","true"),ys(ut,Pt,b,y),c.display.input.setUneditable(Pt),C&&ut.above?L.insertBefore(Pt,b.gutter||b.text):L.appendChild(Pt),Jo(ut,"redraw")}}function ys(c,d,b,y){if(c.noHScroll){(b.alignable||(b.alignable=[])).push(d);var C=y.wrapperWidth;d.style.left=y.fixedPos+"px",c.coverGutter||(C-=y.gutterTotalWidth,d.style.paddingLeft=y.gutterTotalWidth+"px"),d.style.width=C+"px"}c.coverGutter&&(d.style.zIndex=5,d.style.position="relative",c.noHScroll||(d.style.marginLeft=-y.gutterTotalWidth+"px"))}function ca(c){if(c.height!=null)return c.height;var d=c.doc.cm;if(!d)return 0;if(!It(document.body,c.node)){var b="position: relative;";c.coverGutter&&(b+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),c.noHScroll&&(b+="width: "+d.display.wrapper.clientWidth+"px;"),xt(d.display.measure,Q("div",[c.node],null,b))}return c.height=c.node.parentNode.offsetHeight}function Xi(c,d){for(var b=Et(d);b!=c.wrapper;b=b.parentNode)if(!b||b.nodeType==1&&b.getAttribute("cm-ignore-events")=="true"||b.parentNode==c.sizer&&b!=c.mover)return!0}function Oi(c){return c.lineSpace.offsetTop}function ua(c){return c.mover.offsetHeight-c.lineSpace.offsetHeight}function gt(c){if(c.cachedPaddingH)return c.cachedPaddingH;var d=xt(c.measure,Q("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,y={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return!isNaN(y.left)&&!isNaN(y.right)&&(c.cachedPaddingH=y),y}function Nt(c){return Me-c.display.nativeBarWidth}function he(c){return c.display.scroller.clientWidth-Nt(c)-c.display.barWidth}function Oe(c){return c.display.scroller.clientHeight-Nt(c)-c.display.barHeight}function Be(c,d,b){var y=c.options.lineWrapping,C=y&&he(c);if(!d.measure.heights||y&&d.measure.width!=C){var L=d.measure.heights=[];if(y){d.measure.width=C;for(var z=d.text.firstChild.getClientRects(),J=0;J<z.length-1;J++){var ut=z[J],Pt=z[J+1];Math.abs(ut.bottom-Pt.bottom)>2&&L.push((ut.bottom+Pt.top)/2-b.top)}}L.push(b.bottom-b.top)}}function Re(c,d,b){if(c.line==d)return{map:c.measure.map,cache:c.measure.cache};if(c.rest){for(var y=0;y<c.rest.length;y++)if(c.rest[y]==d)return{map:c.measure.maps[y],cache:c.measure.caches[y]};for(var C=0;C<c.rest.length;C++)if(fn(c.rest[C])>b)return{map:c.measure.maps[C],cache:c.measure.caches[C],before:!0}}}function hr(c,d){d=An(d);var b=fn(d),y=c.display.externalMeasured=new Ni(c.doc,d,b);y.lineN=b;var C=y.built=ll(c,y);return y.text=C.pre,xt(c.display.lineMeasure,C.pre),y}function Ir(c,d,b,y){return ce(c,Lt(c,d),b,y)}function lt(c,d){if(d>=c.display.viewFrom&&d<c.display.viewTo)return c.display.view[lc(c,d)];var b=c.display.externalMeasured;if(b&&d>=b.lineN&&d<b.lineN+b.size)return b}function Lt(c,d){var b=fn(d),y=lt(c,b);y&&!y.text?y=null:y&&y.changes&&(rc(c,y,b,mu(c)),c.curOp.forceUpdate=!0),y||(y=hr(c,d));var C=Re(y,d,b);return{line:d,view:y,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function ce(c,d,b,y,C){d.before&&(b=-1);var L=b+(y||""),z;return d.cache.hasOwnProperty(L)?z=d.cache[L]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(Be(c,d.view,d.rect),d.hasHeights=!0),z=ur(c,d,b,y),z.bogus||(d.cache[L]=z)),{left:z.left,right:z.right,top:C?z.rtop:z.top,bottom:C?z.rbottom:z.bottom}}var me={left:0,right:0,top:0,bottom:0};function We(c,d,b){for(var y,C,L,z,J,ut,Pt=0;Pt<c.length;Pt+=3)if(J=c[Pt],ut=c[Pt+1],d<J?(C=0,L=1,z="left"):d<ut?(C=d-J,L=C+1):(Pt==c.length-3||d==ut&&c[Pt+3]>d)&&(L=ut-J,C=L-1,d>=ut&&(z="right")),C!=null){if(y=c[Pt+2],J==ut&&b==(y.insertLeft?"left":"right")&&(z=b),b=="left"&&C==0)for(;Pt&&c[Pt-2]==c[Pt-3]&&c[Pt-1].insertLeft;)y=c[(Pt-=3)+2],z="left";if(b=="right"&&C==ut-J)for(;Pt<c.length-3&&c[Pt+3]==c[Pt+4]&&!c[Pt+5].insertLeft;)y=c[(Pt+=3)+2],z="right";break}return{node:y,start:C,end:L,collapse:z,coverStart:J,coverEnd:ut}}function Ve(c,d){var b=me;if(d=="left")for(var y=0;y<c.length&&(b=c[y]).left==b.right;y++);else for(var C=c.length-1;C>=0&&(b=c[C]).left==b.right;C--);return b}function ur(c,d,b,y){var C=We(d.map,b,y),L=C.node,z=C.start,J=C.end,ut=C.collapse,Pt;if(L.nodeType==3){for(var oe=0;oe<4;oe++){for(;z&&mr(d.line.text.charAt(C.coverStart+z));)--z;for(;C.coverStart+J<C.coverEnd&&mr(d.line.text.charAt(C.coverStart+J));)++J;if(ft&&Ot<9&&z==0&&J==C.coverEnd-C.coverStart?Pt=L.parentNode.getBoundingClientRect():Pt=Ve(W(L,z,J).getClientRects(),y),Pt.left||Pt.right||z==0)break;J=z,z=z-1,ut="right"}ft&&Ot<11&&(Pt=Lr(c.display.measure,Pt))}else{z>0&&(ut=y="right");var ve;c.options.lineWrapping&&(ve=L.getClientRects()).length>1?Pt=ve[y=="right"?ve.length-1:0]:Pt=L.getBoundingClientRect()}if(ft&&Ot<9&&!z&&(!Pt||!Pt.left&&!Pt.right)){var Ue=L.parentNode.getClientRects()[0];Ue?Pt={left:Ue.left,right:Ue.left+ul(c.display),top:Ue.top,bottom:Ue.bottom}:Pt=me}for(var Fe=Pt.top-d.rect.top,sr=Pt.bottom-d.rect.top,dr=(Fe+sr)/2,jr=d.view.measure.heights,Rr=0;Rr<jr.length-1&&!(dr<jr[Rr]);Rr++);var Kr=Rr?jr[Rr-1]:0,zr=jr[Rr],Zr={left:(ut=="right"?Pt.right:Pt.left)-d.rect.left,right:(ut=="left"?Pt.left:Pt.right)-d.rect.left,top:Kr,bottom:zr};return!Pt.left&&!Pt.right&&(Zr.bogus=!0),c.options.singleCursorHeightPerLine||(Zr.rtop=Fe,Zr.rbottom=sr),Zr}function Lr(c,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ro(c))return d;var b=screen.logicalXDPI/screen.deviceXDPI,y=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*b,right:d.right*b,top:d.top*y,bottom:d.bottom*y}}function dn(c){if(c.measure&&(c.measure.cache={},c.measure.heights=null,c.rest))for(var d=0;d<c.rest.length;d++)c.measure.caches[d]={}}function jn(c){c.display.externalMeasure=null,tt(c.display.lineMeasure);for(var d=0;d<c.display.view.length;d++)dn(c.display.view[d])}function To(c){jn(c),c.display.cachedCharWidth=c.display.cachedTextHeight=c.display.cachedPaddingH=null,c.options.lineWrapping||(c.display.maxLineChanged=!0),c.display.lineNumChars=null}function za(c){return K&&H?-(c.body.getBoundingClientRect().left-parseInt(getComputedStyle(c.body).marginLeft)):c.defaultView.pageXOffset||(c.documentElement||c.body).scrollLeft}function as(c){return K&&H?-(c.body.getBoundingClientRect().top-parseInt(getComputedStyle(c.body).marginTop)):c.defaultView.pageYOffset||(c.documentElement||c.body).scrollTop}function oc(c){var d=An(c),b=d.widgets,y=0;if(b)for(var C=0;C<b.length;++C)b[C].above&&(y+=ca(b[C]));return y}function Zu(c,d,b,y,C){if(!C){var L=oc(d);b.top+=L,b.bottom+=L}if(y=="line")return b;y||(y="local");var z=pn(d);if(y=="local"?z+=Oi(c.display):z-=c.display.viewOffset,y=="page"||y=="window"){var J=c.display.lineSpace.getBoundingClientRect();z+=J.top+(y=="window"?0:as(Tt(c)));var ut=J.left+(y=="window"?0:za(Tt(c)));b.left+=ut,b.right+=ut}return b.top+=z,b.bottom+=z,b}function yp(c,d,b){if(b=="div")return d;var y=d.left,C=d.top;if(b=="page")y-=za(Tt(c)),C-=as(Tt(c));else if(b=="local"||!b){var L=c.display.sizer.getBoundingClientRect();y+=L.left,C+=L.top}var z=c.display.lineSpace.getBoundingClientRect();return{left:y-z.left,top:C-z.top}}function bs(c,d,b,y,C){return y||(y=$r(c.doc,d.line)),Zu(c,y,Ir(c,y,d.ch,C),b)}function ki(c,d,b,y,C,L){y=y||$r(c.doc,d.line),C||(C=Lt(c,y));function z(sr,dr){var jr=ce(c,C,sr,dr?"right":"left",L);return dr?jr.left=jr.right:jr.right=jr.left,Zu(c,y,jr,b)}var J=Ft(y,c.doc.direction),ut=d.ch,Pt=d.sticky;if(ut>=y.text.length?(ut=y.text.length,Pt="before"):ut<=0&&(ut=0,Pt="after"),!J)return z(Pt=="before"?ut-1:ut,Pt=="before");function oe(sr,dr,jr){var Rr=J[dr],Kr=Rr.level==1;return z(jr?sr-1:sr,Kr!=jr)}var ve=Wt(J,ut,Pt),Ue=yt,Fe=oe(ut,ve,Pt=="before");return Ue!=null&&(Fe.other=oe(ut,Ue,Pt!="before")),Fe}function gu(c,d){var b=0;d=Xr(c.doc,d),c.options.lineWrapping||(b=ul(c.display)*d.ch);var y=$r(c.doc,d.line),C=pn(y)+Oi(c.display);return{left:b,right:b,top:C,bottom:C+y.height}}function ic(c,d,b,y,C){var L=rt(c,d,b);return L.xRel=C,y&&(L.outside=y),L}function vu(c,d,b){var y=c.doc;if(b+=c.display.viewOffset,b<0)return ic(y.first,0,null,-1,-1);var C=Oo(y,b),L=y.first+y.size-1;if(C>L)return ic(y.first+y.size-1,$r(y,L).text.length,null,1,1);d<0&&(d=0);for(var z=$r(y,C);;){var J=Ui(c,z,C,d,b),ut=Ci(z,J.ch+(J.xRel>0||J.outside>0?1:0));if(!ut)return J;var Pt=ut.find(1);if(Pt.line==C)return Pt;z=$r(y,C=Pt.line)}}function Xu(c,d,b,y){y-=oc(d);var C=d.text.length,L=Dr(function(z){return ce(c,b,z-1).bottom<=y},C,0);return C=Dr(function(z){return ce(c,b,z).top>y},L,C),{begin:L,end:C}}function Rs(c,d,b,y){b||(b=Lt(c,d));var C=Zu(c,d,ce(c,b,y),"line").top;return Xu(c,d,b,C)}function Nl(c,d,b,y){return c.bottom<=b?!1:c.top>b?!0:(y?c.left:c.right)>d}function Ui(c,d,b,y,C){C-=pn(d);var L=Lt(c,d),z=oc(d),J=0,ut=d.text.length,Pt=!0,oe=Ft(d,c.doc.direction);if(oe){var ve=(c.options.lineWrapping?Wa:Hs)(c,d,b,L,oe,y,C);Pt=ve.level!=1,J=Pt?ve.from:ve.to-1,ut=Pt?ve.to:ve.from-1}var Ue=null,Fe=null,sr=Dr(function(mn){var un=ce(c,L,mn);return un.top+=z,un.bottom+=z,Nl(un,y,C,!1)?(un.top<=C&&un.left<=y&&(Ue=mn,Fe=un),!0):!1},J,ut),dr,jr,Rr=!1;if(Fe){var Kr=y-Fe.left<Fe.right-y,zr=Kr==Pt;sr=Ue+(zr?0:1),jr=zr?"after":"before",dr=Kr?Fe.left:Fe.right}else{!Pt&&(sr==ut||sr==J)&&sr++,jr=sr==0?"after":sr==d.text.length?"before":ce(c,L,sr-(Pt?1:0)).bottom+z<=C==Pt?"after":"before";var Zr=ki(c,rt(b,sr,jr),"line",d,L);dr=Zr.left,Rr=C<Zr.top?-1:C>=Zr.bottom?1:0}return sr=er(d.text,sr,1),ic(b,sr,jr,Rr,y-dr)}function Hs(c,d,b,y,C,L,z){var J=Dr(function(ve){var Ue=C[ve],Fe=Ue.level!=1;return Nl(ki(c,rt(b,Fe?Ue.to:Ue.from,Fe?"before":"after"),"line",d,y),L,z,!0)},0,C.length-1),ut=C[J];if(J>0){var Pt=ut.level!=1,oe=ki(c,rt(b,Pt?ut.from:ut.to,Pt?"after":"before"),"line",d,y);Nl(oe,L,z,!0)&&oe.top>z&&(ut=C[J-1])}return ut}function Wa(c,d,b,y,C,L,z){var J=Xu(c,d,y,z),ut=J.begin,Pt=J.end;/\s/.test(d.text.charAt(Pt-1))&&Pt--;for(var oe=null,ve=null,Ue=0;Ue<C.length;Ue++){var Fe=C[Ue];if(!(Fe.from>=Pt||Fe.to<=ut)){var sr=Fe.level!=1,dr=ce(c,y,sr?Math.min(Pt,Fe.to)-1:Math.max(ut,Fe.from)).right,jr=dr<L?L-dr+1e9:dr-L;(!oe||ve>jr)&&(oe=Fe,ve=jr)}}return oe||(oe=C[C.length-1]),oe.from<ut&&(oe={from:ut,to:oe.to,level:oe.level}),oe.to>Pt&&(oe={from:oe.from,to:Pt,level:oe.level}),oe}var ws;function ac(c){if(c.cachedTextHeight!=null)return c.cachedTextHeight;if(ws==null){ws=Q("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)ws.appendChild(document.createTextNode("x")),ws.appendChild(Q("br"));ws.appendChild(document.createTextNode("x"))}xt(c.measure,ws);var b=ws.offsetHeight/50;return b>3&&(c.cachedTextHeight=b),tt(c.measure),b||1}function ul(c){if(c.cachedCharWidth!=null)return c.cachedCharWidth;var d=Q("span","xxxxxxxxxx"),b=Q("pre",[d],"CodeMirror-line-like");xt(c.measure,b);var y=d.getBoundingClientRect(),C=(y.right-y.left)/10;return C>2&&(c.cachedCharWidth=C),C||10}function mu(c){for(var d=c.display,b={},y={},C=d.gutters.clientLeft,L=d.gutters.firstChild,z=0;L;L=L.nextSibling,++z){var J=c.display.gutterSpecs[z].className;b[J]=L.offsetLeft+L.clientLeft+C,y[J]=L.clientWidth}return{fixedPos:sc(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:b,gutterWidth:y,wrapperWidth:d.wrapper.clientWidth}}function sc(c){return c.scroller.getBoundingClientRect().left-c.sizer.getBoundingClientRect().left}function fl(c){var d=ac(c.display),b=c.options.lineWrapping,y=b&&Math.max(5,c.display.scroller.clientWidth/ul(c.display)-3);return function(C){if(ci(c.doc,C))return 0;var L=0;if(C.widgets)for(var z=0;z<C.widgets.length;z++)C.widgets[z].height&&(L+=C.widgets[z].height);return b?L+(Math.ceil(C.text.length/y)||1)*d:L+d}}function yu(c){var d=c.doc,b=fl(c);d.iter(function(y){var C=b(y);C!=y.height&&Lo(y,C)})}function pl(c,d,b,y){var C=c.display;if(!b&&Et(d).getAttribute("cm-not-content")=="true")return null;var L,z,J=C.lineSpace.getBoundingClientRect();try{L=d.clientX-J.left,z=d.clientY-J.top}catch{return null}var ut=vu(c,L,z),Pt;if(y&&ut.xRel>0&&(Pt=$r(c.doc,ut.line).text).length==ut.ch){var oe=Dt(Pt,Pt.length,c.options.tabSize)-Pt.length;ut=rt(ut.line,Math.max(0,Math.round((L-gt(c.display).left)/ul(c.display))-oe))}return ut}function lc(c,d){if(d>=c.display.viewTo||(d-=c.display.viewFrom,d<0))return null;for(var b=c.display.view,y=0;y<b.length;y++)if(d-=b[y].size,d<0)return y}function Vi(c,d,b,y){d==null&&(d=c.doc.first),b==null&&(b=c.doc.first+c.doc.size),y||(y=0);var C=c.display;if(y&&b<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>d)&&(C.updateLineNumbers=d),c.curOp.viewChanged=!0,d>=C.viewTo)Go&&Do(c.doc,d)<C.viewTo&&Sa(c);else if(b<=C.viewFrom)Go&&li(c.doc,b+y)>C.viewFrom?Sa(c):(C.viewFrom+=y,C.viewTo+=y);else if(d<=C.viewFrom&&b>=C.viewTo)Sa(c);else if(d<=C.viewFrom){var L=Vl(c,b,b+y,1);L?(C.view=C.view.slice(L.index),C.viewFrom=L.lineN,C.viewTo+=y):Sa(c)}else if(b>=C.viewTo){var z=Vl(c,d,d,-1);z?(C.view=C.view.slice(0,z.index),C.viewTo=z.lineN):Sa(c)}else{var J=Vl(c,d,d,-1),ut=Vl(c,b,b+y,1);J&&ut?(C.view=C.view.slice(0,J.index).concat(ns(c,J.lineN,ut.lineN)).concat(C.view.slice(ut.index)),C.viewTo+=y):Sa(c)}var Pt=C.externalMeasured;Pt&&(b<Pt.lineN?Pt.lineN+=y:d<Pt.lineN+Pt.size&&(C.externalMeasured=null))}function dl(c,d,b){c.curOp.viewChanged=!0;var y=c.display,C=c.display.externalMeasured;if(C&&d>=C.lineN&&d<C.lineN+C.size&&(y.externalMeasured=null),!(d<y.viewFrom||d>=y.viewTo)){var L=y.view[lc(c,d)];if(L.node!=null){var z=L.changes||(L.changes=[]);Vt(z,b)==-1&&z.push(b)}}}function Sa(c){c.display.viewFrom=c.display.viewTo=c.doc.first,c.display.view=[],c.display.viewOffset=0}function Vl(c,d,b,y){var C=lc(c,d),L,z=c.display.view;if(!Go||b==c.doc.first+c.doc.size)return{index:C,lineN:b};for(var J=c.display.viewFrom,ut=0;ut<C;ut++)J+=z[ut].size;if(J!=d){if(y>0){if(C==z.length-1)return null;L=J+z[C].size-d,C++}else L=J-d;d+=L,b+=L}for(;Do(c.doc,b)!=b;){if(C==(y<0?0:z.length-1))return null;b+=y*z[C-(y<0?1:0)].size,C+=y}return{index:C,lineN:b}}function hl(c,d,b){var y=c.display,C=y.view;C.length==0||d>=y.viewTo||b<=y.viewFrom?(y.view=ns(c,d,b),y.viewFrom=d):(y.viewFrom>d?y.view=ns(c,d,y.viewFrom).concat(y.view):y.viewFrom<d&&(y.view=y.view.slice(lc(c,d))),y.viewFrom=d,y.viewTo<b?y.view=y.view.concat(ns(c,y.viewTo,b)):y.viewTo>b&&(y.view=y.view.slice(0,lc(c,b)))),y.viewTo=b}function _s(c){for(var d=c.display.view,b=0,y=0;y<d.length;y++){var C=d[y];!C.hidden&&(!C.node||C.changes)&&++b}return b}function xs(c){c.display.input.showSelection(c.display.input.prepareSelection())}function qc(c,d){d===void 0&&(d=!0);var b=c.doc,y={},C=y.cursors=document.createDocumentFragment(),L=y.selection=document.createDocumentFragment(),z=c.options.$customCursor;z&&(d=!0);for(var J=0;J<b.sel.ranges.length;J++)if(!(!d&&J==b.sel.primIndex)){var ut=b.sel.ranges[J];if(!(ut.from().line>=c.display.viewTo||ut.to().line<c.display.viewFrom)){var Pt=ut.empty();if(z){var oe=z(c,ut);oe&&cc(c,oe,C)}else(Pt||c.options.showCursorWhenSelecting)&&cc(c,ut.head,C);Pt||Kc(c,ut,L)}}return y}function cc(c,d,b){var y=ki(c,d,"div",null,null,!c.options.singleCursorHeightPerLine),C=b.appendChild(Q("div"," ","CodeMirror-cursor"));if(C.style.left=y.left+"px",C.style.top=y.top+"px",C.style.height=Math.max(0,y.bottom-y.top)*c.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(c.getWrapperElement().className)){var L=bs(c,d,"div",null,null),z=L.right-L.left;C.style.width=(z>0?z:c.defaultCharWidth())+"px"}if(y.other){var J=b.appendChild(Q("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));J.style.display="",J.style.left=y.other.left+"px",J.style.top=y.other.top+"px",J.style.height=(y.other.bottom-y.other.top)*.85+"px"}}function Bs(c,d){return c.top-d.top||c.left-d.left}function Kc(c,d,b){var y=c.display,C=c.doc,L=document.createDocumentFragment(),z=gt(c.display),J=z.left,ut=Math.max(y.sizerWidth,he(c)-y.sizer.offsetLeft)-z.right,Pt=C.direction=="ltr";function oe(zr,Zr,mn,un){Zr<0&&(Zr=0),Zr=Math.round(Zr),un=Math.round(un),L.appendChild(Q("div",null,"CodeMirror-selected","position: absolute; left: "+zr+`px;
                             top: `+Zr+"px; width: "+(mn??ut-zr)+`px;
                             height: `+(un-Zr)+"px"))}function ve(zr,Zr,mn){var un=$r(C,zr),Yn=un.text.length,qo,da;function _i(zo,ps){return bs(c,rt(zr,zo),"div",un,ps)}function ta(zo,ps,ha){var ea=Rs(c,un,null,zo),zi=ps=="ltr"==(ha=="after")?"left":"right",ji=ha=="after"?ea.begin:ea.end-(/\s/.test(un.text.charAt(ea.end-1))?2:1);return _i(ji,zi)[zi]}var Ka=Ft(un,C.direction);return rn(Ka,Zr||0,mn??Yn,function(zo,ps,ha,ea){var zi=ha=="ltr",ji=_i(zo,zi?"left":"right"),Ya=_i(ps-1,zi?"right":"left"),hf=Zr==null&&zo==0,Ks=mn==null&&ps==Yn,ga=ea==0,Ms=!Ka||ea==Ka.length-1;if(Ya.top-ji.top<=3){var mi=(Pt?hf:Ks)&&ga,Ru=(Pt?Ks:hf)&&Ms,Pl=mi?J:(zi?ji:Ya).left,Hu=Ru?ut:(zi?Ya:ji).right;oe(Pl,ji.top,Hu-Pl,ji.bottom)}else{var zc,Za,gf,Qp;zi?(zc=Pt&&hf&&ga?J:ji.left,Za=Pt?ut:ta(zo,ha,"before"),gf=Pt?J:ta(ps,ha,"after"),Qp=Pt&&Ks&&Ms?ut:Ya.right):(zc=Pt?ta(zo,ha,"before"):J,Za=!Pt&&hf&&ga?ut:ji.right,gf=!Pt&&Ks&&Ms?J:Ya.left,Qp=Pt?ta(ps,ha,"after"):ut),oe(zc,ji.top,Za-zc,ji.bottom),ji.bottom<Ya.top&&oe(J,ji.bottom,null,Ya.top),oe(gf,Ya.top,Qp-gf,Ya.bottom)}(!qo||Bs(ji,qo)<0)&&(qo=ji),Bs(Ya,qo)<0&&(qo=Ya),(!da||Bs(ji,da)<0)&&(da=ji),Bs(Ya,da)<0&&(da=Ya)}),{start:qo,end:da}}var Ue=d.from(),Fe=d.to();if(Ue.line==Fe.line)ve(Ue.line,Ue.ch,Fe.ch);else{var sr=$r(C,Ue.line),dr=$r(C,Fe.line),jr=An(sr)==An(dr),Rr=ve(Ue.line,Ue.ch,jr?sr.text.length+1:null).end,Kr=ve(Fe.line,jr?0:null,Fe.ch).start;jr&&(Rr.top<Kr.top-2?(oe(Rr.right,Rr.top,null,Rr.bottom),oe(J,Kr.top,Kr.left,Kr.bottom)):oe(Rr.right,Rr.top,Kr.left-Rr.right,Rr.bottom)),Rr.bottom<Kr.top&&oe(J,Rr.bottom,null,Kr.top)}b.appendChild(L)}function Ju(c){if(c.state.focused){var d=c.display;clearInterval(d.blinker);var b=!0;d.cursorDiv.style.visibility="",c.options.cursorBlinkRate>0?d.blinker=setInterval(function(){c.hasFocus()||ss(c),d.cursorDiv.style.visibility=(b=!b)?"":"hidden"},c.options.cursorBlinkRate):c.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function uc(c){c.hasFocus()||(c.display.input.focus(),c.state.focused||Aa(c))}function Qu(c){c.state.delayingBlurEvent=!0,setTimeout(function(){c.state.delayingBlurEvent&&(c.state.delayingBlurEvent=!1,c.state.focused&&ss(c))},100)}function Aa(c,d){c.state.delayingBlurEvent&&!c.state.draggingText&&(c.state.delayingBlurEvent=!1),c.options.readOnly!="nocursor"&&(c.state.focused||(nn(c,"focus",c,d),c.state.focused=!0,Yt(c.display.wrapper,"CodeMirror-focused"),!c.curOp&&c.display.selForContextMenu!=c.doc.sel&&(c.display.input.reset(),q&&setTimeout(function(){return c.display.input.reset(!0)},20)),c.display.input.receivedFocus()),Ju(c))}function ss(c,d){c.state.delayingBlurEvent||(c.state.focused&&(nn(c,"blur",c,d),c.state.focused=!1,X(c.display.wrapper,"CodeMirror-focused")),clearInterval(c.display.blinker),setTimeout(function(){c.state.focused||(c.display.shift=!1)},150))}function gl(c){for(var d=c.display,b=d.lineDiv.offsetTop,y=Math.max(0,d.scroller.getBoundingClientRect().top),C=d.lineDiv.getBoundingClientRect().top,L=0,z=0;z<d.view.length;z++){var J=d.view[z],ut=c.options.lineWrapping,Pt=void 0,oe=0;if(!J.hidden){if(C+=J.line.height,ft&&Ot<8){var ve=J.node.offsetTop+J.node.offsetHeight;Pt=ve-b,b=ve}else{var Ue=J.node.getBoundingClientRect();Pt=Ue.bottom-Ue.top,!ut&&J.text.firstChild&&(oe=J.text.firstChild.getBoundingClientRect().right-Ue.left-1)}var Fe=J.line.height-Pt;if((Fe>.005||Fe<-.005)&&(C<y&&(L-=Fe),Lo(J.line,Pt),Yc(J.line),J.rest))for(var sr=0;sr<J.rest.length;sr++)Yc(J.rest[sr]);if(oe>c.display.sizerWidth){var dr=Math.ceil(oe/ul(c.display));dr>c.display.maxLineLength&&(c.display.maxLineLength=dr,c.display.maxLine=J.line,c.display.maxLineChanged=!0)}}}Math.abs(L)>2&&(d.scroller.scrollTop+=L)}function Yc(c){if(c.widgets)for(var d=0;d<c.widgets.length;++d){var b=c.widgets[d],y=b.node.parentNode;y&&(b.height=y.offsetHeight)}}function Cs(c,d,b){var y=b&&b.top!=null?Math.max(0,b.top):c.scroller.scrollTop;y=Math.floor(y-Oi(c));var C=b&&b.bottom!=null?b.bottom:y+c.wrapper.clientHeight,L=Oo(d,y),z=Oo(d,C);if(b&&b.ensure){var J=b.ensure.from.line,ut=b.ensure.to.line;J<L?(L=J,z=Oo(d,pn($r(d,J))+c.wrapper.clientHeight)):Math.min(ut,d.lastLine())>=z&&(L=Oo(d,pn($r(d,ut))-c.wrapper.clientHeight),z=ut)}return{from:L,to:Math.max(z,L+1)}}function tf(c,d){if(!tn(c,"scrollCursorIntoView")){var b=c.display,y=b.sizer.getBoundingClientRect(),C=null,L=b.wrapper.ownerDocument;if(d.top+y.top<0?C=!0:d.bottom+y.top>(L.defaultView.innerHeight||L.documentElement.clientHeight)&&(C=!1),C!=null&&!vt){var z=Q("div","​",null,`position: absolute;
                         top: `+(d.top-b.viewOffset-Oi(c.display))+`px;
                         height: `+(d.bottom-d.top+Nt(c)+b.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");c.display.lineSpace.appendChild(z),z.scrollIntoView(C),c.display.lineSpace.removeChild(z)}}}function bp(c,d,b,y){y==null&&(y=0);var C;!c.options.lineWrapping&&d==b&&(b=d.sticky=="before"?rt(d.line,d.ch+1,"before"):d,d=d.ch?rt(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var L=0;L<5;L++){var z=!1,J=ki(c,d),ut=!b||b==d?J:ki(c,b);C={left:Math.min(J.left,ut.left),top:Math.min(J.top,ut.top)-y,right:Math.max(J.left,ut.left),bottom:Math.max(J.bottom,ut.bottom)+y};var Pt=wu(c,C),oe=c.doc.scrollTop,ve=c.doc.scrollLeft;if(Pt.scrollTop!=null&&(xc(c,Pt.scrollTop),Math.abs(c.doc.scrollTop-oe)>1&&(z=!0)),Pt.scrollLeft!=null&&(Ho(c,Pt.scrollLeft),Math.abs(c.doc.scrollLeft-ve)>1&&(z=!0)),!z)break}return C}function bu(c,d){var b=wu(c,d);b.scrollTop!=null&&xc(c,b.scrollTop),b.scrollLeft!=null&&Ho(c,b.scrollLeft)}function wu(c,d){var b=c.display,y=ac(c.display);d.top<0&&(d.top=0);var C=c.curOp&&c.curOp.scrollTop!=null?c.curOp.scrollTop:b.scroller.scrollTop,L=Oe(c),z={};d.bottom-d.top>L&&(d.bottom=d.top+L);var J=c.doc.height+ua(b),ut=d.top<y,Pt=d.bottom>J-y;if(d.top<C)z.scrollTop=ut?0:d.top;else if(d.bottom>C+L){var oe=Math.min(d.top,(Pt?J:d.bottom)-L);oe!=C&&(z.scrollTop=oe)}var ve=c.options.fixedGutter?0:b.gutters.offsetWidth,Ue=c.curOp&&c.curOp.scrollLeft!=null?c.curOp.scrollLeft:b.scroller.scrollLeft-ve,Fe=he(c)-b.gutters.offsetWidth,sr=d.right-d.left>Fe;return sr&&(d.right=d.left+Fe),d.left<10?z.scrollLeft=0:d.left<Ue?z.scrollLeft=Math.max(0,d.left+ve-(sr?0:10)):d.right>Fe+Ue-3&&(z.scrollLeft=d.right+(sr?0:10)-Fe),z}function ls(c,d){d!=null&&(ef(c),c.curOp.scrollTop=(c.curOp.scrollTop==null?c.doc.scrollTop:c.curOp.scrollTop)+d)}function $a(c){ef(c);var d=c.getCursor();c.curOp.scrollToPos={from:d,to:d,margin:c.options.cursorScrollMargin}}function fc(c,d,b){(d!=null||b!=null)&&ef(c),d!=null&&(c.curOp.scrollLeft=d),b!=null&&(c.curOp.scrollTop=b)}function Jp(c,d){ef(c),c.curOp.scrollToPos=d}function ef(c){var d=c.curOp.scrollToPos;if(d){c.curOp.scrollToPos=null;var b=gu(c,d.from),y=gu(c,d.to);_u(c,b,y,d.margin)}}function _u(c,d,b,y){var C=wu(c,{left:Math.min(d.left,b.left),top:Math.min(d.top,b.top)-y,right:Math.max(d.right,b.right),bottom:Math.max(d.bottom,b.bottom)+y});fc(c,C.scrollLeft,C.scrollTop)}function xc(c,d){Math.abs(c.doc.scrollTop-d)<2||(we||Fl(c,{top:d}),Ma(c,d,!0),we&&Fl(c),di(c,100))}function Ma(c,d,b){d=Math.max(0,Math.min(c.display.scroller.scrollHeight-c.display.scroller.clientHeight,d)),!(c.display.scroller.scrollTop==d&&!b)&&(c.doc.scrollTop=d,c.display.scrollbars.setScrollTop(d),c.display.scroller.scrollTop!=d&&(c.display.scroller.scrollTop=d))}function Ho(c,d,b,y){d=Math.max(0,Math.min(d,c.display.scroller.scrollWidth-c.display.scroller.clientWidth)),!((b?d==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-d)<2)&&!y)&&(c.doc.scrollLeft=d,Zc(c),c.display.scroller.scrollLeft!=d&&(c.display.scroller.scrollLeft=d),c.display.scrollbars.setScrollLeft(d))}function Ai(c){var d=c.display,b=d.gutters.offsetWidth,y=Math.round(c.doc.height+ua(c.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:c.options.fixedGutter?b:0,docHeight:y,scrollHeight:y+Nt(c)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:b}}var Bo=function(c,d,b){this.cm=b;var y=this.vert=Q("div",[Q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=Q("div",[Q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");y.tabIndex=C.tabIndex=-1,c(y),c(C),Zt(y,"scroll",function(){y.clientHeight&&d(y.scrollTop,"vertical")}),Zt(C,"scroll",function(){C.clientWidth&&d(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ft&&Ot<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Bo.prototype.update=function(c){var d=c.scrollWidth>c.clientWidth+1,b=c.scrollHeight>c.clientHeight+1,y=c.nativeBarWidth;if(b){this.vert.style.display="block",this.vert.style.bottom=d?y+"px":"0";var C=c.viewHeight-(d?y:0);this.vert.firstChild.style.height=Math.max(0,c.scrollHeight-c.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=b?y+"px":"0",this.horiz.style.left=c.barLeft+"px";var L=c.viewWidth-c.barLeft-(b?y:0);this.horiz.firstChild.style.width=Math.max(0,c.scrollWidth-c.clientWidth+L)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&c.clientHeight>0&&(y==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:b?y:0,bottom:d?y:0}},Bo.prototype.setScrollLeft=function(c){this.horiz.scrollLeft!=c&&(this.horiz.scrollLeft=c),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Bo.prototype.setScrollTop=function(c){this.vert.scrollTop!=c&&(this.vert.scrollTop=c),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Bo.prototype.zeroWidthHack=function(){var c=I&&!ct?"12px":"18px";this.horiz.style.height=this.vert.style.width=c,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new St,this.disableVert=new St},Bo.prototype.enableZeroWidthBar=function(c,d,b){c.style.visibility="";function y(){var C=c.getBoundingClientRect(),L=b=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1);L!=c?c.style.visibility="hidden":d.set(1e3,y)}d.set(1e3,y)},Bo.prototype.clear=function(){var c=this.horiz.parentNode;c.removeChild(this.horiz),c.removeChild(this.vert)};var cs=function(){};cs.prototype.update=function(){return{bottom:0,right:0}},cs.prototype.setScrollLeft=function(){},cs.prototype.setScrollTop=function(){},cs.prototype.clear=function(){};function Us(c,d){d||(d=Ai(c));var b=c.display.barWidth,y=c.display.barHeight;vl(c,d);for(var C=0;C<4&&b!=c.display.barWidth||y!=c.display.barHeight;C++)b!=c.display.barWidth&&c.options.lineWrapping&&gl(c),vl(c,Ai(c)),b=c.display.barWidth,y=c.display.barHeight}function vl(c,d){var b=c.display,y=b.scrollbars.update(d);b.sizer.style.paddingRight=(b.barWidth=y.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=y.bottom)+"px",b.heightForcer.style.borderBottom=y.bottom+"px solid transparent",y.right&&y.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=y.bottom+"px",b.scrollbarFiller.style.width=y.right+"px"):b.scrollbarFiller.style.display="",y.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=y.bottom+"px",b.gutterFiller.style.width=d.gutterWidth+"px"):b.gutterFiller.style.display=""}var ml={native:Bo,null:cs};function rf(c){c.display.scrollbars&&(c.display.scrollbars.clear(),c.display.scrollbars.addClass&&X(c.display.wrapper,c.display.scrollbars.addClass)),c.display.scrollbars=new ml[c.options.scrollbarStyle](function(d){c.display.wrapper.insertBefore(d,c.display.scrollbarFiller),Zt(d,"mousedown",function(){c.state.focused&&setTimeout(function(){return c.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,b){b=="horizontal"?Ho(c,d):xc(c,d)},c),c.display.scrollbars.addClass&&Yt(c.display.wrapper,c.display.scrollbars.addClass)}var xu=0;function Cc(c){c.curOp={cm:c,viewChanged:!1,startHeight:c.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xu,markArrays:null},cl(c.curOp)}function Ss(c){var d=c.curOp;d&&os(d,function(b){for(var y=0;y<b.ops.length;y++)b.ops[y].cm.curOp=null;Df(b)})}function Df(c){for(var d=c.ops,b=0;b<d.length;b++)Cu(d[b]);for(var y=0;y<d.length;y++)Su(d[y]);for(var C=0;C<d.length;C++)Ou(d[C]);for(var L=0;L<d.length;L++)wp(d[L]);for(var z=0;z<d.length;z++)Tu(d[z])}function Cu(c){var d=c.cm,b=d.display;_o(d),c.updateMaxLine&&Ii(d),c.mustUpdate=c.viewChanged||c.forceUpdate||c.scrollTop!=null||c.scrollToPos&&(c.scrollToPos.from.line<b.viewFrom||c.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&d.options.lineWrapping,c.update=c.mustUpdate&&new Oa(d,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}function Su(c){c.updatedDisplay=c.mustUpdate&&yl(c.cm,c.update)}function Ou(c){var d=c.cm,b=d.display;c.updatedDisplay&&gl(d),c.barMeasure=Ai(d),b.maxLineChanged&&!d.options.lineWrapping&&(c.adjustWidthTo=Ir(d,b.maxLine,b.maxLine.text.length).left+3,d.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+c.adjustWidthTo+Nt(d)+d.display.barWidth),c.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+c.adjustWidthTo-he(d))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=b.input.prepareSelection())}function wp(c){var d=c.cm;c.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<d.doc.scrollLeft&&Ho(d,Math.min(d.display.scroller.scrollLeft,c.maxScrollLeft),!0),d.display.maxLineChanged=!1);var b=c.focus&&c.focus==$t(Tt(d));c.preparedSelection&&d.display.input.showSelection(c.preparedSelection,b),(c.updatedDisplay||c.startHeight!=d.doc.height)&&Us(d,c.barMeasure),c.updatedDisplay&&Oc(d,c.barMeasure),c.selectionChanged&&Ju(d),d.state.focused&&c.updateInput&&d.display.input.reset(c.typing),b&&uc(c.cm)}function Tu(c){var d=c.cm,b=d.display,y=d.doc;if(c.updatedDisplay&&If(d,c.update),b.wheelStartX!=null&&(c.scrollTop!=null||c.scrollLeft!=null||c.scrollToPos)&&(b.wheelStartX=b.wheelStartY=null),c.scrollTop!=null&&Ma(d,c.scrollTop,c.forceScroll),c.scrollLeft!=null&&Ho(d,c.scrollLeft,!0,!0),c.scrollToPos){var C=bp(d,Xr(y,c.scrollToPos.from),Xr(y,c.scrollToPos.to),c.scrollToPos.margin);tf(d,C)}var L=c.maybeHiddenMarkers,z=c.maybeUnhiddenMarkers;if(L)for(var J=0;J<L.length;++J)L[J].lines.length||nn(L[J],"hide");if(z)for(var ut=0;ut<z.length;++ut)z[ut].lines.length&&nn(z[ut],"unhide");b.wrapper.offsetHeight&&(y.scrollTop=d.display.scroller.scrollTop),c.changeObjs&&nn(d,"changes",d,c.changeObjs),c.update&&c.update.finish()}function La(c,d){if(c.curOp)return d();Cc(c);try{return d()}finally{Ss(c)}}function Ti(c,d){return function(){if(c.curOp)return d.apply(c,arguments);Cc(c);try{return d.apply(c,arguments)}finally{Ss(c)}}}function Fn(c){return function(){if(this.curOp)return c.apply(this,arguments);Cc(this);try{return c.apply(this,arguments)}finally{Ss(this)}}}function Fi(c){return function(){var d=this.cm;if(!d||d.curOp)return c.apply(this,arguments);Cc(d);try{return c.apply(this,arguments)}finally{Ss(d)}}}function di(c,d){c.doc.highlightFrontier<c.display.viewTo&&c.state.highlight.set(d,zt(_p,c))}function _p(c){var d=c.doc;if(!(d.highlightFrontier>=c.display.viewTo)){var b=+new Date+c.options.workTime,y=gn(c,d.highlightFrontier),C=[];d.iter(y.line,Math.min(d.first+d.size,c.display.viewTo+500),function(L){if(y.line>=c.display.viewFrom){var z=L.styles,J=L.text.length>c.options.maxHighlightLength?Wo(d.mode,y.state):null,ut=Yr(c,L,y,!0);J&&(y.state=J),L.styles=ut.styles;var Pt=L.styleClasses,oe=ut.classes;oe?L.styleClasses=oe:Pt&&(L.styleClasses=null);for(var ve=!z||z.length!=L.styles.length||Pt!=oe&&(!Pt||!oe||Pt.bgClass!=oe.bgClass||Pt.textClass!=oe.textClass),Ue=0;!ve&&Ue<z.length;++Ue)ve=z[Ue]!=L.styles[Ue];ve&&C.push(y.line),L.stateAfter=y.save(),y.nextLine()}else L.text.length<=c.options.maxHighlightLength&&Mr(c,L.text,y),L.stateAfter=y.line%5==0?y.save():null,y.nextLine();if(+new Date>b)return di(c,c.options.workDelay),!0}),d.highlightFrontier=y.line,d.modeFrontier=Math.max(d.modeFrontier,y.line),C.length&&La(c,function(){for(var L=0;L<C.length;L++)dl(c,C[L],"text")})}}var Oa=function(c,d,b){var y=c.display;this.viewport=d,this.visible=Cs(y,c.doc,d),this.editorIsHidden=!y.wrapper.offsetWidth,this.wrapperHeight=y.wrapper.clientHeight,this.wrapperWidth=y.wrapper.clientWidth,this.oldDisplayWidth=he(c),this.force=b,this.dims=mu(c),this.events=[]};Oa.prototype.signal=function(c,d){tr(c,d)&&this.events.push(arguments)},Oa.prototype.finish=function(){for(var c=0;c<this.events.length;c++)nn.apply(null,this.events[c])};function _o(c){var d=c.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=Nt(c)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=Nt(c)+"px",d.scrollbarsClipped=!0)}function zs(c){if(c.hasFocus())return null;var d=$t(Tt(c));if(!d||!It(c.display.lineDiv,d))return null;var b={activeElt:d};if(window.getSelection){var y=jt(c).getSelection();y.anchorNode&&y.extend&&It(c.display.lineDiv,y.anchorNode)&&(b.anchorNode=y.anchorNode,b.anchorOffset=y.anchorOffset,b.focusNode=y.focusNode,b.focusOffset=y.focusOffset)}return b}function pc(c){if(!(!c||!c.activeElt||c.activeElt==$t(c.activeElt.ownerDocument))&&(c.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(c.activeElt.nodeName)&&c.anchorNode&&It(document.body,c.anchorNode)&&It(document.body,c.focusNode))){var d=c.activeElt.ownerDocument,b=d.defaultView.getSelection(),y=d.createRange();y.setEnd(c.anchorNode,c.anchorOffset),y.collapse(!1),b.removeAllRanges(),b.addRange(y),b.extend(c.focusNode,c.focusOffset)}}function yl(c,d){var b=c.display,y=c.doc;if(d.editorIsHidden)return Sa(c),!1;if(!d.force&&d.visible.from>=b.viewFrom&&d.visible.to<=b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&_s(c)==0)return!1;nf(c)&&(Sa(c),d.dims=mu(c));var C=y.first+y.size,L=Math.max(d.visible.from-c.options.viewportMargin,y.first),z=Math.min(C,d.visible.to+c.options.viewportMargin);b.viewFrom<L&&L-b.viewFrom<20&&(L=Math.max(y.first,b.viewFrom)),b.viewTo>z&&b.viewTo-z<20&&(z=Math.min(C,b.viewTo)),Go&&(L=Do(c.doc,L),z=li(c.doc,z));var J=L!=b.viewFrom||z!=b.viewTo||b.lastWrapHeight!=d.wrapperHeight||b.lastWrapWidth!=d.wrapperWidth;hl(c,L,z),b.viewOffset=pn($r(c.doc,b.viewFrom)),c.display.mover.style.top=b.viewOffset+"px";var ut=_s(c);if(!J&&ut==0&&!d.force&&b.renderedView==b.view&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo))return!1;var Pt=zs(c);return ut>4&&(b.lineDiv.style.display="none"),xp(c,b.updateLineNumbers,d.dims),ut>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,pc(Pt),tt(b.cursorDiv),tt(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,J&&(b.lastWrapHeight=d.wrapperHeight,b.lastWrapWidth=d.wrapperWidth,di(c,400)),b.updateLineNumbers=null,!0}function If(c,d){for(var b=d.viewport,y=!0;;y=!1){if(!y||!c.options.lineWrapping||d.oldDisplayWidth==he(c)){if(b&&b.top!=null&&(b={top:Math.min(c.doc.height+ua(c.display)-Oe(c),b.top)}),d.visible=Cs(c.display,c.doc,b),d.visible.from>=c.display.viewFrom&&d.visible.to<=c.display.viewTo)break}else y&&(d.visible=Cs(c.display,c.doc,b));if(!yl(c,d))break;gl(c);var C=Ai(c);xs(c),Us(c,C),Oc(c,C),d.force=!1}d.signal(c,"update",c),(c.display.viewFrom!=c.display.reportedViewFrom||c.display.viewTo!=c.display.reportedViewTo)&&(d.signal(c,"viewportChange",c,c.display.viewFrom,c.display.viewTo),c.display.reportedViewFrom=c.display.viewFrom,c.display.reportedViewTo=c.display.viewTo)}function Fl(c,d){var b=new Oa(c,d);if(yl(c,b)){gl(c),If(c,b);var y=Ai(c);xs(c),Us(c,y),Oc(c,y),b.finish()}}function xp(c,d,b){var y=c.display,C=c.options.lineNumbers,L=y.lineDiv,z=L.firstChild;function J(sr){var dr=sr.nextSibling;return q&&I&&c.display.currentWheelTarget==sr?sr.style.display="none":sr.parentNode.removeChild(sr),dr}for(var ut=y.view,Pt=y.viewFrom,oe=0;oe<ut.length;oe++){var ve=ut[oe];if(!ve.hidden)if(!ve.node||ve.node.parentNode!=L){var Ue=ni(c,ve,Pt,b);L.insertBefore(Ue,z)}else{for(;z!=ve.node;)z=J(z);var Fe=C&&d!=null&&d<=Pt&&ve.lineNumber;ve.changes&&(Vt(ve.changes,"gutter")>-1&&(Fe=!1),rc(c,ve,Pt,b)),Fe&&(tt(ve.lineNumber),ve.lineNumber.appendChild(document.createTextNode(En(c.options,Pt)))),z=ve.node.nextSibling}Pt+=ve.size}for(;z;)z=J(z)}function Sc(c){var d=c.gutters.offsetWidth;c.sizer.style.marginLeft=d+"px",Jo(c,"gutterChanged",c)}function Oc(c,d){c.display.sizer.style.minHeight=d.docHeight+"px",c.display.heightForcer.style.top=d.docHeight+"px",c.display.gutters.style.height=d.docHeight+c.display.barHeight+Nt(c)+"px"}function Zc(c){var d=c.display,b=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!c.options.fixedGutter))){for(var y=sc(d)-d.scroller.scrollLeft+c.doc.scrollLeft,C=d.gutters.offsetWidth,L=y+"px",z=0;z<b.length;z++)if(!b[z].hidden){c.options.fixedGutter&&(b[z].gutter&&(b[z].gutter.style.left=L),b[z].gutterBackground&&(b[z].gutterBackground.style.left=L));var J=b[z].alignable;if(J)for(var ut=0;ut<J.length;ut++)J[ut].style.left=L}c.options.fixedGutter&&(d.gutters.style.left=y+C+"px")}}function nf(c){if(!c.options.lineNumbers)return!1;var d=c.doc,b=En(c.options,d.first+d.size-1),y=c.display;if(b.length!=y.lineNumChars){var C=y.measure.appendChild(Q("div",[Q("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),L=C.firstChild.offsetWidth,z=C.offsetWidth-L;return y.lineGutter.style.width="",y.lineNumInnerWidth=Math.max(L,y.lineGutter.offsetWidth-z)+1,y.lineNumWidth=y.lineNumInnerWidth+z,y.lineNumChars=y.lineNumInnerWidth?b.length:-1,y.lineGutter.style.width=y.lineNumWidth+"px",Sc(c.display),!0}return!1}function ja(c,d){for(var b=[],y=!1,C=0;C<c.length;C++){var L=c[C],z=null;if(typeof L!="string"&&(z=L.style,L=L.className),L=="CodeMirror-linenumbers")if(d)y=!0;else continue;b.push({className:L,style:z})}return d&&!y&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function Xc(c){var d=c.gutters,b=c.gutterSpecs;tt(d),c.lineGutter=null;for(var y=0;y<b.length;++y){var C=b[y],L=C.className,z=C.style,J=d.appendChild(Q("div",null,"CodeMirror-gutter "+L));z&&(J.style.cssText=z),L=="CodeMirror-linenumbers"&&(c.lineGutter=J,J.style.width=(c.lineNumWidth||1)+"px")}d.style.display=b.length?"":"none",Sc(c)}function Rl(c){Xc(c.display),Vi(c),Zc(c)}function bl(c,d,b,y){var C=this;this.input=b,C.scrollbarFiller=Q("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=Q("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=_t("div",null,"CodeMirror-code"),C.selectionDiv=Q("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=Q("div",null,"CodeMirror-cursors"),C.measure=Q("div",null,"CodeMirror-measure"),C.lineMeasure=Q("div",null,"CodeMirror-measure"),C.lineSpace=_t("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var L=_t("div",[C.lineSpace],"CodeMirror-lines");C.mover=Q("div",[L],null,"position: relative"),C.sizer=Q("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=Q("div",null,null,"position: absolute; height: "+Me+"px; width: 1px;"),C.gutters=Q("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=Q("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=Q("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),K&&st>=105&&(C.wrapper.style.clipPath="inset(0px)"),C.wrapper.setAttribute("translate","no"),ft&&Ot<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),!q&&!(we&&R)&&(C.scroller.draggable=!0),c&&(c.appendChild?c.appendChild(C.wrapper):c(C.wrapper)),C.viewFrom=C.viewTo=d.first,C.reportedViewFrom=C.reportedViewTo=d.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=ja(y.gutters,y.lineNumbers),Xc(C),b.init(C)}var Tc=0,wl=null;ft?wl=-.53:we?wl=15:K?wl=-.7:B&&(wl=-1/3);function Nf(c){var d=c.wheelDeltaX,b=c.wheelDeltaY;return d==null&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(d=c.detail),b==null&&c.detail&&c.axis==c.VERTICAL_AXIS?b=c.detail:b==null&&(b=c.wheelDelta),{x:d,y:b}}function Cp(c){var d=Nf(c);return d.x*=wl,d.y*=wl,d}function Eu(c,d){K&&st==102&&(c.display.chromeScrollHack==null?c.display.sizer.style.pointerEvents="none":clearTimeout(c.display.chromeScrollHack),c.display.chromeScrollHack=setTimeout(function(){c.display.chromeScrollHack=null,c.display.sizer.style.pointerEvents=""},100));var b=Nf(d),y=b.x,C=b.y,L=wl;d.deltaMode===0&&(y=d.deltaX,C=d.deltaY,L=1);var z=c.display,J=z.scroller,ut=J.scrollWidth>J.clientWidth,Pt=J.scrollHeight>J.clientHeight;if(y&&ut||C&&Pt){if(C&&I&&q){t:for(var oe=d.target,ve=z.view;oe!=J;oe=oe.parentNode)for(var Ue=0;Ue<ve.length;Ue++)if(ve[Ue].node==oe){c.display.currentWheelTarget=oe;break t}}if(y&&!we&&!k&&L!=null){C&&Pt&&xc(c,Math.max(0,J.scrollTop+C*L)),Ho(c,Math.max(0,J.scrollLeft+y*L)),(!C||C&&Pt)&&Rt(d),z.wheelStartX=null;return}if(C&&L!=null){var Fe=C*L,sr=c.doc.scrollTop,dr=sr+z.wrapper.clientHeight;Fe<0?sr=Math.max(0,sr+Fe-50):dr=Math.min(c.doc.height,dr+Fe+50),Fl(c,{top:sr,bottom:dr})}Tc<20&&d.deltaMode!==0&&(z.wheelStartX==null?(z.wheelStartX=J.scrollLeft,z.wheelStartY=J.scrollTop,z.wheelDX=y,z.wheelDY=C,setTimeout(function(){if(z.wheelStartX!=null){var jr=J.scrollLeft-z.wheelStartX,Rr=J.scrollTop-z.wheelStartY,Kr=Rr&&z.wheelDY&&Rr/z.wheelDY||jr&&z.wheelDX&&jr/z.wheelDX;z.wheelStartX=z.wheelStartY=null,Kr&&(wl=(wl*Tc+Kr)/(Tc+1),++Tc)}},200)):(z.wheelDX+=y,z.wheelDY+=C))}}var Da=function(c,d){this.ranges=c,this.primIndex=d};Da.prototype.primary=function(){return this.ranges[this.primIndex]},Da.prototype.equals=function(c){if(c==this)return!0;if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var b=this.ranges[d],y=c.ranges[d];if(!ir(b.anchor,y.anchor)||!ir(b.head,y.head))return!1}return!0},Da.prototype.deepCopy=function(){for(var c=[],d=0;d<this.ranges.length;d++)c[d]=new Eo(pr(this.ranges[d].anchor),pr(this.ranges[d].head));return new Da(c,this.primIndex)},Da.prototype.somethingSelected=function(){for(var c=0;c<this.ranges.length;c++)if(!this.ranges[c].empty())return!0;return!1},Da.prototype.contains=function(c,d){d||(d=c);for(var b=0;b<this.ranges.length;b++){var y=this.ranges[b];if(Xt(d,y.from())>=0&&Xt(c,y.to())<=0)return b}return-1};var Eo=function(c,d){this.anchor=c,this.head=d};Eo.prototype.from=function(){return wn(this.anchor,this.head)},Eo.prototype.to=function(){return Hr(this.anchor,this.head)},Eo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function us(c,d,b){var y=c&&c.options.selectionsMayTouch,C=d[b];d.sort(function(Ue,Fe){return Xt(Ue.from(),Fe.from())}),b=Vt(d,C);for(var L=1;L<d.length;L++){var z=d[L],J=d[L-1],ut=Xt(J.to(),z.from());if(y&&!z.empty()?ut>0:ut>=0){var Pt=wn(J.from(),z.from()),oe=Hr(J.to(),z.to()),ve=J.empty()?z.from()==z.head:J.from()==J.head;L<=b&&--b,d.splice(--L,2,new Eo(ve?oe:Pt,ve?Pt:oe))}}return new Da(d,b)}function Ta(c,d){return new Da([new Eo(c,d||c)],0)}function _l(c){return c.text?rt(c.from.line+c.text.length-1,Xe(c.text).length+(c.text.length==1?c.from.ch:0)):c.to}function Jc(c,d){if(Xt(c,d.from)<0)return c;if(Xt(c,d.to)<=0)return _l(d);var b=c.line+d.text.length-(d.to.line-d.from.line)-1,y=c.ch;return c.line==d.to.line&&(y+=_l(d).ch-d.to.ch),rt(b,y)}function of(c,d){for(var b=[],y=0;y<c.sel.ranges.length;y++){var C=c.sel.ranges[y];b.push(new Eo(Jc(C.anchor,d),Jc(C.head,d)))}return us(c.cm,b,c.sel.primIndex)}function Pu(c,d,b){return c.line==d.line?rt(b.line,c.ch-d.ch+b.ch):rt(b.line+(c.line-d.line),c.ch)}function Vf(c,d,b){for(var y=[],C=rt(c.first,0),L=C,z=0;z<d.length;z++){var J=d[z],ut=Pu(J.from,C,L),Pt=Pu(_l(J),C,L);if(C=J.to,L=Pt,b=="around"){var oe=c.sel.ranges[z],ve=Xt(oe.head,oe.anchor)<0;y[z]=new Eo(ve?Pt:ut,ve?ut:Pt)}else y[z]=new Eo(ut,ut)}return new Da(y,c.sel.primIndex)}function af(c){c.doc.mode=yo(c.options,c.doc.modeOption),Ei(c)}function Ei(c){c.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),c.doc.modeFrontier=c.doc.highlightFrontier=c.doc.first,di(c,100),c.state.modeGen++,c.curOp&&Vi(c)}function ku(c,d){return d.from.ch==0&&d.to.ch==0&&Xe(d.text)==""&&(!c.cm||c.cm.options.wholeLineUpdateBefore)}function sf(c,d,b,y){function C(Kr){return b?b[Kr]:null}function L(Kr,zr,Zr){ia(Kr,zr,Zr,y),Jo(Kr,"change",Kr,d)}function z(Kr,zr){for(var Zr=[],mn=Kr;mn<zr;++mn)Zr.push(new Hi(Pt[mn],C(mn),y));return Zr}var J=d.from,ut=d.to,Pt=d.text,oe=$r(c,J.line),ve=$r(c,ut.line),Ue=Xe(Pt),Fe=C(Pt.length-1),sr=ut.line-J.line;if(d.full)c.insert(0,z(0,Pt.length)),c.remove(Pt.length,c.size-Pt.length);else if(ku(c,d)){var dr=z(0,Pt.length-1);L(ve,ve.text,Fe),sr&&c.remove(J.line,sr),dr.length&&c.insert(J.line,dr)}else if(oe==ve)if(Pt.length==1)L(oe,oe.text.slice(0,J.ch)+Ue+oe.text.slice(ut.ch),Fe);else{var jr=z(1,Pt.length-1);jr.push(new Hi(Ue+oe.text.slice(ut.ch),Fe,y)),L(oe,oe.text.slice(0,J.ch)+Pt[0],C(0)),c.insert(J.line+1,jr)}else if(Pt.length==1)L(oe,oe.text.slice(0,J.ch)+Pt[0]+ve.text.slice(ut.ch),C(0)),c.remove(J.line+1,sr);else{L(oe,oe.text.slice(0,J.ch)+Pt[0],C(0)),L(ve,Ue+ve.text.slice(ut.ch),Fe);var Rr=z(1,Pt.length-1);sr>1&&c.remove(J.line+1,sr-1),c.insert(J.line+1,Rr)}Jo(c,"change",c,d)}function Hl(c,d,b){function y(C,L,z){if(C.linked)for(var J=0;J<C.linked.length;++J){var ut=C.linked[J];if(ut.doc!=L){var Pt=z&&ut.sharedHist;b&&!Pt||(d(ut.doc,Pt),y(ut.doc,C,Pt))}}}y(c,null,!0)}function Ff(c,d){if(d.cm)throw new Error("This document is already in use.");c.doc=d,d.cm=c,yu(c),af(c),Ec(c),c.options.direction=d.direction,c.options.lineWrapping||Ii(c),c.options.mode=d.modeOption,Vi(c)}function Ec(c){(c.doc.direction=="rtl"?Yt:X)(c.display.lineDiv,"CodeMirror-rtl")}function Au(c){La(c,function(){Ec(c),Vi(c)})}function Mu(c){this.done=[],this.undone=[],this.undoDepth=c?c.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=c?c.maxGeneration:1}function Pc(c,d){var b={from:pr(d.from),to:_l(d),text:co(c,d.from,d.to)};return Ac(c,b,d.from.line,d.to.line+1),Hl(c,function(y){return Ac(y,b,d.from.line,d.to.line+1)},!0),b}function Rf(c){for(;c.length;){var d=Xe(c);if(d.ranges)c.pop();else break}}function kc(c,d){if(d)return Rf(c.done),Xe(c.done);if(c.done.length&&!Xe(c.done).ranges)return Xe(c.done);if(c.done.length>1&&!c.done[c.done.length-2].ranges)return c.done.pop(),Xe(c.done)}function Hf(c,d,b,y){var C=c.history;C.undone.length=0;var L=+new Date,z,J;if((C.lastOp==y||C.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&C.lastModTime>L-(c.cm?c.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(z=kc(C,C.lastOp==y)))J=Xe(z.changes),Xt(d.from,d.to)==0&&Xt(d.from,J.to)==0?J.to=_l(d):z.changes.push(Pc(c,d));else{var ut=Xe(C.done);for((!ut||!ut.ranges)&&Os(c.sel,C.done),z={changes:[Pc(c,d)],generation:C.generation},C.done.push(z);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(b),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=L,C.lastOp=C.lastSelOp=y,C.lastOrigin=C.lastSelOrigin=d.origin,J||nn(c,"historyAdded")}function Ws(c,d,b,y){var C=d.charAt(0);return C=="*"||C=="+"&&b.ranges.length==y.ranges.length&&b.somethingSelected()==y.somethingSelected()&&new Date-c.history.lastSelTime<=(c.cm?c.cm.options.historyEventDelay:500)}function Bf(c,d,b,y){var C=c.history,L=y&&y.origin;b==C.lastSelOp||L&&C.lastSelOrigin==L&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==L||Ws(c,L,Xe(C.done),d))?C.done[C.done.length-1]=d:Os(d,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=L,C.lastSelOp=b,y&&y.clearRedo!==!1&&Rf(C.undone)}function Os(c,d){var b=Xe(d);b&&b.ranges&&b.equals(c)||d.push(c)}function Ac(c,d,b,y){var C=d["spans_"+c.id],L=0;c.iter(Math.max(c.first,b),Math.min(c.first+c.size,y),function(z){z.markedSpans&&((C||(C=d["spans_"+c.id]={}))[L]=z.markedSpans),++L})}function Sp(c){if(!c)return null;for(var d,b=0;b<c.length;++b)c[b].marker.explicitlyCleared?d||(d=c.slice(0,b)):d&&d.push(c[b]);return d?d.length?d:null:c}function Uf(c,d){var b=d["spans_"+c.id];if(!b)return null;for(var y=[],C=0;C<d.text.length;++C)y.push(Sp(b[C]));return y}function zf(c,d){var b=Uf(c,d),y=Ca(c,d);if(!b)return y;if(!y)return b;for(var C=0;C<b.length;++C){var L=b[C],z=y[C];if(L&&z)t:for(var J=0;J<z.length;++J){for(var ut=z[J],Pt=0;Pt<L.length;++Pt)if(L[Pt].marker==ut.marker)continue t;L.push(ut)}else z&&(b[C]=z)}return b}function Ts(c,d,b){for(var y=[],C=0;C<c.length;++C){var L=c[C];if(L.ranges){y.push(b?Da.prototype.deepCopy.call(L):L);continue}var z=L.changes,J=[];y.push({changes:J});for(var ut=0;ut<z.length;++ut){var Pt=z[ut],oe=void 0;if(J.push({from:Pt.from,to:Pt.to,text:Pt.text}),d)for(var ve in Pt)(oe=ve.match(/^spans_(\d+)$/))&&Vt(d,Number(oe[1]))>-1&&(Xe(J)[ve]=Pt[ve],delete Pt[ve])}}return y}function Mc(c,d,b,y){if(y){var C=c.anchor;if(b){var L=Xt(d,C)<0;L!=Xt(b,C)<0?(C=d,d=b):L!=Xt(d,b)<0&&(d=b)}return new Eo(C,d)}else return new Eo(b||d,d)}function dc(c,d,b,y,C){C==null&&(C=c.cm&&(c.cm.display.shift||c.extend)),Mi(c,new Da([Mc(c.sel.primary(),d,b,C)],0),y)}function Qc(c,d,b){for(var y=[],C=c.cm&&(c.cm.display.shift||c.extend),L=0;L<c.sel.ranges.length;L++)y[L]=Mc(c.sel.ranges[L],d[L],null,C);var z=us(c.cm,y,c.sel.primIndex);Mi(c,z,b)}function lf(c,d,b,y){var C=c.sel.ranges.slice(0);C[d]=b,Mi(c,us(c.cm,C,c.sel.primIndex),y)}function Wf(c,d,b,y){Mi(c,Ta(d,b),y)}function Bl(c,d,b){var y={ranges:d.ranges,update:function(C){this.ranges=[];for(var L=0;L<C.length;L++)this.ranges[L]=new Eo(Xr(c,C[L].anchor),Xr(c,C[L].head))},origin:b&&b.origin};return nn(c,"beforeSelectionChange",c,y),c.cm&&nn(c.cm,"beforeSelectionChange",c.cm,y),y.ranges!=d.ranges?us(c.cm,y.ranges,y.ranges.length-1):d}function Es(c,d,b){var y=c.history.done,C=Xe(y);C&&C.ranges?(y[y.length-1]=d,Lu(c,d,b)):Mi(c,d,b)}function Mi(c,d,b){Lu(c,d,b),Bf(c,c.sel,c.cm?c.cm.curOp.id:NaN,b)}function Lu(c,d,b){(tr(c,"beforeSelectionChange")||c.cm&&tr(c.cm,"beforeSelectionChange"))&&(d=Bl(c,d,b));var y=b&&b.bias||(Xt(d.primary().head,c.sel.primary().head)<0?-1:1);$f(c,Ea(c,d,y,!0)),!(b&&b.scroll===!1)&&c.cm&&c.cm.getOption("readOnly")!="nocursor"&&$a(c.cm)}function $f(c,d){d.equals(c.sel)||(c.sel=d,c.cm&&(c.cm.curOp.updateInput=1,c.cm.curOp.selectionChanged=!0,wr(c.cm)),Jo(c,"cursorActivity",c))}function fa(c){$f(c,Ea(c,c.sel,null,!1))}function Ea(c,d,b,y){for(var C,L=0;L<d.ranges.length;L++){var z=d.ranges[L],J=d.ranges.length==c.sel.ranges.length&&c.sel.ranges[L],ut=gc(c,z.anchor,J&&J.anchor,b,y),Pt=z.head==z.anchor?ut:gc(c,z.head,J&&J.head,b,y);(C||ut!=z.anchor||Pt!=z.head)&&(C||(C=d.ranges.slice(0,L)),C[L]=new Eo(ut,Pt))}return C?us(c.cm,C,d.primIndex):d}function hc(c,d,b,y,C){var L=$r(c,d.line);if(L.markedSpans)for(var z=0;z<L.markedSpans.length;++z){var J=L.markedSpans[z],ut=J.marker,Pt="selectLeft"in ut?!ut.selectLeft:ut.inclusiveLeft,oe="selectRight"in ut?!ut.selectRight:ut.inclusiveRight;if((J.from==null||(Pt?J.from<=d.ch:J.from<d.ch))&&(J.to==null||(oe?J.to>=d.ch:J.to>d.ch))){if(C&&(nn(ut,"beforeCursorEnter"),ut.explicitlyCleared))if(L.markedSpans){--z;continue}else break;if(!ut.atomic)continue;if(b){var ve=ut.find(y<0?1:-1),Ue=void 0;if((y<0?oe:Pt)&&(ve=Lc(c,ve,-y,ve&&ve.line==d.line?L:null)),ve&&ve.line==d.line&&(Ue=Xt(ve,b))&&(y<0?Ue<0:Ue>0))return hc(c,ve,d,y,C)}var Fe=ut.find(y<0?-1:1);return(y<0?Pt:oe)&&(Fe=Lc(c,Fe,y,Fe.line==d.line?L:null)),Fe?hc(c,Fe,d,y,C):null}}return d}function gc(c,d,b,y,C){var L=y||1,z=hc(c,d,b,L,C)||!C&&hc(c,d,b,L,!0)||hc(c,d,b,-L,C)||!C&&hc(c,d,b,-L,!0);return z||(c.cantEdit=!0,rt(c.first,0))}function Lc(c,d,b,y){return b<0&&d.ch==0?d.line>c.first?Xr(c,rt(d.line-1)):null:b>0&&d.ch==(y||$r(c,d.line)).text.length?d.line<c.first+c.size-1?rt(d.line+1,0):null:new rt(d.line,d.ch+b)}function Gf(c){c.setSelection(rt(c.firstLine(),0),rt(c.lastLine()),Le)}function qf(c,d,b){var y={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return y.canceled=!0}};return b&&(y.update=function(C,L,z,J){C&&(y.from=Xr(c,C)),L&&(y.to=Xr(c,L)),z&&(y.text=z),J!==void 0&&(y.origin=J)}),nn(c,"beforeChange",c,y),c.cm&&nn(c.cm,"beforeChange",c.cm,y),y.canceled?(c.cm&&(c.cm.curOp.updateInput=2),null):{from:y.from,to:y.to,text:y.text,origin:y.origin}}function jc(c,d,b){if(c.cm){if(!c.cm.curOp)return Ti(c.cm,jc)(c,d,b);if(c.cm.state.suppressEdits)return}if(!((tr(c,"beforeChange")||c.cm&&tr(c.cm,"beforeChange"))&&(d=qf(c,d,!0),!d))){var y=il&&!b&&bi(c,d.from,d.to);if(y)for(var C=y.length-1;C>=0;--C)Kf(c,{from:y[C].from,to:y[C].to,text:C?[""]:d.text,origin:d.origin});else Kf(c,d)}}function Kf(c,d){if(!(d.text.length==1&&d.text[0]==""&&Xt(d.from,d.to)==0)){var b=of(c,d);Hf(c,d,b,c.cm?c.cm.curOp.id:NaN),Ul(c,d,b,Ca(c,d));var y=[];Hl(c,function(C,L){!L&&Vt(y,C.history)==-1&&(xl(C.history,d),y.push(C.history)),Ul(C,d,null,Ca(C,d))})}}function Ps(c,d,b){var y=c.cm&&c.cm.state.suppressEdits;if(!(y&&!b)){for(var C=c.history,L,z=c.sel,J=d=="undo"?C.done:C.undone,ut=d=="undo"?C.undone:C.done,Pt=0;Pt<J.length&&(L=J[Pt],!(b?L.ranges&&!L.equals(c.sel):!L.ranges));Pt++);if(Pt!=J.length){for(C.lastOrigin=C.lastSelOrigin=null;;)if(L=J.pop(),L.ranges){if(Os(L,ut),b&&!L.equals(c.sel)){Mi(c,L,{clearRedo:!1});return}z=L}else if(y){J.push(L);return}else break;var oe=[];Os(z,ut),ut.push({changes:oe,generation:C.generation}),C.generation=L.generation||++C.maxGeneration;for(var ve=tr(c,"beforeChange")||c.cm&&tr(c.cm,"beforeChange"),Ue=function(dr){var jr=L.changes[dr];if(jr.origin=d,ve&&!qf(c,jr,!1))return J.length=0,{};oe.push(Pc(c,jr));var Rr=dr?of(c,jr):Xe(J);Ul(c,jr,Rr,zf(c,jr)),!dr&&c.cm&&c.cm.scrollIntoView({from:jr.from,to:_l(jr)});var Kr=[];Hl(c,function(zr,Zr){!Zr&&Vt(Kr,zr.history)==-1&&(xl(zr.history,jr),Kr.push(zr.history)),Ul(zr,jr,null,zf(zr,jr))})},Fe=L.changes.length-1;Fe>=0;--Fe){var sr=Ue(Fe);if(sr)return sr.v}}}}function Dc(c,d){if(d!=0&&(c.first+=d,c.sel=new Da(at(c.sel.ranges,function(C){return new Eo(rt(C.anchor.line+d,C.anchor.ch),rt(C.head.line+d,C.head.ch))}),c.sel.primIndex),c.cm)){Vi(c.cm,c.first,c.first-d,d);for(var b=c.cm.display,y=b.viewFrom;y<b.viewTo;y++)dl(c.cm,y,"gutter")}}function Ul(c,d,b,y){if(c.cm&&!c.cm.curOp)return Ti(c.cm,Ul)(c,d,b,y);if(d.to.line<c.first){Dc(c,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>c.lastLine())){if(d.from.line<c.first){var C=d.text.length-1-(c.first-d.from.line);Dc(c,C),d={from:rt(c.first,0),to:rt(d.to.line+C,d.to.ch),text:[Xe(d.text)],origin:d.origin}}var L=c.lastLine();d.to.line>L&&(d={from:d.from,to:rt(L,$r(c,L).text.length),text:[d.text[0]],origin:d.origin}),d.removed=co(c,d.from,d.to),b||(b=of(c,d)),c.cm?ju(c.cm,d,y):sf(c,d,y),Lu(c,b,Le),c.cantEdit&&gc(c,rt(c.firstLine(),0))&&(c.cantEdit=!1)}}function ju(c,d,b){var y=c.doc,C=c.display,L=d.from,z=d.to,J=!1,ut=L.line;c.options.lineWrapping||(ut=fn(An($r(y,L.line))),y.iter(ut,z.line+1,function(Fe){if(Fe==C.maxLine)return J=!0,!0})),y.sel.contains(d.from,d.to)>-1&&wr(c),sf(y,d,b,fl(c)),c.options.lineWrapping||(y.iter(ut,L.line+d.text.length,function(Fe){var sr=ui(Fe);sr>C.maxLineLength&&(C.maxLine=Fe,C.maxLineLength=sr,C.maxLineChanged=!0,J=!1)}),J&&(c.curOp.updateMaxLine=!0)),xa(y,L.line),di(c,400);var Pt=d.text.length-(z.line-L.line)-1;d.full?Vi(c):L.line==z.line&&d.text.length==1&&!ku(c.doc,d)?dl(c,L.line,"text"):Vi(c,L.line,z.line+1,Pt);var oe=tr(c,"changes"),ve=tr(c,"change");if(ve||oe){var Ue={from:L,to:z,text:d.text,removed:d.removed,origin:d.origin};ve&&Jo(c,"change",c,Ue),oe&&(c.curOp.changeObjs||(c.curOp.changeObjs=[])).push(Ue)}c.display.selForContextMenu=null}function Ji(c,d,b,y,C){var L;y||(y=b),Xt(y,b)<0&&(L=[y,b],b=L[0],y=L[1]),typeof d=="string"&&(d=c.splitLines(d)),jc(c,{from:b,to:y,text:d,origin:C})}function vc(c,d,b,y){b<c.line?c.line+=y:d<c.line&&(c.line=d,c.ch=0)}function Yf(c,d,b,y){for(var C=0;C<c.length;++C){var L=c[C],z=!0;if(L.ranges){L.copied||(L=c[C]=L.deepCopy(),L.copied=!0);for(var J=0;J<L.ranges.length;J++)vc(L.ranges[J].anchor,d,b,y),vc(L.ranges[J].head,d,b,y);continue}for(var ut=0;ut<L.changes.length;++ut){var Pt=L.changes[ut];if(b<Pt.from.line)Pt.from=rt(Pt.from.line+y,Pt.from.ch),Pt.to=rt(Pt.to.line+y,Pt.to.ch);else if(d<=Pt.to.line){z=!1;break}}z||(c.splice(0,C+1),C=0)}}function xl(c,d){var b=d.from.line,y=d.to.line,C=d.text.length-(y-b)-1;Yf(c.done,b,y,C),Yf(c.undone,b,y,C)}function Ic(c,d,b,y){var C=d,L=d;return typeof d=="number"?L=$r(c,Nn(c,d)):C=fn(d),C==null?null:(y(L,C)&&c.cm&&dl(c.cm,C,b),L)}function $s(c){this.lines=c,this.parent=null;for(var d=0,b=0;b<c.length;++b)c[b].parent=this,d+=c[b].height;this.height=d}$s.prototype={chunkSize:function(){return this.lines.length},removeInner:function(c,d){for(var b=c,y=c+d;b<y;++b){var C=this.lines[b];this.height-=C.height,wi(C),Jo(C,"delete")}this.lines.splice(c,d)},collapse:function(c){c.push.apply(c,this.lines)},insertInner:function(c,d,b){this.height+=b,this.lines=this.lines.slice(0,c).concat(d).concat(this.lines.slice(c));for(var y=0;y<d.length;++y)d[y].parent=this},iterN:function(c,d,b){for(var y=c+d;c<y;++c)if(b(this.lines[c]))return!0}};function tu(c){this.children=c;for(var d=0,b=0,y=0;y<c.length;++y){var C=c[y];d+=C.chunkSize(),b+=C.height,C.parent=this}this.size=d,this.height=b,this.parent=null}tu.prototype={chunkSize:function(){return this.size},removeInner:function(c,d){this.size-=d;for(var b=0;b<this.children.length;++b){var y=this.children[b],C=y.chunkSize();if(c<C){var L=Math.min(d,C-c),z=y.height;if(y.removeInner(c,L),this.height-=z-y.height,C==L&&(this.children.splice(b--,1),y.parent=null),(d-=L)==0)break;c=0}else c-=C}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof $s))){var J=[];this.collapse(J),this.children=[new $s(J)],this.children[0].parent=this}},collapse:function(c){for(var d=0;d<this.children.length;++d)this.children[d].collapse(c)},insertInner:function(c,d,b){this.size+=d.length,this.height+=b;for(var y=0;y<this.children.length;++y){var C=this.children[y],L=C.chunkSize();if(c<=L){if(C.insertInner(c,d,b),C.lines&&C.lines.length>50){for(var z=C.lines.length%25+25,J=z;J<C.lines.length;){var ut=new $s(C.lines.slice(J,J+=25));C.height-=ut.height,this.children.splice(++y,0,ut),ut.parent=this}C.lines=C.lines.slice(0,z),this.maybeSpill()}break}c-=L}},maybeSpill:function(){if(!(this.children.length<=10)){var c=this;do{var d=c.children.splice(c.children.length-5,5),b=new tu(d);if(c.parent){c.size-=b.size,c.height-=b.height;var C=Vt(c.parent.children,c);c.parent.children.splice(C+1,0,b)}else{var y=new tu(c.children);y.parent=c,c.children=[y,b],c=y}b.parent=c.parent}while(c.children.length>10);c.parent.maybeSpill()}},iterN:function(c,d,b){for(var y=0;y<this.children.length;++y){var C=this.children[y],L=C.chunkSize();if(c<L){var z=Math.min(d,L-c);if(C.iterN(c,z,b))return!0;if((d-=z)==0)break;c=0}else c-=L}}};var zl=function(c,d,b){if(b)for(var y in b)b.hasOwnProperty(y)&&(this[y]=b[y]);this.doc=c,this.node=d};zl.prototype.clear=function(){var c=this.doc.cm,d=this.line.widgets,b=this.line,y=fn(b);if(!(y==null||!d)){for(var C=0;C<d.length;++C)d[C]==this&&d.splice(C--,1);d.length||(b.widgets=null);var L=ca(this);Lo(b,Math.max(0,b.height-L)),c&&(La(c,function(){mc(c,b,-L),dl(c,y,"widget")}),Jo(c,"lineWidgetCleared",c,this,y))}},zl.prototype.changed=function(){var c=this,d=this.height,b=this.doc.cm,y=this.line;this.height=null;var C=ca(this)-d;C&&(ci(this.doc,y)||Lo(y,y.height+C),b&&La(b,function(){b.curOp.forceUpdate=!0,mc(b,y,C),Jo(b,"lineWidgetChanged",b,c,fn(y))}))},Un(zl);function mc(c,d,b){pn(d)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&ls(c,b)}function Zf(c,d,b,y){var C=new zl(c,b,y),L=c.cm;return L&&C.noHScroll&&(L.display.alignWidgets=!0),Ic(c,d,"widget",function(z){var J=z.widgets||(z.widgets=[]);if(C.insertAt==null?J.push(C):J.splice(Math.min(J.length,Math.max(0,C.insertAt)),0,C),C.line=z,L&&!ci(c,z)){var ut=pn(z)<c.scrollTop;Lo(z,z.height+ca(C)),ut&&ls(L,C.height),L.curOp.forceUpdate=!0}return!0}),L&&Jo(L,"lineWidgetAdded",L,C,typeof d=="number"?d:fn(d)),C}var Cl=0,Gs=function(c,d){this.lines=[],this.type=d,this.doc=c,this.id=++Cl};Gs.prototype.clear=function(){if(!this.explicitlyCleared){var c=this.doc.cm,d=c&&!c.curOp;if(d&&Cc(c),tr(this,"clear")){var b=this.find();b&&Jo(this,"clear",b.from,b.to)}for(var y=null,C=null,L=0;L<this.lines.length;++L){var z=this.lines[L],J=si(z.markedSpans,this);c&&!this.collapsed?dl(c,fn(z),"text"):c&&(J.to!=null&&(C=fn(z)),J.from!=null&&(y=fn(z))),z.markedSpans=yi(z.markedSpans,J),J.from==null&&this.collapsed&&!ci(this.doc,z)&&c&&Lo(z,ac(c.display))}if(c&&this.collapsed&&!c.options.lineWrapping)for(var ut=0;ut<this.lines.length;++ut){var Pt=An(this.lines[ut]),oe=ui(Pt);oe>c.display.maxLineLength&&(c.display.maxLine=Pt,c.display.maxLineLength=oe,c.display.maxLineChanged=!0)}y!=null&&c&&this.collapsed&&Vi(c,y,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,c&&fa(c.doc)),c&&Jo(c,"markerCleared",c,this,y,C),d&&Ss(c),this.parent&&this.parent.clear()}},Gs.prototype.find=function(c,d){c==null&&this.type=="bookmark"&&(c=1);for(var b,y,C=0;C<this.lines.length;++C){var L=this.lines[C],z=si(L.markedSpans,this);if(z.from!=null&&(b=rt(d?L:fn(L),z.from),c==-1))return b;if(z.to!=null&&(y=rt(d?L:fn(L),z.to),c==1))return y}return b&&{from:b,to:y}},Gs.prototype.changed=function(){var c=this,d=this.find(-1,!0),b=this,y=this.doc.cm;!d||!y||La(y,function(){var C=d.line,L=fn(d.line),z=lt(y,L);if(z&&(dn(z),y.curOp.selectionChanged=y.curOp.forceUpdate=!0),y.curOp.updateMaxLine=!0,!ci(b.doc,C)&&b.height!=null){var J=b.height;b.height=null;var ut=ca(b)-J;ut&&Lo(C,C.height+ut)}Jo(y,"markerChanged",y,c)})},Gs.prototype.attachLine=function(c){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||Vt(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(c)},Gs.prototype.detachLine=function(c){if(this.lines.splice(Vt(this.lines,c),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Un(Gs);function Sl(c,d,b,y,C){if(y&&y.shared)return Op(c,d,b,y,C);if(c.cm&&!c.cm.curOp)return Ti(c.cm,Sl)(c,d,b,y,C);var L=new Gs(c,C),z=Xt(d,b);if(y&&Ht(y,L,!1),z>0||z==0&&L.clearWhenEmpty!==!1)return L;if(L.replacedWith&&(L.collapsed=!0,L.widgetNode=_t("span",[L.replacedWith],"CodeMirror-widget"),y.handleMouseEvents||L.widgetNode.setAttribute("cm-ignore-events","true"),y.insertLeft&&(L.widgetNode.insertLeft=!0)),L.collapsed){if(Zo(c,d.line,d,b,L)||d.line!=b.line&&Zo(c,b.line,d,b,L))throw new Error("Inserting collapsed marker partially overlapping an existing one");oa()}L.addToHistory&&Hf(c,{from:d,to:b,origin:"markText"},c.sel,NaN);var J=d.line,ut=c.cm,Pt;if(c.iter(J,b.line+1,function(ve){ut&&L.collapsed&&!ut.options.lineWrapping&&An(ve)==ut.display.maxLine&&(Pt=!0),L.collapsed&&J!=d.line&&Lo(ve,0),Ha(ve,new qi(L,J==d.line?d.ch:null,J==b.line?b.ch:null),c.cm&&c.cm.curOp),++J}),L.collapsed&&c.iter(d.line,b.line+1,function(ve){ci(c,ve)&&Lo(ve,0)}),L.clearOnEnter&&Zt(L,"beforeCursorEnter",function(){return L.clear()}),L.readOnly&&(al(),(c.history.done.length||c.history.undone.length)&&c.clearHistory()),L.collapsed&&(L.id=++Cl,L.atomic=!0),ut){if(Pt&&(ut.curOp.updateMaxLine=!0),L.collapsed)Vi(ut,d.line,b.line+1);else if(L.className||L.startStyle||L.endStyle||L.css||L.attributes||L.title)for(var oe=d.line;oe<=b.line;oe++)dl(ut,oe,"text");L.atomic&&fa(ut.doc),Jo(ut,"markerAdded",ut,L)}return L}var eu=function(c,d){this.markers=c,this.primary=d;for(var b=0;b<c.length;++b)c[b].parent=this};eu.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var c=0;c<this.markers.length;++c)this.markers[c].clear();Jo(this,"clear")}},eu.prototype.find=function(c,d){return this.primary.find(c,d)},Un(eu);function Op(c,d,b,y,C){y=Ht(y),y.shared=!1;var L=[Sl(c,d,b,y,C)],z=L[0],J=y.widgetNode;return Hl(c,function(ut){J&&(y.widgetNode=J.cloneNode(!0)),L.push(Sl(ut,Xr(ut,d),Xr(ut,b),y,C));for(var Pt=0;Pt<ut.linked.length;++Pt)if(ut.linked[Pt].isParent)return;z=Xe(L)}),new eu(L,z)}function Du(c){return c.findMarks(rt(c.first,0),c.clipPos(rt(c.lastLine())),function(d){return d.parent})}function cf(c,d){for(var b=0;b<d.length;b++){var y=d[b],C=y.find(),L=c.clipPos(C.from),z=c.clipPos(C.to);if(Xt(L,z)){var J=Sl(c,L,z,y.primary,y.primary.type);y.markers.push(J),J.parent=y}}}function Iu(c){for(var d=function(y){var C=c[y],L=[C.primary.doc];Hl(C.primary.doc,function(ut){return L.push(ut)});for(var z=0;z<C.markers.length;z++){var J=C.markers[z];Vt(L,J.doc)==-1&&(J.parent=null,C.markers.splice(z--,1))}},b=0;b<c.length;b++)d(b)}var Xf=0,Pa=function(c,d,b,y,C){if(!(this instanceof Pa))return new Pa(c,d,b,y,C);b==null&&(b=0),tu.call(this,[new $s([new Hi("",null)])]),this.first=b,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=b;var L=rt(b,0);this.sel=Ta(L),this.history=new Mu(null),this.id=++Xf,this.modeOption=d,this.lineSep=y,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof c=="string"&&(c=this.splitLines(c)),sf(this,{from:L,to:L,text:c}),Mi(this,Ta(L),Le)};Pa.prototype=ye(tu.prototype,{constructor:Pa,iter:function(c,d,b){b?this.iterN(c-this.first,d-c,b):this.iterN(this.first,this.first+this.size,c)},insert:function(c,d){for(var b=0,y=0;y<d.length;++y)b+=d[y].height;this.insertInner(c-this.first,d,b)},remove:function(c,d){this.removeInner(c-this.first,d)},getValue:function(c){var d=Jn(this,this.first,this.first+this.size);return c===!1?d:d.join(c||this.lineSeparator())},setValue:Fi(function(c){var d=rt(this.first,0),b=this.first+this.size-1;jc(this,{from:d,to:rt(b,$r(this,b).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),this.cm&&fc(this.cm,0,0),Mi(this,Ta(d),Le)}),replaceRange:function(c,d,b,y){d=Xr(this,d),b=b?Xr(this,b):d,Ji(this,c,d,b,y)},getRange:function(c,d,b){var y=co(this,Xr(this,c),Xr(this,d));return b===!1?y:b===""?y.join(""):y.join(b||this.lineSeparator())},getLine:function(c){var d=this.getLineHandle(c);return d&&d.text},getLineHandle:function(c){if(bo(this,c))return $r(this,c)},getLineNumber:function(c){return fn(c)},getLineHandleVisualStart:function(c){return typeof c=="number"&&(c=$r(this,c)),An(c)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(c){return Xr(this,c)},getCursor:function(c){var d=this.sel.primary(),b;return c==null||c=="head"?b=d.head:c=="anchor"?b=d.anchor:c=="end"||c=="to"||c===!1?b=d.to():b=d.from(),b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Fi(function(c,d,b){Wf(this,Xr(this,typeof c=="number"?rt(c,d||0):c),null,b)}),setSelection:Fi(function(c,d,b){Wf(this,Xr(this,c),Xr(this,d||c),b)}),extendSelection:Fi(function(c,d,b){dc(this,Xr(this,c),d&&Xr(this,d),b)}),extendSelections:Fi(function(c,d){Qc(this,Mt(this,c),d)}),extendSelectionsBy:Fi(function(c,d){var b=at(this.sel.ranges,c);Qc(this,Mt(this,b),d)}),setSelections:Fi(function(c,d,b){if(c.length){for(var y=[],C=0;C<c.length;C++)y[C]=new Eo(Xr(this,c[C].anchor),Xr(this,c[C].head||c[C].anchor));d==null&&(d=Math.min(c.length-1,this.sel.primIndex)),Mi(this,us(this.cm,y,d),b)}}),addSelection:Fi(function(c,d,b){var y=this.sel.ranges.slice(0);y.push(new Eo(Xr(this,c),Xr(this,d||c))),Mi(this,us(this.cm,y,y.length-1),b)}),getSelection:function(c){for(var d=this.sel.ranges,b,y=0;y<d.length;y++){var C=co(this,d[y].from(),d[y].to());b=b?b.concat(C):C}return c===!1?b:b.join(c||this.lineSeparator())},getSelections:function(c){for(var d=[],b=this.sel.ranges,y=0;y<b.length;y++){var C=co(this,b[y].from(),b[y].to());c!==!1&&(C=C.join(c||this.lineSeparator())),d[y]=C}return d},replaceSelection:function(c,d,b){for(var y=[],C=0;C<this.sel.ranges.length;C++)y[C]=c;this.replaceSelections(y,d,b||"+input")},replaceSelections:Fi(function(c,d,b){for(var y=[],C=this.sel,L=0;L<C.ranges.length;L++){var z=C.ranges[L];y[L]={from:z.from(),to:z.to(),text:this.splitLines(c[L]),origin:b}}for(var J=d&&d!="end"&&Vf(this,y,d),ut=y.length-1;ut>=0;ut--)jc(this,y[ut]);J?Es(this,J):this.cm&&$a(this.cm)}),undo:Fi(function(){Ps(this,"undo")}),redo:Fi(function(){Ps(this,"redo")}),undoSelection:Fi(function(){Ps(this,"undo",!0)}),redoSelection:Fi(function(){Ps(this,"redo",!0)}),setExtending:function(c){this.extend=c},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,d=0,b=0,y=0;y<c.done.length;y++)c.done[y].ranges||++d;for(var C=0;C<c.undone.length;C++)c.undone[C].ranges||++b;return{undo:d,redo:b}},clearHistory:function(){var c=this;this.history=new Mu(this.history),Hl(this,function(d){return d.history=c.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(c){return c&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(c){return this.history.generation==(c||this.cleanGeneration)},getHistory:function(){return{done:Ts(this.history.done),undone:Ts(this.history.undone)}},setHistory:function(c){var d=this.history=new Mu(this.history);d.done=Ts(c.done.slice(0),null,!0),d.undone=Ts(c.undone.slice(0),null,!0)},setGutterMarker:Fi(function(c,d,b){return Ic(this,c,"gutter",function(y){var C=y.gutterMarkers||(y.gutterMarkers={});return C[d]=b,!b&&se(C)&&(y.gutterMarkers=null),!0})}),clearGutter:Fi(function(c){var d=this;this.iter(function(b){b.gutterMarkers&&b.gutterMarkers[c]&&Ic(d,b,"gutter",function(){return b.gutterMarkers[c]=null,se(b.gutterMarkers)&&(b.gutterMarkers=null),!0})})}),lineInfo:function(c){var d;if(typeof c=="number"){if(!bo(this,c)||(d=c,c=$r(this,c),!c))return null}else if(d=fn(c),d==null)return null;return{line:d,handle:c,text:c.text,gutterMarkers:c.gutterMarkers,textClass:c.textClass,bgClass:c.bgClass,wrapClass:c.wrapClass,widgets:c.widgets}},addLineClass:Fi(function(c,d,b){return Ic(this,c,d=="gutter"?"gutter":"class",function(y){var C=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!y[C])y[C]=b;else{if(it(b).test(y[C]))return!1;y[C]+=" "+b}return!0})}),removeLineClass:Fi(function(c,d,b){return Ic(this,c,d=="gutter"?"gutter":"class",function(y){var C=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",L=y[C];if(L)if(b==null)y[C]=null;else{var z=L.match(it(b));if(!z)return!1;var J=z.index+z[0].length;y[C]=L.slice(0,z.index)+(!z.index||J==L.length?"":" ")+L.slice(J)||null}else return!1;return!0})}),addLineWidget:Fi(function(c,d,b){return Zf(this,c,d,b)}),removeLineWidget:function(c){c.clear()},markText:function(c,d,b){return Sl(this,Xr(this,c),Xr(this,d),b,b&&b.type||"range")},setBookmark:function(c,d){var b={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return c=Xr(this,c),Sl(this,c,c,b,"bookmark")},findMarksAt:function(c){c=Xr(this,c);var d=[],b=$r(this,c.line).markedSpans;if(b)for(var y=0;y<b.length;++y){var C=b[y];(C.from==null||C.from<=c.ch)&&(C.to==null||C.to>=c.ch)&&d.push(C.marker.parent||C.marker)}return d},findMarks:function(c,d,b){c=Xr(this,c),d=Xr(this,d);var y=[],C=c.line;return this.iter(c.line,d.line+1,function(L){var z=L.markedSpans;if(z)for(var J=0;J<z.length;J++){var ut=z[J];!(ut.to!=null&&C==c.line&&c.ch>=ut.to||ut.from==null&&C!=c.line||ut.from!=null&&C==d.line&&ut.from>=d.ch)&&(!b||b(ut.marker))&&y.push(ut.marker.parent||ut.marker)}++C}),y},getAllMarks:function(){var c=[];return this.iter(function(d){var b=d.markedSpans;if(b)for(var y=0;y<b.length;++y)b[y].from!=null&&c.push(b[y].marker)}),c},posFromIndex:function(c){var d,b=this.first,y=this.lineSeparator().length;return this.iter(function(C){var L=C.text.length+y;if(L>c)return d=c,!0;c-=L,++b}),Xr(this,rt(b,d))},indexFromPos:function(c){c=Xr(this,c);var d=c.ch;if(c.line<this.first||c.ch<0)return 0;var b=this.lineSeparator().length;return this.iter(this.first,c.line,function(y){d+=y.text.length+b}),d},copy:function(c){var d=new Pa(Jn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,c&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(c){c||(c={});var d=this.first,b=this.first+this.size;c.from!=null&&c.from>d&&(d=c.from),c.to!=null&&c.to<b&&(b=c.to);var y=new Pa(Jn(this,d,b),c.mode||this.modeOption,d,this.lineSep,this.direction);return c.sharedHist&&(y.history=this.history),(this.linked||(this.linked=[])).push({doc:y,sharedHist:c.sharedHist}),y.linked=[{doc:this,isParent:!0,sharedHist:c.sharedHist}],cf(y,Du(this)),y},unlinkDoc:function(c){if(c instanceof Ur&&(c=c.doc),this.linked)for(var d=0;d<this.linked.length;++d){var b=this.linked[d];if(b.doc==c){this.linked.splice(d,1),c.unlinkDoc(this),Iu(Du(this));break}}if(c.history==this.history){var y=[c.id];Hl(c,function(C){return y.push(C.id)},!0),c.history=new Mu(null),c.history.done=Ts(this.history.done,y),c.history.undone=Ts(this.history.undone,y)}},iterLinkedDocs:function(c){Hl(this,c)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(c){return this.lineSep?c.split(this.lineSep):Dn(c)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Fi(function(c){c!="rtl"&&(c="ltr"),c!=this.direction&&(this.direction=c,this.iter(function(d){return d.order=null}),this.cm&&Au(this.cm))})}),Pa.prototype.eachLine=Pa.prototype.iter;var ru=0;function Nu(c){var d=this;if(Vc(d),!(tn(d,c)||Xi(d.display,c))){Rt(c),ft&&(ru=+new Date);var b=pl(d,c,!0),y=c.dataTransfer.files;if(!(!b||d.isReadOnly()))if(y&&y.length&&window.FileReader&&window.File)for(var C=y.length,L=Array(C),z=0,J=function(){++z==C&&Ti(d,function(){b=Xr(d.doc,b);var Fe={from:b,to:b,text:d.doc.splitLines(L.filter(function(sr){return sr!=null}).join(d.doc.lineSeparator())),origin:"paste"};jc(d.doc,Fe),Es(d.doc,Ta(Xr(d.doc,b),Xr(d.doc,_l(Fe))))})()},ut=function(Fe,sr){if(d.options.allowDropFileTypes&&Vt(d.options.allowDropFileTypes,Fe.type)==-1){J();return}var dr=new FileReader;dr.onerror=function(){return J()},dr.onload=function(){var jr=dr.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(jr)){J();return}L[sr]=jr,J()},dr.readAsText(Fe)},Pt=0;Pt<y.length;Pt++)ut(y[Pt],Pt);else{if(d.state.draggingText&&d.doc.sel.contains(b)>-1){d.state.draggingText(c),setTimeout(function(){return d.display.input.focus()},20);return}try{var oe=c.dataTransfer.getData("Text");if(oe){var ve;if(d.state.draggingText&&!d.state.draggingText.copy&&(ve=d.listSelections()),Lu(d.doc,Ta(b,b)),ve)for(var Ue=0;Ue<ve.length;++Ue)Ji(d.doc,"",ve[Ue].anchor,ve[Ue].head,"drag");d.replaceSelection(oe,"around","paste"),d.display.input.focus()}}catch{}}}}function Nc(c,d){if(ft&&(!c.state.draggingText||+new Date-ru<100)){Je(d);return}if(!(tn(c,d)||Xi(c.display,d))&&(d.dataTransfer.setData("Text",c.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!B)){var b=Q("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(b.width=b.height=1,c.display.wrapper.appendChild(b),b._top=b.offsetTop),d.dataTransfer.setDragImage(b,0,0),k&&b.parentNode.removeChild(b)}}function uf(c,d){var b=pl(c,d);if(b){var y=document.createDocumentFragment();cc(c,b,y),c.display.dragCursor||(c.display.dragCursor=Q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),xt(c.display.dragCursor,y)}}function Vc(c){c.display.dragCursor&&(c.display.lineSpace.removeChild(c.display.dragCursor),c.display.dragCursor=null)}function nu(c){if(document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),b=[],y=0;y<d.length;y++){var C=d[y].CodeMirror;C&&b.push(C)}b.length&&b[0].operation(function(){for(var L=0;L<b.length;L++)c(b[L])})}}var Tp=!1;function Jf(){Tp||(Ep(),Tp=!0)}function Ep(){var c;Zt(window,"resize",function(){c==null&&(c=setTimeout(function(){c=null,nu(Pp)},100))}),Zt(window,"blur",function(){return nu(ss)})}function Pp(c){var d=c.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,c.setSize()}for(var qs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fc=0;Fc<10;Fc++)qs[Fc+48]=qs[Fc+96]=String(Fc);for(var Wl=65;Wl<=90;Wl++)qs[Wl]=String.fromCharCode(Wl);for(var ks=1;ks<=12;ks++)qs[ks+111]=qs[ks+63235]="F"+ks;var As={};As.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},As.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},As.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},As.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},As.default=I?As.macDefault:As.pcDefault;function ou(c){var d=c.split(/-(?!$)/);c=d[d.length-1];for(var b,y,C,L,z=0;z<d.length-1;z++){var J=d[z];if(/^(cmd|meta|m)$/i.test(J))L=!0;else if(/^a(lt)?$/i.test(J))b=!0;else if(/^(c|ctrl|control)$/i.test(J))y=!0;else if(/^s(hift)?$/i.test(J))C=!0;else throw new Error("Unrecognized modifier name: "+J)}return b&&(c="Alt-"+c),y&&(c="Ctrl-"+c),L&&(c="Cmd-"+c),C&&(c="Shift-"+c),c}function Ol(c){var d={};for(var b in c)if(c.hasOwnProperty(b)){var y=c[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if(y=="..."){delete c[b];continue}for(var C=at(b.split(" "),ou),L=0;L<C.length;L++){var z=void 0,J=void 0;L==C.length-1?(J=C.join(" "),z=y):(J=C.slice(0,L+1).join(" "),z="...");var ut=d[J];if(!ut)d[J]=z;else if(ut!=z)throw new Error("Inconsistent bindings for "+J)}delete c[b]}for(var Pt in d)c[Pt]=d[Pt];return c}function $l(c,d,b,y){d=Tl(d);var C=d.call?d.call(c,y):d[c];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&b(C))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return $l(c,d.fallthrough,b,y);for(var L=0;L<d.fallthrough.length;L++){var z=$l(c,d.fallthrough[L],b,y);if(z)return z}}}function hi(c){var d=typeof c=="string"?c:qs[c.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function Qf(c,d,b){var y=c;return d.altKey&&y!="Alt"&&(c="Alt-"+c),(V?d.metaKey:d.ctrlKey)&&y!="Ctrl"&&(c="Ctrl-"+c),(V?d.ctrlKey:d.metaKey)&&y!="Mod"&&(c="Cmd-"+c),!b&&d.shiftKey&&y!="Shift"&&(c="Shift-"+c),c}function Uo(c,d){if(k&&c.keyCode==34&&c.char)return!1;var b=qs[c.keyCode];return b==null||c.altGraphKey?!1:(c.keyCode==3&&c.code&&(b=c.code),Qf(b,c,d))}function Tl(c){return typeof c=="string"?As[c]:c}function fs(c,d){for(var b=c.doc.sel.ranges,y=[],C=0;C<b.length;C++){for(var L=d(b[C]);y.length&&Xt(L.from,Xe(y).to)<=0;){var z=y.pop();if(Xt(z.from,L.from)<0){L.from=z.from;break}}y.push(L)}La(c,function(){for(var J=y.length-1;J>=0;J--)Ji(c.doc,"",y[J].from,y[J].to,"+delete");$a(c)})}function Ia(c,d,b){var y=er(c.text,d+b,b);return y<0||y>c.text.length?null:y}function Rc(c,d,b){var y=Ia(c,d.ch,b);return y==null?null:new rt(d.line,y,b<0?"after":"before")}function Hc(c,d,b,y,C){if(c){d.doc.direction=="rtl"&&(C=-C);var L=Ft(b,d.doc.direction);if(L){var z=C<0?Xe(L):L[0],J=C<0==(z.level==1),ut=J?"after":"before",Pt;if(z.level>0||d.doc.direction=="rtl"){var oe=Lt(d,b);Pt=C<0?b.text.length-1:0;var ve=ce(d,oe,Pt).top;Pt=Dr(function(Ue){return ce(d,oe,Ue).top==ve},C<0==(z.level==1)?z.from:z.to-1,Pt),ut=="before"&&(Pt=Ia(b,Pt,1))}else Pt=C<0?z.to:z.from;return new rt(y,Pt,ut)}}return new rt(y,C<0?b.text.length:0,C<0?"before":"after")}function ff(c,d,b,y){var C=Ft(d,c.doc.direction);if(!C)return Rc(d,b,y);b.ch>=d.text.length?(b.ch=d.text.length,b.sticky="before"):b.ch<=0&&(b.ch=0,b.sticky="after");var L=Wt(C,b.ch,b.sticky),z=C[L];if(c.doc.direction=="ltr"&&z.level%2==0&&(y>0?z.to>b.ch:z.from<b.ch))return Rc(d,b,y);var J=function(Rr,Kr){return Ia(d,Rr instanceof rt?Rr.ch:Rr,Kr)},ut,Pt=function(Rr){return c.options.lineWrapping?(ut=ut||Lt(c,d),Rs(c,d,ut,Rr)):{begin:0,end:d.text.length}},oe=Pt(b.sticky=="before"?J(b,-1):b.ch);if(c.doc.direction=="rtl"||z.level==1){var ve=z.level==1==y<0,Ue=J(b,ve?1:-1);if(Ue!=null&&(ve?Ue<=z.to&&Ue<=oe.end:Ue>=z.from&&Ue>=oe.begin)){var Fe=ve?"before":"after";return new rt(b.line,Ue,Fe)}}var sr=function(Rr,Kr,zr){for(var Zr=function(qo,da){return da?new rt(b.line,J(qo,1),"before"):new rt(b.line,qo,"after")};Rr>=0&&Rr<C.length;Rr+=Kr){var mn=C[Rr],un=Kr>0==(mn.level!=1),Yn=un?zr.begin:J(zr.end,-1);if(mn.from<=Yn&&Yn<mn.to||(Yn=un?mn.from:J(mn.to,-1),zr.begin<=Yn&&Yn<zr.end))return Zr(Yn,un)}},dr=sr(L+y,y,oe);if(dr)return dr;var jr=y>0?oe.end:J(oe.begin,-1);return jr!=null&&!(y>0&&jr==d.text.length)&&(dr=sr(y>0?0:C.length-1,y,Pt(jr)),dr)?dr:null}var Gl={selectAll:Gf,singleSelection:function(c){return c.setSelection(c.getCursor("anchor"),c.getCursor("head"),Le)},killLine:function(c){return fs(c,function(d){if(d.empty()){var b=$r(c.doc,d.head.line).text.length;return d.head.ch==b&&d.head.line<c.lastLine()?{from:d.head,to:rt(d.head.line+1,0)}:{from:d.head,to:rt(d.head.line,b)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(c){return fs(c,function(d){return{from:rt(d.from().line,0),to:Xr(c.doc,rt(d.to().line+1,0))}})},delLineLeft:function(c){return fs(c,function(d){return{from:rt(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(c){return fs(c,function(d){var b=c.charCoords(d.head,"div").top+5,y=c.coordsChar({left:0,top:b},"div");return{from:y,to:d.from()}})},delWrappedLineRight:function(c){return fs(c,function(d){var b=c.charCoords(d.head,"div").top+5,y=c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:b},"div");return{from:d.from(),to:y}})},undo:function(c){return c.undo()},redo:function(c){return c.redo()},undoSelection:function(c){return c.undoSelection()},redoSelection:function(c){return c.redoSelection()},goDocStart:function(c){return c.extendSelection(rt(c.firstLine(),0))},goDocEnd:function(c){return c.extendSelection(rt(c.lastLine()))},goLineStart:function(c){return c.extendSelectionsBy(function(d){return pf(c,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(c){return c.extendSelectionsBy(function(d){return tp(c,d.head)},{origin:"+move",bias:1})},goLineEnd:function(c){return c.extendSelectionsBy(function(d){return df(c,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(c){return c.extendSelectionsBy(function(d){var b=c.cursorCoords(d.head,"div").top+5;return c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:b},"div")},Er)},goLineLeft:function(c){return c.extendSelectionsBy(function(d){var b=c.cursorCoords(d.head,"div").top+5;return c.coordsChar({left:0,top:b},"div")},Er)},goLineLeftSmart:function(c){return c.extendSelectionsBy(function(d){var b=c.cursorCoords(d.head,"div").top+5,y=c.coordsChar({left:0,top:b},"div");return y.ch<c.getLine(y.line).search(/\S/)?tp(c,d.head):y},Er)},goLineUp:function(c){return c.moveV(-1,"line")},goLineDown:function(c){return c.moveV(1,"line")},goPageUp:function(c){return c.moveV(-1,"page")},goPageDown:function(c){return c.moveV(1,"page")},goCharLeft:function(c){return c.moveH(-1,"char")},goCharRight:function(c){return c.moveH(1,"char")},goColumnLeft:function(c){return c.moveH(-1,"column")},goColumnRight:function(c){return c.moveH(1,"column")},goWordLeft:function(c){return c.moveH(-1,"word")},goGroupRight:function(c){return c.moveH(1,"group")},goGroupLeft:function(c){return c.moveH(-1,"group")},goWordRight:function(c){return c.moveH(1,"word")},delCharBefore:function(c){return c.deleteH(-1,"codepoint")},delCharAfter:function(c){return c.deleteH(1,"char")},delWordBefore:function(c){return c.deleteH(-1,"word")},delWordAfter:function(c){return c.deleteH(1,"word")},delGroupBefore:function(c){return c.deleteH(-1,"group")},delGroupAfter:function(c){return c.deleteH(1,"group")},indentAuto:function(c){return c.indentSelection("smart")},indentMore:function(c){return c.indentSelection("add")},indentLess:function(c){return c.indentSelection("subtract")},insertTab:function(c){return c.replaceSelection("	")},insertSoftTab:function(c){for(var d=[],b=c.listSelections(),y=c.options.tabSize,C=0;C<b.length;C++){var L=b[C].from(),z=Dt(c.getLine(L.line),L.ch,y);d.push(Fr(y-z%y))}c.replaceSelections(d)},defaultTab:function(c){c.somethingSelected()?c.indentSelection("add"):c.execCommand("insertTab")},transposeChars:function(c){return La(c,function(){for(var d=c.listSelections(),b=[],y=0;y<d.length;y++)if(d[y].empty()){var C=d[y].head,L=$r(c.doc,C.line).text;if(L){if(C.ch==L.length&&(C=new rt(C.line,C.ch-1)),C.ch>0)C=new rt(C.line,C.ch+1),c.replaceRange(L.charAt(C.ch-1)+L.charAt(C.ch-2),rt(C.line,C.ch-2),C,"+transpose");else if(C.line>c.doc.first){var z=$r(c.doc,C.line-1).text;z&&(C=new rt(C.line,1),c.replaceRange(L.charAt(0)+c.doc.lineSeparator()+z.charAt(z.length-1),rt(C.line-1,z.length-1),C,"+transpose"))}}b.push(new Eo(C,C))}c.setSelections(b)})},newlineAndIndent:function(c){return La(c,function(){for(var d=c.listSelections(),b=d.length-1;b>=0;b--)c.replaceRange(c.doc.lineSeparator(),d[b].anchor,d[b].head,"+input");d=c.listSelections();for(var y=0;y<d.length;y++)c.indentLine(d[y].from().line,null,!0);$a(c)})},openLine:function(c){return c.replaceSelection(`
`,"start")},toggleOverwrite:function(c){return c.toggleOverwrite()}};function pf(c,d){var b=$r(c.doc,d),y=An(b);return y!=b&&(d=fn(y)),Hc(!0,c,y,d,1)}function df(c,d){var b=$r(c.doc,d),y=vs(b);return y!=b&&(d=fn(y)),Hc(!0,c,b,d,-1)}function tp(c,d){var b=pf(c,d.line),y=$r(c.doc,b.line),C=Ft(y,c.doc.direction);if(!C||C[0].level==0){var L=Math.max(b.ch,y.text.search(/\S/)),z=d.line==b.line&&d.ch<=L&&d.ch;return rt(b.line,z?0:L,b.sticky)}return b}function El(c,d,b){if(typeof d=="string"&&(d=Gl[d],!d))return!1;c.display.input.ensurePolled();var y=c.display.shift,C=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),b&&(c.display.shift=!1),C=d(c)!=de}finally{c.display.shift=y,c.state.suppressEdits=!1}return C}function Bc(c,d,b){for(var y=0;y<c.state.keyMaps.length;y++){var C=$l(d,c.state.keyMaps[y],b,c);if(C)return C}return c.options.extraKeys&&$l(d,c.options.extraKeys,b,c)||$l(d,c.options.keyMap,b,c)}var Po=new St;function ql(c,d,b,y){var C=c.state.keySeq;if(C){if(hi(d))return"handled";if(/\'$/.test(d)?c.state.keySeq=null:Po.set(50,function(){c.state.keySeq==C&&(c.state.keySeq=null,c.display.input.reset())}),Kl(c,C+" "+d,b,y))return!0}return Kl(c,d,b,y)}function Kl(c,d,b,y){var C=Bc(c,d,y);return C=="multi"&&(c.state.keySeq=d),C=="handled"&&Jo(c,"keyHandled",c,d,b),(C=="handled"||C=="multi")&&(Rt(b),Ju(c)),!!C}function Uc(c,d){var b=Uo(d,!0);return b?d.shiftKey&&!c.state.keySeq?ql(c,"Shift-"+b,d,function(y){return El(c,y,!0)})||ql(c,b,d,function(y){if(typeof y=="string"?/^go[A-Z]/.test(y):y.motion)return El(c,y)}):ql(c,b,d,function(y){return El(c,y)}):!1}function ep(c,d,b){return ql(c,"'"+b+"'",d,function(y){return El(c,y,!0)})}var Qo=null;function Vu(c){var d=this;if(!(c.target&&c.target!=d.display.input.getField())&&(d.curOp.focus=$t(Tt(d)),!tn(d,c))){ft&&Ot<11&&c.keyCode==27&&(c.returnValue=!1);var b=c.keyCode;d.display.shift=b==16||c.shiftKey;var y=Uc(d,c);k&&(Qo=y?b:null,!y&&b==88&&!ho&&(I?c.metaKey:c.ctrlKey)&&d.replaceSelection("",null,"cut")),we&&!I&&!y&&b==46&&c.shiftKey&&!c.ctrlKey&&document.execCommand&&document.execCommand("cut"),b==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&Yl(d)}}function Yl(c){var d=c.display.lineDiv;Yt(d,"CodeMirror-crosshair");function b(y){(y.keyCode==18||!y.altKey)&&(X(d,"CodeMirror-crosshair"),fr(document,"keyup",b),fr(document,"mouseover",b))}Zt(document,"keyup",b),Zt(document,"mouseover",b)}function f(c){c.keyCode==16&&(this.doc.sel.shift=!1),tn(this,c)}function g(c){var d=this;if(!(c.target&&c.target!=d.display.input.getField())&&!(Xi(d.display,c)||tn(d,c)||c.ctrlKey&&!c.altKey||I&&c.metaKey)){var b=c.keyCode,y=c.charCode;if(k&&b==Qo){Qo=null,Rt(c);return}if(!(k&&(!c.which||c.which<10)&&Uc(d,c))){var C=String.fromCharCode(y??b);C!="\b"&&(ep(d,c,C)||d.display.input.onKeyPress(c))}}}var S=400,_=function(c,d,b){this.time=c,this.pos=d,this.button=b};_.prototype.compare=function(c,d,b){return this.time+S>c&&Xt(d,this.pos)==0&&b==this.button};var T,D;function Y(c,d){var b=+new Date;return D&&D.compare(b,c,d)?(T=D=null,"triple"):T&&T.compare(b,c,d)?(D=new _(b,c,d),T=null,"double"):(T=new _(b,c,d),D=null,"single")}function Z(c){var d=this,b=d.display;if(!(tn(d,c)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=c.shiftKey,Xi(b,c)){q||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));return}if(!He(d,c)){var y=pl(d,c),C=fe(c),L=y?Y(y,C):"single";jt(d).focus(),C==1&&d.state.selectingText&&d.state.selectingText(c),!(y&&bt(d,C,y,L,c))&&(C==1?y?Qt(d,y,L,c):Et(c)==b.scroller&&Rt(c):C==2?(y&&dc(d.doc,y),setTimeout(function(){return b.input.focus()},20)):C==3&&(U?d.display.input.onContextMenu(c):Qu(d)))}}}function bt(c,d,b,y,C){var L="Click";return y=="double"?L="Double"+L:y=="triple"&&(L="Triple"+L),L=(d==1?"Left":d==2?"Middle":"Right")+L,ql(c,Qf(L,C),C,function(z){if(typeof z=="string"&&(z=Gl[z]),!z)return!1;var J=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),J=z(c,b)!=de}finally{c.state.suppressEdits=!1}return J})}function ht(c,d,b){var y=c.getOption("configureMouse"),C=y?y(c,d,b):{};if(C.unit==null){var L=N?b.shiftKey&&b.metaKey:b.altKey;C.unit=L?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(C.extend==null||c.doc.extend)&&(C.extend=c.doc.extend||b.shiftKey),C.addNew==null&&(C.addNew=I?b.metaKey:b.ctrlKey),C.moveOnDrag==null&&(C.moveOnDrag=!(I?b.altKey:b.ctrlKey)),C}function Qt(c,d,b,y){ft?setTimeout(zt(uc,c),0):c.curOp.focus=$t(Tt(c));var C=ht(c,b,y),L=c.doc.sel,z;c.options.dragDrop&&Pe&&!c.isReadOnly()&&b=="single"&&(z=L.contains(d))>-1&&(Xt((z=L.ranges[z]).from(),d)<0||d.xRel>0)&&(Xt(z.to(),d)>0||d.xRel<0)?re(c,y,d,C):ge(c,y,d,C)}function re(c,d,b,y){var C=c.display,L=!1,z=Ti(c,function(Pt){q&&(C.scroller.draggable=!1),c.state.draggingText=!1,c.state.delayingBlurEvent&&(c.hasFocus()?c.state.delayingBlurEvent=!1:Qu(c)),fr(C.wrapper.ownerDocument,"mouseup",z),fr(C.wrapper.ownerDocument,"mousemove",J),fr(C.scroller,"dragstart",ut),fr(C.scroller,"drop",z),L||(Rt(Pt),y.addNew||dc(c.doc,b,null,null,y.extend),q&&!B||ft&&Ot==9?setTimeout(function(){C.wrapper.ownerDocument.body.focus({preventScroll:!0}),C.input.focus()},20):C.input.focus())}),J=function(Pt){L=L||Math.abs(d.clientX-Pt.clientX)+Math.abs(d.clientY-Pt.clientY)>=10},ut=function(){return L=!0};q&&(C.scroller.draggable=!0),c.state.draggingText=z,z.copy=!y.moveOnDrag,Zt(C.wrapper.ownerDocument,"mouseup",z),Zt(C.wrapper.ownerDocument,"mousemove",J),Zt(C.scroller,"dragstart",ut),Zt(C.scroller,"drop",z),c.state.delayingBlurEvent=!0,setTimeout(function(){return C.input.focus()},20),C.scroller.dragDrop&&C.scroller.dragDrop()}function Se(c,d,b){if(b=="char")return new Eo(d,d);if(b=="word")return c.findWordAt(d);if(b=="line")return new Eo(rt(d.line,0),Xr(c.doc,rt(d.line+1,0)));var y=b(c,d);return new Eo(y.from,y.to)}function ge(c,d,b,y){ft&&Qu(c);var C=c.display,L=c.doc;Rt(d);var z,J,ut=L.sel,Pt=ut.ranges;if(y.addNew&&!y.extend?(J=L.sel.contains(b),J>-1?z=Pt[J]:z=new Eo(b,b)):(z=L.sel.primary(),J=L.sel.primIndex),y.unit=="rectangle")y.addNew||(z=new Eo(b,b)),b=pl(c,d,!0,!0),J=-1;else{var oe=Se(c,b,y.unit);y.extend?z=Mc(z,oe.anchor,oe.head,y.extend):z=oe}y.addNew?J==-1?(J=Pt.length,Mi(L,us(c,Pt.concat([z]),J),{scroll:!1,origin:"*mouse"})):Pt.length>1&&Pt[J].empty()&&y.unit=="char"&&!y.extend?(Mi(L,us(c,Pt.slice(0,J).concat(Pt.slice(J+1)),0),{scroll:!1,origin:"*mouse"}),ut=L.sel):lf(L,J,z,ar):(J=0,Mi(L,new Da([z],0),ar),ut=L.sel);var ve=b;function Ue(zr){if(Xt(ve,zr)!=0)if(ve=zr,y.unit=="rectangle"){for(var Zr=[],mn=c.options.tabSize,un=Dt($r(L,b.line).text,b.ch,mn),Yn=Dt($r(L,zr.line).text,zr.ch,mn),qo=Math.min(un,Yn),da=Math.max(un,Yn),_i=Math.min(b.line,zr.line),ta=Math.min(c.lastLine(),Math.max(b.line,zr.line));_i<=ta;_i++){var Ka=$r(L,_i).text,zo=Nr(Ka,qo,mn);qo==da?Zr.push(new Eo(rt(_i,zo),rt(_i,zo))):Ka.length>zo&&Zr.push(new Eo(rt(_i,zo),rt(_i,Nr(Ka,da,mn))))}Zr.length||Zr.push(new Eo(b,b)),Mi(L,us(c,ut.ranges.slice(0,J).concat(Zr),J),{origin:"*mouse",scroll:!1}),c.scrollIntoView(zr)}else{var ps=z,ha=Se(c,zr,y.unit),ea=ps.anchor,zi;Xt(ha.anchor,ea)>0?(zi=ha.head,ea=wn(ps.from(),ha.anchor)):(zi=ha.anchor,ea=Hr(ps.to(),ha.head));var ji=ut.ranges.slice(0);ji[J]=$e(c,new Eo(Xr(L,ea),zi)),Mi(L,us(c,ji,J),ar)}}var Fe=C.wrapper.getBoundingClientRect(),sr=0;function dr(zr){var Zr=++sr,mn=pl(c,zr,!0,y.unit=="rectangle");if(mn)if(Xt(mn,ve)!=0){c.curOp.focus=$t(Tt(c)),Ue(mn);var un=Cs(C,L);(mn.line>=un.to||mn.line<un.from)&&setTimeout(Ti(c,function(){sr==Zr&&dr(zr)}),150)}else{var Yn=zr.clientY<Fe.top?-20:zr.clientY>Fe.bottom?20:0;Yn&&setTimeout(Ti(c,function(){sr==Zr&&(C.scroller.scrollTop+=Yn,dr(zr))}),50)}}function jr(zr){c.state.selectingText=!1,sr=1/0,zr&&(Rt(zr),C.input.focus()),fr(C.wrapper.ownerDocument,"mousemove",Rr),fr(C.wrapper.ownerDocument,"mouseup",Kr),L.history.lastSelOrigin=null}var Rr=Ti(c,function(zr){zr.buttons===0||!fe(zr)?jr(zr):dr(zr)}),Kr=Ti(c,jr);c.state.selectingText=Kr,Zt(C.wrapper.ownerDocument,"mousemove",Rr),Zt(C.wrapper.ownerDocument,"mouseup",Kr)}function $e(c,d){var b=d.anchor,y=d.head,C=$r(c.doc,b.line);if(Xt(b,y)==0&&b.sticky==y.sticky)return d;var L=Ft(C);if(!L)return d;var z=Wt(L,b.ch,b.sticky),J=L[z];if(J.from!=b.ch&&J.to!=b.ch)return d;var ut=z+(J.from==b.ch==(J.level!=1)?0:1);if(ut==0||ut==L.length)return d;var Pt;if(y.line!=b.line)Pt=(y.line-b.line)*(c.doc.direction=="ltr"?1:-1)>0;else{var oe=Wt(L,y.ch,y.sticky),ve=oe-z||(y.ch-b.ch)*(J.level==1?-1:1);oe==ut-1||oe==ut?Pt=ve<0:Pt=ve>0}var Ue=L[ut+(Pt?-1:0)],Fe=Pt==(Ue.level==1),sr=Fe?Ue.from:Ue.to,dr=Fe?"after":"before";return b.ch==sr&&b.sticky==dr?d:new Eo(new rt(b.line,sr,dr),y)}function Ge(c,d,b,y){var C,L;if(d.touches)C=d.touches[0].clientX,L=d.touches[0].clientY;else try{C=d.clientX,L=d.clientY}catch{return!1}if(C>=Math.floor(c.display.gutters.getBoundingClientRect().right))return!1;y&&Rt(d);var z=c.display,J=z.lineDiv.getBoundingClientRect();if(L>J.bottom||!tr(c,b))return je(d);L-=J.top-z.viewOffset;for(var ut=0;ut<c.display.gutterSpecs.length;++ut){var Pt=z.gutters.childNodes[ut];if(Pt&&Pt.getBoundingClientRect().right>=C){var oe=Oo(c.doc,L),ve=c.display.gutterSpecs[ut];return nn(c,b,c,oe,ve.className,d),je(d)}}}function He(c,d){return Ge(c,d,"gutterClick",!0)}function Ze(c,d){Xi(c.display,d)||vr(c,d)||tn(c,d,"contextmenu")||U||c.display.input.onContextMenu(d)}function vr(c,d){return tr(c,"gutterContextMenu")?Ge(c,d,"gutterContextMenu",!1):!1}function br(c){c.display.wrapper.className=c.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+c.options.theme.replace(/(^|\s)\s*/g," cm-s-"),To(c)}var Pr={toString:function(){return"CodeMirror.Init"}},Sr={},Tr={};function hn(c){var d=c.optionHandlers;function b(y,C,L,z){c.defaults[y]=C,L&&(d[y]=z?function(J,ut,Pt){Pt!=Pr&&L(J,ut,Pt)}:L)}c.defineOption=b,c.Init=Pr,b("value","",function(y,C){return y.setValue(C)},!0),b("mode",null,function(y,C){y.doc.modeOption=C,af(y)},!0),b("indentUnit",2,af,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(y){Ei(y),To(y),Vi(y)},!0),b("lineSeparator",null,function(y,C){if(y.doc.lineSep=C,!!C){var L=[],z=y.doc.first;y.doc.iter(function(ut){for(var Pt=0;;){var oe=ut.text.indexOf(C,Pt);if(oe==-1)break;Pt=oe+C.length,L.push(rt(z,oe))}z++});for(var J=L.length-1;J>=0;J--)Ji(y.doc,C,L[J],rt(L[J].line,L[J].ch+C.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(y,C,L){y.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),L!=Pr&&y.refresh()}),b("specialCharPlaceholder",Dl,function(y){return y.refresh()},!0),b("electricChars",!0),b("inputStyle",R?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(y,C){return y.getInputField().spellcheck=C},!0),b("autocorrect",!1,function(y,C){return y.getInputField().autocorrect=C},!0),b("autocapitalize",!1,function(y,C){return y.getInputField().autocapitalize=C},!0),b("rtlMoveVisually",!$),b("wholeLineUpdateBefore",!0),b("theme","default",function(y){br(y),Rl(y)},!0),b("keyMap","default",function(y,C,L){var z=Tl(C),J=L!=Pr&&Tl(L);J&&J.detach&&J.detach(y,z),z.attach&&z.attach(y,J||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,Bn,!0),b("gutters",[],function(y,C){y.display.gutterSpecs=ja(C,y.options.lineNumbers),Rl(y)},!0),b("fixedGutter",!0,function(y,C){y.display.gutters.style.left=C?sc(y.display)+"px":"0",y.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(y){return Us(y)},!0),b("scrollbarStyle","native",function(y){rf(y),Us(y),y.display.scrollbars.setScrollTop(y.doc.scrollTop),y.display.scrollbars.setScrollLeft(y.doc.scrollLeft)},!0),b("lineNumbers",!1,function(y,C){y.display.gutterSpecs=ja(y.options.gutters,C),Rl(y)},!0),b("firstLineNumber",1,Rl,!0),b("lineNumberFormatter",function(y){return y},Rl,!0),b("showCursorWhenSelecting",!1,xs,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(y,C){C=="nocursor"&&(ss(y),y.display.input.blur()),y.display.input.readOnlyChanged(C)}),b("screenReaderLabel",null,function(y,C){C=C===""?null:C,y.display.input.screenReaderLabelChanged(C)}),b("disableInput",!1,function(y,C){C||y.display.input.reset()},!0),b("dragDrop",!0,ln),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,xs,!0),b("singleCursorHeightPerLine",!0,xs,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Ei,!0),b("addModeClass",!1,Ei,!0),b("pollInterval",100),b("undoDepth",200,function(y,C){return y.doc.history.undoDepth=C}),b("historyEventDelay",1250),b("viewportMargin",10,function(y){return y.refresh()},!0),b("maxHighlightLength",1e4,Ei,!0),b("moveInputWithCursor",!0,function(y,C){C||y.display.input.resetPosition()}),b("tabindex",null,function(y,C){return y.display.input.getField().tabIndex=C||""}),b("autofocus",null),b("direction","ltr",function(y,C){return y.doc.setDirection(C)},!0),b("phrases",null)}function ln(c,d,b){var y=b&&b!=Pr;if(!d!=!y){var C=c.display.dragFunctions,L=d?Zt:fr;L(c.display.scroller,"dragstart",C.start),L(c.display.scroller,"dragenter",C.enter),L(c.display.scroller,"dragover",C.over),L(c.display.scroller,"dragleave",C.leave),L(c.display.scroller,"drop",C.drop)}}function Bn(c){c.options.lineWrapping?(Yt(c.display.wrapper,"CodeMirror-wrap"),c.display.sizer.style.minWidth="",c.display.sizerWidth=null):(X(c.display.wrapper,"CodeMirror-wrap"),Ii(c)),yu(c),Vi(c),To(c),setTimeout(function(){return Us(c)},100)}function Ur(c,d){var b=this;if(!(this instanceof Ur))return new Ur(c,d);this.options=d=d?Ht(d):{},Ht(Sr,d,!1);var y=d.value;typeof y=="string"?y=new Pa(y,d.mode,null,d.lineSeparator,d.direction):d.mode&&(y.modeOption=d.mode),this.doc=y;var C=new Ur.inputStyles[d.inputStyle](this),L=this.display=new bl(c,y,C,d);L.wrapper.CodeMirror=this,br(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),rf(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new St,keySeq:null,specialChars:null},d.autofocus&&!R&&L.input.focus(),ft&&Ot<11&&setTimeout(function(){return b.display.input.reset(!0)},20),no(this),Jf(),Cc(this),this.curOp.forceUpdate=!0,Ff(this,y),d.autofocus&&!R||this.hasFocus()?setTimeout(function(){b.hasFocus()&&!b.state.focused&&Aa(b)},20):ss(this);for(var z in Tr)Tr.hasOwnProperty(z)&&Tr[z](this,d[z],Pr);nf(this),d.finishInit&&d.finishInit(this);for(var J=0;J<ko.length;++J)ko[J](this);Ss(this),q&&d.lineWrapping&&getComputedStyle(L.lineDiv).textRendering=="optimizelegibility"&&(L.lineDiv.style.textRendering="auto")}Ur.defaults=Sr,Ur.optionHandlers=Tr;function no(c){var d=c.display;Zt(d.scroller,"mousedown",Ti(c,Z)),ft&&Ot<11?Zt(d.scroller,"dblclick",Ti(c,function(ut){if(!tn(c,ut)){var Pt=pl(c,ut);if(!(!Pt||He(c,ut)||Xi(c.display,ut))){Rt(ut);var oe=c.findWordAt(Pt);dc(c.doc,oe.anchor,oe.head)}}})):Zt(d.scroller,"dblclick",function(ut){return tn(c,ut)||Rt(ut)}),Zt(d.scroller,"contextmenu",function(ut){return Ze(c,ut)}),Zt(d.input.getField(),"contextmenu",function(ut){d.scroller.contains(ut.target)||Ze(c,ut)});var b,y={end:0};function C(){d.activeTouch&&(b=setTimeout(function(){return d.activeTouch=null},1e3),y=d.activeTouch,y.end=+new Date)}function L(ut){if(ut.touches.length!=1)return!1;var Pt=ut.touches[0];return Pt.radiusX<=1&&Pt.radiusY<=1}function z(ut,Pt){if(Pt.left==null)return!0;var oe=Pt.left-ut.left,ve=Pt.top-ut.top;return oe*oe+ve*ve>20*20}Zt(d.scroller,"touchstart",function(ut){if(!tn(c,ut)&&!L(ut)&&!He(c,ut)){d.input.ensurePolled(),clearTimeout(b);var Pt=+new Date;d.activeTouch={start:Pt,moved:!1,prev:Pt-y.end<=300?y:null},ut.touches.length==1&&(d.activeTouch.left=ut.touches[0].pageX,d.activeTouch.top=ut.touches[0].pageY)}}),Zt(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),Zt(d.scroller,"touchend",function(ut){var Pt=d.activeTouch;if(Pt&&!Xi(d,ut)&&Pt.left!=null&&!Pt.moved&&new Date-Pt.start<300){var oe=c.coordsChar(d.activeTouch,"page"),ve;!Pt.prev||z(Pt,Pt.prev)?ve=new Eo(oe,oe):!Pt.prev.prev||z(Pt,Pt.prev.prev)?ve=c.findWordAt(oe):ve=new Eo(rt(oe.line,0),Xr(c.doc,rt(oe.line+1,0))),c.setSelection(ve.anchor,ve.head),c.focus(),Rt(ut)}C()}),Zt(d.scroller,"touchcancel",C),Zt(d.scroller,"scroll",function(){d.scroller.clientHeight&&(xc(c,d.scroller.scrollTop),Ho(c,d.scroller.scrollLeft,!0),nn(c,"scroll",c))}),Zt(d.scroller,"mousewheel",function(ut){return Eu(c,ut)}),Zt(d.scroller,"DOMMouseScroll",function(ut){return Eu(c,ut)}),Zt(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(ut){tn(c,ut)||Je(ut)},over:function(ut){tn(c,ut)||(uf(c,ut),Je(ut))},start:function(ut){return Nc(c,ut)},drop:Ti(c,Nu),leave:function(ut){tn(c,ut)||Vc(c)}};var J=d.input.getField();Zt(J,"keyup",function(ut){return f.call(c,ut)}),Zt(J,"keydown",Ti(c,Vu)),Zt(J,"keypress",Ti(c,g)),Zt(J,"focus",function(ut){return Aa(c,ut)}),Zt(J,"blur",function(ut){return ss(c,ut)})}var ko=[];Ur.defineInitHook=function(c){return ko.push(c)};function qn(c,d,b,y){var C=c.doc,L;b==null&&(b="add"),b=="smart"&&(C.mode.indent?L=gn(c,d).state:b="prev");var z=c.options.tabSize,J=$r(C,d),ut=Dt(J.text,null,z);J.stateAfter&&(J.stateAfter=null);var Pt=J.text.match(/^\s*/)[0],oe;if(!y&&!/\S/.test(J.text))oe=0,b="not";else if(b=="smart"&&(oe=C.mode.indent(L,J.text.slice(Pt.length),J.text),oe==de||oe>150)){if(!y)return;b="prev"}b=="prev"?d>C.first?oe=Dt($r(C,d-1).text,null,z):oe=0:b=="add"?oe=ut+c.options.indentUnit:b=="subtract"?oe=ut-c.options.indentUnit:typeof b=="number"&&(oe=ut+b),oe=Math.max(0,oe);var ve="",Ue=0;if(c.options.indentWithTabs)for(var Fe=Math.floor(oe/z);Fe;--Fe)Ue+=z,ve+="	";if(Ue<oe&&(ve+=Fr(oe-Ue)),ve!=Pt)return Ji(C,ve,rt(d,0),rt(d,Pt.length),"+input"),J.stateAfter=null,!0;for(var sr=0;sr<C.sel.ranges.length;sr++){var dr=C.sel.ranges[sr];if(dr.head.line==d&&dr.head.ch<Pt.length){var jr=rt(d,Pt.length);lf(C,sr,new Eo(jr,jr));break}}}var Qn=null;function uo(c){Qn=c}function On(c,d,b,y,C){var L=c.doc;c.display.shift=!1,y||(y=L.sel);var z=+new Date-200,J=C=="paste"||c.state.pasteIncoming>z,ut=Dn(d),Pt=null;if(J&&y.ranges.length>1)if(Qn&&Qn.text.join(`
`)==d){if(y.ranges.length%Qn.text.length==0){Pt=[];for(var oe=0;oe<Qn.text.length;oe++)Pt.push(L.splitLines(Qn.text[oe]))}}else ut.length==y.ranges.length&&c.options.pasteLinesPerSelection&&(Pt=at(ut,function(Rr){return[Rr]}));for(var ve=c.curOp.updateInput,Ue=y.ranges.length-1;Ue>=0;Ue--){var Fe=y.ranges[Ue],sr=Fe.from(),dr=Fe.to();Fe.empty()&&(b&&b>0?sr=rt(sr.line,sr.ch-b):c.state.overwrite&&!J?dr=rt(dr.line,Math.min($r(L,dr.line).text.length,dr.ch+Xe(ut).length)):J&&Qn&&Qn.lineWise&&Qn.text.join(`
`)==ut.join(`
`)&&(sr=dr=rt(sr.line,0)));var jr={from:sr,to:dr,text:Pt?Pt[Ue%Pt.length]:ut,origin:C||(J?"paste":c.state.cutIncoming>z?"cut":"+input")};jc(c.doc,jr),Jo(c,"inputRead",c,jr)}d&&!J&&Kn(c,d),$a(c),c.curOp.updateInput<2&&(c.curOp.updateInput=ve),c.curOp.typing=!0,c.state.pasteIncoming=c.state.cutIncoming=-1}function $n(c,d){var b=c.clipboardData&&c.clipboardData.getData("Text");if(b)return c.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&d.hasFocus()&&La(d,function(){return On(d,b,0,null,"paste")}),!0}function Kn(c,d){if(!(!c.options.electricChars||!c.options.smartIndent))for(var b=c.doc.sel,y=b.ranges.length-1;y>=0;y--){var C=b.ranges[y];if(!(C.head.ch>100||y&&b.ranges[y-1].head.line==C.head.line)){var L=c.getModeAt(C.head),z=!1;if(L.electricChars){for(var J=0;J<L.electricChars.length;J++)if(d.indexOf(L.electricChars.charAt(J))>-1){z=qn(c,C.head.line,"smart");break}}else L.electricInput&&L.electricInput.test($r(c.doc,C.head.line).text.slice(0,C.head.ch))&&(z=qn(c,C.head.line,"smart"));z&&Jo(c,"electricInput",c,C.head.line)}}}function Mn(c){for(var d=[],b=[],y=0;y<c.doc.sel.ranges.length;y++){var C=c.doc.sel.ranges[y].head.line,L={anchor:rt(C,0),head:rt(C+1,0)};b.push(L),d.push(c.getRange(L.anchor,L.head))}return{text:d,ranges:b}}function gi(c,d,b,y){c.setAttribute("autocorrect",b?"on":"off"),c.setAttribute("autocapitalize",y?"on":"off"),c.setAttribute("spellcheck",!!d)}function vi(){var c=Q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=Q("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return q?c.style.width="1000px":c.setAttribute("wrap","off"),dt&&(c.style.border="1px solid black"),d}function po(c){var d=c.optionHandlers,b=c.helpers={};c.prototype={constructor:c,focus:function(){jt(this).focus(),this.display.input.focus()},setOption:function(y,C){var L=this.options,z=L[y];L[y]==C&&y!="mode"||(L[y]=C,d.hasOwnProperty(y)&&Ti(this,d[y])(this,C,z),nn(this,"optionChange",this,y))},getOption:function(y){return this.options[y]},getDoc:function(){return this.doc},addKeyMap:function(y,C){this.state.keyMaps[C?"push":"unshift"](Tl(y))},removeKeyMap:function(y){for(var C=this.state.keyMaps,L=0;L<C.length;++L)if(C[L]==y||C[L].name==y)return C.splice(L,1),!0},addOverlay:Fn(function(y,C){var L=y.token?y:c.getMode(this.options,y);if(L.startState)throw new Error("Overlays may not be stateful.");kt(this.state.overlays,{mode:L,modeSpec:y,opaque:C&&C.opaque,priority:C&&C.priority||0},function(z){return z.priority}),this.state.modeGen++,Vi(this)}),removeOverlay:Fn(function(y){for(var C=this.state.overlays,L=0;L<C.length;++L){var z=C[L].modeSpec;if(z==y||typeof y=="string"&&z.name==y){C.splice(L,1),this.state.modeGen++,Vi(this);return}}}),indentLine:Fn(function(y,C,L){typeof C!="string"&&typeof C!="number"&&(C==null?C=this.options.smartIndent?"smart":"prev":C=C?"add":"subtract"),bo(this.doc,y)&&qn(this,y,C,L)}),indentSelection:Fn(function(y){for(var C=this.doc.sel.ranges,L=-1,z=0;z<C.length;z++){var J=C[z];if(J.empty())J.head.line>L&&(qn(this,J.head.line,y,!0),L=J.head.line,z==this.doc.sel.primIndex&&$a(this));else{var ut=J.from(),Pt=J.to(),oe=Math.max(L,ut.line);L=Math.min(this.lastLine(),Pt.line-(Pt.ch?0:1))+1;for(var ve=oe;ve<L;++ve)qn(this,ve,y);var Ue=this.doc.sel.ranges;ut.ch==0&&C.length==Ue.length&&Ue[z].from().ch>0&&lf(this.doc,z,new Eo(ut,Ue[z].to()),Le)}}}),getTokenAt:function(y,C){return Vo(this,y,C)},getLineTokens:function(y,C){return Vo(this,rt(y),C,!0)},getTokenTypeAt:function(y){y=Xr(this.doc,y);var C=en(this,$r(this.doc,y.line)),L=0,z=(C.length-1)/2,J=y.ch,ut;if(J==0)ut=C[2];else for(;;){var Pt=L+z>>1;if((Pt?C[Pt*2-1]:0)>=J)z=Pt;else if(C[Pt*2+1]<J)L=Pt+1;else{ut=C[Pt*2+2];break}}var oe=ut?ut.indexOf("overlay "):-1;return oe<0?ut:oe==0?null:ut.slice(0,oe-1)},getModeAt:function(y){var C=this.doc.mode;return C.innerMode?c.innerMode(C,this.getTokenAt(y).state).mode:C},getHelper:function(y,C){return this.getHelpers(y,C)[0]},getHelpers:function(y,C){var L=[];if(!b.hasOwnProperty(C))return L;var z=b[C],J=this.getModeAt(y);if(typeof J[C]=="string")z[J[C]]&&L.push(z[J[C]]);else if(J[C])for(var ut=0;ut<J[C].length;ut++){var Pt=z[J[C][ut]];Pt&&L.push(Pt)}else J.helperType&&z[J.helperType]?L.push(z[J.helperType]):z[J.name]&&L.push(z[J.name]);for(var oe=0;oe<z._global.length;oe++){var ve=z._global[oe];ve.pred(J,this)&&Vt(L,ve.val)==-1&&L.push(ve.val)}return L},getStateAfter:function(y,C){var L=this.doc;return y=Nn(L,y??L.first+L.size-1),gn(this,y+1,C).state},cursorCoords:function(y,C){var L,z=this.doc.sel.primary();return y==null?L=z.head:typeof y=="object"?L=Xr(this.doc,y):L=y?z.from():z.to(),ki(this,L,C||"page")},charCoords:function(y,C){return bs(this,Xr(this.doc,y),C||"page")},coordsChar:function(y,C){return y=yp(this,y,C||"page"),vu(this,y.left,y.top)},lineAtHeight:function(y,C){return y=yp(this,{top:y,left:0},C||"page").top,Oo(this.doc,y+this.display.viewOffset)},heightAtLine:function(y,C,L){var z=!1,J;if(typeof y=="number"){var ut=this.doc.first+this.doc.size-1;y<this.doc.first?y=this.doc.first:y>ut&&(y=ut,z=!0),J=$r(this.doc,y)}else J=y;return Zu(this,J,{top:0,left:0},C||"page",L||z).top+(z?this.doc.height-pn(J):0)},defaultTextHeight:function(){return ac(this.display)},defaultCharWidth:function(){return ul(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(y,C,L,z,J){var ut=this.display;y=ki(this,Xr(this.doc,y));var Pt=y.bottom,oe=y.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),ut.sizer.appendChild(C),z=="over")Pt=y.top;else if(z=="above"||z=="near"){var ve=Math.max(ut.wrapper.clientHeight,this.doc.height),Ue=Math.max(ut.sizer.clientWidth,ut.lineSpace.clientWidth);(z=="above"||y.bottom+C.offsetHeight>ve)&&y.top>C.offsetHeight?Pt=y.top-C.offsetHeight:y.bottom+C.offsetHeight<=ve&&(Pt=y.bottom),oe+C.offsetWidth>Ue&&(oe=Ue-C.offsetWidth)}C.style.top=Pt+"px",C.style.left=C.style.right="",J=="right"?(oe=ut.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(J=="left"?oe=0:J=="middle"&&(oe=(ut.sizer.clientWidth-C.offsetWidth)/2),C.style.left=oe+"px"),L&&bu(this,{left:oe,top:Pt,right:oe+C.offsetWidth,bottom:Pt+C.offsetHeight})},triggerOnKeyDown:Fn(Vu),triggerOnKeyPress:Fn(g),triggerOnKeyUp:f,triggerOnMouseDown:Fn(Z),execCommand:function(y){if(Gl.hasOwnProperty(y))return Gl[y].call(null,this)},triggerElectric:Fn(function(y){Kn(this,y)}),findPosH:function(y,C,L,z){var J=1;C<0&&(J=-1,C=-C);for(var ut=Xr(this.doc,y),Pt=0;Pt<C&&(ut=to(this.doc,ut,J,L,z),!ut.hitSide);++Pt);return ut},moveH:Fn(function(y,C){var L=this;this.extendSelectionsBy(function(z){return L.display.shift||L.doc.extend||z.empty()?to(L.doc,z.head,y,C,L.options.rtlMoveVisually):y<0?z.from():z.to()},Er)}),deleteH:Fn(function(y,C){var L=this.doc.sel,z=this.doc;L.somethingSelected()?z.replaceSelection("",null,"+delete"):fs(this,function(J){var ut=to(z,J.head,y,C,!1);return y<0?{from:ut,to:J.head}:{from:J.head,to:ut}})}),findPosV:function(y,C,L,z){var J=1,ut=z;C<0&&(J=-1,C=-C);for(var Pt=Xr(this.doc,y),oe=0;oe<C;++oe){var ve=ki(this,Pt,"div");if(ut==null?ut=ve.left:ve.left=ut,Pt=Ga(this,ve,J,L),Pt.hitSide)break}return Pt},moveV:Fn(function(y,C){var L=this,z=this.doc,J=[],ut=!this.display.shift&&!z.extend&&z.sel.somethingSelected();if(z.extendSelectionsBy(function(oe){if(ut)return y<0?oe.from():oe.to();var ve=ki(L,oe.head,"div");oe.goalColumn!=null&&(ve.left=oe.goalColumn),J.push(ve.left);var Ue=Ga(L,ve,y,C);return C=="page"&&oe==z.sel.primary()&&ls(L,bs(L,Ue,"div").top-ve.top),Ue},Er),J.length)for(var Pt=0;Pt<z.sel.ranges.length;Pt++)z.sel.ranges[Pt].goalColumn=J[Pt]}),findWordAt:function(y){var C=this.doc,L=$r(C,y.line).text,z=y.ch,J=y.ch;if(L){var ut=this.getHelper(y,"wordChars");(y.sticky=="before"||J==L.length)&&z?--z:++J;for(var Pt=L.charAt(z),oe=le(Pt,ut)?function(ve){return le(ve,ut)}:/\s/.test(Pt)?function(ve){return/\s/.test(ve)}:function(ve){return!/\s/.test(ve)&&!le(ve)};z>0&&oe(L.charAt(z-1));)--z;for(;J<L.length&&oe(L.charAt(J));)++J}return new Eo(rt(y.line,z),rt(y.line,J))},toggleOverwrite:function(y){y!=null&&y==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Yt(this.display.cursorDiv,"CodeMirror-overwrite"):X(this.display.cursorDiv,"CodeMirror-overwrite"),nn(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==$t(Tt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Fn(function(y,C){fc(this,y,C)}),getScrollInfo:function(){var y=this.display.scroller;return{left:y.scrollLeft,top:y.scrollTop,height:y.scrollHeight-Nt(this)-this.display.barHeight,width:y.scrollWidth-Nt(this)-this.display.barWidth,clientHeight:Oe(this),clientWidth:he(this)}},scrollIntoView:Fn(function(y,C){y==null?(y={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof y=="number"?y={from:rt(y,0),to:null}:y.from==null&&(y={from:y,to:null}),y.to||(y.to=y.from),y.margin=C||0,y.from.line!=null?Jp(this,y):_u(this,y.from,y.to,y.margin)}),setSize:Fn(function(y,C){var L=this,z=function(ut){return typeof ut=="number"||/^\d+$/.test(String(ut))?ut+"px":ut};y!=null&&(this.display.wrapper.style.width=z(y)),C!=null&&(this.display.wrapper.style.height=z(C)),this.options.lineWrapping&&jn(this);var J=this.display.viewFrom;this.doc.iter(J,this.display.viewTo,function(ut){if(ut.widgets){for(var Pt=0;Pt<ut.widgets.length;Pt++)if(ut.widgets[Pt].noHScroll){dl(L,J,"widget");break}}++J}),this.curOp.forceUpdate=!0,nn(this,"refresh",this)}),operation:function(y){return La(this,y)},startOperation:function(){return Cc(this)},endOperation:function(){return Ss(this)},refresh:Fn(function(){var y=this.display.cachedTextHeight;Vi(this),this.curOp.forceUpdate=!0,To(this),fc(this,this.doc.scrollLeft,this.doc.scrollTop),Sc(this.display),(y==null||Math.abs(y-ac(this.display))>.5||this.options.lineWrapping)&&yu(this),nn(this,"refresh",this)}),swapDoc:Fn(function(y){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),Ff(this,y),To(this),this.display.input.reset(),fc(this,y.scrollLeft,y.scrollTop),this.curOp.forceScroll=!0,Jo(this,"swapDoc",this,C),C}),phrase:function(y){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,y)?C[y]:y},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Un(c),c.registerHelper=function(y,C,L){b.hasOwnProperty(y)||(b[y]=c[y]={_global:[]}),b[y][C]=L},c.registerGlobalHelper=function(y,C,L,z){c.registerHelper(y,C,z),b[y]._global.push({pred:L,val:z})}}function to(c,d,b,y,C){var L=d,z=b,J=$r(c,d.line),ut=C&&c.direction=="rtl"?-b:b;function Pt(){var Kr=d.line+ut;return Kr<c.first||Kr>=c.first+c.size?!1:(d=new rt(Kr,d.ch,d.sticky),J=$r(c,Kr))}function oe(Kr){var zr;if(y=="codepoint"){var Zr=J.text.charCodeAt(d.ch+(b>0?0:-1));if(isNaN(Zr))zr=null;else{var mn=b>0?Zr>=55296&&Zr<56320:Zr>=56320&&Zr<57343;zr=new rt(d.line,Math.max(0,Math.min(J.text.length,d.ch+b*(mn?2:1))),-b)}}else C?zr=ff(c.cm,J,d,b):zr=Rc(J,d,b);if(zr==null)if(!Kr&&Pt())d=Hc(C,c.cm,J,d.line,ut);else return!1;else d=zr;return!0}if(y=="char"||y=="codepoint")oe();else if(y=="column")oe(!0);else if(y=="word"||y=="group")for(var ve=null,Ue=y=="group",Fe=c.cm&&c.cm.getHelper(d,"wordChars"),sr=!0;!(b<0&&!oe(!sr));sr=!1){var dr=J.text.charAt(d.ch)||`
`,jr=le(dr,Fe)?"w":Ue&&dr==`
`?"n":!Ue||/\s/.test(dr)?null:"p";if(Ue&&!sr&&!jr&&(jr="s"),ve&&ve!=jr){b<0&&(b=1,oe(),d.sticky="after");break}if(jr&&(ve=jr),b>0&&!oe(!sr))break}var Rr=gc(c,d,L,z,!0);return ir(L,Rr)&&(Rr.hitSide=!0),Rr}function Ga(c,d,b,y){var C=c.doc,L=d.left,z;if(y=="page"){var J=Math.min(c.display.wrapper.clientHeight,jt(c).innerHeight||C(c).documentElement.clientHeight),ut=Math.max(J-.5*ac(c.display),3);z=(b>0?d.bottom:d.top)+b*ut}else y=="line"&&(z=b>0?d.bottom+3:d.top-3);for(var Pt;Pt=vu(c,L,z),!!Pt.outside;){if(b<0?z<=0:z>=C.height){Pt.hitSide=!0;break}z+=b*5}return Pt}var xn=function(c){this.cm=c,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new St,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};xn.prototype.init=function(c){var d=this,b=this,y=b.cm,C=b.div=c.lineDiv;C.contentEditable=!0,gi(C,y.options.spellcheck,y.options.autocorrect,y.options.autocapitalize);function L(J){for(var ut=J.target;ut;ut=ut.parentNode){if(ut==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ut.className))break}return!1}Zt(C,"paste",function(J){!L(J)||tn(y,J)||$n(J,y)||Ot<=11&&setTimeout(Ti(y,function(){return d.updateFromDOM()}),20)}),Zt(C,"compositionstart",function(J){d.composing={data:J.data,done:!1}}),Zt(C,"compositionupdate",function(J){d.composing||(d.composing={data:J.data,done:!1})}),Zt(C,"compositionend",function(J){d.composing&&(J.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),Zt(C,"touchstart",function(){return b.forceCompositionEnd()}),Zt(C,"input",function(){d.composing||d.readFromDOMSoon()});function z(J){if(!(!L(J)||tn(y,J))){if(y.somethingSelected())uo({lineWise:!1,text:y.getSelections()}),J.type=="cut"&&y.replaceSelection("",null,"cut");else if(y.options.lineWiseCopyCut){var ut=Mn(y);uo({lineWise:!0,text:ut.text}),J.type=="cut"&&y.operation(function(){y.setSelections(ut.ranges,0,Le),y.replaceSelection("",null,"cut")})}else return;if(J.clipboardData){J.clipboardData.clearData();var Pt=Qn.text.join(`
`);if(J.clipboardData.setData("Text",Pt),J.clipboardData.getData("Text")==Pt){J.preventDefault();return}}var oe=vi(),ve=oe.firstChild;gi(ve),y.display.lineSpace.insertBefore(oe,y.display.lineSpace.firstChild),ve.value=Qn.text.join(`
`);var Ue=$t(C.ownerDocument);et(ve),setTimeout(function(){y.display.lineSpace.removeChild(oe),Ue.focus(),Ue==C&&b.showPrimarySelection()},50)}}Zt(C,"copy",z),Zt(C,"cut",z)},xn.prototype.screenReaderLabelChanged=function(c){c?this.div.setAttribute("aria-label",c):this.div.removeAttribute("aria-label")},xn.prototype.prepareSelection=function(){var c=qc(this.cm,!1);return c.focus=$t(this.div.ownerDocument)==this.div,c},xn.prototype.showSelection=function(c,d){!c||!this.cm.display.view.length||((c.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(c))},xn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},xn.prototype.showPrimarySelection=function(){var c=this.getSelection(),d=this.cm,b=d.doc.sel.primary(),y=b.from(),C=b.to();if(d.display.viewTo==d.display.viewFrom||y.line>=d.display.viewTo||C.line<d.display.viewFrom){c.removeAllRanges();return}var L=qa(d,c.anchorNode,c.anchorOffset),z=qa(d,c.focusNode,c.focusOffset);if(!(L&&!L.bad&&z&&!z.bad&&Xt(wn(L,z),y)==0&&Xt(Hr(L,z),C)==0)){var J=d.display.view,ut=y.line>=d.display.viewFrom&&Li(d,y)||{node:J[0].measure.map[2],offset:0},Pt=C.line<d.display.viewTo&&Li(d,C);if(!Pt){var oe=J[J.length-1].measure,ve=oe.maps?oe.maps[oe.maps.length-1]:oe.map;Pt={node:ve[ve.length-1],offset:ve[ve.length-2]-ve[ve.length-3]}}if(!ut||!Pt){c.removeAllRanges();return}var Ue=c.rangeCount&&c.getRangeAt(0),Fe;try{Fe=W(ut.node,ut.offset,Pt.offset,Pt.node)}catch{}Fe&&(!we&&d.state.focused?(c.collapse(ut.node,ut.offset),Fe.collapsed||(c.removeAllRanges(),c.addRange(Fe))):(c.removeAllRanges(),c.addRange(Fe)),Ue&&c.anchorNode==null?c.addRange(Ue):we&&this.startGracePeriod()),this.rememberSelection()}},xn.prototype.startGracePeriod=function(){var c=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){c.gracePeriod=!1,c.selectionChanged()&&c.cm.operation(function(){return c.cm.curOp.selectionChanged=!0})},20)},xn.prototype.showMultipleSelections=function(c){xt(this.cm.display.cursorDiv,c.cursors),xt(this.cm.display.selectionDiv,c.selection)},xn.prototype.rememberSelection=function(){var c=this.getSelection();this.lastAnchorNode=c.anchorNode,this.lastAnchorOffset=c.anchorOffset,this.lastFocusNode=c.focusNode,this.lastFocusOffset=c.focusOffset},xn.prototype.selectionInEditor=function(){var c=this.getSelection();if(!c.rangeCount)return!1;var d=c.getRangeAt(0).commonAncestorContainer;return It(this.div,d)},xn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||$t(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},xn.prototype.blur=function(){this.div.blur()},xn.prototype.getField=function(){return this.div},xn.prototype.supportsTouch=function(){return!0},xn.prototype.receivedFocus=function(){var c=this,d=this;this.selectionInEditor()?setTimeout(function(){return c.pollSelection()},20):La(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function b(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,b))}this.polling.set(this.cm.options.pollInterval,b)},xn.prototype.selectionChanged=function(){var c=this.getSelection();return c.anchorNode!=this.lastAnchorNode||c.anchorOffset!=this.lastAnchorOffset||c.focusNode!=this.lastFocusNode||c.focusOffset!=this.lastFocusOffset},xn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var c=this.getSelection(),d=this.cm;if(H&&K&&this.cm.display.gutterSpecs.length&&Qi(c.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var b=qa(d,c.anchorNode,c.anchorOffset),y=qa(d,c.focusNode,c.focusOffset);b&&y&&La(d,function(){Mi(d.doc,Ta(b,y),Le),(b.bad||y.bad)&&(d.curOp.selectionChanged=!0)})}}},xn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var c=this.cm,d=c.display,b=c.doc.sel.primary(),y=b.from(),C=b.to();if(y.ch==0&&y.line>c.firstLine()&&(y=rt(y.line-1,$r(c.doc,y.line-1).length)),C.ch==$r(c.doc,C.line).text.length&&C.line<c.lastLine()&&(C=rt(C.line+1,0)),y.line<d.viewFrom||C.line>d.viewTo-1)return!1;var L,z,J;y.line==d.viewFrom||(L=lc(c,y.line))==0?(z=fn(d.view[0].line),J=d.view[0].node):(z=fn(d.view[L].line),J=d.view[L-1].node.nextSibling);var ut=lc(c,C.line),Pt,oe;if(ut==d.view.length-1?(Pt=d.viewTo-1,oe=d.lineDiv.lastChild):(Pt=fn(d.view[ut+1].line)-1,oe=d.view[ut+1].node.previousSibling),!J)return!1;for(var ve=c.doc.splitLines(Na(c,J,oe,z,Pt)),Ue=co(c.doc,rt(z,0),rt(Pt,$r(c.doc,Pt).text.length));ve.length>1&&Ue.length>1;)if(Xe(ve)==Xe(Ue))ve.pop(),Ue.pop(),Pt--;else if(ve[0]==Ue[0])ve.shift(),Ue.shift(),z++;else break;for(var Fe=0,sr=0,dr=ve[0],jr=Ue[0],Rr=Math.min(dr.length,jr.length);Fe<Rr&&dr.charCodeAt(Fe)==jr.charCodeAt(Fe);)++Fe;for(var Kr=Xe(ve),zr=Xe(Ue),Zr=Math.min(Kr.length-(ve.length==1?Fe:0),zr.length-(Ue.length==1?Fe:0));sr<Zr&&Kr.charCodeAt(Kr.length-sr-1)==zr.charCodeAt(zr.length-sr-1);)++sr;if(ve.length==1&&Ue.length==1&&z==y.line)for(;Fe&&Fe>y.ch&&Kr.charCodeAt(Kr.length-sr-1)==zr.charCodeAt(zr.length-sr-1);)Fe--,sr++;ve[ve.length-1]=Kr.slice(0,Kr.length-sr).replace(/^\u200b+/,""),ve[0]=ve[0].slice(Fe).replace(/\u200b+$/,"");var mn=rt(z,Fe),un=rt(Pt,Ue.length?Xe(Ue).length-sr:0);if(ve.length>1||ve[0]||Xt(mn,un))return Ji(c.doc,ve,mn,un,"+input"),!0},xn.prototype.ensurePolled=function(){this.forceCompositionEnd()},xn.prototype.reset=function(){this.forceCompositionEnd()},xn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},xn.prototype.readFromDOMSoon=function(){var c=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(c.readDOMTimeout=null,c.composing)if(c.composing.done)c.composing=null;else return;c.updateFromDOM()},80))},xn.prototype.updateFromDOM=function(){var c=this;(this.cm.isReadOnly()||!this.pollContent())&&La(this.cm,function(){return Vi(c.cm)})},xn.prototype.setUneditable=function(c){c.contentEditable="false"},xn.prototype.onKeyPress=function(c){c.charCode==0||this.composing||(c.preventDefault(),this.cm.isReadOnly()||Ti(this.cm,On)(this.cm,String.fromCharCode(c.charCode==null?c.keyCode:c.charCode),0))},xn.prototype.readOnlyChanged=function(c){this.div.contentEditable=String(c!="nocursor")},xn.prototype.onContextMenu=function(){},xn.prototype.resetPosition=function(){},xn.prototype.needsContentAttribute=!0;function Li(c,d){var b=lt(c,d.line);if(!b||b.hidden)return null;var y=$r(c.doc,d.line),C=Re(b,y,d.line),L=Ft(y,c.doc.direction),z="left";if(L){var J=Wt(L,d.ch);z=J%2?"right":"left"}var ut=We(C.map,d.ch,z);return ut.offset=ut.collapse=="right"?ut.end:ut.start,ut}function Qi(c){for(var d=c;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function vo(c,d){return d&&(c.bad=!0),c}function Na(c,d,b,y,C){var L="",z=!1,J=c.doc.lineSeparator(),ut=!1;function Pt(Fe){return function(sr){return sr.id==Fe}}function oe(){z&&(L+=J,ut&&(L+=J),z=ut=!1)}function ve(Fe){Fe&&(oe(),L+=Fe)}function Ue(Fe){if(Fe.nodeType==1){var sr=Fe.getAttribute("cm-text");if(sr){ve(sr);return}var dr=Fe.getAttribute("cm-marker"),jr;if(dr){var Rr=c.findMarks(rt(y,0),rt(C+1,0),Pt(+dr));Rr.length&&(jr=Rr[0].find(0))&&ve(co(c.doc,jr.from,jr.to).join(J));return}if(Fe.getAttribute("contenteditable")=="false")return;var Kr=/^(pre|div|p|li|table|br)$/i.test(Fe.nodeName);if(!/^br$/i.test(Fe.nodeName)&&Fe.textContent.length==0)return;Kr&&oe();for(var zr=0;zr<Fe.childNodes.length;zr++)Ue(Fe.childNodes[zr]);/^(pre|p)$/i.test(Fe.nodeName)&&(ut=!0),Kr&&(z=!0)}else Fe.nodeType==3&&ve(Fe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ue(d),d!=b;)d=d.nextSibling,ut=!1;return L}function qa(c,d,b){var y;if(d==c.display.lineDiv){if(y=c.display.lineDiv.childNodes[b],!y)return vo(c.clipPos(rt(c.display.viewTo-1)),!0);d=null,b=0}else for(y=d;;y=y.parentNode){if(!y||y==c.display.lineDiv)return null;if(y.parentNode&&y.parentNode==c.display.lineDiv)break}for(var C=0;C<c.display.view.length;C++){var L=c.display.view[C];if(L.node==y)return kp(L,d,b)}}function kp(c,d,b){var y=c.text.firstChild,C=!1;if(!d||!It(y,d))return vo(rt(fn(c.line),0),!0);if(d==y&&(C=!0,d=y.childNodes[b],b=0,!d)){var L=c.rest?Xe(c.rest):c.line;return vo(rt(fn(L),L.text.length),C)}var z=d.nodeType==3?d:null,J=d;for(!z&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(z=d.firstChild,b&&(b=z.nodeValue.length));J.parentNode!=y;)J=J.parentNode;var ut=c.measure,Pt=ut.maps;function oe(jr,Rr,Kr){for(var zr=-1;zr<(Pt?Pt.length:0);zr++)for(var Zr=zr<0?ut.map:Pt[zr],mn=0;mn<Zr.length;mn+=3){var un=Zr[mn+2];if(un==jr||un==Rr){var Yn=fn(zr<0?c.line:c.rest[zr]),qo=Zr[mn]+Kr;return(Kr<0||un!=jr)&&(qo=Zr[mn+(Kr?1:0)]),rt(Yn,qo)}}}var ve=oe(z,J,b);if(ve)return vo(ve,C);for(var Ue=J.nextSibling,Fe=z?z.nodeValue.length-b:0;Ue;Ue=Ue.nextSibling){if(ve=oe(Ue,Ue.firstChild,0),ve)return vo(rt(ve.line,ve.ch-Fe),C);Fe+=Ue.textContent.length}for(var sr=J.previousSibling,dr=b;sr;sr=sr.previousSibling){if(ve=oe(sr,sr.firstChild,-1),ve)return vo(rt(ve.line,ve.ch+dr),C);dr+=sr.textContent.length}}var oi=function(c){this.cm=c,this.prevInput="",this.pollingFast=!1,this.polling=new St,this.hasSelection=!1,this.composing=null,this.resetting=!1};oi.prototype.init=function(c){var d=this,b=this,y=this.cm;this.createField(c);var C=this.textarea;c.wrapper.insertBefore(this.wrapper,c.wrapper.firstChild),dt&&(C.style.width="0px"),Zt(C,"input",function(){ft&&Ot>=9&&d.hasSelection&&(d.hasSelection=null),b.poll()}),Zt(C,"paste",function(z){tn(y,z)||$n(z,y)||(y.state.pasteIncoming=+new Date,b.fastPoll())});function L(z){if(!tn(y,z)){if(y.somethingSelected())uo({lineWise:!1,text:y.getSelections()});else if(y.options.lineWiseCopyCut){var J=Mn(y);uo({lineWise:!0,text:J.text}),z.type=="cut"?y.setSelections(J.ranges,null,Le):(b.prevInput="",C.value=J.text.join(`
`),et(C))}else return;z.type=="cut"&&(y.state.cutIncoming=+new Date)}}Zt(C,"cut",L),Zt(C,"copy",L),Zt(c.scroller,"paste",function(z){if(!(Xi(c,z)||tn(y,z))){if(!C.dispatchEvent){y.state.pasteIncoming=+new Date,b.focus();return}var J=new Event("paste");J.clipboardData=z.clipboardData,C.dispatchEvent(J)}}),Zt(c.lineSpace,"selectstart",function(z){Xi(c,z)||Rt(z)}),Zt(C,"compositionstart",function(){var z=y.getCursor("from");b.composing&&b.composing.range.clear(),b.composing={start:z,range:y.markText(z,y.getCursor("to"),{className:"CodeMirror-composing"})}}),Zt(C,"compositionend",function(){b.composing&&(b.poll(),b.composing.range.clear(),b.composing=null)})},oi.prototype.createField=function(c){this.wrapper=vi(),this.textarea=this.wrapper.firstChild;var d=this.cm.options;gi(this.textarea,d.spellcheck,d.autocorrect,d.autocapitalize)},oi.prototype.screenReaderLabelChanged=function(c){c?this.textarea.setAttribute("aria-label",c):this.textarea.removeAttribute("aria-label")},oi.prototype.prepareSelection=function(){var c=this.cm,d=c.display,b=c.doc,y=qc(c);if(c.options.moveInputWithCursor){var C=ki(c,b.sel.primary().head,"div"),L=d.wrapper.getBoundingClientRect(),z=d.lineDiv.getBoundingClientRect();y.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,C.top+z.top-L.top)),y.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,C.left+z.left-L.left))}return y},oi.prototype.showSelection=function(c){var d=this.cm,b=d.display;xt(b.cursorDiv,c.cursors),xt(b.selectionDiv,c.selection),c.teTop!=null&&(this.wrapper.style.top=c.teTop+"px",this.wrapper.style.left=c.teLeft+"px")},oi.prototype.reset=function(c){if(!(this.contextMenuPending||this.composing&&c)){var d=this.cm;if(this.resetting=!0,d.somethingSelected()){this.prevInput="";var b=d.getSelection();this.textarea.value=b,d.state.focused&&et(this.textarea),ft&&Ot>=9&&(this.hasSelection=b)}else c||(this.prevInput=this.textarea.value="",ft&&Ot>=9&&(this.hasSelection=null));this.resetting=!1}},oi.prototype.getField=function(){return this.textarea},oi.prototype.supportsTouch=function(){return!1},oi.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!R||$t(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},oi.prototype.blur=function(){this.textarea.blur()},oi.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},oi.prototype.receivedFocus=function(){this.slowPoll()},oi.prototype.slowPoll=function(){var c=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){c.poll(),c.cm.state.focused&&c.slowPoll()})},oi.prototype.fastPoll=function(){var c=!1,d=this;d.pollingFast=!0;function b(){var y=d.poll();!y&&!c?(c=!0,d.polling.set(60,b)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,b)},oi.prototype.poll=function(){var c=this,d=this.cm,b=this.textarea,y=this.prevInput;if(this.contextMenuPending||this.resetting||!d.state.focused||lo(b)&&!y&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var C=b.value;if(C==y&&!d.somethingSelected())return!1;if(ft&&Ot>=9&&this.hasSelection===C||I&&/[\uf700-\uf7ff]/.test(C))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var L=C.charCodeAt(0);if(L==8203&&!y&&(y="​"),L==8666)return this.reset(),this.cm.execCommand("undo")}for(var z=0,J=Math.min(y.length,C.length);z<J&&y.charCodeAt(z)==C.charCodeAt(z);)++z;return La(d,function(){On(d,C.slice(z),y.length-z,null,c.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?b.value=c.prevInput="":c.prevInput=C,c.composing&&(c.composing.range.clear(),c.composing.range=d.markText(c.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},oi.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},oi.prototype.onKeyPress=function(){ft&&Ot>=9&&(this.hasSelection=null),this.fastPoll()},oi.prototype.onContextMenu=function(c){var d=this,b=d.cm,y=b.display,C=d.textarea;d.contextMenuPending&&d.contextMenuPending();var L=pl(b,c),z=y.scroller.scrollTop;if(!L||k)return;var J=b.options.resetSelectionOnContextMenu;J&&b.doc.sel.contains(L)==-1&&Ti(b,Mi)(b.doc,Ta(L),Le);var ut=C.style.cssText,Pt=d.wrapper.style.cssText,oe=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(c.clientY-oe.top-5)+"px; left: "+(c.clientX-oe.left-5)+`px;
      z-index: 1000; background: `+(ft?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ve;q&&(ve=C.ownerDocument.defaultView.scrollY),y.input.focus(),q&&C.ownerDocument.defaultView.scrollTo(null,ve),y.input.reset(),b.somethingSelected()||(C.value=d.prevInput=" "),d.contextMenuPending=Fe,y.selForContextMenu=b.doc.sel,clearTimeout(y.detectingSelectAll);function Ue(){if(C.selectionStart!=null){var dr=b.somethingSelected(),jr="​"+(dr?C.value:"");C.value="⇚",C.value=jr,d.prevInput=dr?"":"​",C.selectionStart=1,C.selectionEnd=jr.length,y.selForContextMenu=b.doc.sel}}function Fe(){if(d.contextMenuPending==Fe&&(d.contextMenuPending=!1,d.wrapper.style.cssText=Pt,C.style.cssText=ut,ft&&Ot<9&&y.scrollbars.setScrollTop(y.scroller.scrollTop=z),C.selectionStart!=null)){(!ft||ft&&Ot<9)&&Ue();var dr=0,jr=function(){y.selForContextMenu==b.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&d.prevInput=="​"?Ti(b,Gf)(b):dr++<10?y.detectingSelectAll=setTimeout(jr,500):(y.selForContextMenu=null,y.input.reset())};y.detectingSelectAll=setTimeout(jr,200)}}if(ft&&Ot>=9&&Ue(),U){Je(c);var sr=function(){fr(window,"mouseup",sr),setTimeout(Fe,20)};Zt(window,"mouseup",sr)}else setTimeout(Fe,50)},oi.prototype.readOnlyChanged=function(c){c||this.reset(),this.textarea.disabled=c=="nocursor",this.textarea.readOnly=!!c},oi.prototype.setUneditable=function(){},oi.prototype.needsContentAttribute=!1;function yc(c,d){if(d=d?Ht(d):{},d.value=c.value,!d.tabindex&&c.tabIndex&&(d.tabindex=c.tabIndex),!d.placeholder&&c.placeholder&&(d.placeholder=c.placeholder),d.autofocus==null){var b=$t(c.ownerDocument);d.autofocus=b==c||c.getAttribute("autofocus")!=null&&b==document.body}function y(){c.value=J.getValue()}var C;if(c.form&&(Zt(c.form,"submit",y),!d.leaveSubmitMethodAlone)){var L=c.form;C=L.submit;try{var z=L.submit=function(){y(),L.submit=C,L.submit(),L.submit=z}}catch{}}d.finishInit=function(ut){ut.save=y,ut.getTextArea=function(){return c},ut.toTextArea=function(){ut.toTextArea=isNaN,y(),c.parentNode.removeChild(ut.getWrapperElement()),c.style.display="",c.form&&(fr(c.form,"submit",y),!d.leaveSubmitMethodAlone&&typeof c.form.submit=="function"&&(c.form.submit=C))}},c.style.display="none";var J=Ur(function(ut){return c.parentNode.insertBefore(ut,c.nextSibling)},d);return J}function pa(c){c.off=fr,c.on=Zt,c.wheelEventPixels=Cp,c.Doc=Pa,c.splitLines=Dn,c.countColumn=Dt,c.findColumn=Nr,c.isWordChar=pt,c.Pass=de,c.signal=nn,c.Line=Hi,c.changeEnd=_l,c.scrollbarModel=ml,c.Pos=rt,c.cmpPos=Xt,c.modes=In,c.mimeModes=Yo,c.resolveMode=Co,c.getMode=yo,c.modeExtensions=So,c.extendMode=Gi,c.copyState=Wo,c.startState=ao,c.innerMode=Mo,c.commands=Gl,c.keyMap=As,c.keyName=Uo,c.isModifierKey=hi,c.lookupKey=$l,c.normalizeKeyMap=Ol,c.StringStream=Xn,c.SharedTextMarker=eu,c.TextMarker=Gs,c.LineWidget=zl,c.e_preventDefault=Rt,c.e_stopPropagation=ee,c.e_stop=Je,c.addClass=Yt,c.contains=It,c.rmClass=X,c.keyNames=qs}hn(Ur),po(Ur);var Zl="iter insert remove copy getEditor constructor".split(" ");for(var Fu in Pa.prototype)Pa.prototype.hasOwnProperty(Fu)&&Vt(Zl,Fu)<0&&(Ur.prototype[Fu]=function(c){return function(){return c.apply(this.doc,arguments)}}(Pa.prototype[Fu]));return Un(Pa),Ur.inputStyles={textarea:oi,contenteditable:xn},Ur.defineMode=function(c){!Ur.defaults.mode&&c!="null"&&(Ur.defaults.mode=c),go.apply(this,arguments)},Ur.defineMIME=Fo,Ur.defineMode("null",function(){return{token:function(c){return c.skipToEnd()}}}),Ur.defineMIME("text/plain","null"),Ur.defineExtension=function(c,d){Ur.prototype[c]=d},Ur.defineDocExtension=function(c,d){Pa.prototype[c]=d},Ur.fromTextArea=yc,pa(Ur),Ur.version="5.65.15",Ur})},629:(wt,pe,Te)=>{(function(we){we(Te(631))})(function(we){we.defineMode("css",function(X,tt){var xt=tt.inline;tt.propertyKeywords||(tt=we.resolveMode("text/css"));var Q=X.indentUnit,_t=tt.tokenHooks,W=tt.documentTypes||{},It=tt.mediaTypes||{},$t=tt.mediaFeatures||{},Yt=tt.mediaValueKeywords||{},Ne=tt.propertyKeywords||{},et=tt.nonStandardPropertyKeywords||{},Tt=tt.fontProperties||{},jt=tt.counterDescriptors||{},zt=tt.colorKeywords||{},Ht=tt.valueKeywords||{},Dt=tt.allowNested,St=tt.lineComment,Vt=tt.supportsAtComponent===!0,Me=X.highlightNonStandardPropertyKeywords!==!1,de,Le;function ar(pt,le){return de=le,pt}function Er(pt,le){var se=pt.next();if(_t[se]){var or=_t[se](pt,le);if(or!==!1)return or}if(se=="@")return pt.eatWhile(/[\w\\\-]/),ar("def",pt.current());if(se=="="||(se=="~"||se=="|")&&pt.eat("="))return ar(null,"compare");if(se=='"'||se=="'")return le.tokenize=Nr(se),le.tokenize(pt,le);if(se=="#")return pt.eatWhile(/[\w\\\-]/),ar("atom","hash");if(se=="!")return pt.match(/^\s*\w*/),ar("keyword","important");if(/\d/.test(se)||se=="."&&pt.eat(/\d/))return pt.eatWhile(/[\w.%]/),ar("number","unit");if(se==="-"){if(/[\d.]/.test(pt.peek()))return pt.eatWhile(/[\w.%]/),ar("number","unit");if(pt.match(/^-[\w\\\-]*/))return pt.eatWhile(/[\w\\\-]/),pt.match(/^\s*:/,!1)?ar("variable-2","variable-definition"):ar("variable-2","variable");if(pt.match(/^\w+-/))return ar("meta","meta")}else return/[,+>*\/]/.test(se)?ar(null,"select-op"):se=="."&&pt.match(/^-?[_a-z][_a-z0-9-]*/i)?ar("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(se)?ar(null,se):pt.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(pt.current())&&(le.tokenize=Ar),ar("variable callee","variable")):/[\w\\\-]/.test(se)?(pt.eatWhile(/[\w\\\-]/),ar("property","word")):ar(null,null)}function Nr(pt){return function(le,se){for(var or=!1,mr;(mr=le.next())!=null;){if(mr==pt&&!or){pt==")"&&le.backUp(1);break}or=!or&&mr=="\\"}return(mr==pt||!or&&pt!=")")&&(se.tokenize=null),ar("string","string")}}function Ar(pt,le){return pt.next(),pt.match(/^\s*[\"\')]/,!1)?le.tokenize=null:le.tokenize=Nr(")"),ar(null,"(")}function Fr(pt,le,se){this.type=pt,this.indent=le,this.prev=se}function Xe(pt,le,se,or){return pt.context=new Fr(se,le.indentation()+(or===!1?0:Q),pt.context),se}function at(pt){return pt.context.prev&&(pt.context=pt.context.prev),pt.context.type}function kt(pt,le,se){return Ae[se.context.type](pt,le,se)}function Gt(pt,le,se,or){for(var mr=or||1;mr>0;mr--)se.context=se.context.prev;return kt(pt,le,se)}function ye(pt){var le=pt.current().toLowerCase();Ht.hasOwnProperty(le)?Le="atom":zt.hasOwnProperty(le)?Le="keyword":Le="variable"}var Ae={};return Ae.top=function(pt,le,se){if(pt=="{")return Xe(se,le,"block");if(pt=="}"&&se.context.prev)return at(se);if(Vt&&/@component/i.test(pt))return Xe(se,le,"atComponentBlock");if(/^@(-moz-)?document$/i.test(pt))return Xe(se,le,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(pt))return Xe(se,le,"atBlock");if(/^@(font-face|counter-style)/i.test(pt))return se.stateArg=pt,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(pt))return"keyframes";if(pt&&pt.charAt(0)=="@")return Xe(se,le,"at");if(pt=="hash")Le="builtin";else if(pt=="word")Le="tag";else{if(pt=="variable-definition")return"maybeprop";if(pt=="interpolation")return Xe(se,le,"interpolation");if(pt==":")return"pseudo";if(Dt&&pt=="(")return Xe(se,le,"parens")}return se.context.type},Ae.block=function(pt,le,se){if(pt=="word"){var or=le.current().toLowerCase();return Ne.hasOwnProperty(or)?(Le="property","maybeprop"):et.hasOwnProperty(or)?(Le=Me?"string-2":"property","maybeprop"):Dt?(Le=le.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Le+=" error","maybeprop")}else return pt=="meta"?"block":!Dt&&(pt=="hash"||pt=="qualifier")?(Le="error","block"):Ae.top(pt,le,se)},Ae.maybeprop=function(pt,le,se){return pt==":"?Xe(se,le,"prop"):kt(pt,le,se)},Ae.prop=function(pt,le,se){if(pt==";")return at(se);if(pt=="{"&&Dt)return Xe(se,le,"propBlock");if(pt=="}"||pt=="{")return Gt(pt,le,se);if(pt=="(")return Xe(se,le,"parens");if(pt=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(le.current()))Le+=" error";else if(pt=="word")ye(le);else if(pt=="interpolation")return Xe(se,le,"interpolation");return"prop"},Ae.propBlock=function(pt,le,se){return pt=="}"?at(se):pt=="word"?(Le="property","maybeprop"):se.context.type},Ae.parens=function(pt,le,se){return pt=="{"||pt=="}"?Gt(pt,le,se):pt==")"?at(se):pt=="("?Xe(se,le,"parens"):pt=="interpolation"?Xe(se,le,"interpolation"):(pt=="word"&&ye(le),"parens")},Ae.pseudo=function(pt,le,se){return pt=="meta"?"pseudo":pt=="word"?(Le="variable-3",se.context.type):kt(pt,le,se)},Ae.documentTypes=function(pt,le,se){return pt=="word"&&W.hasOwnProperty(le.current())?(Le="tag",se.context.type):Ae.atBlock(pt,le,se)},Ae.atBlock=function(pt,le,se){if(pt=="(")return Xe(se,le,"atBlock_parens");if(pt=="}"||pt==";")return Gt(pt,le,se);if(pt=="{")return at(se)&&Xe(se,le,Dt?"block":"top");if(pt=="interpolation")return Xe(se,le,"interpolation");if(pt=="word"){var or=le.current().toLowerCase();or=="only"||or=="not"||or=="and"||or=="or"?Le="keyword":It.hasOwnProperty(or)?Le="attribute":$t.hasOwnProperty(or)?Le="property":Yt.hasOwnProperty(or)?Le="keyword":Ne.hasOwnProperty(or)?Le="property":et.hasOwnProperty(or)?Le=Me?"string-2":"property":Ht.hasOwnProperty(or)?Le="atom":zt.hasOwnProperty(or)?Le="keyword":Le="error"}return se.context.type},Ae.atComponentBlock=function(pt,le,se){return pt=="}"?Gt(pt,le,se):pt=="{"?at(se)&&Xe(se,le,Dt?"block":"top",!1):(pt=="word"&&(Le="error"),se.context.type)},Ae.atBlock_parens=function(pt,le,se){return pt==")"?at(se):pt=="{"||pt=="}"?Gt(pt,le,se,2):Ae.atBlock(pt,le,se)},Ae.restricted_atBlock_before=function(pt,le,se){return pt=="{"?Xe(se,le,"restricted_atBlock"):pt=="word"&&se.stateArg=="@counter-style"?(Le="variable","restricted_atBlock_before"):kt(pt,le,se)},Ae.restricted_atBlock=function(pt,le,se){return pt=="}"?(se.stateArg=null,at(se)):pt=="word"?(se.stateArg=="@font-face"&&!Tt.hasOwnProperty(le.current().toLowerCase())||se.stateArg=="@counter-style"&&!jt.hasOwnProperty(le.current().toLowerCase())?Le="error":Le="property","maybeprop"):"restricted_atBlock"},Ae.keyframes=function(pt,le,se){return pt=="word"?(Le="variable","keyframes"):pt=="{"?Xe(se,le,"top"):kt(pt,le,se)},Ae.at=function(pt,le,se){return pt==";"?at(se):pt=="{"||pt=="}"?Gt(pt,le,se):(pt=="word"?Le="tag":pt=="hash"&&(Le="builtin"),"at")},Ae.interpolation=function(pt,le,se){return pt=="}"?at(se):pt=="{"||pt==";"?Gt(pt,le,se):(pt=="word"?Le="variable":pt!="variable"&&pt!="("&&pt!=")"&&(Le="error"),"interpolation")},{startState:function(pt){return{tokenize:null,state:xt?"block":"top",stateArg:null,context:new Fr(xt?"block":"top",pt||0,null)}},token:function(pt,le){if(!le.tokenize&&pt.eatSpace())return null;var se=(le.tokenize||Er)(pt,le);return se&&typeof se=="object"&&(de=se[1],se=se[0]),Le=se,de!="comment"&&(le.state=Ae[le.state](de,pt,le)),Le},indent:function(pt,le){var se=pt.context,or=le&&le.charAt(0),mr=se.indent;return se.type=="prop"&&(or=="}"||or==")")&&(se=se.prev),se.prev&&(or=="}"&&(se.type=="block"||se.type=="top"||se.type=="interpolation"||se.type=="restricted_atBlock")?(se=se.prev,mr=se.indent):(or==")"&&(se.type=="parens"||se.type=="atBlock_parens")||or=="{"&&(se.type=="at"||se.type=="atBlock"))&&(mr=Math.max(0,se.indent-Q))),mr},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:St,fold:"brace"}});function ke(X){for(var tt={},xt=0;xt<X.length;++xt)tt[X[xt].toLowerCase()]=!0;return tt}var Jt=["domain","regexp","url","url-prefix"],Kt=ke(Jt),ft=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],Ot=ke(ft),q=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],mt=ke(q),K=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],st=ke(K),k=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],B=ke(k),ct=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],vt=ke(ct),dt=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],H=ke(dt),R=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],I=ke(R),N=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],$=ke(N),F=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],V=ke(F),U=Jt.concat(ft).concat(q).concat(K).concat(k).concat(ct).concat(N).concat(F);we.registerHelper("hintWords","css",U);function it(X,tt){for(var xt=!1,Q;(Q=X.next())!=null;){if(xt&&Q=="/"){tt.tokenize=null;break}xt=Q=="*"}return["comment","comment"]}we.defineMIME("text/css",{documentTypes:Kt,mediaTypes:Ot,mediaFeatures:mt,mediaValueKeywords:st,propertyKeywords:B,nonStandardPropertyKeywords:vt,fontProperties:H,counterDescriptors:I,colorKeywords:$,valueKeywords:V,tokenHooks:{"/":function(X,tt){return X.eat("*")?(tt.tokenize=it,it(X,tt)):!1}},name:"css"}),we.defineMIME("text/x-scss",{mediaTypes:Ot,mediaFeatures:mt,mediaValueKeywords:st,propertyKeywords:B,nonStandardPropertyKeywords:vt,colorKeywords:$,valueKeywords:V,fontProperties:H,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(X,tt){return X.eat("/")?(X.skipToEnd(),["comment","comment"]):X.eat("*")?(tt.tokenize=it,it(X,tt)):["operator","operator"]},":":function(X){return X.match(/^\s*\{/,!1)?[null,null]:!1},$:function(X){return X.match(/^[\w-]+/),X.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(X){return X.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),we.defineMIME("text/x-less",{mediaTypes:Ot,mediaFeatures:mt,mediaValueKeywords:st,propertyKeywords:B,nonStandardPropertyKeywords:vt,colorKeywords:$,valueKeywords:V,fontProperties:H,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(X,tt){return X.eat("/")?(X.skipToEnd(),["comment","comment"]):X.eat("*")?(tt.tokenize=it,it(X,tt)):["operator","operator"]},"@":function(X){return X.eat("{")?[null,"interpolation"]:X.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(X.eatWhile(/[\w\\\-]/),X.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),we.defineMIME("text/x-gss",{documentTypes:Kt,mediaTypes:Ot,mediaFeatures:mt,propertyKeywords:B,nonStandardPropertyKeywords:vt,fontProperties:H,counterDescriptors:I,colorKeywords:$,valueKeywords:V,supportsAtComponent:!0,tokenHooks:{"/":function(X,tt){return X.eat("*")?(tt.tokenize=it,it(X,tt)):!1}},name:"css",helperType:"gss"})})},531:(wt,pe,Te)=>{(function(we){we(Te(631),Te(589),Te(876),Te(629))})(function(we){var ke={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function Jt(st,k,B){var ct=st.current(),vt=ct.search(k);return vt>-1?st.backUp(ct.length-vt):ct.match(/<\/?$/)&&(st.backUp(ct.length),st.match(k,!1)||st.match(ct)),B}var Kt={};function ft(st){var k=Kt[st];return k||(Kt[st]=new RegExp("\\s+"+st+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function Ot(st,k){var B=st.match(ft(k));return B?/^\s*(.*?)\s*$/.exec(B[2])[1]:""}function q(st,k){return new RegExp((k?"^":"")+"</\\s*"+st+"\\s*>","i")}function mt(st,k){for(var B in st)for(var ct=k[B]||(k[B]=[]),vt=st[B],dt=vt.length-1;dt>=0;dt--)ct.unshift(vt[dt])}function K(st,k){for(var B=0;B<st.length;B++){var ct=st[B];if(!ct[0]||ct[1].test(Ot(k,ct[0])))return ct[2]}}we.defineMode("htmlmixed",function(st,k){var B=we.getMode(st,{name:"xml",htmlMode:!0,multilineTagIndentFactor:k.multilineTagIndentFactor,multilineTagIndentPastTag:k.multilineTagIndentPastTag,allowMissingTagName:k.allowMissingTagName}),ct={},vt=k&&k.tags,dt=k&&k.scriptTypes;if(mt(ke,ct),vt&&mt(vt,ct),dt)for(var H=dt.length-1;H>=0;H--)ct.script.unshift(["type",dt[H].matches,dt[H].mode]);function R(I,N){var $=B.token(I,N.htmlState),F=/\btag\b/.test($),V;if(F&&!/[<>\s\/]/.test(I.current())&&(V=N.htmlState.tagName&&N.htmlState.tagName.toLowerCase())&&ct.hasOwnProperty(V))N.inTag=V+" ";else if(N.inTag&&F&&/>$/.test(I.current())){var U=/^([\S]+) (.*)/.exec(N.inTag);N.inTag=null;var it=I.current()==">"&&K(ct[U[1]],U[2]),X=we.getMode(st,it),tt=q(U[1],!0),xt=q(U[1],!1);N.token=function(Q,_t){return Q.match(tt,!1)?(_t.token=R,_t.localState=_t.localMode=null,null):Jt(Q,xt,_t.localMode.token(Q,_t.localState))},N.localMode=X,N.localState=we.startState(X,B.indent(N.htmlState,"",""))}else N.inTag&&(N.inTag+=I.current(),I.eol()&&(N.inTag+=" "));return $}return{startState:function(){var I=we.startState(B);return{token:R,inTag:null,localMode:null,localState:null,htmlState:I}},copyState:function(I){var N;return I.localState&&(N=we.copyState(I.localMode,I.localState)),{token:I.token,inTag:I.inTag,localMode:I.localMode,localState:N,htmlState:we.copyState(B,I.htmlState)}},token:function(I,N){return N.token(I,N)},indent:function(I,N,$){return!I.localMode||/^\s*<\//.test(N)?B.indent(I.htmlState,N,$):I.localMode.indent?I.localMode.indent(I.localState,N,$):we.Pass},innerMode:function(I){return{state:I.localState||I.htmlState,mode:I.localMode||B}}}},"xml","javascript","css"),we.defineMIME("text/html","htmlmixed")})},876:(wt,pe,Te)=>{(function(we){we(Te(631))})(function(we){we.defineMode("javascript",function(ke,Jt){var Kt=ke.indentUnit,ft=Jt.statementIndent,Ot=Jt.jsonld,q=Jt.json||Ot,mt=Jt.trackScope!==!1,K=Jt.typescript,st=Jt.wordCharacters||/[\w$\xa1-\uffff]/,k=function(){function rt(Xr){return{type:Xr,style:"keyword"}}var Xt=rt("keyword a"),ir=rt("keyword b"),pr=rt("keyword c"),Hr=rt("keyword d"),wn=rt("operator"),Nn={type:"atom",style:"atom"};return{if:rt("if"),while:Xt,with:Xt,else:ir,do:ir,try:ir,finally:ir,return:Hr,break:Hr,continue:Hr,new:rt("new"),delete:pr,void:pr,throw:pr,debugger:rt("debugger"),var:rt("var"),const:rt("var"),let:rt("var"),function:rt("function"),catch:rt("catch"),for:rt("for"),switch:rt("switch"),case:rt("case"),default:rt("default"),in:wn,typeof:wn,instanceof:wn,true:Nn,false:Nn,null:Nn,undefined:Nn,NaN:Nn,Infinity:Nn,this:rt("this"),class:rt("class"),super:rt("atom"),yield:pr,export:rt("export"),import:rt("import"),extends:pr,await:pr}}(),B=/[+\-*&%=<>!?|~^@]/,ct=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function vt(rt){for(var Xt=!1,ir,pr=!1;(ir=rt.next())!=null;){if(!Xt){if(ir=="/"&&!pr)return;ir=="["?pr=!0:pr&&ir=="]"&&(pr=!1)}Xt=!Xt&&ir=="\\"}}var dt,H;function R(rt,Xt,ir){return dt=rt,H=ir,Xt}function I(rt,Xt){var ir=rt.next();if(ir=='"'||ir=="'")return Xt.tokenize=N(ir),Xt.tokenize(rt,Xt);if(ir=="."&&rt.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return R("number","number");if(ir=="."&&rt.match(".."))return R("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ir))return R(ir);if(ir=="="&&rt.eat(">"))return R("=>","operator");if(ir=="0"&&rt.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return R("number","number");if(/\d/.test(ir))return rt.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),R("number","number");if(ir=="/")return rt.eat("*")?(Xt.tokenize=$,$(rt,Xt)):rt.eat("/")?(rt.skipToEnd(),R("comment","comment")):En(rt,Xt,1)?(vt(rt),rt.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),R("regexp","string-2")):(rt.eat("="),R("operator","operator",rt.current()));if(ir=="`")return Xt.tokenize=F,F(rt,Xt);if(ir=="#"&&rt.peek()=="!")return rt.skipToEnd(),R("meta","meta");if(ir=="#"&&rt.eatWhile(st))return R("variable","property");if(ir=="<"&&rt.match("!--")||ir=="-"&&rt.match("->")&&!/\S/.test(rt.string.slice(0,rt.start)))return rt.skipToEnd(),R("comment","comment");if(B.test(ir))return(ir!=">"||!Xt.lexical||Xt.lexical.type!=">")&&(rt.eat("=")?(ir=="!"||ir=="=")&&rt.eat("="):/[<>*+\-|&?]/.test(ir)&&(rt.eat(ir),ir==">"&&rt.eat(ir))),ir=="?"&&rt.eat(".")?R("."):R("operator","operator",rt.current());if(st.test(ir)){rt.eatWhile(st);var pr=rt.current();if(Xt.lastType!="."){if(k.propertyIsEnumerable(pr)){var Hr=k[pr];return R(Hr.type,Hr.style,pr)}if(pr=="async"&&rt.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return R("async","keyword",pr)}return R("variable","variable",pr)}}function N(rt){return function(Xt,ir){var pr=!1,Hr;if(Ot&&Xt.peek()=="@"&&Xt.match(ct))return ir.tokenize=I,R("jsonld-keyword","meta");for(;(Hr=Xt.next())!=null&&!(Hr==rt&&!pr);)pr=!pr&&Hr=="\\";return pr||(ir.tokenize=I),R("string","string")}}function $(rt,Xt){for(var ir=!1,pr;pr=rt.next();){if(pr=="/"&&ir){Xt.tokenize=I;break}ir=pr=="*"}return R("comment","comment")}function F(rt,Xt){for(var ir=!1,pr;(pr=rt.next())!=null;){if(!ir&&(pr=="`"||pr=="$"&&rt.eat("{"))){Xt.tokenize=I;break}ir=!ir&&pr=="\\"}return R("quasi","string-2",rt.current())}var V="([{}])";function U(rt,Xt){Xt.fatArrowAt&&(Xt.fatArrowAt=null);var ir=rt.string.indexOf("=>",rt.start);if(!(ir<0)){if(K){var pr=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(rt.string.slice(rt.start,ir));pr&&(ir=pr.index)}for(var Hr=0,wn=!1,Nn=ir-1;Nn>=0;--Nn){var Xr=rt.string.charAt(Nn),cr=V.indexOf(Xr);if(cr>=0&&cr<3){if(!Hr){++Nn;break}if(--Hr==0){Xr=="("&&(wn=!0);break}}else if(cr>=3&&cr<6)++Hr;else if(st.test(Xr))wn=!0;else if(/["'\/`]/.test(Xr))for(;;--Nn){if(Nn==0)return;var Mt=rt.string.charAt(Nn-1);if(Mt==Xr&&rt.string.charAt(Nn-2)!="\\"){Nn--;break}}else if(wn&&!Hr){++Nn;break}}wn&&!Hr&&(Xt.fatArrowAt=Nn)}}var it={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function X(rt,Xt,ir,pr,Hr,wn){this.indented=rt,this.column=Xt,this.type=ir,this.prev=Hr,this.info=wn,pr!=null&&(this.align=pr)}function tt(rt,Xt){if(!mt)return!1;for(var ir=rt.localVars;ir;ir=ir.next)if(ir.name==Xt)return!0;for(var pr=rt.context;pr;pr=pr.prev)for(var ir=pr.vars;ir;ir=ir.next)if(ir.name==Xt)return!0}function xt(rt,Xt,ir,pr,Hr){var wn=rt.cc;for(Q.state=rt,Q.stream=Hr,Q.marked=null,Q.cc=wn,Q.style=Xt,rt.lexical.hasOwnProperty("align")||(rt.lexical.align=!0);;){var Nn=wn.length?wn.pop():q?ar:de;if(Nn(ir,pr)){for(;wn.length&&wn[wn.length-1].lex;)wn.pop()();return Q.marked?Q.marked:ir=="variable"&&tt(rt,pr)?"variable-2":Xt}}}var Q={state:null,column:null,marked:null,cc:null};function _t(){for(var rt=arguments.length-1;rt>=0;rt--)Q.cc.push(arguments[rt])}function W(){return _t.apply(null,arguments),!0}function It(rt,Xt){for(var ir=Xt;ir;ir=ir.next)if(ir.name==rt)return!0;return!1}function $t(rt){var Xt=Q.state;if(Q.marked="def",!!mt){if(Xt.context){if(Xt.lexical.info=="var"&&Xt.context&&Xt.context.block){var ir=Yt(rt,Xt.context);if(ir!=null){Xt.context=ir;return}}else if(!It(rt,Xt.localVars)){Xt.localVars=new Tt(rt,Xt.localVars);return}}Jt.globalVars&&!It(rt,Xt.globalVars)&&(Xt.globalVars=new Tt(rt,Xt.globalVars))}}function Yt(rt,Xt){if(Xt)if(Xt.block){var ir=Yt(rt,Xt.prev);return ir?ir==Xt.prev?Xt:new et(ir,Xt.vars,!0):null}else return It(rt,Xt.vars)?Xt:new et(Xt.prev,new Tt(rt,Xt.vars),!1);else return null}function Ne(rt){return rt=="public"||rt=="private"||rt=="protected"||rt=="abstract"||rt=="readonly"}function et(rt,Xt,ir){this.prev=rt,this.vars=Xt,this.block=ir}function Tt(rt,Xt){this.name=rt,this.next=Xt}var jt=new Tt("this",new Tt("arguments",null));function zt(){Q.state.context=new et(Q.state.context,Q.state.localVars,!1),Q.state.localVars=jt}function Ht(){Q.state.context=new et(Q.state.context,Q.state.localVars,!0),Q.state.localVars=null}zt.lex=Ht.lex=!0;function Dt(){Q.state.localVars=Q.state.context.vars,Q.state.context=Q.state.context.prev}Dt.lex=!0;function St(rt,Xt){var ir=function(){var pr=Q.state,Hr=pr.indented;if(pr.lexical.type=="stat")Hr=pr.lexical.indented;else for(var wn=pr.lexical;wn&&wn.type==")"&&wn.align;wn=wn.prev)Hr=wn.indented;pr.lexical=new X(Hr,Q.stream.column(),rt,null,pr.lexical,Xt)};return ir.lex=!0,ir}function Vt(){var rt=Q.state;rt.lexical.prev&&(rt.lexical.type==")"&&(rt.indented=rt.lexical.indented),rt.lexical=rt.lexical.prev)}Vt.lex=!0;function Me(rt){function Xt(ir){return ir==rt?W():rt==";"||ir=="}"||ir==")"||ir=="]"?_t():W(Xt)}return Xt}function de(rt,Xt){return rt=="var"?W(St("vardef",Xt),fe,Me(";"),Vt):rt=="keyword a"?W(St("form"),Nr,de,Vt):rt=="keyword b"?W(St("form"),de,Vt):rt=="keyword d"?Q.stream.match(/^\s*$/,!1)?W():W(St("stat"),Fr,Me(";"),Vt):rt=="debugger"?W(Me(";")):rt=="{"?W(St("}"),Ht,ne,Vt,Dt):rt==";"?W():rt=="if"?(Q.state.lexical.info=="else"&&Q.state.cc[Q.state.cc.length-1]==Vt&&Q.state.cc.pop()(),W(St("form"),Nr,de,Vt,Dn)):rt=="function"?W(ro):rt=="for"?W(St("form"),Ht,lo,de,Dt,Vt):rt=="class"||K&&Xt=="interface"?(Q.marked="keyword",W(St("form",rt=="class"?rt:Xt),Co,Vt)):rt=="variable"?K&&Xt=="declare"?(Q.marked="keyword",W(de)):K&&(Xt=="module"||Xt=="enum"||Xt=="type")&&Q.stream.match(/^\s*\w/,!1)?(Q.marked="keyword",Xt=="enum"?W(fn):Xt=="type"?W(Yo,Me("operator"),fr,Me(";")):W(St("form"),Pe,Me("{"),St("}"),ne,Vt,Vt)):K&&Xt=="namespace"?(Q.marked="keyword",W(St("form"),ar,de,Vt)):K&&Xt=="abstract"?(Q.marked="keyword",W(de)):W(St("stat"),or):rt=="switch"?W(St("form"),Nr,Me("{"),St("}","switch"),Ht,ne,Vt,Vt,Dt):rt=="case"?W(ar,Me(":")):rt=="default"?W(Me(":")):rt=="catch"?W(St("form"),zt,Le,de,Vt,Dt):rt=="export"?W(St("stat"),Wo,Vt):rt=="import"?W(St("stat"),ao,Vt):rt=="async"?W(de):Xt=="@"?W(ar,de):_t(St("stat"),ar,Me(";"),Vt)}function Le(rt){if(rt=="(")return W(go,Me(")"))}function ar(rt,Xt){return Ar(rt,Xt,!1)}function Er(rt,Xt){return Ar(rt,Xt,!0)}function Nr(rt){return rt!="("?_t():W(St(")"),Fr,Me(")"),Vt)}function Ar(rt,Xt,ir){if(Q.state.fatArrowAt==Q.stream.start){var pr=ir?Ae:ye;if(rt=="(")return W(zt,St(")"),yt(go,")"),Vt,Me("=>"),pr,Dt);if(rt=="variable")return _t(zt,Pe,Me("=>"),pr,Dt)}var Hr=ir?at:Xe;return it.hasOwnProperty(rt)?W(Hr):rt=="function"?W(ro,Hr):rt=="class"||K&&Xt=="interface"?(Q.marked="keyword",W(St("form"),Fo,Vt)):rt=="keyword c"||rt=="async"?W(ir?Er:ar):rt=="("?W(St(")"),Fr,Me(")"),Vt,Hr):rt=="operator"||rt=="spread"?W(ir?Er:ar):rt=="["?W(St("]"),Lo,Vt,Hr):rt=="{"?Wt(er,"}",null,Hr):rt=="quasi"?_t(kt,Hr):rt=="new"?W(pt(ir)):W()}function Fr(rt){return rt.match(/[;\}\)\],]/)?_t():_t(ar)}function Xe(rt,Xt){return rt==","?W(Fr):at(rt,Xt,!1)}function at(rt,Xt,ir){var pr=ir==!1?Xe:at,Hr=ir==!1?ar:Er;if(rt=="=>")return W(zt,ir?Ae:ye,Dt);if(rt=="operator")return/\+\+|--/.test(Xt)||K&&Xt=="!"?W(pr):K&&Xt=="<"&&Q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?W(St(">"),yt(fr,">"),Vt,pr):Xt=="?"?W(ar,Me(":"),Hr):W(Hr);if(rt=="quasi")return _t(kt,pr);if(rt!=";"){if(rt=="(")return Wt(Er,")","call",pr);if(rt==".")return W(mr,pr);if(rt=="[")return W(St("]"),Fr,Me("]"),Vt,pr);if(K&&Xt=="as")return Q.marked="keyword",W(fr,pr);if(rt=="regexp")return Q.state.lastType=Q.marked="operator",Q.stream.backUp(Q.stream.pos-Q.stream.start-1),W(Hr)}}function kt(rt,Xt){return rt!="quasi"?_t():Xt.slice(Xt.length-2)!="${"?W(kt):W(Fr,Gt)}function Gt(rt){if(rt=="}")return Q.marked="string-2",Q.state.tokenize=F,W(kt)}function ye(rt){return U(Q.stream,Q.state),_t(rt=="{"?de:ar)}function Ae(rt){return U(Q.stream,Q.state),_t(rt=="{"?de:Er)}function pt(rt){return function(Xt){return Xt=="."?W(rt?se:le):Xt=="variable"&&K?W(je,rt?at:Xe):_t(rt?Er:ar)}}function le(rt,Xt){if(Xt=="target")return Q.marked="keyword",W(Xe)}function se(rt,Xt){if(Xt=="target")return Q.marked="keyword",W(at)}function or(rt){return rt==":"?W(Vt,de):_t(Xe,Me(";"),Vt)}function mr(rt){if(rt=="variable")return Q.marked="property",W()}function er(rt,Xt){if(rt=="async")return Q.marked="property",W(er);if(rt=="variable"||Q.style=="keyword"){if(Q.marked="property",Xt=="get"||Xt=="set")return W(Dr);var ir;return K&&Q.state.fatArrowAt==Q.stream.start&&(ir=Q.stream.match(/^\s*:\s*/,!1))&&(Q.state.fatArrowAt=Q.stream.pos+ir[0].length),W(rn)}else{if(rt=="number"||rt=="string")return Q.marked=Ot?"property":Q.style+" property",W(rn);if(rt=="jsonld-keyword")return W(rn);if(K&&Ne(Xt))return Q.marked="keyword",W(er);if(rt=="[")return W(ar,Ft,Me("]"),rn);if(rt=="spread")return W(Er,rn);if(Xt=="*")return Q.marked="keyword",W(er);if(rt==":")return _t(rn)}}function Dr(rt){return rt!="variable"?_t(rn):(Q.marked="property",W(ro))}function rn(rt){if(rt==":")return W(Er);if(rt=="(")return _t(ro)}function yt(rt,Xt,ir){function pr(Hr,wn){if(ir?ir.indexOf(Hr)>-1:Hr==","){var Nn=Q.state.lexical;return Nn.info=="call"&&(Nn.pos=(Nn.pos||0)+1),W(function(Xr,cr){return Xr==Xt||cr==Xt?_t():_t(rt)},pr)}return Hr==Xt||wn==Xt?W():ir&&ir.indexOf(";")>-1?_t(rt):W(Me(Xt))}return function(Hr,wn){return Hr==Xt||wn==Xt?W():_t(rt,pr)}}function Wt(rt,Xt,ir){for(var pr=3;pr<arguments.length;pr++)Q.cc.push(arguments[pr]);return W(St(Xt,ir),yt(rt,Xt),Vt)}function ne(rt){return rt=="}"?W():_t(de,ne)}function Ft(rt,Xt){if(K){if(rt==":")return W(fr);if(Xt=="?")return W(Ft)}}function _e(rt,Xt){if(K&&(rt==":"||Xt=="in"))return W(fr)}function Zt(rt){if(K&&rt==":")return Q.stream.match(/^\s*\w+\s+is\b/,!1)?W(ar,gr,fr):W(fr)}function gr(rt,Xt){if(Xt=="is")return Q.marked="keyword",W()}function fr(rt,Xt){if(Xt=="keyof"||Xt=="typeof"||Xt=="infer"||Xt=="readonly")return Q.marked="keyword",W(Xt=="typeof"?Er:fr);if(rt=="variable"||Xt=="void")return Q.marked="type",W(ee);if(Xt=="|"||Xt=="&")return W(fr);if(rt=="string"||rt=="number"||rt=="atom")return W(ee);if(rt=="[")return W(St("]"),yt(fr,"]",","),Vt,ee);if(rt=="{")return W(St("}"),tn,Vt,ee);if(rt=="(")return W(yt(Rt,")"),nn,ee);if(rt=="<")return W(yt(fr,">"),fr);if(rt=="quasi")return _t(tr,ee)}function nn(rt){if(rt=="=>")return W(fr)}function tn(rt){return rt.match(/[\}\)\]]/)?W():rt==","||rt==";"?W(tn):_t(wr,tn)}function wr(rt,Xt){if(rt=="variable"||Q.style=="keyword")return Q.marked="property",W(wr);if(Xt=="?"||rt=="number"||rt=="string")return W(wr);if(rt==":")return W(fr);if(rt=="[")return W(Me("variable"),_e,Me("]"),wr);if(rt=="(")return _t(In,wr);if(!rt.match(/[;\}\)\],]/))return W()}function tr(rt,Xt){return rt!="quasi"?_t():Xt.slice(Xt.length-2)!="${"?W(tr):W(fr,Un)}function Un(rt){if(rt=="}")return Q.marked="string-2",Q.state.tokenize=F,W(tr)}function Rt(rt,Xt){return rt=="variable"&&Q.stream.match(/^\s*[?:]/,!1)||Xt=="?"?W(Rt):rt==":"?W(fr):rt=="spread"?W(Rt):_t(fr)}function ee(rt,Xt){if(Xt=="<")return W(St(">"),yt(fr,">"),Vt,ee);if(Xt=="|"||rt=="."||Xt=="&")return W(fr);if(rt=="[")return W(fr,Me("]"),ee);if(Xt=="extends"||Xt=="implements")return Q.marked="keyword",W(fr);if(Xt=="?")return W(fr,Me(":"),fr)}function je(rt,Xt){if(Xt=="<")return W(St(">"),yt(fr,">"),Vt,ee)}function Je(){return _t(fr,Et)}function Et(rt,Xt){if(Xt=="=")return W(fr)}function fe(rt,Xt){return Xt=="enum"?(Q.marked="keyword",W(fn)):_t(Pe,Ft,Wr,zn)}function Pe(rt,Xt){if(K&&Ne(Xt))return Q.marked="keyword",W(Pe);if(rt=="variable")return $t(Xt),W();if(rt=="spread")return W(Pe);if(rt=="[")return Wt(Cr,"]");if(rt=="{")return Wt(Ye,"}")}function Ye(rt,Xt){return rt=="variable"&&!Q.stream.match(/^\s*:/,!1)?($t(Xt),W(Wr)):(rt=="variable"&&(Q.marked="property"),rt=="spread"?W(Pe):rt=="}"?_t():rt=="["?W(ar,Me("]"),Me(":"),Ye):W(Me(":"),Pe,Wr))}function Cr(){return _t(Pe,Wr)}function Wr(rt,Xt){if(Xt=="=")return W(Er)}function zn(rt){if(rt==",")return W(fe)}function Dn(rt,Xt){if(rt=="keyword b"&&Xt=="else")return W(St("form","else"),de,Vt)}function lo(rt,Xt){if(Xt=="await")return W(lo);if(rt=="(")return W(St(")"),ho,Vt)}function ho(rt){return rt=="var"?W(fe,vn):rt=="variable"?W(vn):_t(vn)}function vn(rt,Xt){return rt==")"?W():rt==";"?W(vn):Xt=="in"||Xt=="of"?(Q.marked="keyword",W(ar,vn)):_t(ar,vn)}function ro(rt,Xt){if(Xt=="*")return Q.marked="keyword",W(ro);if(rt=="variable")return $t(Xt),W(ro);if(rt=="(")return W(zt,St(")"),yt(go,")"),Vt,Zt,de,Dt);if(K&&Xt=="<")return W(St(">"),yt(Je,">"),Vt,ro)}function In(rt,Xt){if(Xt=="*")return Q.marked="keyword",W(In);if(rt=="variable")return $t(Xt),W(In);if(rt=="(")return W(zt,St(")"),yt(go,")"),Vt,Zt,Dt);if(K&&Xt=="<")return W(St(">"),yt(Je,">"),Vt,In)}function Yo(rt,Xt){if(rt=="keyword"||rt=="variable")return Q.marked="type",W(Yo);if(Xt=="<")return W(St(">"),yt(Je,">"),Vt)}function go(rt,Xt){return Xt=="@"&&W(ar,go),rt=="spread"?W(go):K&&Ne(Xt)?(Q.marked="keyword",W(go)):K&&rt=="this"?W(Ft,Wr):_t(Pe,Ft,Wr)}function Fo(rt,Xt){return rt=="variable"?Co(rt,Xt):yo(rt,Xt)}function Co(rt,Xt){if(rt=="variable")return $t(Xt),W(yo)}function yo(rt,Xt){if(Xt=="<")return W(St(">"),yt(Je,">"),Vt,yo);if(Xt=="extends"||Xt=="implements"||K&&rt==",")return Xt=="implements"&&(Q.marked="keyword"),W(K?fr:ar,yo);if(rt=="{")return W(St("}"),So,Vt)}function So(rt,Xt){if(rt=="async"||rt=="variable"&&(Xt=="static"||Xt=="get"||Xt=="set"||K&&Ne(Xt))&&Q.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Q.marked="keyword",W(So);if(rt=="variable"||Q.style=="keyword")return Q.marked="property",W(Gi,So);if(rt=="number"||rt=="string")return W(Gi,So);if(rt=="[")return W(ar,Ft,Me("]"),Gi,So);if(Xt=="*")return Q.marked="keyword",W(So);if(K&&rt=="(")return _t(In,So);if(rt==";"||rt==",")return W(So);if(rt=="}")return W();if(Xt=="@")return W(ar,So)}function Gi(rt,Xt){if(Xt=="!"||Xt=="?")return W(Gi);if(rt==":")return W(fr,Wr);if(Xt=="=")return W(Er);var ir=Q.state.lexical.prev,pr=ir&&ir.info=="interface";return _t(pr?In:ro)}function Wo(rt,Xt){return Xt=="*"?(Q.marked="keyword",W(Jn,Me(";"))):Xt=="default"?(Q.marked="keyword",W(ar,Me(";"))):rt=="{"?W(yt(Mo,"}"),Jn,Me(";")):_t(de)}function Mo(rt,Xt){if(Xt=="as")return Q.marked="keyword",W(Me("variable"));if(rt=="variable")return _t(Er,Mo)}function ao(rt){return rt=="string"?W():rt=="("?_t(ar):rt=="."?_t(Xe):_t(Xn,$r,Jn)}function Xn(rt,Xt){return rt=="{"?Wt(Xn,"}"):(rt=="variable"&&$t(Xt),Xt=="*"&&(Q.marked="keyword"),W(co))}function $r(rt){if(rt==",")return W(Xn,$r)}function co(rt,Xt){if(Xt=="as")return Q.marked="keyword",W(Xn)}function Jn(rt,Xt){if(Xt=="from")return Q.marked="keyword",W(ar)}function Lo(rt){return rt=="]"?W():_t(yt(Er,"]"))}function fn(){return _t(St("form"),Pe,Me("{"),St("}"),yt(Oo,"}"),Vt,Vt)}function Oo(){return _t(Pe,Wr)}function bo(rt,Xt){return rt.lastType=="operator"||rt.lastType==","||B.test(Xt.charAt(0))||/[,.]/.test(Xt.charAt(0))}function En(rt,Xt,ir){return Xt.tokenize==I&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Xt.lastType)||Xt.lastType=="quasi"&&/\{\s*$/.test(rt.string.slice(0,rt.pos-(ir||0)))}return{startState:function(rt){var Xt={tokenize:I,lastType:"sof",cc:[],lexical:new X((rt||0)-Kt,0,"block",!1),localVars:Jt.localVars,context:Jt.localVars&&new et(null,null,!1),indented:rt||0};return Jt.globalVars&&typeof Jt.globalVars=="object"&&(Xt.globalVars=Jt.globalVars),Xt},token:function(rt,Xt){if(rt.sol()&&(Xt.lexical.hasOwnProperty("align")||(Xt.lexical.align=!1),Xt.indented=rt.indentation(),U(rt,Xt)),Xt.tokenize!=$&&rt.eatSpace())return null;var ir=Xt.tokenize(rt,Xt);return dt=="comment"?ir:(Xt.lastType=dt=="operator"&&(H=="++"||H=="--")?"incdec":dt,xt(Xt,ir,dt,H,rt))},indent:function(rt,Xt){if(rt.tokenize==$||rt.tokenize==F)return we.Pass;if(rt.tokenize!=I)return 0;var ir=Xt&&Xt.charAt(0),pr=rt.lexical,Hr;if(!/^\s*else\b/.test(Xt))for(var wn=rt.cc.length-1;wn>=0;--wn){var Nn=rt.cc[wn];if(Nn==Vt)pr=pr.prev;else if(Nn!=Dn&&Nn!=Dt)break}for(;(pr.type=="stat"||pr.type=="form")&&(ir=="}"||(Hr=rt.cc[rt.cc.length-1])&&(Hr==Xe||Hr==at)&&!/^[,\.=+\-*:?[\(]/.test(Xt));)pr=pr.prev;ft&&pr.type==")"&&pr.prev.type=="stat"&&(pr=pr.prev);var Xr=pr.type,cr=ir==Xr;return Xr=="vardef"?pr.indented+(rt.lastType=="operator"||rt.lastType==","?pr.info.length+1:0):Xr=="form"&&ir=="{"?pr.indented:Xr=="form"?pr.indented+Kt:Xr=="stat"?pr.indented+(bo(rt,Xt)?ft||Kt:0):pr.info=="switch"&&!cr&&Jt.doubleIndentSwitch!=!1?pr.indented+(/^(?:case|default)\b/.test(Xt)?Kt:2*Kt):pr.align?pr.column+(cr?0:1):pr.indented+(cr?0:Kt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:q?null:"/*",blockCommentEnd:q?null:"*/",blockCommentContinue:q?null:" * ",lineComment:q?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:q?"json":"javascript",jsonldMode:Ot,jsonMode:q,expressionAllowed:En,skipExpression:function(rt){xt(rt,"atom","atom","true",new we.StringStream("",2,null))}}}),we.registerHelper("wordChars","javascript",/[\w$]/),we.defineMIME("text/javascript","javascript"),we.defineMIME("text/ecmascript","javascript"),we.defineMIME("application/javascript","javascript"),we.defineMIME("application/x-javascript","javascript"),we.defineMIME("application/ecmascript","javascript"),we.defineMIME("application/json",{name:"javascript",json:!0}),we.defineMIME("application/x-json",{name:"javascript",json:!0}),we.defineMIME("application/manifest+json",{name:"javascript",json:!0}),we.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),we.defineMIME("text/typescript",{name:"javascript",typescript:!0}),we.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},589:(wt,pe,Te)=>{(function(we){we(Te(631))})(function(we){var ke={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},Jt={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};we.defineMode("xml",function(Kt,ft){var Ot=Kt.indentUnit,q={},mt=ft.htmlMode?ke:Jt;for(var K in mt)q[K]=mt[K];for(var K in ft)q[K]=ft[K];var st,k;function B(W,It){function $t(et){return It.tokenize=et,et(W,It)}var Yt=W.next();if(Yt=="<")return W.eat("!")?W.eat("[")?W.match("CDATA[")?$t(dt("atom","]]>")):null:W.match("--")?$t(dt("comment","-->")):W.match("DOCTYPE",!0,!0)?(W.eatWhile(/[\w\._\-]/),$t(H(1))):null:W.eat("?")?(W.eatWhile(/[\w\._\-]/),It.tokenize=dt("meta","?>"),"meta"):(st=W.eat("/")?"closeTag":"openTag",It.tokenize=ct,"tag bracket");if(Yt=="&"){var Ne;return W.eat("#")?W.eat("x")?Ne=W.eatWhile(/[a-fA-F\d]/)&&W.eat(";"):Ne=W.eatWhile(/[\d]/)&&W.eat(";"):Ne=W.eatWhile(/[\w\.\-:]/)&&W.eat(";"),Ne?"atom":"error"}else return W.eatWhile(/[^&<]/),null}B.isInText=!0;function ct(W,It){var $t=W.next();if($t==">"||$t=="/"&&W.eat(">"))return It.tokenize=B,st=$t==">"?"endTag":"selfcloseTag","tag bracket";if($t=="=")return st="equals",null;if($t=="<"){It.tokenize=B,It.state=F,It.tagName=It.tagStart=null;var Yt=It.tokenize(W,It);return Yt?Yt+" tag error":"tag error"}else return/[\'\"]/.test($t)?(It.tokenize=vt($t),It.stringStartCol=W.column(),It.tokenize(W,It)):(W.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function vt(W){var It=function($t,Yt){for(;!$t.eol();)if($t.next()==W){Yt.tokenize=ct;break}return"string"};return It.isInAttribute=!0,It}function dt(W,It){return function($t,Yt){for(;!$t.eol();){if($t.match(It)){Yt.tokenize=B;break}$t.next()}return W}}function H(W){return function(It,$t){for(var Yt;(Yt=It.next())!=null;){if(Yt=="<")return $t.tokenize=H(W+1),$t.tokenize(It,$t);if(Yt==">")if(W==1){$t.tokenize=B;break}else return $t.tokenize=H(W-1),$t.tokenize(It,$t)}return"meta"}}function R(W){return W&&W.toLowerCase()}function I(W,It,$t){this.prev=W.context,this.tagName=It||"",this.indent=W.indented,this.startOfLine=$t,(q.doNotIndent.hasOwnProperty(It)||W.context&&W.context.noIndent)&&(this.noIndent=!0)}function N(W){W.context&&(W.context=W.context.prev)}function $(W,It){for(var $t;;){if(!W.context||($t=W.context.tagName,!q.contextGrabbers.hasOwnProperty(R($t))||!q.contextGrabbers[R($t)].hasOwnProperty(R(It))))return;N(W)}}function F(W,It,$t){return W=="openTag"?($t.tagStart=It.column(),V):W=="closeTag"?U:F}function V(W,It,$t){return W=="word"?($t.tagName=It.current(),k="tag",tt):q.allowMissingTagName&&W=="endTag"?(k="tag bracket",tt(W,It,$t)):(k="error",V)}function U(W,It,$t){if(W=="word"){var Yt=It.current();return $t.context&&$t.context.tagName!=Yt&&q.implicitlyClosed.hasOwnProperty(R($t.context.tagName))&&N($t),$t.context&&$t.context.tagName==Yt||q.matchClosing===!1?(k="tag",it):(k="tag error",X)}else return q.allowMissingTagName&&W=="endTag"?(k="tag bracket",it(W,It,$t)):(k="error",X)}function it(W,It,$t){return W!="endTag"?(k="error",it):(N($t),F)}function X(W,It,$t){return k="error",it(W,It,$t)}function tt(W,It,$t){if(W=="word")return k="attribute",xt;if(W=="endTag"||W=="selfcloseTag"){var Yt=$t.tagName,Ne=$t.tagStart;return $t.tagName=$t.tagStart=null,W=="selfcloseTag"||q.autoSelfClosers.hasOwnProperty(R(Yt))?$($t,Yt):($($t,Yt),$t.context=new I($t,Yt,Ne==$t.indented)),F}return k="error",tt}function xt(W,It,$t){return W=="equals"?Q:(q.allowMissing||(k="error"),tt(W,It,$t))}function Q(W,It,$t){return W=="string"?_t:W=="word"&&q.allowUnquoted?(k="string",tt):(k="error",tt(W,It,$t))}function _t(W,It,$t){return W=="string"?_t:tt(W,It,$t)}return{startState:function(W){var It={tokenize:B,state:F,indented:W||0,tagName:null,tagStart:null,context:null};return W!=null&&(It.baseIndent=W),It},token:function(W,It){if(!It.tagName&&W.sol()&&(It.indented=W.indentation()),W.eatSpace())return null;st=null;var $t=It.tokenize(W,It);return($t||st)&&$t!="comment"&&(k=null,It.state=It.state(st||$t,W,It),k&&($t=k=="error"?$t+" error":k)),$t},indent:function(W,It,$t){var Yt=W.context;if(W.tokenize.isInAttribute)return W.tagStart==W.indented?W.stringStartCol+1:W.indented+Ot;if(Yt&&Yt.noIndent)return we.Pass;if(W.tokenize!=ct&&W.tokenize!=B)return $t?$t.match(/^(\s*)/)[0].length:0;if(W.tagName)return q.multilineTagIndentPastTag!==!1?W.tagStart+W.tagName.length+2:W.tagStart+Ot*(q.multilineTagIndentFactor||1);if(q.alignCDATA&&/<!\[CDATA\[/.test(It))return 0;var Ne=It&&/^<(\/)?([\w_:\.-]*)/.exec(It);if(Ne&&Ne[1])for(;Yt;)if(Yt.tagName==Ne[2]){Yt=Yt.prev;break}else if(q.implicitlyClosed.hasOwnProperty(R(Yt.tagName)))Yt=Yt.prev;else break;else if(Ne)for(;Yt;){var et=q.contextGrabbers[R(Yt.tagName)];if(et&&et.hasOwnProperty(R(Ne[2])))Yt=Yt.prev;else break}for(;Yt&&Yt.prev&&!Yt.startOfLine;)Yt=Yt.prev;return Yt?Yt.indent+Ot:W.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:q.htmlMode?"html":"xml",helperType:q.htmlMode?"html":"xml",skipAttribute:function(W){W.state==Q&&(W.state=tt)},xmlCurrentTag:function(W){return W.tagName?{name:W.tagName,close:W.type=="closeTag"}:null},xmlCurrentContext:function(W){for(var It=[],$t=W.context;$t;$t=$t.prev)It.push($t.tagName);return It.reverse()}}}),we.defineMIME("text/xml","xml"),we.defineMIME("application/xml","xml"),we.mimeModes.hasOwnProperty("text/html")||we.defineMIME("text/html",{name:"xml",htmlMode:!0})})},642:(wt,pe,Te)=>{Te.d(pe,{Z:()=>Kt});var we=Te(346),ke=function(){var ft=function(Ot,q){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(mt,K){mt.__proto__=K}||function(mt,K){for(var st in K)Object.prototype.hasOwnProperty.call(K,st)&&(mt[st]=K[st])},ft(Ot,q)};return function(Ot,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");ft(Ot,q);function mt(){this.constructor=Ot}Ot.prototype=q===null?Object.create(q):(mt.prototype=q.prototype,new mt)}}(),Jt=function(ft){ke(Ot,ft);function Ot(q,mt,K){var st=ft.call(this,mt,K)||this;return st._module=q,st}return Object.defineProperty(Ot.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(Ot.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(Ot.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),Ot}(we.Hn);const Kt=Jt},675:(wt,pe,Te)=>{Te.d(pe,{Z:()=>ft,q:()=>Jt});var we=Te(642),ke=function(){var Ot=function(q,mt){return Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,st){K.__proto__=st}||function(K,st){for(var k in st)Object.prototype.hasOwnProperty.call(st,k)&&(K[k]=st[k])},Ot(q,mt)};return function(q,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Class extends value "+String(mt)+" is not a constructor or null");Ot(q,mt);function K(){this.constructor=q}q.prototype=mt===null?Object.create(mt):(K.prototype=mt.prototype,new K)}}(),Jt;(function(Ot){Ot.Select="select",Ot.Hover="hover",Ot.Spacing="spacing",Ot.Target="target",Ot.Resize="resize"})(Jt||(Jt={}));var Kt=function(Ot){ke(q,Ot);function q(){return Ot!==null&&Ot.apply(this,arguments)||this}return q.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(q.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"component",{get:function(){var mt,K=this.get("component");return K||((mt=this.get("componentView"))===null||mt===void 0?void 0:mt.model)},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"componentView",{get:function(){var mt,K=this.get("componentView");return K||((mt=this.get("component"))===null||mt===void 0?void 0:mt.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"el",{get:function(){var mt;return(mt=this.componentView)===null||mt===void 0?void 0:mt.el},enumerable:!1,configurable:!0}),q.prototype.getBoxRect=function(mt){var K=this,st=K.el,k=K.em,B=k.Canvas.getCanvasView(),ct=this.get("boxRect");return ct||(st&&B?B.getElBoxRect(st,mt):{x:0,y:0,width:0,height:0})},q.prototype.getStyle=function(mt){mt===void 0&&(mt={});var K=mt.boxRect||this.getBoxRect(mt),st=K.width,k=K.height,B=K.x,ct=K.y;return{width:"".concat(st,"px"),height:"".concat(k,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(B,"px ").concat(ct,"px")}},q.prototype.isType=function(mt){return this.type===mt},q}(we.Z);const ft=Kt},713:(wt,pe,Te)=>{Te.d(pe,{Z:()=>ke});var we;(function(Jt){Jt.run="command:run",Jt._run="run",Jt.runCommand="command:run:",Jt._runCommand="run:",Jt.runBeforeCommand="command:run:before:",Jt.abort="command:abort:",Jt._abort="abort:",Jt.stop="command:stop",Jt._stop="stop",Jt.stopCommand="command:stop:",Jt._stopCommand="stop:",Jt.stopBeforeCommand="command:stop:before:"})(we||(we={}));const ke=we},858:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke){ke.Components.clear(),ke.Css.clear()}}},884:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Kt});var we=Te(50),ke=Te(668),Jt=Te(491);const Kt={run:function(ft){(0,we.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=ft,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(ft){this.toggleMove(),this.disableDragger()},onKeyUp:function(ft){(0,Jt.sN)(ft)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(ft){this.toggleDragger(1,ft)},disableDragger:function(ft){this.toggleDragger(0,ft)},toggleDragger:function(ft,Ot){var q=this,mt=q.canvasModel,K=q.em,st=this.dragger,k=ft?"add":"remove";this.getCanvas().classList[k]("".concat(this.ppfx,"is__grabbing")),st||(st=new ke.Z({getPosition:function(){return{x:mt.get("x"),y:mt.get("y")}},setPosition:function(B){var ct=B.x,vt=B.y;mt.set({x:ct,y:vt})},onStart:function(B,ct){K.trigger("canvas:move:start",ct)},onDrag:function(B,ct){K.trigger("canvas:move",ct)},onEnd:function(B,ct){K.trigger("canvas:move:end",ct)}}),this.dragger=st),ft?st.start(Ot):st.stop()},toggleMove:function(ft){var Ot=this.ppfx,q=ft?"add":"remove",mt=ft?"on":"off",K={on:Jt.on,off:Jt.S1},st=this.getCanvas(),k=["".concat(Ot,"is__grab")];!ft&&k.push("".concat(Ot,"is__grabbing")),k.forEach(function(B){return st.classList[q](B)}),K[mt](document,"keyup",this.onKeyUp),K[mt](st,"mousedown",this.enableDragger),K[mt](document,"mouseup",this.disableDragger)}}},790:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Ot,defineCommand:()=>Kt});var we=Te(346),ke=Te(713),Jt=function(){var q=function(mt,K){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,k){st.__proto__=k}||function(st,k){for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(st[B]=k[B])},q(mt,K)};return function(mt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");q(mt,K);function st(){this.constructor=mt}mt.prototype=K===null?Object.create(K):(st.prototype=K.prototype,new st)}}();function Kt(q){return q}var ft=function(q){Jt(mt,q);function mt(K){var st=q.call(this,0)||this;st.config=K||{},st.em=st.config.em||{};var k=st.config.stylePrefix;return st.pfx=k,st.ppfx=st.config.pStylePrefix,st.hoverClass="".concat(k,"hover"),st.badgeClass="".concat(k,"badge"),st.plhClass="".concat(k,"placeholder"),st.freezClass="".concat(st.ppfx,"freezed"),st.canvas=st.em.Canvas,st.init(st.config),st}return mt.prototype.onFrameScroll=function(K){},mt.prototype.getCanvas=function(){return this.canvas.getElement()},mt.prototype.getCanvasBody=function(){return this.canvas.getBody()},mt.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},mt.prototype.offset=function(K){var st=K.getBoundingClientRect();return{top:st.top+K.ownerDocument.body.scrollTop,left:st.left+K.ownerDocument.body.scrollLeft}},mt.prototype.init=function(K){},mt.prototype.callRun=function(K,st){st===void 0&&(st={});var k=this.id;if(K.trigger("".concat(ke.Z.runBeforeCommand).concat(k),{options:st}),K.trigger("".concat(ke.Z._runCommand).concat(k,":before"),st),st.abort){K.trigger("".concat(ke.Z.abort).concat(k),{options:st}),K.trigger("".concat(ke.Z._abort).concat(k),st);return}var B=st.sender||K,ct=this.run(K,B,st),vt={id:k,result:ct,options:st};return K.trigger("".concat(ke.Z.runCommand).concat(k),vt),K.trigger(ke.Z.run,vt),K.trigger("".concat(ke.Z._runCommand).concat(k),ct,st),K.trigger(ke.Z._run,k,ct,st),ct},mt.prototype.callStop=function(K,st){st===void 0&&(st={});var k=this.id,B=st.sender||K;K.trigger("".concat(ke.Z.stopBeforeCommand).concat(k),{options:st}),K.trigger("".concat(ke.Z._stopCommand).concat(k,":before"),st);var ct=this.stop(K,B,st),vt={id:k,result:ct,options:st};return K.trigger("".concat(ke.Z.stopCommand).concat(k),vt),K.trigger(ke.Z.stop,vt),K.trigger("".concat(ke.Z._stopCommand).concat(k),ct,st),K.trigger(ke.Z._stop,k,ct,st),ct},mt.prototype.stopCommand=function(K){this.em.Commands.stop(this.id,K)},mt.prototype.run=function(K,st,k){},mt.prototype.stop=function(K,st,k){},mt}(we.Hn);const Ot=ft},180:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Kt});var we=Te(50),ke=function(ft,Ot,q){if(q||arguments.length===2)for(var mt=0,K=Ot.length,st;mt<K;mt++)(st||!(mt in Ot))&&(st||(st=Array.prototype.slice.call(Ot,0,mt)),st[mt]=Ot[mt]);return ft.concat(st||Array.prototype.slice.call(Ot))},Jt={run:function(ft,Ot,q){var mt=this;q===void 0&&(q={});var K=[],st=q.component||ft.getSelectedAll();return st=(0,we.isArray)(st)?ke([],st,!0):[st],st.filter(Boolean).forEach(function(k){var B,ct;if(!k.get("removable"))return mt.em.logWarning("The element is not removable",{component:k});K.push(k);var vt=((ct=(B=k.delegate)===null||B===void 0?void 0:B.remove)===null||ct===void 0?void 0:ct.call(B,k))||k;vt.remove()}),ft.selectRemove(K),K}};const Kt=Jt},544:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ft});var we=Te(50),ke=Te(668),Jt=function(){return Jt=Object.assign||function(Ot){for(var q,mt=1,K=arguments.length;mt<K;mt++){q=arguments[mt];for(var st in q)Object.prototype.hasOwnProperty.call(q,st)&&(Ot[st]=q[st])}return Ot},Jt.apply(this,arguments)},Kt="dmode";const ft={run:function(Ot,q,mt){var K=this;mt===void 0&&(mt={}),(0,we.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var st=mt.target,k=mt.event,B=mt.mode,ct=mt.dragger,vt=ct===void 0?{}:ct,dt=st.getEl(),H=Jt({doc:dt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return K.guidesStatic},guidesTarget:function(){return K.guidesTarget}},vt);this.setupGuides(),this.opts=mt,this.editor=Ot,this.em=Ot.getModel(),this.target=st,this.isTran=B=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var R=this.dragger;return R?R.setOptions(H):(R=new ke.Z(H),this.dragger=R),k&&R.start(k),this.toggleDrag(1),this.em.trigger("".concat(Kt,":start"),this.getEventOpts()),R},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(Ot){var q=Ot.guide;q&&q.parentNode.removeChild(q)}),this.guides=[]},getGuidesContainer:function(){var Ot=this,q=this.guidesEl;if(!q){var mt=this,K=mt.editor,st=mt.em,k=mt.opts,B=K.getConfig().stylePrefix,ct=document.createElement("div"),vt=document.createElement("div"),dt='<div class="'.concat(B,"guide-info__line ").concat(B,`danger-bg">
        <div class="`).concat(B,"guide-info__content ").concat(B,`danger-color"></div>
      </div>`);q=document.createElement("div"),q.className="".concat(B,"guides"),ct.className="".concat(B,"guide-info ").concat(B,"guide-info__x"),vt.className="".concat(B,"guide-info ").concat(B,"guide-info__y"),ct.innerHTML=dt,vt.innerHTML=dt,q.appendChild(ct),q.appendChild(vt),K.Canvas.getGlobalToolsEl().appendChild(q),this.guidesEl=q,this.elGuideInfoX=ct,this.elGuideInfoY=vt,this.elGuideInfoContentX=ct.querySelector(".".concat(B,"guide-info__content")),this.elGuideInfoContentY=vt.querySelector(".".concat(B,"guide-info__content")),st.on("canvas:update frame:scroll",(0,we.debounce)(function(){var H;Ot.updateGuides(),k.debug&&((H=Ot.guides)===null||H===void 0||H.forEach(function(R){return Ot.renderGuide(R)}))},200))}return q},getGuidesStatic:function(){var Ot=this,q=[],mt=this.target.getEl(),K=mt.parentNode,st=K===void 0?{}:K;return(0,we.each)(st.children,function(k){return q=q.concat(mt!==k?Ot.getElementGuides(k):[])}),q.concat(this.getElementGuides(st))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(Ot){var q=this,mt,K;(Ot||this.guides).forEach(function(st){var k=st.origin,B=mt===k?K:q.getElementPos(k);mt=k,K=B,(0,we.each)(q.getGuidePosUpdate(st,B),function(ct,vt){return st[vt]=ct}),st.originRect=B})},getGuidePosUpdate:function(Ot,q){var mt={},K=q.top,st=q.height,k=q.left,B=q.width;switch(Ot.type){case"t":mt.y=K;break;case"b":mt.y=K+st;break;case"l":mt.x=k;break;case"r":mt.x=k+B;break;case"x":mt.x=k+B/2;break;case"y":mt.y=K+st/2;break}return mt},renderGuide:function(Ot){Ot===void 0&&(Ot={});var q=Ot.guide||document.createElement("div"),mt="px",K=Ot.active?2:1,st=q.children[0];return q.style="position: absolute; background-color: ".concat(Ot.active?"green":"red",";"),q.children.length||(st=document.createElement("div"),st.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",q.appendChild(st)),Ot.y?(q.style.width="100%",q.style.height="".concat(K).concat(mt),q.style.top="".concat(Ot.y).concat(mt),q.style.left=0):(q.style.width="".concat(K).concat(mt),q.style.height="100%",q.style.left="".concat(Ot.x).concat(mt),q.style.top="0".concat(mt)),!Ot.guide&&this.guidesContainer.appendChild(q),q},getElementPos:function(Ot){return this.editor.Canvas.getElementPos(Ot,{noScroll:1})},getElementGuides:function(Ot){var q=this,mt=this.opts,K=this.getElementPos(Ot),st=K.top,k=K.height,B=K.left,ct=K.width,vt=[{type:"t",y:st},{type:"b",y:st+k},{type:"l",x:B},{type:"r",x:B+ct},{type:"x",x:B+ct/2},{type:"y",y:st+k/2}].map(function(dt){return Jt(Jt({},dt),{origin:Ot,originRect:K,guide:mt.debug&&q.renderGuide(dt)})});return vt.forEach(function(dt){var H;return(H=q.guides)===null||H===void 0?void 0:H.push(dt)}),vt},getTranslate:function(Ot,q){q===void 0&&(q="x");var mt=0;return(Ot||"").split(" ").forEach(function(K){var st=K.trim(),k="translate".concat(q.toUpperCase(),"(");st.indexOf(k)===0&&(mt=parseFloat(st.replace(k,"")))}),mt},setTranslate:function(Ot,q,mt){var K="translate".concat(q.toUpperCase(),"("),st="".concat(K).concat(mt,")"),k=(Ot||"").split(" ").map(function(B){var ct=B.trim();return ct.indexOf(K)===0&&(B=st),B}).join(" ");return k.indexOf(K)<0&&(k+=" ".concat(st)),k},getPosition:function(){var Ot=this,q=Ot.target,mt=Ot.isTran,K=q.getStyle(),st=K.left,k=K.top,B=K.transform,ct=0,vt=0;return mt?(ct=this.getTranslate(B),vt=this.getTranslate(B,"y")):(ct=parseFloat(st||0),vt=parseFloat(k||0)),{x:ct,y:vt}},setPosition:function(Ot){var q=Ot.x,mt=Ot.y,K=Ot.end,st=Ot.position,k=Ot.width,B=Ot.height,ct=this,vt=ct.target,dt=ct.isTran,H=ct.em,R="px",I=!K,N="".concat(parseInt(q,10)).concat(R),$="".concat(parseInt(mt,10)).concat(R),F={};if(dt){var V=vt.getStyle().transform||"";V=this.setTranslate(V,"x",N),V=this.setTranslate(V,"y",$),F={transform:V,__p:I},vt.addStyle(F,{avoidStore:!K})}else{var U={position:st,width:k,height:B},it={left:N,top:$,__p:I};(0,we.keys)(U).forEach(function(X){var tt=U[X];tt&&(it[X]=tt)}),F=it,vt.addStyle(F,{avoidStore:!K})}H==null||H.Styles.__emitCmpStyleUpdate(F,{components:H.getSelected()})},_getDragData:function(){var Ot=this.target;return{target:Ot,parent:Ot.parent(),index:Ot.index()}},onStart:function(Ot){var q=this,mt=q.target,K=q.editor,st=q.isTran,k=q.opts,B=k.center,ct=k.onStart,vt=K.Canvas,dt=mt.getStyle(),H="absolute",R=[H,"relative"];if(ct&&ct(this._getDragData()),!st&&dt.position!==H){var I=vt.offset(mt.getEl()),N=I.left,$=I.top,F=I.width,V=I.height,U=mt.parent(),it=void 0;do{var X=U.getStyle();it=R.indexOf(X.position)>=0?U:null,U=U.parent()}while(U&&!it);if(B){var tt=vt.getMouseRelativeCanvas(Ot),xt=tt.x,Q=tt.y;N=xt,$=Q}else if(it){var _t=vt.offset(it.getEl());N=N-_t.left,$=$-_t.top}this.setPosition({x:N,y:$,width:"".concat(F,"px"),height:"".concat(V,"px"),position:H})}},onDrag:function(){var Ot=this,q=this,mt=q.guidesTarget,K=q.opts,st=K.onDrag;this.updateGuides(mt),K.debug&&mt.forEach(function(k){return Ot.renderGuide(k)}),K.guidesInfo&&this.renderGuideInfo(mt.filter(function(k){return k.active})),st&&st(this._getDragData())},onEnd:function(Ot,q,mt){mt===void 0&&(mt={});var K=this,st=K.editor,k=K.opts,B=K.id,ct=k.onEnd;ct&&ct(Ot,mt,Jt(Jt({event:Ot},mt),this._getDragData())),st.stopCommand(B),this.hideGuidesInfo(),this.em.trigger("".concat(Kt,":end"),this.getEventOpts())},hideGuidesInfo:function(){var Ot=this;["X","Y"].forEach(function(q){var mt=Ot["elGuideInfo".concat(q)];mt&&(mt.style.display="none")})},renderGuideInfo:function(Ot){var q=this;Ot===void 0&&(Ot=[]);var mt=this.guidesStatic;this.hideGuidesInfo(),Ot.forEach(function(K){var st=K.origin,k=K.x,B=q.getElementPos(st),ct=(0,we.isUndefined)(k)?"y":"x",vt=ct==="y",dt=B[vt?"left":"top"],H=B.rect[vt?"left":"top"],R=vt?dt+B.width:dt+B.height,I=vt?H+B.rect.width:H+B.rect.height,N=q["elGuideInfo".concat(ct.toUpperCase())],$=q["elGuideInfoContent".concat(ct.toUpperCase())],F=N.style,V=mt==null?void 0:mt.filter(function(Ht){return Ht.type===K.type}).map(function(Ht){var Dt=Ht.originRect,St=Dt.left,Vt=Dt.width,Me=Dt.top,de=Dt.height,Le=vt?St:Me,ar=vt?St+Vt:Me+de;return{gap:ar<dt?dt-ar:Le-R,guide:Ht}}).filter(function(Ht){return Ht.gap>0}).sort(function(Ht,Dt){return Ht.gap-Dt.gap}).map(function(Ht){return Ht.guide})[0];if(V){var U=V.originRect,it=U.left,X=U.width,tt=U.top,xt=U.height,Q=U.rect,_t=vt?it<B.left:tt<B.top,W=vt?it:tt,It=vt?Q.left:Q.top,$t=vt?it+X:tt+xt,Yt=vt?Q.left+Q.width:Q.top+Q.height,Ne=vt?K.y:K.x,et=_t?$t:R,Tt="".concat(Ne,"px"),jt=_t?dt-$t:W-R,zt=_t?H-Yt:It-I;F.display="",F[vt?"top":"left"]=Tt,F[vt?"left":"top"]="".concat(et,"px"),F[vt?"width":"height"]="".concat(jt,"px"),$.innerHTML="".concat(Math.round(zt),"px"),q.em.trigger("".concat(Kt,":active"),Jt(Jt({},q.getEventOpts()),{guide:K,guidesStatic:mt,matched:V,posFirst:Ne,posSecond:et,size:jt,sizeRaw:zt,elGuideInfo:N,elGuideInfoCnt:$}))}})},toggleDrag:function(Ot){var q=this,mt=q.ppfx,K=q.editor,st=Ot?"add":"remove",k=["".concat(mt,"is__grabbing")],B=K.Canvas,ct=B.getBody();k.forEach(function(vt){return ct.classList[st](vt)}),B[Ot?"startAutoscroll":"stopAutoscroll"]()}}},236:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke){if(ke.Canvas.hasFocus()){var Jt=[];ke.getSelectedAll().forEach(function(Kt){var ft=Kt.components(),Ot=ft&&ft.filter(function(q){return q.get("selectable")})[0];Ot&&Jt.push(Ot)}),Jt.length&&ke.select(Jt)}}}},368:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke,Jt,Kt){if(Kt===void 0&&(Kt={}),!(!ke.Canvas.hasFocus()&&!Kt.force)){var ft=[];ke.getSelectedAll().forEach(function(Ot){for(var q=Ot.parent();q&&!q.get("selectable");)q=q.parent();q&&ft.push(q)}),ft.length&&ke.select(ft)}}}},243:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke){if(ke.Canvas.hasFocus()){var Jt=[];ke.getSelectedAll().forEach(function(Kt){var ft=Kt.parent();if(ft){var Ot=ft.components().length,q=0,mt=0,K;do q++,mt=Kt.index()+q,K=mt<=Ot?ft.getChildAt(mt):null;while(K&&!K.get("selectable"));Jt.push(K||Kt)}}),Jt.length&&ke.select(Jt)}}}},400:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke){if(ke.Canvas.hasFocus()){var Jt=[];ke.getSelectedAll().forEach(function(Kt){var ft=Kt.parent();if(ft){var Ot=0,q=0,mt;do Ot++,q=Kt.index()-Ot,mt=q>=0?ft.getChildAt(q):null;while(mt&&!mt.get("selectable"));Jt.push(mt||Kt)}}),Jt.length&&ke.select(Jt)}}}},910:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(50);const ke={run:function(Jt,Kt,ft){ft===void 0&&(ft={});var Ot=ft.target,q=[];if(!Ot.get("styles"))return q;var mt=Ot.get("type"),K=Jt.Pages.getAllWrappers(),st=(0,we.flatten)(K.map(function(B){return B.findType(mt)})).length;if(!st){var k=Jt.CssComposer.getAll();q=k.filter(function(B){return B.get("group")==="cmp:".concat(mt)}),k.remove(q)}return q}}},744:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=function(Jt,Kt,ft){if(ft||arguments.length===2)for(var Ot=0,q=Kt.length,mt;Ot<q;Ot++)(mt||!(Ot in Kt))&&(mt||(mt=Array.prototype.slice.call(Kt,0,Ot)),mt[Ot]=Kt[Ot]);return Jt.concat(mt||Array.prototype.slice.call(Kt))};const ke={run:function(Jt){var Kt=Jt.getModel(),ft=we([],Jt.getSelectedAll(),!0).map(function(Ot){var q,mt;return((mt=(q=Ot.delegate)===null||q===void 0?void 0:q.copy)===null||mt===void 0?void 0:mt.call(q,Ot))||Ot}).filter(Boolean);ft.length&&Kt.set("clipboard",ft)}}},457:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(491);const ke={run:function(Jt,Kt,ft){var Ot=this;ft===void 0&&(ft={}),Kt&&Kt.set&&Kt.set("active",0);var q=Jt.getConfig(),mt=Jt.Modal,K=q.stylePrefix;if(this.cm=Jt.CodeManager||null,!this.editors){var st=this.buildEditor("htmlmixed","hopscotch","HTML"),k=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=st.model,this.cssEditor=k.model;var B=(0,we.ut)("div",{class:"".concat(K,"export-dl")});B.appendChild(st.el),B.appendChild(k.el),this.editors=B}mt.open({title:q.textViewCode,content:this.editors}).getModel().once("change:open",function(){return Jt.stopCommand("".concat(Ot.id))}),this.htmlEditor.setContent(Jt.getHtml(ft.optsHtml)),this.cssEditor.setContent(Jt.getCss(ft.optsCss))},stop:function(Jt){var Kt=Jt.Modal;Kt&&Kt.close()},buildEditor:function(Jt,Kt,ft){var Ot=this.em.CodeManager,q=Ot.createViewer({label:ft,codeName:Jt,theme:Kt}),mt=new Ot.EditorView({model:q,config:Ot.getConfig()}).render().el;return{model:q,el:mt}}}},975:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(50);const ke={isEnabled:function(){var Jt=document;return!!(Jt.fullscreenElement||Jt.webkitFullscreenElement||Jt.mozFullScreenElement)},enable:function(Jt){var Kt="";return Jt.requestFullscreen?Jt.requestFullscreen():Jt.webkitRequestFullscreen?(Kt="webkit",Jt.webkitRequestFullscreen()):Jt.mozRequestFullScreen?(Kt="moz",Jt.mozRequestFullScreen()):Jt.msRequestFullscreen&&Jt.msRequestFullscreen(),Kt},disable:function(){var Jt=document;this.isEnabled()&&(Jt.exitFullscreen?Jt.exitFullscreen():Jt.webkitExitFullscreen?Jt.webkitExitFullscreen():Jt.mozCancelFullScreen?Jt.mozCancelFullScreen():Jt.msExitFullscreen&&Jt.msExitFullscreen())},fsChanged:function(Jt){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(Jt||"","fullscreenchange"),this.fsChanged))},run:function(Jt,Kt,ft){ft===void 0&&(ft={}),this.sender=Kt;var Ot=ft.target,q=(0,we.isElement)(Ot)?Ot:document.querySelector(Ot),mt=this.enable(q||Jt.getContainer());this.fsChanged=this.fsChanged.bind(this,mt),document.addEventListener(mt+"fullscreenchange",this.fsChanged)},stop:function(Jt,Kt){Kt&&Kt.set&&Kt.set("active",!1),this.disable()}}},191:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Ot});var we=Te(50),ke=Te(895),Jt=Te(491),Kt=Te(407),ft=Te(189);const Ot=(0,we.extend)({},ft.default,Kt.default,{init:function(q){Kt.default.init.apply(this,arguments),(0,we.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=q,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var q=[],mt=0;mt<arguments.length;mt++)q[mt]=arguments[mt];Kt.default.enable.apply(this,q),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var K=this.$wrapper;K.css("cursor","move"),K.on("mousedown",this.initSorter),K.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(q){var mt=(0,ke.default)(q.target).data("model"),K=mt.get("draggable");K&&(this.cacheEl=null,this.startSelectPosition(q.target,this.frameEl.contentDocument),this.sorter.draggable=K,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,Jt.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(q){var mt=q.get("draggable");if(mt){this.cacheEl=null;var K=q.view.el;this.startSelectPosition(K,this.frameEl.contentDocument),this.sorter.draggable=mt,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,Jt.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(q){this.cacheEl=null;var mt=q[q.length-1],K=this.em.getCurrentFrame(),st=mt.getEl(K==null?void 0:K.model),k=st.ownerDocument;this.startSelectPosition(st,k,{onStart:this.onStart}),this.sorter.draggable=mt.get("draggable"),this.sorter.toMove=q,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,Jt.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,Jt.S1)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,Jt.S1)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(q,mt){},rollback:function(q,mt){var K=q.which||q.keyCode;(K==27||mt)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,ke.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,ke.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var q=[],mt=0;mt<arguments.length;mt++)q[mt]=arguments[mt];Kt.default.stop.apply(this,q),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var K=this.$wrapper;K.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Jt});var we=Te(50),ke=Te(491);const Jt={open:function(Kt){var ft=this,Ot=this,q=Ot.editor,mt=Ot.title,K=Ot.config,st=Ot.am,k=K.custom;if((0,we.isFunction)(k.open))return k.open(st.__customData());var B=q.Modal;B.open({title:mt,content:Kt}).onceClose(function(){return q.stopCommand(ft.id)})},close:function(){var Kt=this.config.custom;if((0,we.isFunction)(Kt.close))return Kt.close(this.am.__customData());var ft=this.editor.Modal;ft&&ft.close()},run:function(Kt,ft,Ot){Ot===void 0&&(Ot={});var q=Kt.AssetManager,mt=q.getConfig(),K=Ot.types,st=K===void 0?[]:K,k=Ot.accept,B=Ot.select;if(this.title=Ot.modalTitle||Kt.t("assetManager.modalTitle")||"",this.editor=Kt,this.config=mt,this.am=q,q.setTarget(Ot.target),q.onClick(Ot.onClick),q.onDblClick(Ot.onDblClick),q.onSelect(Ot.onSelect),q.__behaviour({select:B,types:st,options:Ot}),mt.custom)this.rendered=this.rendered||(0,ke.ut)("div"),this.rendered.className="".concat(mt.stylePrefix,"custom-wrp"),q.__behaviour({container:this.rendered}),q.__trgCustom();else{if(!this.rendered||st){var ct=q.getAll().filter(function(dt){return dt});st&&st.length&&(ct=ct.filter(function(dt){return st.indexOf(dt.get("type"))!==-1})),q.render(ct),this.rendered=q.getContainer()}if(k){var vt=this.rendered.querySelector("input#".concat(mt.stylePrefix,"uploadFile"));vt&&vt.setAttribute("accept",k)}}return this.open(this.rendered),this},stop:function(Kt){this.editor=Kt,this.close(this.rendered)}}},117:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Jt});var we=Te(50),ke=Te(491);const Jt={open:function(){var Kt=this,ft=Kt.container,Ot=Kt.editor,q=Kt.bm,mt=Kt.config,K=mt.custom,st=mt.appendTo;if((0,we.isFunction)(K.open))return K.open(q.__customData());if(this.firstRender&&!st){var k="views-container",B=Ot.Panels,ct=B.getPanel(k)||B.addPanel({id:k});ct.set("appendContent",ft).trigger("change:appendContent"),K||ft.appendChild(q.render())}ft&&(ft.style.display="block")},close:function(){var Kt=this,ft=Kt.container,Ot=Kt.config,q=Ot.custom;if((0,we.isFunction)(q.close))return q.close(this.bm.__customData());ft&&(ft.style.display="none")},run:function(Kt){var ft=Kt.Blocks;this.config=ft.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,ke.ut)("div"),this.editor=Kt,this.bm=ft;var Ot=this.container;ft.__behaviour({container:Ot}),this.config.custom&&ft.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>we});const we={run:function(ke){var Jt=ke.LayerManager,Kt=ke.Panels,ft=Jt.getConfig();if(!ft.appendTo){if(!this.layers){var Ot="views-container",q=document.createElement("div"),mt=Kt.getPanel(Ot)||Kt.addPanel({id:Ot});ft.custom?Jt.__trgCustom({container:q}):q.appendChild(Jt.render()),mt.set("appendContent",q).trigger("change:appendContent"),this.layers=q}this.layers.style.display="block"}},stop:function(){var ke=this.layers;ke&&(ke.style.display="none")}}},801:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(895);const ke={run:function(Jt,Kt){if(this.sender=Kt,!this.$cnt){var ft=Jt.getConfig(),Ot=Jt.Panels,q=Jt.DeviceManager,mt=Jt.SelectorManager,K=Jt.StyleManager,st="change:appendContent",k=(0,we.default)("<div></div>"),B=(0,we.default)("<div></div>"),ct=(0,we.default)("<div></div>"),vt=(0,we.default)("<div></div>");if(this.$cnt=k,this.$cntInner=B,B.append(ct),B.append(vt),k.append(B),q&&ft.showDevices){var dt=Ot.addPanel({id:"devices-c"}),H=q.render();dt.set("appendContent",H).trigger(st)}var R=mt.getConfig();R.custom?mt.__trgCustom({container:ct.get(0)}):R.appendTo||ct.append(mt.render([])),this.sm=K;var I=K.getConfig(),N=I.stylePrefix;this.$header=(0,we.default)('<div class="'.concat(N,'header">').concat(Jt.t("styleManager.empty"),"</div>")),k.append(this.$header),I.custom?K.__trgCustom({container:vt.get(0)}):I.appendTo||vt.append(K.render());var $="views-container",F=Ot.getPanel($)||Ot.addPanel({id:$});F.set("appendContent",k).trigger(st);var V=Jt.getModel();this.listenTo(V,K.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var Jt=this,Kt=Jt.sender,ft=Jt.sm,Ot=Jt.$cntInner,q=Jt.$header;Kt&&Kt.get&&!Kt.get("active")||!ft||(ft.getSelected()?(Ot==null||Ot.show(),q==null||q.hide()):(Ot==null||Ot.hide(),q==null||q.show()))},stop:function(){var Jt,Kt;(Jt=this.$cntInner)===null||Jt===void 0||Jt.hide(),(Kt=this.$header)===null||Kt===void 0||Kt.hide()}}},395:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(895);const ke={run:function(Jt,Kt){this.sender=Kt;var ft=Jt.getModel(),Ot=Jt.Config,q=Ot.stylePrefix,mt=Jt.TraitManager,K=mt.getConfig(),st;if(!K.appendTo){if(!this.$cn){this.$cn=(0,we.default)("<div></div>"),this.$cn2=(0,we.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,we.default)("<div>").append('<div class="'.concat(K.stylePrefix,'header">').concat(ft.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),K.custom?mt.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(q,'traits-label">').concat(ft.t("traitManager.label"),"</div>")),this.$cn2.append(mt.render()));var k=Jt.Panels;k.getPanel("views-container")?st=k.getPanel("views-container"):st=k.addPanel({id:"views-container"}),st==null||st.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=Jt.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var Jt=this.sender;Jt&&Jt.get&&!Jt.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(50);const ke={run:function(Kt,ft,Ot){Ot===void 0&&(Ot={});var q=Kt.getModel(),mt=q.get("clipboard"),K=Kt.getSelected();mt!=null&&mt.length&&K&&(Kt.getSelectedAll().forEach(function(st){var k,B,ct,vt=((B=(k=st.delegate)===null||k===void 0?void 0:k.copy)===null||B===void 0?void 0:B.call(k,st))||st,dt=vt.collection,H;if(dt){var R=vt.index()+1,I={at:R,action:Ot.action||"paste-component"};(0,we.contains)(mt,vt)&&vt.get("copyable")?H=dt.add(vt.clone(),I):H=Jt(Kt,mt,vt.parent(),I)}else{var N=(ct=q.Pages.getSelected())===null||ct===void 0?void 0:ct.getMainComponent(),I={at:(N==null?void 0:N.components().length)||0,action:Ot.action||"paste-component"};H=Jt(Kt,mt,N,I)}H=(0,we.isArray)(H)?H:[H],H.forEach(function($){return Kt.trigger("component:paste",$)})}),K.emitUpdate())}};function Jt(Kt,ft,Ot,q){var mt=ft.filter(function(st){return st.get("copyable")}),K=mt.filter(function(st){return Kt.Components.canMove(Ot,st).result});return Ot.components().add(K.map(function(st){return st.clone()}),q)}},129:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Kt});var we=Te(50),ke=function(ft,Ot,q){if(q||arguments.length===2)for(var mt=0,K=Ot.length,st;mt<K;mt++)(st||!(mt in Ot))&&(st||(st=Array.prototype.slice.call(Ot,0,mt)),st[mt]=Ot[mt]);return ft.concat(st||Array.prototype.slice.call(Ot))},Jt="core:component-outline";const Kt={getPanels:function(ft){return this.panels||(this.panels=ft.Panels.getPanels()),this.panels},preventDrag:function(ft){ft.abort=1},tglEffects:function(ft){var Ot=this.em,q=ft?"on":"off";if(Ot){var mt=Ot.Canvas,K=mt.getBody(),st=mt.getToolbarEl();st&&(st.style.display=ft?"none":"");var k=K.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,we.each)(k,function(B){return B.style.pointerEvents=ft?"all":""}),Ot[q]("run:tlb-move:before",this.preventDrag)}},run:function(ft,Ot){var q=this;this.sender=Ot,this.selected=ke([],ft.getSelectedAll(),!0),ft.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=ft.Commands.isActive(Jt)),this.shouldRunSwVisibility&&ft.stopCommand(Jt),ft.getModel().stopDefault();var mt=this.getPanels(ft),K=ft.Canvas.getElement(),st=ft.getEl(),k=ft.Config.stylePrefix;if(!this.helper){var B=document.createElement("span");B.className="".concat(k,"off-prv fa fa-eye-slash"),st.appendChild(B),B.onclick=function(){return q.stopCommand()},this.helper=B}this.helper.style.display="inline-block",mt.forEach(function(vt){return vt.set("visible",!1)});var ct=K.style;ct.width="100%",ct.height="100%",ct.top="0",ct.left="0",ct.padding="0",ct.margin="0",ft.refresh(),this.tglEffects(1)},stop:function(ft){var Ot=this,q=Ot.sender,mt=q===void 0?{}:q,K=Ot.selected;mt.set&&mt.set("active",0);var st=this.getPanels(ft);this.shouldRunSwVisibility&&(ft.runCommand(Jt),this.shouldRunSwVisibility=!1),ft.getModel().runDefault(),st.forEach(function(B){return B.set("visible",!0)});var k=ft.Canvas.getElement();k.setAttribute("style",""),K&&ft.select(K),delete this.selected,this.helper&&(this.helper.style.display="none"),ft.refresh(),this.tglEffects()}}},116:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=function(){return we=Object.assign||function(Jt){for(var Kt,ft=1,Ot=arguments.length;ft<Ot;ft++){Kt=arguments[ft];for(var q in Kt)Object.prototype.hasOwnProperty.call(Kt,q)&&(Jt[q]=Kt[q])}return Jt},we.apply(this,arguments)};const ke={run:function(Jt,Kt,ft){var Ot=ft||{},q=Jt.Canvas,mt=q.getCanvasView(),K=we({appendTo:q.getResizerEl(),prefix:Jt.getConfig().stylePrefix,posFetcher:mt.getElementPos.bind(mt),mousePosFetcher:q.getMouseRelativePos.bind(q)},Ot.options||{}),st=this.canvasResizer;return(!st||Ot.forceNew)&&(this.canvasResizer=new Jt.Utils.Resizer(K),st=this.canvasResizer),st.setOptions(K,!0),st.blur(),st.focus(Ot.el),st},stop:function(){var Jt;(Jt=this.canvasResizer)===null||Jt===void 0||Jt.blur()}}},407:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>it});var we=Te(50),ke=Te(346),Jt=function(){var X=function(tt,xt){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,_t){Q.__proto__=_t}||function(Q,_t){for(var W in _t)Object.prototype.hasOwnProperty.call(_t,W)&&(Q[W]=_t[W])},X(tt,xt)};return function(tt,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");X(tt,xt);function Q(){this.constructor=tt}tt.prototype=xt===null?Object.create(xt):(Q.prototype=xt.prototype,new Q)}}(),Kt=function(X){Jt(tt,X);function tt(){return X!==null&&X.apply(this,arguments)||this}return tt.prototype.defaults=function(){return{command:"",attributes:{}}},tt}(ke.Hn);const ft=Kt;var Ot=function(){var X=function(tt,xt){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,_t){Q.__proto__=_t}||function(Q,_t){for(var W in _t)Object.prototype.hasOwnProperty.call(_t,W)&&(Q[W]=_t[W])},X(tt,xt)};return function(tt,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");X(tt,xt);function Q(){this.constructor=tt}tt.prototype=xt===null?Object.create(xt):(Q.prototype=xt.prototype,new Q)}}(),q=function(X){Ot(tt,X);function tt(){return X!==null&&X.apply(this,arguments)||this}return tt}(ke.FE);const mt=q;q.prototype.model=ft;var K=Te(330),st=function(){var X=function(tt,xt){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,_t){Q.__proto__=_t}||function(Q,_t){for(var W in _t)Object.prototype.hasOwnProperty.call(_t,W)&&(Q[W]=_t[W])},X(tt,xt)};return function(tt,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");X(tt,xt);function Q(){this.constructor=tt}tt.prototype=xt===null?Object.create(xt):(Q.prototype=xt.prototype,new Q)}}(),k=function(){return k=Object.assign||function(X){for(var tt,xt=1,Q=arguments.length;xt<Q;xt++){tt=arguments[xt];for(var _t in tt)Object.prototype.hasOwnProperty.call(tt,_t)&&(X[_t]=tt[_t])}return X},k.apply(this,arguments)},B=function(X){st(tt,X);function tt(xt){var Q=X.call(this,xt)||this;return Q.em=xt.config.em,Q}return tt.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},tt.prototype.attributes=function(){return this.model.get("attributes")},tt.prototype.handleClick=function(xt){xt.preventDefault(),xt.stopPropagation();var Q=this.em,_t=Q.Canvas.getFrameEl().getBoundingClientRect(),W=_t.left,It=_t.top,$t=k(k({},xt),{clientX:xt.clientX-W,clientY:xt.clientY-It});Q.trigger("toolbar:run:before",{event:$t}),this.execCommand($t)},tt.prototype.execCommand=function(xt){var Q=this,_t=Q.em,W=Q.model,It={event:xt},$t=W.get("command"),Yt=_t.Editor;(0,we.isFunction)($t)&&$t(Yt,null,It),(0,we.isString)($t)&&Yt.runCommand($t,It)},tt.prototype.render=function(){var xt=this,Q=xt.em,_t=xt.$el,W=xt.model,It=W.get("id"),$t=W.get("label"),Yt=Q.getConfig().stylePrefix;return _t.addClass("".concat(Yt,"toolbar-item")),It&&_t.addClass("".concat(Yt,"toolbar-item__").concat(It)),$t&&_t.append($t),this},tt}(ke.G7);const ct=B;var vt=function(){var X=function(tt,xt){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,_t){Q.__proto__=_t}||function(Q,_t){for(var W in _t)Object.prototype.hasOwnProperty.call(_t,W)&&(Q[W]=_t[W])},X(tt,xt)};return function(tt,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");X(tt,xt);function Q(){this.constructor=tt}tt.prototype=xt===null?Object.create(xt):(Q.prototype=xt.prototype,new Q)}}(),dt=function(X){vt(tt,X);function tt(xt){var Q=X.call(this,xt)||this,_t=xt.em;return Q.em=_t,Q.config={em:_t},Q.listenTo(Q.collection,"reset",Q.render),Q}return tt.prototype.onRender=function(){var xt=this.em.config.stylePrefix;this.el.className="".concat(xt,"toolbar-items")},tt}(K.Z);const H=dt;dt.prototype.itemView=ct;var R=Te(491),I=Te(163),N=Te(675),$=Te(184),F=function(){return F=Object.assign||function(X){for(var tt,xt=1,Q=arguments.length;xt<Q;xt++){tt=arguments[xt];for(var _t in tt)Object.prototype.hasOwnProperty.call(tt,_t)&&(X[_t]=tt[_t])}return X},F.apply(this,arguments)},V=function(X,tt){var xt={};for(var Q in X)Object.prototype.hasOwnProperty.call(X,Q)&&tt.indexOf(Q)<0&&(xt[Q]=X[Q]);if(X!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _t=0,Q=Object.getOwnPropertySymbols(X);_t<Q.length;_t++)tt.indexOf(Q[_t])<0&&Object.prototype.propertyIsEnumerable.call(X,Q[_t])&&(xt[Q[_t]]=X[Q[_t]]);return xt},U;const it={activeResizer:!1,init:function(){this.onSelect=(0,we.debounce)(this.onSelect,0),(0,we.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),U=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(X){var tt=this,xt=this.em,Q=xt.getConfig().listenToEl,_t=xt.getContainer().parentNode,W=X?"on":"off",It={on:R.on,off:R.S1},$t=$.g.update;!Q.length&&_t&&Q.push(_t);var Yt=function(Ne,et){It[W](et,"mouseover",tt.onHover),It[W](et,"mouseleave",tt.onOut),It[W](et,"click",tt.onClick),It[W](Ne,"scroll",tt.onFrameScroll,!0),It[W](Ne,"resize",tt.onFrameResize)};It[W](window,"resize",this.onFrameUpdated),It[W](Q,"scroll",this.onContainerChange),xt[W]("component:toggled ".concat($t," undo redo"),this.onSelect,this),xt[W]("change:componentHovered",this.onHovered,this),xt[W]("component:resize styleable:change component:input",this.updateGlobalPos,this),xt[W]("".concat($t,":toolbar"),this._upToolbar,this),xt[W]("frame:updated",this.onFrameUpdated,this),xt[W]("canvas:updateTools",this.onFrameUpdated,this),xt[W](xt.Canvas.events.refresh,this.updateAttached,this),xt.Canvas.getFrames().forEach(function(Ne){var et=Ne.view,Tt=et==null?void 0:et.getWindow();Tt&&Yt(Tt,et==null?void 0:et.getBody())})},onHover:function(X){X.stopPropagation();var tt=this.em,xt=X.target,Q=(0,I.getComponentView)(xt),_t=Q==null?void 0:Q.frameView,W=Q==null?void 0:Q.model;if(!W)for(var It=xt.parentNode;!W&&It&&!(0,R.Mx)(It);)W=(0,I.getComponentModel)(It),It=It.parentNode;this.currentDoc=xt.ownerDocument,tt.setHovered(W,{useValid:!0}),_t&&tt.setCurrentFrame(_t)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(X,tt){var xt=this,Q,_t={};tt?(Q=tt.views)===null||Q===void 0||Q.forEach(function(W){var It=W.el,$t=xt.getElementPos(It);_t={el:It,pos:$t,component:tt,view:(0,I.getViewEl)(It)},It.ownerDocument===xt.currentDoc&&(xt.elHovered=_t),xt.updateToolsLocal(_t)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(W){var It=W.view,$t=It&&It.getToolsEl();$t&&xt.toggleToolsEl(0,0,{el:$t})}))},onSelect:function(){var X=this.em,tt=X.getSelected(),xt=X.getCurrentFrame(),Q=tt&&tt.getView(xt==null?void 0:xt.model),_t=Q&&Q.el,W={};if(_t&&(0,R.pn)(_t)){var It=this.getElementPos(_t);W={el:_t,pos:It,component:tt,view:(0,I.getViewEl)(_t)}}this.elSelected=W,this.updateToolsGlobal(),this.updateLocalPos(W),this.initResize(tt)},updateGlobalPos:function(){var X=this.getElSelected();X.el&&(X.pos=this.getElementPos(X.el),this.updateToolsGlobal())},updateLocalPos:function(X){var tt=this.getElHovered();tt.el&&(tt.pos=this.getElementPos(tt.el),this.updateToolsLocal(X))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(X,tt,xt){xt===void 0&&(xt={});var Q=xt.el||this.canvas.getToolsEl(tt);return Q&&(Q.style.display=X?"":"none"),Q||{}},showElementOffset:function(X,tt,xt){xt===void 0&&(xt={}),U&&this.editor.runCommand("show-offset",{el:X,elPos:tt,view:xt.view,force:1,top:0,left:0})},hideElementOffset:function(X){this.editor.stopCommand("show-offset",{view:X})},showFixedElementOffset:function(X,tt){this.editor.runCommand("show-offset",{el:X,elPos:tt,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(X){this.canvas.getHighlighter(X).style.opacity=0},onClick:function(X){X.stopPropagation(),X.preventDefault();var tt=this.em;if(tt.get("_cmpDrag"))return tt.set("_cmpDrag");var xt=X.target,Q=(0,I.getComponentModel)(xt);if(!Q)for(var _t=xt.parentNode;!Q&&_t&&!(0,R.Mx)(_t);)Q=(0,I.getComponentModel)(_t),_t=_t.parentNode;if(Q){if(tt.isEditing()&&(!Q.get("textable")&&Q.isChildOf("text")||tt.getEditing()!==Q))return;this.select(Q,X)}},select:function(X,tt){tt===void 0&&(tt={}),X&&(this.editor.select(X,{event:tt,useValid:!0}),this.initResize(X))},updateBadge:function(X,tt,xt){xt===void 0&&(xt={});var Q=this.canvas,_t=(0,I.getComponentModel)(X),W=this.getBadge(xt),It=W.style;if(!_t||!_t.get("badgable")){It.display="none";return}if(!xt.posOnly){var $t=this.canvas.getConfig(),Yt=_t.getIcon(),Ne=$t.pStylePrefix||"",et="".concat(Ne,"badge"),Tt=$t.customBadgeLabel,jt="".concat(Yt?'<div class="'.concat(et,'__icon">').concat(Yt,"</div>"):"",`
        <div class="`).concat(et,'__name">').concat(_t.getName(),"</div>");W.innerHTML=Tt?Tt(_t):jt}var zt="px";It.display="block";var Ht=Q.getTargetToElementFixed(X,W,{pos:tt}),Dt=Ht.top,St=xt.leftOff<0?-xt.leftOff:0;It.top=Dt+zt,It.left=St+zt},showHighlighter:function(X){this.canvas.getHighlighter(X).style.opacity=""},initResize:function(X){var tt=this,xt=tt.em,Q=tt.canvas,_t=xt.Editor,W=!(0,we.isElement)(X)&&(0,R.o5)(X)?X:xt.getSelected(),It=W==null?void 0:W.get("resizable"),$t=N.q.Resize,Yt=Q.hasCustomSpot($t);if(Q.removeSpots({type:$t}),W&&It){Q.addSpot({type:$t,component:W});var Ne=(0,we.isElement)(X)?X:W.getEl(),et=(0,I.isObject)(It)?It:{},Tt=et.onStart,jt=Tt===void 0?function(){}:Tt,zt=et.onMove,Ht=zt===void 0?function(){}:zt,Dt=et.onEnd,St=Dt===void 0?function(){}:Dt,Vt=et.updateTarget,Me=Vt===void 0?function(){}:Vt,de=V(et,["onStart","onMove","onEnd","updateTarget"]);if(Yt||!Ne||this.activeResizer)return;var Le,ar=xt.config,Er=ar.stylePrefix||"",Nr="".concat(Er,"resizing"),Ar=this,Fr={component:W,el:Ne},Xe=function(kt,Gt,ye){var Ae=ye.docs;Ae&&Ae.forEach(function(pt){var le=pt.body,se=le.className||"";le.className=(kt=="add"?"".concat(se," ").concat(Nr):se.replace(Nr,"")).trim()})},at=F({onStart:function(kt,Gt){jt(kt,Gt);var ye=Gt.el,Ae=Gt.config,pt=Gt.resizer,le=Ae.keyHeight,se=Ae.keyWidth,or=Ae.currentUnit,mr=Ae.keepAutoHeight,er=Ae.keepAutoWidth;Xe("add",kt,Gt),Le=xt.Styles.getModelToStyle(W),Q.toggleFramesEvents(!1);var Dr=getComputedStyle(ye),rn=Le.getStyle(),yt=rn[se];Ae.autoWidth=er&&yt==="auto",isNaN(parseFloat(yt))&&(yt=Dr[se]);var Wt=rn[le];Ae.autoHeight=mr&&Wt==="auto",isNaN(parseFloat(Wt))&&(Wt=Dr[le]),pt.startDim.w=parseFloat(yt),pt.startDim.h=parseFloat(Wt),U=!1,or&&(Ae.unitHeight=(0,I.getUnitFromValue)(Wt),Ae.unitWidth=(0,I.getUnitFromValue)(yt)),Ar.activeResizer=!0,_t.trigger("component:resize",F(F({},Fr),{type:"start"}))},onMove:function(kt){Ht(kt),_t.trigger("component:resize",F(F({},Fr),{type:"move"}))},onEnd:function(kt,Gt){St(kt,Gt),Xe("remove",kt,Gt),_t.trigger("component:resize",F(F({},Fr),{type:"end"})),Q.toggleFramesEvents(!0),U=!0,Ar.activeResizer=!1},updateTarget:function(kt,Gt,ye){if(Me(kt,Gt,ye),!!Le){var Ae=ye.store,pt=ye.selectedHandler,le=ye.config,se=le.keyHeight,or=le.keyWidth,mr=le.autoHeight,er=le.autoWidth,Dr=le.unitWidth,rn=le.unitHeight,yt=["tc","bc"].indexOf(pt)>=0,Wt=["cl","cr"].indexOf(pt)>=0,ne={};if(!yt){var Ft=Q.getBody().offsetWidth,_e=Gt.w<Ft?Gt.w:Ft;ne[or]=er?"auto":"".concat(_e).concat(Dr)}Wt||(ne[se]=mr?"auto":"".concat(Gt.h).concat(rn)),xt.getDragMode(W)&&(ne.top="".concat(Gt.t).concat(rn),ne.left="".concat(Gt.l).concat(Dr));var Zt=F(F({},ne),{__p:!Ae});Le.addStyle(Zt,{avoidStore:!Ae}),xt.Styles.__emitCmpStyleUpdate(Zt,{components:xt.getSelected()})}}},de);this.resizer=_t.runCommand("resize",{el:Ne,options:at,force:1})}else{if(Yt)return;_t.stopCommand("resize"),this.resizer=null}},updateToolbar:function(X){var tt=this.canvas,xt=this.config.em,Q=X===xt?xt.getSelected():X,_t=tt.getToolbarEl(),W=_t.style,It=Q.get("toolbar"),$t=xt.config.showToolbar,Yt=!tt.hasCustomSpot(N.q.Select);if(Q&&$t&&It&&It.length&&Yt){if(W.display="",!this.toolbar){_t.innerHTML="",this.toolbar=new mt(It);var Ne=new H({collection:this.toolbar,em:xt});_t.appendChild(Ne.render().el)}this.toolbar.reset(It),W.top="-100px",W.left="0"}else W.display="none"},updateToolbarPos:function(X){var tt="px",xt=this.canvas.getToolbarEl().style;xt.top="".concat(X.top).concat(tt),xt.left="".concat(X.left).concat(tt),xt.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(X){return X===void 0&&(X={}),this.canvas.getBadgeEl(X.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(X){return X&&X.get("status")==="selected"},updateToolsLocal:function(X){var tt=this.em.getConfig(),xt=X||this.getElHovered(),Q=xt.el,_t=xt.pos,W=xt.view,It=xt.component;if(!Q){this.lastHovered=0;return}var $t=It.get("hoverable"),Yt=this.lastHovered!==Q,Ne=Yt?{}:{posOnly:1},et=this.canvas.hasCustomSpot(N.q.Hover);Yt&&$t&&(this.lastHovered=Q,et?this.hideHighlighter(W):this.showHighlighter(W),this.showElementOffset(Q,_t,{view:W})),this.isCompSelected(It)&&(this.hideHighlighter(W),!tt.showOffsetsSelected&&this.hideElementOffset(W));var Tt="px",jt=this.toggleToolsEl(1,W),zt=jt.style,Ht=this.canvas.canvasRectOffset(Q,_t),Dt=Ht.top,St=Ht.left;!et&&this.updateBadge(Q,_t,F(F({},Ne),{view:W,topOff:Dt,leftOff:St})),zt.top=Dt+Tt,zt.left=St+Tt,zt.width=_t.width+Tt,zt.height=_t.height+Tt,this._trgToolUp("local",{component:It,el:jt,top:Dt,left:St,width:_t.width,height:_t.height})},_upToolbar:(0,we.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(X,tt){tt===void 0&&(tt={}),this.em.trigger("canvas:tools:update",F({type:X},tt))},updateToolsGlobal:function(X){X===void 0&&(X={});var tt=this.getElSelected(),xt=tt.el,Q=tt.pos,_t=tt.component;if(!xt){this.toggleToolsEl(),this.lastSelected=0;return}var W=this.canvas,It=this.lastSelected!==xt;(It||X.force)&&(this.lastSelected=xt,this.updateToolbar(_t));var $t="px",Yt=this.toggleToolsEl(1),Ne=Yt.style,et=W.getTargetToElementFixed(xt,W.getToolbarEl(),{pos:Q}),Tt=et.canvasOffsetTop,jt=et.canvasOffsetLeft;Ne.top=Tt+$t,Ne.left=jt+$t,Ne.width=Q.width+$t,Ne.height=Q.height+$t,this.updateToolbarPos({top:et.top,left:et.left}),this._trgToolUp("global",{component:_t,el:Yt,top:Tt,left:jt,width:Q.width,height:Q.height})},updateAttached:(0,we.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,we.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(X){return this.canvas.getCanvasView().getElementPos(X,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(X){X&&X.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(X){(0,I.hasWin)()&&(this.editor=X&&X.get("Editor"),this.enable())},stop:function(X,tt,xt){if(xt===void 0&&(xt={}),!!(0,I.hasWin)()){var Q=this,_t=Q.em,W=Q.editor;this.onHovered(),this.stopSelectComponent(),!xt.preserveSelected&&_t.setSelected(),this.toggleToolsEl(),W&&W.stopCommand("resize")}}}},189:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ke});var we=Te(895);const ke={startSelectPosition:function(Jt,Kt,ft){var Ot=this;ft===void 0&&(ft={}),this.isPointed=!1;var q=this.em.Utils,mt=Jt.ownerDocument.body;q&&!this.sorter&&(this.sorter=new q.Sorter({container:mt,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:Kt,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return Ot.em.getZoomDecimal()}})),ft.onStart&&(this.sorter.onStart=ft.onStart),Jt&&this.sorter.startSort(Jt,{container:mt})},getOffsetDim:function(){var Jt=this.offset(this.canvas.getFrameEl()),Kt=this.offset(this.canvas.getElement()),ft=Jt.top-Kt.top,Ot=Jt.left-Kt.left;return{top:ft,left:Ot}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,we.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,we.default)(this.cDim[this.posIndex][5]).parent():(0,we.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(Jt,Kt,ft){var Ot=Jt||0,q=Kt||"before",mt=ft.length,K=mt!==0&&q=="after"&&Ot==mt;return mt!==0&&(!K&&!ft[Ot][4]||ft[Ot-1]&&!ft[Ot-1][4]||K&&!ft[Ot-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>ft});var we=Te(50),ke=Te(675),Jt=Te(895),Kt=function(){return Kt=Object.assign||function(Ot){for(var q,mt=1,K=arguments.length;mt<K;mt++){q=arguments[mt];for(var st in q)Object.prototype.hasOwnProperty.call(q,st)&&(Ot[st]=q[st])}return Ot},Kt.apply(this,arguments)};const ft={getOffsetMethod:function(Ot){var q=Ot||"";return"get"+q+"OffsetViewerEl"},run:function(Ot,q,mt){var K=this.canvas,st=mt||{},k=st.state||"",B=Ot.getConfig(),ct=this.em.getZoomDecimal(),vt=st.el;if(!B.showOffsets||!(vt instanceof HTMLElement)||!B.showOffsetsSelected&&k=="Fixed"){Ot.stopCommand("".concat(this.id),mt);return}if(!K.hasCustomSpot(ke.q.Spacing)){var dt=Kt({},st.elPos||K.getElementPos(vt));(0,we.isUndefined)(st.top)||(dt.top=st.top),(0,we.isUndefined)(st.left)||(dt.left=st.left);var H=window.getComputedStyle(vt),R=this.ppfx,I=k+"State",N=this.getOffsetMethod(k),$=K[N](mt.view);$.style.opacity="";var F=this["marginT"+k],V=this["marginB"+k],U=this["marginL"+k],it=this["marginR"+k],X=this["padT"+k],tt=this["padB"+k],xt=this["padL"+k],Q=this["padR"+k];if($.childNodes.length&&(this[I]="1",F=$.querySelector("[data-offset-m-t]"),V=$.querySelector("[data-offset-m-b]"),U=$.querySelector("[data-offset-m-l]"),it=$.querySelector("[data-offset-m-r]"),X=$.querySelector("[data-offset-p-t]"),tt=$.querySelector("[data-offset-p-b]"),xt=$.querySelector("[data-offset-p-l]"),Q=$.querySelector("[data-offset-p-r]")),!this[I]){var _t=k.toLowerCase(),W=_t+"margin-v",It=_t+"padding-v",$t=(0,Jt.default)('<div class="'.concat(R,'marginName">')).get(0),Yt=(0,Jt.default)('<div class="'.concat(R,'paddingName">')).get(0),Ne=R+W+"-el",et=R+It+"-el",Tt="".concat(Ne," ").concat(R+W),jt="".concat(et," ").concat(R+It);F=(0,Jt.default)('<div class="'.concat(Tt,'-top"></div>')).get(0),V=(0,Jt.default)('<div class="'.concat(Tt,'-bottom"></div>')).get(0),U=(0,Jt.default)('<div class="'.concat(Tt,'-left"></div>')).get(0),it=(0,Jt.default)('<div class="'.concat(Tt,'-right"></div>')).get(0),X=(0,Jt.default)('<div class="'.concat(jt,'-top"></div>')).get(0),tt=(0,Jt.default)('<div class="'.concat(jt,'-bottom"></div>')).get(0),xt=(0,Jt.default)('<div class="'.concat(jt,'-left"></div>')).get(0),Q=(0,Jt.default)('<div class="'.concat(jt,'-right"></div>')).get(0),this["marginT"+k]=F,this["marginB"+k]=V,this["marginL"+k]=U,this["marginR"+k]=it,this["padT"+k]=X,this["padB"+k]=tt,this["padL"+k]=xt,this["padR"+k]=Q,$t.appendChild(F),$t.appendChild(V),$t.appendChild(U),$t.appendChild(it),Yt.appendChild(X),Yt.appendChild(tt),Yt.appendChild(xt),Yt.appendChild(Q),$.appendChild($t),$.appendChild(Yt),this[I]="1"}var zt="px",Ht=parseFloat(H.marginLeft.replace(zt,""))*ct,Dt=parseFloat(H.marginRight.replace(zt,""))*ct,St=parseFloat(H.marginTop.replace(zt,""))*ct,Vt=parseFloat(H.marginBottom.replace(zt,""))*ct,Me=F.style,de=V.style,Le=U.style,ar=it.style,Er=X.style,Nr=tt.style,Ar=xt.style,Fr=Q.style,Xe=parseFloat(dt.left),at=parseFloat(H.width)*ct+zt;Me.height=St+zt,Me.width=at,Me.top=dt.top-St+zt,Me.left=Xe+zt,de.height=Vt+zt,de.width=at,de.top=dt.top+dt.height+zt,de.left=Xe+zt;var kt=dt.height+St+Vt+zt,Gt=dt.top-St+zt;Le.height=kt,Le.width=Ht+zt,Le.top=Gt,Le.left=Xe-Ht+zt,ar.height=kt,ar.width=Dt+zt,ar.top=Gt,ar.left=Xe+dt.width+zt;var ye=parseFloat(H.paddingTop)*ct;Er.height=ye+zt;var Ae=parseFloat(H.paddingBottom)*ct;Nr.height=Ae+zt;var pt=dt.height-Ae-ye+zt,le=dt.top+ye+zt;Ar.height=pt,Ar.width=parseFloat(H.paddingLeft)*ct+zt,Ar.top=le;var se=parseFloat(H.paddingRight)*ct;Fr.height=pt,Fr.width=se+zt,Fr.top=le}},stop:function(Ot,q,mt){mt===void 0&&(mt={});var K=mt||{},st=K.state||"",k=this.getOffsetMethod(st),B=mt.view,ct=this.canvas,vt=ct[k](B);vt.style.opacity=0}}},434:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Jt});var we=Te(50),ke=Te(163);const Jt={init:function(){(0,we.bindAll)(this,"_onFramesChange")},run:function(Kt){this.toggleVis(Kt,!0)},stop:function(Kt){this.toggleVis(Kt,!1)},toggleVis:function(Kt,ft){if(ft===void 0&&(ft=!0),!Kt.Commands.isActive("preview")){var Ot=Kt.Canvas,q=ft?"on":"off",mt=Ot.getModel();mt[q]("change:frames",this._onFramesChange),this.handleFrames(Ot.getFrames(),ft)}},handleFrames:function(Kt,ft){var Ot=this;Kt.forEach(function(q){var mt;!((mt=q.view)===null||mt===void 0)&&mt.loaded&&Ot._upFrame(q,ft),q.__ol||(q.on("loaded",function(){return Ot._upFrame(q)}),q.__ol=!0)})},_onFramesChange:function(Kt,ft){this.handleFrames(ft)},_upFrame:function(Kt,ft){var Ot,q=this,mt=q.ppfx,K=q.em,st=q.id,k=(0,ke.isDef)(ft)?ft:K.Commands.isActive(st),B=k?"add":"remove",ct="".concat(mt,"dashed");(Ot=Kt.view)===null||Ot===void 0||Ot.getBody().classList[B](ct)}}},346:(wt,pe,Te)=>{Te.d(pe,{FE:()=>Ot,G7:()=>q,Hn:()=>ft,pH:()=>K,vA:()=>mt});var we=Te(316),ke=Te.n(we),Jt=function(){var st=function(k,B){return st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,vt){ct.__proto__=vt}||function(ct,vt){for(var dt in vt)Object.prototype.hasOwnProperty.call(vt,dt)&&(ct[dt]=vt[dt])},st(k,B)};return function(k,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");st(k,B);function ct(){this.constructor=k}k.prototype=B===null?Object.create(B):(ct.prototype=B.prototype,new ct)}}(),Kt=function(){return Kt=Object.assign||function(st){for(var k,B=1,ct=arguments.length;B<ct;B++){k=arguments[B];for(var vt in k)Object.prototype.hasOwnProperty.call(k,vt)&&(st[vt]=k[vt])}return st},Kt.apply(this,arguments)},ft=function(st){Jt(k,st);function k(){return st!==null&&st.apply(this,arguments)||this}return k}(ke().Model),Ot=function(st){Jt(k,st);function k(){return st!==null&&st.apply(this,arguments)||this}return k}(ke().Collection),q=function(st){Jt(k,st);function k(){return st!==null&&st.apply(this,arguments)||this}return k}(ke().View),mt;(function(st){st.Screen="screen",st.World="world"})(mt||(mt={}));var K={x:0,y:0};Kt(Kt({},K),{width:0,height:0})},184:(wt,pe,Te)=>{Te.d(pe,{W:()=>we,g:()=>ke});var we;(function(Jt){Jt.remove="component:remove",Jt.add="component:add",Jt.move="component:move"})(we||(we={}));var ke;(function(Jt){Jt.add="component:add",Jt.remove="component:remove",Jt.removeBefore="component:remove:before",Jt.create="component:create",Jt.update="component:update",Jt.updateInside="component:update-inside",Jt.symbolMainAdd="symbol:main:add",Jt.symbolMainUpdate="symbol:main:update",Jt.symbolMainUpdateDeep="symbol:main:update-deep",Jt.symbolMainRemove="symbol:main:remove",Jt.symbolMain="symbol:main",Jt.symbolInstanceAdd="symbol:instance:add",Jt.symbolInstanceRemove="symbol:instance:remove",Jt.symbolInstance="symbol:instance",Jt.symbol="symbol"})(ke||(ke={}))},330:(wt,pe,Te)=>{Te.d(pe,{Z:()=>ft});var we=Te(50),ke=Te(346),Jt=function(){var Ot=function(q,mt){return Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,st){K.__proto__=st}||function(K,st){for(var k in st)Object.prototype.hasOwnProperty.call(st,k)&&(K[k]=st[k])},Ot(q,mt)};return function(q,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Class extends value "+String(mt)+" is not a constructor or null");Ot(q,mt);function K(){this.constructor=q}q.prototype=mt===null?Object.create(mt):(K.prototype=mt.prototype,new K)}}(),Kt=function(Ot){Jt(q,Ot);function q(mt,K,st){mt===void 0&&(mt={}),st===void 0&&(st=!1);var k=Ot.call(this,mt)||this;return k.itemsView="",k.itemType="type",k.reuseView=!1,k.config=K||mt.config||{},st&&k.listenTo(k.collection,"add",k.addTo),k.items=[],k}return q.prototype.addTo=function(mt){this.add(mt)},q.prototype.itemViewNotFound=function(mt){var K=this,st=K.config,k=K.ns,B=st.em,ct="".concat(k?"[".concat(k,"]: "):"","'").concat(mt,"' type not found");B&&B.logWarning(ct)},q.prototype.add=function(mt,K){var st=this,k=st.config,B=st.reuseView,ct=st.items,vt=this.itemsView||{},dt=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],H=K||null,R=this.itemView,I=mt.get(this.itemType),N;vt[I]?R=vt[I]:I&&!vt[I]&&!(0,we.includes)(dt,I)&&this.itemViewNotFound(I),mt.view&&B?N=mt.view:N=new R({model:mt,config:k},k),ct&&ct.push(N);var $=N.render().el;H?H.appendChild($):this.$el.append($)},q.prototype.render=function(){var mt=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(K){this.add(K,mt)},this),this.$el.append(mt),this.onRender(),this},q.prototype.onRender=function(){},q.prototype.onRemoveBefore=function(mt,K){},q.prototype.onRemove=function(mt,K){},q.prototype.remove=function(mt){mt===void 0&&(mt={});var K=this.items;return this.onRemoveBefore(K,mt),this.clearItems(),Ot.prototype.remove.call(this),this.onRemove(K,mt),this},q.prototype.clearItems=function(){this.items},q}(ke.G7);const ft=Kt;Kt.prototype.itemView=""},668:(wt,pe,Te)=>{Te.d(pe,{Z:()=>q});var we=Te(50),ke=Te(491),Jt=function(){return Jt=Object.assign||function(mt){for(var K,st=1,k=arguments.length;st<k;st++){K=arguments[st];for(var B in K)Object.prototype.hasOwnProperty.call(K,B)&&(mt[B]=K[B])}return mt},Jt.apply(this,arguments)},Kt=function(){return{x:0,y:0}},ft=["x","y"],Ot=function(){function mt(K){return K===void 0&&(K={}),this.opts={snapOffset:5,scale:1},(0,we.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(K),this.delta=Kt(),this.lastScroll=Kt(),this.lastScrollDiff=Kt(),this.startPointer=Kt(),this.startPosition=Kt(),this.globScrollDiff=Kt(),this.currentPointer=Kt(),this.position=Kt(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return mt.prototype.setOptions=function(K){K===void 0&&(K={}),this.opts=Jt(Jt({},this.opts),K)},mt.prototype.toggleDrag=function(K){var st=this.getDocumentEl(),k=this.getContainerEl(),B=this.getWindowEl(),ct=K?"on":"off",vt={on:ke.on,off:ke.S1};vt[ct](k,"mousemove dragover",this.drag),vt[ct](st,"mouseup dragend touchend",this.stop),vt[ct](st,"keydown",this.keyHandle),vt[ct](B,"scroll",this.handleScroll)},mt.prototype.handleScroll=function(){var K=this,st=K.lastScroll,k=K.delta,B=this.getScrollInfo(),ct={x:B.x-st.x,y:B.y-st.y};this.move(k.x+ct.x,k.y+ct.y),this.lastScrollDiff=ct},mt.prototype.start=function(K){var st=this.opts,k=st.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(K),this.guidesStatic=(0,we.result)(st,"guidesStatic")||[],this.guidesTarget=(0,we.result)(st,"guidesTarget")||[],(0,we.isFunction)(k)&&k(K,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=Kt(),this.globScrollDiff=Kt(),this.drag(K)},mt.prototype.drag=function(K){var st=this,k=this,B=k.opts,ct=k.lastScrollDiff,vt=k.globScrollDiff,dt=B.onDrag,H=this.startPointer,R=this.getPointerPos(K),I={x:vt.x+ct.x,y:vt.y+ct.y};this.globScrollDiff=I;var N={x:R.x-H.x+I.x,y:R.y-H.y+I.y};this.lastScrollDiff=Kt();var $=this.lockedAxis;K.shiftKey?$=!$&&this.detectAxisLock(N.x,N.y):$=null,$==="x"?N.x=H.x:$==="y"&&(N.y=H.y);var F=function(xt){ft.forEach(function(Q){return xt[Q]=xt[Q]*(0,we.result)(B,"scale")}),st.delta=xt,st.move(xt.x,xt.y),(0,we.isFunction)(dt)&&dt(K,st)},V=Jt({},N);if(this.currentPointer=R,this.lockedAxis=$,this.lastScroll=this.getScrollInfo(),F(N),this.guidesTarget.length){var U=this.snapGuides(V),it=U.newDelta,X=U.trgX,tt=U.trgY;(X||tt)&&F(it)}K.which===0&&this.stop(K)},mt.prototype.snapGuides=function(K){var st=this,k=K,B=this,ct=B.trgX,vt=B.trgY;return this.guidesTarget.forEach(function(dt){dt.x&&st.trgX||dt.y&&st.trgY||(dt.active=!1,st.guidesStatic.forEach(function(H){if(!(dt.y&&H.x||dt.x&&H.y)){var R=dt.y&&H.y,I=R?"y":"x",N=dt[I],$=H[I],F=K[I],V=R?vt:ct;if(st.isPointIn(N,$)&&(0,we.isUndefined)(V)){var U=F-(N-$);st.setGuideLock(dt,U)}}}))}),ct=this.trgX,vt=this.trgY,ft.forEach(function(dt){var H=dt.toUpperCase(),R=st["trg".concat(H)];R&&!st.isPointIn(K[dt],R.lock)&&(st.setGuideLock(R,null),R=null),R&&!(0,we.isUndefined)(R.lock)&&(k[dt]=R.lock)}),{newDelta:k,trgX:this.trgX,trgY:this.trgY}},mt.prototype.isPointIn=function(K,st,k){var B=k===void 0?{}:k,ct=B.offset,vt=ct||this.opts.snapOffset||0;return K>=st&&K<=st+vt||K<=st&&K>=st-vt},mt.prototype.setGuideLock=function(K,st){var k=(0,we.isUndefined)(K.x)?"Y":"X",B="trg".concat(k);return st!==null?(K.active=!0,K.lock=st,this[B]=K):(delete K.active,delete K.lock,delete this[B]),K},mt.prototype.stop=function(K,st){st===void 0&&(st={});var k=this.delta,B=!!st.cancel,ct=B?0:k.x,vt=B?0:k.y;this.toggleDrag(),this.lockedAxis=null,this.move(ct,vt,!0);var dt=this.opts.onEnd;(0,we.isFunction)(dt)&&dt(K,this,{cancelled:B})},mt.prototype.keyHandle=function(K){(0,ke.kl)(K)&&this.stop(K,{cancel:!0})},mt.prototype.move=function(K,st,k){var B=this,ct=B.el,vt=B.opts,dt=this.startPosition;if(dt){var H=vt.setPosition,R=dt.x+K,I=dt.y+st;this.position={x:R,y:I,end:k},(0,we.isFunction)(H)&&H(this.position),ct&&(ct.style.left="".concat(R,"px"),ct.style.top="".concat(I,"px"))}},mt.prototype.getContainerEl=function(){var K=this.opts.container;return K?[K]:this.getDocumentEl()},mt.prototype.getWindowEl=function(){var K=this.getContainerEl();return K.map(function(st){var k=st.ownerDocument||st;return k.defaultView||k.parentWindow})},mt.prototype.getDocumentEl=function(K){var st=this.opts.doc;if(K=K||this.el,!this.docs.length){var k=[document];K&&k.push(K.ownerDocument),st&&k.push(st),this.docs=k}return this.docs},mt.prototype.getPointerPos=function(K){var st=this.opts.getPointerPosition,k=(0,ke.VB)(K);return st?st(K):{x:k.clientX,y:k.clientY}},mt.prototype.getStartPosition=function(){var K=this,st=K.el,k=K.opts,B=k.getPosition,ct=Kt();return(0,we.isFunction)(B)?ct=B():st&&(ct={x:parseFloat(st.style.left),y:parseFloat(st.style.top)}),ct},mt.prototype.getScrollInfo=function(){var K=this.opts.doc,st=K&&K.body;return{y:st?st.scrollTop:0,x:st?st.scrollLeft:0}},mt.prototype.detectAxisLock=function(K,st){var k=K,B=st,ct=Math.abs(k),vt=Math.abs(B);if(B>=ct||B<=-ct)return"x";if(k>vt||k<-vt)return"y"},mt}();const q=Ot},895:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{default:()=>Un});var we=typeof document<"u"?document:null,ke=typeof window<"u"?window:null,Jt=Array.prototype,Kt=Jt.filter,ft=Jt.indexOf,Ot=Jt.map,q=Jt.push,mt=Jt.reverse,K=Jt.slice,st=Jt.splice,k=/^#[\w-]*$/,B=/^\.[\w-]*$/,ct=/<.+>/,vt=/^\w+$/;function dt(Rt,ee){return ee===void 0&&(ee=we),B.test(Rt)?ee.getElementsByClassName(Rt.slice(1)):vt.test(Rt)?ee.getElementsByTagName(Rt):ee.querySelectorAll(Rt)}function H(Rt,ee){if(ee===void 0&&(ee=we),!!Rt){if(Rt.__cash)return Rt;var je=Rt;if(xt(Rt)){if(ee.__cash&&(ee=ee[0]),je=k.test(Rt)?ee.getElementById(Rt.slice(1)):ct.test(Rt)?nn(Rt):dt(Rt,ee),!je)return}else if(tt(Rt))return this.ready(Rt);(je.nodeType||je===ke)&&(je=[je]),this.length=je.length;for(var Je=0,Et=this.length;Je<Et;Je++)this[Je]=je[Je]}}function R(Rt,ee){return new H(Rt,ee)}var I=R.fn=R.prototype=H.prototype={constructor:R,__cash:!0,length:0,splice:st};I.get=function(Rt){return Rt===void 0?K.call(this):this[Rt<0?Rt+this.length:Rt]},I.eq=function(Rt){return R(this.get(Rt))},I.first=function(){return this.eq(0)},I.last=function(){return this.eq(-1)},I.map=function(Rt){return R(Ot.call(this,function(ee,je){return Rt.call(ee,je,ee)}))},I.slice=function(){return R(K.apply(this,arguments))};var N=/(?:^\w|[A-Z]|\b\w)/g,$=/[\s-_]+/g;function F(Rt){return Rt.replace(N,function(ee,je){return ee[je?"toUpperCase":"toLowerCase"]()}).replace($,"")}R.camelCase=F;function V(Rt,ee){for(var je=0,Je=Rt.length;je<Je&&ee.call(Rt[je],Rt[je],je,Rt)!==!1;je++);}R.each=V,I.each=function(Rt){return V(this,function(ee,je){return Rt.call(ee,je,ee)}),this},I.removeProp=function(Rt){return this.each(function(ee,je){delete je[Rt]})};function U(Rt){Rt===void 0&&(Rt=this);for(var ee=arguments,je=ee.length,Je=je<2?0:1;Je<je;Je++)for(var Et in ee[Je])Rt[Et]=ee[Je][Et];return Rt}R.extend=I.extend=U;var it=1;R.guid=it;function X(Rt,ee){var je=Rt&&(Rt.matches||Rt.webkitMatchesSelector||Rt.mozMatchesSelector||Rt.msMatchesSelector||Rt.oMatchesSelector);return!!je&&je.call(Rt,ee)}R.matches=X;function tt(Rt){return typeof Rt=="function"}R.isFunction=tt;function xt(Rt){return typeof Rt=="string"}R.isString=xt;function Q(Rt){return!isNaN(parseFloat(Rt))&&isFinite(Rt)}R.isNumeric=Q;var _t=Array.isArray;R.isArray=_t,I.prop=function(Rt,ee){if(Rt){if(xt(Rt))return arguments.length<2?this[0]&&this[0][Rt]:this.each(function(Je,Et){Et[Rt]=ee});for(var je in Rt)this.prop(je,Rt[je]);return this}};function W(Rt){return xt(Rt)?function(ee,je){return X(je,Rt)}:Rt.__cash?function(ee,je){return Rt.is(je)}:function(ee,je,Je){return je===Je}}I.filter=function(Rt){if(!Rt)return R();var ee=tt(Rt)?Rt:W(Rt);return R(Kt.call(this,function(je,Je){return ee.call(je,Je,je,Rt)}))};var It=/\S+/g;function $t(Rt){return xt(Rt)?Rt.match(It)||[]:[]}I.hasClass=function(Rt){var ee=$t(Rt),je=!1;return ee.length&&this.each(function(Je,Et){return je=Et.classList.contains(ee[0]),!je}),je},I.removeAttr=function(Rt){var ee=$t(Rt);return ee.length?this.each(function(je,Je){V(ee,function(Et){Je.removeAttribute(Et)})}):this},I.attr=function(Rt,ee){if(Rt){if(xt(Rt)){if(arguments.length<2){if(!this[0])return;var je=this[0].getAttribute(Rt);return je===null?void 0:je}return ee===null?this.removeAttr(Rt):this.each(function(Et,fe){fe.setAttribute(Rt,ee)})}for(var Je in Rt)this.attr(Je,Rt[Je]);return this}},I.toggleClass=function(Rt,ee){var je=$t(Rt),Je=ee!==void 0;return je.length?this.each(function(Et,fe){V(je,function(Pe){Je?ee?fe.classList.add(Pe):fe.classList.remove(Pe):fe.classList.toggle(Pe)})}):this},I.addClass=function(Rt){return this.toggleClass(Rt,!0)},I.removeClass=function(Rt){return arguments.length?this.toggleClass(Rt,!1):this.attr("class","")};function Yt(Rt){return Rt.filter(function(ee,je,Je){return Je.indexOf(ee)===je})}R.unique=Yt,I.add=function(Rt,ee){return R(Yt(this.get().concat(R(Rt,ee).get())))};function Ne(Rt,ee,je){if(Rt.nodeType===1){var Je=ke.getComputedStyle(Rt,null);return ee?je?Je.getPropertyValue(ee):Je[ee]:Je}}function et(Rt,ee){return parseInt(Ne(Rt,ee),10)||0}var Tt=/^--/;function jt(Rt){return Tt.test(Rt)}var zt={},Ht=we&&we.createElement("div"),Dt=Ht?Ht.style:{},St=["webkit","moz","ms","o"];function Vt(Rt,ee){if(ee===void 0&&(ee=jt(Rt)),ee)return Rt;if(!zt[Rt]){var je=F(Rt),Je=""+je.charAt(0).toUpperCase()+je.slice(1),Et=(je+" "+St.join(Je+" ")+Je).split(" ");V(Et,function(fe){if(fe in Dt)return zt[Rt]=fe,!1})}return zt[Rt]}R.prefixedProp=Vt;var Me={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function de(Rt,ee,je){return je===void 0&&(je=jt(Rt)),!je&&!Me[Rt]&&Q(ee)?ee+"px":ee}I.css=function(Rt,ee){if(xt(Rt)){var je=jt(Rt);return Rt=Vt(Rt,je),arguments.length<2?this[0]&&Ne(this[0],Rt,je):Rt?(ee=de(Rt,ee,je),this.each(function(Et,fe){fe.nodeType===1&&(je?fe.style.setProperty(Rt,ee):fe.style[Rt]=ee)})):this}for(var Je in Rt)this.css(Je,Rt[Je]);return this};var Le="__cashData",ar=/^data-(.*)/;R.hasData=function(Rt){return Le in Rt};function Er(Rt){return Rt[Le]=Rt[Le]||{}}function Nr(Rt,ee){var je=Er(Rt);if(ee){if(!(ee in je)){var Je=Rt.dataset?Rt.dataset[ee]||Rt.dataset[F(ee)]:R(Rt).attr("data-"+ee);if(Je!==void 0){try{Je=JSON.parse(Je)}catch{}je[ee]=Je}}return je[ee]}return je}function Ar(Rt,ee){ee===void 0?delete Rt[Le]:delete Er(Rt)[ee]}function Fr(Rt,ee,je){Er(Rt)[ee]=je}I.data=function(Rt,ee){var je=this;if(!Rt)return this[0]?(V(this[0].attributes,function(Et){var fe=Et.name.match(ar);fe&&je.data(fe[1])}),Nr(this[0])):void 0;if(xt(Rt))return ee===void 0?this[0]&&Nr(this[0],Rt):this.each(function(Et,fe){return Fr(fe,Rt,ee)});for(var Je in Rt)this.data(Je,Rt[Je]);return this},I.removeData=function(Rt){return this.each(function(ee,je){return Ar(je,Rt)})};function Xe(Rt,ee){return et(Rt,"border"+(ee?"Left":"Top")+"Width")+et(Rt,"padding"+(ee?"Left":"Top"))+et(Rt,"padding"+(ee?"Right":"Bottom"))+et(Rt,"border"+(ee?"Right":"Bottom")+"Width")}V(["Width","Height"],function(Rt){I["inner"+Rt]=function(){if(this[0])return this[0]===ke?ke["inner"+Rt]:this[0]["client"+Rt]}}),V(["width","height"],function(Rt,ee){I[Rt]=function(je){return this[0]?arguments.length?(je=parseInt(je,10),this.each(function(Je,Et){if(Et.nodeType===1){var fe=Ne(Et,"boxSizing");Et.style[Rt]=de(Rt,je+(fe==="border-box"?Xe(Et,!ee):0))}})):this[0]===ke?this[0][F("outer-"+Rt)]:this[0].getBoundingClientRect()[Rt]-Xe(this[0],!ee):je===void 0?void 0:this}}),V(["Width","Height"],function(Rt,ee){I["outer"+Rt]=function(je){if(this[0])return this[0]===ke?ke["outer"+Rt]:this[0]["offset"+Rt]+(je?et(this[0],"margin"+(ee?"Top":"Left"))+et(this[0],"margin"+(ee?"Bottom":"Right")):0)}});function at(Rt,ee){for(var je=0,Je=ee.length;je<Je;je++)if(Rt.indexOf(ee[je])<0)return!1;return!0}function kt(Rt,ee,je){V(Rt[je],function(Je){Je[0];var Et=Je[1];ee.removeEventListener(je,Et)}),delete Rt[je]}var Gt="__cashEvents",ye=".";function Ae(Rt){return Rt[Gt]=Rt[Gt]||{}}function pt(Rt,ee,je,Je){Je.guid=Je.guid||it++;var Et=Ae(Rt);Et[ee]=Et[ee]||[],Et[ee].push([je,Je]),Rt.addEventListener(ee,Je)}function le(Rt){var ee=Rt.split(ye);return[ee[0],ee.slice(1).sort()]}function se(Rt,ee,je,Je){var Et=Ae(Rt);if(ee){var fe=Et[ee];if(!fe)return;Je&&(Je.guid=Je.guid||it++),Et[ee]=fe.filter(function(Pe){var Ye=Pe[0],Cr=Pe[1];if(Je&&Cr.guid!==Je.guid||!at(Ye,je))return!0;Rt.removeEventListener(ee,Cr)})}else if(!je||!je.length)for(ee in Et)kt(Et,Rt,ee);else for(ee in Et)se(Rt,ee,je,Je)}I.off=function(Rt,ee){var je=this;return Rt===void 0?this.each(function(Je,Et){return se(Et)}):V($t(Rt),function(Je){var Et=le(Je),fe=Et[0],Pe=Et[1];je.each(function(Ye,Cr){return se(Cr,fe,Pe,ee)})}),this},I.on=function(Rt,ee,je,Je){var Et=this;if(!xt(Rt)){for(var fe in Rt)this.on(fe,ee,Rt[fe]);return this}return tt(ee)&&(je=ee,ee=!1),V($t(Rt),function(Pe){var Ye=le(Pe),Cr=Ye[0],Wr=Ye[1];Et.each(function(zn,Dn){var lo=function ho(vn){if(!(vn.namespace&&!at(Wr,vn.namespace.split(ye)))){var ro=Dn;if(ee){for(var In=vn.target;!X(In,ee);)if(In===Dn||(In=In.parentNode,!In))return;ro=In}vn.namespace=vn.namespace||"";var Yo=je.call(ro,vn,vn.data);Je&&se(Dn,Cr,Wr,ho),Yo===!1&&(vn.preventDefault(),vn.stopPropagation())}};lo.guid=je.guid=je.guid||it++,pt(Dn,Cr,Wr,lo)})}),this},I.one=function(Rt,ee,je){return this.on(Rt,ee,je,!0)},I.ready=function(Rt){var ee=function(){return Rt(R)};return we.readyState!=="loading"?setTimeout(ee):we.addEventListener("DOMContentLoaded",ee),this},I.trigger=function(Rt,ee){var je=Rt;if(xt(Rt)){var Je=le(Rt),Et=Je[0],fe=Je[1];je=we.createEvent("HTMLEvents"),je.initEvent(Et,!0,!0),je.namespace=fe.join(ye)}return je.data=ee,this.each(function(Pe,Ye){Ye.dispatchEvent(je)})};function or(Rt){var ee=[];return V(Rt.options,function(je){je.selected&&!je.disabled&&!je.parentNode.disabled&&ee.push(je.value)}),ee}function mr(Rt){return Rt.selectedIndex<0?null:Rt.options[Rt.selectedIndex].value}var er=/select-one/i,Dr=/select-multiple/i;function rn(Rt){var ee=Rt.type;return er.test(ee)?mr(Rt):Dr.test(ee)?or(Rt):Rt.value}var yt=/%20/g;function Wt(Rt,ee){return"&"+encodeURIComponent(Rt)+"="+encodeURIComponent(ee).replace(yt,"+")}var ne=/file|reset|submit|button|image/i,Ft=/radio|checkbox/i;I.serialize=function(){var Rt="";return this.each(function(ee,je){V(je.elements||[je],function(Je){if(!(Je.disabled||!Je.name||Je.tagName==="FIELDSET")&&!ne.test(Je.type)&&!(Ft.test(Je.type)&&!Je.checked)){var Et=rn(Je);if(Et!==void 0){var fe=_t(Et)?Et:[Et];V(fe,function(Pe){Rt+=Wt(Je.name,Pe)})}}})}),Rt.substr(1)},I.val=function(Rt){return Rt===void 0?this[0]&&rn(this[0]):this.each(function(ee,je){var Je=Dr.test(je.type),Et=Rt===null?Je?[]:"":Rt;Je&&_t(Et)?V(je.options,function(fe){fe.selected=Et.indexOf(fe.value)>=0}):je.value=Et})},I.clone=function(){return this.map(function(Rt,ee){return ee.cloneNode(!0)})},I.detach=function(){return this.each(function(Rt,ee){ee.parentNode&&ee.parentNode.removeChild(ee)})};var _e=/^\s*<(\w+)[^>]*>/,Zt=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,gr;function fr(){if(!gr){var Rt=we.createElement("table"),ee=we.createElement("tr");gr={"*":we.createElement("div"),tr:we.createElement("tbody"),td:ee,th:ee,thead:Rt,tbody:Rt,tfoot:Rt}}}function nn(Rt){if(fr(),!xt(Rt))return[];if(Zt.test(Rt))return[we.createElement(RegExp.$1)];var ee=_e.test(Rt)&&RegExp.$1,je=gr[ee]||gr["*"];return je.innerHTML=Rt,R(je.childNodes).detach().get()}R.parseHTML=nn,I.empty=function(){var Rt=this[0];if(Rt)for(;Rt.firstChild;)Rt.removeChild(Rt.firstChild);return this};function tn(Rt,ee,je){je?Rt.insertBefore(ee,Rt.childNodes[0]):Rt.appendChild(ee)}function wr(Rt,ee,je){if(ee!==void 0){var Je=xt(ee);!Je&&ee.length?V(ee,function(Et){return wr(Rt,Et,je)}):V(Rt,Je?function(Et){Et.insertAdjacentHTML(je?"afterbegin":"beforeend",ee)}:function(Et,fe){return tn(Et,fe?ee.cloneNode(!0):ee,je)})}}I.append=function(){var Rt=this;return V(arguments,function(ee){wr(Rt,ee)}),this},I.appendTo=function(Rt){return wr(R(Rt),this),this},I.html=function(Rt){if(Rt===void 0)return this[0]&&this[0].innerHTML;var ee=Rt.nodeType?Rt[0].outerHTML:Rt;return this.each(function(je,Je){Je.innerHTML=ee})},I.insertAfter=function(Rt){var ee=this;return R(Rt).each(function(je,Je){var Et=Je.parentNode;ee.each(function(fe,Pe){Et.insertBefore(je?Pe.cloneNode(!0):Pe,Je.nextSibling)})}),this},I.after=function(){var Rt=this;return V(mt.apply(arguments),function(ee){mt.apply(R(ee).slice()).insertAfter(Rt)}),this},I.insertBefore=function(Rt){var ee=this;return R(Rt).each(function(je,Je){var Et=Je.parentNode;ee.each(function(fe,Pe){Et.insertBefore(je?Pe.cloneNode(!0):Pe,Je)})}),this},I.before=function(){var Rt=this;return V(arguments,function(ee){R(ee).insertBefore(Rt)}),this},I.prepend=function(){var Rt=this;return V(arguments,function(ee){wr(Rt,ee,!0)}),this},I.prependTo=function(Rt){return wr(R(Rt),mt.apply(this.slice()),!0),this},I.remove=function(){return this.detach().off()},I.replaceWith=function(Rt){var ee=this;return this.each(function(je,Je){var Et=Je.parentNode;if(Et){var fe=je?R(Rt).clone():R(Rt);if(!fe[0])return ee.remove(),!1;Et.replaceChild(fe[0],Je),R(fe[0]).after(fe.slice(1))}})},I.replaceAll=function(Rt){return R(Rt).replaceWith(this),this},I.text=function(Rt){return Rt===void 0?this[0]?this[0].textContent:"":this.each(function(ee,je){je.textContent=Rt})};var tr=we&&we.documentElement;I.offset=function(){var Rt=this[0];if(Rt){var ee=Rt.getBoundingClientRect();return{top:ee.top+ke.pageYOffset-tr.clientTop,left:ee.left+ke.pageXOffset-tr.clientLeft}}},I.offsetParent=function(){return R(this[0]&&this[0].offsetParent)},I.position=function(){var Rt=this[0];if(Rt)return{left:Rt.offsetLeft,top:Rt.offsetTop}},I.children=function(Rt){var ee=[];return this.each(function(je,Je){q.apply(ee,Je.children)}),ee=R(Yt(ee)),Rt?ee.filter(function(je,Je){return X(Je,Rt)}):ee},I.contents=function(){var Rt=[];return this.each(function(ee,je){q.apply(Rt,je.tagName==="IFRAME"?[je.contentDocument]:je.childNodes)}),R(Rt.length&&Yt(Rt))},I.find=function(Rt){for(var ee=[],je=0,Je=this.length;je<Je;je++){var Et=dt(Rt,this[je]);Et.length&&q.apply(ee,Et)}return R(ee.length&&Yt(ee))},I.has=function(Rt){var ee=xt(Rt)?function(je,Je){return!!dt(Rt,Je).length}:function(je,Je){return Je.contains(Rt)};return this.filter(ee)},I.is=function(Rt){if(!Rt||!this[0])return!1;var ee=W(Rt),je=!1;return this.each(function(Je,Et){return je=ee(Je,Et,Rt),!je}),je},I.next=function(){return R(this[0]&&this[0].nextElementSibling)},I.not=function(Rt){if(!Rt||!this[0])return this;var ee=W(Rt);return this.filter(function(je,Je){return!ee(je,Je,Rt)})},I.parent=function(){var Rt=[];return this.each(function(ee,je){je&&je.parentNode&&Rt.push(je.parentNode)}),R(Yt(Rt))},I.index=function(Rt){var ee=Rt?R(Rt)[0]:this[0],je=Rt?this:R(ee).parent().children();return ft.call(je,ee)},I.closest=function(Rt){return!Rt||!this[0]?R():this.is(Rt)?this.filter(Rt):this.parent().closest(Rt)},I.parents=function(Rt){var ee=[],je;return this.each(function(Je,Et){for(je=Et;je&&je.parentNode&&je!==we.body.parentNode;)je=je.parentNode,(!Rt||Rt&&X(je,Rt))&&ee.push(je)}),R(Yt(ee))},I.prev=function(){return R(this[0]&&this[0].previousElementSibling)},I.siblings=function(){var Rt=this[0];return this.parent().children().filter(function(ee,je){return je!==Rt})};const Un=R},491:(wt,pe,Te)=>{Te.d(pe,{$Q:()=>ct,BM:()=>N,FW:()=>st,G1:()=>ft,GX:()=>U,L_:()=>q,Mx:()=>Ot,R3:()=>vt,S1:()=>Ne,SJ:()=>I,Ut:()=>V,VB:()=>tt,Vb:()=>W,cx:()=>mt,dL:()=>B,hy:()=>It,kl:()=>xt,nB:()=>$t,o5:()=>F,on:()=>Yt,pn:()=>k,r$:()=>Q,rw:()=>H,sE:()=>K,sN:()=>X,t3:()=>R,ut:()=>dt});var we=Te(50),ke=function(et,Tt,jt){if(jt||arguments.length===2)for(var zt=0,Ht=Tt.length,Dt;zt<Ht;zt++)(Dt||!(zt in Tt))&&(Dt||(Dt=Array.prototype.slice.call(Tt,0,zt)),Dt[zt]=Tt[zt]);return et.concat(Dt||Array.prototype.slice.call(Tt))},Jt="tag",Kt="attributes",ft="transitionend oTransitionEnd transitionend webkitTransitionEnd",Ot=function(et){return(et==null?void 0:et.nodeType)===Node.DOCUMENT_NODE},q=function(et){var Tt=et&&et.parentNode;Tt&&Tt.removeChild(et)};function mt(){for(var et=[],Tt=0;Tt<arguments.length;Tt++)et[Tt]=arguments[Tt];var jt=Array.isArray(et[0])?et[0]:ke([],et,!0);return jt.filter(Boolean).join(" ")}var K=function(et,Tt){return et.querySelectorAll(Tt)},st=function(et,Tt){return Tt===void 0&&(Tt={}),et&&et.setAttribute&&(0,we.each)(Tt,function(jt,zt){return et.setAttribute(zt,jt)})},k=function(et){var Tt;return et&&!!(et.offsetWidth||et.offsetHeight||!((Tt=et.getClientRects)===null||Tt===void 0)&&Tt.call(et).length)},B=function(et,Tt){var jt;(jt=et.parentNode)===null||jt===void 0||jt.replaceChild(Tt,et)},ct=function(et,Tt,jt){var zt=et.childNodes,Ht=zt.length,Dt=(0,we.isUndefined)(jt)?Ht:jt;(0,we.isString)(Tt)&&(et.insertAdjacentHTML("beforeEnd",Tt),Tt=et.lastChild,et.removeChild(Tt)),Dt>=Ht?et.appendChild(Tt):et.insertBefore(Tt,zt[Dt])},vt=function(et,Tt){return ct(et,Tt)},dt=function(et,Tt,jt){Tt===void 0&&(Tt={});var zt=document.createElement(et);return Tt&&(0,we.each)(Tt,function(Ht,Dt){return zt.setAttribute(Dt,Ht)}),jt&&((0,we.isString)(jt)?zt.innerHTML=jt:zt.appendChild(jt)),zt},H=function(et){return document.createTextNode(et)},R=function(et,Tt){var jt,zt=et.type;try{jt=new window[Tt](zt,et)}catch{jt=document.createEvent(Tt),jt.initEvent(zt,!0,!0)}return jt._parentEvent=et,zt.indexOf("key")===0&&(jt.keyCodeVal=et.keyCode,["keyCode","which"].forEach(function(Ht){Object.defineProperty(jt,Ht,{get:function(){return this.keyCodeVal}})})),jt},I=function(et,Tt){Tt===void 0&&(Tt=[]);var jt=Array.isArray(Tt)?Tt:[Tt];jt.forEach(function(zt){var Ht=zt[Jt]||"div",Dt=zt[Kt]||{},St=document.createElement(Ht);(0,we.each)(Dt,function(Vt,Me){St.setAttribute(Me,Vt)}),et.appendChild(St)})},N=function(et){return(et==null?void 0:et.nodeType)===Node.TEXT_NODE},$=function(et){return(et==null?void 0:et.nodeType)===Node.COMMENT_NODE},F=function(et){return et&&!N(et)&&!$(et)},V=function(et){var Tt={top:0,left:0,width:0,height:0};if(!et)return Tt;var jt;if(N(et)){var zt=document.createRange();zt.selectNode(et),jt=zt.getBoundingClientRect(),zt.detach()}return jt||(et.getBoundingClientRect?et.getBoundingClientRect():Tt)},U=function(et){var Tt=(et==null?void 0:et.ownerDocument)||document,jt=Tt.documentElement,zt=Tt.defaultView||window;return{x:(zt.pageXOffset||jt.scrollLeft||0)-(jt.clientLeft||0),y:(zt.pageYOffset||jt.scrollTop||0)-(jt.clientTop||0)}},it=function(et){return et.which||et.keyCode},X=function(et){return String.fromCharCode(it(et))},tt=function(et){return et.touches&&et.touches[0]?et.touches[0]:et},xt=function(et){return it(et)===27},Q=function(et){return it(et)===13},_t=function(et){return et.ctrlKey},W=function(et){return _t(et)||et.metaKey},It=function(et){if(!et)return"";var Tt=et.name,jt=et.publicId,zt=et.systemId,Ht=jt?' PUBLIC "'.concat(jt,'"'):"",Dt=!jt&&zt?' SYSTEM "'.concat(zt,'"'):"";return"<!DOCTYPE ".concat(Tt).concat(Ht).concat(Dt,">")},$t=function(et){et===void 0&&(et={});var Tt=[];return(0,we.each)(et,function(jt,zt){return Tt.push("".concat(zt,'="').concat(jt,'"'))}),Tt.join(" ")},Yt=function(et,Tt,jt,zt){var Ht=Tt.split(/\s+/),Dt=(0,we.isArray)(et)?et:[et];Ht.forEach(function(St){Dt.forEach(function(Vt){return Vt==null?void 0:Vt.addEventListener(St,jt,zt)})})},Ne=function(et,Tt,jt,zt){var Ht=Tt.split(/\s+/),Dt=(0,we.isArray)(et)?et:[et];Ht.forEach(function(St){Dt.forEach(function(Vt){return Vt==null?void 0:Vt.removeEventListener(St,jt,zt)})})}},163:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{appendStyles:()=>H,buildBase64UrlFromSvg:()=>Ht,camelCase:()=>$,capitalize:()=>It,createId:()=>zt,deepMerge:()=>xt,escape:()=>X,escapeNodeContent:()=>tt,find:()=>it,getComponentModel:()=>Tt,getComponentView:()=>et,getElement:()=>U,getGlobal:()=>k,getModel:()=>Q,getUiClass:()=>dt,getUnitFromValue:()=>I,getViewEl:()=>Yt,hasDnd:()=>V,hasWin:()=>st,isBultInMethod:()=>Ot,isComponent:()=>Ne,isDef:()=>K,isEmptyObj:()=>W,isObject:()=>_t,isRule:()=>$t,matches:()=>vt,normalizeFloat:()=>F,normalizeKey:()=>q,setViewEl:()=>jt,shallowDiff:()=>R,toLowerCase:()=>B,upFirst:()=>N,wait:()=>mt});var we=Te(50),ke=Te(491),Jt=function(){return Jt=Object.assign||function(Dt){for(var St,Vt=1,Me=arguments.length;Vt<Me;Vt++){St=arguments[Vt];for(var de in St)Object.prototype.hasOwnProperty.call(St,de)&&(Dt[de]=St[de])}return Dt},Jt.apply(this,arguments)},Kt=function(Dt,St,Vt){if(Vt||arguments.length===2)for(var Me=0,de=St.length,Le;Me<de;Me++)(Le||!(Me in St))&&(Le||(Le=Array.prototype.slice.call(St,0,Me)),Le[Me]=St[Me]);return Dt.concat(Le||Array.prototype.slice.call(St))},ft={},Ot=function(Dt){return(0,we.isFunction)(ft[Dt])},q=function(Dt){return Ot(Dt)?"_".concat(Dt):Dt},mt=function(Dt){return Dt===void 0&&(Dt=0),new Promise(function(St){return setTimeout(St,Dt)})},K=function(Dt){return typeof Dt<"u"},st=function(){return typeof window<"u"},k=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:Te.g},B=function(Dt){return(Dt||"").toLowerCase()},ct=st()?window.Element.prototype:{},vt=ct.matches||ct.webkitMatchesSelector||ct.mozMatchesSelector||ct.msMatchesSelector,dt=function(Dt,St){var Vt=Dt.getConfig(),Me=Vt.stylePrefix,de=Vt.customUI;return[de&&"".concat(Me,"cui"),St].filter(function(Le){return Le}).join(" ")},H=function(Dt,St){St===void 0&&(St={});var Vt=(0,we.isArray)(Dt)?Kt([],Dt,!0):[Dt];if(Vt.length){var Me=Vt.shift();if(Me&&(!St.unique||!document.querySelector('link[href="'.concat(Me,'"]')))){var de=document.head,Le=document.createElement("link");Le.href=Me,Le.rel="stylesheet",St.prepand?de.insertBefore(Le,de.firstChild):de.appendChild(Le)}H(Vt)}},R=function(Dt,St){var Vt={},Me=(0,we.keys)(St);for(var de in Dt)if(Dt.hasOwnProperty(de)){var Le=Dt[de],ar=St[de];Me.indexOf(de)>=0?Le!==ar&&(Vt[de]=ar):Vt[de]=null}for(var de in St)St.hasOwnProperty(de)&&(0,we.isUndefined)(Dt[de])&&(Vt[de]=St[de]);return Vt},I=function(Dt){return Dt.replace(parseFloat(Dt),"")},N=function(Dt){return Dt[0].toUpperCase()+Dt.toLowerCase().slice(1)},$=function(Dt){return Dt.replace(/-./g,function(St){return St[1].toUpperCase()})},F=function(Dt,St,Vt){St===void 0&&(St=1),Vt===void 0&&(Vt=0);var Me=0;if(isNaN(Dt))return Vt;if(Dt=parseFloat(Dt),Math.floor(Dt)!==Dt){var de=St.toString().split(".")[1];Me=de?de.length:0}return Me?parseFloat(Dt.toFixed(Me)):Dt},V=function(Dt){return"draggable"in document.createElement("i")&&(Dt?Dt.config.nativeDnD:!0)},U=function(Dt){if((0,we.isElement)(Dt)||(0,ke.BM)(Dt))return Dt;if(Dt&&Dt.getEl)return Dt.getEl()},it=function(Dt,St){var Vt=null;return Dt.some(function(Me,de){return St(Me,de,Dt)?(Vt=Me,1):0}),Vt},X=function(Dt){return Dt===void 0&&(Dt=""),"".concat(Dt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},tt=function(Dt){return Dt===void 0&&(Dt=""),"".concat(Dt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},xt=function(){for(var Dt=[],St=0;St<arguments.length;St++)Dt[St]=arguments[St];for(var Vt=Jt({},Dt[0]),Me=1;Me<Dt.length;Me++){var de=Jt({},Dt[Me]);for(var Le in de){var ar=Vt[Le],Er=de[Le];_t(ar)&&_t(Er)?Vt[Le]=xt(ar,Er):Vt[Le]=Er}}return Vt},Q=function(Dt,St){var Vt;return!St&&Dt&&Dt.__cashData?Vt=Dt.__cashData.model:St&&(0,we.isElement)(Dt)&&(Vt=St(Dt).data("model")),Vt},_t=function(Dt){return Dt&&!Array.isArray(Dt)&&typeof Dt=="object"},W=function(Dt){return Object.keys(Dt).length<=0},It=function(Dt){return Dt===void 0&&(Dt=""),Dt&&Dt.charAt(0).toUpperCase()+Dt.substring(1)},$t=function(Dt){return Dt&&Dt.toCSS},Yt=function(Dt){return Dt==null?void 0:Dt.__gjsv},Ne=function(Dt){return!!(Dt!=null&&Dt.toHTML)},et=function(Dt){return Yt(Dt)},Tt=function(Dt){var St;return(St=et(Dt))===null||St===void 0?void 0:St.model},jt=function(Dt,St){Dt.__gjsv=St},zt=function(Dt){Dt===void 0&&(Dt=16);for(var St="",Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Me=Vt.length,de=0;de<Dt;de++)St+=Vt.charAt(Math.floor(Math.random()*Me));return St},Ht=function(Dt){if(Dt&&Dt.substr(0,4)==="<svg"){var St="";return st()?St=window.btoa(Dt):typeof Buffer<"u"&&(St=Buffer.from(Dt,"utf8").toString("base64")),St?"data:image/svg+xml;base64,".concat(St):Dt}return Dt}},828:(wt,pe,Te)=>{var we={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function ke(Kt){var ft=Jt(Kt);return Te(ft)}function Jt(Kt){if(!Te.o(we,Kt)){var ft=new Error("Cannot find module '"+Kt+"'");throw ft.code="MODULE_NOT_FOUND",ft}return we[Kt]}ke.keys=function(){return Object.keys(we)},ke.resolve=Jt,wt.exports=ke,ke.id=828},50:(wt,pe,Te)=>{Te.r(pe),Te.d(pe,{VERSION:()=>ke,after:()=>Ns,all:()=>ci,allKeys:()=>gr,any:()=>Gn,assign:()=>lo,before:()=>ts,bind:()=>ol,bindAll:()=>xa,chain:()=>Wn,chunk:()=>ms,clone:()=>Yo,collect:()=>Zo,compact:()=>wc,compose:()=>Ha,constant:()=>Xe,contains:()=>pn,countBy:()=>Fs,create:()=>In,debounce:()=>qi,default:()=>ua,defaults:()=>ho,defer:()=>al,delay:()=>Go,detect:()=>Yi,difference:()=>Ua,drop:()=>ri,each:()=>Ci,escape:()=>pr,every:()=>ci,extend:()=>Dn,extendOwn:()=>lo,filter:()=>Do,find:()=>Yi,findIndex:()=>Vs,findKey:()=>Ba,findLastIndex:()=>Ki,findWhere:()=>sl,first:()=>os,flatten:()=>rc,foldl:()=>vs,foldr:()=>sn,forEach:()=>Ci,functions:()=>Wr,get:()=>So,groupBy:()=>rs,has:()=>Gi,head:()=>os,identity:()=>Wo,include:()=>pn,includes:()=>pn,indexBy:()=>Ro,indexOf:()=>hs,initial:()=>Il,inject:()=>vs,intersection:()=>sa,invert:()=>Cr,invoke:()=>ui,isArguments:()=>Nr,isArray:()=>Le,isArrayBuffer:()=>et,isBoolean:()=>tt,isDataView:()=>de,isDate:()=>It,isElement:()=>xt,isEmpty:()=>Dr,isEqual:()=>Zt,isError:()=>Yt,isFinite:()=>Ar,isFunction:()=>zt,isMap:()=>je,isMatch:()=>rn,isNaN:()=>Fr,isNull:()=>it,isNumber:()=>W,isObject:()=>U,isRegExp:()=>$t,isSet:()=>Et,isString:()=>_t,isSymbol:()=>Ne,isTypedArray:()=>le,isUndefined:()=>X,isWeakMap:()=>Je,isWeakSet:()=>fe,iteratee:()=>co,keys:()=>er,last:()=>Jo,lastIndexOf:()=>gs,map:()=>Zo,mapObject:()=>Lo,matcher:()=>Mo,matches:()=>Mo,max:()=>ia,memoize:()=>il,methods:()=>Wr,min:()=>wi,mixin:()=>ca,negate:()=>yi,noop:()=>fn,now:()=>rt,object:()=>ni,omit:()=>cl,once:()=>Ca,pairs:()=>Ye,partial:()=>Vo,partition:()=>Xo,pick:()=>aa,pluck:()=>Ii,property:()=>ao,propertyOf:()=>Oo,random:()=>En,range:()=>la,reduce:()=>vs,reduceRight:()=>sn,reject:()=>li,rest:()=>ri,restArguments:()=>V,result:()=>en,sample:()=>fi,select:()=>Do,shuffle:()=>ll,size:()=>Ni,some:()=>Gn,sortBy:()=>Dl,sortedIndex:()=>ka,tail:()=>ri,take:()=>os,tap:()=>go,template:()=>Yr,templateSettings:()=>Nn,throttle:()=>oa,times:()=>bo,toArray:()=>es,toPath:()=>Fo,transpose:()=>is,unescape:()=>wn,union:()=>pi,uniq:()=>Bi,unique:()=>Bi,uniqueId:()=>Mr,unzip:()=>is,values:()=>Pe,where:()=>Hi,without:()=>_c,wrap:()=>si,zip:()=>nc});var we={};Te.r(we),Te.d(we,{VERSION:()=>ke,after:()=>Ns,all:()=>ci,allKeys:()=>gr,any:()=>Gn,assign:()=>lo,before:()=>ts,bind:()=>ol,bindAll:()=>xa,chain:()=>Wn,chunk:()=>ms,clone:()=>Yo,collect:()=>Zo,compact:()=>wc,compose:()=>Ha,constant:()=>Xe,contains:()=>pn,countBy:()=>Fs,create:()=>In,debounce:()=>qi,default:()=>Xi,defaults:()=>ho,defer:()=>al,delay:()=>Go,detect:()=>Yi,difference:()=>Ua,drop:()=>ri,each:()=>Ci,escape:()=>pr,every:()=>ci,extend:()=>Dn,extendOwn:()=>lo,filter:()=>Do,find:()=>Yi,findIndex:()=>Vs,findKey:()=>Ba,findLastIndex:()=>Ki,findWhere:()=>sl,first:()=>os,flatten:()=>rc,foldl:()=>vs,foldr:()=>sn,forEach:()=>Ci,functions:()=>Wr,get:()=>So,groupBy:()=>rs,has:()=>Gi,head:()=>os,identity:()=>Wo,include:()=>pn,includes:()=>pn,indexBy:()=>Ro,indexOf:()=>hs,initial:()=>Il,inject:()=>vs,intersection:()=>sa,invert:()=>Cr,invoke:()=>ui,isArguments:()=>Nr,isArray:()=>Le,isArrayBuffer:()=>et,isBoolean:()=>tt,isDataView:()=>de,isDate:()=>It,isElement:()=>xt,isEmpty:()=>Dr,isEqual:()=>Zt,isError:()=>Yt,isFinite:()=>Ar,isFunction:()=>zt,isMap:()=>je,isMatch:()=>rn,isNaN:()=>Fr,isNull:()=>it,isNumber:()=>W,isObject:()=>U,isRegExp:()=>$t,isSet:()=>Et,isString:()=>_t,isSymbol:()=>Ne,isTypedArray:()=>le,isUndefined:()=>X,isWeakMap:()=>Je,isWeakSet:()=>fe,iteratee:()=>co,keys:()=>er,last:()=>Jo,lastIndexOf:()=>gs,map:()=>Zo,mapObject:()=>Lo,matcher:()=>Mo,matches:()=>Mo,max:()=>ia,memoize:()=>il,methods:()=>Wr,min:()=>wi,mixin:()=>ca,negate:()=>yi,noop:()=>fn,now:()=>rt,object:()=>ni,omit:()=>cl,once:()=>Ca,pairs:()=>Ye,partial:()=>Vo,partition:()=>Xo,pick:()=>aa,pluck:()=>Ii,property:()=>ao,propertyOf:()=>Oo,random:()=>En,range:()=>la,reduce:()=>vs,reduceRight:()=>sn,reject:()=>li,rest:()=>ri,restArguments:()=>V,result:()=>en,sample:()=>fi,select:()=>Do,shuffle:()=>ll,size:()=>Ni,some:()=>Gn,sortBy:()=>Dl,sortedIndex:()=>ka,tail:()=>ri,take:()=>os,tap:()=>go,template:()=>Yr,templateSettings:()=>Nn,throttle:()=>oa,times:()=>bo,toArray:()=>es,toPath:()=>Fo,transpose:()=>is,unescape:()=>wn,union:()=>pi,uniq:()=>Bi,unique:()=>Bi,uniqueId:()=>Mr,unzip:()=>is,values:()=>Pe,where:()=>Hi,without:()=>_c,wrap:()=>si,zip:()=>nc});var ke="1.13.6",Jt=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Kt=Array.prototype,ft=Object.prototype,Ot=typeof Symbol<"u"?Symbol.prototype:null,q=Kt.push,mt=Kt.slice,K=ft.toString,st=ft.hasOwnProperty,k=typeof ArrayBuffer<"u",B=typeof DataView<"u",ct=Array.isArray,vt=Object.keys,dt=Object.create,H=k&&ArrayBuffer.isView,R=isNaN,I=isFinite,N=!{toString:null}.propertyIsEnumerable("toString"),$=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=Math.pow(2,53)-1;function V(gt,Nt){return Nt=Nt==null?gt.length-1:+Nt,function(){for(var he=Math.max(arguments.length-Nt,0),Oe=Array(he),Be=0;Be<he;Be++)Oe[Be]=arguments[Be+Nt];switch(Nt){case 0:return gt.call(this,Oe);case 1:return gt.call(this,arguments[0],Oe);case 2:return gt.call(this,arguments[0],arguments[1],Oe)}var Re=Array(Nt+1);for(Be=0;Be<Nt;Be++)Re[Be]=arguments[Be];return Re[Nt]=Oe,gt.apply(this,Re)}}function U(gt){var Nt=typeof gt;return Nt==="function"||Nt==="object"&&!!gt}function it(gt){return gt===null}function X(gt){return gt===void 0}function tt(gt){return gt===!0||gt===!1||K.call(gt)==="[object Boolean]"}function xt(gt){return!!(gt&&gt.nodeType===1)}function Q(gt){var Nt="[object "+gt+"]";return function(he){return K.call(he)===Nt}}const _t=Q("String"),W=Q("Number"),It=Q("Date"),$t=Q("RegExp"),Yt=Q("Error"),Ne=Q("Symbol"),et=Q("ArrayBuffer");var Tt=Q("Function"),jt=Jt.document&&Jt.document.childNodes;typeof Int8Array!="object"&&typeof jt!="function"&&(Tt=function(gt){return typeof gt=="function"||!1});const zt=Tt,Ht=Q("Object");var Dt=B&&Ht(new DataView(new ArrayBuffer(8))),St=typeof Map<"u"&&Ht(new Map),Vt=Q("DataView");function Me(gt){return gt!=null&&zt(gt.getInt8)&&et(gt.buffer)}const de=Dt?Me:Vt,Le=ct||Q("Array");function ar(gt,Nt){return gt!=null&&st.call(gt,Nt)}var Er=Q("Arguments");(function(){Er(arguments)||(Er=function(gt){return ar(gt,"callee")})})();const Nr=Er;function Ar(gt){return!Ne(gt)&&I(gt)&&!isNaN(parseFloat(gt))}function Fr(gt){return W(gt)&&R(gt)}function Xe(gt){return function(){return gt}}function at(gt){return function(Nt){var he=gt(Nt);return typeof he=="number"&&he>=0&&he<=F}}function kt(gt){return function(Nt){return Nt==null?void 0:Nt[gt]}}const Gt=kt("byteLength"),ye=at(Gt);var Ae=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function pt(gt){return H?H(gt)&&!de(gt):ye(gt)&&Ae.test(K.call(gt))}const le=k?pt:Xe(!1),se=kt("length");function or(gt){for(var Nt={},he=gt.length,Oe=0;Oe<he;++Oe)Nt[gt[Oe]]=!0;return{contains:function(Be){return Nt[Be]===!0},push:function(Be){return Nt[Be]=!0,gt.push(Be)}}}function mr(gt,Nt){Nt=or(Nt);var he=$.length,Oe=gt.constructor,Be=zt(Oe)&&Oe.prototype||ft,Re="constructor";for(ar(gt,Re)&&!Nt.contains(Re)&&Nt.push(Re);he--;)Re=$[he],Re in gt&&gt[Re]!==Be[Re]&&!Nt.contains(Re)&&Nt.push(Re)}function er(gt){if(!U(gt))return[];if(vt)return vt(gt);var Nt=[];for(var he in gt)ar(gt,he)&&Nt.push(he);return N&&mr(gt,Nt),Nt}function Dr(gt){if(gt==null)return!0;var Nt=se(gt);return typeof Nt=="number"&&(Le(gt)||_t(gt)||Nr(gt))?Nt===0:se(er(gt))===0}function rn(gt,Nt){var he=er(Nt),Oe=he.length;if(gt==null)return!Oe;for(var Be=Object(gt),Re=0;Re<Oe;Re++){var hr=he[Re];if(Nt[hr]!==Be[hr]||!(hr in Be))return!1}return!0}function yt(gt){if(gt instanceof yt)return gt;if(!(this instanceof yt))return new yt(gt);this._wrapped=gt}yt.VERSION=ke,yt.prototype.value=function(){return this._wrapped},yt.prototype.valueOf=yt.prototype.toJSON=yt.prototype.value,yt.prototype.toString=function(){return String(this._wrapped)};function Wt(gt){return new Uint8Array(gt.buffer||gt,gt.byteOffset||0,Gt(gt))}var ne="[object DataView]";function Ft(gt,Nt,he,Oe){if(gt===Nt)return gt!==0||1/gt===1/Nt;if(gt==null||Nt==null)return!1;if(gt!==gt)return Nt!==Nt;var Be=typeof gt;return Be!=="function"&&Be!=="object"&&typeof Nt!="object"?!1:_e(gt,Nt,he,Oe)}function _e(gt,Nt,he,Oe){gt instanceof yt&&(gt=gt._wrapped),Nt instanceof yt&&(Nt=Nt._wrapped);var Be=K.call(gt);if(Be!==K.call(Nt))return!1;if(Dt&&Be=="[object Object]"&&de(gt)){if(!de(Nt))return!1;Be=ne}switch(Be){case"[object RegExp]":case"[object String]":return""+gt==""+Nt;case"[object Number]":return+gt!=+gt?+Nt!=+Nt:+gt==0?1/+gt===1/Nt:+gt==+Nt;case"[object Date]":case"[object Boolean]":return+gt==+Nt;case"[object Symbol]":return Ot.valueOf.call(gt)===Ot.valueOf.call(Nt);case"[object ArrayBuffer]":case ne:return _e(Wt(gt),Wt(Nt),he,Oe)}var Re=Be==="[object Array]";if(!Re&&le(gt)){var hr=Gt(gt);if(hr!==Gt(Nt))return!1;if(gt.buffer===Nt.buffer&&gt.byteOffset===Nt.byteOffset)return!0;Re=!0}if(!Re){if(typeof gt!="object"||typeof Nt!="object")return!1;var Ir=gt.constructor,lt=Nt.constructor;if(Ir!==lt&&!(zt(Ir)&&Ir instanceof Ir&&zt(lt)&&lt instanceof lt)&&"constructor"in gt&&"constructor"in Nt)return!1}he=he||[],Oe=Oe||[];for(var Lt=he.length;Lt--;)if(he[Lt]===gt)return Oe[Lt]===Nt;if(he.push(gt),Oe.push(Nt),Re){if(Lt=gt.length,Lt!==Nt.length)return!1;for(;Lt--;)if(!Ft(gt[Lt],Nt[Lt],he,Oe))return!1}else{var ce=er(gt),me;if(Lt=ce.length,er(Nt).length!==Lt)return!1;for(;Lt--;)if(me=ce[Lt],!(ar(Nt,me)&&Ft(gt[me],Nt[me],he,Oe)))return!1}return he.pop(),Oe.pop(),!0}function Zt(gt,Nt){return Ft(gt,Nt)}function gr(gt){if(!U(gt))return[];var Nt=[];for(var he in gt)Nt.push(he);return N&&mr(gt,Nt),Nt}function fr(gt){var Nt=se(gt);return function(he){if(he==null)return!1;var Oe=gr(he);if(se(Oe))return!1;for(var Be=0;Be<Nt;Be++)if(!zt(he[gt[Be]]))return!1;return gt!==Rt||!zt(he[nn])}}var nn="forEach",tn="has",wr=["clear","delete"],tr=["get",tn,"set"],Un=wr.concat(nn,tr),Rt=wr.concat(tr),ee=["add"].concat(wr,nn,tn);const je=St?fr(Un):Q("Map"),Je=St?fr(Rt):Q("WeakMap"),Et=St?fr(ee):Q("Set"),fe=Q("WeakSet");function Pe(gt){for(var Nt=er(gt),he=Nt.length,Oe=Array(he),Be=0;Be<he;Be++)Oe[Be]=gt[Nt[Be]];return Oe}function Ye(gt){for(var Nt=er(gt),he=Nt.length,Oe=Array(he),Be=0;Be<he;Be++)Oe[Be]=[Nt[Be],gt[Nt[Be]]];return Oe}function Cr(gt){for(var Nt={},he=er(gt),Oe=0,Be=he.length;Oe<Be;Oe++)Nt[gt[he[Oe]]]=he[Oe];return Nt}function Wr(gt){var Nt=[];for(var he in gt)zt(gt[he])&&Nt.push(he);return Nt.sort()}function zn(gt,Nt){return function(he){var Oe=arguments.length;if(Nt&&(he=Object(he)),Oe<2||he==null)return he;for(var Be=1;Be<Oe;Be++)for(var Re=arguments[Be],hr=gt(Re),Ir=hr.length,lt=0;lt<Ir;lt++){var Lt=hr[lt];(!Nt||he[Lt]===void 0)&&(he[Lt]=Re[Lt])}return he}}const Dn=zn(gr),lo=zn(er),ho=zn(gr,!0);function vn(){return function(){}}function ro(gt){if(!U(gt))return{};if(dt)return dt(gt);var Nt=vn();Nt.prototype=gt;var he=new Nt;return Nt.prototype=null,he}function In(gt,Nt){var he=ro(gt);return Nt&&lo(he,Nt),he}function Yo(gt){return U(gt)?Le(gt)?gt.slice():Dn({},gt):gt}function go(gt,Nt){return Nt(gt),gt}function Fo(gt){return Le(gt)?gt:[gt]}yt.toPath=Fo;function Co(gt){return yt.toPath(gt)}function yo(gt,Nt){for(var he=Nt.length,Oe=0;Oe<he;Oe++){if(gt==null)return;gt=gt[Nt[Oe]]}return he?gt:void 0}function So(gt,Nt,he){var Oe=yo(gt,Co(Nt));return X(Oe)?he:Oe}function Gi(gt,Nt){Nt=Co(Nt);for(var he=Nt.length,Oe=0;Oe<he;Oe++){var Be=Nt[Oe];if(!ar(gt,Be))return!1;gt=gt[Be]}return!!he}function Wo(gt){return gt}function Mo(gt){return gt=lo({},gt),function(Nt){return rn(Nt,gt)}}function ao(gt){return gt=Co(gt),function(Nt){return yo(Nt,gt)}}function Xn(gt,Nt,he){if(Nt===void 0)return gt;switch(he??3){case 1:return function(Oe){return gt.call(Nt,Oe)};case 3:return function(Oe,Be,Re){return gt.call(Nt,Oe,Be,Re)};case 4:return function(Oe,Be,Re,hr){return gt.call(Nt,Oe,Be,Re,hr)}}return function(){return gt.apply(Nt,arguments)}}function $r(gt,Nt,he){return gt==null?Wo:zt(gt)?Xn(gt,Nt,he):U(gt)&&!Le(gt)?Mo(gt):ao(gt)}function co(gt,Nt){return $r(gt,Nt,1/0)}yt.iteratee=co;function Jn(gt,Nt,he){return yt.iteratee!==co?yt.iteratee(gt,Nt):$r(gt,Nt,he)}function Lo(gt,Nt,he){Nt=Jn(Nt,he);for(var Oe=er(gt),Be=Oe.length,Re={},hr=0;hr<Be;hr++){var Ir=Oe[hr];Re[Ir]=Nt(gt[Ir],Ir,gt)}return Re}function fn(){}function Oo(gt){return gt==null?fn:function(Nt){return So(gt,Nt)}}function bo(gt,Nt,he){var Oe=Array(Math.max(0,gt));Nt=Xn(Nt,he,1);for(var Be=0;Be<gt;Be++)Oe[Be]=Nt(Be);return Oe}function En(gt,Nt){return Nt==null&&(Nt=gt,gt=0),gt+Math.floor(Math.random()*(Nt-gt+1))}const rt=Date.now||function(){return new Date().getTime()};function Xt(gt){var Nt=function(Re){return gt[Re]},he="(?:"+er(gt).join("|")+")",Oe=RegExp(he),Be=RegExp(he,"g");return function(Re){return Re=Re==null?"":""+Re,Oe.test(Re)?Re.replace(Be,Nt):Re}}const ir={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},pr=Xt(ir),Hr=Cr(ir),wn=Xt(Hr),Nn=yt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Xr=/(.)^/,cr={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Mt=/\\|'|\r|\n|\u2028|\u2029/g;function xe(gt){return"\\"+cr[gt]}var lr=/^\s*(\w|\$)+\s*$/;function Yr(gt,Nt,he){!Nt&&he&&(Nt=he),Nt=ho({},Nt,yt.templateSettings);var Oe=RegExp([(Nt.escape||Xr).source,(Nt.interpolate||Xr).source,(Nt.evaluate||Xr).source].join("|")+"|$","g"),Be=0,Re="__p+='";gt.replace(Oe,function(Lt,ce,me,We,Ve){return Re+=gt.slice(Be,Ve).replace(Mt,xe),Be=Ve+Lt.length,ce?Re+=`'+
((__t=(`+ce+`))==null?'':_.escape(__t))+
'`:me?Re+=`'+
((__t=(`+me+`))==null?'':__t)+
'`:We&&(Re+=`';
`+We+`
__p+='`),Lt}),Re+=`';
`;var hr=Nt.variable;if(hr){if(!lr.test(hr))throw new Error("variable is not a bare identifier: "+hr)}else Re=`with(obj||{}){
`+Re+`}
`,hr="obj";Re=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Re+`return __p;
`;var Ir;try{Ir=new Function(hr,"_",Re)}catch(Lt){throw Lt.source=Re,Lt}var lt=function(Lt){return Ir.call(this,Lt,yt)};return lt.source="function("+hr+`){
`+Re+"}",lt}function en(gt,Nt,he){Nt=Co(Nt);var Oe=Nt.length;if(!Oe)return zt(he)?he.call(gt):he;for(var Be=0;Be<Oe;Be++){var Re=gt==null?void 0:gt[Nt[Be]];Re===void 0&&(Re=he,Be=Oe),gt=zt(Re)?Re.call(gt):Re}return gt}var gn=0;function Mr(gt){var Nt=++gn+"";return gt?gt+Nt:Nt}function Wn(gt){var Nt=yt(gt);return Nt._chain=!0,Nt}function wo(gt,Nt,he,Oe,Be){if(!(Oe instanceof Nt))return gt.apply(he,Be);var Re=ro(gt.prototype),hr=gt.apply(Re,Be);return U(hr)?hr:Re}var $o=V(function(gt,Nt){var he=$o.placeholder,Oe=function(){for(var Be=0,Re=Nt.length,hr=Array(Re),Ir=0;Ir<Re;Ir++)hr[Ir]=Nt[Ir]===he?arguments[Be++]:Nt[Ir];for(;Be<arguments.length;)hr.push(arguments[Be++]);return wo(gt,Oe,this,this,hr)};return Oe});$o.placeholder=yt;const Vo=$o,ol=V(function(gt,Nt,he){if(!zt(gt))throw new TypeError("Bind must be called on a function");var Oe=V(function(Be){return wo(gt,Oe,Nt,this,he.concat(Be))});return Oe}),jo=at(se);function Ra(gt,Nt,he,Oe){if(Oe=Oe||[],!Nt&&Nt!==0)Nt=1/0;else if(Nt<=0)return Oe.concat(gt);for(var Be=Oe.length,Re=0,hr=se(gt);Re<hr;Re++){var Ir=gt[Re];if(jo(Ir)&&(Le(Ir)||Nr(Ir)))if(Nt>1)Ra(Ir,Nt-1,he,Oe),Be=Oe.length;else for(var lt=0,Lt=Ir.length;lt<Lt;)Oe[Be++]=Ir[lt++];else he||(Oe[Be++]=Ir)}return Oe}const xa=V(function(gt,Nt){Nt=Ra(Nt,!1,!1);var he=Nt.length;if(he<1)throw new Error("bindAll must be passed function names");for(;he--;){var Oe=Nt[he];gt[Oe]=ol(gt[Oe],gt)}return gt});function il(gt,Nt){var he=function(Oe){var Be=he.cache,Re=""+(Nt?Nt.apply(this,arguments):Oe);return ar(Be,Re)||(Be[Re]=gt.apply(this,arguments)),Be[Re]};return he.cache={},he}const Go=V(function(gt,Nt,he){return setTimeout(function(){return gt.apply(null,he)},Nt)}),al=Vo(Go,yt,1);function oa(gt,Nt,he){var Oe,Be,Re,hr,Ir=0;he||(he={});var lt=function(){Ir=he.leading===!1?0:rt(),Oe=null,hr=gt.apply(Be,Re),Oe||(Be=Re=null)},Lt=function(){var ce=rt();!Ir&&he.leading===!1&&(Ir=ce);var me=Nt-(ce-Ir);return Be=this,Re=arguments,me<=0||me>Nt?(Oe&&(clearTimeout(Oe),Oe=null),Ir=ce,hr=gt.apply(Be,Re),Oe||(Be=Re=null)):!Oe&&he.trailing!==!1&&(Oe=setTimeout(lt,me)),hr};return Lt.cancel=function(){clearTimeout(Oe),Ir=0,Oe=Be=Re=null},Lt}function qi(gt,Nt,he){var Oe,Be,Re,hr,Ir,lt=function(){var ce=rt()-Be;Nt>ce?Oe=setTimeout(lt,Nt-ce):(Oe=null,he||(hr=gt.apply(Ir,Re)),Oe||(Re=Ir=null))},Lt=V(function(ce){return Ir=this,Re=ce,Be=rt(),Oe||(Oe=setTimeout(lt,Nt),he&&(hr=gt.apply(Ir,Re))),hr});return Lt.cancel=function(){clearTimeout(Oe),Oe=Re=Ir=null},Lt}function si(gt,Nt){return Vo(Nt,gt)}function yi(gt){return function(){return!gt.apply(this,arguments)}}function Ha(){var gt=arguments,Nt=gt.length-1;return function(){for(var he=Nt,Oe=gt[Nt].apply(this,arguments);he--;)Oe=gt[he].call(this,Oe);return Oe}}function Ns(gt,Nt){return function(){if(--gt<1)return Nt.apply(this,arguments)}}function ts(gt,Nt){var he;return function(){return--gt>0&&(he=Nt.apply(this,arguments)),gt<=1&&(Nt=null),he}}const Ca=Vo(ts,2);function Ba(gt,Nt,he){Nt=Jn(Nt,he);for(var Oe=er(gt),Be,Re=0,hr=Oe.length;Re<hr;Re++)if(Be=Oe[Re],Nt(gt[Be],Be,gt))return Be}function bi(gt){return function(Nt,he,Oe){he=Jn(he,Oe);for(var Be=se(Nt),Re=gt>0?0:Be-1;Re>=0&&Re<Be;Re+=gt)if(he(Nt[Re],Re,Nt))return Re;return-1}}const Vs=bi(1),Ki=bi(-1);function ka(gt,Nt,he,Oe){he=Jn(he,Oe,1);for(var Be=he(Nt),Re=0,hr=se(gt);Re<hr;){var Ir=Math.floor((Re+hr)/2);he(gt[Ir])<Be?Re=Ir+1:hr=Ir}return Re}function xi(gt,Nt,he){return function(Oe,Be,Re){var hr=0,Ir=se(Oe);if(typeof Re=="number")gt>0?hr=Re>=0?Re:Math.max(Re+Ir,hr):Ir=Re>=0?Math.min(Re+1,Ir):Re+Ir+1;else if(he&&Re&&Ir)return Re=he(Oe,Be),Oe[Re]===Be?Re:-1;if(Be!==Be)return Re=Nt(mt.call(Oe,hr,Ir),Fr),Re>=0?Re+hr:-1;for(Re=gt>0?hr:Ir-1;Re>=0&&Re<Ir;Re+=gt)if(Oe[Re]===Be)return Re;return-1}}const hs=xi(1,Vs,ka),gs=xi(-1,Ki);function Yi(gt,Nt,he){var Oe=jo(gt)?Vs:Ba,Be=Oe(gt,Nt,he);if(Be!==void 0&&Be!==-1)return gt[Be]}function sl(gt,Nt){return Yi(gt,Mo(Nt))}function Ci(gt,Nt,he){Nt=Xn(Nt,he);var Oe,Be;if(jo(gt))for(Oe=0,Be=gt.length;Oe<Be;Oe++)Nt(gt[Oe],Oe,gt);else{var Re=er(gt);for(Oe=0,Be=Re.length;Oe<Be;Oe++)Nt(gt[Re[Oe]],Re[Oe],gt)}return gt}function Zo(gt,Nt,he){Nt=Jn(Nt,he);for(var Oe=!jo(gt)&&er(gt),Be=(Oe||gt).length,Re=Array(Be),hr=0;hr<Be;hr++){var Ir=Oe?Oe[hr]:hr;Re[hr]=Nt(gt[Ir],Ir,gt)}return Re}function An(gt){var Nt=function(he,Oe,Be,Re){var hr=!jo(he)&&er(he),Ir=(hr||he).length,lt=gt>0?0:Ir-1;for(Re||(Be=he[hr?hr[lt]:lt],lt+=gt);lt>=0&&lt<Ir;lt+=gt){var Lt=hr?hr[lt]:lt;Be=Oe(Be,he[Lt],Lt,he)}return Be};return function(he,Oe,Be,Re){var hr=arguments.length>=3;return Nt(he,Xn(Oe,Re,4),Be,hr)}}const vs=An(1),sn=An(-1);function Do(gt,Nt,he){var Oe=[];return Nt=Jn(Nt,he),Ci(gt,function(Be,Re,hr){Nt(Be,Re,hr)&&Oe.push(Be)}),Oe}function li(gt,Nt,he){return Do(gt,yi(Jn(Nt)),he)}function ci(gt,Nt,he){Nt=Jn(Nt,he);for(var Oe=!jo(gt)&&er(gt),Be=(Oe||gt).length,Re=0;Re<Be;Re++){var hr=Oe?Oe[Re]:Re;if(!Nt(gt[hr],hr,gt))return!1}return!0}function Gn(gt,Nt,he){Nt=Jn(Nt,he);for(var Oe=!jo(gt)&&er(gt),Be=(Oe||gt).length,Re=0;Re<Be;Re++){var hr=Oe?Oe[Re]:Re;if(Nt(gt[hr],hr,gt))return!0}return!1}function pn(gt,Nt,he,Oe){return jo(gt)||(gt=Pe(gt)),(typeof he!="number"||Oe)&&(he=0),hs(gt,Nt,he)>=0}const ui=V(function(gt,Nt,he){var Oe,Be;return zt(Nt)?Be=Nt:(Nt=Co(Nt),Oe=Nt.slice(0,-1),Nt=Nt[Nt.length-1]),Zo(gt,function(Re){var hr=Be;if(!hr){if(Oe&&Oe.length&&(Re=yo(Re,Oe)),Re==null)return;hr=Re[Nt]}return hr==null?hr:hr.apply(Re,he)})});function Ii(gt,Nt){return Zo(gt,ao(Nt))}function Hi(gt,Nt){return Do(gt,Mo(Nt))}function ia(gt,Nt,he){var Oe=-1/0,Be=-1/0,Re,hr;if(Nt==null||typeof Nt=="number"&&typeof gt[0]!="object"&&gt!=null){gt=jo(gt)?gt:Pe(gt);for(var Ir=0,lt=gt.length;Ir<lt;Ir++)Re=gt[Ir],Re!=null&&Re>Oe&&(Oe=Re)}else Nt=Jn(Nt,he),Ci(gt,function(Lt,ce,me){hr=Nt(Lt,ce,me),(hr>Be||hr===-1/0&&Oe===-1/0)&&(Oe=Lt,Be=hr)});return Oe}function wi(gt,Nt,he){var Oe=1/0,Be=1/0,Re,hr;if(Nt==null||typeof Nt=="number"&&typeof gt[0]!="object"&&gt!=null){gt=jo(gt)?gt:Pe(gt);for(var Ir=0,lt=gt.length;Ir<lt;Ir++)Re=gt[Ir],Re!=null&&Re<Oe&&(Oe=Re)}else Nt=Jn(Nt,he),Ci(gt,function(Lt,ce,me){hr=Nt(Lt,ce,me),(hr<Be||hr===1/0&&Oe===1/0)&&(Oe=Lt,Be=hr)});return Oe}var Si=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function es(gt){return gt?Le(gt)?mt.call(gt):_t(gt)?gt.match(Si):jo(gt)?Zo(gt,Wo):Pe(gt):[]}function fi(gt,Nt,he){if(Nt==null||he)return jo(gt)||(gt=Pe(gt)),gt[En(gt.length-1)];var Oe=es(gt),Be=se(Oe);Nt=Math.max(Math.min(Nt,Be),0);for(var Re=Be-1,hr=0;hr<Nt;hr++){var Ir=En(hr,Re),lt=Oe[hr];Oe[hr]=Oe[Ir],Oe[Ir]=lt}return Oe.slice(0,Nt)}function ll(gt){return fi(gt,1/0)}function Dl(gt,Nt,he){var Oe=0;return Nt=Jn(Nt,he),Ii(Zo(gt,function(Be,Re,hr){return{value:Be,index:Oe++,criteria:Nt(Be,Re,hr)}}).sort(function(Be,Re){var hr=Be.criteria,Ir=Re.criteria;if(hr!==Ir){if(hr>Ir||hr===void 0)return 1;if(hr<Ir||Ir===void 0)return-1}return Be.index-Re.index}),"value")}function Zi(gt,Nt){return function(he,Oe,Be){var Re=Nt?[[],[]]:{};return Oe=Jn(Oe,Be),Ci(he,function(hr,Ir){var lt=Oe(hr,Ir,he);gt(Re,hr,lt)}),Re}}const rs=Zi(function(gt,Nt,he){ar(gt,he)?gt[he].push(Nt):gt[he]=[Nt]}),Ro=Zi(function(gt,Nt,he){gt[he]=Nt}),Fs=Zi(function(gt,Nt,he){ar(gt,he)?gt[he]++:gt[he]=1}),Xo=Zi(function(gt,Nt,he){gt[he?0:1].push(Nt)},!0);function Ni(gt){return gt==null?0:jo(gt)?gt.length:er(gt).length}function ns(gt,Nt,he){return Nt in he}const aa=V(function(gt,Nt){var he={},Oe=Nt[0];if(gt==null)return he;zt(Oe)?(Nt.length>1&&(Oe=Xn(Oe,Nt[1])),Nt=gr(gt)):(Oe=ns,Nt=Ra(Nt,!1,!1),gt=Object(gt));for(var Be=0,Re=Nt.length;Be<Re;Be++){var hr=Nt[Be],Ir=gt[hr];Oe(Ir,hr,gt)&&(he[hr]=Ir)}return he}),cl=V(function(gt,Nt){var he=Nt[0],Oe;return zt(he)?(he=yi(he),Nt.length>1&&(Oe=Nt[1])):(Nt=Zo(Ra(Nt,!1,!1),String),he=function(Be,Re){return!pn(Nt,Re)}),aa(gt,he,Oe)});function Il(gt,Nt,he){return mt.call(gt,0,Math.max(0,gt.length-(Nt==null||he?1:Nt)))}function os(gt,Nt,he){return gt==null||gt.length<1?Nt==null||he?void 0:[]:Nt==null||he?gt[0]:Il(gt,gt.length-Nt)}function ri(gt,Nt,he){return mt.call(gt,Nt==null||he?1:Nt)}function Jo(gt,Nt,he){return gt==null||gt.length<1?Nt==null||he?void 0:[]:Nt==null||he?gt[gt.length-1]:ri(gt,Math.max(0,gt.length-Nt))}function wc(gt){return Do(gt,Boolean)}function rc(gt,Nt){return Ra(gt,Nt,!1)}const Ua=V(function(gt,Nt){return Nt=Ra(Nt,!0,!0),Do(gt,function(he){return!pn(Nt,he)})}),_c=V(function(gt,Nt){return Ua(gt,Nt)});function Bi(gt,Nt,he,Oe){tt(Nt)||(Oe=he,he=Nt,Nt=!1),he!=null&&(he=Jn(he,Oe));for(var Be=[],Re=[],hr=0,Ir=se(gt);hr<Ir;hr++){var lt=gt[hr],Lt=he?he(lt,hr,gt):lt;Nt&&!he?((!hr||Re!==Lt)&&Be.push(lt),Re=Lt):he?pn(Re,Lt)||(Re.push(Lt),Be.push(lt)):pn(Be,lt)||Be.push(lt)}return Be}const pi=V(function(gt){return Bi(Ra(gt,!0,!0))});function sa(gt){for(var Nt=[],he=arguments.length,Oe=0,Be=se(gt);Oe<Be;Oe++){var Re=gt[Oe];if(!pn(Nt,Re)){var hr;for(hr=1;hr<he&&pn(arguments[hr],Re);hr++);hr===he&&Nt.push(Re)}}return Nt}function is(gt){for(var Nt=gt&&ia(gt,se).length||0,he=Array(Nt),Oe=0;Oe<Nt;Oe++)he[Oe]=Ii(gt,Oe);return he}const nc=V(is);function ni(gt,Nt){for(var he={},Oe=0,Be=se(gt);Oe<Be;Oe++)Nt?he[gt[Oe]]=Nt[Oe]:he[gt[Oe][0]]=gt[Oe][1];return he}function la(gt,Nt,he){Nt==null&&(Nt=gt||0,gt=0),he||(he=Nt<gt?-1:1);for(var Oe=Math.max(Math.ceil((Nt-gt)/he),0),Be=Array(Oe),Re=0;Re<Oe;Re++,gt+=he)Be[Re]=gt;return Be}function ms(gt,Nt){if(Nt==null||Nt<1)return[];for(var he=[],Oe=0,Be=gt.length;Oe<Be;)he.push(mt.call(gt,Oe,Oe+=Nt));return he}function ys(gt,Nt){return gt._chain?yt(Nt).chain():Nt}function ca(gt){return Ci(Wr(gt),function(Nt){var he=yt[Nt]=gt[Nt];yt.prototype[Nt]=function(){var Oe=[this._wrapped];return q.apply(Oe,arguments),ys(this,he.apply(yt,Oe))}}),yt}Ci(["pop","push","reverse","shift","sort","splice","unshift"],function(gt){var Nt=Kt[gt];yt.prototype[gt]=function(){var he=this._wrapped;return he!=null&&(Nt.apply(he,arguments),(gt==="shift"||gt==="splice")&&he.length===0&&delete he[0]),ys(this,he)}}),Ci(["concat","join","slice"],function(gt){var Nt=Kt[gt];yt.prototype[gt]=function(){var he=this._wrapped;return he!=null&&(he=Nt.apply(he,arguments)),ys(this,he)}});const Xi=yt;var Oi=ca(we);Oi._=Oi;const ua=Oi}},ub={};function ai(wt){var pe=ub[wt];if(pe!==void 0)return pe.exports;var Te=ub[wt]={exports:{}};return ow[wt].call(Te.exports,Te,Te.exports,ai),Te.exports}ai.n=wt=>{var pe=wt&&wt.__esModule?()=>wt.default:()=>wt;return ai.d(pe,{a:pe}),pe};ai.d=(wt,pe)=>{for(var Te in pe)ai.o(pe,Te)&&!ai.o(wt,Te)&&Object.defineProperty(wt,Te,{enumerable:!0,get:pe[Te]})};ai.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ai.o=(wt,pe)=>Object.prototype.hasOwnProperty.call(wt,pe);ai.r=wt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(wt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(wt,"__esModule",{value:!0})};var fb={};(()=>{ai.d(fb,{ZP:()=>Rn,kr:()=>_n,j7:()=>yn});var wt=ai(50),pe=ai(163);function Te(p){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var r=p.raw;return r.reduce(function(o,l,v){var w=i[v-1],x=r[v-1];return Array.isArray(w)?w=w.join(""):x&&x.slice(-1)==="$"?o=o.slice(0,-1):w=(0,pe.escape)(w),o+w+l})}var we={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const ke=we;var Jt=ai(316),Kt=ai.n(Jt),ft=ai(895);const Ot=function(p){var i=p.$;if(i&&i.prototype&&i.prototype.constructor.name!=="jQuery"){var t=i.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var l=this.get(0);return l&&l.focus(),this},t.bind=function(l,v){return this.on(l,v)},t.unbind=function(l,v){if((0,wt.isObject)(l)){for(var w in l)l.hasOwnProperty(w)&&this.off(w,l[w]);return this}else return this.off(l,v)},t.click=function(l){return l?this.on("click",l):this.trigger("click")},t.change=function(l){return l?this.on("change",l):this.trigger("change")},t.keydown=function(l){return l?this.on("keydown",l):this.trigger("keydown")},t.delegate=function(l,v,w,x){return x||(x=w),this.on(v,l,function(E){E.data=w,x(E)})},t.scrollLeft=function(){var l=this.get(0);l=l.nodeType==9?l.defaultView:l;var v=l instanceof Window?l:null;return v?v.pageXOffset:l.scrollLeft||0},t.scrollTop=function(){var l=this.get(0);l=l.nodeType==9?l.defaultView:l;var v=l instanceof Window?l:null;return v?v.pageYOffset:l.scrollTop||0};var r=i.prototype.offset;t.offset=function(l){var v,w;return l&&(v=l.top,w=l.left),typeof v<"u"&&this.css("top","".concat(v,"px")),typeof w<"u"&&this.css("left","".concat(w,"px")),r.call(this)},i.map=function(l,v){for(var w=[],x=0;x<l.length;x++)w.push(v(l[x],x));return w};var o=Array.prototype.indexOf;i.inArray=function(l,v,w){return v==null?-1:o.call(v,l,w)},i.Event=function(l,v){if(!(this instanceof i.Event))return new i.Event(l,v);this.type=l,this.isDefaultPrevented=function(){return!1}}}};var q=ai(346),mt=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K=function(p){mt(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(q.Hn),st=function(p){mt(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.getByComponent=function(t){var r=this;return this.filter(function(o){return r.getComponent(o)===t})[0]},i.prototype.addComponent=function(t,r){var o=this,l=((0,wt.isArray)(t)?t:[t]).filter(function(v){return!o.hasComponent(v)}).map(function(v){return new K({component:v})})[0];return this.push(l,r)},i.prototype.getComponent=function(t){return t.get("component")},i.prototype.hasComponent=function(t){var r=this.getByComponent(t);return r&&this.contains(r)},i.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},i.prototype.allComponents=function(){var t=this;return this.map(function(r){return t.getComponent(r)}).filter(function(r){return r})},i.prototype.removeComponent=function(t,r){var o=this,l=((0,wt.isArray)(t)?t:[t]).map(function(v){return o.getByComponent(v)});return this.remove(l,r)},i}(q.FE);const k=st;var B=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ct=function(){return ct=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ct.apply(this,arguments)},vt=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},dt=function(){function p(i,t,r){this.debounced=[],this.collections=[],this.cls=[],this._em=i,this._name=t;var o=this.name.charAt(0).toLowerCase()+this.name.slice(1),l=(0,wt.isUndefined)(i.config[o])?i.config[this.name]:i.config[o],v=l===!0?{}:l||{};v.pStylePrefix=i.config.pStylePrefix||"",!(0,wt.isUndefined)(l)&&!l&&(v._disable=1),v.em=i,this._config=(0,pe.deepMerge)(r||{},v)}return Object.defineProperty(p.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),p.prototype.render=function(i){},p.prototype.postLoad=function(i){},Object.defineProperty(p.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),p.prototype.getConfig=function(i){return i?this.config[i]:this.config},p.prototype.__logWarn=function(i,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(i),t)},p.prototype.destroy=function(){this.__destroy()},p.prototype.__destroy=function(){var i,t,r;(i=this.view)===null||i===void 0||i.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(r=this.state)===null||r===void 0||r.clear(),this.debounced.forEach(function(o){return o.cancel()}),this.collections.forEach(function(o){o.stopListening(),o.reset()})},p.prototype.__appendTo=function(){var i=this.getConfig().appendTo;if(i){var t=(0,wt.isElement)(i)?i:document.querySelector(i);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},p}();const H=dt;var R=function(p){B(i,p);function i(t,r,o,l,v,w){w===void 0&&(w={});var x=p.call(this,t,r,v)||this;return x.cls=[],x.private=!1,x.all=o,x.events=l,!w.skipListen&&x.__initListen(),x}return i.prototype.postLoad=function(t){},i.prototype.render=function(t){},i.prototype.getProjectData=function(t){var r={},o=this.storageKey;return o&&(r[o]=t||this.getAll()),r},i.prototype.loadProjectData=function(t,r){t===void 0&&(t={}),r===void 0&&(r={});var o=r.all,l=r.onResult,v=r.reset,w=this.storageKey,x={action:"load"},E=o||this.all,M=t[w];if(typeof M=="string")try{M=JSON.parse(M)}catch{this.__logWarn("Data parsing failed",{input:M})}return v&&M&&E.reset(void 0,x),l?M&&l(M,x):M&&(0,pe.isDef)(M.length)&&E.reset(M,x),M},i.prototype.clear=function(t){t===void 0&&(t={});var r=this.all;return r&&r.reset(void 0,t),this},i.prototype.getAll=function(){return vt([],this.all.models,!0)},i.prototype.getAllMap=function(){return this.getAll().reduce(function(t,r){return t[r.get(r.idAttribute)]=r,t},{})},i.prototype.__initListen=function(t){t===void 0&&(t={});var r=this,o=r.all,l=r.em,v=r.events;o&&l&&o.on("add",function(w,x,E){return l.trigger(v.add,w,E)}).on("remove",function(w,x,E){return l.trigger(v.remove,w,E)}).on("change",function(w,x){return l.trigger(v.update,w,w.changedAttributes(),x)}).on("all",this.__catchAllEvent,this),this.cls=[o].concat(t.collections||[]),(t.propagate||[]).forEach(function(w){var x=w.entity,E=w.event;x.on("all",function(M,G,ot,Ct){var Ut=Ct||ot,ie=ct({event:M},Ut);[l,o].map(function(ae){return ae.trigger(E,G,ie)})})})},i.prototype.__remove=function(t,r){var o=this;r===void 0&&(r={});var l=this.em,v=(0,wt.isString)(t)?this.get(t):t,w=function(){return v&&o.all.remove(v,r),v};return!r.silent&&(l==null||l.trigger(this.events.removeBefore,v,w,r)),!r.abort&&w()},i.prototype.__catchAllEvent=function(t,r,o,l){var v=this,w=v.em,x=v.events,E=l||o;w&&x.all&&w.trigger(x.all,{event:t,model:r,options:E}),this.__onAllEvent()},i.prototype.__appendTo=function(t){var r=this.config.appendTo;if(r){var o=(0,wt.isElement)(r)?r:document.querySelector(r);if(!o)return this.__logWarn('"appendTo" element not found');o.appendChild(this.render(t))}},i.prototype.__onAllEvent=function(){},i.prototype._createId=function(t){t===void 0&&(t=16);var r=this.getAll(),o=r.length+t,l=this.getAllMap(),v;do v=(0,pe.createId)(o);while(l[v]);return v},i.prototype.__listenAdd=function(t,r){var o=this;t.on("add",function(l,v,w){return o.em.trigger(r,l,w)})},i.prototype.__listenRemove=function(t,r){var o=this;t.on("remove",function(l,v,w){return o.em.trigger(r,l,w)})},i.prototype.__listenUpdate=function(t,r){var o=this;t.on("change",function(l,v){return o.em.trigger(r,l,l.changedAttributes(),v)})},i.prototype.__destroy=function(){var t;this.cls.forEach(function(r){r.stopListening(),r.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},i}(dt),I={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const N=I;var $=ai(642),F={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const V=F;var U=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),it=function(p){U(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},i.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var r=["width","height","widthMedia"];r.forEach(function(o){return t.checkUnit(o)})},i.prototype.checkUnit=function(t){var r=this.get(t)||"",o=(parseFloat(r)||0).toString()===r.toString();o&&this.set(t,"".concat(r,"px"))},i.prototype.getName=function(){return this.get("name")||this.get("id")},i.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},i}(q.Hn);const X=it;var tt=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xt=function(p){tt(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(q.FE);const Q=xt;xt.prototype.model=X;var _t=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},It=function(p){_t(i,p);function i(t){var r=p.call(this,t)||this;return r.config=t.config||{},r.em=r.config.em,r.ppfx=r.config.pStylePrefix||"",r.listenTo(r.em,"change:device",r.updateSelect),r}return i.prototype.template=function(t){var r=t.ppfx,o=t.label;return Te(Yt||(Yt=W([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),r,o,r,r,r,r,r,r,r)},i.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},i.prototype.startAdd=function(){},i.prototype.updateDevice=function(){var t=this.em;if(t){var r=this.devicesEl;t.set("device",r?r.val():"")}},i.prototype.updateSelect=function(){var t=this,r=t.em,o=t.devicesEl;if(r&&r.getDeviceModel&&o){var l=r.getDeviceModel();o.val(l?l.get("id"):"")}},i.prototype.getOptions=function(){var t=this,r=t.collection,o=t.em,l="";return r.forEach(function(v){var w=v.attributes,x=w.name,E=w.id,M=o&&o.t&&o.t("deviceManager.devices.".concat(E))||x;l+='<option value="'.concat(E||x,'">').concat(M,"</option>")}),l},i.prototype.render=function(){var t=this,r=t.em,o=t.ppfx,l=t.$el,v=t.el,w=r&&r.t&&r.t("deviceManager.device");return l.html(this.template({ppfx:o,label:w})),this.devicesEl=l.find(".".concat(o,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(r.get("device")),v.className="".concat(o,"devices-c"),this},i}(q.G7);const $t=It;var Yt,Ne=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),et=function(){return et=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},et.apply(this,arguments)},Tt="device",jt="".concat(Tt,":"),zt="".concat(jt,"select"),Ht="".concat(jt,"update"),Dt="".concat(jt,"add"),St="".concat(jt,"remove"),Vt="".concat(St,":before"),Me="change:device",de={all:Tt,select:zt,update:Ht,add:Dt,remove:St,removeBefore:Vt},Le=function(p){Ne(i,p);function i(t){var r,o=p.call(this,t,"DeviceManager",new Q,de,V)||this;return o.Device=X,o.Devices=Q,o.storageKey="",o.devices=o.all,(r=o.config.devices)===null||r===void 0||r.forEach(function(l){return o.add(l,{silent:!0})}),o.select(o.config.default||o.devices.at(0)),t.on(Me,o._onSelect,o),o}return i.prototype._onSelect=function(t,r,o){var l=this,v=l.em,w=l.events,x=t.previous("device"),E=this.get(r),M=w.select;v.trigger(M,E,this.get(x)),this.__catchAllEvent(M,E,o)},i.prototype.add=function(t,r){r===void 0&&(r={});var o,l=r;if((0,wt.isString)(t)){var v=r;l=arguments[2]||{},o=et(et({},l),{id:t,name:l.name||t,width:v})}else o=t;return o.id||(o.id=o.name||this._createId()),this.devices.add(o,l)},i.prototype.get=function(t){var r=this.getAll().filter(function(o){return o.get("name")===t})[0];return r||this.devices.get(t)||null},i.prototype.remove=function(t,r){return r===void 0&&(r={}),this.__remove(t,r)},i.prototype.getDevices=function(){return this.devices.models},i.prototype.select=function(t,r){r===void 0&&(r={});var o=(0,wt.isString)(t)?this.get(t):t;return o&&this.em.set("device",o.get("id"),r),this},i.prototype.getSelected=function(){return this.get(this.em.get("device"))},i.prototype.getAll=function(){return this.devices},i.prototype.render=function(){var t,r=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new $t({collection:this.devices,config:et({em:r},this.config)}),this.view.render().el},i.prototype.destroy=function(){this.__destroy()},i}(R);const ar=Le;var Er;(function(p){p.add="page:add",p.addBefore="page:add:before",p.remove="page:remove",p.removeBefore="page:remove:before",p.select="page:select",p.selectBefore="page:select:before",p.update="page:update",p.all="page"})(Er||(Er={}));const Nr=Er;var Ar=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fr=function(p){Ar(i,p);function i(t,r,o){return p.call(this,r,{module:t,modelConstructor:o})||this}return i.prototype.add=function(t,r){var o=this,l,v=(0,wt.isArray)(t)?t:(0,wt.isUndefined)(t)?void 0:[t];return v=(l=v==null?void 0:v.map(function(w){return w instanceof o.newModel?w:new o.newModel(o.module,w)}))!==null&&l!==void 0?l:[void 0],p.prototype.add.call(this,(0,wt.isArray)(t)?v:v[0],r)},i.prototype.preinitialize=function(t,r){this.newModel=r.modelConstructor,this.module=r.module},i}(q.FE);const Xe=Fr;var at=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kt=function(){return kt=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},kt.apply(this,arguments)},Gt=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ye="__aw",Ae="__ah",pt=function(p,i){var t,r=p.get(i),o=(t=p.view)===null||t===void 0?void 0:t.el[i==="width"?"offsetWidth":"offsetHeight"];return(0,wt.isNumber)(r)?r:(0,wt.isString)(r)&&r.endsWith("px")?parseFloat(r):o||0},le=function(p){at(i,p);function i(t,r){var o=p.call(this,t,r)||this,l=o.em,v=o.attributes,w=v.styles,x=v.component,E=l.Components,M=E.getConfig(),G=l.Css.getAll(),ot={},Ct={em:l,config:M,frame:o,idMap:ot};if(!(0,pe.isComponent)(x)){var Ut=(0,pe.isObject)(x)?x:{components:x};!Ut.type&&(Ut.type="wrapper");var ie=E.getType("wrapper").model;o.set("component",new ie(Ut,Ct))}if(!w)o.set("styles",G);else if(!(0,pe.isObject)(w)){var ae=w;(0,wt.keys)(ot).length&&(ae=(0,wt.isString)(ae)?l.Parser.parseCss(ae):ae,l.Css.checkId(ae,{idMap:ot})),G.add(ae),o.set("styles",G)}return!r.width&&o.set(ye,1),!r.height&&o.set(Ae,1),!o.id&&o.set("id",(0,pe.createId)()),o}return i.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(i.prototype,"width",{get:function(){return pt(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return pt(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),i.prototype.initRefs=function(){var t=this.refFrame;if((0,wt.isString)(t)){var r=this.module.framesById[t];r&&this.set({refFrame:r},{silent:!0})}},i.prototype.getBoxRect=function(){var t=this.attributes,r=t.x,o=t.y,l=this,v=l.width,w=l.height;return{x:r,y:o,width:v,height:w}},i.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},i.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},i.prototype.getComponent=function(){return this.get("component")},i.prototype.getStyles=function(){return this.get("styles")},i.prototype.disable=function(){this.trigger("disable")},i.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var r=this.collection;return r&&r.remove(this)},i.prototype.getHead=function(){return Gt([],this.head,!0)},i.prototype.setHead=function(t){return this.set("head",Gt([],t,!0))},i.prototype.addHeadItem=function(t){this.head.push(t)},i.prototype.getHeadByAttr=function(t,r,o){return this.head.filter(function(l){return l.attributes&&l.attributes[t]==r&&(!o||o===l.tag)})[0]},i.prototype.removeHeadByAttr=function(t,r,o){var l=this.getHeadByAttr(t,r,o),v=this.head.indexOf(l);v>=0&&this.head.splice(v,1)},i.prototype.addLink=function(t){var r="link";!this.getHeadByAttr("href",t,r)&&this.addHeadItem({tag:r,attributes:{href:t,rel:"stylesheet"}})},i.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},i.prototype.addScript=function(t){var r="script";!this.getHeadByAttr("src",t,r)&&this.addHeadItem({tag:r,attributes:{src:t}})},i.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},i.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},i.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",kt({frame:this},t))},i.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},i.prototype.toJSON=function(t){t===void 0&&(t={});var r=$.Z.prototype.toJSON.call(this,t),o=(0,wt.result)(this,"defaults");return t.fromUndo&&delete r.component,delete r.styles,delete r.changesCount,r[ye]&&delete r.width,r[Ae]&&delete r.height,r.refFrame&&(r.refFrame=r.refFrame.id,delete r.component),(0,wt.forEach)(r,function(l,v){v.indexOf("_")===0&&delete r[v]}),(0,wt.forEach)(o,function(l,v){r[v]===l&&delete r[v]}),(0,wt.forEach)(["attributes","head"],function(l){(0,wt.isEmpty)(r[l])&&delete r[l]}),r},i}($.Z);const se=le;var or=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mr=function(p){or(i,p);function i(t,r){r===void 0&&(r=[]);var o=p.call(this,t,r,se)||this;return o.loadedItems=0,o.itemsToLoad=0,(0,wt.bindAll)(o,"itemLoaded"),o.on("add",o.onAdd),o.on("reset",o.onReset),o.on("remove",o.onRemove),o.forEach(function(l){return o.onAdd(l)}),o}return i.prototype.onAdd=function(t){this.module.framesById[t.id]=t},i.prototype.onReset=function(t,r){var o=this,l=(r==null?void 0:r.previousModels)||[];l.map(function(v){return o.onRemove(v)})},i.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},i.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},i.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},i.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},i.prototype.listenToLoadItems=function(t){var r=this;this.forEach(function(o){return o[t?"on":"off"]("loaded",r.itemLoaded)})},i}(Xe);const er=mr;var Dr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rn=function(p){Dr(i,p);function i(t){var r=this,o=t.em,l=t.config,v=l.scripts,w=l.styles;return r=p.call(this,t,{scripts:v,styles:w})||this,r.set("frames",new er(t)),r.on("change:zoom",r.onZoomChange),r.on("change:x change:y",r.onCoordsChange),r.on("change:pointer change:pointerScreen",r.onPointerChange),r.listenTo(o,"change:device ".concat(Ht),r.updateDevice),r.listenTo(o,Nr.select,r._pageUpdated),r}return i.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:q.pH,pointerScreen:q.pH}},Object.defineProperty(i.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),i.prototype.init=function(){var t=this.em,r=t.Pages._initPage();this.set("frames",r.getFrames()),this.updateDevice({frame:r.getMainFrame()})},i.prototype._pageUpdated=function(t,r){var o=this.em;o.setSelected(),o.get("readyCanvas")&&o.stopDefault(),r==null||r.getFrames().map(function(l){return l.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},i.prototype.updateDevice=function(t){t===void 0&&(t={});var r=this.em,o=r.getDeviceModel(),l=t.frame||r.getCurrentFrameModel();if(l&&o){var v=o.attributes,w=v.width,x=v.height;l.set({width:w,height:x},{noUndo:1})}},i.prototype.onZoomChange=function(){var t=this,r=t.em,o=t.module,l=this.get("zoom");l<1&&this.set("zoom",1),r.trigger(o.events.zoom)},i.prototype.onCoordsChange=function(){var t=this,r=t.em,o=t.module;r.trigger(o.events.coords)},i.prototype.onPointerChange=function(){var t=this,r=t.em,o=t.module;r.trigger(o.events.pointer)},i.prototype.getPointerCoords=function(t){t===void 0&&(t=q.vA.World);var r=this.attributes,o=r.pointer,l=r.pointerScreen;return t===q.vA.World?o:l},i}($.Z);const yt=rn;var Wt=ai(675),ne=ai(184),Ft=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_e=function(p){Ft(i,p);function i(t,r){r===void 0&&(r=[]);var o=p.call(this,t,r,Wt.Z)||this;o.on("add",o.onAdd),o.on("change",o.onChange),o.on("remove",o.onRemove);var l=o.em;o.refreshDbn=(0,wt.debounce)(function(){return o.refresh()},0);var v="component:resize styleable:change component:input ".concat(ne.g.update," frame:updated undo redo");return o.listenTo(l,v,function(){return o.refreshDbn()}),o}return Object.defineProperty(i.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),i.prototype.refresh=function(){var t=this,r=t.em,o=t.events;r.trigger(o.spot)},i.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},i.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},i.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},i.prototype.__trgEvent=function(t,r){var o=this.module,l=o.em;l.trigger(t,r),this.refreshDbn()},i}(Xe);const Zt=_e;var gr;(function(p){p.dragEnter="canvas:dragenter",p.dragOver="canvas:dragover",p.dragEnd="canvas:dragend",p.dragData="canvas:dragdata",p.drop="canvas:drop",p.spot="canvas:spot",p.spotAdd="canvas:spot:add",p.spotUpdate="canvas:spot:update",p.spotRemove="canvas:spot:remove",p.coords="canvas:coords",p.zoom="canvas:zoom",p.pointer="canvas:pointer",p.refresh="canvas:refresh",p.frameLoad="canvas:frame:load",p.frameLoadHead="canvas:frame:load:head",p.frameLoadBody="canvas:frame:load:body"})(gr||(gr={}));const fr=gr;var nn=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tn=function(p){nn(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"module",{get:function(){var t,r;return(r=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&r!==void 0?r:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),i.prototype.preinitialize=function(t){this.className=""},i}(q.G7);const wr=tn;var tr=ai(491),Un=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rt=function(p){Un(i,p);function i(t,r){t===void 0&&(t={}),r===void 0&&(r=!1);var o=p.call(this,t)||this;return o.itemsView="",o.itemType="type",o.reuseView=!1,o.viewCollection=[],r&&o.listenTo(o.collection,"add",o.addTo),o}return i.prototype.addTo=function(t){this.add(t)},i.prototype.itemViewNotFound=function(t){},i.prototype.add=function(t,r){var o=this,l=o.reuseView,v=o.viewCollection,w=r||null,x=t.get(this.itemType),E;t.view&&l?E=t.view:E=this.renderView(t,x),v.push(E);var M=E.render().el;w?w.appendChild(M):this.$el.append(M)},i.prototype.render=function(){var t=this,r=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(o){return t.add(o,r)}),this.$el.append(r),this.onRender(),this},i.prototype.onRender=function(){},i.prototype.onRemoveBefore=function(t,r){},i.prototype.onRemove=function(t,r){},i.prototype.remove=function(t){t===void 0&&(t={});var r=this.viewCollection;return this.onRemoveBefore(r,t),this.clearItems(),q.G7.prototype.remove.apply(this,t),this.onRemove(r,t),this},i.prototype.clearItems=function(){this.viewCollection},i}(wr);const ee=Rt;var je=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Je=function(p){je(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.config=t.config||{};var o=r.model;return r.listenTo(o,"change",r.render),r.listenTo(o,"destroy remove",r.remove),r.listenTo(o.get("selectors"),"change",r.render),r}return i.prototype.tagName=function(){return"style"},i.prototype.render=function(){var t=this,r=t.model,o=t.el,l=r.get("important");return o.innerHTML=r.toCSS({important:l}),this},i}(q.G7);const Et=Je;var fe=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pe=function(p){fe(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype._createElement=function(){return document.createTextNode("")},i.prototype.render=function(){var t=this.model,r=t.get("important");return this.el.textContent=t.getDeclaration({important:r}),this},i}(Et);const Ye=Pe;var Cr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wr=function(p,i){return"".concat(p).concat(i?"-".concat(parseFloat(i)):"")},zn=function(p){Cr(i,p);function i(t){var r=p.call(this,t)||this;(0,wt.bindAll)(r,"sortRules");var o=t.config||{};r.atRules={},r.config=o,r.em=o.em,r.pfx=o.stylePrefix||"",r.className=r.pfx+"rules";var l=r.collection;return r.listenTo(l,"add",r.addTo),r.listenTo(l,"reset",r.render),r}return i.prototype.addTo=function(t){this.addToCollection(t)},i.prototype.addToCollection=function(t,r){if(this.renderStarted){var o=r||null,l=this.config,v={model:t,config:l},w,x;if(t.get("atRuleType")==="keyframes"){var E=t.getAtRule(),M=this.atRules[E];if(!M){var G=document.createElement("style");M=document.createTextNode(""),G.appendChild(document.createTextNode("".concat(E,"{"))),G.appendChild(M),G.appendChild(document.createTextNode("}")),this.atRules[E]=M,w=G}x=new Ye(v),M.appendData(x.render().el.textContent)}else x=new Et(v),w=x.render().el;var ot=this.className,Ct=t.get("mediaText"),Ut=Wr(ot),ie=Ut;if(Ct&&(ie=Wr(ot,this.getMediaWidth(Ct))),w){var ae=o||this.el,Ie=void 0;try{Ie=ae.querySelector("#".concat(ie))}catch{}Ie||(Ie=ae.querySelector("#".concat(Ut))),Ie==null||Ie.appendChild(w)}return w}},i.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},i.prototype.sortRules=function(t,r){var o=this.em,l=(o.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!l)return 0;var v=l?t:r,w=l?r:t;return v-w},i.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var r=this,o=r.em,l=r.$el,v=r.collection,w=this.className,x=document.createDocumentFragment();l.empty();var E=o.Devices.getAll().pluck("priority").sort(this.sortRules);return E.every(function(M){return M})&&E.unshift(0),E.forEach(function(M){return x.appendChild((0,tr.ut)("div",{id:Wr(w,M)}))}),v.each(function(M){return t.addToCollection(M,x)}),l.append(x),l.attr("class",w),this},i}(q.G7);const Dn=zn;var lo="text/html",ho=lo;const vn=function(p,i){i===void 0&&(i={});var t=new DOMParser,r=i.htmlType||ho,o=r===lo,l=o?p:"<div>".concat(p,"</div>"),v=t.parseFromString(l,r),w;if(o){if(i.asDocument)return v;var x=v.head,E=v.body,M=x.querySelectorAll("script");(0,wt.each)(M,function(ot){return E.appendChild(ot)});var G=[];(0,wt.each)(x.children,function(ot){return G.push(ot)}),(0,wt.each)(G,function(ot,Ct){return E.insertBefore(ot,E.children[Ct])}),w=E}else w=v.firstChild;return w};var ro=function(){return ro=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ro.apply(this,arguments)},In="data-gjs-",Yo="parse:html",go=function(p,i){return i===void 0&&(i={}),{compTypes:[],modelAttrStart:In,getPropAttribute:function(t,r){var o=t.replace(this.modelAttrStart,""),l=(r==null?void 0:r.length)||0,v=r==null?void 0:r.substring(0,1),w=r==null?void 0:r.substring(l-1),x=r==="true"?!0:r==="false"?!1:r;try{x=v=="{"&&w=="}"||v=="["&&w=="]"?JSON.parse(x):x}catch{}return{name:o,value:x}},splitPropsFromAttr:function(t){var r=this;t===void 0&&(t={});var o={},l={};return(0,wt.each)(t,function(v,w){if(w.indexOf(r.modelAttrStart)===0){var x=r.getPropAttribute(w,v);o[x.name]=x.value}else l[w]=v}),{props:o,attrs:l}},parseStyle:function(t){for(var r={};t.indexOf("/*")>=0;){var o=t.indexOf("/*"),l=t.indexOf("*/")+2;t=t.replace(t.slice(o,l),"")}for(var v=t.split(";"),w=0,x=v.length;w<x;w++){var E=v[w].trim();if(E){var M=E.split(":"),G=M[0].trim(),ot=M.slice(1).join(":").trim();r[G]?((0,wt.isArray)(r[G])||(r[G]=[r[G]]),r[G].push(ot)):r[G]=ot}}return r},parseClass:function(t){for(var r=[],o=t.split(" "),l=0,v=o.length;l<v;l++){var w=o[l].trim();w&&r.push(w)}return r},parseNodeAttr:function(t,r){for(var o=r||{},l=t.attributes||[],v=l.length,w=0;w<v;w++){var x=l[w].nodeName,E=l[w].nodeValue;if(x=="style")o.style=this.parseStyle(E);else if(x=="class")o.classes=this.parseClass(E);else{if(x=="contenteditable")continue;if(x.indexOf(this.modelAttrStart)===0){var M=this.getPropAttribute(x,E);o[M.name]=M.value}else E===""&&t[x]===!0&&(E=!0),o.attributes||(o.attributes={}),o.attributes[x]=E}}return o},detectNode:function(t,r){var o;r===void 0&&(r={});var l=this.compTypes,v={};if(l){var w=(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"".concat(this.modelAttrStart,"type"));if(w)v={type:w};else for(var x=0;x<l.length;x++){var E=l[x],M=E.model.isComponent(t,r);if(M){typeof M!="object"&&(M={type:E.id}),v=M;break}}}return v},parseNode:function(t,r){var o;r===void 0&&(r={});var l=((o=t.content)===null||o===void 0?void 0:o.childNodes)||t.childNodes,v=l.length,w=this.detectNode(t,r);if(!w.tagName){var x=t.tagName||"",E=t.namespaceURI||"";w.tagName=x&&E==="http://www.w3.org/1999/xhtml"?x.toLowerCase():x}if(w=this.parseNodeAttr(t,w),!v&&"".concat(t.outerHTML).slice(-2)==="/>"&&(w.void=!0),v&&!w.components&&!r.skipChildren){var M=l[0];v===1&&M.nodeType===3?(!w.type&&(w.type="text"),w.components={type:"textnode",content:M.nodeValue}):w.components=this.parseNodes(t,ro(ro({},r),{inSvg:r.inSvg||w.type==="svg"}))}var G=w.components;if(!w.type&&(G!=null&&G.length)){for(var ot=i.textTypes,Ct=ot===void 0?[]:ot,Ut=i.textTags,ie=Ut===void 0?[]:Ut,ae=!0,Ie=!1,qe=0;qe<G.length;qe++){var Ke=G[qe],Or=Ke.type;if(!Ct.includes(Or)&&!ie.includes(Ke.tagName)){ae=!1;break}Or==="textnode"&&(Ie=!0)}ae&&Ie&&(w.type="text")}return w},parseNodes:function(t,r){var o;r===void 0&&(r={});for(var l=[],v=((o=t.content)===null||o===void 0?void 0:o.childNodes)||t.childNodes,w=v.length,x=0;x<w;x++){var E=v[x],M=l[l.length-1],G=this.parseNode(E,r);if(G.type==="textnode"){if((M==null?void 0:M.type)==="textnode"){M.content+=G.content;continue}if(!r.keepEmptyTextNodes){var ot=E.nodeValue;if(ot!=" "&&!ot.trim())continue}}!G.tagName&&(0,wt.isUndefined)(G.content)||l.push(G)}return l},parse:function(t,r,o){var l,v,w;o===void 0&&(o={});var x=(p==null?void 0:p.get("Config"))||{},E={html:[]},M=ro(ro({},i),o),G=ro(ro(ro({},i.optionsHtml),{htmlType:((l=i.optionsHtml)===null||l===void 0?void 0:l.htmlType)||i.htmlType}),o),ot=G.preParser,Ct=G.asDocument,Ut=(0,wt.isFunction)(ot)?ot(t,{editor:p==null?void 0:p.getEditor()}):t,ie=(0,wt.isFunction)(M.parserHtml)?M.parserHtml(Ut,G):vn(Ut,G),ae=ie,Ie=ie;Ct&&(ae=Ie.documentElement,E.doctype=(0,tr.hy)(Ie.doctype));var qe=ae.querySelectorAll("script"),Ke=qe.length,Or=(0,wt.isUndefined)(x.allowScripts)?G.allowScripts:x.allowScripts;if(!Or)for(;Ke--;)(v=qe[Ke].parentNode)===null||v===void 0||v.removeChild(qe[Ke]);if((!G.allowUnsafeAttr||!G.allowUnsafeAttrValue)&&this.__sanitizeNode(ae,G),r){for(var Gr=ae.querySelectorAll("style"),bn=Gr.length,Tn="";bn--;)Tn=Gr[bn].innerHTML+Tn,(w=Gr[bn].parentNode)===null||w===void 0||w.removeChild(Gr[bn]);Tn&&(E.css=r.parse(Tn))}p==null||p.trigger("".concat(Yo,":root"),{input:Ut,root:ae});var Vr=[];if(Ct)E.head=this.parseNode(Ie.head,M),E.root=this.parseNodeAttr(ae),Vr=this.parseNode(Ie.body,M);else{var Cn=this.parseNodes(ae,M);Vr=Cn.length===1&&!M.returnArray?Cn[0]:Cn}return E.html=Vr,p==null||p.trigger(Yo,{input:Ut,output:E}),E},__sanitizeNode:function(t,r){var o=this,l=t.attributes||[],v=t.childNodes||[],w=[];(0,wt.each)(l,function(x){var E=x.nodeName||"",M=x.nodeValue||"";!r.allowUnsafeAttr&&E.startsWith("on")&&w.push(E),!r.allowUnsafeAttrValue&&M.startsWith("javascript:")&&w.push(E)}),w.map(function(x){return t.removeAttribute(x)}),(0,wt.each)(v,function(x){return o.__sanitizeNode(x,r)})}}};const Fo=go;var Co=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yo=function(){return yo=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},yo.apply(this,arguments)},So=Fo(),Gi=function(p){return(0,wt.isArray)(p)?p[p.length-1]:p},Wo=function(p){Co(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.parseStyle=function(t){return So.parseStyle(t)},i.prototype.extendStyle=function(t){return yo(yo({},this.getStyle()),t)},i.prototype.getStyle=function(t){var r=this.get("style")||{},o=yo({},r);return t&&(0,wt.isString)(t)?o[t]:o},i.prototype.setStyle=function(t,r){var o=this;t===void 0&&(t={}),r===void 0&&(r={}),(0,wt.isString)(t)&&(t=this.parseStyle(t));var l=this.getStyle(r);r.partial||r.avoidStore?(r.avoidStore=!0,t.__p=!0):delete t.__p;var v=yo({},t),w=yo({},v);(0,wt.keys)(w).forEach(function(E){w[E]===""&&delete w[E]}),this.set("style",w,r);var x=(0,pe.shallowDiff)(l,v);return delete x.__p,(0,wt.keys)(x).forEach(function(E){var M=o.em;r.noEvent||(o.trigger("change:style:".concat(E)),M&&(M.trigger("styleable:change",o,E,r),M.trigger("styleable:change:".concat(E),o,E,r)))}),v},i.prototype.addStyle=function(t,r,o){var l;r===void 0&&(r=""),o===void 0&&(o={}),typeof t=="string"?t=(l={},l[t]=r,l):o=r||{},o.addStyle=t,t=this.extendStyle(t),this.setStyle(t,o)},i.prototype.removeStyle=function(t){var r=this.getStyle();delete r[t],this.setStyle(r)},i.prototype.styleToString=function(t){t===void 0&&(t={});var r=[],o=this.getStyle(t),l=t.important,v=function(x){var E=(0,wt.isArray)(l)?l.indexOf(x)>=0:l,M=x.substring(0,2),G=M==="__";if(G)return"continue";var ot=o[x],Ct=(0,wt.isArray)(ot)?ot:[ot];Ct.forEach(function(Ut){var ie="".concat(Ut).concat(E?" !important":"");ie&&r.push("".concat(x,":").concat(ie,";"))})};for(var w in o)v(w);return r.join("")},i.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},i.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},i}(q.Hn);const Mo=Wo;var ao=function(){return ao=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ao.apply(this,arguments)},Xn=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},$r=function(p){return(0,wt.isArray)(p.get(Gn))},co=function(p){return!!p.get(pn)},Jn=function(p){return!!($r(p)||co(p))},Lo=function(p){var i=p.parent();return Jn(p)&&(!i||!Jn(i))},fn=function(p){p.__symbReady||(p.on("change",p.__upSymbProps),p.__symbReady=!0)},Oo=function(p){var i=p.get(pn);if(i&&(0,wt.isString)(i)){var t=p.__getAllById()[i];t?(i=t,p.set(pn,t)):i=0}return i||void 0},bo=function(p){var i=p==null?void 0:p.get(Gn);return i&&(0,wt.isArray)(i)&&(i.forEach(function(t,r){t&&(0,wt.isString)(t)&&(i[r]=p.__getAllById()[t])}),i=i.filter(function(t){return t&&!(0,wt.isString)(t)})),i||void 0},En=function(p,i){i===void 0&&(i="");var t=p==null?void 0:p.get(ui),r=i.split(":")[0],o=i!==r?[i,r]:[i];return t===!0||(0,wt.isArray)(t)&&o.some(function(l){return t.indexOf(l)>=0})},rt=function(p,i){i===void 0&&(i={});var t=[],r=i.changed;if(i.fromInstance||i.noPropagate||i.fromUndo||r&&En(p,r))return t;var o=bo(p)||[],l=Oo(p),v=l?Xn([l],bo(l)||[],!0):o;return t=v.filter(function(w){return w!==p}).filter(function(w){return!(r&&En(w,r))}),t},Xt=function(p,i){for(var t=p,r=p.parent(i);r&&Jn(r);)t=r,r=r.parent(i);return t},ir=function(p,i){i===void 0&&(i={});var t=Oo(p),r=t&&bo(t);!i.skipRefs&&r&&t.set(Gn,r.filter(function(o){return o!==p})),p.set(pn,0),p.components().forEach(function(o){return ir(o,i)})},pr=function(p,i,t,r){r===void 0&&(r={});var o=Oo(p),l=bo(p);!o&&!l||p.em.log(i,{model:p,toUp:t,context:"symbols",opts:r})},Hr=function(p,i){i===void 0&&(i={});var t=p.changedAttributes()||{},r=t.attributes||{};if(delete t.status,delete t.open,delete t[Gn],delete t[pn],delete t[ui],delete t.attributes,delete r.id,(0,pe.isEmptyObj)(r)||(t.attributes=r),!(0,pe.isEmptyObj)(t)){var o=rt(p,i);(0,wt.keys)(t).map(function(l){En(p,l)&&delete t[l]}),pr(p,"props",o,{opts:i,changed:t}),o.forEach(function(l){var v=ao({},t);(0,wt.keys)(v).map(function(w){En(l,w)&&delete v[w]}),l.set(v,ao({fromInstance:p},i))})}},wn=function(p,i){i===void 0&&(i={});var t=rt(p,i);pr(p,"classes",t,{opts:i}),t.forEach(function(r){r.set("classes",p.get("classes"),{fromInstance:p})}),p.__changesUp(i)},Nn=function(p,i,t,r){var o=r||t||{},l=o.fromInstance,v=o.fromUndo,w={fromInstance:l,fromUndo:v},x=i.opt.temporary;if(r)if(r.add){var Ct=[],Ut=!!bo(p),M=rt(p,ao(ao({},w),{changed:"components:add"}));if(M.length){var ie=Oo(i);Ct=bo(ie||i)||[],Ct=Xn([],Ct,!0),Ct.push(ie||i)}!x&&pr(p,"add",M,{opts:r,addedInstances:Ct.map(function(Vr){return Vr.cid}),added:i.cid}),M.forEach(function(Vr){var Cn=Xt(Vr),Hn=Ct.filter(function(qr){var tc=Xt(qr,{prev:1});return Cn&&tc&&tc===Cn})[0],Ko=Hn||i.clone({symbol:!0,symbolInv:Ut});Vr.append(Ko,ao({fromInstance:p},r))})}else{var ae=Oo(i);if(ae&&!r.temporary&&ae.set(Gn,bo(ae).filter(function(Tn){return Tn!==i})),!Lo(i)&&!r.skipRefsUp){var Ie="components:remove",qe=r.index,Ke=i.parent(),Or=ao({fromInstance:i},r),Gr=Lo(i),bn=function(Vr){var Cn=Vr.parent();Cn&&!En(Cn,Ie)&&Vr.remove(Or)},M=En(Ke,Ie)?[]:rt(i,w);Gr&&(M=Ke&&rt(Ke,ao(ao({},w),{changed:Ie})),bn=function(Vr){var Cn=Vr.components().at(qe);Cn&&Cn.remove(ao({fromInstance:Ke},Or))}),!x&&pr(p,"remove",M,{opts:r,removed:i.cid,isSymbNested:Gr}),M.forEach(bn)}}else{var E=i,M=rt(p,ao(ao({},w),{changed:"components:reset"})),G=E.models,ot=new Set;pr(p,"reset",M,{components:G}),M.forEach(function(Tn){var Vr=Tn.components(),Cn=G.map(function(Hn,Ko){return!Jn(Hn)||ot.has(Hn)?(ot.add(Hn),Hn.clone({symbol:!0})):Vr.at(Ko)});Vr.reset(Cn,ao({fromInstance:p},t))})}p.__changesUp(o)},Xr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cr=function(){return cr=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},cr.apply(this,arguments)},Mt=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},xe=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},lr=function(p,i){if(i===void 0&&(i=[]),!p)return[];var t=(0,wt.isArray)(p)||(0,wt.isFunction)(p.map)?p:[p];return t.map(function(r){i.push(r.getId()),lr(r.components().models,i)}),i},Yr=function(p,i,t){i===void 0&&(i={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var r=t.visitedCmps,o=(0,wt.isArray)(p)?p:[p];return o.map(function(l){var v=l.attributes,w=v===void 0?{}:v,x=l.components,E=l.tagName,M=l.style,G=w.id;w.draggable;var ot=Mt(w,["id","draggable"]),Ct=l;if(G){if(r[G])r[G].push(Ct),G=wi.getNewId(i),Ct.attributes.id=G;else if(r[G]=[],i[G]){Ct=i[G];var Ut=Ct;E&&Ut.set({tagName:E},cr(cr({},t),{silent:!0})),(0,wt.keys)(ot).length&&Ut.addAttributes(ot,cr({},t)),(0,wt.keys)(M).length&&Ut.addStyle(M,t)}}if(x){var ie=Yr(x,i);if((0,wt.isFunction)(Ct.components)){var ae=Ct.components();ae.length>0&&ae.reset(ie,t)}else Ct.components=ie}return Ct})},en=function(p){Xr(i,p);function i(t,r){var o=p.call(this,t,r)||this;o.opt=r,o.listenTo(o,"add",o.onAdd),o.listenTo(o,"remove",o.removeChildren),o.listenTo(o,"reset",o.resetChildren);var l=r.em,v=r.config;return o.config=v,o.em=l,o.domc=r.domc||(l==null?void 0:l.Components),o}return Object.defineProperty(i.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),i.prototype.resetChildren=function(t,r){var o=this;r===void 0&&(r={});var l=this,v=r.previousModels||[],w=v.filter(function(M){return!t.get(M.cid)}),x=lr(t),E=lr(v).filter(function(M){return x.indexOf(M)>=0});r.keepIds=(r.keepIds||[]).concat(E),w.forEach(function(M){return o.removeChildren(M,l,r)}),t.each(function(M){return o.onAdd(M)})},i.prototype.resetFromString=function(t,r){var o,l;t===void 0&&(t=""),r===void 0&&(r={}),r.keepIds=lr(this);var v=this,w=v.domc,x=v.em,E=v.parent,M=x==null?void 0:x.Css,G=(w==null?void 0:w.allById())||{},ot=this.parseString(t,r),Ct=Yr(ot,G,r),Ut=r.visitedCmps,ie=Ut===void 0?{}:Ut;Object.keys(ie).forEach(function(ae){var Ie=ie[ae];if(Ie.length){var qe=(M==null?void 0:M.getRules("#".concat(ae)))||[];qe.length&&Ie.forEach(function(Ke){qe.forEach(function(Or){var Gr=Or.clone();Gr.set("selectors",["#".concat(Ke.attributes.id)]),M.getAll().add(Gr)})})}}),this.reset(Ct,r),x==null||x.trigger("component:content",E,r,t),(l=(o=E).__checkInnerChilds)===null||l===void 0||l.call(o)},i.prototype.removeChildren=function(t,r,o){var l=this;if(o===void 0&&(o={}),!!t){var v=this,w=v.domc,x=v.em,E=o.temporary||o.fromUndo;if(t.prevColl=this,!E){var M=t.getId(),G=x.Selectors.getAll(),ot=x.Css.getAll(),Ct=(o.keepIds||[]).indexOf(M)<0,Ut=w?w.allById():{};delete Ut[M];var ie=Ct?ot.remove(ot.filter(function(qe){return qe.getSelectors().getFullString()==="#".concat(M)}),o):[];G.remove(ie.map(function(qe){return qe.getSelectors().at(0)})),t.opt.temporary||(x.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),x.trigger(ne.g.remove,t),w&&co(t)&&Lo(t)&&w.symbols.__trgEvent(w.events.symbolInstanceRemove,{component:t},!0));var ae=t.components();ae.forEach(function(qe){Nn(qe,qe,ae,cr(cr({},o),{skipRefsUp:!0})),l.removeChildren(qe,r,o)})}var Ie=t.components();x.stopListening(Ie),x.stopListening(t),x.stopListening(t.get("classes")),t.__postRemove()}},i.prototype.model=function(t,r){var o=r.collection.opt,l=o.em,v,w=l.Components.componentTypes;r.em=l,r.config=o.config,r.componentTypes=w,r.domc=o.domc;for(var x=0;x<w.length;x++){var E=w[x].id;if(E==t.type){v=w[x].model;break}}return v||(v=w[w.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:r})),new v(t,r)},i.prototype.parseString=function(t,r){r===void 0&&(r={});var o=this,l=o.em,v=o.domc,w=o.parent,x=r.asDocument&&(w==null?void 0:w.is("wrapper")),E=l.Css,M=l.Parser.parseHtml(t,{asDocument:x}),G=M.html;if(x){var ot=w,Ct=M.html||{},Ut=Ct.components,ie=Mt(Ct,["components"]),ae=M.head||{},Ie=ae.components,qe=Mt(ae,["components"]);G=Ut,ot.set(ie,r),ot.head.set(qe,r),ot.head.components(Ie,r),ot.docEl.set(M.root,r),ot.set({doctype:M.doctype})}if(wi.checkId(G,M.css,v.componentsById,r),M.css&&E&&!r.temporary){r.at;var Ke=Mt(r,["at"]);E.addCollection(M.css,cr(cr({},Ke),{extend:1}))}return G},i.prototype.add=function(t,r){var o=this;if(r===void 0&&(r={}),t!=null){r.keepIds=xe(xe([],r.keepIds||[],!0),lr(r.previousModels),!0),(0,wt.isString)(t)?t=this.parseString(t,r):(0,wt.isArray)(t)&&t.forEach(function(v,w){if((0,wt.isString)(v)){var x=o.parseString(v,r);t[w]=(0,wt.isArray)(x)&&!x.length?null:x}});var l=((0,wt.isArray)(t)?t:[t]).filter(Boolean).map(function(v){return o.processDef(v)});return t=(0,wt.isArray)(t)?(0,wt.flatten)(l,1):l[0],p.prototype.add.call(this,t,r)}},i.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var r=this,o=r.em,l=r.config,v=l===void 0?{}:l,w=v.processor,x=t;if(w){x=cr({},x);var E=w(x);E&&((0,wt.each)(x,function(ae,Ie){return delete x[Ie]}),(0,wt.extend)(x,E))}if(x.$$typeof&&typeof x.props=="object"){x=cr({},x),x.props=cr({},x.props);var M=o.Components,G=o.Parser,ot=G.parserHtml;(0,wt.each)(x,function(ae,Ie){(0,wt.includes)(["props","type"],Ie)||delete x[Ie]});var Ct=x.props,Ut=Ct.children;delete Ct.children,delete x.props;var ie=ot.splitPropsFromAttr(Ct);x.attributes=ie.attrs,Ut&&(x.components=Ut),x.type?M.getType(x.type)||(x.tagName=x.type,delete x.type):x.type="textnode",(0,wt.extend)(x,ie.props)}return x},i.prototype.onAdd=function(t,r,o){o===void 0&&(o={});var l=this,v=l.domc,w=l.em,x=t.getStyle(),E=w&&w.getConfig().avoidInlineStyle;if(v&&v.Component.ensureInList(t),!(0,wt.isEmpty)(x)&&!E&&w&&w.getConfig().forceClass&&!o.temporary){var M=t.cid;w.Css.setClassRule(M,x),t.setStyle({}),t.addClass(M)}if(t.__postAdd({recursive:!0}),w&&!o.temporary){var G=function(ot){w.trigger(ne.g.add,ot,o),ot.components().forEach(function(Ct){return G(Ct)})};G(t),v&&co(t)&&Lo(t)&&v.symbols.__trgEvent(v.events.symbolInstanceAdd,{component:t},!0)}},i}(q.FE);const gn=en;var Mr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wn=1,wo=2,$o=function(p){Mr(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t,r)||this,l=r.config,v=l===void 0?{}:l,w=o.get("name"),x=o.get("label");w?x||o.set("label",w):o.set("name",x);var E=o.get("name"),M=v.escapeName,G=M?M(E):i.escapeName(E);return o.set("name",G),o.em=r.em,o}return i.prototype.defaults=function(){return{name:"",label:"",type:Wn,active:!0,private:!1,protected:!1,_undo:!0}},i.prototype.isId=function(){return this.get("type")===wo},i.prototype.isClass=function(){return this.get("type")===Wn},i.prototype.getFullName=function(t){t===void 0&&(t={});var r=t.escape,o=this.get("name"),l="";switch(this.get("type")){case Wn:l=".";break;case wo:l="#";break}return l+(r?r(o):o)},i.prototype.toString=function(){return this.getFullName()},i.prototype.getName=function(){return this.get("name")||""},i.prototype.getLabel=function(){return this.get("label")||""},i.prototype.setLabel=function(t){return this.set("label",t)},i.prototype.getActive=function(){return!!this.get("active")},i.prototype.setActive=function(t){return this.set("active",t)},i.prototype.toJSON=function(t){t===void 0&&(t={});var r=this.em,o=q.Hn.prototype.toJSON.call(this,[t]),l=(0,wt.result)(this,"defaults");if(r&&r.getConfig().avoidDefaults){(0,wt.forEach)(l,function(w,x){o[x]===w&&delete o[x]}),o.label===o.name&&delete o.label;var v=(0,wt.keys)(o).length;v===1&&o.name&&(o=o.name),v===2&&o.name&&o.type&&(o=this.getFullName())}return o},i.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w\-\\:@\\/#()\.%\+\[\]]+)/gi,"-")},i.TYPE_CLASS=Wn,i.TYPE_ID=wo,i}(q.Hn);const Vo=$o;$o.prototype.idAttribute="name";var ol=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jo=function(p,i){return p.reduce(function(t,r,o){return t.concat(jo(p.slice(o+1),"".concat(i).concat(r)))},[i])},Ra=function(p){ol(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||Vo.TYPE_CLASS)},i.prototype.getStyleable=function(){return(0,wt.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},i.prototype.getValid=function(t){var r=t===void 0?{}:t,o=r.noDisabled;return(0,wt.filter)(this.models,function(l){return!l.get("private")}).filter(function(l){return o?l.get("active"):1})},i.prototype.getFullString=function(t,r){r===void 0&&(r={});var o=[],l=t||this;return l.forEach(function(v){return o.push(v.getFullName(r))}),r.sort&&o.sort(),o.join("").trim()},i.prototype.getFullName=function(t){t===void 0&&(t={});var r=t.combination,o=t.array,l=[],v=this.map(function(w){return w.getFullName(t)}).sort();return r?v.forEach(function(w,x){l=l.concat(jo(v.slice(x+1),w))}):l=v,o?l:r?l.join(","):l.join("")},i}(q.FE);const xa=Ra;Ra.prototype.model=Vo;var il=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Go=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},al=function(p){il(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},i.prototype.getId=function(){return this.get("id")},i.prototype.getLabel=function(){return this.get("label")},i}(q.Hn);const oa=al;function qi(p){var i=new Set,t=new Map,r={items:[]};p.forEach(function(l){var v=l.category;if(v){i.add(v);var w=t.get(v);w?w.push(l):t.set(v,[l])}else r.items.push(l)});var o=Array.from(i).map(function(l){return{category:l,items:t.get(l)||[]}});return Go(Go([],o,!0),[r],!1)}var si=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yi="category",Ha=function(p){si(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.initCategory=function(t){var r=t.get(yi),o=r instanceof oa;if(r&&!o){(0,wt.isString)(r)?r={id:r,label:r}:(0,pe.isObject)(r)&&!r.id&&(r.id=r.label);var l=this.getCategories().add(r);return t.set(yi,l,{silent:!0}),l}else if(o){var l=r;return this.getCategories().add(l),l}},i}(q.FE),Ns=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ts=function(p){Ns(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t,r)||this,l=r.events,v=r.em,w=l==null?void 0:l.update;return v&&w&&o.on("change",function(x,E){return v.trigger(w,{category:x,changes:x.changedAttributes(),options:E})}),o}return i.prototype.add=function(t,r){var o=(0,wt.isArray)(t)?t:[t];return o.forEach(function(l){return l&&(l.id=(0,pe.normalizeKey)("".concat(l.id)))}),p.prototype.add.call(this,t,r)},i.prototype.get=function(t){return p.prototype.get.call(this,(0,wt.isString)(t)?(0,pe.normalizeKey)(t):t)},i}(q.FE);const Ca=ts;ts.prototype.model=oa;var Ba;(function(p){p.select="trait:select",p.value="trait:value",p.categoryUpdate="trait:category:update",p.custom="trait:custom",p.all="trait"})(Ba||(Ba={}));const bi=Ba;var Vs=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ki=function(){return Ki=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ki.apply(this,arguments)},ka=function(p){Vs(i,p);function i(t,r){var o=p.call(this,t)||this,l=o.attributes,v=l.target,w=l.name;return!o.get("id")&&o.set("id",w),v&&o.setTarget(v),o.em=r,o}return i.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(i.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"category",{get:function(){var t=this.get("category");return t instanceof oa?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),i.prototype.setTarget=function(t){if(t){var r=this.attributes,o=r.name,l=r.changeProp,v=r.value,w=r.getValue;this.target=t,this.unset("target");var x=l?"change:".concat(o):"change:attributes:".concat(o);this.listenTo(t,x,this.targetUpdated);var E=v||(w?void 0:this.getValue());!(0,wt.isUndefined)(E)&&this.set({value:E},{silent:!0})}},i.prototype.getId=function(){return this.get("id")},i.prototype.getType=function(){return this.get("type")},i.prototype.getName=function(){return this.get("name")},i.prototype.getLabel=function(t){var r;t===void 0&&(t={});var o=t.locale,l=o===void 0?!0:o,v=this.getId(),w=this.get("label")||this.getName();return l&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.labels.".concat(v)))||w},i.prototype.getValue=function(t){return this.getTargetValue(t)},i.prototype.setValue=function(t,r){var o=this;r===void 0&&(r={});var l=this,v=l.component,w=l.em,x=r.partial,E={},M=this.attributes.setValue;if(M){M({value:t,component:v,editor:w==null?void 0:w.getEditor(),trait:this,partial:!!x,options:r,emitUpdate:function(){return o.targetUpdated()}});return}x&&(E.avoidStore=!0),this.setTargetValue(t,E)},i.prototype.getDefault=function(){return this.get("default")},i.prototype.getOptions=function(){return this.get("options")||[]},i.prototype.getOption=function(t){var r=this,o=(0,pe.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(l){return r.getOptionId(l)===o})[0]},i.prototype.getOptionId=function(t){return t.id||t.value},i.prototype.getOptionLabel=function(t,r){var o;r===void 0&&(r={});var l=r.locale,v=l===void 0?!0:l,w=(0,wt.isString)(t)?this.getOption(t):t,x=this.getOptionId(w),E=w.label||w.name||x,M=this.getName();return v&&((o=this.em)===null||o===void 0?void 0:o.t("traitManager.traits.options.".concat(M,".").concat(x)))||E},i.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var r=this,o=r.em,l=r.category,v=t.locale,w=v===void 0?!0:v,x=l==null?void 0:l.getId(),E=l==null?void 0:l.getLabel();return w&&(o==null?void 0:o.t("traitManager.categories.".concat(x)))||E||""},i.prototype.runCommand=function(){var t=this.em,r=this.attributes.command;if(r&&t)return(0,wt.isString)(r)?t.Commands.run(r):r(t.Editor,this)},i.prototype.props=function(){return this.attributes},i.prototype.targetUpdated=function(){var t=this,r=t.component,o=t.em,l=this.getTargetValue({useType:!0});this.set({value:l},{fromTarget:1});var v={trait:this,component:r,value:l};r.trigger(bi.value,v),o==null||o.trigger(bi.value,v),o==null||o.trigger("trait:update",v)},i.prototype.getTargetValue=function(t){t===void 0&&(t={});var r=this,o=r.component,l=r.em,v=this.getName(),w=this.get("getValue"),x;if(w?x=w({editor:l==null?void 0:l.getEditor(),trait:this,component:o}):this.changeProp?x=o.get(v):x=o.getAttributes()[v],t.useType){var E=this.getType();if(E==="checkbox"){var M=this.attributes,G=M.valueTrue,ot=M.valueFalse;!(0,wt.isUndefined)(G)&&G===x?x=!0:!(0,wt.isUndefined)(ot)&&ot===x&&(x=!1)}}return(0,wt.isUndefined)(x)?"":x},i.prototype.setTargetValue=function(t,r){var o;r===void 0&&(r={});var l=this,v=l.component,w=l.attributes,x=this.getName();if(!(0,wt.isUndefined)(t)){var E=t;if(t==="false"?E=!1:t==="true"&&(E=!0),this.getType()==="checkbox"){var M=w.valueTrue,G=w.valueFalse;E&&!(0,wt.isUndefined)(M)&&(E=M),!E&&!(0,wt.isUndefined)(G)&&(E=G)}var ot=(o={},o[x]=E,o);ot.__p=r.avoidStore?null:void 0,this.changeProp?v.set(ot,r):v.addAttributes(ot,r)}},i.prototype.setValueFromInput=function(t,r,o){r===void 0&&(r=!0),o===void 0&&(o={});var l={value:t};this.set(l,Ki(Ki({},o),{avoidStore:1})),r&&(this.set("value","",o),this.set(l,o))},i.prototype.getInitValue=function(){var t=this.component,r=this.getName(),o;if(t){var l=t.get("attributes");o=this.changeProp?t.get(r):l[r]}return o||this.get("value")||this.get("default")},i}(q.Hn);const xi=ka;var hs=function(){function p(i){i===void 0&&(i={}),this.config=i}return p.prototype.build=function(i,t){return(0,wt.isString)(i)?this.buildFromString(i,t):new xi(i,t)},p.prototype.buildFromString=function(i,t){var r={name:i,type:"text"};switch(i){case"target":r.type="select",r.default=!1,r.options=this.config.optionsTarget;break}return new xi(r,t)},p}();const gs=hs;var Yi=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sl=function(p){Yi(i,p);function i(t,r){var o=p.call(this,t)||this;o.categories=new Ca;var l=r.em;o.em=l,o.categories=new Ca([],{em:l,events:{update:bi.categoryUpdate}}),o.on("add",o.handleAdd),o.on("reset",o.handleReset);var v=o.module,w=v==null?void 0:v.getConfig();return o.tf=new gs(w),o}return Object.defineProperty(i.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),i.prototype.getCategories=function(){return this.categories},i.prototype.handleReset=function(t,r){var o=r===void 0?{}:r,l=o.previousModels,v=l===void 0?[]:l;v.forEach(function(w){return w.trigger("remove")})},i.prototype.handleAdd=function(t){t.em=this.em;var r=this.target;r&&(t.target=r),this.initCategory(t)},i.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(r){return r.setTarget(t)})},i.prototype.add=function(t,r){if(t!=null){var o=this,l=o.target,v=o.em;if((0,wt.isArray)(t)){for(var w=[],x=0,E=t.length;x<E;x++){var M=t[x];w[x]=M instanceof xi?M:this.tf.build(M,v),w[x].setTarget(l)}return p.prototype.add.call(this,w,r)}var G=t instanceof xi?t:this.tf.build(t,v);return G.setTarget(l),p.prototype.add.call(this,G,r)}},i}(Ha);const Ci=sl;var Zo=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),An=function(){return An=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},An.apply(this,arguments)},vs=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},sn=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},Do=function(p){return p.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},li=function(p){return!!(p!=null&&p.getConfig().avoidInlineStyle)},ci="component:drag",Gn="__symbols",pn="__symbol",ui="__symbol_ovrd",Ii=ne.g.update,Hi=ne.g.updateInside,ia=function(p){Zo(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this;(0,wt.bindAll)(o,"__upSymbProps","__upSymbCls","__upSymbComps");var l=r.em,v=o.parent(),w=v==null?void 0:v.attributes,x=o.get("propagate");if(x&&o.set("propagate",(0,wt.isArray)(x)?x:[x]),w&&w.propagate&&!x){var E={},M=w.propagate;M.forEach(function(ie){return E[ie]=v.get(ie)}),E.propagate=M,o.set(An(An({},E),t))}if(r&&r.config&&r.config.voidElements.indexOf(o.get("tagName"))>=0&&o.set("void",!0),r.em=l,o.opt=r,o.em=l,o.frame=r.frame,o.config=r.config||{},o.set("attributes",An(An({},(0,wt.result)(o,"defaults").attributes||{}),o.get("attributes")||{})),o.ccid=i.createId(o,r),o.initClasses(),o.initComponents(),o.initTraits(),o.initToolbar(),o.initScriptProps(),o.listenTo(o,"change:script",o.scriptUpdated),o.listenTo(o,"change:tagName",o.tagUpdated),o.listenTo(o,"change:attributes",o.attrUpdated),o.listenTo(o,"change:attributes:id",o._idUpdated),o.on("change:toolbar",o.__emitUpdateTlb),o.on("change",o.__onChange),o.on(Hi,o.__propToParent),o.set("status",""),o.views=[],["classes","traits","components"].forEach(function(ie){var ae="add remove ".concat(ie!=="components"?"change":"");o.listenTo(o.get(ie),ae.trim(),function(){for(var Ie=[],qe=0;qe<arguments.length;qe++)Ie[qe]=arguments[qe];return o.emitUpdate.apply(o,sn([ie],Ie,!1))})}),!r.temporary){var G=l&&l.Css,ot=o.attributes,Ct=ot.styles,Ut=ot.type;Ct&&G&&G.addCollection(Ct,{avoidUpdateStyle:!0},{group:"cmp:".concat(Ut)}),o.__postAdd(),o.init(),Jn(o)&&fn(o),l==null||l.trigger(ne.g.create,o,r)}return o}return Object.defineProperty(i.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[pn]=0,t[Gn]=0,t[ui]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.updated=function(t,r,o){},i.prototype.removed=function(){},i.prototype.__postAdd=function(t){t===void 0&&(t={});var r=this.em,o=r==null?void 0:r.UndoManager,l=this.components();o&&!this.__hasUm&&(o.add(l),o.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&l.map(function(v){return v.__postAdd(t)})},i.prototype.__postRemove=function(){var t=this.em,r=t==null?void 0:t.UndoManager;r&&(r.remove(this.components()),r.remove(this.getSelectors()),delete this.__hasUm)},i.prototype.__onChange=function(t,r){var o=this,l=this.changedAttributes()||{};(0,wt.keys)(l).forEach(function(v){return o.emitUpdate(v)}),["status","open","toolbar","traits"].forEach(function(v){return delete l[v]}),(0,pe.isEmptyObj)(l)||(this.__changesUp(r),this.__propSelfToParent({component:this,changed:l,options:r}))},i.prototype.__onStyleChange=function(t){var r=this,o=this.em;if(o){var l="component:styleUpdate",v=(0,wt.keys)(t),w={style:t};o.trigger(l,this,w),v.forEach(function(x){return o.trigger("".concat(l,":").concat(x),r,w)})}},i.prototype.__changesUp=function(t){var r=this,o=r.em,l=r.frame;[l,o].forEach(function(v){return v&&v.changesUp(t)})},i.prototype.__propSelfToParent=function(t){this.trigger(Ii,t),this.__propToParent(t)},i.prototype.__propToParent=function(t){var r=this.parent();r&&r.trigger(Hi,t)},i.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},i.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},i.prototype.__upSymbProps=function(t,r){r===void 0&&(r={}),Hr(this,r)},i.prototype.__upSymbCls=function(t,r,o){o===void 0&&(o={}),wn(this,o)},i.prototype.__upSymbComps=function(t,r,o){Nn(this,t,r,o)},i.prototype.is=function(t){return this.get("type")==t},i.prototype.props=function(){return this.attributes},i.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},i.prototype.setDragMode=function(t){return this.set("dmode",t)},i.prototype.getDragMode=function(){return this.get("dmode")||""},i.prototype.setSymbolOverride=function(t){var r;this.set(ui,(r=(0,wt.isString)(t)?[t]:t)!==null&&r!==void 0?r:0)},i.prototype.getSymbolOverride=function(){return this.get(ui)},i.prototype.find=function(t){var r,o=[],l=(r=this.view)===null||r===void 0?void 0:r.$el.find(t);return l==null||l.each(function(v){var w=l.eq(v),x=w.data("model");x&&o.push(x)}),o},i.prototype.findType=function(t){var r=[],o=function(l){return l.forEach(function(v){v.is(t)&&r.push(v),o(v.components())})};return o(this.components()),r},i.prototype.closest=function(t){var r,o=(r=this.view)===null||r===void 0?void 0:r.$el.closest(t);return o!=null&&o.length?o.data("model"):void 0},i.prototype.closestType=function(t){for(var r=this.parent();r&&!r.is(t);)r=r.parent();return r},i.prototype.contains=function(t){var r=!1;if(!t)return r;var o=function(l){!r&&l.forEach(function(v){v===t&&(r=!0),!r&&o(v.components())})};return o(this.components()),r},i.prototype.tagUpdated=function(){this.trigger("rerender")},i.prototype.replaceWith=function(t,r){r===void 0&&(r={});var o=this.collection,l=o.indexOf(this);o.remove(this);var v=o.add(t,An(An({},r),{at:l}));return(0,wt.isArray)(v)?v:[v]},i.prototype.attrUpdated=function(t,r,o){var l=this;o===void 0&&(o={});var v=this.get("attributes"),w=v.class;w&&this.setClass(w),delete v.class;var x=v.style;x&&this.setStyle(x,o),delete v.style;var E=An({},this.previous("attributes")),M=(0,pe.shallowDiff)(E,this.get("attributes"));(0,wt.keys)(M).forEach(function(G){var ot,Ct="attributes:".concat(G);l.trigger("change:".concat(Ct),l,M[G],o),(ot=l.em)===null||ot===void 0||ot.trigger("".concat(Ii,":").concat(Ct),l,M[G],o)})},i.prototype.setAttributes=function(t,r){return r===void 0&&(r={}),this.set("attributes",An({},t),r),this},i.prototype.addAttributes=function(t,r){return r===void 0&&(r={}),this.setAttributes(An(An({},this.getAttributes({noClass:!0})),t),r)},i.prototype.removeAttributes=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var o=Array.isArray(t)?t:[t],l=this.getAttributes();return o.map(function(v){return delete l[v]}),this.setAttributes(l,r)},i.prototype.getStyle=function(t,r){t===void 0&&(t={}),r===void 0&&(r={});var o=this.em,l=(0,wt.isString)(t)?t:"",v=l?r:t;if(li(o)&&!v.inline){var w=o.get("state"),x=o.Css,E=x.getIdRule(this.getId(),An({state:w},v));return this.rule=E,E?E.getStyle(l):{}}return p.prototype.getStyle.call(this,l)},i.prototype.setStyle=function(t,r){var o=this;t===void 0&&(t={}),r===void 0&&(r={});var l=this,v=l.opt,w=l.em;if(li(w)&&!v.temporary&&!r.inline){var x=this.get("style")||{};t=(0,wt.isString)(t)?this.parseStyle(t):t,t=An(An({},t),x);var E=w.get("state"),M=w.Css,G=this.getStyle(r);this.rule=M.setIdRule(this.getId(),t,An({state:E},r));var ot=(0,pe.shallowDiff)(G,t);this.set("style","",{silent:!0}),(0,wt.keys)(ot).forEach(function(Ct){return o.trigger("change:style:".concat(Ct))})}else t=p.prototype.setStyle.apply(this,arguments);return v.temporary||this.__onStyleChange(r.addStyle||t),t},i.prototype.getAttributes=function(t){t===void 0&&(t={});var r=this.em,o=[],l=An({},this.get("attributes")),v=r==null?void 0:r.Selectors,w=this.getId();if(t.noClass?delete l.class:(this.classes.forEach(function(M){return o.push((0,wt.isString)(M)?M:M.getName())}),o.length&&(l.class=o.join(" "))),!t.noStyle){var x=this.getStyle({inline:!0});(0,pe.isObject)(x)&&!(0,pe.isEmptyObj)(x)&&(l.style=this.styleToString({inline:!0}))}if(!(0,wt.has)(l,"id")){var E=!1;(li(r)||!(0,wt.isEmpty)(this.getStyle()))&&(E=!!(v!=null&&v.get(w,v.Selector.TYPE_ID))),(Jn(this)||this.get("script-export")||this.get("script"))&&(E=!0),E&&(l.id=w)}return l},i.prototype.addClass=function(t){var r=this.em.Selectors.addClass(t);return this.classes.add(r)},i.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},i.prototype.removeClass=function(t){var r=[];t=(0,wt.isArray)(t)?t:[t];var o=this.classes,l=Vo.TYPE_CLASS;return t.forEach(function(v){var w=v.split(" ");w.forEach(function(x){var E=o.where({name:x,type:l})[0];E&&r.push(o.remove(E))})}),r},i.prototype.getClasses=function(){var t=this.getAttributes(),r=t.class;return r?r.split(" "):[]},i.prototype.initClasses=function(t,r,o){o===void 0&&(o={});var l="change:classes",v=this.get("attributes")||{},w=v.class,x=vs(v,["class"]),E=[this,l,this.initClasses],M=this.get("classes")||w||[],G=(0,wt.isString)(M)?M.split(" "):M;this.stopListening.apply(this,E);var ot=this.normalizeClasses(G),Ct=new xa([]);return this.set("classes",Ct,o),Ct.add(ot),Ct.on("add remove reset",this.__upSymbCls),w&&ot.length&&this.set("attributes",x),this.listenTo.apply(this,E),this},i.prototype.initComponents=function(){var t="change:components",r=[this,t,this.initComponents];this.stopListening.apply(this,r);var o=new gn([],this.opt);o.parent=this;var l=this.get("components"),v=!this.opt.avoidChildren;return this.set("components",o),v&&l&&o.add((0,wt.isFunction)(l)?l(this):l,this.opt),o.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,r),this},i.prototype.initTraits=function(t){var r=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var l=An({},this.get("attributes")),v=this.traits;return v.each(function(w){if(!w.changeProp){var x=w.getName(),E=w.getInitValue();x&&E&&(l[x]=E)}}),v.length&&this.set("attributes",l),this.on(o,this.initTraits),t&&r&&r.trigger("component:toggled"),this},i.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",r=["change:".concat(t),this.initScriptProps];this.off.apply(this,r);var o=this.previous(t)||[],l=this.get(t)||[],v=o.map(function(x){return"change:".concat(x)}).join(" "),w=l.map(function(x){return"change:".concat(x)}).join(" ");v&&this.off(v,this.__scriptPropsChange),w&&this.on(w,this.__scriptPropsChange),this.on.apply(this,r)}},i.prototype.__scriptPropsChange=function(t,r,o){o===void 0&&(o={}),!o.avoidStore&&this.trigger("rerender")},i.prototype.append=function(t,r){r===void 0&&(r={});var o=(0,wt.isArray)(t)?sn([],t,!0):[t],l=o.map(function(w){return(0,wt.isString)(w)||w.collection&&w.collection.remove(w,{temporary:!0}),w}),v=this.components().add(l,An({action:ne.W.add},r));return(0,wt.isArray)(v)?v:[v]},i.prototype.components=function(t,r){r===void 0&&(r={});var o=this.get("components");return(0,wt.isUndefined)(t)?o:(o.reset(void 0,r),t?this.append(t,r):[])},i.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},i.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},i.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},i.prototype.parent=function(t){t===void 0&&(t={});var r=this.collection||t.prev&&this.prevColl;return r?r.parent:void 0},i.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},i.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},i.prototype.initToolbar=function(){var t=this.em,r=this,o=t&&t.getConfig().stylePrefix||"";if(!r.get("toolbar")&&t){var l=[];r.collection&&l.push({label:t.getIcon("arrowUp"),command:function(v){return v.runCommand("core:component-exit",{force:1})}}),r.get("draggable")&&l.push({attributes:{class:"".concat(o,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),r.get("copyable")&&l.push({label:t.getIcon("copy"),command:"tlb-clone"}),r.get("removable")&&l.push({label:t.getIcon("delete"),command:"tlb-delete"}),r.set("toolbar",l)}},i.prototype.__loadTraits=function(t,r){r===void 0&&(r={});var o=t||this.traits;if(!(o instanceof Ci)){o=(0,wt.isFunction)(o)?o(this):o;var l=new Ci([],this.opt);l.setTarget(this),o.length&&(o.forEach(function(v){return v.attributes&&delete v.attributes.value}),l.add(o)),this.set({traits:l},r)}return this},i.prototype.getTraits=function(){return this.__loadTraits(),sn([],this.traits.models,!0)},i.prototype.setTraits=function(t){var r=(0,wt.isArray)(t)?t:[t];return this.set({traits:r}),this.getTraits()},i.prototype.getTrait=function(t){return this.getTraits().filter(function(r){return r.get("id")===t||r.get("name")===t})[0]||null},i.prototype.updateTrait=function(t,r){var o,l=this.getTrait(t);return l&&l.set(r),(o=this.em)===null||o===void 0||o.trigger("component:toggled"),this},i.prototype.getTraitIndex=function(t){var r=this.getTrait(t);return r?this.traits.indexOf(r):-1},i.prototype.removeTrait=function(t){var r=this,o,l=(0,wt.isArray)(t)?t:[t],v=l.map(function(E){return r.getTrait(E)}),w=this.traits,x=v.length?w.remove(v):[];return(o=this.em)===null||o===void 0||o.trigger("component:toggled"),(0,wt.isArray)(x)?x:[x]},i.prototype.addTrait=function(t,r){var o;r===void 0&&(r={}),this.__loadTraits();var l=this.traits.add(t,r);return(o=this.em)===null||o===void 0||o.trigger("component:toggled"),(0,wt.isArray)(l)?l:[l]},i.prototype.normalizeClasses=function(t){var r=[],o=this.em,l=o==null?void 0:o.Selectors;return l?t.models?sn([],t.models,!0):(t.forEach(function(v){return r.push(l.add(v))}),r):[]},i.prototype.clone=function(t){t===void 0&&(t={});var r=this.em,o=An({},this.attributes),l=An({},this.opt),v=this.getId(),w=r==null?void 0:r.Css;o.attributes=An({},o.attributes),delete o.attributes.id,o.components=[],o.classes=[],o.traits=[],Lo(this)&&(t.symbol=!0),this.get("components").each(function(Ut,ie){o.components[ie]=Ut.clone(An(An({},t),{_inner:1}))}),this.get("traits").each(function(Ut,ie){o.traits[ie]=Ut.clone()}),this.get("classes").each(function(Ut,ie){o.classes[ie]=Ut.get("name")}),o.status="",l.collection=null;var x=new this.constructor(o,l),E="#".concat(x.getId()),M=w?w.getRules("#".concat(v)):[];M.forEach(function(Ut){var ie=Ut.clone();ie.set("selectors",[E]),w.getAll().add(ie)}),x.set(Gn,0);var G=Oo(this),ot=bo(this);!t.symbol&&(G||ot)?(x.set(pn,0),x.set(Gn,0)):G?(G.set(Gn,sn(sn([],bo(G),!0),[x],!1)),fn(x)):t.symbol&&($r(this)?(this.set(Gn,sn(sn([],ot,!0),[x],!1)),x.set(pn,this),fn(x)):t.symbolInv?(this.set(Gn,[x]),x.set(pn,this),[this,x].map(function(Ut){return fn(Ut)})):(x.set(Gn,[this]),[this,x].map(function(Ut){return fn(Ut)}),this.set(pn,x)));var Ct="component:clone";return r&&r.trigger(Ct,x),this.trigger(Ct,x),x},i.prototype.getName=function(t){t===void 0&&(t={});var r=this.em,o=this.attributes,l=o.type,v=o.tagName,w=o.name,x=l||v,E=l?"":v,M="domComponents.names.",G=w&&(r==null?void 0:r.t("".concat(M).concat(w))),ot=E&&(r==null?void 0:r.t("".concat(M).concat(E))),Ct=r&&(r.t("".concat(M).concat(l))||r.t("".concat(M).concat(v))),Ut=this.get("custom-name");return(t.noCustom?"":Ut)||G||w||ot||(0,pe.capitalize)(E)||Ct||(0,pe.capitalize)(x)},i.prototype.setName=function(t,r){r===void 0&&(r={}),this.set("custom-name",t,r)},i.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},i.prototype.toHTML=function(t){t===void 0&&(t={});var r=this,o=[],l=t.tag,v=l||r.get("tagName"),w=r.get("void"),x=t.attributes,E=this.getAttrToHTML(t);if(delete t.tag,x&&((0,wt.isFunction)(x)?E=x(r,E)||{}:(0,pe.isObject)(x)&&(E=x)),t.withProps){var M=this.toJSON();(0,wt.forEach)(M,function(qe,Ke){var Or=["classes","attributes","components"];Ke[0]!=="_"&&Or.indexOf(Ke)<0&&(E["data-gjs-".concat(Ke)]=(0,wt.isArray)(qe)||(0,pe.isObject)(qe)?JSON.stringify(qe):(0,wt.isBoolean)(qe)?"".concat(qe):qe)})}for(var G in E){var ot=E[G];if(!(0,wt.isUndefined)(ot)&&ot!==null)if((0,wt.isBoolean)(ot))ot&&o.push(G);else{var Ct="";if(t.altQuoteAttr&&(0,wt.isString)(ot)&&ot.indexOf('"')>=0)Ct="'".concat(ot.replace(/'/g,"&apos;"),"'");else{var Ut=(0,wt.isString)(ot)?ot.replace(/"/g,"&quot;"):ot;Ct='"'.concat(Ut,'"')}o.push("".concat(G,"=").concat(Ct))}}var ie=o.length?" ".concat(o.join(" ")):"",ae=r.getInnerHTML(t),Ie="<".concat(v).concat(ie).concat(w?"/":"",">").concat(ae);return!w&&(Ie+="</".concat(v,">")),Ie},i.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},i.prototype.__innerHTML=function(t){t===void 0&&(t={});var r=this.components();return r.length?r.map(function(o){return o.toHTML(t)}).join(""):this.content},i.prototype.getAttrToHTML=function(t){var r=this.getAttributes();return li(this.em)&&(t==null?void 0:t.keepInlineStyle)!==!0&&delete r.style,r},i.prototype.toJSON=function(t){t===void 0&&(t={});var r=Jt.Model.prototype.toJSON.call(this,t);if(r.attributes=this.getAttributes(),delete r.attributes.class,delete r.toolbar,delete r.traits,delete r.status,delete r.open,delete r._undoexc,delete r.delegate,!t.fromUndo){var o=r[pn],l=r[Gn];l&&(0,wt.isArray)(l)&&(r[Gn]=l.filter(function(v){return v}).map(function(v){return v.getId?v.getId():v})),o&&!(0,wt.isString)(o)&&(r[pn]=o.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(r),r},i.prototype.getChangedProps=function(t){var r=t||Jt.Model.prototype.toJSON.apply(this),o=(0,wt.result)(this,"defaults");return(0,wt.forEach)(o,function(l,v){["type"].indexOf(v)===-1&&r[v]===l&&delete r[v]}),(0,wt.isEmpty)(r.type)&&delete r.type,(0,wt.forEach)(["attributes","style"],function(l){(0,wt.isEmpty)(o[l])&&(0,wt.isEmpty)(r[l])&&delete r[l]}),(0,wt.forEach)(["classes","components"],function(l){(!r[l]||(0,wt.isEmpty)(o[l])&&!r[l].length)&&delete r[l]}),r},i.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},i.prototype.setId=function(t,r){var o=An({},this.get("attributes"));return o.id=t,this.set("attributes",o,r),this},i.prototype.getEl=function(t){var r=this.getView(t);return r&&r.el},i.prototype.getView=function(t){var r=this,o=r.view,l=r.views,v=r.em,w=t||(v==null?void 0:v.getCurrentFrameModel());return w&&(o=l.filter(function(x){return x.frameView===w.view})[0]),o},i.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),r=t==null?void 0:t.model;return this.getView(r)},i.prototype.__getScriptProps=function(){var t=this.props(),r=this.get("script-props")||[];return r.reduce(function(o,l){return o[l]=t[l],o},{})},i.prototype.getScriptString=function(t){var r=this,o=t||this.get("script")||"";if(!o)return o;if(this.get("script-props"))o=o.toString().trim();else{if((0,wt.isFunction)(o)){var l=o.toString().trim();l=l.slice(l.indexOf("{")+1,l.lastIndexOf("}")),o=l.trim()}var v=this.em.getConfig(),w=Do(v.tagVarStart||"{[ "),x=Do(v.tagVarEnd||" ]}"),E=new RegExp("".concat(w,"([\\w\\d-]*)").concat(x),"g");o=o.replace(E,function(M,G){r.scriptUpdated();var ot=r.attributes[G]||"";return(0,wt.isArray)(ot)||typeof ot=="object"?JSON.stringify(ot):ot})}return o},i.prototype.emitUpdate=function(t){for(var r,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];var v=this.em,w=Ii+(t?":".concat(t):""),x=t&&this.get(t);t&&this.updated.apply(this,sn([t,x,t&&this.previous(t)],o,!1)),this.trigger.apply(this,sn([w],o,!1)),v&&v.trigger.apply(v,sn([w,this],o,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(r={},r[t]=x,r),options:o[2]||o[1]||{}})},i.prototype.onAll=function(t){return(0,wt.isFunction)(t)&&(t(this),this.components().forEach(function(r){return r.onAll(t)})),this},i.prototype.forEachChild=function(t){(0,wt.isFunction)(t)&&this.components().forEach(function(r){t(r),r.forEachChild(t)})},i.prototype.remove=function(t){var r=this;t===void 0&&(t={});var o=this.em,l=this.collection,v=function(){l&&l.remove(r,An({action:ne.W.remove},t)),l||(r.components("",t),r.components().removeChildren(r,void 0,t))},w=An({},t);return[this,o].map(function(x){return x.trigger(ne.g.removeBefore,r,v,w)}),!w.abort&&v(),this},i.prototype.move=function(t,r){if(r===void 0&&(r={}),t){var o=r.at,l=this.index(),v=t===this.parent(),w=l===o||l===o-1;if(!v||!w){v&&o&&o>l&&(r.at=o-1);var x=ne.W.move;this.remove({action:x,temporary:1}),t.append(this,An({action:x},r)),this.emitUpdate()}}return this},i.prototype.isInstanceOf=function(t){var r,o,l=(o=(r=this.em)===null||r===void 0?void 0:r.Components.getType(t))===null||o===void 0?void 0:o.model;if(!l)return!1;var v=this.constructor.typeExtends;return this instanceof l||v.has(t)},i.prototype.isChildOf=function(t){for(var r=(0,wt.isString)(t),o=this.parent();o;){if(r){if(o.isInstanceOf(t))return!0}else if(o===t)return!0;o=o.parent()}return!1},i.prototype.resetId=function(t){var r=this.em,o=this.getId();if(!o)return this;var l=i.createId(this);this.setId(l);var v=r==null?void 0:r.Css.getIdRule(o),w=v==null?void 0:v.get("selectors").at(0);return w==null||w.set("name",l),this},i.prototype._getStyleRule=function(t){var r=t===void 0?{}:t,o=r.id,l=this.em,v=o||this.getId();return l==null?void 0:l.Css.getIdRule(v)},i.prototype._getStyleSelector=function(t){var r=this._getStyleRule(t);return r==null?void 0:r.get("selectors").at(0)},i.prototype._idUpdated=function(t,r,o){if(o===void 0&&(o={}),!o.idUpdate){var l=this.ccid,v=(this.get("attributes")||{}).id,w=(this.previous("attributes")||{}).id||l,x=i.getList(this);if(x[v]||!v&&w)return this.setId(w,{idUpdate:!0});delete x[w],x[v]=this,this.ccid=v;var E=this._getStyleSelector({id:w});E&&E.set({name:v,label:v})}},i.getDefaults=function(){return(0,wt.result)(this.prototype,"defaults")},i.isComponent=function(t,r){return{tagName:(0,pe.toLowerCase)(t.tagName)}},i.ensureInList=function(t){var r=i.getList(t),o=t.getId(),l=r[o];if(!l)r[o]=t;else if(l!==t){var v=i.getIncrementId(o,r);t.setId(v),r[v]=t}t.components().forEach(function(w){return i.ensureInList(w)})},i.createId=function(t,r){r===void 0&&(r={});var o=i.getList(t),l=r.idMap,v=l===void 0?{}:l,w=t.get("attributes").id,x;return w?(x=i.getIncrementId(w,o,r),t.setId(x),w!==x&&(v[w]=x)):x=i.getNewId(o),o[x]=t,x},i.getNewId=function(t){for(var r=Object.keys(t).length,o=r.toString().length+2,l=(Math.random()+1.1).toString(36).slice(-o),v="i".concat(l);t[v];)v=i.getNewId(t);return v},i.getIncrementId=function(t,r,o){o===void 0&&(o={});var l=o.keepIds,v=l===void 0?[]:l,w=1,x=t;if(v.indexOf(t)<0)for(;r[x];)w++,x="".concat(t,"-").concat(w);return x},i.getList=function(t){var r,o=t.em,l=o==null?void 0:o.Components;return(r=l==null?void 0:l.componentsById)!==null&&r!==void 0?r:{}},i.checkId=function(t,r,o,l){r===void 0&&(r=[]),o===void 0&&(o={}),l===void 0&&(l={});var v=(0,wt.isArray)(t)?t:[t],w=l.keepIds,x=w===void 0?[]:w,E=l.idMap,M=E===void 0?{}:E;v.forEach(function(G){G.attributes;var ot=G.attributes,Ct=ot===void 0?{}:ot,Ut=G.components,ie=Ct.id;if(ie&&o[ie]&&x.indexOf(ie)<0){var ae=i.getIncrementId(ie,o);M[ie]=ae,Ct.id=ae,(0,wt.isArray)(r)&&r.forEach(function(Ie){var qe=Ie.selectors;qe.forEach(function(Ke,Or){Ke==="#".concat(ie)&&(qe[Or]="#".concat(ae))})})}Ut&&i.checkId(Ut,r,o,l)})},i.typeExtends=new Set,i}(Mo);const wi=ia;var Si=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),es=function(){return es=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},es.apply(this,arguments)},fi="head",ll=["title","style","base","link","meta","script","noscript"],Dl=function(p){Si(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return es(es({},p.prototype.defaults),{type:fi,tagName:fi,draggable:!1,highlightable:!1,droppable:function(t){var r=t.tagName;return!r||ll.includes((0,pe.toLowerCase)(r))}})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===fi},i}(wi);const Zi=Dl;var rs=function(){return rs=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},rs.apply(this,arguments)},Ro=function(){function p(i,t){var r=this;this.em=i,this.canvas=i.Canvas;var o=t||this.canvas.getFrames().map(function(v){return v.getComponent().getEl()}),l=Array.isArray(o)?o:[o];this.el=l[0],this.counter=0,(0,wt.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),l.forEach(function(v){return r.toggleEffects(v,!0)})}return p.prototype.toggleEffects=function(i,t){var r={on:tr.on,off:tr.S1},o=t?"on":"off";r[o](i,"dragenter",this.handleDragEnter),r[o](i,"dragover",this.handleDragOver),r[o](i,"drop",this.handleDrop),r[o](i,"dragleave",this.handleDragLeave)},p.prototype.__customTglEff=function(i){var t,r=i?tr.on:tr.S1,o=this.el.ownerDocument,l=(t=o.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=i?{onStart:function(v){var w=v.sorter;(0,tr.on)(l,"pointermove",w.onMove)},onEnd:function(v){var w=v.sorter;(0,tr.S1)(l,"pointermove",w.onMove)},customTarget:function(v){var w=v.event;return o.elementFromPoint(w.clientX,w.clientY)}}:null,r(l,"pointerenter",this.handleDragEnter),r(l,"pointermove",this.handleDragOver),r(document,"pointerup",this.handleDrop),r(l,"pointerout",this.handleDragLeave)},p.prototype.startCustom=function(){this.__customTglEff(!0)},p.prototype.endCustom=function(i){this.over?this.endDrop(i):this.__customTglEff(!1)},p.prototype.endDrop=function(i,t){var r=this,o=r.em,l=r.dragStop;this.counter=0,l&&l(i||!this.over),this.__customTglEff(!1),o.trigger("canvas:dragend",t)},p.prototype.handleDragLeave=function(i){this.updateCounter(-1,i)},p.prototype.updateCounter=function(i,t){this.counter+=i,this.counter===0&&this.endDrop(!0,t)},p.prototype.handleDragEnter=function(i){var t=this,r=this,o=r.em,l=r.canvas,v=i.dataTransfer,w=o.get("dragContent");if(!(!w&&!l.getConfig().allowExternalDrop)&&(this.updateCounter(1,i),!this.over)){this.over=!0;var x=o.Utils,E=w||"<br>",M,G;if(o.stopDefault(),o.inAbsoluteMode()){var ot=o.Components.getWrapper(),Ct=ot.append({})[0],Ut=o.Commands.run("core:component-drag",{event:i,guidesInfo:1,center:1,target:Ct,onEnd:function(ae,Ie,qe){var Ke=qe.cancelled,Or;if(!Ke){Or=ot.append(E)[0];var Gr=l.getOffset(),bn=Ct.getStyle(),Tn=bn.top,Vr=bn.left,Cn=bn.position,Hn=(0,tr.GX)(ae.target),Ko=parseInt("".concat(parseFloat(Vr)+Hn.x-Gr.left),10),qr=parseInt("".concat(parseFloat(Tn)+Hn.y-Gr.top),10);Or.addStyle({left:Ko+"px",top:qr+"px",position:Cn})}t.handleDragEnd(Or,v),Ct.remove()}});M=function(ae){return Ut.stop(i,{cancel:ae})},G=function(ae){return E=ae}}else{var ie=new x.Sorter(rs({em:o,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:l.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(ae){return t.handleDragEnd(ae,v)},document:this.el.ownerDocument},this.sortOpts||{}));ie.setDropContent(E),ie.startSort(),this.sorter=ie,M=function(ae){ae&&(ie.moved=!1),ie.endMove()},G=function(ae){return ie.setDropContent(ae)}}this.dragStop=M,this.dragContent=G,o.trigger("canvas:dragenter",v,E)}},p.prototype.handleDragEnd=function(i,t){var r=this.em;this.over=!1,i&&(r.set("dragResult",i),r.trigger("canvas:drop",t,i)),r.runDefault({preserveSelected:1})},p.prototype.handleDragOver=function(i){i.preventDefault(),this.em.trigger("canvas:dragover",i)},p.prototype.handleDrop=function(i){i.preventDefault();var t=this.dragContent,r=i.dataTransfer,o=this.getContentByData(r).content;i.target.style.border="",o&&t&&t(o),this.endDrop(!o,i)},p.prototype.getContentByData=function(i){var t=this.em,r=i&&i.types,o=i&&i.files||[],l=t.get("dragContent"),v=i&&i.getData("text");if(o.length){v=[];for(var w=0;w<o.length;w++){var x=o[w],E=x.type.split("/")[0];E=="image"&&v.push({type:E,file:x,attributes:{alt:x.name}})}}else if(l)v=l;else if((0,wt.indexOf)(r,"text/html")>=0)v=i&&i.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,wt.indexOf)(r,"text/uri-list")>=0)v={type:"link",attributes:{href:v},content:v};else if((0,wt.indexOf)(r,"text/json")>=0){var M=i&&i.getData("text/json");M&&(v=JSON.parse(M))}else r.length===1&&r[0]==="text/plain"&&(v="<div>".concat(v,"</div>"));var G={content:v};return t.trigger("canvas:dragdata",i,G),G},p}();const Fs=Ro;var Xo=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ni=function(){return Ni=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ni.apply(this,arguments)},ns=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},aa=function(p){Xo(i,p);function i(t,r){var o=p.call(this,{model:t})||this;o.dragging=!1,o.loaded=!1,o.lastMaxHeight=0,o.tools={},(0,wt.bindAll)(o,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var l=o.el;o.module._config=Ni(Ni({},o.config||{}),{frameView:o}),o.frameWrapView=r,o.showGlobalTools=(0,wt.debounce)(o.showGlobalTools.bind(o),50);var v=o.getCanvasModel();return o.listenTo(t,"change:head",o.updateHead),o.listenTo(v,"change:styles",o.renderStyles),t.view=o,(0,pe.setViewEl)(l,o),o}return Object.defineProperty(i.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),i.prototype.getBoxRect=function(){var t=this,r=t.el,o=t.module,l=o.getCanvasView(),v=o.getCoords(),w=r.getBoundingClientRect(),x=l.getCanvasOffset(),E=l.getViewportDelta(),M=o.getZoomMultiplier(),G=(w.x-x.left-E.x-v.x)*M,ot=(w.y-x.top-E.y-v.y)*M,Ct=w.width*M,Ut=w.height*M;return{x:G,y:ot,width:Ct,height:Ut}},i.prototype.updateHead=function(){var t=this.model,r=this.getHead(),o=[],l=[],v=t.head,w=t.previous("head"),x=function(M){return M===void 0&&(M={}),Object.keys(M).sort().map(function(G){return"[".concat(G,'="').concat(M[G],'"]')}).join("")},E=function(M,G,ot){M.forEach(function(Ct){var Ut=Ct.tag,ie=Ct.attributes,ae=G.some(function(Ie){return Ie.tag===Ut&&x(Ie.attributes)===x(ie)});!ae&&ot.push(Ct)})};E(v,w,l),E(w,v,o),o.forEach(function(M){var G,ot=r.querySelector("".concat(M.tag).concat(x(M.attributes)));(G=ot==null?void 0:ot.parentNode)===null||G===void 0||G.removeChild(ot)}),(0,tr.SJ)(r,l)},i.prototype.getEl=function(){return this.el},i.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},i.prototype.getWindow=function(){return this.getEl().contentWindow},i.prototype.getDoc=function(){return this.getEl().contentDocument},i.prototype.getHead=function(){return this.getDoc().querySelector("head")},i.prototype.getBody=function(){return this.getDoc().querySelector("body")},i.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},i.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,tr.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},i.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},i.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},i.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},i.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},i.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},i.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},i.prototype.getOffsetRect=function(){var t=this.el,r=this.getBody(),o=r.scrollTop,l=r.scrollLeft,v=t.offsetHeight,w=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:v,width:w,scrollTop:o,scrollLeft:l,scrollBottom:o+v,scrollRight:l+w}},i.prototype._getTool=function(t){var r=this.tools,o=this.getToolsEl();return r[t]||(r[t]=o.querySelector(t)),r[t]},i.prototype.remove=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),wr.prototype.remove.apply(this,r),this},i.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},i.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,r=this.em.Canvas,o=this.getWindow(),l=o.pageYOffset,v=t||0,w=r.getConfig().autoscrollLimit,x=this.getRect().height-w,E=l;if(v<w&&(E-=w-v),v>x&&(E+=v-x),!(0,wt.isUndefined)(t)&&E!==l&&E>0&&E<this.lastMaxHeight){var M=this.getGlobalToolsEl();M.style.opacity="0",this.showGlobalTools(),o.scrollTo(0,E),r.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},i.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,tr.VB)(t).clientY*this.em.getZoomDecimal()},i.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},i.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},i.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var r=this.getWindow(),o=t?"on":"off",l={on:tr.on,off:tr.S1};l[o](r,"mousemove dragover",this.updateClientY),l[o](r,"mouseup",this.stopAutoscroll)},i.prototype.render=function(){var t=this,r=t.$el,o=t.ppfx,l=t.em;return r.attr({class:"".concat(o,"frame")}),this.renderScripts(),l.trigger("frame:render",this),this},i.prototype.renderScripts=function(){var t=this,r=this,o=r.el,l=r.model,v=r.em,w="frame:load",x={el:o,model:l,view:this},E=this.getCanvasModel(),M=function(G){var ot;if(G.length>0){var Ct=G.shift(),Ut=(0,tr.ut)("script",Ni({type:"text/javascript"},(0,wt.isString)(Ct)?{src:Ct}:Ct));(ot=o.contentDocument)===null||ot===void 0||ot.head.appendChild(Ut),Ut.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?M(G):Ut.onerror=Ut.onload=M.bind(null,G)}else v==null||v.trigger(fr.frameLoadHead,x),t.renderBody(),v==null||v.trigger(fr.frameLoadBody,x),v==null||v.trigger(w,x)};o.onload=function(){var G=t.config.frameContent;if(G){var ot=t.getDoc();ot.open(),ot.write(G),ot.close()}x.window=t.getWindow(),v==null||v.trigger("".concat(w,":before"),x),v==null||v.trigger(fr.frameLoad,x),t.renderHead(),M(ns([],E.get("scripts"),!0))}},i.prototype.renderStyles=function(t){t===void 0&&(t={});var r=this.getHead(),o=this.getCanvasModel(),l=function(G){return G.map(function(ot){return{tag:"link",attributes:Ni({rel:"stylesheet"},(0,wt.isString)(ot)?{href:ot}:ot)}})},v=l(t.prev||o.previous("styles")),w=l(o.get("styles")),x=[],E=[],M=function(G,ot,Ct){G.forEach(function(Ut){var ie=Ut.attributes.href,ae=ot.some(function(Ie){return Ie.attributes.href===ie});!ae&&Ct.push(Ut)})};M(w,v,E),M(v,w,x),x.forEach(function(G){var ot,Ct=r.querySelector('link[href="'.concat(G.attributes.href,'"]'));(ot=Ct==null?void 0:Ct.parentNode)===null||ot===void 0||ot.removeChild(Ct)}),(0,tr.SJ)(r,E)},i.prototype.renderHead=function(){var t=this,r=t.model,o=t.em,l=r.root,v=o.Components.getType(fi).view;this.headView=new v({el:this.getHead(),model:l.head,config:Ni(Ni({},l.config),{frameView:this})}).render()},i.prototype.renderBody=function(){var t=this,r,o,l=this,v=l.config,w=l.em,x=l.model,E=l.ppfx,M=this.getDoc(),G=this.getBody(),ot=this.getWindow(),Ct=x.hasAutoHeight(),Ut=w.config;ot._isEditor=!0,this.renderStyles({prev:[]});var ie="#ffca6f";(0,tr.R3)(G,`<style>
      `.concat(Ut.baseCss||v.frameStyle||"",`

      `).concat(Ct?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(Ct?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(E,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(E,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(E,`selected-parent {
        outline: 2px solid `).concat(ie,` !important
      }

      .`).concat(E,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(E,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(E,`no-pointer {
        pointer-events: none;
      }

      .`).concat(E,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(E,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(E,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(E,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(E,`is__grabbing,
      .`).concat(E,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(Ut.canvasCss||"",`
      `).concat(Ut.protectedCss||"",`
    </style>`));var ae=x.root,Ie=w.Components.getType("wrapper").view;this.wrapper=new Ie({model:ae,config:Ni(Ni({},ae.config),{em:w,frameView:this})}).render(),(0,tr.R3)(G,(r=this.wrapper)===null||r===void 0?void 0:r.el),(0,tr.R3)(G,new Dn({collection:x.getStyles(),config:Ni(Ni({},w.Css.getConfig()),{frameView:this})}).render().el),(0,tr.R3)(G,this.getJsContainer()),(0,tr.on)(G,"click",function(qe){var Ke;return qe&&((Ke=qe.target)===null||Ke===void 0?void 0:Ke.tagName)=="A"&&qe.preventDefault()}),(0,tr.on)(G,"submit",function(qe){return qe&&qe.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!v.infiniteCanvas}}].forEach(function(qe){return qe.event.split(" ").forEach(function(Ke){M.addEventListener(Ke,function(Or){return t.el.dispatchEvent((0,tr.t3)(Or,qe.class))},qe.opts)})}),this._toggleEffects(!0),(0,pe.hasDnd)(w)&&(this.droppable=new Fs(w,(o=this.wrapper)===null||o===void 0?void 0:o.el)),this.loaded=!0,x.trigger("loaded")},i.prototype._toggleEffects=function(t){var r=t?tr.on:tr.S1,o=this.getWindow();o&&r(o,"".concat(tr.G1," resize"),this._emitUpdate)},i.prototype._emitUpdate=function(){this.model._emitUpdated()},i}(wr);const cl=aa;var Il=ai(668),os=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ri=function(){return ri=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ri.apply(this,arguments)},Jo=function(p){os(i,p);function i(t,r){var o=p.call(this,{model:t})||this;return(0,wt.bindAll)(o,"onScroll","frameLoaded","updateOffset","remove","startDrag"),ri(ri({},t.config),{frameWrapView:o}),o.cv=r,o.frame=new cl(t,o),o.classAnim="".concat(o.ppfx,"frame-wrapper--anim"),o.updateOffset=(0,wt.debounce)(o.updateOffset.bind(o),0),o.updateSize=(0,wt.debounce)(o.updateSize.bind(o),0),o.listenTo(t,"loaded",o.frameLoaded),o.listenTo(t,"change:x change:y",o.updatePos),o.listenTo(t,"change:width change:height",o.updateSize),o.listenTo(t,"destroy remove",o.remove),o.updatePos(),o.setupDragger(),o}return i.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},i.prototype.setupDragger=function(){var t=this,r=this,o=r.module,l=r.model,v,w,x,E=function(M){o.toggleFramesEvents(M)};this.dragger=new Il.Z({onStart:function(){var M=l.attributes,G=M.x,ot=M.y;x=t.em.getZoomMultiplier(),v=G,w=ot,E(!1)},onEnd:function(){return E(!0)},setPosition:function(M){l.set({x:v+M.x*x,y:w+M.y*x})}})},i.prototype.startDrag=function(t){var r;t&&((r=this.dragger)===null||r===void 0||r.start(t))},i.prototype.__clear=function(t){var r=this.frame;r&&r.remove(t),(0,tr.L_)(this.elTools)},i.prototype.remove=function(t){var r=this;return this.__clear(t),wr.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(o){return r[o]=0}),this},i.prototype.updateOffset=function(){var t,r=this,o=r.em,l=r.$el,v=r.frame;!o||o.destroyed||(o.runDefault({preserveSelected:1}),l.removeClass(this.classAnim),(t=v==null?void 0:v.model)===null||t===void 0||t._emitUpdated())},i.prototype.updatePos=function(t){var r=this,o=r.model,l=r.el,v=o.attributes,w=v.x,x=v.y,E=l.style;this.frame.rect=void 0,E.left=isNaN(w)?w:"".concat(w,"px"),E.top=isNaN(x)?x:"".concat(x,"px"),t&&this.updateOffset()},i.prototype.updateSize=function(){this.updateDim()},i.prototype.updateDim=function(){var t=this,r=t.em,o=t.el,l=t.$el,v=t.model,w=t.classAnim,x=t.frame;if(x){x.rect=void 0,l.addClass(w);var E=this.__handleSize(),M=E.noChanges,G=E.width,ot=E.height;((0,wt.isNull)(G)||(0,wt.isNull)(ot))&&v.set(ri(ri({},G?{}:{width:o.offsetWidth}),ot?{}:{height:o.offsetHeight}),{silent:1}),r.stopDefault({preserveSelected:1}),M?this.updateOffset():setTimeout(this.updateOffset,350)}},i.prototype.onScroll=function(){var t=this,r=t.frame,o=t.em;o.trigger("frame:scroll",{frame:r,body:r.getBody(),target:r.getWindow()})},i.prototype.frameLoaded=function(){var t=this,r=t.frame;t.config,r.getWindow().onscroll=this.onScroll,this.updateDim()},i.prototype.__handleSize=function(){var t,r,o="px",l=this,v=l.model,w=l.el,x=w.style,E=v.attributes,M=E.width,G=E.height,ot=x.width||"",Ct=x.height||"",Ut=M||"",ie=G||"",ae=ot==Ut&&Ct==ie,Ie=(0,wt.isNumber)(Ut)?"".concat(Ut).concat(o):Ut,qe=(0,wt.isNumber)(ie)?"".concat(ie).concat(o):ie;if(x.width=Ie,v.hasAutoHeight()){var Ke=this.frame.el;if(Ke.contentDocument){var Or=Ke.contentDocument,Gr=new ResizeObserver(function(){x.height="".concat(Or.body.scrollHeight,"px")});Gr.observe(Or.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=Gr}}else x.height=qe,(r=this.sizeObserver)===null||r===void 0||r.disconnect(),delete this.sizeObserver;return{noChanges:ae,width:M,height:G,newW:Ut,newH:ie}},i.prototype.render=function(){var t=this,r=t.frame,o=t.$el,l=t.ppfx,v=t.cv,w=t.model,x=t.el,E=w.attributes.onRender;this.__clear(),this.__handleSize(),r.render(),o.empty().attr({class:"".concat(l,"frame-wrapper")}).append(`
      <div class="`.concat(l,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(l,`frame-wrapper__name" data-action-move>
          `).concat(w.get("name")||"",`
        </div>
        <div class="`).concat(l,`frame-wrapper__top-r">
          <div class="`).concat(l,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(l,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(l,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(l,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(r.el);var M=(0,tr.ut)("div",{class:"".concat(l,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(l,`highlighter" data-hl></div>
      <div class="`).concat(l,`badge" data-badge></div>
      <div class="`).concat(l,`placeholder">
        <div class="`).concat(l,`placeholder-int"></div>
      </div>
      <div class="`).concat(l,`ghost"></div>
      <div class="`).concat(l,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(l,`resizer"></div>
      <div class="`).concat(l,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(l,`offset-fixed-v"></div>
    `));this.elTools=M;var G=v==null?void 0:v.toolsWrapper;return G&&G.appendChild(M),E&&E({el:x,elTop:x.querySelector("[data-frame-top]"),elRight:x.querySelector("[data-frame-right]"),elBottom:x.querySelector("[data-frame-bottom]"),elLeft:x.querySelector("[data-frame-left]"),frame:w,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},i}(wr);const wc=Jo;var rc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ua=function(p){rc(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,!0)||this;return o.listenTo(o.collection,"reset",o.render),o.canvasView=r.canvasView,o._module=r.module,o}return i.prototype.onRemoveBefore=function(t,r){r===void 0&&(r={}),t.forEach(function(o){return o.remove(r)})},i.prototype.onRender=function(){var t=this,r=t.$el,o=t.ppfx;r.attr({class:"".concat(o,"frames")})},i.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(r){return r.remove()}),this.viewCollection=[]},i.prototype.renderView=function(t,r){return new wc(t,this.canvasView)},i}(ee);const _c=Ua;var Bi=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pi=function(){return pi=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},pi.apply(this,arguments)},sa=function(p){Bi(i,p);function i(t){var r=p.call(this,{model:t})||this;r.ready=!1,(0,wt.bindAll)(r,"clearOff","onKeyPress","onWheel","onPointer");var o=r,l=o.em,v=o.pfx,w=o.ppfx,x=r.module.events;return r.className="".concat(v,"canvas ").concat(w,"no-touch-actions").concat(l.config.customUI?"":" ".concat(v,"canvas-bg")),r.clsUnscale="".concat(v,"unscale"),r._initFrames(),r.listenTo(l,x.refresh,r.clearOff),r.listenTo(l,"component:selected",r.checkSelected),r.listenTo(l,"".concat(x.coords," ").concat(x.zoom),r.updateFrames),r.listenTo(t,"change:frames",r._onFramesUpdate),r.toggleListeners(!0),r}return i.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},i.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},i.prototype._initFrames=function(){var t=this,r=t.frames,o=t.model,l=t.config,v=t.em,w=o.frames;v.set("readyCanvas",0),w.once("loaded:all",function(){return v.set("readyCanvas",1)}),r==null||r.remove(),this.frames=new _c({collection:w},pi(pi({},l),{canvasView:this}))},i.prototype.checkSelected=function(t,r){var o;r===void 0&&(r={});var l=r.scroll,v=this.em.getCurrentFrame();l&&((o=t.views)===null||o===void 0||o.forEach(function(w){w.frameView===v&&w.scrollIntoView(l)}))},i.prototype.remove=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,wr.prototype.remove.apply(this,r),this.toggleListeners(!1),this},i.prototype.preventDefault=function(t){var r;t&&(t.preventDefault(),(r=t._parentEvent)===null||r===void 0||r.preventDefault())},i.prototype.toggleListeners=function(t){var r=this,o=r.el,l=r.config,v=t?tr.on:tr.S1;v(document,"keypress",this.onKeyPress),v(window,"scroll resize",this.clearOff),v(o,"wheel",this.onWheel,{passive:!l.infiniteCanvas}),v(o,"pointermove",this.onPointer)},i.prototype.screenToWorld=function(t,r){var o=this.module,l=o.getCoords(),v=o.getZoomMultiplier(),w=this.getViewportDelta();return{x:(t-l.x-w.x)*v,y:(r-l.y-w.y)*v}},i.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var r=this.getCanvasOffset(),o=(0,tr.GX)(),l={x:t.clientX-r.left+o.x,y:t.clientY-r.top+o.y};if(t._parentEvent){var v=t.target.getBoundingClientRect(),w=this.module.getZoomDecimal();l.x=v.left-r.left+o.x+t.clientX*w,l.y=v.top-r.top+o.y+t.clientY*w}this.model.set({pointerScreen:l,pointer:this.screenToWorld(l.x,l.y)})}},i.prototype.onKeyPress=function(t){var r=this.em,o=(0,tr.sN)(t);o===" "&&r.getZoomDecimal()!==1&&!r.Canvas.isInputFocused()&&(this.preventDefault(t),r.Editor.runCommand("core:canvas-move"))},i.prototype.onWheel=function(t){var r=this,o=r.module,l=r.config;if(l.infiniteCanvas){this.preventDefault(t);var v=t.deltaX,w=t.deltaY,x=o.getZoomDecimal(),E=(0,tr.Vb)(t),M=o.getCoords();if(E){var G=x-w*x*.01;o.setZoom(G*100);var ot=this.model.getPointerCoords(q.vA.Screen),Ct=this.getCanvasOffset(),Ut=ot.x-Ct.width/2,ie=ot.y-Ct.height/2,ae=G/x,Ie=Ut-(Ut-M.x)*ae,qe=ie-(ie-M.y)*ae;o.setCoords(Ie,qe)}else this.onPointer(t),o.setCoords(M.x-v,M.y-w)}},i.prototype.updateFrames=function(t){var r=this.em,o=this.toolsWrapper,l={preserveSelected:1};this.updateFramesArea(),this.clearOff(),o.style.display="none",r.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){r.stopDefault(l),r.runDefault(l),o.style.display=""},300)},i.prototype.updateFramesArea=function(){var t=this,r=t.framesArea,o=t.model,l=t.module,v=t.cvStyle,w=t.clsUnscale,x=l.getZoomMultiplier();if(r){var E=o.attributes,M=E.x,G=E.y,ot=l.getZoomDecimal();r.style.transform="scale(".concat(ot,") translate(").concat(M*x,"px, ").concat(G*x,"px)")}v&&(v.innerHTML=`
        .`.concat(w," { scale: ").concat(x,` }
      `))},i.prototype.fitViewport=function(t){var r,o;t===void 0&&(t={});var l=this,v=l.em,w=l.module,x=l.model,E=this.getCanvasOffset(),M=t.el,G=M&&((r=(0,pe.getComponentView)(M))===null||r===void 0?void 0:r.frameView),ot=G?G.model:t.frame||v.getCurrentFrameModel()||x.frames.at(0),Ct=ot.attributes,Ut=Ct.x,ie=Ct.y,ae={x:Ut??0,y:ie??0,width:ot.width,height:ot.height};if(M){var Ie=this.getElBoxRect(M);ae.x=ae.x+Ie.x,ae.y=ae.y+Ie.y,ae.width=Ie.width,ae.height=Ie.height}var qe=t.ignoreHeight,Ke=(o=t.gap)!==null&&o!==void 0?o:0,Or=(0,wt.isNumber)(Ke),Gr=Or?Ke:Ke.x,bn=Or?Ke:Ke.y,Tn=ae.width+Gr*2,Vr=ae.height+bn*2,Cn=E.width,Hn=E.height,Ko=Cn/Tn,qr=Hn/Vr,tc=qe?Ko:Math.min(Ko,qr),wg=tc*100;w.setZoom(wg);var bh=-ae.x+(ot.width>=Cn?Cn/2-Tn/2:-Gr),wh=-ae.y+Hn/2-Vr/2,Ef={x:(bh+Gr)*tc,y:(wh+bn)*tc};if(qe){var Od=w.getZoomMultiplier(),Td=Hn*Od,qp=Td-Hn,Kp=qp/2;Ef.y=(-ae.y+bn)*tc-Kp/Od}w.setCoords(Ef.x,Ef.y)},i.prototype.isElInViewport=function(t){var r=(0,pe.getElement)(t),o=(0,tr.Ut)(r),l=this.getFrameOffset(r),v=o.top,w=o.left;return v>=0&&w>=0&&v<=l.height&&w<=l.width},i.prototype.offset=function(t,r){r===void 0&&(r={});var o=r.noScroll,l=(0,tr.Ut)(t),v=o?{x:0,y:0}:(0,tr.GX)(t);return{top:l.top+v.y,left:l.left+v.x,width:l.width,height:l.height}},i.prototype.getRectToScreen=function(t){var r,o,l,v,w=this.module.getZoomDecimal(),x=this.module.getCoords(),E=this.getViewportDelta(),M=((r=t.x)!==null&&r!==void 0?r:0)*w+x.x+E.x||0,G=((o=t.y)!==null&&o!==void 0?o:0)*w+x.y+E.y||0;return{x:M,y:G,width:((l=t.width)!==null&&l!==void 0?l:0)*w,height:((v=t.height)!==null&&v!==void 0?v:0)*w}},i.prototype.getElBoxRect=function(t,r){var o,l,v;r===void 0&&(r={});var w=this.module,x=(0,tr.Ut)(t),E=x.width,M=x.height,G=x.left,ot=x.top,Ct=(o=(0,pe.getComponentView)(t))===null||o===void 0?void 0:o.frameView,Ut=Ct==null?void 0:Ct.getBoxRect(),ie=w.getZoomMultiplier(),ae=(l=Ut==null?void 0:Ut.x)!==null&&l!==void 0?l:0,Ie=(v=Ut==null?void 0:Ut.y)!==null&&v!==void 0?v:0,qe=this.el,Ke=(0,tr.GX)(),Or=G+ae+(qe.scrollLeft+Ke.x)*ie,Gr=ot+Ie+(qe.scrollTop+Ke.y)*ie,bn={x:Or,y:Gr,width:E,height:M};return r.local&&(bn.x=G,bn.y=ot),r.toScreen?this.getRectToScreen(bn):bn},i.prototype.getViewportRect=function(t){t===void 0&&(t={});var r=this.getCanvasOffset(),o=r.top,l=r.left,v=r.width,w=r.height,x=this.module;if(t.toWorld){var E=x.getZoomMultiplier(),M=x.getCoords(),G=this.getViewportDelta(),ot=-M.x-G.x||0,Ct=-M.y-G.y||0;return{x:ot*E,y:Ct*E,width:v*E,height:w*E}}else return{x:l,y:o,width:v,height:w}},i.prototype.getViewportDelta=function(t){var r=this.module.getZoomMultiplier(),o=this.getCanvasOffset(),l=o.width,v=o.height,w=l*r,x=v*r,E=w-l,M=x-v;return{x:E/2/r,y:M/2/r}},i.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},i.prototype.getFrameOffset=function(t){var r;if(!this.frmOff||t){var o=(r=this.frame)===null||r===void 0?void 0:r.el,l=t==null?void 0:t.ownerDocument.defaultView,v=l?l.frameElement:o;this.frmOff=this.offset(v||o)}return this.frmOff},i.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},i.prototype.getElementPos=function(t,r){r===void 0&&(r={});var o=this.module.getZoomDecimal(),l=this.getFrameOffset(t),v=this.el,w=this.getCanvasOffset(),x=this.offset(t,r),E=r.avoidFrameOffset?0:l.top,M=r.avoidFrameOffset?0:l.left,G=r.avoidFrameZoom?x.top:x.top*o,ot=r.avoidFrameZoom?x.left:x.left*o,Ct=r.avoidFrameOffset?G:G+E-w.top+v.scrollTop,Ut=r.avoidFrameOffset?ot:ot+M-w.left+v.scrollLeft,ie=r.avoidFrameZoom?x.height:x.height*o,ae=r.avoidFrameZoom?x.width:x.width*o;return{top:Ct,left:Ut,height:ie,width:ae,zoom:o,rect:x}},i.prototype.getElementOffsets=function(t){if(!t||(0,tr.BM)(t))return{};var r={},o=window.getComputedStyle(t),l=this.module.getZoomDecimal(),v=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return v.forEach(function(w){r[w]=parseFloat(o[w])*l}),r},i.prototype.getPosition=function(t){var r;t===void 0&&(t={});var o=(r=this.frame)===null||r===void 0?void 0:r.el.contentDocument;if(!o)return{top:0,left:0,width:0,height:0};var l=o.body,v=this.module.getZoomDecimal(),w=this.getFrameOffset(),x=this.getCanvasOffset(),E=t.noScroll;return{top:w.top+(E?0:l.scrollTop)*v-x.top,left:w.left+(E?0:l.scrollLeft)*v-x.left,width:x.width,height:x.height}},i.prototype.updateScript=function(t){var r=t.model,o=r.getId();if(!t.scriptContainer){t.scriptContainer=(0,tr.ut)("div",{"data-id":o});var l=this.getJsContainer();l==null||l.appendChild(t.scriptContainer)}t.el.id=o,t.scriptContainer.innerHTML="";var v=document.createElement("script"),w=r.getScriptString(),x=r.get("script-props")?w:`function(){
`.concat(w,`
;}`),E=JSON.stringify(r.__getScriptProps());v.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(o,`');
        if (!item) return;
        (`).concat(x,".bind(item))(").concat(E,`)
      }, 1);`),setTimeout(function(){var M=t.scriptContainer;M==null||M.appendChild(v)},0)},i.prototype.getJsContainer=function(t){var r=this.getFrameView(t);return r==null?void 0:r.getJsContainer()},i.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},i.prototype._renderFrames=function(){if(this.ready){var t=this,r=t.model,o=t.frames,l=t.em,v=t.framesArea,w=r.frames;w.listenToLoad(),o.render();var x=w.at(0),E=x==null?void 0:x.view;l.setCurrentFrame(E),v==null||v.appendChild(o.el),this.frame=E,this.updateFramesArea()}},i.prototype.renderFrames=function(){this._renderFrames()},i.prototype.render=function(){var t=this,r=t.el,o=t.$el,l=t.ppfx,v=t.config,w=t.em;o.html(this.template());var x=o.find("[data-frames]");this.framesArea=x.get(0);var E=o.find("[data-tools]");return this.toolsWrapper=E.get(0),E.append(`
      <div class="`.concat(l,"tools ").concat(l,`tools-gl" style="pointer-events:none">
        <div class="`).concat(l,`placeholder">
          <div class="`).concat(l,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(l,`tools" style="pointer-events:none">
        `).concat(v.extHl?'<div class="'.concat(l,'highlighter-sel"></div>'):"",`
        <div class="`).concat(l,`badge"></div>
        <div class="`).concat(l,`ghost"></div>
        <div class="`).concat(l,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(l,`resizer"></div>
        <div class="`).concat(l,`offset-v"></div>
        <div class="`).concat(l,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=r.querySelector("#".concat(l,"tools")),this.hlEl=r.querySelector(".".concat(l,"highlighter")),this.badgeEl=r.querySelector(".".concat(l,"badge")),this.placerEl=r.querySelector(".".concat(l,"placeholder")),this.ghostEl=r.querySelector(".".concat(l,"ghost")),this.toolbarEl=r.querySelector(".".concat(l,"toolbar")),this.resizerEl=r.querySelector(".".concat(l,"resizer")),this.offsetEl=r.querySelector(".".concat(l,"offset-v")),this.fixedOffsetEl=r.querySelector(".".concat(l,"offset-fixed-v")),this.toolsGlobEl=r.querySelector(".".concat(l,"tools-gl")),this.spotsEl=r.querySelector("[data-spots]"),this.cvStyle=r.querySelector("[data-canvas-style]"),this.el.className=(0,pe.getUiClass)(w,this.className),this.ready=!0,this._renderFrames(),this},i}(wr);const is=sa;var nc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ni=function(){return ni=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ni.apply(this,arguments)},la=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ms=function(p){nc(i,p);function i(t){var r=p.call(this,t,"Canvas",N)||this;return r.events=gr,r.framesById={},r.canvas=new yt(r),r.spots=new Zt(r),r.model=r.canvas,r.startAutoscroll=r.startAutoscroll.bind(r),r.stopAutoscroll=r.stopAutoscroll.bind(r),r}return i.prototype.getCanvasView=function(){return this.canvasView},i.prototype.postLoad=function(){this.model.init()},i.prototype.getModel=function(){return this.canvas},i.prototype.getElement=function(){return this.getCanvasView().el},i.prototype.getFrame=function(t){return this.getFrames()[t||0]},i.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},i.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},i.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},i.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},i.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},i.prototype._getLocalEl=function(t,r,o){var l=t,v=r==null?void 0:r.frameView;return l=v?v[o]():l,l},i.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},i.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},i.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},i.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},i.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},i.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},i.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},i.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},i.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},i.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},i.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},i.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new is(this.canvas),this.canvasView.render().el},i.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),r=this.offset(this.getElement());return{top:t.top-r.top,left:t.left-r.left}},i.prototype.offset=function(t){return this.getCanvasView().offset(t)},i.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},i.prototype.getElementPos=function(t,r){return this.getCanvasView().getElementPos(t,r)},i.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},i.prototype.getRect=function(){var t,r=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},o=r.top,l=o===void 0?0:o,v=r.left,w=v===void 0?0:v;return ni(ni({},this.getCanvasView().getCanvasOffset()),{topScroll:l,leftScroll:w})},i.prototype.getTargetToElementDim=function(t,r,o){o===void 0&&(o={});var l=o||{},v=this.getCanvasView().getPosition();if(v){var w=l.elPos||this.getCanvasView().getElementPos(r),x=o.toRight||0,E=l.targetHeight||t.offsetHeight,M=l.targetWidth||t.offsetWidth,G=l.event||null,ot=w.top-E,Ct=w.left;Ct+=x?w.width:0,Ct=x?Ct-M:Ct;var Ut=Ct<v.left?v.left:Ct,ie=ot<v.top?v.top:ot;ie=ie>w.top+w.height?w.top+w.height:ie;var ae={top:ie,left:Ut,elementTop:w.top,elementLeft:w.left,elementWidth:w.width,elementHeight:w.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:v.top,canvasLeft:v.left,canvasWidth:v.width,canvasHeight:v.height};return G&&this.em&&this.em.trigger(G,ae),ae}},i.prototype.canvasRectOffset=function(t,r,o){var l=this;o===void 0&&(o={});var v=function(x){var E=x.defaultView;return E==null?void 0:E.frameElement},w=function(x,E,M){E===void 0&&(E=1);var G=l.em.getZoomDecimal(),ot=E?"top":"left",Ct=x.ownerDocument,Ut=o.offset?v(Ct):{},ie=Ut.offsetTop,ae=ie===void 0?0:ie,Ie=Ut.offsetLeft,qe=Ie===void 0?0:Ie,Ke=Ct.body||{},Or=Ke.scrollTop,Gr=Or===void 0?0:Or,bn=Ke.scrollLeft,Tn=bn===void 0?0:bn,Vr=E?Gr:Tn,Cn=E?ae:qe;return M[ot]-(Vr-Cn)*G};return{top:w(t,1,r),left:w(t,0,r)}},i.prototype.getTargetToElementFixed=function(t,r,o){o===void 0&&(o={});var l=o.pos||this.getElementPos(t,{noScroll:!0}),v=o.canvasOff||this.canvasRectOffset(t,l),w=r.offsetHeight||0,x=r.offsetWidth||0,E=l.left+l.width,M=this.getCanvasView(),G=M.getPosition(),ot=M.getFrameOffset(t),Ct=o.event,Ut=-w,ie=(0,wt.isUndefined)(o.left)?l.width-x:o.left;if(ie=l.left<-ie?-l.left:ie,ie=E>G.width?ie-(E-G.width):ie,v.top<w){var ae=l.height+w,Ie=ae<ot.height;Ie?Ut=Ut+ae:Ut=-v.top<l.height?-v.top:l.height}var qe={top:Ut,left:ie,canvasOffsetTop:v.top,canvasOffsetLeft:v.left,elRect:l,canvasOffset:v,canvasRect:G,targetWidth:x,targetHeight:w};return Ct&&this.em.trigger(Ct,qe),qe},i.prototype.getMouseRelativePos=function(t,r){r===void 0&&(r={});var o=r.subWinOffset,l=t.target.ownerDocument,v=l.defaultView||l.parentWindow,w=v.frameElement,x=o?v.pageYOffset:0,E=o?v.pageXOffset:0,M=this.getZoomMultiplier(),G=0,ot=0;if(w){var Ct=w.getBoundingClientRect();G=Ct.top||0,ot=Ct.left||0}return{y:(t.clientY+G-x)*M,x:(t.clientX+ot-E)*M}},i.prototype.getMouseRelativeCanvas=function(t,r){var o,l=this.getZoomDecimal(),v=(o=this.getCanvasView().getPosition(r))!==null&&o!==void 0?o:{},w=v.top,x=w===void 0?0:w,E=v.left,M=E===void 0?0:E;return{y:t.clientY*l+x,x:t.clientX*l+M}},i.prototype.hasFocus=function(){return this.getDocument().hasFocus()},i.prototype.isInputFocused=function(){var t=this.getDocument(),r=this.getFrameEl(),o=la(["body"],this.config.notTextable,!0),l=r&&document.activeElement===r,v=l?t&&t.activeElement:document.activeElement;return v&&!o.some(function(w){return v.matches(w)})},i.prototype.scrollTo=function(t,r){r===void 0&&(r={});var o=(0,pe.getElement)(t),l=o&&(0,pe.getViewEl)(o);l&&l.scrollIntoView(r)},i.prototype.startAutoscroll=function(t){var r=t&&t.view||this.em.getCurrentFrame();r&&r.startAutoscroll()},i.prototype.stopAutoscroll=function(t){var r=t&&t.view||this.em.getCurrentFrame();r&&r.stopAutoscroll()},i.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},i.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},i.prototype.setCoords=function(t,r,o){var l;o===void 0&&(o={});var v=t||t===0,w=r||r===0,x={x:this.canvas.get("x"),y:this.canvas.get("y")};if(v&&(x.x=parseFloat("".concat(t))),w&&(x.y=parseFloat("".concat(r))),o.toWorld){var E=(l=this.canvasView)===null||l===void 0?void 0:l.getViewportDelta();E&&(v&&(x.x=x.x-E.x),w&&(x.y=x.y-E.y))}return this.canvas.set(x),this},i.prototype.getCoords=function(){var t=this.canvas.attributes,r=t.x,o=t.y;return{x:r,y:o}},i.prototype.getPointer=function(t){var r=this.canvas.attributes,o=r.pointer,l=r.pointerScreen;return t?l:o},i.prototype.getZoomDecimal=function(){return this.getZoom()/100},i.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},i.prototype.fitViewport=function(t){var r;(r=this.canvasView)===null||r===void 0||r.fitViewport(t)},i.prototype.toggleFramesEvents=function(t){var r=this.getFramesEl().style;r.pointerEvents=t?"":"none"},i.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},i.prototype.addFrame=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),this.canvas.frames.add(new se(this,ni({},t)),r)},i.prototype.getLastDragResult=function(){return this.em.get("dragResult")},i.prototype.addSpot=function(t,r){var o;r===void 0&&(r={});var l=t,v=this.getSpots(l);if(v.length){var w=v[0];return w.set(l),w}var x=l.componentView||((o=l.component)===null||o===void 0?void 0:o.view),E=new Wt.Z(this,ni(ni({},l),{id:l.id||"cs_".concat(l.type,"_").concat(x==null?void 0:x.cid),type:l.type||""}));return this.spots.add(E,r),E},i.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},i.prototype.removeSpots=function(t){t===void 0&&(t={});var r=(0,wt.isArray)(t)?t:this.getSpots(t),o=this.spots.remove(r);return o},i.prototype.hasCustomSpot=function(t){var r=this.config.customSpots;return!!(r===!0||r&&t&&r[t])},i.prototype.getWorldRectToScreen=function(t){var r;return(r=this.canvasView)===null||r===void 0?void 0:r.getRectToScreen(t)},i.prototype.refresh=function(t){t===void 0&&(t={});var r=this,o=r.em,l=r.events,v=r.canvasView;v==null||v.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),o.trigger("canvas:updateTools")),o.set("canvasOffset",this.getOffset()),o.trigger(l.refresh,t)},i.prototype.refreshSpots=function(){this.spots.refresh()},i.prototype.destroy=function(){var t=this,r;this.canvas.stopListening(),(r=this.canvasView)===null||r===void 0||r.remove(),["model","droppable"].forEach(function(o){return t[o]={}})},i}(H);const ys=ms,ca={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var Xi=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oi=function(){return Oi=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Oi.apply(this,arguments)},ua=function(p){Xi(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Oi(Oi({},p.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),i.prototype.toHTML=function(){var t=this.content,r=this.parent();return r!=null&&r.is("script")?t:this.__escapeContent(t)},i.prototype.__escapeContent=function(t){return(0,pe.escapeNodeContent)(t)},i.isComponent=function(t){var r;if(t.nodeType===3)return{type:"textnode",content:(r=t.textContent)!==null&&r!==void 0?r:""}},i}(wi);const gt=ua;var Nt=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),he=function(){return he=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},he.apply(this,arguments)},Oe=function(p){Nt(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return he({},p.prototype.defaults)},enumerable:!1,configurable:!0}),i.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},i.isComponent=function(t){var r;if(t.nodeType==8)return{type:"comment",content:(r=t.textContent)!==null&&r!==void 0?r:""}},i}(gt);const Be=Oe;var Re=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hr=function(){return hr=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},hr.apply(this,arguments)},Ir="iframe",lt=function(p){Re(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return hr(hr({},p.prototype.defaults),{type:Ir,tagName:Ir,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===Ir},i}(wi);const Lt=lt;var ce=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),me=function(){return me=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},me.apply(this,arguments)},We='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',Ve=function(p){ce(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this,l=o.get("attributes").src;return l&&(0,pe.buildBase64UrlFromSvg)((0,wt.result)(o,"defaults").src)!==l&&o.set("src",l,{silent:!0}),o}return Object.defineProperty(i.prototype,"defaults",{get:function(){return me(me({},p.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(We,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(We,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),i.prototype.initToolbar=function(){p.prototype.initToolbar.call(this);var t=this.em;if(t){var r=t.Commands,o="image-editor";if(r.has(o)){for(var l=!1,v=this.get("toolbar"),w=0;w<v.length;w++)if(v[w].command==="image-editor"){l=!0;break}l||(v.push({attributes:{class:"fa fa-pencil"},command:o}),this.set("toolbar",v))}}},i.prototype.getAttrToHTML=function(){var t=p.prototype.getAttrToHTML.call(this),r=this.getSrcResult();return r&&(t.src=r),t},i.prototype.getSrcResult=function(t){t===void 0&&(t={});var r=this.get(t.fallback?"fallback":"src")||"",o=r;return r&&r.substr(0,4)==="<svg"&&(o=(0,pe.buildBase64UrlFromSvg)(r)),o},i.prototype.isDefaultSrc=function(){var t=this.get("src"),r=(0,wt.result)(this,"defaults").src;return t===r||t===(0,pe.buildBase64UrlFromSvg)(r)},i.prototype.toJSON=function(t){var r=p.prototype.toJSON.call(this,t),o=r.attributes;return o&&r.src===o.src&&delete r.src,r},i.prototype.parseUri=function(t){var r={},o=function(l){l===void 0&&(l="");for(var v={},w=l.substring(1).split("&"),x=0;x<w.length;x++){var E=w[x].split("="),M=decodeURIComponent(E[0]);M&&(v[M]=decodeURIComponent(E[1]||""))}return v};if((0,pe.hasWin)())r=document.createElement("a"),r.href=t;else if(typeof URL<"u")try{r=new URL(t)}catch{}return{hostname:r.hostname||"",pathname:r.pathname||"",protocol:r.protocol||"",search:r.search||"",hash:r.hash||"",port:r.port||"",query:o(r.search)}},i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)==="img"},i}(wi);const ur=Ve;var Lr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dn=function(){return dn=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},dn.apply(this,arguments)},jn=function(p){Lr(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this;return o.__checkInnerChilds(),o}return Object.defineProperty(i.prototype,"defaults",{get:function(){return dn(dn({},p.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),i.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var r=function(o){o.isInstanceOf("textnode")||o.set({locked:!0,layerable:!1})};(0,wt.isFunction)(t)?this.forEachChild(function(o){t(o)&&r(o)}):this.forEachChild(r)}},i}(wi);const To=jn;var za=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),as=function(){return as=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},as.apply(this,arguments)},oc="label",Zu=function(p){za(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return as(as({},p.prototype.defaults),{type:oc,tagName:oc,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===oc},i}(To);const yp=Zu;var bs=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ki=function(){return ki=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ki.apply(this,arguments)},gu="link",ic=function(p){bs(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return ki(ki({},p.prototype.defaults),{type:gu,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),i.isComponent=function(t,r){r===void 0&&(r={});var o;if((0,pe.toLowerCase)(t.tagName)==="a"){var l=r.textTags||[];o={type:gu,editable:!1};var v=t.childNodes,w=v.length;w||delete o.editable,(0,wt.forEach)(v,function(x){var E=x.tagName;(x.nodeType==3&&x.textContent.trim()!==""||E&&l.indexOf((0,pe.toLowerCase)(E))>=0)&&delete o.editable})}return o},i}(To);const vu=ic;var Xu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rs=function(){return Rs=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Rs.apply(this,arguments)},Nl=function(p){Xu(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this;return o.get("src")?o.parseFromSrc():o.updateSrc(),o.listenTo(o,"change:address change:zoom change:mapType",o.updateSrc),o}return Object.defineProperty(i.prototype,"defaults",{get:function(){var t=p.prototype.defaults;return Rs(Rs({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),i.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},i.prototype.getMapUrl=function(){var t=this.get("address"),r=this.get("zoom"),o=this.get("mapType");t=t?"&q="+t:"",r=r?"&z="+r:"",o=o?"&t="+o:"";var l=this.get("mapUrl")+"?"+t+r+o;return l+="&output=embed",l},i.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),r=t.query;r.q&&this.set("address",r.q),r.z&&this.set("zoom",r.z),r.t&&this.set("mapType",r.t)},i.isComponent=function(t){if((0,pe.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},i}(ur);const Ui=Nl;var Hs=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wa=function(){return Wa=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Wa.apply(this,arguments)},ws="script",ac=function(p){Hs(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Wa(Wa({},p.prototype.defaults),{type:ws,tagName:ws,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===ws},i}(wi);const ul=ac;var mu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sc=function(){return sc=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},sc.apply(this,arguments)},fl="svg",yu=function(p){mu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return sc(sc({},p.prototype.defaults),{type:fl,tagName:fl,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),i.prototype.getName=function(){var t=this.get("tagName"),r=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),r||t},i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===fl},i}(wi);const pl=yu;var lc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vi=function(){return Vi=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Vi.apply(this,arguments)},dl=function(p){lc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Vi(Vi({},p.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),i.isComponent=function(t,r){return r===void 0&&(r={}),!!r.inSvg},i}(pl);const Sa=dl;var Vl=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hl=function(){return hl=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},hl.apply(this,arguments)},_s="table",xs=function(p){Vl(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this,l=o.get("components");return!l.length&&l.add({type:"tbody"}),o}return Object.defineProperty(i.prototype,"defaults",{get:function(){return hl(hl({},p.prototype.defaults),{type:_s,tagName:_s,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===_s},i}(wi);const qc=xs;var cc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bs=function(){return Bs=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Bs.apply(this,arguments)},Kc="tbody",Ju=function(p){cc(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this,l=o.get("components"),v=o.get("columns"),w=o.get("rows");if(!l.length){for(var x=[];w--;){for(var E=[],M=v;M--;)E.push({type:"cell",classes:["cell"]});x.push({type:"row",classes:["row"],components:E})}l.add(x)}return o}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Bs(Bs({},p.prototype.defaults),{type:Kc,tagName:Kc,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===Kc},i}(wi);const uc=Ju;var Qu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Aa=function(){return Aa=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Aa.apply(this,arguments)},ss=function(p){Qu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Aa(Aa({},p.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return["td","th"].indexOf((0,pe.toLowerCase)(t.tagName))>=0},i}(wi);const gl=ss;var Yc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cs=function(){return Cs=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Cs.apply(this,arguments)},tf="tfoot",bp=function(p){Yc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Cs(Cs({},p.prototype.defaults),{type:tf,tagName:tf})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===tf},i}(uc);const bu=bp;var wu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ls=function(){return ls=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ls.apply(this,arguments)},$a="thead",fc=function(p){wu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return ls(ls({},p.prototype.defaults),{type:$a,tagName:$a})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===$a},i}(uc);const Jp=fc;var ef=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_u=function(){return _u=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},_u.apply(this,arguments)},xc="tr",Ma=function(p){ef(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"defaults",{get:function(){return _u(_u({},p.prototype.defaults),{tagName:xc,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),i.isComponent=function(t){return(0,pe.toLowerCase)(t.tagName)===xc},i}(wi);const Ho=Ma;var Ai=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bo=function(){return Bo=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Bo.apply(this,arguments)},cs="video",Us="yt",vl="vi",ml="ytnc",rf="so",xu=function(p){return p&&p!=="0"},Cc=function(p){Ai(i,p);function i(t,r){t===void 0&&(t={});var o=p.call(this,t,r)||this;return o.get("src")&&o.parseFromSrc(),o.updatePropsFromAttr(),o.updateTraits(),o.on("change:provider",o.updateTraits),o.on("change:videoId change:provider",o.updateSrc),o}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Bo(Bo({},p.prototype.defaults),{type:cs,tagName:cs,videoId:"",void:!1,provider:rf,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),i.prototype.updatePropsFromAttr=function(){if(this.get("provider")===rf){var t=this.get("attributes"),r=t.controls,o=t.autoplay,l=t.loop,v={};(0,pe.isDef)(r)&&(v.controls=!!r),(0,pe.isDef)(o)&&(v.autoplay=!!o),(0,pe.isDef)(l)&&(v.loop=!!l),(0,pe.isEmptyObj)(v)||this.set(v)}},i.prototype.updateTraits=function(){var t=this.em,r=this.get("provider"),o="iframe",l;switch(r){case Us:case ml:l=this.getYoutubeTraits();break;case vl:l=this.getVimeoTraits();break;default:o="video",l=this.getSourceTraits()}this.set({tagName:o},{silent:!0}),this.set({traits:l}),t.get("ready")&&t.trigger("component:toggled")},i.prototype.parseFromSrc=function(){var t=this.get("provider"),r=this.parseUri(this.get("src")),o=r.query;switch(t){case Us:case ml:case vl:this.set("videoId",r.pathname.split("/").pop()),o.list&&this.set("list",o.list),xu(o.autoplay)&&this.set("autoplay",!0),xu(o.loop)&&this.set("loop",!0),parseInt(o.controls)===0&&this.set("controls",!1),xu(o.color)&&this.set("color",o.color),o.rel==="0"&&this.set("rel",0),o.modestbranding==="1"&&this.set("modestbranding",1);break}},i.prototype.updateSrc=function(){var t=this.get("provider"),r="";switch(t){case Us:r=this.getYoutubeSrc();break;case ml:r=this.getYoutubeNoCookieSrc();break;case vl:r=this.getVimeoSrc();break}this.set({src:r})},i.prototype.getAttrToHTML=function(){var t=p.prototype.getAttrToHTML.call(this),r=this.get("provider");switch(r){case Us:case ml:case vl:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},i.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Us,name:"Youtube"},{value:ml,name:"Youtube (no cookie)"},{value:vl,name:"Vimeo"}]}},i.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},i.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},i.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},i.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},i.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},i.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},i.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),r=this.get("ytUrl"),o=this.get("list");return r+=t+(t.indexOf("?")<0?"?":""),r+=o?"&list=".concat(o):"",r+=this.get("autoplay")?"&autoplay=1&mute=1":"",r+=this.get("controls")?"":"&controls=0&showinfo=0",r+=this.get("loop")?"&loop=1&playlist=".concat(t):"",r+=this.get("rel")?"":"&rel=0",r+=this.get("modestbranding")?"&modestbranding=1":"",r},i.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},i.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},i.isComponent=function(t){var r=t.tagName,o=t.src,l=/youtube\.com\/embed/.test(o),v=/youtube-nocookie\.com\/embed/.test(o),w=/player\.vimeo\.com\/video/.test(o),x=l||v||w;if((0,pe.toLowerCase)(r)==cs||(0,pe.toLowerCase)(r)=="iframe"&&x){var E={type:"video"};return o&&(E.src=o),x&&(l?E.provider=Us:v?E.provider=ml:w&&(E.provider=vl)),E}},i}(ur);const Ss=Cc;var Df=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cu=function(){return Cu=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Cu.apply(this,arguments)},Su=function(p){Df(i,p);function i(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o,l,v=p.apply(this,t)||this,w=t[1],x=(o=w==null?void 0:w.em)===null||o===void 0?void 0:o.Components,E=(l=x==null?void 0:x.getType(fi))===null||l===void 0?void 0:l.model,M=x==null?void 0:x.getType("default").model;return E&&v.set({head:new E({},w),docEl:new M({tagName:"html"},w)},{silent:!0}),v}return Object.defineProperty(i.prototype,"defaults",{get:function(){return Cu(Cu({},p.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),i.prototype.toHTML=function(t){t===void 0&&(t={});var r=this.doctype,o=(0,wt.isUndefined)(t.asDocument)?!!r:t.asDocument,l=this,v=l.head,w=l.docEl,x=p.prototype.toHTML.call(this,t),E=o&&(v==null?void 0:v.toHTML(t))||"",M=o&&(0,tr.nB)(w==null?void 0:w.getAttrToHTML())||"",G=M?" ".concat(M):"";return o?"".concat(r,"<html").concat(G,">").concat(E).concat(x,"</html>"):x},i.prototype.__postAdd=function(){var t,r=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(r==null||r.add(this)),p.prototype.__postAdd.call(this)},i.prototype.__postRemove=function(){var t,r=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return r==null||r.remove(this),p.prototype.__postRemove.call(this)},i.isComponent=function(){return!1},i}(wi);const Ou=Su;var wp=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tu=function(p){wp(i,p);function i(){var t=p!==null&&p.apply(this,arguments)||this;return t.compView=di,t}return i.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var r=this.collection;this.listenTo(r,"add",this.addTo),this.listenTo(r,"reset",this.resetChildren),this.listenTo(r,"remove",this.removeChildren)},i.prototype.removeChildren=function(t,r,o){var l=this;o===void 0&&(o={}),t.views.forEach(function(w){if(w){var x=w.childrenView,E=w.scriptContainer;x&&x.stopListening(),(0,tr.L_)(E),w.remove.apply(w)}});var v=t.components();v.forEach(function(w){return l.removeChildren(w,r,o)})},i.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},i.prototype.addToCollection=function(t,r,o){for(var l=this,v=l.config,w=l.opts,x=l.em,E=v.frameView,M=(E==null?void 0:E.model)&&t.getView(E.model),G=w.componentTypes||(x==null?void 0:x.Components.getTypes()),ot=t.get("type")||"default",Ct=this.compView,Ut=0;Ut<G.length;Ut++)if(G[Ut].id==ot){Ct=G[Ut].view;break}var ie=M||new Ct({model:t,config:v,componentTypes:G}),ae;try{ae=ie.render().el}catch(Or){ae=document.createTextNode(""),x.logError(Or)}if(r)r.appendChild(ae);else{var Ie=this.parentEl,qe=Ie.childNodes;if((0,wt.isUndefined)(o))Ie.appendChild(ae);else{var Ke=qe.length==o;Ke&&o--,Ke||!qe.length?Ie.appendChild(ae):Ie.insertBefore(ae,qe[o])}}return t.opt.temporary||x==null||x.trigger("component:mount",t),ae},i.prototype.resetChildren=function(t,r){var o=this,l=r===void 0?{}:r,v=l.previousModels,w=v===void 0?[]:v;this.parentEl.innerHTML="",w.forEach(function(x){return o.removeChildren(x,o.collection)}),t.each(function(x){return o.addToCollection(x)})},i.prototype.render=function(t){var r=this,o=this.el,l=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(v){return r.addToCollection(v,l)}),o.innerHTML="",o.appendChild(l),this},i}(q.G7);const La=Tu;var Ti=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fn=function(){return Fn=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Fn.apply(this,arguments)},Fi=function(p){Ti(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.className=function(){return this.getClasses()},i.prototype.tagName=function(){return this.model.get("tagName")},i.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},i.prototype.initialize=function(t){t===void 0&&(t={});var r=this.model,o=t.config||{},l=o.em,v=r.opt||{},w=this,x=w.$el,E=w.el;this.opts=t,this.modelOpt=v,this.config=o,this.em=l,this.pfx=o.stylePrefix||"",this.ppfx=o.pStylePrefix||"",this.attr=r.get("attributes"),this.classe=this.attr.class||[],this.listenTo(r,"change:style",this.updateStyle),this.listenTo(r,"change:attributes",this.renderAttributes),this.listenTo(r,"change:highlightable",this.updateHighlight),this.listenTo(r,"change:status change:locked",this.updateStatus),this.listenTo(r,"change:script rerender",this.reset),this.listenTo(r,"change:content",this.updateContent),this.listenTo(r,"change",this.handleChange),this.listenTo(r,"active",this.onActive),this.listenTo(r,"disable",this.onDisable),x.data("model",r),(0,pe.setViewEl)(E,this),r.view=this,this.frameView&&r.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Fn(Fn({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!v.temporary&&this.init(this._clbObj())},Object.defineProperty(i.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"createDoc",{get:function(){var t,r,o=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((r=this.opts.config)===null||r===void 0)&&r.useFrameDoc?o:document},enumerable:!1,configurable:!0}),i.prototype.__isDraggable=function(){var t=this,r=t.model,o=t.config,l=r.attributes.draggable;return o.draggableComponents&&l},i.prototype._clbObj=function(){var t=this,r=t.em,o=t.model,l=t.el;return{editor:r==null?void 0:r.getEditor(),model:o,el:l}},i.prototype.init=function(t){},i.prototype.removed=function(t){},i.prototype.onRender=function(t){},i.prototype.onActive=function(t){},i.prototype.onDisable=function(t){},i.prototype.remove=function(){var t;p.prototype.remove.call(this);var r=this,o=r.model,l=r.$el,v=o.views,w=this.frameView||{};return o.components().forEach(function(x){var E=x.getView(w.model);E==null||E.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),v.splice(v.indexOf(this),1),this.removed(this._clbObj()),l.data({model:"",collection:"",view:""}),this},i.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},i.prototype.initClasses=function(){var t=this.model,r=t.classes,o="change:classes";r instanceof xa&&(this.stopListening(t,o,this.initClasses),this.listenTo(t,o,this.initClasses),this.listenTo(r,"add remove change reset",this.updateClasses),r.length&&this.importClasses())},i.prototype.initComponents=function(t){t===void 0&&(t={});var r=this,o=r.model,l=r.$el,v=r.childrenView,w="change:components",x=o.get("components"),E=[o,w,this.initComponents];x instanceof gn&&(l.data("collection",x),v&&v.remove(),this.stopListening.apply(this,E),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,E))},i.prototype.handleChange=function(){var t=this.model,r=(0,wt.keys)(t.changed);if(!(r.length===1&&r[0]==="status")){t.emitUpdate();for(var o in t.changed)t.emitUpdate(o)}},i.prototype.importClasses=function(){var t=this,r=t.em,o=t.model,l=r.Selectors;l&&o.classes.forEach(function(v){return l.add(v.getName())})},i.prototype.updateStatus=function(t){t===void 0&&(t={});var r=this,o=r.em,l=r.el,v=r.ppfx,w=r.model,x=o==null?void 0:o.Canvas,E=x==null?void 0:x.config.extHl,M=w.get("status"),G="".concat(v,"selected"),ot="".concat(G,"-parent"),Ct="".concat(v,"freezed"),Ut="".concat(v,"hovered"),ie="".concat(v,"no-pointer"),ae="".concat(v,"pointer-init"),Ie=[G,ot,Ct,Ut,ie],qe=E&&!t.noExtHl?"":G;this.$el.removeClass(Ie.join(" "));var Ke=l.getAttribute("class")||"",Or=[Ke],Gr=!(x!=null&&x.hasCustomSpot(Wt.q.Select)),bn=!(x!=null&&x.hasCustomSpot(Wt.q.Target));switch(M){case"selected":Gr&&Or.push(qe);break;case"selected-parent":bn&&Or.push(ot);break;case"freezed":Or.push(Ct);break;case"freezed-selected":Or.push(Ct),Gr&&Or.push(qe);break;case"hovered":!t.avoidHover&&Or.push(Ut);break}(0,wt.isBoolean)(w.locked)&&Or.push(w.locked?ie:ae);var Tn=Or.filter(Boolean).join(" ");Tn&&l.setAttribute("class",Tn)},i.prototype.updateHighlight=function(){var t=this.model,r=t.get("textable"),o=t.get("highlightable")&&(r||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",o?!0:"")},i.prototype.updateStyle=function(t,r,o){o===void 0&&(o={});var l=this,v=l.model,w=l.em;if(li(w)&&!o.inline){var x=this.__cmpStyleOpts,E=v.getStyle(Fn({inline:!0},x));!(0,wt.isEmpty)(E)&&v.setStyle(E,x)}else this.setAttribute("style",v.styleToString(o))},i.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},i.prototype.setAttribute=function(t,r){var o=this.$el;r?o.attr(t,r):o.removeAttr(t)},i.prototype.getClasses=function(){return this.model.getClasses().join(" ")},i.prototype.updateAttributes=function(){var t=[],r=this,o=r.model,l=r.$el,v=r.el,w=o.attributes,x=w.textable,E=w.type,M=Fn(Fn({id:o.getId(),"data-gjs-type":E||"default"},this.__isDraggable()&&{draggable:!0}),x&&{contenteditable:"false"});(0,wt.each)(v.attributes,function(ot){return t.push(ot.nodeName)}),t.forEach(function(ot){return l.removeAttr(ot)}),this.updateStyle(),this.updateHighlight();var G=Fn(Fn({},M),o.getAttributes());(0,wt.keys)(G).forEach(function(ot){return G[ot]===!1&&delete G[ot]}),l.attr(G)},i.prototype.updateContent=function(){var t=this.model.content,r=this.model.components().length;this.getChildrenContainer().innerHTML=r?"":t},i.prototype.prevDef=function(t){t.preventDefault()},i.prototype.updateScript=function(){var t=this,r=t.model,o=t.em;r.get("script")&&(o==null||o.Canvas.getCanvasView().updateScript(this))},i.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},i.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},r=this.el,o=0,l=0,v=function(w){var x=w.offsetParent;x?(o+=x.offsetTop,l+=x.offsetLeft,v(x)):(t.top=r.offsetTop+o,t.left=r.offsetLeft+l,t.bottom=t.top+r.offsetHeight,t.right=t.left+r.offsetWidth)};return v(r),t},i.prototype.isInViewport=function(){var t=this,r=t.el,o=t.em,l=t.frameView,v=o.Canvas.getCanvasView(),w=v.getElBoxRect(r,{local:!0}),x=l.el,E=x.clientHeight,M=x.clientWidth,G=w.y,ot=w.x,Ct=G+w.height,Ut=ot+w.width,ie=G>=0&&G<E,ae=Ct>0&&Ct<E,Ie=Ut>=0&&Ut<M,qe=ot>0&&ot<=M,Ke=(ie||ae)&&(Ie||qe);return Ke},i.prototype.scrollIntoView=function(t){var r;t===void 0&&(t={});var o=this.isInViewport();if(!o||t.force){var l=this.el;if(t.behavior!=="smooth"){var v=this.getOffsetRect();(r=l.ownerDocument.defaultView)===null||r===void 0||r.scrollTo(0,v.top)}else l.scrollIntoView(Fn({behavior:"smooth",block:"nearest"},t))}},i.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,tr.dL)(t,this.el),this.render()},i.prototype._setData=function(){var t=this.model,r=t.components(),o=this;this.$el.data({model:t,collection:r,view:o})},i.prototype._createElement=function(t){return this.createDoc.createElement(t)},i.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),r=this.childrenView||new La({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});r.render(t),this.childrenView=r;for(var o=Array.prototype.slice.call(r.el.childNodes),l=0,v=o.length;l<v;l++)t.appendChild(o.shift())},i.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},i.prototype.onAttrUpdate=function(){},i.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,pe.setViewEl)(this.el,this),this.postRender(),this)},i.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},i.getEvents=function(){return(0,wt.result)(this.prototype,"events")},i}(q.G7);const di=Fi;var _p=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oa=function(p){_p(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype._setAttributes=function(){},i.prototype.renderAttributes=function(){},i.prototype.updateStatus=function(){},i.prototype.updateClasses=function(){},i.prototype.setAttribute=function(){},i.prototype.updateAttributes=function(){},i.prototype.initClasses=function(){},i.prototype.initComponents=function(){},i.prototype.delegateEvents=function(){return this},i.prototype._createElement=function(){return document.createTextNode("")},i.prototype.render=function(){var t=this,r=t.model,o=t.el;return r.opt.temporary?this:(o.textContent=r.content,this)},i}(di);const _o=Oa;var zs=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pc=function(p){zs(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype._createElement=function(){return document.createComment(this.model.content)},i}(_o);const yl=pc;var If=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fl=function(p){If(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"div"},i.prototype.initialize=function(t){p.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},i.prototype.updateSrc=function(){var t=(0,tr.sE)(this.el,"iframe")[0];t&&(0,tr.FW)(t,{src:this.__getSrc()})},i.prototype.render=function(){p.prototype.render.call(this);var t=(0,tr.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},i.prototype.__getSrc=function(){return this.model.getAttributes().src||""},i}(di);const xp=Fl;var Sc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Oc=function(p){Sc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"img"},i.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},i.prototype.initialize=function(t){p.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},i.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,r=t.model,o=t.em,l=r.get("file");if(l&&o){var v=o.Assets.FileUploader();v==null||v.uploadFile({dataTransfer:{files:[l]}},function(w){var x=w&&w.data&&w.data[0],E=x&&((0,wt.isString)(x)?x:x.src);E&&r.set({src:E})}),r.set("file","")}}},i.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},i.prototype.updateClasses=function(){p.prototype.updateClasses.call(this);var t=this,r=t.el,o=t.classEmpty,l=t.model,v=l.getSrcResult()&&!l.isDefaultSrc(),w=v?"remove":"add";r.classList[w](o)},i.prototype.onActive=function(t){t==null||t.stopPropagation();var r=this,o=r.em,l=r.model,v=o==null?void 0:o.Assets;v&&l.get("editable")&&v.open({select:function(w,x){l.set({src:w.getSrc()}),x&&v.close()},target:l,types:["image"],accept:"image/*"})},i.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},i.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},i.prototype.noDrag=function(t){return t.preventDefault(),!1},i.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,r=t.$el,o=t.model,l=r.attr("class")||"";return!o.get("src")&&r.attr("class","".concat(l," ").concat(this.classEmpty).trim()),this.postRender(),this},i}(di);const Zc=Oc;var nf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ja=function(){return ja=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ja.apply(this,arguments)},Xc=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},Rl=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},bl=function(p){nf(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},i.prototype.initialize=function(t){p.prototype.initialize.call(this,t),(0,wt.bindAll)(this,"disableEditing","onDisable");var r=this.model,o=this.em;this.listenTo(r,"focus",this.onActive),this.listenTo(r,"change:content",this.updateContentText),this.listenTo(r,"sync:content",this.syncContent),this.rte=o==null?void 0:o.RichTextEditor},i.prototype.updateContentText=function(t,r,o){o===void 0&&(o={}),!o.fromDisable&&this.disableEditing()},i.prototype.canActivate=function(){var t=this,r=t.model,o=t.rteEnabled,l=t.em,v=l==null?void 0:l.getEditing(),w=v===r,x=!0,E=!1,M;if((o||!r.get("editable")||w||(E=r.isChildOf("text")))&&(x=!1,E&&!r.get("textable"))){for(var G=r.parent();G&&!G.isInstanceOf("text");)G=G.parent();G&&G.get("editable")?M=G:x=!0}return{result:x,delegate:M}},i.prototype.onActive=function(t){var r,o;return Xc(this,void 0,void 0,function(){var l,v,w,x,E,M,G,ot,Ct;return Rl(this,function(Ut){switch(Ut.label){case 0:return l=this,v=l.rte,w=l.em,x=this.canActivate(),E=x.result,M=x.delegate,E?((o=t==null?void 0:t.stopPropagation)===null||o===void 0||o.call(t),G=this,[4,this.getContent()]):(M&&((r=t==null?void 0:t.stopPropagation)===null||r===void 0||r.call(t),w.setSelected(M),M.trigger("active",t)),[2]);case 1:if(G.lastContent=Ut.sent(),!v)return[3,5];Ut.label=2;case 2:return Ut.trys.push([2,4,,5]),ot=this,[4,v.enable(this,this.activeRte,{event:t})];case 3:return ot.activeRte=Ut.sent(),[3,5];case 4:return Ct=Ut.sent(),w.logError(Ct),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},i.prototype.onDisable=function(t){this.disableEditing(t)},i.prototype.disableEditing=function(t){return t===void 0&&(t={}),Xc(this,void 0,void 0,function(){var r,o,l,v,w,x,E,M;return Rl(this,function(G){switch(G.label){case 0:if(r=this,o=r.model,l=r.rte,v=r.activeRte,w=r.em,x=o&&o.get("editable"),!l)return[3,8];G.label=1;case 1:return G.trys.push([1,3,,4]),[4,l.disable(this,v,t)];case 2:return G.sent(),[3,4];case 3:return E=G.sent(),w.logError(E),[3,4];case 4:return M=x,M?[4,this.getContent()]:[3,6];case 5:M=G.sent()!==this.lastContent,G.label=6;case 6:return M?[4,this.syncContent(t)]:[3,8];case 7:G.sent(),this.lastContent="",G.label=8;case 8:return this.toggleEvents(),[2]}})})},i.prototype.getContent=function(){return Xc(this,void 0,void 0,function(){var t,r,o,l;return Rl(this,function(v){switch(v.label){case 0:return t=this,r=t.rte,o=t.activeRte,l="",r?[4,r.getContent(this,o)]:[3,2];case 1:l=v.sent(),v.label=2;case 2:return[2,l]}})})},i.prototype.syncContent=function(t){return t===void 0&&(t={}),Xc(this,void 0,void 0,function(){var r,o,l,v,w,x,E;return Rl(this,function(M){switch(M.label){case 0:return r=this,o=r.model,l=r.rte,v=r.rteEnabled,!v&&!t.force?[2]:[4,this.getContent()];case 1:return w=M.sent(),x=o.components(),E=ja({fromDisable:1},t),o.set("content","",E),l!=null&&l.customRte&&!l.customRte.parseContent?(x.length&&x.reset(void 0,ja(ja({},t),{keepIds:lr(x)})),o.set("content",w,E)):x.resetFromString(w,t),[2]}})})},i.prototype.insertComponent=function(t,r){var o;r===void 0&&(r={});var l=this,v=l.model,w=l.el,x=w.ownerDocument,E=x.getSelection();if(E!=null&&E.rangeCount){var M=E.getRangeAt(0),G=M.startContainer,ot=M.startOffset,Ct=(0,pe.getComponentModel)(G),Ut=[];if(Ct&&(!((o=Ct.is)===null||o===void 0)&&o.call(Ct,"textnode"))){var ie=Ct.collection;ie.forEach(function(qe){if(qe===Ct){var Ke="textnode",Or=r.useDomContent?G.textContent||"":qe.content;Ut.push({type:Ke,content:Or.slice(0,ot)}),Ut.push(t),Ut.push({type:Ke,content:Or.slice(ot)})}else Ut.push(qe)});var ae=Ut.filter(Boolean),Ie=ae.indexOf(t);return ie.reset(ae,r),ie.at(Ie)}}return v.append(t,r)},i.prototype.onInput=function(){var t=this.em,r="component",o=["".concat(r,":update"),"".concat(r,":input")].join(" ");t&&t.trigger(o,this.model)},i.prototype.disablePropagation=function(t){t.stopPropagation()},i.prototype.toggleEvents=function(t){var r=this,o=r.em,l=r.model,v=r.$el,w={on:tr.on,off:tr.S1},x=t?"on":"off";o.setEditing(t?this:!1),this.rteEnabled=!!t;var E=[this.el.ownerDocument,document];if(w.off(E,"mousedown",this.onDisable),w[x](E,"mousedown",this.onDisable),o[x]("toolbar:run:before",this.onDisable),l&&(l[x]("removed",this.onDisable),l.trigger("rte:".concat(t?"enable":"disable"))),v==null||v.off("mousedown",this.disablePropagation),v&&v[x]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var M=this.el;M;)M.draggable=!t,M=M.parentNode,M&&M.tagName=="BODY"&&(M=0)},i}(di);const Tc=bl;var wl=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nf=function(p){wl(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.render=function(){return p.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},i}(Tc);const Cp=Nf;var Eu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Da=function(p){Eu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(Cp);const Eo=Da;var us=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ta=function(p){us(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"div"},i.prototype.events=function(){return{}},i.prototype.initialize=function(t){p.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},i.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},i.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},i.prototype.render=function(){return p.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},i}(Zc);const _l=Ta;var Jc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),of=function(p){Jc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"script"},i.prototype.events=function(){return{}},i}(di);const Pu=of;var Vf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),af=function(p){Vf(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},i}(di);const Ei=af;var ku=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sf=function(p){ku(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(di);const Hl=sf;var Ff=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ec=function(p){Ff(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(di);const Au=Ec;var Mu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pc=function(p){Mu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(di);const Rf=Pc;var kc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hf=function(p){kc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(di);const Ws=Hf;var Bf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Os=function(p){Bf(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(di);const Ac=Os;var Sp=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uf=function(p){Sp(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return{}},i}(di);const zf=Uf;var Ts=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mc=function(p){Ts(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"div"},i.prototype.events=function(){return{}},i.prototype.initialize=function(){di.prototype.initialize.apply(this,arguments);var t=this.model,r=["loop","autoplay","controls","color","rel","modestbranding","poster"],o=r.map(function(l){return"change:".concat(l)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,o,this.updateVideo)},i.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},i.prototype.updateSrc=function(){var t=this,r=t.model,o=t.videoEl;if(o){var l=r.get("provider"),v=r.get("src");switch(l){case"yt":v=r.getYoutubeSrc();break;case"ytnc":v=r.getYoutubeNoCookieSrc();break;case"vi":v=r.getVimeoSrc();break}o.src=v}},i.prototype.updateVideo=function(){var t=this,r=t.model,o=t.videoEl,l=r.get("provider");switch(l){case"yt":case"ytnc":case"vi":r.trigger("change:videoId");break;default:if(o){var v=o;v.loop=r.get("loop"),v.autoplay=r.get("autoplay"),v.controls=r.get("controls"),v.poster=r.get("poster")}}},i.prototype.renderByProvider=function(t){var r;switch(t){case"yt":r=this.renderYoutube();break;case"ytnc":r=this.renderYoutubeNoCookie();break;case"vi":r=this.renderVimeo();break;default:r=this.renderSource()}return this.videoEl=r,r},i.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},i.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},i.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},i.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},i.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},i.prototype.render=function(){di.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},i}(Zc);const dc=Mc;var Qc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lf=function(p){Qc(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.tagName=function(){return"div"},i}(di);const Wf=lf;var Bl=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Es=function(){return Es=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Es.apply(this,arguments)},Mi=function(p){Bl(i,p);function i(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=p.apply(this,t)||this;o.refreshDbn=(0,wt.debounce)(function(){return o.refresh()},0);var l=o.events;return o.on(l.update,o.onUpdate),o.on(l.updateInside,o.onUpdateDeep),o}return i.prototype.removeChildren=function(t,r,o){var l;o===void 0&&(o={}),p.prototype.removeChildren.call(this,t,r,o),(l=bo(t))===null||l===void 0||l.forEach(function(v){return ir(v,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},i.prototype.onAdd=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];p.prototype.onAdd.apply(this,t);var o=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:o})},i.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},i.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},i.prototype.refresh=function(){var t=this,r=t.em,o=t.events;r.trigger(o.symbol)},i.prototype.__trgEvent=function(t,r,o){o===void 0&&(o=!1);var l=this,v=l.em,w=l.events,x=o?w.symbolInstance:w.symbolMain;v.trigger(t,r),v.trigger(x,Es(Es({},r),{event:t})),this.refreshDbn()},i}(gn);const Lu=Mi;var $f=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fa=function(){return fa=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},fa.apply(this,arguments)},Ea=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},hc=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},gc;(function(p){p[p.InvalidSource=0]="InvalidSource",p[p.SourceReject=1]="SourceReject",p[p.TargetReject=2]="TargetReject"})(gc||(gc={}));var Lc=function(p){$f(i,p);function i(t){var r=p.call(this,t,"DomComponents",new gn(void 0,{em:t}))||this;r.componentTypes=[{id:"cell",model:gl,view:Au},{id:"row",model:Ho,view:Ac},{id:"table",model:qc,view:zf},{id:"thead",model:Jp,view:Ws},{id:"tbody",model:uc,view:Hl},{id:"tfoot",model:bu,view:Rf},{id:"map",model:Ui,view:_l},{id:"link",model:vu,view:Cp},{id:"label",model:yp,view:Eo},{id:"video",model:Ss,view:dc},{id:"image",model:ur,view:Zc},{id:"script",model:ul,view:Pu},{id:"svg-in",model:Sa,view:Ei},{id:"svg",model:pl,view:Ei},{id:"iframe",model:Lt,view:xp},{id:"comment",model:Be,view:yl},{id:"textnode",model:gt,view:_o},{id:fi,model:Zi,view:di},{id:"wrapper",model:Ou,view:Wf},{id:"text",model:To,view:Tc},{id:"default",model:wi,view:di}],r.componentsById={},r.Component=wi,r.Components=gn,r.ComponentView=di,r.ComponentsView=La,r.storageKey="components",r.keySymbols="symbols",r.events=ne.g;var o=r.config;r.symbols=new Lu([],{em:t,config:o,domc:r}),t&&(r.config.components=t.config.components||r.config.components);for(var l in ca)l in r.config||(r.config[l]=ca[l]);var v=r.config.pStylePrefix;if(v&&(r.config.stylePrefix=v+r.config.stylePrefix),t){t.get("Parser").compTypes=r.componentTypes,t.on("change:componentHovered",r.componentHovered,r);var w=t.get("selected");t.listenTo(w,"add",function(x,E,M){return r.selectAdd(w.getComponent(x),M)}),t.listenTo(w,"remove",function(x,E,M){return r.selectRemove(w.getComponent(x),M)})}return r}return i.prototype.postLoad=function(){var t=this,r=t.em,o=t.symbols,l=r.UndoManager;l.add(o)},i.prototype.load=function(t){var r=this,o=this.loadProjectData(t,{onResult:function(l){var v=r.getWrapper();if(v||(r.em.Pages.add({},{select:!0}),v=r.getWrapper()),(0,wt.isArray)(l))l.length&&v.components(l);else{var w=l.components,x=w===void 0?[]:w,E=Ea(l,["components"]);v.set(E),v.components(x)}}});return this.symbols.reset(t[this.keySymbols]||[]),o},i.prototype.store=function(){var t;return t={},t[this.keySymbols]=this.symbols,t},i.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),r=t==null?void 0:t.getMainFrame();return r==null?void 0:r.getComponent()},i.prototype.getWrapper=function(){return this.getComponent()},i.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},i.prototype.addComponent=function(t,r){return r===void 0&&(r={}),this.getComponents().add(t,r)},i.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},i.prototype.clear=function(t){t===void 0&&(t={});var r=this.getComponents();return r==null||r.filter(Boolean).forEach(function(o){return o.remove(t)}),this},i.prototype.setComponents=function(t,r){r===void 0&&(r={}),this.clear(r).addComponent(t,r)},i.prototype.addType=function(t,r){var o=this.em,l=r.model,v=l===void 0?{}:l,w=r.view,x=w===void 0?{}:w,E=r.isComponent,M=r.extend,G=r.extendView,ot=r.extendFn,Ct=ot===void 0?[]:ot,Ut=r.extendFnView,ie=Ut===void 0?[]:Ut,ae=r.block,Ie=this.getType(t),qe=this.getType(M),Ke=this.getType(G),Or=qe||Ie||this.getType("default"),Gr=Or.model,bn=Ke?Ke.view:Or.view,Tn=function(tc,wg,bh){return tc.reduce(function(wh,Ef){var Od=wg[Ef],Td=bh.prototype[Ef];return Od&&Td&&(wh[Ef]=function(){for(var qp=[],Kp=0;Kp<arguments.length;Kp++)qp[Kp]=arguments[Kp];Td.bind(this).apply(void 0,qp),Od.bind(this).apply(void 0,qp)}),wh},{})};if(typeof v=="object"){var Vr={defaults:v.defaults};delete v.defaults;var Cn=new Set(Gr.typeExtends);Cn.add(Gr.getDefaults().type),r.model=Gr.extend(fa(fa({},v),Tn(Ct,v,Gr)),{typeExtends:Cn,isComponent:Ie&&!qe&&!E?Gr.isComponent:E||function(){return 0}}),Object.defineProperty(r.model.prototype,"defaults",{get:function(){return fa(fa({},(0,wt.result)(Gr.prototype,"defaults")||{}),(0,wt.result)(Vr,"defaults")||{})}})}if(typeof x=="object"&&(r.view=bn.extend(fa(fa({},x),Tn(ie,x,bn)))),Ie?(Ie.model=r.model,Ie.view=r.view):(r.id=t,this.componentTypes.unshift(r)),ae){var Hn={id:t,label:t,content:{type:t}},Ko=ae===!0?Hn:fa(fa({},Hn),ae);o.Blocks.add(Ko.id||t,Ko)}var qr="component:type:".concat(Ie?"update":"add");return o==null||o.trigger(qr,Ie||r),this},i.prototype.getType=function(t){for(var r=this.componentTypes,o=0;o<r.length;o++){var l=r[o].id;if(l==t)return r[o]}},i.prototype.removeType=function(t){var r=this.componentTypes,o=this.getType(t);if(o){var l=r.indexOf(o);return r.splice(l,1),o}},i.prototype.getTypes=function(){return this.componentTypes},i.prototype.selectAdd=function(t,r){var o=this;r===void 0&&(r={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(l){return o.em.trigger(l,t,r)}))},i.prototype.selectRemove=function(t,r){var o=this;r===void 0&&(r={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(l){return o.em.trigger(l,t,r)}))},i.prototype.componentHovered=function(){var t=this.em,r=t.get("componentHovered"),o=t.previous("componentHovered"),l="hovered";o&&o.get("status")==l&&o.set({status:"",state:""}),r&&(0,wt.isEmpty)(r.get("status"))&&r.set("status",l)},i.prototype.getShallowWrapper=function(){var t=this,r=t.shallow,o=t.em;if(!r&&o){var l=o.shallow;if(!l)return;var v=l.Components;if(v.componentTypes=this.componentTypes,r=v.getWrapper(),r){var w=[Ii,Hi].join(" ");r.on(w,(0,wt.debounce)(function(){return r==null?void 0:r.components("")},100))}this.shallow=r}return r},i.prototype.isComponent=function(t){return(0,pe.isComponent)(t)},i.prototype.addSymbol=function(t){if(!((0,wt.isSymbol)(t)&&!Lo(t))){var r=t.clone({symbol:!0});return $r(r)&&this.symbols.add(r),this.em.trigger("component:toggled"),r}},i.prototype.getSymbols=function(){return hc([],this.symbols.models,!0)},i.prototype.detachSymbol=function(t){co(t)&&ir(t)},i.prototype.getSymbolInfo=function(t,r){r===void 0&&(r={});var o=$r(t),l=Oo(t),v=!!l,w=bo(o?t:l)||[],x=l||(o?t:void 0),E=rt(t,{changed:r.withChanges}),M=o||v,G=M&&Lo(t);return{isSymbol:M,isMain:o,isInstance:v,isRoot:G,main:x,instances:w,relatives:E||[]}},i.prototype.canMove=function(t,r,o){var l={result:!1,reason:gc.InvalidSource,target:t,source:null};if(!r||!t)return l;var v=(0,pe.isComponent)(r)?r:null;if(!v){var w=this.getShallowWrapper();v=(w==null?void 0:w.append(r)[0])||null}if(l.source=v,!v)return l;var x=v.get("draggable");if((0,wt.isFunction)(x))x=!!x(v,t,o);else{var E=t.getEl();x=(0,wt.isArray)(x)?x.join(","):x,x=(0,wt.isString)(x)?E==null?void 0:E.matches(x):x}if(!x)return fa(fa({},l),{reason:gc.SourceReject});var M=t.get("droppable");if((0,wt.isFunction)(M))M=!!M(v,t,o);else if(M===!1&&t.isInstanceOf("text")&&v.get("textable"))M=!0;else{var E=v.getEl();M=(0,wt.isArray)(M)?M.join(","):M,M=(0,wt.isString)(M)?E==null?void 0:E.matches(M):M}var G=[t].concat(t.parents()).indexOf(v)>-1;return!M||G?fa(fa({},l),{reason:gc.TargetReject}):fa(fa({},l),{result:!0})},i.prototype.allById=function(){return this.componentsById},i.prototype.getById=function(t){return this.componentsById[t]||null},i.prototype.destroy=function(){var t,r=this.allById();Object.keys(r).forEach(function(o){return r[o]&&r[o].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(o){return{}})},i}(R);const Gf=Lc;var qf={stylePrefix:"css-",rules:[]};const jc=qf;var Kf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ps=Number.MAX_VALUE,Dc=function(p){var i=/(-?\d*\.?\d+)\w{0,}/.exec(p);return i?i[0]:""},Ul=function(p){Kf(i,p);function i(){var t=p.call(this)||this;return(0,wt.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return i.prototype.buildFromModel=function(t,r){var o=this;r===void 0&&(r={});var l="",v=this.em,w=v&&v.getConfig().avoidInlineStyle,x=t.styleToString(),E=t.classes;this.ids.push("#".concat(t.getId())),E.forEach(function(G){return o.compCls.push(G.getFullName())}),!w&&x&&(l="#".concat(t.getId(),"{").concat(x,"}"));var M=t.components();return M.forEach(function(G){return l+=o.buildFromModel(G,r)}),l},i.prototype.build=function(t,r){var o=this;r===void 0&&(r={});var l=r.json,v=r.em,w=r.cssc||(v==null?void 0:v.Css);this.em=v,this.compCls=[],this.ids=[],this.model=t;var x=[],E=t?this.buildFromModel(t,r):"",M=(0,wt.isUndefined)(r.clearStyles)&&v?v.getConfig().clearStyles:r.clearStyles;if(w){var G=r.rules||w.getAll(),ot={},Ct=[];r.onlyMatched&&t&&(0,pe.hasWin)()&&(G=this.matchedRules(t,G)),G.forEach(function(Ut){var ie=Ut.getAtRule();if(ie){var ae=ot[ie];ae?ae.push(Ut):ot[ie]=[Ut];return}var Ie=o.buildFromRule(Ut,Ct,r);l?x.push(Ie):E+=Ie}),this.sortMediaObject(ot).forEach(function(Ut){var ie="",ae=Ut.key,Ie=Ut.value;Ie.forEach(function(qe){var Ke=o.buildFromRule(qe,Ct,r);qe.get("singleAtRule")?E+="".concat(ae,"{").concat(Ke,"}"):ie+=Ke,l&&x.push(Ke)}),ie&&(E+="".concat(ae,"{").concat(ie,"}"))}),v&&M&&G.remove&&G.remove(Ct)}return l?x.filter(function(Ut){return Ut}):E},i.prototype.buildFromRule=function(t,r,o){var l=this,v;o===void 0&&(o={});var w="",x=this.model,E=t.selectorsToString({skipAdd:1}),M=t.get("selectorsAdd"),G=t.get("singleAtRule"),ot;if((v=t.get("selectors"))===null||v===void 0||v.forEach(function(Ut){var ie=Ut.getFullName();(l.compCls.indexOf(ie)>=0||l.ids.indexOf(ie)>=0||o.keepUnusedStyles)&&(ot=1)}),E&&ot||M||G||!x){var Ct=t.getDeclaration({body:1});Ct&&(o.json?w=t:w+=Ct)}else r.push(t);return w},i.prototype.matchedRules=function(t,r){var o=this,l=t.getEl(),v=[];return r.forEach(function(w){try{w.selectorsToString().split(",").some(function(x){return l==null?void 0:l.matches(o.__cleanSelector(x))})&&v.push(w)}catch{}}),t.components().forEach(function(w){v=v.concat(o.matchedRules(w,r))}),v=v.filter(function(w,x){return v.indexOf(w)===x}),v},i.prototype.getQueryLength=function(t){var r=/(-?\d*\.?\d+)\w{0,}/.exec(t);return r?parseFloat(r[1]):Ps},i.prototype.sortMediaObject=function(t){var r=this;t===void 0&&(t={});var o=[];return(0,wt.each)(t,function(l,v){return o.push({key:v,value:l})}),o.sort(function(l,v){var w=[l.key,v.key].every(function(M){return M.indexOf("min-width")!==-1}),x=w?l.key:v.key,E=w?v.key:l.key;return r.getQueryLength(x)-r.getQueryLength(E)})},i.prototype.sortRules=function(t,r){var o=function(x){return x.get("mediaText")||""},l=[o(t),o(r)].every(function(x){return x.indexOf("min-width")!==-1}),v=o(l?t:r),w=o(l?r:t);return this.getQueryLength(v)-this.getQueryLength(w)},i.prototype.__cleanSelector=function(t){return t.split(" ").map(function(r){return r.split(":")[0]}).join(" ")},i}(q.Hn);const ju=Ul;var Ji=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vc=function(){return vc=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},vc.apply(this,arguments)},Yf=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},xl=((0,pe.hasWin)()?window:{}).CSS,Ic=function(p){Ji(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t)||this;return o.config=t||{},o.opt=r,o.em=r.em,o.ensureSelectors(null,null,{}),o.on("change",o.__onChange),o}return i.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},i.prototype.__onChange=function(t,r){var o=this.em,l=this.changedAttributes();l&&!(0,pe.isEmptyObj)(l)&&(o==null||o.changesUp(r))},i.prototype.clone=function(){var t=vc({},this.opt),r=vc({},this.attributes);return r.selectors=this.get("selectors").map(function(o){return o.clone()}),new this.constructor(r,t)},i.prototype.ensureSelectors=function(t,r,o){var l=this.em,v=l==null?void 0:l.get("SelectorManager"),w=[this,"change:selectors",this.ensureSelectors],x=this.getSelectors();if(this.stopListening.apply(this,w),x.models&&(x=Yf([],x.models,!0)),x=(0,wt.isString)(x)?[x]:x,Array.isArray(x)){var E=x.filter(function(M){return M}).map(function(M){return v?v.add(M):M});x=new xa(E)}this.set("selectors",x,o),this.listenTo.apply(this,w)},i.prototype.getAtRule=function(){var t=this.get("atRuleType"),r=this.get("mediaText"),o=t?"@".concat(t):r?"@media":"";return o+(r&&o?" ".concat(r):"")},i.prototype.selectorsToString=function(t){t===void 0&&(t={});var r=[],o=this.get("state"),l=this.get("selectorsAdd"),v={escape:function(E){return xl&&xl.escape?xl.escape(E):E}},w=this.get("selectors").getFullString(0,v),x=o&&!t.skipState?":".concat(o):"";return w&&r.push("".concat(w).concat(x)),l&&!t.skipAdd&&r.push(l),r.join(", ")},i.prototype.getDeclaration=function(t){t===void 0&&(t={});var r="",o=this.attributes.important,l=this.selectorsToString(t),v=this.styleToString(vc({important:o},t)),w=this.get("singleAtRule");return(l||w)&&(v||t.allowEmpty)&&(r=w?v:"".concat(l,"{").concat(v,"}")),r},i.prototype.getDevice=function(){var t=this.em,r=this.attributes,o=r.atRuleType,l=r.mediaText,v=(t==null?void 0:t.get("DeviceManager").getDevices())||[],w=v.filter(function(x){return x.getWidthMedia()===""})[0];return o!=="media"||!l?w||null:v.filter(function(x){return x.getWidthMedia()===Dc(l)})[0]||null},i.prototype.getState=function(){var t=this.em,r=this.get("state"),o=(t==null?void 0:t.get("SelectorManager").getStates())||[];return o.filter(function(l){return l.getName()===r})[0]||null},i.prototype.getComponent=function(){var t,r=this.getSelectors(),o=r.length==1&&r.at(0),l=o&&o.isId()&&o.get("name");return l&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(l))||null},i.prototype.toCSS=function(t){t===void 0&&(t={});var r="",o=this.getAtRule(),l=this.getDeclaration(t);return(l||t.allowEmpty)&&(r=l),o&&r&&(r="".concat(o,"{").concat(r,"}")),r},i.prototype.toJSON=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var l=q.Hn.prototype.toJSON.apply(this,r);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var v=this.defaults();(0,wt.forEach)(v,function(w,x){l[x]===w&&delete l[x]}),delete l.style.__p,(0,wt.isEmpty)(l.selectors)&&delete l.selectors,(0,wt.isEmpty)(l.style)&&delete l.style}return l},i.prototype.compare=function(t,r,o,l){var v;l===void 0&&(l={});var w=r||"",x=o||"",E=l.selectorsAdd||"",M=l.atRuleType||"",G=!(0,wt.isArray)(t)&&!t.models?[t]:t.models||t;x&&!M&&(M="media");var ot=G.map(function(ae){return ae.getFullName()}),Ct=(v=this.get("selectors"))===null||v===void 0?void 0:v.map(function(ae){return ae.getFullName()}),Ut=ot.slice().sort(),ie=Ct.slice().sort();return!(ot.length!==Ct.length||!Ut.every(function(ae,Ie){return ae===ie[Ie]})||this.get("state")!==w||this.get("mediaText")!==x||this.get("selectorsAdd")!==E||this.get("atRuleType")!==M)},i}(Mo);const $s=Ic;var tu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zl=function(p){tu(i,p);function i(t,r){var o=p.call(this,t)||this;return o.editor=r==null?void 0:r.em,setTimeout(function(){o.on("remove",o.onRemove),o.on("add",o.onAdd)}),o}return i.prototype.toJSON=function(t){var r=q.FE.prototype.toJSON.call(this,t);return r.filter(function(o){return o.style&&!o.shallow})},i.prototype.onAdd=function(t,r,o){t.ensureSelectors(t,r,o)},i.prototype.onRemove=function(t){var r=this.editor;r.stopListening(t),r.UndoManager.remove(t)},i.prototype.add=function(t,r){return r===void 0&&(r={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),r.em=this.editor,q.FE.prototype.add.apply(this,[t,r])},i}(q.FE);const mc=zl;zl.prototype.model=$s;var Zf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cl=function(){return Cl=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Cl.apply(this,arguments)},Gs=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},Sl=function(p){Zf(i,p);function i(t){var r=p.call(this,t,"CssComposer",null,{},jc)||this;r.Selectors=xa,r.storageKey="styles";var o=r.config,l=o.pStylePrefix;return l&&(o.stylePrefix=l+o.stylePrefix),o.rules=r.em.config.style||o.rules||"",r.rules=new mc([],o),r}return i.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},i.prototype.postLoad=function(){var t,r=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");r&&r.add(this.getAll())},i.prototype.store=function(){return this.getProjectData()},i.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},i.prototype.add=function(t,r,o,l,v){l===void 0&&(l={}),v===void 0&&(v={});var w=r||"",x=o||"",E=Cl({},l),M=this.get(t,w,x,E);return M&&M.config&&!M.config.singleAtRule||(E.state=w,E.mediaText=x,E.selectors=[],x&&!E.atRuleType&&(E.atRuleType="media"),M=new $s(E,this.config),M.get("selectors").add(t,v),this.rules.add(M,v)),M},i.prototype.get=function(t,r,o,l){var v=t;if((0,wt.isString)(t)){var w=this.em.Selectors,x=t.split(",")[0].trim(),E=this.em.Parser.parserCss.checkNode({selectors:x})[0];v=w.get(E.selectors)}return this.rules.find(function(M){return M.compare(v,r,o,l)})||null},i.prototype.getAll=function(){return this.rules},i.prototype.addCollection=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o={});var l=this.em,v=[];(0,wt.isString)(t)&&(t=l.Parser.parseCss(t));for(var w=t instanceof Array?t:[t],x=0,E=w.length;x<E;x++){var M=w[x]||{};if(M.selectors){var G=l==null?void 0:l.Selectors;G||console.warn("Selector Manager not found");for(var ot=M.selectors,Ct=ot instanceof Array?ot:[ot],Ut=[],ie=0,ae=Ct.length;ie<ae;ie++){var Ie=G.add(Ct[ie]);Ut.push(Ie)}var qe=this.get(Ut,M.state,M.mediaText,M),Ke=this.add(Ut,M.state,M.mediaText,M,r),Or=!qe||!r.avoidUpdateStyle,Gr=M.style||{};if((0,pe.isObject)(o)&&Ke.set(o,r),Or){var bn=r.extend?Cl(Cl({},Ke.get("style")),Gr):Gr;Ke.set("style",bn,r)}v.push(Ke)}}return v},i.prototype.addRules=function(t){return this.addCollection(t)},i.prototype.setRule=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o={});var l=o.atRuleType,v=o.atRuleParams,w=this.em.Parser.parserCss.checkNode({selectors:t,style:r})[0],x=w.state,E=w.selectorsAdd,M=this.em.Selectors,G=M.add(w.selectors),ot=this.add(G,x,v,{selectorsAdd:E,atRule:l});return o.addStyles?ot.addStyle(r,o):ot.setStyle(r,o),ot},i.prototype.getRule=function(t,r){r===void 0&&(r={});var o=this.em,l=o.Selectors,v=o.Parser.parserCss.checkNode({selectors:t})[0],w=l.get(v.selectors),x=v.state,E=v.selectorsAdd,M=r.atRuleType,G=r.atRuleParams;return w?this.get(w,x,G,{selectorsAdd:E,atRuleType:M}):void 0},i.prototype.getRules=function(t){var r=this.getAll();if(!t)return Gs([],r.models,!0);var o={sort:!0},l=(0,wt.isString)(t)?t.split(",").map(function(w){return w.trim()}):t,v=r.filter(function(w){return l.indexOf(w.getSelectors().getFullString(null,o))>=0});return v},i.prototype.setIdRule=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o={});var l=o.addOpts,v=l===void 0?{}:l,w=o.mediaText,x=o.state||"",E=(0,wt.isUndefined)(w)?this.em.getCurrentMedia():w,M=this.em.Selectors,G=M.add({name:t,type:Vo.TYPE_ID},v),ot=this.add(G,x,E,{},v);return ot.setStyle(r,Cl(Cl({},o),v)),ot},i.prototype.getIdRule=function(t,r){r===void 0&&(r={});var o=r.mediaText,l=r.state||"",v=(0,wt.isUndefined)(o)?this.em.getCurrentMedia():o,w=this.em.Selectors.get(t,Vo.TYPE_ID);return w&&this.get(w,l,v)},i.prototype.setClassRule=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o={});var l=o.state||"",v=o.mediaText||this.em.getCurrentMedia(),w=this.em.Selectors,x=w.add({name:t,type:Vo.TYPE_CLASS}),E=this.add(x,l,v);return E.setStyle(r,o),E},i.prototype.getClassRule=function(t,r){r===void 0&&(r={});var o=r.state||"",l=r.mediaText||this.em.getCurrentMedia(),v=this.em.Selectors.get(t,Vo.TYPE_CLASS);return v&&this.get(v,o,l)},i.prototype.remove=function(t,r){var o=(0,wt.isString)(t)?this.getRules(t):t,l=this.getAll().remove(o,r);return(0,wt.isArray)(l)?l:[l]},i.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},i.prototype.getComponentRules=function(t,r){r===void 0&&(r={});var o=r.state,l=r.mediaText,v=r.current;v&&(o=this.em.get("state")||"",l=this.em.getCurrentMedia());var w=t.getId(),x=this.getAll().filter(function(E){return!(0,wt.isUndefined)(o)&&E.get("state")!==o||!(0,wt.isUndefined)(l)&&E.get("mediaText")!==l?!1:E.getSelectorsString()==="#".concat(w)});return x},i.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Dn({collection:this.rules,config:this.config}),this.rulesView.render().el},i.prototype.checkId=function(t,r){r===void 0&&(r={});var o=r.idMap,l=o===void 0?{}:o,v=[];if(!Object.keys(l).length)return v;var w=Array.isArray(t)?t:[t];return w.forEach(function(x){var E=x.selectors;if(E&&E.length==1){var M=E[0];if((0,wt.isString)(M)){if(M[0]==="#"){var G=M.substring(1),ot=l[G];G&&ot&&(E[0]="#".concat(ot),v.push(x))}}else if(M.name&&M.type===Vo.TYPE_ID){var ot=l[M.name];ot&&(M.name=ot,v.push(x))}}}),v},i.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},i}(R);const eu=Sl;var Op={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const Du=Op;var cf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Iu=function(p){cf(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(i.prototype,"category",{get:function(){var t=this.get("category");return t instanceof oa?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),i.prototype.getId=function(){return this.id},i.prototype.getLabel=function(){return this.get("label")},i.prototype.getMedia=function(){return this.get("media")},i.prototype.getContent=function(){return this.get("content")},i.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,wt.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},i}(q.Hn);const Xf=Iu;var Pa=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ru=function(p){Pa(i,p);function i(t,r){var o=p.call(this,t)||this;return o.em=r.em,o.on("add",o.handleAdd),o}return i.prototype.getCategories=function(){return this.em.Blocks.getCategories()},i.prototype.handleAdd=function(t){this.initCategory(t)},i}(Ha);const Nu=ru;ru.prototype.model=Xf;var Nc;(function(p){p.add="block:add",p.remove="block:remove",p.removeBefore="block:remove:before",p.update="block:update",p.dragStart="block:drag:start",p.drag="block:drag",p.dragEnd="block:drag:stop",p.categoryUpdate="block:category:update",p.custom="block:custom",p.all="block"})(Nc||(Nc={}));var uf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vc=function(p){uf(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t)||this,l=o.model;return o.em=r.em,o.config=r,o.endDrag=o.endDrag.bind(o),o.ppfx=r.pStylePrefix||"",o.listenTo(l,"destroy remove",o.remove),o.listenTo(l,"change",o.render),o}return i.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},i.prototype.__getModule=function(){return this.em.Blocks},i.prototype.handleClick=function(t){var r=this,o=r.config,l=r.model,v=r.em,w=l.get("onClick")||o.appendOnClick;if(v.trigger("block:click",l,t),w){if((0,wt.isFunction)(w))return w(l,v==null?void 0:v.getEditor(),{event:t})}else return;var x=o.getSorter(),E=l.get("content"),M=v.getSelected();x.setDropContent(E);var G,ot,Ct;if(M)if(ot=x.validTarget(M.getEl(),E),ot.valid)G=M;else{var Ut=M.parent();Ut&&(ot=x.validTarget(Ut.getEl(),E),ot.valid&&(G=Ut,Ct=Ut.components().indexOf(M)+1))}if(!G){var ie=v.getWrapper();ot=x.validTarget(ie.getEl(),E),ot.valid&&(G=ie)}var ae=G&&G.append(E,{at:Ct})[0];ae&&v.setSelected(ae,{scroll:1})},i.prototype.startDrag=function(t){var r=this,o=r.config,l=r.em,v=r.model,w=v.get("disable");if(!(t.button!==0||!o.getSorter||this.el.draggable||w)){l.refreshCanvas();var x=o.getSorter();x.__currentBlock=v,x.setDragHelper(this.el,t),x.setDropContent(this.model.get("content")),x.startSort(this.el),(0,tr.on)(document,"mouseup",this.endDrag)}},i.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},i.prototype.handleDrag=function(t){this.__getModule().__drag(t)},i.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},i.prototype.endDrag=function(){(0,tr.S1)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},i.prototype.render=function(){var t,r=this,o=r.em,l=r.el,v=r.$el,w=r.ppfx,x=r.model,E=x.get("disable"),M=x.get("attributes")||{},G=M.class||"",ot="".concat(w,"block"),Ct=o&&o.t("blockManager.labels.".concat(x.id))||x.get("label"),Ut=x.get("render"),ie=x.get("media"),ae=E?"".concat(ot,"--disable"):"".concat(w,"four-color-h");v.attr(M),l.className="".concat(G," ").concat(ot," ").concat(w,"one-bg ").concat(ae).trim(),l.innerHTML=`
      `.concat(ie?'<div class="'.concat(ot,'__media">').concat(ie,"</div>"):"",`
      <div class="`).concat(ot,'-label">').concat(Ct,`</div>
    `),l.title=M.title||((t=l.textContent)===null||t===void 0?void 0:t.trim()),l.setAttribute("draggable","".concat(!!((0,pe.hasDnd)(o)&&!E)));var Ie=Ut&&Ut({el:l,model:x,className:ot,prefix:w});return Ie&&(l.innerHTML=Ie),this},i}(q.G7);const nu=Vc;var Tp=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jf=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},Ep=function(p){Tp(i,p);function i(t,r,o){var l=p.call(this,t)||this;l.config=r;var v=r.pStylePrefix||"";return l.em=r.em,l.catName=o,l.pfx=v,l.caretR="fa fa-caret-right",l.caretD="fa fa-caret-down",l.iconClass="".concat(v,"caret-icon"),l.activeClass="".concat(v,"open"),l.className="".concat(v).concat(o,"-category"),l.listenTo(l.model,"change:open",l.updateVisibility),l.model.view=l,l}return i.prototype.events=function(){return{"click [data-title]":"toggle"}},i.prototype.template=function(t){var r=t.pfx,o=t.label,l=t.catName;return Te(qs||(qs=Jf([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),r,r,o,r,l)},i.prototype.attributes=function(){return this.model.get("attributes")||{}},i.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},i.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},i.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},i.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},i.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},i.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},i.prototype.append=function(t){this.getTypeEl().appendChild(t)},i.prototype.render=function(){var t=this,r=t.em,o=t.el,l=t.$el,v=t.model,w=t.pfx,x=t.catName,E=r.t("".concat(x,"Manager.categories.").concat(v.id))||v.get("label");return o.innerHTML=this.template({pfx:w,label:E,catName:x}),l.addClass(this.className),l.css({order:v.get("order")}),this.updateVisibility(),this},i}(q.G7);const Pp=Ep;var qs,Fc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wl=function(){return Wl=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Wl.apply(this,arguments)},ks=function(p){Fc(i,p);function i(t,r){var o=p.call(this,t)||this;o.renderedCategories=new Map,(0,wt.bindAll)(o,"getSorter","onDrag","onDrop","onMove"),o.config=r||{},o.categories=t.categories||"";var l=o.config.pStylePrefix||"";o.ppfx=l,o.noCatClass="".concat(l,"blocks-no-cat"),o.blockContClass="".concat(l,"blocks-c"),o.catsClass="".concat(l,"block-categories");var v=o.collection;return o.listenTo(v,"add",o.addTo),o.listenTo(v,"reset",o.render),o.em=o.config.em,o.em&&(o.config.getSorter=o.getSorter),o}return i.prototype.__getModule=function(){return this.em.Blocks},i.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Wl(Wl({},this.config),t)},i.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var r=t.Utils,o=t.Canvas;this.sorter=new r.Sorter({container:o.getBody(),placer:o.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:o.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},i.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},i.prototype.onMove=function(t){this.__getModule().__drag(t)},i.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},i.prototype.addTo=function(t){this.add(t)},i.prototype.add=function(t,r){var o=this,l=o.config,v=o.renderedCategories,w=t.get("attributes"),x=new nu({model:t,attributes:w},l),E=x.render().el,M=t.parent.initCategory(t);if(M&&this.categories&&!l.ignoreCategories){var G=M.getId(),ot=this.getCategoriesEl(),Ct=v.get(G);!Ct&&ot&&(Ct=new Pp({model:M},l,"block").render(),v.set(G,Ct),ot.appendChild(Ct.el)),Ct==null||Ct.append(E);return}r?r.appendChild(E):this.append(E)},i.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},i.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},i.prototype.append=function(t){var r=this.getBlocksEl();r&&r.appendChild(t)},i.prototype.render=function(){var t=this,r=this.ppfx,o=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(v){return t.add(v,o)}),this.append(o);var l="".concat(this.blockContClass,"s ").concat(r,"one-bg ").concat(r,"two-color");return this.$el.addClass(l),this.rendered=!0,this},i}(q.G7);const As=ks;var ou=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ol=function(){return Ol=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ol.apply(this,arguments)},$l=function(p){ou(i,p);function i(t){var r,o=p.call(this,t,"BlockManager",new Nu(((r=t.config.blockManager)===null||r===void 0?void 0:r.blocks)||[],{em:t}),Nc,Du)||this;return o.events=Nc,o.Block=Xf,o.Blocks=Nu,o.Category=oa,o.Categories=Ca,o.storageKey="",o.blocks=o.all,o.blocksVisible=new Nu(o.blocks.models,{em:t}),o.categories=new Ca([],{em:t,events:{update:Nc.categoryUpdate}}),o.blocks.on("add",function(l){return o.blocksVisible.add(l)}),o.blocks.on("remove",function(l){return o.blocksVisible.remove(l)}),o.blocks.on("reset",function(l){return o.blocksVisible.reset(l.models)}),o.__onAllEvent=(0,wt.debounce)(function(){return o.__trgCustom()},0),o}return i.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},i.prototype.__customData=function(){var t=this,r=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:r.container,dragStart:function(o,l){return t.startDrag(o,l)},drag:function(o){return t.__drag(o)},dragStop:function(o){return t.endDrag(o)}}},i.prototype.__startDrag=function(t,r){var o=this,l=o.em,v=o.events,w=o.blocks,x=t.getContent?t.getContent():t;this._dragBlock=t,l.set({dragResult:null,dragContent:x}),[l,w].map(function(E){return E.trigger(v.dragStart,t,r)})},i.prototype.__drag=function(t){var r=this,o=r.em,l=r.events,v=r.blocks,w=this._dragBlock;[o,v].map(function(x){return x.trigger(l.drag,w,t)})},i.prototype.__endDrag=function(t){t===void 0&&(t={});var r=this,o=r.em,l=r.events,v=r.blocks,w=this._dragBlock,x=t.component||o.get("dragResult");if(delete this._dragBlock,x&&w){var E="activeOnRender",M=x.get&&x.get(E),G=w.get("activate")||M,ot=w.get("select"),Ct=(0,wt.isArray)(x)?x[0]:x;(ot||G&&ot!==!1)&&o.setSelected(Ct),G&&(Ct.trigger("active"),M&&Ct.unset(E)),w.get("resetId")&&Ct.onAll(function(Ut){return Ut.resetId()})}o.set({dragResult:null,dragContent:null}),w&&[o,v].map(function(Ut){return Ut.trigger(l.dragEnd,x,w)})},i.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},i.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Ol(Ol({},this._bhv||{}),t)},i.prototype.__getBehaviour=function(){return this._bhv||{}},i.prototype.startDrag=function(t,r){this.__startDrag(t,r),this.__getFrameViews().forEach(function(o){var l;return(l=o.droppable)===null||l===void 0?void 0:l.startCustom()})},i.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(r){var o;return(o=r.droppable)===null||o===void 0?void 0:o.endCustom(t)}),this.__endDrag()},i.prototype.postRender=function(){var t=this,r=t.categories,o=t.config,l=t.em,v=this.blocksVisible;this.blocksView=new As({collection:v,categories:r},Ol(Ol({},o),{em:l})),this.__appendTo(v.models),this.__trgCustom()},i.prototype.add=function(t,r,o){o===void 0&&(o={});var l=r||{};return l.id=t,this.blocks.add(l,o)},i.prototype.get=function(t){return this.blocks.get(t)},i.prototype.getAll=function(){return this.blocks},i.prototype.getAllVisible=function(){return this.blocksVisible},i.prototype.remove=function(t,r){return r===void 0&&(r={}),this.__remove(t,r)},i.prototype.getCategories=function(){return this.categories},i.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},i.prototype.getDragBlock=function(){return this._dragBlock},i.prototype.getBlocksByCategory=function(t){return qi(t||this.getAll().models)},i.prototype.render=function(t,r){r===void 0&&(r={});var o=this,l=o.categories,v=o.config,w=o.em,x=t||this.getAll().models;if(r.external){var E=new Nu(x,{em:w});return new As({collection:E,categories:l},Ol(Ol({em:w},v),r)).render().el}return this.blocksView&&(this.blocksView.updateConfig(r),this.blocksView.collection.reset(x),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},i.prototype.destroy=function(){var t,r=[this.blocks,this.blocksVisible,this.categories];r.map(function(o){return o.stopListening()}),r.map(function(o){return o.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},i}(R);const hi=$l;var Qf={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const Uo=Qf;var Tl=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fs=function(p){Tl(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{name:"",label:""}},i.prototype.getName=function(){return this.get("name")},i.prototype.getLabel=function(){return this.get("label")||this.getName()},i}(q.Hn);const Ia=fs;fs.prototype.idAttribute="name";var Rc=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hc=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},ff="contentEditable",Gl=function(p){Rc(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this,o=t.config||{};return r.config=o,r.module=t.module,r.coll=t.coll||null,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.em=o.em,r.listenTo(r.model,"change:active",r.updateStatus),r}return i.prototype.template=function(){var t=this,r=t.pfx,o=t.model,l=t.config,v=o.get("label")||"";return Te(df||(df=Hc([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),r,r,r,v,r,r,l.iconTagRemove)},i.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},i.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},i.prototype.startEditTag=function(){var t=this.em,r=this.getInputEl();r[ff]="true",r.focus(),t==null||t.setEditing(!0)},i.prototype.endEditTag=function(){var t=this,r=t.model,o=t.em,l=this.getInputEl(),v=l.textContent||"",w=o==null?void 0:o.Selectors;l[ff]="false",o==null||o.setEditing(!1),w&&w.rename(r,v)!==r&&(l.innerText=r.getLabel())},i.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},i.prototype.removeTag=function(){this.module.removeSelected(this.model)},i.prototype.updateStatus=function(){var t=this,r=t.model,o=t.$el,l=t.config,v=l.iconTagOn,w=l.iconTagOff,x=o.find("[data-tag-status]");r.get("active")?(x.html(v),o.removeClass("opac50")):(x.html(w),o.addClass("opac50"))},i.prototype.render=function(){var t=this,r=t.pfx,o=t.ppfx,l=t.$el,v=t.model,w="".concat(r,"tag"),x=["".concat(w," ").concat(o,"three-bg")];return v.get("protected")&&x.push("".concat(w,"-protected")),l.html(this.template()),l.attr("class",x.join(" ")),this.updateStatus(),this},i}(q.G7);const pf=Gl;var df,tp=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),El=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},Bc=function(p){tp(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.config=t.config||{},r.pfx=r.config.stylePrefix||"",r.ppfx=r.config.pStylePrefix||"",r.className=r.pfx+"tags",r.stateInputId=r.pfx+"states",r.stateInputC=r.pfx+"input-c",r.states=r.config.states||[];var o=r.config.em,l=r.collection;r.target=o;var v=o.Selectors;r.module=v,r.em=o,r.componentChanged=(0,wt.debounce)(r.componentChanged.bind(r),0),r.checkSync=(0,wt.debounce)(r.checkSync.bind(r),0);var w=ne.g.update,x="".concat(w,":classes"),E="component:toggled ".concat(x),M="".concat(x," ").concat(w,":attributes:id change:state");return r.listenTo(o,E,r.componentChanged),r.listenTo(o,"styleManager:update",r.componentChanged),r.listenTo(o,M,r.__handleStateChange),r.listenTo(o,"styleable:change change:device",r.checkSync),r.listenTo(l,"add",r.addNew),r.listenTo(l,"reset",r.renderClasses),r.listenTo(l,"remove",r.tagRemoved),r.listenTo(v.getAll(),v.events.state,(0,wt.debounce)(function(){return r.renderStates()},0)),r.delegateEvents(),r}return i.prototype.template=function(t){var r=t.labelInfo,o=t.labelHead,l=t.iconSync,v=t.iconAdd,w=t.pfx,x=t.ppfx;return Te(ql||(ql=El([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),w,w,w,w,o,w,w,w,x,x,x,w,x,x,w,x,w,w,w,w,w,v,w,w,l,w,w,r,w)},i.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},i.prototype.syncStyle=function(){var t=this.em,r=this.getTarget(),o=t.Css,l={noDisabled:1},v=this.getCommonSelectors({opts:l}),w=t.get("state"),x=t.getCurrentMedia(),E=[],M=o.get(v,w,x)||o.add(v,w,x),G;this.getTargets().forEach(function(ot){var Ct=o.getIdRule(ot.getId(),{state:w,mediaText:x});G=Ct.getStyle(),Ct.setStyle({}),E.push(Ct)}),G&&M.addStyle(G),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:r,selectors:v,mediaText:x,rule:M,ruleComponents:E,state:w})},i.prototype.tagRemoved=function(t){this.updateStateVis()},i.prototype.addNew=function(t){this.addToClasses(t)},i.prototype.startNewTag=function(){var t,r;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(r=this.$input)===null||r===void 0||r.show().focus()},i.prototype.endNewTag=function(){var t,r;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(r=this.$input)===null||r===void 0||r.hide().val("")},i.prototype.onInputKeyUp=function(t){var r;t.keyCode===13?(t.preventDefault(),this.addNewTag((r=this.$input)===null||r===void 0?void 0:r.val())):t.keyCode===27&&this.endNewTag()},i.prototype.checkStates=function(){var t=this.em.getState(),r=this.getStates();r&&r.val(t)},i.prototype.componentChanged=function(t){var r=t===void 0?{}:t,o=r.targets;this.updateSelection(o)},i.prototype.updateSelection=function(t){var r=t||this.getTargets();r=(0,wt.isArray)(r)?r:[r];var o=[];return r&&r.length&&(o=this.getCommonSelectors({targets:r}),this.checkSync({validSelectors:o})),this.collection.reset(o),this.updateStateVis(r),this.module.__trgCustom(),o},i.prototype.getCommonSelectors=function(t){var r=t===void 0?{}:t,o=r.targets,l=r.opts,v=l===void 0?{}:l,w=o||this.getTargets();return this.module.__getCommonSelectors(w,v)},i.prototype._commonSelectors=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return(t=this.module).__common.apply(t,r)},i.prototype.checkSync=function(){var t=this,r=t.$btnSyncEl,o=t.config,l=t.collection,v=this.getTarget(),w;if(v&&o.componentFirst&&l.length){var x=v.getStyle();w=!(0,wt.isEmpty)(x)}r&&r[w?"show":"hide"]()},i.prototype.getTarget=function(){return this.target.getSelected()},i.prototype.getTargets=function(){return this.target.getSelectedAll()},i.prototype.updateStateVis=function(t){var r=this.em,o=r&&r.getConfig().avoidInlineStyle,l=this.collection.length||o?"":"none";this.getStatesC().css("display",l),this.updateSelector(t)},i.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},i.prototype.updateSelector=function(t){var r=this,o=this.el.querySelector("[data-selected]"),l=[],v=t||this.getTargets();v=(0,wt.isArray)(v)?v:[v],v.forEach(function(w){return l.push(r.__getName(w))}),o&&(o.innerHTML=l.join(", ")),this.checkStates()},i.prototype.__getName=function(t){var r=this,o=r.pfx,l=r.config,v=r.em,w=l.selectedName,x=l.componentFirst,E;if((0,wt.isString)(t))E=Te(Kl||(Kl=El(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),o,t);else{var M=t==null?void 0:t.getSelectors();if(!M)return"";var G=M.getStyleable(),ot=v.get("state"),Ct=t.getId?Te(Uc||(Uc=El(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),o,t.getName(),o,t.getId()):"";E=this.collection.getFullString(G),E=E?Te(ep||(ep=El(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),o,E):t.get("selectorsAdd")||Ct,E=x&&Ct?Ct:E,E+=ot?Te(Qo||(Qo=El(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),o,ot):"",E=w?w({result:E,state:ot,target:t}):E}return E&&'<span class="'.concat(o,'sel">').concat(E,"</span>")},i.prototype.stateChanged=function(t){var r=this.em,o=t.target.value;r.set("state",o)},i.prototype.addNewTag=function(t){var r=t.trim();r&&(this.module.addSelected({label:r}),this.endNewTag())},i.prototype.addToClasses=function(t,r){var o=r,l=this.getClasses(),v=new pf({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return o?o.appendChild(v):l.append(v),v},i.prototype.renderClasses=function(){var t=this,r=document.createDocumentFragment(),o=this.getClasses();o.empty(),this.collection.each(function(l){return t.addToClasses(l,r)}),o.append(r)},i.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},i.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},i.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},i.prototype.renderStates=function(){var t=this,r=t.module,o=t.em,l=o.t("selectorManager.emptyState"),v=r.getStates().map(function(x){var E=o.t("selectorManager.states.".concat(x.id))||x.getLabel()||x.id;return'<option value="'.concat(x.id,'">').concat(E,"</option>")}).join(""),w=this.getStates();w&&w.html('<option value="">'.concat(l,"</option>").concat(v)),this.checkStates()},i.prototype.render=function(){var t=this,r=t.em,o=t.pfx,l=t.ppfx,v=t.config,w=t.$el,x=t.el,E=v.render,M=v.iconSync,G=v.iconAdd,ot={iconSync:M,iconAdd:G,labelHead:r.t("selectorManager.label"),labelInfo:r.t("selectorManager.selected"),ppfx:l,pfx:o,el:x};w.html(this.template(ot));var Ct=E&&E(ot);return Ct&&Ct!==x&&w.empty().append(Ct),this.$input=w.find("[data-input]"),this.$addBtn=w.find("[data-add]"),this.$classes=w.find("#"+o+"tags-c"),this.$btnSyncEl=w.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),w.attr("class","".concat(this.className," ").concat(l,"one-bg ").concat(l,"two-color")),this},i}(q.G7);const Po=Bc;var ql,Kl,Uc,ep,Qo,Vu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yl=function(){return Yl=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Yl.apply(this,arguments)},f=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},g=function(p){return(0,wt.isString)(p)&&p[0]=="#"},S=function(p){return(0,wt.isString)(p)&&p[0]=="."},_="selector",T="".concat(_,":"),D="".concat(T,"add"),Y="".concat(T,"update"),Z="".concat(T,"remove"),bt="".concat(Z,":before"),ht="".concat(T,"custom"),Qt="".concat(T,"state"),re={all:_,update:Y,add:D,remove:Z,removeBefore:bt,state:Qt,custom:ht},Se=function(p){Vu(i,p);function i(t){var r=p.call(this,t,"SelectorManager",new xa([]),re,Uo,{skipListen:!0})||this;r.Selector=Vo,r.Selectors=xa,r.storageKey="",(0,wt.bindAll)(r,"__updateSelectedByComponents");var o=r.config,l=o.pStylePrefix;l&&(o.stylePrefix=l+o.stylePrefix),r.all=new xa(o.selectors),r.selected=new xa([],{em:t,config:o}),r.states=new q.FE(o.states.map(function(x){return new Ia(x)}),{model:Ia}),r.model=new q.Hn({cFirst:o.componentFirst,_undo:!0}),r.__update=(0,wt.debounce)(function(){return r.__trgCustom()},0),r.__initListen({collections:[r.states,r.selected],propagate:[{entity:r.states,event:r.events.state}]}),t.on("change:state",function(x,E){return t.trigger(Qt,E)}),r.model.on("change:cFirst",function(x,E){return t.trigger("selector:type",E)});var v="".concat(ne.g.update,":classes");t.on("component:toggled ".concat(v),r.__updateSelectedByComponents);var w="component:toggled ".concat(v," change:device styleManager:update selector:state selector:type style:target");return r.model.listenTo(t,w,function(){return r.__update()}),r}return i.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},i.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?f([],this.all.models,!0):this.all:[]},i.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},i.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},i.prototype.select=function(t,r){r===void 0&&(r={});var o=Array.isArray(t)?t:[t],l=this.em.Styles.select(o,r);this.selected.reset(this.__getCommonSelectors(l));var v=this.selectorTags,w=l.filter(function(x){return x}).map(function(x){return(0,pe.isComponent)(x)||(0,pe.isRule)(x)&&!x.get("selectorsAdd")?x:x.getSelectorsString()});return v&&v.componentChanged({targets:w}),this},i.prototype.addSelector=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o={});var l=Yl({},r);(0,wt.isObject)(t)?l=t:l.name=t,g(l.name)?(l.name=l.name.substr(1),l.type=Vo.TYPE_ID):S(l.name)&&(l.name=l.name.substr(1)),l.label&&!l.name&&(l.name=this.escapeName(l.label));var v=l.name,w=this.getConfig(),x=this,E=x.all,M=x.em,G=v?this.get(v,l.type):E.where(l)[0];if(!G){var ot=l instanceof Vo?l:new Vo(l,Yl(Yl({},o),{config:w,em:M}));return E.add(ot,o)}return G},i.prototype.getSelector=function(t,r){return r===void 0&&(r=Vo.TYPE_CLASS),g(t)?(t=t.substr(1),r=Vo.TYPE_ID):S(t)&&(t=t.substr(1)),this.all.where({name:t,type:r})[0]},i.prototype.add=function(t,r){var o=this;r===void 0&&(r={});var l=(0,wt.isString)(t)?{}:r;return(0,wt.isArray)(t)?t.map(function(v){return o.addSelector(v,r,l)}):this.addSelector(t,r,l)},i.prototype.addClass=function(t){var r=this,o=[];return(0,wt.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(l){return o.push(r.addSelector(l))}),o},i.prototype.get=function(t,r){var o=this;if((0,wt.isArray)(t)){var l=[],v=t.map(function(w){return o.getSelector(w)}).filter(Boolean);return v.forEach(function(w){return l.indexOf(w)<0&&l.push(w)}),l}else return this.getSelector(t,r)},i.prototype.remove=function(t,r){return this.__remove(t,r)},i.prototype.rename=function(t,r,o){var l=this.escapeName(r),v=this.get(l);return v||t.set({name:l,label:r},o)},i.prototype.setState=function(t){return this.em.setState(t),this},i.prototype.getState=function(){return this.em.getState()},i.prototype.getStates=function(){return f([],this.states.models,!0)},i.prototype.setStates=function(t,r){return this.states.reset(t.map(function(o){return new Ia(o)}),r)},i.prototype.getSelected=function(){return this.__getCommon()},i.prototype.getSelectedAll=function(){return f([],this.selected.models,!0)},i.prototype.addSelected=function(t){var r=this.add(t);this.em.getSelectedAll().forEach(function(o){o.getSelectors().add(r)})},i.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(r){!t.get("protected")&&r&&r.getSelectors().remove(t)})},i.prototype.duplicateSelected=function(t,r){var o=this;r===void 0&&(r={});var l=this.em,v=this.getSelected();if(!(v.indexOf(t)<0)){var w=this.getState(),x=l.getCurrentMedia(),E=l.Css.get(v,w,x),M=E==null?void 0:E.getStyle();if(l.getSelectedAll().forEach(function(ot){var Ct=ot.getSelectors();if(Ct.includes(t)){var Ut=r.suffix||" copy",ie=t.getLabel(),ae=o.addSelector("".concat(ie).concat(Ut)),Ie=Ct.indexOf(t);Ct.remove(t),Ct.add(ae,{at:Ie})}}),M){var G=l.Css.add(this.getSelected(),w,x);G.setStyle(M)}}},i.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},i.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},i.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},i.prototype.escapeName=function(t){var r=this.getConfig().escapeName;return r?r(t):Vo.escapeName(t)},i.prototype.render=function(t){var r=this.selectorTags,o=this.getConfig(),l=r==null?void 0:r.el;return this.selected.reset(t),this.selectorTags=new Po({el:l,collection:this.selected,module:this,config:o}),this.selectorTags.render().el},i.prototype.destroy=function(){var t=this,r=t.selectorTags,o=t.model;o.stopListening(),this.__update.cancel(),this.__destroy(),r==null||r.remove(),this.selectorTags=void 0},i.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},i.prototype.__getCommonSelectors=function(t,r){r===void 0&&(r={});var o=t.map(function(l){return l.getSelectors&&l.getSelectors().getValid(r)}).filter(Boolean);return this.__common.apply(this,o)},i.prototype.__common=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.length?r.length===1?r[0]:r.length===2?r[0].filter(function(l){return r[1].indexOf(l)>=0}):r.slice(1).reduce(function(l,v){return t.__common(l,v)},r[0]):[]},i.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},i}(R);const ge=Se;var $e={textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}};const Ge=$e;var He,Ze={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},vr=(He={},He[Ze.MEDIA_RULE]="media",He[Ze.FONT_FACE_RULE]="font-face",He[Ze.PAGE_RULE]="page",He[Ze.KEYFRAMES_RULE]="keyframes",He[Ze.COUNTER_STYLE_RULE]="counter-style",He[Ze.SUPPORTS_RULE]="supports",He[Ze.DOCUMENT_RULE]="document",He[Ze.FONT_FEATURE_VALUES_RULE]="font-feature-values",He[Ze.VIEWPORT_RULE]="viewport",He),br=(0,wt.keys)(vr),Pr=[Ze.FONT_FACE_RULE,Ze.PAGE_RULE,Ze.COUNTER_STYLE_RULE,Ze.VIEWPORT_RULE],Sr=br.filter(function(p){return Pr.indexOf(Number(p))<0}).map(function(p){return vr[p]}).concat(["container","layer"]),Tr=Pr.map(function(p){return vr[p]}),hn=function(p){p===void 0&&(p="");for(var i=[],t=[],r=p.split(","),o=0,l=r.length;o<l;o++){var v=r[o].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(v)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(v)){var w=v.split(".").filter(Boolean);t.push(w)}else i.push(v)}return{result:t,add:i}},ln=function(p){for(var i=p.style,t={},r=0,o=i.length;r<o;r++){var l=i[r],v=i.getPropertyValue(l),w=i.getPropertyPriority(l);t[l]="".concat(v).concat(w?" !".concat(w):"")}return t},Bn=function(p){var i=p.conditionText||p.media&&p.media.mediaText||p.name||p.selectorText||"";return i.trim()},Ur=function(p,i,t){i===void 0&&(i={}),t===void 0&&(t={});var r={},o=p.length,l=p[o-1],v=l?l.split(/:(.+)/):[],w=v[1],x=t.atRule,E=t.selectorsAdd,M=t.mediaText,G=Tr.indexOf(x)>=0;return G&&(r.singleAtRule=!0),x&&(r.atRuleType=x),E&&(r.selectorsAdd=E),M&&(r.mediaText=M),w&&(p[o-1]=v[0],r.state=w,v.splice(v.length-1,1)),r.selectors=p,r.style=i,r},no=function(p){var i=p.cssText,t=i===void 0?"":i;return Sr.find(function(r){return t.indexOf("@".concat(r))===0})},ko=function(p){for(var i=[],t=p.cssRules||[],r=0,o=t.length;r<o;r++){var l=t[r],v=l.type,w=!1,x="",E="",M=l.selectorText||l.keyText||"",G=Pr.indexOf(v)>=0;if(G)w=!0,x=vr[v],E=Bn(l);else if(br.indexOf("".concat(v))>=0||!v&&no(l)){var ot=ko(l),Ct=vr[v]||no(l);E=Bn(l);for(var Ut=0,ie=ot.length;Ut<ie;Ut++){var ae=ot[Ut];E&&(ae.mediaText=E),ae.atRuleType=Ct}i=i.concat(ot)}if(!(!M&&!G)){for(var Ie=ln(l),qe=hn(M),Ke=qe.add,Or=qe.result,Gr=void 0,bn=0,Tn=Or.length;bn<Tn;bn++){var Vr=Ur(Or[bn],Ie,{atRule:vr[v]});i.push(Vr),Gr=Vr}if(Ke.length){var Cn=Ke.join(", ");if(Gr)Gr.selectorsAdd=Cn;else{var Vr={selectors:[],selectorsAdd:Cn,style:Ie};w&&(Vr.singleAtRule=w),x&&(Vr.atRuleType=x),E&&(Vr.mediaText=E),i.push(Vr)}}}}return i};const qn=function(p){var i=document.createElement("style");i.innerHTML=p,document.head.appendChild(i);var t=i.sheet;return document.head.removeChild(i),t?ko(t):[]};var Qn=function(p,i){return i===void 0&&(i={}),{parse:function(t){var r=this,o=[],l=i.parserCss,v=p==null?void 0:p.Editor,w=l?l(t,v):qn(t);return w.forEach(function(x){return o=o.concat(r.checkNode(x))}),p==null||p.trigger("parse:css",{input:t,output:o,nodes:w}),o},checkNode:function(t){var r=t.selectors,o=t.style,l=[t];if((0,wt.isString)(r)){var v=[],w=t,x=hn(r),E=x.result,M=x.add.join(", "),G={atRule:w.atRule,mediaText:w.params};if(E.length?E.forEach(function(Ct){v.push(Ur(Ct,o,G))}):v.push(Ur([],o,G)),M){var ot=v[v.length-1];ot.selectorsAdd=M}l=v}return l}}};const uo=Qn;var On=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$n=function(p){On(i,p);function i(t){var r=p.call(this,t,"Parser",Ge)||this,o=r.config;return r.parserCss=uo(t,o),r.parserHtml=Fo(t,o),r}return i.prototype.parseHtml=function(t,r){r===void 0&&(r={});var o=this,l=o.em,v=o.parserHtml;return v.compTypes=l.Components.getTypes()||[],v.parse(t,this.parserCss,r)},i.prototype.parseCss=function(t){return this.parserCss.parse(t)},i.prototype.destroy=function(){},i}(H);const Kn=$n;var Mn={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(p){return p},onLoad:function(p){return p},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(p){return p},onLoad:function(p){return p}}}};const gi=Mn;var vi=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},po=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},to=function(){function p(){}return p.prototype.store=function(i,t){return t===void 0&&(t={}),vi(this,void 0,void 0,function(){return po(this,function(r){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(i)),[2,i]})})},p.prototype.load=function(i){return i===void 0&&(i={}),vi(this,void 0,void 0,function(){var t;return po(this,function(r){return t={},this.hasLocal(i,!0)&&(t=JSON.parse(localStorage.getItem(i.key)||"{}")),[2,t]})})},p.prototype.hasLocal=function(i,t){if(i===void 0&&(i={}),i.checkLocal&&(!(0,pe.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},p}();const Ga=to;function xn(p){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},xn(p)}function Li(p){var i=this.constructor;return this.then(function(t){return i.resolve(p()).then(function(){return t})},function(t){return i.resolve(p()).then(function(){return i.reject(t)})})}const Qi=Li;function vo(p){var i=this;return new i(function(t,r){if(!(p&&typeof p.length<"u"))return r(new TypeError(xn(p)+" "+p+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(p);if(o.length===0)return t([]);var l=o.length;function v(x,E){if(E&&(xn(E)==="object"||typeof E=="function")){var M=E.then;if(typeof M=="function"){M.call(E,function(G){v(x,G)},function(G){o[x]={status:"rejected",reason:G},--l===0&&t(o)});return}}o[x]={status:"fulfilled",value:E},--l===0&&t(o)}for(var w=0;w<o.length;w++)v(w,o[w])})}const Na=vo;function qa(p,i){this.name="AggregateError",this.errors=p,this.message=i||""}qa.prototype=Error.prototype;function kp(p){var i=this;return new i(function(t,r){if(!(p&&typeof p.length<"u"))return r(new TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(p);if(o.length===0)return r();for(var l=[],v=0;v<o.length;v++)try{i.resolve(o[v]).then(t).catch(function(w){l.push(w),l.length===o.length&&r(new qa(l,"All promises were rejected"))})}catch(w){r(w)}})}const oi=kp;var yc=setTimeout;function pa(p){return!!(p&&typeof p.length<"u")}function Zl(){}function Fu(p,i){return function(){p.apply(i,arguments)}}function c(p){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if(typeof p!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],z(p,this)}function d(p,i){for(;p._state===3;)p=p._value;if(p._state===0){p._deferreds.push(i);return}p._handled=!0,c._immediateFn(function(){var t=p._state===1?i.onFulfilled:i.onRejected;if(t===null){(p._state===1?b:y)(i.promise,p._value);return}var r;try{r=t(p._value)}catch(o){y(i.promise,o);return}b(i.promise,r)})}function b(p,i){try{if(i===p)throw new TypeError("A promise cannot be resolved with itself.");if(i&&(xn(i)==="object"||typeof i=="function")){var t=i.then;if(i instanceof c){p._state=3,p._value=i,C(p);return}else if(typeof t=="function"){z(Fu(t,i),p);return}}p._state=1,p._value=i,C(p)}catch(r){y(p,r)}}function y(p,i){p._state=2,p._value=i,C(p)}function C(p){p._state===2&&p._deferreds.length===0&&c._immediateFn(function(){p._handled||c._unhandledRejectionFn(p._value)});for(var i=0,t=p._deferreds.length;i<t;i++)d(p,p._deferreds[i]);p._deferreds=null}function L(p,i,t){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof i=="function"?i:null,this.promise=t}function z(p,i){var t=!1;try{p(function(r){t||(t=!0,b(i,r))},function(r){t||(t=!0,y(i,r))})}catch(r){if(t)return;t=!0,y(i,r)}}c.prototype.catch=function(p){return this.then(null,p)},c.prototype.then=function(p,i){var t=new this.constructor(Zl);return d(this,new L(p,i,t)),t},c.prototype.finally=Qi,c.all=function(p){return new c(function(i,t){if(!pa(p))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(p);if(r.length===0)return i([]);var o=r.length;function l(w,x){try{if(x&&(xn(x)==="object"||typeof x=="function")){var E=x.then;if(typeof E=="function"){E.call(x,function(M){l(w,M)},t);return}}r[w]=x,--o===0&&i(r)}catch(M){t(M)}}for(var v=0;v<r.length;v++)l(v,r[v])})},c.any=oi,c.allSettled=Na,c.resolve=function(p){return p&&xn(p)==="object"&&p.constructor===c?p:new c(function(i){i(p)})},c.reject=function(p){return new c(function(i,t){t(p)})},c.race=function(p){return new c(function(i,t){if(!pa(p))return t(new TypeError("Promise.race accepts an array"));for(var r=0,o=p.length;r<o;r++)c.resolve(p[r]).then(i,t)})},c._immediateFn=typeof setImmediate=="function"&&function(p){setImmediate(p)}||function(p){yc(p,0)},c._unhandledRejectionFn=function(i){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",i)};const J=c;(0,pe.hasWin)()&&(window.Promise=window.Promise||J);const ut=typeof fetch=="function"?fetch.bind():function(p,i){return new J(function(t,r){var o=new XMLHttpRequest;o.open(i.method||"get",p),o.withCredentials=i.credentials=="include";for(var l in i.headers||{})o.setRequestHeader(l,i.headers[l]);o.onload=function(v){return t({status:o.status,statusText:o.statusText,text:function(){return J.resolve(o.responseText)}})},o.onerror=r,o.upload&&i.onProgress&&(o.upload.onprogress=i.onProgress),i.body?o.send(i.body):o.send()})};var Pt=function(){return Pt=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Pt.apply(this,arguments)},oe=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},ve=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Ue=function(){function p(){}return p.prototype.store=function(i,t){return t===void 0&&(t={}),oe(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.request(t.urlStore,this.__props(t,i),t)];case 1:return[2,r.sent()]}})})},p.prototype.load=function(i){return i===void 0&&(i={}),oe(this,void 0,void 0,function(){return ve(this,function(t){switch(t.label){case 0:return[4,this.request(i.urlLoad,this.__props(i),i)];case 1:return[2,t.sent()]}})})},p.prototype.request=function(i,t,r){return t===void 0&&(t={}),r===void 0&&(r={}),ut(i,t).then(function(o){var l=o.text(),v=(o.status/200|0)===1;return v?l:l.then(Promise.reject)}).then(function(o){var l=o&&(0,wt.isString)(o);return r.contentTypeJson&&l?JSON.parse(o):o})},p.prototype.__props=function(i,t){i===void 0&&(i={});var r=i.contentTypeJson,o=i.headers||{},l=i.fetchOptions||{},v="X-Requested-With",w="Content-Type",x;if((0,wt.isUndefined)(o[v])&&(o[v]="XMLHttpRequest"),(0,wt.isUndefined)(o[w])&&r&&(o[w]="application/json; charset=utf-8"),t)if(r)x=JSON.stringify(t);else{x=new FormData;for(var E in t)x.append(E,t[E])}var M={method:x?"POST":"GET",credentials:i.credentials,headers:o,body:x};return Pt(Pt({},M),(0,wt.isFunction)(l)?l(M):l)},p}();const Fe=Ue;var sr;(function(p){p.start="storage:start",p.startStore="storage:start:store",p.startLoad="storage:start:load",p.load="storage:load",p.store="storage:store",p.after="storage:after",p.afterStore="storage:after:store",p.afterLoad="storage:after:load",p.end="storage:end",p.endStore="storage:end:store",p.endLoad="storage:end:load",p.error="storage:error",p.errorStore="storage:error:store",p.errorLoad="storage:error:load"})(sr||(sr={}));const dr=sr;var jr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rr=function(){return Rr=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Rr.apply(this,arguments)},Kr=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},zr=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Zr="local",mn="remote",un=function(p){jr(i,p);function i(t){var r=p.call(this,t,"StorageManager",gi)||this;r.storages={},r.events=dr;var o=r.config;return o._disable&&(o.type=void 0),r.storages={},r.add(Zr,new Ga),r.add(mn,new Fe),r.setCurrent(o.type),r}return i.prototype.isAutosave=function(){return!!this.config.autosave},i.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},i.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},i.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},i.prototype.add=function(t,r){return this.storages[t]=r,this},i.prototype.get=function(t){return this.storages[t]},i.prototype.getStorages=function(){return this.storages},i.prototype.getCurrent=function(){return this.config.currentStorage},i.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},i.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},i.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},i.prototype.store=function(t,r){return r===void 0&&(r={}),Kr(this,void 0,void 0,function(){var o,l,v,w,x,E;return zr(this,function(M){switch(M.label){case 0:o=this.getCurrentStorage(),l=Rr(Rr({},this.getCurrentOptions()),r),v=this.getRecoveryStorage(),w=this.getCurrentOptions(Zr),M.label=1;case 1:return M.trys.push([1,5,,9]),[4,this.__exec(o,l,t)];case 2:return M.sent(),x=v,x?[4,this.__exec(v,w,{})]:[3,4];case 3:x=M.sent(),M.label=4;case 4:return[3,9];case 5:return E=M.sent(),v?[4,this.__exec(v,w,t)]:[3,7];case 6:return M.sent(),[3,8];case 7:throw E;case 8:return[3,9];case 9:return[2,t]}})})},i.prototype.load=function(t){return t===void 0&&(t={}),Kr(this,void 0,void 0,function(){var r,o,l,v,w;return zr(this,function(x){switch(x.label){case 0:return r=this.getCurrentStorage(),o=Rr(Rr({},this.getCurrentOptions()),t),l=this.getRecoveryStorage(),l?[4,this.__exec(l,this.getCurrentOptions(Zr))]:[3,5];case 1:if(w=x.sent(),(0,wt.isEmpty)(w))return[3,5];x.label=2;case 2:return x.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return x.sent(),v=w,[3,5];case 4:return x.sent(),[3,5];case 5:return v?[3,7]:[4,this.__exec(r,o)];case 6:v=x.sent(),x.label=7;case 7:return[2,v||{}]}})})},i.prototype.__askRecovery=function(){var t=this.em,r=this.getRecovery();return new Promise(function(o,l){(0,wt.isFunction)(r)?r(o,l,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?o(null):l()})},i.prototype.getRecovery=function(){return this.config.recovery},i.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===mn&&this.get(Zr)},i.prototype.__exec=function(t,r,o){var l;return Kr(this,void 0,void 0,function(){var v,w,x,E,M,G,ot,Ct,Ut,ie,ae,Ie,qe;return zr(this,function(Ke){switch(Ke.label){case 0:if(v=o?"store":"load",w=this.getConfig(),x=w.onStore,E=w.onLoad,this.onStart(v,o),!t)return[2,o||{}];Ke.label=1;case 1:return Ke.trys.push([1,14,,15]),G=(l=this.em)===null||l===void 0?void 0:l.getEditor(),ot=void 0,o?(Ut=x,Ut?[4,x(o,G)]:[3,3]):[3,7];case 2:Ut=Ke.sent(),Ke.label=3;case 3:return Ct=Ut||o,ie=r.onStore,ie?[4,r.onStore(Ct,G)]:[3,5];case 4:ie=Ke.sent(),Ke.label=5;case 5:return Ct=ie||Ct,[4,t.store(Ct,r)];case 6:return ot=Ke.sent(),M=o,[3,13];case 7:return[4,t.load(r)];case 8:return ot=Ke.sent(),M=this.__clearKeys(ot),ae=r.onLoad,ae?[4,r.onLoad(M,G)]:[3,10];case 9:ae=Ke.sent(),Ke.label=10;case 10:return M=ae||M,Ie=E,Ie?[4,E(M,G)]:[3,12];case 11:Ie=Ke.sent(),Ke.label=12;case 12:M=Ie||M,Ke.label=13;case 13:return this.onAfter(v,M,ot),this.onEnd(v,M,ot),[3,15];case 14:throw qe=Ke.sent(),this.onError(v,qe),qe;case 15:return[2,M]}})})},i.prototype.__clearKeys=function(t){t===void 0&&(t={});var r=this.getConfig(),o=new RegExp("^".concat(r.id)),l={};for(var v in t){var w=v.replace(o,"");l[w]=t[v]}return l},i.prototype.getCurrentOptions=function(t){var r=this.getConfig(),o=t||this.getCurrent();return r.options[o]||{}},i.prototype.onStart=function(t,r){var o=this.em;if(o){var l=t==="load"?dr.startLoad:dr.startStore;o.trigger(dr.start,t,r),o.trigger(l,r)}},i.prototype.onAfter=function(t,r,o){var l=this.em;if(l){var v=t==="load"?dr.afterLoad:dr.afterStore;l.trigger(dr.after),l.trigger(v,r,o);var w=t==="load"?dr.load:dr.store;l.trigger(w,r,o)}},i.prototype.onEnd=function(t,r,o){var l=this.em;if(l){var v=t==="load"?dr.endLoad:dr.endStore;l.trigger(dr.end,t,r,o),l.trigger(v,r,o)}},i.prototype.onError=function(t,r){var o=this.em;if(o){var l=t==="load"?dr.errorLoad:dr.errorStore;o.trigger(dr.error,r,t),o.trigger(l,r),this.onEnd(t,r)}},i.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},i.prototype.destroy=function(){this.storages={}},i}(H);const Yn=un;var qo={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const da=qo;var _i=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ta=function(){return ta=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ta.apply(this,arguments)},Ka=function(p){_i(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.events={},r.appendInput=!0;var o=t.config,l=o===void 0?{}:o,v=r,w=v.model,x=v.eventCapture,E=w.target,M=w.attributes.type;r.config=l,r.em=l.em,r.pfx=l.stylePrefix||"",r.ppfx=l.pStylePrefix||"",r.target=E,r.className=r.pfx+"trait",r.clsField="".concat(r.ppfx,"field ").concat(r.ppfx,"field-").concat(M);var G=[["change:value",r.onValueChange],["remove",r.removeView]];return G.forEach(function(ot){var Ct=ot[0],Ut=ot[1];w.off(Ct,Ut),r.listenTo(w,Ct,Ut)}),w.view=r,r.listenTo(w,"change:label",r.render),r.listenTo(w,"change:placeholder",r.rerender),r.events={},x.forEach(function(ot){return r.events[ot]="onChange"}),r.delegateEvents(),r.init(),r}return i.prototype.attributes=function(){return this.model.get("attributes")||{}},i.prototype.templateLabel=function(t){var r=this.ppfx,o=this.getLabel();return'<div class="'.concat(r,'label" title="').concat(o,'">').concat(o,"</div>")},i.prototype.templateInput=function(t){var r=this.clsField;return'<div class="'.concat(r,'" data-input></div>')},i.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},i.prototype.removeView=function(){this.remove(),this.removed()},i.prototype.init=function(){},i.prototype.removed=function(){},i.prototype.onRender=function(t){},i.prototype.onUpdate=function(t){},i.prototype.onEvent=function(t){},i.prototype.onChange=function(t){var r=this.getInputElem();r&&!(0,wt.isUndefined)(r.value)&&this.model.set("value",r.value),this.onEvent(ta(ta({},this.getClbOpts()),{event:t}))},i.prototype.getValueForTarget=function(){return this.model.get("value")},i.prototype.setInputValue=function(t){var r=this.getInputElem();r&&(r.value=t)},i.prototype.onValueChange=function(t,r,o){if(o===void 0&&(o={}),o.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var l=this.getValueForTarget();t.setTargetValue(l,o)}},i.prototype.renderLabel=function(){var t=this,r=t.$el,o=t.target,l=this.getLabel(),v=this.templateLabel(o);this.createLabel&&(v=this.createLabel({label:l,component:o,trait:this})||""),r.find("[data-label]").append(v)},i.prototype.getLabel=function(){var t=this.em,r=this.model.attributes,o=r.label,l=r.name;return t.t("traitManager.traits.labels.".concat(l))||(0,pe.capitalize)(o||l).replace(/-/g," ")},i.prototype.getComponent=function(){return this.target},i.prototype.getInputEl=function(){if(!this.$input){var t=this,r=t.em,o=t.model,l=o,v=o.attributes.name,w=l.get("placeholder")||l.get("default")||"",x=l.get("type")||"text",E=l.get("min"),M=l.get("max"),G=this.getModelValue(),ot=(0,ft.default)('<input type="'.concat(x,'">')),Ct=r.t("traitManager.traits.attributes.".concat(v))||{};ot.attr(ta({placeholder:w},Ct)),(0,wt.isUndefined)(G)||(l.set({value:G},{silent:!0}),ot.prop("value",G)),E&&ot.prop("min",E),M&&ot.prop("max",M),this.$input=ot}return this.$input.get(0)},i.prototype.getInputElem=function(){var t=this,r=t.input,o=t.$input;return r||o&&o.get&&o.get(0)||this.getElInput()},i.prototype.getModelValue=function(){return this.model.getValue()},i.prototype.getElInput=function(){return this.elInput},i.prototype.renderField=function(){var t=this,r=t.$el,o=t.appendInput,l=t.model,v=r.find("[data-input]"),w=v[v.length-1],x=l.el;x||(x=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,wt.isString)(x)?(w.innerHTML=x,this.elInput=w.firstChild):(o?w.appendChild(x):w.insertBefore(x,w.firstChild),this.elInput=x),l.el=this.elInput},i.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},i.prototype.rerender=function(){delete this.model.el,this.render()},i.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},i.prototype.render=function(){var t=this,r=t.$el,o=t.pfx,l=t.ppfx,v=t.model,w=v.attributes,x=w.type,E=w.id,M=this.hasLabel&&this.hasLabel(),G="".concat(o,"trait");delete this.$input;var ot='<div class="'.concat(G," ").concat(G,"--").concat(x,`">
      `).concat(M?'<div class="'.concat(l,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(l,"field-wrp ").concat(l,"field-wrp--").concat(x,`" data-input>
        `).concat(this.templateInput?(0,wt.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return r.empty().append(ot),M&&this.renderLabel(),this.renderField(),this.el.className="".concat(G,"__wrp ").concat(G,"__wrp-").concat(E),this.postUpdate(),this.onRender(this.getClbOpts()),this},i}(q.G7);const zo=Ka;Ka.prototype.eventCapture=["change"];var ps=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ha=function(p){ps(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.templateInput=function(){return""},i.prototype.onChange=function(){this.handleClick()},i.prototype.handleClick=function(){this.model.runCommand()},i.prototype.renderLabel=function(){this.model.get("label")&&zo.prototype.renderLabel.apply(this)},i.prototype.getInputEl=function(){var t=this,r=t.model,o=t.ppfx,l=r.props(),v=l.labelButton,w=l.text,x=l.full,E=v||w,M="".concat(o,"btn"),G='<button type="button" class="'.concat(M,"-prim").concat(x?" ".concat(M,"--full"):"",'">').concat(E,"</button>");return G},i}(zo);const ea=ha;ha.prototype.eventCapture=["click button"];var zi=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ji=function(p){zi(i,p);function i(){var t=p!==null&&p.apply(this,arguments)||this;return t.appendInput=!1,t}return i.prototype.templateInput=function(){var t=this,r=t.ppfx,o=t.clsField;return'<label class="'.concat(o,`" data-input>
    <i class="`).concat(r,`chk-icon"></i>
  </label>`)},i.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},i.prototype.setInputValue=function(t){var r=this.getInputElem();r&&(r.checked=!!t)},i.prototype.getInputEl=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=!this.$input,l=zo.prototype.getInputEl.apply(this,t);if(o){var v=void 0,w=void 0,x=this,E=x.model,M=x.target,G=E.attributes.valueFalse,ot=E.getName();E.changeProp?(v=M.get(ot),w=v):(w=M.get("attributes")[ot],v=!!(w||w==="")),!(0,wt.isUndefined)(G)&&w===G&&(v=!1),l.checked=v}return l},i}(zo);const Ya=ji;function hf(p,i){if(!(0,pe.hasWin)())return;var t={beforeShow:Ct,move:Ct,change:Ct,show:Ct,hide:Ct,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],o=!!/msie/i.exec(window.navigator.userAgent),l=function(){function ue(kr,Br){return!!~(""+kr).indexOf(Br)}var ze=document.createElement("div"),te=ze.style;return te.cssText="background-color:rgba(0,0,0,.5)",ue(te.backgroundColor,"rgba")||ue(te.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),w=function(){var ue="";if(o)for(var ze=1;ze<=6;ze++)ue+="<div class='sp-"+ze+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",ue,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function x(ue,ze,te,kr){for(var Br=[],an=0;an<ue.length;an++){var Zn=ue[an];if(Zn){var io=qr(Zn),Vn=io.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Vn+=qr.equals(ze,Zn)?" sp-thumb-active":"";var _a=io.toString(kr.preferredFormat||"rgb"),Ja=l?"background-color:"+io.toRgbString():"filter:"+io.toFilter();Br.push('<span title="'+_a+'" data-color="'+io.toRgbString()+'" class="'+Vn+'"><span class="sp-thumb-inner" style="'+Ja+';"></span></span>')}else{var Fa="sp-clear-display";Br.push(p("<div />").append(p('<span data-color="" style="background-color:transparent;" class="'+Fa+'"></span>').attr("title",kr.noColorSelectedText)).html())}}return"<div class='sp-cf "+te+"'>"+Br.join("")+"</div>"}function E(){for(var ue=0;ue<r.length;ue++)r[ue]&&r[ue].hide()}function M(ue,ze){var te=p.extend({},t,ue);return te.callbacks={move:ie(te.move,ze),change:ie(te.change,ze),show:ie(te.show,ze),hide:ie(te.hide,ze),beforeShow:ie(te.beforeShow,ze)},te}function G(ue,ze){var te=M(ze,ue),kr=te.flat,Br=te.showSelectionPalette,an=te.localStorageKey,Zn=te.theme,io=te.callbacks,Vn=Ie(jd,10),_a=!1,Ja=!1,Fa=!0,mp=0,Ku=0,kf=0,$i=0,Af=0,Zv=0,Xv=0,Pd=0,kd=0,xg=0,Mf=1,Jv=[],Cg=[],Qv={},Lf=te.selectionPalette.slice(0),Nb=te.maxSelectionSize,z0="sp-dragging",Yp=null,Sg=ue.ownerDocument;Sg.body;var Qa=p(ue),P0=!1,mo=p(w,Sg).addClass(Zn),Vb=mo.find(".sp-picker-container"),tm=mo.find(".sp-color"),em=mo.find(".sp-dragger"),k0=mo.find(".sp-hue"),rm=mo.find(".sp-slider"),Og=mo.find(".sp-alpha-inner"),W0=mo.find(".sp-alpha"),nm=mo.find(".sp-alpha-handle"),jf=mo.find(".sp-input"),$0=mo.find(".sp-palette"),G0=mo.find(".sp-initial"),q0=mo.find(".sp-cancel"),A0=mo.find(".sp-clear"),K0=mo.find(".sp-choose"),M0=mo.find(".sp-palette-toggle"),om=Qa.is("input"),Fb=om&&Qa.attr("type")==="color"&&qe(),L0=om&&!kr,_h=L0?p(v).addClass(Zn).addClass(te.className).addClass(te.replacerClassName):p([]),Tg=L0?_h:Qa,xh=_h.find(".sp-preview-inner"),Eg=te.color||om&&Qa.val(),Ch=!1,Sh=te.preferredFormat,Rb=!te.showButtons||te.clickoutFiresChange,Zp=!Eg,Ad=te.allowEmpty&&!Fb;function j0(){if(te.showPaletteOnly&&(te.showPalette=!0),M0.text(te.showPaletteOnly?te.togglePaletteMoreText:te.togglePaletteLessText),te.palette){Jv=te.palette.slice(0),Cg=p.isArray(Jv[0])?Jv:[Jv],Qv={};for(var kn=0;kn<Cg.length;kn++)for(var Ln=0;Ln<Cg[kn].length;Ln++){var ei=qr(Cg[kn][Ln]).toRgbString();Qv[ei]=!0}}mo.toggleClass("sp-flat",kr),mo.toggleClass("sp-input-disabled",!te.showInput),mo.toggleClass("sp-alpha-enabled",te.showAlpha),mo.toggleClass("sp-clear-enabled",Ad),mo.toggleClass("sp-buttons-disabled",!te.showButtons),mo.toggleClass("sp-palette-buttons-disabled",!te.togglePaletteOnly),mo.toggleClass("sp-palette-disabled",!te.showPalette),mo.toggleClass("sp-palette-only",te.showPaletteOnly),mo.toggleClass("sp-initial-disabled",!te.showInitial),mo.addClass(te.className).addClass(te.containerClassName),jd()}function Hb(){if(o&&mo.find("*:not(input)").attr("unselectable","on"),j0(),L0&&Qa.after(_h).hide(),Ad||A0.hide(),kr)Qa.after(mo).hide();else{var kn=te.appendTo==="parent"?Qa.parent():p(te.appendTo);kn.length!==1&&(kn=p("body")),kn.append(mo)}Y0(),Tg.bind("click.spectrum touchstart.spectrum",function(eo){P0||J0(),eo.stopPropagation(),p(eo.target).is("input")||eo.preventDefault()}),(Qa.is(":disabled")||te.disabled===!0)&&nb(),mo.click(Ut),jf.change(V0),jf.bind("paste",function(){setTimeout(V0,1)}),jf.keydown(function(eo){eo.keyCode==13&&V0()}),q0.text(te.cancelText),q0.bind("click.spectrum",function(eo){eo.stopPropagation(),eo.preventDefault(),eb(),Xp()}),A0.attr("title",te.clearText),A0.bind("click.spectrum",function(eo){eo.stopPropagation(),eo.preventDefault(),Zp=!0,Oh(),kr&&Ld(!0)}),K0.text(te.chooseText),K0.bind("click.spectrum",function(eo){eo.stopPropagation(),eo.preventDefault(),o&&jf.is(":focus")&&jf.trigger("change"),Ub()&&(Ld(!0),Xp())}),M0.text(te.showPaletteOnly?te.togglePaletteMoreText:te.togglePaletteLessText),M0.bind("click.spectrum",function(eo){eo.stopPropagation(),eo.preventDefault(),te.showPaletteOnly=!te.showPaletteOnly,!te.showPaletteOnly&&!kr&&mo.css("left","-="+(Vb.outerWidth(!0)+5)),j0()}),ae(W0,function(eo,Yu,Dd){Mf=eo/Af,Zp=!1,Dd.shiftKey&&(Mf=Math.round(Mf*10)/10),Oh()},I0,N0),ae(k0,function(eo,Yu){Pd=parseFloat(Yu/$i),Zp=!1,te.showAlpha||(Mf=1),Oh()},I0,N0),ae(tm,function(eo,Yu,Dd){if(!Dd.shiftKey)Yp=null;else if(!Yp){var am=kd*mp,Pg=Ku-xg*Ku,kg=Math.abs(eo-am)>Math.abs(Yu-Pg);Yp=kg?"x":"y"}var qb=!Yp||Yp==="x",Kb=!Yp||Yp==="y";qb&&(kd=parseFloat(eo/mp)),Kb&&(xg=parseFloat((Ku-Yu)/Ku)),Zp=!1,te.showAlpha||(Mf=1),Oh()},I0,N0),Eg?(Md(Eg),Th(),Sh=te.preferredFormat||qr(Eg).getFormat(),D0(Eg)):Th(),kr&&F0();function Ln(eo){return eo.data&&eo.data.ignore?(Md(p(eo.target).closest(".sp-thumb-el").data("color")),Oh()):(Md(p(eo.target).closest(".sp-thumb-el").data("color")),Oh(),te.hideAfterPaletteSelect&&(Ld(!0),Xp())),!1}var ei=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";$0.delegate(".sp-thumb-el",ei,Ln),G0.delegate(".sp-thumb-el:nth-child(1)",ei,{ignore:!0},Ln)}function Y0(){if(an&&window.localStorage){try{var kn=window.localStorage[an].split(",#");kn.length>1&&(delete window.localStorage[an],p.each(kn,function(Ln,ei){D0(ei)}))}catch{}try{Lf=window.localStorage[an].split(";")}catch{}}}function D0(kn){if(Br){var Ln=qr(kn).toRgbString();if(!Qv[Ln]&&p.inArray(Ln,Lf)===-1)for(Lf.push(Ln);Lf.length>Nb;)Lf.shift();if(an&&window.localStorage)try{window.localStorage[an]=Lf.join(";")}catch{}}}function Bb(){var kn=[];if(te.showPalette)for(var Ln=0;Ln<Lf.length;Ln++){var ei=qr(Lf[Ln]).toRgbString();Qv[ei]||kn.push(Lf[Ln])}return kn.reverse().slice(0,te.maxSelectionSize)}function Z0(){var kn=ec(),Ln=p.map(Cg,function(ei,eo){return x(ei,kn,"sp-palette-row sp-palette-row-"+eo,te)});Y0(),Lf&&Ln.push(x(Bb(),kn,"sp-palette-row sp-palette-row-selection",te)),$0.html(Ln.join(""))}function X0(){if(te.showInitial){var kn=Ch,Ln=ec();G0.html(x([kn,Ln],Ln,"sp-palette-row-initial",te))}}function I0(){(Ku<=0||mp<=0||$i<=0)&&jd(),Ja=!0,mo.addClass(z0),Yp=null,Qa.trigger("dragstart.spectrum",[ec()])}function N0(){Ja=!1,mo.removeClass(z0),Qa.trigger("dragstop.spectrum",[ec()])}function V0(){var kn=jf.val();if((kn===null||kn==="")&&Ad)Md(null),Ld(!0);else{var Ln=qr(kn);Ln.isValid()?(Md(Ln),Ld(!0)):jf.addClass("sp-validation-error")}}function J0(){_a?Xp():F0()}function F0(){var kn=p.Event("beforeShow.spectrum");if(_a){jd();return}if(Qa.trigger("beforeShow.spectrum",[ec()]),!(io.beforeShow(ec())===!1||kn.isDefaultPrevented())){E(),_a=!0;var Ln=p(Sg);Ln.bind("keydown.spectrum",Q0),Ln.bind("click.spectrum",tb),p(window).bind("resize.spectrum",Vn),_h.addClass("sp-active"),mo.removeClass("sp-hidden"),jd(),Th(),Ch=ec(),X0(),io.show(Ch),Qa.trigger("show.spectrum",[Ch])}}function Q0(kn){kn.keyCode===27&&Xp()}function tb(kn){kn.button!=2&&(Ja||(Rb?Ld(!0):eb(),Xp()))}function Xp(){!_a||kr||(_a=!1,p(Sg).unbind("keydown.spectrum",Q0),p(Sg).unbind("click.spectrum",tb),p(window).unbind("resize.spectrum",Vn),_h.removeClass("sp-active"),mo.addClass("sp-hidden"),io.hide(ec()),Qa.trigger("hide.spectrum",[ec()]))}function eb(){Md(Ch,!0)}function Md(kn,Ln){if(qr.equals(kn,ec())){Th();return}var ei,eo;!kn&&Ad?Zp=!0:(Zp=!1,Fa=!kn,ei=qr(kn),eo=ei.toHsv(),Pd=eo.h%360/360,kd=eo.s,xg=eo.v,Mf=eo.a),Th(),ei&&ei.isValid()&&!Ln&&(Sh=te.preferredFormat||ei.getFormat())}function ec(kn){return kn=kn||{},Ad&&Zp?null:qr.fromRatio({h:Pd,s:kd,v:xg,a:Math.round(Mf*100)/100},{format:kn.format||Sh})}function Ub(){return!jf.hasClass("sp-validation-error")}function Oh(){Th(),io.move(ec()),Qa.trigger("move.spectrum",[ec()])}function Th(){jf.removeClass("sp-validation-error"),rb();var kn=qr.fromRatio({h:Pd,s:1,v:1});tm.css("background-color",kn.toHexString());var Ln=Sh;Mf<1&&!(Mf===0&&Ln==="name")&&(Ln==="hex"||Ln==="hex3"||Ln==="hex6"||Ln==="name")&&(Ln="rgb");var ei=ec({format:Ln}),eo="";if(xh.removeClass("sp-clear-display"),xh.css("background-color","transparent"),!ei&&Ad)xh.addClass("sp-clear-display");else{var Yu=ei.toHexString(),Dd=ei.toRgbString();if(l||ei.alpha===1?xh.css("background-color",Dd):(xh.css("background-color","transparent"),xh.css("filter",ei.toFilter())),te.showAlpha){var am=ei.toRgb();am.a=0;var Pg=qr(am).toRgbString(),kg="linear-gradient(left, "+Pg+", "+Yu+")";o?Og.css("filter",qr(Pg).toFilter({gradientType:1},Yu)):(Og.css("background","-webkit-"+kg),Og.css("background","-moz-"+kg),Og.css("background","-ms-"+kg),Og.css("background","linear-gradient(to right, "+Pg+", "+Yu+")"))}eo=ei.toString(Ln)}te.showInput&&jf.val(eo),te.showPalette&&Z0(),X0()}function rb(){var kn=kd,Ln=xg;if(Ad&&Zp)nm.hide(),rm.hide(),em.hide();else{nm.show(),rm.show(),em.show();var ei=kn*mp,eo=Ku-Ln*Ku;ei=Math.max(-kf,Math.min(mp-kf,ei-kf)),eo=Math.max(-kf,Math.min(Ku-kf,eo-kf)),em.css({top:eo+"px",left:ei+"px"});var Yu=Mf*Af;nm.css({left:Yu-Zv/2+"px"});var Dd=Pd*$i;rm.css({top:Dd-Xv+"px"})}}function Ld(kn){var Ln=ec(),ei="",eo=Fa?!0:!qr.equals(Ln,Ch);Ln&&(ei=Ln.toString(Sh),!_a&&D0(Ln)),om&&Qa.val(ei),kn&&eo&&(io.change(Ln),Qa.trigger("change",[Ln]))}function jd(){_a&&(mp=tm.width(),Ku=tm.height(),kf=em.height(),k0.width(),$i=k0.height(),Xv=rm.height(),Af=W0.width(),Zv=nm.width(),kr||(mo.css("position","absolute"),te.offset?mo.offset(te.offset):mo.offset(ot(mo,Tg))),rb(),te.showPalette&&Z0(),Qa.trigger("reflow.spectrum"))}function zb(){Qa.show(),Tg.unbind("click.spectrum touchstart.spectrum"),mo.remove(),_h.remove(),r[im.id]=null}function Wb(kn,Ln){if(kn===i)return p.extend({},te);if(Ln===i)return te[kn];te[kn]=Ln,kn==="preferredFormat"&&(Sh=te.preferredFormat),j0()}function $b(){P0=!1,Qa.attr("disabled",!1),Tg.removeClass("sp-disabled")}function nb(){Xp(),P0=!0,Qa.attr("disabled",!0),Tg.addClass("sp-disabled")}function Gb(kn){te.offset=kn,jd()}Hb();var im={show:F0,hide:Xp,toggle:J0,reflow:jd,option:Wb,enable:$b,disable:nb,offset:Gb,set:function(kn){Md(kn),Ld()},get:ec,destroy:zb,container:mo};return im.id=r.push(im)-1,im}function ot(ue,ze){for(var te=ze[0],kr=ue[0],Br=kr.parentElement,an=te.getBoundingClientRect(),Zn=kr.offsetWidth,io=kr.offsetHeight,Vn={top:0,left:0,width:te.offsetWidth,height:te.offsetHeight};te&&(Vn.top+=te.offsetTop-te.scrollTop,Vn.left+=te.offsetLeft-te.scrollLeft,!(te===Br||!Br.contains(te.offsetParent)));)te=te.offsetParent;return an.right+Zn>window.innerWidth-window.scrollX&&an.right-Zn>0&&(Vn.left-=Zn-Vn.width),an.bottom+io<window.innerHeight-window.scrollY?Vn.top+=Vn.height:Vn.top-=io,Vn}function Ct(){}function Ut(ue){ue.stopPropagation()}function ie(ue,ze){var te=Array.prototype.slice,kr=te.call(arguments,2);return function(){return ue.apply(ze,kr.concat(te.call(arguments)))}}function ae(ue,ze,te,kr){ze=ze||function(){},te=te||function(){},kr=kr||function(){};var Br=document,an=!1,Zn={},io=0,Vn=0,_a="ontouchstart"in window,Ja={};Ja.selectstart=Fa,Ja.dragstart=Fa,Ja["touchmove mousemove"]=mp,Ja["touchend mouseup"]=kf;function Fa($i){$i.stopPropagation&&$i.stopPropagation(),$i.preventDefault&&$i.preventDefault(),$i.returnValue=!1}function mp($i){if(an){if(o&&Br.documentMode<9&&!$i.button)return kf();var Af=$i&&$i.touches&&$i.touches[0],Zv=Af&&Af.pageX||$i.pageX,Xv=Af&&Af.pageY||$i.pageY,Pd=Math.max(0,Math.min(Zv-Zn.left,Vn)),kd=Math.max(0,Math.min(Xv-Zn.top,io));_a&&Fa($i),ze.apply(ue,[Pd,kd,$i])}}function Ku($i){var Af=$i.which?$i.which==3:$i.button==2;!Af&&!an&&te.apply(ue,arguments)!==!1&&(an=!0,io=p(ue).height(),Vn=p(ue).width(),Zn=p(ue).offset(),p(Br).bind(Ja),p(Br.body).addClass("sp-dragging"),mp($i),Fa($i))}function kf(){an&&(p(Br).unbind(Ja),p(Br.body).removeClass("sp-dragging"),setTimeout(function(){kr.apply(ue,arguments)},0)),an=!1}p(ue).bind("touchstart mousedown",Ku)}function Ie(ue,ze,te){var kr;return function(){var Br=this,an=arguments,Zn=function(){kr=null,ue.apply(Br,an)};kr||(kr=setTimeout(Zn,ze))}}function qe(){return p.fn.spectrum.inputTypeColorSupport()}var Ke="spectrum.id";p.fn.spectrum=function(ue,ze){if(typeof ue=="string"){var te=this,kr=Array.prototype.slice.call(arguments,1);return this.each(function(){var Br=r[p(this).data(Ke)];if(Br){var an=Br[ue];if(!an)throw new Error("Spectrum: no such method: '"+ue+"'");ue=="get"?te=Br.get():ue=="container"?te=Br.container:ue=="option"?te=Br.option.apply(Br,kr):ue=="destroy"?(Br.destroy(),p(this).removeData(Ke)):an.apply(Br,kr)}}),te}return this.spectrum("destroy").each(function(){var Br=p.extend({},ue,p(this).data()),an=G(this,Br);p(this).data(Ke,an.id)})},p.fn.spectrum.load=!0,p.fn.spectrum.loadOpts={},p.fn.spectrum.draggable=ae,p.fn.spectrum.defaults=t,p.fn.spectrum.inputTypeColorSupport=function ue(){if(typeof ue._cachedResult>"u"){var ze=p("<input type='color'/>")[0];ue._cachedResult=ze.type==="color"&&ze.value!==""}return ue._cachedResult},p.spectrum={},p.spectrum.localization={},p.spectrum.palettes={},p.fn.spectrum.processNativeColorInputs=function(){var ue=p("input[type=color]");ue.length&&!qe()&&ue.spectrum({preferredFormat:"hex6"})};var Or=/^[\s,#]+/,Gr=/\s+$/,bn=0,Tn=Math,Vr=Tn.round,Cn=Tn.min,Hn=Tn.max,Ko=Tn.random,qr=function(ue,ze){if(ue=ue||"",ze=ze||{},ue instanceof qr)return ue;if(!(this instanceof qr))return new qr(ue,ze);var te=tc(ue);this._originalInput=ue,this._r=te.r,this._g=te.g,this._b=te.b,this._a=te.a,this._roundA=Vr(100*this._a)/100,this._format=ze.format||te.format,this._gradientType=ze.gradientType,this._r<1&&(this._r=Vr(this._r)),this._g<1&&(this._g=Vr(this._g)),this._b<1&&(this._b=Vr(this._b)),this._ok=te.ok,this._tc_id=bn++};qr.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ue=this.toRgb();return(ue.r*299+ue.g*587+ue.b*114)/1e3},setAlpha:function(ue){return this._a=U0(ue),this._roundA=Vr(100*this._a)/100,this},toHsv:function(){var ue=Ef(this._r,this._g,this._b);return{h:ue.h*360,s:ue.s,v:ue.v,a:this._a}},toHsvString:function(){var ue=Ef(this._r,this._g,this._b),ze=Vr(ue.h*360),te=Vr(ue.s*100),kr=Vr(ue.v*100);return this._a==1?"hsv("+ze+", "+te+"%, "+kr+"%)":"hsva("+ze+", "+te+"%, "+kr+"%, "+this._roundA+")"},toHsl:function(){var ue=bh(this._r,this._g,this._b);return{h:ue.h*360,s:ue.s,l:ue.l,a:this._a}},toHslString:function(){var ue=bh(this._r,this._g,this._b),ze=Vr(ue.h*360),te=Vr(ue.s*100),kr=Vr(ue.l*100);return this._a==1?"hsl("+ze+", "+te+"%, "+kr+"%)":"hsla("+ze+", "+te+"%, "+kr+"%, "+this._roundA+")"},toHex:function(ue){return Td(this._r,this._g,this._b,ue)},toHexString:function(ue){return"#"+this.toHex(ue)},toHex8:function(){return qp(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:Vr(this._r),g:Vr(this._g),b:Vr(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Vr(this._r)+", "+Vr(this._g)+", "+Vr(this._b)+")":"rgba("+Vr(this._r)+", "+Vr(this._g)+", "+Vr(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Vr(na(this._r,255)*100)+"%",g:Vr(na(this._g,255)*100)+"%",b:Vr(na(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Vr(na(this._r,255)*100)+"%, "+Vr(na(this._g,255)*100)+"%, "+Vr(na(this._b,255)*100)+"%)":"rgba("+Vr(na(this._r,255)*100)+"%, "+Vr(na(this._g,255)*100)+"%, "+Vr(na(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:kb[Td(this._r,this._g,this._b,!0)]||!1},toFilter:function(ue){var ze="#"+qp(this._r,this._g,this._b,this._a),te=ze,kr=this._gradientType?"GradientType = 1, ":"";if(ue){var Br=qr(ue);te=Br.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+kr+"startColorstr="+ze+",endColorstr="+te+")"},toString:function(ue){var ze=!!ue;ue=ue||this._format;var te=!1,kr=this._a<1&&this._a>=0,Br=!ze&&kr&&(ue==="hex"||ue==="hex6"||ue==="hex3"||ue==="name");return Br?ue==="name"&&this._a===0?this.toName():this.toRgbString():(ue==="rgb"&&(te=this.toRgbString()),ue==="prgb"&&(te=this.toPercentageRgbString()),(ue==="hex"||ue==="hex6")&&(te=this.toHexString()),ue==="hex3"&&(te=this.toHexString(!0)),ue==="hex8"&&(te=this.toHex8String()),ue==="name"&&(te=this.toName()),ue==="hsl"&&(te=this.toHslString()),ue==="hsv"&&(te=this.toHsvString()),te||this.toHexString())},_applyModification:function(ue,ze){var te=ue.apply(null,[this].concat([].slice.call(ze)));return this._r=te._r,this._g=te._g,this._b=te._b,this.setAlpha(te._a),this},lighten:function(){return this._applyModification(bb,arguments)},brighten:function(){return this._applyModification(wb,arguments)},darken:function(){return this._applyModification(_b,arguments)},desaturate:function(){return this._applyModification(Kp,arguments)},saturate:function(){return this._applyModification(mb,arguments)},greyscale:function(){return this._applyModification(yb,arguments)},spin:function(){return this._applyModification(xb,arguments)},_applyCombination:function(ue,ze){return ue.apply(null,[this].concat([].slice.call(ze)))},analogous:function(){return this._applyCombination(Eb,arguments)},complement:function(){return this._applyCombination(Cb,arguments)},monochromatic:function(){return this._applyCombination(Pb,arguments)},splitcomplement:function(){return this._applyCombination(Tb,arguments)},triad:function(){return this._applyCombination(Sb,arguments)},tetrad:function(){return this._applyCombination(Ob,arguments)}},qr.fromRatio=function(ue,ze){if(typeof ue=="object"){var te={};for(var kr in ue)ue.hasOwnProperty(kr)&&(kr==="a"?te[kr]=ue[kr]:te[kr]=_g(ue[kr]));ue=te}return qr(ue,ze)};function tc(ue){var ze={r:0,g:0,b:0},te=1,kr=!1,Br=!1;return typeof ue=="string"&&(ue=Ib(ue)),typeof ue=="object"&&(ue.hasOwnProperty("r")&&ue.hasOwnProperty("g")&&ue.hasOwnProperty("b")?(ze=wg(ue.r,ue.g,ue.b),kr=!0,Br=String(ue.r).substr(-1)==="%"?"prgb":"rgb"):ue.hasOwnProperty("h")&&ue.hasOwnProperty("s")&&ue.hasOwnProperty("v")?(ue.s=_g(ue.s),ue.v=_g(ue.v),ze=Od(ue.h,ue.s,ue.v),kr=!0,Br="hsv"):ue.hasOwnProperty("h")&&ue.hasOwnProperty("s")&&ue.hasOwnProperty("l")&&(ue.s=_g(ue.s),ue.l=_g(ue.l),ze=wh(ue.h,ue.s,ue.l),kr=!0,Br="hsl"),ue.hasOwnProperty("a")&&(te=ue.a)),te=U0(te),{ok:kr,format:ue.format||Br,r:Cn(255,Hn(ze.r,0)),g:Cn(255,Hn(ze.g,0)),b:Cn(255,Hn(ze.b,0)),a:te}}function wg(ue,ze,te){return{r:na(ue,255)*255,g:na(ze,255)*255,b:na(te,255)*255}}function bh(ue,ze,te){ue=na(ue,255),ze=na(ze,255),te=na(te,255);var kr=Hn(ue,ze,te),Br=Cn(ue,ze,te),an,Zn,io=(kr+Br)/2;if(kr==Br)an=Zn=0;else{var Vn=kr-Br;switch(Zn=io>.5?Vn/(2-kr-Br):Vn/(kr+Br),kr){case ue:an=(ze-te)/Vn+(ze<te?6:0);break;case ze:an=(te-ue)/Vn+2;break;case te:an=(ue-ze)/Vn+4;break}an/=6}return{h:an,s:Zn,l:io}}function wh(ue,ze,te){var kr,Br,an;ue=na(ue,360),ze=na(ze,100),te=na(te,100);function Zn(_a,Ja,Fa){return Fa<0&&(Fa+=1),Fa>1&&(Fa-=1),Fa<1/6?_a+(Ja-_a)*6*Fa:Fa<1/2?Ja:Fa<2/3?_a+(Ja-_a)*(2/3-Fa)*6:_a}if(ze===0)kr=Br=an=te;else{var io=te<.5?te*(1+ze):te+ze-te*ze,Vn=2*te-io;kr=Zn(Vn,io,ue+1/3),Br=Zn(Vn,io,ue),an=Zn(Vn,io,ue-1/3)}return{r:kr*255,g:Br*255,b:an*255}}function Ef(ue,ze,te){ue=na(ue,255),ze=na(ze,255),te=na(te,255);var kr=Hn(ue,ze,te),Br=Cn(ue,ze,te),an,Zn,io=kr,Vn=kr-Br;if(Zn=kr===0?0:Vn/kr,kr==Br)an=0;else{switch(kr){case ue:an=(ze-te)/Vn+(ze<te?6:0);break;case ze:an=(te-ue)/Vn+2;break;case te:an=(ue-ze)/Vn+4;break}an/=6}return{h:an,s:Zn,v:io}}function Od(ue,ze,te){ue=na(ue,360)*6,ze=na(ze,100),te=na(te,100);var kr=Tn.floor(ue),Br=ue-kr,an=te*(1-ze),Zn=te*(1-Br*ze),io=te*(1-(1-Br)*ze),Vn=kr%6,_a=[te,Zn,an,an,io,te][Vn],Ja=[io,te,te,Zn,an,an][Vn],Fa=[an,an,io,te,te,Zn][Vn];return{r:_a*255,g:Ja*255,b:Fa*255}}function Td(ue,ze,te,kr){var Br=[Ed(Vr(ue).toString(16)),Ed(Vr(ze).toString(16)),Ed(Vr(te).toString(16))];return kr&&Br[0].charAt(0)==Br[0].charAt(1)&&Br[1].charAt(0)==Br[1].charAt(1)&&Br[2].charAt(0)==Br[2].charAt(1)?Br[0].charAt(0)+Br[1].charAt(0)+Br[2].charAt(0):Br.join("")}function qp(ue,ze,te,kr){var Br=[Ed(jb(kr)),Ed(Vr(ue).toString(16)),Ed(Vr(ze).toString(16)),Ed(Vr(te).toString(16))];return Br.join("")}qr.equals=function(ue,ze){return!ue||!ze?!1:qr(ue).toRgbString()==qr(ze).toRgbString()},qr.random=function(){return qr.fromRatio({r:Ko(),g:Ko(),b:Ko()})};function Kp(ue,ze){ze=ze===0?0:ze||10;var te=qr(ue).toHsl();return te.s-=ze/100,te.s=Yv(te.s),qr(te)}function mb(ue,ze){ze=ze===0?0:ze||10;var te=qr(ue).toHsl();return te.s+=ze/100,te.s=Yv(te.s),qr(te)}function yb(ue){return qr(ue).desaturate(100)}function bb(ue,ze){ze=ze===0?0:ze||10;var te=qr(ue).toHsl();return te.l+=ze/100,te.l=Yv(te.l),qr(te)}function wb(ue,ze){ze=ze===0?0:ze||10;var te=qr(ue).toRgb();return te.r=Hn(0,Cn(255,te.r-Vr(255*-(ze/100)))),te.g=Hn(0,Cn(255,te.g-Vr(255*-(ze/100)))),te.b=Hn(0,Cn(255,te.b-Vr(255*-(ze/100)))),qr(te)}function _b(ue,ze){ze=ze===0?0:ze||10;var te=qr(ue).toHsl();return te.l-=ze/100,te.l=Yv(te.l),qr(te)}function xb(ue,ze){var te=qr(ue).toHsl(),kr=(Vr(te.h)+ze)%360;return te.h=kr<0?360+kr:kr,qr(te)}function Cb(ue){var ze=qr(ue).toHsl();return ze.h=(ze.h+180)%360,qr(ze)}function Sb(ue){var ze=qr(ue).toHsl(),te=ze.h;return[qr(ue),qr({h:(te+120)%360,s:ze.s,l:ze.l}),qr({h:(te+240)%360,s:ze.s,l:ze.l})]}function Ob(ue){var ze=qr(ue).toHsl(),te=ze.h;return[qr(ue),qr({h:(te+90)%360,s:ze.s,l:ze.l}),qr({h:(te+180)%360,s:ze.s,l:ze.l}),qr({h:(te+270)%360,s:ze.s,l:ze.l})]}function Tb(ue){var ze=qr(ue).toHsl(),te=ze.h;return[qr(ue),qr({h:(te+72)%360,s:ze.s,l:ze.l}),qr({h:(te+216)%360,s:ze.s,l:ze.l})]}function Eb(ue,ze,te){ze=ze||6,te=te||30;var kr=qr(ue).toHsl(),Br=360/te,an=[qr(ue)];for(kr.h=(kr.h-(Br*ze>>1)+720)%360;--ze;)kr.h=(kr.h+Br)%360,an.push(qr(kr));return an}function Pb(ue,ze){ze=ze||6;for(var te=qr(ue).toHsv(),kr=te.h,Br=te.s,an=te.v,Zn=[],io=1/ze;ze--;)Zn.push(qr({h:kr,s:Br,v:an})),an=(an+io)%1;return Zn}qr.mix=function(ue,ze,te){te=te===0?0:te||50;var kr=qr(ue).toRgb(),Br=qr(ze).toRgb(),an=te/100,Zn=an*2-1,io=Br.a-kr.a,Vn;Zn*io==-1?Vn=Zn:Vn=(Zn+io)/(1+Zn*io),Vn=(Vn+1)/2;var _a=1-Vn,Ja={r:Br.r*Vn+kr.r*_a,g:Br.g*Vn+kr.g*_a,b:Br.b*Vn+kr.b*_a,a:Br.a*an+kr.a*(1-an)};return qr(Ja)},qr.readability=function(ue,ze){var te=qr(ue),kr=qr(ze),Br=te.toRgb(),an=kr.toRgb(),Zn=te.getBrightness(),io=kr.getBrightness(),Vn=Math.max(Br.r,an.r)-Math.min(Br.r,an.r)+Math.max(Br.g,an.g)-Math.min(Br.g,an.g)+Math.max(Br.b,an.b)-Math.min(Br.b,an.b);return{brightness:Math.abs(Zn-io),color:Vn}},qr.isReadable=function(ue,ze){var te=qr.readability(ue,ze);return te.brightness>125&&te.color>500},qr.mostReadable=function(ue,ze){for(var te=null,kr=0,Br=!1,an=0;an<ze.length;an++){var Zn=qr.readability(ue,ze[an]),io=Zn.brightness>125&&Zn.color>500,Vn=3*(Zn.brightness/125)+Zn.color/500;(io&&!Br||io&&Br&&Vn>kr||!io&&!Br&&Vn>kr)&&(Br=io,kr=Vn,te=qr(ze[an]))}return te};var E0=qr.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},kb=qr.hexNames=Ab(E0);function Ab(ue){var ze={};for(var te in ue)ue.hasOwnProperty(te)&&(ze[ue[te]]=te);return ze}function U0(ue){return ue=parseFloat(ue),(isNaN(ue)||ue<0||ue>1)&&(ue=1),ue}function na(ue,ze){Mb(ue)&&(ue="100%");var te=Lb(ue);return ue=Cn(ze,Hn(0,parseFloat(ue))),te&&(ue=parseInt(ue*ze,10)/100),Tn.abs(ue-ze)<1e-6?1:ue%ze/parseFloat(ze)}function Yv(ue){return Cn(1,Hn(0,ue))}function Pf(ue){return parseInt(ue,16)}function Mb(ue){return typeof ue=="string"&&ue.indexOf(".")!=-1&&parseFloat(ue)===1}function Lb(ue){return typeof ue=="string"&&ue.indexOf("%")!=-1}function Ed(ue){return ue.length==1?"0"+ue:""+ue}function _g(ue){return ue<=1&&(ue=ue*100+"%"),ue}function jb(ue){return Math.round(parseFloat(ue)*255).toString(16)}function Db(ue){return Pf(ue)/255}var vp=function(){var ue="[-\\+]?\\d+%?",ze="[-\\+]?\\d*\\.\\d+%?",te="(?:"+ze+")|(?:"+ue+")",kr="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?",Br="[\\s|\\(]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")[,|\\s]+("+te+")\\s*\\)?";return{rgb:new RegExp("rgb"+kr),rgba:new RegExp("rgba"+Br),hsl:new RegExp("hsl"+kr),hsla:new RegExp("hsla"+Br),hsv:new RegExp("hsv"+kr),hsva:new RegExp("hsva"+Br),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ib(ue){ue=ue.replace(Or,"").replace(Gr,"").toLowerCase();var ze=!1;if(E0[ue])ue=E0[ue],ze=!0;else if(ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var te;return(te=vp.rgb.exec(ue))?{r:te[1],g:te[2],b:te[3]}:(te=vp.rgba.exec(ue))?{r:te[1],g:te[2],b:te[3],a:te[4]}:(te=vp.hsl.exec(ue))?{h:te[1],s:te[2],l:te[3]}:(te=vp.hsla.exec(ue))?{h:te[1],s:te[2],l:te[3],a:te[4]}:(te=vp.hsv.exec(ue))?{h:te[1],s:te[2],v:te[3]}:(te=vp.hsva.exec(ue))?{h:te[1],s:te[2],v:te[3],a:te[4]}:(te=vp.hex8.exec(ue))?{a:Db(te[1]),r:Pf(te[2]),g:Pf(te[3]),b:Pf(te[4]),format:ze?"name":"hex8"}:(te=vp.hex6.exec(ue))?{r:Pf(te[1]),g:Pf(te[2]),b:Pf(te[3]),format:ze?"name":"hex"}:(te=vp.hex3.exec(ue))?{r:Pf(te[1]+""+te[1]),g:Pf(te[2]+""+te[2]),b:Pf(te[3]+""+te[3]),format:ze?"name":"hex"}:!1}window.tinycolor=qr,p(function(){p.fn.spectrum.load&&p.fn.spectrum.processNativeColorInputs()})}var Ks=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ga=function(p){Ks(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this,o=t.ppfx||"";return r.opts=t,r.ppfx=o,r.em=t.target||{},!t.onChange&&r.listenTo(r.model,"change:value",r.handleModelChange),r}return i.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},i.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},i.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},i.prototype.elementUpdated=function(){this.model.trigger("el:change")},i.prototype.setValue=function(t,r){var o=this.model,l=t||o.get("defaults"),v=this.getInputEl();v&&(v.value=l)},i.prototype.handleModelChange=function(t,r,o){this.setValue(r,o)},i.prototype.handleChange=function(t){t.stopPropagation();var r=this.getInputEl().value;this.__onInputChange(r),this.elementUpdated()},i.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},i.prototype.getInputEl=function(){if(!this.inputEl){var t=this,r=t.model,o=t.opts,l=o.type||"text",v=r.get("placeholder")||r.get("defaults")||r.get("default")||"";this.inputEl=(0,ft.default)('<input type="'.concat(l,'" placeholder="').concat(v,'">'))}return this.inputEl.get(0)},i.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},i}(q.G7);const Ms=ga;ga.prototype.events={change:"handleChange"};var mi=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ru=function(){return Ru=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ru.apply(this,arguments)};ft.default&&hf(ft.default);var Pl=function(p){var i=p.getFormat()==="name"&&p.toName(),t=p.getAlpha()==1?p.toHexString():p.toRgbString();return i||t.replace(/ /g,"")},Hu=function(p){mi(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},i.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},i.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},i.prototype.remove=function(){return p.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},i.prototype.handleChange=function(t){t.stopPropagation();var r=t.target.value;(0,wt.isUndefined)(r)||this.__onInputChange(r)},i.prototype.__onInputChange=function(t){var r=this,o=r.model,l=r.opts,v=l.onChange,w=t,x=this.getColorEl();if(x){x.spectrum("set",w);var E=x.spectrum("get"),M=w&&Pl(E);M&&(w=M)}v?v(w):o.set({value:w},{fromInput:1})},i.prototype.setValue=function(t,r){r===void 0&&(r={});var o=this.model,l=(0,wt.isUndefined)(r.def)?o.get("defaults"):r.def,v=(0,wt.isUndefined)(t)?(0,wt.isUndefined)(l)?"":l:t,w=this.getInputEl(),x=this.getColorEl(),E=v!="none"?v:"";w.value=v,x.get(0).style.backgroundColor=E,(r.fromTarget||r.fromInput&&!r.avoidStore)&&(x.spectrum("set",E),this.noneColor=v=="none",this.movedColor=E)},i.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var r=this,o=r.em,l=r.model,v=r.opts,w=this.ppfx,x=v.onChange,E=(0,ft.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),M=E.get(0).style,G=o&&o.getConfig&&o.getConfig().colorPicker||{};this.movedColor="";var ot=!1,Ct;this.$el.find("[data-colorp-c]").append(E);var Ut=function(ie,ae){ae===void 0&&(ae=!0),x?x(ie,!ae):(ae&&l.setValueFromInput(0,!1),l.setValueFromInput(ie,ae))};E.spectrum(Ru(Ru(Ru({color:l.getValue()||!1,containerClassName:"".concat(w,"one-bg ").concat(w,"two-color ").concat(w,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},G),l.get("colorPicker")||{}),{move:function(ie){var ae=Pl(ie);t.movedColor=ae,M.backgroundColor=ae,Ut(ae,!1)},change:function(ie){ot=!0;var ae=Pl(ie);M.backgroundColor=ae,Ut(ae),t.noneColor=!1},show:function(ie){ot=!1,t.movedColor="",Ct=x?l.getValue({noDefault:!0}):Pl(ie)},hide:function(){!ot&&(Ct||x)&&(t.noneColor&&(Ct=""),M.backgroundColor=Ct,E.spectrum("set",Ct),Ut(Ct,!1))}})),o&&o.on&&this.listenTo(o,"component:selected",function(){t.movedColor&&Ut(t.movedColor),ot=!0,t.movedColor="",E.spectrum("hide")}),this.colorEl=E}return this.colorEl},i.prototype.render=function(){return Ms.prototype.render.call(this),this.getColorEl(),this},i}(Ms);const zc=Hu;var Za=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gf=function(p){Za(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.templateInput=function(){return""},i.prototype.getInputEl=function(){if(!this.input){var t=this.model,r=this.getModelValue(),o=new zc({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),l=o.render();l.setValue(r,{fromTarget:1}),this.input=l.el}return this.input},i}(zo);const Qp=gf;var um=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),td=function(p){um(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;return(0,wt.bindAll)(r,"moveIncrement","upIncrement"),r.doc=document,r.listenTo(r.model,"change:unit",r.handleModelChange),r}return i.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},i.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},i.prototype.setValue=function(t,r){var o=r||{},l=this.validateInputValue(t,{deepCheck:1}),v={value:l.value,unit:""};(l.unit||l.force)&&(v.unit=l.unit),this.model.set(v,o),o.silent&&this.handleModelChange()},i.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},i.prototype.handleUnitChange=function(t){t.stopPropagation();var r=this.getUnitEl().value;this.model.set("unit",r),this.elementUpdated()},i.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},i.prototype.elementUpdated=function(){this.model.trigger("el:change")},i.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var r=this.getUnitEl();r&&(r.value=t.get("unit")||"")},i.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,r=t.get("units")||[];if(r.length){var o=['<option value="" disabled hidden>-</option>'];r.forEach(function(v){var w=v==t.get("unit")?"selected":"";o.push("<option ".concat(w,">").concat(v,"</option>"))});var l=document.createElement("div");l.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(o.join(""),"</select>"),this.unitEl=l.firstChild}}return this.unitEl},i.prototype.upArrowClick=function(){var t=this.model,r=t.get("step"),o=parseFloat(t.get("value"));this.setValue(this.normalizeValue(o+r)),this.elementUpdated()},i.prototype.downArrowClick=function(){var t=this.model,r=t.get("step"),o=parseFloat(t.get("value"));this.setValue(this.normalizeValue(o-r)),this.elementUpdated()},i.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var r=this.model.get("value")||0;r=this.normalizeValue(r),this.current={y:t.pageY,val:r},(0,tr.on)(this.doc,"mousemove",this.moveIncrement),(0,tr.on)(this.doc,"mouseup",this.upIncrement)},i.prototype.moveIncrement=function(t){this.moved=!0;var r=this.model,o=r.get("step"),l=this.current,v=this.normalizeValue(l.val+(l.y-t.pageY)*o),w=this.validateInputValue(v),x=w.value,E=w.unit;return this.prValue=x,r.set({value:x,unit:E},{avoidStore:1}),!1},i.prototype.upIncrement=function(){var t=this.model,r=t.get("step");if((0,tr.S1)(this.doc,"mouseup",this.upIncrement),(0,tr.S1)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var o=this.prValue-r;t.set("value",o,{avoidStore:1}).set("value",o+r),this.elementUpdated()}},i.prototype.normalizeValue=function(t,r){r===void 0&&(r=0);var o=this.model,l=o.get("step"),v=0;if(isNaN(t))return r;if(t=parseFloat(t),Math.floor(t)!==t){var w=l.toString().split(".")[1];v=w?w.length:0}return v?parseFloat(t.toFixed(v)):t},i.prototype.validateInputValue=function(t,r){r===void 0&&(r={});var o=0,l=r||{},v=this.model,w="",x=(0,wt.isUndefined)(t)?w:t,E=r.units||v.get("units")||[],M=v.get("unit")||E.length&&E[0]||"",G=(0,wt.isUndefined)(r.max)?v.get("max"):r.max,ot=(0,wt.isUndefined)(r.min)?v.get("min"):r.min,Ct=!!v.get("limitlessMax"),Ut=!!v.get("limitlessMin");if(l.deepCheck){var ie=v.get("fixedValues")||[];if(x===""&&(M=""),x){var ae=new RegExp("^"+ie.join("|"),"g");if(ie.length&&ae.test(x))x=x.match(ae)[0],M="",o=1;else{var Ie=x+"";x+="",x=parseFloat(x.replace(",",".")),x=isNaN(x)?w:x;var qe=Ie.replace(x,"");(0,wt.indexOf)(E,qe)>=0&&(M=qe)}}}return!Ct&&!(0,wt.isUndefined)(G)&&G!==""&&(x=x>G?G:x),!Ut&&!(0,wt.isUndefined)(ot)&&ot!==""&&(x=x<ot?ot:x),{force:o,value:x,unit:M}},i.prototype.render=function(){Ms.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},i}(Ms);const Mg=td;td.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var fm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pm=function(p){fm(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.getValueForTarget=function(){var t=this.model,r=t.attributes,o=r.value,l=r.unit;return!(0,wt.isUndefined)(o)&&o!==""?o+l:t.get("default")},i.prototype.getInputEl=function(){if(!this.input){var t=this,r=t.ppfx,o=t.model,l=this.getModelValue(),v=new Mg({contClass:"".concat(r,"field-int"),type:"number",model:o,ppfx:r});v.render(),this.$input=v.inputEl,this.$unit=v.unitEl,o.set("value",l,{fromTarget:!0}),this.$input.val(l),this.input=v.el}return this.input},i}(zo);const dm=pm;var ed=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hm=function(p){ed(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;return r.listenTo(r.model,"change:options",r.rerender),r}return i.prototype.templateInput=function(){var t=this,r=t.ppfx,o=t.clsField;return'<div class="'.concat(o,`">
      <div data-input></div>
      <div class="`).concat(r,`sel-arrow">
        <div class="`).concat(r,`d-s-arrow"></div>
      </div>
    </div>`)},i.prototype.getInputEl=function(){if(!this.$input){var t=this,r=t.model,o=t.em,l=r.get("name"),v=r.get("options")||[],w=[],x="<select>";v.forEach(function(G){var ot="",Ct,Ut,ie;(0,wt.isString)(G)?(Ct=G,Ut=G):(Ct=G.name||G.label||G.value,Ut="".concat((0,wt.isUndefined)(G.value)?G.id:G.value).replace(/"/g,"&quot;"),ie=G.style?G.style.replace(/"/g,"&quot;"):"",ot+=ie?' style="'.concat(ie,'"'):"");var ae=o.t("traitManager.traits.options.".concat(l,".").concat(Ut))||Ct;x+='<option value="'.concat(Ut,'"').concat(ot,">").concat(ae,"</option>"),w.push(Ut)}),x+="</select>",this.$input=(0,ft.default)(x);var E=r.getTargetValue(),M=w.indexOf(E)>=0?E:r.get("default");!(0,wt.isUndefined)(M)&&this.$input.val(M)}return this.$input.get(0)},i}(zo);const gm=hm;var vm=ai(330),Eh=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lg="data-categories",jg="data-no-categories",Dg=function(p){Eh(i,p);function i(t,r){var o=p.call(this,t)||this;o.reuseView=!0,o.renderedCategories=new Map,o.itemsView=r;var l=t.config||{};o.config=l;var v=t.editor;o.em=v;var w=l.pStylePrefix||"";return o.ppfx=w,o.pfx=w+l.stylePrefix||"",o.className="".concat(o.pfx,"traits"),o.traitContClass="".concat(w,"traits-c"),o.classNoCat="".concat(w,"traits-empty-c"),o.catsClass="".concat(w,"trait-categories"),o.collection=new Ci([],{em:v}),o.listenTo(v,"component:toggled",o.updatedCollection),o.updatedCollection(),o}return i.prototype.updatedCollection=function(){var t=this,r=t.ppfx,o=t.em,l=o.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(r,"one-bg ").concat(r,"two-color"),this.collection=(l==null?void 0:l.traits)||new Ci([],{em:o}),this.render()},i.prototype.add=function(t,r){var o=this,l=o.config,v=o.renderedCategories,w=this.itemView,x=t.get(this.itemType);this.itemsView&&this.itemsView[x]&&(w=this.itemsView[x]);var E=new w({config:l,model:t,attributes:t.get("attributes")}),M=E.render().el,G=t.parent.initCategory(t);if(G){var ot=G.getId(),Ct=this.getCategoriesEl(),Ut=v.get(ot);!Ut&&Ct&&(Ut=new Pp({model:G},l,"trait").render(),v.set(ot,Ut),Ct.appendChild(Ut.el)),Ut==null||Ut.append(M);return}r?r.appendChild(M):this.append(M)},i.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(Lg,"]"))),this.catsEl},i.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(jg,"]"))),this.traitsEl},i.prototype.append=function(t){var r=this.getTraitsEl();r==null||r.appendChild(t)},i.prototype.render=function(){var t=this,r=this,o=r.el,l=r.ppfx,v=r.catsClass,w=r.traitContClass,x=r.classNoCat,E=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,o.innerHTML=`
      <div class="`.concat(v,'" ').concat(Lg,`></div>
      <div class="`).concat(x," ").concat(w,'" ').concat(jg,`></div>
    `),this.collection.forEach(function(G){return t.add(G,E)}),this.append(E);var M="".concat(w,"s ").concat(l,"one-bg ").concat(l,"two-color");return this.$el.addClass(M),this.rendered=!0,this},i}(vm.Z);const Ig=Dg;Dg.prototype.itemView=zo;var mm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vf=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ym=function(p){mm(i,p);function i(t){var r=p.call(this,t,"TraitManager",da)||this;r.TraitsView=Ig,r.events=Ba,r.state=new q.Hn({traits:[]}),r.types={text:zo,number:dm,select:gm,checkbox:Ya,color:Qp,button:ea};var o=r,l=o.state,v=o.config,w=o.events,x=v.pStylePrefix;x&&(v.stylePrefix="".concat(x).concat(v.stylePrefix)),(0,wt.bindAll)(r,"__onSelect");var E=(0,wt.debounce)(function(){return r.__upSel()},0),M=(0,wt.debounce)(function(){return r.__onUp()},0);return l.listenTo(t,"component:toggled",E),l.listenTo(t,w.value,M),l.on("change:traits",r.__onSelect),r.debounced=[E,M],r}return i.prototype.select=function(t){var r=(t==null?void 0:t.getTraits())||[];this.state.set({component:t,traits:r}),this.__trgCustom()},i.prototype.getCategories=function(){var t,r=this.getComponent(),o=((t=r==null?void 0:r.traits.categories)===null||t===void 0?void 0:t.models)||[];return vf([],o,!0)},i.prototype.getTraits=function(){return this.getCurrent()},i.prototype.getTraitsByCategory=function(t){return qi(t||this.getTraits())},i.prototype.getComponent=function(){return this.state.attributes.component},i.prototype.addType=function(t,r){var o=this.getType("text");this.types[t]=o.extend(r)},i.prototype.getType=function(t){return this.getTypes()[t]},i.prototype.getTypes=function(){return this.types},i.prototype.getTraitsViewer=function(){return this.view},i.prototype.getCurrent=function(){return this.state.get("traits")||[]},i.prototype.render=function(){var t=this.view,r=this.em;return t=new Ig({el:t==null?void 0:t.el,collection:[],editor:r,config:this.getConfig()},this.getTypes()),this.view=t,t.el},i.prototype.postRender=function(){this.__appendTo()},i.prototype.__onSelect=function(){var t=this,r=t.em,o=t.events,l=t.state,v=l.attributes,w=v.component,x=v.traits;r.trigger(o.select,{component:w,traits:x})},i.prototype.__trgCustom=function(t){t===void 0&&(t={});var r=this,o=r.em,l=r.events,v=r.__ctn;this.__ctn=v||t.container,o.trigger(l.custom,this.__customData())},i.prototype.__customData=function(){return{container:this.__ctn}},i.prototype.__upSel=function(){this.select(this.em.getSelected())},i.prototype.__onUp=function(){this.select(this.getComponent())},i}(H);const bm=ym;var wm={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const rp=wm;var _m=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xm=function(p){_m(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.items=[],r.opt=t;var o=t.config||{};r.config=o,r.parentView=t.parentView;var l=o.stylePrefix||"",v=o.pStylePrefix||"",w=r.collection;r.listenTo(w,"add",r.addTo),r.listenTo(w,"reset resetNavigator",r.render),r.listenTo(w,"remove",r.removeChildren),r.className="".concat(l,"layers");var x=o.em;if(o.sortable&&!r.opt.sorter){var E=x.Utils;r.opt.sorter=new E.Sorter({container:o.sortContainer||r.el,containerSel:".".concat(r.className),itemSel:".".concat(l,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:v,pfx:l,em:x})}return r.$el.data("collection",w),t.parent&&r.$el.data("model",t.parent),r}return i.prototype.removeChildren=function(t){var r=t.viewLayer;r&&(r.remove(),delete t.viewLayer)},i.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},i.prototype.addToCollection=function(t,r,o){var l=this,v=l.parentView,w=l.opt,x=l.config,E=l.el,M=w.ItemView,G=w.opened,ot=w.module,Ct=w.level,Ut=w.sorter,ie=t.viewLayer||new M({ItemView:M,level:Ct,model:t,parentView:v,config:x,sorter:Ut,opened:G,module:ot}),ae=ie.render().el;if(r)r.appendChild(ae);else{var Ie=E,qe=Ie.childNodes;if((0,wt.isUndefined)(o))Ie.appendChild(ae);else{var Ke=qe.length==o;Ke&&o--,Ke||!qe.length?Ie.appendChild(ae):Ie.insertBefore(ae,qe[o])}}return this.items.push(ie),ae},i.prototype.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return q.G7.prototype.remove.apply(this,t),this.items.map(function(o){return o.remove()}),this},i.prototype.render=function(){var t=this,r=document.createDocumentFragment(),o=this.el;return o.innerHTML="",this.collection.each(function(l){return t.addToCollection(l,r)}),o.appendChild(r),o.className=this.className,this},i}(q.G7);const Cm=xm;var rd=ai(790),Sm={stylePrefix:"com-",defaults:{},strict:!0};const kl=Sm;var Xl=ai(713),Ys=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nd=function(){return nd=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},nd.apply(this,arguments)},mf=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},Ph=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Id={preserveSelected:1},np=function(p){return function(i){return p.trigger("".concat(ci,":start"),i)}},Ap=function(p){return function(i){return p.trigger(ci,i)}},Ng=function(p,i,t){return t===void 0&&(t={}),function(r,o,l){i.forEach(function(v){return v.set("status",v.get("selectable")?"selected":"")}),p.setSelected(i),i[0].emitUpdate(),p.trigger("".concat(ci,":end"),l),setTimeout(function(){return p.runDefault(Id)}),(t.altMode||l.cancelled)&&p.set("_cmpDrag",1)}},Om=function(p){Ys(i,p);function i(t){var r=p.call(this,t,"Commands",kl)||this;r.CommandAbstract=rd.default,r.defaultCommands={},r.commands={},r.active={},r.events=Xl.Z;var o=r.config,l=o.pStylePrefix,v=r.defaultCommands;l&&(o.stylePrefix=l+o.stylePrefix),Object.keys(o.defaults).forEach(function(x){var E=o.defaults[x];E.id&&r.add(E.id,E)}),v["tlb-delete"]={run:function(x){return x.runCommand("core:component-delete")}},v["tlb-clone"]={run:function(x){x.runCommand("core:copy"),x.runCommand("core:paste",{action:"clone-component"})}},v["tlb-move"]={run:function(x,E,M){var G;M===void 0&&(M={});var ot=x.getModel(),Ct=M.event,Ut=M.target,ie=Ut?[Ut]:mf([],x.getSelectedAll(),!0),ae=ie.map(function(Ko){var qr,tc;return((tc=(qr=Ko.delegate)===null||qr===void 0?void 0:qr.move)===null||tc===void 0?void 0:tc.call(qr,Ko))||Ko}).filter(Boolean),Ie=ae[ae.length-1],qe=(Ct==null?void 0:Ct.type)==="dragstart",Ke=["absolute","translate"];if(!(Ie!=null&&Ie.get("draggable")))return ot.logWarning("The element is not draggable");var Or=Ie.get("dmode")||ot.get("dmode"),Gr=function(){return ot.stopDefault(Id)},bn=(0,wt.includes)(Ke,Or);ae.forEach(function(Ko){return Ko.trigger("disable",{fromMove:!0})}),qe?setTimeout(Gr,0):Gr();var Tn=np(ot),Vr=Ap(ot),Cn=Ng(ot,ae,{altMode:bn});if(bn)x.runCommand("core:component-drag",{guidesInfo:1,mode:Or,target:Ie,onStart:Tn,onDrag:Vr,onEnd:Cn,event:Ct});else{qe&&Ct.dataTransfer.setDragImage((G=Ie.view)===null||G===void 0?void 0:G.el,0,0);var Hn=x.Commands.get("move-comp");Hn.onStart=Tn,Hn.onDrag=Vr,Hn.onEndMoveFromModel=Cn,Hn.initSorterFromModels(ae)}ae.filter(function(Ko){return Ko.get("selectable")}).forEach(function(Ko){return Ko.set("status","freezed-selected")})}},v["core:undo"]=function(x){return x.UndoManager.undo()},v["core:redo"]=function(x){return x.UndoManager.redo()},Ph.forEach(function(x){var E=x[2],M=ai(828)("./".concat(x[1])).default,G="core:".concat(x[0]);v[G]=M,E&&(v[E]=M,["run","stop"].forEach(function(ot){t.on("".concat(ot,":").concat(E),function(){for(var Ct=[],Ut=0;Ut<arguments.length;Ut++)Ct[Ut]=arguments[Ut];return t.trigger.apply(t,mf(["".concat(ot,":").concat(G)],Ct,!1))})}))}),o.model=t.Canvas;for(var w in v)r.add(w,v[w]);return r}return i.prototype.add=function(t,r){var o=(0,wt.isFunction)(r)?{run:r}:r;return o.stop||(o.noStop=!0),delete o.initialize,o.id=t,this.commands[t]=rd.default.extend(o),this},i.prototype.get=function(t){var r=this.commands[t];return(0,wt.isFunction)(r)?(r=new r(this.config),this.commands[t]=r):r||this.em.logWarning("'".concat(t,"' command not found")),r},i.prototype.extend=function(t,r){r===void 0&&(r={});var o=this.get(t);if(o){var l=nd(nd({},o.constructor.prototype),r);this.add(t,l);var v=Ph.filter(function(w){return"core:".concat(w[0])===t&&w[2]})[0];v&&this.add(v[2],l)}return this},i.prototype.has=function(t){return!!this.commands[t]},i.prototype.getAll=function(){return this.commands},i.prototype.run=function(t,r){return r===void 0&&(r={}),this.runCommand(this.get(t),r)},i.prototype.stop=function(t,r){return r===void 0&&(r={}),this.stopCommand(this.get(t),r)},i.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},i.prototype.getActive=function(){return this.active},i.prototype.runCommand=function(t,r){r===void 0&&(r={});var o;if(t&&t.run){var l=this,v=l.em,w=l.config,x=t.id,E=v.Editor;(!this.isActive(x)||r.force||!w.strict)&&(o=E&&t.callRun(E,r),x&&t.stop&&!t.noStop&&!r.abort&&(this.active[x]=o))}return o},i.prototype.stopCommand=function(t,r){r===void 0&&(r={});var o;if(t&&t.run){var l=this,v=l.em,w=l.config,x=t.id,E=v.Editor;(this.isActive(x)||r.force||!w.strict)&&(x&&delete this.active[x],o=t.callStop(E,r))}return o},i.prototype.create=function(t){t.stop||(t.noStop=!0);var r=rd.default.extend(t);return new r(this.config)},i.prototype.__onRun=function(t,r){var o=this,l=o.em,v=o.events;l.on("".concat(v.runCommand).concat(t),r)},i.prototype.__onStop=function(t,r){var o=this,l=o.em,v=o.events;l.on("".concat(v.stopCommand).concat(t),r)},i.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},i}(H);const Tm=Om;var Em=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ls="contentEditable",Mp="data-toggle-move",Vg=function(p){Em(i,p);function i(t){var r=p.call(this,t)||this;(0,wt.bindAll)(r,"__render"),r.opt=t,r.module=t.module,r.config=t.config||{},r.sorter=t.sorter||"",r.parentView=t.parentView;var o=r,l=o.model,v=o.pfx,w=o.ppfx,x=l.get("type")||"default";return r.className="".concat(v,"layer ").concat(v,"layer__t-").concat(x," no-select ").concat(w,"two-color"),r.inputNameCls="".concat(w,"layer-name"),r.clsTitleC="".concat(v,"layer-title-c"),r.clsTitle="".concat(v,"layer-title"),r.clsCaret="".concat(v,"layer-caret"),r.clsCount="".concat(v,"layer-count"),r.clsMove="".concat(v,"layer-move"),r.clsChildren="".concat(v,"layer-children"),r.clsNoChild="".concat(v,"layer-no-chld"),r.clsEdit="".concat(r.inputNameCls,"--edit"),r.clsNoEdit="".concat(r.inputNameCls,"--no-edit"),r.initComponent(),r}return i.prototype.events=function(){var t;return t={},t["mousedown [".concat(Mp,"]")]="startSort",t["touchstart [".concat(Mp,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},i.prototype.template=function(t){var r=this,o=r.pfx,l=r.ppfx,v=r.config,w=r.clsNoEdit,x=r.module,E=r.opt,M=r.em,G=v.hidable,ot=x.getComponents(t).length,Ct=ot?"":this.clsNoChild,Ut="".concat(this.clsTitle," ").concat(Ct),ie="".concat(this.clsTitleC),ae="".concat(this.inputNameCls," ").concat(w," ").concat(l,"no-app"),Ie=E.level||0,qe="".concat(Ie*10,"px"),Ke=t.getName(),Or=t.getIcon(),Gr="".concat(o,"layer"),bn=(M==null?void 0:M.getConfig()).icons,Tn=bn,Vr=Tn.move,Cn=Tn.eye,Hn=Tn.eyeOff,Ko=Tn.chevron;return`
      <div class="`.concat(o,"layer-item ").concat(l,`one-bg" data-toggle-select>
        <div class="`).concat(o,`layer-item-left">
          `).concat(G?'<i class="'.concat(o,`layer-vis" data-toggle-visible>
                <i class="`).concat(o,'layer-vis-on">').concat(Cn,`</i>
                <i class="`).concat(o,'layer-vis-off">').concat(Hn,`</i>
              </i>`):"",`
          <div class="`).concat(ie,`">
            <div class="`).concat(Ut,'" style="padding-left: ').concat(qe,`">
              <div class="`).concat(o,'layer-title-inn" title="').concat(Ke,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Ko,`</i>
                  `).concat(Or?'<span class="'.concat(Gr,'__icon">').concat(Or,"</span>"):"",`
                <span class="`).concat(ae,'" data-name>').concat(Ke,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(o,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(ot||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(Mp,">").concat(Vr||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(i.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),i.prototype.initComponent=function(){var t=this,r=this,o=r.model,l=r.config,v=l.onInit,w=o.components();this.listenTo(w,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(x){return t.listenTo(o,x[0],x[1])}),this.$el.data("model",o),this.$el.data("collection",w),o.viewLayer=this,v.bind(this)({component:o,render:this.__render,listenTo:this.listenTo})},i.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},i.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},i.prototype.updateVisibility=function(){var t=this,r=t.pfx,o=t.model,l=t.module,v="".concat(r,"layer-hidden"),w=!l.isVisible(o),x=w?"addClass":"removeClass";this.$el[x](v),this.getVisibilityEl()[x]("".concat(r,"layer-off"))},i.prototype.updateMove=function(){var t=this,r=t.model,o=t.config,l=this.getItemContainer().find("[".concat(Mp,"]"))[0];if(l){var v=r.get("draggable")&&o.sortable;l.style.display=v?"":"none"}},i.prototype.toggleVisibility=function(t){t==null||t.stopImmediatePropagation();var r=this,o=r.module,l=r.model;o.setVisible(l,!o.isVisible(l))},i.prototype.handleEdit=function(t){t==null||t.stopPropagation();var r=this,o=r.em,l=r.$el,v=r.clsNoEdit,w=r.clsEdit,x=this.getInputName();x[Ls]="true",x.focus(),document.execCommand("selectAll",!1),o.setEditing(!0),l.find(".".concat(this.inputNameCls)).removeClass(v).addClass(w)},i.prototype.handleEditKey=function(t){t.stopPropagation(),((0,tr.kl)(t)||(0,tr.r$)(t))&&this.handleEditEnd(t)},i.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var r=this,o=r.em,l=r.$el,v=r.clsNoEdit,w=r.clsEdit,x=r.model,E=this.getInputName(),M=E.textContent;E.scrollLeft=0,E[Ls]="false",x.setName(M),o.setEditing(!1),l.find(".".concat(this.inputNameCls)).addClass(v).removeClass(w),this.updateName()},i.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},i.prototype.updateOpening=function(){var t=this,r=t.$el,o=t.model,l=t.pfx,v="open",w="".concat(l,"layer-open"),x=this.getCaret();this.module.isOpen(o)?(r.addClass(v),x.addClass(w)):(r.removeClass(v),x.removeClass(w))},i.prototype.toggleOpening=function(t){var r=this,o=r.model,l=r.module;t==null||t.stopImmediatePropagation(),o.get("components").length&&l.setOpen(o,!l.isOpen(o))},i.prototype.handleSelect=function(t){t==null||t.stopPropagation();var r=this,o=r.module,l=r.model;o.setLayerData(l,{selected:!0},{event:t})},i.prototype.handleHover=function(t){t==null||t.stopPropagation();var r=this,o=r.module,l=r.model;o.setLayerData(l,{hovered:!0})},i.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var r=this,o=r.module,l=r.model;o.setLayerData(l,{hovered:!1})},i.prototype.startSort=function(t){var r,o,l;t.stopPropagation();var v=this,w=v.em,x=v.sorter,E=v.model;if(!(t.button&&t.button!==0)&&x){var M=((o=(r=E.delegate)===null||r===void 0?void 0:r.move)===null||o===void 0?void 0:o.call(r,E))||E;x.onStart=np(w),x.onMoveClb=Ap(w),x.onEndMove=Ng(w,[M]);var G=((l=M.viewLayer)===null||l===void 0?void 0:l.el)||t.target;x.startSort(G)}},i.prototype.updateStatus=function(){di.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},i.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},i.prototype.checkChildren=function(){var t=this,r=t.model,o=t.clsNoChild,l=t.module,v=l.getComponents(r).length,w=this.getItemContainer(),x=w.find(".".concat(this.clsTitle)),E=w.find("[data-count]");x[v?"removeClass":"addClass"](o),E.html("".concat(v||"")),!v&&l.setOpen(r,!1)},i.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},i.prototype.setRoot=function(t){var r,o=(0,wt.isString)(t)?(r=this.em.getWrapper())===null||r===void 0?void 0:r.find(t)[0]:t;o&&(this.stopListening(),this.model=o,this.initComponent(),this._rendered&&this.render())},i.prototype.updateLayerable=function(){var t=this.parentView,r=t||this;r.render()},i.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},i.prototype.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return q.G7.prototype.remove.apply(this,t),this.__clearItems(),this},i.prototype.render=function(){var t=this,r=t.model,o=t.config,l=t.pfx,v=t.ppfx,w=t.opt,x=t.sorter;this.__clearItems();var E=w.opened,M=w.module,G=w.ItemView,ot=!M.__isLayerable(r),Ct=this.$el.empty(),Ut=w.level+1;delete this.inputName,this.items=new Cm({ItemView:G,collection:r.get("components"),config:o,sorter:x,opened:E,parentView:this,parent:r,level:Ut,module:M});var ie=this.items.render().$el;return!o.showWrapper&&Ut===1?Ct.append(ie):(Ct.html(this.template(r)),Ct.find(".".concat(this.clsChildren)).append(ie)),!M.isVisible(r)&&(this.className+=" ".concat(l,"hide")),ot&&(this.className+=" ".concat(v,"hidden")),Ct.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},i.prototype.__render=function(){var t=this,r=t.model,o=t.config,l=t.el,v=o.onRender,w={component:r,el:l};v.bind(this)(w),this.em.trigger("layer:render",w)},i}(q.G7);const Fg=Vg;var kh=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),op=function(){return op=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},op.apply(this,arguments)},Rg="layer",Ah="".concat(Rg,":"),Mh="".concat(Ah,"root"),Hg="".concat(Ah,"component"),Pm="".concat(Ah,"custom"),km={all:Rg,root:Mh,component:Hg,custom:Pm},Lh={mediaText:""},Am=["open","status","locked","custom-name","components","classes"].map(function(p){return"".concat(ne.g.update,":").concat(p)}).join(" "),Mm=function(p){return p===void 0&&(p={}),(p.display||"").trim().indexOf("none")===0},Nd=function(p){kh(i,p);function i(t){var r=p.call(this,t,"LayerManager",rp)||this;return r.events=km,(0,wt.bindAll)(r,"componentChanged","__onRootChange","__onComponent"),r.model=new $.Z(r,{opened:{}}),r.config.stylePrefix=r.config.pStylePrefix,r}return i.prototype.onLoad=function(){var t=this,r=this,o=r.em,l=r.config,v=r.model;v.listenTo(o,"component:selected",this.componentChanged),v.on("change:root",this.__onRootChange),v.listenTo(o,Am,this.__onComponent),this.componentChanged(),v.listenToOnce(o,"load",function(){t.setRoot(l.root),t.__appendTo()})},i.prototype.setRoot=function(t){var r=this.em.getWrapper(),o=(0,pe.isComponent)(t)?t:r;return t&&(0,wt.isString)(t)&&(0,pe.hasWin)()&&(o=r.find(t)[0]||r),this.model.set("root",o),o},i.prototype.getRoot=function(){return this.model.get("root")},i.prototype.getComponents=function(t){var r=this;return t.components().filter(function(o){return r.__isLayerable(o)})},i.prototype.setOpen=function(t,r){t.set("open",r)},i.prototype.isOpen=function(t){return!!t.get("open")},i.prototype.setVisible=function(t,r){var o="__prev-display",l=t.getStyle(Lh),v=l.display;if(r){var w=t.get(o);delete l.display,w&&(l.display=w,t.unset(o))}else v&&t.set(o,v),l.display="none";t.setStyle(l,Lh),this.updateLayer(t),this.em.trigger("component:toggled")},i.prototype.isVisible=function(t){return!Mm(t.getStyle(Lh))},i.prototype.setLocked=function(t,r){t.set("locked",r)},i.prototype.isLocked=function(t){return!!t.get("locked")},i.prototype.setName=function(t,r){t.set("custom-name",r)},i.prototype.getName=function(t){return t.getName()},i.prototype.getLayerData=function(t){var r=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:r==="selected",hovered:r==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},i.prototype.setLayerData=function(t,r,o){var l;o===void 0&&(o={});var v=this,w=v.em,x=v.config,E=r.open,M=r.selected,G=r.hovered,ot=r.visible,Ct=r.locked,Ut=r.name,ie=op({fromLayers:!0},o);if((0,pe.isDef)(E)&&this.setOpen(t,E),(0,pe.isDef)(M))if(M){w.setSelected(t,ie);var ae=x.scrollCanvas;ae&&((l=t.views)===null||l===void 0||l.forEach(function(Ie){return Ie.scrollIntoView(ae)}))}else w.removeSelected(t,ie);(0,pe.isDef)(G)&&x.showHover&&(G?w.setHovered(t,ie):w.setHovered(null,ie)),(0,pe.isDef)(ot)&&ot!==this.isVisible(t)&&this.setVisible(t,ot),(0,pe.isDef)(Ct)&&this.setLocked(t,Ct),(0,pe.isDef)(Ut)&&this.setName(t,Ut)},i.prototype.componentChanged=function(t,r){var o;if(r===void 0&&(r={}),!r.fromLayers){var l=this,v=l.em,w=l.config,x=w.scrollLayers,E=this.model.get("opened"),M=v.getSelected(),G=M==null?void 0:M.parent();for(var ot in E)E[ot].set("open",!1),delete E[ot];for(;G;)G.set("open",!0),E[G.cid]=G,G=G.parent();if(M&&x){var Ct=(o=M.viewLayer)===null||o===void 0?void 0:o.el;Ct==null||Ct.scrollIntoView(x)}}},i.prototype.getAll=function(){return this.view},i.prototype.render=function(){var t,r,o=this,l=o.config,v=o.model,w=Fg.extend(l.extend);return this.view=new w({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:w,level:0,config:l,opened:v.get("opened"),model:this.getRoot(),module:this}),(r=this.view)===null||r===void 0?void 0:r.render().el},i.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},i.prototype.__onRootChange=function(){var t,r=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(r),this.em.trigger(Mh,r),this.__trgCustom()},i.prototype.__onComponent=function(t){this.updateLayer(t)},i.prototype.__isLayerable=function(t){var r=t.get("tagName"),o=this.config.hideTextnode,l=!o||!t.isInstanceOf("textnode")&&r!=="br";return l&&t.get("layerable")},i.prototype.__trgCustom=function(t){var r=this,o=r.__ctn,l=r.em,v=r.events;this.__ctn=o||(t==null?void 0:t.container),l.trigger(v.custom,{container:this.__ctn,root:this.getRoot()})},i.prototype.updateLayer=function(t,r){this.em.trigger(Hg,t,r)},i}(H);const Lm=Nd;var jm={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const Dm=jm;var Bg=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jh=function(p){Bg(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.getDefaults=function(){return(0,wt.result)(this.prototype,"defaults")},i.prototype.defaults=function(){return{type:"",src:""}},i.prototype.getType=function(){return this.get("type")},i.prototype.getSrc=function(){return this.get("src")},i.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},i.prototype.getExtension=function(){return this.getFilename().split(".").pop()},i}(q.Hn);const Vd=jh;jh.prototype.idAttribute="src";var Ug=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),od=function(){return od=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},od.apply(this,arguments)},zg=function(p){Ug(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return od(od({},Vd.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},i}(Vd);const Dh=zg;var Ih=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nh=function(p){Ih(i,p);function i(t){var r=p.call(this,t)||this;r.options=t,r.collection=t.collection;var o=t.config||{};r.config=o,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.em=o.em,r.className=r.pfx+"asset",r.listenTo(r.model,"destroy remove",r.remove),r.model.view=r;var l=r.init&&r.init.bind(r);return l&&l(t),r}return i.prototype.__getBhv=function(){var t=this.em,r=t==null?void 0:t.Assets;return(r==null?void 0:r.__getBehaviour())||{}},i.prototype.template=function(t,r){var o=this.pfx;return`
      <div class="`.concat(o,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(o,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(o,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},i.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,wt.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},i.prototype.getPreview=function(){return""},i.prototype.getInfo=function(){return""},i.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},i}(q.G7);const Im=Nh;var Wg=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$g=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},Vh=function(p){Wg(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.getPreview=function(){var t=this,r=t.pfx,o=t.ppfx,l=t.model,v=l.get("src");return Te(qg||(qg=$g([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),r,v,r,o)},i.prototype.getInfo=function(){var t=this,r=t.pfx,o=t.model,l=o.get("name"),v=o.get("width"),w=o.get("height"),x=o.get("unitDim"),E=v&&w?"".concat(v,"x").concat(w).concat(x):"";return l=l||o.getFilename(),Te(Fh||(Fh=$g([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),r,l,r,E)},i.prototype.init=function(t){var r=this.pfx;this.className+=" ".concat(r,"asset-image")},i.prototype.onClick=function(){var t=this,r=t.model,o=t.pfx,l=this.__getBhv().select,v=this.config.onClick,w=this.collection;w.trigger("deselectAll"),this.$el.addClass(o+"highlight"),(0,wt.isFunction)(l)?l(r,!1):(0,wt.isFunction)(v)?v(r):this.updateTarget(w.target)},i.prototype.onDblClick=function(){var t=this,r=t.em,o=t.model,l=this.__getBhv().select,v=this.config.onDblClick,w=this.collection,x=w.target,E=w.onSelect;(0,wt.isFunction)(l)?l(o,!0):(0,wt.isFunction)(v)?v(o):(this.updateTarget(x),r==null||r.Modal.close()),(0,wt.isFunction)(E)&&E(o)},i.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},i}(Im);const Gg=Vh;Vh.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var qg,Fh,Fd=function(){return Fd=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Fd.apply(this,arguments)},Kg={types:[],initialize:function(p,i){var t=this;i===void 0&&(i={});var r=i.em;this.em=r,this.opts=i,this.model=function(l,v){l===void 0&&(l={}),v===void 0&&(v={});var w,x,E;if(l&&l.type){var M=t.getBaseType();E=t.getType(l.type),w=E?E.model:M.model,x=E?E.view:M.view}else{var G=t.recognizeType(l);E=G.type,w=E.model,x=E.view,l=G.attributes}var ot=new w(l,Fd(Fd({},v),{em:r}));return ot.typeView=x,ot};var o=this.init&&this.init.bind(this);o&&o()},recognizeType:function(p){for(var i=this.getTypes(),t=0;t<i.length;t++){var r=i[t],o=r.isType(p);if(o=typeof o=="boolean"&&o?{type:r.id}:o,o)return{type:r,attributes:o}}return{type:this.getBaseType(),attributes:p}},getBaseType:function(){var p=this.getTypes();return p[p.length-1]},getTypes:function(){return this.types},getType:function(p){for(var i=this.getTypes(),t=0;t<i.length;t++){var r=i[t];if(r.id===p)return r}},addType:function(p,i){var t=this.getType(p),r=this.getBaseType(),o=t?t.model:r.model,l=t?t.view:r.view,v=i.model,w=i.view,x=i.isType;v=v instanceof q.Hn||(0,wt.isFunction)(v)?v:o.extend(v||{}),w=w instanceof q.G7||(0,wt.isFunction)(w)?w:l.extend(w||{}),this.extendViewApi&&!i.model&&!i.view&&(w=w.extend(i)),t?(t.model=v,t.view=w,t.isType=x||t.isType):(i.id=p,i.model=v,i.view=w,i.isType=x||function(E){if(E&&E.type==p)return!0},this.getTypes().unshift(i))}};const Yg=Kg;var Nm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lp=q.FE.extend(Yg),Zg=function(p){Nm(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i}(Lp);const Rh=Zg;Zg.prototype.types=[{id:"image",model:Dh,view:Gg,isType:function(p){return typeof p=="string"?{type:"image",src:p}:p}}];var Hh;(function(p){p.add="asset:add",p.remove="asset:remove",p.removeBefore="asset:remove:before",p.update="asset:update",p.open="asset:open",p.close="asset:close",p.uploadStart="asset:upload:start",p.uploadEnd="asset:upload:end",p.uploadError="asset:upload:error",p.uploadResponse="asset:upload:response",p.custom="asset:custom",p.all="asset"})(Hh||(Hh={}));const Xg=Hh;var Vm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rd=function(p){Vm(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.options=t,r.config=t.config,r.pfx=r.config.stylePrefix||"",r.ppfx=r.config.pStylePrefix||"",r.em=r.config.em;var o=r.collection;return r.listenTo(o,"reset",r.renderAssets),r.listenTo(o,"add",r.addToAsset),r.listenTo(o,"remove",r.removedAsset),r.listenTo(o,"deselectAll",r.deselectAll),r}return i.prototype.template=function(t){var r=t.pfx,o=t.ppfx,l=t.em,v="";return this.config.showUrlInput&&(v=`
          <form class="`.concat(r,`add-asset">
            <div class="`).concat(o,"field ").concat(r,`add-field">
              <input placeholder="`).concat(l==null?void 0:l.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(o,'btn-prim">').concat(l==null?void 0:l.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(r,`assets-cont">
      <div class="`).concat(r,`assets-header">
        `).concat(v,`
      </div>
      <div class="`).concat(r,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},i.prototype.handleSubmit=function(t){t.preventDefault();var r=this.getAddInput(),o=r&&r.value.trim(),l=this.config.handleAdd;if(o){r.value="";var v=this.getAssetsEl();v&&(v.scrollTop=0),l?l.bind(this)(o):this.options.globalCollection.add(o,{at:0})}},i.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},i.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},i.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},i.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},i.prototype.addAsset=function(t,r){r===void 0&&(r=null);var o=r,l=this.collection,v=this.config,w=new t.typeView({model:t,collection:l,config:v}).render().el;if(o)o.appendChild(w);else{var x=this.getAssetsEl();x&&x.insertBefore(w,x.firstChild)}return w},i.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var r=this.$el.find(".".concat(this.pfx,"assets"));if(t)r.empty();else{var o=this.config.noAssets;o&&r.append(o)}},i.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},i.prototype.renderAssets=function(){var t=this,r=document.createDocumentFragment(),o=this.$el.find(".".concat(this.pfx,"assets"));o.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(l){return t.addAsset(l,r)}),o.append(r)},i.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},i}(q.G7);const Fm=Rd;Rd.prototype.events={submit:"handleSubmit"};var Rm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hm=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},Bm=function(p){Rm(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;r.options=t;var o=t.config||{};r.module=t.module,r.config=o,r.em=r.config.em,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.target=r.options.globalCollection||{},r.uploadId=r.pfx+"uploadFile",r.disabled=o.disableUpload!==void 0?o.disableUpload:!o.upload&&!o.embedAsBase64,r.multiUpload=o.multiUpload!==void 0?o.multiUpload:!0;var l=o.uploadFile;return l?r.uploadFile=l.bind(r):!o.upload&&o.embedAsBase64&&(r.uploadFile=i.embedAsBase64),r.delegateEvents(),r}return i.prototype.template=function(t){var r=t.pfx,o=t.title,l=t.uploadId,v=t.disabled,w=t.multiUpload;return Te(Jg||(Jg=Hm([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),r,o,l,v?"disabled":"",w?"multiple":"")},i.prototype.events=function(){return{"change [data-input]":"uploadFile"}},i.prototype.onUploadStart=function(){var t=this.module;t==null||t.__propEv(t.events.uploadStart)},i.prototype.onUploadEnd=function(t){var r=this,o=r.$el,l=r.module;l==null||l.__propEv(l.events.uploadEnd,t);var v=o.find("input");v&&v.val("")},i.prototype.onUploadError=function(t){var r=this.module;console.error(t),this.onUploadEnd(t),r==null||r.__propEv(r.events.uploadError,t)},i.prototype.onUploadResponse=function(t,r){var o=this,l=o.module,v=o.config,w=o.target,x;try{x=typeof t=="string"?JSON.parse(t):t}catch{x=t}l==null||l.__propEv(l.events.uploadResponse,x),v.autoAdd&&w&&w.add(x.data,{at:0}),this.onUploadEnd(t),r==null||r(x)},i.prototype.uploadFile=function(t,r){var o=this,l=t.dataTransfer?t.dataTransfer.files:t.target.files,v=this.config,w=v.beforeUpload,x=w&&w(l);if(x!==!1){var E=new FormData,M=v.params,G=v.customFetch,ot=v.fetchOptions;for(var Ct in M)E.append(Ct,M[Ct]);if(this.multiUpload)for(var Ut=0;Ut<l.length;Ut++)E.append("".concat(v.uploadName).concat(v.multiUploadSuffix),l[Ut]);else l.length&&E.append(v.uploadName,l[0]);var ie=v.upload,ae=v.headers,Ie="X-Requested-With";if(typeof ae[Ie]>"u"&&(ae[Ie]="XMLHttpRequest"),ie){this.onUploadStart();var qe={method:"post",credentials:v.credentials||"include",headers:ae,body:E},Ke=(ot==null?void 0:ot(qe))||qe,Or=G?G(ie,Ke):ut(ie,Ke).then(function(Gr){return(Gr.status/200|0)==1?Gr.text():Gr.text().then(function(bn){return Promise.reject(bn)})});return Or.then(function(Gr){return o.onUploadResponse(Gr,r)}).catch(function(Gr){return o.onUploadError(Gr)})}}},i.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var r=this.uploadForm;"draggable"in r&&(this.uploadForm.ondragover=function(){return r.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return r.className="",!1},this.uploadForm.ondrop=function(o){r.className="",o.preventDefault(),t.uploadFile(o)})}},i.prototype.initDropzone=function(t){var r=this,o=0,l=this.config,v=t.model,w=t.el,x=v.Editor,E=v.Canvas.getBody(),M=this.ppfx,G="".concat(M,"dropzone-active"),ot="".concat(M,"dropzone"),Ct=function(){w.className=w.className.replace(G,"").trim(),o=0},Ut=function(){return o||(w.className+=" ".concat(G),o=1),!1},ie=function(){return Ct(),!1},ae=function(Ie){if(Ct(),Ie.preventDefault(),Ie.stopPropagation(),r.uploadFile(Ie),l.openAssetsOnDrop&&x){var qe=x.getSelected();x.runCommand("open-assets",{target:qe,onSelect:function(){x.Modal.close(),x.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(ot,'">').concat(l.dropzoneContent,"</div>")),Ct(),"draggable"in w&&[w,E].forEach(function(Ie){Ie.ondragover=Ut,Ie.ondragleave=ie,Ie.ondrop=ae})},i.prototype.render=function(){var t=this,r=t.$el,o=t.pfx,l=t.em;return r.html(this.template({title:l&&l.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:o})),this.initDrop(),r.attr("class",o+"file-uploader"),this},i.embedAsBase64=function(t,r){var o=this,l=t.dataTransfer?t.dataTransfer.files:t.target.files,v={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var w=[],x=/^(.+)\/(.+)$/,E=function(Ct){var Ut=new Promise(function(ie,ae){var Ie=new FileReader;Ie.addEventListener("load",function(qe){var Ke,Or=Ct.name,Gr=x.exec(Ct.type);if(Gr?Ke=Gr[1]:Ke=Ct.type,Ke==="image"){var bn={src:Ie.result,name:Or,type:Ke,height:0,width:0},Tn=new Image;Tn.addEventListener("error",function(Vr){ae(Vr)}),Tn.addEventListener("load",function(){bn.height=Tn.height,bn.width=Tn.width,ie(bn)}),Tn.src=bn.src}else ie(Ke?{src:Ie.result,name:Or,type:Ke}:Ie.result)}),Ie.addEventListener("error",function(qe){ae(qe)}),Ie.addEventListener("abort",function(qe){ae("Aborted")}),Ie.readAsDataURL(Ct)});w.push(Ut)},M=0,G=l;M<G.length;M++){var ot=G[M];E(ot)}return Promise.all(w).then(function(Ct){v.data=Ct,o.onUploadResponse(v,r)},function(Ct){o.onUploadError(Ct)})},i}(q.G7);const Um=Bm;var Jg,zm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jp=function(){return jp=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},jp.apply(this,arguments)},Qg=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},id="open-assets",Wm=function(p){zm(i,p);function i(t){var r=p.call(this,t,"AssetManager",new Rh([],t),Xg,Dm)||this;r.storageKey="assets",r.Asset=Vd,r.Assets=Rh,r.events=Xg;var o=r,l=o.all,v=o.config;r.assetsVis=new Rh([]);var w=v.pStylePrefix;return w&&(v.stylePrefix="".concat(w).concat(v.stylePrefix)),l.on("add",function(x){return r.getAllVisible().add(x)}),l.on("remove",function(x){return r.getAllVisible().remove(x)}),r.__onAllEvent=(0,wt.debounce)(function(){return r.__trgCustom()},0),r}return i.prototype.open=function(t){t===void 0&&(t={});var r=this.em.Commands;r.run(id,jp({types:["image"],select:function(){}},t))},i.prototype.close=function(){var t=this.em.Commands;t.stop(id)},i.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(id))},i.prototype.add=function(t,r){return r===void 0&&(r={}),typeof r.at>"u"&&(r.at=0),this.all.add(t,r)},i.prototype.get=function(t){return this.all.where({src:t})[0]||null},i.prototype.getAll=function(){return this.all},i.prototype.getAllVisible=function(){return this.assetsVis},i.prototype.remove=function(t,r){return this.__remove(t,r)},i.prototype.store=function(){return this.getProjectData()},i.prototype.load=function(t){return this.loadProjectData(t)},i.prototype.getContainer=function(){var t,r=this.__getBehaviour();return r.container||((t=this.am)===null||t===void 0?void 0:t.el)},i.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},i.prototype.render=function(t){if(!this.getConfig().custom){var r=t||this.getAll().models;if(!this.am){var o=this.__viewParams();o.fu=this.FileUploader(),this.am=new Fm(jp({},o)),this.am.render()}return this.assetsVis.reset(r),this.getContainer()}},i.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},i.prototype.addType=function(t,r){this.getAll().addType(t,r)},i.prototype.getType=function(t){return this.getAll().getType(t)},i.prototype.getTypes=function(){return this.getAll().getTypes()},i.prototype.AssetsView=function(){return this.am},i.prototype.FileUploader=function(){return this.fu||(this.fu=new Um(this.__viewParams())),this.fu},i.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var r=this,o=r.em,l=r.events;o.Commands.__onRun(id,function(){return t.__propEv(l.open)}),o.Commands.__onStop(id,function(){return t.__propEv(l.close)})},i.prototype.postRender=function(t){var r;this.config.dropzone&&((r=this.fu)===null||r===void 0||r.initDropzone(t))},i.prototype.setTarget=function(t){this.assetsVis.target=t},i.prototype.onSelect=function(t){this.assetsVis.onSelect=t},i.prototype.onClick=function(t){this.config.onClick=t},i.prototype.onDblClick=function(t){this.config.onDblClick=t},i.prototype.__propEv=function(t){for(var r,o,l=[],v=1;v<arguments.length;v++)l[v-1]=arguments[v];(r=this.em).trigger.apply(r,Qg([t],l,!1)),(o=this.getAll()).trigger.apply(o,Qg([t],l,!1))},i.prototype.__trgCustom=function(){var t=this.__getBehaviour(),r=this.getConfig().custom;!t.container&&!r.open||this.em.trigger(this.events.custom,this.__customData())},i.prototype.__customData=function(){var t=this,r=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:r.types||[],container:r.container,close:function(){return t.close()},remove:function(o,l){return t.remove(o,l)},select:function(o,l){var v=t.add(o);(0,wt.isFunction)(r.select)&&r.select(v,l)},options:r.options||{}}},i.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=jp(jp({},this._bhv||{}),t)},i.prototype.__getBehaviour=function(t){return this._bhv||{}},i.prototype.destroy=function(){var t,r;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(r=this.am)===null||r===void 0||r.remove(),this._bhv={}},i}(R);const $m=Wm;var Gm=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qm=function(p){Gm(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t,r)||this,l=r.em,v={};o.em=l,t.frames||(v.component=t.component,v.styles=t.styles,["component","styles"].map(function(E){return o.unset(E)}));var w=t.frames||[v],x=new er(l.Canvas,w);return x.page=o,o.set("frames",x),!o.getId()&&o.set("id",l==null?void 0:l.Pages._createId()),l==null||l.UndoManager.add(x),o}return i.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},i.prototype.onRemove=function(){this.getFrames().reset()},i.prototype.getFrames=function(){return this.get("frames")},i.prototype.getId=function(){return this.id},i.prototype.getName=function(){return this.get("name")},i.prototype.setName=function(t){return this.set({name:t})},i.prototype.getAllFrames=function(){return this.getFrames().models||[]},i.prototype.getMainFrame=function(){return this.getFrames().at(0)},i.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},i.prototype.toJSON=function(t){t===void 0&&(t={});var r=q.Hn.prototype.toJSON.call(this,t),o=(0,wt.result)(this,"defaults");return(0,wt.forEach)(r,function(l,v){v.indexOf("_")===0&&delete r[v]}),(0,wt.forEach)(o,function(l,v){r[v]===l&&delete r[v]}),r},i}(q.Hn);const Bh=qm;var Km=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yf=function(){return yf=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},yf.apply(this,arguments)},Ym=function(p){Km(i,p);function i(t,r){var o=p.call(this,t)||this;return o.on("reset",o.onReset),o.on("remove",o.onRemove),o.model=function(l,v){return v===void 0&&(v={}),new Bh(l,yf(yf({},v),{em:r}))},o}return i.prototype.onReset=function(t,r){var o=this,l;(l=r==null?void 0:r.previousModels)===null||l===void 0||l.map(function(v){return o.onRemove(v)})},i.prototype.onRemove=function(t){t==null||t.onRemove()},i}(q.FE);const Uh=Ym;var tv=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zm=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ev="change:selected",rv="main",Xm=function(p){tv(i,p);function i(t){var r=p.call(this,t,"PageManager",new Uh([],t),Nr)||this;r.events=Nr,r.storageKey="pages",(0,wt.bindAll)(r,"_onPageChange");var o=new $.Z({_undo:!0});return r.model=o,r.pages.on("reset",function(l){return l.at(0)&&r.select(l.at(0))}),r.pages.on("all",r.__onChange,r),o.on(ev,r._onPageChange),r}return Object.defineProperty(i.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),i.prototype.getAll=function(){return Zm([],this.all.models,!0)},i.prototype.__onChange=function(t,r,o,l){var v=this,w=v.em,x=v.events,E=l||o;w.trigger(x.all,{event:t,page:r,options:E})},i.prototype.onLoad=function(){var t,r=this,o=r.pages,l=r.config,v=r.em,w={silent:!0},x=((t=l.pages)===null||t===void 0?void 0:t.map(function(M){return new Bh(M,{em:v,config:l})}))||[];o.add(x,w);var E=o.length?this._initPage():this.add({type:rv},w);E&&this.select(E,w)},i.prototype._onPageChange=function(t,r,o){var l=this,v=l.em,w=l.events,x=v.Layers,E=r.getMainComponent();x&&E&&x.setRoot(E),v.trigger(w.select,r,t.previous("selected")),this.__onChange(ev,r,o)},i.prototype.postLoad=function(){var t=this,r=t.em,o=t.model,l=t.pages,v=r.UndoManager;v.add(o),v.add(l),l.on("add remove reset change",function(w,x,E){return r.changesUp(E||x)})},i.prototype.add=function(t,r){var o=this;r===void 0&&(r={});var l=this,v=l.em,w=l.events;t.id=t.id||this._createId();var x=function(){var E=o.pages.add(new Bh(t,{em:o.em,config:o.config}),r);return r.select&&o.select(E),E};return!r.silent&&v.trigger(w.addBefore,t,x,r),r.abort?void 0:x()},i.prototype.remove=function(t,r){var o=this;r===void 0&&(r={});var l=this,v=l.em,w=l.events,x=(0,wt.isString)(t)?this.get(t):t,E=function(){return x&&o.pages.remove(x,r),x};return!r.silent&&v.trigger(w.removeBefore,x,E,r),!r.abort&&E()},i.prototype.get=function(t){return this.pages.filter(function(r){return r.get(r.idAttribute)===t})[0]},i.prototype.getMain=function(){var t=this.pages;return t.filter(function(r){return r.get("type")===rv})[0]||t.at(0)},i.prototype.getAllWrappers=function(){var t=this.getAll();return(0,wt.unique)((0,wt.flatten)(t.map(function(r){return r.getAllFrames().map(function(o){return o.getComponent()})})))},i.prototype.select=function(t,r){r===void 0&&(r={});var o=this,l=o.em,v=o.model,w=o.events,x=(0,wt.isString)(t)?this.get(t):t;return x&&(l.trigger(w.selectBefore,x,r),v.set("selected",x,r)),this},i.prototype.getSelected=function(){return this.model.get("selected")},i.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(r){return t[r]=0})},i.prototype.store=function(){return this.getProjectData()},i.prototype.load=function(t){var r=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),r},i.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},i.prototype._createId=function(){var t=this.getAll(),r=t.length+16,o=this.getAllMap(),l;do l=(0,pe.createId)(r);while(o[l]);return l},i}(R);const nv=Xm;var zh={placeholder:"eg. Text here"},Jm={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:zh,alt:zh,title:zh,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};const Qm=Jm;var $h;(function(p){p.add="i18n:add",p.update="i18n:update",p.locale="i18n:locale"})($h||($h={}));const ty=$h;var ey=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ry=function(p){ey(i,p);function i(t){var r=p.call(this,t,"I18n",Qm)||this;r.events=ty;var o=r.config.messagesAdd;return o&&r.addMessages(o),r.config.detectLocale&&(r.config.locale=r._localLang()),r}return i.prototype.setLocale=function(t){var r=this,o=r.em,l=r.config,v=r.events;return o.trigger(v.locale,{value:t,valuePrev:l.locale}),l.locale=t,this},i.prototype.getLocale=function(){return this.config.locale},i.prototype.getMessages=function(t,r){r===void 0&&(r={});var o=this.config.messages;return t&&!o[t]&&this._debug("'".concat(t,"' i18n lang not found"),r),t?o[t]:o},i.prototype.setMessages=function(t){var r=this,o=r.em,l=r.config,v=r.events;return l.messages=t,o.trigger(v.update,t),this},i.prototype.addMessages=function(t){var r=this,o=r.em,l=r.events,v=r.config,w=v.messages;return o.trigger(l.add,t),this.setMessages((0,pe.deepMerge)(w,t)),this},i.prototype.t=function(t,r){r===void 0&&(r={});var o=this.config,l=r.params||{},v=r.l||this.getLocale(),w=r.lFlb||o.localeFallback,x=this._getMsg(t,v,r);return x||(x=this._getMsg(t,w,r)),!x&&this._debug("'".concat(t,"' i18n key not found in '").concat(v,"' lang"),r),x=x&&(0,wt.isString)(x)?this._addParams(x,l):x,x},i.prototype._localLang=function(){var t=(0,pe.hasWin)()&&window.navigator||{},r=t.language||t.userLanguage;return r?r.split("-")[0]:"en"},i.prototype._addParams=function(t,r){var o=new RegExp("{([\\w\\d-]*)}","g");return t.replace(o,function(l,v){return r[v]||""}).trim()},i.prototype._getMsg=function(t,r,o){o===void 0&&(o={});var l=this.getMessages(r,o);if(l){var v=l[t];return!v&&t.indexOf(".")>0&&(v=t.split(".").reduce(function(w,x){if(!(0,wt.isUndefined)(w))return w[x]},l)),v}},i.prototype._debug=function(t,r){r===void 0&&(r={});var o=this,l=o.em,v=o.config;(r.debug||v.debug)&&l&&l.logWarning(t)},i.prototype.destroy=function(){},i}(H);const ny=ry;var Bu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iu=function(){return iu=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},iu.apply(this,arguments)},Hd=function(){},ov=Wt.q.Target,iv={id:"sorter-target",type:ov},oy=function(p){Bu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,wt.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var r=t||{};this.elT=0,this.elL=0,this.borderOffset=r.borderOffset||10;var o=r.container;this.el=typeof o=="string"?document.querySelector(o):o,this.$el=(0,ft.default)(this.el),this.containerSel=r.containerSel||"div",this.itemSel=r.itemSel||"div",this.draggable=r.draggable||!0,this.nested=!!r.nested,this.pfx=r.pfx||"",this.ppfx=r.ppfx||"",this.freezeClass=r.freezeClass||this.pfx+"freezed",this.onStart=r.onStart||Hd,this.onEndMove=r.onEndMove,this.customTarget=r.customTarget,this.onEnd=r.onEnd,this.direction=r.direction||"v",this.onMoveClb=r.onMove,this.relative=r.relative||!1,this.ignoreViewChildren=!!r.ignoreViewChildren,this.plh=r.placer,this.wmargin=r.wmargin||0,this.offTop=r.offsetTop||0,this.offLeft=r.offsetLeft||0,this.document=r.document||document,this.em=r.em,this.canvasRelative=!!r.canvasRelative,this.selectOnEnd=!r.avoidSelectOnEnd,this.scale=r.scale;var l=this.em;l!=null&&l.on&&(l.on(l.Canvas.events.refresh,this.updateOffset),this.updateOffset())},i.prototype.getScale=function(){return(0,wt.result)(this,"scale")||1},i.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var r=this.opt.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,ft.default)(this.el)}return this.el},i.prototype.getDocuments=function(t){var r=this.em,o=t?t.ownerDocument:r==null?void 0:r.Canvas.getBody().ownerDocument,l=[document];return o&&l.push(o),l},i.prototype.updateOffset=function(){var t,r=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=r.top,this.offLeft=r.left},i.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},i.prototype.updateTextViewCursorPosition=function(t){var r=this.em;if(r){var o=r.Canvas,l=o.getDocument(),v=null;if(l.caretRangeFromPoint){var w=(0,tr.VB)(t);v=l.caretRangeFromPoint(w.clientX,w.clientY)}else t.rangeParent&&(v=l.createRange(),v.setStart(t.rangeParent,t.rangeOffset));var x=o.getWindow().getSelection();o.getFrameEl().focus(),x==null||x.removeAllRanges(),v&&(x==null||x.addRange(v)),this.setContentEditable(this.activeTextModel,!0)}},i.prototype.setContentEditable=function(t,r){if(t){var o=t.getEl();o.contentEditable!=r&&(o.contentEditable=r)}},i.prototype.toggleSortCursor=function(t){var r=this.em,o=r==null?void 0:r.Canvas;o&&(t?o.startAutoscroll():o.stopAutoscroll())},i.prototype.setDragHelper=function(t,r){for(var o=r||"",l=t.cloneNode(!0),v=t.getBoundingClientRect(),w=getComputedStyle(t),x="",E=0;E<w.length;E++){var M=w[E];x+="".concat(M,":").concat(w.getPropertyValue(M),";")}if(document.body.appendChild(l),l.className+=" ".concat(this.pfx,"bdrag"),l.setAttribute("style",x),this.dragHelper=l,l.style.width="".concat(v.width,"px"),l.style.height="".concat(v.height,"px"),o&&this.moveDragHelper(o),this.em){var G=(0,ft.default)(this.em.Canvas.getBody().ownerDocument);G.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,ft.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},i.prototype.moveDragHelper=function(t){var r=t.target.ownerDocument;if(!(!this.dragHelper||!r)){var o=t.pageY,l=t.pageX,v=0,w=0,x=r.defaultView||r.parentWindow,E=x.frameElement,M=this.dragHelper.style;if(E){var G=E.getBoundingClientRect();v=G.top+document.documentElement.scrollTop,w=G.left+document.documentElement.scrollLeft,o=t.clientY,l=t.clientX}M.top=o+v+"px",M.left=l+w+"px"}},i.prototype.matches=function(t,r){return pe.matches.call(t,r)},i.prototype.closest=function(t,r){if(t)for(var o=t.parentNode;o&&o.nodeType===1;){if(this.matches(o,r))return o;o=o.parentNode}},i.prototype.offset=function(t){var r=t.getBoundingClientRect();return{top:r.top+document.body.scrollTop,left:r.left+document.body.scrollLeft}},i.prototype.createPlaceholder=function(){var t=this.pfx,r=document.createElement("div"),o=document.createElement("div");return r.className=t+"placeholder",r.style.display="none",r.style.pointerEvents="none",o.className=t+"placeholder-int",r.appendChild(o),r},i.prototype.startSort=function(t,r){var o,l;r===void 0&&(r={});var v=this,w=v.em,x=v.itemSel,E=v.containerSel,M=v.plh,G=this.getContainerEl(r.container),ot=this.getDocuments(t),Ct;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(x,", ").concat(E))&&(t=this.closest(t,x)),this.sourceEl=t,M||(this.plh=this.createPlaceholder(),G.appendChild(this.plh)),t&&(Ct=this.getSourceModel(t),Ct!=null&&Ct.set&&Ct.set("status","freezed"),this.srcModel=Ct),(0,tr.on)(G,"mousemove dragover",this.onMove),(0,tr.on)(ot,"mouseup dragend touchend",this.endMove),(0,tr.on)(ot,"keydown",this.rollback),this.onStart({sorter:this,target:Ct,parent:Ct&&((o=Ct.parent)===null||o===void 0?void 0:o.call(Ct)),index:Ct&&((l=Ct.index)===null||l===void 0?void 0:l.call(Ct))}),w==null||w.clearSelection(),this.toggleSortCursor(!0),w==null||w.trigger("sorter:drag:start",t,Ct)},i.prototype.getTargetModel=function(t){var r=t||this.target;return(0,ft.default)(r).data("model")},i.prototype.getSourceModel=function(t,r){var o=this,l=r===void 0?{}:r,v=l.target,w=l.avoidChildren,x=w===void 0?1:w,E=this,M=E.em,G=E.sourceEl,ot=t||G,Ct=this,Ut=Ct.dropModel,ie=Ct.dropContent,ae=function(Or){return Or&&v&&Or.opt&&Or.opt.avoidChildren&&o.isTextableActive(Or,v)};if(ie&&M){if(ae(Ut)&&(Ut=void 0),!Ut){var Ie=M.Components.getComponents(),qe={avoidChildren:x,avoidStore:1,avoidUpdateStyle:1},Ke=Ie.add(ie,iu(iu({},qe),{temporary:!0}));if(Ut=Ie.remove(Ke,qe),Ut=Ut instanceof Array?Ut[0]:Ut,this.dropModel=Ut,ae(Ut))return this.getSourceModel(ot,{target:v,avoidChildren:0})}return Ut}return ot&&(0,ft.default)(ot).data("model")},i.prototype.selectTargetModel=function(t,r){if(!(t instanceof q.FE)&&!(r&&r===t)){var o=this.targetModel;if(o&&o!==this.srcModel&&o.set("status",""),t!=null&&t.set){var l=this.em.Canvas,v=Wt.q.Select,w=Wt.q.Hover,x=Wt.q.Spacing;[v,w,x].forEach(function(E){return l.removeSpots({type:E})}),l.addSpot(iu(iu({},iv),{component:t})),t.set("status","selected-parent"),this.targetModel=t}}},i.prototype.onMove=function(t){var r=t,o=this,l=o.em,v=o.onMoveClb,w=o.plh,x=o.customTarget;this.moved=!0;var E=w.style.display;(!E||E==="none")&&(w.style.display="block");var M=this.offset(this.el);this.elT=this.wmargin?Math.abs(M.top):M.top,this.elL=this.wmargin?Math.abs(M.left):M.left;var G=t.pageY-this.elT+this.el.scrollTop,ot=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&l){var Ct=l.Canvas.getMouseRelativeCanvas(t,{noScroll:1});ot=Ct.x,G=Ct.y}this.rX=ot,this.rY=G,this.eventMove=t;var Ut=this.getSourceModel(),ie=x?x({sorter:this,event:t}):t.target,ae=this.dimsFromTarget(ie,ot,G),Ie=this.target,qe=Ie&&this.getTargetModel(Ie);if(this.selectTargetModel(qe,Ut),qe||(w.style.display="none"),!!Ie){this.lastDims=ae;var Ke=this.findPosition(ae,ot,G);this.isTextableActive(Ut,qe)?(this.activeTextModel=qe,w.style.display="none",this.lastPos=Ke,this.updateTextViewCursorPosition(r)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=Ke.index||this.lastPos.method!=Ke.method)&&(this.movePlaceholder(this.plh,ae,Ke,this.prevTargetDim),this.$plh||(this.$plh=(0,ft.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Ke)),(0,wt.isFunction)(v)&&v({event:t,target:Ut,parent:qe,index:Ke.index+(Ke.method=="after"?1:0)}),l&&l.trigger("sorter:drag",{target:Ie,targetModel:qe,sourceModel:Ut,dims:ae,pos:Ke,x:ot,y:G})}},i.prototype.isTextableActive=function(t,r){var o;return((o=t==null?void 0:t.get)===null||o===void 0?void 0:o.call(t,"textable"))&&(r==null?void 0:r.isInstanceOf("text"))},i.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},i.prototype.isInFlow=function(t,r){if(!t)return!1;r=r||document.body;var o=t;return o.offsetHeight,!!this.styleInFlow(o,r)},i.prototype.styleInFlow=function(t,r){if(!(0,tr.BM)(t)){var o=t.style||{},l=(0,ft.default)(t),v=r&&(0,ft.default)(r);if(!(o.overflow&&o.overflow!=="visible")){var w=l.css("float");if(!(w&&w!=="none")&&!(v&&v.css("display")=="flex"&&v.css("flex-direction")!=="column")){switch(o.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(l.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},i.prototype.validTarget=function(t,r){var o,l,v=this.lastPos,w=this.getTargetModel(t),x=this.getSourceModel(r,{target:w});r=(o=x==null?void 0:x.view)===null||o===void 0?void 0:o.el,t=(l=w==null?void 0:w.view)===null||l===void 0?void 0:l.el;var E={valid:!0,src:r,srcModel:x,trg:t,trgModel:w,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!r||!t)return E.valid=!1,E;var M=v?v.method==="after"?v.indexEl+1:v.indexEl:w.components().length,G=x.get("draggable");if((0,wt.isFunction)(G)){var ot=G(x,w,M);E.dragInfo=ot,E.draggable=ot,G=ot}else G=G instanceof Array?G.join(", "):G,E.dragInfo=G,G=(0,wt.isString)(G)?this.matches(t,G):G,E.draggable=G;var Ct=w.get("droppable");if((0,wt.isFunction)(Ct)){var ot=Ct(x,w,M);E.droppable=ot,E.dropInfo=ot,Ct=ot}else Ct=Ct instanceof q.FE?1:Ct,Ct=Ct instanceof Array?Ct.join(", "):Ct,E.dropInfo=Ct,Ct=(0,wt.isString)(Ct)?this.matches(r,Ct):Ct,Ct=G&&this.isTextableActive(x,w)?1:Ct,E.droppable=Ct;return(!Ct||!G)&&(E.valid=!1),E},i.prototype.dimsFromTarget=function(t,r,o){r===void 0&&(r=0),o===void 0&&(o=0);var l=this.em,v=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return v;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var w=this.validTarget(t);if(l&&l.trigger("sorter:drag:validation",w),!w.valid&&this.targetP)return this.dimsFromTarget(this.targetP,r,o);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(v=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,r,o)||!this.nested&&!this.cacheDims.length){var x=this.targetP;x&&this.validTarget(x).valid&&(v=this.cacheDimsP,this.target=x)}return delete this.lastPos,v},i.prototype.getTargetFromEl=function(t){var r=t,o,l=this.targetPrev,v=this.em,w=this.containerSel,x=this.itemSel;if(this.matches(r,"".concat(x,", ").concat(w))||(r=this.closest(r,x)),this.draggable instanceof Array&&(r=this.closest(r,this.draggable.join(","))),l&&l!=r&&delete this.targetPrev,!this.targetPrev){o=this.closest(r,w);var E=this.validTarget(r);if(v&&v.trigger("sorter:drag:validation",E),!E.valid&&o)return this.getTargetFromEl(o);this.targetPrev=r}return this.nearElBorders(r)&&(o=this.closest(r,w),o&&this.validTarget(o).valid&&(r=o)),r},i.prototype.nearElBorders=function(t){var r=10,o=t.getBoundingClientRect(),l=t.ownerDocument.body,v=this.getCurrentPos(),w=v.x,x=v.y,E=o.top+l.scrollTop,M=o.left+l.scrollLeft,G=o.width,ot=o.height;if(x<E+r||x>E+ot-r||w<M+r||w>M+G-r)return 1},i.prototype.getCurrentPos=function(){var t=this.eventMove,r=(t==null?void 0:t.pageX)||0,o=(t==null?void 0:t.pageY)||0;return{x:r,y:o}},i.prototype.getDim=function(t){var r=this,o=r.em,l=r.canvasRelative,v=o==null?void 0:o.Canvas,w=v?v.getElementOffsets(t):{},x,E,M,G;if(l&&o){var ot=v.getElementPos(t,{noScroll:1});x=ot.top,E=ot.left,M=ot.height,G=ot.width}else{var Ct=this.offset(t);x=this.relative?t.offsetTop:Ct.top-(this.wmargin?-1:1)*this.elT,E=this.relative?t.offsetLeft:Ct.left-(this.wmargin?-1:1)*this.elL,M=t.offsetHeight,G=t.offsetWidth}return{top:x,left:E,height:M,width:G,offsets:w}},i.prototype.getChildrenDim=function(t){var r=this,o=[];if(!t)return o;var l=this.getTargetModel(t);if(l&&l.view&&!this.ignoreViewChildren){var v=l.getCurrentView?l.getCurrentView():l.view;t=v.getChildrenContainer()}return(0,wt.each)(t.children,function(w,x){var E=w,M=(0,pe.getModel)(E,ft.default),G=M&&M.index?M.index():x;if(!(!(0,tr.BM)(E)&&!r.matches(E,r.itemSel))){var ot=r.getDim(E),Ct=r.direction,Ut;Ct=="v"?Ut=!0:Ct=="h"?Ut=!1:Ut=r.isInFlow(E,t),ot.dir=Ut,ot.el=E,ot.indexEl=G,o.push(ot)}}),o},i.prototype.nearBorders=function(t,r,o){var l=!1,v=this.borderOffset,w=r||0,x=o||0,E=t.top,M=t.left,G=t.height,ot=t.width;return(E+v>x||x>E+G-v||M+v>w||w>M+ot-v)&&(l=!0),l},i.prototype.findPosition=function(t,r,o){for(var l={index:0,indexEl:0,method:"before"},v=0,w=0,x=0,E=0,M=0,G=0,ot=0,Ct,Ut=0,ie=t.length;Ut<ie;Ut++){Ct=t[Ut];var ae=Ct.top,Ie=Ct.left,qe=Ct.height,Ke=Ct.width;if(x=Ie+Ke,ot=ae+qe,M=Ie+Ke/2,G=ae+qe/2,!(w&&Ie>w||E&&G>=E||v&&x<v))if(l.index=Ut,l.indexEl=Ct.indexEl,!Ct.dir)o<ot&&(E=ot),r<M?(w=M,l.method="before"):(v=M,l.method="after");else if(o<G){l.method="before";break}else l.method="after"}return l},i.prototype.movePlaceholder=function(t,r,o,l){var v=0,w=0,x=0,E="",M="",G="px",ot=5,Ct=o.method,Ut=r[o.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),Ut){var ie=Ut.top,ae=Ut.left,Ie=Ut.height,qe=Ut.width;Ut.dir?(E=qe+G,M="auto",w=Ct=="before"?ie-v:ie+Ie-v,x=ae):(E="auto",M=Ie-v*2+G,w=ie+v,x=Ct=="before"?ae-v:ae+qe-v,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested){t.style.display="none";return}if(l){var Ke=l.offsets||{},Or=Ke.paddingTop||ot,Gr=Ke.paddingLeft||ot,bn=Ke.borderTopWidth||0,Tn=Ke.borderLeftWidth||0,Vr=Ke.borderRightWidth||0,Cn=Tn+Vr;w=l.top+Or+bn,x=l.left+Gr+Tn,E=parseInt("".concat(l.width))-Gr*2-Cn+G,M="auto"}}t.style.top=w+G,t.style.left=x+G,E&&(t.style.width=E),M&&(t.style.height=M)},i.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},i.prototype.sort=function(t,r){var o=t.parents.filter(function(x){return r.parents.includes(x)}),l=o[0];if(!l)return r.model.index()-t.model.index();var v=t.parents[t.parents.indexOf(l)-1],w=r.parents[r.parents.indexOf(l)-1];return w.index()-v.index()},i.prototype.endMove=function(){var t=this,r,o=this.sourceEl,l=[],v=this.getDocuments(),w=this.getContainerEl(),x=this.onEndMove,E=this.onEnd,M=this,G=M.target,ot=M.lastPos,Ct;if((0,tr.S1)(w,"mousemove dragover",this.onMove),(0,tr.S1)(v,"mouseup dragend touchend",this.endMove),(0,tr.S1)(v,"keydown",this.rollback),this.plh.style.display="none",o&&(Ct=this.getSourceModel()),this.moved&&G){var Ut=this.toMove,ie=(0,wt.isArray)(Ut)?Ut:Ut?[Ut]:[o],ae=0;ie.length===1?l.push(this.move(G,ie[0],ot)):ie.map(function(Ke){return{model:Ke,parents:t.parents(Ke)}}).sort(this.sort).forEach(function(Ke){var Or=Ke.model,Gr=Or.index(),bn=Or.parent().getEl();l.push(t.move(G,Or,iu(iu({},ot),{indexEl:ot.indexEl-ae,index:ot.index-ae}))),bn===G&&Gr<=ot.index&&ae++})}this.plh&&(this.plh.style.display="none");var Ie=this.dragHelper;if(Ie&&(Ie.parentNode.removeChild(Ie),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(r=this.em)===null||r===void 0||r.Canvas.removeSpots(iv),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,wt.isFunction)(x)){var qe={target:Ct,parent:Ct&&Ct.parent(),index:Ct&&Ct.index()};l.length?l.forEach(function(Ke){return x(Ke,t,qe)}):x(null,this,iu(iu({},qe),{cancelled:1}))}(0,wt.isFunction)(E)&&E({sorter:this})},i.prototype.move=function(t,r,o){var l=this,v=l.em,w=l.dropContent,x=(0,pe.getElement)(r),E=[],M=o.method==="after"?o.indexEl+1:o.indexEl,G=this.validTarget(t,x),ot=(0,ft.default)(t).data("collection"),Ct=G.trgModel,Ut=G.srcModel,ie=G.draggable,ae=Ct instanceof q.FE?1:G.droppable,Ie,qe;if(ot&&ae&&ie){var Ke={at:M,action:"move-component"},Or=this.isTextableActive(Ut,Ct);if(w)Ie=(0,wt.isFunction)(w)?w():w,Ke.avoidUpdateStyle=!0,Ke.action="add-component";else{var Gr=Ut.collection.indexOf(Ut),bn=ot===Ut.collection,Tn=Gr===M||Gr===M-1,Vr=!bn||!Tn||Or;Vr&&(Ie=Ut.collection.remove(Ut,{temporary:!0}),bn&&M>Gr&&(Ke.at=M-1))}Ie&&(Or?(delete Ke.at,qe=Ct.getView().insertComponent(Ie,Ke)):qe=ot.add(Ie,Ke)),delete this.dropContent,delete this.prevTarget}else if(v){var Cn=G.dropInfo||(Ct==null?void 0:Ct.get("droppable")),Hn=G.dragInfo||(Ut==null?void 0:Ut.get("draggable"));!ot&&E.push("Target collection not found"),!ae&&Cn&&E.push("Target is not droppable, accepts [".concat(Cn,"]")),!ie&&Hn&&E.push("Component not draggable, acceptable by [".concat(Hn,"]")),v.logWarning("Invalid target position",{errors:E,model:Ut,context:"sorter",target:Ct})}return v==null||v.trigger("sorter:drag:end",{targetCollection:ot,modelToDrop:Ie,warns:E,validResult:G,dst:t,srcEl:x}),qe},i.prototype.rollback=function(t){(0,tr.S1)(this.getDocuments(),"keydown",this.rollback);var r=t.which||t.keyCode;r==27&&(this.moved=!1,this.endMove())},i}(q.G7);const iy=oy;var au=function(){return au=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},au.apply(this,arguments)},Dp=function(p,i){i===void 0&&(i={});var t=i.prefix||"",r=document.createElement("i");return r.className=t+"resizer-h "+t+"resizer-h-"+p,r.setAttribute("data-"+t+"handler",p),r},Gh=function(p,i){var t=window,r=p.getBoundingClientRect();return{left:r.left+t.pageXOffset,top:r.top+t.pageYOffset,width:r.width,height:r.height}},av=function(){function p(i){i===void 0&&(i={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=au({},this.defOpts),this.setOptions(i),(0,wt.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return p.prototype.getConfig=function(){return this.opts},p.prototype.setOptions=function(i,t){i===void 0&&(i={}),this.opts=au(au({},t?this.defOpts:this.opts),i),this.setup()},p.prototype.setup=function(){var i=this.opts,t=i.prefix||"",r=i.appendTo||document.body,o=this.container;for(o||(o=document.createElement("div"),o.className="".concat(t,"resizer-c"),r.appendChild(o),this.container=o);o.firstChild;)o.removeChild(o.firstChild);var l={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(x){return l[x]=i[x]?Dp(x,i):null});for(var v in l){var w=l[v];w&&o.appendChild(w)}this.handlers=l,this.mousePosFetcher=i.mousePosFetcher,this.updateTarget=i.updateTarget,this.posFetcher=i.posFetcher,this.onStart=i.onStart,this.onMove=i.onMove,this.onEnd=i.onEnd,this.onUpdateContainer=i.onUpdateContainer},p.prototype.toggleFrames=function(i){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,wt.each)(t,function(r){return r.style.pointerEvents=i?"none":""})}},p.prototype.isHandler=function(i){var t=this.handlers;for(var r in t)if(t[r]===i)return!0;return!1},p.prototype.getFocusedEl=function(){return this.el},p.prototype.getParentEl=function(){var i;return(i=this.el)===null||i===void 0?void 0:i.parentElement},p.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},p.prototype.getElementPos=function(i,t){t===void 0&&(t={});var r=this.posFetcher;return r?r(i,t):Gh(i)},p.prototype.focus=function(i){i&&i===this.el||(this.el=i,this.updateContainer({forceShow:!0}),(0,tr.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},p.prototype.blur=function(){this.container.style.display="none",this.el&&((0,tr.S1)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},p.prototype.start=function(i){var t=i;if(t.button===0){t.preventDefault(),t.stopPropagation();var r=this.el,o=this.getParentEl(),l=this,v=this.opts||{},w=this.mousePosFetcher,x="data-"+v.prefix+"handler",E=this.getElementPos(r,{avoidFrameZoom:!0,avoidFrameOffset:!0}),M=this.getElementPos(o),G=t.target;this.handlerAttr=G.getAttribute(x),this.clickedHandler=G,this.startDim={t:E.top,l:E.left,w:E.width,h:E.height},this.rectDim={t:E.top,l:E.left,w:E.width,h:E.height},this.startPos=w?w(t):{x:t.clientX,y:t.clientY},this.parentDim={t:M.top,l:M.left,w:M.width,h:M.height};var ot=this.getDocumentEl();this.docs=ot,(0,tr.on)(ot,"pointermove",this.move),(0,tr.on)(ot,"keydown",this.handleKeyDown),(0,tr.on)(ot,"pointerup",this.stop),(0,wt.isFunction)(this.onStart)&&this.onStart(t,{docs:ot,config:v,el:r,resizer:l}),this.toggleFrames(!0),this.move(t)}},p.prototype.move=function(i){var t=i,r=this.onMove,o=this.mousePosFetcher,l=o?o(t):{x:t.clientX,y:t.clientY};this.currentPos=l,this.delta={x:l.x-this.startPos.x,y:l.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),r&&r(t)},p.prototype.stop=function(i){var t=this.el,r=this.opts,o=this.docs||this.getDocumentEl();(0,tr.S1)(o,"pointermove",this.move),(0,tr.S1)(o,"keydown",this.handleKeyDown),(0,tr.S1)(o,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,wt.isFunction)(this.onEnd)&&this.onEnd(i,{docs:o,config:r,el:t,resizer:this}),delete this.docs},p.prototype.updateRect=function(i){var t=this.el,r=this,o=this.opts,l=this.rectDim,v=this.updateTarget,w=this.getSelectedHandler(),x=o.unitHeight,E=o.unitWidth,M=o.keyWidth,G=o.keyHeight;if((0,wt.isFunction)(v))v(t,l,{store:i,selectedHandler:w,resizer:r,config:o});else{var ot=t.style;ot[M]=l.w+E,ot[G]=l.h+x}this.updateContainer()},p.prototype.updateContainer=function(i){var t;i===void 0&&(i={});var r=this,o=r.opts,l=r.container,v=r.el,w=l.style;!o.avoidContainerUpdate&&v&&i.forceShow&&(w.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:l,resizer:this,opts:au(au({},o),i)})},p.prototype.getSelectedHandler=function(){var i=this.handlers;if(this.selectedHandler){for(var t in i)if(i[t]===this.selectedHandler)return t}},p.prototype.handleKeyDown=function(i){i.keyCode===27&&(this.rectDim=this.startDim,this.stop(i))},p.prototype.handleMouseDown=function(i){var t=i.target;this.isHandler(t)?(this.selectedHandler=t,this.start(i)):t!==this.el&&(delete this.selectedHandler,this.blur())},p.prototype.calc=function(i){var t,r=this.opts||{},o=r.step,l=this.startDim,v=r.minDim,w=r.maxDim,x=i.delta.x,E=i.delta.y,M=this.parentDim.w,G=this.parentDim.h,ot=this.opts.unitWidth,Ct=this.opts.unitHeight,Ut=ot==="%"?l.w/100*M:l.w,ie=Ct==="%"?l.h/100*G:l.h,ae={t:l.t,l:l.l,w:Ut,h:ie};if(i){var Ie=i.handlerAttr;~Ie.indexOf("r")&&(t=ot==="%"?(0,pe.normalizeFloat)((Ut+x*o)/M*100,.01):(0,pe.normalizeFloat)(Ut+x*o,o),t=Math.max(v,t),w&&(t=Math.min(w,t)),ae.w=t),~Ie.indexOf("b")&&(t=Ct==="%"?(0,pe.normalizeFloat)((ie+E*o)/G*100,.01):(0,pe.normalizeFloat)(ie+E*o,o),t=Math.max(v,t),w&&(t=Math.min(w,t)),ae.h=t),~Ie.indexOf("l")&&(t=ot==="%"?(0,pe.normalizeFloat)((Ut-x*o)/M*100,.01):(0,pe.normalizeFloat)(Ut-x*o,o),t=Math.max(v,t),w&&(t=Math.min(w,t)),ae.w=t),~Ie.indexOf("t")&&(t=Ct==="%"?(0,pe.normalizeFloat)((ie-E*o)/G*100,.01):(0,pe.normalizeFloat)(ie-E*o,o),t=Math.max(v,t),w&&(t=Math.min(w,t)),ae.h=t);var qe=r.ratioDefault?!i.keys.shift:i.keys.shift;if(Ie.indexOf("c")<0&&qe){var Ke=l.w/l.h;ae.w/ae.h>Ke?ae.h=Math.round(ae.w/Ke):ae.w=Math.round(ae.h*Ke)}~Ie.indexOf("l")&&(ae.l+=l.w-ae.w),~Ie.indexOf("t")&&(ae.t+=l.h-ae.h);for(var Or in ae){var Gr=Or;ae[Gr]=parseInt("".concat(ae[Gr]),10)}return ae}},p}();const qh=av;var sv=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ip=function(){return Ip=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ip.apply(this,arguments)},Bd=function(p){sv(i,p);function i(t){var r=p.call(this,t,"Utils")||this;return r.Sorter=iy,r.Resizer=qh,r.Dragger=Il.Z,r.helpers=Ip({},pe),r}return i.prototype.destroy=function(){},i}(H);const ad=Bd;var Al,Jl={},Zs={16:!1,18:!1,17:!1,91:!1},Kh="all",bf={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},lv={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},sd=function(p){return lv[p]||p.toUpperCase().charCodeAt(0)},Np=[];for(Al=1;Al<20;Al++)lv["f"+Al]=111+Al;function ld(p,i){for(var t=p.length;t--;)if(p[t]===i)return t;return-1}function ay(p,i){if(p.length!=i.length)return!1;for(var t=0;t<p.length;t++)if(p[t]!==i[t])return!1;return!0}var Yh={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function sy(p){for(Al in Zs)Zs[Al]=p[Yh[Al]]}function ly(p){var i,t,r,o,l,v;if(i=p.keyCode,ld(Np,i)==-1&&Np.push(i),(i==93||i==224)&&(i=91),i in Zs){Zs[i]=!0;for(r in bf)bf[r]==i&&(js[r]=!0);return}if(sy(p),!!js.filter.call(this,p)&&i in Jl){for(v=Zh(),o=0;o<Jl[i].length;o++)if(t=Jl[i][o],t.scope==v||t.scope=="all"){l=t.mods.length>0;for(r in Zs)(!Zs[r]&&ld(t.mods,+r)>-1||Zs[r]&&ld(t.mods,+r)==-1)&&(l=!1);(t.mods.length==0&&!Zs[16]&&!Zs[18]&&!Zs[17]&&!Zs[91]||l)&&t.method(p,t)===!1&&(p.preventDefault?p.preventDefault():p.returnValue=!1,p.stopPropagation&&p.stopPropagation(),p.cancelBubble&&(p.cancelBubble=!0))}}}function Ud(p){var i=p.keyCode,t,r=ld(Np,i);if(r>=0&&Np.splice(r,1),(i==93||i==224)&&(i=91),i in Zs){Zs[i]=!1;for(t in bf)bf[t]==i&&(js[t]=!1)}}function cv(){for(Al in Zs)Zs[Al]=!1;for(Al in bf)js[Al]=!1}function js(p,i,t){var r,o;r=zd(p),t===void 0&&(t=i,i="all");for(var l=0;l<r.length;l++)o=[],p=r[l].split("+"),p.length>1&&(o=Pi(p),p=[p[p.length-1]]),p=p[0],p=sd(p),p in Jl||(Jl[p]=[]),Jl[p].push({shortcut:r[l],scope:i,method:t,key:r[l],mods:o})}function cy(p,i){var t,r,o=[],l,v,w;for(t=zd(p),v=0;v<t.length;v++){if(r=t[v].split("+"),r.length>1&&(o=Pi(r)),p=r[r.length-1],p=sd(p),i===void 0&&(i=Zh()),!Jl[p])return;for(l=0;l<Jl[p].length;l++)w=Jl[p][l],w.scope===i&&ay(w.mods,o)&&(Jl[p][l]={})}}function uy(p){return typeof p=="string"&&(p=sd(p)),ld(Np,p)!=-1}function fy(){return Np.slice(0)}function py(p){var i=(p.target||p.srcElement).tagName;return!(i=="INPUT"||i=="SELECT"||i=="TEXTAREA")}for(Al in bf)js[Al]=!1;function Xs(p){Kh=p||"all"}function Zh(){return Kh||"all"}function uv(p){var i,t,r;for(i in Jl)for(t=Jl[i],r=0;r<t.length;)t[r].scope===p?t.splice(r,1):r++}function zd(p){var i;return p=p.replace(/\s/g,""),i=p.split(","),i[i.length-1]==""&&(i[i.length-2]+=","),i}function Pi(p){for(var i=p.slice(0,p.length-1),t=0;t<i.length;t++)i[t]=bf[i[t]];return i}function Xh(p,i,t){p.addEventListener?p.addEventListener(i,t,!1):p.attachEvent&&p.attachEvent("on"+i,function(){t(window.event)})}js.setScope=Xs,js.getScope=Zh,js.deleteScope=uv,js.filter=py,js.isPressed=uy,js.getPressedKeyCodes=fy,js.unbind=cy,js.handlers=Jl,js.init=function(p){Xh(p.document,"keydown",function(i){ly(i)}),Xh(p.document,"keyup",Ud),Xh(p,"focus",cv)};const su=js;var fv={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const pv=fv;var dy=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ip=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))};(0,pe.hasWin)()&&su.init(window);var hy=function(p){dy(i,p);function i(t){var r=p.call(this,t,"Keymaps",pv)||this;return r.keymaster=su,r.keymaps={},r}return i.prototype.onLoad=function(){var t=this.config.defaults;for(var r in t){var o=t[r];this.add(r,o.keys,o.handler,o.opts||{})}},i.prototype.add=function(t,r,o,l){l===void 0&&(l={});var v=this.em,w=v.Commands,x=v.getEditor(),E=v.Canvas,M={id:t,keys:r,handler:o},G=this.keymaps[t];return G&&this.remove(t),this.keymaps[t]=M,su(r,function(ot,Ct){var Ut={event:ot,h:Ct},ie=(0,wt.isString)(o)?w.get(o):o,ae=!v.isEditing()&&!x.Canvas.isInputFocused();if(ae||l.force){l.prevent&&E.getCanvasView().preventDefault(ot),(0,wt.isFunction)(ie)?ie(x,0,Ut):w.runCommand(ie,Ut);var Ie=[t,Ct.shortcut,ot];v.trigger.apply(v,ip(["keymap:emit"],Ie,!1)),v.trigger.apply(v,ip(["keymap:emit:".concat(t)],Ie,!1))}},void 0),v.trigger("keymap:add",M),M},i.prototype.get=function(t){return this.keymaps[t]},i.prototype.getAll=function(){return this.keymaps},i.prototype.remove=function(t){var r=this.em,o=this.get(t);if(o)return delete this.keymaps[t],o.keys.split(", ").forEach(function(l){su.unbind(l.trim())}),r==null||r.trigger("keymap:remove",o),o},i.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(r){return t.remove(r)}),su.handlers={},this},i.prototype.destroy=function(){this.removeAll(),this.keymaps={}},i}(H);const Wd=hy;var gy={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const vy=gy;var my=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dv=function(p){my(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},i.prototype.open=function(){this.set("open",!0)},i.prototype.close=function(){this.set("open",!1)},i}($.Z);const yy=dv;var by=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ql=function(){return Ql=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ql.apply(this,arguments)},wy=function(p){by(i,p);function i(t){var r=p.call(this,t)||this,o=r.model;return r.listenTo(o,"change:open",r.updateOpen),r.listenTo(o,"change:title",r.updateTitle),r.listenTo(o,"change:content",r.updateContent),r}return i.prototype.template=function(t){var r=t.pfx,o=t.ppfx,l=t.content,v=t.title;return'<div class="'.concat(r,"dialog ").concat(o,"one-bg ").concat(o,`two-color">
      <div class="`).concat(r,`header">
        <div class="`).concat(r,'title">').concat(v,`</div>
        <div class="`).concat(r,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(r,`content">
        <div id="`).concat(r,'c">').concat(l,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(r,'collector" style="display: none"></div>')},i.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},i.prototype.onClick=function(t){var r=this.config.backdrop;r&&t.target===this.el&&this.hide()},i.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},i.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},i.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},i.prototype.updateContent=function(){var t=this.getContent(),r=t.children(),o=this.getCollector(),l=this.model.get("content");r.length&&o.append(r),t.empty().append(l)},i.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},i.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},i.prototype.hide=function(){this.model.close()},i.prototype.show=function(){this.model.open()},i.prototype.updateAttr=function(t){var r=this,o=r.pfx,l=r.$el,v=r.el,w=[].slice.call(v.attributes).map(function(x){return x.name});l.removeAttr(w.join(" ")),l.attr(Ql(Ql({},t||{}),{class:"".concat(o,"container ").concat(t&&t.class||"").trim()}))},i.prototype.render=function(){var t=this.$el,r=this.model.toJSON();return r.pfx=this.pfx,r.ppfx=this.ppfx,t.html(this.template(r)),this.updateAttr(),this.updateOpen(),this},i}(wr);const _y=wy;var xy=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cy=function(p){xy(i,p);function i(t){var r=p.call(this,t,"Modal",vy)||this;return r.model=new yy(r),r.model.on("change:open",function(o,l){t.trigger("modal:".concat(l?"open":"close"))}),r.model.on("change",(0,wt.debounce)(function(){var o=r._evData(),l=r.config.custom;(0,wt.isFunction)(l)&&l(o),t.trigger("modal",o)},0)),r}return i.prototype._evData=function(){var t=this,r=this.getTitle(),o=this.getContent(),l=this.model.attributes,v=l.open,w=l.attributes;return{open:v,attributes:w,title:(0,wt.isString)(r)?(0,tr.rw)(r):r,content:(0,wt.isString)(o)?(0,tr.rw)(o):o.get?o.get(0):o,close:function(){t.close()}}},i.prototype.postRender=function(t){var r=t.model.config.el||t.el,o=this.render();o&&(r==null||r.appendChild(o))},i.prototype.open=function(t){t===void 0&&(t={});var r=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",r),this.model.open(),this.modal&&this.modal.updateAttr(r),this},i.prototype.close=function(){return this.model.close(),this},i.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},i.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},i.prototype.isOpen=function(){return!!this.model.get("open")},i.prototype.setTitle=function(t){return this.model.set("title",t),this},i.prototype.getTitle=function(){return this.model.get("title")},i.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},i.prototype.getContent=function(){return this.model.get("content")},i.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},i.prototype.getModel=function(){return this.model},i.prototype.render=function(){var t;if(!this.config.custom){var r=_y.extend(this.config.extend),o=this.modal&&this.modal.el;return this.modal=new r({el:o,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},i.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},i}(H);const Sy=Cy;var hv="sw-visibility",cd="export-template",gv="open-sm",vv="open-tm",$d="open-layers",mv="open-blocks",Wc="fullscreen",Jh="preview",Oy={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:hv,className:"fa fa-square-o",command:"core:component-outline",context:hv,attributes:{title:"View components"}},{id:Jh,className:"fa fa-eye",command:Jh,context:Jh,attributes:{title:"Preview"}},{id:Wc,className:"fa fa-arrows-alt",command:Wc,context:Wc,attributes:{title:"Fullscreen"}},{id:cd,className:"fa fa-code",command:cd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:gv,className:"fa fa-paint-brush",command:gv,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:vv,className:"fa fa-cog",command:vv,togglable:!1,attributes:{title:"Settings"}},{id:$d,className:"fa fa-bars",command:$d,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:mv,className:"fa fa-th-large",command:mv,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const ud=Oy;var Ty=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gd=function(p){Ty(i,p);function i(t,r){var o=p.call(this,t,r)||this;return o.get("buttons").length&&o.set("buttons",new bv(o.module,o.get("buttons"))),o}return i.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(i.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),i}($.Z);const Vp=Gd;var Ey=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yv=function(p){Ey(i,p);function i(t,r){return p.call(this,t,r,Vp)||this}return i.prototype.deactivateAllExceptOne=function(t,r){this.forEach(function(o,l){o!==t&&(o.set("active",!1),r&&o.get("buttons").length&&o.get("buttons").deactivateAllExceptOne(t,r))})},i.prototype.deactivateAll=function(t,r){var o=t||"";this.forEach(function(l){l.get("context")==o&&l!==r&&l.set("active",!1,{fromCollection:!0})})},i.prototype.disableAllButtons=function(t){var r=t||"";this.forEach(function(o,l){o.get("context")==r&&o.set("disable",!0)})},i.prototype.disableAllButtonsExceptOne=function(t,r){this.forEach(function(o,l){o!==t&&(o.set("disable",!0),r&&o.get("buttons").length&&o.get("buttons").disableAllButtonsExceptOne(t,r))})},i}(Xe);const bv=yv;yv.prototype.model=Vp;var Py=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ky=function(p){Py(i,p);function i(t,r){var o=p.call(this,t,r)||this,l=o.get("buttons")||[];return o.buttons=new bv(t,l),o}return i.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(i.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),i}($.Z);const wv=ky;var Ay=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ap=function(p){Ay(i,p);function i(t,r){return p.call(this,t,r,wv)||this}return i}(Xe);const My=ap;ap.prototype.model=wv;var Ly=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fp=function(){return Fp=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Fp.apply(this,arguments)},qd=function(p){Ly(i,p);function i(t){var r=p.call(this,t)||this,o=r,l=o.model,v=o.em,w=o.pfx,x=o.ppfx,E=l.className,M=l.attributes,G=M.command,ot=M.listen;if(r.id=w+l.get("id"),r.activeCls="".concat(w,"active ").concat(x,"four-color"),r.disableCls="".concat(x,"disabled"),r.btnsVisCls="".concat(w,"visible"),r.className=w+"btn"+(E?" "+E:""),r.listenTo(l,"change",r.render),r.listenTo(l,"change:active updateActive",r.updateActive),r.listenTo(l,"checkActive",r.checkActive),r.listenTo(l,"change:bntsVis",r.updateBtnsVis),r.listenTo(l,"change:attributes",r.updateAttributes),r.listenTo(l,"change:className",r.updateClassName),r.listenTo(l,"change:disable",r.updateDisable),v&&(0,wt.isString)(G)&&ot){var Ct={fromListen:!0};r.listenTo(v,"run:".concat(G),function(){return l.set("active",!0,Ct)}),r.listenTo(v,"stop:".concat(G),function(){return l.set("active",!1,Ct)})}return v&&v.get&&(r.commands=v.get("Commands")),r}return i.prototype.tagName=function(){return this.model.get("tagName")},i.prototype.events=function(){return{click:"clicked"}},i.prototype.updateClassName=function(){var t=this,r=t.model,o=t.pfx,l=r.className,v=r.get("attributes").class,w="".concat(v||""," ").concat(o,"btn ").concat(l||"");this.$el.attr("class",w.trim())},i.prototype.updateAttributes=function(){var t=this,r=t.em,o=t.model,l=t.$el,v=o.get("attributes")||{},w=r&&r.t&&r.t("panels.buttons.titles.".concat(o.id));l.attr(v),w&&l.attr({title:w}),this.updateClassName()},i.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},i.prototype.updateActive=function(t,r,o){var l;o===void 0&&(o={});var v=this,w=v.model,x=v.commands,E=v.$el,M=v.activeCls,G=o.fromCollection,ot=o.fromListen,Ct=w.get("context"),Ut=w.get("options"),ie=w.command,ae={};ie&&(x&&(0,wt.isString)(ie)?ae=x.get(ie)||{}:(0,wt.isFunction)(ie)?ae=x.create({run:ie}):ie!==null&&(0,wt.isObject)(ie)&&(ae=x.create(ie)),w.active?(!G&&((l=w.collection)===null||l===void 0||l.deactivateAll(Ct,w)),w.set("active",!0,{silent:!0}).trigger("checkActive"),!ot&&x.runCommand(ae,Fp(Fp({},Ut),{sender:w})),ae.noStop&&w.set("active",!1)):(E.removeClass(M),!ot&&x.stopCommand(ae,Fp(Fp({},Ut),{sender:w,force:1}))))},i.prototype.updateDisable=function(){var t=this,r=t.disableCls,o=t.model,l=o.disable;this.$el[l?"addClass":"removeClass"](r)},i.prototype.checkActive=function(){var t=this,r=t.model,o=t.$el,l=t.activeCls;r.active?o.addClass(l):o.removeClass(l)},i.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},i.prototype.toggleActive=function(){var t=this,r=t.model,o=t.em,l=r.active,v=r.togglable;l&&!v||(r.active=!l,l?r.runDefaultCommand&&o.runDefault():r.stopDefaultCommand&&o.stopDefault())},i.prototype.render=function(){var t=this.model,r=t.get("label"),o=this.$el;return!t.get("el")&&o.empty(),this.updateAttributes(),r&&o.append(r),this.checkActive(),this.updateDisable(),this},i}(wr);const jy=qd;var Dy=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uu=function(p){Dy(i,p);function i(t){var r=p.call(this,{collection:t})||this;return r.listenTo(r.collection,"add",r.addTo),r.listenTo(r.collection,"reset remove",r.render),r.className=r.pfx+"buttons",r}return i.prototype.addTo=function(t){this.addToCollection(t)},i.prototype.addToCollection=function(t,r){var o=r||null,l=t.get("el"),v=new jy({el:l,model:t}),w=v.render().el;return o?o.appendChild(w):this.$el.append(w),w},i.prototype.render=function(){var t=this,r=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(o){return t.addToCollection(o,r)}),this.$el.append(r),this.$el.attr("class",(0,wt.result)(this,"className")),this},i}(wr);const Iy=Uu;var Ny=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qh=function(){return Qh=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Qh.apply(this,arguments)},Kd=function(p){Ny(i,p);function i(t){var r=p.call(this,{model:t,el:t.get("el")})||this;return r.className=r.pfx+"panel",r.id=r.pfx+t.get("id"),r.listenTo(t,"change:appendContent",r.appendContent),r.listenTo(t,"change:content",r.updateContent),r.listenTo(t,"change:visible",r.toggleVisible),t.view=r,r}return i.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},i.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},i.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},i.prototype.attributes=function(){return this.model.get("attributes")},i.prototype.initResize=function(){var t=this.em,r=t==null?void 0:t.Editor,o=this.model.get("resizable");if(r&&o){var l=o===!0?[!0,!0,!0,!0]:o,v=l.length,w=void 0,x=void 0,E=void 0,M=!1;if(v==2){var G=l;w=G[0],E=G[0],x=G[1],M=G[1]}else if(v==4){var G=l;w=G[0],x=G[1],E=G[2],M=G[3]}var ot=new r.Utils.Resizer(Qh({tc:w,cr:x,bc:E,cl:M,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:r.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(Ct,Ut){var ie=Ut.target,ae=Ct.style,Ie=ot.getConfig(),qe=Ie.keyWidth,Ke=Ie.keyHeight,Or=Ct.getBoundingClientRect(),Gr=ie=="container",bn=ae[qe],Tn=ae[Ke],Vr=bn&&!Gr?parseFloat(bn):Or.width,Cn=Tn&&!Gr?parseFloat(Tn):Or.height;return{left:0,top:0,width:Vr,height:Cn}}},o&&typeof o!="boolean"?o:{}));ot.blur=function(){},ot.focus(this.el)}},i.prototype.render=function(){var t=this.model.buttons,r=this.$el,o=this.ppfx,l="".concat(this.className," ").concat(this.id," ").concat(o,"one-bg ").concat(o,"two-color");if(r.addClass(l),this.toggleVisible(),t.length){var v=new Iy(t);r.append(v.render().el)}return r.append(this.model.get("content")),this},i}(wr);const _v=Kd;var tg=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vy=function(p){tg(i,p);function i(t){var r=p.call(this,{collection:t})||this;return r.listenTo(t,"add",r.addTo),r.listenTo(t,"reset",r.render),r.listenTo(t,"remove",r.onRemove),r.className=r.pfx+"panels",r}return i.prototype.onRemove=function(t){var r=t.view;r&&r.remove()},i.prototype.addTo=function(t){this.addToCollection(t)},i.prototype.addToCollection=function(t,r){var o=r||null,l=t.get("el"),v=new _v(t),w=v.render().el,x=t.get("appendTo");if(!l)if(x){var E=document.querySelector(x);E==null||E.appendChild(w)}else o?o.appendChild(w):this.$el.append(w);return v.initResize(),w},i.prototype.render=function(){var t=this,r=this.$el,o=document.createDocumentFragment();return r.empty(),this.collection.each(function(l){return t.addToCollection(l,o)}),r.append(o),r.attr("class",this.className),this},i}(wr);const xv=Vy;var Fy=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yd=function(p){Fy(i,p);function i(t){var r=p.call(this,t,"Panels",ud)||this;r.panels=new My(r,r.config.defaults);for(var o in ud)o in r.config||(r.config[o]=ud[o]);return r}return i.prototype.getPanels=function(){return this.panels},i.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},i.prototype.addPanel=function(t){return this.panels.add(t)},i.prototype.removePanel=function(t){return this.panels.remove(t)},i.prototype.getPanel=function(t){var r=this.panels.where({id:t});return r.length?r[0]:null},i.prototype.addButton=function(t,r){var o=this.getPanel(t);return o?o.buttons.add(r):null},i.prototype.removeButton=function(t,r){var o=this.getPanel(t);return o&&o.buttons.remove(r)},i.prototype.getButton=function(t,r){var o=this.getPanel(t);if(o){var l=o.buttons.where({id:r});return l.length?l[0]:null}return null},i.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new xv(this.panels),this.PanelsViewObj.render().el},i.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(r){r.get("active")&&r.trigger("updateActive")})})},i.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(r){r.get("disable")&&r.trigger("change:disable")})})},i.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},i}(H);const Ry=Yd;var Hy={stylePrefix:"cm-",optsCodeViewer:{}};const By=Hy;var Uy=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sp=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},Zd=function(p){Uy(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.build=function(t,r){r===void 0&&(r={});var o=r.em,l=sp(r,["em"]),v=l;if(r.cleanId&&o){var w=o.Css.getAll(),x=w.toJSON().map(function(E){var M=E.selectors,G=M&&M.length===1&&M.models[0];return G&&G.isId()&&G.get("name")}).filter(Boolean);v.attributes||(v.attributes=function(E,M){var G=M.id;return G&&G[0]==="i"&&!E.get("script")&&!E.get("attributes").id&&x.indexOf(G)<0&&delete M.id,M})}return t.toHTML(v)},i}(q.Hn);const zy=Zd;var Xd=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wy=function(p){Xd(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.build=function(t){var r=this,o=t.toJSON();return this.beforeEach(o),(0,wt.each)(o,function(l,v){var w=o[v];if(w instanceof q.Hn)o[v]=r.build(w);else if(w instanceof q.FE){var x=w;o[v]=[],x.length&&x.forEach(function(E,M){o[v][M]=r.build(E)})}}),o},i.prototype.beforeEach=function(t){delete t.status},i}(q.Hn);const $y=Wy;var Jd=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Gy(p){var i,t=((i=p.toString().match(/\{([\s\S]*)\}/m))===null||i===void 0?void 0:i[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var eg=function(p){Jd(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.mapModel=function(t){var r,o=this,l="",v=t.get("script-export")||t.get("script"),w=t.get("type"),x=t.get("components"),E=t.getId();if(v){var M=t.get("attributes");M=(0,wt.extend)({},M,{id:E}),t.set("attributes",M,{silent:!0});var G=t.getScriptString(v),ot=t.get("script-props");if(t.get("scriptUpdated")&&!ot)this.mapJs[w+"-"+E]={ids:[E],code:G};else{var Ct=void 0,Ut=this.mapJs[w];if(ot&&(Ct=t.__getScriptProps()),Ut)Ut.ids.push(E),Ct&&(Ut.props[E]=Ct);else{var ie={ids:[E],code:G};Ct&&(ie.props=(r={},r[E]=Ct,r)),this.mapJs[w]=ie}}}return x.forEach(function(ae){l+=o.mapModel(ae)}),l},i.prototype.build=function(t){this.mapJs={},this.mapModel(t);var r="";for(var o in this.mapJs){var l=this.mapJs[o];if(l.code)if(l.props){if(Gy(l.code))continue;r+=`
          var props = `.concat(JSON.stringify(l.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(l.code,`.bind(el))(props[el.id]);
          }`)}else{var v="#"+l.ids.join(", #");r+=`
          var items = document.querySelectorAll('`.concat(v,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(l.code,`
}.bind(items[i]))();
          }`)}}return r},i}(q.Hn);const qy=eg;var Qd=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rg=function(){return rg=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},rg.apply(this,arguments)},fd;(0,pe.hasWin)()&&(fd=ai(631),ai(531),ai(629),ai(210));var ng=function(p){Qd(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},i.prototype.init=function(t){return(0,wt.bindAll)(this,"onChange"),this.editor=fd.fromTextArea(t,rg({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},i.prototype.onChange=function(){this.trigger("update",this)},i.prototype.getEditor=function(){return this.editor},i.prototype.getElement=function(){return this.element},i.prototype.setElement=function(t){return this.element=t,this},i.prototype.refresh=function(){return this.getEditor().refresh(),this},i.prototype.focus=function(){return this.getEditor().focus(),this},i.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},i.prototype.setContent=function(t,r){var o=this;r===void 0&&(r={});var l=this.editor;if(l){l.setValue(t);var v=this.get("autoFormat"),w=l.autoFormatRange&&(v===!0||Array.isArray(v)&&v.includes(this.get("codeName")));w&&(fd.commands.selectAll(l),l.autoFormatRange(l.getCursor(!0),l.getCursor(!1)),fd.commands.goDocStart(l)),!r.noRefresh&&setTimeout(function(){return o.refresh()})}},i}(q.Hn);const Ky=ng;ng.prototype.CodeMirror=fd;var th=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yy=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},wf=function(p){th(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.template=function(t){var r=t.pfx,o=t.codeName,l=t.label;return Te(_f||(_f=Yy([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),r,r,o,r,l,r)},i.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},i.prototype.render=function(){var t,r,o=this,l=o.model,v=o.pfx,w=o.$el,x=l.toJSON(),E=l.get("input")||((r=(t=l).getElement)===null||r===void 0?void 0:r.call(t));return x.pfx=v,w.html(this.template(x)),w.attr("class","".concat(v,"editor-c")),w.find("#".concat(v,"code")).append(E),this},i}(q.G7);const Zy=wf;var _f,Va=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eh=function(){return eh=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},eh.apply(this,arguments)},Xy="CodeMirror",Jy=function(p){Va(i,p);function i(t){var r=p.call(this,t,"CodeManager",By)||this;r.EditorView=Zy;var o=r.config,l=o.pStylePrefix;return l&&(o.stylePrefix=l+o.stylePrefix),r.generators={},r.viewers={},r.defGenerators={html:new zy,css:new ju,json:new $y,js:new qy},r.defViewers={CodeMirror:new Ky},r.loadDefaultGenerators().loadDefaultViewers(),r}return i.prototype.addGenerator=function(t,r){return this.generators[t]=r,this},i.prototype.getGenerator=function(t){return this.generators[t]},i.prototype.getGenerators=function(){return this.generators},i.prototype.addViewer=function(t,r){return this.viewers[t]=r,this},i.prototype.getViewer=function(t){return this.viewers[t]},i.prototype.getViewers=function(){return this.viewers},i.prototype.createViewer=function(t){t===void 0&&(t={});var r=(0,wt.isUndefined)(t.type)?Xy:t.type,o=this.getViewer(r)&&this.getViewer(r).clone(),l=document.createElement("div"),v=document.createElement("textarea");return l.appendChild(v),o.set(eh(eh({},this.config.optsCodeViewer),t)),o.init(v),o.setElement(l),o},i.prototype.updateViewer=function(t,r){t.setContent(r)},i.prototype.getCode=function(t,r,o){o===void 0&&(o={}),o.em=this.em;var l=this.getGenerator(r);return l?l.build(t,o):""},i.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},i.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},i.prototype.destroy=function(){},i}(H);const Qy=Jy;var t0=ai(410),e0=ai.n(t0),Cv={maximumStackLength:500,trackSelection:!0};const r0=Cv;var n0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zu=function(){return zu=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},zu.apply(this,arguments)},o0=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},$c=function(p){return p.avoidStore||p.noUndo},og=function(p){return Object.keys(p.changedAttributes())},Sv=function(p){n0(i,p);function i(t){var r=p.call(this,t,"UndoManager",r0)||this;r.config._disable&&(r.config.maximumStackLength=0);var o=!0;return r.um=new(e0())(zu({track:!0,register:[]},r.config)),r.um.changeUndoType("change",{condition:function(l){var v=l.get("_undo");if(v){var w=l.get("_undoexc");if((0,wt.isArray)(w)&&og(l).some(function(x){return w.indexOf(x)>=0}))return!1;if((0,wt.isBoolean)(v)||(0,wt.isArray)(v)&&og(l).some(function(x){return v.indexOf(x)>=0}))return!0}return!1},on:function(l,v,w){var x=this;!this.beforeCache&&(this.beforeCache=l.previousAttributes());var E=w||v||{};if(E.noUndo&&setTimeout(function(){x.beforeCache=null}),!$c(E)){var M=l.toJSON({fromUndo:o}),G={object:l,before:this.beforeCache,after:M};return this.beforeCache=null,(0,wt.isEmpty)(M)?void 0:G}}}),r.um.changeUndoType("add",{on:function(l,v,w){if(w===void 0&&(w={}),!($c(w)||!r.isRegistered(v)))return{object:v,before:void 0,after:l,options:zu(zu({},w),{fromUndo:o})}}}),r.um.changeUndoType("remove",{on:function(l,v,w){if(w===void 0&&(w={}),!($c(w)||!r.isRegistered(v)))return{object:v,before:l,after:void 0,options:zu(zu({},w),{fromUndo:o})}}}),r.um.changeUndoType("reset",{undo:function(l,v){l.reset(v,{fromUndo:o})},redo:function(l,v,w){l.reset(w,{fromUndo:o})},on:function(l,v){if(v===void 0&&(v={}),!($c(v)||!r.isRegistered(l)))return{object:l,before:v.previousModels,after:o0([],l.models,!0),options:zu(zu({},v),{fromUndo:o})}}}),r.um.on("undo redo",function(){t.getSelectedAll().map(function(l){return l.trigger("rerender:layer")})}),["undo","redo"].forEach(function(l){return r.um.on(l,function(){return t.trigger(l)})}),r}return i.prototype.postLoad=function(){var t=this,r=t.config,o=t.em;r.trackSelection&&o&&this.add(o.get("selected"))},i.prototype.add=function(t){return this.um.register(t),this},i.prototype.remove=function(t){return this.um.unregister(t),this},i.prototype.removeAll=function(){return this.um.unregisterAll(),this},i.prototype.start=function(){return this.um.startTracking(),this},i.prototype.stop=function(){return this.um.stopTracking(),this},i.prototype.undo=function(t){t===void 0&&(t=!0);var r=this,o=r.em,l=r.um;return!o.isEditing()&&l.undo(t),this},i.prototype.undoAll=function(){return this.um.undoAll(),this},i.prototype.redo=function(t){t===void 0&&(t=!0);var r=this,o=r.em,l=r.um;return!o.isEditing()&&l.redo(t),this},i.prototype.redoAll=function(){return this.um.redoAll(),this},i.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},i.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},i.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},i.prototype.getStack=function(){return this.um.stack},i.prototype.getStackGroup=function(){var t=[],r=[];return this.getStack().forEach(function(o){var l=o.get("magicFusionIndex");r.indexOf(l)<0&&(r.push(l),t.push(o))}),t},i.prototype.skip=function(t){var r=!!this.um.isTracking();r&&this.stop(),t(),r&&this.start()},i.prototype.getGroupedStack=function(){var t={},r=this.getStack(),o=function(l,v){var w=l.attributes,x=w.type,E=w.after,M=w.before,G=w.object,ot=w.options,Ct=ot===void 0?{}:ot;return{index:v,type:x,after:E,before:M,object:G,options:Ct}};return r.forEach(function(l,v){var w=l.get("magicFusionIndex"),x=o(l,v);t[w]?t[w].push(x):t[w]=[x]}),Object.keys(t).map(function(l){var v=t[l];return{index:v[v.length-1].index,actions:v,labels:(0,wt.unique)(v.reduce(function(w,x){var E,M=(E=x.options)===null||E===void 0?void 0:E.action;return M&&w.push(M),w},[]))}})},i.prototype.goToGroup=function(t){var r=this;if(t){var o=this.getPointer(),l=t.index-o;(0,wt.times)(Math.abs(l),function(){r[l<0?"undo":"redo"](!1)})}},i.prototype.getPointer=function(){return this.getStack().pointer},i.prototype.clear=function(){return this.um.clear(),this},i.prototype.getInstance=function(){return this.um},i.prototype.destroy=function(){this.clear().removeAll()},i}(H);const pd=Sv;var ig={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const i0=ig;var Rp=function(){return Rp=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Rp.apply(this,arguments)},rh;(function(p){p[p.ACTIVE=1]="ACTIVE",p[p.INACTIVE=0]="INACTIVE",p[p.DISABLED=-1]="DISABLED"})(rh||(rh={}));var dd="_rte",lp={ACTIVE:1,INACTIVE:0,DISABLED:-1},nh=function(p,i){i===void 0&&(i="A");var t=p.selection()||{},r=t.anchorNode,o=t.focusNode,l=r==null?void 0:r.parentNode,v=o==null?void 0:o.parentNode;return(l==null?void 0:l.nodeName)==i||(v==null?void 0:v.nodeName)==i},oh="data-selectme",Hp={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(p){return p.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(p){return p.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(p){return p.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(p){return p.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(p){return p&&p.selection()&&nh(p)?lp.ACTIVE:lp.INACTIVE},result:function(p){nh(p)?p.exec("unlink"):p.insertHTML('<a href="" '.concat(oh,">").concat(p.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(p){return p!=null&&p.selection()&&nh(p,"SPAN")?lp.DISABLED:lp.INACTIVE},result:function(p){!nh(p,"SPAN")&&p.insertHTML("<span ".concat(oh,">").concat(p.selection(),"</span>"),{select:!0})}}},ag=function(){function p(i,t,r){var o=this;if(r===void 0&&(r={}),this.em=i,this.settings=r,t[dd])return t[dd];t[dd]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var l=(r.actions||[]).map(function(M){var G=M;return(0,wt.isString)(M)?G=Rp({},Hp[M]):Hp[M.name]&&(G=Rp(Rp({},Hp[M.name]),M)),G}),v=l.length?l:Object.keys(Hp).map(function(M){return Hp[M]});r.classes=Rp({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},r.classes);var w=r.classes,x=r.actionbar;if(this.actionbar=x,this.classes=w,this.actions=v,!x){if(!this.isCustom(r.module)){var E=r.actionbarContainer;x=document.createElement("div"),x.className=w.actionbar,E==null||E.appendChild(x),this.actionbar=x}v.forEach(function(M){return o.addAction(M)})}return r.styleWithCSS&&this.exec("styleWithCSS"),this}return p.prototype.isCustom=function(i){var t=i||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},p.prototype.destroy=function(){},p.prototype.setEl=function(i){this.el=i,this.doc=i.ownerDocument},p.prototype.updateActiveActions=function(){var i=this,t=this.getActions();t.forEach(function(r){var o=r.update,l=r.btn,v=i.classes,w=v.active,x=v.inactive,E=v.disabled,M=r.state,G=r.name,ot=i.doc,Ct=rh.INACTIVE;if(l&&(l.className=l.className.replace(w,"").trim(),l.className=l.className.replace(x,"").trim(),l.className=l.className.replace(E,"").trim()),M){var Ut=M(i,ot);if(Ct=Ut,l)switch(Ut){case lp.ACTIVE:l.className+=" ".concat(w);break;case lp.INACTIVE:l.className+=" ".concat(x);break;case lp.DISABLED:l.className+=" ".concat(E);break}}else ot.queryCommandSupported(G)&&ot.queryCommandState(G)&&(l&&(l.className+=" ".concat(w)),Ct=rh.ACTIVE);r.currentState=Ct,o==null||o(i,r)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},p.prototype.enable=function(i){return this.enabled?this:this.__toggleEffects(!0,i)},p.prototype.disable=function(){return this.__toggleEffects(!1)},p.prototype.__toggleEffects=function(i,t){i===void 0&&(i=!1),t===void 0&&(t={});var r=i?tr.on:tr.S1,o=this,l=o.el,v=o.doc,w=this.actionbarEl();if(w&&(w.style.display=i?"":"none"),l.contentEditable="".concat(!!i),r(l,"mouseup keyup",this.updateActiveActions),r(v,"keydown",this.__onKeydown),r(v,"paste",this.__onPaste),this.enabled=i,i){var x=t.event;if(this.syncActions(),this.updateActiveActions(),x){var E=null;if(v.caretRangeFromPoint){var M=(0,tr.VB)(x);E=v.caretRangeFromPoint(M.clientX,M.clientY)}else x.rangeParent&&(E=v.createRange(),E.setStart(x.rangeParent,x.rangeOffset));var G=v.getSelection();G==null||G.removeAllRanges(),E&&(G==null||G.addRange(E))}l.focus()}return this},p.prototype.__onKeydown=function(i){var t=this.em,r=t.RichTextEditor.getConfig().onKeydown;if(r)return r({ev:i,rte:this,editor:t.getEditor()});var o=this.doc,l=["insertOrderedList","insertUnorderedList"];i.key==="Enter"&&!l.some(function(v){return o.queryCommandState(v)})&&(o.execCommand("insertLineBreak"),i.preventDefault())},p.prototype.__onPaste=function(i){var t=this.em,r=t.RichTextEditor.getConfig().onPaste;if(r)return r({ev:i,rte:this,editor:t.getEditor()});var o=i.clipboardData,l=o.getData("text"),v=o.getData("text/html");if(l&&!v){i.preventDefault();var w=l.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,w)}},p.prototype.syncActions=function(){var i=this;this.getActions().forEach(function(t){if(i.actionbar&&(!t.state||t.state&&t.state(i,i.doc)>=0)){var r=t.event||"click",o=t.btn;o&&(o["on".concat(r)]=function(){t.result(i,t),i.updateActiveActions()})}})},p.prototype.addAction=function(i,t){t===void 0&&(t={});var r=t.sync,o=this.actionbarEl();if(o){var l=i.icon,v=i.attributes,w=v===void 0?{}:v,x=document.createElement("span");x.className=this.classes.button,i.btn=x;for(var E in w)x.setAttribute(E,w[E]);typeof l=="string"?x.innerHTML=l:x.appendChild(l),o.appendChild(x)}r&&(this.actions.push(i),this.syncActions())},p.prototype.getActions=function(){return this.actions},p.prototype.selection=function(){return this.doc.getSelection()},p.prototype.exec=function(i,t){this.doc.execCommand(i,!1,t)},p.prototype.actionbarEl=function(){return this.actionbar},p.prototype.insertHTML=function(i,t){var r=t===void 0?{}:t,o=r.select,l=this,v=l.em,w=l.doc,x=l.el,E=w.getSelection();if(E&&E.rangeCount){var M=(0,pe.getComponentModel)(x)||v.getSelected(),G=w.createElement("div"),ot=E.getRangeAt(0);ot.deleteContents(),(0,wt.isString)(i)?G.innerHTML=i:i&&G.appendChild(i),Array.prototype.slice.call(G.childNodes).forEach(function(Ct){ot.insertNode(Ct)}),E.removeAllRanges(),E.addRange(ot),x.focus(),o&&M&&(M.once("rte:disable",function(){var Ct=M.find("[".concat(oh,"]"))[0];Ct&&(v.setSelected(Ct),Ct.removeAttributes(oh))}),M.trigger("disable"))}},p}();const a0=ag;var Ov=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tv=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},Ev=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},s0=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},sg="".concat(fr.refresh," frame:scroll ").concat(ne.g.update),Ds="rte:enable",lg="rte:disable",cg="rte:custom",l0={enable:Ds,disable:lg,custom:cg},c0=function(p){Ov(i,p);function i(t){var r=p.call(this,t,"RichTextEditor",i0)||this;r.events=l0;var o=r.config,l=o.pStylePrefix;l&&(o.stylePrefix=l+o.stylePrefix),r.pfx=o.stylePrefix,r.actions=o.actions||[];var v=new q.Hn;return r.model=v,v.on("change:currentView",r.__trgCustom,r),r.__dbdTrgCustom=(0,wt.debounce)(function(){return r.__trgCustom()},0),r}return i.prototype.onLoad=function(){if((0,pe.hasWin)()){var t=this.config,r=t.pStylePrefix,o=t.custom,l=(0,tr.ut)("div",{class:(0,tr.cx)("".concat(r,"rte-toolbar"),!o&&"".concat(r,"one-bg ").concat(r,"rte-toolbar-ui"))});this.toolbar=l,this.initRte((0,tr.ut)("div")),(0,tr.on)(l,"mousedown",function(v){return v.stopPropagation()})}},i.prototype.__trgCustom=function(){var t=this,r=t.model,o=t.em,l=t.events;o.trigger(l.custom,{enabled:!!r.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},i.prototype.destroy=function(){var t,r,o;(t=this.globalRte)===null||t===void 0||t.destroy(),(o=(r=this.customRte)===null||r===void 0?void 0:r.destroy)===null||o===void 0||o.call(r),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,tr.L_)(this.toolbar)},i.prototype.postRender=function(t){var r=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),r.getToolsEl().appendChild(this.toolbar)},i.prototype.initRte=function(t){var r=this.globalRte,o=this,l=o.em,v=o.pfx,w=o.actionbar,x=o.config,E=this.actions||s0([],x.actions,!0),M={actionbar:"".concat(v,"actionbar"),button:"".concat(v,"action"),active:"".concat(v,"active"),inactive:"".concat(v,"inactive"),disabled:"".concat(v,"disabled")};return r?(r.em=l,r.setEl(t)):(r=new a0(l,t,{classes:M,actions:E,actionbar:w,actionbarContainer:this.toolbar,module:this}),this.globalRte=r),r.actionbar&&(this.actionbar=r.actionbar),r.actions&&(this.actions=r.actions),r},i.prototype.add=function(t,r){var o;r===void 0&&(r={}),r.name=t,(o=this.globalRte)===null||o===void 0||o.addAction(r,{sync:!0})},i.prototype.get=function(t){var r,o;return(r=this.globalRte)===null||r===void 0||r.getActions().forEach(function(l){l.name==t&&(o=l)}),o},i.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},i.prototype.remove=function(t){var r,o=this.getAll(),l=this.get(t);if(l){var v=l.btn,w=o.indexOf(l);(r=v==null?void 0:v.parentNode)===null||r===void 0||r.removeChild(v),o.splice(w,1)}return l},i.prototype.run=function(t){var r=this.globalRte,o=(0,wt.isString)(t)?this.get(t):t;r&&o&&(o.result(r,o),r.updateActiveActions())},i.prototype.getToolbarEl=function(){return this.toolbar},i.prototype.updatePosition=function(){var t=this,r=t.em,o=t.toolbar,l="px",v=r.Canvas,w=o.style,x=v.getTargetToElementFixed(this.lastEl,o,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(E){var M=x[E];(0,pe.isDef)(M)&&(w[E]=(0,wt.isString)(M)?M:(M||0)+l)})},i.prototype.enable=function(t,r,o){return o===void 0&&(o={}),Tv(this,void 0,void 0,function(){var l,v,w,x,E;return Ev(this,function(M){switch(M.label){case 0:return this.lastEl=t.el,l=this,v=l.customRte,w=l.em,x=t.getChildrenContainer(),this.toolbar.style.display="",[4,v?v.enable(x,r):this.initRte(x).enable(o)];case 1:return E=M.sent(),w&&(setTimeout(this.updatePosition.bind(this),0),w.off(sg,this.updatePosition,this),w.on(sg,this.updatePosition,this),w.trigger("rte:enable",t,E)),this.model.set({currentView:t}),[2,E]}})})},i.prototype.getContent=function(t,r){return Tv(this,void 0,void 0,function(){var o;return Ev(this,function(l){switch(l.label){case 0:return o=this.customRte,o&&r&&(0,wt.isFunction)(o.getContent)?[4,o.getContent(t.el,r)]:[3,2];case 1:return[2,l.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},i.prototype.hideToolbar=function(){var t=this.toolbar.style,r="-1000px";t.top=r,t.left=r,t.display="none"},i.prototype.disable=function(t,r,o){o===void 0&&(o={});var l=this.em,v=this.customRte,w=t.getChildrenContainer();v?v.disable(w,r):r&&r.disable(),this.hideToolbar(),l&&(l.off(sg,this.updatePosition,this),!o.fromMove&&l.trigger("rte:disable",t,r)),this.model.unset("currentView")},i}(H);const u0=c0,f0={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Pv=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(){return Js=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Js.apply(this,arguments)},p0=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},kv=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ug=function(p){Pv(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.getDefaults=function(){return(0,wt.result)(this.prototype,"defaults")},i.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},i.prototype.initialize=function(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.em=r.em;var o=this.getId()||"",l=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(l||o).replace(/ /g,"-"));var v=this.get("property");!this.get("id")&&this.set("id",v),!l&&this.set("name",(0,pe.capitalize)(v).replace(/-/g," ")),this.on("change",this.__upTargets),i.callInit(this,t,r)},i.prototype.__getParentProp=function(){var t,r;return(r=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||r===void 0?void 0:r.parentProp},i.prototype.__upTargets=function(t,r){var o,l=this;r===void 0&&(r={});var v=this.em,w=v.Styles,x=this.getName(),E=r.__clear,M=E?"":this.__getFullValue(r),G=this.__getParentProp(),ot=this.changedAttributes(),Ct=(0,wt.keys)(ot).reduce(function(Ke,Or){return Ke[Or]=l.previous(Or),Ke},{}),Ut=kv(kv([],(0,wt.keys)(this.__getClearProps()),!0),["__p"],!1),ie=(0,wt.keys)(ot),ae=!r.__up&&!G&&(E||Ut.some(function(Ke){return ie.indexOf(Ke)>=0})),Ie=this.get("onChange"),qe={property:this,from:Ct,to:ot,value:M,opts:r};w.__trgEv(w.events.propertyUpdate,qe),Ie&&Ie(qe),ae&&this.__upTargetsStyle((o={},o[x]=M,o),r)},i.prototype.__upTargetsStyle=function(t,r){var o,l=(o=this.em)===null||o===void 0?void 0:o.get("StyleManager");l==null||l.addStyleTargets(Js(Js({},t),{__p:!!r.avoidStore}),r)},i.prototype._up=function(t,r){r===void 0&&(r={}),r.noTarget&&(r.__up=!0);var o=r.partial,l=p0(r,["partial"]);return t.__p=!!(l.avoidStore||o),this.set(t,Js(Js({},l),{avoidStore:t.__p}))},i.prototype.up=function(t,r){r===void 0&&(r={}),this.set(t,Js(Js({},r),{__up:!0}))},i.prototype.init=function(){},i.prototype.getId=function(){return this.get("id")},i.prototype.getType=function(){return this.get("type")},i.prototype.getName=function(){return this.get("property")},i.prototype.getLabel=function(t){var r;t===void 0&&(t={});var o=t.locale,l=o===void 0?!0:o,v=this.getId(),w=this.get("name")||this.get("label");return l&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.properties.".concat(v)))||w},i.prototype.getValue=function(t){t===void 0&&(t={});var r=t.noDefault,o=this.get("value");return!this.hasValue()&&!r?this.getDefaultValue():o},i.prototype.hasValue=function(t){t===void 0&&(t={});var r=t.noParent,o=r&&this.getParentTarget(),l=this.get("value");return!(0,wt.isUndefined)(l)&&l!==""&&!o},i.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},i.prototype.getStyle=function(t){var r;t===void 0&&(t={});var o=this.getName(),l=t.camelCase?(0,pe.camelCase)(o):o;return r={},r[l]=this.__getFullValue(t),r},i.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,wt.isUndefined)(t)?this.get("defaults"):t)},i.prototype.upValue=function(t,r){r===void 0&&(r={});var o=t===null||t===""?this.__getClearProps():this.__parseValue(t,r);return this._up(o,r)},i.prototype.isVisible=function(){return!!this.get("visible")},i.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Js(Js({},t),{__clear:!0})),this},i.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},i.prototype.getParent=function(){return this.__getParentProp()},i.prototype.isFull=function(){return!!this.get("full")},i.prototype.__parseValue=function(t,r){return this.parseValue(t,r)},i.prototype.__getClearProps=function(){return{value:""}},i.prototype.setValue=function(t,r,o){r===void 0&&(r=!0),o===void 0&&(o={});var l=this.parseValue(t),v=!r;!v&&this.set({value:void 0},{avoidStore:v,silent:!0}),this.set(l,Js({avoidStore:v},o))},i.prototype.setValueFromInput=function(t,r,o){o===void 0&&(o={}),this.setValue(t,r,Js(Js({},o),{fromInput:1}))},i.prototype.parseValue=function(t,r){r===void 0&&(r={});var o={value:t},l="!important",v=this.get("functionName")||"";if((0,wt.isString)(t)&&t.indexOf(l)!==-1&&(o.value=t.replace(l,"").trim(),o.important=!0),!v&&!r.complete)return o;var w=[],x="".concat(o.value).trim(),E=x.indexOf("(")+1,M=v||x.substring(0,E-1);if(M&&(o.functionName=M),!v||x.indexOf("".concat(v,"("))===0){var G=x.lastIndexOf(")");w.push(E),G>=0&&w.push(G),o.value=String.prototype.substring.apply(x,w)}if(r.numeric){var ot=parseFloat(o.value);o.unit=o.value.replace(ot,""),o.value=ot}return o},i.prototype.__getFullValue=function(t){var r=t===void 0?{}:t,o=r.withDefault;return!this.hasValue()&&o?this.getDefaultValue():this.getFullValue()},i.prototype.getFullValue=function(t,r){r===void 0&&(r={});var o=this.get("functionName"),l=this.getDefaultValue(),v=(0,wt.isUndefined)(t)?this.get("value"):t,w=!(0,wt.isUndefined)(v)&&v!=="";if(v&&l&&v===l)return l;if(o&&w){var x=o==="url"?"'".concat(v.replace(/'|"/g,""),"'"):v;v="".concat(o,"(").concat(x,")")}return w&&this.get("important")&&!r.skipImportant&&(v="".concat(v," !important")),v||""},i.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},i.prototype.getParentTarget=function(){return this.get("parentTarget")||null},i.prototype.__parseFn=function(t){t===void 0&&(t="");var r=t.indexOf("(")+1,o=t.lastIndexOf(")");return{name:t.substring(0,r-1).trim(),value:String.prototype.substring.apply(t,[r,o>=0?o:void 0]).trim()}},i.prototype.__checkVisibility=function(t){var r=t.target,o=t.component,l=t.sectors,v=o||r;if(!v)return!1;var w=this.getId(),x=this.getName(),E=this.get("toRequire"),M=this.get("requires"),G=this.get("requiresParent"),ot=v.get("unstylable"),Ct=v.get("stylable-require"),Ut=v.get("stylable");if((0,wt.isArray)(Ut)&&(Ut=Ut.indexOf(x)>=0),(0,wt.isArray)(ot)&&(Ut=ot.indexOf(x)<0),E&&(Ut=!r||Ct&&(Ct.indexOf(w)>=0||Ct.indexOf(x)>=0)),l&&M){var ie=(0,wt.keys)(M);l.forEach(function(Ke){Ke.getProperties().forEach(function(Or){if((0,wt.includes)(ie,Or.id)){var Gr=M[Or.id];Ut=Ut&&(0,wt.includes)(Gr,Or.get("value"))}})})}if(G){var ae=o&&o.parent(),Ie=ae&&ae.getEl();if(Ie){var qe=(0,pe.hasWin)()?window.getComputedStyle(Ie):{};(0,wt.each)(G,function(Ke,Or){Ut=Ut&&qe[Or]&&(0,wt.includes)(Ke,qe[Or])})}else Ut=!1}return!!Ut},i}(q.Hn);const Di=ug;ug.callParentInit=function(p,i,t,r){r===void 0&&(r={}),p.prototype.initialize.apply(i,[t,Js(Js({},r),{skipInit:1})])},ug.callInit=function(p,i,t){t===void 0&&(t={}),!t.skipInit&&p.init(i,t)};var hd=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gd=function(){return gd=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},gd.apply(this,arguments)},Av=function(p){hd(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return{values:{}}},i.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},i.prototype.getId=function(){return this.cid},i.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},i.prototype.getValues=function(t){t===void 0&&(t={});var r=this.get("values");return t.camelCase?Object.keys(r).reduce(function(o,l){return o[(0,pe.camelCase)(l)]=r[l],o},{}):r},i.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},i.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},i.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},i.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},i.prototype.move=function(t){var r;return(r=this.prop)===null||r===void 0?void 0:r.moveLayer(this,t)},i.prototype.getStylePreview=function(t){var r;return t===void 0&&(t={}),(r=this.prop)===null||r===void 0?void 0:r.getStylePreview(this,t)},i.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},i.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",gd(gd({},this.getValues()),t))},i}(q.Hn);const d0=Av;var h0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mv=function(p){h0(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.initialize=function(t,r){r===void 0&&(r={}),this.prop=r.prop},i}(q.FE);const Lv=Mv;Mv.prototype.model=d0;var jv=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bp=function(){return Bp=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Bp.apply(this,arguments)},vd=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},ih=function(p){return p==="integer"||p==="number"},Dv=function(p){jv(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return Bp(Bp({},Di.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},i.prototype.initialize=function(t,r){t===void 0&&(t={}),r===void 0&&(r={}),Di.callParentInit(Di,this,t,r);var o=this.em,l=new No(this.get("properties")||[],{em:o,parentProp:this});this.set("properties",l,{silent:!0}),this.listenTo(l,"change",this.__upProperties),Di.callInit(this,t,r)},Object.defineProperty(i.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),i.prototype.getProperties=function(){return vd([],this.get("properties").models,!0)},i.prototype.getProperty=function(t){return this.properties.filter(function(r){return r.getId()===t||r.getName()===t})[0]},i.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},i.prototype.isDetached=function(){return!!this.get("detached")},i.prototype.getValues=function(t){var r=t===void 0?{}:t,o=r.byName;return this.getProperties().reduce(function(l,v){var w=o?v.getName():v.getId();return l[w]="".concat(v.__getFullValue()),l},{})},i.prototype.getSeparator=function(){return this.getSplitSeparator()},i.prototype.getJoin=function(){return this.__getJoin()},i.prototype.getStyleFromProps=function(t){var r;t===void 0&&(t={});var o=this.getName(),l=this.__getJoin(),v=this.get("toStyle"),w=this.getValues(),x={};if(v)x=v(w,{join:l,name:o,property:this});else if(w=this.getValues({byName:!0}),this.isDetached())x=w;else{var E=this.getProperties().map(function(M){return M.__getFullValue({withDefault:1})}).filter(Boolean).join(l);x=(r={},r[o]=E,r)}return this.isDetached()?x[o]="":(x[o]=x[o]||"",x=Bp(Bp({},x),this.getProperties().reduce(function(M,G){return M[G.getName()]="",M},{}))),t.camelCase?Object.keys(x).reduce(function(M,G){return M[(0,pe.camelCase)(G)]=x[G],M},{}):x},i.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},i.prototype.__upProperties=function(t,r){if(r===void 0&&(r={}),!(r.__up||r.__clearIn)){var o=this.__getParentProp();if(o)return o.__upProperties(this,r);this.__upTargetsStyleProps(r,t)}},i.prototype.__upTargetsStyleProps=function(t,r){var o;t===void 0&&(t={});var l=this.getStyleFromProps();if(this.isDetached()&&r){var v=r.getName();l=(o={},o[v]=l[v],o)}this.__upTargetsStyle(l,t)},i.prototype._up=function(t,r){return r===void 0&&(r={}),this.__setProperties(this.__getSplitValue(t.value),r),Di.prototype._up.call(this,t,r),this},i.prototype.getStyle=function(t){return this.getStyleFromProps(t)},i.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var r=this.getStyleFromProps()[this.getName()]||"";return Gi(r)},i.prototype.__getJoin=function(){var t=this.get("join");return(0,wt.isString)(t)?t:this.get("separator")},i.prototype.__styleHasProps=function(t){t===void 0&&(t={});var r=this.getName(),o=this.getProperties(),l=o.map(function(w){return w.getName()}),v=vd([r],l,!0);return v.some(function(w){return!(0,wt.isUndefined)(t[w])&&t[w]!==""})},i.prototype.__splitValue=function(t,r){return Gi(t).split(r).map(function(o){return o.trim()}).filter(Boolean)},i.prototype.__splitStyleName=function(t,r,o){return this.__splitValue(t[r]||"",o)},i.prototype.__getSplitValue=function(t,r){t===void 0&&(t="");var o=r===void 0?{}:r,l=o.byName,v=this.getProperties(),w=v.length===4&&v.every(function(M){return ih(M.getType())}),x=this.__splitValue(t,this.getSplitSeparator()),E={};return v.forEach(function(M,G){var ot=x[G],Ct=(0,wt.isUndefined)(ot)?"":ot;if(w){var Ut=x.length;Ct=x[G]||x[G%Ut+(Ut!=1&&Ut%2?1:0)]||Ct}var ie=l?M.getName():M.getId();E[ie]=Ct||""}),E},i.prototype.__getPropsFromStyle=function(t,r){if(t===void 0&&(t={}),r===void 0&&(r={}),!this.__styleHasProps(t))return null;var o=r.byName,l=this.getName(),v=this.getProperties(),w=this.getSplitSeparator(),x=this.get("fromStyle"),E=x?x(t,{property:this,name:l,separator:w}):{};return x||(E=this.__getSplitValue(t[l]||"",{byName:o}),v.forEach(function(M){var G=t[M.getName()],ot=o?M.getName():M.getId();!(0,wt.isUndefined)(G)&&G!==""&&(E[ot]=G)})),E},i.prototype.__setProperties=function(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.getProperties().forEach(function(l){var v=t[l.getId()];l.__getFullValue()!==v&&l.upValue(v,r)});var o=(0,wt.keys)(t).map(function(l){return t[l]}).join(" ");this.set("value",o,{silent:!0})},i.prototype.clear=function(){var t=this;return this.getProperties().map(function(r){return r.clear({__clearIn:!t.isDetached()})}),Di.prototype.clear.call(this),this},i.prototype.hasValue=function(t){return this.getProperties().some(function(r){return r.hasValue(t)})},i.prototype.getFullValue=function(){return this.__getFullValue()},i.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},i}(Di);const cp=Dv;var Iv=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ml=function(){return Ml=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ml.apply(this,arguments)},h=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},s=/,(?![^\(]*\))/,e=/\s(?![^(]*\))/,n=function(p){Iv(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return Ml(Ml({},cp.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},i.prototype.initialize=function(t,r){t===void 0&&(t={}),r===void 0&&(r={}),cp.callParentInit(cp,this,t,r);var o=this.get("layers"),l=new Lv(o,{prop:this});l.property=this,l.properties=this.get("properties"),this.set("layers",l,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(l,"add remove",this.__upLayers),cp.callInit(this,t,r)},Object.defineProperty(i.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),i.prototype.getLayers=function(){return this.layers.models},i.prototype.hasLayers=function(){return this.getLayers().length>0},i.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},i.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},i.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},i.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var r=this.getLayer(t);return r&&this.selectLayer(r)},i.prototype.moveLayer=function(t,r){r===void 0&&(r=0);var o=this.layers,l=t?t.getIndex():-1;l>=0&&(0,wt.isNumber)(r)&&r>=0&&r<o.length&&l!==r&&(this.removeLayer(t),o.add(t,{at:r}))},i.prototype.addLayer=function(t,r){t===void 0&&(t={}),r===void 0&&(r={});var o={};this.getProperties().forEach(function(v){var w=v.getId(),x=t[w];o[w]=(0,wt.isUndefined)(x)?v.getDefaultValue():x});var l=this.layers.push({values:o},r);return l},i.prototype.removeLayer=function(t){return this.layers.remove(t)},i.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var r=this.getLayer(t);return r?this.removeLayer(r):null},i.prototype.getLayerLabel=function(t){var r="";if(t){var o=this.get("layerLabel"),l=t.getValues(),v=t.getIndex();if(o)r=o(t,{index:v,values:l,property:this});else{var w=[];this.getProperties().map(function(x){w.push(l[x.getId()])}),r=w.filter(Boolean).join(" ")}}return r},i.prototype.getStyleFromLayer=function(t,r){var o;r===void 0&&(r={});var l=this.__getJoin(),v=this.__getJoinLayers(),w=this.get("toStyle"),x=this.getName(),E=t.getValues(),M;if(w)M=w(E,{join:l,joinLayers:v,name:x,layer:t,property:this});else{var G=this.getProperties().map(function(ot){var Ct=ot.getName(),Ut=E[ot.getId()],ie=(0,wt.isUndefined)(Ut)?ot.getDefaultValue():Ut;if(r.number&&ih(ot.getType())){var ae=ot.parseValue(Ut,r.number);ie="".concat(ae.value).concat(ae.unit)}return{name:Ct,value:ie}});M=this.isDetached()?G.reduce(function(ot,Ct){return ot[Ct.name]=Ct.value,ot},{}):(o={},o[this.getName()]=G.map(function(ot){return ot.value}).join(l),o)}return r.camelCase?Object.keys(M).reduce(function(ot,Ct){return ot[(0,pe.camelCase)(Ct)]=M[Ct],ot},{}):M},i.prototype.getStylePreview=function(t,r){r===void 0&&(r={});var o={},l=this.get("preview");return l&&(o=this.getStyleFromLayer(t,r)),o},i.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,wt.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},i.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},i.prototype.__upProperties=function(t,r){var o;r===void 0&&(r={});var l=this.getSelectedLayer();l&&(l.upValues((o={},o[t.getId()]=t.__getFullValue(),o)),!r.__up&&this.__upTargetsStyleProps(r))},i.prototype.__upLayers=function(t,r,o){this.__upTargetsStyleProps(o||r)},i.prototype.__upTargets=function(t,r){if(r===void 0&&(r={}),!r.__select)return Di.prototype.__upTargets.call(this,t,r)},i.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},i.prototype.__upTargetsStyle=function(t,r){return Di.prototype.__upTargetsStyle.call(this,t,r)},i.prototype.__upSelected=function(t,r){var o=t===void 0?{}:t,l=o.noEvent;r===void 0&&(r={});var v=this.em.Styles,w=this.getSelectedLayer(),x=w==null?void 0:w.getValues();x&&this.getProperties().forEach(function(E){var M,G=(M=x[E.getId()])!==null&&M!==void 0?M:"";E.__getFullValue()!==G&&E.upValue(G,Ml(Ml({},r),{__up:!0}))}),!l&&v.__trgEv(v.events.layerSelect,{property:this})},i.prototype._up=function(t,r){r===void 0&&(r={});var o=t.__layers,l=o===void 0?[]:o,v=h(t,["__layers"]);return!this.isDetached()&&this.__setLayers(l),this.__upSelected({noEvent:!0},r),Di.prototype._up.call(this,v,r),this},i.prototype.__setLayers=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var o=this.layers,l=t.map(function(v){return{values:v}});o.length===l.length?l.map(function(v,w){var x;return(x=o.at(w))===null||x===void 0?void 0:x.upValues(v.values)}):o.reset(l),this.set({isEmptyValue:!!r.isEmptyValue}),this.__upSelected({noEvent:!0})},i.prototype.__parseValue=function(t){var r=this,o=this.parseValue(t);return o.__layers=t.split(s).map(function(l){return l.trim()}).map(function(l){return r.__parseLayer(l)}).filter(Boolean),o},i.prototype.__parseLayer=function(t){var r=this.get("parseLayer"),o=t.split(e),l=this.getProperties();return r?r({value:t,values:o}):l.reduce(function(v,w,x){var E=o[x];return v[w.getId()]=(0,wt.isUndefined)(E)?w.getDefaultValue():E,v},{})},i.prototype.__getLayersFromStyle=function(t){var r=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var o=this.getName(),l=this.getProperties(),v=this.getLayerSeparator(),w=this.attributes.fromStyle,x=w?w(t,{property:this,name:o,separatorLayers:v}):[];if(!w){var E=this.__splitStyleName(t,o,v).map(function(M){return M.split(r.getSplitSeparator())}).map(function(M){var G={};return l.forEach(function(ot,Ct){var Ut=M[Ct];G[ot.getId()]=(0,wt.isUndefined)(Ut)?ot.getDefaultValue():Ut}),G});l.forEach(function(M){var G=M.getId();r.__splitStyleName(t,M.getName(),v).map(function(ot){var Ct;return Ct={},Ct[G]=ot||M.getDefaultValue(),Ct}).forEach(function(ot,Ct){E[Ct]=E[Ct]?Ml(Ml({},E[Ct]),ot):ot})}),x=E}return(0,wt.isArray)(x)?x:[x]},i.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},i.prototype.getStyleFromLayers=function(t){var r=this;t===void 0&&(t={});var o={},l=this.getName(),v=this.getLayers(),w=this.getProperties(),x=v.map(function(M){return r.getStyleFromLayer(M,t)});if(x.forEach(function(M){(0,wt.keys)(M).map(function(G){o[G]||(o[G]=[]),o[G].push(M[G])})}),(0,wt.keys)(o).map(function(M){o[M]=o[M].join(r.__getJoinLayers())}),this.isDetached())o[l]="",!v.length&&w.map(function(M){o[M.getName()]=""});else{var E=w.reduce(function(M,G){return M[G.getName()]="",M},{});o[l]=o[l]||"",o=Ml(Ml({},o),E)}return Ml(Ml({},o),t.__clear?{}:this.getEmptyValueStyle())},i.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var r=this.getEmptyValueStyle({force:!0}),o=(0,wt.keys)(r);return!!o.length&&o.every(function(l){return r[l]===t[l]})},i.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var r=this.attributes.emptyValue;if(r&&(!this.hasLayers()||t.force)){var o=this.getName(),l=this.getProperties(),v=(0,wt.isString)(r)?r:r({property:this});if((0,wt.isString)(v)){var w={};return this.isDetached()?l.map(function(x){w[x.getName()]=v}):w[o]=v,w}else return v}else return{}},i.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),r=this.get("layerSeparator");return t||((0,wt.isString)(r)?r:t)},i.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return Gi(t[this.getName()])},i.prototype.hasValue=function(t){t===void 0&&(t={});var r=t.noParent,o=r&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!o},i.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(Ml(Ml({},t),{__clear:!0})),Di.prototype.clear.call(this),this},i.prototype.__canClearProp=function(){return!1},i.prototype.__getLayers=function(){return this.layers},i}(cp);const a=n;var u=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),m=function(){return m=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},m.apply(this,arguments)},O=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},P=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},j="data-clear-style",A=function(p){u(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this;(0,wt.bindAll)(r,"__change","__updateStyle");var o=t.config||{},l=o.em;r.config=o,r.em=l,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.__destroyFn=r.destroy?r.destroy.bind(r):function(){};var v=r.model;v.view=r,r.onValueChange=(0,wt.debounce)(r.onValueChange.bind(r),10),r.updateStatus=(0,wt.debounce)(r.updateStatus.bind(r),0),r.listenTo(v,"destroy remove",r.remove),r.listenTo(v,"change:visible",r.updateVisibility),r.listenTo(v,"change:name change:className change:full",r.render),r.listenTo(v,"change:value",r.onValueChange),r.listenTo(v,"change:parentTarget",r.updateStatus),r.listenTo(l,"change:device",r.onValueChange);var w=r.init&&r.init.bind(r);return w&&w(),r}return i.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(j,"]")]="clear",t},i.prototype.template=function(t){var r=this,o=r.pfx,l=r.ppfx;return`
      <div class="`.concat(o,`label" data-sm-label></div>
      <div class="`).concat(l,`fields" data-sm-fields></div>
    `)},i.prototype.templateLabel=function(t){var r=this,o=r.pfx,l=r.em,v=t.parent,w=t.attributes,x=w.icon,E=x===void 0?"":x,M=w.info,G=M===void 0?"":M,ot=l==null?void 0:l.getConfig().icons,Ct=(ot==null?void 0:ot.close)||"";return`
      <span class="`.concat(o,"icon ").concat(E,'" title="').concat(G,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(v?"":'<div class="'.concat(o,'clear" style="display: none" ').concat(j,">").concat(Ct,"</div>"),`
    `)},i.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},i.prototype.remove=function(){var t=this;return q.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(r){return t[r]=null}),this.__destroyFn(this._getClbOpts()),this},i.prototype.updateStatus=function(){var t,r=this,o=r.model,l=r.pfx,v=r.ppfx,w=r.config,x="".concat(v,"four-color"),E="".concat(v,"color-warn"),M=this.$el.children(".".concat(l,"label")),G=this.getClearEl(),ot=G?G.style:{};M.removeClass("".concat(x," ").concat(E)),ot.display="none",o.hasValue({noParent:!0})&&w.highlightChanged?(M.addClass(x),w.clearProperties&&(ot.display="")):o.hasValue()&&w.highlightComputed&&M.addClass(E),(t=this.parent)===null||t===void 0||t.updateStatus()},i.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},i.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(j,"]"))),this.clearEl},i.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},i.prototype.onValueChange=function(t,r,o){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},i.prototype.setValue=function(t){var r=this.model,o=(0,wt.isUndefined)(t)||t===""?r.getDefaultValue():t;if(this.update)return this.__update(o);this.__setValueInput(o)},i.prototype.__setValueInput=function(t){var r=this.getInputEl();r&&(r.value=t)},i.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},i.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},i.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},i.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},i.prototype.__update=function(t){var r=this.update&&this.update.bind(this);r&&r(m(m({},this._getClbOpts()),{value:t}))},i.prototype.__change=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=this.emit&&this.emit.bind(this);o&&o.apply(void 0,P([this._getClbOpts()],t,!1))},i.prototype.__updateStyle=function(t,r){r===void 0&&(r={});var o=r.complete,l=r.partial;O(r,["complete","partial"]);var v=this.model,w=o!==!1&&l!==!0;(0,pe.isObject)(t)?v.__upTargetsStyle(t,{avoidStore:!w}):v.upValue(t,{partial:!w})},i.prototype._getClbOpts=function(){var t=this,r=t.model,o=t.el,l=t.createdEl;return{el:o,createdEl:l,property:r,props:r.attributes,change:this.__change,updateStyle:this.__updateStyle}},i.prototype.render=function(){this.clearCached();var t=this,r=t.pfx,o=t.model,l=t.el,v=t.$el,w=o.getName(),x=o.getType(),E=o.get("className")||"",M="".concat(r,"property"),G=x==="number"?"".concat(r).concat(x," ").concat(r,"integer"):"".concat(r).concat(x);this.createdEl&&this.__destroyFn(this._getClbOpts()),v.empty().append(this.template(o)),v.find("[data-sm-label]").append(this.templateLabel(o));var ot=this.create&&this.create.bind(this);this.createdEl=ot&&ot(this._getClbOpts()),v.find("[data-sm-fields]").append(this.createdEl||this.templateInput(o)),l.className="".concat(M," ").concat(G," ").concat(M,"__").concat(w," ").concat(E).trim(),l.className+=o.isFull()?" ".concat(M,"--full"):"";var Ct=this.onRender&&this.onRender.bind(this);return Ct&&Ct(),this.setValue(o.getValue()),this},i.prototype.onRender=function(){},i}(q.G7);const nt=A;var At=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bt=function(p){At(i,p);function i(t){var r=p.call(this,t)||this;r.config=t.config||{},r.pfx=r.config.stylePrefix||"",r.properties=[],r.parent=t.parent;var o=r.collection;return r.listenTo(o,"add",r.addTo),r.listenTo(o,"reset",r.render),r}return i.prototype.addTo=function(t,r,o){this.add(t,null,o)},i.prototype.add=function(t,r,o){o===void 0&&(o={});var l=this,v=l.parent,w=l.config,x=r||this.el,E=new t.typeView({model:t,config:w});v&&(E.parent=v),E.render();var M=E.el;this.properties.push(E),(0,tr.$Q)(x,M,o.at)},i.prototype.remove=function(){return q.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},i.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},i.prototype.render=function(){var t=this,r=this,o=r.$el,l=r.pfx;this.clearItems();var v=document.createDocumentFragment();return this.collection.forEach(function(w){return t.add(w,v)}),o.empty(),o.append(v),o.attr("class","".concat(l,"properties")),this},i}(q.G7);const qt=Bt;var be=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ee=function(){return Ee=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Ee.apply(this,arguments)},Ce=function(p){be(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},i.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),nt.prototype.remove.apply(this,arguments),this},i.prototype.onValueChange=function(){},i.prototype.onRender=function(){var t=this.pfx,r=this.model,o=r.get("properties");if(o.length&&!this.props){var l=r.isDetached(),v=new qt({config:Ee(Ee({},this.config),{highlightComputed:l,highlightChanged:l}),collection:o,parent:this});v.render(),this.$el.find("#".concat(t,"input-holder")).append(v.el),this.props=v}},i.prototype.clearCached=function(){nt.prototype.clearCached.apply(this,arguments),delete this.props},i}(nt);const rr=Ce;var yr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jr=function(p){yr(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},i.prototype.template=function(){var t=this,r=t.pfx,o=t.ppfx,l=t.em,v=l==null?void 0:l.getConfig().icons,w=(v==null?void 0:v.close)||"",x=(v==null?void 0:v.move)||"";return`
      <div class="`.concat(r,`label-wrp">
        <div id="`).concat(r,'move" class="').concat(o,`no-touch-actions" data-move-layer>
          `).concat(x,`
        </div>
        <div id="`).concat(r,`label" data-label></div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(r,'preview" class="').concat(r,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(r,'close-layer" class="').concat(r,`btn-close" data-close-layer>
          `).concat(w,`
        </div>
      </div>
      <div id="`).concat(r,`inputs" data-properties></div>
    `)},i.prototype.initialize=function(t){t===void 0&&(t={});var r=this.model,o=t.config||{};this.em=o.em,this.config=o,this.sorter=t.sorter,this.pfx=o.stylePrefix||"",this.ppfx=o.pStylePrefix||"",this.propertyView=t.propertyView;var l=this.propertyView.model;this.listenTo(r,"destroy remove",this.remove),this.listenTo(r,"change:values",this.updateLabel),this.listenTo(l,"change:selectedLayer",this.updateVisibility),r.view=this,r.set({droppable:0,draggable:1}),this.$el.data("model",r)},i.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},i.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},i.prototype.select=function(){this.model.select()},i.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},i.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},i.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},i.prototype.updateLabel=function(){var t=this.model,r=t.getLabel();if(this.getLabelEl().innerHTML=r,t.hasPreview()){var o=this.getPreviewEl(),l=t.getStylePreview({number:{min:-3,max:3}}),v=(0,wt.keys)(l).map(function(w){return"".concat(w,":").concat(l[w])}).join(";");o.setAttribute("style",v)}},i.prototype.updateVisibility=function(){var t,r=this,o=r.pfx,l=r.model,v=r.propertyView,w=this.getPropertiesWrapper(),x=l.isSelected();w.style.display=x?"":"none",this.$el[x?"addClass":"removeClass"]("".concat(o,"active")),x&&w.appendChild((t=v.props)===null||t===void 0?void 0:t.el)},i.prototype.render=function(){var t=this,r=t.el,o=t.pfx,l=t.model;return r.innerHTML=this.template(),r.className="".concat(o,"layer"),l.hasPreview()&&(r.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},i}(q.G7);const Qr=Jr;var Sn=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pn=function(p){Sn(i,p);function i(t){var r=p.call(this,t)||this,o=r.collection,l=t.config||{},v=l.em,w=l.stylePrefix||"",x=l.pStylePrefix||"";r.config=l,r.pfx=w,r.ppfx=x,r.propertyView=t.propertyView,r.className="".concat(w,"layers ").concat(x,"field"),r.listenTo(o,"add",r.addTo),r.listenTo(o,"reset",r.reset),r.items=[];var E=v==null?void 0:v.Utils;return r.sorter=E?new E.Sorter({container:r.el,ignoreViewChildren:1,containerSel:".".concat(w,"layers"),itemSel:".".concat(w,"layer"),pfx:l.pStylePrefix,em:v}):"",o.view=r,r.$el.data("model",o),r.$el.data("collection",o),r}return i.prototype.addTo=function(t){var r=this.collection.indexOf(t);this.addToCollection(t,null,r)},i.prototype.addToCollection=function(t,r,o){var l=r||null,v=this,w=v.propertyView,x=v.config,E=v.sorter,M=v.$el,G=new Qr({model:t,config:x,sorter:E,propertyView:w}),ot=G.render().el;if(this.items.push(G),l)l.appendChild(ot);else if(typeof o<"u"){var Ct="before";M.children().length===o&&(o--,Ct="after"),o<0?M.append(ot):M.children().eq(o)[Ct](ot)}else M.append(ot);return ot},i.prototype.reset=function(t,r){this.clearItems(),this.render()},i.prototype.remove=function(){return this.clearItems(),q.G7.prototype.remove.apply(this,arguments),this},i.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},i.prototype.render=function(){var t=this,r=this,o=r.$el,l=r.sorter,v=document.createDocumentFragment();return o.empty(),this.collection.forEach(function(w){return t.addToCollection(w,v)}),o.append(v),o.attr("class",this.className),l&&(l.plh=null),this},i}(q.G7);const xo=Pn;var ii=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),va=function(){return va=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},va.apply(this,arguments)},Qs=function(p){ii(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return va(va({},rr.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},i.prototype.templateInput=function(){var t=this,r=t.pfx,o=t.em,l=o==null?void 0:o.getConfig().icons,v=(l==null?void 0:l.plus)||"+";return`
      <div class="`.concat(r,"field ").concat(r,`stack">
        <button type="button" id="`).concat(r,`add" data-add-layer>
          `).concat(v,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},i.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},i.prototype.addLayer=function(){this.model.addLayer({},{at:0})},i.prototype.setValue=function(){},i.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),rr.prototype.remove.apply(this,arguments),this},i.prototype.clearCached=function(){rr.prototype.clearCached.apply(this,arguments),delete this.layersView},i.prototype.onRender=function(){var t=this,r=t.model,o=t.el,l=t.config,v=r.get("properties");if(v.length&&!this.props){var w=new qt({config:va(va({},l),{highlightComputed:!1,highlightChanged:!1}),collection:v,parent:this});w.render();var x=new xo({collection:r.layers,config:l,propertyView:this});x.render();var E=o.querySelector("[data-layers-wrapper]");E.appendChild(x.el),this.props=w,this.layersView=x}},i}(rr);const tl=Qs;var Ll=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xa=function(){return Xa=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Xa.apply(this,arguments)},lu=function(p){Ll(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return Xa(Xa({},nt.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},i.prototype.templateInput=function(){var t,r=this,o=r.pfx,l=r.em,v=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,w=v==null?void 0:v.close;return`
      <div class="`.concat(o,"field ").concat(o,`file">
        <div id='`).concat(o,`input-holder'>
          <div class="`).concat(o,`btn-c">
            <button class="`).concat(o,'btn" id="').concat(o,`images" type="button" data-open-assets>
              `).concat(l.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(o,'preview-box" class="').concat(o,`preview-file" data-preview-box>
          <div id="`).concat(o,'preview-file" class="').concat(o,`preview-file-cnt" data-preview></div>
          <div id="`).concat(o,'close" class="').concat(o,'preview-file-close" data-clear-asset>').concat(w,`</div>
        </div>
      </div>
    `)},i.prototype.__setValueInput=function(t){var r=this,o=r.model,l=r.el,v=o.getDefaultValue(),w=l.querySelector("[data-preview-box]"),x=l.querySelector("[data-preview]");w.style.display=!t||t===v?"none":"",x.style.backgroundImage=t||o.getDefaultValue()},i.prototype.openAssetManager=function(){var t=this,r,o=(r=this.em)===null||r===void 0?void 0:r.Assets;o==null||o.open({select:function(l,v){var w=(0,wt.isString)(l)?l:l.get("src");t.model.upValue(w,{partial:!v}),v&&o.close()},types:["image"],accept:"image/*"})},i}(nt);const Wu=lu;var up=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nv=function(p){up(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.templateInput=function(t){return""},i.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},i.prototype.setValue=function(t){},i.prototype.onRender=function(){var t=this,r=t.ppfx,o=t.model,l=t.el;if(!this.inputInst){var v=o.input;v.ppfx=r,v.render();var w=l.querySelector(".".concat(r,"fields"));w.appendChild(v.el),this.input=v.inputEl.get(0),this.inputInst=v}},i.prototype.clearCached=function(){nt.prototype.clearCached.apply(this,arguments),this.inputInst=null},i}(nt);const $u=Nv;var g0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),v0=function(p){g0(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.setValue=function(t){var r;(r=this.inputInst)===null||r===void 0||r.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},i.prototype.remove=function(){var t=this;$u.prototype.remove.apply(this,arguments);var r=this.inputInst;return r&&r.remove&&r.remove(),["inputInst","$color"].forEach(function(o){return t[o]=null}),this},i.prototype.__handleChange=function(t,r){this.model.upValue(t,{partial:r})},i.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var r=this,o=r.ppfx,l=r.model,v=r.em,w=r.el,x=new zc({target:v,model:l,ppfx:o,onChange:this.__handleChange}),E=x.render();w.querySelector(".".concat(o,"fields")).appendChild(E.el),this.input=(t=E.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=E}},i}($u);const m0=v0;var y0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ah=function(){return ah=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ah.apply(this,arguments)},Vv=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},b0=function(p){y0(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return ah(ah({},Di.getDefaults()),{options:[],full:0})},i.prototype.getOptions=function(){var t=this.attributes,r=t.options,o=t.list;return(r&&r.length?r:o)||[]},i.prototype.getOption=function(t){var r=this,o=(0,pe.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(l){return r.getOptionId(l)===o})[0]||null},i.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},i.prototype.addOption=function(t){if(t){var r=this.getOptions();this.setOptions(Vv(Vv([],r,!0),[t],!1))}return this},i.prototype.getOptionId=function(t){return(0,pe.isDef)(t.id)?t.id:t.value},i.prototype.getOptionLabel=function(t,r){var o;r===void 0&&(r={});var l=r.locale,v=l===void 0?!0:l,w=((0,wt.isString)(t)?this.getOption(t):t)||{},x=this.getOptionId(w),E=w.label||w.name||x,M=r.property||this.getId();return v&&((o=this.em)===null||o===void 0?void 0:o.t("styleManager.options.".concat(M,".").concat(x)))||E},i.prototype.initialize=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];Di.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},i.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},i}(Di);const fg=b0;var w0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_0=function(p){w0(i,p);function i(t){var r=p.call(this,t)||this;return r.listenTo(r.model,"change:options",r.updateOptions),r}return i.prototype.templateInput=function(){var t=this,r=t.pfx,o=t.ppfx;return`
      <div class="`.concat(o,"field ").concat(o,`select">
        <span id="`).concat(r,`input-holder"></span>
        <div class="`).concat(o,`sel-arrow">
          <div class="`).concat(o,`d-s-arrow"></div>
        </div>
      </div>
    `)},i.prototype.updateOptions=function(){delete this.input,this.onRender()},i.prototype.onRender=function(){var t=this.pfx,r=this.model,o=r.getOptions();if(!this.input){var l=[];o.forEach(function(w){var x=r.getOptionId(w),E=r.getOptionLabel(x),M=w.style?w.style.replace(/"/g,"&quot;"):"",G=M?'style="'.concat(M,'"'):"",ot=x.replace(/"/g,"&quot;");l.push('<option value="'.concat(ot,'" ').concat(G,">").concat(E,"</option>"))});var v=this.el.querySelector("#".concat(t,"input-holder"));v.innerHTML="<select>".concat(l.join(""),"</select>"),this.input=v.firstChild}},i.prototype.__setValueInput=function(t){var r=this.model,o=this.getInputEl(),l=r.getOptions()[0],v=l?r.getOptionId(l):"";o&&(o.value=t||v)},i}(nt);const Fv=_0;var x0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),md=function(){return md=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},md.apply(this,arguments)},Ri=function(p){x0(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return md(md({},fg.getDefaults()),{full:1})},i}(fg);const sh=Ri;var cu=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fp=function(p){cu(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},i.prototype.onRender=function(){var t=this,r=t.pfx,o=t.ppfx,l=this.model,v="".concat(o,"radio-item-label"),w=l.getName(),x=l.getOptions(),E="".concat(r,"radio ").concat(r,"radio-").concat(w),M=l.cid;if(!this.input){var G=[];x.forEach(function(Ct){var Ut=Ct.className?"".concat(Ct.className," ").concat(r,"icon ").concat(v):"",ie=l.getOptionId(Ct),ae="".concat(w,"-").concat(ie,"-").concat(M),Ie=Ut?"":l.getOptionLabel(ie),qe=Ct.title?'title="'.concat(Ct.title,'"'):"",Ke=l.getValue()===ie?"checked":"";G.push(`
          <div class="`.concat(o,`radio-item">
            <input type="radio" class="`).concat(E,'" id="').concat(ae,'" name="').concat(w,"-").concat(M,'" value="').concat(ie,'" ').concat(Ke,`/>
            <label class="`).concat(Ut||v,'" ').concat(qe,' for="').concat(ae,'">').concat(Ie,`</label>
          </div>
        `))});var ot=this.el.querySelector(".".concat(o,"field"));ot.innerHTML='<div class="'.concat(o,'radio-items">').concat(G.join(""),"</div>"),this.input=ot.firstChild}},i.prototype.__setValueInput=function(t){var r,o=this.model,l=t||o.getDefaultValue(),v=(r=this.getInputEl())===null||r===void 0?void 0:r.querySelector('[value="'.concat(l,'"]'));v&&(v.checked=!0)},i}(Fv);const yd=fp;var C0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),De=function(){return De=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},De.apply(this,arguments)},Qe=function(p){C0(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return De(De({},Di.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},i.prototype.getUnits=function(){return this.get("units")||[]},i.prototype.getUnit=function(){return this.get("unit")},i.prototype.getMin=function(){return this.get("min")},i.prototype.getMax=function(){return this.get("max")},i.prototype.getStep=function(){return this.get("step")},i.prototype.upUnit=function(t,r){return r===void 0&&(r={}),this._up({unit:t},r)},i.prototype.initialize=function(t,r){t===void 0&&(t={}),r===void 0&&(r={}),Di.callParentInit(Di,this,t,r);var o=this.get("unit"),l=this.getUnits();this.input=(0,pe.hasWin)()?new Mg({model:this}):void 0,l.length&&!o&&this.set("unit",l[0],{silent:!0}),Di.callInit(this,t,r)},i.prototype.__getClearProps=function(){return De(De({},Di.prototype.__getClearProps()),{unit:""})},i.prototype.parseValue=function(t,r){r===void 0&&(r={});var o=Di.prototype.parseValue.apply(this,arguments),l=this.input.validateInputValue(o.value,De({deepCheck:1},r)),v=l.value,w=l.unit;return o.value=v,o.unit=w,o},i.prototype.getFullValue=function(){var t=this.get("value"),r=this.get("unit"),o=(0,wt.isUndefined)(t)?"":"".concat(t),l=!(0,wt.isUndefined)(r)&&o?r:"",v="".concat(o).concat(l);return Di.prototype.getFullValue.apply(this,[v])},i}(Di);const nr=Qe;var xr=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),on=function(){return on=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},on.apply(this,arguments)},_r=function(p){xr(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.defaults=function(){return on(on({},nr.getDefaults()),{showInput:1})},i}(nr);const oo=_r;var Ao=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),so=function(){return so=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},so.apply(this,arguments)},el=function(p){Ao(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.events=function(){return so(so({},$u.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},i.prototype.templateInput=function(t){var r=this.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},i.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},i.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},i.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},i.prototype.setValue=function(t){var r=this.model,o=r.parseValue(t);this.getSliderEl().value=t===""?r.getDefaultValue():parseFloat(o.value),$u.prototype.setValue.apply(this,arguments)},i.prototype.onRender=function(){$u.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},i.prototype.clearCached=function(){$u.prototype.clearCached.apply(this,arguments),delete this.slider},i}($u);const ma=el;var Io=q.FE.extend(Yg),cn=Io.extend({extendViewApi:1,init:function(){var p=this,i=p.opts,t=p.em,r=i.module||(t==null?void 0:t.get("StyleManager"));r&&(r.__listenAdd(this,r.events.propertyAdd),r.__listenRemove(this,r.events.propertyRemove))},types:[{id:"stack",model:a,view:tl,isType:function(p){if(p&&p.type=="stack")return p}},{id:"composite",model:cp,view:rr,isType:function(p){if(p&&p.type=="composite")return p}},{id:"file",model:Di,view:Wu,isType:function(p){if(p&&p.type=="file")return p}},{id:"color",model:Di,view:m0,isType:function(p){if(p&&p.type=="color")return p}},{id:"select",model:fg,view:Fv,isType:function(p){if(p&&p.type=="select")return p}},{id:"radio",model:sh,view:yd,isType:function(p){if(p&&p.type=="radio")return p}},{id:"slider",model:oo,view:ma,isType:function(p){if(p&&p.type=="slider")return p}},{id:"integer",model:nr,view:$u,isType:function(p){if(p&&p.type=="integer")return p}},{id:"number",model:nr,view:$u,isType:function(p){if(p&&p.type=="number")return p}},{id:"base",model:Di,view:nt,isType:function(p){return p.type="base",p}}]});const No=cn;var ti=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ya=function(){return ya=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},ya.apply(this,arguments)},ra=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},ds=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},rl=function(p){ti(i,p);function i(t,r){r===void 0&&(r={});var o=p.call(this,t)||this,l=r.em;o.em=l;var v=t||{},w=o.buildProperties(v.buildProps),x=o.get("name")||"",E=[];!o.get("id")&&o.set("id",x.replace(/ /g,"_").toLowerCase()),w?E=o.extendProperties(w):E=o.get("properties").map(function(G){return(0,wt.isString)(G)?o.buildProperties(G)[0]:G}).filter(Boolean),E=E.map(function(G){return o.checkExtend(G)});var M=new No(E,{em:l});return M.sector=o,o.set("properties",M),o}return i.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(i.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),i.prototype.getId=function(){return this.get("id")},i.prototype.getName=function(){var t,r=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(r)))||this.get("name")},i.prototype.setName=function(t){return this.set("name",t)},i.prototype.isOpen=function(){return!!this.get("open")},i.prototype.setOpen=function(t){return this.set("open",t)},i.prototype.isVisible=function(){return!!this.get("visible")},i.prototype.getProperties=function(t){t===void 0&&(t={});var r=this.properties,o=r.models?ds([],r.models,!0):r;return o.filter(function(l){var v=!0;if(t.withValue&&(v=l.hasValue({noParent:!0})),t.withParentValue){var w=l.hasValue({noParent:!0});v=!w&&l.hasValue()}return v})},i.prototype.getProperty=function(t){return this.getProperties().filter(function(r){return r.get("id")===t})[0]||void 0},i.prototype.addProperty=function(t,r){return this.properties.add(this.checkExtend(t),r)},i.prototype.extendProperties=function(t,r,o){o===void 0&&(o=!1);for(var l=t.length,v=r||this.get("properties"),w=this.get("extendBuilded"),x=[],E=0,M=v.length;E<M;E++){for(var G=v[E],ot=0,Ct=0;Ct<l;Ct++){var Ut=t[Ct];if(G.property==Ut.property||G.id==Ut.property){var ie=G.properties;ie&&ie.length&&(G.properties=this.extendProperties(Ut.properties||[],ie,1)),t[Ct]=w?(0,wt.extend)(Ut,G):G,x[Ct]=t[Ct],ot=1;continue}}ot||(t.push(G),x.push(G))}return o?x.filter(function(ae){return ae}):t},i.prototype.checkExtend=function(t){var r=((0,wt.isString)(t)?{extend:t}:t)||{},o=r.extend,l=ra(r,["extend"]);return o?ya(ya({},this.buildProperties([o])[0]||{}),l):t},i.prototype.buildProperties=function(t){var r,o=t||[];if(!o.length)return[];var l=(r=this.em)===null||r===void 0?void 0:r.Styles.builtIn;return l==null?void 0:l.build(o)},i}(q.Hn);const jl=rl;var xf=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gu=function(){return Gu=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Gu.apply(this,arguments)},nl=function(p){xf(i,p);function i(){return p!==null&&p.apply(this,arguments)||this}return i.prototype.initialize=function(t,r){r===void 0&&(r={});var o=r.module,l=r.em;this.em=l,this.module=o,this.listenTo(this,"reset",this.onReset)},i.prototype.model=function(t,r){r===void 0&&(r={});var o=r.collection.em;return new jl(t,Gu(Gu({},r),{em:o}))},i.prototype.onReset=function(t,r){r===void 0&&(r={});var o=r.previousModels||[];o.forEach(function(l){return l.get("properties").reset()})},i}(q.FE);const bd=nl;var bc=function(){return bc=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},bc.apply(this,arguments)},uu=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},fu=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},Wi=function(p){return p.map(function(i){return{id:i}})},lh=function(){function p(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var i=", sans-serif",t=["flex-start","flex-end","center"],r=fu(fu([],t,!0),["baseline","stretch"],!1);this.optsBgSize=Wi(["auto","cover","contain"]),this.optsBgAttach=Wi(["scroll","fixed","local"]),this.optsBgRepeat=Wi(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=Wi(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=Wi(["visible","hidden","scroll","auto"]),this.optsDir=Wi(["row","row-reverse","column","column-reverse"]),this.opstDisplay=Wi(["block","inline","inline-block","flex","none"]),this.optsTransitFn=Wi(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=Wi(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=Wi(["none","left","right"]),this.optsPos=Wi(["static","relative","absolute","fixed"]),this.optsTextAlign=Wi(["left","center","right","justify"]),this.optsFlexAlign=Wi(r),this.optsJustCont=Wi(fu(fu([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=Wi(fu(fu([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=Wi(fu(["auto"],r,!0)),this.optsTransitProp=Wi(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=Wi(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=Wi(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+i,"Arial Black, Gadget"+i,"Brush Script MT"+i,"Comic Sans MS, cursive"+i,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+i,"Impact, Charcoal"+i,"Lucida Sans Unicode, Lucida Grande"+i,"Tahoma, Geneva"+i,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+i,"Verdana, Geneva"+i].map(function(o){return{id:o,label:o.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return p.prototype.__sub=function(i){var t=this;return function(){return i.map(function(r){if((0,wt.isString)(r))return t.get(r);var o=r.extend,l=uu(r,["extend"]);return bc(bc({},t.get(o)),l)})}},p.prototype.init=function(){var i=this,t=this,r=t.fixedValues,o=t.requireFlex,l=t.typeNumber;this.props={};var v=[["text-shadow-h",{type:l,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:r},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:o},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:l,default:"0",requiresParent:o}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:o},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:o},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(w,x){var E=x.values,M=E["box-shadow-h"],G=E["box-shadow-v"],ot=E["box-shadow-blur"],Ct=E["box-shadow-spread"];return"".concat(M," ").concat(G," ").concat(ot," ").concat(Ct)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(w,x){var E=x.values,M=E["text-shadow-h"],G=E["text-shadow-v"],ot=E["text-shadow-blur"];return"".concat(M," ").concat(G," ").concat(ot)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(w,x){var E=x.values,M=E["background-repeat-sub"]||"",G=E["background-position-sub"]||"",ot=E["background-attachment-sub"]||"",Ct=E["background-size-sub"]||"";return[M,G,ot,Ct].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(w,x){var E=x.property,M=x.name,G=w[M]||"",ot=E.getLayerSeparator();return G?G.split(ot).map(function(Ct){var Ut=E.__parseFn(Ct),ie=Ut.name,ae=Ut.value;return{"transform-type":ie,"transform-value":ae}}):[]},toStyle:function(w,x){var E,M=x.name;return E={},E[M]="".concat(w["transform-type"],"(").concat(w["transform-value"],")"),E},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(w){var x=w.property,E=w.to;if(E.value){var M=x.getOption(),G=bc({},M.propValue||{}),ot=x.getParent().getProperty("transform-value"),Ct=ot.getUnit();(!Ct||(G==null?void 0:G.units.indexOf(Ct))<0)&&(G.unit=(G==null?void 0:G.units[0])||""),ot.up(G)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return v.forEach(function(w){var x=w[0],E=w[1],M=w[2];i.add(x,E||{},{from:M})}),this},p.prototype.add=function(i,t,r){t===void 0&&(t={}),r===void 0&&(r={});var o=r.from||"",l=this.props[o||i]||{},v=bc(bc(bc({},l),{property:i}),t);return v.properties&&(0,wt.isFunction)(v.properties)&&(v.properties=v.properties()),this.props[i]=v,v},p.prototype.get=function(i){return this.props[i]},p.prototype.build=function(i){var t=this,r=[],o=(0,wt.isString)(i)?[i]:i;return o.forEach(function(l){r.push(t.get(l)||{property:l})}),r},p}();const pu=lh;var S0=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rv=function(p,i){return Object.defineProperty?Object.defineProperty(p,"raw",{value:i}):p.raw=i,p},Cf=function(p){S0(i,p);function i(t){var r=p.call(this,t)||this,o=t.config||{},l=r.model,v=o.em;return r.config=o,r.em=v,r.pfx=o.stylePrefix||"",r.listenTo(l,"destroy remove",r.remove),r.listenTo(l,"change:open",r.updateOpen),r.listenTo(l,"change:visible",r.updateVisibility),r}return i.prototype.template=function(t){var r,o=t.pfx,l=t.label,v=(r=this.em)===null||r===void 0?void 0:r.getConfig().icons,w=(v==null?void 0:v.caret)||"",x="".concat(o,"sector-");return Te(ba||(ba=Rv([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),x,x,w,x,l)},i.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},i.prototype.updateOpen=function(){var t=this,r=t.$el,o=t.model,l=t.pfx,v=o.isOpen();r[v?"addClass":"removeClass"]("".concat(l,"open")),this.getPropertiesEl().style.display=v?"":"none"},i.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},i.prototype.getPropertiesEl=function(){var t=this,r=t.$el,o=t.pfx;return r.find(".".concat(o,"properties")).get(0)},i.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},i.prototype.renderProperties=function(){var t=this,r=t.model,o=t.config,l=r.get("properties");if(l){var v=new qt({collection:l,config:o});this.$el.append(v.render().el)}},i.prototype.render=function(){var t=this,r=t.pfx,o=t.model,l=t.$el,v=o.getId(),w=o.getName();return l.html(this.template({pfx:r,label:w})),this.renderProperties(),l.attr("class","".concat(r,"sector ").concat(r,"sector__").concat(v," no-select")),this.updateOpen(),this},i}(q.G7);const wd=Cf;var ba,pg=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fo=function(p){pg(i,p);function i(t){t===void 0&&(t={});var r=p.call(this,t)||this,o=t.module,l=t.config,v=r.collection;return r.pfx=(l==null?void 0:l.stylePrefix)||"",r.ppfx=(l==null?void 0:l.pStylePrefix)||"",r.config=l,r.module=o,r.listenTo(v,"add",r.addTo),r.listenTo(v,"reset",r.render),r}return i.prototype.remove=function(){var t=this;return q.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(r){return t[r]={}}),this},i.prototype.addTo=function(t,r,o){o===void 0&&(o={}),this.addToCollection(t,null,o)},i.prototype.addToCollection=function(t,r,o){o===void 0&&(o={});var l=this,v=l.config,w=l.el,x=r||w,E=new wd({model:t,config:v}).render().el;return(0,tr.$Q)(x,E,o.at),E},i.prototype.render=function(){var t=this,r=this,o=r.$el,l=r.pfx,v=r.ppfx;o.empty();var w=document.createDocumentFragment();return this.collection.each(function(x){return t.addToCollection(x,w)}),o.append(w),o.addClass("".concat(l,"sectors ").concat(v,"one-bg ").concat(v,"two-color")),this},i}(q.G7);const O0=fo;var ch=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gc=function(){return Gc=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},Gc.apply(this,arguments)},uh=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},_d="style",qu="".concat(_d,":"),fh="".concat(qu,"sector"),ph="".concat(fh,":add"),du="".concat(fh,":remove"),Hv="".concat(fh,":update"),dh="".concat(qu,"property"),Bv="".concat(dh,":add"),dg="".concat(dh,":remove"),Uv="".concat(dh,":update"),hh="".concat(qu,"layer:select"),Up="".concat(qu,"target"),T0="".concat(qu,"custom"),gh=function(p){return p||p===0},zp={all:_d,sectorAdd:ph,sectorRemove:du,sectorUpdate:Hv,propertyAdd:Bv,propertyRemove:dg,propertyUpdate:Uv,layerSelect:hh,target:Up,custom:T0},xd=function(p){ch(i,p);function i(t){var r=p.call(this,t,"StyleManager",new bd([],{em:t}),zp,f0)||this;r.Sector=jl,r.storageKey="",(0,wt.bindAll)(r,"__clearStateTarget");var o=r.config,l=o.pStylePrefix;l&&(o.stylePrefix=l+o.stylePrefix),r.builtIn=new pu,r.properties=new No([],{em:t,module:r}),r.sectors=r.all;var v=new q.Hn({targets:[]});r.model=v;var w=ne.g.update,x="component:toggled ".concat(w,":classes change:state change:device frame:resized selector:type");r.upAll=(0,wt.debounce)(function(){return r.__upSel()},0),v.listenTo(t,x,r.upAll),v.listenTo(t,"component:toggled",r.__clearStateTarget);var E=(0,wt.debounce)(function(){r.__upProps(),r.__trgCustom()},0);v.listenTo(t,"styleable:change undo redo",E);var M=(0,wt.debounce)(function(){return r.__trgCustom()},0);return v.listenTo(t,"".concat(hh," ").concat(Up),M),v.on("change:lastTarget",function(){return t.trigger(Up,r.getSelected())}),r}return i.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},i.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},i.prototype.__trgEv=function(t){for(var r,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];(r=this.em).trigger.apply(r,uh([t],o,!1))},i.prototype.__clearStateTarget=function(){var t=this,r=this.em,o=this.__getStateTarget();o&&(r==null||r.skip(function(){r.Css.remove(o),t.model.set({stateTarget:null})}))},i.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},i.prototype.postRender=function(){this.__appendTo()},i.prototype.addSector=function(t,r,o){o===void 0&&(o={});var l=this.getSector(t);return l||(r.id=t,l=this.sectors.add(r,o)),l},i.prototype.getSector=function(t,r){r===void 0&&(r={});var o=this.sectors.where({id:t})[0];return!o&&r.warn&&this._logNoSector(t),o||null},i.prototype.getSectors=function(t){t===void 0&&(t={});var r=this.sectors,o=r&&r.models?t.array?uh([],r.models,!0):r:[];return t.visible?o.filter(function(l){return l.isVisible()}):o},i.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},i.prototype.addProperty=function(t,r,o){o===void 0&&(o={});var l=this.getSector(t,{warn:!0}),v;return l&&(v=l.addProperty(r,o)),v},i.prototype.getProperty=function(t,r){var o=this.getSector(t,{warn:!0}),l;return o&&(l=o.properties.filter(function(v){return v.get("property")===r||v.get("id")===r})[0]),l},i.prototype.getProperties=function(t){var r,o=this.getSector(t,{warn:!0});return o&&(r=o.properties),r},i.prototype.removeProperty=function(t,r){var o=this.getProperties(t);return o?o.remove(this.getProperty(t,r)):null},i.prototype.select=function(t,r){var o=this;r===void 0&&(r={});var l=this.em,v=(0,wt.isArray)(t)?t:[t],w=r.stylable,x=l.Css,E=[];v.filter(Boolean).forEach(function(ie){var ae=ie;if((0,wt.isString)(ie)){var Ie=x.getRule(ie)||x.setRule(ie);!(0,wt.isUndefined)(w)&&Ie.set({stylable:w}),ae=Ie}E.push(ae)});var M=r.component||E.filter(function(ie){return(0,pe.isComponent)(ie)}).reverse()[0];E=E.map(function(ie){return o.getModelToStyle(ie)});var G=l.getState(),ot=E.slice().reverse()[0],Ct=this.getParentRules(ot,{state:G,component:M}),Ut=this.__getStateTarget();return l.skip(function(){var ie;if(G&&(!((ie=ot==null?void 0:ot.getState)===null||ie===void 0)&&ie.call(ot))){var ae=ot.getStyle();Ut?Ut.setStyle(ae):Ut=x.getAll().add({selectors:"gjs-selected",style:ae,shallow:!0,important:!0})}else Ut&&(x.remove(Ut),Ut=void 0)}),this.model.set({targets:E,lastTarget:ot,lastTargetParents:Ct,stateTarget:Ut,component:M}),this.__upProps(r),E},i.prototype.getSelected=function(){return this.model.get("lastTarget")},i.prototype.getSelectedAll=function(){return this.model.get("targets")},i.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},i.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},i.prototype.addStyleTargets=function(t,r){this.getSelectedAll().map(function(v){return v.addStyle(t,r)});var o=this.getSelected();o&&this.__emitCmpStyleUpdate(t);var l=this.__getStateTarget();o&&(l==null||l.setStyle(o.getStyle(),r))},i.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},i.prototype.getBuiltInAll=function(){return this.builtIn.props},i.prototype.addBuiltIn=function(t,r){return this.builtIn.add(t,r)},i.prototype.getModelToStyle=function(t,r){r===void 0&&(r={});var o=this.em,l=r.skipAdd;if(o&&(t!=null&&t.toHTML)){var v=o.getConfig(),w=o.UndoManager,x=o.Css,E=o.Selectors,M=E?E.getConfig():{},G=v.devicePreviewMode?"":o.get("state"),ot=t.get("classes"),Ct=ot.getStyleable(),Ut=Ct.length,ie=!M.componentFirst||r.useClasses,ae={noCount:1},Ie={state:G,addOpts:ae};w.skip(function(){var qe;if(Ut&&ie){var Ke=o.getCurrentMedia();qe=x.get(Ct,G,Ke),!qe&&!l&&(qe=x.add(Ct,G,Ke,{},ae))}else if(v.avoidInlineStyle){var Or=t.getId();qe=x.getIdRule(Or,Ie),!qe&&!l&&(qe=x.setIdRule(Or,{},Ie)),t.is("wrapper")&&qe.set("wrapper",1,ae)}qe&&(t=qe)})}return t},i.prototype.getParentRules=function(t,r){var o=r===void 0?{}:r,l=o.state,v=o.component,w=this.em,x=[];if(w&&t){var E=v,M=w.Css,G=w.CodeManager.getGenerator("css"),ot=t.toHTML?t:t.getComponent(),Ct={array:!0},Ut=[],ie=[],ae=[],Ie=[],qe=[],Ke=function(Vr){return Vr.length?M.getRules().filter(function(Cn){var Hn=Cn.getSelectors().map(function(Ko){return Ko.getFullName()});return Hn.length===0?!1:Hn.every(function(Ko){return Vr.indexOf(Ko)>=0})}):[]},Or=function(Vr){return Vr?M.getRules().filter(function(Cn){return Cn.selectorsToString()===Vr}):[]};if(ot)Ut=M.getRules("#".concat(ot.getId())),ie=Or(ot.get("tagName")),Ie=E?Ke(E.getSelectors().getFullName(Ct)):[],qe=Ie.concat(ie).concat(Ut);else{Ut=E?M.getRules("#".concat(E.getId())):[],ie=Or((E==null?void 0:E.get("tagName"))||"");var Gr=(E==null?void 0:E.getSelectors().getFullName(Ct))||[],bn=Gr.filter(function(Vr){return t.getSelectors().getFullName(Ct).findIndex(function(Cn){return Cn===Vr})===-1});ae=Ke(bn.concat(t.getSelectors().getFullName(Ct))),qe=ie.concat(Ut).concat(ae)}var Tn=qe.filter(function(Vr){return(0,wt.isUndefined)(l)?1:Vr.get("state")===l}).sort(G.sortRules).reverse();x=Tn.slice(Tn.indexOf(t)+1)}return x},i.prototype.addType=function(t,r){this.properties.addType(t,r)},i.prototype.getType=function(t){return this.properties.getType(t)},i.prototype.getTypes=function(){return this.properties.getTypes()},i.prototype.createType=function(t,r){var o=r===void 0?{}:r,l=o.model,v=l===void 0?{}:l,w=o.view,x=w===void 0?{}:w,E=this.config,M=this.getType(t);if(M)return new M.view(Gc({model:new M.model(v),config:E},x))},i.prototype.render=function(){var t=this,r=t.config,o=t.em,l=t.SectView,v=l&&l.el;return this.SectView=new O0({el:v,em:o,config:r,module:this,collection:this.sectors}),this.SectView.render().el},i.prototype._logNoSector=function(t){var r=this.em;r&&r.logWarning("'".concat(t,"' sector not found"))},i.prototype.__emitCmpStyleUpdate=function(t,r){r===void 0&&(r={});var o=this.em;if(!t.__p){var l=this.getSelectedAll(),v=r.components||o.getSelectedAll(),w=Array.isArray(v)?v:[v],x=Gc({},t);delete x.__p,w.forEach(function(E){return!l.includes(E)&&E.__onStyleChange(x)})}},i.prototype.__upProps=function(t){var r=this;t===void 0&&(t={});var o=this.getSelected();if(o){var l=this.sectors,v=this.model.get("component"),w=this.getSelectedParents(),x=o.getStyle(),E=w.map(function(M){return{target:M,style:M.getStyle()}});l.map(function(M){M.getProperties().map(function(G){r.__upProp(G,x,E,t)})}),l.forEach(function(M){var G=M.getProperties();G.forEach(function(Ct){var Ut=Ct.__checkVisibility({target:o,component:v,sectors:l});Ct.set("visible",Ut)});var ot=G.some(function(Ct){return Ct.isVisible()});M.set("visible",ot)})}},i.prototype.__upProp=function(t,r,o,l){var v=this,w=t.getName(),x=r[w],E=gh(x),M=t.getType()==="stack",G=t.getType()==="composite",ot=Gc(Gc({},l),{__up:!0}),Ct=!G&&!M,Ut=t,ie=t,ae=M?Ut.__getLayersFromStyle(r):[],Ie=G?ie.__getPropsFromStyle(r):{},qe=E?x:null,Ke=null;if(M&&ae===null||G&&Ie===null){var Or=M?"__getLayersFromStyle":"__getPropsFromStyle",Gr=o.filter(function(Hn){return Ut[Or](Hn.style)!==null})[0];if(Gr){qe=Gr.style[w],Ke=Gr.target;var bn=Ut[Or](Gr.style);M?ae=bn:Ie=bn}}else if(!E){qe=null;var Gr=o.filter(function(Ko){return gh(Ko.style[w])})[0];Gr&&(qe=Gr.style[w],Ke=Gr.target)}if(t.__setParentTarget(Ke),Ct&&t.__getFullValue()!==qe&&t.upValue(qe,ot),M&&Ut.__setLayers(ae||[],{isEmptyValue:Ut.isEmptyValueStyle(r)}),G){var Tn=ie.getProperties();if(ie.isDetached()){var Vr=ie.__getPropsFromStyle(r,{byName:!0})||{},Cn=o.map(function(Hn){return Gc(Gc({},Hn),{style:ie.__getPropsFromStyle(Hn.style,{byName:!0})||{}})});Tn.map(function(Hn){return v.__upProp(Hn,Vr,Cn,l)})}else ie.__setProperties(Ie||{},ot),ie.getProperties().map(function(Hn){return Hn.__setParentTarget(Ke)})}},i.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(r){r.reset(),r.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},i}(R);const Wp=xd;var Cd=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wa=function(){return wa=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},wa.apply(this,arguments)},Sf=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},hg=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Of=function(p,i){var t={};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&i.indexOf(r)<0&&(t[r]=p[r]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(p);o<r.length;o++)i.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(p,r[o])&&(t[r[o]]=p[r[o]]);return t},pp=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))};Kt().$=ft.default;var gg=[ad,ny,Wd,pd,Yn,ar,Kn,Wp,ge,Sy,Qy,Ry,u0,bm,Lm,ys,Tm,hi],zv=[$m,eu,nv,Gf];Ot({$:ft.default});var vh={debug:console.log,info:console.info,warning:console.warn,error:console.error},Wv=function(p){Cd(i,p);function i(t){t===void 0&&(t={});var r=p.call(this)||this;r.__skip=!1,r.defaultRunning=!1,r.destroyed=!1,r._config=t;var o=r.config;r.set("Config",t),r.set("modules",[]),r.set("toLoad",[]),r.set("storables",[]),r.set("selected",new k),r.set("dmode",o.dragMode);var l=o.el,v=o.log,w=v===!0?(0,wt.keys)(vh):(0,wt.isArray)(v)?v:[];return(0,wt.bindAll)(r,"initBaseColorPicker"),l&&o.fromElement&&(o.components=l.innerHTML),r.attrsOrig=l?(0,wt.toArray)(l.attributes).reduce(function(x,E){return x[E.nodeName]=E.nodeValue,x},{}):"",o.components&&!o.pageManager&&(o.pageManager={pages:[{component:o.components}]}),gg.forEach(function(x){return r.loadModule(x)}),zv.forEach(function(x){return r.loadStorableModule(x)}),r.on("change:componentHovered",r.componentHovered,r),r.on("change:changesCount",r.updateChanges,r),r.on("change:readyLoad change:readyCanvas",r._checkReady,r),w.forEach(function(x){return r.listenLog(x)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(x){var E=x.from,M=x.to;r.listenTo(r,E,function(){for(var G=[],ot=0;ot<arguments.length;ot++)G[ot]=arguments[ot];r.trigger.apply(r,pp([M],G,!1)),r.logWarning("The event '".concat(E,"' is deprecated, replace it with '").concat(M,"'"))})}),r}return i.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(i.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),i.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},i.prototype.getContainer=function(){return this.config.el},i.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),vh[t])},Object.defineProperty(i.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),i.prototype.getConfig=function(t){var r=this.config;return(0,wt.isUndefined)(t)?r:r[t]},i.prototype.loadOnStart=function(){var t=this,r=this.config,o=r.projectData,l=r.headless,v=this.Storage;this.toLoad.reverse().forEach(function(E){return E.onLoad()});var w=function(){t.modules.forEach(function(E){return E.postLoad&&E.postLoad(t)}),t.set("readyLoad",1)};l?(o&&this.loadData(o),w()):this._storageTimeout=setTimeout(function(){return Sf(t,void 0,void 0,function(){var E;return hg(this,function(M){switch(M.label){case 0:return o?(this.loadData(o),[3,5]):[3,1];case 1:if(!(v!=null&&v.canAutoload()))return[3,5];M.label=2;case 2:return M.trys.push([2,4,,5]),[4,this.load()];case 3:return M.sent(),[3,5];case 4:return E=M.sent(),this.logError(E),[3,5];case 5:return w(),[2]}})})});var x=new i({noticeOnUnload:!1,storageManager:!1,undoManager:!1});x.Pages.onLoad(),x.Canvas.postLoad(),this.set("shallow",x)},i.prototype.updateChanges=function(t,r,o){var l=this,v=this.Storage,w=this.getDirtyCount();o.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return l.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=w?function(){return!0}:null),v.isAutosave()&&w>=v.getStepsBeforeSave()&&this.store().catch(function(x){return l.logError(x)})},i.prototype.loadModule=function(t){var r=new t(this);return this.set(r.name,r),r.onLoad&&this.toLoad.push(r),this.modules.push(r),r},i.prototype.loadStorableModule=function(t){var r=this.loadModule(t);return this.storables.push(r),r},i.prototype.init=function(t,r){r===void 0&&(r={}),this.destroyed&&(this.initialize(r),this.destroyed=!1),this.set("Editor",t)},i.prototype.getEditor=function(){return this.get("Editor")},i.prototype.handleUpdates=function(t,r,o){var l=this;o===void 0&&(o={}),!(this.__skip||o.temporary||o.noCount||o.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var v=l.getDirtyCount()||0;o.unset;var w=Of(o,["unset"]);l.set("changesCount",v+1,w)},0))},i.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},i.prototype.componentHovered=function(t,r,o){var l=this.previous("componentHovered");l&&this.trigger("component:unhovered",l,o),r&&this.trigger("component:hovered",r,o)},i.prototype.getSelected=function(){return this.selected.lastComponent()},i.prototype.getSelectedAll=function(){return this.selected.allComponents()},i.prototype.setSelected=function(t,r){var o=this;r===void 0&&(r={});var l=r.event,v=l&&(l.ctrlKey||l.metaKey),w=(l||{}).shiftKey,x=((0,wt.isArray)(t)?t:[t]).map(function(ot){var Ct,Ut;return((Ut=(Ct=ot==null?void 0:ot.delegate)===null||Ct===void 0?void 0:Ct.select)===null||Ut===void 0?void 0:Ut.call(Ct,ot))||ot}).filter(Boolean),E=this.getSelectedAll(),M=this.getConfig().multipleSelection,G=(0,wt.isArray)(t);(G||!t)&&this.removeSelected(E.filter(function(ot){return!(0,wt.contains)(x,ot)})),x.forEach(function(ot){if(ot&&(o.trigger("component:select:before",ot,r),!ot.get("selectable")||r.abort))if(r.useValid){for(var Ct=ot.parent();Ct&&!Ct.get("selectable");)Ct=Ct.parent();ot=Ct}else return;if(v&&M)return o.toggleSelected(ot);if(w&&M){o.clearSelection(o.Canvas.getWindow());var Ut=ot.collection,ie=ot.index(),ae,Ie;if(o.getSelectedAll().forEach(function(qe){var Ke=qe.collection,Or=qe.index();Ke===Ut&&(Or<ie?ae=(0,wt.isUndefined)(ae)?Or:Math.max(ae,Or):Or>ie&&(Ie=(0,wt.isUndefined)(Ie)?Or:Math.min(Ie,Or)))}),!(0,wt.isUndefined)(ae))for(;ae!==ie;)o.addSelected(Ut.at(ae)),ae++;if(!(0,wt.isUndefined)(Ie))for(;Ie!==ie;)o.addSelected(Ut.at(Ie)),Ie--;return o.addSelected(ot)}!G&&o.removeSelected(E.filter(function(qe){return qe!==ot})),o.addSelected(ot,r)})},i.prototype.addSelected=function(t,r){var o=this;r===void 0&&(r={});var l=(0,wt.isArray)(t)?t:[t];l.forEach(function(v){var w=o.selected;if(!(!v||!v.get("selectable")||v.parents().some(function(E){return w.hasComponent(E)}))){r.forceChange&&o.removeSelected(v,r);var x=w.allComponents().filter(function(E){return(0,wt.contains)(E.parents(),v)});x.forEach(function(E){return o.removeSelected(E,r)}),w.addComponent(v,r),o.trigger("component:select",v,r),o.Canvas.addSpot({type:Wt.q.Select,component:v})}})},i.prototype.removeSelected=function(t,r){var o=this;r===void 0&&(r={}),this.selected.removeComponent(t,r);var l=(0,wt.isArray)(t)?t:[t];l.forEach(function(v){return o.Canvas.removeSpots({type:Wt.q.Select,component:v})})},i.prototype.toggleSelected=function(t,r){var o=this;r===void 0&&(r={});var l=(0,wt.isArray)(t)?t:[t];l.forEach(function(v){o.selected.hasComponent(v)?o.removeSelected(v,r):o.addSelected(v,r)})},i.prototype.setHovered=function(t,r){var o=this;r===void 0&&(r={});var l=function(x,E){var M=o,G=M.config,ot=M.Canvas,Ct=o.getHovered(),Ut=o.getSelectedAll(),ie=Wt.q.Hover,ae=Wt.q.Spacing;o.set("componentHovered",x||null,E),Ct&&(ot.removeSpots({type:ie,component:Ct}),ot.removeSpots({type:ae,component:Ct})),x&&(ot.addSpot({type:ie,component:x}),(!Ut.includes(x)||G.showOffsetsSelected)&&ot.addSpot({type:ae,component:x}))};if(!t)return l();var v="component:hover";if(r.forceChange&&l(),this.trigger("".concat(v,":before"),t,r),!t.get("hoverable"))if(r.useValid&&!r.abort){for(var w=t.parent();w&&!w.get("hoverable");)w=w.parent();t=w}else return;r.abort||(l(t,r),this.trigger(v,t,r))},i.prototype.getHovered=function(){return this.get("componentHovered")},i.prototype.setComponents=function(t,r){return r===void 0&&(r={}),this.Components.setComponents(t,r)},i.prototype.getComponents=function(){var t=this.Components,r=this.CodeManager;if(!(!t||!r)){var o=t.getComponents();return r.getCode(o,"json")}},i.prototype.setStyle=function(t,r){r===void 0&&(r={});var o=this.Css;return o.clear(r),o.getAll().add(t,r),this},i.prototype.addStyle=function(t,r){r===void 0&&(r={});var o=this.getStyle().add(t,r);return(0,wt.isArray)(o)?o:[o]},i.prototype.getStyle=function(){return this.Css.getAll()},i.prototype.setState=function(t){return this.set("state",t),this},i.prototype.getState=function(){return this.get("state")||""},i.prototype.getHtml=function(t){t===void 0&&(t={});var r=this.config,o=r.optsHtml,l=r.jsInHtml?this.getJs(t):"",v=t.component||this.Components.getComponent(),w=v?this.CodeManager.getCode(v,"html",wa(wa({},o),t)):"";return w+=l?"<script>".concat(l,"<\/script>"):"",w},i.prototype.getCss=function(t){t===void 0&&(t={});var r=this.config,o=r.optsCss,l=t.avoidProtected,v=(0,wt.isUndefined)(t.keepUnusedStyles)?r.keepUnusedStyles:t.keepUnusedStyles,w=this.Css,x=t.component||this.Components.getComponent(),E=l?"":r.protectedCss,M=x&&this.CodeManager.getCode(x,"css",wa(wa({cssc:w,keepUnusedStyles:v},o),t));return x?t.json?M:E+M:""},i.prototype.getJs=function(t){t===void 0&&(t={});var r=t.component||this.Components.getWrapper();return r?this.CodeManager.getCode(r,"js").trim():""},i.prototype.store=function(t){return Sf(this,void 0,void 0,function(){var r;return hg(this,function(o){switch(o.label){case 0:return r=this.storeData(),[4,this.Storage.store(r,t)];case 1:return o.sent(),this.clearDirtyCount(),[2,r]}})})},i.prototype.load=function(t,r){return r===void 0&&(r={}),Sf(this,void 0,void 0,function(){var o;return hg(this,function(l){switch(l.label){case 0:return[4,this.Storage.load(t)];case 1:return o=l.sent(),this.loadData(o),[4,(0,pe.wait)()];case 2:return l.sent(),r.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},i.prototype.storeData=function(){var t={},r=this.getEditing();return r&&r.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(o){t=wa(wa({},t),o.store(1))}),JSON.parse(JSON.stringify(t))},i.prototype.loadData=function(t){return t===void 0&&(t={}),(0,pe.isEmptyObj)(t)||(this.storables.forEach(function(r){return r.clear()}),this.storables.forEach(function(r){return r.load(t)})),t},i.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},i.prototype.runDefault=function(t){t===void 0&&(t={});var r=this.get("Commands").get(this.config.defaultCommand);!r||this.defaultRunning||(r.stop(this,this,t),r.run(this,this,t),this.defaultRunning=!0)},i.prototype.stopDefault=function(t){t===void 0&&(t={});var r=this.get("Commands"),o=r.get(this.config.defaultCommand);!o||!this.defaultRunning||(o.stop(this,this,t),this.defaultRunning=!1)},i.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},i.prototype.clearSelection=function(t){var r,o=t||window;(r=o.getSelection())===null||r===void 0||r.removeAllRanges()},i.prototype.getCurrentMedia=function(){var t=this.config,r=this.getDeviceModel(),o=t.mediaCondition,l=t.devicePreviewMode,v=r&&r.get("widthMedia");return r&&v&&!l?"(".concat(o,": ").concat(v,")"):""},i.prototype.getWrapper=function(){return this.Components.getWrapper()},i.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},i.prototype.getCurrentFrame=function(){return this.get("currentFrame")},i.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},i.prototype.getIcon=function(t){var r=this.config.icons||{};return r[t]||""},i.prototype.getDirtyCount=function(){return this.get("changesCount")},i.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},i.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},i.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},i.prototype.setDragMode=function(t){return this.set("dmode",t)},i.prototype.getDragMode=function(t){var r=(t==null?void 0:t.getDragMode())||this.get("dmode");return r||""},i.prototype.t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=this.get("I18n");return o==null?void 0:o.t.apply(o,t)},i.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},i.prototype.destroyAll=function(){var t=this,r=this,o=r.config,l=r.view,v=this.getEditor(),w=(o.grapesjs||{}).editors,x=w===void 0?[]:w,E=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),E==null||E.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(M){return M.destroy()}),l&&l.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(M){return t[M]={}}),x.splice(x.indexOf(v),1),(0,pe.hasWin)()&&(0,ft.default)(o.el).empty().attr(this.attrsOrig)},i.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},i.prototype.setEditing=function(t){return this.set("editing",t),this},i.prototype.isEditing=function(){return!!this.get("editing")},i.prototype.log=function(t,r){r===void 0&&(r={});var o=r.ns,l=r.level,v=l===void 0?"debug":l;if(this.trigger("log",t,r),v&&this.trigger("log:".concat(v),t,r),o){var w="log-".concat(o);this.trigger(w,t,r),v&&this.trigger("".concat(w,":").concat(v),t,r)}},i.prototype.logInfo=function(t,r){this.log(t,wa(wa({},r),{level:"info"}))},i.prototype.logWarning=function(t,r){this.log(t,wa(wa({},r),{level:"warning"}))},i.prototype.logError=function(t,r){this.log(t,wa(wa({},r),{level:"error"}))},i.prototype.initBaseColorPicker=function(t,r){r===void 0&&(r={});var o=this.config,l=o.colorPicker,v=l===void 0?{}:l,w=o.el,x=o.stylePrefix;return(0,ft.default)(t).spectrum(wa(wa({containerClassName:"".concat(x,"one-bg ").concat(x,"two-color"),appendTo:w||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},r),v))},i.prototype.skip=function(t){this.__skip=!0;var r=this.UndoManager;r?r.skip(t):t(),this.__skip=!1},i.prototype.data=function(t,r,o){var l="_gjs-data";if(t[l]||(t[l]={}),(0,wt.isUndefined)(o))return t[l][r];t[l][r]=o},i}(q.Hn);const $v=Wv;var vg=function(){var p=function(i,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},p(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");p(i,t);function r(){this.constructor=i}i.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mg=function(p){vg(i,p);function i(t){var r=p.call(this,{model:t})||this,o=t.Panels,l=t.UndoManager;return t.view=r,t.once("change:ready",function(){o.active(),o.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.Editor),t.clearDirtyCount()})}),r}return i.prototype.render=function(){var t=this,r=this,o=r.$el,l=r.model,v=l.Panels,w=l.Canvas,x=l.config,E=l.modules,M=x.stylePrefix,G=["".concat(M,"editor")];!x.customUI&&G.push("".concat(M,"one-bg ").concat(M,"two-color"));var ot=(0,ft.default)(x.el||"body ".concat(x.container));x.cssIcons&&(0,pe.appendStyles)(x.cssIcons,{unique:!0,prepand:!0}),o.empty(),x.width&&ot.css("width",x.width),x.height&&ot.css("height",x.height),o.append(w.render()),o.append(v.render());var Ct=l.shallow,Ut=Ct.Canvas.render();return Ut.style.display="none",o.append(Ut),o.attr("class",G.join(" ")),ot.addClass("".concat(M,"editor-cont")).empty().append(o),E.forEach(function(ie){var ae;return(ae=ie.postRender)===null||ae===void 0?void 0:ae.call(ie,t)}),this},i}(q.G7);const yg=mg;var $p=function(){return $p=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},$p.apply(this,arguments)},mh=function(p,i,t,r){function o(l){return l instanceof t?l:new t(function(v){v(l)})}return new(t||(t=Promise))(function(l,v){function w(M){try{E(r.next(M))}catch(G){v(G)}}function x(M){try{E(r.throw(M))}catch(G){v(G)}}function E(M){M.done?l(M.value):o(M.value).then(w,x)}E((r=r.apply(p,i||[])).next())})},bg=function(p,i){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(M){return x([E,M])}}function x(E){if(r)throw new TypeError("Generator is already executing.");for(;v&&(v=0,E[0]&&(t=0)),t;)try{if(r=1,o&&(l=E[0]&2?o.return:E[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,E[1])).done)return l;switch(o=0,l&&(E=[E[0]&2,l.value]),E[0]){case 0:case 1:l=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!l||E[1]>l[0]&&E[1]<l[3])){t.label=E[1];break}if(E[0]===6&&t.label<l[1]){t.label=l[1],l=E;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(E);break}l[2]&&t.ops.pop(),t.trys.pop();continue}E=i.call(p,t)}catch(M){E=[6,M],o=0}finally{r=l=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Gv=function(p,i,t){if(t||arguments.length===2)for(var r=0,o=i.length,l;r<o;r++)(l||!(r in i))&&(l||(l=Array.prototype.slice.call(i,0,r)),l[r]=i[r]);return p.concat(l||Array.prototype.slice.call(i))},Tf=function(){function p(i,t){i===void 0&&(i={}),t===void 0&&(t={});var r;this.html=Te,this.config=$p($p($p({},ke),i),{pStylePrefix:(r=i.stylePrefix)!==null&&r!==void 0?r:ke.stylePrefix}),this.em=new $v(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(p.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),p.prototype.getConfig=function(i){return this.em.getConfig(i)},p.prototype.getHtml=function(i){return this.em.getHtml(i)},p.prototype.getCss=function(i){return this.em.getCss(i)},p.prototype.getJs=function(i){return this.em.getJs(i)},p.prototype.getComponents=function(){return this.Components.getComponents()},p.prototype.getWrapper=function(){return this.Components.getWrapper()},p.prototype.setComponents=function(i,t){return t===void 0&&(t={}),this.em.setComponents(i,t),this},p.prototype.addComponents=function(i,t){return this.getWrapper().append(i,t)},p.prototype.getStyle=function(){return this.em.Css.getAll()},p.prototype.setStyle=function(i,t){return t===void 0&&(t={}),this.em.setStyle(i,t),this},p.prototype.addStyle=function(i,t){return t===void 0&&(t={}),this.em.addStyle(i,t)},p.prototype.getSelected=function(){return this.em.getSelected()},p.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},p.prototype.getSelectedToStyle=function(){var i=this.em.getSelected();if(i)return this.StyleManager.getModelToStyle(i)},p.prototype.select=function(i,t){return this.em.setSelected(i,t),this},p.prototype.selectAdd=function(i){return this.em.addSelected(i),this},p.prototype.selectRemove=function(i){return this.em.removeSelected(i),this},p.prototype.selectToggle=function(i){return this.em.toggleSelected(i),this},p.prototype.getEditing=function(){return this.em.getEditing()},p.prototype.setDevice=function(i){return this.em.set("device",i),this},p.prototype.getDevice=function(){return this.em.get("device")},p.prototype.runCommand=function(i,t){return t===void 0&&(t={}),this.Commands.run(i,t)},p.prototype.stopCommand=function(i,t){return t===void 0&&(t={}),this.Commands.stop(i,t)},p.prototype.store=function(i){return mh(this,void 0,void 0,function(){return bg(this,function(t){switch(t.label){case 0:return[4,this.em.store(i)];case 1:return[2,t.sent()]}})})},p.prototype.load=function(i,t){return t===void 0&&(t={}),mh(this,void 0,void 0,function(){return bg(this,function(r){switch(r.label){case 0:return[4,this.em.load(i,t)];case 1:return[2,r.sent()]}})})},p.prototype.getProjectData=function(){return this.em.storeData()},p.prototype.loadProjectData=function(i){return this.em.loadData(i)},p.prototype.storeData=function(){return this.em.storeData()},p.prototype.loadData=function(i){return this.em.loadData(i)},p.prototype.getContainer=function(){return this.config.el},p.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},p.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},p.prototype.refresh=function(i){this.em.refreshCanvas(i)},p.prototype.setCustomRte=function(i){this.RichTextEditor.customRte=i},p.prototype.setCustomParserCss=function(i){return this.Parser.getConfig().parserCss=i,this},p.prototype.setDragMode=function(i){return this.em.setDragMode(i),this},p.prototype.log=function(i,t){return t===void 0&&(t={}),this.em.log(i,t),this},p.prototype.t=function(){for(var i,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(i=this.em).t.apply(i,t)},p.prototype.on=function(i,t){return this.em.on(i,t),this},p.prototype.once=function(i,t){return this.em.once(i,t),this},p.prototype.off=function(i,t){return this.em.off(i,t),this},p.prototype.trigger=function(i){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.em.trigger.apply(this.em,Gv([i],t,!0)),this},p.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},p.prototype.getEl=function(){var i;return(i=this.editorView)===null||i===void 0?void 0:i.el},p.prototype.getModel=function(){return this.em},p.prototype.render=function(){var i;return(i=this.editorView)===null||i===void 0||i.remove(),this.editorView=new yg(this.em),this.editorView.render().el},p.prototype.onReady=function(i){this.em.get("ready")?i(this):this.em.on("load",i)},p}();const qv=Tf;var dp=function(p,i){var t=i.get(p);if(!t){var r=(0,pe.getGlobal)()[p];t=(r==null?void 0:r.default)||r}return t},Is=function(p,i){return(0,wt.isString)(p)?dp(p,i):(p==null?void 0:p.default)||p},hp=function(p,i){p.getModel().logWarning("Plugin ".concat(i," not found"),{context:"plugins",plugin:i})},Gp=function(){function p(){this.plugins={}}return p.prototype.add=function(i,t){var r=this.get(i);return r||(this.plugins[i]=t,t)},p.prototype.get=function(i){return this.plugins[i]},p.prototype.getAll=function(){return this.plugins},p}();const Kv=Gp,gp=function(){var p=function(){for(var t,r=window.navigator.userAgent,o=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],l=0;l<o.length;l++){var v=o[l];if(t=v[1].exec(r),t)break}return!!t};if((0,pe.hasWin)()&&p()){var i=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),i.apply(document.implementation,[t])}}};var hu=function(){return hu=Object.assign||function(p){for(var i,t=1,r=arguments.length;t<r;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(p[o]=i[o])}return p},hu.apply(this,arguments)};gp();var yh=new Kv,Sd=[],yn=function(p,i){var t=Is(p,yh);return function(r){t?t(r,i||{}):hp(r,p)}},_n={$:ft.default,editors:Sd,plugins:yh,usePlugin:yn,version:"0.21.12",init:function(p){p===void 0&&(p={});var i=p.headless,t=p.container;if(!t&&!i)throw new Error("'container' is required");var r=hu(hu({autorender:!0,plugins:[],pluginsOpts:{}},p),{grapesjs:this,el:i?void 0:(0,wt.isElement)(t)?t:document.querySelector(t)}),o=new qv(r,{$:ft.default}),l=o.getModel();return r.plugins.forEach(function(v){var w=Is(v,yh),x=r.pluginsOpts[v]||{};w?w(o,x):hp(o,v)}),l.loadOnStart(),r.autorender&&!i&&o.render(),Sd.push(o),o}};const Rn=_n})();var iw=fb.ZP,pb={exports:{}};/*! grapesjs-preset-webpage - 1.0.3 */(function(wt,pe){(function(Te,we){wt.exports=we()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:lm,()=>(()=>{var Te={d:(B,ct)=>{for(var vt in ct)Te.o(ct,vt)&&!Te.o(B,vt)&&Object.defineProperty(B,vt,{enumerable:!0,get:ct[vt]})},o:(B,ct)=>Object.prototype.hasOwnProperty.call(B,ct),r:B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},we={};Te.r(we),Te.d(we,{default:()=>k});var ke=function(){return ke=Object.assign||function(B){for(var ct,vt=1,dt=arguments.length;vt<dt;vt++)for(var H in ct=arguments[vt])Object.prototype.hasOwnProperty.call(ct,H)&&(B[H]=ct[H]);return B},ke.apply(this,arguments)},Jt="gjs-open-import-webpage",Kt="set-device-desktop",ft="set-device-tablet",Ot="set-device-mobile",q="canvas-clear",mt=function(){return mt=Object.assign||function(B){for(var ct,vt=1,dt=arguments.length;vt<dt;vt++)for(var H in ct=arguments[vt])Object.prototype.hasOwnProperty.call(ct,H)&&(B[H]=ct[H]);return B},mt.apply(this,arguments)};const K=function(B,ct){var vt=B.Commands,dt=ct.textCleanCanvas;(function(H,R){var I=H.getConfig("stylePrefix"),N=R.modalImportLabel,$=R.modalImportContent;H.Commands.add(Jt,{codeViewer:null,container:null,run:function(F){var V=typeof $=="function"?$(F):$,U=this.getCodeViewer();F.Modal.open({title:R.modalImportTitle,content:this.getContainer()}).onceClose(function(){return F.stopCommand(Jt)}),U.setContent(V??""),U.refresh(),setTimeout(function(){return U.focus()},0)},stop:function(){H.Modal.close()},getContainer:function(){if(!this.container){var F=this.getCodeViewer(),V=document.createElement("div");if(V.className="".concat(I,"import-container"),N){var U=document.createElement("div");U.className="".concat(I,"import-label"),U.innerHTML=N,V.appendChild(U)}V.appendChild(F.getElement());var it=document.createElement("button");it.type="button",it.innerHTML=R.modalImportButton,it.className="".concat(I,"btn-prim ").concat(I,"btn-import"),it.onclick=function(){H.Css.clear(),H.setComponents(F.getContent().trim()),H.Modal.close()},V.appendChild(it),this.container=V}return this.container},getCodeViewer:function(){return this.codeViewer||(this.codeViewer=H.CodeManager.createViewer(mt({codeName:"htmlmixed",theme:"hopscotch",readOnly:!1},R.importViewerOptions))),this.codeViewer}})})(B,ct),vt.add(Kt,{run:function(H){return H.setDevice("Desktop")},stop:function(){}}),vt.add(ft,{run:function(H){return H.setDevice("Tablet")},stop:function(){}}),vt.add(Ot,{run:function(H){return H.setDevice("Mobile portrait")},stop:function(){}}),vt.add(q,function(H){return confirm(dt)&&H.runCommand("core:canvas-clear")})};var st=function(){return st=Object.assign||function(B){for(var ct,vt=1,dt=arguments.length;vt<dt;vt++)for(var H in ct=arguments[vt])Object.prototype.hasOwnProperty.call(ct,H)&&(B[H]=ct[H]);return B},st.apply(this,arguments)};const k=function(B,ct){ct===void 0&&(ct={});var vt=st({blocks:["link-block","quote","text-basic"],block:function(){return{}},modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0},ct);if(vt.useCustomTheme&&typeof window<"u"){var dt="gjs-",H="";[["one","#463a3c"],["two","#b9a5a6"],["three","#804f7b"],["four","#d97aa6"]].forEach(function(I){var N=I[0],$=I[1];H+=`
        .`.concat(dt).concat(N,`-bg {
          background-color: `).concat($,`;
        }

        .`).concat(dt).concat(N,`-color {
          color: `).concat($,`;
        }

        .`).concat(dt).concat(N,`-color-h:hover {
          color: `).concat($,`;
        }
      `)});var R=document.createElement("style");R.innerText=H,document.head.appendChild(R)}(function(I,N){var $=function(F,V){N.blocks.indexOf(F)>=0&&I.Blocks.add(F,ke(ke({select:!0,category:"Basic"},V),N.block(F)))};$("link-block",{label:"Link Block",media:`<svg viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
    </svg>`,content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),$("quote",{label:"Quote",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z" />
    </svg>`,content:`<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
      </blockquote>`}),$("text-basic",{label:"Text section",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" />
    </svg>`,content:`<section class="bdg-sect">
      <h1 class="heading">Insert title here</h1>
      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
      </section>`})})(B,vt),K(B,vt),function(I,N){var $=I.Panels,F=I.getConfig(),V="sw-visibility",U="export-template",it="open-sm",X="open-tm",tt="open-layers",xt="open-blocks",Q="fullscreen",_t="preview",W='style="display: block; max-width:22px"';F.showDevices=!1,$.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:Kt,command:Kt,active:!0,label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`)},{id:ft,command:ft,label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`)},{id:Ot,command:Ot,label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`)}]},{id:"options",buttons:[{id:V,command:V,context:V,label:"<svg ".concat(W,` viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`)},{id:_t,context:_t,command:function(){return I.runCommand(_t)},label:"<svg ".concat(W,' viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>')},{id:Q,command:Q,context:Q,label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`)},{id:U,command:function(){return I.runCommand(U)},label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`)},{id:"undo",command:function(){return I.runCommand("core:undo")},label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`)},{id:"redo",command:function(){return I.runCommand("core:redo")},label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`)},{id:Jt,command:function(){return I.runCommand(Jt)},label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`)},{id:q,command:function(){return I.runCommand(q)},label:"<svg ".concat(W,` viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`)}]},{id:"views",buttons:[{id:it,command:it,active:!0,label:"<svg ".concat(W,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`)},{id:X,command:X,label:"<svg ".concat(W,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`)},{id:tt,command:tt,label:"<svg ".concat(W,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`)},{id:xt,command:xt,label:"<svg ".concat(W,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`)}]}]);var It=$.getButton("views",xt);I.on("load",function(){return It==null?void 0:It.set("active",!0)}),N.showStylesOnChange&&I.on("component:selected",function(){var $t=$.getButton("views",it),Yt=$.getButton("views",tt);Yt&&Yt.get("active")||!I.getSelected()||$t==null||$t.set("active",!0)})}(B,vt)};return we})())})(pb);var aw=pb.exports;const sw=cm(aw);var db={exports:{}};/*! grapesjs-blocks-basic - 1.0.2 */(function(wt,pe){(function(Te,we){wt.exports=we()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:lm,()=>(()=>{var Te={d:(ft,Ot)=>{for(var q in Ot)Te.o(Ot,q)&&!Te.o(ft,q)&&Object.defineProperty(ft,q,{enumerable:!0,get:Ot[q]})},o:(ft,Ot)=>Object.prototype.hasOwnProperty.call(ft,Ot),r:ft=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ft,"__esModule",{value:!0})}},we={};Te.r(we),Te.d(we,{default:()=>Kt});var ke=function(){return ke=Object.assign||function(ft){for(var Ot,q=1,mt=arguments.length;q<mt;q++)for(var K in Ot=arguments[q])Object.prototype.hasOwnProperty.call(Ot,K)&&(ft[K]=Ot[K]);return ft},ke.apply(this,arguments)},Jt=function(){return Jt=Object.assign||function(ft){for(var Ot,q=1,mt=arguments.length;q<mt;q++)for(var K in Ot=arguments[q])Object.prototype.hasOwnProperty.call(Ot,K)&&(ft[K]=Ot[K]);return ft},Jt.apply(this,arguments)};const Kt=function(ft,Ot){Ot===void 0&&(Ot={}),function(q,mt){var K=q.BlockManager,st=mt.category,k=mt.blocks,B=mt.stylePrefix,ct=mt.flexGrid,vt=mt.rowHeight,dt=mt.addBasicStyle,H="".concat(B,"row"),R="".concat(B,"cell"),I=ct?`
    .`.concat(H,` {
      display: flex;
      justify-content: flex-start;
      align-items: stretch;
      flex-wrap: nowrap;
      padding: 10px;
    }
    @media (max-width: 768px) {
      .`).concat(H,` {
        flex-wrap: wrap;
      }
    }`):`
    .`.concat(H,` {
      display: table;
      padding: 10px;
      width: 100%;
    }
    @media (max-width: 768px) {
      .`).concat(B,"cell, .").concat(B,"cell30, .").concat(B,`cell70 {
        width: 100%;
        display: block;
      }
    }`),N=ct?`
    .`.concat(R,` {
      min-height: `).concat(vt,`px;
      flex-grow: 1;
      flex-basis: 100%;
    }`):`
    .`.concat(R,` {
      width: 8%;
      display: table-cell;
      height: `).concat(vt,`px;
    }`),$=`
  .`.concat(B,`cell30 {
    width: 30%;
  }`),F=`
  .`.concat(B,`cell70 {
    width: 70%;
  }`),V=1,U={tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:V},it=ke(ke({},U),{cr:1,bc:0,currentUnit:1,minDim:V,step:.2});ct&&(it.keyWidth="flex-basis");var X={class:H,"data-gjs-droppable":".".concat(R),"data-gjs-resizable":U,"data-gjs-name":"Row"},tt={class:R,"data-gjs-draggable":".".concat(H),"data-gjs-resizable":it,"data-gjs-name":"Cell"};ct&&(tt["data-gjs-unstylable"]=["width"],tt["data-gjs-stylable-require"]=["flex-basis"]);var xt=[".".concat(H),".".concat(R)];q.on("selector:add",function(Yt){return xt.indexOf(Yt.getFullName())>=0&&Yt.set("private",1)});var Q=function(Yt){var Ne=[];for(var et in Yt){var Tt=Yt[et];Tt=Tt instanceof Array||Tt instanceof Object?JSON.stringify(Tt):Tt,Ne.push("".concat(et,"=").concat("'".concat(Tt,"'")))}return Ne.length?" ".concat(Ne.join(" ")):""},_t=function(Yt){return k.indexOf(Yt)>=0},W=Q(X),It=Q(tt),$t={category:st,select:!0};_t("column1")&&K.add("column1",ke(ke({},$t),{label:mt.labelColumn1,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h20V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(W,`>
        <div `).concat(It,`></div>
      </div>
      `).concat(dt?`<style>
          `.concat(I,`
          `).concat(N,`
        </style>`):"")})),_t("column2")&&K.add("column2",ke(ke({},$t),{label:mt.labelColumn2,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h8V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM13 20h8V4h-8v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(W,`>
        <div `).concat(It,`></div>
        <div `).concat(It,`></div>
      </div>
      `).concat(dt?`<style>
          `.concat(I,`
          `).concat(N,`
        </style>`):"")})),_t("column3")&&K.add("column3",ke(ke({},$t),{label:mt.labelColumn3,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h4V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM17 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1ZM9.5 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(W,`>
        <div `).concat(It,`></div>
        <div `).concat(It,`></div>
        <div `).concat(It,`></div>
      </div>
      `).concat(dt?`<style>
          `.concat(I,`
          `).concat(N,`
        </style>`):"")})),_t("column3-7")&&K.add("column3-7",ke(ke({},$t),{label:mt.labelColumn37,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h5V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM10 20h12V4H10v16Zm-1 0V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(W,`>
        <div `).concat(It," style='").concat(ct?"flex-basis":"width",`: 30%;'></div>
        <div `).concat(It," style='").concat(ct?"flex-basis":"width",`: 70%;'></div>
      </div>
      `).concat(dt?`<style>
          `.concat(I,`
          `).concat(N,`
          `).concat($,`
          `).concat(F,`
        </style>`):"")})),_t("text")&&K.add("text",ke(ke({},$t),{activate:!0,label:mt.labelText,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z" />
      </svg>`,content:{type:"text",content:"Insert your text here",style:{padding:"10px"}}})),_t("link")&&K.add("link",ke(ke({},$t),{label:mt.labelLink,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
      </svg>`,content:{type:"link",content:"Link",style:{color:"#d983a6"}}})),_t("image")&&K.add("image",ke(ke({},$t),{activate:!0,label:mt.labelImage,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z" />
      </svg>`,content:{style:{color:"black"},type:"image"}})),_t("video")&&K.add("video",ke(ke({},$t),{label:mt.labelVideo,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
      </svg>`,content:{type:"video",src:"img/video2.webm",style:{height:"350px",width:"615px"}}})),_t("map")&&K.add("map",ke(ke({},$t),{label:mt.labelMap,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M20.5,3L20.34,3.03L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3M10,5.47L14,6.87V18.53L10,17.13V5.47M5,6.46L8,5.45V17.15L5,18.31V6.46M19,17.54L16,18.55V6.86L19,5.7V17.54Z" />
      </svg>`,content:{type:"map",style:{height:"350px"}}}))}(ft,Jt({blocks:["column1","column2","column3","column3-7","text","link","image","video","map"],flexGrid:!1,stylePrefix:"gjs-",addBasicStyle:!0,category:"Basic",labelColumn1:"1 Column",labelColumn2:"2 Columns",labelColumn3:"3 Columns",labelColumn37:"2 Columns 3/7",labelText:"Text",labelLink:"Link",labelImage:"Image",labelVideo:"Video",labelMap:"Map",rowHeight:75},Ot))};return we})())})(db);var lw=db.exports;const cw=cm(lw);var hb={exports:{}};/*! grapesjs-advance-components - 1.0.7 */(function(wt,pe){(function(Te,we){wt.exports=we()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:lm,()=>(()=>{var Te={531:function(Kt,ft,Ot){(function(q,mt){Kt.exports=mt()})(typeof globalThis<"u"?globalThis:typeof window<"u"&&window,()=>(()=>{var q={410:(k,B,ct)=>{var vt,dt,H;dt=[ct(50),ct(316)],(H=typeof(vt=function(R,I){var N=Array.prototype.slice;function $(et,Tt,jt){return jt.length<=4?et.call(Tt,jt[0],jt[1],jt[2],jt[3]):et.apply(Tt,jt)}function F(et,Tt){return N.call(et,Tt)}function V(et,Tt){return et!=null&&(R.isArray(Tt)||(Tt=F(arguments,1)),R.all(Tt,function(jt){return jt in et}))}var U=function(){var et=!1,Tt=-1;return function(){return et||(Tt++,et=!0,R.defer(function(){et=!1})),Tt}}();function it(){this.registeredObjects=[],this.cidIndexes=[]}function X(et,Tt,jt,zt){for(var Ht,Dt=0,St=Tt.length;Dt<St;Dt++)if(Ht=Tt[Dt]){if(et==="on"){if(!zt.objectRegistry.register(Ht))continue}else if(!zt.objectRegistry.unregister(Ht))continue;R.isFunction(Ht[et])&&Ht[et]("all",jt,zt)}}function tt(et,Tt){var jt=Tt.type,zt=Tt.undoTypes,Ht=!zt[jt]||zt[jt][et];R.isFunction(Ht)&&Ht(Tt.object,Tt.before,Tt.after,Tt.options)}function xt(et,Tt,jt,zt,Ht){if(!(jt.isCurrentlyUndoRedoing||et==="undo"&&jt.pointer===-1||et==="redo"&&jt.pointer===jt.length-1)){jt.isCurrentlyUndoRedoing=!0;var Dt,St,Vt=et==="undo";for(Ht?St=Vt&&jt.pointer===jt.length-1||!Vt&&jt.pointer===-1?R.clone(jt.models):N.apply(jt.models,Vt?[0,jt.pointer]:[jt.pointer,jt.length-1]):(Dt=jt.at(Vt?jt.pointer:jt.pointer+1),St=zt?jt.where({magicFusionIndex:Dt.get("magicFusionIndex")}):[Dt]),jt.pointer+=(Vt?-1:1)*St.length;Dt=Vt?St.pop():St.shift();)Dt[et]();jt.isCurrentlyUndoRedoing=!1,Tt.trigger(et,Tt)}}function Q(et,Tt,jt,zt){if(et.track&&!et.isCurrentlyUndoRedoing&&Tt in zt&&function(St,Vt){var Me=St.condition,de=typeof Me;return de==="function"?!!$(Me,St,Vt):de!=="boolean"||Me}(zt[Tt],jt)){var Ht=$(zt[Tt].on,zt[Tt],jt);if(V(Ht,"object","before","after")){if(Ht.type=Tt,Ht.magicFusionIndex=U(),Ht.undoTypes=zt,et.pointer<et.length-1)for(var Dt=et.length-et.pointer-1;Dt--;)et.pop();et.pointer=et.length,et.add(Ht),et.length>et.maximumStackLength&&(et.shift(),et.pointer--)}}}it.prototype={isRegistered:function(et){return et&&et.cid?this.registeredObjects[et.cid]:R.contains(this.registeredObjects,et)},register:function(et){return!this.isRegistered(et)&&(et&&et.cid?(this.registeredObjects[et.cid]=et,this.cidIndexes.push(et.cid)):this.registeredObjects.push(et),!0)},unregister:function(et){if(this.isRegistered(et)){if(et&&et.cid)delete this.registeredObjects[et.cid],this.cidIndexes.splice(R.indexOf(this.cidIndexes,et.cid),1);else{var Tt=R.indexOf(this.registeredObjects,et);this.registeredObjects.splice(Tt,1)}return!0}return!1},get:function(){return R.map(this.cidIndexes,function(et){return this.registeredObjects[et]},this).concat(this.registeredObjects)}};var _t={add:{undo:function(et,Tt,jt,zt){et.remove(jt,zt)},redo:function(et,Tt,jt,zt){zt.index&&(zt.at=zt.index),et.add(jt,zt)},on:function(et,Tt,jt){return{object:Tt,before:void 0,after:et,options:R.clone(jt)}}},remove:{undo:function(et,Tt,jt,zt){"index"in zt&&(zt.at=zt.index),et.add(Tt,zt)},redo:function(et,Tt,jt,zt){et.remove(Tt,zt)},on:function(et,Tt,jt){return{object:Tt,before:et,after:void 0,options:R.clone(jt)}}},change:{undo:function(et,Tt,jt,zt){R.isEmpty(Tt)?R.each(R.keys(jt),et.unset,et):(et.set(Tt),zt&&zt.unsetData&&zt.unsetData.before&&zt.unsetData.before.length&&R.each(zt.unsetData.before,et.unset,et))},redo:function(et,Tt,jt,zt){R.isEmpty(jt)?R.each(R.keys(Tt),et.unset,et):(et.set(jt),zt&&zt.unsetData&&zt.unsetData.after&&zt.unsetData.after.length&&R.each(zt.unsetData.after,et.unset,et))},on:function(et,Tt){var jt=et.changedAttributes(),zt=R.keys(jt),Ht=R.pick(et.previousAttributes(),zt),Dt=R.keys(Ht),St=(Tt||(Tt={})).unsetData={after:[],before:[]};return zt.length!=Dt.length&&(zt.length>Dt.length?R.each(zt,function(Vt){Vt in Ht||St.before.push(Vt)},this):R.each(Dt,function(Vt){Vt in jt||St.after.push(Vt)})),{object:et,before:Ht,after:jt,options:R.clone(Tt)}}},reset:{undo:function(et,Tt,jt){et.reset(Tt)},redo:function(et,Tt,jt){et.reset(jt)},on:function(et,Tt){return{object:et,before:Tt.previousModels,after:R.clone(et.models)}}}};function W(){}function It(et,Tt,jt,zt){if(typeof Tt=="object")return R.each(Tt,function(Ht,Dt){et===2?It(et,Ht,jt,zt):It(et,Dt,Ht,jt)});switch(et){case 0:V(jt,"undo","redo","on")&&R.all(R.pick(jt,"undo","redo","on"),R.isFunction)&&(zt[Tt]=jt);break;case 1:zt[Tt]&&R.isObject(jt)&&(zt[Tt]=R.extend({},zt[Tt],jt));break;case 2:delete zt[Tt]}return this}W.prototype=_t;var $t=I.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(et){tt("undo",this.attributes)},redo:function(et){tt("redo",this.attributes)}}),Yt=I.Collection.extend({model:$t,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(et){this.maximumStackLength=et}}),Ne=I.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(et){this.stack=new Yt,this.objectRegistry=new it,this.undoTypes=new W,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(Tt,jt){this.stack.setMaxLength(jt)},this),et&&et.track&&this.startTracking(),et&&et.register&&(R.isArray(et.register)||R.isArguments(et.register)?$(this.register,this,et.register):this.register(et.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(et){Q(this.stack,et,F(arguments,1),this.undoTypes)},register:function(){X("on",arguments,this._addToStack,this)},unregister:function(){X("off",arguments,this._addToStack,this)},unregisterAll:function(){$(this.unregister,this,this.objectRegistry.get())},undo:function(et){xt("undo",this,this.stack,et)},undoAll:function(){xt("undo",this,this.stack,!1,!0)},redo:function(et){xt("redo",this,this.stack,et)},redoAll:function(){xt("redo",this,this.stack,!1,!0)},isAvailable:function(et){var Tt=this.stack,jt=Tt.length;switch(et){case"undo":return jt>0&&Tt.pointer>-1;case"redo":return jt>0&&Tt.pointer<jt-1;default:return!1}},merge:function(et){for(var Tt,jt=R.isArray(et)?et:F(arguments);Tt=jt.pop();)Tt instanceof Ne&&Tt.stack instanceof Yt&&(Tt.stack=this.stack)},addUndoType:function(et,Tt){It(0,et,Tt,this.undoTypes)},changeUndoType:function(et,Tt){It(1,et,Tt,this.undoTypes)},removeUndoType:function(et){It(2,et,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return R.extend(Ne,{defaults:function(et){R.extend(Ne.prototype.defaults,et)},addUndoType:function(et,Tt){It(0,et,Tt,_t)},changeUndoType:function(et,Tt){It(1,et,Tt,_t)},removeUndoType:function(et){It(2,et,void 0,_t)}}),I.UndoManager=Ne})=="function"?vt.apply(B,dt):vt)===void 0||(k.exports=H)},316:(k,B,ct)=>{var vt,dt,H;H=typeof self=="object"&&self.self===self&&self||typeof ct.g=="object"&&ct.g.global===ct.g&&ct.g,vt=[ct(50),ct(895),B],dt=(function(R,I,N){H.Backbone=function($,F,V,U){var it=$.Backbone,X=Array.prototype.slice;F.VERSION="1.4.1",F.$=U,F.noConflict=function(){return $.Backbone=it,this},F.emulateHTTP=!1,F.emulateJSON=!1;var tt,xt=F.Events={},Q=/\s+/,_t=function(yt,Wt,ne,Ft,_e){var Zt,gr=0;if(ne&&typeof ne=="object")for(Ft!==void 0&&("context"in _e)&&_e.context===void 0&&(_e.context=Ft),Zt=V.keys(ne);gr<Zt.length;gr++)Wt=_t(yt,Wt,Zt[gr],ne[Zt[gr]],_e);else if(ne&&Q.test(ne))for(Zt=ne.split(Q);gr<Zt.length;gr++)Wt=yt(Wt,Zt[gr],Ft,_e);else Wt=yt(Wt,ne,Ft,_e);return Wt};xt.on=function(yt,Wt,ne){return this._events=_t(W,this._events||{},yt,Wt,{context:ne,ctx:this,listening:tt}),tt&&((this._listeners||(this._listeners={}))[tt.id]=tt,tt.interop=!1),this},xt.listenTo=function(yt,Wt,ne){if(!yt)return this;var Ft=yt._listenId||(yt._listenId=V.uniqueId("l")),_e=this._listeningTo||(this._listeningTo={}),Zt=tt=_e[Ft];Zt||(this._listenId||(this._listenId=V.uniqueId("l")),Zt=tt=_e[Ft]=new Tt(this,yt));var gr=It(yt,Wt,ne,this);if(tt=void 0,gr)throw gr;return Zt.interop&&Zt.on(Wt,ne),this};var W=function(yt,Wt,ne,Ft){if(ne){var _e=yt[Wt]||(yt[Wt]=[]),Zt=Ft.context,gr=Ft.ctx,fr=Ft.listening;fr&&fr.count++,_e.push({callback:ne,context:Zt,ctx:Zt||gr,listening:fr})}return yt},It=function(yt,Wt,ne,Ft){try{yt.on(Wt,ne,Ft)}catch(_e){return _e}};xt.off=function(yt,Wt,ne){return this._events?(this._events=_t($t,this._events,yt,Wt,{context:ne,listeners:this._listeners}),this):this},xt.stopListening=function(yt,Wt,ne){var Ft=this._listeningTo;if(!Ft)return this;for(var _e=yt?[yt._listenId]:V.keys(Ft),Zt=0;Zt<_e.length;Zt++){var gr=Ft[_e[Zt]];if(!gr)break;gr.obj.off(Wt,ne,this),gr.interop&&gr.off(Wt,ne)}return V.isEmpty(Ft)&&(this._listeningTo=void 0),this};var $t=function(yt,Wt,ne,Ft){if(yt){var _e,Zt=Ft.context,gr=Ft.listeners,fr=0;if(Wt||Zt||ne){for(_e=Wt?[Wt]:V.keys(yt);fr<_e.length;fr++){var nn=yt[Wt=_e[fr]];if(!nn)break;for(var tn=[],wr=0;wr<nn.length;wr++){var tr=nn[wr];if(ne&&ne!==tr.callback&&ne!==tr.callback._callback||Zt&&Zt!==tr.context)tn.push(tr);else{var Un=tr.listening;Un&&Un.off(Wt,ne)}}tn.length?yt[Wt]=tn:delete yt[Wt]}return yt}for(_e=V.keys(gr);fr<_e.length;fr++)gr[_e[fr]].cleanup()}};xt.once=function(yt,Wt,ne){var Ft=_t(Yt,{},yt,Wt,this.off.bind(this));return typeof yt=="string"&&ne==null&&(Wt=void 0),this.on(Ft,Wt,ne)},xt.listenToOnce=function(yt,Wt,ne){var Ft=_t(Yt,{},Wt,ne,this.stopListening.bind(this,yt));return this.listenTo(yt,Ft)};var Yt=function(yt,Wt,ne,Ft){if(ne){var _e=yt[Wt]=V.once(function(){Ft(Wt,_e),ne.apply(this,arguments)});_e._callback=ne}return yt};xt.trigger=function(yt){if(!this._events)return this;for(var Wt=Math.max(0,arguments.length-1),ne=Array(Wt),Ft=0;Ft<Wt;Ft++)ne[Ft]=arguments[Ft+1];return _t(Ne,this._events,yt,void 0,ne),this};var Ne=function(yt,Wt,ne,Ft){if(yt){var _e=yt[Wt],Zt=yt.all;_e&&Zt&&(Zt=Zt.slice()),_e&&et(_e,Ft),Zt&&et(Zt,[Wt].concat(Ft))}return yt},et=function(yt,Wt){var ne,Ft=-1,_e=yt.length,Zt=Wt[0],gr=Wt[1],fr=Wt[2];switch(Wt.length){case 0:for(;++Ft<_e;)(ne=yt[Ft]).callback.call(ne.ctx);return;case 1:for(;++Ft<_e;)(ne=yt[Ft]).callback.call(ne.ctx,Zt);return;case 2:for(;++Ft<_e;)(ne=yt[Ft]).callback.call(ne.ctx,Zt,gr);return;case 3:for(;++Ft<_e;)(ne=yt[Ft]).callback.call(ne.ctx,Zt,gr,fr);return;default:for(;++Ft<_e;)(ne=yt[Ft]).callback.apply(ne.ctx,Wt);return}},Tt=function(yt,Wt){this.id=yt._listenId,this.listener=yt,this.obj=Wt,this.interop=!0,this.count=0,this._events=void 0};Tt.prototype.on=xt.on,Tt.prototype.off=function(yt,Wt){var ne;this.interop?(this._events=_t($t,this._events,yt,Wt,{context:void 0,listeners:void 0}),ne=!this._events):(this.count--,ne=this.count===0),ne&&this.cleanup()},Tt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},xt.bind=xt.on,xt.unbind=xt.off,V.extend(F,xt);var jt=F.Model=function(yt,Wt){var ne=yt||{};Wt||(Wt={}),this.preinitialize.apply(this,arguments),this.cid=V.uniqueId(this.cidPrefix),this.attributes={},Wt.collection&&(this.collection=Wt.collection),Wt.parse&&(ne=this.parse(ne,Wt)||{});var Ft=V.result(this,"defaults");ne=V.defaults(V.extend({},Ft,ne),Ft),this.set(ne,Wt),this.changed={},this.initialize.apply(this,arguments)};V.extend(jt.prototype,xt,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(yt){return V.clone(this.attributes)},sync:function(){return F.sync.apply(this,arguments)},get:function(yt){return this.attributes[yt]},escape:function(yt){return V.escape(this.get(yt))},has:function(yt){return this.get(yt)!=null},matches:function(yt){return!!V.iteratee(yt,this)(this.attributes)},set:function(yt,Wt,ne){if(yt==null)return this;var Ft;if(typeof yt=="object"?(Ft=yt,ne=Wt):(Ft={})[yt]=Wt,ne||(ne={}),!this._validate(Ft,ne))return!1;var _e=ne.unset,Zt=ne.silent,gr=[],fr=this._changing;this._changing=!0,fr||(this._previousAttributes=V.clone(this.attributes),this.changed={});var nn=this.attributes,tn=this.changed,wr=this._previousAttributes;for(var tr in Ft)Wt=Ft[tr],V.isEqual(nn[tr],Wt)||gr.push(tr),V.isEqual(wr[tr],Wt)?delete tn[tr]:tn[tr]=Wt,_e?delete nn[tr]:nn[tr]=Wt;if(this.idAttribute in Ft){var Un=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Un,ne)}if(!Zt){gr.length&&(this._pending=ne);for(var Rt=0;Rt<gr.length;Rt++)this.trigger("change:"+gr[Rt],this,nn[gr[Rt]],ne)}if(fr)return this;if(!Zt)for(;this._pending;)ne=this._pending,this._pending=!1,this.trigger("change",this,ne);return this._pending=!1,this._changing=!1,this},unset:function(yt,Wt){return this.set(yt,void 0,V.extend({},Wt,{unset:!0}))},clear:function(yt){var Wt={};for(var ne in this.attributes)Wt[ne]=void 0;return this.set(Wt,V.extend({},yt,{unset:!0}))},hasChanged:function(yt){return yt==null?!V.isEmpty(this.changed):V.has(this.changed,yt)},changedAttributes:function(yt){if(!yt)return!!this.hasChanged()&&V.clone(this.changed);var Wt,ne=this._changing?this._previousAttributes:this.attributes,Ft={};for(var _e in yt){var Zt=yt[_e];V.isEqual(ne[_e],Zt)||(Ft[_e]=Zt,Wt=!0)}return!!Wt&&Ft},previous:function(yt){return yt!=null&&this._previousAttributes?this._previousAttributes[yt]:null},previousAttributes:function(){return V.clone(this._previousAttributes)},fetch:function(yt){yt=V.extend({parse:!0},yt);var Wt=this,ne=yt.success;return yt.success=function(Ft){var _e=yt.parse?Wt.parse(Ft,yt):Ft;if(!Wt.set(_e,yt))return!1;ne&&ne.call(yt.context,Wt,Ft,yt),Wt.trigger("sync",Wt,Ft,yt)},rn(this,yt),this.sync("read",this,yt)},save:function(yt,Wt,ne){var Ft;yt==null||typeof yt=="object"?(Ft=yt,ne=Wt):(Ft={})[yt]=Wt;var _e=(ne=V.extend({validate:!0,parse:!0},ne)).wait;if(Ft&&!_e){if(!this.set(Ft,ne))return!1}else if(!this._validate(Ft,ne))return!1;var Zt=this,gr=ne.success,fr=this.attributes;ne.success=function(wr){Zt.attributes=fr;var tr=ne.parse?Zt.parse(wr,ne):wr;if(_e&&(tr=V.extend({},Ft,tr)),tr&&!Zt.set(tr,ne))return!1;gr&&gr.call(ne.context,Zt,wr,ne),Zt.trigger("sync",Zt,wr,ne)},rn(this,ne),Ft&&_e&&(this.attributes=V.extend({},fr,Ft));var nn=this.isNew()?"create":ne.patch?"patch":"update";nn!=="patch"||ne.attrs||(ne.attrs=Ft);var tn=this.sync(nn,this,ne);return this.attributes=fr,tn},destroy:function(yt){yt=yt?V.clone(yt):{};var Wt=this,ne=yt.success,Ft=yt.wait,_e=function(){Wt.stopListening(),Wt.trigger("destroy",Wt,Wt.collection,yt)};yt.success=function(gr){Ft&&_e(),ne&&ne.call(yt.context,Wt,gr,yt),Wt.isNew()||Wt.trigger("sync",Wt,gr,yt)};var Zt=!1;return this.isNew()?V.defer(yt.success):(rn(this,yt),Zt=this.sync("delete",this,yt)),Ft||_e(),Zt},url:function(){var yt=V.result(this,"urlRoot")||V.result(this.collection,"url")||Dr();if(this.isNew())return yt;var Wt=this.get(this.idAttribute);return yt.replace(/[^\/]$/,"$&/")+encodeURIComponent(Wt)},parse:function(yt,Wt){return yt},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(yt){return this._validate({},V.extend({},yt,{validate:!0}))},_validate:function(yt,Wt){if(!Wt.validate||!this.validate)return!0;yt=V.extend({},this.attributes,yt);var ne=this.validationError=this.validate(yt,Wt)||null;return!ne||(this.trigger("invalid",this,ne,V.extend(Wt,{validationError:ne})),!1)}});var zt=F.Collection=function(yt,Wt){Wt||(Wt={}),this.preinitialize.apply(this,arguments),Wt.model&&(this.model=Wt.model),Wt.comparator!==void 0&&(this.comparator=Wt.comparator),this._reset(),this.initialize.apply(this,arguments),yt&&this.reset(yt,V.extend({silent:!0},Wt))},Ht={add:!0,remove:!0,merge:!0},Dt={add:!0,remove:!1},St=function(yt,Wt,ne){ne=Math.min(Math.max(ne,0),yt.length);var Ft,_e=Array(yt.length-ne),Zt=Wt.length;for(Ft=0;Ft<_e.length;Ft++)_e[Ft]=yt[Ft+ne];for(Ft=0;Ft<Zt;Ft++)yt[Ft+ne]=Wt[Ft];for(Ft=0;Ft<_e.length;Ft++)yt[Ft+Zt+ne]=_e[Ft]};V.extend(zt.prototype,xt,{model:jt,preinitialize:function(){},initialize:function(){},toJSON:function(yt){return this.map(function(Wt){return Wt.toJSON(yt)})},sync:function(){return F.sync.apply(this,arguments)},add:function(yt,Wt){return this.set(yt,V.extend({merge:!1},Wt,Dt))},remove:function(yt,Wt){Wt=V.extend({},Wt);var ne=!V.isArray(yt);yt=ne?[yt]:yt.slice();var Ft=this._removeModels(yt,Wt);return!Wt.silent&&Ft.length&&(Wt.changes={added:[],merged:[],removed:Ft},this.trigger("update",this,Wt)),ne?Ft[0]:Ft},set:function(yt,Wt){if(yt!=null){(Wt=V.extend({},Ht,Wt)).parse&&!this._isModel(yt)&&(yt=this.parse(yt,Wt)||[]);var ne=!V.isArray(yt);yt=ne?[yt]:yt.slice();var Ft=Wt.at;Ft!=null&&(Ft=+Ft),Ft>this.length&&(Ft=this.length),Ft<0&&(Ft+=this.length+1);var _e,Zt,gr=[],fr=[],nn=[],tn=[],wr={},tr=Wt.add,Un=Wt.merge,Rt=Wt.remove,ee=!1,je=this.comparator&&Ft==null&&Wt.sort!==!1,Je=V.isString(this.comparator)?this.comparator:null;for(Zt=0;Zt<yt.length;Zt++){_e=yt[Zt];var Et=this.get(_e);if(Et){if(Un&&_e!==Et){var fe=this._isModel(_e)?_e.attributes:_e;Wt.parse&&(fe=Et.parse(fe,Wt)),Et.set(fe,Wt),nn.push(Et),je&&!ee&&(ee=Et.hasChanged(Je))}wr[Et.cid]||(wr[Et.cid]=!0,gr.push(Et)),yt[Zt]=Et}else tr&&(_e=yt[Zt]=this._prepareModel(_e,Wt))&&(fr.push(_e),this._addReference(_e,Wt),wr[_e.cid]=!0,gr.push(_e))}if(Rt){for(Zt=0;Zt<this.length;Zt++)wr[(_e=this.models[Zt]).cid]||tn.push(_e);tn.length&&this._removeModels(tn,Wt)}var Pe=!1,Ye=!je&&tr&&Rt;if(gr.length&&Ye?(Pe=this.length!==gr.length||V.some(this.models,function(Cr,Wr){return Cr!==gr[Wr]}),this.models.length=0,St(this.models,gr,0),this.length=this.models.length):fr.length&&(je&&(ee=!0),St(this.models,fr,Ft??this.length),this.length=this.models.length),ee&&this.sort({silent:!0}),!Wt.silent){for(Zt=0;Zt<fr.length;Zt++)Ft!=null&&(Wt.index=Ft+Zt),(_e=fr[Zt]).trigger("add",_e,this,Wt);(ee||Pe)&&this.trigger("sort",this,Wt),(fr.length||tn.length||nn.length)&&(Wt.changes={added:fr,removed:tn,merged:nn},this.trigger("update",this,Wt))}return ne?yt[0]:yt}},reset:function(yt,Wt){Wt=Wt?V.clone(Wt):{};for(var ne=0;ne<this.models.length;ne++)this._removeReference(this.models[ne],Wt);return Wt.previousModels=this.models,this._reset(),yt=this.add(yt,V.extend({silent:!0},Wt)),Wt.silent||this.trigger("reset",this,Wt),yt},push:function(yt,Wt){return this.add(yt,V.extend({at:this.length},Wt))},pop:function(yt){var Wt=this.at(this.length-1);return this.remove(Wt,yt)},unshift:function(yt,Wt){return this.add(yt,V.extend({at:0},Wt))},shift:function(yt){var Wt=this.at(0);return this.remove(Wt,yt)},slice:function(){return X.apply(this.models,arguments)},get:function(yt){if(yt!=null)return this._byId[yt]||this._byId[this.modelId(this._isModel(yt)?yt.attributes:yt,yt.idAttribute)]||yt.cid&&this._byId[yt.cid]},has:function(yt){return this.get(yt)!=null},at:function(yt){return yt<0&&(yt+=this.length),this.models[yt]},where:function(yt,Wt){return this[Wt?"find":"filter"](yt)},findWhere:function(yt){return this.where(yt,!0)},sort:function(yt){var Wt=this.comparator;if(!Wt)throw new Error("Cannot sort a set without a comparator");yt||(yt={});var ne=Wt.length;return V.isFunction(Wt)&&(Wt=Wt.bind(this)),ne===1||V.isString(Wt)?this.models=this.sortBy(Wt):this.models.sort(Wt),yt.silent||this.trigger("sort",this,yt),this},pluck:function(yt){return this.map(yt+"")},fetch:function(yt){var Wt=(yt=V.extend({parse:!0},yt)).success,ne=this;return yt.success=function(Ft){var _e=yt.reset?"reset":"set";ne[_e](Ft,yt),Wt&&Wt.call(yt.context,ne,Ft,yt),ne.trigger("sync",ne,Ft,yt)},rn(this,yt),this.sync("read",this,yt)},create:function(yt,Wt){var ne=(Wt=Wt?V.clone(Wt):{}).wait;if(!(yt=this._prepareModel(yt,Wt)))return!1;ne||this.add(yt,Wt);var Ft=this,_e=Wt.success;return Wt.success=function(Zt,gr,fr){ne&&Ft.add(Zt,fr),_e&&_e.call(fr.context,Zt,gr,fr)},yt.save(null,Wt),yt},parse:function(yt,Wt){return yt},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(yt,Wt){return yt[Wt||this.model.prototype.idAttribute||"id"]},values:function(){return new Me(this,de)},keys:function(){return new Me(this,Le)},entries:function(){return new Me(this,ar)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(yt,Wt){return this._isModel(yt)?(yt.collection||(yt.collection=this),yt):((Wt=Wt?V.clone(Wt):{}).collection=this,(ne=this.model.prototype?new this.model(yt,Wt):this.model(yt,Wt)).validationError?(this.trigger("invalid",this,ne.validationError,Wt),!1):ne);var ne},_removeModels:function(yt,Wt){for(var ne=[],Ft=0;Ft<yt.length;Ft++){var _e=this.get(yt[Ft]);if(_e){var Zt=this.indexOf(_e);this.models.splice(Zt,1),this.length--,delete this._byId[_e.cid];var gr=this.modelId(_e.attributes,_e.idAttribute);gr!=null&&delete this._byId[gr],Wt.silent||(Wt.index=Zt,_e.trigger("remove",_e,this,Wt)),ne.push(_e),this._removeReference(_e,Wt)}}return ne},_isModel:function(yt){return yt instanceof jt},_addReference:function(yt,Wt){this._byId[yt.cid]=yt;var ne=this.modelId(yt.attributes,yt.idAttribute);ne!=null&&(this._byId[ne]=yt),yt.on("all",this._onModelEvent,this)},_removeReference:function(yt,Wt){delete this._byId[yt.cid];var ne=this.modelId(yt.attributes,yt.idAttribute);ne!=null&&delete this._byId[ne],this===yt.collection&&delete yt.collection,yt.off("all",this._onModelEvent,this)},_onModelEvent:function(yt,Wt,ne,Ft){if(Wt){if((yt==="add"||yt==="remove")&&ne!==this)return;if(yt==="destroy"&&this.remove(Wt,Ft),yt==="changeId"){var _e=this.modelId(Wt.previousAttributes(),Wt.idAttribute),Zt=this.modelId(Wt.attributes,Wt.idAttribute);_e!=null&&delete this._byId[_e],Zt!=null&&(this._byId[Zt]=Wt)}}this.trigger.apply(this,arguments)}});var Vt=typeof Symbol=="function"&&Symbol.iterator;Vt&&(zt.prototype[Vt]=zt.prototype.values);var Me=function(yt,Wt){this._collection=yt,this._kind=Wt,this._index=0},de=1,Le=2,ar=3;Vt&&(Me.prototype[Vt]=function(){return this}),Me.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var yt,Wt=this._collection.at(this._index);if(this._index++,this._kind===de)yt=Wt;else{var ne=this._collection.modelId(Wt.attributes,Wt.idAttribute);yt=this._kind===Le?ne:[ne,Wt]}return{value:yt,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Er=F.View=function(yt){this.cid=V.uniqueId("view"),this.preinitialize.apply(this,arguments),V.extend(this,V.pick(yt,Ar)),this._ensureElement(),this.initialize.apply(this,arguments)},Nr=/^(\S+)\s*(.*)$/,Ar=["model","collection","el","id","attributes","className","tagName","events"];V.extend(Er.prototype,xt,{tagName:"div",$:function(yt){return this.$el.find(yt)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(yt){return this.undelegateEvents(),this._setElement(yt),this.delegateEvents(),this},_setElement:function(yt){this.$el=yt instanceof F.$?yt:F.$(yt),this.el=this.$el[0]},delegateEvents:function(yt){if(yt||(yt=V.result(this,"events")),!yt)return this;for(var Wt in this.undelegateEvents(),yt){var ne=yt[Wt];if(V.isFunction(ne)||(ne=this[ne]),ne){var Ft=Wt.match(Nr);this.delegate(Ft[1],Ft[2],ne.bind(this))}}return this},delegate:function(yt,Wt,ne){return this.$el.on(yt+".delegateEvents"+this.cid,Wt,ne),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(yt,Wt,ne){return this.$el.off(yt+".delegateEvents"+this.cid,Wt,ne),this},_createElement:function(yt){return document.createElement(yt)},_ensureElement:function(){if(this.el)this.setElement(V.result(this,"el"));else{var yt=V.extend({},V.result(this,"attributes"));this.id&&(yt.id=V.result(this,"id")),this.className&&(yt.class=V.result(this,"className")),this.setElement(this._createElement(V.result(this,"tagName"))),this._setAttributes(yt)}},_setAttributes:function(yt){this.$el.attr(yt)}});var Fr=function(yt,Wt,ne,Ft){V.each(ne,function(_e,Zt){Wt[Zt]&&(yt.prototype[Zt]=function(gr,fr,nn,tn){switch(fr){case 1:return function(){return gr[nn](this[tn])};case 2:return function(wr){return gr[nn](this[tn],wr)};case 3:return function(wr,tr){return gr[nn](this[tn],Xe(wr,this),tr)};case 4:return function(wr,tr,Un){return gr[nn](this[tn],Xe(wr,this),tr,Un)};default:return function(){var wr=X.call(arguments);return wr.unshift(this[tn]),gr[nn].apply(gr,wr)}}}(Wt,_e,Zt,Ft))})},Xe=function(yt,Wt){return V.isFunction(yt)?yt:V.isObject(yt)&&!Wt._isModel(yt)?at(yt):V.isString(yt)?function(ne){return ne.get(yt)}:yt},at=function(yt){var Wt=V.matches(yt);return function(ne){return Wt(ne.attributes)}};V.each([[zt,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[jt,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(yt){var Wt=yt[0],ne=yt[1],Ft=yt[2];Wt.mixin=function(_e){var Zt=V.reduce(V.functions(_e),function(gr,fr){return gr[fr]=0,gr},{});Fr(Wt,_e,Zt,Ft)},Fr(Wt,V,ne,Ft)}),F.sync=function(yt,Wt,ne){var Ft=kt[yt];V.defaults(ne||(ne={}),{emulateHTTP:F.emulateHTTP,emulateJSON:F.emulateJSON});var _e={type:Ft,dataType:"json"};if(ne.url||(_e.url=V.result(Wt,"url")||Dr()),ne.data!=null||!Wt||yt!=="create"&&yt!=="update"&&yt!=="patch"||(_e.contentType="application/json",_e.data=JSON.stringify(ne.attrs||Wt.toJSON(ne))),ne.emulateJSON&&(_e.contentType="application/x-www-form-urlencoded",_e.data=_e.data?{model:_e.data}:{}),ne.emulateHTTP&&(Ft==="PUT"||Ft==="DELETE"||Ft==="PATCH")){_e.type="POST",ne.emulateJSON&&(_e.data._method=Ft);var Zt=ne.beforeSend;ne.beforeSend=function(nn){if(nn.setRequestHeader("X-HTTP-Method-Override",Ft),Zt)return Zt.apply(this,arguments)}}_e.type==="GET"||ne.emulateJSON||(_e.processData=!1);var gr=ne.error;ne.error=function(nn,tn,wr){ne.textStatus=tn,ne.errorThrown=wr,gr&&gr.call(ne.context,nn,tn,wr)};var fr=ne.xhr=F.ajax(V.extend(_e,ne));return Wt.trigger("request",Wt,fr,ne),fr};var kt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};F.ajax=function(){return F.$.ajax.apply(F.$,arguments)};var Gt=F.Router=function(yt){yt||(yt={}),this.preinitialize.apply(this,arguments),yt.routes&&(this.routes=yt.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},ye=/\((.*?)\)/g,Ae=/(\(\?)?:\w+/g,pt=/\*\w+/g,le=/[\-{}\[\]+?.,\\\^$|#\s]/g;V.extend(Gt.prototype,xt,{preinitialize:function(){},initialize:function(){},route:function(yt,Wt,ne){V.isRegExp(yt)||(yt=this._routeToRegExp(yt)),V.isFunction(Wt)&&(ne=Wt,Wt=""),ne||(ne=this[Wt]);var Ft=this;return F.history.route(yt,function(_e){var Zt=Ft._extractParameters(yt,_e);Ft.execute(ne,Zt,Wt)!==!1&&(Ft.trigger.apply(Ft,["route:"+Wt].concat(Zt)),Ft.trigger("route",Wt,Zt),F.history.trigger("route",Ft,Wt,Zt))}),this},execute:function(yt,Wt,ne){yt&&yt.apply(this,Wt)},navigate:function(yt,Wt){return F.history.navigate(yt,Wt),this},_bindRoutes:function(){if(this.routes){this.routes=V.result(this,"routes");for(var yt,Wt=V.keys(this.routes);(yt=Wt.pop())!=null;)this.route(yt,this.routes[yt])}},_routeToRegExp:function(yt){return yt=yt.replace(le,"\\$&").replace(ye,"(?:$1)?").replace(Ae,function(Wt,ne){return ne?Wt:"([^/?]+)"}).replace(pt,"([^?]*?)"),new RegExp("^"+yt+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(yt,Wt){var ne=yt.exec(Wt).slice(1);return V.map(ne,function(Ft,_e){return _e===ne.length-1?Ft||null:Ft?decodeURIComponent(Ft):null})}});var se=F.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},or=/^[#\/]|\s+$/g,mr=/^\/+|\/+$/g,er=/#.*$/;se.started=!1,V.extend(se.prototype,xt,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(yt){return decodeURI(yt.replace(/%25/g,"%2525"))},getSearch:function(){var yt=this.location.href.replace(/#.*/,"").match(/\?.+/);return yt?yt[0]:""},getHash:function(yt){var Wt=(yt||this).location.href.match(/#(.*)$/);return Wt?Wt[1]:""},getPath:function(){var yt=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return yt.charAt(0)==="/"?yt.slice(1):yt},getFragment:function(yt){return yt==null&&(yt=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),yt.replace(or,"")},start:function(yt){if(se.started)throw new Error("Backbone.history has already been started");if(se.started=!0,this.options=V.extend({root:"/"},this.options,yt),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(mr,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var Wt=this.root.slice(0,-1)||"/";return this.location.replace(Wt+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var ne=document.body,Ft=ne.insertBefore(this.iframe,ne.firstChild).contentWindow;Ft.document.open(),Ft.document.close(),Ft.location.hash="#"+this.fragment}var _e=window.addEventListener||function(Zt,gr){return attachEvent("on"+Zt,gr)};if(this._usePushState?_e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?_e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var yt=window.removeEventListener||function(Wt,ne){return detachEvent("on"+Wt,ne)};this._usePushState?yt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&yt("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),se.started=!1},route:function(yt,Wt){this.handlers.unshift({route:yt,callback:Wt})},checkUrl:function(yt){var Wt=this.getFragment();if(Wt===this.fragment&&this.iframe&&(Wt=this.getHash(this.iframe.contentWindow)),Wt===this.fragment)return!1;this.iframe&&this.navigate(Wt),this.loadUrl()},loadUrl:function(yt){return!!this.matchRoot()&&(yt=this.fragment=this.getFragment(yt),V.some(this.handlers,function(Wt){if(Wt.route.test(yt))return Wt.callback(yt),!0}))},navigate:function(yt,Wt){if(!se.started)return!1;Wt&&Wt!==!0||(Wt={trigger:!!Wt}),yt=this.getFragment(yt||"");var ne=this.root;yt!==""&&yt.charAt(0)!=="?"||(ne=ne.slice(0,-1)||"/");var Ft=ne+yt;yt=yt.replace(er,"");var _e=this.decodeFragment(yt);if(this.fragment!==_e){if(this.fragment=_e,this._usePushState)this.history[Wt.replace?"replaceState":"pushState"]({},document.title,Ft);else{if(!this._wantsHashChange)return this.location.assign(Ft);if(this._updateHash(this.location,yt,Wt.replace),this.iframe&&yt!==this.getHash(this.iframe.contentWindow)){var Zt=this.iframe.contentWindow;Wt.replace||(Zt.document.open(),Zt.document.close()),this._updateHash(Zt.location,yt,Wt.replace)}}return Wt.trigger?this.loadUrl(yt):void 0}},_updateHash:function(yt,Wt,ne){if(ne){var Ft=yt.href.replace(/(javascript:|#).*$/,"");yt.replace(Ft+"#"+Wt)}else yt.hash="#"+Wt}}),F.history=new se,jt.extend=zt.extend=Gt.extend=Er.extend=se.extend=function(yt,Wt){var ne,Ft=this;return ne=yt&&V.has(yt,"constructor")?yt.constructor:function(){return Ft.apply(this,arguments)},V.extend(ne,Ft,Wt),ne.prototype=V.create(Ft.prototype,yt),ne.prototype.constructor=ne,ne.__super__=Ft.prototype,ne};var Dr=function(){throw new Error('A "url" property or function must be specified')},rn=function(yt,Wt){var ne=Wt.error;Wt.error=function(Ft){ne&&ne.call(Wt.context,yt,Ft,Wt),yt.trigger("error",yt,Ft,Wt)}};return F}(H,N,R,I)}).apply(B,vt),dt===void 0||(k.exports=dt)},210:(k,B,ct)=>{(function(vt){vt.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(H,R){return/^[;{}]$/.test(R)}}),vt.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(H,R,I,N){return this.jsonMode?/^[\[,{]$/.test(R)||/^}/.test(I):(R!=";"||!N.lexical||N.lexical.type!=")")&&/^[;{}]$/.test(R)&&!/^;/.test(I)}});var dt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;vt.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(H,R,I,N){var $=!1;return this.configuration=="html"&&($=!!N.context&&dt.test(N.context.tagName)),!$&&(H=="tag"&&/>$/.test(R)&&N.context||/^</.test(I))}}),vt.defineExtension("commentRange",function(H,R,I){var N=this,$=vt.innerMode(N.getMode(),N.getTokenAt(R).state).mode;N.operation(function(){if(H)N.replaceRange($.commentEnd,I),N.replaceRange($.commentStart,R),R.line==I.line&&R.ch==I.ch&&N.setCursor(R.line,R.ch+$.commentStart.length);else{var F=N.getRange(R,I),V=F.indexOf($.commentStart),U=F.lastIndexOf($.commentEnd);V>-1&&U>-1&&U>V&&(F=F.substr(0,V)+F.substring(V+$.commentStart.length,U)+F.substr(U+$.commentEnd.length)),N.replaceRange(F,R,I)}})}),vt.defineExtension("autoIndentRange",function(H,R){var I=this;this.operation(function(){for(var N=H.line;N<=R.line;N++)I.indentLine(N,"smart")})}),vt.defineExtension("autoFormatRange",function(H,R){var I=this,N=I.getMode(),$=I.getRange(H,R).split(`
`),F=vt.copyState(N,I.getTokenAt(H).state),V=I.getOption("tabSize"),U="",it=0,X=H.ch===0;function tt(){U+=`
`,X=!0,++it}for(var xt=0;xt<$.length;++xt){for(var Q=new vt.StringStream($[xt],V);!Q.eol();){var _t=vt.innerMode(N,F),W=N.token(Q,F),It=Q.current();Q.start=Q.pos,X&&!/\S/.test(It)||(U+=It,X=!1),!X&&_t.mode.newlineAfterToken&&_t.mode.newlineAfterToken(W,It,Q.string.slice(Q.pos)||$[xt+1]||"",_t.state)&&tt()}!Q.pos&&N.blankLine&&N.blankLine(F),!X&&xt<$.length-1&&tt()}I.operation(function(){I.replaceRange(U,H,R);for(var $t=H.line+1,Yt=H.line+it;$t<=Yt;++$t)I.indentLine($t,"smart");I.setSelection(H,I.getCursor(!1))})})})(ct(631))},631:function(k){k.exports=function(){var B=navigator.userAgent,ct=navigator.platform,vt=/gecko\/\d/i.test(B),dt=/MSIE \d/.test(B),H=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(B),R=/Edge\/(\d+)/.exec(B),I=dt||H||R,N=I&&(dt?document.documentMode||6:+(R||H)[1]),$=!R&&/WebKit\//.test(B),F=$&&/Qt\/\d+\.\d+/.test(B),V=!R&&/Chrome\/(\d+)/.exec(B),U=V&&+V[1],it=/Opera\//.test(B),X=/Apple Computer/.test(navigator.vendor),tt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(B),xt=/PhantomJS/.test(B),Q=X&&(/Mobile\/\w+/.test(B)||navigator.maxTouchPoints>2),_t=/Android/.test(B),W=Q||_t||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(B),It=Q||/Mac/.test(ct),$t=/\bCrOS\b/.test(B),Yt=/win/i.test(ct),Ne=it&&B.match(/Version\/(\d*\.\d*)/);Ne&&(Ne=Number(Ne[1])),Ne&&Ne>=15&&(it=!1,$=!0);var et=It&&(F||it&&(Ne==null||Ne<12.11)),Tt=vt||I&&N>=9;function jt(f){return new RegExp("(^|\\s)"+f+"(?:$|\\s)\\s*")}var zt,Ht=function(f,g){var S=f.className,_=jt(g).exec(S);if(_){var T=S.slice(_.index+_[0].length);f.className=S.slice(0,_.index)+(T?_[1]+T:"")}};function Dt(f){for(var g=f.childNodes.length;g>0;--g)f.removeChild(f.firstChild);return f}function St(f,g){return Dt(f).appendChild(g)}function Vt(f,g,S,_){var T=document.createElement(f);if(S&&(T.className=S),_&&(T.style.cssText=_),typeof g=="string")T.appendChild(document.createTextNode(g));else if(g)for(var D=0;D<g.length;++D)T.appendChild(g[D]);return T}function Me(f,g,S,_){var T=Vt(f,g,S,_);return T.setAttribute("role","presentation"),T}function de(f,g){if(g.nodeType==3&&(g=g.parentNode),f.contains)return f.contains(g);do if(g.nodeType==11&&(g=g.host),g==f)return!0;while(g=g.parentNode)}function Le(){var f;try{f=document.activeElement}catch{f=document.body||null}for(;f&&f.shadowRoot&&f.shadowRoot.activeElement;)f=f.shadowRoot.activeElement;return f}function ar(f,g){var S=f.className;jt(g).test(S)||(f.className+=(S?" ":"")+g)}function Er(f,g){for(var S=f.split(" "),_=0;_<S.length;_++)S[_]&&!jt(S[_]).test(g)&&(g+=" "+S[_]);return g}zt=document.createRange?function(f,g,S,_){var T=document.createRange();return T.setEnd(_||f,S),T.setStart(f,g),T}:function(f,g,S){var _=document.body.createTextRange();try{_.moveToElementText(f.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",S),_.moveStart("character",g),_};var Nr=function(f){f.select()};function Ar(f){var g=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,g)}}function Fr(f,g,S){for(var _ in g||(g={}),f)!f.hasOwnProperty(_)||S===!1&&g.hasOwnProperty(_)||(g[_]=f[_]);return g}function Xe(f,g,S,_,T){g==null&&(g=f.search(/[^\s\u00a0]/))==-1&&(g=f.length);for(var D=_||0,Y=T||0;;){var Z=f.indexOf("	",D);if(Z<0||Z>=g)return Y+(g-D);Y+=Z-D,Y+=S-Y%S,D=Z+1}}Q?Nr=function(f){f.selectionStart=0,f.selectionEnd=f.value.length}:I&&(Nr=function(f){try{f.select()}catch{}});var at=function(){this.id=null,this.f=null,this.time=0,this.handler=Ar(this.onTimeout,this)};function kt(f,g){for(var S=0;S<f.length;++S)if(f[S]==g)return S;return-1}at.prototype.onTimeout=function(f){f.id=0,f.time<=+new Date?f.f():setTimeout(f.handler,f.time-+new Date)},at.prototype.set=function(f,g){this.f=g;var S=+new Date+f;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,f),this.time=S)};var Gt=50,ye={toString:function(){return"CodeMirror.Pass"}},Ae={scroll:!1},pt={origin:"*mouse"},le={origin:"+move"};function se(f,g,S){for(var _=0,T=0;;){var D=f.indexOf("	",_);D==-1&&(D=f.length);var Y=D-_;if(D==f.length||T+Y>=g)return _+Math.min(Y,g-T);if(T+=D-_,_=D+1,(T+=S-T%S)>=g)return _}}var or=[""];function mr(f){for(;or.length<=f;)or.push(er(or)+" ");return or[f]}function er(f){return f[f.length-1]}function Dr(f,g){for(var S=[],_=0;_<f.length;_++)S[_]=g(f[_],_);return S}function rn(){}function yt(f,g){var S;return Object.create?S=Object.create(f):(rn.prototype=f,S=new rn),g&&Fr(g,S),S}var Wt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ne(f){return/\w/.test(f)||f>""&&(f.toUpperCase()!=f.toLowerCase()||Wt.test(f))}function Ft(f,g){return g?!!(g.source.indexOf("\\w")>-1&&ne(f))||g.test(f):ne(f)}function _e(f){for(var g in f)if(f.hasOwnProperty(g)&&f[g])return!1;return!0}var Zt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function gr(f){return f.charCodeAt(0)>=768&&Zt.test(f)}function fr(f,g,S){for(;(S<0?g>0:g<f.length)&&gr(f.charAt(g));)g+=S;return g}function nn(f,g,S){for(var _=g>S?-1:1;;){if(g==S)return g;var T=(g+S)/2,D=_<0?Math.ceil(T):Math.floor(T);if(D==g)return f(D)?g:S;f(D)?S=D:g=D+_}}var tn=null;function wr(f,g,S){var _;tn=null;for(var T=0;T<f.length;++T){var D=f[T];if(D.from<g&&D.to>g)return T;D.to==g&&(D.from!=D.to&&S=="before"?_=T:tn=T),D.from==g&&(D.from!=D.to&&S!="before"?_=T:tn=T)}return _??tn}var tr=function(){var f="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function S(ht){return ht<=247?f.charAt(ht):1424<=ht&&ht<=1524?"R":1536<=ht&&ht<=1785?g.charAt(ht-1536):1774<=ht&&ht<=2220?"r":8192<=ht&&ht<=8203?"w":ht==8204?"b":"L"}var _=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,D=/[LRr]/,Y=/[Lb1n]/,Z=/[1n]/;function bt(ht,Qt,re){this.level=ht,this.from=Qt,this.to=re}return function(ht,Qt){var re=Qt=="ltr"?"L":"R";if(ht.length==0||Qt=="ltr"&&!_.test(ht))return!1;for(var Se=ht.length,ge=[],$e=0;$e<Se;++$e)ge.push(S(ht.charCodeAt($e)));for(var Ge=0,He=re;Ge<Se;++Ge){var Ze=ge[Ge];Ze=="m"?ge[Ge]=He:He=Ze}for(var vr=0,br=re;vr<Se;++vr){var Pr=ge[vr];Pr=="1"&&br=="r"?ge[vr]="n":D.test(Pr)&&(br=Pr,Pr=="r"&&(ge[vr]="R"))}for(var Sr=1,Tr=ge[0];Sr<Se-1;++Sr){var hn=ge[Sr];hn=="+"&&Tr=="1"&&ge[Sr+1]=="1"?ge[Sr]="1":hn!=","||Tr!=ge[Sr+1]||Tr!="1"&&Tr!="n"||(ge[Sr]=Tr),Tr=hn}for(var ln=0;ln<Se;++ln){var Bn=ge[ln];if(Bn==",")ge[ln]="N";else if(Bn=="%"){var Ur=void 0;for(Ur=ln+1;Ur<Se&&ge[Ur]=="%";++Ur);for(var no=ln&&ge[ln-1]=="!"||Ur<Se&&ge[Ur]=="1"?"1":"N",ko=ln;ko<Ur;++ko)ge[ko]=no;ln=Ur-1}}for(var qn=0,Qn=re;qn<Se;++qn){var uo=ge[qn];Qn=="L"&&uo=="1"?ge[qn]="L":D.test(uo)&&(Qn=uo)}for(var On=0;On<Se;++On)if(T.test(ge[On])){var $n=void 0;for($n=On+1;$n<Se&&T.test(ge[$n]);++$n);for(var Kn=(On?ge[On-1]:re)=="L",Mn=Kn==(($n<Se?ge[$n]:re)=="L")?Kn?"L":"R":re,gi=On;gi<$n;++gi)ge[gi]=Mn;On=$n-1}for(var vi,po=[],to=0;to<Se;)if(Y.test(ge[to])){var Ga=to;for(++to;to<Se&&Y.test(ge[to]);++to);po.push(new bt(0,Ga,to))}else{var xn=to,Li=po.length,Qi=Qt=="rtl"?1:0;for(++to;to<Se&&ge[to]!="L";++to);for(var vo=xn;vo<to;)if(Z.test(ge[vo])){xn<vo&&(po.splice(Li,0,new bt(1,xn,vo)),Li+=Qi);var Na=vo;for(++vo;vo<to&&Z.test(ge[vo]);++vo);po.splice(Li,0,new bt(2,Na,vo)),Li+=Qi,xn=vo}else++vo;xn<to&&po.splice(Li,0,new bt(1,xn,to))}return Qt=="ltr"&&(po[0].level==1&&(vi=ht.match(/^\s+/))&&(po[0].from=vi[0].length,po.unshift(new bt(0,0,vi[0].length))),er(po).level==1&&(vi=ht.match(/\s+$/))&&(er(po).to-=vi[0].length,po.push(new bt(0,Se-vi[0].length,Se)))),Qt=="rtl"?po.reverse():po}}();function Un(f,g){var S=f.order;return S==null&&(S=f.order=tr(f.text,g)),S}var Rt=[],ee=function(f,g,S){if(f.addEventListener)f.addEventListener(g,S,!1);else if(f.attachEvent)f.attachEvent("on"+g,S);else{var _=f._handlers||(f._handlers={});_[g]=(_[g]||Rt).concat(S)}};function je(f,g){return f._handlers&&f._handlers[g]||Rt}function Je(f,g,S){if(f.removeEventListener)f.removeEventListener(g,S,!1);else if(f.detachEvent)f.detachEvent("on"+g,S);else{var _=f._handlers,T=_&&_[g];if(T){var D=kt(T,S);D>-1&&(_[g]=T.slice(0,D).concat(T.slice(D+1)))}}}function Et(f,g){var S=je(f,g);if(S.length)for(var _=Array.prototype.slice.call(arguments,2),T=0;T<S.length;++T)S[T].apply(null,_)}function fe(f,g,S){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),Et(f,S||g.type,f,g),Dn(g)||g.codemirrorIgnore}function Pe(f){var g=f._handlers&&f._handlers.cursorActivity;if(g)for(var S=f.curOp.cursorActivityHandlers||(f.curOp.cursorActivityHandlers=[]),_=0;_<g.length;++_)kt(S,g[_])==-1&&S.push(g[_])}function Ye(f,g){return je(f,g).length>0}function Cr(f){f.prototype.on=function(g,S){ee(this,g,S)},f.prototype.off=function(g,S){Je(this,g,S)}}function Wr(f){f.preventDefault?f.preventDefault():f.returnValue=!1}function zn(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0}function Dn(f){return f.defaultPrevented!=null?f.defaultPrevented:f.returnValue==0}function lo(f){Wr(f),zn(f)}function ho(f){return f.target||f.srcElement}function vn(f){var g=f.which;return g==null&&(1&f.button?g=1:2&f.button?g=3:4&f.button&&(g=2)),It&&f.ctrlKey&&g==1&&(g=3),g}var ro,In,Yo=function(){if(I&&N<9)return!1;var f=Vt("div");return"draggable"in f||"dragDrop"in f}();function go(f){if(ro==null){var g=Vt("span","​");St(f,Vt("span",[g,document.createTextNode("x")])),f.firstChild.offsetHeight!=0&&(ro=g.offsetWidth<=1&&g.offsetHeight>2&&!(I&&N<8))}var S=ro?Vt("span","​"):Vt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}function Fo(f){if(In!=null)return In;var g=St(f,document.createTextNode("AخA")),S=zt(g,0,1).getBoundingClientRect(),_=zt(g,1,2).getBoundingClientRect();return Dt(f),!(!S||S.left==S.right)&&(In=_.right-S.right<3)}var Co,yo=`

b`.split(/\n/).length!=3?function(f){for(var g=0,S=[],_=f.length;g<=_;){var T=f.indexOf(`
`,g);T==-1&&(T=f.length);var D=f.slice(g,f.charAt(T-1)=="\r"?T-1:T),Y=D.indexOf("\r");Y!=-1?(S.push(D.slice(0,Y)),g+=Y+1):(S.push(D),g=T+1)}return S}:function(f){return f.split(/\r\n?|\n/)},So=window.getSelection?function(f){try{return f.selectionStart!=f.selectionEnd}catch{return!1}}:function(f){var g;try{g=f.ownerDocument.selection.createRange()}catch{}return!(!g||g.parentElement()!=f)&&g.compareEndPoints("StartToEnd",g)!=0},Gi="oncopy"in(Co=Vt("div"))||(Co.setAttribute("oncopy","return;"),typeof Co.oncopy=="function"),Wo=null,Mo={},ao={};function Xn(f,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),Mo[f]=g}function $r(f){if(typeof f=="string"&&ao.hasOwnProperty(f))f=ao[f];else if(f&&typeof f.name=="string"&&ao.hasOwnProperty(f.name)){var g=ao[f.name];typeof g=="string"&&(g={name:g}),(f=yt(g,f)).name=g.name}else{if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f))return $r("application/xml");if(typeof f=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(f))return $r("application/json")}return typeof f=="string"?{name:f}:f||{name:"null"}}function co(f,g){g=$r(g);var S=Mo[g.name];if(!S)return co(f,"text/plain");var _=S(f,g);if(Jn.hasOwnProperty(g.name)){var T=Jn[g.name];for(var D in T)T.hasOwnProperty(D)&&(_.hasOwnProperty(D)&&(_["_"+D]=_[D]),_[D]=T[D])}if(_.name=g.name,g.helperType&&(_.helperType=g.helperType),g.modeProps)for(var Y in g.modeProps)_[Y]=g.modeProps[Y];return _}var Jn={};function Lo(f,g){Fr(g,Jn.hasOwnProperty(f)?Jn[f]:Jn[f]={})}function fn(f,g){if(g===!0)return g;if(f.copyState)return f.copyState(g);var S={};for(var _ in g){var T=g[_];T instanceof Array&&(T=T.concat([])),S[_]=T}return S}function Oo(f,g){for(var S;f.innerMode&&(S=f.innerMode(g))&&S.mode!=f;)g=S.state,f=S.mode;return S||{mode:f,state:g}}function bo(f,g,S){return!f.startState||f.startState(g,S)}var En=function(f,g,S){this.pos=this.start=0,this.string=f,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};function rt(f,g){if((g-=f.first)<0||g>=f.size)throw new Error("There is no line "+(g+f.first)+" in the document.");for(var S=f;!S.lines;)for(var _=0;;++_){var T=S.children[_],D=T.chunkSize();if(g<D){S=T;break}g-=D}return S.lines[g]}function Xt(f,g,S){var _=[],T=g.line;return f.iter(g.line,S.line+1,function(D){var Y=D.text;T==S.line&&(Y=Y.slice(0,S.ch)),T==g.line&&(Y=Y.slice(g.ch)),_.push(Y),++T}),_}function ir(f,g,S){var _=[];return f.iter(g,S,function(T){_.push(T.text)}),_}function pr(f,g){var S=g-f.height;if(S)for(var _=f;_;_=_.parent)_.height+=S}function Hr(f){if(f.parent==null)return null;for(var g=f.parent,S=kt(g.lines,f),_=g.parent;_;g=_,_=_.parent)for(var T=0;_.children[T]!=g;++T)S+=_.children[T].chunkSize();return S+g.first}function wn(f,g){var S=f.first;t:do{for(var _=0;_<f.children.length;++_){var T=f.children[_],D=T.height;if(g<D){f=T;continue t}g-=D,S+=T.chunkSize()}return S}while(!f.lines);for(var Y=0;Y<f.lines.length;++Y){var Z=f.lines[Y].height;if(g<Z)break;g-=Z}return S+Y}function Nn(f,g){return g>=f.first&&g<f.first+f.size}function Xr(f,g){return String(f.lineNumberFormatter(g+f.firstLineNumber))}function cr(f,g,S){if(S===void 0&&(S=null),!(this instanceof cr))return new cr(f,g,S);this.line=f,this.ch=g,this.sticky=S}function Mt(f,g){return f.line-g.line||f.ch-g.ch}function xe(f,g){return f.sticky==g.sticky&&Mt(f,g)==0}function lr(f){return cr(f.line,f.ch)}function Yr(f,g){return Mt(f,g)<0?g:f}function en(f,g){return Mt(f,g)<0?f:g}function gn(f,g){return Math.max(f.first,Math.min(g,f.first+f.size-1))}function Mr(f,g){if(g.line<f.first)return cr(f.first,0);var S=f.first+f.size-1;return g.line>S?cr(S,rt(f,S).text.length):function(_,T){var D=_.ch;return D==null||D>T?cr(_.line,T):D<0?cr(_.line,0):_}(g,rt(f,g.line).text.length)}function Wn(f,g){for(var S=[],_=0;_<g.length;_++)S[_]=Mr(f,g[_]);return S}En.prototype.eol=function(){return this.pos>=this.string.length},En.prototype.sol=function(){return this.pos==this.lineStart},En.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},En.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},En.prototype.eat=function(f){var g=this.string.charAt(this.pos);if(typeof f=="string"?g==f:g&&(f.test?f.test(g):f(g)))return++this.pos,g},En.prototype.eatWhile=function(f){for(var g=this.pos;this.eat(f););return this.pos>g},En.prototype.eatSpace=function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>f},En.prototype.skipToEnd=function(){this.pos=this.string.length},En.prototype.skipTo=function(f){var g=this.string.indexOf(f,this.pos);if(g>-1)return this.pos=g,!0},En.prototype.backUp=function(f){this.pos-=f},En.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Xe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Xe(this.string,this.lineStart,this.tabSize):0)},En.prototype.indentation=function(){return Xe(this.string,null,this.tabSize)-(this.lineStart?Xe(this.string,this.lineStart,this.tabSize):0)},En.prototype.match=function(f,g,S){if(typeof f!="string"){var _=this.string.slice(this.pos).match(f);return _&&_.index>0?null:(_&&g!==!1&&(this.pos+=_[0].length),_)}var T=function(D){return S?D.toLowerCase():D};if(T(this.string.substr(this.pos,f.length))==T(f))return g!==!1&&(this.pos+=f.length),!0},En.prototype.current=function(){return this.string.slice(this.start,this.pos)},En.prototype.hideFirstChars=function(f,g){this.lineStart+=f;try{return g()}finally{this.lineStart-=f}},En.prototype.lookAhead=function(f){var g=this.lineOracle;return g&&g.lookAhead(f)},En.prototype.baseToken=function(){var f=this.lineOracle;return f&&f.baseToken(this.pos)};var wo=function(f,g){this.state=f,this.lookAhead=g},$o=function(f,g,S,_){this.state=g,this.doc=f,this.line=S,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};function Vo(f,g,S,_){var T=[f.state.modeGen],D={};qi(f,g.text,f.doc.mode,S,function(ht,Qt){return T.push(ht,Qt)},D,_);for(var Y=S.state,Z=function(ht){S.baseTokens=T;var Qt=f.state.overlays[ht],re=1,Se=0;S.state=!0,qi(f,g.text,Qt.mode,S,function(ge,$e){for(var Ge=re;Se<ge;){var He=T[re];He>ge&&T.splice(re,1,ge,T[re+1],He),re+=2,Se=Math.min(ge,He)}if($e)if(Qt.opaque)T.splice(Ge,re-Ge,ge,"overlay "+$e),re=Ge+2;else for(;Ge<re;Ge+=2){var Ze=T[Ge+1];T[Ge+1]=(Ze?Ze+" ":"")+"overlay "+$e}},D),S.state=Y,S.baseTokens=null,S.baseTokenPos=1},bt=0;bt<f.state.overlays.length;++bt)Z(bt);return{styles:T,classes:D.bgClass||D.textClass?D:null}}function ol(f,g,S){if(!g.styles||g.styles[0]!=f.state.modeGen){var _=jo(f,Hr(g)),T=g.text.length>f.options.maxHighlightLength&&fn(f.doc.mode,_.state),D=Vo(f,g,_);T&&(_.state=T),g.stateAfter=_.save(!T),g.styles=D.styles,D.classes?g.styleClasses=D.classes:g.styleClasses&&(g.styleClasses=null),S===f.doc.highlightFrontier&&(f.doc.modeFrontier=Math.max(f.doc.modeFrontier,++f.doc.highlightFrontier))}return g.styles}function jo(f,g,S){var _=f.doc,T=f.display;if(!_.mode.startState)return new $o(_,!0,g);var D=function(bt,ht,Qt){for(var re,Se,ge=bt.doc,$e=Qt?-1:ht-(bt.doc.mode.innerMode?1e3:100),Ge=ht;Ge>$e;--Ge){if(Ge<=ge.first)return ge.first;var He=rt(ge,Ge-1),Ze=He.stateAfter;if(Ze&&(!Qt||Ge+(Ze instanceof wo?Ze.lookAhead:0)<=ge.modeFrontier))return Ge;var vr=Xe(He.text,null,bt.options.tabSize);(Se==null||re>vr)&&(Se=Ge-1,re=vr)}return Se}(f,g,S),Y=D>_.first&&rt(_,D-1).stateAfter,Z=Y?$o.fromSaved(_,Y,D):new $o(_,bo(_.mode),D);return _.iter(D,g,function(bt){Ra(f,bt.text,Z);var ht=Z.line;bt.stateAfter=ht==g-1||ht%5==0||ht>=T.viewFrom&&ht<T.viewTo?Z.save():null,Z.nextLine()}),S&&(_.modeFrontier=Z.line),Z}function Ra(f,g,S,_){var T=f.doc.mode,D=new En(g,f.options.tabSize,S);for(D.start=D.pos=_||0,g==""&&xa(T,S.state);!D.eol();)il(T,D,S.state),D.start=D.pos}function xa(f,g){if(f.blankLine)return f.blankLine(g);if(f.innerMode){var S=Oo(f,g);return S.mode.blankLine?S.mode.blankLine(S.state):void 0}}function il(f,g,S,_){for(var T=0;T<10;T++){_&&(_[0]=Oo(f,S).mode);var D=f.token(g,S);if(g.pos>g.start)return D}throw new Error("Mode "+f.name+" failed to advance stream.")}$o.prototype.lookAhead=function(f){var g=this.doc.getLine(this.line+f);return g!=null&&f>this.maxLookAhead&&(this.maxLookAhead=f),g},$o.prototype.baseToken=function(f){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=f;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-f}},$o.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},$o.fromSaved=function(f,g,S){return g instanceof wo?new $o(f,fn(f.mode,g.state),S,g.lookAhead):new $o(f,fn(f.mode,g),S)},$o.prototype.save=function(f){var g=f!==!1?fn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wo(g,this.maxLookAhead):g};var Go=function(f,g,S){this.start=f.start,this.end=f.pos,this.string=f.current(),this.type=g||null,this.state=S};function al(f,g,S,_){var T,D,Y=f.doc,Z=Y.mode,bt=rt(Y,(g=Mr(Y,g)).line),ht=jo(f,g.line,S),Qt=new En(bt.text,f.options.tabSize,ht);for(_&&(D=[]);(_||Qt.pos<g.ch)&&!Qt.eol();)Qt.start=Qt.pos,T=il(Z,Qt,ht.state),_&&D.push(new Go(Qt,T,fn(Y.mode,ht.state)));return _?D:new Go(Qt,T,ht.state)}function oa(f,g){if(f)for(;;){var S=f.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;f=f.slice(0,S.index)+f.slice(S.index+S[0].length);var _=S[1]?"bgClass":"textClass";g[_]==null?g[_]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(g[_])||(g[_]+=" "+S[2])}return f}function qi(f,g,S,_,T,D,Y){var Z=S.flattenSpans;Z==null&&(Z=f.options.flattenSpans);var bt,ht=0,Qt=null,re=new En(g,f.options.tabSize,_),Se=f.options.addModeClass&&[null];for(g==""&&oa(xa(S,_.state),D);!re.eol();){if(re.pos>f.options.maxHighlightLength?(Z=!1,Y&&Ra(f,g,_,re.pos),re.pos=g.length,bt=null):bt=oa(il(S,re,_.state,Se),D),Se){var ge=Se[0].name;ge&&(bt="m-"+(bt?ge+" "+bt:ge))}if(!Z||Qt!=bt){for(;ht<re.start;)T(ht=Math.min(re.start,ht+5e3),Qt);Qt=bt}re.start=re.pos}for(;ht<re.pos;){var $e=Math.min(re.pos,ht+5e3);T($e,Qt),ht=$e}}var si=!1,yi=!1;function Ha(f,g,S){this.marker=f,this.from=g,this.to=S}function Ns(f,g){if(f)for(var S=0;S<f.length;++S){var _=f[S];if(_.marker==g)return _}}function ts(f,g){for(var S,_=0;_<f.length;++_)f[_]!=g&&(S||(S=[])).push(f[_]);return S}function Ca(f,g){if(g.full)return null;var S=Nn(f,g.from.line)&&rt(f,g.from.line).markedSpans,_=Nn(f,g.to.line)&&rt(f,g.to.line).markedSpans;if(!S&&!_)return null;var T=g.from.ch,D=g.to.ch,Y=Mt(g.from,g.to)==0,Z=function(Sr,Tr,hn){var ln;if(Sr)for(var Bn=0;Bn<Sr.length;++Bn){var Ur=Sr[Bn],no=Ur.marker;if(Ur.from==null||(no.inclusiveLeft?Ur.from<=Tr:Ur.from<Tr)||Ur.from==Tr&&no.type=="bookmark"&&(!hn||!Ur.marker.insertLeft)){var ko=Ur.to==null||(no.inclusiveRight?Ur.to>=Tr:Ur.to>Tr);(ln||(ln=[])).push(new Ha(no,Ur.from,ko?null:Ur.to))}}return ln}(S,T,Y),bt=function(Sr,Tr,hn){var ln;if(Sr)for(var Bn=0;Bn<Sr.length;++Bn){var Ur=Sr[Bn],no=Ur.marker;if(Ur.to==null||(no.inclusiveRight?Ur.to>=Tr:Ur.to>Tr)||Ur.from==Tr&&no.type=="bookmark"&&(!hn||Ur.marker.insertLeft)){var ko=Ur.from==null||(no.inclusiveLeft?Ur.from<=Tr:Ur.from<Tr);(ln||(ln=[])).push(new Ha(no,ko?null:Ur.from-Tr,Ur.to==null?null:Ur.to-Tr))}}return ln}(_,D,Y),ht=g.text.length==1,Qt=er(g.text).length+(ht?T:0);if(Z)for(var re=0;re<Z.length;++re){var Se=Z[re];if(Se.to==null){var ge=Ns(bt,Se.marker);ge?ht&&(Se.to=ge.to==null?null:ge.to+Qt):Se.to=T}}if(bt)for(var $e=0;$e<bt.length;++$e){var Ge=bt[$e];Ge.to!=null&&(Ge.to+=Qt),Ge.from==null?Ns(Z,Ge.marker)||(Ge.from=Qt,ht&&(Z||(Z=[])).push(Ge)):(Ge.from+=Qt,ht&&(Z||(Z=[])).push(Ge))}Z&&(Z=Ba(Z)),bt&&bt!=Z&&(bt=Ba(bt));var He=[Z];if(!ht){var Ze,vr=g.text.length-2;if(vr>0&&Z)for(var br=0;br<Z.length;++br)Z[br].to==null&&(Ze||(Ze=[])).push(new Ha(Z[br].marker,null,null));for(var Pr=0;Pr<vr;++Pr)He.push(Ze);He.push(bt)}return He}function Ba(f){for(var g=0;g<f.length;++g){var S=f[g];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&f.splice(g--,1)}return f.length?f:null}function bi(f){var g=f.markedSpans;if(g){for(var S=0;S<g.length;++S)g[S].marker.detachLine(f);f.markedSpans=null}}function Vs(f,g){if(g){for(var S=0;S<g.length;++S)g[S].marker.attachLine(f);f.markedSpans=g}}function Ki(f){return f.inclusiveLeft?-1:0}function ka(f){return f.inclusiveRight?1:0}function xi(f,g){var S=f.lines.length-g.lines.length;if(S!=0)return S;var _=f.find(),T=g.find(),D=Mt(_.from,T.from)||Ki(f)-Ki(g);return D?-D:Mt(_.to,T.to)||ka(f)-ka(g)||g.id-f.id}function hs(f,g){var S,_=yi&&f.markedSpans;if(_)for(var T=void 0,D=0;D<_.length;++D)(T=_[D]).marker.collapsed&&(g?T.from:T.to)==null&&(!S||xi(S,T.marker)<0)&&(S=T.marker);return S}function gs(f){return hs(f,!0)}function Yi(f){return hs(f,!1)}function sl(f,g){var S,_=yi&&f.markedSpans;if(_)for(var T=0;T<_.length;++T){var D=_[T];D.marker.collapsed&&(D.from==null||D.from<g)&&(D.to==null||D.to>g)&&(!S||xi(S,D.marker)<0)&&(S=D.marker)}return S}function Ci(f,g,S,_,T){var D=rt(f,g),Y=yi&&D.markedSpans;if(Y)for(var Z=0;Z<Y.length;++Z){var bt=Y[Z];if(bt.marker.collapsed){var ht=bt.marker.find(0),Qt=Mt(ht.from,S)||Ki(bt.marker)-Ki(T),re=Mt(ht.to,_)||ka(bt.marker)-ka(T);if(!(Qt>=0&&re<=0||Qt<=0&&re>=0)&&(Qt<=0&&(bt.marker.inclusiveRight&&T.inclusiveLeft?Mt(ht.to,S)>=0:Mt(ht.to,S)>0)||Qt>=0&&(bt.marker.inclusiveRight&&T.inclusiveLeft?Mt(ht.from,_)<=0:Mt(ht.from,_)<0)))return!0}}}function Zo(f){for(var g;g=gs(f);)f=g.find(-1,!0).line;return f}function An(f,g){var S=rt(f,g),_=Zo(S);return S==_?g:Hr(_)}function vs(f,g){if(g>f.lastLine())return g;var S,_=rt(f,g);if(!sn(f,_))return g;for(;S=Yi(_);)_=S.find(1,!0).line;return Hr(_)+1}function sn(f,g){var S=yi&&g.markedSpans;if(S){for(var _=void 0,T=0;T<S.length;++T)if((_=S[T]).marker.collapsed&&(_.from==null||!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&Do(f,g,_)))return!0}}function Do(f,g,S){if(S.to==null){var _=S.marker.find(1,!0);return Do(f,_.line,Ns(_.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==g.text.length)return!0;for(var T=void 0,D=0;D<g.markedSpans.length;++D)if((T=g.markedSpans[D]).marker.collapsed&&!T.marker.widgetNode&&T.from==S.to&&(T.to==null||T.to!=S.from)&&(T.marker.inclusiveLeft||S.marker.inclusiveRight)&&Do(f,g,T))return!0}function li(f){for(var g=0,S=(f=Zo(f)).parent,_=0;_<S.lines.length;++_){var T=S.lines[_];if(T==f)break;g+=T.height}for(var D=S.parent;D;D=(S=D).parent)for(var Y=0;Y<D.children.length;++Y){var Z=D.children[Y];if(Z==S)break;g+=Z.height}return g}function ci(f){if(f.height==0)return 0;for(var g,S=f.text.length,_=f;g=gs(_);){var T=g.find(0,!0);_=T.from.line,S+=T.from.ch-T.to.ch}for(_=f;g=Yi(_);){var D=g.find(0,!0);S-=_.text.length-D.from.ch,S+=(_=D.to.line).text.length-D.to.ch}return S}function Gn(f){var g=f.display,S=f.doc;g.maxLine=rt(S,S.first),g.maxLineLength=ci(g.maxLine),g.maxLineChanged=!0,S.iter(function(_){var T=ci(_);T>g.maxLineLength&&(g.maxLineLength=T,g.maxLine=_)})}var pn=function(f,g,S){this.text=f,Vs(this,g),this.height=S?S(this):1};function ui(f){f.parent=null,bi(f)}pn.prototype.lineNo=function(){return Hr(this)},Cr(pn);var Ii={},Hi={};function ia(f,g){if(!f||/^\s*$/.test(f))return null;var S=g.addModeClass?Hi:Ii;return S[f]||(S[f]=f.replace(/\S+/g,"cm-$&"))}function wi(f,g){var S=Me("span",null,null,$?"padding-right: .1px":null),_={pre:Me("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:f,trailingSpace:!1,splitSpaces:f.getOption("lineWrapping")};g.measure={};for(var T=0;T<=(g.rest?g.rest.length:0);T++){var D=T?g.rest[T-1]:g.line,Y=void 0;_.pos=0,_.addToken=es,Fo(f.display.measure)&&(Y=Un(D,f.doc.direction))&&(_.addToken=fi(_.addToken,Y)),_.map=[],Dl(D,_,ol(f,D,g!=f.display.externalMeasured&&Hr(D))),D.styleClasses&&(D.styleClasses.bgClass&&(_.bgClass=Er(D.styleClasses.bgClass,_.bgClass||"")),D.styleClasses.textClass&&(_.textClass=Er(D.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(go(f.display.measure))),T==0?(g.measure.map=_.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(_.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if($){var Z=_.content.lastChild;(/\bcm-tab\b/.test(Z.className)||Z.querySelector&&Z.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return Et(f,"renderLine",f,g.line,_.pre),_.pre.className&&(_.textClass=Er(_.pre.className,_.textClass||"")),_}function Si(f){var g=Vt("span","•","cm-invalidchar");return g.title="\\u"+f.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function es(f,g,S,_,T,D,Y){if(g){var Z,bt=f.splitSpaces?function(Sr,Tr){if(Sr.length>1&&!/  /.test(Sr))return Sr;for(var hn=Tr,ln="",Bn=0;Bn<Sr.length;Bn++){var Ur=Sr.charAt(Bn);Ur!=" "||!hn||Bn!=Sr.length-1&&Sr.charCodeAt(Bn+1)!=32||(Ur=" "),ln+=Ur,hn=Ur==" "}return ln}(g,f.trailingSpace):g,ht=f.cm.state.specialChars,Qt=!1;if(ht.test(g)){Z=document.createDocumentFragment();for(var re=0;;){ht.lastIndex=re;var Se=ht.exec(g),ge=Se?Se.index-re:g.length-re;if(ge){var $e=document.createTextNode(bt.slice(re,re+ge));I&&N<9?Z.appendChild(Vt("span",[$e])):Z.appendChild($e),f.map.push(f.pos,f.pos+ge,$e),f.col+=ge,f.pos+=ge}if(!Se)break;re+=ge+1;var Ge=void 0;if(Se[0]=="	"){var He=f.cm.options.tabSize,Ze=He-f.col%He;(Ge=Z.appendChild(Vt("span",mr(Ze),"cm-tab"))).setAttribute("role","presentation"),Ge.setAttribute("cm-text","	"),f.col+=Ze}else Se[0]=="\r"||Se[0]==`
`?((Ge=Z.appendChild(Vt("span",Se[0]=="\r"?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",Se[0]),f.col+=1):((Ge=f.cm.options.specialCharPlaceholder(Se[0])).setAttribute("cm-text",Se[0]),I&&N<9?Z.appendChild(Vt("span",[Ge])):Z.appendChild(Ge),f.col+=1);f.map.push(f.pos,f.pos+1,Ge),f.pos++}}else f.col+=g.length,Z=document.createTextNode(bt),f.map.push(f.pos,f.pos+g.length,Z),I&&N<9&&(Qt=!0),f.pos+=g.length;if(f.trailingSpace=bt.charCodeAt(g.length-1)==32,S||_||T||Qt||D||Y){var vr=S||"";_&&(vr+=_),T&&(vr+=T);var br=Vt("span",[Z],vr,D);if(Y)for(var Pr in Y)Y.hasOwnProperty(Pr)&&Pr!="style"&&Pr!="class"&&br.setAttribute(Pr,Y[Pr]);return f.content.appendChild(br)}f.content.appendChild(Z)}}function fi(f,g){return function(S,_,T,D,Y,Z,bt){T=T?T+" cm-force-border":"cm-force-border";for(var ht=S.pos,Qt=ht+_.length;;){for(var re=void 0,Se=0;Se<g.length&&!((re=g[Se]).to>ht&&re.from<=ht);Se++);if(re.to>=Qt)return f(S,_,T,D,Y,Z,bt);f(S,_.slice(0,re.to-ht),T,D,null,Z,bt),D=null,_=_.slice(re.to-ht),ht=re.to}}}function ll(f,g,S,_){var T=!_&&S.widgetNode;T&&f.map.push(f.pos,f.pos+g,T),!_&&f.cm.display.input.needsContentAttribute&&(T||(T=f.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",S.id)),T&&(f.cm.display.input.setUneditable(T),f.content.appendChild(T)),f.pos+=g,f.trailingSpace=!1}function Dl(f,g,S){var _=f.markedSpans,T=f.text,D=0;if(_)for(var Y,Z,bt,ht,Qt,re,Se,ge=T.length,$e=0,Ge=1,He="",Ze=0;;){if(Ze==$e){bt=ht=Qt=Z="",Se=null,re=null,Ze=1/0;for(var vr=[],br=void 0,Pr=0;Pr<_.length;++Pr){var Sr=_[Pr],Tr=Sr.marker;if(Tr.type=="bookmark"&&Sr.from==$e&&Tr.widgetNode)vr.push(Tr);else if(Sr.from<=$e&&(Sr.to==null||Sr.to>$e||Tr.collapsed&&Sr.to==$e&&Sr.from==$e)){if(Sr.to!=null&&Sr.to!=$e&&Ze>Sr.to&&(Ze=Sr.to,ht=""),Tr.className&&(bt+=" "+Tr.className),Tr.css&&(Z=(Z?Z+";":"")+Tr.css),Tr.startStyle&&Sr.from==$e&&(Qt+=" "+Tr.startStyle),Tr.endStyle&&Sr.to==Ze&&(br||(br=[])).push(Tr.endStyle,Sr.to),Tr.title&&((Se||(Se={})).title=Tr.title),Tr.attributes)for(var hn in Tr.attributes)(Se||(Se={}))[hn]=Tr.attributes[hn];Tr.collapsed&&(!re||xi(re.marker,Tr)<0)&&(re=Sr)}else Sr.from>$e&&Ze>Sr.from&&(Ze=Sr.from)}if(br)for(var ln=0;ln<br.length;ln+=2)br[ln+1]==Ze&&(ht+=" "+br[ln]);if(!re||re.from==$e)for(var Bn=0;Bn<vr.length;++Bn)ll(g,0,vr[Bn]);if(re&&(re.from||0)==$e){if(ll(g,(re.to==null?ge+1:re.to)-$e,re.marker,re.from==null),re.to==null)return;re.to==$e&&(re=!1)}}if($e>=ge)break;for(var Ur=Math.min(ge,Ze);;){if(He){var no=$e+He.length;if(!re){var ko=no>Ur?He.slice(0,Ur-$e):He;g.addToken(g,ko,Y?Y+bt:bt,Qt,$e+ko.length==Ze?ht:"",Z,Se)}if(no>=Ur){He=He.slice(Ur-$e),$e=Ur;break}$e=no,Qt=""}He=T.slice(D,D=S[Ge++]),Y=ia(S[Ge++],g.cm.options)}}else for(var qn=1;qn<S.length;qn+=2)g.addToken(g,T.slice(D,D=S[qn]),ia(S[qn+1],g.cm.options))}function Zi(f,g,S){this.line=g,this.rest=function(_){for(var T,D;T=Yi(_);)_=T.find(1,!0).line,(D||(D=[])).push(_);return D}(g),this.size=this.rest?Hr(er(this.rest))-S+1:1,this.node=this.text=null,this.hidden=sn(f,g)}function rs(f,g,S){for(var _,T=[],D=g;D<S;D=_){var Y=new Zi(f.doc,rt(f.doc,D),D);_=D+Y.size,T.push(Y)}return T}var Ro=null,Fs=null;function Xo(f,g){var S=je(f,g);if(S.length){var _,T=Array.prototype.slice.call(arguments,2);Ro?_=Ro.delayedCallbacks:Fs?_=Fs:(_=Fs=[],setTimeout(Ni,0));for(var D=function(Z){_.push(function(){return S[Z].apply(null,T)})},Y=0;Y<S.length;++Y)D(Y)}}function Ni(){var f=Fs;Fs=null;for(var g=0;g<f.length;++g)f[g]()}function ns(f,g,S,_){for(var T=0;T<g.changes.length;T++){var D=g.changes[T];D=="text"?Il(f,g):D=="gutter"?ri(f,g,S,_):D=="class"?os(f,g):D=="widget"&&Jo(f,g,_)}g.changes=null}function aa(f){return f.node==f.text&&(f.node=Vt("div",null,null,"position: relative"),f.text.parentNode&&f.text.parentNode.replaceChild(f.node,f.text),f.node.appendChild(f.text),I&&N<8&&(f.node.style.zIndex=2)),f.node}function cl(f,g){var S=f.display.externalMeasured;return S&&S.line==g.line?(f.display.externalMeasured=null,g.measure=S.measure,S.built):wi(f,g)}function Il(f,g){var S=g.text.className,_=cl(f,g);g.text==g.node&&(g.node=_.pre),g.text.parentNode.replaceChild(_.pre,g.text),g.text=_.pre,_.bgClass!=g.bgClass||_.textClass!=g.textClass?(g.bgClass=_.bgClass,g.textClass=_.textClass,os(f,g)):S&&(g.text.className=S)}function os(f,g){(function(_,T){var D=T.bgClass?T.bgClass+" "+(T.line.bgClass||""):T.line.bgClass;if(D&&(D+=" CodeMirror-linebackground"),T.background)D?T.background.className=D:(T.background.parentNode.removeChild(T.background),T.background=null);else if(D){var Y=aa(T);T.background=Y.insertBefore(Vt("div",null,D),Y.firstChild),_.display.input.setUneditable(T.background)}})(f,g),g.line.wrapClass?aa(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var S=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=S||""}function ri(f,g,S,_){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var T=aa(g);g.gutterBackground=Vt("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(f.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),f.display.input.setUneditable(g.gutterBackground),T.insertBefore(g.gutterBackground,g.text)}var D=g.line.gutterMarkers;if(f.options.lineNumbers||D){var Y=aa(g),Z=g.gutter=Vt("div",null,"CodeMirror-gutter-wrapper","left: "+(f.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(Z.setAttribute("aria-hidden","true"),f.display.input.setUneditable(Z),Y.insertBefore(Z,g.text),g.line.gutterClass&&(Z.className+=" "+g.line.gutterClass),!f.options.lineNumbers||D&&D["CodeMirror-linenumbers"]||(g.lineNumber=Z.appendChild(Vt("div",Xr(f.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.display.lineNumInnerWidth+"px"))),D)for(var bt=0;bt<f.display.gutterSpecs.length;++bt){var ht=f.display.gutterSpecs[bt].className,Qt=D.hasOwnProperty(ht)&&D[ht];Qt&&Z.appendChild(Vt("div",[Qt],"CodeMirror-gutter-elt","left: "+_.gutterLeft[ht]+"px; width: "+_.gutterWidth[ht]+"px"))}}}function Jo(f,g,S){g.alignable&&(g.alignable=null);for(var _=jt("CodeMirror-linewidget"),T=g.node.firstChild,D=void 0;T;T=D)D=T.nextSibling,_.test(T.className)&&g.node.removeChild(T);rc(f,g,S)}function wc(f,g,S,_){var T=cl(f,g);return g.text=g.node=T.pre,T.bgClass&&(g.bgClass=T.bgClass),T.textClass&&(g.textClass=T.textClass),os(f,g),ri(f,g,S,_),rc(f,g,_),g.node}function rc(f,g,S){if(Ua(f,g.line,g,S,!0),g.rest)for(var _=0;_<g.rest.length;_++)Ua(f,g.rest[_],g,S,!1)}function Ua(f,g,S,_,T){if(g.widgets)for(var D=aa(S),Y=0,Z=g.widgets;Y<Z.length;++Y){var bt=Z[Y],ht=Vt("div",[bt.node],"CodeMirror-linewidget"+(bt.className?" "+bt.className:""));bt.handleMouseEvents||ht.setAttribute("cm-ignore-events","true"),_c(bt,ht,S,_),f.display.input.setUneditable(ht),T&&bt.above?D.insertBefore(ht,S.gutter||S.text):D.appendChild(ht),Xo(bt,"redraw")}}function _c(f,g,S,_){if(f.noHScroll){(S.alignable||(S.alignable=[])).push(g);var T=_.wrapperWidth;g.style.left=_.fixedPos+"px",f.coverGutter||(T-=_.gutterTotalWidth,g.style.paddingLeft=_.gutterTotalWidth+"px"),g.style.width=T+"px"}f.coverGutter&&(g.style.zIndex=5,g.style.position="relative",f.noHScroll||(g.style.marginLeft=-_.gutterTotalWidth+"px"))}function Bi(f){if(f.height!=null)return f.height;var g=f.doc.cm;if(!g)return 0;if(!de(document.body,f.node)){var S="position: relative;";f.coverGutter&&(S+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),f.noHScroll&&(S+="width: "+g.display.wrapper.clientWidth+"px;"),St(g.display.measure,Vt("div",[f.node],null,S))}return f.height=f.node.parentNode.offsetHeight}function pi(f,g){for(var S=ho(g);S!=f.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==f.sizer&&S!=f.mover)return!0}function sa(f){return f.lineSpace.offsetTop}function is(f){return f.mover.offsetHeight-f.lineSpace.offsetHeight}function nc(f){if(f.cachedPaddingH)return f.cachedPaddingH;var g=St(f.measure,Vt("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,_={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return isNaN(_.left)||isNaN(_.right)||(f.cachedPaddingH=_),_}function ni(f){return Gt-f.display.nativeBarWidth}function la(f){return f.display.scroller.clientWidth-ni(f)-f.display.barWidth}function ms(f){return f.display.scroller.clientHeight-ni(f)-f.display.barHeight}function ys(f,g,S){if(f.line==g)return{map:f.measure.map,cache:f.measure.cache};if(f.rest){for(var _=0;_<f.rest.length;_++)if(f.rest[_]==g)return{map:f.measure.maps[_],cache:f.measure.caches[_]};for(var T=0;T<f.rest.length;T++)if(Hr(f.rest[T])>S)return{map:f.measure.maps[T],cache:f.measure.caches[T],before:!0}}}function ca(f,g,S,_){return ua(f,Oi(f,g),S,_)}function Xi(f,g){if(g>=f.display.viewFrom&&g<f.display.viewTo)return f.display.view[Nl(f,g)];var S=f.display.externalMeasured;return S&&g>=S.lineN&&g<S.lineN+S.size?S:void 0}function Oi(f,g){var S=Hr(g),_=Xi(f,S);_&&!_.text?_=null:_&&_.changes&&(ns(f,_,S,gu(f)),f.curOp.forceUpdate=!0),_||(_=function(D,Y){var Z=Hr(Y=Zo(Y)),bt=D.display.externalMeasured=new Zi(D.doc,Y,Z);bt.lineN=Z;var ht=bt.built=wi(D,bt);return bt.text=ht.pre,St(D.display.lineMeasure,ht.pre),bt}(f,g));var T=ys(_,g,S);return{line:g,view:_,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function ua(f,g,S,_,T){g.before&&(S=-1);var D,Y=S+(_||"");return g.cache.hasOwnProperty(Y)?D=g.cache[Y]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(function(Z,bt,ht){var Qt=Z.options.lineWrapping,re=Qt&&la(Z);if(!bt.measure.heights||Qt&&bt.measure.width!=re){var Se=bt.measure.heights=[];if(Qt){bt.measure.width=re;for(var ge=bt.text.firstChild.getClientRects(),$e=0;$e<ge.length-1;$e++){var Ge=ge[$e],He=ge[$e+1];Math.abs(Ge.bottom-He.bottom)>2&&Se.push((Ge.bottom+He.top)/2-ht.top)}}Se.push(ht.bottom-ht.top)}}(f,g.view,g.rect),g.hasHeights=!0),(D=Be(f,g,S,_)).bogus||(g.cache[Y]=D)),{left:D.left,right:D.right,top:T?D.rtop:D.top,bottom:T?D.rbottom:D.bottom}}var gt,Nt={left:0,right:0,top:0,bottom:0};function he(f,g,S){for(var _,T,D,Y,Z,bt,ht=0;ht<f.length;ht+=3)if(Z=f[ht],bt=f[ht+1],g<Z?(T=0,D=1,Y="left"):g<bt?D=(T=g-Z)+1:(ht==f.length-3||g==bt&&f[ht+3]>g)&&(T=(D=bt-Z)-1,g>=bt&&(Y="right")),T!=null){if(_=f[ht+2],Z==bt&&S==(_.insertLeft?"left":"right")&&(Y=S),S=="left"&&T==0)for(;ht&&f[ht-2]==f[ht-3]&&f[ht-1].insertLeft;)_=f[(ht-=3)+2],Y="left";if(S=="right"&&T==bt-Z)for(;ht<f.length-3&&f[ht+3]==f[ht+4]&&!f[ht+5].insertLeft;)_=f[(ht+=3)+2],Y="right";break}return{node:_,start:T,end:D,collapse:Y,coverStart:Z,coverEnd:bt}}function Oe(f,g){var S=Nt;if(g=="left")for(var _=0;_<f.length&&(S=f[_]).left==S.right;_++);else for(var T=f.length-1;T>=0&&(S=f[T]).left==S.right;T--);return S}function Be(f,g,S,_){var T,D=he(g.map,S,_),Y=D.node,Z=D.start,bt=D.end,ht=D.collapse;if(Y.nodeType==3){for(var Qt=0;Qt<4;Qt++){for(;Z&&gr(g.line.text.charAt(D.coverStart+Z));)--Z;for(;D.coverStart+bt<D.coverEnd&&gr(g.line.text.charAt(D.coverStart+bt));)++bt;if((T=I&&N<9&&Z==0&&bt==D.coverEnd-D.coverStart?Y.parentNode.getBoundingClientRect():Oe(zt(Y,Z,bt).getClientRects(),_)).left||T.right||Z==0)break;bt=Z,Z-=1,ht="right"}I&&N<11&&(T=function(Sr,Tr){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(Bn){if(Wo!=null)return Wo;var Ur=St(Bn,Vt("span","x")),no=Ur.getBoundingClientRect(),ko=zt(Ur,0,1).getBoundingClientRect();return Wo=Math.abs(no.left-ko.left)>1}(Sr))return Tr;var hn=screen.logicalXDPI/screen.deviceXDPI,ln=screen.logicalYDPI/screen.deviceYDPI;return{left:Tr.left*hn,right:Tr.right*hn,top:Tr.top*ln,bottom:Tr.bottom*ln}}(f.display.measure,T))}else{var re;Z>0&&(ht=_="right"),T=f.options.lineWrapping&&(re=Y.getClientRects()).length>1?re[_=="right"?re.length-1:0]:Y.getBoundingClientRect()}if(I&&N<9&&!Z&&(!T||!T.left&&!T.right)){var Se=Y.parentNode.getClientRects()[0];T=Se?{left:Se.left,right:Se.left+ki(f.display),top:Se.top,bottom:Se.bottom}:Nt}for(var ge=T.top-g.rect.top,$e=T.bottom-g.rect.top,Ge=(ge+$e)/2,He=g.view.measure.heights,Ze=0;Ze<He.length-1&&!(Ge<He[Ze]);Ze++);var vr=Ze?He[Ze-1]:0,br=He[Ze],Pr={left:(ht=="right"?T.right:T.left)-g.rect.left,right:(ht=="left"?T.left:T.right)-g.rect.left,top:vr,bottom:br};return T.left||T.right||(Pr.bogus=!0),f.options.singleCursorHeightPerLine||(Pr.rtop=ge,Pr.rbottom=$e),Pr}function Re(f){if(f.measure&&(f.measure.cache={},f.measure.heights=null,f.rest))for(var g=0;g<f.rest.length;g++)f.measure.caches[g]={}}function hr(f){f.display.externalMeasure=null,Dt(f.display.lineMeasure);for(var g=0;g<f.display.view.length;g++)Re(f.display.view[g])}function Ir(f){hr(f),f.display.cachedCharWidth=f.display.cachedTextHeight=f.display.cachedPaddingH=null,f.options.lineWrapping||(f.display.maxLineChanged=!0),f.display.lineNumChars=null}function lt(){return V&&_t?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Lt(){return V&&_t?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ce(f){var g=Zo(f).widgets,S=0;if(g)for(var _=0;_<g.length;++_)g[_].above&&(S+=Bi(g[_]));return S}function me(f,g,S,_,T){if(!T){var D=ce(g);S.top+=D,S.bottom+=D}if(_=="line")return S;_||(_="local");var Y=li(g);if(_=="local"?Y+=sa(f.display):Y-=f.display.viewOffset,_=="page"||_=="window"){var Z=f.display.lineSpace.getBoundingClientRect();Y+=Z.top+(_=="window"?0:Lt());var bt=Z.left+(_=="window"?0:lt());S.left+=bt,S.right+=bt}return S.top+=Y,S.bottom+=Y,S}function We(f,g,S){if(S=="div")return g;var _=g.left,T=g.top;if(S=="page")_-=lt(),T-=Lt();else if(S=="local"||!S){var D=f.display.sizer.getBoundingClientRect();_+=D.left,T+=D.top}var Y=f.display.lineSpace.getBoundingClientRect();return{left:_-Y.left,top:T-Y.top}}function Ve(f,g,S,_,T){return _||(_=rt(f.doc,g.line)),me(f,_,ca(f,_,g.ch,T),S)}function ur(f,g,S,_,T,D){function Y($e,Ge){var He=ua(f,T,$e,Ge?"right":"left",D);return Ge?He.left=He.right:He.right=He.left,me(f,_,He,S)}_=_||rt(f.doc,g.line),T||(T=Oi(f,_));var Z=Un(_,f.doc.direction),bt=g.ch,ht=g.sticky;if(bt>=_.text.length?(bt=_.text.length,ht="before"):bt<=0&&(bt=0,ht="after"),!Z)return Y(ht=="before"?bt-1:bt,ht=="before");function Qt($e,Ge,He){return Y(He?$e-1:$e,Z[Ge].level==1!=He)}var re=wr(Z,bt,ht),Se=tn,ge=Qt(bt,re,ht=="before");return Se!=null&&(ge.other=Qt(bt,Se,ht!="before")),ge}function Lr(f,g){var S=0;g=Mr(f.doc,g),f.options.lineWrapping||(S=ki(f.display)*g.ch);var _=rt(f.doc,g.line),T=li(_)+sa(f.display);return{left:S,right:S,top:T,bottom:T+_.height}}function dn(f,g,S,_,T){var D=cr(f,g,S);return D.xRel=T,_&&(D.outside=_),D}function jn(f,g,S){var _=f.doc;if((S+=f.display.viewOffset)<0)return dn(_.first,0,null,-1,-1);var T=wn(_,S),D=_.first+_.size-1;if(T>D)return dn(_.first+_.size-1,rt(_,D).text.length,null,1,1);g<0&&(g=0);for(var Y=rt(_,T);;){var Z=oc(f,Y,T,g,S),bt=sl(Y,Z.ch+(Z.xRel>0||Z.outside>0?1:0));if(!bt)return Z;var ht=bt.find(1);if(ht.line==T)return ht;Y=rt(_,T=ht.line)}}function To(f,g,S,_){_-=ce(g);var T=g.text.length,D=nn(function(Y){return ua(f,S,Y-1).bottom<=_},T,0);return{begin:D,end:T=nn(function(Y){return ua(f,S,Y).top>_},D,T)}}function za(f,g,S,_){return S||(S=Oi(f,g)),To(f,g,S,me(f,g,ua(f,S,_),"line").top)}function as(f,g,S,_){return!(f.bottom<=S)&&(f.top>S||(_?f.left:f.right)>g)}function oc(f,g,S,_,T){T-=li(g);var D=Oi(f,g),Y=ce(g),Z=0,bt=g.text.length,ht=!0,Qt=Un(g,f.doc.direction);if(Qt){var re=(f.options.lineWrapping?yp:Zu)(f,g,S,D,Qt,_,T);Z=(ht=re.level!=1)?re.from:re.to-1,bt=ht?re.to:re.from-1}var Se,ge,$e=null,Ge=null,He=nn(function(Sr){var Tr=ua(f,D,Sr);return Tr.top+=Y,Tr.bottom+=Y,!!as(Tr,_,T,!1)&&(Tr.top<=T&&Tr.left<=_&&($e=Sr,Ge=Tr),!0)},Z,bt),Ze=!1;if(Ge){var vr=_-Ge.left<Ge.right-_,br=vr==ht;He=$e+(br?0:1),ge=br?"after":"before",Se=vr?Ge.left:Ge.right}else{ht||He!=bt&&He!=Z||He++,ge=He==0?"after":He==g.text.length?"before":ua(f,D,He-(ht?1:0)).bottom+Y<=T==ht?"after":"before";var Pr=ur(f,cr(S,He,ge),"line",g,D);Se=Pr.left,Ze=T<Pr.top?-1:T>=Pr.bottom?1:0}return dn(S,He=fr(g.text,He,1),ge,Ze,_-Se)}function Zu(f,g,S,_,T,D,Y){var Z=nn(function(re){var Se=T[re],ge=Se.level!=1;return as(ur(f,cr(S,ge?Se.to:Se.from,ge?"before":"after"),"line",g,_),D,Y,!0)},0,T.length-1),bt=T[Z];if(Z>0){var ht=bt.level!=1,Qt=ur(f,cr(S,ht?bt.from:bt.to,ht?"after":"before"),"line",g,_);as(Qt,D,Y,!0)&&Qt.top>Y&&(bt=T[Z-1])}return bt}function yp(f,g,S,_,T,D,Y){var Z=To(f,g,_,Y),bt=Z.begin,ht=Z.end;/\s/.test(g.text.charAt(ht-1))&&ht--;for(var Qt=null,re=null,Se=0;Se<T.length;Se++){var ge=T[Se];if(!(ge.from>=ht||ge.to<=bt)){var $e=ua(f,_,ge.level!=1?Math.min(ht,ge.to)-1:Math.max(bt,ge.from)).right,Ge=$e<D?D-$e+1e9:$e-D;(!Qt||re>Ge)&&(Qt=ge,re=Ge)}}return Qt||(Qt=T[T.length-1]),Qt.from<bt&&(Qt={from:bt,to:Qt.to,level:Qt.level}),Qt.to>ht&&(Qt={from:Qt.from,to:ht,level:Qt.level}),Qt}function bs(f){if(f.cachedTextHeight!=null)return f.cachedTextHeight;if(gt==null){gt=Vt("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)gt.appendChild(document.createTextNode("x")),gt.appendChild(Vt("br"));gt.appendChild(document.createTextNode("x"))}St(f.measure,gt);var S=gt.offsetHeight/50;return S>3&&(f.cachedTextHeight=S),Dt(f.measure),S||1}function ki(f){if(f.cachedCharWidth!=null)return f.cachedCharWidth;var g=Vt("span","xxxxxxxxxx"),S=Vt("pre",[g],"CodeMirror-line-like");St(f.measure,S);var _=g.getBoundingClientRect(),T=(_.right-_.left)/10;return T>2&&(f.cachedCharWidth=T),T||10}function gu(f){for(var g=f.display,S={},_={},T=g.gutters.clientLeft,D=g.gutters.firstChild,Y=0;D;D=D.nextSibling,++Y){var Z=f.display.gutterSpecs[Y].className;S[Z]=D.offsetLeft+D.clientLeft+T,_[Z]=D.clientWidth}return{fixedPos:ic(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:S,gutterWidth:_,wrapperWidth:g.wrapper.clientWidth}}function ic(f){return f.scroller.getBoundingClientRect().left-f.sizer.getBoundingClientRect().left}function vu(f){var g=bs(f.display),S=f.options.lineWrapping,_=S&&Math.max(5,f.display.scroller.clientWidth/ki(f.display)-3);return function(T){if(sn(f.doc,T))return 0;var D=0;if(T.widgets)for(var Y=0;Y<T.widgets.length;Y++)T.widgets[Y].height&&(D+=T.widgets[Y].height);return S?D+(Math.ceil(T.text.length/_)||1)*g:D+g}}function Xu(f){var g=f.doc,S=vu(f);g.iter(function(_){var T=S(_);T!=_.height&&pr(_,T)})}function Rs(f,g,S,_){var T=f.display;if(!S&&ho(g).getAttribute("cm-not-content")=="true")return null;var D,Y,Z=T.lineSpace.getBoundingClientRect();try{D=g.clientX-Z.left,Y=g.clientY-Z.top}catch{return null}var bt,ht=jn(f,D,Y);if(_&&ht.xRel>0&&(bt=rt(f.doc,ht.line).text).length==ht.ch){var Qt=Xe(bt,bt.length,f.options.tabSize)-bt.length;ht=cr(ht.line,Math.max(0,Math.round((D-nc(f.display).left)/ki(f.display))-Qt))}return ht}function Nl(f,g){if(g>=f.display.viewTo||(g-=f.display.viewFrom)<0)return null;for(var S=f.display.view,_=0;_<S.length;_++)if((g-=S[_].size)<0)return _}function Ui(f,g,S,_){g==null&&(g=f.doc.first),S==null&&(S=f.doc.first+f.doc.size),_||(_=0);var T=f.display;if(_&&S<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>g)&&(T.updateLineNumbers=g),f.curOp.viewChanged=!0,g>=T.viewTo)yi&&An(f.doc,g)<T.viewTo&&Wa(f);else if(S<=T.viewFrom)yi&&vs(f.doc,S+_)>T.viewFrom?Wa(f):(T.viewFrom+=_,T.viewTo+=_);else if(g<=T.viewFrom&&S>=T.viewTo)Wa(f);else if(g<=T.viewFrom){var D=ws(f,S,S+_,1);D?(T.view=T.view.slice(D.index),T.viewFrom=D.lineN,T.viewTo+=_):Wa(f)}else if(S>=T.viewTo){var Y=ws(f,g,g,-1);Y?(T.view=T.view.slice(0,Y.index),T.viewTo=Y.lineN):Wa(f)}else{var Z=ws(f,g,g,-1),bt=ws(f,S,S+_,1);Z&&bt?(T.view=T.view.slice(0,Z.index).concat(rs(f,Z.lineN,bt.lineN)).concat(T.view.slice(bt.index)),T.viewTo+=_):Wa(f)}var ht=T.externalMeasured;ht&&(S<ht.lineN?ht.lineN+=_:g<ht.lineN+ht.size&&(T.externalMeasured=null))}function Hs(f,g,S){f.curOp.viewChanged=!0;var _=f.display,T=f.display.externalMeasured;if(T&&g>=T.lineN&&g<T.lineN+T.size&&(_.externalMeasured=null),!(g<_.viewFrom||g>=_.viewTo)){var D=_.view[Nl(f,g)];if(D.node!=null){var Y=D.changes||(D.changes=[]);kt(Y,S)==-1&&Y.push(S)}}}function Wa(f){f.display.viewFrom=f.display.viewTo=f.doc.first,f.display.view=[],f.display.viewOffset=0}function ws(f,g,S,_){var T,D=Nl(f,g),Y=f.display.view;if(!yi||S==f.doc.first+f.doc.size)return{index:D,lineN:S};for(var Z=f.display.viewFrom,bt=0;bt<D;bt++)Z+=Y[bt].size;if(Z!=g){if(_>0){if(D==Y.length-1)return null;T=Z+Y[D].size-g,D++}else T=Z-g;g+=T,S+=T}for(;An(f.doc,S)!=S;){if(D==(_<0?0:Y.length-1))return null;S+=_*Y[D-(_<0?1:0)].size,D+=_}return{index:D,lineN:S}}function ac(f){for(var g=f.display.view,S=0,_=0;_<g.length;_++){var T=g[_];T.hidden||T.node&&!T.changes||++S}return S}function ul(f){f.display.input.showSelection(f.display.input.prepareSelection())}function mu(f,g){g===void 0&&(g=!0);var S=f.doc,_={},T=_.cursors=document.createDocumentFragment(),D=_.selection=document.createDocumentFragment(),Y=f.options.$customCursor;Y&&(g=!0);for(var Z=0;Z<S.sel.ranges.length;Z++)if(g||Z!=S.sel.primIndex){var bt=S.sel.ranges[Z];if(!(bt.from().line>=f.display.viewTo||bt.to().line<f.display.viewFrom)){var ht=bt.empty();if(Y){var Qt=Y(f,bt);Qt&&sc(f,Qt,T)}else(ht||f.options.showCursorWhenSelecting)&&sc(f,bt.head,T);ht||yu(f,bt,D)}}return _}function sc(f,g,S){var _=ur(f,g,"div",null,null,!f.options.singleCursorHeightPerLine),T=S.appendChild(Vt("div"," ","CodeMirror-cursor"));if(T.style.left=_.left+"px",T.style.top=_.top+"px",T.style.height=Math.max(0,_.bottom-_.top)*f.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(f.getWrapperElement().className)){var D=Ve(f,g,"div",null,null),Y=D.right-D.left;T.style.width=(Y>0?Y:f.defaultCharWidth())+"px"}if(_.other){var Z=S.appendChild(Vt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));Z.style.display="",Z.style.left=_.other.left+"px",Z.style.top=_.other.top+"px",Z.style.height=.85*(_.other.bottom-_.other.top)+"px"}}function fl(f,g){return f.top-g.top||f.left-g.left}function yu(f,g,S){var _=f.display,T=f.doc,D=document.createDocumentFragment(),Y=nc(f.display),Z=Y.left,bt=Math.max(_.sizerWidth,la(f)-_.sizer.offsetLeft)-Y.right,ht=T.direction=="ltr";function Qt(br,Pr,Sr,Tr){Pr<0&&(Pr=0),Pr=Math.round(Pr),Tr=Math.round(Tr),D.appendChild(Vt("div",null,"CodeMirror-selected","position: absolute; left: "+br+`px;
                             top: `+Pr+"px; width: "+(Sr??bt-br)+`px;
                             height: `+(Tr-Pr)+"px"))}function re(br,Pr,Sr){var Tr,hn,ln=rt(T,br),Bn=ln.text.length;function Ur(qn,Qn){return Ve(f,cr(br,qn),"div",ln,Qn)}function no(qn,Qn,uo){var On=za(f,ln,null,qn),$n=Qn=="ltr"==(uo=="after")?"left":"right";return Ur(uo=="after"?On.begin:On.end-(/\s/.test(ln.text.charAt(On.end-1))?2:1),$n)[$n]}var ko=Un(ln,T.direction);return function(qn,Qn,uo,On){if(!qn)return On(Qn,uo,"ltr",0);for(var $n=!1,Kn=0;Kn<qn.length;++Kn){var Mn=qn[Kn];(Mn.from<uo&&Mn.to>Qn||Qn==uo&&Mn.to==Qn)&&(On(Math.max(Mn.from,Qn),Math.min(Mn.to,uo),Mn.level==1?"rtl":"ltr",Kn),$n=!0)}$n||On(Qn,uo,"ltr")}(ko,Pr||0,Sr??Bn,function(qn,Qn,uo,On){var $n=uo=="ltr",Kn=Ur(qn,$n?"left":"right"),Mn=Ur(Qn-1,$n?"right":"left"),gi=Pr==null&&qn==0,vi=Sr==null&&Qn==Bn,po=On==0,to=!ko||On==ko.length-1;if(Mn.top-Kn.top<=3){var Ga=(ht?vi:gi)&&to,xn=(ht?gi:vi)&&po?Z:($n?Kn:Mn).left,Li=Ga?bt:($n?Mn:Kn).right;Qt(xn,Kn.top,Li-xn,Kn.bottom)}else{var Qi,vo,Na,qa;$n?(Qi=ht&&gi&&po?Z:Kn.left,vo=ht?bt:no(qn,uo,"before"),Na=ht?Z:no(Qn,uo,"after"),qa=ht&&vi&&to?bt:Mn.right):(Qi=ht?no(qn,uo,"before"):Z,vo=!ht&&gi&&po?bt:Kn.right,Na=!ht&&vi&&to?Z:Mn.left,qa=ht?no(Qn,uo,"after"):bt),Qt(Qi,Kn.top,vo-Qi,Kn.bottom),Kn.bottom<Mn.top&&Qt(Z,Kn.bottom,null,Mn.top),Qt(Na,Mn.top,qa-Na,Mn.bottom)}(!Tr||fl(Kn,Tr)<0)&&(Tr=Kn),fl(Mn,Tr)<0&&(Tr=Mn),(!hn||fl(Kn,hn)<0)&&(hn=Kn),fl(Mn,hn)<0&&(hn=Mn)}),{start:Tr,end:hn}}var Se=g.from(),ge=g.to();if(Se.line==ge.line)re(Se.line,Se.ch,ge.ch);else{var $e=rt(T,Se.line),Ge=rt(T,ge.line),He=Zo($e)==Zo(Ge),Ze=re(Se.line,Se.ch,He?$e.text.length+1:null).end,vr=re(ge.line,He?0:null,ge.ch).start;He&&(Ze.top<vr.top-2?(Qt(Ze.right,Ze.top,null,Ze.bottom),Qt(Z,vr.top,vr.left,vr.bottom)):Qt(Ze.right,Ze.top,vr.left-Ze.right,Ze.bottom)),Ze.bottom<vr.top&&Qt(Z,Ze.bottom,null,vr.top)}S.appendChild(D)}function pl(f){if(f.state.focused){var g=f.display;clearInterval(g.blinker);var S=!0;g.cursorDiv.style.visibility="",f.options.cursorBlinkRate>0?g.blinker=setInterval(function(){f.hasFocus()||Sa(f),g.cursorDiv.style.visibility=(S=!S)?"":"hidden"},f.options.cursorBlinkRate):f.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function lc(f){f.hasFocus()||(f.display.input.focus(),f.state.focused||dl(f))}function Vi(f){f.state.delayingBlurEvent=!0,setTimeout(function(){f.state.delayingBlurEvent&&(f.state.delayingBlurEvent=!1,f.state.focused&&Sa(f))},100)}function dl(f,g){f.state.delayingBlurEvent&&!f.state.draggingText&&(f.state.delayingBlurEvent=!1),f.options.readOnly!="nocursor"&&(f.state.focused||(Et(f,"focus",f,g),f.state.focused=!0,ar(f.display.wrapper,"CodeMirror-focused"),f.curOp||f.display.selForContextMenu==f.doc.sel||(f.display.input.reset(),$&&setTimeout(function(){return f.display.input.reset(!0)},20)),f.display.input.receivedFocus()),pl(f))}function Sa(f,g){f.state.delayingBlurEvent||(f.state.focused&&(Et(f,"blur",f,g),f.state.focused=!1,Ht(f.display.wrapper,"CodeMirror-focused")),clearInterval(f.display.blinker),setTimeout(function(){f.state.focused||(f.display.shift=!1)},150))}function Vl(f){for(var g=f.display,S=g.lineDiv.offsetTop,_=Math.max(0,g.scroller.getBoundingClientRect().top),T=g.lineDiv.getBoundingClientRect().top,D=0,Y=0;Y<g.view.length;Y++){var Z=g.view[Y],bt=f.options.lineWrapping,ht=void 0,Qt=0;if(!Z.hidden){if(T+=Z.line.height,I&&N<8){var re=Z.node.offsetTop+Z.node.offsetHeight;ht=re-S,S=re}else{var Se=Z.node.getBoundingClientRect();ht=Se.bottom-Se.top,!bt&&Z.text.firstChild&&(Qt=Z.text.firstChild.getBoundingClientRect().right-Se.left-1)}var ge=Z.line.height-ht;if((ge>.005||ge<-.005)&&(T<_&&(D-=ge),pr(Z.line,ht),hl(Z.line),Z.rest))for(var $e=0;$e<Z.rest.length;$e++)hl(Z.rest[$e]);if(Qt>f.display.sizerWidth){var Ge=Math.ceil(Qt/ki(f.display));Ge>f.display.maxLineLength&&(f.display.maxLineLength=Ge,f.display.maxLine=Z.line,f.display.maxLineChanged=!0)}}}Math.abs(D)>2&&(g.scroller.scrollTop+=D)}function hl(f){if(f.widgets)for(var g=0;g<f.widgets.length;++g){var S=f.widgets[g],_=S.node.parentNode;_&&(S.height=_.offsetHeight)}}function _s(f,g,S){var _=S&&S.top!=null?Math.max(0,S.top):f.scroller.scrollTop;_=Math.floor(_-sa(f));var T=S&&S.bottom!=null?S.bottom:_+f.wrapper.clientHeight,D=wn(g,_),Y=wn(g,T);if(S&&S.ensure){var Z=S.ensure.from.line,bt=S.ensure.to.line;Z<D?(D=Z,Y=wn(g,li(rt(g,Z))+f.wrapper.clientHeight)):Math.min(bt,g.lastLine())>=Y&&(D=wn(g,li(rt(g,bt))-f.wrapper.clientHeight),Y=bt)}return{from:D,to:Math.max(Y,D+1)}}function xs(f,g){var S=f.display,_=bs(f.display);g.top<0&&(g.top=0);var T=f.curOp&&f.curOp.scrollTop!=null?f.curOp.scrollTop:S.scroller.scrollTop,D=ms(f),Y={};g.bottom-g.top>D&&(g.bottom=g.top+D);var Z=f.doc.height+is(S),bt=g.top<_,ht=g.bottom>Z-_;if(g.top<T)Y.scrollTop=bt?0:g.top;else if(g.bottom>T+D){var Qt=Math.min(g.top,(ht?Z:g.bottom)-D);Qt!=T&&(Y.scrollTop=Qt)}var re=f.options.fixedGutter?0:S.gutters.offsetWidth,Se=f.curOp&&f.curOp.scrollLeft!=null?f.curOp.scrollLeft:S.scroller.scrollLeft-re,ge=la(f)-S.gutters.offsetWidth,$e=g.right-g.left>ge;return $e&&(g.right=g.left+ge),g.left<10?Y.scrollLeft=0:g.left<Se?Y.scrollLeft=Math.max(0,g.left+re-($e?0:10)):g.right>ge+Se-3&&(Y.scrollLeft=g.right+($e?0:10)-ge),Y}function qc(f,g){g!=null&&(Kc(f),f.curOp.scrollTop=(f.curOp.scrollTop==null?f.doc.scrollTop:f.curOp.scrollTop)+g)}function cc(f){Kc(f);var g=f.getCursor();f.curOp.scrollToPos={from:g,to:g,margin:f.options.cursorScrollMargin}}function Bs(f,g,S){g==null&&S==null||Kc(f),g!=null&&(f.curOp.scrollLeft=g),S!=null&&(f.curOp.scrollTop=S)}function Kc(f){var g=f.curOp.scrollToPos;g&&(f.curOp.scrollToPos=null,Ju(f,Lr(f,g.from),Lr(f,g.to),g.margin))}function Ju(f,g,S,_){var T=xs(f,{left:Math.min(g.left,S.left),top:Math.min(g.top,S.top)-_,right:Math.max(g.right,S.right),bottom:Math.max(g.bottom,S.bottom)+_});Bs(f,T.scrollLeft,T.scrollTop)}function uc(f,g){Math.abs(f.doc.scrollTop-g)<2||(vt||xu(f,{top:g}),Qu(f,g,!0),vt&&xu(f),cs(f,100))}function Qu(f,g,S){g=Math.max(0,Math.min(f.display.scroller.scrollHeight-f.display.scroller.clientHeight,g)),(f.display.scroller.scrollTop!=g||S)&&(f.doc.scrollTop=g,f.display.scrollbars.setScrollTop(g),f.display.scroller.scrollTop!=g&&(f.display.scroller.scrollTop=g))}function Aa(f,g,S,_){g=Math.max(0,Math.min(g,f.display.scroller.scrollWidth-f.display.scroller.clientWidth)),(S?g==f.doc.scrollLeft:Math.abs(f.doc.scrollLeft-g)<2)&&!_||(f.doc.scrollLeft=g,Cu(f),f.display.scroller.scrollLeft!=g&&(f.display.scroller.scrollLeft=g),f.display.scrollbars.setScrollLeft(g))}function ss(f){var g=f.display,S=g.gutters.offsetWidth,_=Math.round(f.doc.height+is(f.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:f.options.fixedGutter?S:0,docHeight:_,scrollHeight:_+ni(f)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:S}}var gl=function(f,g,S){this.cm=S;var _=this.vert=Vt("div",[Vt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=Vt("div",[Vt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=T.tabIndex=-1,f(_),f(T),ee(_,"scroll",function(){_.clientHeight&&g(_.scrollTop,"vertical")}),ee(T,"scroll",function(){T.clientWidth&&g(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,I&&N<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};gl.prototype.update=function(f){var g=f.scrollWidth>f.clientWidth+1,S=f.scrollHeight>f.clientHeight+1,_=f.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=g?_+"px":"0";var T=f.viewHeight-(g?_:0);this.vert.firstChild.style.height=Math.max(0,f.scrollHeight-f.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=S?_+"px":"0",this.horiz.style.left=f.barLeft+"px";var D=f.viewWidth-f.barLeft-(S?_:0);this.horiz.firstChild.style.width=Math.max(0,f.scrollWidth-f.clientWidth+D)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&f.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?_:0,bottom:g?_:0}},gl.prototype.setScrollLeft=function(f){this.horiz.scrollLeft!=f&&(this.horiz.scrollLeft=f),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},gl.prototype.setScrollTop=function(f){this.vert.scrollTop!=f&&(this.vert.scrollTop=f),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},gl.prototype.zeroWidthHack=function(){var f=It&&!tt?"12px":"18px";this.horiz.style.height=this.vert.style.width=f,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new at,this.disableVert=new at},gl.prototype.enableZeroWidthBar=function(f,g,S){f.style.visibility="",g.set(1e3,function _(){var T=f.getBoundingClientRect();(S=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1))!=f?f.style.visibility="hidden":g.set(1e3,_)})},gl.prototype.clear=function(){var f=this.horiz.parentNode;f.removeChild(this.horiz),f.removeChild(this.vert)};var Yc=function(){};function Cs(f,g){g||(g=ss(f));var S=f.display.barWidth,_=f.display.barHeight;tf(f,g);for(var T=0;T<4&&S!=f.display.barWidth||_!=f.display.barHeight;T++)S!=f.display.barWidth&&f.options.lineWrapping&&Vl(f),tf(f,ss(f)),S=f.display.barWidth,_=f.display.barHeight}function tf(f,g){var S=f.display,_=S.scrollbars.update(g);S.sizer.style.paddingRight=(S.barWidth=_.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=_.bottom)+"px",S.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=_.bottom+"px",S.scrollbarFiller.style.width=_.right+"px"):S.scrollbarFiller.style.display="",_.bottom&&f.options.coverGutterNextToScrollbar&&f.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=_.bottom+"px",S.gutterFiller.style.width=g.gutterWidth+"px"):S.gutterFiller.style.display=""}Yc.prototype.update=function(){return{bottom:0,right:0}},Yc.prototype.setScrollLeft=function(){},Yc.prototype.setScrollTop=function(){},Yc.prototype.clear=function(){};var bp={native:gl,null:Yc};function bu(f){f.display.scrollbars&&(f.display.scrollbars.clear(),f.display.scrollbars.addClass&&Ht(f.display.wrapper,f.display.scrollbars.addClass)),f.display.scrollbars=new bp[f.options.scrollbarStyle](function(g){f.display.wrapper.insertBefore(g,f.display.scrollbarFiller),ee(g,"mousedown",function(){f.state.focused&&setTimeout(function(){return f.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,S){S=="horizontal"?Aa(f,g):uc(f,g)},f),f.display.scrollbars.addClass&&ar(f.display.wrapper,f.display.scrollbars.addClass)}var wu=0;function ls(f){f.curOp={cm:f,viewChanged:!1,startHeight:f.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++wu,markArrays:null},function(g){Ro?Ro.ops.push(g):g.ownsGroup=Ro={ops:[g],delayedCallbacks:[]}}(f.curOp)}function $a(f){var g=f.curOp;g&&function(S,_){var T=S.ownsGroup;if(T)try{(function(D){var Y=D.delayedCallbacks,Z=0;do{for(;Z<Y.length;Z++)Y[Z].call(null);for(var bt=0;bt<D.ops.length;bt++){var ht=D.ops[bt];if(ht.cursorActivityHandlers)for(;ht.cursorActivityCalled<ht.cursorActivityHandlers.length;)ht.cursorActivityHandlers[ht.cursorActivityCalled++].call(null,ht.cm)}}while(Z<Y.length)})(T)}finally{Ro=null,_(T)}}(g,function(S){for(var _=0;_<S.ops.length;_++)S.ops[_].cm.curOp=null;(function(T){for(var D=T.ops,Y=0;Y<D.length;Y++)fc(D[Y]);for(var Z=0;Z<D.length;Z++)Jp(D[Z]);for(var bt=0;bt<D.length;bt++)ef(D[bt]);for(var ht=0;ht<D.length;ht++)_u(D[ht]);for(var Qt=0;Qt<D.length;Qt++)xc(D[Qt])})(S)})}function fc(f){var g=f.cm,S=g.display;(function(_){var T=_.display;!T.scrollbarsClipped&&T.scroller.offsetWidth&&(T.nativeBarWidth=T.scroller.offsetWidth-T.scroller.clientWidth,T.heightForcer.style.height=ni(_)+"px",T.sizer.style.marginBottom=-T.nativeBarWidth+"px",T.sizer.style.borderRightWidth=ni(_)+"px",T.scrollbarsClipped=!0)})(g),f.updateMaxLine&&Gn(g),f.mustUpdate=f.viewChanged||f.forceUpdate||f.scrollTop!=null||f.scrollToPos&&(f.scrollToPos.from.line<S.viewFrom||f.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&g.options.lineWrapping,f.update=f.mustUpdate&&new vl(g,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}function Jp(f){f.updatedDisplay=f.mustUpdate&&ml(f.cm,f.update)}function ef(f){var g=f.cm,S=g.display;f.updatedDisplay&&Vl(g),f.barMeasure=ss(g),S.maxLineChanged&&!g.options.lineWrapping&&(f.adjustWidthTo=ca(g,S.maxLine,S.maxLine.text.length).left+3,g.display.sizerWidth=f.adjustWidthTo,f.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+f.adjustWidthTo+ni(g)+g.display.barWidth),f.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+f.adjustWidthTo-la(g))),(f.updatedDisplay||f.selectionChanged)&&(f.preparedSelection=S.input.prepareSelection())}function _u(f){var g=f.cm;f.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=f.adjustWidthTo+"px",f.maxScrollLeft<g.doc.scrollLeft&&Aa(g,Math.min(g.display.scroller.scrollLeft,f.maxScrollLeft),!0),g.display.maxLineChanged=!1);var S=f.focus&&f.focus==Le();f.preparedSelection&&g.display.input.showSelection(f.preparedSelection,S),(f.updatedDisplay||f.startHeight!=g.doc.height)&&Cs(g,f.barMeasure),f.updatedDisplay&&Df(g,f.barMeasure),f.selectionChanged&&pl(g),g.state.focused&&f.updateInput&&g.display.input.reset(f.typing),S&&lc(f.cm)}function xc(f){var g=f.cm,S=g.display,_=g.doc;f.updatedDisplay&&rf(g,f.update),S.wheelStartX==null||f.scrollTop==null&&f.scrollLeft==null&&!f.scrollToPos||(S.wheelStartX=S.wheelStartY=null),f.scrollTop!=null&&Qu(g,f.scrollTop,f.forceScroll),f.scrollLeft!=null&&Aa(g,f.scrollLeft,!0,!0),f.scrollToPos&&function(bt,ht){if(!fe(bt,"scrollCursorIntoView")){var Qt=bt.display,re=Qt.sizer.getBoundingClientRect(),Se=null;if(ht.top+re.top<0?Se=!0:ht.bottom+re.top>(window.innerHeight||document.documentElement.clientHeight)&&(Se=!1),Se!=null&&!xt){var ge=Vt("div","​",null,`position: absolute;
                         top: `+(ht.top-Qt.viewOffset-sa(bt.display))+`px;
                         height: `+(ht.bottom-ht.top+ni(bt)+Qt.barHeight)+`px;
                         left: `+ht.left+"px; width: "+Math.max(2,ht.right-ht.left)+"px;");bt.display.lineSpace.appendChild(ge),ge.scrollIntoView(Se),bt.display.lineSpace.removeChild(ge)}}}(g,function(bt,ht,Qt,re){var Se;re==null&&(re=0),bt.options.lineWrapping||ht!=Qt||(Qt=ht.sticky=="before"?cr(ht.line,ht.ch+1,"before"):ht,ht=ht.ch?cr(ht.line,ht.sticky=="before"?ht.ch-1:ht.ch,"after"):ht);for(var ge=0;ge<5;ge++){var $e=!1,Ge=ur(bt,ht),He=Qt&&Qt!=ht?ur(bt,Qt):Ge,Ze=xs(bt,Se={left:Math.min(Ge.left,He.left),top:Math.min(Ge.top,He.top)-re,right:Math.max(Ge.left,He.left),bottom:Math.max(Ge.bottom,He.bottom)+re}),vr=bt.doc.scrollTop,br=bt.doc.scrollLeft;if(Ze.scrollTop!=null&&(uc(bt,Ze.scrollTop),Math.abs(bt.doc.scrollTop-vr)>1&&($e=!0)),Ze.scrollLeft!=null&&(Aa(bt,Ze.scrollLeft),Math.abs(bt.doc.scrollLeft-br)>1&&($e=!0)),!$e)break}return Se}(g,Mr(_,f.scrollToPos.from),Mr(_,f.scrollToPos.to),f.scrollToPos.margin));var T=f.maybeHiddenMarkers,D=f.maybeUnhiddenMarkers;if(T)for(var Y=0;Y<T.length;++Y)T[Y].lines.length||Et(T[Y],"hide");if(D)for(var Z=0;Z<D.length;++Z)D[Z].lines.length&&Et(D[Z],"unhide");S.wrapper.offsetHeight&&(_.scrollTop=g.display.scroller.scrollTop),f.changeObjs&&Et(g,"changes",g,f.changeObjs),f.update&&f.update.finish()}function Ma(f,g){if(f.curOp)return g();ls(f);try{return g()}finally{$a(f)}}function Ho(f,g){return function(){if(f.curOp)return g.apply(f,arguments);ls(f);try{return g.apply(f,arguments)}finally{$a(f)}}}function Ai(f){return function(){if(this.curOp)return f.apply(this,arguments);ls(this);try{return f.apply(this,arguments)}finally{$a(this)}}}function Bo(f){return function(){var g=this.cm;if(!g||g.curOp)return f.apply(this,arguments);ls(g);try{return f.apply(this,arguments)}finally{$a(g)}}}function cs(f,g){f.doc.highlightFrontier<f.display.viewTo&&f.state.highlight.set(g,Ar(Us,f))}function Us(f){var g=f.doc;if(!(g.highlightFrontier>=f.display.viewTo)){var S=+new Date+f.options.workTime,_=jo(f,g.highlightFrontier),T=[];g.iter(_.line,Math.min(g.first+g.size,f.display.viewTo+500),function(D){if(_.line>=f.display.viewFrom){var Y=D.styles,Z=D.text.length>f.options.maxHighlightLength?fn(g.mode,_.state):null,bt=Vo(f,D,_,!0);Z&&(_.state=Z),D.styles=bt.styles;var ht=D.styleClasses,Qt=bt.classes;Qt?D.styleClasses=Qt:ht&&(D.styleClasses=null);for(var re=!Y||Y.length!=D.styles.length||ht!=Qt&&(!ht||!Qt||ht.bgClass!=Qt.bgClass||ht.textClass!=Qt.textClass),Se=0;!re&&Se<Y.length;++Se)re=Y[Se]!=D.styles[Se];re&&T.push(_.line),D.stateAfter=_.save(),_.nextLine()}else D.text.length<=f.options.maxHighlightLength&&Ra(f,D.text,_),D.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>S)return cs(f,f.options.workDelay),!0}),g.highlightFrontier=_.line,g.modeFrontier=Math.max(g.modeFrontier,_.line),T.length&&Ma(f,function(){for(var D=0;D<T.length;D++)Hs(f,T[D],"text")})}}var vl=function(f,g,S){var _=f.display;this.viewport=g,this.visible=_s(_,f.doc,g),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=la(f),this.force=S,this.dims=gu(f),this.events=[]};function ml(f,g){var S=f.display,_=f.doc;if(g.editorIsHidden)return Wa(f),!1;if(!g.force&&g.visible.from>=S.viewFrom&&g.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&ac(f)==0)return!1;Su(f)&&(Wa(f),g.dims=gu(f));var T=_.first+_.size,D=Math.max(g.visible.from-f.options.viewportMargin,_.first),Y=Math.min(T,g.visible.to+f.options.viewportMargin);S.viewFrom<D&&D-S.viewFrom<20&&(D=Math.max(_.first,S.viewFrom)),S.viewTo>Y&&S.viewTo-Y<20&&(Y=Math.min(T,S.viewTo)),yi&&(D=An(f.doc,D),Y=vs(f.doc,Y));var Z=D!=S.viewFrom||Y!=S.viewTo||S.lastWrapHeight!=g.wrapperHeight||S.lastWrapWidth!=g.wrapperWidth;(function(Qt,re,Se){var ge=Qt.display;ge.view.length==0||re>=ge.viewTo||Se<=ge.viewFrom?(ge.view=rs(Qt,re,Se),ge.viewFrom=re):(ge.viewFrom>re?ge.view=rs(Qt,re,ge.viewFrom).concat(ge.view):ge.viewFrom<re&&(ge.view=ge.view.slice(Nl(Qt,re))),ge.viewFrom=re,ge.viewTo<Se?ge.view=ge.view.concat(rs(Qt,ge.viewTo,Se)):ge.viewTo>Se&&(ge.view=ge.view.slice(0,Nl(Qt,Se)))),ge.viewTo=Se})(f,D,Y),S.viewOffset=li(rt(f.doc,S.viewFrom)),f.display.mover.style.top=S.viewOffset+"px";var bt=ac(f);if(!Z&&bt==0&&!g.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var ht=function(Qt){if(Qt.hasFocus())return null;var re=Le();if(!re||!de(Qt.display.lineDiv,re))return null;var Se={activeElt:re};if(window.getSelection){var ge=window.getSelection();ge.anchorNode&&ge.extend&&de(Qt.display.lineDiv,ge.anchorNode)&&(Se.anchorNode=ge.anchorNode,Se.anchorOffset=ge.anchorOffset,Se.focusNode=ge.focusNode,Se.focusOffset=ge.focusOffset)}return Se}(f);return bt>4&&(S.lineDiv.style.display="none"),Cc(f,S.updateLineNumbers,g.dims),bt>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,function(Qt){if(Qt&&Qt.activeElt&&Qt.activeElt!=Le()&&(Qt.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(Qt.activeElt.nodeName)&&Qt.anchorNode&&de(document.body,Qt.anchorNode)&&de(document.body,Qt.focusNode))){var re=window.getSelection(),Se=document.createRange();Se.setEnd(Qt.anchorNode,Qt.anchorOffset),Se.collapse(!1),re.removeAllRanges(),re.addRange(Se),re.extend(Qt.focusNode,Qt.focusOffset)}}(ht),Dt(S.cursorDiv),Dt(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,Z&&(S.lastWrapHeight=g.wrapperHeight,S.lastWrapWidth=g.wrapperWidth,cs(f,400)),S.updateLineNumbers=null,!0}function rf(f,g){for(var S=g.viewport,_=!0;;_=!1){if(_&&f.options.lineWrapping&&g.oldDisplayWidth!=la(f))_&&(g.visible=_s(f.display,f.doc,S));else if(S&&S.top!=null&&(S={top:Math.min(f.doc.height+is(f.display)-ms(f),S.top)}),g.visible=_s(f.display,f.doc,S),g.visible.from>=f.display.viewFrom&&g.visible.to<=f.display.viewTo)break;if(!ml(f,g))break;Vl(f);var T=ss(f);ul(f),Cs(f,T),Df(f,T),g.force=!1}g.signal(f,"update",f),f.display.viewFrom==f.display.reportedViewFrom&&f.display.viewTo==f.display.reportedViewTo||(g.signal(f,"viewportChange",f,f.display.viewFrom,f.display.viewTo),f.display.reportedViewFrom=f.display.viewFrom,f.display.reportedViewTo=f.display.viewTo)}function xu(f,g){var S=new vl(f,g);if(ml(f,S)){Vl(f),rf(f,S);var _=ss(f);ul(f),Cs(f,_),Df(f,_),S.finish()}}function Cc(f,g,S){var _=f.display,T=f.options.lineNumbers,D=_.lineDiv,Y=D.firstChild;function Z($e){var Ge=$e.nextSibling;return $&&It&&f.display.currentWheelTarget==$e?$e.style.display="none":$e.parentNode.removeChild($e),Ge}for(var bt=_.view,ht=_.viewFrom,Qt=0;Qt<bt.length;Qt++){var re=bt[Qt];if(!re.hidden)if(re.node&&re.node.parentNode==D){for(;Y!=re.node;)Y=Z(Y);var Se=T&&g!=null&&g<=ht&&re.lineNumber;re.changes&&(kt(re.changes,"gutter")>-1&&(Se=!1),ns(f,re,ht,S)),Se&&(Dt(re.lineNumber),re.lineNumber.appendChild(document.createTextNode(Xr(f.options,ht)))),Y=re.node.nextSibling}else{var ge=wc(f,re,ht,S);D.insertBefore(ge,Y)}ht+=re.size}for(;Y;)Y=Z(Y)}function Ss(f){var g=f.gutters.offsetWidth;f.sizer.style.marginLeft=g+"px",Xo(f,"gutterChanged",f)}function Df(f,g){f.display.sizer.style.minHeight=g.docHeight+"px",f.display.heightForcer.style.top=g.docHeight+"px",f.display.gutters.style.height=g.docHeight+f.display.barHeight+ni(f)+"px"}function Cu(f){var g=f.display,S=g.view;if(g.alignWidgets||g.gutters.firstChild&&f.options.fixedGutter){for(var _=ic(g)-g.scroller.scrollLeft+f.doc.scrollLeft,T=g.gutters.offsetWidth,D=_+"px",Y=0;Y<S.length;Y++)if(!S[Y].hidden){f.options.fixedGutter&&(S[Y].gutter&&(S[Y].gutter.style.left=D),S[Y].gutterBackground&&(S[Y].gutterBackground.style.left=D));var Z=S[Y].alignable;if(Z)for(var bt=0;bt<Z.length;bt++)Z[bt].style.left=D}f.options.fixedGutter&&(g.gutters.style.left=_+T+"px")}}function Su(f){if(!f.options.lineNumbers)return!1;var g=f.doc,S=Xr(f.options,g.first+g.size-1),_=f.display;if(S.length!=_.lineNumChars){var T=_.measure.appendChild(Vt("div",[Vt("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),D=T.firstChild.offsetWidth,Y=T.offsetWidth-D;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(D,_.lineGutter.offsetWidth-Y)+1,_.lineNumWidth=_.lineNumInnerWidth+Y,_.lineNumChars=_.lineNumInnerWidth?S.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",Ss(f.display),!0}return!1}function Ou(f,g){for(var S=[],_=!1,T=0;T<f.length;T++){var D=f[T],Y=null;if(typeof D!="string"&&(Y=D.style,D=D.className),D=="CodeMirror-linenumbers"){if(!g)continue;_=!0}S.push({className:D,style:Y})}return g&&!_&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function wp(f){var g=f.gutters,S=f.gutterSpecs;Dt(g),f.lineGutter=null;for(var _=0;_<S.length;++_){var T=S[_],D=T.className,Y=T.style,Z=g.appendChild(Vt("div",null,"CodeMirror-gutter "+D));Y&&(Z.style.cssText=Y),D=="CodeMirror-linenumbers"&&(f.lineGutter=Z,Z.style.width=(f.lineNumWidth||1)+"px")}g.style.display=S.length?"":"none",Ss(f)}function Tu(f){wp(f.display),Ui(f),Cu(f)}function La(f,g,S,_){var T=this;this.input=S,T.scrollbarFiller=Vt("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=Vt("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=Me("div",null,"CodeMirror-code"),T.selectionDiv=Vt("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=Vt("div",null,"CodeMirror-cursors"),T.measure=Vt("div",null,"CodeMirror-measure"),T.lineMeasure=Vt("div",null,"CodeMirror-measure"),T.lineSpace=Me("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var D=Me("div",[T.lineSpace],"CodeMirror-lines");T.mover=Vt("div",[D],null,"position: relative"),T.sizer=Vt("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=Vt("div",null,null,"position: absolute; height: "+Gt+"px; width: 1px;"),T.gutters=Vt("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=Vt("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=Vt("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),T.wrapper.setAttribute("translate","no"),I&&N<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),$||vt&&W||(T.scroller.draggable=!0),f&&(f.appendChild?f.appendChild(T.wrapper):f(T.wrapper)),T.viewFrom=T.viewTo=g.first,T.reportedViewFrom=T.reportedViewTo=g.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=Ou(_.gutters,_.lineNumbers),wp(T),S.init(T)}vl.prototype.signal=function(f,g){Ye(f,g)&&this.events.push(arguments)},vl.prototype.finish=function(){for(var f=0;f<this.events.length;f++)Et.apply(null,this.events[f])};var Ti=0,Fn=null;function Fi(f){var g=f.wheelDeltaX,S=f.wheelDeltaY;return g==null&&f.detail&&f.axis==f.HORIZONTAL_AXIS&&(g=f.detail),S==null&&f.detail&&f.axis==f.VERTICAL_AXIS?S=f.detail:S==null&&(S=f.wheelDelta),{x:g,y:S}}function di(f){var g=Fi(f);return g.x*=Fn,g.y*=Fn,g}function _p(f,g){V&&U>=102&&(f.display.chromeScrollHack==null?f.display.sizer.style.pointerEvents="none":clearTimeout(f.display.chromeScrollHack),f.display.chromeScrollHack=setTimeout(function(){f.display.chromeScrollHack=null,f.display.sizer.style.pointerEvents=""},100));var S=Fi(g),_=S.x,T=S.y,D=Fn;g.deltaMode===0&&(_=g.deltaX,T=g.deltaY,D=1);var Y=f.display,Z=Y.scroller,bt=Z.scrollWidth>Z.clientWidth,ht=Z.scrollHeight>Z.clientHeight;if(_&&bt||T&&ht){if(T&&It&&$){t:for(var Qt=g.target,re=Y.view;Qt!=Z;Qt=Qt.parentNode)for(var Se=0;Se<re.length;Se++)if(re[Se].node==Qt){f.display.currentWheelTarget=Qt;break t}}if(_&&!vt&&!it&&D!=null)return T&&ht&&uc(f,Math.max(0,Z.scrollTop+T*D)),Aa(f,Math.max(0,Z.scrollLeft+_*D)),(!T||T&&ht)&&Wr(g),void(Y.wheelStartX=null);if(T&&D!=null){var ge=T*D,$e=f.doc.scrollTop,Ge=$e+Y.wrapper.clientHeight;ge<0?$e=Math.max(0,$e+ge-50):Ge=Math.min(f.doc.height,Ge+ge+50),xu(f,{top:$e,bottom:Ge})}Ti<20&&g.deltaMode!==0&&(Y.wheelStartX==null?(Y.wheelStartX=Z.scrollLeft,Y.wheelStartY=Z.scrollTop,Y.wheelDX=_,Y.wheelDY=T,setTimeout(function(){if(Y.wheelStartX!=null){var He=Z.scrollLeft-Y.wheelStartX,Ze=Z.scrollTop-Y.wheelStartY,vr=Ze&&Y.wheelDY&&Ze/Y.wheelDY||He&&Y.wheelDX&&He/Y.wheelDX;Y.wheelStartX=Y.wheelStartY=null,vr&&(Fn=(Fn*Ti+vr)/(Ti+1),++Ti)}},200)):(Y.wheelDX+=_,Y.wheelDY+=T))}}I?Fn=-.53:vt?Fn=15:V?Fn=-.7:X&&(Fn=-.3333333333333333);var Oa=function(f,g){this.ranges=f,this.primIndex=g};Oa.prototype.primary=function(){return this.ranges[this.primIndex]},Oa.prototype.equals=function(f){if(f==this)return!0;if(f.primIndex!=this.primIndex||f.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var S=this.ranges[g],_=f.ranges[g];if(!xe(S.anchor,_.anchor)||!xe(S.head,_.head))return!1}return!0},Oa.prototype.deepCopy=function(){for(var f=[],g=0;g<this.ranges.length;g++)f[g]=new _o(lr(this.ranges[g].anchor),lr(this.ranges[g].head));return new Oa(f,this.primIndex)},Oa.prototype.somethingSelected=function(){for(var f=0;f<this.ranges.length;f++)if(!this.ranges[f].empty())return!0;return!1},Oa.prototype.contains=function(f,g){g||(g=f);for(var S=0;S<this.ranges.length;S++){var _=this.ranges[S];if(Mt(g,_.from())>=0&&Mt(f,_.to())<=0)return S}return-1};var _o=function(f,g){this.anchor=f,this.head=g};function zs(f,g,S){var _=f&&f.options.selectionsMayTouch,T=g[S];g.sort(function(Se,ge){return Mt(Se.from(),ge.from())}),S=kt(g,T);for(var D=1;D<g.length;D++){var Y=g[D],Z=g[D-1],bt=Mt(Z.to(),Y.from());if(_&&!Y.empty()?bt>0:bt>=0){var ht=en(Z.from(),Y.from()),Qt=Yr(Z.to(),Y.to()),re=Z.empty()?Y.from()==Y.head:Z.from()==Z.head;D<=S&&--S,g.splice(--D,2,new _o(re?Qt:ht,re?ht:Qt))}}return new Oa(g,S)}function pc(f,g){return new Oa([new _o(f,g||f)],0)}function yl(f){return f.text?cr(f.from.line+f.text.length-1,er(f.text).length+(f.text.length==1?f.from.ch:0)):f.to}function If(f,g){if(Mt(f,g.from)<0)return f;if(Mt(f,g.to)<=0)return yl(g);var S=f.line+g.text.length-(g.to.line-g.from.line)-1,_=f.ch;return f.line==g.to.line&&(_+=yl(g).ch-g.to.ch),cr(S,_)}function Fl(f,g){for(var S=[],_=0;_<f.sel.ranges.length;_++){var T=f.sel.ranges[_];S.push(new _o(If(T.anchor,g),If(T.head,g)))}return zs(f.cm,S,f.sel.primIndex)}function xp(f,g,S){return f.line==g.line?cr(S.line,f.ch-g.ch+S.ch):cr(S.line+(f.line-g.line),f.ch)}function Sc(f){f.doc.mode=co(f.options,f.doc.modeOption),Oc(f)}function Oc(f){f.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),f.doc.modeFrontier=f.doc.highlightFrontier=f.doc.first,cs(f,100),f.state.modeGen++,f.curOp&&Ui(f)}function Zc(f,g){return g.from.ch==0&&g.to.ch==0&&er(g.text)==""&&(!f.cm||f.cm.options.wholeLineUpdateBefore)}function nf(f,g,S,_){function T(vr){return S?S[vr]:null}function D(vr,br,Pr){(function(Sr,Tr,hn,ln){Sr.text=Tr,Sr.stateAfter&&(Sr.stateAfter=null),Sr.styles&&(Sr.styles=null),Sr.order!=null&&(Sr.order=null),bi(Sr),Vs(Sr,hn);var Bn=ln?ln(Sr):1;Bn!=Sr.height&&pr(Sr,Bn)})(vr,br,Pr,_),Xo(vr,"change",vr,g)}function Y(vr,br){for(var Pr=[],Sr=vr;Sr<br;++Sr)Pr.push(new pn(ht[Sr],T(Sr),_));return Pr}var Z=g.from,bt=g.to,ht=g.text,Qt=rt(f,Z.line),re=rt(f,bt.line),Se=er(ht),ge=T(ht.length-1),$e=bt.line-Z.line;if(g.full)f.insert(0,Y(0,ht.length)),f.remove(ht.length,f.size-ht.length);else if(Zc(f,g)){var Ge=Y(0,ht.length-1);D(re,re.text,ge),$e&&f.remove(Z.line,$e),Ge.length&&f.insert(Z.line,Ge)}else if(Qt==re)if(ht.length==1)D(Qt,Qt.text.slice(0,Z.ch)+Se+Qt.text.slice(bt.ch),ge);else{var He=Y(1,ht.length-1);He.push(new pn(Se+Qt.text.slice(bt.ch),ge,_)),D(Qt,Qt.text.slice(0,Z.ch)+ht[0],T(0)),f.insert(Z.line+1,He)}else if(ht.length==1)D(Qt,Qt.text.slice(0,Z.ch)+ht[0]+re.text.slice(bt.ch),T(0)),f.remove(Z.line+1,$e);else{D(Qt,Qt.text.slice(0,Z.ch)+ht[0],T(0)),D(re,Se+re.text.slice(bt.ch),ge);var Ze=Y(1,ht.length-1);$e>1&&f.remove(Z.line+1,$e-1),f.insert(Z.line+1,Ze)}Xo(f,"change",f,g)}function ja(f,g,S){(function _(T,D,Y){if(T.linked)for(var Z=0;Z<T.linked.length;++Z){var bt=T.linked[Z];if(bt.doc!=D){var ht=Y&&bt.sharedHist;S&&!ht||(g(bt.doc,ht),_(bt.doc,T,ht))}}})(f,null,!0)}function Xc(f,g){if(g.cm)throw new Error("This document is already in use.");f.doc=g,g.cm=f,Xu(f),Sc(f),Rl(f),f.options.direction=g.direction,f.options.lineWrapping||Gn(f),f.options.mode=g.modeOption,Ui(f)}function Rl(f){(f.doc.direction=="rtl"?ar:Ht)(f.display.lineDiv,"CodeMirror-rtl")}function bl(f){this.done=[],this.undone=[],this.undoDepth=f?f.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=f?f.maxGeneration:1}function Tc(f,g){var S={from:lr(g.from),to:yl(g),text:Xt(f,g.from,g.to)};return Da(f,S,g.from.line,g.to.line+1),ja(f,function(_){return Da(_,S,g.from.line,g.to.line+1)},!0),S}function wl(f){for(;f.length&&er(f).ranges;)f.pop()}function Nf(f,g,S,_){var T=f.history;T.undone.length=0;var D,Y,Z=+new Date;if((T.lastOp==_||T.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&T.lastModTime>Z-(f.cm?f.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(D=function(ht,Qt){return Qt?(wl(ht.done),er(ht.done)):ht.done.length&&!er(ht.done).ranges?er(ht.done):ht.done.length>1&&!ht.done[ht.done.length-2].ranges?(ht.done.pop(),er(ht.done)):void 0}(T,T.lastOp==_)))Y=er(D.changes),Mt(g.from,g.to)==0&&Mt(g.from,Y.to)==0?Y.to=yl(g):D.changes.push(Tc(f,g));else{var bt=er(T.done);for(bt&&bt.ranges||Eu(f.sel,T.done),D={changes:[Tc(f,g)],generation:T.generation},T.done.push(D);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(S),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=Z,T.lastOp=T.lastSelOp=_,T.lastOrigin=T.lastSelOrigin=g.origin,Y||Et(f,"historyAdded")}function Cp(f,g,S,_){var T=f.history,D=_&&_.origin;S==T.lastSelOp||D&&T.lastSelOrigin==D&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==D||function(Y,Z,bt,ht){var Qt=Z.charAt(0);return Qt=="*"||Qt=="+"&&bt.ranges.length==ht.ranges.length&&bt.somethingSelected()==ht.somethingSelected()&&new Date-Y.history.lastSelTime<=(Y.cm?Y.cm.options.historyEventDelay:500)}(f,D,er(T.done),g))?T.done[T.done.length-1]=g:Eu(g,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=D,T.lastSelOp=S,_&&_.clearRedo!==!1&&wl(T.undone)}function Eu(f,g){var S=er(g);S&&S.ranges&&S.equals(f)||g.push(f)}function Da(f,g,S,_){var T=g["spans_"+f.id],D=0;f.iter(Math.max(f.first,S),Math.min(f.first+f.size,_),function(Y){Y.markedSpans&&((T||(T=g["spans_"+f.id]={}))[D]=Y.markedSpans),++D})}function Eo(f){if(!f)return null;for(var g,S=0;S<f.length;++S)f[S].marker.explicitlyCleared?g||(g=f.slice(0,S)):g&&g.push(f[S]);return g?g.length?g:null:f}function us(f,g){var S=function(Qt,re){var Se=re["spans_"+Qt.id];if(!Se)return null;for(var ge=[],$e=0;$e<re.text.length;++$e)ge.push(Eo(Se[$e]));return ge}(f,g),_=Ca(f,g);if(!S)return _;if(!_)return S;for(var T=0;T<S.length;++T){var D=S[T],Y=_[T];if(D&&Y)t:for(var Z=0;Z<Y.length;++Z){for(var bt=Y[Z],ht=0;ht<D.length;++ht)if(D[ht].marker==bt.marker)continue t;D.push(bt)}else Y&&(S[T]=Y)}return S}function Ta(f,g,S){for(var _=[],T=0;T<f.length;++T){var D=f[T];if(D.ranges)_.push(S?Oa.prototype.deepCopy.call(D):D);else{var Y=D.changes,Z=[];_.push({changes:Z});for(var bt=0;bt<Y.length;++bt){var ht=Y[bt],Qt=void 0;if(Z.push({from:ht.from,to:ht.to,text:ht.text}),g)for(var re in ht)(Qt=re.match(/^spans_(\d+)$/))&&kt(g,Number(Qt[1]))>-1&&(er(Z)[re]=ht[re],delete ht[re])}}}return _}function _l(f,g,S,_){if(_){var T=f.anchor;if(S){var D=Mt(g,T)<0;D!=Mt(S,T)<0?(T=g,g=S):D!=Mt(g,S)<0&&(g=S)}return new _o(T,g)}return new _o(S||g,g)}function Jc(f,g,S,_,T){T==null&&(T=f.cm&&(f.cm.display.shift||f.extend)),Ei(f,new Oa([_l(f.sel.primary(),g,S,T)],0),_)}function of(f,g,S){for(var _=[],T=f.cm&&(f.cm.display.shift||f.extend),D=0;D<f.sel.ranges.length;D++)_[D]=_l(f.sel.ranges[D],g[D],null,T);Ei(f,zs(f.cm,_,f.sel.primIndex),S)}function Pu(f,g,S,_){var T=f.sel.ranges.slice(0);T[g]=S,Ei(f,zs(f.cm,T,f.sel.primIndex),_)}function Vf(f,g,S,_){Ei(f,pc(g,S),_)}function af(f,g,S){var _=f.history.done,T=er(_);T&&T.ranges?(_[_.length-1]=g,ku(f,g,S)):Ei(f,g,S)}function Ei(f,g,S){ku(f,g,S),Cp(f,f.sel,f.cm?f.cm.curOp.id:NaN,S)}function ku(f,g,S){(Ye(f,"beforeSelectionChange")||f.cm&&Ye(f.cm,"beforeSelectionChange"))&&(g=function(T,D,Y){var Z={ranges:D.ranges,update:function(bt){this.ranges=[];for(var ht=0;ht<bt.length;ht++)this.ranges[ht]=new _o(Mr(T,bt[ht].anchor),Mr(T,bt[ht].head))},origin:Y&&Y.origin};return Et(T,"beforeSelectionChange",T,Z),T.cm&&Et(T.cm,"beforeSelectionChange",T.cm,Z),Z.ranges!=D.ranges?zs(T.cm,Z.ranges,Z.ranges.length-1):D}(f,g,S));var _=S&&S.bias||(Mt(g.primary().head,f.sel.primary().head)<0?-1:1);sf(f,Ff(f,g,_,!0)),S&&S.scroll===!1||!f.cm||f.cm.getOption("readOnly")=="nocursor"||cc(f.cm)}function sf(f,g){g.equals(f.sel)||(f.sel=g,f.cm&&(f.cm.curOp.updateInput=1,f.cm.curOp.selectionChanged=!0,Pe(f.cm)),Xo(f,"cursorActivity",f))}function Hl(f){sf(f,Ff(f,f.sel,null,!1))}function Ff(f,g,S,_){for(var T,D=0;D<g.ranges.length;D++){var Y=g.ranges[D],Z=g.ranges.length==f.sel.ranges.length&&f.sel.ranges[D],bt=Au(f,Y.anchor,Z&&Z.anchor,S,_),ht=Y.head==Y.anchor?bt:Au(f,Y.head,Z&&Z.head,S,_);(T||bt!=Y.anchor||ht!=Y.head)&&(T||(T=g.ranges.slice(0,D)),T[D]=new _o(bt,ht))}return T?zs(f.cm,T,g.primIndex):g}function Ec(f,g,S,_,T){var D=rt(f,g.line);if(D.markedSpans)for(var Y=0;Y<D.markedSpans.length;++Y){var Z=D.markedSpans[Y],bt=Z.marker,ht="selectLeft"in bt?!bt.selectLeft:bt.inclusiveLeft,Qt="selectRight"in bt?!bt.selectRight:bt.inclusiveRight;if((Z.from==null||(ht?Z.from<=g.ch:Z.from<g.ch))&&(Z.to==null||(Qt?Z.to>=g.ch:Z.to>g.ch))){if(T&&(Et(bt,"beforeCursorEnter"),bt.explicitlyCleared)){if(D.markedSpans){--Y;continue}break}if(!bt.atomic)continue;if(S){var re=bt.find(_<0?1:-1),Se=void 0;if((_<0?Qt:ht)&&(re=Mu(f,re,-_,re&&re.line==g.line?D:null)),re&&re.line==g.line&&(Se=Mt(re,S))&&(_<0?Se<0:Se>0))return Ec(f,re,g,_,T)}var ge=bt.find(_<0?-1:1);return(_<0?ht:Qt)&&(ge=Mu(f,ge,_,ge.line==g.line?D:null)),ge?Ec(f,ge,g,_,T):null}}return g}function Au(f,g,S,_,T){var D=_||1;return Ec(f,g,S,D,T)||!T&&Ec(f,g,S,D,!0)||Ec(f,g,S,-D,T)||!T&&Ec(f,g,S,-D,!0)||(f.cantEdit=!0,cr(f.first,0))}function Mu(f,g,S,_){return S<0&&g.ch==0?g.line>f.first?Mr(f,cr(g.line-1)):null:S>0&&g.ch==(_||rt(f,g.line)).text.length?g.line<f.first+f.size-1?cr(g.line+1,0):null:new cr(g.line,g.ch+S)}function Pc(f){f.setSelection(cr(f.firstLine(),0),cr(f.lastLine()),Ae)}function Rf(f,g,S){var _={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return _.canceled=!0}};return S&&(_.update=function(T,D,Y,Z){T&&(_.from=Mr(f,T)),D&&(_.to=Mr(f,D)),Y&&(_.text=Y),Z!==void 0&&(_.origin=Z)}),Et(f,"beforeChange",f,_),f.cm&&Et(f.cm,"beforeChange",f.cm,_),_.canceled?(f.cm&&(f.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function kc(f,g,S){if(f.cm){if(!f.cm.curOp)return Ho(f.cm,kc)(f,g,S);if(f.cm.state.suppressEdits)return}if(!(Ye(f,"beforeChange")||f.cm&&Ye(f.cm,"beforeChange"))||(g=Rf(f,g,!0))){var _=si&&!S&&function(D,Y,Z){var bt=null;if(D.iter(Y.line,Z.line+1,function(vr){if(vr.markedSpans)for(var br=0;br<vr.markedSpans.length;++br){var Pr=vr.markedSpans[br].marker;!Pr.readOnly||bt&&kt(bt,Pr)!=-1||(bt||(bt=[])).push(Pr)}}),!bt)return null;for(var ht=[{from:Y,to:Z}],Qt=0;Qt<bt.length;++Qt)for(var re=bt[Qt],Se=re.find(0),ge=0;ge<ht.length;++ge){var $e=ht[ge];if(!(Mt($e.to,Se.from)<0||Mt($e.from,Se.to)>0)){var Ge=[ge,1],He=Mt($e.from,Se.from),Ze=Mt($e.to,Se.to);(He<0||!re.inclusiveLeft&&!He)&&Ge.push({from:$e.from,to:Se.from}),(Ze>0||!re.inclusiveRight&&!Ze)&&Ge.push({from:Se.to,to:$e.to}),ht.splice.apply(ht,Ge),ge+=Ge.length-3}}return ht}(f,g.from,g.to);if(_)for(var T=_.length-1;T>=0;--T)Hf(f,{from:_[T].from,to:_[T].to,text:T?[""]:g.text,origin:g.origin});else Hf(f,g)}}function Hf(f,g){if(g.text.length!=1||g.text[0]!=""||Mt(g.from,g.to)!=0){var S=Fl(f,g);Nf(f,g,S,f.cm?f.cm.curOp.id:NaN),Os(f,g,S,Ca(f,g));var _=[];ja(f,function(T,D){D||kt(_,T.history)!=-1||(zf(T.history,g),_.push(T.history)),Os(T,g,null,Ca(T,g))})}}function Ws(f,g,S){var _=f.cm&&f.cm.state.suppressEdits;if(!_||S){for(var T,D=f.history,Y=f.sel,Z=g=="undo"?D.done:D.undone,bt=g=="undo"?D.undone:D.done,ht=0;ht<Z.length&&(T=Z[ht],S?!T.ranges||T.equals(f.sel):T.ranges);ht++);if(ht!=Z.length){for(D.lastOrigin=D.lastSelOrigin=null;;){if(!(T=Z.pop()).ranges){if(_)return void Z.push(T);break}if(Eu(T,bt),S&&!T.equals(f.sel))return void Ei(f,T,{clearRedo:!1});Y=T}var Qt=[];Eu(Y,bt),bt.push({changes:Qt,generation:D.generation}),D.generation=T.generation||++D.maxGeneration;for(var re=Ye(f,"beforeChange")||f.cm&&Ye(f.cm,"beforeChange"),Se=function(Ge){var He=T.changes[Ge];if(He.origin=g,re&&!Rf(f,He,!1))return Z.length=0,{};Qt.push(Tc(f,He));var Ze=Ge?Fl(f,He):er(Z);Os(f,He,Ze,us(f,He)),!Ge&&f.cm&&f.cm.scrollIntoView({from:He.from,to:yl(He)});var vr=[];ja(f,function(br,Pr){Pr||kt(vr,br.history)!=-1||(zf(br.history,He),vr.push(br.history)),Os(br,He,null,us(br,He))})},ge=T.changes.length-1;ge>=0;--ge){var $e=Se(ge);if($e)return $e.v}}}}function Bf(f,g){if(g!=0&&(f.first+=g,f.sel=new Oa(Dr(f.sel.ranges,function(T){return new _o(cr(T.anchor.line+g,T.anchor.ch),cr(T.head.line+g,T.head.ch))}),f.sel.primIndex),f.cm)){Ui(f.cm,f.first,f.first-g,g);for(var S=f.cm.display,_=S.viewFrom;_<S.viewTo;_++)Hs(f.cm,_,"gutter")}}function Os(f,g,S,_){if(f.cm&&!f.cm.curOp)return Ho(f.cm,Os)(f,g,S,_);if(g.to.line<f.first)Bf(f,g.text.length-1-(g.to.line-g.from.line));else if(!(g.from.line>f.lastLine())){if(g.from.line<f.first){var T=g.text.length-1-(f.first-g.from.line);Bf(f,T),g={from:cr(f.first,0),to:cr(g.to.line+T,g.to.ch),text:[er(g.text)],origin:g.origin}}var D=f.lastLine();g.to.line>D&&(g={from:g.from,to:cr(D,rt(f,D).text.length),text:[g.text[0]],origin:g.origin}),g.removed=Xt(f,g.from,g.to),S||(S=Fl(f,g)),f.cm?function(Y,Z,bt){var ht=Y.doc,Qt=Y.display,re=Z.from,Se=Z.to,ge=!1,$e=re.line;Y.options.lineWrapping||($e=Hr(Zo(rt(ht,re.line))),ht.iter($e,Se.line+1,function(br){if(br==Qt.maxLine)return ge=!0,!0})),ht.sel.contains(Z.from,Z.to)>-1&&Pe(Y),nf(ht,Z,bt,vu(Y)),Y.options.lineWrapping||(ht.iter($e,re.line+Z.text.length,function(br){var Pr=ci(br);Pr>Qt.maxLineLength&&(Qt.maxLine=br,Qt.maxLineLength=Pr,Qt.maxLineChanged=!0,ge=!1)}),ge&&(Y.curOp.updateMaxLine=!0)),function(br,Pr){if(br.modeFrontier=Math.min(br.modeFrontier,Pr),!(br.highlightFrontier<Pr-10)){for(var Sr=br.first,Tr=Pr-1;Tr>Sr;Tr--){var hn=rt(br,Tr).stateAfter;if(hn&&(!(hn instanceof wo)||Tr+hn.lookAhead<Pr)){Sr=Tr+1;break}}br.highlightFrontier=Math.min(br.highlightFrontier,Sr)}}(ht,re.line),cs(Y,400);var Ge=Z.text.length-(Se.line-re.line)-1;Z.full?Ui(Y):re.line!=Se.line||Z.text.length!=1||Zc(Y.doc,Z)?Ui(Y,re.line,Se.line+1,Ge):Hs(Y,re.line,"text");var He=Ye(Y,"changes"),Ze=Ye(Y,"change");if(Ze||He){var vr={from:re,to:Se,text:Z.text,removed:Z.removed,origin:Z.origin};Ze&&Xo(Y,"change",Y,vr),He&&(Y.curOp.changeObjs||(Y.curOp.changeObjs=[])).push(vr)}Y.display.selForContextMenu=null}(f.cm,g,_):nf(f,g,_),ku(f,S,Ae),f.cantEdit&&Au(f,cr(f.firstLine(),0))&&(f.cantEdit=!1)}}function Ac(f,g,S,_,T){var D;_||(_=S),Mt(_,S)<0&&(S=(D=[_,S])[0],_=D[1]),typeof g=="string"&&(g=f.splitLines(g)),kc(f,{from:S,to:_,text:g,origin:T})}function Sp(f,g,S,_){S<f.line?f.line+=_:g<f.line&&(f.line=g,f.ch=0)}function Uf(f,g,S,_){for(var T=0;T<f.length;++T){var D=f[T],Y=!0;if(D.ranges){D.copied||((D=f[T]=D.deepCopy()).copied=!0);for(var Z=0;Z<D.ranges.length;Z++)Sp(D.ranges[Z].anchor,g,S,_),Sp(D.ranges[Z].head,g,S,_)}else{for(var bt=0;bt<D.changes.length;++bt){var ht=D.changes[bt];if(S<ht.from.line)ht.from=cr(ht.from.line+_,ht.from.ch),ht.to=cr(ht.to.line+_,ht.to.ch);else if(g<=ht.to.line){Y=!1;break}}Y||(f.splice(0,T+1),T=0)}}}function zf(f,g){var S=g.from.line,_=g.to.line,T=g.text.length-(_-S)-1;Uf(f.done,S,_,T),Uf(f.undone,S,_,T)}function Ts(f,g,S,_){var T=g,D=g;return typeof g=="number"?D=rt(f,gn(f,g)):T=Hr(g),T==null?null:(_(D,T)&&f.cm&&Hs(f.cm,T,S),D)}function Mc(f){this.lines=f,this.parent=null;for(var g=0,S=0;S<f.length;++S)f[S].parent=this,g+=f[S].height;this.height=g}function dc(f){this.children=f;for(var g=0,S=0,_=0;_<f.length;++_){var T=f[_];g+=T.chunkSize(),S+=T.height,T.parent=this}this.size=g,this.height=S,this.parent=null}_o.prototype.from=function(){return en(this.anchor,this.head)},_o.prototype.to=function(){return Yr(this.anchor,this.head)},_o.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Mc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f,g){for(var S=f,_=f+g;S<_;++S){var T=this.lines[S];this.height-=T.height,ui(T),Xo(T,"delete")}this.lines.splice(f,g)},collapse:function(f){f.push.apply(f,this.lines)},insertInner:function(f,g,S){this.height+=S,this.lines=this.lines.slice(0,f).concat(g).concat(this.lines.slice(f));for(var _=0;_<g.length;++_)g[_].parent=this},iterN:function(f,g,S){for(var _=f+g;f<_;++f)if(S(this.lines[f]))return!0}},dc.prototype={chunkSize:function(){return this.size},removeInner:function(f,g){this.size-=g;for(var S=0;S<this.children.length;++S){var _=this.children[S],T=_.chunkSize();if(f<T){var D=Math.min(g,T-f),Y=_.height;if(_.removeInner(f,D),this.height-=Y-_.height,T==D&&(this.children.splice(S--,1),_.parent=null),(g-=D)==0)break;f=0}else f-=T}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof Mc))){var Z=[];this.collapse(Z),this.children=[new Mc(Z)],this.children[0].parent=this}},collapse:function(f){for(var g=0;g<this.children.length;++g)this.children[g].collapse(f)},insertInner:function(f,g,S){this.size+=g.length,this.height+=S;for(var _=0;_<this.children.length;++_){var T=this.children[_],D=T.chunkSize();if(f<=D){if(T.insertInner(f,g,S),T.lines&&T.lines.length>50){for(var Y=T.lines.length%25+25,Z=Y;Z<T.lines.length;){var bt=new Mc(T.lines.slice(Z,Z+=25));T.height-=bt.height,this.children.splice(++_,0,bt),bt.parent=this}T.lines=T.lines.slice(0,Y),this.maybeSpill()}break}f-=D}},maybeSpill:function(){if(!(this.children.length<=10)){var f=this;do{var g=new dc(f.children.splice(f.children.length-5,5));if(f.parent){f.size-=g.size,f.height-=g.height;var S=kt(f.parent.children,f);f.parent.children.splice(S+1,0,g)}else{var _=new dc(f.children);_.parent=f,f.children=[_,g],f=_}g.parent=f.parent}while(f.children.length>10);f.parent.maybeSpill()}},iterN:function(f,g,S){for(var _=0;_<this.children.length;++_){var T=this.children[_],D=T.chunkSize();if(f<D){var Y=Math.min(g,D-f);if(T.iterN(f,Y,S))return!0;if((g-=Y)==0)break;f=0}else f-=D}}};var Qc=function(f,g,S){if(S)for(var _ in S)S.hasOwnProperty(_)&&(this[_]=S[_]);this.doc=f,this.node=g};function lf(f,g,S){li(g)<(f.curOp&&f.curOp.scrollTop||f.doc.scrollTop)&&qc(f,S)}Qc.prototype.clear=function(){var f=this.doc.cm,g=this.line.widgets,S=this.line,_=Hr(S);if(_!=null&&g){for(var T=0;T<g.length;++T)g[T]==this&&g.splice(T--,1);g.length||(S.widgets=null);var D=Bi(this);pr(S,Math.max(0,S.height-D)),f&&(Ma(f,function(){lf(f,S,-D),Hs(f,_,"widget")}),Xo(f,"lineWidgetCleared",f,this,_))}},Qc.prototype.changed=function(){var f=this,g=this.height,S=this.doc.cm,_=this.line;this.height=null;var T=Bi(this)-g;T&&(sn(this.doc,_)||pr(_,_.height+T),S&&Ma(S,function(){S.curOp.forceUpdate=!0,lf(S,_,T),Xo(S,"lineWidgetChanged",S,f,Hr(_))}))},Cr(Qc);var Wf=0,Bl=function(f,g){this.lines=[],this.type=g,this.doc=f,this.id=++Wf};function Es(f,g,S,_,T){if(_&&_.shared)return function(re,Se,ge,$e,Ge){($e=Fr($e)).shared=!1;var He=[Es(re,Se,ge,$e,Ge)],Ze=He[0],vr=$e.widgetNode;return ja(re,function(br){vr&&($e.widgetNode=vr.cloneNode(!0)),He.push(Es(br,Mr(br,Se),Mr(br,ge),$e,Ge));for(var Pr=0;Pr<br.linked.length;++Pr)if(br.linked[Pr].isParent)return;Ze=er(He)}),new Mi(He,Ze)}(f,g,S,_,T);if(f.cm&&!f.cm.curOp)return Ho(f.cm,Es)(f,g,S,_,T);var D=new Bl(f,T),Y=Mt(g,S);if(_&&Fr(_,D,!1),Y>0||Y==0&&D.clearWhenEmpty!==!1)return D;if(D.replacedWith&&(D.collapsed=!0,D.widgetNode=Me("span",[D.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||D.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(D.widgetNode.insertLeft=!0)),D.collapsed){if(Ci(f,g.line,g,S,D)||g.line!=S.line&&Ci(f,S.line,g,S,D))throw new Error("Inserting collapsed marker partially overlapping an existing one");yi=!0}D.addToHistory&&Nf(f,{from:g,to:S,origin:"markText"},f.sel,NaN);var Z,bt=g.line,ht=f.cm;if(f.iter(bt,S.line+1,function(re){ht&&D.collapsed&&!ht.options.lineWrapping&&Zo(re)==ht.display.maxLine&&(Z=!0),D.collapsed&&bt!=g.line&&pr(re,0),function(Se,ge,$e){var Ge=$e&&window.WeakSet&&($e.markedSpans||($e.markedSpans=new WeakSet));Ge&&Se.markedSpans&&Ge.has(Se.markedSpans)?Se.markedSpans.push(ge):(Se.markedSpans=Se.markedSpans?Se.markedSpans.concat([ge]):[ge],Ge&&Ge.add(Se.markedSpans)),ge.marker.attachLine(Se)}(re,new Ha(D,bt==g.line?g.ch:null,bt==S.line?S.ch:null),f.cm&&f.cm.curOp),++bt}),D.collapsed&&f.iter(g.line,S.line+1,function(re){sn(f,re)&&pr(re,0)}),D.clearOnEnter&&ee(D,"beforeCursorEnter",function(){return D.clear()}),D.readOnly&&(si=!0,(f.history.done.length||f.history.undone.length)&&f.clearHistory()),D.collapsed&&(D.id=++Wf,D.atomic=!0),ht){if(Z&&(ht.curOp.updateMaxLine=!0),D.collapsed)Ui(ht,g.line,S.line+1);else if(D.className||D.startStyle||D.endStyle||D.css||D.attributes||D.title)for(var Qt=g.line;Qt<=S.line;Qt++)Hs(ht,Qt,"text");D.atomic&&Hl(ht.doc),Xo(ht,"markerAdded",ht,D)}return D}Bl.prototype.clear=function(){if(!this.explicitlyCleared){var f=this.doc.cm,g=f&&!f.curOp;if(g&&ls(f),Ye(this,"clear")){var S=this.find();S&&Xo(this,"clear",S.from,S.to)}for(var _=null,T=null,D=0;D<this.lines.length;++D){var Y=this.lines[D],Z=Ns(Y.markedSpans,this);f&&!this.collapsed?Hs(f,Hr(Y),"text"):f&&(Z.to!=null&&(T=Hr(Y)),Z.from!=null&&(_=Hr(Y))),Y.markedSpans=ts(Y.markedSpans,Z),Z.from==null&&this.collapsed&&!sn(this.doc,Y)&&f&&pr(Y,bs(f.display))}if(f&&this.collapsed&&!f.options.lineWrapping)for(var bt=0;bt<this.lines.length;++bt){var ht=Zo(this.lines[bt]),Qt=ci(ht);Qt>f.display.maxLineLength&&(f.display.maxLine=ht,f.display.maxLineLength=Qt,f.display.maxLineChanged=!0)}_!=null&&f&&this.collapsed&&Ui(f,_,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,f&&Hl(f.doc)),f&&Xo(f,"markerCleared",f,this,_,T),g&&$a(f),this.parent&&this.parent.clear()}},Bl.prototype.find=function(f,g){var S,_;f==null&&this.type=="bookmark"&&(f=1);for(var T=0;T<this.lines.length;++T){var D=this.lines[T],Y=Ns(D.markedSpans,this);if(Y.from!=null&&(S=cr(g?D:Hr(D),Y.from),f==-1))return S;if(Y.to!=null&&(_=cr(g?D:Hr(D),Y.to),f==1))return _}return S&&{from:S,to:_}},Bl.prototype.changed=function(){var f=this,g=this.find(-1,!0),S=this,_=this.doc.cm;g&&_&&Ma(_,function(){var T=g.line,D=Hr(g.line),Y=Xi(_,D);if(Y&&(Re(Y),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!sn(S.doc,T)&&S.height!=null){var Z=S.height;S.height=null;var bt=Bi(S)-Z;bt&&pr(T,T.height+bt)}Xo(_,"markerChanged",_,f)})},Bl.prototype.attachLine=function(f){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;g.maybeHiddenMarkers&&kt(g.maybeHiddenMarkers,this)!=-1||(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(f)},Bl.prototype.detachLine=function(f){if(this.lines.splice(kt(this.lines,f),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},Cr(Bl);var Mi=function(f,g){this.markers=f,this.primary=g;for(var S=0;S<f.length;++S)f[S].parent=this};function Lu(f){return f.findMarks(cr(f.first,0),f.clipPos(cr(f.lastLine())),function(g){return g.parent})}function $f(f){for(var g=function(_){var T=f[_],D=[T.primary.doc];ja(T.primary.doc,function(bt){return D.push(bt)});for(var Y=0;Y<T.markers.length;Y++){var Z=T.markers[Y];kt(D,Z.doc)==-1&&(Z.parent=null,T.markers.splice(Y--,1))}},S=0;S<f.length;S++)g(S)}Mi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var f=0;f<this.markers.length;++f)this.markers[f].clear();Xo(this,"clear")}},Mi.prototype.find=function(f,g){return this.primary.find(f,g)},Cr(Mi);var fa=0,Ea=function(f,g,S,_,T){if(!(this instanceof Ea))return new Ea(f,g,S,_,T);S==null&&(S=0),dc.call(this,[new Mc([new pn("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var D=cr(S,0);this.sel=pc(D),this.history=new bl(null),this.id=++fa,this.modeOption=g,this.lineSep=_,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof f=="string"&&(f=this.splitLines(f)),nf(this,{from:D,to:D,text:f}),Ei(this,pc(D),Ae)};Ea.prototype=yt(dc.prototype,{constructor:Ea,iter:function(f,g,S){S?this.iterN(f-this.first,g-f,S):this.iterN(this.first,this.first+this.size,f)},insert:function(f,g){for(var S=0,_=0;_<g.length;++_)S+=g[_].height;this.insertInner(f-this.first,g,S)},remove:function(f,g){this.removeInner(f-this.first,g)},getValue:function(f){var g=ir(this,this.first,this.first+this.size);return f===!1?g:g.join(f||this.lineSeparator())},setValue:Bo(function(f){var g=cr(this.first,0),S=this.first+this.size-1;kc(this,{from:g,to:cr(S,rt(this,S).text.length),text:this.splitLines(f),origin:"setValue",full:!0},!0),this.cm&&Bs(this.cm,0,0),Ei(this,pc(g),Ae)}),replaceRange:function(f,g,S,_){Ac(this,f,g=Mr(this,g),S=S?Mr(this,S):g,_)},getRange:function(f,g,S){var _=Xt(this,Mr(this,f),Mr(this,g));return S===!1?_:S===""?_.join(""):_.join(S||this.lineSeparator())},getLine:function(f){var g=this.getLineHandle(f);return g&&g.text},getLineHandle:function(f){if(Nn(this,f))return rt(this,f)},getLineNumber:function(f){return Hr(f)},getLineHandleVisualStart:function(f){return typeof f=="number"&&(f=rt(this,f)),Zo(f)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f){return Mr(this,f)},getCursor:function(f){var g=this.sel.primary();return f==null||f=="head"?g.head:f=="anchor"?g.anchor:f=="end"||f=="to"||f===!1?g.to():g.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bo(function(f,g,S){Vf(this,Mr(this,typeof f=="number"?cr(f,g||0):f),null,S)}),setSelection:Bo(function(f,g,S){Vf(this,Mr(this,f),Mr(this,g||f),S)}),extendSelection:Bo(function(f,g,S){Jc(this,Mr(this,f),g&&Mr(this,g),S)}),extendSelections:Bo(function(f,g){of(this,Wn(this,f),g)}),extendSelectionsBy:Bo(function(f,g){of(this,Wn(this,Dr(this.sel.ranges,f)),g)}),setSelections:Bo(function(f,g,S){if(f.length){for(var _=[],T=0;T<f.length;T++)_[T]=new _o(Mr(this,f[T].anchor),Mr(this,f[T].head||f[T].anchor));g==null&&(g=Math.min(f.length-1,this.sel.primIndex)),Ei(this,zs(this.cm,_,g),S)}}),addSelection:Bo(function(f,g,S){var _=this.sel.ranges.slice(0);_.push(new _o(Mr(this,f),Mr(this,g||f))),Ei(this,zs(this.cm,_,_.length-1),S)}),getSelection:function(f){for(var g,S=this.sel.ranges,_=0;_<S.length;_++){var T=Xt(this,S[_].from(),S[_].to());g=g?g.concat(T):T}return f===!1?g:g.join(f||this.lineSeparator())},getSelections:function(f){for(var g=[],S=this.sel.ranges,_=0;_<S.length;_++){var T=Xt(this,S[_].from(),S[_].to());f!==!1&&(T=T.join(f||this.lineSeparator())),g[_]=T}return g},replaceSelection:function(f,g,S){for(var _=[],T=0;T<this.sel.ranges.length;T++)_[T]=f;this.replaceSelections(_,g,S||"+input")},replaceSelections:Bo(function(f,g,S){for(var _=[],T=this.sel,D=0;D<T.ranges.length;D++){var Y=T.ranges[D];_[D]={from:Y.from(),to:Y.to(),text:this.splitLines(f[D]),origin:S}}for(var Z=g&&g!="end"&&function(ht,Qt,re){for(var Se=[],ge=cr(ht.first,0),$e=ge,Ge=0;Ge<Qt.length;Ge++){var He=Qt[Ge],Ze=xp(He.from,ge,$e),vr=xp(yl(He),ge,$e);if(ge=He.to,$e=vr,re=="around"){var br=ht.sel.ranges[Ge],Pr=Mt(br.head,br.anchor)<0;Se[Ge]=new _o(Pr?vr:Ze,Pr?Ze:vr)}else Se[Ge]=new _o(Ze,Ze)}return new Oa(Se,ht.sel.primIndex)}(this,_,g),bt=_.length-1;bt>=0;bt--)kc(this,_[bt]);Z?af(this,Z):this.cm&&cc(this.cm)}),undo:Bo(function(){Ws(this,"undo")}),redo:Bo(function(){Ws(this,"redo")}),undoSelection:Bo(function(){Ws(this,"undo",!0)}),redoSelection:Bo(function(){Ws(this,"redo",!0)}),setExtending:function(f){this.extend=f},getExtending:function(){return this.extend},historySize:function(){for(var f=this.history,g=0,S=0,_=0;_<f.done.length;_++)f.done[_].ranges||++g;for(var T=0;T<f.undone.length;T++)f.undone[T].ranges||++S;return{undo:g,redo:S}},clearHistory:function(){var f=this;this.history=new bl(this.history),ja(this,function(g){return g.history=f.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(f){return f&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(f){return this.history.generation==(f||this.cleanGeneration)},getHistory:function(){return{done:Ta(this.history.done),undone:Ta(this.history.undone)}},setHistory:function(f){var g=this.history=new bl(this.history);g.done=Ta(f.done.slice(0),null,!0),g.undone=Ta(f.undone.slice(0),null,!0)},setGutterMarker:Bo(function(f,g,S){return Ts(this,f,"gutter",function(_){var T=_.gutterMarkers||(_.gutterMarkers={});return T[g]=S,!S&&_e(T)&&(_.gutterMarkers=null),!0})}),clearGutter:Bo(function(f){var g=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[f]&&Ts(g,S,"gutter",function(){return S.gutterMarkers[f]=null,_e(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(f){var g;if(typeof f=="number"){if(!Nn(this,f)||(g=f,!(f=rt(this,f))))return null}else if((g=Hr(f))==null)return null;return{line:g,handle:f,text:f.text,gutterMarkers:f.gutterMarkers,textClass:f.textClass,bgClass:f.bgClass,wrapClass:f.wrapClass,widgets:f.widgets}},addLineClass:Bo(function(f,g,S){return Ts(this,f,g=="gutter"?"gutter":"class",function(_){var T=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(_[T]){if(jt(S).test(_[T]))return!1;_[T]+=" "+S}else _[T]=S;return!0})}),removeLineClass:Bo(function(f,g,S){return Ts(this,f,g=="gutter"?"gutter":"class",function(_){var T=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",D=_[T];if(!D)return!1;if(S==null)_[T]=null;else{var Y=D.match(jt(S));if(!Y)return!1;var Z=Y.index+Y[0].length;_[T]=D.slice(0,Y.index)+(Y.index&&Z!=D.length?" ":"")+D.slice(Z)||null}return!0})}),addLineWidget:Bo(function(f,g,S){return function(_,T,D,Y){var Z=new Qc(_,D,Y),bt=_.cm;return bt&&Z.noHScroll&&(bt.display.alignWidgets=!0),Ts(_,T,"widget",function(ht){var Qt=ht.widgets||(ht.widgets=[]);if(Z.insertAt==null?Qt.push(Z):Qt.splice(Math.min(Qt.length,Math.max(0,Z.insertAt)),0,Z),Z.line=ht,bt&&!sn(_,ht)){var re=li(ht)<_.scrollTop;pr(ht,ht.height+Bi(Z)),re&&qc(bt,Z.height),bt.curOp.forceUpdate=!0}return!0}),bt&&Xo(bt,"lineWidgetAdded",bt,Z,typeof T=="number"?T:Hr(T)),Z}(this,f,g,S)}),removeLineWidget:function(f){f.clear()},markText:function(f,g,S){return Es(this,Mr(this,f),Mr(this,g),S,S&&S.type||"range")},setBookmark:function(f,g){var S={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return Es(this,f=Mr(this,f),f,S,"bookmark")},findMarksAt:function(f){var g=[],S=rt(this,(f=Mr(this,f)).line).markedSpans;if(S)for(var _=0;_<S.length;++_){var T=S[_];(T.from==null||T.from<=f.ch)&&(T.to==null||T.to>=f.ch)&&g.push(T.marker.parent||T.marker)}return g},findMarks:function(f,g,S){f=Mr(this,f),g=Mr(this,g);var _=[],T=f.line;return this.iter(f.line,g.line+1,function(D){var Y=D.markedSpans;if(Y)for(var Z=0;Z<Y.length;Z++){var bt=Y[Z];bt.to!=null&&T==f.line&&f.ch>=bt.to||bt.from==null&&T!=f.line||bt.from!=null&&T==g.line&&bt.from>=g.ch||S&&!S(bt.marker)||_.push(bt.marker.parent||bt.marker)}++T}),_},getAllMarks:function(){var f=[];return this.iter(function(g){var S=g.markedSpans;if(S)for(var _=0;_<S.length;++_)S[_].from!=null&&f.push(S[_].marker)}),f},posFromIndex:function(f){var g,S=this.first,_=this.lineSeparator().length;return this.iter(function(T){var D=T.text.length+_;if(D>f)return g=f,!0;f-=D,++S}),Mr(this,cr(S,g))},indexFromPos:function(f){var g=(f=Mr(this,f)).ch;if(f.line<this.first||f.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,f.line,function(_){g+=_.text.length+S}),g},copy:function(f){var g=new Ea(ir(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,f&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(f){f||(f={});var g=this.first,S=this.first+this.size;f.from!=null&&f.from>g&&(g=f.from),f.to!=null&&f.to<S&&(S=f.to);var _=new Ea(ir(this,g,S),f.mode||this.modeOption,g,this.lineSep,this.direction);return f.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:f.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:f.sharedHist}],function(T,D){for(var Y=0;Y<D.length;Y++){var Z=D[Y],bt=Z.find(),ht=T.clipPos(bt.from),Qt=T.clipPos(bt.to);if(Mt(ht,Qt)){var re=Es(T,ht,Qt,Z.primary,Z.primary.type);Z.markers.push(re),re.parent=Z}}}(_,Lu(this)),_},unlinkDoc:function(f){if(f instanceof Uo&&(f=f.doc),this.linked){for(var g=0;g<this.linked.length;++g)if(this.linked[g].doc==f){this.linked.splice(g,1),f.unlinkDoc(this),$f(Lu(this));break}}if(f.history==this.history){var S=[f.id];ja(f,function(_){return S.push(_.id)},!0),f.history=new bl(null),f.history.done=Ta(this.history.done,S),f.history.undone=Ta(this.history.undone,S)}},iterLinkedDocs:function(f){ja(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(f){return this.lineSep?f.split(this.lineSep):yo(f)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Bo(function(f){f!="rtl"&&(f="ltr"),f!=this.direction&&(this.direction=f,this.iter(function(g){return g.order=null}),this.cm&&function(g){Ma(g,function(){Rl(g),Ui(g)})}(this.cm))})}),Ea.prototype.eachLine=Ea.prototype.iter;var hc=0;function gc(f){var g=this;if(Lc(g),!fe(g,f)&&!pi(g.display,f)){Wr(f),I&&(hc=+new Date);var S=Rs(g,f,!0),_=f.dataTransfer.files;if(S&&!g.isReadOnly())if(_&&_.length&&window.FileReader&&window.File)for(var T=_.length,D=Array(T),Y=0,Z=function(){++Y==T&&Ho(g,function(){var ge={from:S=Mr(g.doc,S),to:S,text:g.doc.splitLines(D.filter(function($e){return $e!=null}).join(g.doc.lineSeparator())),origin:"paste"};kc(g.doc,ge),af(g.doc,pc(Mr(g.doc,S),Mr(g.doc,yl(ge))))})()},bt=function(ge,$e){if(g.options.allowDropFileTypes&&kt(g.options.allowDropFileTypes,ge.type)==-1)Z();else{var Ge=new FileReader;Ge.onerror=function(){return Z()},Ge.onload=function(){var He=Ge.result;/[\x00-\x08\x0e-\x1f]{2}/.test(He)||(D[$e]=He),Z()},Ge.readAsText(ge)}},ht=0;ht<_.length;ht++)bt(_[ht],ht);else{if(g.state.draggingText&&g.doc.sel.contains(S)>-1)return g.state.draggingText(f),void setTimeout(function(){return g.display.input.focus()},20);try{var Qt=f.dataTransfer.getData("Text");if(Qt){var re;if(g.state.draggingText&&!g.state.draggingText.copy&&(re=g.listSelections()),ku(g.doc,pc(S,S)),re)for(var Se=0;Se<re.length;++Se)Ac(g.doc,"",re[Se].anchor,re[Se].head,"drag");g.replaceSelection(Qt,"around","paste"),g.display.input.focus()}}catch{}}}}function Lc(f){f.display.dragCursor&&(f.display.lineSpace.removeChild(f.display.dragCursor),f.display.dragCursor=null)}function Gf(f){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),S=[],_=0;_<g.length;_++){var T=g[_].CodeMirror;T&&S.push(T)}S.length&&S[0].operation(function(){for(var D=0;D<S.length;D++)f(S[D])})}}var qf=!1;function jc(){qf||(function(){var f;ee(window,"resize",function(){f==null&&(f=setTimeout(function(){f=null,Gf(Kf)},100))}),ee(window,"blur",function(){return Gf(Sa)})}(),qf=!0)}function Kf(f){var g=f.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,f.setSize()}for(var Ps={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Dc=0;Dc<10;Dc++)Ps[Dc+48]=Ps[Dc+96]=String(Dc);for(var Ul=65;Ul<=90;Ul++)Ps[Ul]=String.fromCharCode(Ul);for(var ju=1;ju<=12;ju++)Ps[ju+111]=Ps[ju+63235]="F"+ju;var Ji={};function vc(f){var g,S,_,T,D=f.split(/-(?!$)/);f=D[D.length-1];for(var Y=0;Y<D.length-1;Y++){var Z=D[Y];if(/^(cmd|meta|m)$/i.test(Z))T=!0;else if(/^a(lt)?$/i.test(Z))g=!0;else if(/^(c|ctrl|control)$/i.test(Z))S=!0;else{if(!/^s(hift)?$/i.test(Z))throw new Error("Unrecognized modifier name: "+Z);_=!0}}return g&&(f="Alt-"+f),S&&(f="Ctrl-"+f),T&&(f="Cmd-"+f),_&&(f="Shift-"+f),f}function Yf(f){var g={};for(var S in f)if(f.hasOwnProperty(S)){var _=f[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(_=="..."){delete f[S];continue}for(var T=Dr(S.split(" "),vc),D=0;D<T.length;D++){var Y=void 0,Z=void 0;D==T.length-1?(Z=T.join(" "),Y=_):(Z=T.slice(0,D+1).join(" "),Y="...");var bt=g[Z];if(bt){if(bt!=Y)throw new Error("Inconsistent bindings for "+Z)}else g[Z]=Y}delete f[S]}for(var ht in g)f[ht]=g[ht];return f}function xl(f,g,S,_){var T=(g=zl(g)).call?g.call(f,_):g[f];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&S(T))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return xl(f,g.fallthrough,S,_);for(var D=0;D<g.fallthrough.length;D++){var Y=xl(f,g.fallthrough[D],S,_);if(Y)return Y}}}function Ic(f){var g=typeof f=="string"?f:Ps[f.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function $s(f,g,S){var _=f;return g.altKey&&_!="Alt"&&(f="Alt-"+f),(et?g.metaKey:g.ctrlKey)&&_!="Ctrl"&&(f="Ctrl-"+f),(et?g.ctrlKey:g.metaKey)&&_!="Mod"&&(f="Cmd-"+f),!S&&g.shiftKey&&_!="Shift"&&(f="Shift-"+f),f}function tu(f,g){if(it&&f.keyCode==34&&f.char)return!1;var S=Ps[f.keyCode];return S!=null&&!f.altGraphKey&&(f.keyCode==3&&f.code&&(S=f.code),$s(S,f,g))}function zl(f){return typeof f=="string"?Ji[f]:f}function mc(f,g){for(var S=f.doc.sel.ranges,_=[],T=0;T<S.length;T++){for(var D=g(S[T]);_.length&&Mt(D.from,er(_).to)<=0;){var Y=_.pop();if(Mt(Y.from,D.from)<0){D.from=Y.from;break}}_.push(D)}Ma(f,function(){for(var Z=_.length-1;Z>=0;Z--)Ac(f.doc,"",_[Z].from,_[Z].to,"+delete");cc(f)})}function Zf(f,g,S){var _=fr(f.text,g+S,S);return _<0||_>f.text.length?null:_}function Cl(f,g,S){var _=Zf(f,g.ch,S);return _==null?null:new cr(g.line,_,S<0?"after":"before")}function Gs(f,g,S,_,T){if(f){g.doc.direction=="rtl"&&(T=-T);var D=Un(S,g.doc.direction);if(D){var Y,Z=T<0?er(D):D[0],bt=T<0==(Z.level==1)?"after":"before";if(Z.level>0||g.doc.direction=="rtl"){var ht=Oi(g,S);Y=T<0?S.text.length-1:0;var Qt=ua(g,ht,Y).top;Y=nn(function(re){return ua(g,ht,re).top==Qt},T<0==(Z.level==1)?Z.from:Z.to-1,Y),bt=="before"&&(Y=Zf(S,Y,1))}else Y=T<0?Z.to:Z.from;return new cr(_,Y,bt)}}return new cr(_,T<0?S.text.length:0,T<0?"before":"after")}Ji.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ji.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ji.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ji.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ji.default=It?Ji.macDefault:Ji.pcDefault;var Sl={selectAll:Pc,singleSelection:function(f){return f.setSelection(f.getCursor("anchor"),f.getCursor("head"),Ae)},killLine:function(f){return mc(f,function(g){if(g.empty()){var S=rt(f.doc,g.head.line).text.length;return g.head.ch==S&&g.head.line<f.lastLine()?{from:g.head,to:cr(g.head.line+1,0)}:{from:g.head,to:cr(g.head.line,S)}}return{from:g.from(),to:g.to()}})},deleteLine:function(f){return mc(f,function(g){return{from:cr(g.from().line,0),to:Mr(f.doc,cr(g.to().line+1,0))}})},delLineLeft:function(f){return mc(f,function(g){return{from:cr(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(f){return mc(f,function(g){var S=f.charCoords(g.head,"div").top+5;return{from:f.coordsChar({left:0,top:S},"div"),to:g.from()}})},delWrappedLineRight:function(f){return mc(f,function(g){var S=f.charCoords(g.head,"div").top+5,_=f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:S},"div");return{from:g.from(),to:_}})},undo:function(f){return f.undo()},redo:function(f){return f.redo()},undoSelection:function(f){return f.undoSelection()},redoSelection:function(f){return f.redoSelection()},goDocStart:function(f){return f.extendSelection(cr(f.firstLine(),0))},goDocEnd:function(f){return f.extendSelection(cr(f.lastLine()))},goLineStart:function(f){return f.extendSelectionsBy(function(g){return eu(f,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f){return f.extendSelectionsBy(function(g){return Op(f,g.head)},{origin:"+move",bias:1})},goLineEnd:function(f){return f.extendSelectionsBy(function(g){return function(S,_){var T=rt(S.doc,_),D=function(Y){for(var Z;Z=Yi(Y);)Y=Z.find(1,!0).line;return Y}(T);return D!=T&&(_=Hr(D)),Gs(!0,S,T,_,-1)}(f,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f){return f.extendSelectionsBy(function(g){var S=f.cursorCoords(g.head,"div").top+5;return f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:S},"div")},le)},goLineLeft:function(f){return f.extendSelectionsBy(function(g){var S=f.cursorCoords(g.head,"div").top+5;return f.coordsChar({left:0,top:S},"div")},le)},goLineLeftSmart:function(f){return f.extendSelectionsBy(function(g){var S=f.cursorCoords(g.head,"div").top+5,_=f.coordsChar({left:0,top:S},"div");return _.ch<f.getLine(_.line).search(/\S/)?Op(f,g.head):_},le)},goLineUp:function(f){return f.moveV(-1,"line")},goLineDown:function(f){return f.moveV(1,"line")},goPageUp:function(f){return f.moveV(-1,"page")},goPageDown:function(f){return f.moveV(1,"page")},goCharLeft:function(f){return f.moveH(-1,"char")},goCharRight:function(f){return f.moveH(1,"char")},goColumnLeft:function(f){return f.moveH(-1,"column")},goColumnRight:function(f){return f.moveH(1,"column")},goWordLeft:function(f){return f.moveH(-1,"word")},goGroupRight:function(f){return f.moveH(1,"group")},goGroupLeft:function(f){return f.moveH(-1,"group")},goWordRight:function(f){return f.moveH(1,"word")},delCharBefore:function(f){return f.deleteH(-1,"codepoint")},delCharAfter:function(f){return f.deleteH(1,"char")},delWordBefore:function(f){return f.deleteH(-1,"word")},delWordAfter:function(f){return f.deleteH(1,"word")},delGroupBefore:function(f){return f.deleteH(-1,"group")},delGroupAfter:function(f){return f.deleteH(1,"group")},indentAuto:function(f){return f.indentSelection("smart")},indentMore:function(f){return f.indentSelection("add")},indentLess:function(f){return f.indentSelection("subtract")},insertTab:function(f){return f.replaceSelection("	")},insertSoftTab:function(f){for(var g=[],S=f.listSelections(),_=f.options.tabSize,T=0;T<S.length;T++){var D=S[T].from(),Y=Xe(f.getLine(D.line),D.ch,_);g.push(mr(_-Y%_))}f.replaceSelections(g)},defaultTab:function(f){f.somethingSelected()?f.indentSelection("add"):f.execCommand("insertTab")},transposeChars:function(f){return Ma(f,function(){for(var g=f.listSelections(),S=[],_=0;_<g.length;_++)if(g[_].empty()){var T=g[_].head,D=rt(f.doc,T.line).text;if(D){if(T.ch==D.length&&(T=new cr(T.line,T.ch-1)),T.ch>0)T=new cr(T.line,T.ch+1),f.replaceRange(D.charAt(T.ch-1)+D.charAt(T.ch-2),cr(T.line,T.ch-2),T,"+transpose");else if(T.line>f.doc.first){var Y=rt(f.doc,T.line-1).text;Y&&(T=new cr(T.line,1),f.replaceRange(D.charAt(0)+f.doc.lineSeparator()+Y.charAt(Y.length-1),cr(T.line-1,Y.length-1),T,"+transpose"))}}S.push(new _o(T,T))}f.setSelections(S)})},newlineAndIndent:function(f){return Ma(f,function(){for(var g=f.listSelections(),S=g.length-1;S>=0;S--)f.replaceRange(f.doc.lineSeparator(),g[S].anchor,g[S].head,"+input");g=f.listSelections();for(var _=0;_<g.length;_++)f.indentLine(g[_].from().line,null,!0);cc(f)})},openLine:function(f){return f.replaceSelection(`
`,"start")},toggleOverwrite:function(f){return f.toggleOverwrite()}};function eu(f,g){var S=rt(f.doc,g),_=Zo(S);return _!=S&&(g=Hr(_)),Gs(!0,f,_,g,1)}function Op(f,g){var S=eu(f,g.line),_=rt(f.doc,S.line),T=Un(_,f.doc.direction);if(!T||T[0].level==0){var D=Math.max(S.ch,_.text.search(/\S/)),Y=g.line==S.line&&g.ch<=D&&g.ch;return cr(S.line,Y?0:D,S.sticky)}return S}function Du(f,g,S){if(typeof g=="string"&&!(g=Sl[g]))return!1;f.display.input.ensurePolled();var _=f.display.shift,T=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),S&&(f.display.shift=!1),T=g(f)!=ye}finally{f.display.shift=_,f.state.suppressEdits=!1}return T}var cf=new at;function Iu(f,g,S,_){var T=f.state.keySeq;if(T){if(Ic(g))return"handled";if(/\'$/.test(g)?f.state.keySeq=null:cf.set(50,function(){f.state.keySeq==T&&(f.state.keySeq=null,f.display.input.reset())}),Xf(f,T+" "+g,S,_))return!0}return Xf(f,g,S,_)}function Xf(f,g,S,_){var T=function(D,Y,Z){for(var bt=0;bt<D.state.keyMaps.length;bt++){var ht=xl(Y,D.state.keyMaps[bt],Z,D);if(ht)return ht}return D.options.extraKeys&&xl(Y,D.options.extraKeys,Z,D)||xl(Y,D.options.keyMap,Z,D)}(f,g,_);return T=="multi"&&(f.state.keySeq=g),T=="handled"&&Xo(f,"keyHandled",f,g,S),T!="handled"&&T!="multi"||(Wr(S),pl(f)),!!T}function Pa(f,g){var S=tu(g,!0);return!!S&&(g.shiftKey&&!f.state.keySeq?Iu(f,"Shift-"+S,g,function(_){return Du(f,_,!0)})||Iu(f,S,g,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return Du(f,_)}):Iu(f,S,g,function(_){return Du(f,_)}))}var ru=null;function Nu(f){var g=this;if(!(f.target&&f.target!=g.display.input.getField()||(g.curOp.focus=Le(),fe(g,f)))){I&&N<11&&f.keyCode==27&&(f.returnValue=!1);var S=f.keyCode;g.display.shift=S==16||f.shiftKey;var _=Pa(g,f);it&&(ru=_?S:null,_||S!=88||Gi||!(It?f.metaKey:f.ctrlKey)||g.replaceSelection("",null,"cut")),vt&&!It&&!_&&S==46&&f.shiftKey&&!f.ctrlKey&&document.execCommand&&document.execCommand("cut"),S!=18||/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)||function(T){var D=T.display.lineDiv;function Y(Z){Z.keyCode!=18&&Z.altKey||(Ht(D,"CodeMirror-crosshair"),Je(document,"keyup",Y),Je(document,"mouseover",Y))}ar(D,"CodeMirror-crosshair"),ee(document,"keyup",Y),ee(document,"mouseover",Y)}(g)}}function Nc(f){f.keyCode==16&&(this.doc.sel.shift=!1),fe(this,f)}function uf(f){var g=this;if(!(f.target&&f.target!=g.display.input.getField()||pi(g.display,f)||fe(g,f)||f.ctrlKey&&!f.altKey||It&&f.metaKey)){var S=f.keyCode,_=f.charCode;if(it&&S==ru)return ru=null,void Wr(f);if(!it||f.which&&!(f.which<10)||!Pa(g,f)){var T=String.fromCharCode(_??S);T!="\b"&&(function(D,Y,Z){return Iu(D,"'"+Z+"'",Y,function(bt){return Du(D,bt,!0)})}(g,f,T)||g.display.input.onKeyPress(f))}}}var Vc,nu,Tp=400,Jf=function(f,g,S){this.time=f,this.pos=g,this.button=S};function Ep(f){var g=this,S=g.display;if(!(fe(g,f)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=f.shiftKey,pi(S,f))$||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));else if(!Wl(g,f)){var _=Rs(g,f),T=vn(f),D=_?function(Y,Z){var bt=+new Date;return nu&&nu.compare(bt,Y,Z)?(Vc=nu=null,"triple"):Vc&&Vc.compare(bt,Y,Z)?(nu=new Jf(bt,Y,Z),Vc=null,"double"):(Vc=new Jf(bt,Y,Z),nu=null,"single")}(_,T):"single";window.focus(),T==1&&g.state.selectingText&&g.state.selectingText(f),_&&function(Y,Z,bt,ht,Qt){var re="Click";return ht=="double"?re="Double"+re:ht=="triple"&&(re="Triple"+re),Iu(Y,$s(re=(Z==1?"Left":Z==2?"Middle":"Right")+re,Qt),Qt,function(Se){if(typeof Se=="string"&&(Se=Sl[Se]),!Se)return!1;var ge=!1;try{Y.isReadOnly()&&(Y.state.suppressEdits=!0),ge=Se(Y,bt)!=ye}finally{Y.state.suppressEdits=!1}return ge})}(g,T,_,D,f)||(T==1?_?function(Y,Z,bt,ht){I?setTimeout(Ar(lc,Y),0):Y.curOp.focus=Le();var Qt,re=function(ge,$e,Ge){var He=ge.getOption("configureMouse"),Ze=He?He(ge,$e,Ge):{};if(Ze.unit==null){var vr=$t?Ge.shiftKey&&Ge.metaKey:Ge.altKey;Ze.unit=vr?"rectangle":$e=="single"?"char":$e=="double"?"word":"line"}return(Ze.extend==null||ge.doc.extend)&&(Ze.extend=ge.doc.extend||Ge.shiftKey),Ze.addNew==null&&(Ze.addNew=It?Ge.metaKey:Ge.ctrlKey),Ze.moveOnDrag==null&&(Ze.moveOnDrag=!(It?Ge.altKey:Ge.ctrlKey)),Ze}(Y,bt,ht),Se=Y.doc.sel;Y.options.dragDrop&&Yo&&!Y.isReadOnly()&&bt=="single"&&(Qt=Se.contains(Z))>-1&&(Mt((Qt=Se.ranges[Qt]).from(),Z)<0||Z.xRel>0)&&(Mt(Qt.to(),Z)>0||Z.xRel<0)?Pp(Y,ht,Z,re):function(ge,$e,Ge,He){I&&Vi(ge);var Ze=ge.display,vr=ge.doc;Wr($e);var br,Pr,Sr=vr.sel,Tr=Sr.ranges;if(He.addNew&&!He.extend?(Pr=vr.sel.contains(Ge),br=Pr>-1?Tr[Pr]:new _o(Ge,Ge)):(br=vr.sel.primary(),Pr=vr.sel.primIndex),He.unit=="rectangle")He.addNew||(br=new _o(Ge,Ge)),Ge=Rs(ge,$e,!0,!0),Pr=-1;else{var hn=qs(ge,Ge,He.unit);br=He.extend?_l(br,hn.anchor,hn.head,He.extend):hn}He.addNew?Pr==-1?(Pr=Tr.length,Ei(vr,zs(ge,Tr.concat([br]),Pr),{scroll:!1,origin:"*mouse"})):Tr.length>1&&Tr[Pr].empty()&&He.unit=="char"&&!He.extend?(Ei(vr,zs(ge,Tr.slice(0,Pr).concat(Tr.slice(Pr+1)),0),{scroll:!1,origin:"*mouse"}),Sr=vr.sel):Pu(vr,Pr,br,pt):(Pr=0,Ei(vr,new Oa([br],0),pt),Sr=vr.sel);var ln=Ge;function Bn(On){if(Mt(ln,On)!=0)if(ln=On,He.unit=="rectangle"){for(var $n=[],Kn=ge.options.tabSize,Mn=Xe(rt(vr,Ge.line).text,Ge.ch,Kn),gi=Xe(rt(vr,On.line).text,On.ch,Kn),vi=Math.min(Mn,gi),po=Math.max(Mn,gi),to=Math.min(Ge.line,On.line),Ga=Math.min(ge.lastLine(),Math.max(Ge.line,On.line));to<=Ga;to++){var xn=rt(vr,to).text,Li=se(xn,vi,Kn);vi==po?$n.push(new _o(cr(to,Li),cr(to,Li))):xn.length>Li&&$n.push(new _o(cr(to,Li),cr(to,se(xn,po,Kn))))}$n.length||$n.push(new _o(Ge,Ge)),Ei(vr,zs(ge,Sr.ranges.slice(0,Pr).concat($n),Pr),{origin:"*mouse",scroll:!1}),ge.scrollIntoView(On)}else{var Qi,vo=br,Na=qs(ge,On,He.unit),qa=vo.anchor;Mt(Na.anchor,qa)>0?(Qi=Na.head,qa=en(vo.from(),Na.anchor)):(Qi=Na.anchor,qa=Yr(vo.to(),Na.head));var kp=Sr.ranges.slice(0);kp[Pr]=function(oi,yc){var pa=yc.anchor,Zl=yc.head,Fu=rt(oi.doc,pa.line);if(Mt(pa,Zl)==0&&pa.sticky==Zl.sticky)return yc;var c=Un(Fu);if(!c)return yc;var d=wr(c,pa.ch,pa.sticky),b=c[d];if(b.from!=pa.ch&&b.to!=pa.ch)return yc;var y,C=d+(b.from==pa.ch==(b.level!=1)?0:1);if(C==0||C==c.length)return yc;if(Zl.line!=pa.line)y=(Zl.line-pa.line)*(oi.doc.direction=="ltr"?1:-1)>0;else{var L=wr(c,Zl.ch,Zl.sticky),z=L-d||(Zl.ch-pa.ch)*(b.level==1?-1:1);y=L==C-1||L==C?z<0:z>0}var J=c[C+(y?-1:0)],ut=y==(J.level==1),Pt=ut?J.from:J.to,oe=ut?"after":"before";return pa.ch==Pt&&pa.sticky==oe?yc:new _o(new cr(pa.line,Pt,oe),Zl)}(ge,new _o(Mr(vr,qa),Qi)),Ei(vr,zs(ge,kp,Pr),pt)}}var Ur=Ze.wrapper.getBoundingClientRect(),no=0;function ko(On){var $n=++no,Kn=Rs(ge,On,!0,He.unit=="rectangle");if(Kn)if(Mt(Kn,ln)!=0){ge.curOp.focus=Le(),Bn(Kn);var Mn=_s(Ze,vr);(Kn.line>=Mn.to||Kn.line<Mn.from)&&setTimeout(Ho(ge,function(){no==$n&&ko(On)}),150)}else{var gi=On.clientY<Ur.top?-20:On.clientY>Ur.bottom?20:0;gi&&setTimeout(Ho(ge,function(){no==$n&&(Ze.scroller.scrollTop+=gi,ko(On))}),50)}}function qn(On){ge.state.selectingText=!1,no=1/0,On&&(Wr(On),Ze.input.focus()),Je(Ze.wrapper.ownerDocument,"mousemove",Qn),Je(Ze.wrapper.ownerDocument,"mouseup",uo),vr.history.lastSelOrigin=null}var Qn=Ho(ge,function(On){On.buttons!==0&&vn(On)?ko(On):qn(On)}),uo=Ho(ge,qn);ge.state.selectingText=uo,ee(Ze.wrapper.ownerDocument,"mousemove",Qn),ee(Ze.wrapper.ownerDocument,"mouseup",uo)}(Y,ht,Z,re)}(g,_,D,f):ho(f)==S.scroller&&Wr(f):T==2?(_&&Jc(g.doc,_),setTimeout(function(){return S.input.focus()},20)):T==3&&(Tt?g.display.input.onContextMenu(f):Vi(g)))}}}function Pp(f,g,S,_){var T=f.display,D=!1,Y=Ho(f,function(ht){$&&(T.scroller.draggable=!1),f.state.draggingText=!1,f.state.delayingBlurEvent&&(f.hasFocus()?f.state.delayingBlurEvent=!1:Vi(f)),Je(T.wrapper.ownerDocument,"mouseup",Y),Je(T.wrapper.ownerDocument,"mousemove",Z),Je(T.scroller,"dragstart",bt),Je(T.scroller,"drop",Y),D||(Wr(ht),_.addNew||Jc(f.doc,S,null,null,_.extend),$&&!X||I&&N==9?setTimeout(function(){T.wrapper.ownerDocument.body.focus({preventScroll:!0}),T.input.focus()},20):T.input.focus())}),Z=function(ht){D=D||Math.abs(g.clientX-ht.clientX)+Math.abs(g.clientY-ht.clientY)>=10},bt=function(){return D=!0};$&&(T.scroller.draggable=!0),f.state.draggingText=Y,Y.copy=!_.moveOnDrag,ee(T.wrapper.ownerDocument,"mouseup",Y),ee(T.wrapper.ownerDocument,"mousemove",Z),ee(T.scroller,"dragstart",bt),ee(T.scroller,"drop",Y),f.state.delayingBlurEvent=!0,setTimeout(function(){return T.input.focus()},20),T.scroller.dragDrop&&T.scroller.dragDrop()}function qs(f,g,S){if(S=="char")return new _o(g,g);if(S=="word")return f.findWordAt(g);if(S=="line")return new _o(cr(g.line,0),Mr(f.doc,cr(g.line+1,0)));var _=S(f,g);return new _o(_.from,_.to)}function Fc(f,g,S,_){var T,D;if(g.touches)T=g.touches[0].clientX,D=g.touches[0].clientY;else try{T=g.clientX,D=g.clientY}catch{return!1}if(T>=Math.floor(f.display.gutters.getBoundingClientRect().right))return!1;_&&Wr(g);var Y=f.display,Z=Y.lineDiv.getBoundingClientRect();if(D>Z.bottom||!Ye(f,S))return Dn(g);D-=Z.top-Y.viewOffset;for(var bt=0;bt<f.display.gutterSpecs.length;++bt){var ht=Y.gutters.childNodes[bt];if(ht&&ht.getBoundingClientRect().right>=T)return Et(f,S,f,wn(f.doc,D),f.display.gutterSpecs[bt].className,g),Dn(g)}}function Wl(f,g){return Fc(f,g,"gutterClick",!0)}function ks(f,g){pi(f.display,g)||function(S,_){return!!Ye(S,"gutterContextMenu")&&Fc(S,_,"gutterContextMenu",!1)}(f,g)||fe(f,g,"contextmenu")||Tt||f.display.input.onContextMenu(g)}function As(f){f.display.wrapper.className=f.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ir(f)}Jf.prototype.compare=function(f,g,S){return this.time+Tp>f&&Mt(g,this.pos)==0&&S==this.button};var ou={toString:function(){return"CodeMirror.Init"}},Ol={},$l={};function hi(f,g,S){if(!g!=!(S&&S!=ou)){var _=f.display.dragFunctions,T=g?ee:Je;T(f.display.scroller,"dragstart",_.start),T(f.display.scroller,"dragenter",_.enter),T(f.display.scroller,"dragover",_.over),T(f.display.scroller,"dragleave",_.leave),T(f.display.scroller,"drop",_.drop)}}function Qf(f){f.options.lineWrapping?(ar(f.display.wrapper,"CodeMirror-wrap"),f.display.sizer.style.minWidth="",f.display.sizerWidth=null):(Ht(f.display.wrapper,"CodeMirror-wrap"),Gn(f)),Xu(f),Ui(f),Ir(f),setTimeout(function(){return Cs(f)},100)}function Uo(f,g){var S=this;if(!(this instanceof Uo))return new Uo(f,g);this.options=g=g?Fr(g):{},Fr(Ol,g,!1);var _=g.value;typeof _=="string"?_=new Ea(_,g.mode,null,g.lineSeparator,g.direction):g.mode&&(_.modeOption=g.mode),this.doc=_;var T=new Uo.inputStyles[g.inputStyle](this),D=this.display=new La(f,_,T,g);for(var Y in D.wrapper.CodeMirror=this,As(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),bu(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new at,keySeq:null,specialChars:null},g.autofocus&&!W&&D.input.focus(),I&&N<11&&setTimeout(function(){return S.display.input.reset(!0)},20),function(bt){var ht=bt.display;ee(ht.scroller,"mousedown",Ho(bt,Ep)),ee(ht.scroller,"dblclick",I&&N<11?Ho(bt,function(He){if(!fe(bt,He)){var Ze=Rs(bt,He);if(Ze&&!Wl(bt,He)&&!pi(bt.display,He)){Wr(He);var vr=bt.findWordAt(Ze);Jc(bt.doc,vr.anchor,vr.head)}}}):function(He){return fe(bt,He)||Wr(He)}),ee(ht.scroller,"contextmenu",function(He){return ks(bt,He)}),ee(ht.input.getField(),"contextmenu",function(He){ht.scroller.contains(He.target)||ks(bt,He)});var Qt,re={end:0};function Se(){ht.activeTouch&&(Qt=setTimeout(function(){return ht.activeTouch=null},1e3),(re=ht.activeTouch).end=+new Date)}function ge(He){if(He.touches.length!=1)return!1;var Ze=He.touches[0];return Ze.radiusX<=1&&Ze.radiusY<=1}function $e(He,Ze){if(Ze.left==null)return!0;var vr=Ze.left-He.left,br=Ze.top-He.top;return vr*vr+br*br>400}ee(ht.scroller,"touchstart",function(He){if(!fe(bt,He)&&!ge(He)&&!Wl(bt,He)){ht.input.ensurePolled(),clearTimeout(Qt);var Ze=+new Date;ht.activeTouch={start:Ze,moved:!1,prev:Ze-re.end<=300?re:null},He.touches.length==1&&(ht.activeTouch.left=He.touches[0].pageX,ht.activeTouch.top=He.touches[0].pageY)}}),ee(ht.scroller,"touchmove",function(){ht.activeTouch&&(ht.activeTouch.moved=!0)}),ee(ht.scroller,"touchend",function(He){var Ze=ht.activeTouch;if(Ze&&!pi(ht,He)&&Ze.left!=null&&!Ze.moved&&new Date-Ze.start<300){var vr,br=bt.coordsChar(ht.activeTouch,"page");vr=!Ze.prev||$e(Ze,Ze.prev)?new _o(br,br):!Ze.prev.prev||$e(Ze,Ze.prev.prev)?bt.findWordAt(br):new _o(cr(br.line,0),Mr(bt.doc,cr(br.line+1,0))),bt.setSelection(vr.anchor,vr.head),bt.focus(),Wr(He)}Se()}),ee(ht.scroller,"touchcancel",Se),ee(ht.scroller,"scroll",function(){ht.scroller.clientHeight&&(uc(bt,ht.scroller.scrollTop),Aa(bt,ht.scroller.scrollLeft,!0),Et(bt,"scroll",bt))}),ee(ht.scroller,"mousewheel",function(He){return _p(bt,He)}),ee(ht.scroller,"DOMMouseScroll",function(He){return _p(bt,He)}),ee(ht.wrapper,"scroll",function(){return ht.wrapper.scrollTop=ht.wrapper.scrollLeft=0}),ht.dragFunctions={enter:function(He){fe(bt,He)||lo(He)},over:function(He){fe(bt,He)||(function(Ze,vr){var br=Rs(Ze,vr);if(br){var Pr=document.createDocumentFragment();sc(Ze,br,Pr),Ze.display.dragCursor||(Ze.display.dragCursor=Vt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ze.display.lineSpace.insertBefore(Ze.display.dragCursor,Ze.display.cursorDiv)),St(Ze.display.dragCursor,Pr)}}(bt,He),lo(He))},start:function(He){return function(Ze,vr){if(I&&(!Ze.state.draggingText||+new Date-hc<100))lo(vr);else if(!fe(Ze,vr)&&!pi(Ze.display,vr)&&(vr.dataTransfer.setData("Text",Ze.getSelection()),vr.dataTransfer.effectAllowed="copyMove",vr.dataTransfer.setDragImage&&!X)){var br=Vt("img",null,null,"position: fixed; left: 0; top: 0;");br.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",it&&(br.width=br.height=1,Ze.display.wrapper.appendChild(br),br._top=br.offsetTop),vr.dataTransfer.setDragImage(br,0,0),it&&br.parentNode.removeChild(br)}}(bt,He)},drop:Ho(bt,gc),leave:function(He){fe(bt,He)||Lc(bt)}};var Ge=ht.input.getField();ee(Ge,"keyup",function(He){return Nc.call(bt,He)}),ee(Ge,"keydown",Ho(bt,Nu)),ee(Ge,"keypress",Ho(bt,uf)),ee(Ge,"focus",function(He){return dl(bt,He)}),ee(Ge,"blur",function(He){return Sa(bt,He)})}(this),jc(),ls(this),this.curOp.forceUpdate=!0,Xc(this,_),g.autofocus&&!W||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&dl(S)},20):Sa(this),$l)$l.hasOwnProperty(Y)&&$l[Y](this,g[Y],ou);Su(this),g.finishInit&&g.finishInit(this);for(var Z=0;Z<Tl.length;++Z)Tl[Z](this);$a(this),$&&g.lineWrapping&&getComputedStyle(D.lineDiv).textRendering=="optimizelegibility"&&(D.lineDiv.style.textRendering="auto")}Uo.defaults=Ol,Uo.optionHandlers=$l;var Tl=[];function fs(f,g,S,_){var T,D=f.doc;S==null&&(S="add"),S=="smart"&&(D.mode.indent?T=jo(f,g).state:S="prev");var Y=f.options.tabSize,Z=rt(D,g),bt=Xe(Z.text,null,Y);Z.stateAfter&&(Z.stateAfter=null);var ht,Qt=Z.text.match(/^\s*/)[0];if(_||/\S/.test(Z.text)){if(S=="smart"&&((ht=D.mode.indent(T,Z.text.slice(Qt.length),Z.text))==ye||ht>150)){if(!_)return;S="prev"}}else ht=0,S="not";S=="prev"?ht=g>D.first?Xe(rt(D,g-1).text,null,Y):0:S=="add"?ht=bt+f.options.indentUnit:S=="subtract"?ht=bt-f.options.indentUnit:typeof S=="number"&&(ht=bt+S),ht=Math.max(0,ht);var re="",Se=0;if(f.options.indentWithTabs)for(var ge=Math.floor(ht/Y);ge;--ge)Se+=Y,re+="	";if(Se<ht&&(re+=mr(ht-Se)),re!=Qt)return Ac(D,re,cr(g,0),cr(g,Qt.length),"+input"),Z.stateAfter=null,!0;for(var $e=0;$e<D.sel.ranges.length;$e++){var Ge=D.sel.ranges[$e];if(Ge.head.line==g&&Ge.head.ch<Qt.length){var He=cr(g,Qt.length);Pu(D,$e,new _o(He,He));break}}}Uo.defineInitHook=function(f){return Tl.push(f)};var Ia=null;function Rc(f){Ia=f}function Hc(f,g,S,_,T){var D=f.doc;f.display.shift=!1,_||(_=D.sel);var Y=+new Date-200,Z=T=="paste"||f.state.pasteIncoming>Y,bt=yo(g),ht=null;if(Z&&_.ranges.length>1)if(Ia&&Ia.text.join(`
`)==g){if(_.ranges.length%Ia.text.length==0){ht=[];for(var Qt=0;Qt<Ia.text.length;Qt++)ht.push(D.splitLines(Ia.text[Qt]))}}else bt.length==_.ranges.length&&f.options.pasteLinesPerSelection&&(ht=Dr(bt,function(Ze){return[Ze]}));for(var re=f.curOp.updateInput,Se=_.ranges.length-1;Se>=0;Se--){var ge=_.ranges[Se],$e=ge.from(),Ge=ge.to();ge.empty()&&(S&&S>0?$e=cr($e.line,$e.ch-S):f.state.overwrite&&!Z?Ge=cr(Ge.line,Math.min(rt(D,Ge.line).text.length,Ge.ch+er(bt).length)):Z&&Ia&&Ia.lineWise&&Ia.text.join(`
`)==bt.join(`
`)&&($e=Ge=cr($e.line,0)));var He={from:$e,to:Ge,text:ht?ht[Se%ht.length]:bt,origin:T||(Z?"paste":f.state.cutIncoming>Y?"cut":"+input")};kc(f.doc,He),Xo(f,"inputRead",f,He)}g&&!Z&&Gl(f,g),cc(f),f.curOp.updateInput<2&&(f.curOp.updateInput=re),f.curOp.typing=!0,f.state.pasteIncoming=f.state.cutIncoming=-1}function ff(f,g){var S=f.clipboardData&&f.clipboardData.getData("Text");if(S)return f.preventDefault(),g.isReadOnly()||g.options.disableInput||!g.hasFocus()||Ma(g,function(){return Hc(g,S,0,null,"paste")}),!0}function Gl(f,g){if(f.options.electricChars&&f.options.smartIndent)for(var S=f.doc.sel,_=S.ranges.length-1;_>=0;_--){var T=S.ranges[_];if(!(T.head.ch>100||_&&S.ranges[_-1].head.line==T.head.line)){var D=f.getModeAt(T.head),Y=!1;if(D.electricChars){for(var Z=0;Z<D.electricChars.length;Z++)if(g.indexOf(D.electricChars.charAt(Z))>-1){Y=fs(f,T.head.line,"smart");break}}else D.electricInput&&D.electricInput.test(rt(f.doc,T.head.line).text.slice(0,T.head.ch))&&(Y=fs(f,T.head.line,"smart"));Y&&Xo(f,"electricInput",f,T.head.line)}}}function pf(f){for(var g=[],S=[],_=0;_<f.doc.sel.ranges.length;_++){var T=f.doc.sel.ranges[_].head.line,D={anchor:cr(T,0),head:cr(T+1,0)};S.push(D),g.push(f.getRange(D.anchor,D.head))}return{text:g,ranges:S}}function df(f,g,S,_){f.setAttribute("autocorrect",S?"":"off"),f.setAttribute("autocapitalize",_?"":"off"),f.setAttribute("spellcheck",!!g)}function tp(){var f=Vt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=Vt("div",[f],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return $?f.style.width="1000px":f.setAttribute("wrap","off"),Q&&(f.style.border="1px solid black"),df(f),g}function El(f,g,S,_,T){var D=g,Y=S,Z=rt(f,g.line),bt=T&&f.direction=="rtl"?-S:S;function ht(Ze){var vr;if(_=="codepoint"){var br=Z.text.charCodeAt(g.ch+(S>0?0:-1));if(isNaN(br))vr=null;else{var Pr=S>0?br>=55296&&br<56320:br>=56320&&br<57343;vr=new cr(g.line,Math.max(0,Math.min(Z.text.length,g.ch+S*(Pr?2:1))),-S)}}else vr=T?function(Sr,Tr,hn,ln){var Bn=Un(Tr,Sr.doc.direction);if(!Bn)return Cl(Tr,hn,ln);hn.ch>=Tr.text.length?(hn.ch=Tr.text.length,hn.sticky="before"):hn.ch<=0&&(hn.ch=0,hn.sticky="after");var Ur=wr(Bn,hn.ch,hn.sticky),no=Bn[Ur];if(Sr.doc.direction=="ltr"&&no.level%2==0&&(ln>0?no.to>hn.ch:no.from<hn.ch))return Cl(Tr,hn,ln);var ko,qn=function(po,to){return Zf(Tr,po instanceof cr?po.ch:po,to)},Qn=function(po){return Sr.options.lineWrapping?(ko=ko||Oi(Sr,Tr),za(Sr,Tr,ko,po)):{begin:0,end:Tr.text.length}},uo=Qn(hn.sticky=="before"?qn(hn,-1):hn.ch);if(Sr.doc.direction=="rtl"||no.level==1){var On=no.level==1==ln<0,$n=qn(hn,On?1:-1);if($n!=null&&(On?$n<=no.to&&$n<=uo.end:$n>=no.from&&$n>=uo.begin)){var Kn=On?"before":"after";return new cr(hn.line,$n,Kn)}}var Mn=function(po,to,Ga){for(var xn=function(Na,qa){return qa?new cr(hn.line,qn(Na,1),"before"):new cr(hn.line,Na,"after")};po>=0&&po<Bn.length;po+=to){var Li=Bn[po],Qi=to>0==(Li.level!=1),vo=Qi?Ga.begin:qn(Ga.end,-1);if(Li.from<=vo&&vo<Li.to||(vo=Qi?Li.from:qn(Li.to,-1),Ga.begin<=vo&&vo<Ga.end))return xn(vo,Qi)}},gi=Mn(Ur+ln,ln,uo);if(gi)return gi;var vi=ln>0?uo.end:qn(uo.begin,-1);return vi==null||ln>0&&vi==Tr.text.length||!(gi=Mn(ln>0?0:Bn.length-1,ln,Qn(vi)))?null:gi}(f.cm,Z,g,S):Cl(Z,g,S);if(vr==null){if(Ze||!function(){var Sr=g.line+bt;return!(Sr<f.first||Sr>=f.first+f.size)&&(g=new cr(Sr,g.ch,g.sticky),Z=rt(f,Sr))}())return!1;g=Gs(T,f.cm,Z,g.line,bt)}else g=vr;return!0}if(_=="char"||_=="codepoint")ht();else if(_=="column")ht(!0);else if(_=="word"||_=="group")for(var Qt=null,re=_=="group",Se=f.cm&&f.cm.getHelper(g,"wordChars"),ge=!0;!(S<0)||ht(!ge);ge=!1){var $e=Z.text.charAt(g.ch)||`
`,Ge=Ft($e,Se)?"w":re&&$e==`
`?"n":!re||/\s/.test($e)?null:"p";if(!re||ge||Ge||(Ge="s"),Qt&&Qt!=Ge){S<0&&(S=1,ht(),g.sticky="after");break}if(Ge&&(Qt=Ge),S>0&&!ht(!ge))break}var He=Au(f,g,D,Y,!0);return xe(D,He)&&(He.hitSide=!0),He}function Bc(f,g,S,_){var T,D,Y=f.doc,Z=g.left;if(_=="page"){var bt=Math.min(f.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),ht=Math.max(bt-.5*bs(f.display),3);T=(S>0?g.bottom:g.top)+S*ht}else _=="line"&&(T=S>0?g.bottom+3:g.top-3);for(;(D=jn(f,Z,T)).outside;){if(S<0?T<=0:T>=Y.height){D.hitSide=!0;break}T+=5*S}return D}var Po=function(f){this.cm=f,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new at,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ql(f,g){var S=Xi(f,g.line);if(!S||S.hidden)return null;var _=rt(f.doc,g.line),T=ys(S,_,g.line),D=Un(_,f.doc.direction),Y="left";D&&(Y=wr(D,g.ch)%2?"right":"left");var Z=he(T.map,g.ch,Y);return Z.offset=Z.collapse=="right"?Z.end:Z.start,Z}function Kl(f,g){return g&&(f.bad=!0),f}function Uc(f,g,S){var _;if(g==f.display.lineDiv){if(!(_=f.display.lineDiv.childNodes[S]))return Kl(f.clipPos(cr(f.display.viewTo-1)),!0);g=null,S=0}else for(_=g;;_=_.parentNode){if(!_||_==f.display.lineDiv)return null;if(_.parentNode&&_.parentNode==f.display.lineDiv)break}for(var T=0;T<f.display.view.length;T++){var D=f.display.view[T];if(D.node==_)return ep(D,g,S)}}function ep(f,g,S){var _=f.text.firstChild,T=!1;if(!g||!de(_,g))return Kl(cr(Hr(f.line),0),!0);if(g==_&&(T=!0,g=_.childNodes[S],S=0,!g)){var D=f.rest?er(f.rest):f.line;return Kl(cr(Hr(D),D.text.length),T)}var Y=g.nodeType==3?g:null,Z=g;for(Y||g.childNodes.length!=1||g.firstChild.nodeType!=3||(Y=g.firstChild,S&&(S=Y.nodeValue.length));Z.parentNode!=_;)Z=Z.parentNode;var bt=f.measure,ht=bt.maps;function Qt(He,Ze,vr){for(var br=-1;br<(ht?ht.length:0);br++)for(var Pr=br<0?bt.map:ht[br],Sr=0;Sr<Pr.length;Sr+=3){var Tr=Pr[Sr+2];if(Tr==He||Tr==Ze){var hn=Hr(br<0?f.line:f.rest[br]),ln=Pr[Sr]+vr;return(vr<0||Tr!=He)&&(ln=Pr[Sr+(vr?1:0)]),cr(hn,ln)}}}var re=Qt(Y,Z,S);if(re)return Kl(re,T);for(var Se=Z.nextSibling,ge=Y?Y.nodeValue.length-S:0;Se;Se=Se.nextSibling){if(re=Qt(Se,Se.firstChild,0))return Kl(cr(re.line,re.ch-ge),T);ge+=Se.textContent.length}for(var $e=Z.previousSibling,Ge=S;$e;$e=$e.previousSibling){if(re=Qt($e,$e.firstChild,-1))return Kl(cr(re.line,re.ch+Ge),T);Ge+=$e.textContent.length}}Po.prototype.init=function(f){var g=this,S=this,_=S.cm,T=S.div=f.lineDiv;function D(Z){for(var bt=Z.target;bt;bt=bt.parentNode){if(bt==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(bt.className))break}return!1}function Y(Z){if(D(Z)&&!fe(_,Z)){if(_.somethingSelected())Rc({lineWise:!1,text:_.getSelections()}),Z.type=="cut"&&_.replaceSelection("",null,"cut");else{if(!_.options.lineWiseCopyCut)return;var bt=pf(_);Rc({lineWise:!0,text:bt.text}),Z.type=="cut"&&_.operation(function(){_.setSelections(bt.ranges,0,Ae),_.replaceSelection("",null,"cut")})}if(Z.clipboardData){Z.clipboardData.clearData();var ht=Ia.text.join(`
`);if(Z.clipboardData.setData("Text",ht),Z.clipboardData.getData("Text")==ht)return void Z.preventDefault()}var Qt=tp(),re=Qt.firstChild;_.display.lineSpace.insertBefore(Qt,_.display.lineSpace.firstChild),re.value=Ia.text.join(`
`);var Se=Le();Nr(re),setTimeout(function(){_.display.lineSpace.removeChild(Qt),Se.focus(),Se==T&&S.showPrimarySelection()},50)}}T.contentEditable=!0,df(T,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),ee(T,"paste",function(Z){!D(Z)||fe(_,Z)||ff(Z,_)||N<=11&&setTimeout(Ho(_,function(){return g.updateFromDOM()}),20)}),ee(T,"compositionstart",function(Z){g.composing={data:Z.data,done:!1}}),ee(T,"compositionupdate",function(Z){g.composing||(g.composing={data:Z.data,done:!1})}),ee(T,"compositionend",function(Z){g.composing&&(Z.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),ee(T,"touchstart",function(){return S.forceCompositionEnd()}),ee(T,"input",function(){g.composing||g.readFromDOMSoon()}),ee(T,"copy",Y),ee(T,"cut",Y)},Po.prototype.screenReaderLabelChanged=function(f){f?this.div.setAttribute("aria-label",f):this.div.removeAttribute("aria-label")},Po.prototype.prepareSelection=function(){var f=mu(this.cm,!1);return f.focus=Le()==this.div,f},Po.prototype.showSelection=function(f,g){f&&this.cm.display.view.length&&((f.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(f))},Po.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Po.prototype.showPrimarySelection=function(){var f=this.getSelection(),g=this.cm,S=g.doc.sel.primary(),_=S.from(),T=S.to();if(g.display.viewTo==g.display.viewFrom||_.line>=g.display.viewTo||T.line<g.display.viewFrom)f.removeAllRanges();else{var D=Uc(g,f.anchorNode,f.anchorOffset),Y=Uc(g,f.focusNode,f.focusOffset);if(!D||D.bad||!Y||Y.bad||Mt(en(D,Y),_)!=0||Mt(Yr(D,Y),T)!=0){var Z=g.display.view,bt=_.line>=g.display.viewFrom&&ql(g,_)||{node:Z[0].measure.map[2],offset:0},ht=T.line<g.display.viewTo&&ql(g,T);if(!ht){var Qt=Z[Z.length-1].measure,re=Qt.maps?Qt.maps[Qt.maps.length-1]:Qt.map;ht={node:re[re.length-1],offset:re[re.length-2]-re[re.length-3]}}if(bt&&ht){var Se,ge=f.rangeCount&&f.getRangeAt(0);try{Se=zt(bt.node,bt.offset,ht.offset,ht.node)}catch{}Se&&(!vt&&g.state.focused?(f.collapse(bt.node,bt.offset),Se.collapsed||(f.removeAllRanges(),f.addRange(Se))):(f.removeAllRanges(),f.addRange(Se)),ge&&f.anchorNode==null?f.addRange(ge):vt&&this.startGracePeriod()),this.rememberSelection()}else f.removeAllRanges()}}},Po.prototype.startGracePeriod=function(){var f=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){f.gracePeriod=!1,f.selectionChanged()&&f.cm.operation(function(){return f.cm.curOp.selectionChanged=!0})},20)},Po.prototype.showMultipleSelections=function(f){St(this.cm.display.cursorDiv,f.cursors),St(this.cm.display.selectionDiv,f.selection)},Po.prototype.rememberSelection=function(){var f=this.getSelection();this.lastAnchorNode=f.anchorNode,this.lastAnchorOffset=f.anchorOffset,this.lastFocusNode=f.focusNode,this.lastFocusOffset=f.focusOffset},Po.prototype.selectionInEditor=function(){var f=this.getSelection();if(!f.rangeCount)return!1;var g=f.getRangeAt(0).commonAncestorContainer;return de(this.div,g)},Po.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Le()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Po.prototype.blur=function(){this.div.blur()},Po.prototype.getField=function(){return this.div},Po.prototype.supportsTouch=function(){return!0},Po.prototype.receivedFocus=function(){var f=this,g=this;this.selectionInEditor()?setTimeout(function(){return f.pollSelection()},20):Ma(this.cm,function(){return g.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function S(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,S))})},Po.prototype.selectionChanged=function(){var f=this.getSelection();return f.anchorNode!=this.lastAnchorNode||f.anchorOffset!=this.lastAnchorOffset||f.focusNode!=this.lastFocusNode||f.focusOffset!=this.lastFocusOffset},Po.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var f=this.getSelection(),g=this.cm;if(_t&&V&&this.cm.display.gutterSpecs.length&&function(T){for(var D=T;D;D=D.parentNode)if(/CodeMirror-gutter-wrapper/.test(D.className))return!0;return!1}(f.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var S=Uc(g,f.anchorNode,f.anchorOffset),_=Uc(g,f.focusNode,f.focusOffset);S&&_&&Ma(g,function(){Ei(g.doc,pc(S,_),Ae),(S.bad||_.bad)&&(g.curOp.selectionChanged=!0)})}}},Po.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var f,g,S,_=this.cm,T=_.display,D=_.doc.sel.primary(),Y=D.from(),Z=D.to();if(Y.ch==0&&Y.line>_.firstLine()&&(Y=cr(Y.line-1,rt(_.doc,Y.line-1).length)),Z.ch==rt(_.doc,Z.line).text.length&&Z.line<_.lastLine()&&(Z=cr(Z.line+1,0)),Y.line<T.viewFrom||Z.line>T.viewTo-1)return!1;Y.line==T.viewFrom||(f=Nl(_,Y.line))==0?(g=Hr(T.view[0].line),S=T.view[0].node):(g=Hr(T.view[f].line),S=T.view[f-1].node.nextSibling);var bt,ht,Qt=Nl(_,Z.line);if(Qt==T.view.length-1?(bt=T.viewTo-1,ht=T.lineDiv.lastChild):(bt=Hr(T.view[Qt+1].line)-1,ht=T.view[Qt+1].node.previousSibling),!S)return!1;for(var re=_.doc.splitLines(function(hn,ln,Bn,Ur,no){var ko="",qn=!1,Qn=hn.doc.lineSeparator(),uo=!1;function On(){qn&&(ko+=Qn,uo&&(ko+=Qn),qn=uo=!1)}function $n(Mn){Mn&&(On(),ko+=Mn)}function Kn(Mn){if(Mn.nodeType==1){var gi=Mn.getAttribute("cm-text");if(gi)return void $n(gi);var vi,po=Mn.getAttribute("cm-marker");if(po){var to=hn.findMarks(cr(Ur,0),cr(no+1,0),function(Li){return function(Qi){return Qi.id==Li}}(+po));return void(to.length&&(vi=to[0].find(0))&&$n(Xt(hn.doc,vi.from,vi.to).join(Qn)))}if(Mn.getAttribute("contenteditable")=="false")return;var Ga=/^(pre|div|p|li|table|br)$/i.test(Mn.nodeName);if(!/^br$/i.test(Mn.nodeName)&&Mn.textContent.length==0)return;Ga&&On();for(var xn=0;xn<Mn.childNodes.length;xn++)Kn(Mn.childNodes[xn]);/^(pre|p)$/i.test(Mn.nodeName)&&(uo=!0),Ga&&(qn=!0)}else Mn.nodeType==3&&$n(Mn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Kn(ln),ln!=Bn;)ln=ln.nextSibling,uo=!1;return ko}(_,S,ht,g,bt)),Se=Xt(_.doc,cr(g,0),cr(bt,rt(_.doc,bt).text.length));re.length>1&&Se.length>1;)if(er(re)==er(Se))re.pop(),Se.pop(),bt--;else{if(re[0]!=Se[0])break;re.shift(),Se.shift(),g++}for(var ge=0,$e=0,Ge=re[0],He=Se[0],Ze=Math.min(Ge.length,He.length);ge<Ze&&Ge.charCodeAt(ge)==He.charCodeAt(ge);)++ge;for(var vr=er(re),br=er(Se),Pr=Math.min(vr.length-(re.length==1?ge:0),br.length-(Se.length==1?ge:0));$e<Pr&&vr.charCodeAt(vr.length-$e-1)==br.charCodeAt(br.length-$e-1);)++$e;if(re.length==1&&Se.length==1&&g==Y.line)for(;ge&&ge>Y.ch&&vr.charCodeAt(vr.length-$e-1)==br.charCodeAt(br.length-$e-1);)ge--,$e++;re[re.length-1]=vr.slice(0,vr.length-$e).replace(/^\u200b+/,""),re[0]=re[0].slice(ge).replace(/\u200b+$/,"");var Sr=cr(g,ge),Tr=cr(bt,Se.length?er(Se).length-$e:0);return re.length>1||re[0]||Mt(Sr,Tr)?(Ac(_.doc,re,Sr,Tr,"+input"),!0):void 0},Po.prototype.ensurePolled=function(){this.forceCompositionEnd()},Po.prototype.reset=function(){this.forceCompositionEnd()},Po.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Po.prototype.readFromDOMSoon=function(){var f=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(f.readDOMTimeout=null,f.composing){if(!f.composing.done)return;f.composing=null}f.updateFromDOM()},80))},Po.prototype.updateFromDOM=function(){var f=this;!this.cm.isReadOnly()&&this.pollContent()||Ma(this.cm,function(){return Ui(f.cm)})},Po.prototype.setUneditable=function(f){f.contentEditable="false"},Po.prototype.onKeyPress=function(f){f.charCode==0||this.composing||(f.preventDefault(),this.cm.isReadOnly()||Ho(this.cm,Hc)(this.cm,String.fromCharCode(f.charCode==null?f.keyCode:f.charCode),0))},Po.prototype.readOnlyChanged=function(f){this.div.contentEditable=String(f!="nocursor")},Po.prototype.onContextMenu=function(){},Po.prototype.resetPosition=function(){},Po.prototype.needsContentAttribute=!0;var Qo=function(f){this.cm=f,this.prevInput="",this.pollingFast=!1,this.polling=new at,this.hasSelection=!1,this.composing=null};Qo.prototype.init=function(f){var g=this,S=this,_=this.cm;this.createField(f);var T=this.textarea;function D(Y){if(!fe(_,Y)){if(_.somethingSelected())Rc({lineWise:!1,text:_.getSelections()});else{if(!_.options.lineWiseCopyCut)return;var Z=pf(_);Rc({lineWise:!0,text:Z.text}),Y.type=="cut"?_.setSelections(Z.ranges,null,Ae):(S.prevInput="",T.value=Z.text.join(`
`),Nr(T))}Y.type=="cut"&&(_.state.cutIncoming=+new Date)}}f.wrapper.insertBefore(this.wrapper,f.wrapper.firstChild),Q&&(T.style.width="0px"),ee(T,"input",function(){I&&N>=9&&g.hasSelection&&(g.hasSelection=null),S.poll()}),ee(T,"paste",function(Y){fe(_,Y)||ff(Y,_)||(_.state.pasteIncoming=+new Date,S.fastPoll())}),ee(T,"cut",D),ee(T,"copy",D),ee(f.scroller,"paste",function(Y){if(!pi(f,Y)&&!fe(_,Y)){if(!T.dispatchEvent)return _.state.pasteIncoming=+new Date,void S.focus();var Z=new Event("paste");Z.clipboardData=Y.clipboardData,T.dispatchEvent(Z)}}),ee(f.lineSpace,"selectstart",function(Y){pi(f,Y)||Wr(Y)}),ee(T,"compositionstart",function(){var Y=_.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:Y,range:_.markText(Y,_.getCursor("to"),{className:"CodeMirror-composing"})}}),ee(T,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},Qo.prototype.createField=function(f){this.wrapper=tp(),this.textarea=this.wrapper.firstChild},Qo.prototype.screenReaderLabelChanged=function(f){f?this.textarea.setAttribute("aria-label",f):this.textarea.removeAttribute("aria-label")},Qo.prototype.prepareSelection=function(){var f=this.cm,g=f.display,S=f.doc,_=mu(f);if(f.options.moveInputWithCursor){var T=ur(f,S.sel.primary().head,"div"),D=g.wrapper.getBoundingClientRect(),Y=g.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,T.top+Y.top-D.top)),_.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,T.left+Y.left-D.left))}return _},Qo.prototype.showSelection=function(f){var g=this.cm.display;St(g.cursorDiv,f.cursors),St(g.selectionDiv,f.selection),f.teTop!=null&&(this.wrapper.style.top=f.teTop+"px",this.wrapper.style.left=f.teLeft+"px")},Qo.prototype.reset=function(f){if(!this.contextMenuPending&&!this.composing){var g=this.cm;if(g.somethingSelected()){this.prevInput="";var S=g.getSelection();this.textarea.value=S,g.state.focused&&Nr(this.textarea),I&&N>=9&&(this.hasSelection=S)}else f||(this.prevInput=this.textarea.value="",I&&N>=9&&(this.hasSelection=null))}},Qo.prototype.getField=function(){return this.textarea},Qo.prototype.supportsTouch=function(){return!1},Qo.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!W||Le()!=this.textarea))try{this.textarea.focus()}catch{}},Qo.prototype.blur=function(){this.textarea.blur()},Qo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Qo.prototype.receivedFocus=function(){this.slowPoll()},Qo.prototype.slowPoll=function(){var f=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){f.poll(),f.cm.state.focused&&f.slowPoll()})},Qo.prototype.fastPoll=function(){var f=!1,g=this;g.pollingFast=!0,g.polling.set(20,function S(){g.poll()||f?(g.pollingFast=!1,g.slowPoll()):(f=!0,g.polling.set(60,S))})},Qo.prototype.poll=function(){var f=this,g=this.cm,S=this.textarea,_=this.prevInput;if(this.contextMenuPending||!g.state.focused||So(S)&&!_&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var T=S.value;if(T==_&&!g.somethingSelected())return!1;if(I&&N>=9&&this.hasSelection===T||It&&/[\uf700-\uf7ff]/.test(T))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var D=T.charCodeAt(0);if(D!=8203||_||(_="​"),D==8666)return this.reset(),this.cm.execCommand("undo")}for(var Y=0,Z=Math.min(_.length,T.length);Y<Z&&_.charCodeAt(Y)==T.charCodeAt(Y);)++Y;return Ma(g,function(){Hc(g,T.slice(Y),_.length-Y,null,f.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?S.value=f.prevInput="":f.prevInput=T,f.composing&&(f.composing.range.clear(),f.composing.range=g.markText(f.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Qo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Qo.prototype.onKeyPress=function(){I&&N>=9&&(this.hasSelection=null),this.fastPoll()},Qo.prototype.onContextMenu=function(f){var g=this,S=g.cm,_=S.display,T=g.textarea;g.contextMenuPending&&g.contextMenuPending();var D=Rs(S,f),Y=_.scroller.scrollTop;if(D&&!it){S.options.resetSelectionOnContextMenu&&S.doc.sel.contains(D)==-1&&Ho(S,Ei)(S.doc,pc(D),Ae);var Z,bt=T.style.cssText,ht=g.wrapper.style.cssText,Qt=g.wrapper.offsetParent.getBoundingClientRect();if(g.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(f.clientY-Qt.top-5)+"px; left: "+(f.clientX-Qt.left-5)+`px;
      z-index: 1000; background: `+(I?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,$&&(Z=window.scrollY),_.input.focus(),$&&window.scrollTo(null,Z),_.input.reset(),S.somethingSelected()||(T.value=g.prevInput=" "),g.contextMenuPending=ge,_.selForContextMenu=S.doc.sel,clearTimeout(_.detectingSelectAll),I&&N>=9&&Se(),Tt){lo(f);var re=function(){Je(window,"mouseup",re),setTimeout(ge,20)};ee(window,"mouseup",re)}else setTimeout(ge,50)}function Se(){if(T.selectionStart!=null){var $e=S.somethingSelected(),Ge="​"+($e?T.value:"");T.value="⇚",T.value=Ge,g.prevInput=$e?"":"​",T.selectionStart=1,T.selectionEnd=Ge.length,_.selForContextMenu=S.doc.sel}}function ge(){if(g.contextMenuPending==ge&&(g.contextMenuPending=!1,g.wrapper.style.cssText=ht,T.style.cssText=bt,I&&N<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=Y),T.selectionStart!=null)){(!I||I&&N<9)&&Se();var $e=0,Ge=function(){_.selForContextMenu==S.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&g.prevInput=="​"?Ho(S,Pc)(S):$e++<10?_.detectingSelectAll=setTimeout(Ge,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(Ge,200)}}},Qo.prototype.readOnlyChanged=function(f){f||this.reset(),this.textarea.disabled=f=="nocursor",this.textarea.readOnly=!!f},Qo.prototype.setUneditable=function(){},Qo.prototype.needsContentAttribute=!1,function(f){var g=f.optionHandlers;function S(_,T,D,Y){f.defaults[_]=T,D&&(g[_]=Y?function(Z,bt,ht){ht!=ou&&D(Z,bt,ht)}:D)}f.defineOption=S,f.Init=ou,S("value","",function(_,T){return _.setValue(T)},!0),S("mode",null,function(_,T){_.doc.modeOption=T,Sc(_)},!0),S("indentUnit",2,Sc,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(_){Oc(_),Ir(_),Ui(_)},!0),S("lineSeparator",null,function(_,T){if(_.doc.lineSep=T,T){var D=[],Y=_.doc.first;_.doc.iter(function(bt){for(var ht=0;;){var Qt=bt.text.indexOf(T,ht);if(Qt==-1)break;ht=Qt+T.length,D.push(cr(Y,Qt))}Y++});for(var Z=D.length-1;Z>=0;Z--)Ac(_.doc,T,D[Z],cr(D[Z].line,D[Z].ch+T.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(_,T,D){_.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),D!=ou&&_.refresh()}),S("specialCharPlaceholder",Si,function(_){return _.refresh()},!0),S("electricChars",!0),S("inputStyle",W?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(_,T){return _.getInputField().spellcheck=T},!0),S("autocorrect",!1,function(_,T){return _.getInputField().autocorrect=T},!0),S("autocapitalize",!1,function(_,T){return _.getInputField().autocapitalize=T},!0),S("rtlMoveVisually",!Yt),S("wholeLineUpdateBefore",!0),S("theme","default",function(_){As(_),Tu(_)},!0),S("keyMap","default",function(_,T,D){var Y=zl(T),Z=D!=ou&&zl(D);Z&&Z.detach&&Z.detach(_,Y),Y.attach&&Y.attach(_,Z||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,Qf,!0),S("gutters",[],function(_,T){_.display.gutterSpecs=Ou(T,_.options.lineNumbers),Tu(_)},!0),S("fixedGutter",!0,function(_,T){_.display.gutters.style.left=T?ic(_.display)+"px":"0",_.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(_){return Cs(_)},!0),S("scrollbarStyle","native",function(_){bu(_),Cs(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),S("lineNumbers",!1,function(_,T){_.display.gutterSpecs=Ou(_.options.gutters,T),Tu(_)},!0),S("firstLineNumber",1,Tu,!0),S("lineNumberFormatter",function(_){return _},Tu,!0),S("showCursorWhenSelecting",!1,ul,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(_,T){T=="nocursor"&&(Sa(_),_.display.input.blur()),_.display.input.readOnlyChanged(T)}),S("screenReaderLabel",null,function(_,T){T=T===""?null:T,_.display.input.screenReaderLabelChanged(T)}),S("disableInput",!1,function(_,T){T||_.display.input.reset()},!0),S("dragDrop",!0,hi),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,ul,!0),S("singleCursorHeightPerLine",!0,ul,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,Oc,!0),S("addModeClass",!1,Oc,!0),S("pollInterval",100),S("undoDepth",200,function(_,T){return _.doc.history.undoDepth=T}),S("historyEventDelay",1250),S("viewportMargin",10,function(_){return _.refresh()},!0),S("maxHighlightLength",1e4,Oc,!0),S("moveInputWithCursor",!0,function(_,T){T||_.display.input.resetPosition()}),S("tabindex",null,function(_,T){return _.display.input.getField().tabIndex=T||""}),S("autofocus",null),S("direction","ltr",function(_,T){return _.doc.setDirection(T)},!0),S("phrases",null)}(Uo),function(f){var g=f.optionHandlers,S=f.helpers={};f.prototype={constructor:f,focus:function(){window.focus(),this.display.input.focus()},setOption:function(_,T){var D=this.options,Y=D[_];D[_]==T&&_!="mode"||(D[_]=T,g.hasOwnProperty(_)&&Ho(this,g[_])(this,T,Y),Et(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,T){this.state.keyMaps[T?"push":"unshift"](zl(_))},removeKeyMap:function(_){for(var T=this.state.keyMaps,D=0;D<T.length;++D)if(T[D]==_||T[D].name==_)return T.splice(D,1),!0},addOverlay:Ai(function(_,T){var D=_.token?_:f.getMode(this.options,_);if(D.startState)throw new Error("Overlays may not be stateful.");(function(Y,Z,bt){for(var ht=0,Qt=bt(Z);ht<Y.length&&bt(Y[ht])<=Qt;)ht++;Y.splice(ht,0,Z)})(this.state.overlays,{mode:D,modeSpec:_,opaque:T&&T.opaque,priority:T&&T.priority||0},function(Y){return Y.priority}),this.state.modeGen++,Ui(this)}),removeOverlay:Ai(function(_){for(var T=this.state.overlays,D=0;D<T.length;++D){var Y=T[D].modeSpec;if(Y==_||typeof _=="string"&&Y.name==_)return T.splice(D,1),this.state.modeGen++,void Ui(this)}}),indentLine:Ai(function(_,T,D){typeof T!="string"&&typeof T!="number"&&(T=T==null?this.options.smartIndent?"smart":"prev":T?"add":"subtract"),Nn(this.doc,_)&&fs(this,_,T,D)}),indentSelection:Ai(function(_){for(var T=this.doc.sel.ranges,D=-1,Y=0;Y<T.length;Y++){var Z=T[Y];if(Z.empty())Z.head.line>D&&(fs(this,Z.head.line,_,!0),D=Z.head.line,Y==this.doc.sel.primIndex&&cc(this));else{var bt=Z.from(),ht=Z.to(),Qt=Math.max(D,bt.line);D=Math.min(this.lastLine(),ht.line-(ht.ch?0:1))+1;for(var re=Qt;re<D;++re)fs(this,re,_);var Se=this.doc.sel.ranges;bt.ch==0&&T.length==Se.length&&Se[Y].from().ch>0&&Pu(this.doc,Y,new _o(bt,Se[Y].to()),Ae)}}}),getTokenAt:function(_,T){return al(this,_,T)},getLineTokens:function(_,T){return al(this,cr(_),T,!0)},getTokenTypeAt:function(_){_=Mr(this.doc,_);var T,D=ol(this,rt(this.doc,_.line)),Y=0,Z=(D.length-1)/2,bt=_.ch;if(bt==0)T=D[2];else for(;;){var ht=Y+Z>>1;if((ht?D[2*ht-1]:0)>=bt)Z=ht;else{if(!(D[2*ht+1]<bt)){T=D[2*ht+2];break}Y=ht+1}}var Qt=T?T.indexOf("overlay "):-1;return Qt<0?T:Qt==0?null:T.slice(0,Qt-1)},getModeAt:function(_){var T=this.doc.mode;return T.innerMode?f.innerMode(T,this.getTokenAt(_).state).mode:T},getHelper:function(_,T){return this.getHelpers(_,T)[0]},getHelpers:function(_,T){var D=[];if(!S.hasOwnProperty(T))return D;var Y=S[T],Z=this.getModeAt(_);if(typeof Z[T]=="string")Y[Z[T]]&&D.push(Y[Z[T]]);else if(Z[T])for(var bt=0;bt<Z[T].length;bt++){var ht=Y[Z[T][bt]];ht&&D.push(ht)}else Z.helperType&&Y[Z.helperType]?D.push(Y[Z.helperType]):Y[Z.name]&&D.push(Y[Z.name]);for(var Qt=0;Qt<Y._global.length;Qt++){var re=Y._global[Qt];re.pred(Z,this)&&kt(D,re.val)==-1&&D.push(re.val)}return D},getStateAfter:function(_,T){var D=this.doc;return jo(this,(_=gn(D,_??D.first+D.size-1))+1,T).state},cursorCoords:function(_,T){var D=this.doc.sel.primary();return ur(this,_==null?D.head:typeof _=="object"?Mr(this.doc,_):_?D.from():D.to(),T||"page")},charCoords:function(_,T){return Ve(this,Mr(this.doc,_),T||"page")},coordsChar:function(_,T){return jn(this,(_=We(this,_,T||"page")).left,_.top)},lineAtHeight:function(_,T){return _=We(this,{top:_,left:0},T||"page").top,wn(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,T,D){var Y,Z=!1;if(typeof _=="number"){var bt=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>bt&&(_=bt,Z=!0),Y=rt(this.doc,_)}else Y=_;return me(this,Y,{top:0,left:0},T||"page",D||Z).top+(Z?this.doc.height-li(Y):0)},defaultTextHeight:function(){return bs(this.display)},defaultCharWidth:function(){return ki(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,T,D,Y,Z){var bt=this.display,ht=(_=ur(this,Mr(this.doc,_))).bottom,Qt=_.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),bt.sizer.appendChild(T),Y=="over")ht=_.top;else if(Y=="above"||Y=="near"){var re=Math.max(bt.wrapper.clientHeight,this.doc.height),Se=Math.max(bt.sizer.clientWidth,bt.lineSpace.clientWidth);(Y=="above"||_.bottom+T.offsetHeight>re)&&_.top>T.offsetHeight?ht=_.top-T.offsetHeight:_.bottom+T.offsetHeight<=re&&(ht=_.bottom),Qt+T.offsetWidth>Se&&(Qt=Se-T.offsetWidth)}T.style.top=ht+"px",T.style.left=T.style.right="",Z=="right"?(Qt=bt.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(Z=="left"?Qt=0:Z=="middle"&&(Qt=(bt.sizer.clientWidth-T.offsetWidth)/2),T.style.left=Qt+"px"),D&&function(ge,$e){var Ge=xs(ge,$e);Ge.scrollTop!=null&&uc(ge,Ge.scrollTop),Ge.scrollLeft!=null&&Aa(ge,Ge.scrollLeft)}(this,{left:Qt,top:ht,right:Qt+T.offsetWidth,bottom:ht+T.offsetHeight})},triggerOnKeyDown:Ai(Nu),triggerOnKeyPress:Ai(uf),triggerOnKeyUp:Nc,triggerOnMouseDown:Ai(Ep),execCommand:function(_){if(Sl.hasOwnProperty(_))return Sl[_].call(null,this)},triggerElectric:Ai(function(_){Gl(this,_)}),findPosH:function(_,T,D,Y){var Z=1;T<0&&(Z=-1,T=-T);for(var bt=Mr(this.doc,_),ht=0;ht<T&&!(bt=El(this.doc,bt,Z,D,Y)).hitSide;++ht);return bt},moveH:Ai(function(_,T){var D=this;this.extendSelectionsBy(function(Y){return D.display.shift||D.doc.extend||Y.empty()?El(D.doc,Y.head,_,T,D.options.rtlMoveVisually):_<0?Y.from():Y.to()},le)}),deleteH:Ai(function(_,T){var D=this.doc.sel,Y=this.doc;D.somethingSelected()?Y.replaceSelection("",null,"+delete"):mc(this,function(Z){var bt=El(Y,Z.head,_,T,!1);return _<0?{from:bt,to:Z.head}:{from:Z.head,to:bt}})}),findPosV:function(_,T,D,Y){var Z=1,bt=Y;T<0&&(Z=-1,T=-T);for(var ht=Mr(this.doc,_),Qt=0;Qt<T;++Qt){var re=ur(this,ht,"div");if(bt==null?bt=re.left:re.left=bt,(ht=Bc(this,re,Z,D)).hitSide)break}return ht},moveV:Ai(function(_,T){var D=this,Y=this.doc,Z=[],bt=!this.display.shift&&!Y.extend&&Y.sel.somethingSelected();if(Y.extendSelectionsBy(function(Qt){if(bt)return _<0?Qt.from():Qt.to();var re=ur(D,Qt.head,"div");Qt.goalColumn!=null&&(re.left=Qt.goalColumn),Z.push(re.left);var Se=Bc(D,re,_,T);return T=="page"&&Qt==Y.sel.primary()&&qc(D,Ve(D,Se,"div").top-re.top),Se},le),Z.length)for(var ht=0;ht<Y.sel.ranges.length;ht++)Y.sel.ranges[ht].goalColumn=Z[ht]}),findWordAt:function(_){var T=rt(this.doc,_.line).text,D=_.ch,Y=_.ch;if(T){var Z=this.getHelper(_,"wordChars");_.sticky!="before"&&Y!=T.length||!D?++Y:--D;for(var bt=T.charAt(D),ht=Ft(bt,Z)?function(Qt){return Ft(Qt,Z)}:/\s/.test(bt)?function(Qt){return/\s/.test(Qt)}:function(Qt){return!/\s/.test(Qt)&&!Ft(Qt)};D>0&&ht(T.charAt(D-1));)--D;for(;Y<T.length&&ht(T.charAt(Y));)++Y}return new _o(cr(_.line,D),cr(_.line,Y))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ar(this.display.cursorDiv,"CodeMirror-overwrite"):Ht(this.display.cursorDiv,"CodeMirror-overwrite"),Et(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Le()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ai(function(_,T){Bs(this,_,T)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-ni(this)-this.display.barHeight,width:_.scrollWidth-ni(this)-this.display.barWidth,clientHeight:ms(this),clientWidth:la(this)}},scrollIntoView:Ai(function(_,T){_==null?(_={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof _=="number"?_={from:cr(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=T||0,_.from.line!=null?function(D,Y){Kc(D),D.curOp.scrollToPos=Y}(this,_):Ju(this,_.from,_.to,_.margin)}),setSize:Ai(function(_,T){var D=this,Y=function(bt){return typeof bt=="number"||/^\d+$/.test(String(bt))?bt+"px":bt};_!=null&&(this.display.wrapper.style.width=Y(_)),T!=null&&(this.display.wrapper.style.height=Y(T)),this.options.lineWrapping&&hr(this);var Z=this.display.viewFrom;this.doc.iter(Z,this.display.viewTo,function(bt){if(bt.widgets){for(var ht=0;ht<bt.widgets.length;ht++)if(bt.widgets[ht].noHScroll){Hs(D,Z,"widget");break}}++Z}),this.curOp.forceUpdate=!0,Et(this,"refresh",this)}),operation:function(_){return Ma(this,_)},startOperation:function(){return ls(this)},endOperation:function(){return $a(this)},refresh:Ai(function(){var _=this.display.cachedTextHeight;Ui(this),this.curOp.forceUpdate=!0,Ir(this),Bs(this,this.doc.scrollLeft,this.doc.scrollTop),Ss(this.display),(_==null||Math.abs(_-bs(this.display))>.5||this.options.lineWrapping)&&Xu(this),Et(this,"refresh",this)}),swapDoc:Ai(function(_){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),Xc(this,_),Ir(this),this.display.input.reset(),Bs(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Xo(this,"swapDoc",this,T),T}),phrase:function(_){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,_)?T[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Cr(f),f.registerHelper=function(_,T,D){S.hasOwnProperty(_)||(S[_]=f[_]={_global:[]}),S[_][T]=D},f.registerGlobalHelper=function(_,T,D,Y){f.registerHelper(_,T,Y),S[_]._global.push({pred:D,val:Y})}}(Uo);var Vu="iter insert remove copy getEditor constructor".split(" ");for(var Yl in Ea.prototype)Ea.prototype.hasOwnProperty(Yl)&&kt(Vu,Yl)<0&&(Uo.prototype[Yl]=function(f){return function(){return f.apply(this.doc,arguments)}}(Ea.prototype[Yl]));return Cr(Ea),Uo.inputStyles={textarea:Qo,contenteditable:Po},Uo.defineMode=function(f){Uo.defaults.mode||f=="null"||(Uo.defaults.mode=f),Xn.apply(this,arguments)},Uo.defineMIME=function(f,g){ao[f]=g},Uo.defineMode("null",function(){return{token:function(f){return f.skipToEnd()}}}),Uo.defineMIME("text/plain","null"),Uo.defineExtension=function(f,g){Uo.prototype[f]=g},Uo.defineDocExtension=function(f,g){Ea.prototype[f]=g},Uo.fromTextArea=function(f,g){if((g=g?Fr(g):{}).value=f.value,!g.tabindex&&f.tabIndex&&(g.tabindex=f.tabIndex),!g.placeholder&&f.placeholder&&(g.placeholder=f.placeholder),g.autofocus==null){var S=Le();g.autofocus=S==f||f.getAttribute("autofocus")!=null&&S==document.body}function _(){f.value=Z.getValue()}var T;if(f.form&&(ee(f.form,"submit",_),!g.leaveSubmitMethodAlone)){var D=f.form;T=D.submit;try{var Y=D.submit=function(){_(),D.submit=T,D.submit(),D.submit=Y}}catch{}}g.finishInit=function(bt){bt.save=_,bt.getTextArea=function(){return f},bt.toTextArea=function(){bt.toTextArea=isNaN,_(),f.parentNode.removeChild(bt.getWrapperElement()),f.style.display="",f.form&&(Je(f.form,"submit",_),g.leaveSubmitMethodAlone||typeof f.form.submit!="function"||(f.form.submit=T))}},f.style.display="none";var Z=Uo(function(bt){return f.parentNode.insertBefore(bt,f.nextSibling)},g);return Z},function(f){f.off=Je,f.on=ee,f.wheelEventPixels=di,f.Doc=Ea,f.splitLines=yo,f.countColumn=Xe,f.findColumn=se,f.isWordChar=ne,f.Pass=ye,f.signal=Et,f.Line=pn,f.changeEnd=yl,f.scrollbarModel=bp,f.Pos=cr,f.cmpPos=Mt,f.modes=Mo,f.mimeModes=ao,f.resolveMode=$r,f.getMode=co,f.modeExtensions=Jn,f.extendMode=Lo,f.copyState=fn,f.startState=bo,f.innerMode=Oo,f.commands=Sl,f.keyMap=Ji,f.keyName=tu,f.isModifierKey=Ic,f.lookupKey=xl,f.normalizeKeyMap=Yf,f.StringStream=En,f.SharedTextMarker=Mi,f.TextMarker=Bl,f.LineWidget=Qc,f.e_preventDefault=Wr,f.e_stopPropagation=zn,f.e_stop=lo,f.addClass=ar,f.contains=de,f.rmClass=Ht,f.keyNames=Ps}(Uo),Uo.version="5.65.6",Uo}()},629:(k,B,ct)=>{(function(vt){function dt(Tt){for(var jt={},zt=0;zt<Tt.length;++zt)jt[Tt[zt].toLowerCase()]=!0;return jt}vt.defineMode("css",function(Tt,jt){var zt=jt.inline;jt.propertyKeywords||(jt=vt.resolveMode("text/css"));var Ht,Dt,St=Tt.indentUnit,Vt=jt.tokenHooks,Me=jt.documentTypes||{},de=jt.mediaTypes||{},Le=jt.mediaFeatures||{},ar=jt.mediaValueKeywords||{},Er=jt.propertyKeywords||{},Nr=jt.nonStandardPropertyKeywords||{},Ar=jt.fontProperties||{},Fr=jt.counterDescriptors||{},Xe=jt.colorKeywords||{},at=jt.valueKeywords||{},kt=jt.allowNested,Gt=jt.lineComment,ye=jt.supportsAtComponent===!0,Ae=Tt.highlightNonStandardPropertyKeywords!==!1;function pt(Ft,_e){return Ht=_e,Ft}function le(Ft,_e){var Zt=Ft.next();if(Vt[Zt]){var gr=Vt[Zt](Ft,_e);if(gr!==!1)return gr}return Zt=="@"?(Ft.eatWhile(/[\w\\\-]/),pt("def",Ft.current())):Zt=="="||(Zt=="~"||Zt=="|")&&Ft.eat("=")?pt(null,"compare"):Zt=='"'||Zt=="'"?(_e.tokenize=se(Zt),_e.tokenize(Ft,_e)):Zt=="#"?(Ft.eatWhile(/[\w\\\-]/),pt("atom","hash")):Zt=="!"?(Ft.match(/^\s*\w*/),pt("keyword","important")):/\d/.test(Zt)||Zt=="."&&Ft.eat(/\d/)?(Ft.eatWhile(/[\w.%]/),pt("number","unit")):Zt!=="-"?/[,+>*\/]/.test(Zt)?pt(null,"select-op"):Zt=="."&&Ft.match(/^-?[_a-z][_a-z0-9-]*/i)?pt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Zt)?pt(null,Zt):Ft.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Ft.current())&&(_e.tokenize=or),pt("variable callee","variable")):/[\w\\\-]/.test(Zt)?(Ft.eatWhile(/[\w\\\-]/),pt("property","word")):pt(null,null):/[\d.]/.test(Ft.peek())?(Ft.eatWhile(/[\w.%]/),pt("number","unit")):Ft.match(/^-[\w\\\-]*/)?(Ft.eatWhile(/[\w\\\-]/),Ft.match(/^\s*:/,!1)?pt("variable-2","variable-definition"):pt("variable-2","variable")):Ft.match(/^\w+-/)?pt("meta","meta"):void 0}function se(Ft){return function(_e,Zt){for(var gr,fr=!1;(gr=_e.next())!=null;){if(gr==Ft&&!fr){Ft==")"&&_e.backUp(1);break}fr=!fr&&gr=="\\"}return(gr==Ft||!fr&&Ft!=")")&&(Zt.tokenize=null),pt("string","string")}}function or(Ft,_e){return Ft.next(),Ft.match(/^\s*[\"\')]/,!1)?_e.tokenize=null:_e.tokenize=se(")"),pt(null,"(")}function mr(Ft,_e,Zt){this.type=Ft,this.indent=_e,this.prev=Zt}function er(Ft,_e,Zt,gr){return Ft.context=new mr(Zt,_e.indentation()+(gr===!1?0:St),Ft.context),Zt}function Dr(Ft){return Ft.context.prev&&(Ft.context=Ft.context.prev),Ft.context.type}function rn(Ft,_e,Zt){return ne[Zt.context.type](Ft,_e,Zt)}function yt(Ft,_e,Zt,gr){for(var fr=gr||1;fr>0;fr--)Zt.context=Zt.context.prev;return rn(Ft,_e,Zt)}function Wt(Ft){var _e=Ft.current().toLowerCase();Dt=at.hasOwnProperty(_e)?"atom":Xe.hasOwnProperty(_e)?"keyword":"variable"}var ne={top:function(Ft,_e,Zt){if(Ft=="{")return er(Zt,_e,"block");if(Ft=="}"&&Zt.context.prev)return Dr(Zt);if(ye&&/@component/i.test(Ft))return er(Zt,_e,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Ft))return er(Zt,_e,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Ft))return er(Zt,_e,"atBlock");if(/^@(font-face|counter-style)/i.test(Ft))return Zt.stateArg=Ft,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Ft))return"keyframes";if(Ft&&Ft.charAt(0)=="@")return er(Zt,_e,"at");if(Ft=="hash")Dt="builtin";else if(Ft=="word")Dt="tag";else{if(Ft=="variable-definition")return"maybeprop";if(Ft=="interpolation")return er(Zt,_e,"interpolation");if(Ft==":")return"pseudo";if(kt&&Ft=="(")return er(Zt,_e,"parens")}return Zt.context.type},block:function(Ft,_e,Zt){if(Ft=="word"){var gr=_e.current().toLowerCase();return Er.hasOwnProperty(gr)?(Dt="property","maybeprop"):Nr.hasOwnProperty(gr)?(Dt=Ae?"string-2":"property","maybeprop"):kt?(Dt=_e.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Dt+=" error","maybeprop")}return Ft=="meta"?"block":kt||Ft!="hash"&&Ft!="qualifier"?ne.top(Ft,_e,Zt):(Dt="error","block")},maybeprop:function(Ft,_e,Zt){return Ft==":"?er(Zt,_e,"prop"):rn(Ft,_e,Zt)},prop:function(Ft,_e,Zt){if(Ft==";")return Dr(Zt);if(Ft=="{"&&kt)return er(Zt,_e,"propBlock");if(Ft=="}"||Ft=="{")return yt(Ft,_e,Zt);if(Ft=="(")return er(Zt,_e,"parens");if(Ft!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(_e.current())){if(Ft=="word")Wt(_e);else if(Ft=="interpolation")return er(Zt,_e,"interpolation")}else Dt+=" error";return"prop"},propBlock:function(Ft,_e,Zt){return Ft=="}"?Dr(Zt):Ft=="word"?(Dt="property","maybeprop"):Zt.context.type},parens:function(Ft,_e,Zt){return Ft=="{"||Ft=="}"?yt(Ft,_e,Zt):Ft==")"?Dr(Zt):Ft=="("?er(Zt,_e,"parens"):Ft=="interpolation"?er(Zt,_e,"interpolation"):(Ft=="word"&&Wt(_e),"parens")},pseudo:function(Ft,_e,Zt){return Ft=="meta"?"pseudo":Ft=="word"?(Dt="variable-3",Zt.context.type):rn(Ft,_e,Zt)},documentTypes:function(Ft,_e,Zt){return Ft=="word"&&Me.hasOwnProperty(_e.current())?(Dt="tag",Zt.context.type):ne.atBlock(Ft,_e,Zt)},atBlock:function(Ft,_e,Zt){if(Ft=="(")return er(Zt,_e,"atBlock_parens");if(Ft=="}"||Ft==";")return yt(Ft,_e,Zt);if(Ft=="{")return Dr(Zt)&&er(Zt,_e,kt?"block":"top");if(Ft=="interpolation")return er(Zt,_e,"interpolation");if(Ft=="word"){var gr=_e.current().toLowerCase();Dt=gr=="only"||gr=="not"||gr=="and"||gr=="or"?"keyword":de.hasOwnProperty(gr)?"attribute":Le.hasOwnProperty(gr)?"property":ar.hasOwnProperty(gr)?"keyword":Er.hasOwnProperty(gr)?"property":Nr.hasOwnProperty(gr)?Ae?"string-2":"property":at.hasOwnProperty(gr)?"atom":Xe.hasOwnProperty(gr)?"keyword":"error"}return Zt.context.type},atComponentBlock:function(Ft,_e,Zt){return Ft=="}"?yt(Ft,_e,Zt):Ft=="{"?Dr(Zt)&&er(Zt,_e,kt?"block":"top",!1):(Ft=="word"&&(Dt="error"),Zt.context.type)},atBlock_parens:function(Ft,_e,Zt){return Ft==")"?Dr(Zt):Ft=="{"||Ft=="}"?yt(Ft,_e,Zt,2):ne.atBlock(Ft,_e,Zt)},restricted_atBlock_before:function(Ft,_e,Zt){return Ft=="{"?er(Zt,_e,"restricted_atBlock"):Ft=="word"&&Zt.stateArg=="@counter-style"?(Dt="variable","restricted_atBlock_before"):rn(Ft,_e,Zt)},restricted_atBlock:function(Ft,_e,Zt){return Ft=="}"?(Zt.stateArg=null,Dr(Zt)):Ft=="word"?(Dt=Zt.stateArg=="@font-face"&&!Ar.hasOwnProperty(_e.current().toLowerCase())||Zt.stateArg=="@counter-style"&&!Fr.hasOwnProperty(_e.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(Ft,_e,Zt){return Ft=="word"?(Dt="variable","keyframes"):Ft=="{"?er(Zt,_e,"top"):rn(Ft,_e,Zt)},at:function(Ft,_e,Zt){return Ft==";"?Dr(Zt):Ft=="{"||Ft=="}"?yt(Ft,_e,Zt):(Ft=="word"?Dt="tag":Ft=="hash"&&(Dt="builtin"),"at")},interpolation:function(Ft,_e,Zt){return Ft=="}"?Dr(Zt):Ft=="{"||Ft==";"?yt(Ft,_e,Zt):(Ft=="word"?Dt="variable":Ft!="variable"&&Ft!="("&&Ft!=")"&&(Dt="error"),"interpolation")}};return{startState:function(Ft){return{tokenize:null,state:zt?"block":"top",stateArg:null,context:new mr(zt?"block":"top",Ft||0,null)}},token:function(Ft,_e){if(!_e.tokenize&&Ft.eatSpace())return null;var Zt=(_e.tokenize||le)(Ft,_e);return Zt&&typeof Zt=="object"&&(Ht=Zt[1],Zt=Zt[0]),Dt=Zt,Ht!="comment"&&(_e.state=ne[_e.state](Ht,Ft,_e)),Dt},indent:function(Ft,_e){var Zt=Ft.context,gr=_e&&_e.charAt(0),fr=Zt.indent;return Zt.type!="prop"||gr!="}"&&gr!=")"||(Zt=Zt.prev),Zt.prev&&(gr!="}"||Zt.type!="block"&&Zt.type!="top"&&Zt.type!="interpolation"&&Zt.type!="restricted_atBlock"?(gr!=")"||Zt.type!="parens"&&Zt.type!="atBlock_parens")&&(gr!="{"||Zt.type!="at"&&Zt.type!="atBlock")||(fr=Math.max(0,Zt.indent-St)):fr=(Zt=Zt.prev).indent),fr},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Gt,fold:"brace"}});var H=["domain","regexp","url","url-prefix"],R=dt(H),I=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],N=dt(I),$=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],F=dt($),V=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],U=dt(V),it=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],X=dt(it),tt=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],xt=dt(tt),Q=dt(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),_t=dt(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),W=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],It=dt(W),$t=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Yt=dt($t),Ne=H.concat(I).concat($).concat(V).concat(it).concat(tt).concat(W).concat($t);function et(Tt,jt){for(var zt,Ht=!1;(zt=Tt.next())!=null;){if(Ht&&zt=="/"){jt.tokenize=null;break}Ht=zt=="*"}return["comment","comment"]}vt.registerHelper("hintWords","css",Ne),vt.defineMIME("text/css",{documentTypes:R,mediaTypes:N,mediaFeatures:F,mediaValueKeywords:U,propertyKeywords:X,nonStandardPropertyKeywords:xt,fontProperties:Q,counterDescriptors:_t,colorKeywords:It,valueKeywords:Yt,tokenHooks:{"/":function(Tt,jt){return!!Tt.eat("*")&&(jt.tokenize=et,et(Tt,jt))}},name:"css"}),vt.defineMIME("text/x-scss",{mediaTypes:N,mediaFeatures:F,mediaValueKeywords:U,propertyKeywords:X,nonStandardPropertyKeywords:xt,colorKeywords:It,valueKeywords:Yt,fontProperties:Q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Tt,jt){return Tt.eat("/")?(Tt.skipToEnd(),["comment","comment"]):Tt.eat("*")?(jt.tokenize=et,et(Tt,jt)):["operator","operator"]},":":function(Tt){return!!Tt.match(/^\s*\{/,!1)&&[null,null]},$:function(Tt){return Tt.match(/^[\w-]+/),Tt.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(Tt){return!!Tt.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),vt.defineMIME("text/x-less",{mediaTypes:N,mediaFeatures:F,mediaValueKeywords:U,propertyKeywords:X,nonStandardPropertyKeywords:xt,colorKeywords:It,valueKeywords:Yt,fontProperties:Q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Tt,jt){return Tt.eat("/")?(Tt.skipToEnd(),["comment","comment"]):Tt.eat("*")?(jt.tokenize=et,et(Tt,jt)):["operator","operator"]},"@":function(Tt){return Tt.eat("{")?[null,"interpolation"]:!Tt.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(Tt.eatWhile(/[\w\\\-]/),Tt.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),vt.defineMIME("text/x-gss",{documentTypes:R,mediaTypes:N,mediaFeatures:F,propertyKeywords:X,nonStandardPropertyKeywords:xt,fontProperties:Q,counterDescriptors:_t,colorKeywords:It,valueKeywords:Yt,supportsAtComponent:!0,tokenHooks:{"/":function(Tt,jt){return!!Tt.eat("*")&&(jt.tokenize=et,et(Tt,jt))}},name:"css",helperType:"gss"})})(ct(631))},531:(k,B,ct)=>{(function(vt){var dt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},H={};function R(F,V){var U=F.match(function(it){return H[it]||(H[it]=new RegExp("\\s+"+it+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}(V));return U?/^\s*(.*?)\s*$/.exec(U[2])[1]:""}function I(F,V){return new RegExp((V?"^":"")+"</\\s*"+F+"\\s*>","i")}function N(F,V){for(var U in F)for(var it=V[U]||(V[U]=[]),X=F[U],tt=X.length-1;tt>=0;tt--)it.unshift(X[tt])}function $(F,V){for(var U=0;U<F.length;U++){var it=F[U];if(!it[0]||it[1].test(R(V,it[0])))return it[2]}}vt.defineMode("htmlmixed",function(F,V){var U=vt.getMode(F,{name:"xml",htmlMode:!0,multilineTagIndentFactor:V.multilineTagIndentFactor,multilineTagIndentPastTag:V.multilineTagIndentPastTag,allowMissingTagName:V.allowMissingTagName}),it={},X=V&&V.tags,tt=V&&V.scriptTypes;if(N(dt,it),X&&N(X,it),tt)for(var xt=tt.length-1;xt>=0;xt--)it.script.unshift(["type",tt[xt].matches,tt[xt].mode]);function Q(_t,W){var It,$t=U.token(_t,W.htmlState),Yt=/\btag\b/.test($t);if(Yt&&!/[<>\s\/]/.test(_t.current())&&(It=W.htmlState.tagName&&W.htmlState.tagName.toLowerCase())&&it.hasOwnProperty(It))W.inTag=It+" ";else if(W.inTag&&Yt&&/>$/.test(_t.current())){var Ne=/^([\S]+) (.*)/.exec(W.inTag);W.inTag=null;var et=_t.current()==">"&&$(it[Ne[1]],Ne[2]),Tt=vt.getMode(F,et),jt=I(Ne[1],!0),zt=I(Ne[1],!1);W.token=function(Ht,Dt){return Ht.match(jt,!1)?(Dt.token=Q,Dt.localState=Dt.localMode=null,null):function(St,Vt,Me){var de=St.current(),Le=de.search(Vt);return Le>-1?St.backUp(de.length-Le):de.match(/<\/?$/)&&(St.backUp(de.length),St.match(Vt,!1)||St.match(de)),Me}(Ht,zt,Dt.localMode.token(Ht,Dt.localState))},W.localMode=Tt,W.localState=vt.startState(Tt,U.indent(W.htmlState,"",""))}else W.inTag&&(W.inTag+=_t.current(),_t.eol()&&(W.inTag+=" "));return $t}return{startState:function(){return{token:Q,inTag:null,localMode:null,localState:null,htmlState:vt.startState(U)}},copyState:function(_t){var W;return _t.localState&&(W=vt.copyState(_t.localMode,_t.localState)),{token:_t.token,inTag:_t.inTag,localMode:_t.localMode,localState:W,htmlState:vt.copyState(U,_t.htmlState)}},token:function(_t,W){return W.token(_t,W)},indent:function(_t,W,It){return!_t.localMode||/^\s*<\//.test(W)?U.indent(_t.htmlState,W,It):_t.localMode.indent?_t.localMode.indent(_t.localState,W,It):vt.Pass},innerMode:function(_t){return{state:_t.localState||_t.htmlState,mode:_t.localMode||U}}}},"xml","javascript","css"),vt.defineMIME("text/html","htmlmixed")})(ct(631),ct(589),ct(876),ct(629))},876:(k,B,ct)=>{(function(vt){vt.defineMode("javascript",function(dt,H){var R,I,N=dt.indentUnit,$=H.statementIndent,F=H.jsonld,V=H.json||F,U=H.trackScope!==!1,it=H.typescript,X=H.wordCharacters||/[\w$\xa1-\uffff]/,tt=function(){function Mt(Wn){return{type:Wn,style:"keyword"}}var xe=Mt("keyword a"),lr=Mt("keyword b"),Yr=Mt("keyword c"),en=Mt("keyword d"),gn=Mt("operator"),Mr={type:"atom",style:"atom"};return{if:Mt("if"),while:xe,with:xe,else:lr,do:lr,try:lr,finally:lr,return:en,break:en,continue:en,new:Mt("new"),delete:Yr,void:Yr,throw:Yr,debugger:Mt("debugger"),var:Mt("var"),const:Mt("var"),let:Mt("var"),function:Mt("function"),catch:Mt("catch"),for:Mt("for"),switch:Mt("switch"),case:Mt("case"),default:Mt("default"),in:gn,typeof:gn,instanceof:gn,true:Mr,false:Mr,null:Mr,undefined:Mr,NaN:Mr,Infinity:Mr,this:Mt("this"),class:Mt("class"),super:Mt("atom"),yield:Yr,export:Mt("export"),import:Mt("import"),extends:Yr,await:Yr}}(),xt=/[+\-*&%=<>!?|~^@]/,Q=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function _t(Mt,xe,lr){return R=Mt,I=lr,xe}function W(Mt,xe){var lr=Mt.next();if(lr=='"'||lr=="'")return xe.tokenize=function(gn){return function(Mr,Wn){var wo,$o=!1;if(F&&Mr.peek()=="@"&&Mr.match(Q))return Wn.tokenize=W,_t("jsonld-keyword","meta");for(;(wo=Mr.next())!=null&&(wo!=gn||$o);)$o=!$o&&wo=="\\";return $o||(Wn.tokenize=W),_t("string","string")}}(lr),xe.tokenize(Mt,xe);if(lr=="."&&Mt.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return _t("number","number");if(lr=="."&&Mt.match(".."))return _t("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(lr))return _t(lr);if(lr=="="&&Mt.eat(">"))return _t("=>","operator");if(lr=="0"&&Mt.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return _t("number","number");if(/\d/.test(lr))return Mt.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),_t("number","number");if(lr=="/")return Mt.eat("*")?(xe.tokenize=It,It(Mt,xe)):Mt.eat("/")?(Mt.skipToEnd(),_t("comment","comment")):cr(Mt,xe,1)?(function(gn){for(var Mr,Wn=!1,wo=!1;(Mr=gn.next())!=null;){if(!Wn){if(Mr=="/"&&!wo)return;Mr=="["?wo=!0:wo&&Mr=="]"&&(wo=!1)}Wn=!Wn&&Mr=="\\"}}(Mt),Mt.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),_t("regexp","string-2")):(Mt.eat("="),_t("operator","operator",Mt.current()));if(lr=="`")return xe.tokenize=$t,$t(Mt,xe);if(lr=="#"&&Mt.peek()=="!")return Mt.skipToEnd(),_t("meta","meta");if(lr=="#"&&Mt.eatWhile(X))return _t("variable","property");if(lr=="<"&&Mt.match("!--")||lr=="-"&&Mt.match("->")&&!/\S/.test(Mt.string.slice(0,Mt.start)))return Mt.skipToEnd(),_t("comment","comment");if(xt.test(lr))return lr==">"&&xe.lexical&&xe.lexical.type==">"||(Mt.eat("=")?lr!="!"&&lr!="="||Mt.eat("="):/[<>*+\-|&?]/.test(lr)&&(Mt.eat(lr),lr==">"&&Mt.eat(lr))),lr=="?"&&Mt.eat(".")?_t("."):_t("operator","operator",Mt.current());if(X.test(lr)){Mt.eatWhile(X);var Yr=Mt.current();if(xe.lastType!="."){if(tt.propertyIsEnumerable(Yr)){var en=tt[Yr];return _t(en.type,en.style,Yr)}if(Yr=="async"&&Mt.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return _t("async","keyword",Yr)}return _t("variable","variable",Yr)}}function It(Mt,xe){for(var lr,Yr=!1;lr=Mt.next();){if(lr=="/"&&Yr){xe.tokenize=W;break}Yr=lr=="*"}return _t("comment","comment")}function $t(Mt,xe){for(var lr,Yr=!1;(lr=Mt.next())!=null;){if(!Yr&&(lr=="`"||lr=="$"&&Mt.eat("{"))){xe.tokenize=W;break}Yr=!Yr&&lr=="\\"}return _t("quasi","string-2",Mt.current())}var Yt="([{}])";function Ne(Mt,xe){xe.fatArrowAt&&(xe.fatArrowAt=null);var lr=Mt.string.indexOf("=>",Mt.start);if(!(lr<0)){if(it){var Yr=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Mt.string.slice(Mt.start,lr));Yr&&(lr=Yr.index)}for(var en=0,gn=!1,Mr=lr-1;Mr>=0;--Mr){var Wn=Mt.string.charAt(Mr),wo=Yt.indexOf(Wn);if(wo>=0&&wo<3){if(!en){++Mr;break}if(--en==0){Wn=="("&&(gn=!0);break}}else if(wo>=3&&wo<6)++en;else if(X.test(Wn))gn=!0;else if(/["'\/`]/.test(Wn))for(;;--Mr){if(Mr==0)return;if(Mt.string.charAt(Mr-1)==Wn&&Mt.string.charAt(Mr-2)!="\\"){Mr--;break}}else if(gn&&!en){++Mr;break}}gn&&!en&&(xe.fatArrowAt=Mr)}}var et={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Tt(Mt,xe,lr,Yr,en,gn){this.indented=Mt,this.column=xe,this.type=lr,this.prev=en,this.info=gn,Yr!=null&&(this.align=Yr)}function jt(Mt,xe){if(!U)return!1;for(var lr=Mt.localVars;lr;lr=lr.next)if(lr.name==xe)return!0;for(var Yr=Mt.context;Yr;Yr=Yr.prev)for(lr=Yr.vars;lr;lr=lr.next)if(lr.name==xe)return!0}function zt(Mt,xe,lr,Yr,en){var gn=Mt.cc;for(Ht.state=Mt,Ht.stream=en,Ht.marked=null,Ht.cc=gn,Ht.style=xe,Mt.lexical.hasOwnProperty("align")||(Mt.lexical.align=!0);;)if((gn.length?gn.pop():V?pt:ye)(lr,Yr)){for(;gn.length&&gn[gn.length-1].lex;)gn.pop()();return Ht.marked?Ht.marked:lr=="variable"&&jt(Mt,Yr)?"variable-2":xe}}var Ht={state:null,column:null,marked:null,cc:null};function Dt(){for(var Mt=arguments.length-1;Mt>=0;Mt--)Ht.cc.push(arguments[Mt])}function St(){return Dt.apply(null,arguments),!0}function Vt(Mt,xe){for(var lr=xe;lr;lr=lr.next)if(lr.name==Mt)return!0;return!1}function Me(Mt){var xe=Ht.state;if(Ht.marked="def",U){if(xe.context){if(xe.lexical.info=="var"&&xe.context&&xe.context.block){var lr=de(Mt,xe.context);if(lr!=null)return void(xe.context=lr)}else if(!Vt(Mt,xe.localVars))return void(xe.localVars=new Er(Mt,xe.localVars))}H.globalVars&&!Vt(Mt,xe.globalVars)&&(xe.globalVars=new Er(Mt,xe.globalVars))}}function de(Mt,xe){if(xe){if(xe.block){var lr=de(Mt,xe.prev);return lr?lr==xe.prev?xe:new ar(lr,xe.vars,!0):null}return Vt(Mt,xe.vars)?xe:new ar(xe.prev,new Er(Mt,xe.vars),!1)}return null}function Le(Mt){return Mt=="public"||Mt=="private"||Mt=="protected"||Mt=="abstract"||Mt=="readonly"}function ar(Mt,xe,lr){this.prev=Mt,this.vars=xe,this.block=lr}function Er(Mt,xe){this.name=Mt,this.next=xe}var Nr=new Er("this",new Er("arguments",null));function Ar(){Ht.state.context=new ar(Ht.state.context,Ht.state.localVars,!1),Ht.state.localVars=Nr}function Fr(){Ht.state.context=new ar(Ht.state.context,Ht.state.localVars,!0),Ht.state.localVars=null}function Xe(){Ht.state.localVars=Ht.state.context.vars,Ht.state.context=Ht.state.context.prev}function at(Mt,xe){var lr=function(){var Yr=Ht.state,en=Yr.indented;if(Yr.lexical.type=="stat")en=Yr.lexical.indented;else for(var gn=Yr.lexical;gn&&gn.type==")"&&gn.align;gn=gn.prev)en=gn.indented;Yr.lexical=new Tt(en,Ht.stream.column(),Mt,null,Yr.lexical,xe)};return lr.lex=!0,lr}function kt(){var Mt=Ht.state;Mt.lexical.prev&&(Mt.lexical.type==")"&&(Mt.indented=Mt.lexical.indented),Mt.lexical=Mt.lexical.prev)}function Gt(Mt){return function xe(lr){return lr==Mt?St():Mt==";"||lr=="}"||lr==")"||lr=="]"?Dt():St(xe)}}function ye(Mt,xe){return Mt=="var"?St(at("vardef",xe),ro,Gt(";"),kt):Mt=="keyword a"?St(at("form"),se,ye,kt):Mt=="keyword b"?St(at("form"),ye,kt):Mt=="keyword d"?Ht.stream.match(/^\s*$/,!1)?St():St(at("stat"),mr,Gt(";"),kt):Mt=="debugger"?St(Gt(";")):Mt=="{"?St(at("}"),Fr,Un,kt,Xe):Mt==";"?St():Mt=="if"?(Ht.state.lexical.info=="else"&&Ht.state.cc[Ht.state.cc.length-1]==kt&&Ht.state.cc.pop()(),St(at("form"),se,ye,kt,yo)):Mt=="function"?St(Mo):Mt=="for"?St(at("form"),Fr,So,ye,Xe,kt):Mt=="class"||it&&xe=="interface"?(Ht.marked="keyword",St(at("form",Mt=="class"?Mt:xe),Jn,kt)):Mt=="variable"?it&&xe=="declare"?(Ht.marked="keyword",St(ye)):it&&(xe=="module"||xe=="enum"||xe=="type")&&Ht.stream.match(/^\s*\w/,!1)?(Ht.marked="keyword",xe=="enum"?St(Nn):xe=="type"?St(Xn,Gt("operator"),Et,Gt(";")):St(at("form"),In,Gt("{"),at("}"),Un,kt,kt)):it&&xe=="namespace"?(Ht.marked="keyword",St(at("form"),pt,ye,kt)):it&&xe=="abstract"?(Ht.marked="keyword",St(ye)):St(at("stat"),Zt):Mt=="switch"?St(at("form"),se,Gt("{"),at("}","switch"),Fr,Un,kt,kt,Xe):Mt=="case"?St(pt,Gt(":")):Mt=="default"?St(Gt(":")):Mt=="catch"?St(at("form"),Ar,Ae,ye,kt,Xe):Mt=="export"?St(at("stat"),bo,kt):Mt=="import"?St(at("stat"),rt,kt):Mt=="async"?St(ye):xe=="@"?St(pt,ye):Dt(at("stat"),pt,Gt(";"),kt)}function Ae(Mt){if(Mt=="(")return St($r,Gt(")"))}function pt(Mt,xe){return or(Mt,xe,!1)}function le(Mt,xe){return or(Mt,xe,!0)}function se(Mt){return Mt!="("?Dt():St(at(")"),mr,Gt(")"),kt)}function or(Mt,xe,lr){if(Ht.state.fatArrowAt==Ht.stream.start){var Yr=lr?ne:Wt;if(Mt=="(")return St(Ar,at(")"),wr($r,")"),kt,Gt("=>"),Yr,Xe);if(Mt=="variable")return Dt(Ar,In,Gt("=>"),Yr,Xe)}var en=lr?Dr:er;return et.hasOwnProperty(Mt)?St(en):Mt=="function"?St(Mo,en):Mt=="class"||it&&xe=="interface"?(Ht.marked="keyword",St(at("form"),co,kt)):Mt=="keyword c"||Mt=="async"?St(lr?le:pt):Mt=="("?St(at(")"),mr,Gt(")"),kt,en):Mt=="operator"||Mt=="spread"?St(lr?le:pt):Mt=="["?St(at("]"),wn,kt,en):Mt=="{"?tr(fr,"}",null,en):Mt=="quasi"?Dt(rn,en):Mt=="new"?St(function(gn){return function(Mr){return Mr=="."?St(gn?_e:Ft):Mr=="variable"&&it?St(lo,gn?Dr:er):Dt(gn?le:pt)}}(lr)):St()}function mr(Mt){return Mt.match(/[;\}\)\],]/)?Dt():Dt(pt)}function er(Mt,xe){return Mt==","?St(mr):Dr(Mt,xe,!1)}function Dr(Mt,xe,lr){var Yr=lr==0?er:Dr,en=lr==0?pt:le;return Mt=="=>"?St(Ar,lr?ne:Wt,Xe):Mt=="operator"?/\+\+|--/.test(xe)||it&&xe=="!"?St(Yr):it&&xe=="<"&&Ht.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?St(at(">"),wr(Et,">"),kt,Yr):xe=="?"?St(pt,Gt(":"),en):St(en):Mt=="quasi"?Dt(rn,Yr):Mt!=";"?Mt=="("?tr(le,")","call",Yr):Mt=="."?St(gr,Yr):Mt=="["?St(at("]"),mr,Gt("]"),kt,Yr):it&&xe=="as"?(Ht.marked="keyword",St(Et,Yr)):Mt=="regexp"?(Ht.state.lastType=Ht.marked="operator",Ht.stream.backUp(Ht.stream.pos-Ht.stream.start-1),St(en)):void 0:void 0}function rn(Mt,xe){return Mt!="quasi"?Dt():xe.slice(xe.length-2)!="${"?St(rn):St(mr,yt)}function yt(Mt){if(Mt=="}")return Ht.marked="string-2",Ht.state.tokenize=$t,St(rn)}function Wt(Mt){return Ne(Ht.stream,Ht.state),Dt(Mt=="{"?ye:pt)}function ne(Mt){return Ne(Ht.stream,Ht.state),Dt(Mt=="{"?ye:le)}function Ft(Mt,xe){if(xe=="target")return Ht.marked="keyword",St(er)}function _e(Mt,xe){if(xe=="target")return Ht.marked="keyword",St(Dr)}function Zt(Mt){return Mt==":"?St(kt,ye):Dt(er,Gt(";"),kt)}function gr(Mt){if(Mt=="variable")return Ht.marked="property",St()}function fr(Mt,xe){return Mt=="async"?(Ht.marked="property",St(fr)):Mt=="variable"||Ht.style=="keyword"?(Ht.marked="property",xe=="get"||xe=="set"?St(nn):(it&&Ht.state.fatArrowAt==Ht.stream.start&&(lr=Ht.stream.match(/^\s*:\s*/,!1))&&(Ht.state.fatArrowAt=Ht.stream.pos+lr[0].length),St(tn))):Mt=="number"||Mt=="string"?(Ht.marked=F?"property":Ht.style+" property",St(tn)):Mt=="jsonld-keyword"?St(tn):it&&Le(xe)?(Ht.marked="keyword",St(fr)):Mt=="["?St(pt,Rt,Gt("]"),tn):Mt=="spread"?St(le,tn):xe=="*"?(Ht.marked="keyword",St(fr)):Mt==":"?Dt(tn):void 0;var lr}function nn(Mt){return Mt!="variable"?Dt(tn):(Ht.marked="property",St(Mo))}function tn(Mt){return Mt==":"?St(le):Mt=="("?Dt(Mo):void 0}function wr(Mt,xe,lr){function Yr(en,gn){if(lr?lr.indexOf(en)>-1:en==","){var Mr=Ht.state.lexical;return Mr.info=="call"&&(Mr.pos=(Mr.pos||0)+1),St(function(Wn,wo){return Wn==xe||wo==xe?Dt():Dt(Mt)},Yr)}return en==xe||gn==xe?St():lr&&lr.indexOf(";")>-1?Dt(Mt):St(Gt(xe))}return function(en,gn){return en==xe||gn==xe?St():Dt(Mt,Yr)}}function tr(Mt,xe,lr){for(var Yr=3;Yr<arguments.length;Yr++)Ht.cc.push(arguments[Yr]);return St(at(xe,lr),wr(Mt,xe),kt)}function Un(Mt){return Mt=="}"?St():Dt(ye,Un)}function Rt(Mt,xe){if(it){if(Mt==":")return St(Et);if(xe=="?")return St(Rt)}}function ee(Mt,xe){if(it&&(Mt==":"||xe=="in"))return St(Et)}function je(Mt){if(it&&Mt==":")return Ht.stream.match(/^\s*\w+\s+is\b/,!1)?St(pt,Je,Et):St(Et)}function Je(Mt,xe){if(xe=="is")return Ht.marked="keyword",St()}function Et(Mt,xe){return xe=="keyof"||xe=="typeof"||xe=="infer"||xe=="readonly"?(Ht.marked="keyword",St(xe=="typeof"?le:Et)):Mt=="variable"||xe=="void"?(Ht.marked="type",St(Dn)):xe=="|"||xe=="&"?St(Et):Mt=="string"||Mt=="number"||Mt=="atom"?St(Dn):Mt=="["?St(at("]"),wr(Et,"]",","),kt,Dn):Mt=="{"?St(at("}"),Pe,kt,Dn):Mt=="("?St(wr(zn,")"),fe,Dn):Mt=="<"?St(wr(Et,">"),Et):Mt=="quasi"?Dt(Cr,Dn):void 0}function fe(Mt){if(Mt=="=>")return St(Et)}function Pe(Mt){return Mt.match(/[\}\)\]]/)?St():Mt==","||Mt==";"?St(Pe):Dt(Ye,Pe)}function Ye(Mt,xe){return Mt=="variable"||Ht.style=="keyword"?(Ht.marked="property",St(Ye)):xe=="?"||Mt=="number"||Mt=="string"?St(Ye):Mt==":"?St(Et):Mt=="["?St(Gt("variable"),ee,Gt("]"),Ye):Mt=="("?Dt(ao,Ye):Mt.match(/[;\}\)\],]/)?void 0:St()}function Cr(Mt,xe){return Mt!="quasi"?Dt():xe.slice(xe.length-2)!="${"?St(Cr):St(Et,Wr)}function Wr(Mt){if(Mt=="}")return Ht.marked="string-2",Ht.state.tokenize=$t,St(Cr)}function zn(Mt,xe){return Mt=="variable"&&Ht.stream.match(/^\s*[?:]/,!1)||xe=="?"?St(zn):Mt==":"?St(Et):Mt=="spread"?St(zn):Dt(Et)}function Dn(Mt,xe){return xe=="<"?St(at(">"),wr(Et,">"),kt,Dn):xe=="|"||Mt=="."||xe=="&"?St(Et):Mt=="["?St(Et,Gt("]"),Dn):xe=="extends"||xe=="implements"?(Ht.marked="keyword",St(Et)):xe=="?"?St(Et,Gt(":"),Et):void 0}function lo(Mt,xe){if(xe=="<")return St(at(">"),wr(Et,">"),kt,Dn)}function ho(){return Dt(Et,vn)}function vn(Mt,xe){if(xe=="=")return St(Et)}function ro(Mt,xe){return xe=="enum"?(Ht.marked="keyword",St(Nn)):Dt(In,Rt,Fo,Co)}function In(Mt,xe){return it&&Le(xe)?(Ht.marked="keyword",St(In)):Mt=="variable"?(Me(xe),St()):Mt=="spread"?St(In):Mt=="["?tr(go,"]"):Mt=="{"?tr(Yo,"}"):void 0}function Yo(Mt,xe){return Mt!="variable"||Ht.stream.match(/^\s*:/,!1)?(Mt=="variable"&&(Ht.marked="property"),Mt=="spread"?St(In):Mt=="}"?Dt():Mt=="["?St(pt,Gt("]"),Gt(":"),Yo):St(Gt(":"),In,Fo)):(Me(xe),St(Fo))}function go(){return Dt(In,Fo)}function Fo(Mt,xe){if(xe=="=")return St(le)}function Co(Mt){if(Mt==",")return St(ro)}function yo(Mt,xe){if(Mt=="keyword b"&&xe=="else")return St(at("form","else"),ye,kt)}function So(Mt,xe){return xe=="await"?St(So):Mt=="("?St(at(")"),Gi,kt):void 0}function Gi(Mt){return Mt=="var"?St(ro,Wo):Mt=="variable"?St(Wo):Dt(Wo)}function Wo(Mt,xe){return Mt==")"?St():Mt==";"?St(Wo):xe=="in"||xe=="of"?(Ht.marked="keyword",St(pt,Wo)):Dt(pt,Wo)}function Mo(Mt,xe){return xe=="*"?(Ht.marked="keyword",St(Mo)):Mt=="variable"?(Me(xe),St(Mo)):Mt=="("?St(Ar,at(")"),wr($r,")"),kt,je,ye,Xe):it&&xe=="<"?St(at(">"),wr(ho,">"),kt,Mo):void 0}function ao(Mt,xe){return xe=="*"?(Ht.marked="keyword",St(ao)):Mt=="variable"?(Me(xe),St(ao)):Mt=="("?St(Ar,at(")"),wr($r,")"),kt,je,Xe):it&&xe=="<"?St(at(">"),wr(ho,">"),kt,ao):void 0}function Xn(Mt,xe){return Mt=="keyword"||Mt=="variable"?(Ht.marked="type",St(Xn)):xe=="<"?St(at(">"),wr(ho,">"),kt):void 0}function $r(Mt,xe){return xe=="@"&&St(pt,$r),Mt=="spread"?St($r):it&&Le(xe)?(Ht.marked="keyword",St($r)):it&&Mt=="this"?St(Rt,Fo):Dt(In,Rt,Fo)}function co(Mt,xe){return Mt=="variable"?Jn(Mt,xe):Lo(Mt,xe)}function Jn(Mt,xe){if(Mt=="variable")return Me(xe),St(Lo)}function Lo(Mt,xe){return xe=="<"?St(at(">"),wr(ho,">"),kt,Lo):xe=="extends"||xe=="implements"||it&&Mt==","?(xe=="implements"&&(Ht.marked="keyword"),St(it?Et:pt,Lo)):Mt=="{"?St(at("}"),fn,kt):void 0}function fn(Mt,xe){return Mt=="async"||Mt=="variable"&&(xe=="static"||xe=="get"||xe=="set"||it&&Le(xe))&&Ht.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Ht.marked="keyword",St(fn)):Mt=="variable"||Ht.style=="keyword"?(Ht.marked="property",St(Oo,fn)):Mt=="number"||Mt=="string"?St(Oo,fn):Mt=="["?St(pt,Rt,Gt("]"),Oo,fn):xe=="*"?(Ht.marked="keyword",St(fn)):it&&Mt=="("?Dt(ao,fn):Mt==";"||Mt==","?St(fn):Mt=="}"?St():xe=="@"?St(pt,fn):void 0}function Oo(Mt,xe){if(xe=="!"||xe=="?")return St(Oo);if(Mt==":")return St(Et,Fo);if(xe=="=")return St(le);var lr=Ht.state.lexical.prev;return Dt(lr&&lr.info=="interface"?ao:Mo)}function bo(Mt,xe){return xe=="*"?(Ht.marked="keyword",St(Hr,Gt(";"))):xe=="default"?(Ht.marked="keyword",St(pt,Gt(";"))):Mt=="{"?St(wr(En,"}"),Hr,Gt(";")):Dt(ye)}function En(Mt,xe){return xe=="as"?(Ht.marked="keyword",St(Gt("variable"))):Mt=="variable"?Dt(le,En):void 0}function rt(Mt){return Mt=="string"?St():Mt=="("?Dt(pt):Mt=="."?Dt(er):Dt(Xt,ir,Hr)}function Xt(Mt,xe){return Mt=="{"?tr(Xt,"}"):(Mt=="variable"&&Me(xe),xe=="*"&&(Ht.marked="keyword"),St(pr))}function ir(Mt){if(Mt==",")return St(Xt,ir)}function pr(Mt,xe){if(xe=="as")return Ht.marked="keyword",St(Xt)}function Hr(Mt,xe){if(xe=="from")return Ht.marked="keyword",St(pt)}function wn(Mt){return Mt=="]"?St():Dt(wr(le,"]"))}function Nn(){return Dt(at("form"),In,Gt("{"),at("}"),wr(Xr,"}"),kt,kt)}function Xr(){return Dt(In,Fo)}function cr(Mt,xe,lr){return xe.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xe.lastType)||xe.lastType=="quasi"&&/\{\s*$/.test(Mt.string.slice(0,Mt.pos-(lr||0)))}return Ar.lex=Fr.lex=!0,Xe.lex=!0,kt.lex=!0,{startState:function(Mt){var xe={tokenize:W,lastType:"sof",cc:[],lexical:new Tt((Mt||0)-N,0,"block",!1),localVars:H.localVars,context:H.localVars&&new ar(null,null,!1),indented:Mt||0};return H.globalVars&&typeof H.globalVars=="object"&&(xe.globalVars=H.globalVars),xe},token:function(Mt,xe){if(Mt.sol()&&(xe.lexical.hasOwnProperty("align")||(xe.lexical.align=!1),xe.indented=Mt.indentation(),Ne(Mt,xe)),xe.tokenize!=It&&Mt.eatSpace())return null;var lr=xe.tokenize(Mt,xe);return R=="comment"?lr:(xe.lastType=R!="operator"||I!="++"&&I!="--"?R:"incdec",zt(xe,lr,R,I,Mt))},indent:function(Mt,xe){if(Mt.tokenize==It||Mt.tokenize==$t)return vt.Pass;if(Mt.tokenize!=W)return 0;var lr,Yr=xe&&xe.charAt(0),en=Mt.lexical;if(!/^\s*else\b/.test(xe))for(var gn=Mt.cc.length-1;gn>=0;--gn){var Mr=Mt.cc[gn];if(Mr==kt)en=en.prev;else if(Mr!=yo&&Mr!=Xe)break}for(;(en.type=="stat"||en.type=="form")&&(Yr=="}"||(lr=Mt.cc[Mt.cc.length-1])&&(lr==er||lr==Dr)&&!/^[,\.=+\-*:?[\(]/.test(xe));)en=en.prev;$&&en.type==")"&&en.prev.type=="stat"&&(en=en.prev);var Wn=en.type,wo=Yr==Wn;return Wn=="vardef"?en.indented+(Mt.lastType=="operator"||Mt.lastType==","?en.info.length+1:0):Wn=="form"&&Yr=="{"?en.indented:Wn=="form"?en.indented+N:Wn=="stat"?en.indented+(function($o,Vo){return $o.lastType=="operator"||$o.lastType==","||xt.test(Vo.charAt(0))||/[,.]/.test(Vo.charAt(0))}(Mt,xe)?$||N:0):en.info!="switch"||wo||H.doubleIndentSwitch==0?en.align?en.column+(wo?0:1):en.indented+(wo?0:N):en.indented+(/^(?:case|default)\b/.test(xe)?N:2*N)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:V?null:"/*",blockCommentEnd:V?null:"*/",blockCommentContinue:V?null:" * ",lineComment:V?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:V?"json":"javascript",jsonldMode:F,jsonMode:V,expressionAllowed:cr,skipExpression:function(Mt){zt(Mt,"atom","atom","true",new vt.StringStream("",2,null))}}}),vt.registerHelper("wordChars","javascript",/[\w$]/),vt.defineMIME("text/javascript","javascript"),vt.defineMIME("text/ecmascript","javascript"),vt.defineMIME("application/javascript","javascript"),vt.defineMIME("application/x-javascript","javascript"),vt.defineMIME("application/ecmascript","javascript"),vt.defineMIME("application/json",{name:"javascript",json:!0}),vt.defineMIME("application/x-json",{name:"javascript",json:!0}),vt.defineMIME("application/manifest+json",{name:"javascript",json:!0}),vt.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),vt.defineMIME("text/typescript",{name:"javascript",typescript:!0}),vt.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(ct(631))},589:(k,B,ct)=>{(function(vt){var dt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},H={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};vt.defineMode("xml",function(R,I){var N,$,F=R.indentUnit,V={},U=I.htmlMode?dt:H;for(var it in U)V[it]=U[it];for(var it in I)V[it]=I[it];function X(Vt,Me){function de(ar){return Me.tokenize=ar,ar(Vt,Me)}var Le=Vt.next();return Le=="<"?Vt.eat("!")?Vt.eat("[")?Vt.match("CDATA[")?de(xt("atom","]]>")):null:Vt.match("--")?de(xt("comment","-->")):Vt.match("DOCTYPE",!0,!0)?(Vt.eatWhile(/[\w\._\-]/),de(Q(1))):null:Vt.eat("?")?(Vt.eatWhile(/[\w\._\-]/),Me.tokenize=xt("meta","?>"),"meta"):(N=Vt.eat("/")?"closeTag":"openTag",Me.tokenize=tt,"tag bracket"):Le=="&"?(Vt.eat("#")?Vt.eat("x")?Vt.eatWhile(/[a-fA-F\d]/)&&Vt.eat(";"):Vt.eatWhile(/[\d]/)&&Vt.eat(";"):Vt.eatWhile(/[\w\.\-:]/)&&Vt.eat(";"))?"atom":"error":(Vt.eatWhile(/[^&<]/),null)}function tt(Vt,Me){var de=Vt.next();if(de==">"||de=="/"&&Vt.eat(">"))return Me.tokenize=X,N=de==">"?"endTag":"selfcloseTag","tag bracket";if(de=="=")return N="equals",null;if(de=="<"){Me.tokenize=X,Me.state=Yt,Me.tagName=Me.tagStart=null;var Le=Me.tokenize(Vt,Me);return Le?Le+" tag error":"tag error"}return/[\'\"]/.test(de)?(Me.tokenize=function(ar){var Er=function(Nr,Ar){for(;!Nr.eol();)if(Nr.next()==ar){Ar.tokenize=tt;break}return"string"};return Er.isInAttribute=!0,Er}(de),Me.stringStartCol=Vt.column(),Me.tokenize(Vt,Me)):(Vt.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function xt(Vt,Me){return function(de,Le){for(;!de.eol();){if(de.match(Me)){Le.tokenize=X;break}de.next()}return Vt}}function Q(Vt){return function(Me,de){for(var Le;(Le=Me.next())!=null;){if(Le=="<")return de.tokenize=Q(Vt+1),de.tokenize(Me,de);if(Le==">"){if(Vt==1){de.tokenize=X;break}return de.tokenize=Q(Vt-1),de.tokenize(Me,de)}}return"meta"}}function _t(Vt){return Vt&&Vt.toLowerCase()}function W(Vt,Me,de){this.prev=Vt.context,this.tagName=Me||"",this.indent=Vt.indented,this.startOfLine=de,(V.doNotIndent.hasOwnProperty(Me)||Vt.context&&Vt.context.noIndent)&&(this.noIndent=!0)}function It(Vt){Vt.context&&(Vt.context=Vt.context.prev)}function $t(Vt,Me){for(var de;;){if(!Vt.context||(de=Vt.context.tagName,!V.contextGrabbers.hasOwnProperty(_t(de))||!V.contextGrabbers[_t(de)].hasOwnProperty(_t(Me))))return;It(Vt)}}function Yt(Vt,Me,de){return Vt=="openTag"?(de.tagStart=Me.column(),Ne):Vt=="closeTag"?et:Yt}function Ne(Vt,Me,de){return Vt=="word"?(de.tagName=Me.current(),$="tag",zt):V.allowMissingTagName&&Vt=="endTag"?($="tag bracket",zt(Vt,Me,de)):($="error",Ne)}function et(Vt,Me,de){if(Vt=="word"){var Le=Me.current();return de.context&&de.context.tagName!=Le&&V.implicitlyClosed.hasOwnProperty(_t(de.context.tagName))&&It(de),de.context&&de.context.tagName==Le||V.matchClosing===!1?($="tag",Tt):($="tag error",jt)}return V.allowMissingTagName&&Vt=="endTag"?($="tag bracket",Tt(Vt,Me,de)):($="error",jt)}function Tt(Vt,Me,de){return Vt!="endTag"?($="error",Tt):(It(de),Yt)}function jt(Vt,Me,de){return $="error",Tt(Vt,0,de)}function zt(Vt,Me,de){if(Vt=="word")return $="attribute",Ht;if(Vt=="endTag"||Vt=="selfcloseTag"){var Le=de.tagName,ar=de.tagStart;return de.tagName=de.tagStart=null,Vt=="selfcloseTag"||V.autoSelfClosers.hasOwnProperty(_t(Le))?$t(de,Le):($t(de,Le),de.context=new W(de,Le,ar==de.indented)),Yt}return $="error",zt}function Ht(Vt,Me,de){return Vt=="equals"?Dt:(V.allowMissing||($="error"),zt(Vt,0,de))}function Dt(Vt,Me,de){return Vt=="string"?St:Vt=="word"&&V.allowUnquoted?($="string",zt):($="error",zt(Vt,0,de))}function St(Vt,Me,de){return Vt=="string"?St:zt(Vt,0,de)}return X.isInText=!0,{startState:function(Vt){var Me={tokenize:X,state:Yt,indented:Vt||0,tagName:null,tagStart:null,context:null};return Vt!=null&&(Me.baseIndent=Vt),Me},token:function(Vt,Me){if(!Me.tagName&&Vt.sol()&&(Me.indented=Vt.indentation()),Vt.eatSpace())return null;N=null;var de=Me.tokenize(Vt,Me);return(de||N)&&de!="comment"&&($=null,Me.state=Me.state(N||de,Vt,Me),$&&(de=$=="error"?de+" error":$)),de},indent:function(Vt,Me,de){var Le=Vt.context;if(Vt.tokenize.isInAttribute)return Vt.tagStart==Vt.indented?Vt.stringStartCol+1:Vt.indented+F;if(Le&&Le.noIndent)return vt.Pass;if(Vt.tokenize!=tt&&Vt.tokenize!=X)return de?de.match(/^(\s*)/)[0].length:0;if(Vt.tagName)return V.multilineTagIndentPastTag!==!1?Vt.tagStart+Vt.tagName.length+2:Vt.tagStart+F*(V.multilineTagIndentFactor||1);if(V.alignCDATA&&/<!\[CDATA\[/.test(Me))return 0;var ar=Me&&/^<(\/)?([\w_:\.-]*)/.exec(Me);if(ar&&ar[1])for(;Le;){if(Le.tagName==ar[2]){Le=Le.prev;break}if(!V.implicitlyClosed.hasOwnProperty(_t(Le.tagName)))break;Le=Le.prev}else if(ar)for(;Le;){var Er=V.contextGrabbers[_t(Le.tagName)];if(!Er||!Er.hasOwnProperty(_t(ar[2])))break;Le=Le.prev}for(;Le&&Le.prev&&!Le.startOfLine;)Le=Le.prev;return Le?Le.indent+F:Vt.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:V.htmlMode?"html":"xml",helperType:V.htmlMode?"html":"xml",skipAttribute:function(Vt){Vt.state==Dt&&(Vt.state=zt)},xmlCurrentTag:function(Vt){return Vt.tagName?{name:Vt.tagName,close:Vt.type=="closeTag"}:null},xmlCurrentContext:function(Vt){for(var Me=[],de=Vt.context;de;de=de.prev)Me.push(de.tagName);return Me.reverse()}}}),vt.defineMIME("text/xml","xml"),vt.defineMIME("application/xml","xml"),vt.mimeModes.hasOwnProperty("text/html")||vt.defineMIME("text/html",{name:"xml",htmlMode:!0})})(ct(631))},858:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt){dt.DomComponents.clear(),dt.CssComposer.clear()}}},884:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>R});var vt=ct(50),dt=ct(163),H=ct(668);const R={run:function(I){(0,vt.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=I,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(I){this.toggleMove(),this.disableDragger()},onKeyUp:function(I){(0,dt.getKeyChar)(I)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(I){this.toggleDragger(1,I)},disableDragger:function(I){this.toggleDragger(0,I)},toggleDragger:function(I,N){var $=this.canvasModel,F=this.em,V=this.dragger,U=I?"add":"remove";this.getCanvas().classList[U]("".concat(this.ppfx,"is__grabbing")),V||(V=new H.Z({getPosition:function(){return{x:$.get("x"),y:$.get("y")}},setPosition:function(it){var X=it.x,tt=it.y;$.set({x:X,y:tt})},onStart:function(it,X){F.trigger("canvas:move:start",X)},onDrag:function(it,X){F.trigger("canvas:move",X)},onEnd:function(it,X){F.trigger("canvas:move:end",X)}}),this.dragger=V),I?V.start(N):V.stop()},toggleMove:function(I){var N=this.ppfx,$=I?"add":"remove",F=I?"on":"off",V={on:dt.on,off:dt.off},U=this.getCanvas(),it=["".concat(N,"is__grab")];!I&&it.push("".concat(N,"is__grabbing")),it.forEach(function(X){return U.classList[$](X)}),V[F](document,"keyup",this.onKeyUp),V[F](U,"mousedown",this.enableDragger),V[F](document,"mouseup",this.disableDragger)}}},790:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>I,defineCommand:()=>R});var vt,dt=ct(346),H=(vt=function(N,$){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,V){F.__proto__=V}||function(F,V){for(var U in V)Object.prototype.hasOwnProperty.call(V,U)&&(F[U]=V[U])},vt(N,$)},function(N,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function F(){this.constructor=N}vt(N,$),N.prototype=$===null?Object.create($):(F.prototype=$.prototype,new F)});function R(N){return N}const I=function(N){function $(F){var V=N.call(this,0)||this;V.config=F||{},V.em=V.config.em||{};var U=V.config.stylePrefix;return V.pfx=U,V.ppfx=V.config.pStylePrefix,V.hoverClass="".concat(U,"hover"),V.badgeClass="".concat(U,"badge"),V.plhClass="".concat(U,"placeholder"),V.freezClass="".concat(V.ppfx,"freezed"),V.canvas=V.em.Canvas,V.init(V.config),V}return H($,N),$.prototype.onFrameScroll=function(F){},$.prototype.getCanvas=function(){return this.canvas.getElement()},$.prototype.getCanvasBody=function(){return this.canvas.getBody()},$.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},$.prototype.offset=function(F){var V=F.getBoundingClientRect();return{top:V.top+F.ownerDocument.body.scrollTop,left:V.left+F.ownerDocument.body.scrollLeft}},$.prototype.init=function(F){},$.prototype.callRun=function(F,V){V===void 0&&(V={});var U=this.id;if(F.trigger("run:".concat(U,":before"),V),!V||!V.abort){var it=V.sender||F,X=this.run(F,it,V);return F.trigger("run:".concat(U),X,V),F.trigger("run",U,X,V),X}F.trigger("abort:".concat(U),V)},$.prototype.callStop=function(F,V){V===void 0&&(V={});var U=this.id,it=V.sender||F;F.trigger("stop:".concat(U,":before"),V);var X=this.stop(F,it,V);return F.trigger("stop:".concat(U),X,V),F.trigger("stop",U,X,V),X},$.prototype.stopCommand=function(F){this.em.Commands.stop(this.id,F)},$.prototype.run=function(F,V,U){},$.prototype.stop=function(F,V,U){},$}(dt.Hn)},180:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>H});var vt=ct(50),dt=function(R,I,N){if(N||arguments.length===2)for(var $,F=0,V=I.length;F<V;F++)!$&&F in I||($||($=Array.prototype.slice.call(I,0,F)),$[F]=I[F]);return R.concat($||Array.prototype.slice.call(I))};const H={run:function(R,I,N){var $=this;N===void 0&&(N={});var F=[],V=N.component||R.getSelectedAll();return(V=(0,vt.isArray)(V)?dt([],V,!0):[V]).filter(Boolean).forEach(function(U){if(!U.get("removable"))return F.push(U),$.em.logWarning("The element is not removable",{component:U});U.remove()}),R.select(F),V}}},544:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>I});var vt=ct(50),dt=ct(668),H=function(){return H=Object.assign||function(N){for(var $,F=1,V=arguments.length;F<V;F++)for(var U in $=arguments[F])Object.prototype.hasOwnProperty.call($,U)&&(N[U]=$[U]);return N},H.apply(this,arguments)},R="dmode";const I={run:function(N,$,F){var V=this;F===void 0&&(F={}),(0,vt.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var U=F.target,it=F.event,X=F.mode,tt=F.dragger,xt=tt===void 0?{}:tt,Q=U.getEl(),_t=H({doc:Q.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return V.guidesStatic},guidesTarget:function(){return V.guidesTarget}},xt);this.setupGuides(),this.opts=F,this.editor=N,this.em=N.getModel(),this.target=U,this.isTran=X=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var W=this.dragger;return W?W.setOptions(_t):(W=new dt.Z(_t),this.dragger=W),it&&W.start(it),this.toggleDrag(1),this.em.trigger("".concat(R,":start"),this.getEventOpts()),W},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(N){var $=N.guide;$&&$.parentNode.removeChild($)}),this.guides=[]},getGuidesContainer:function(){var N=this,$=this.guidesEl;if(!$){var F=this,V=F.editor,U=F.em,it=F.opts,X=V.getConfig().stylePrefix,tt=document.createElement("div"),xt=document.createElement("div"),Q='<div class="'.concat(X,"guide-info__line ").concat(X,`danger-bg">
        <div class="`).concat(X,"guide-info__content ").concat(X,`danger-color"></div>
      </div>`);($=document.createElement("div")).className="".concat(X,"guides"),tt.className="".concat(X,"guide-info ").concat(X,"guide-info__x"),xt.className="".concat(X,"guide-info ").concat(X,"guide-info__y"),tt.innerHTML=Q,xt.innerHTML=Q,$.appendChild(tt),$.appendChild(xt),V.Canvas.getGlobalToolsEl().appendChild($),this.guidesEl=$,this.elGuideInfoX=tt,this.elGuideInfoY=xt,this.elGuideInfoContentX=tt.querySelector(".".concat(X,"guide-info__content")),this.elGuideInfoContentY=xt.querySelector(".".concat(X,"guide-info__content")),U.on("canvas:update frame:scroll",(0,vt.debounce)(function(){var _t;N.updateGuides(),it.debug&&((_t=N.guides)===null||_t===void 0||_t.forEach(function(W){return N.renderGuide(W)}))},200))}return $},getGuidesStatic:function(){var N=this,$=[],F=this.target.getEl(),V=F.parentNode,U=V===void 0?{}:V;return(0,vt.each)(U.children,function(it){return $=$.concat(F!==it?N.getElementGuides(it):[])}),$.concat(this.getElementGuides(U))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(N){var $,F,V=this;(N||this.guides).forEach(function(U){var it=U.origin,X=$===it?F:V.getElementPos(it);$=it,F=X,(0,vt.each)(V.getGuidePosUpdate(U,X),function(tt,xt){return U[xt]=tt}),U.originRect=X})},getGuidePosUpdate:function(N,$){var F={},V=$.top,U=$.height,it=$.left,X=$.width;switch(N.type){case"t":F.y=V;break;case"b":F.y=V+U;break;case"l":F.x=it;break;case"r":F.x=it+X;break;case"x":F.x=it+X/2;break;case"y":F.y=V+U/2}return F},renderGuide:function(N){N===void 0&&(N={});var $=N.guide||document.createElement("div"),F="px",V=N.active?2:1,U=$.children[0];return $.style="position: absolute; background-color: ".concat(N.active?"green":"red",";"),$.children.length||((U=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",$.appendChild(U)),N.y?($.style.width="100%",$.style.height="".concat(V).concat(F),$.style.top="".concat(N.y).concat(F),$.style.left=0):($.style.width="".concat(V).concat(F),$.style.height="100%",$.style.left="".concat(N.x).concat(F),$.style.top="0".concat(F)),!N.guide&&this.guidesContainer.appendChild($),$},getElementPos:function(N){return this.editor.Canvas.getElementPos(N,{noScroll:1})},getElementGuides:function(N){var $=this,F=this.opts,V=this.getElementPos(N),U=V.top,it=V.height,X=V.left,tt=V.width,xt=[{type:"t",y:U},{type:"b",y:U+it},{type:"l",x:X},{type:"r",x:X+tt},{type:"x",x:X+tt/2},{type:"y",y:U+it/2}].map(function(Q){return H(H({},Q),{origin:N,originRect:V,guide:F.debug&&$.renderGuide(Q)})});return xt.forEach(function(Q){var _t;return(_t=$.guides)===null||_t===void 0?void 0:_t.push(Q)}),xt},getTranslate:function(N,$){$===void 0&&($="x");var F=0;return(N||"").split(" ").forEach(function(V){var U=V.trim(),it="translate".concat($.toUpperCase(),"(");U.indexOf(it)===0&&(F=parseFloat(U.replace(it,"")))}),F},setTranslate:function(N,$,F){var V="translate".concat($.toUpperCase(),"("),U="".concat(V).concat(F,")"),it=(N||"").split(" ").map(function(X){return X.trim().indexOf(V)===0&&(X=U),X}).join(" ");return it.indexOf(V)<0&&(it+=" ".concat(U)),it},getPosition:function(){var N=this.target,$=this.isTran,F=N.getStyle(),V=F.left,U=F.top,it=F.transform,X=0,tt=0;return $?(X=this.getTranslate(it),tt=this.getTranslate(it,"y")):(X=parseFloat(V||0),tt=parseFloat(U||0)),{x:X,y:tt}},setPosition:function(N){var $=N.x,F=N.y,V=N.end,U=N.position,it=N.width,X=N.height,tt=this,xt=tt.target,Q=tt.isTran,_t=tt.em,W="px",It=!V,$t="".concat(parseInt($,10)).concat(W),Yt="".concat(parseInt(F,10)).concat(W),Ne={};if(Q){var et=xt.getStyle().transform||"";et=this.setTranslate(et,"x",$t),Ne={transform:et=this.setTranslate(et,"y",Yt),__p:It},xt.addStyle(Ne,{avoidStore:!V})}else{var Tt={position:U,width:it,height:X},jt={left:$t,top:Yt,__p:It};(0,vt.keys)(Tt).forEach(function(zt){var Ht=Tt[zt];Ht&&(jt[zt]=Ht)}),Ne=jt,xt.addStyle(Ne,{avoidStore:!V})}_t==null||_t.Styles.__emitCmpStyleUpdate(Ne,{components:_t.getSelected()})},_getDragData:function(){var N=this.target;return{target:N,parent:N.parent(),index:N.index()}},onStart:function(N){var $=this,F=$.target,V=$.editor,U=$.isTran,it=$.opts,X=it.center,tt=it.onStart,xt=V.Canvas,Q=F.getStyle(),_t="absolute",W=[_t,"relative"];if(tt&&tt(this._getDragData()),!U&&Q.position!==_t){var It=xt.offset(F.getEl()),$t=It.left,Yt=It.top,Ne=It.width,et=It.height,Tt=F.parent(),jt=void 0;do{var zt=Tt.getStyle();jt=W.indexOf(zt.position)>=0?Tt:null,Tt=Tt.parent()}while(Tt&&!jt);if(X){var Ht=xt.getMouseRelativeCanvas(N);$t=Ht.x,Yt=Ht.y}else if(jt){var Dt=xt.offset(jt.getEl());$t-=Dt.left,Yt-=Dt.top}this.setPosition({x:$t,y:Yt,width:"".concat(Ne,"px"),height:"".concat(et,"px"),position:_t})}},onDrag:function(){for(var N=this,$=[],F=0;F<arguments.length;F++)$[F]=arguments[F];var V=this.guidesTarget,U=this.opts,it=U.onDrag;this.updateGuides(V),U.debug&&V.forEach(function(X){return N.renderGuide(X)}),U.guidesInfo&&this.renderGuideInfo(V.filter(function(X){return X.active})),it&&it(this._getDragData())},onEnd:function(N,$,F){F===void 0&&(F={});var V=this,U=V.editor,it=V.opts,X=V.id,tt=it.onEnd;tt&&tt(N,F,H(H({event:N},F),this._getDragData())),U.stopCommand(X),this.hideGuidesInfo(),this.em.trigger("".concat(R,":end"),this.getEventOpts())},hideGuidesInfo:function(){var N=this;["X","Y"].forEach(function($){var F=N["elGuideInfo".concat($)];F&&(F.style.display="none")})},renderGuideInfo:function(N){var $=this;N===void 0&&(N=[]);var F=this.guidesStatic;this.hideGuidesInfo(),N.forEach(function(V){var U=V.origin,it=V.x,X=$.getElementPos(U),tt=(0,vt.isUndefined)(it)?"y":"x",xt=tt==="y",Q=X[xt?"left":"top"],_t=X.rect[xt?"left":"top"],W=xt?Q+X.width:Q+X.height,It=xt?_t+X.rect.width:_t+X.rect.height,$t=$["elGuideInfo".concat(tt.toUpperCase())],Yt=$["elGuideInfoContent".concat(tt.toUpperCase())],Ne=$t.style,et=F==null?void 0:F.filter(function(at){return at.type===V.type}).map(function(at){var kt=at.originRect,Gt=kt.left,ye=kt.width,Ae=kt.top,pt=kt.height,le=xt?Gt+ye:Ae+pt;return{gap:le<Q?Q-le:(xt?Gt:Ae)-W,guide:at}}).filter(function(at){return at.gap>0}).sort(function(at,kt){return at.gap-kt.gap}).map(function(at){return at.guide})[0];if(et){var Tt=et.originRect,jt=Tt.left,zt=Tt.width,Ht=Tt.top,Dt=Tt.height,St=Tt.rect,Vt=xt?jt<X.left:Ht<X.top,Me=xt?jt:Ht,de=xt?St.left:St.top,Le=xt?jt+zt:Ht+Dt,ar=xt?St.left+St.width:St.top+St.height,Er=xt?V.y:V.x,Nr=Vt?Le:W,Ar="".concat(Er,"px"),Fr=Vt?Q-Le:Me-W,Xe=Vt?_t-ar:de-It;Ne.display="",Ne[xt?"top":"left"]=Ar,Ne[xt?"left":"top"]="".concat(Nr,"px"),Ne[xt?"width":"height"]="".concat(Fr,"px"),Yt.innerHTML="".concat(Math.round(Xe),"px"),$.em.trigger("".concat(R,":active"),H(H({},$.getEventOpts()),{guide:V,guidesStatic:F,matched:et,posFirst:Er,posSecond:Nr,size:Fr,sizeRaw:Xe,elGuideInfo:$t,elGuideInfoCnt:Yt}))}})},toggleDrag:function(N){var $=this.ppfx,F=this.editor,V=N?"add":"remove",U=["".concat($,"is__grabbing")],it=F.Canvas,X=it.getBody();U.forEach(function(tt){return X.classList[V](tt)}),it[N?"startAutoscroll":"stopAutoscroll"]()}}},236:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt){if(dt.Canvas.hasFocus()){var H=[];dt.getSelectedAll().forEach(function(R){var I=R.components(),N=I&&I.filter(function($){return $.get("selectable")})[0];N&&H.push(N)}),H.length&&dt.select(H)}}}},368:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt,H,R){if(R===void 0&&(R={}),dt.Canvas.hasFocus()||R.force){var I=[];dt.getSelectedAll().forEach(function(N){for(var $=N.parent();$&&!$.get("selectable");)$=$.parent();$&&I.push($)}),I.length&&dt.select(I)}}}},243:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt){if(dt.Canvas.hasFocus()){var H=[];dt.getSelectedAll().forEach(function(R){var I=R.parent();if(I){var N,$=I.components().length,F=0,V=0;do F++,N=(V=R.index()+F)<=$?I.getChildAt(V):null;while(N&&!N.get("selectable"));H.push(N||R)}}),H.length&&dt.select(H)}}}},400:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt){if(dt.Canvas.hasFocus()){var H=[];dt.getSelectedAll().forEach(function(R){var I=R.parent();if(I){var N,$=0,F=0;do $++,N=(F=R.index()-$)>=0?I.getChildAt(F):null;while(N&&!N.get("selectable"));H.push(N||R)}}),H.length&&dt.select(H)}}}},910:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(50);const dt={run:function(H,R,I){I===void 0&&(I={});var N=I.target,$=[];if(!N.get("styles"))return $;var F=N.get("type"),V=H.Pages.getAllWrappers();if(!(0,vt.flatten)(V.map(function(it){return it.findType(F)})).length){var U=H.CssComposer.getAll();$=U.filter(function(it){return it.get("group")==="cmp:".concat(F)}),U.remove($)}return $}}},744:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=function(H,R,I){if(I||arguments.length===2)for(var N,$=0,F=R.length;$<F;$++)!N&&$ in R||(N||(N=Array.prototype.slice.call(R,0,$)),N[$]=R[$]);return H.concat(N||Array.prototype.slice.call(R))};const dt={run:function(H){var R=H.getModel(),I=vt([],H.getSelectedAll(),!0);I.length&&R.set("clipboard",I)}}},517:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>R});var vt=ct(50),dt=ct(895),H=ct(407);const R=(0,vt.extend)({},H.default,{init:function(){(0,vt.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(I){I.stopPropagation();var N=(0,dt.default)(I.target);N.data("model").get("removable")&&(N.addClass(this.hoverClass),this.attachBadge(N.get(0)))},stopDelete:function(I){I.stopPropagation(),(0,dt.default)(I.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(I){I.stopPropagation();var N=(0,dt.default)(I.target);N.data("model").get("removable")&&(N.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(I){this.badge.html("Remove "+I.getName())}})},457:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(491);const dt={run:function(H,R,I){var N=this;I===void 0&&(I={}),R&&R.set&&R.set("active",0);var $=H.getConfig(),F=H.Modal,V=$.stylePrefix;if(this.cm=H.CodeManager||null,!this.editors){var U=this.buildEditor("htmlmixed","hopscotch","HTML"),it=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=U.model,this.cssEditor=it.model;var X=(0,vt.ut)("div",{class:"".concat(V,"export-dl")});X.appendChild(U.el),X.appendChild(it.el),this.editors=X}F.open({title:$.textViewCode,content:this.editors}).getModel().once("change:open",function(){return H.stopCommand("".concat(N.id))}),this.htmlEditor.setContent(H.getHtml(I.optsHtml)),this.cssEditor.setContent(H.getCss(I.optsCss))},stop:function(H){var R=H.Modal;R&&R.close()},buildEditor:function(H,R,I){var N=this.em.CodeManager,$=N.createViewer({label:I,codeName:H,theme:R});return{model:$,el:new N.EditorView({model:$,config:N.getConfig()}).render().el}}}},975:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(50);const dt={isEnabled:function(){var H=document;return!!(H.fullscreenElement||H.webkitFullscreenElement||H.mozFullScreenElement)},enable:function(H){var R="";return H.requestFullscreen?H.requestFullscreen():H.webkitRequestFullscreen?(R="webkit",H.webkitRequestFullscreen()):H.mozRequestFullScreen?(R="moz",H.mozRequestFullScreen()):H.msRequestFullscreen&&H.msRequestFullscreen(),R},disable:function(){var H=document;this.isEnabled()&&(H.exitFullscreen?H.exitFullscreen():H.webkitExitFullscreen?H.webkitExitFullscreen():H.mozCancelFullScreen?H.mozCancelFullScreen():H.msExitFullscreen&&H.msExitFullscreen())},fsChanged:function(H){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(H||"","fullscreenchange"),this.fsChanged))},run:function(H,R,I){I===void 0&&(I={}),this.sender=R;var N=I.target,$=(0,vt.isElement)(N)?N:document.querySelector(N),F=this.enable($||H.getContainer());this.fsChanged=this.fsChanged.bind(this,F),document.addEventListener(F+"fullscreenchange",this.fsChanged),H.trigger("change:canvasOffset")},stop:function(H,R){R&&R.set&&R.set("active",!1),this.disable(),H&&H.trigger("change:canvasOffset")}}},191:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>N});var vt=ct(50),dt=ct(895),H=ct(163),R=ct(407),I=ct(189);const N=(0,vt.extend)({},I.default,R.default,{init:function($){R.default.init.apply(this,arguments),(0,vt.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=$,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var $=[],F=0;F<arguments.length;F++)$[F]=arguments[F];R.default.enable.apply(this,$),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var V=this.$wrapper;V.css("cursor","move"),V.on("mousedown",this.initSorter),V.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function($){var F=(0,dt.default)($.target).data("model").get("draggable");F&&(this.cacheEl=null,this.startSelectPosition($.target,this.frameEl.contentDocument),this.sorter.draggable=F,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,H.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function($){var F=$.get("draggable");if(F){this.cacheEl=null;var V=$.view.el;this.startSelectPosition(V,this.frameEl.contentDocument),this.sorter.draggable=F,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,H.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function($){this.cacheEl=null;var F=$[$.length-1],V=(this.em.get("currentFrame")||{}).model,U=F.getEl(V),it=U.ownerDocument;this.startSelectPosition(U,it,{onStart:this.onStart}),this.sorter.draggable=F.get("draggable"),this.sorter.toMove=$,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,H.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,H.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,H.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function($,F){},rollback:function($,F){(($.which||$.keyCode)==27||F)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,dt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,dt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var $=[],F=0;F<arguments.length;F++)$[F]=arguments[F];R.default.stop.apply(this,$),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>H});var vt=ct(50),dt=ct(491);const H={open:function(R){var I=this,N=this,$=N.editor,F=N.title,V=N.config,U=N.am,it=V.custom;if((0,vt.isFunction)(it.open))return it.open(U.__customData());$.Modal.open({title:F,content:R}).onceClose(function(){return $.stopCommand(I.id)})},close:function(){var R=this.config.custom;if((0,vt.isFunction)(R.close))return R.close(this.am.__customData());var I=this.editor.Modal;I&&I.close()},run:function(R,I,N){N===void 0&&(N={});var $=R.AssetManager,F=$.getConfig(),V=N.types,U=V===void 0?[]:V,it=N.accept,X=N.select;if(this.title=N.modalTitle||R.t("assetManager.modalTitle")||"",this.editor=R,this.config=F,this.am=$,$.setTarget(N.target),$.onClick(N.onClick),$.onDblClick(N.onDblClick),$.onSelect(N.onSelect),$.__behaviour({select:X,types:U,options:N}),F.custom)this.rendered=this.rendered||(0,dt.ut)("div"),this.rendered.className="".concat(F.stylePrefix,"custom-wrp"),$.__behaviour({container:this.rendered}),$.__trgCustom();else{if(!this.rendered||U){var tt=$.getAll().filter(function(Q){return Q});U&&U.length&&(tt=tt.filter(function(Q){return U.indexOf(Q.get("type"))!==-1})),$.render(tt),this.rendered=$.getContainer()}if(it){var xt=this.rendered.querySelector("input#".concat(F.stylePrefix,"uploadFile"));xt&&xt.setAttribute("accept",it)}}return this.open(this.rendered),this},stop:function(R){this.editor=R,this.close(this.rendered)}}},117:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>H});var vt=ct(50),dt=ct(491);const H={open:function(){var R=this,I=R.container,N=R.editor,$=R.bm,F=R.config,V=F.custom,U=F.appendTo;if((0,vt.isFunction)(V.open))return V.open($.__customData());if(this.firstRender&&!U){var it="views-container",X=N.Panels;(X.getPanel(it)||X.addPanel({id:it})).set("appendContent",I).trigger("change:appendContent"),V||I.appendChild($.render())}I&&(I.style.display="block")},close:function(){var R=this.container,I=this.config.custom;if((0,vt.isFunction)(I.close))return I.close(this.bm.__customData());R&&(R.style.display="none")},run:function(R){var I=R.Blocks;this.config=I.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,dt.ut)("div"),this.editor=R,this.bm=I;var N=this.container;I.__behaviour({container:N}),this.config.custom&&I.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>vt});const vt={run:function(dt){var H=dt.LayerManager,R=dt.Panels,I=H.getConfig();if(!I.appendTo){if(!this.layers){var N="views-container",$=document.createElement("div"),F=R.getPanel(N)||R.addPanel({id:N});I.custom?H.__trgCustom({container:$}):$.appendChild(H.render()),F.set("appendContent",$).trigger("change:appendContent"),this.layers=$}this.layers.style.display="block"}},stop:function(){var dt=this.layers;dt&&(dt.style.display="none")}}},801:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(895);const dt={run:function(H,R){if(this.sender=R,!this.$cnt){var I=H.getConfig(),N=H.Panels,$=H.DeviceManager,F=H.SelectorManager,V=H.StyleManager,U="change:appendContent",it=(0,vt.default)("<div></div>"),X=(0,vt.default)("<div></div>"),tt=(0,vt.default)("<div></div>"),xt=(0,vt.default)("<div></div>");if(this.$cnt=it,this.$cntInner=X,X.append(tt),X.append(xt),it.append(X),$&&I.showDevices){var Q=N.addPanel({id:"devices-c"}),_t=$.render();Q.set("appendContent",_t).trigger(U)}var W=F.getConfig();W.custom?F.__trgCustom({container:tt.get(0)}):W.appendTo||tt.append(F.render([])),this.sm=V;var It=V.getConfig(),$t=It.stylePrefix;this.$header=(0,vt.default)('<div class="'.concat($t,'header">').concat(H.t("styleManager.empty"),"</div>")),it.append(this.$header),It.custom?V.__trgCustom({container:xt.get(0)}):It.appendTo||xt.append(V.render());var Yt="views-container";(N.getPanel(Yt)||N.addPanel({id:Yt})).set("appendContent",it).trigger(U);var Ne=H.getModel();this.listenTo(Ne,V.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var H=this,R=H.sender,I=H.sm,N=H.$cntInner,$=H.$header;R&&R.get&&!R.get("active")||!I||(I.getSelected()?(N==null||N.show(),$==null||$.hide()):(N==null||N.hide(),$==null||$.show()))},stop:function(){var H,R;(H=this.$cntInner)===null||H===void 0||H.hide(),(R=this.$header)===null||R===void 0||R.hide()}}},395:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(895);const dt={run:function(H,R){this.sender=R;var I,N=H.getModel(),$=H.Config.stylePrefix,F=H.TraitManager,V=F.getConfig();if(!V.appendTo){if(!this.$cn){this.$cn=(0,vt.default)("<div></div>"),this.$cn2=(0,vt.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,vt.default)("<div>").append('<div class="'.concat(V.stylePrefix,'header">').concat(N.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),V.custom?F.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat($,'traits-label">').concat(N.t("traitManager.label"),"</div>")),this.$cn2.append(F.render()));var U=H.Panels;(I=U.getPanel("views-container")?U.getPanel("views-container"):U.addPanel({id:"views-container"}))==null||I.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=H.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var H=this.sender;H&&H.get&&!H.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(50);const dt={run:function(H,R,I){I===void 0&&(I={});var N=H.getModel().get("clipboard"),$=H.getSelected();N&&$&&(H.getSelectedAll().forEach(function(F){var V=F.collection;if(V){var U,it={at:F.index()+1,action:I.action||"paste-component"};if((0,vt.contains)(N,F)&&F.get("copyable"))U=V.add(F.clone(),it);else{var X=N.filter(function(tt){return tt.get("copyable")}).filter(function(tt){return H.Components.canMove(F.parent(),tt).result});U=V.add(X.map(function(tt){return tt.clone()}),it)}(U=(0,vt.isArray)(U)?U:[U]).forEach(function(tt){return H.trigger("component:paste",tt)})}}),$.emitUpdate())}}},129:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>R});var vt=ct(50),dt=function(I,N,$){if($||arguments.length===2)for(var F,V=0,U=N.length;V<U;V++)!F&&V in N||(F||(F=Array.prototype.slice.call(N,0,V)),F[V]=N[V]);return I.concat(F||Array.prototype.slice.call(N))},H="core:component-outline";const R={getPanels:function(I){return this.panels||(this.panels=I.Panels.getPanels()),this.panels},preventDrag:function(I){I.abort=1},tglEffects:function(I){var N=this.em,$=I?"on":"off";if(N){var F=N.Canvas,V=F.getBody(),U=F.getToolbarEl();U&&(U.style.display=I?"none":"");var it=V.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,vt.each)(it,function(X){return X.style.pointerEvents=I?"all":""}),N[$]("run:tlb-move:before",this.preventDrag)}},run:function(I,N){var $=this;this.sender=N,this.selected=dt([],I.getSelectedAll(),!0),I.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=I.Commands.isActive(H)),this.shouldRunSwVisibility&&I.stopCommand(H),I.getModel().stopDefault();var F=this.getPanels(I),V=I.Canvas.getElement(),U=I.getEl(),it=I.Config.stylePrefix;if(!this.helper){var X=document.createElement("span");X.className="".concat(it,"off-prv fa fa-eye-slash"),U.appendChild(X),X.onclick=function(){return $.stopCommand()},this.helper=X}this.helper.style.display="inline-block",F.forEach(function(xt){return xt.set("visible",!1)});var tt=V.style;tt.width="100%",tt.height="100%",tt.top="0",tt.left="0",tt.padding="0",tt.margin="0",I.refresh(),this.tglEffects(1)},stop:function(I){var N=this.sender,$=N===void 0?{}:N,F=this.selected;$.set&&$.set("active",0);var V=this.getPanels(I);this.shouldRunSwVisibility&&(I.runCommand(H),this.shouldRunSwVisibility=!1),I.getModel().runDefault(),V.forEach(function(U){return U.set("visible",!0)}),I.Canvas.getElement().setAttribute("style",""),F&&I.select(F),delete this.selected,this.helper&&(this.helper.style.display="none"),I.refresh(),this.tglEffects()}}},116:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=function(){return vt=Object.assign||function(H){for(var R,I=1,N=arguments.length;I<N;I++)for(var $ in R=arguments[I])Object.prototype.hasOwnProperty.call(R,$)&&(H[$]=R[$]);return H},vt.apply(this,arguments)};const dt={run:function(H,R,I){var N=I||{},$=H.Canvas,F=$.getCanvasView(),V=vt({appendTo:$.getResizerEl(),prefix:H.getConfig().stylePrefix,posFetcher:F.getElementPos.bind(F),mousePosFetcher:$.getMouseRelativePos},N.options||{}),U=this.canvasResizer;return U&&!N.forceNew||(this.canvasResizer=new H.Utils.Resizer(V),U=this.canvasResizer),U.setOptions(V,!0),U.blur(),U.focus(N.el),U},stop:function(){var H;(H=this.canvasResizer)===null||H===void 0||H.blur()}}},407:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>Ne});var vt,dt=ct(50),H=ct(895),R=ct(346),I=(vt=function(et,Tt){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,zt){jt.__proto__=zt}||function(jt,zt){for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(jt[Ht]=zt[Ht])},vt(et,Tt)},function(et,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Class extends value "+String(Tt)+" is not a constructor or null");function jt(){this.constructor=et}vt(et,Tt),et.prototype=Tt===null?Object.create(Tt):(jt.prototype=Tt.prototype,new jt)});const N=function(et){function Tt(){return et!==null&&et.apply(this,arguments)||this}return I(Tt,et),Tt.prototype.defaults=function(){return{command:"",attributes:{}}},Tt}(R.Hn);var $=function(){var et=function(Tt,jt){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(zt,Ht){zt.__proto__=Ht}||function(zt,Ht){for(var Dt in Ht)Object.prototype.hasOwnProperty.call(Ht,Dt)&&(zt[Dt]=Ht[Dt])},et(Tt,jt)};return function(Tt,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Class extends value "+String(jt)+" is not a constructor or null");function zt(){this.constructor=Tt}et(Tt,jt),Tt.prototype=jt===null?Object.create(jt):(zt.prototype=jt.prototype,new zt)}}(),F=function(et){function Tt(){return et!==null&&et.apply(this,arguments)||this}return $(Tt,et),Tt}(R.FE);const V=F;F.prototype.model=N;var U=ct(330),it=function(){var et=function(Tt,jt){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(zt,Ht){zt.__proto__=Ht}||function(zt,Ht){for(var Dt in Ht)Object.prototype.hasOwnProperty.call(Ht,Dt)&&(zt[Dt]=Ht[Dt])},et(Tt,jt)};return function(Tt,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Class extends value "+String(jt)+" is not a constructor or null");function zt(){this.constructor=Tt}et(Tt,jt),Tt.prototype=jt===null?Object.create(jt):(zt.prototype=jt.prototype,new zt)}}(),X=function(){return X=Object.assign||function(et){for(var Tt,jt=1,zt=arguments.length;jt<zt;jt++)for(var Ht in Tt=arguments[jt])Object.prototype.hasOwnProperty.call(Tt,Ht)&&(et[Ht]=Tt[Ht]);return et},X.apply(this,arguments)};const tt=function(et){function Tt(jt){var zt=et.call(this,jt)||this;return zt.em=jt.config.em,zt}return it(Tt,et),Tt.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Tt.prototype.attributes=function(){return this.model.get("attributes")},Tt.prototype.handleClick=function(jt){jt.preventDefault(),jt.stopPropagation();var zt=this.em,Ht=zt.Canvas.getFrameEl().getBoundingClientRect(),Dt=Ht.left,St=Ht.top,Vt=X(X({},jt),{clientX:jt.clientX-Dt,clientY:jt.clientY-St});zt.trigger("toolbar:run:before",{event:Vt}),this.execCommand(Vt)},Tt.prototype.execCommand=function(jt){var zt=this.em,Ht={event:jt},Dt=this.model.get("command"),St=zt.Editor;(0,dt.isFunction)(Dt)&&Dt(St,null,Ht),(0,dt.isString)(Dt)&&St.runCommand(Dt,Ht)},Tt.prototype.render=function(){var jt=this,zt=jt.em,Ht=jt.$el,Dt=jt.model,St=Dt.get("id"),Vt=Dt.get("label"),Me=zt.getConfig().stylePrefix;return Ht.addClass("".concat(Me,"toolbar-item")),St&&Ht.addClass("".concat(Me,"toolbar-item__").concat(St)),Vt&&Ht.append(Vt),this},Tt}(R.G7);var xt=function(){var et=function(Tt,jt){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(zt,Ht){zt.__proto__=Ht}||function(zt,Ht){for(var Dt in Ht)Object.prototype.hasOwnProperty.call(Ht,Dt)&&(zt[Dt]=Ht[Dt])},et(Tt,jt)};return function(Tt,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Class extends value "+String(jt)+" is not a constructor or null");function zt(){this.constructor=Tt}et(Tt,jt),Tt.prototype=jt===null?Object.create(jt):(zt.prototype=jt.prototype,new zt)}}(),Q=function(et){function Tt(jt){var zt=et.call(this,jt)||this,Ht=jt.em;return zt.em=Ht,zt.config={em:Ht},zt.listenTo(zt.collection,"reset",zt.render),zt}return xt(Tt,et),Tt.prototype.onRender=function(){var jt=this.em.config.stylePrefix;this.el.className="".concat(jt,"toolbar-items")},Tt}(U.Z);const _t=Q;Q.prototype.itemView=tt;var W,It=ct(491),$t=ct(163),Yt=function(){return Yt=Object.assign||function(et){for(var Tt,jt=1,zt=arguments.length;jt<zt;jt++)for(var Ht in Tt=arguments[jt])Object.prototype.hasOwnProperty.call(Tt,Ht)&&(et[Ht]=Tt[Ht]);return et},Yt.apply(this,arguments)};const Ne={init:function(et){(0,dt.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),W=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(et){var Tt=this,jt=this.em,zt=jt.getConfig().listenToEl,Ht=jt.getContainer().parentNode,Dt=et?"on":"off",St={on:$t.on,off:$t.off};!zt.length&&Ht&&zt.push(Ht),St[Dt](window,"resize",this.onFrameUpdated),St[Dt](zt,"scroll",this.onContainerChange),jt[Dt]("component:toggled component:update undo redo",this.onSelect,this),jt[Dt]("change:componentHovered",this.onHovered,this),jt[Dt]("component:resize styleable:change component:input",this.updateGlobalPos,this),jt[Dt]("component:update:toolbar",this._upToolbar,this),jt[Dt]("change:canvasOffset",this.updateAttached,this),jt[Dt]("frame:updated",this.onFrameUpdated,this),jt[Dt]("canvas:updateTools",this.onFrameUpdated,this),jt.Canvas.getFrames().forEach(function(Vt){var Me=Vt.view,de=Me==null?void 0:Me.getWindow();de&&function(Le,ar){St[Dt](ar,"mouseover",Tt.onHover),St[Dt](ar,"mouseleave",Tt.onOut),St[Dt](ar,"click",Tt.onClick),St[Dt](Le,"scroll",Tt.onFrameScroll,!0)}(de,Me==null?void 0:Me.getBody())})},onHover:function(et){et.stopPropagation();var Tt=this.em,jt=et.target,zt=(0,$t.getViewEl)(jt),Ht=zt&&zt._getFrame(),Dt=(0,H.default)(jt),St=Dt.data("model");if(!St)for(var Vt=Dt.parent();!St&&Vt.length&&!(0,It.Mx)(Vt[0]);)St=Vt.data("model"),Vt=Vt.parent();this.currentDoc=jt.ownerDocument,Tt.setHovered(St,{useValid:!0}),Ht&&Tt.set("currentFrame",Ht)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(et,Tt){var jt,zt=this,Ht={};Tt?(jt=Tt.views)===null||jt===void 0||jt.forEach(function(Dt){var St=Dt.el,Vt=zt.getElementPos(St);Ht={el:St,pos:Vt,component:Tt,view:(0,$t.getViewEl)(St)},zt.updateToolsLocal(Ht),St.ownerDocument===zt.currentDoc&&(zt.elHovered=Ht)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(Dt){var St=Dt.view,Vt=St&&St.getToolsEl();Vt&&zt.toggleToolsEl(0,0,{el:Vt})}))},onSelect:(0,dt.debounce)(function(){var et=this.em,Tt=et.getSelected(),jt=et.get("currentFrame")||{},zt=Tt&&Tt.getView(jt.model),Ht=zt&&zt.el,Dt={};Ht&&(0,It.pn)(Ht)&&(Dt={el:Ht,pos:this.getElementPos(Ht),component:Tt,view:(0,$t.getViewEl)(Ht)}),this.elSelected=Dt,this.updateToolsGlobal(),this.updateLocalPos(Dt),this.initResize(Tt)},0),updateGlobalPos:function(){var et=this.getElSelected();et.el&&(et.pos=this.getElementPos(et.el),this.updateToolsGlobal())},updateLocalPos:function(et){var Tt=this.getElHovered();Tt.el&&(Tt.pos=this.getElementPos(Tt.el),this.updateToolsLocal(et))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function(et,Tt,jt){jt===void 0&&(jt={});var zt=jt.el||this.canvas.getToolsEl(Tt);return zt&&(zt.style.display=et?"":"none"),zt||{}},showElementOffset:function(et,Tt,jt){jt===void 0&&(jt={}),W&&this.editor.runCommand("show-offset",{el:et,elPos:Tt,view:jt.view,force:1,top:0,left:0})},hideElementOffset:function(et){this.editor.stopCommand("show-offset",{view:et})},showFixedElementOffset:function(et,Tt){this.editor.runCommand("show-offset",{el:et,elPos:Tt,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(et){this.canvas.getHighlighter(et).style.opacity=0},onClick:function(et){et.stopPropagation(),et.preventDefault();var Tt=this.em;if(Tt.get("_cmpDrag"))return Tt.set("_cmpDrag");var jt=(0,H.default)(et.target),zt=jt.data("model");if(!zt)for(var Ht=jt.parent();!zt&&Ht.length&&!(0,It.Mx)(Ht[0]);)zt=Ht.data("model"),Ht=Ht.parent();if(zt){if(Tt.isEditing()&&!zt.get("textable")&&zt.isChildOf("text"))return;this.select(zt,et)}},select:function(et,Tt){Tt===void 0&&(Tt={}),et&&(this.editor.select(et,{event:Tt,useValid:!0}),this.initResize(et))},updateBadge:function(et,Tt,jt){jt===void 0&&(jt={});var zt=this.canvas,Ht=(0,H.default)(et).data("model");if(Ht&&Ht.get("badgable")){var Dt=this.getBadge(jt);if(!jt.posOnly){var St=this.canvas.getConfig(),Vt=Ht.getIcon(),Me=St.pStylePrefix||"",de="".concat(Me,"badge"),Le=St.customBadgeLabel,ar="".concat(Vt?'<div class="'.concat(de,'__icon">').concat(Vt,"</div>"):"",`
        <div class="`).concat(de,'__name">').concat(Ht.getName(),"</div>");Dt.innerHTML=Le?Le(Ht):ar}var Er="px",Nr=Dt.style;Nr.display="block";var Ar=zt.getTargetToElementFixed(et,Dt,{pos:Tt}).top,Fr=jt.leftOff<0?-jt.leftOff:0;Nr.top=Ar+Er,Nr.left=Fr+Er}},showHighlighter:function(et){this.canvas.getHighlighter(et).style.opacity=""},initResize:function(et){var Tt,jt=this.em,zt=this.canvas,Ht=jt==null?void 0:jt.Editor,Dt=(jt==null?void 0:jt.config).stylePrefix||"",St="".concat(Dt,"resizing"),Vt=!(0,dt.isElement)(et)&&(0,$t.isTaggableNode)(et)?et:jt.getSelected(),Me=Vt&&Vt.get("resizable"),de={},Le=function(Er,Nr,Ar){var Fr=Ar.docs;Fr&&Fr.forEach(function(Xe){var at=Xe.body,kt=at.className||"";at.className=(Er=="add"?"".concat(kt," ").concat(St):kt.replace(St,"")).trim()})};if(Ht&&Me){var ar=(0,dt.isElement)(et)?et:Vt.getEl();de={onStart:function(Er,Nr){Nr===void 0&&(Nr={});var Ar=Nr.el,Fr=Nr.config,Xe=Nr.resizer,at=Fr.keyHeight,kt=Fr.keyWidth,Gt=Fr.currentUnit,ye=Fr.keepAutoHeight,Ae=Fr.keepAutoWidth;Le("add",0,Nr),Tt=jt.Styles.getModelToStyle(Vt),zt.toggleFramesEvents(!1);var pt=getComputedStyle(Ar),le=Tt.getStyle(),se=le[kt];Fr.autoWidth=Ae&&se==="auto",isNaN(parseFloat(se))&&(se=pt[kt]);var or=le[at];Fr.autoHeight=ye&&or==="auto",isNaN(parseFloat(or))&&(or=pt[at]),Xe.startDim.w=parseFloat(se),Xe.startDim.h=parseFloat(or),W=!1,Gt&&(Fr.unitHeight=(0,$t.getUnitFromValue)(or),Fr.unitWidth=(0,$t.getUnitFromValue)(se))},onMove:function(){Ht.trigger("component:resize")},onEnd:function(Er,Nr){Le("remove",0,Nr),Ht.trigger("component:resize"),zt.toggleFramesEvents(!0),W=!0},updateTarget:function(Er,Nr,Ar){if(Ar===void 0&&(Ar={}),Tt){var Fr=Ar.store,Xe=Ar.selectedHandler,at=Ar.config,kt=at.keyHeight,Gt=at.keyWidth,ye=at.autoHeight,Ae=at.autoWidth,pt=at.unitWidth,le=at.unitHeight,se=["tc","bc"].indexOf(Xe)>=0,or=["cl","cr"].indexOf(Xe)>=0,mr={};if(!se){var er=zt.getBody().offsetWidth,Dr=Nr.w<er?Nr.w:er;mr[Gt]=Ae?"auto":"".concat(Dr).concat(pt)}or||(mr[kt]=ye?"auto":"".concat(Nr.h).concat(le)),jt.getDragMode(Vt)&&(mr.top="".concat(Nr.t).concat(le),mr.left="".concat(Nr.l).concat(pt));var rn=Yt(Yt({},mr),{__p:!Fr});Tt.addStyle(rn,{avoidStore:!Fr}),jt.Styles.__emitCmpStyleUpdate(rn,{components:jt.getSelected()})}}},typeof Me=="object"&&(de=Yt(Yt(Yt({},de),Me),{parent:de})),this.resizer=Ht.runCommand("resize",{el:ar,options:de,force:1})}else Ht.stopCommand("resize"),this.resizer=null},updateToolbar:function(et){var Tt=this.config.em,jt=et==Tt?Tt.getSelected():et,zt=this.canvas.getToolbarEl(),Ht=zt.style,Dt=jt.get("toolbar"),St=Tt.config.showToolbar;if(jt&&St&&Dt&&Dt.length){if(Ht.display="",!this.toolbar){zt.innerHTML="",this.toolbar=new V(Dt);var Vt=new _t({collection:this.toolbar,em:Tt});zt.appendChild(Vt.render().el)}this.toolbar.reset(Dt),Ht.top="-100px",Ht.left="0"}else Ht.display="none"},updateToolbarPos:function(et){var Tt="px",jt=this.canvas.getToolbarEl().style;jt.top="".concat(et.top).concat(Tt),jt.left="".concat(et.left).concat(Tt),jt.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(et){return et===void 0&&(et={}),this.canvas.getBadgeEl(et.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(et){return et&&et.get("status")==="selected"},updateToolsLocal:function(et){var Tt=this.em.getConfig(),jt=et||this.getElHovered(),zt=jt.el,Ht=jt.pos,Dt=jt.view,St=jt.component;if(zt){var Vt=St.get("hoverable"),Me=this.lastHovered!==zt,de=Me?{}:{posOnly:1};Me&&Vt&&(this.lastHovered=zt,this.showHighlighter(Dt),this.showElementOffset(zt,Ht,{view:Dt})),this.isCompSelected(St)&&(this.hideHighlighter(Dt),!Tt.showOffsetsSelected&&this.hideElementOffset(Dt));var Le="px",ar=this.toggleToolsEl(1,Dt),Er=ar.style,Nr=this.canvas.canvasRectOffset(zt,Ht),Ar=Nr.top,Fr=Nr.left;this.updateBadge(zt,Ht,Yt(Yt({},de),{view:Dt,topOff:Ar,leftOff:Fr})),Er.top=Ar+Le,Er.left=Fr+Le,Er.width=Ht.width+Le,Er.height=Ht.height+Le,this._trgToolUp("local",{component:St,el:ar,top:Ar,left:Fr,width:Ht.width,height:Ht.height})}else this.lastHovered=0},_upToolbar:(0,dt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(et,Tt){Tt===void 0&&(Tt={}),this.em.trigger("canvas:tools:update",Yt({type:et},Tt))},updateToolsGlobal:function(et){et===void 0&&(et={});var Tt=this.getElSelected(),jt=Tt.el,zt=Tt.pos,Ht=Tt.component;if(!jt)return this.toggleToolsEl(),void(this.lastSelected=0);var Dt=this.canvas;(this.lastSelected!==jt||et.force)&&(this.lastSelected=jt,this.updateToolbar(Ht));var St="px",Vt=this.toggleToolsEl(1),Me=Vt.style,de=Dt.getTargetToElementFixed(jt,Dt.getToolbarEl(),{pos:zt}),Le=de.canvasOffsetTop,ar=de.canvasOffsetLeft;Me.top=Le+St,Me.left=ar+St,Me.width=zt.width+St,Me.height=zt.height+St,this.updateToolbarPos({top:de.top,left:de.left}),this._trgToolUp("global",{component:Ht,el:Vt,top:Le,left:ar,width:zt.width,height:zt.height})},updateAttached:(0,dt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,dt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(et){return this.canvas.getCanvasView().getElementPos(et,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(et){et&&et.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(et){(0,$t.hasWin)()&&(this.editor=et&&et.get("Editor"),this.enable())},stop:function(et,Tt,jt){if(jt===void 0&&(jt={}),(0,$t.hasWin)()){var zt=this.em,Ht=this.editor;this.onHovered(),this.stopSelectComponent(),!jt.preserveSelected&&zt.setSelected(),this.toggleToolsEl(),Ht&&Ht.stopCommand("resize")}}}},189:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(895);const dt={startSelectPosition:function(H,R,I){var N=this;I===void 0&&(I={}),this.isPointed=!1;var $=this.em.Utils,F=H.ownerDocument.body;$&&!this.sorter&&(this.sorter=new $.Sorter({container:F,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:R,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return N.em.getZoomDecimal()}})),I.onStart&&(this.sorter.onStart=I.onStart),H&&this.sorter.startSort(H,{container:F})},getOffsetDim:function(){var H=this.offset(this.canvas.getFrameEl()),R=this.offset(this.canvas.getElement());return{top:H.top-R.top,left:H.left-R.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,vt.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,vt.default)(this.cDim[this.posIndex][5]).parent():(0,vt.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(H,R,I){var N=H||0,$=R||"before",F=I.length,V=F!==0&&$=="after"&&N==F;return F!==0&&(!V&&!I[N][4]||I[N-1]&&!I[N-1][4]||V&&!I[N-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>I});var vt=ct(50),dt=ct(895),H=ct(163),R=function(){return R=Object.assign||function(N){for(var $,F=1,V=arguments.length;F<V;F++)for(var U in $=arguments[F])Object.prototype.hasOwnProperty.call($,U)&&(N[U]=$[U]);return N},R.apply(this,arguments)};const I={getOffsetMethod:function(N){return"get"+(N||"")+"OffsetViewerEl"},run:function(N,$,F){var V=F||{},U=V.state||"",it=N.getConfig(),X=this.em.getZoomDecimal(),tt=V.el||"";if(!it.showOffsets||(0,H.isTextNode)(tt)||!it.showOffsetsSelected&&U=="Fixed")N.stopCommand("".concat(this.id),F);else{var xt=N.Canvas,Q=R({},V.elPos||xt.getElementPos(tt));(0,vt.isUndefined)(V.top)||(Q.top=V.top),(0,vt.isUndefined)(V.left)||(Q.left=V.left);var _t=window.getComputedStyle(tt),W=this.ppfx,It=U+"State",$t=xt[this.getOffsetMethod(U)](F.view);$t.style.opacity="";var Yt=this["marginT"+U],Ne=this["marginB"+U],et=this["marginL"+U],Tt=this["marginR"+U],jt=this["padT"+U],zt=this["padB"+U],Ht=this["padL"+U],Dt=this["padR"+U];if($t.childNodes.length&&(this[It]="1",Yt=$t.querySelector("[data-offset-m-t]"),Ne=$t.querySelector("[data-offset-m-b]"),et=$t.querySelector("[data-offset-m-l]"),Tt=$t.querySelector("[data-offset-m-r]"),jt=$t.querySelector("[data-offset-p-t]"),zt=$t.querySelector("[data-offset-p-b]"),Ht=$t.querySelector("[data-offset-p-l]"),Dt=$t.querySelector("[data-offset-p-r]")),!this[It]){var St=U.toLowerCase(),Vt=St+"margin-v",Me=St+"padding-v",de=(0,dt.default)('<div class="'.concat(W,'marginName">')).get(0),Le=(0,dt.default)('<div class="'.concat(W,'paddingName">')).get(0),ar=W+Me+"-el",Er="".concat(W+Vt+"-el"," ").concat(W+Vt),Nr="".concat(ar," ").concat(W+Me);Yt=(0,dt.default)('<div class="'.concat(Er,'-top"></div>')).get(0),Ne=(0,dt.default)('<div class="'.concat(Er,'-bottom"></div>')).get(0),et=(0,dt.default)('<div class="'.concat(Er,'-left"></div>')).get(0),Tt=(0,dt.default)('<div class="'.concat(Er,'-right"></div>')).get(0),jt=(0,dt.default)('<div class="'.concat(Nr,'-top"></div>')).get(0),zt=(0,dt.default)('<div class="'.concat(Nr,'-bottom"></div>')).get(0),Ht=(0,dt.default)('<div class="'.concat(Nr,'-left"></div>')).get(0),Dt=(0,dt.default)('<div class="'.concat(Nr,'-right"></div>')).get(0),this["marginT"+U]=Yt,this["marginB"+U]=Ne,this["marginL"+U]=et,this["marginR"+U]=Tt,this["padT"+U]=jt,this["padB"+U]=zt,this["padL"+U]=Ht,this["padR"+U]=Dt,de.appendChild(Yt),de.appendChild(Ne),de.appendChild(et),de.appendChild(Tt),Le.appendChild(jt),Le.appendChild(zt),Le.appendChild(Ht),Le.appendChild(Dt),$t.appendChild(de),$t.appendChild(Le),this[It]="1"}var Ar="px",Fr=parseFloat(_t.marginLeft.replace(Ar,""))*X,Xe=parseFloat(_t.marginRight.replace(Ar,""))*X,at=parseFloat(_t.marginTop.replace(Ar,""))*X,kt=parseFloat(_t.marginBottom.replace(Ar,""))*X,Gt=Yt.style,ye=Ne.style,Ae=et.style,pt=Tt.style,le=jt.style,se=zt.style,or=Ht.style,mr=Dt.style,er=parseFloat(Q.left),Dr=parseFloat(_t.width)*X+Ar;Gt.height=at+Ar,Gt.width=Dr,Gt.top=Q.top-at+Ar,Gt.left=er+Ar,ye.height=kt+Ar,ye.width=Dr,ye.top=Q.top+Q.height+Ar,ye.left=er+Ar;var rn=Q.height+at+kt+Ar,yt=Q.top-at+Ar;Ae.height=rn,Ae.width=Fr+Ar,Ae.top=yt,Ae.left=er-Fr+Ar,pt.height=rn,pt.width=Xe+Ar,pt.top=yt,pt.left=er+Q.width+Ar;var Wt=parseFloat(_t.paddingTop)*X;le.height=Wt+Ar;var ne=parseFloat(_t.paddingBottom)*X;se.height=ne+Ar;var Ft=Q.height-ne-Wt+Ar,_e=Q.top+Wt+Ar;or.height=Ft,or.width=parseFloat(_t.paddingLeft)*X+Ar,or.top=_e;var Zt=parseFloat(_t.paddingRight)*X;mr.height=Ft,mr.width=Zt+Ar,mr.top=_e}},stop:function(N,$,F){F===void 0&&(F={});var V=(F||{}).state||"",U=this.getOffsetMethod(V);N.Canvas[U](F.view).style.opacity=0}}},434:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>dt});var vt=ct(50);const dt={init:function(){(0,vt.bindAll)(this,"_onFramesChange")},run:function(H){this.toggleVis(H)},stop:function(H){this.toggleVis(H,0)},toggleVis:function(H,R){var I=this;if(R===void 0&&(R=1),!H.Commands.isActive("preview")){var N=H.Canvas,$=R?"on":"off",F=N.getModel();N.getFrames().forEach(function(V){return I._upFrame(V,R)}),F[$]("change:frames",this._onFramesChange)}},_onFramesChange:function(H,R){var I=this;R.forEach(function(N){var $,F=function(){return I._upFrame(N,!0)};!(($=N.view)===null||$===void 0)&&$.loaded?F():N.once("loaded",F)})},_upFrame:function(H,R){var I,N=R?"add":"remove",$="".concat(this.ppfx,"dashed");(I=H.view)===null||I===void 0||I.getBody().classList[N]($)}}},346:(k,B,ct)=>{ct.d(B,{FE:()=>N,G7:()=>$,Hn:()=>I});var vt,dt=ct(316),H=ct.n(dt),R=(vt=function(F,V){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,it){U.__proto__=it}||function(U,it){for(var X in it)Object.prototype.hasOwnProperty.call(it,X)&&(U[X]=it[X])},vt(F,V)},function(F,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function U(){this.constructor=F}vt(F,V),F.prototype=V===null?Object.create(V):(U.prototype=V.prototype,new U)}),I=function(F){function V(){return F!==null&&F.apply(this,arguments)||this}return R(V,F),V}(H().Model),N=function(F){function V(){return F!==null&&F.apply(this,arguments)||this}return R(V,F),V}(H().Collection),$=function(F){function V(){return F!==null&&F.apply(this,arguments)||this}return R(V,F),V}(H().View)},330:(k,B,ct)=>{ct.d(B,{Z:()=>N});var vt,dt=ct(50),H=ct(346),R=(vt=function($,F){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,U){V.__proto__=U}||function(V,U){for(var it in U)Object.prototype.hasOwnProperty.call(U,it)&&(V[it]=U[it])},vt($,F)},function($,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function V(){this.constructor=$}vt($,F),$.prototype=F===null?Object.create(F):(V.prototype=F.prototype,new V)}),I=function($){function F(V,U,it){V===void 0&&(V={}),it===void 0&&(it=!1);var X=$.call(this,V)||this;return X.itemsView="",X.itemType="type",X.reuseView=!1,X.config=U||V.config||{},it&&X.listenTo(X.collection,"add",X.addTo),X.items=[],X}return R(F,$),F.prototype.addTo=function(V){this.add(V)},F.prototype.itemViewNotFound=function(V){var U=this.config,it=this.ns,X=U.em,tt="".concat(it?"[".concat(it,"]: "):"","'").concat(V,"' type not found");X&&X.logWarning(tt)},F.prototype.add=function(V,U){var it,X=this,tt=X.config,xt=X.reuseView,Q=X.items,_t=this.itemsView||{},W=U||null,It=this.itemView,$t=V.get(this.itemType);_t[$t]?It=_t[$t]:!$t||_t[$t]||(0,dt.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],$t)||this.itemViewNotFound($t),it=V.view&&xt?V.view:new It({model:V,config:tt},tt),Q&&Q.push(it);var Yt=it.render().el;W?W.appendChild(Yt):this.$el.append(Yt)},F.prototype.render=function(){var V=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(U){this.add(U,V)},this),this.$el.append(V),this.onRender(),this},F.prototype.onRender=function(){},F.prototype.onRemoveBefore=function(V,U){},F.prototype.onRemove=function(V,U){},F.prototype.remove=function(V){V===void 0&&(V={});var U=this.items;return this.onRemoveBefore(U,V),this.clearItems(),$.prototype.remove.call(this),this.onRemove(U,V),this},F.prototype.clearItems=function(){this.items},F}(H.G7);const N=I;I.prototype.itemView=""},668:(k,B,ct)=>{ct.d(B,{Z:()=>I});var vt=ct(50),dt=ct(163),H=function(){return H=Object.assign||function(N){for(var $,F=1,V=arguments.length;F<V;F++)for(var U in $=arguments[F])Object.prototype.hasOwnProperty.call($,U)&&(N[U]=$[U]);return N},H.apply(this,arguments)},R=["x","y"];const I=function(){function N($){return $===void 0&&($={}),this.opts={snapOffset:5,scale:1},(0,vt.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions($),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return N.prototype.setOptions=function($){$===void 0&&($={}),this.opts=H(H({},this.opts),$)},N.prototype.toggleDrag=function($){var F=this.getDocumentEl(),V=this.getContainerEl(),U=this.getWindowEl(),it=$?"on":"off",X={on:dt.on,off:dt.off};X[it](V,"mousemove dragover",this.drag),X[it](F,"mouseup dragend touchend",this.stop),X[it](F,"keydown",this.keyHandle),X[it](U,"scroll",this.handleScroll)},N.prototype.handleScroll=function(){var $=this.lastScroll,F=this.delta,V=this.getScrollInfo(),U={x:V.x-$.x,y:V.y-$.y};this.move(F.x+U.x,F.y+U.y),this.lastScrollDiff=U},N.prototype.start=function($){var F=this.opts,V=F.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos($),this.guidesStatic=(0,vt.result)(F,"guidesStatic")||[],this.guidesTarget=(0,vt.result)(F,"guidesTarget")||[],(0,vt.isFunction)(V)&&V($,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag($)},N.prototype.drag=function($){var F=this,V=this,U=V.opts,it=V.lastScrollDiff,X=V.globScrollDiff,tt=U.onDrag,xt=this.startPointer,Q=this.getPointerPos($),_t={x:X.x+it.x,y:X.y+it.y};this.globScrollDiff=_t;var W={x:Q.x-xt.x+_t.x,y:Q.y-xt.y+_t.y};this.lastScrollDiff={x:0,y:0};var It=this.lockedAxis;(It=$.shiftKey?!It&&this.detectAxisLock(W.x,W.y):null)==="x"?W.x=xt.x:It==="y"&&(W.y=xt.y);var $t=function(zt){R.forEach(function(Ht){return zt[Ht]=zt[Ht]*(0,vt.result)(U,"scale")}),F.delta=zt,F.move(zt.x,zt.y),(0,vt.isFunction)(tt)&&tt($,F)},Yt=H({},W);if(this.currentPointer=Q,this.lockedAxis=It,this.lastScroll=this.getScrollInfo(),$t(W),this.guidesTarget.length){var Ne=this.snapGuides(Yt),et=Ne.newDelta,Tt=Ne.trgX,jt=Ne.trgY;(Tt||jt)&&$t(et)}$.which===0&&this.stop($)},N.prototype.snapGuides=function($){var F=this,V=$,U=this.trgX,it=this.trgY;return this.guidesTarget.forEach(function(X){X.x&&F.trgX||X.y&&F.trgY||(X.active=!1,F.guidesStatic.forEach(function(tt){if(!(X.y&&tt.x||X.x&&tt.y)){var xt=X.y&&tt.y,Q=xt?"y":"x",_t=X[Q],W=tt[Q],It=$[Q],$t=xt?it:U;if(F.isPointIn(_t,W)&&(0,vt.isUndefined)($t)){var Yt=It-(_t-W);F.setGuideLock(X,Yt)}}}))}),U=this.trgX,it=this.trgY,R.forEach(function(X){var tt=X.toUpperCase(),xt=F["trg".concat(tt)];xt&&!F.isPointIn($[X],xt.lock)&&(F.setGuideLock(xt,null),xt=null),xt&&!(0,vt.isUndefined)(xt.lock)&&(V[X]=xt.lock)}),{newDelta:V,trgX:this.trgX,trgY:this.trgY}},N.prototype.isPointIn=function($,F,V){var U=(V===void 0?{}:V).offset||this.opts.snapOffset||0;return $>=F&&$<=F+U||$<=F&&$>=F-U},N.prototype.setGuideLock=function($,F){var V=(0,vt.isUndefined)($.x)?"Y":"X",U="trg".concat(V);return F!==null?($.active=!0,$.lock=F,this[U]=$):(delete $.active,delete $.lock,delete this[U]),$},N.prototype.stop=function($,F){F===void 0&&(F={});var V=this.delta,U=!!F.cancel,it=U?0:V.x,X=U?0:V.y;this.toggleDrag(),this.lockedAxis=null,this.move(it,X,!0);var tt=this.opts.onEnd;(0,vt.isFunction)(tt)&&tt($,this,{cancelled:U})},N.prototype.keyHandle=function($){(0,dt.isEscKey)($)&&this.stop($,{cancel:!0})},N.prototype.move=function($,F,V){var U=this.el,it=this.opts,X=this.startPosition;if(X){var tt=it.setPosition,xt=X.x+$,Q=X.y+F;this.position={x:xt,y:Q,end:V},(0,vt.isFunction)(tt)&&tt(this.position),U&&(U.style.left="".concat(xt,"px"),U.style.top="".concat(Q,"px"))}},N.prototype.getContainerEl=function(){var $=this.opts.container;return $?[$]:this.getDocumentEl()},N.prototype.getWindowEl=function(){return this.getContainerEl().map(function($){var F=$.ownerDocument||$;return F.defaultView||F.parentWindow})},N.prototype.getDocumentEl=function($){var F=this.opts.doc;if($=$||this.el,!this.docs.length){var V=[document];$&&V.push($.ownerDocument),F&&V.push(F),this.docs=V}return this.docs},N.prototype.getPointerPos=function($){var F=this.opts.getPointerPosition,V=(0,dt.getPointerEvent)($);return F?F($):{x:V.clientX,y:V.clientY}},N.prototype.getStartPosition=function(){var $=this.el,F=this.opts.getPosition,V={x:0,y:0};return(0,vt.isFunction)(F)?V=F():$&&(V={x:parseFloat($.style.left),y:parseFloat($.style.top)}),V},N.prototype.getScrollInfo=function(){var $=this.opts.doc,F=$&&$.body;return{y:F?F.scrollTop:0,x:F?F.scrollLeft:0}},N.prototype.detectAxisLock=function($,F){var V=$,U=F,it=Math.abs(V),X=Math.abs(U);return U>=it||U<=-it?"x":V>X||V<-X?"y":void 0},N}()},895:(k,B,ct)=>{ct.r(B),ct.d(B,{default:()=>Je});var vt=typeof document<"u"?document:null,dt=typeof window<"u"?window:null,H=Array.prototype,R=H.filter,I=H.indexOf,N=H.map,$=H.push,F=H.reverse,V=H.slice,U=H.splice,it=/^#[\w-]*$/,X=/^\.[\w-]*$/,tt=/<.+>/,xt=/^\w+$/;function Q(Et,fe){return fe===void 0&&(fe=vt),X.test(Et)?fe.getElementsByClassName(Et.slice(1)):xt.test(Et)?fe.getElementsByTagName(Et):fe.querySelectorAll(Et)}function _t(Et,fe){if(fe===void 0&&(fe=vt),Et){if(Et.__cash)return Et;var Pe=Et;if(Ht(Et)){if(fe.__cash&&(fe=fe[0]),!(Pe=it.test(Et)?fe.getElementById(Et.slice(1)):tt.test(Et)?Rt(Et):Q(Et,fe)))return}else if(zt(Et))return this.ready(Et);(Pe.nodeType||Pe===dt)&&(Pe=[Pe]),this.length=Pe.length;for(var Ye=0,Cr=this.length;Ye<Cr;Ye++)this[Ye]=Pe[Ye]}}function W(Et,fe){return new _t(Et,fe)}var It=W.fn=W.prototype=_t.prototype={constructor:W,__cash:!0,length:0,splice:U};It.get=function(Et){return Et===void 0?V.call(this):this[Et<0?Et+this.length:Et]},It.eq=function(Et){return W(this.get(Et))},It.first=function(){return this.eq(0)},It.last=function(){return this.eq(-1)},It.map=function(Et){return W(N.call(this,function(fe,Pe){return Et.call(fe,Pe,fe)}))},It.slice=function(){return W(V.apply(this,arguments))};var $t=/(?:^\w|[A-Z]|\b\w)/g,Yt=/[\s-_]+/g;function Ne(Et){return Et.replace($t,function(fe,Pe){return fe[Pe?"toUpperCase":"toLowerCase"]()}).replace(Yt,"")}function et(Et,fe){for(var Pe=0,Ye=Et.length;Pe<Ye&&fe.call(Et[Pe],Et[Pe],Pe,Et)!==!1;Pe++);}W.camelCase=Ne,W.each=et,It.each=function(Et){return et(this,function(fe,Pe){return Et.call(fe,Pe,fe)}),this},It.removeProp=function(Et){return this.each(function(fe,Pe){delete Pe[Et]})},W.extend=It.extend=function(Et){Et===void 0&&(Et=this);for(var fe=arguments,Pe=fe.length,Ye=Pe<2?0:1;Ye<Pe;Ye++)for(var Cr in fe[Ye])Et[Cr]=fe[Ye][Cr];return Et};var Tt=1;function jt(Et,fe){var Pe=Et&&(Et.matches||Et.webkitMatchesSelector||Et.mozMatchesSelector||Et.msMatchesSelector||Et.oMatchesSelector);return!!Pe&&Pe.call(Et,fe)}function zt(Et){return typeof Et=="function"}function Ht(Et){return typeof Et=="string"}function Dt(Et){return!isNaN(parseFloat(Et))&&isFinite(Et)}W.guid=Tt,W.matches=jt,W.isFunction=zt,W.isString=Ht,W.isNumeric=Dt;var St=Array.isArray;function Vt(Et){return Ht(Et)?function(fe,Pe){return jt(Pe,Et)}:Et.__cash?function(fe,Pe){return Et.is(Pe)}:function(fe,Pe,Ye){return Pe===Ye}}W.isArray=St,It.prop=function(Et,fe){if(Et){if(Ht(Et))return arguments.length<2?this[0]&&this[0][Et]:this.each(function(Ye,Cr){Cr[Et]=fe});for(var Pe in Et)this.prop(Pe,Et[Pe]);return this}},It.filter=function(Et){if(!Et)return W();var fe=zt(Et)?Et:Vt(Et);return W(R.call(this,function(Pe,Ye){return fe.call(Pe,Ye,Pe,Et)}))};var Me=/\S+/g;function de(Et){return Ht(Et)&&Et.match(Me)||[]}function Le(Et){return Et.filter(function(fe,Pe,Ye){return Ye.indexOf(fe)===Pe})}function ar(Et,fe,Pe){if(Et.nodeType===1){var Ye=dt.getComputedStyle(Et,null);return fe?Pe?Ye.getPropertyValue(fe):Ye[fe]:Ye}}function Er(Et,fe){return parseInt(ar(Et,fe),10)||0}It.hasClass=function(Et){var fe=de(Et),Pe=!1;return fe.length&&this.each(function(Ye,Cr){return!(Pe=Cr.classList.contains(fe[0]))}),Pe},It.removeAttr=function(Et){var fe=de(Et);return fe.length?this.each(function(Pe,Ye){et(fe,function(Cr){Ye.removeAttribute(Cr)})}):this},It.attr=function(Et,fe){if(Et){if(Ht(Et)){if(arguments.length<2){if(!this[0])return;var Pe=this[0].getAttribute(Et);return Pe===null?void 0:Pe}return fe===null?this.removeAttr(Et):this.each(function(Cr,Wr){Wr.setAttribute(Et,fe)})}for(var Ye in Et)this.attr(Ye,Et[Ye]);return this}},It.toggleClass=function(Et,fe){var Pe=de(Et),Ye=fe!==void 0;return Pe.length?this.each(function(Cr,Wr){et(Pe,function(zn){Ye?fe?Wr.classList.add(zn):Wr.classList.remove(zn):Wr.classList.toggle(zn)})}):this},It.addClass=function(Et){return this.toggleClass(Et,!0)},It.removeClass=function(Et){return arguments.length?this.toggleClass(Et,!1):this.attr("class","")},W.unique=Le,It.add=function(Et,fe){return W(Le(this.get().concat(W(Et,fe).get())))};var Nr=/^--/;function Ar(Et){return Nr.test(Et)}var Fr={},Xe=vt&&vt.createElement("div"),at=Xe?Xe.style:{},kt=["webkit","moz","ms","o"];function Gt(Et,fe){if(fe===void 0&&(fe=Ar(Et)),fe)return Et;if(!Fr[Et]){var Pe=Ne(Et),Ye=""+Pe.charAt(0).toUpperCase()+Pe.slice(1);et((Pe+" "+kt.join(Ye+" ")+Ye).split(" "),function(Cr){if(Cr in at)return Fr[Et]=Cr,!1})}return Fr[Et]}W.prefixedProp=Gt;var ye={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Ae(Et,fe,Pe){return Pe===void 0&&(Pe=Ar(Et)),Pe||ye[Et]||!Dt(fe)?fe:fe+"px"}It.css=function(Et,fe){if(Ht(Et)){var Pe=Ar(Et);return Et=Gt(Et,Pe),arguments.length<2?this[0]&&ar(this[0],Et,Pe):Et?(fe=Ae(Et,fe,Pe),this.each(function(Cr,Wr){Wr.nodeType===1&&(Pe?Wr.style.setProperty(Et,fe):Wr.style[Et]=fe)})):this}for(var Ye in Et)this.css(Ye,Et[Ye]);return this};var pt="__cashData",le=/^data-(.*)/;function se(Et){return Et[pt]=Et[pt]||{}}function or(Et,fe){var Pe=se(Et);if(fe){if(!(fe in Pe)){var Ye=Et.dataset?Et.dataset[fe]||Et.dataset[Ne(fe)]:W(Et).attr("data-"+fe);if(Ye!==void 0){try{Ye=JSON.parse(Ye)}catch{}Pe[fe]=Ye}}return Pe[fe]}return Pe}function mr(Et,fe){return Er(Et,"border"+(fe?"Left":"Top")+"Width")+Er(Et,"padding"+(fe?"Left":"Top"))+Er(Et,"padding"+(fe?"Right":"Bottom"))+Er(Et,"border"+(fe?"Right":"Bottom")+"Width")}function er(Et,fe){for(var Pe=0,Ye=fe.length;Pe<Ye;Pe++)if(Et.indexOf(fe[Pe])<0)return!1;return!0}function Dr(Et,fe,Pe){et(Et[Pe],function(Ye){Ye[0];var Cr=Ye[1];fe.removeEventListener(Pe,Cr)}),delete Et[Pe]}W.hasData=function(Et){return pt in Et},It.data=function(Et,fe){var Pe=this;if(!Et)return this[0]?(et(this[0].attributes,function(Cr){var Wr=Cr.name.match(le);Wr&&Pe.data(Wr[1])}),or(this[0])):void 0;if(Ht(Et))return fe===void 0?this[0]&&or(this[0],Et):this.each(function(Cr,Wr){return function(zn,Dn,lo){se(zn)[Dn]=lo}(Wr,Et,fe)});for(var Ye in Et)this.data(Ye,Et[Ye]);return this},It.removeData=function(Et){return this.each(function(fe,Pe){return function(Ye,Cr){Cr===void 0?delete Ye[pt]:delete se(Ye)[Cr]}(Pe,Et)})},et(["Width","Height"],function(Et){It["inner"+Et]=function(){if(this[0])return this[0]===dt?dt["inner"+Et]:this[0]["client"+Et]}}),et(["width","height"],function(Et,fe){It[Et]=function(Pe){return this[0]?arguments.length?(Pe=parseInt(Pe,10),this.each(function(Ye,Cr){if(Cr.nodeType===1){var Wr=ar(Cr,"boxSizing");Cr.style[Et]=Ae(Et,Pe+(Wr==="border-box"?mr(Cr,!fe):0))}})):this[0]===dt?this[0][Ne("outer-"+Et)]:this[0].getBoundingClientRect()[Et]-mr(this[0],!fe):Pe===void 0?void 0:this}}),et(["Width","Height"],function(Et,fe){It["outer"+Et]=function(Pe){if(this[0])return this[0]===dt?dt["outer"+Et]:this[0]["offset"+Et]+(Pe?Er(this[0],"margin"+(fe?"Top":"Left"))+Er(this[0],"margin"+(fe?"Bottom":"Right")):0)}});var rn="__cashEvents",yt=".";function Wt(Et){return Et[rn]=Et[rn]||{}}function ne(Et){var fe=Et.split(yt);return[fe[0],fe.slice(1).sort()]}function Ft(Et,fe,Pe,Ye){var Cr=Wt(Et);if(fe){var Wr=Cr[fe];if(!Wr)return;Ye&&(Ye.guid=Ye.guid||Tt++),Cr[fe]=Wr.filter(function(zn){var Dn=zn[0],lo=zn[1];if(Ye&&lo.guid!==Ye.guid||!er(Dn,Pe))return!0;Et.removeEventListener(fe,lo)})}else if(Pe&&Pe.length)for(fe in Cr)Ft(Et,fe,Pe,Ye);else for(fe in Cr)Dr(Cr,Et,fe)}It.off=function(Et,fe){var Pe=this;return Et===void 0?this.each(function(Ye,Cr){return Ft(Cr)}):et(de(Et),function(Ye){var Cr=ne(Ye),Wr=Cr[0],zn=Cr[1];Pe.each(function(Dn,lo){return Ft(lo,Wr,zn,fe)})}),this},It.on=function(Et,fe,Pe,Ye){var Cr=this;if(!Ht(Et)){for(var Wr in Et)this.on(Wr,fe,Et[Wr]);return this}return zt(fe)&&(Pe=fe,fe=!1),et(de(Et),function(zn){var Dn=ne(zn),lo=Dn[0],ho=Dn[1];Cr.each(function(vn,ro){var In=function Yo(go){if(!go.namespace||er(ho,go.namespace.split(yt))){var Fo=ro;if(fe){for(var Co=go.target;!jt(Co,fe);)if(Co===ro||!(Co=Co.parentNode))return;Fo=Co}go.namespace=go.namespace||"";var yo=Pe.call(Fo,go,go.data);Ye&&Ft(ro,lo,ho,Yo),yo===!1&&(go.preventDefault(),go.stopPropagation())}};In.guid=Pe.guid=Pe.guid||Tt++,function(Yo,go,Fo,Co){Co.guid=Co.guid||Tt++;var yo=Wt(Yo);yo[go]=yo[go]||[],yo[go].push([Fo,Co]),Yo.addEventListener(go,Co)}(ro,lo,ho,In)})}),this},It.one=function(Et,fe,Pe){return this.on(Et,fe,Pe,!0)},It.ready=function(Et){var fe=function(){return Et(W)};return vt.readyState!=="loading"?setTimeout(fe):vt.addEventListener("DOMContentLoaded",fe),this},It.trigger=function(Et,fe){var Pe=Et;if(Ht(Et)){var Ye=ne(Et),Cr=Ye[0],Wr=Ye[1];(Pe=vt.createEvent("HTMLEvents")).initEvent(Cr,!0,!0),Pe.namespace=Wr.join(yt)}return Pe.data=fe,this.each(function(zn,Dn){Dn.dispatchEvent(Pe)})};var _e=/select-one/i,Zt=/select-multiple/i;function gr(Et){var fe=Et.type;return _e.test(fe)?function(Pe){return Pe.selectedIndex<0?null:Pe.options[Pe.selectedIndex].value}(Et):Zt.test(fe)?function(Pe){var Ye=[];return et(Pe.options,function(Cr){!Cr.selected||Cr.disabled||Cr.parentNode.disabled||Ye.push(Cr.value)}),Ye}(Et):Et.value}var fr=/%20/g,nn=/file|reset|submit|button|image/i,tn=/radio|checkbox/i;It.serialize=function(){var Et="";return this.each(function(fe,Pe){et(Pe.elements||[Pe],function(Ye){if(!Ye.disabled&&Ye.name&&Ye.tagName!=="FIELDSET"&&!nn.test(Ye.type)&&(!tn.test(Ye.type)||Ye.checked)){var Cr=gr(Ye);Cr!==void 0&&et(St(Cr)?Cr:[Cr],function(Wr){Et+=function(zn,Dn){return"&"+encodeURIComponent(zn)+"="+encodeURIComponent(Dn).replace(fr,"+")}(Ye.name,Wr)})}})}),Et.substr(1)},It.val=function(Et){return Et===void 0?this[0]&&gr(this[0]):this.each(function(fe,Pe){var Ye=Zt.test(Pe.type),Cr=Et===null?Ye?[]:"":Et;Ye&&St(Cr)?et(Pe.options,function(Wr){Wr.selected=Cr.indexOf(Wr.value)>=0}):Pe.value=Cr})},It.clone=function(){return this.map(function(Et,fe){return fe.cloneNode(!0)})},It.detach=function(){return this.each(function(Et,fe){fe.parentNode&&fe.parentNode.removeChild(fe)})};var wr,tr=/^\s*<(\w+)[^>]*>/,Un=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function Rt(Et){if(function(){if(!wr){var Ye=vt.createElement("table"),Cr=vt.createElement("tr");wr={"*":vt.createElement("div"),tr:vt.createElement("tbody"),td:Cr,th:Cr,thead:Ye,tbody:Ye,tfoot:Ye}}}(),!Ht(Et))return[];if(Un.test(Et))return[vt.createElement(RegExp.$1)];var fe=tr.test(Et)&&RegExp.$1,Pe=wr[fe]||wr["*"];return Pe.innerHTML=Et,W(Pe.childNodes).detach().get()}function ee(Et,fe,Pe){if(fe!==void 0){var Ye=Ht(fe);!Ye&&fe.length?et(fe,function(Cr){return ee(Et,Cr,Pe)}):et(Et,Ye?function(Cr){Cr.insertAdjacentHTML(Pe?"afterbegin":"beforeend",fe)}:function(Cr,Wr){return function(zn,Dn,lo){lo?zn.insertBefore(Dn,zn.childNodes[0]):zn.appendChild(Dn)}(Cr,Wr?fe.cloneNode(!0):fe,Pe)})}}W.parseHTML=Rt,It.empty=function(){var Et=this[0];if(Et)for(;Et.firstChild;)Et.removeChild(Et.firstChild);return this},It.append=function(){var Et=this;return et(arguments,function(fe){ee(Et,fe)}),this},It.appendTo=function(Et){return ee(W(Et),this),this},It.html=function(Et){if(Et===void 0)return this[0]&&this[0].innerHTML;var fe=Et.nodeType?Et[0].outerHTML:Et;return this.each(function(Pe,Ye){Ye.innerHTML=fe})},It.insertAfter=function(Et){var fe=this;return W(Et).each(function(Pe,Ye){var Cr=Ye.parentNode;fe.each(function(Wr,zn){Cr.insertBefore(Pe?zn.cloneNode(!0):zn,Ye.nextSibling)})}),this},It.after=function(){var Et=this;return et(F.apply(arguments),function(fe){F.apply(W(fe).slice()).insertAfter(Et)}),this},It.insertBefore=function(Et){var fe=this;return W(Et).each(function(Pe,Ye){var Cr=Ye.parentNode;fe.each(function(Wr,zn){Cr.insertBefore(Pe?zn.cloneNode(!0):zn,Ye)})}),this},It.before=function(){var Et=this;return et(arguments,function(fe){W(fe).insertBefore(Et)}),this},It.prepend=function(){var Et=this;return et(arguments,function(fe){ee(Et,fe,!0)}),this},It.prependTo=function(Et){return ee(W(Et),F.apply(this.slice()),!0),this},It.remove=function(){return this.detach().off()},It.replaceWith=function(Et){var fe=this;return this.each(function(Pe,Ye){var Cr=Ye.parentNode;if(Cr){var Wr=Pe?W(Et).clone():W(Et);if(!Wr[0])return fe.remove(),!1;Cr.replaceChild(Wr[0],Ye),W(Wr[0]).after(Wr.slice(1))}})},It.replaceAll=function(Et){return W(Et).replaceWith(this),this},It.text=function(Et){return Et===void 0?this[0]?this[0].textContent:"":this.each(function(fe,Pe){Pe.textContent=Et})};var je=vt&&vt.documentElement;It.offset=function(){var Et=this[0];if(Et){var fe=Et.getBoundingClientRect();return{top:fe.top+dt.pageYOffset-je.clientTop,left:fe.left+dt.pageXOffset-je.clientLeft}}},It.offsetParent=function(){return W(this[0]&&this[0].offsetParent)},It.position=function(){var Et=this[0];if(Et)return{left:Et.offsetLeft,top:Et.offsetTop}},It.children=function(Et){var fe=[];return this.each(function(Pe,Ye){$.apply(fe,Ye.children)}),fe=W(Le(fe)),Et?fe.filter(function(Pe,Ye){return jt(Ye,Et)}):fe},It.contents=function(){var Et=[];return this.each(function(fe,Pe){$.apply(Et,Pe.tagName==="IFRAME"?[Pe.contentDocument]:Pe.childNodes)}),W(Et.length&&Le(Et))},It.find=function(Et){for(var fe=[],Pe=0,Ye=this.length;Pe<Ye;Pe++){var Cr=Q(Et,this[Pe]);Cr.length&&$.apply(fe,Cr)}return W(fe.length&&Le(fe))},It.has=function(Et){var fe=Ht(Et)?function(Pe,Ye){return!!Q(Et,Ye).length}:function(Pe,Ye){return Ye.contains(Et)};return this.filter(fe)},It.is=function(Et){if(!Et||!this[0])return!1;var fe=Vt(Et),Pe=!1;return this.each(function(Ye,Cr){return!(Pe=fe(Ye,Cr,Et))}),Pe},It.next=function(){return W(this[0]&&this[0].nextElementSibling)},It.not=function(Et){if(!Et||!this[0])return this;var fe=Vt(Et);return this.filter(function(Pe,Ye){return!fe(Pe,Ye,Et)})},It.parent=function(){var Et=[];return this.each(function(fe,Pe){Pe&&Pe.parentNode&&Et.push(Pe.parentNode)}),W(Le(Et))},It.index=function(Et){var fe=Et?W(Et)[0]:this[0],Pe=Et?this:W(fe).parent().children();return I.call(Pe,fe)},It.closest=function(Et){return Et&&this[0]?this.is(Et)?this.filter(Et):this.parent().closest(Et):W()},It.parents=function(Et){var fe,Pe=[];return this.each(function(Ye,Cr){for(fe=Cr;fe&&fe.parentNode&&fe!==vt.body.parentNode;)fe=fe.parentNode,(!Et||Et&&jt(fe,Et))&&Pe.push(fe)}),W(Le(Pe))},It.prev=function(){return W(this[0]&&this[0].previousElementSibling)},It.siblings=function(){var Et=this[0];return this.parent().children().filter(function(fe,Pe){return Pe!==Et})};const Je=W},491:(k,B,ct)=>{ct.d(B,{$Q:()=>tt,FW:()=>U,G1:()=>I,GX:()=>$t,L_:()=>$,Mx:()=>N,R3:()=>xt,SJ:()=>It,cx:()=>F,dL:()=>X,pn:()=>it,rw:()=>_t,sE:()=>V,t3:()=>W,ut:()=>Q});var vt=ct(50),dt=function(Yt,Ne,et){if(et||arguments.length===2)for(var Tt,jt=0,zt=Ne.length;jt<zt;jt++)!Tt&&jt in Ne||(Tt||(Tt=Array.prototype.slice.call(Ne,0,jt)),Tt[jt]=Ne[jt]);return Yt.concat(Tt||Array.prototype.slice.call(Ne))},H="tag",R="attributes",I="transitionend oTransitionEnd transitionend webkitTransitionEnd",N=function(Yt){return Yt&&Yt.nodeType===9},$=function(Yt){var Ne=Yt&&Yt.parentNode;Ne&&Ne.removeChild(Yt)};function F(){for(var Yt=[],Ne=0;Ne<arguments.length;Ne++)Yt[Ne]=arguments[Ne];return(Array.isArray(Yt[0])?Yt[0]:dt([],Yt,!0)).filter(Boolean).join(" ")}var V=function(Yt,Ne){return Yt.querySelectorAll(Ne)},U=function(Yt,Ne){return Ne===void 0&&(Ne={}),Yt&&Yt.setAttribute&&(0,vt.each)(Ne,function(et,Tt){return Yt.setAttribute(Tt,et)})},it=function(Yt){return Yt&&!!(Yt.offsetWidth||Yt.offsetHeight||Yt.getClientRects().length)},X=function(Yt,Ne){var et;(et=Yt.parentNode)===null||et===void 0||et.replaceChild(Ne,Yt)},tt=function(Yt,Ne,et){var Tt=Yt.childNodes,jt=Tt.length,zt=(0,vt.isUndefined)(et)?jt:et;(0,vt.isString)(Ne)&&(Yt.insertAdjacentHTML("beforeEnd",Ne),Ne=Yt.lastChild,Yt.removeChild(Ne)),zt>=jt?Yt.appendChild(Ne):Yt.insertBefore(Ne,Tt[zt])},xt=function(Yt,Ne){return tt(Yt,Ne)},Q=function(Yt,Ne,et){Ne===void 0&&(Ne={});var Tt=document.createElement(Yt);return Ne&&(0,vt.each)(Ne,function(jt,zt){return Tt.setAttribute(zt,jt)}),et&&((0,vt.isString)(et)?Tt.innerHTML=et:Tt.appendChild(et)),Tt},_t=function(Yt){return document.createTextNode(Yt)},W=function(Yt,Ne){var et,Tt=Yt.type;try{et=new window[Ne](Tt,Yt)}catch{(et=document.createEvent(Ne)).initEvent(Tt,!0,!0)}return et._parentEvent=Yt,Tt.indexOf("key")===0&&(et.keyCodeVal=Yt.keyCode,["keyCode","which"].forEach(function(jt){Object.defineProperty(et,jt,{get:function(){return this.keyCodeVal}})})),et},It=function(Yt,Ne){Ne===void 0&&(Ne=[]),(Array.isArray(Ne)?Ne:[Ne]).forEach(function(et){var Tt=et[H]||"div",jt=et[R]||{},zt=document.createElement(Tt);(0,vt.each)(jt,function(Ht,Dt){zt.setAttribute(Dt,Ht)}),Yt.appendChild(zt)})},$t=function(Yt){var Ne=(Yt==null?void 0:Yt.ownerDocument)||document,et=Ne.documentElement,Tt=Ne.defaultView||window;return{x:(Tt.pageXOffset||et.scrollLeft||0)-(et.clientLeft||0),y:(Tt.pageYOffset||et.scrollTop||0)-(et.clientTop||0)}}},163:(k,B,ct)=>{ct.r(B),ct.d(B,{appendStyles:()=>it,buildBase64UrlFromSvg:()=>Ae,camelCase:()=>W,capitalize:()=>Fr,createId:()=>ye,deepMerge:()=>Dt,escape:()=>zt,escapeNodeContent:()=>Ht,find:()=>jt,getElRect:()=>Vt,getElement:()=>Yt,getGlobal:()=>N,getKeyChar:()=>Le,getKeyCode:()=>de,getModel:()=>St,getPointerEvent:()=>Me,getUiClass:()=>U,getUnitFromValue:()=>Q,getViewEl:()=>kt,hasDnd:()=>$t,hasWin:()=>I,isCommentNode:()=>et,isComponent:()=>Xe,isDef:()=>R,isEmptyObj:()=>Ar,isEnterKey:()=>Er,isEscKey:()=>ar,isObject:()=>Nr,isRule:()=>at,isTaggableNode:()=>Tt,isTextNode:()=>Ne,matches:()=>V,normalizeFloat:()=>It,off:()=>xt,on:()=>tt,setViewEl:()=>Gt,shallowDiff:()=>X,toLowerCase:()=>$,upFirst:()=>_t});var vt=ct(50),dt=function(){return dt=Object.assign||function(pt){for(var le,se=1,or=arguments.length;se<or;se++)for(var mr in le=arguments[se])Object.prototype.hasOwnProperty.call(le,mr)&&(pt[mr]=le[mr]);return pt},dt.apply(this,arguments)},H=function(pt,le,se){if(se||arguments.length===2)for(var or,mr=0,er=le.length;mr<er;mr++)!or&&mr in le||(or||(or=Array.prototype.slice.call(le,0,mr)),or[mr]=le[mr]);return pt.concat(or||Array.prototype.slice.call(le))},R=function(pt){return pt!==void 0},I=function(){return typeof window<"u"},N=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:ct.g},$=function(pt){return(pt||"").toLowerCase()},F=I()?window.Element.prototype:{},V=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.msMatchesSelector,U=function(pt,le){var se=pt.getConfig(),or=se.stylePrefix;return[se.customUI&&"".concat(or,"cui"),le].filter(function(mr){return mr}).join(" ")},it=function(pt,le){le===void 0&&(le={});var se=(0,vt.isArray)(pt)?H([],pt,!0):[pt];if(se.length){var or=se.shift();if(or&&(!le.unique||!document.querySelector('link[href="'.concat(or,'"]')))){var mr=document.head,er=document.createElement("link");er.href=or,er.rel="stylesheet",le.prepand?mr.insertBefore(er,mr.firstChild):mr.appendChild(er)}it(se)}},X=function(pt,le){var se={},or=(0,vt.keys)(le);for(var mr in pt)if(pt.hasOwnProperty(mr)){var er=pt[mr],Dr=le[mr];or.indexOf(mr)>=0?er!==Dr&&(se[mr]=Dr):se[mr]=null}for(var mr in le)le.hasOwnProperty(mr)&&(0,vt.isUndefined)(pt[mr])&&(se[mr]=le[mr]);return se},tt=function(pt,le,se,or){var mr=le.split(/\s+/);pt=pt instanceof Array?pt:[pt];for(var er=function(rn){pt.forEach(function(yt){return yt&&yt.addEventListener(mr[rn],se,or)})},Dr=0;Dr<mr.length;++Dr)er(Dr)},xt=function(pt,le,se,or){var mr=le.split(/\s+/);pt=pt instanceof Array?pt:[pt];for(var er=function(rn){pt.forEach(function(yt){return yt&&yt.removeEventListener(mr[rn],se,or)})},Dr=0;Dr<mr.length;++Dr)er(Dr)},Q=function(pt){return pt.replace(parseFloat(pt),"")},_t=function(pt){return pt[0].toUpperCase()+pt.toLowerCase().slice(1)},W=function(pt){return pt.replace(/-./g,function(le){return le[1].toUpperCase()})},It=function(pt,le,se){le===void 0&&(le=1),se===void 0&&(se=0);var or=0;if(isNaN(pt))return se;if(pt=parseFloat(pt),Math.floor(pt)!==pt){var mr=le.toString().split(".")[1];or=mr?mr.length:0}return or?parseFloat(pt.toFixed(or)):pt},$t=function(pt){return"draggable"in document.createElement("i")&&(!pt||pt.config.nativeDnD)},Yt=function(pt){return(0,vt.isElement)(pt)||Ne(pt)?pt:pt&&pt.getEl?pt.getEl():void 0},Ne=function(pt){return pt&&pt.nodeType===3},et=function(pt){return pt&&pt.nodeType===8},Tt=function(pt){return pt&&!Ne(pt)&&!et(pt)},jt=function(pt,le){var se=null;return pt.some(function(or,mr){return le(or,mr,pt)?(se=or,1):0}),se},zt=function(pt){return pt===void 0&&(pt=""),"".concat(pt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Ht=function(pt){return pt===void 0&&(pt=""),"".concat(pt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Dt=function(){for(var pt=[],le=0;le<arguments.length;le++)pt[le]=arguments[le];for(var se=dt({},pt[0]),or=1;or<pt.length;or++){var mr=dt({},pt[or]);for(var er in mr){var Dr=se[er],rn=mr[er];Nr(Dr)&&Nr(rn)?se[er]=Dt(Dr,rn):se[er]=rn}}return se},St=function(pt,le){var se=pt;return!le&&pt&&pt.__cashData?se=pt.__cashData.model:(0,vt.isElement)(pt)&&(se=le(pt).data("model")),se},Vt=function(pt){var le,se={top:0,left:0,width:0,height:0};if(!pt)return se;if(Ne(pt)){var or=document.createRange();or.selectNode(pt),le=or.getBoundingClientRect(),or.detach()}return le||(pt.getBoundingClientRect?pt.getBoundingClientRect():se)},Me=function(pt){return pt.touches&&pt.touches[0]?pt.touches[0]:pt},de=function(pt){return pt.which||pt.keyCode},Le=function(pt){return String.fromCharCode(de(pt))},ar=function(pt){return de(pt)===27},Er=function(pt){return de(pt)===13},Nr=function(pt){return pt!==null&&!Array.isArray(pt)&&typeof pt=="object"},Ar=function(pt){return Object.keys(pt).length<=0},Fr=function(pt){return pt===void 0&&(pt=""),pt&&pt.charAt(0).toUpperCase()+pt.substring(1)},Xe=function(pt){return pt&&pt.toHTML},at=function(pt){return pt&&pt.toCSS},kt=function(pt){return pt.__gjsv},Gt=function(pt,le){pt.__gjsv=le},ye=function(pt){pt===void 0&&(pt=16);for(var le="",se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",or=se.length,mr=0;mr<pt;mr++)le+=se.charAt(Math.floor(Math.random()*or));return le},Ae=function(pt){if(pt&&pt.substr(0,4)==="<svg"){var le="";return I()?le=window.btoa(pt):typeof Buffer<"u"&&(le=Buffer.from(pt,"utf8").toString("base64")),le?"data:image/svg+xml;base64,".concat(le):pt}return pt}},828:(k,B,ct)=>{var vt={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function dt(R){var I=H(R);return ct(I)}function H(R){if(!ct.o(vt,R)){var I=new Error("Cannot find module '"+R+"'");throw I.code="MODULE_NOT_FOUND",I}return vt[R]}dt.keys=function(){return Object.keys(vt)},dt.resolve=H,k.exports=dt,dt.id=828},50:(k,B,ct)=>{ct.r(B),ct.d(B,{VERSION:()=>dt,after:()=>xi,all:()=>Si,allKeys:()=>Je,any:()=>es,assign:()=>So,before:()=>hs,bind:()=>qi,bindAll:()=>Ha,chain:()=>il,chunk:()=>he,clone:()=>ao,collect:()=>pn,compact:()=>nc,compose:()=>ka,constant:()=>Dr,contains:()=>fi,countBy:()=>ri,create:()=>Mo,debounce:()=>bi,default:()=>Ir,defaults:()=>Gi,defer:()=>Ca,delay:()=>ts,detect:()=>li,difference:()=>la,drop:()=>sa,each:()=>Gn,escape:()=>Yr,every:()=>Si,extend:()=>yo,extendOwn:()=>So,filter:()=>ia,find:()=>li,findIndex:()=>Ci,findKey:()=>Yi,findLastIndex:()=>Zo,findWhere:()=>ci,first:()=>pi,flatten:()=>ni,foldl:()=>Ii,foldr:()=>Hi,forEach:()=>Gn,functions:()=>Fo,get:()=>Lo,groupBy:()=>Il,has:()=>fn,head:()=>pi,identity:()=>Oo,include:()=>fi,includes:()=>fi,indexBy:()=>os,indexOf:()=>sn,initial:()=>Bi,inject:()=>Ii,intersection:()=>Xi,invert:()=>go,invoke:()=>ll,isArguments:()=>or,isArray:()=>pt,isArrayBuffer:()=>Nr,isBoolean:()=>Ht,isDataView:()=>Ae,isDate:()=>de,isElement:()=>Dt,isEmpty:()=>nn,isEqual:()=>je,isError:()=>ar,isFinite:()=>mr,isFunction:()=>Xe,isMap:()=>lo,isMatch:()=>tn,isNaN:()=>er,isNull:()=>jt,isNumber:()=>Me,isObject:()=>Tt,isRegExp:()=>Le,isSet:()=>vn,isString:()=>Vt,isSymbol:()=>Er,isTypedArray:()=>_e,isUndefined:()=>zt,isWeakMap:()=>ho,isWeakSet:()=>ro,iteratee:()=>ir,keys:()=>fr,last:()=>is,lastIndexOf:()=>Do,map:()=>pn,mapObject:()=>Hr,matcher:()=>bo,matches:()=>bo,max:()=>rs,memoize:()=>Ns,methods:()=>Fo,min:()=>Ro,mixin:()=>Be,negate:()=>Ki,noop:()=>wn,now:()=>Mt,object:()=>gt,omit:()=>_c,once:()=>gs,pairs:()=>Yo,partial:()=>oa,partition:()=>Jo,pick:()=>Ua,pluck:()=>Dl,property:()=>En,propertyOf:()=>Nn,random:()=>cr,range:()=>Nt,reduce:()=>Ii,reduceRight:()=>Hi,reject:()=>wi,rest:()=>sa,restArguments:()=>et,result:()=>jo,sample:()=>Ni,select:()=>ia,shuffle:()=>ns,size:()=>wc,some:()=>es,sortBy:()=>aa,sortedIndex:()=>An,tail:()=>sa,take:()=>pi,tap:()=>Xn,template:()=>ol,templateSettings:()=>gn,throttle:()=>Ba,times:()=>Xr,toArray:()=>Xo,toPath:()=>$r,transpose:()=>Oi,unescape:()=>en,union:()=>ca,uniq:()=>ys,unique:()=>ys,uniqueId:()=>xa,unzip:()=>Oi,values:()=>In,where:()=>Zi,without:()=>ms,wrap:()=>Vs,zip:()=>ua});var vt={};ct.r(vt),ct.d(vt,{VERSION:()=>dt,after:()=>xi,all:()=>Si,allKeys:()=>Je,any:()=>es,assign:()=>So,before:()=>hs,bind:()=>qi,bindAll:()=>Ha,chain:()=>il,chunk:()=>he,clone:()=>ao,collect:()=>pn,compact:()=>nc,compose:()=>ka,constant:()=>Dr,contains:()=>fi,countBy:()=>ri,create:()=>Mo,debounce:()=>bi,default:()=>Re,defaults:()=>Gi,defer:()=>Ca,delay:()=>ts,detect:()=>li,difference:()=>la,drop:()=>sa,each:()=>Gn,escape:()=>Yr,every:()=>Si,extend:()=>yo,extendOwn:()=>So,filter:()=>ia,find:()=>li,findIndex:()=>Ci,findKey:()=>Yi,findLastIndex:()=>Zo,findWhere:()=>ci,first:()=>pi,flatten:()=>ni,foldl:()=>Ii,foldr:()=>Hi,forEach:()=>Gn,functions:()=>Fo,get:()=>Lo,groupBy:()=>Il,has:()=>fn,head:()=>pi,identity:()=>Oo,include:()=>fi,includes:()=>fi,indexBy:()=>os,indexOf:()=>sn,initial:()=>Bi,inject:()=>Ii,intersection:()=>Xi,invert:()=>go,invoke:()=>ll,isArguments:()=>or,isArray:()=>pt,isArrayBuffer:()=>Nr,isBoolean:()=>Ht,isDataView:()=>Ae,isDate:()=>de,isElement:()=>Dt,isEmpty:()=>nn,isEqual:()=>je,isError:()=>ar,isFinite:()=>mr,isFunction:()=>Xe,isMap:()=>lo,isMatch:()=>tn,isNaN:()=>er,isNull:()=>jt,isNumber:()=>Me,isObject:()=>Tt,isRegExp:()=>Le,isSet:()=>vn,isString:()=>Vt,isSymbol:()=>Er,isTypedArray:()=>_e,isUndefined:()=>zt,isWeakMap:()=>ho,isWeakSet:()=>ro,iteratee:()=>ir,keys:()=>fr,last:()=>is,lastIndexOf:()=>Do,map:()=>pn,mapObject:()=>Hr,matcher:()=>bo,matches:()=>bo,max:()=>rs,memoize:()=>Ns,methods:()=>Fo,min:()=>Ro,mixin:()=>Be,negate:()=>Ki,noop:()=>wn,now:()=>Mt,object:()=>gt,omit:()=>_c,once:()=>gs,pairs:()=>Yo,partial:()=>oa,partition:()=>Jo,pick:()=>Ua,pluck:()=>Dl,property:()=>En,propertyOf:()=>Nn,random:()=>cr,range:()=>Nt,reduce:()=>Ii,reduceRight:()=>Hi,reject:()=>wi,rest:()=>sa,restArguments:()=>et,result:()=>jo,sample:()=>Ni,select:()=>ia,shuffle:()=>ns,size:()=>wc,some:()=>es,sortBy:()=>aa,sortedIndex:()=>An,tail:()=>sa,take:()=>pi,tap:()=>Xn,template:()=>ol,templateSettings:()=>gn,throttle:()=>Ba,times:()=>Xr,toArray:()=>Xo,toPath:()=>$r,transpose:()=>Oi,unescape:()=>en,union:()=>ca,uniq:()=>ys,unique:()=>ys,uniqueId:()=>xa,unzip:()=>Oi,values:()=>In,where:()=>Zi,without:()=>ms,wrap:()=>Vs,zip:()=>ua});var dt="1.13.4",H=typeof self=="object"&&self.self===self&&self||typeof Ot.g=="object"&&Ot.g.global===Ot.g&&Ot.g||Function("return this")()||{},R=Array.prototype,I=Object.prototype,N=typeof Symbol<"u"?Symbol.prototype:null,$=R.push,F=R.slice,V=I.toString,U=I.hasOwnProperty,it=typeof ArrayBuffer<"u",X=typeof DataView<"u",tt=Array.isArray,xt=Object.keys,Q=Object.create,_t=it&&ArrayBuffer.isView,W=isNaN,It=isFinite,$t=!{toString:null}.propertyIsEnumerable("toString"),Yt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ne=Math.pow(2,53)-1;function et(lt,Lt){return Lt=Lt==null?lt.length-1:+Lt,function(){for(var ce=Math.max(arguments.length-Lt,0),me=Array(ce),We=0;We<ce;We++)me[We]=arguments[We+Lt];switch(Lt){case 0:return lt.call(this,me);case 1:return lt.call(this,arguments[0],me);case 2:return lt.call(this,arguments[0],arguments[1],me)}var Ve=Array(Lt+1);for(We=0;We<Lt;We++)Ve[We]=arguments[We];return Ve[Lt]=me,lt.apply(this,Ve)}}function Tt(lt){var Lt=typeof lt;return Lt==="function"||Lt==="object"&&!!lt}function jt(lt){return lt===null}function zt(lt){return lt===void 0}function Ht(lt){return lt===!0||lt===!1||V.call(lt)==="[object Boolean]"}function Dt(lt){return!(!lt||lt.nodeType!==1)}function St(lt){var Lt="[object "+lt+"]";return function(ce){return V.call(ce)===Lt}}const Vt=St("String"),Me=St("Number"),de=St("Date"),Le=St("RegExp"),ar=St("Error"),Er=St("Symbol"),Nr=St("ArrayBuffer");var Ar=St("Function"),Fr=H.document&&H.document.childNodes;typeof Int8Array!="object"&&typeof Fr!="function"&&(Ar=function(lt){return typeof lt=="function"||!1});const Xe=Ar,at=St("Object");var kt=X&&at(new DataView(new ArrayBuffer(8))),Gt=typeof Map<"u"&&at(new Map),ye=St("DataView");const Ae=kt?function(lt){return lt!=null&&Xe(lt.getInt8)&&Nr(lt.buffer)}:ye,pt=tt||St("Array");function le(lt,Lt){return lt!=null&&U.call(lt,Lt)}var se=St("Arguments");(function(){se(arguments)||(se=function(lt){return le(lt,"callee")})})();const or=se;function mr(lt){return!Er(lt)&&It(lt)&&!isNaN(parseFloat(lt))}function er(lt){return Me(lt)&&W(lt)}function Dr(lt){return function(){return lt}}function rn(lt){return function(Lt){var ce=lt(Lt);return typeof ce=="number"&&ce>=0&&ce<=Ne}}function yt(lt){return function(Lt){return Lt==null?void 0:Lt[lt]}}const Wt=yt("byteLength"),ne=rn(Wt);var Ft=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const _e=it?function(lt){return _t?_t(lt)&&!Ae(lt):ne(lt)&&Ft.test(V.call(lt))}:Dr(!1),Zt=yt("length");function gr(lt,Lt){Lt=function(ur){for(var Lr={},dn=ur.length,jn=0;jn<dn;++jn)Lr[ur[jn]]=!0;return{contains:function(To){return Lr[To]===!0},push:function(To){return Lr[To]=!0,ur.push(To)}}}(Lt);var ce=Yt.length,me=lt.constructor,We=Xe(me)&&me.prototype||I,Ve="constructor";for(le(lt,Ve)&&!Lt.contains(Ve)&&Lt.push(Ve);ce--;)(Ve=Yt[ce])in lt&&lt[Ve]!==We[Ve]&&!Lt.contains(Ve)&&Lt.push(Ve)}function fr(lt){if(!Tt(lt))return[];if(xt)return xt(lt);var Lt=[];for(var ce in lt)le(lt,ce)&&Lt.push(ce);return $t&&gr(lt,Lt),Lt}function nn(lt){if(lt==null)return!0;var Lt=Zt(lt);return typeof Lt=="number"&&(pt(lt)||Vt(lt)||or(lt))?Lt===0:Zt(fr(lt))===0}function tn(lt,Lt){var ce=fr(Lt),me=ce.length;if(lt==null)return!me;for(var We=Object(lt),Ve=0;Ve<me;Ve++){var ur=ce[Ve];if(Lt[ur]!==We[ur]||!(ur in We))return!1}return!0}function wr(lt){return lt instanceof wr?lt:this instanceof wr?void(this._wrapped=lt):new wr(lt)}function tr(lt){return new Uint8Array(lt.buffer||lt,lt.byteOffset||0,Wt(lt))}wr.VERSION=dt,wr.prototype.value=function(){return this._wrapped},wr.prototype.valueOf=wr.prototype.toJSON=wr.prototype.value,wr.prototype.toString=function(){return String(this._wrapped)};var Un="[object DataView]";function Rt(lt,Lt,ce,me){if(lt===Lt)return lt!==0||1/lt==1/Lt;if(lt==null||Lt==null)return!1;if(lt!=lt)return Lt!=Lt;var We=typeof lt;return(We==="function"||We==="object"||typeof Lt=="object")&&ee(lt,Lt,ce,me)}function ee(lt,Lt,ce,me){lt instanceof wr&&(lt=lt._wrapped),Lt instanceof wr&&(Lt=Lt._wrapped);var We=V.call(lt);if(We!==V.call(Lt))return!1;if(kt&&We=="[object Object]"&&Ae(lt)){if(!Ae(Lt))return!1;We=Un}switch(We){case"[object RegExp]":case"[object String]":return""+lt==""+Lt;case"[object Number]":return+lt!=+lt?+Lt!=+Lt:+lt==0?1/+lt==1/Lt:+lt==+Lt;case"[object Date]":case"[object Boolean]":return+lt==+Lt;case"[object Symbol]":return N.valueOf.call(lt)===N.valueOf.call(Lt);case"[object ArrayBuffer]":case Un:return ee(tr(lt),tr(Lt),ce,me)}var Ve=We==="[object Array]";if(!Ve&&_e(lt)){if(Wt(lt)!==Wt(Lt))return!1;if(lt.buffer===Lt.buffer&&lt.byteOffset===Lt.byteOffset)return!0;Ve=!0}if(!Ve){if(typeof lt!="object"||typeof Lt!="object")return!1;var ur=lt.constructor,Lr=Lt.constructor;if(ur!==Lr&&!(Xe(ur)&&ur instanceof ur&&Xe(Lr)&&Lr instanceof Lr)&&"constructor"in lt&&"constructor"in Lt)return!1}me=me||[];for(var dn=(ce=ce||[]).length;dn--;)if(ce[dn]===lt)return me[dn]===Lt;if(ce.push(lt),me.push(Lt),Ve){if((dn=lt.length)!==Lt.length)return!1;for(;dn--;)if(!Rt(lt[dn],Lt[dn],ce,me))return!1}else{var jn,To=fr(lt);if(dn=To.length,fr(Lt).length!==dn)return!1;for(;dn--;)if(!le(Lt,jn=To[dn])||!Rt(lt[jn],Lt[jn],ce,me))return!1}return ce.pop(),me.pop(),!0}function je(lt,Lt){return Rt(lt,Lt)}function Je(lt){if(!Tt(lt))return[];var Lt=[];for(var ce in lt)Lt.push(ce);return $t&&gr(lt,Lt),Lt}function Et(lt){var Lt=Zt(lt);return function(ce){if(ce==null)return!1;var me=Je(ce);if(Zt(me))return!1;for(var We=0;We<Lt;We++)if(!Xe(ce[lt[We]]))return!1;return lt!==zn||!Xe(ce[fe])}}var fe="forEach",Pe="has",Ye=["clear","delete"],Cr=["get",Pe,"set"],Wr=Ye.concat(fe,Cr),zn=Ye.concat(Cr),Dn=["add"].concat(Ye,fe,Pe);const lo=Gt?Et(Wr):St("Map"),ho=Gt?Et(zn):St("WeakMap"),vn=Gt?Et(Dn):St("Set"),ro=St("WeakSet");function In(lt){for(var Lt=fr(lt),ce=Lt.length,me=Array(ce),We=0;We<ce;We++)me[We]=lt[Lt[We]];return me}function Yo(lt){for(var Lt=fr(lt),ce=Lt.length,me=Array(ce),We=0;We<ce;We++)me[We]=[Lt[We],lt[Lt[We]]];return me}function go(lt){for(var Lt={},ce=fr(lt),me=0,We=ce.length;me<We;me++)Lt[lt[ce[me]]]=ce[me];return Lt}function Fo(lt){var Lt=[];for(var ce in lt)Xe(lt[ce])&&Lt.push(ce);return Lt.sort()}function Co(lt,Lt){return function(ce){var me=arguments.length;if(Lt&&(ce=Object(ce)),me<2||ce==null)return ce;for(var We=1;We<me;We++)for(var Ve=arguments[We],ur=lt(Ve),Lr=ur.length,dn=0;dn<Lr;dn++){var jn=ur[dn];Lt&&ce[jn]!==void 0||(ce[jn]=Ve[jn])}return ce}}const yo=Co(Je),So=Co(fr),Gi=Co(Je,!0);function Wo(lt){if(!Tt(lt))return{};if(Q)return Q(lt);var Lt=function(){};Lt.prototype=lt;var ce=new Lt;return Lt.prototype=null,ce}function Mo(lt,Lt){var ce=Wo(lt);return Lt&&So(ce,Lt),ce}function ao(lt){return Tt(lt)?pt(lt)?lt.slice():yo({},lt):lt}function Xn(lt,Lt){return Lt(lt),lt}function $r(lt){return pt(lt)?lt:[lt]}function co(lt){return wr.toPath(lt)}function Jn(lt,Lt){for(var ce=Lt.length,me=0;me<ce;me++){if(lt==null)return;lt=lt[Lt[me]]}return ce?lt:void 0}function Lo(lt,Lt,ce){var me=Jn(lt,co(Lt));return zt(me)?ce:me}function fn(lt,Lt){for(var ce=(Lt=co(Lt)).length,me=0;me<ce;me++){var We=Lt[me];if(!le(lt,We))return!1;lt=lt[We]}return!!ce}function Oo(lt){return lt}function bo(lt){return lt=So({},lt),function(Lt){return tn(Lt,lt)}}function En(lt){return lt=co(lt),function(Lt){return Jn(Lt,lt)}}function rt(lt,Lt,ce){if(Lt===void 0)return lt;switch(ce??3){case 1:return function(me){return lt.call(Lt,me)};case 3:return function(me,We,Ve){return lt.call(Lt,me,We,Ve)};case 4:return function(me,We,Ve,ur){return lt.call(Lt,me,We,Ve,ur)}}return function(){return lt.apply(Lt,arguments)}}function Xt(lt,Lt,ce){return lt==null?Oo:Xe(lt)?rt(lt,Lt,ce):Tt(lt)&&!pt(lt)?bo(lt):En(lt)}function ir(lt,Lt){return Xt(lt,Lt,1/0)}function pr(lt,Lt,ce){return wr.iteratee!==ir?wr.iteratee(lt,Lt):Xt(lt,Lt,ce)}function Hr(lt,Lt,ce){Lt=pr(Lt,ce);for(var me=fr(lt),We=me.length,Ve={},ur=0;ur<We;ur++){var Lr=me[ur];Ve[Lr]=Lt(lt[Lr],Lr,lt)}return Ve}function wn(){}function Nn(lt){return lt==null?wn:function(Lt){return Lo(lt,Lt)}}function Xr(lt,Lt,ce){var me=Array(Math.max(0,lt));Lt=rt(Lt,ce,1);for(var We=0;We<lt;We++)me[We]=Lt(We);return me}function cr(lt,Lt){return Lt==null&&(Lt=lt,lt=0),lt+Math.floor(Math.random()*(Lt-lt+1))}wr.toPath=$r,wr.iteratee=ir;const Mt=Date.now||function(){return new Date().getTime()};function xe(lt){var Lt=function(Ve){return lt[Ve]},ce="(?:"+fr(lt).join("|")+")",me=RegExp(ce),We=RegExp(ce,"g");return function(Ve){return Ve=Ve==null?"":""+Ve,me.test(Ve)?Ve.replace(We,Lt):Ve}}const lr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Yr=xe(lr),en=xe(go(lr)),gn=wr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Mr=/(.)^/,Wn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},wo=/\\|'|\r|\n|\u2028|\u2029/g;function $o(lt){return"\\"+Wn[lt]}var Vo=/^\s*(\w|\$)+\s*$/;function ol(lt,Lt,ce){!Lt&&ce&&(Lt=ce),Lt=Gi({},Lt,wr.templateSettings);var me=RegExp([(Lt.escape||Mr).source,(Lt.interpolate||Mr).source,(Lt.evaluate||Mr).source].join("|")+"|$","g"),We=0,Ve="__p+='";lt.replace(me,function(jn,To,za,as,oc){return Ve+=lt.slice(We,oc).replace(wo,$o),We=oc+jn.length,To?Ve+=`'+
((__t=(`+To+`))==null?'':_.escape(__t))+
'`:za?Ve+=`'+
((__t=(`+za+`))==null?'':__t)+
'`:as&&(Ve+=`';
`+as+`
__p+='`),jn}),Ve+=`';
`;var ur,Lr=Lt.variable;if(Lr){if(!Vo.test(Lr))throw new Error("variable is not a bare identifier: "+Lr)}else Ve=`with(obj||{}){
`+Ve+`}
`,Lr="obj";Ve=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Ve+`return __p;
`;try{ur=new Function(Lr,"_",Ve)}catch(jn){throw jn.source=Ve,jn}var dn=function(jn){return ur.call(this,jn,wr)};return dn.source="function("+Lr+`){
`+Ve+"}",dn}function jo(lt,Lt,ce){var me=(Lt=co(Lt)).length;if(!me)return Xe(ce)?ce.call(lt):ce;for(var We=0;We<me;We++){var Ve=lt==null?void 0:lt[Lt[We]];Ve===void 0&&(Ve=ce,We=me),lt=Xe(Ve)?Ve.call(lt):Ve}return lt}var Ra=0;function xa(lt){var Lt=++Ra+"";return lt?lt+Lt:Lt}function il(lt){var Lt=wr(lt);return Lt._chain=!0,Lt}function Go(lt,Lt,ce,me,We){if(!(me instanceof Lt))return lt.apply(ce,We);var Ve=Wo(lt.prototype),ur=lt.apply(Ve,We);return Tt(ur)?ur:Ve}var al=et(function(lt,Lt){var ce=al.placeholder,me=function(){for(var We=0,Ve=Lt.length,ur=Array(Ve),Lr=0;Lr<Ve;Lr++)ur[Lr]=Lt[Lr]===ce?arguments[We++]:Lt[Lr];for(;We<arguments.length;)ur.push(arguments[We++]);return Go(lt,me,this,this,ur)};return me});al.placeholder=wr;const oa=al,qi=et(function(lt,Lt,ce){if(!Xe(lt))throw new TypeError("Bind must be called on a function");var me=et(function(We){return Go(lt,me,Lt,this,ce.concat(We))});return me}),si=rn(Zt);function yi(lt,Lt,ce,me){if(me=me||[],Lt||Lt===0){if(Lt<=0)return me.concat(lt)}else Lt=1/0;for(var We=me.length,Ve=0,ur=Zt(lt);Ve<ur;Ve++){var Lr=lt[Ve];if(si(Lr)&&(pt(Lr)||or(Lr)))if(Lt>1)yi(Lr,Lt-1,ce,me),We=me.length;else for(var dn=0,jn=Lr.length;dn<jn;)me[We++]=Lr[dn++];else ce||(me[We++]=Lr)}return me}const Ha=et(function(lt,Lt){var ce=(Lt=yi(Lt,!1,!1)).length;if(ce<1)throw new Error("bindAll must be passed function names");for(;ce--;){var me=Lt[ce];lt[me]=qi(lt[me],lt)}return lt});function Ns(lt,Lt){var ce=function(me){var We=ce.cache,Ve=""+(Lt?Lt.apply(this,arguments):me);return le(We,Ve)||(We[Ve]=lt.apply(this,arguments)),We[Ve]};return ce.cache={},ce}const ts=et(function(lt,Lt,ce){return setTimeout(function(){return lt.apply(null,ce)},Lt)}),Ca=oa(ts,wr,1);function Ba(lt,Lt,ce){var me,We,Ve,ur,Lr=0;ce||(ce={});var dn=function(){Lr=ce.leading===!1?0:Mt(),me=null,ur=lt.apply(We,Ve),me||(We=Ve=null)},jn=function(){var To=Mt();Lr||ce.leading!==!1||(Lr=To);var za=Lt-(To-Lr);return We=this,Ve=arguments,za<=0||za>Lt?(me&&(clearTimeout(me),me=null),Lr=To,ur=lt.apply(We,Ve),me||(We=Ve=null)):me||ce.trailing===!1||(me=setTimeout(dn,za)),ur};return jn.cancel=function(){clearTimeout(me),Lr=0,me=We=Ve=null},jn}function bi(lt,Lt,ce){var me,We,Ve,ur,Lr,dn=function(){var To=Mt()-We;Lt>To?me=setTimeout(dn,Lt-To):(me=null,ce||(ur=lt.apply(Lr,Ve)),me||(Ve=Lr=null))},jn=et(function(To){return Lr=this,Ve=To,We=Mt(),me||(me=setTimeout(dn,Lt),ce&&(ur=lt.apply(Lr,Ve))),ur});return jn.cancel=function(){clearTimeout(me),me=Ve=Lr=null},jn}function Vs(lt,Lt){return oa(Lt,lt)}function Ki(lt){return function(){return!lt.apply(this,arguments)}}function ka(){var lt=arguments,Lt=lt.length-1;return function(){for(var ce=Lt,me=lt[Lt].apply(this,arguments);ce--;)me=lt[ce].call(this,me);return me}}function xi(lt,Lt){return function(){if(--lt<1)return Lt.apply(this,arguments)}}function hs(lt,Lt){var ce;return function(){return--lt>0&&(ce=Lt.apply(this,arguments)),lt<=1&&(Lt=null),ce}}const gs=oa(hs,2);function Yi(lt,Lt,ce){Lt=pr(Lt,ce);for(var me,We=fr(lt),Ve=0,ur=We.length;Ve<ur;Ve++)if(Lt(lt[me=We[Ve]],me,lt))return me}function sl(lt){return function(Lt,ce,me){ce=pr(ce,me);for(var We=Zt(Lt),Ve=lt>0?0:We-1;Ve>=0&&Ve<We;Ve+=lt)if(ce(Lt[Ve],Ve,Lt))return Ve;return-1}}const Ci=sl(1),Zo=sl(-1);function An(lt,Lt,ce,me){for(var We=(ce=pr(ce,me,1))(Lt),Ve=0,ur=Zt(lt);Ve<ur;){var Lr=Math.floor((Ve+ur)/2);ce(lt[Lr])<We?Ve=Lr+1:ur=Lr}return Ve}function vs(lt,Lt,ce){return function(me,We,Ve){var ur=0,Lr=Zt(me);if(typeof Ve=="number")lt>0?ur=Ve>=0?Ve:Math.max(Ve+Lr,ur):Lr=Ve>=0?Math.min(Ve+1,Lr):Ve+Lr+1;else if(ce&&Ve&&Lr)return me[Ve=ce(me,We)]===We?Ve:-1;if(We!=We)return(Ve=Lt(F.call(me,ur,Lr),er))>=0?Ve+ur:-1;for(Ve=lt>0?ur:Lr-1;Ve>=0&&Ve<Lr;Ve+=lt)if(me[Ve]===We)return Ve;return-1}}const sn=vs(1,Ci,An),Do=vs(-1,Zo);function li(lt,Lt,ce){var me=(si(lt)?Ci:Yi)(lt,Lt,ce);if(me!==void 0&&me!==-1)return lt[me]}function ci(lt,Lt){return li(lt,bo(Lt))}function Gn(lt,Lt,ce){var me,We;if(Lt=rt(Lt,ce),si(lt))for(me=0,We=lt.length;me<We;me++)Lt(lt[me],me,lt);else{var Ve=fr(lt);for(me=0,We=Ve.length;me<We;me++)Lt(lt[Ve[me]],Ve[me],lt)}return lt}function pn(lt,Lt,ce){Lt=pr(Lt,ce);for(var me=!si(lt)&&fr(lt),We=(me||lt).length,Ve=Array(We),ur=0;ur<We;ur++){var Lr=me?me[ur]:ur;Ve[ur]=Lt(lt[Lr],Lr,lt)}return Ve}function ui(lt){var Lt=function(ce,me,We,Ve){var ur=!si(ce)&&fr(ce),Lr=(ur||ce).length,dn=lt>0?0:Lr-1;for(Ve||(We=ce[ur?ur[dn]:dn],dn+=lt);dn>=0&&dn<Lr;dn+=lt){var jn=ur?ur[dn]:dn;We=me(We,ce[jn],jn,ce)}return We};return function(ce,me,We,Ve){var ur=arguments.length>=3;return Lt(ce,rt(me,Ve,4),We,ur)}}const Ii=ui(1),Hi=ui(-1);function ia(lt,Lt,ce){var me=[];return Lt=pr(Lt,ce),Gn(lt,function(We,Ve,ur){Lt(We,Ve,ur)&&me.push(We)}),me}function wi(lt,Lt,ce){return ia(lt,Ki(pr(Lt)),ce)}function Si(lt,Lt,ce){Lt=pr(Lt,ce);for(var me=!si(lt)&&fr(lt),We=(me||lt).length,Ve=0;Ve<We;Ve++){var ur=me?me[Ve]:Ve;if(!Lt(lt[ur],ur,lt))return!1}return!0}function es(lt,Lt,ce){Lt=pr(Lt,ce);for(var me=!si(lt)&&fr(lt),We=(me||lt).length,Ve=0;Ve<We;Ve++){var ur=me?me[Ve]:Ve;if(Lt(lt[ur],ur,lt))return!0}return!1}function fi(lt,Lt,ce,me){return si(lt)||(lt=In(lt)),(typeof ce!="number"||me)&&(ce=0),sn(lt,Lt,ce)>=0}const ll=et(function(lt,Lt,ce){var me,We;return Xe(Lt)?We=Lt:(Lt=co(Lt),me=Lt.slice(0,-1),Lt=Lt[Lt.length-1]),pn(lt,function(Ve){var ur=We;if(!ur){if(me&&me.length&&(Ve=Jn(Ve,me)),Ve==null)return;ur=Ve[Lt]}return ur==null?ur:ur.apply(Ve,ce)})});function Dl(lt,Lt){return pn(lt,En(Lt))}function Zi(lt,Lt){return ia(lt,bo(Lt))}function rs(lt,Lt,ce){var me,We,Ve=-1/0,ur=-1/0;if(Lt==null||typeof Lt=="number"&&typeof lt[0]!="object"&&lt!=null)for(var Lr=0,dn=(lt=si(lt)?lt:In(lt)).length;Lr<dn;Lr++)(me=lt[Lr])!=null&&me>Ve&&(Ve=me);else Lt=pr(Lt,ce),Gn(lt,function(jn,To,za){((We=Lt(jn,To,za))>ur||We===-1/0&&Ve===-1/0)&&(Ve=jn,ur=We)});return Ve}function Ro(lt,Lt,ce){var me,We,Ve=1/0,ur=1/0;if(Lt==null||typeof Lt=="number"&&typeof lt[0]!="object"&&lt!=null)for(var Lr=0,dn=(lt=si(lt)?lt:In(lt)).length;Lr<dn;Lr++)(me=lt[Lr])!=null&&me<Ve&&(Ve=me);else Lt=pr(Lt,ce),Gn(lt,function(jn,To,za){((We=Lt(jn,To,za))<ur||We===1/0&&Ve===1/0)&&(Ve=jn,ur=We)});return Ve}var Fs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Xo(lt){return lt?pt(lt)?F.call(lt):Vt(lt)?lt.match(Fs):si(lt)?pn(lt,Oo):In(lt):[]}function Ni(lt,Lt,ce){if(Lt==null||ce)return si(lt)||(lt=In(lt)),lt[cr(lt.length-1)];var me=Xo(lt),We=Zt(me);Lt=Math.max(Math.min(Lt,We),0);for(var Ve=We-1,ur=0;ur<Lt;ur++){var Lr=cr(ur,Ve),dn=me[ur];me[ur]=me[Lr],me[Lr]=dn}return me.slice(0,Lt)}function ns(lt){return Ni(lt,1/0)}function aa(lt,Lt,ce){var me=0;return Lt=pr(Lt,ce),Dl(pn(lt,function(We,Ve,ur){return{value:We,index:me++,criteria:Lt(We,Ve,ur)}}).sort(function(We,Ve){var ur=We.criteria,Lr=Ve.criteria;if(ur!==Lr){if(ur>Lr||ur===void 0)return 1;if(ur<Lr||Lr===void 0)return-1}return We.index-Ve.index}),"value")}function cl(lt,Lt){return function(ce,me,We){var Ve=Lt?[[],[]]:{};return me=pr(me,We),Gn(ce,function(ur,Lr){var dn=me(ur,Lr,ce);lt(Ve,ur,dn)}),Ve}}const Il=cl(function(lt,Lt,ce){le(lt,ce)?lt[ce].push(Lt):lt[ce]=[Lt]}),os=cl(function(lt,Lt,ce){lt[ce]=Lt}),ri=cl(function(lt,Lt,ce){le(lt,ce)?lt[ce]++:lt[ce]=1}),Jo=cl(function(lt,Lt,ce){lt[ce?0:1].push(Lt)},!0);function wc(lt){return lt==null?0:si(lt)?lt.length:fr(lt).length}function rc(lt,Lt,ce){return Lt in ce}const Ua=et(function(lt,Lt){var ce={},me=Lt[0];if(lt==null)return ce;Xe(me)?(Lt.length>1&&(me=rt(me,Lt[1])),Lt=Je(lt)):(me=rc,Lt=yi(Lt,!1,!1),lt=Object(lt));for(var We=0,Ve=Lt.length;We<Ve;We++){var ur=Lt[We],Lr=lt[ur];me(Lr,ur,lt)&&(ce[ur]=Lr)}return ce}),_c=et(function(lt,Lt){var ce,me=Lt[0];return Xe(me)?(me=Ki(me),Lt.length>1&&(ce=Lt[1])):(Lt=pn(yi(Lt,!1,!1),String),me=function(We,Ve){return!fi(Lt,Ve)}),Ua(lt,me,ce)});function Bi(lt,Lt,ce){return F.call(lt,0,Math.max(0,lt.length-(Lt==null||ce?1:Lt)))}function pi(lt,Lt,ce){return lt==null||lt.length<1?Lt==null||ce?void 0:[]:Lt==null||ce?lt[0]:Bi(lt,lt.length-Lt)}function sa(lt,Lt,ce){return F.call(lt,Lt==null||ce?1:Lt)}function is(lt,Lt,ce){return lt==null||lt.length<1?Lt==null||ce?void 0:[]:Lt==null||ce?lt[lt.length-1]:sa(lt,Math.max(0,lt.length-Lt))}function nc(lt){return ia(lt,Boolean)}function ni(lt,Lt){return yi(lt,Lt,!1)}const la=et(function(lt,Lt){return Lt=yi(Lt,!0,!0),ia(lt,function(ce){return!fi(Lt,ce)})}),ms=et(function(lt,Lt){return la(lt,Lt)});function ys(lt,Lt,ce,me){Ht(Lt)||(me=ce,ce=Lt,Lt=!1),ce!=null&&(ce=pr(ce,me));for(var We=[],Ve=[],ur=0,Lr=Zt(lt);ur<Lr;ur++){var dn=lt[ur],jn=ce?ce(dn,ur,lt):dn;Lt&&!ce?(ur&&Ve===jn||We.push(dn),Ve=jn):ce?fi(Ve,jn)||(Ve.push(jn),We.push(dn)):fi(We,dn)||We.push(dn)}return We}const ca=et(function(lt){return ys(yi(lt,!0,!0))});function Xi(lt){for(var Lt=[],ce=arguments.length,me=0,We=Zt(lt);me<We;me++){var Ve=lt[me];if(!fi(Lt,Ve)){var ur;for(ur=1;ur<ce&&fi(arguments[ur],Ve);ur++);ur===ce&&Lt.push(Ve)}}return Lt}function Oi(lt){for(var Lt=lt&&rs(lt,Zt).length||0,ce=Array(Lt),me=0;me<Lt;me++)ce[me]=Dl(lt,me);return ce}const ua=et(Oi);function gt(lt,Lt){for(var ce={},me=0,We=Zt(lt);me<We;me++)Lt?ce[lt[me]]=Lt[me]:ce[lt[me][0]]=lt[me][1];return ce}function Nt(lt,Lt,ce){Lt==null&&(Lt=lt||0,lt=0),ce||(ce=Lt<lt?-1:1);for(var me=Math.max(Math.ceil((Lt-lt)/ce),0),We=Array(me),Ve=0;Ve<me;Ve++,lt+=ce)We[Ve]=lt;return We}function he(lt,Lt){if(Lt==null||Lt<1)return[];for(var ce=[],me=0,We=lt.length;me<We;)ce.push(F.call(lt,me,me+=Lt));return ce}function Oe(lt,Lt){return lt._chain?wr(Lt).chain():Lt}function Be(lt){return Gn(Fo(lt),function(Lt){var ce=wr[Lt]=lt[Lt];wr.prototype[Lt]=function(){var me=[this._wrapped];return $.apply(me,arguments),Oe(this,ce.apply(wr,me))}}),wr}Gn(["pop","push","reverse","shift","sort","splice","unshift"],function(lt){var Lt=R[lt];wr.prototype[lt]=function(){var ce=this._wrapped;return ce!=null&&(Lt.apply(ce,arguments),lt!=="shift"&&lt!=="splice"||ce.length!==0||delete ce[0]),Oe(this,ce)}}),Gn(["concat","join","slice"],function(lt){var Lt=R[lt];wr.prototype[lt]=function(){var ce=this._wrapped;return ce!=null&&(ce=Lt.apply(ce,arguments)),Oe(this,ce)}});const Re=wr;var hr=Be(vt);hr._=hr;const Ir=hr}},mt={};function K(k){var B=mt[k];if(B!==void 0)return B.exports;var ct=mt[k]={exports:{}};return q[k].call(ct.exports,ct,ct.exports,K),ct.exports}K.n=k=>{var B=k&&k.__esModule?()=>k.default:()=>k;return K.d(B,{a:B}),B},K.d=(k,B)=>{for(var ct in B)K.o(B,ct)&&!K.o(k,ct)&&Object.defineProperty(k,ct,{enumerable:!0,get:B[ct]})},K.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),K.o=(k,B)=>Object.prototype.hasOwnProperty.call(k,B),K.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var st={};return(()=>{K.r(st),K.d(st,{default:()=>Ml,grapesjs:()=>Iv,usePlugin:()=>cp});var k=K(50),B=K(163);function ct(h){for(var s=[],e=1;e<arguments.length;e++)s[e-1]=arguments[e];var n=h.raw;return n.reduce(function(a,u,m){var O=s[m-1],P=n[m-1];return Array.isArray(O)?O=O.join(""):P&&P.slice(-1)==="$"?a=a.slice(0,-1):O=(0,B.escape)(O),a+O+u})}const vt={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,multiFrames:!1,customUI:!1};var dt,H=K(316),R=K.n(H),I=K(895),N=K(346),$=(dt=function(h,s){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},dt(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function e(){this.constructor=h}dt(h,s),h.prototype=s===null?Object.create(s):(e.prototype=s.prototype,new e)}),F=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return $(s,h),s}(N.Hn);const V=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return $(s,h),s.prototype.getByComponent=function(e){var n=this;return this.filter(function(a){return n.getComponent(a)===e})[0]},s.prototype.addComponent=function(e,n){var a=this,u=((0,k.isArray)(e)?e:[e]).filter(function(m){return!a.hasComponent(m)}).map(function(m){return new F({component:m})})[0];return this.push(u,n)},s.prototype.getComponent=function(e){return e.get("component")},s.prototype.hasComponent=function(e){var n=this.getByComponent(e);return n&&this.contains(n)},s.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},s.prototype.allComponents=function(){var e=this;return this.map(function(n){return e.getComponent(n)}).filter(function(n){return n})},s.prototype.removeComponent=function(e,n){var a=this,u=((0,k.isArray)(e)?e:[e]).map(function(m){return a.getByComponent(m)});return this.remove(u,n)},s}(N.FE);var U=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),it=function(){return it=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},it.apply(this,arguments)},X=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},tt=function(){function h(s,e,n){this.cls=[],this._em=s,this._name=e;var a=this.name.charAt(0).toLowerCase()+this.name.slice(1),u=(0,k.isUndefined)(s.config[a])?s.config[this.name]:s.config[a],m=u===!0?{}:u||{};m.pStylePrefix=s.config.pStylePrefix||"",(0,k.isUndefined)(u)||u||(m._disable=1),m.em=s,this._config=(0,B.deepMerge)(n||{},m)}return Object.defineProperty(h.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),h.prototype.render=function(s){},h.prototype.postLoad=function(s){},Object.defineProperty(h.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),h.prototype.getConfig=function(s){return s?this.config[s]:this.config},h.prototype.__logWarn=function(s,e){e===void 0&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(s),e)},h.prototype.__appendTo=function(){var s=this.getConfig().appendTo;if(s){var e=(0,k.isElement)(s)?s:document.querySelector(s);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},h}();const xt=tt;var Q=function(h){function s(e,n,a,u,m,O){O===void 0&&(O={});var P=h.call(this,e,n,m)||this;return P.cls=[],P.private=!1,P.all=a,P.events=u,!O.skipListen&&P.__initListen(),P}return U(s,h),s.prototype.postLoad=function(e){},s.prototype.render=function(e){},s.prototype.getProjectData=function(e){var n={},a=this.storageKey;return a&&(n[a]=e||this.getAll()),n},s.prototype.loadProjectData=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var a=n.all,u=n.onResult,m=n.reset,O=this.storageKey,P={action:"load"},j=a||this.all,A=e[O];if(typeof A=="string")try{A=JSON.parse(A)}catch{this.__logWarn("Data parsing failed",{input:A})}return m&&A&&j.reset(void 0,P),u?A&&u(A,P):A&&(0,B.isDef)(A.length)&&j.reset(A,P),A},s.prototype.clear=function(e){e===void 0&&(e={});var n=this.all;return n&&n.reset(void 0,e),this},s.prototype.getAll=function(){return X([],this.all.models,!0)},s.prototype.getAllMap=function(){return this.getAll().reduce(function(e,n){return e[n.get(n.idAttribute)]=n,e},{})},s.prototype.__initListen=function(e){e===void 0&&(e={});var n=this,a=n.all,u=n.em,m=n.events;a&&u&&a.on("add",function(O,P,j){return u.trigger(m.add,O,j)}).on("remove",function(O,P,j){return u.trigger(m.remove,O,j)}).on("change",function(O,P){return u.trigger(m.update,O,O.changedAttributes(),P)}).on("all",this.__catchAllEvent,this),this.cls=[a].concat(e.collections||[]),(e.propagate||[]).forEach(function(O){var P=O.entity,j=O.event;P.on("all",function(A,nt,At,Bt){var qt=it({event:A},Bt||At);[u,a].map(function(be){return be.trigger(j,nt,qt)})})})},s.prototype.__remove=function(e,n){var a=this;n===void 0&&(n={});var u=this.em,m=(0,k.isString)(e)?this.get(e):e,O=function(){return m&&a.all.remove(m,n),m};return!n.silent&&(u==null||u.trigger(this.events.removeBefore,m,O,n)),!n.abort&&O()},s.prototype.__catchAllEvent=function(e,n,a,u){var m=this.em,O=this.events,P=u||a;m&&O.all&&m.trigger(O.all,{event:e,model:n,options:P}),this.__onAllEvent()},s.prototype.__appendTo=function(e){var n=this.config.appendTo;if(n){var a=(0,k.isElement)(n)?n:document.querySelector(n);if(!a)return this.__logWarn('"appendTo" element not found');a.appendChild(this.render(e))}},s.prototype.__onAllEvent=function(){},s.prototype._createId=function(e){e===void 0&&(e=16);var n,a=this.getAll().length+e,u=this.getAllMap();do n=(0,B.createId)(a);while(u[n]);return n},s.prototype.__listenAdd=function(e,n){var a=this;e.on("add",function(u,m,O){return a.em.trigger(n,u,O)})},s.prototype.__listenRemove=function(e,n){var a=this;e.on("remove",function(u,m,O){return a.em.trigger(n,u,O)})},s.prototype.__listenUpdate=function(e,n){var a=this;e.on("change",function(u,m){return a.em.trigger(n,u,u.changedAttributes(),m)})},s.prototype.__destroy=function(){var e;this.cls.forEach(function(n){n.stopListening(),n.reset()}),(e=this.view)===null||e===void 0||e.remove(),this.view=void 0},s}(tt);const _t={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]};var W=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const It=function(h){function s(e,n,a){var u=h.call(this,n,a)||this;return u._module=e,u}return W(s,h),Object.defineProperty(s.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),s}(N.Hn);var $t=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Yt=function(h){function s(e,n,a){return h.call(this,n,{module:e,modelConstructor:a})||this}return $t(s,h),s.prototype.add=function(e,n){var a,u=this,m=(0,k.isArray)(e)?e:(0,k.isUndefined)(e)?void 0:[e];return m=(a=m==null?void 0:m.map(function(O){return O instanceof u.newModel?O:new u.newModel(u.module,O)}))!==null&&a!==void 0?a:[void 0],h.prototype.add.call(this,(0,k.isArray)(e)?m:m[0],n)},s.prototype.preinitialize=function(e,n){this.newModel=n.modelConstructor,this.module=n.module},s}(N.FE);var Ne=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),et=function(){return et=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},et.apply(this,arguments)},Tt=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},jt="__aw",zt="__ah",Ht=function(h){function s(e,n){var a=h.call(this,e,n)||this,u=a.em,m=a.attributes,O=m.styles,P=m.component,j=u.Components,A=j.getConfig(),nt=u.Css.getAll(),At={},Bt={em:u,config:A,frame:a,idMap:At};if(!(0,B.isComponent)(P)){var qt=(0,B.isObject)(P)?P:{components:P};!qt.type&&(qt.type="wrapper");var be=j.getType("wrapper").model;a.set("component",new be(qt,Bt))}return O?(0,B.isObject)(O)||(Object.keys(At).length&&Array.isArray(O)&&O.forEach(function(Ee){var Ce=Ee.selectors;if(Ce&&Ce.length==1){var rr=Ce[0],yr=rr.name&&rr.type===2&&rr;if(yr&&At[yr.name])yr.name=At[yr.name];else if((0,k.isString)(rr)&&rr[0]==="#"){var Jr=rr.substring(1);Jr&&At[Jr]&&(Ce[0]="#".concat(At[Jr]))}}}),nt.add(O),a.set("styles",nt)):a.set("styles",nt),!n.width&&a.set(jt,1),!n.height&&a.set(zt,1),a}return Ne(s,h),s.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(s.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),s.prototype.onRemove=function(){this.getComponent().remove({root:1})},s.prototype.changesUp=function(e){e===void 0&&(e={}),e.temporary||e.noCount||e.avoidStore||this.set("changesCount",this.get("changesCount")+1)},s.prototype.getComponent=function(){return this.get("component")},s.prototype.getStyles=function(){return this.get("styles")},s.prototype.disable=function(){this.trigger("disable")},s.prototype.remove=function(){this.view=void 0;var e=this.collection;return e&&e.remove(this)},s.prototype.getHead=function(){return Tt([],this.head,!0)},s.prototype.setHead=function(e){return this.set("head",Tt([],e,!0))},s.prototype.addHeadItem=function(e){this.head.push(e)},s.prototype.getHeadByAttr=function(e,n,a){return this.head.filter(function(u){return u.attributes&&u.attributes[e]==n&&(!a||a===u.tag)})[0]},s.prototype.removeHeadByAttr=function(e,n,a){var u=this.getHeadByAttr(e,n,a),m=this.head.indexOf(u);m>=0&&this.head.splice(m,1)},s.prototype.addLink=function(e){var n="link";!this.getHeadByAttr("href",e,n)&&this.addHeadItem({tag:n,attributes:{href:e,rel:"stylesheet"}})},s.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},s.prototype.addScript=function(e){var n="script";!this.getHeadByAttr("src",e,n)&&this.addHeadItem({tag:n,attributes:{src:e}})},s.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},s.prototype.getPage=function(){var e;return(e=this.collection)===null||e===void 0?void 0:e.page},s.prototype._emitUpdated=function(e){e===void 0&&(e={}),this.em.trigger("frame:updated",et({frame:this},e))},s.prototype.toJSON=function(e){e===void 0&&(e={});var n=It.prototype.toJSON.call(this,e),a=(0,k.result)(this,"defaults");return e.fromUndo&&delete n.component,delete n.styles,delete n.changesCount,n[jt]&&delete n.width,n[zt]&&delete n.height,(0,k.forEach)(n,function(u,m){m.indexOf("_")===0&&delete n[m]}),(0,k.forEach)(a,function(u,m){n[m]===u&&delete n[m]}),(0,k.forEach)(["attributes","head"],function(u){(0,k.isEmpty)(n[u])&&delete n[u]}),n},s}(It);const Dt=Ht;var St=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Vt=function(h){function s(e,n){n===void 0&&(n=[]);var a=h.call(this,e,n,Dt)||this;return a.loadedItems=0,a.itemsToLoad=0,(0,k.bindAll)(a,"itemLoaded"),a.on("reset",a.onReset),a.on("remove",a.onRemove),a}return St(s,h),s.prototype.onReset=function(e,n){var a=this;((n==null?void 0:n.previousModels)||[]).map(function(u){return a.onRemove(u)})},s.prototype.onRemove=function(e){e==null||e.onRemove()},s.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},s.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},s.prototype.listenToLoadItems=function(e){var n=this;this.forEach(function(a){return a[e?"on":"off"]("loaded",n.itemLoaded)})},s}(Yt);var Me=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const de=function(h){function s(e,n){n===void 0&&(n={});var a=h.call(this,e,n)||this,u=n.em,m={};a.em=u,e.frames||(m.component=e.component,m.styles=e.styles,["component","styles"].map(function(A){return a.unset(A)}));var O=e.frames||[m],P=new Vt(u.Canvas,O);P.page=a,a.set("frames",P),!a.getId()&&a.set("id",u==null?void 0:u.get("PageManager")._createId());var j=u==null?void 0:u.get("UndoManager");return j==null||j.add(P),a}return Me(s,h),s.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},s.prototype.onRemove=function(){this.getFrames().reset()},s.prototype.getFrames=function(){return this.get("frames")},s.prototype.getId=function(){return this.id},s.prototype.getName=function(){return this.get("name")},s.prototype.setName=function(e){return this.set({name:e})},s.prototype.getAllFrames=function(){return this.getFrames().models||[]},s.prototype.getMainFrame=function(){return this.getFrames().at(0)},s.prototype.getMainComponent=function(){var e=this.getMainFrame();return e==null?void 0:e.getComponent()},s.prototype.toJSON=function(e){e===void 0&&(e={});var n=N.Hn.prototype.toJSON.call(this,e),a=(0,k.result)(this,"defaults");return(0,k.forEach)(n,function(u,m){m.indexOf("_")===0&&delete n[m]}),(0,k.forEach)(a,function(u,m){n[m]===u&&delete n[m]}),n},s}(N.Hn);var Le=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ar=function(){return ar=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ar.apply(this,arguments)};const Er=function(h){function s(e,n){var a=h.call(this,e)||this;return a.on("reset",a.onReset),a.on("remove",a.onRemove),a.model=function(u,m){return m===void 0&&(m={}),new de(u,ar(ar({},m),{em:n}))},a}return Le(s,h),s.prototype.onReset=function(e,n){var a,u=this;(a=n==null?void 0:n.previousModels)===null||a===void 0||a.map(function(m){return u.onRemove(m)})},s.prototype.onRemove=function(e){e==null||e.onRemove()},s}(N.FE);var Nr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ar=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Fr="page",Xe="".concat(Fr,":"),at="".concat(Xe,"select"),kt="".concat(at,":before"),Gt="".concat(Xe,"update"),ye="".concat(Xe,"add"),Ae="".concat(ye,":before"),pt="".concat(Xe,"remove"),le="".concat(pt,":before"),se="change:selected",or="main",mr={all:Fr,select:at,selectBefore:kt,update:Gt,add:ye,addBefore:Ae,remove:pt,removeBefore:le},er=function(h){function s(e){var n=h.call(this,e,"PageManager",new Er([],e),mr)||this;n.storageKey="pages",(0,k.bindAll)(n,"_onPageChange");var a=new It({_undo:!0});return n.model=a,n.pages.on("reset",function(u){return u.at(0)&&n.select(u.at(0))}),n.pages.on("all",n.__onChange,n),a.on(se,n._onPageChange),n}return Nr(s,h),Object.defineProperty(s.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),s.prototype.getAll=function(){return Ar([],this.all.models,!0)},s.prototype.__onChange=function(e,n,a,u){var m=u||a;this.em.trigger(Fr,{event:e,page:n,options:m})},s.prototype.onLoad=function(){var e,n=this,a=this.pages,u={silent:!0};a.add(((e=this.config.pages)===null||e===void 0?void 0:e.map(function(O){return new de(O,{em:n.em,config:n.config})}))||[],u);var m=a.length?this.getMain():this.add({type:or},u);m&&this.select(m,u)},s.prototype._onPageChange=function(e,n,a){var u=this.em,m=u.Layers,O=n.getMainComponent();m&&O&&m.setRoot(O),u.trigger(at,n,e.previous("selected")),this.__onChange(se,n,a)},s.prototype.postLoad=function(){var e=this,n=e.em,a=e.model,u=e.pages,m=n.UndoManager;m.add(a),m.add(u),u.on("add remove reset change",function(O,P,j){return n.changesUp(j||P)})},s.prototype.add=function(e,n){var a=this;n===void 0&&(n={});var u=this.em;e.id=e.id||this._createId();var m=function(){var O=a.pages.add(new de(e,{em:a.em,config:a.config}),n);return n.select&&a.select(O),O};return!n.silent&&u.trigger(Ae,e,m,n),!n.abort&&m()},s.prototype.remove=function(e,n){var a=this;n===void 0&&(n={});var u=this.em,m=(0,k.isString)(e)?this.get(e):e,O=function(){return m&&a.pages.remove(m,n),m};return!n.silent&&u.trigger(le,m,O,n),!n.abort&&O()},s.prototype.get=function(e){return this.pages.filter(function(n){return n.get(n.idAttribute)===e})[0]},s.prototype.getMain=function(){var e=this.pages;return e.filter(function(n){return n.get("type")===or})[0]||e.at(0)},s.prototype.getAllWrappers=function(){var e=this.getAll();return(0,k.unique)((0,k.flatten)(e.map(function(n){return n.getAllFrames().map(function(a){return a.getComponent()})})))},s.prototype.select=function(e,n){n===void 0&&(n={});var a=(0,k.isString)(e)?this.get(e):e;return a&&(this.em.trigger(kt,a,n),this.model.set("selected",a,n)),this},s.prototype.getSelected=function(){return this.model.get("selected")},s.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(n){return e[n]=0})},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(e){return this.loadProjectData(e,{all:this.pages,reset:!0})},s.prototype._createId=function(){var e,n=this.getAll().length+16,a=this.getAllMap();do e=(0,B.createId)(n);while(a[e]);return e},s}(Q);const Dr=er,rn={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};var yt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Wt=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return yt(s,h),s.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},s.prototype.initialize=function(){var e=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(n){return e.checkUnit(n)})},s.prototype.checkUnit=function(e){var n=this.get(e)||"";(parseFloat(n)||0).toString()===n.toString()&&this.set(e,"".concat(n,"px"))},s.prototype.getName=function(){return this.get("name")||this.get("id")},s.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},s}(N.Hn);var ne=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ft=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ne(s,h),s}(N.FE);const _e=Ft;Ft.prototype.model=Wt;var Zt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gr=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h};const fr=function(h){function s(e){var n=h.call(this,e)||this;return n.config=e.config||{},n.em=n.config.em,n.ppfx=n.config.pStylePrefix||"",n.listenTo(n.em,"change:device",n.updateSelect),n}return Zt(s,h),s.prototype.template=function(e){var n=e.ppfx,a=e.label;return ct(nn||(nn=gr([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),n,a,n,n,n,n,n,n,n)},s.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},s.prototype.startAdd=function(){},s.prototype.updateDevice=function(){var e=this.em;if(e){var n=this.devicesEl;e.set("device",n?n.val():"")}},s.prototype.updateSelect=function(){var e=this.em,n=this.devicesEl;if(e&&e.getDeviceModel&&n){var a=e.getDeviceModel();n.val(a?a.get("id"):"")}},s.prototype.getOptions=function(){var e=this.collection,n=this.em,a="";return e.forEach(function(u){var m=u.attributes,O=m.name,P=m.id,j=n&&n.t&&n.t("deviceManager.devices.".concat(P))||O;a+='<option value="'.concat(P||O,'">').concat(j,"</option>")}),a},s.prototype.render=function(){var e=this,n=e.em,a=e.ppfx,u=e.$el,m=e.el,O=n&&n.t&&n.t("deviceManager.device");return u.html(this.template({ppfx:a,label:O})),this.devicesEl=u.find(".".concat(a,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(n.get("device")),m.className="".concat(a,"devices-c"),this},s}(N.G7);var nn,tn=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wr=function(){return wr=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},wr.apply(this,arguments)},tr="device",Un="".concat(tr,":"),Rt="".concat(Un,"select"),ee="".concat(Un,"update"),je="".concat(Un,"add"),Je="".concat(Un,"remove"),Et="".concat(Je,":before"),fe="change:device",Pe={all:tr,select:Rt,update:ee,add:je,remove:Je,removeBefore:Et},Ye=function(h){function s(e){var n,a=this;return(a=h.call(this,e,"DeviceManager",new _e,Pe,rn)||this).Device=Wt,a.Devices=_e,a.storageKey="",a.devices=a.all,(n=a.config.devices)===null||n===void 0||n.forEach(function(u){return a.add(u,{silent:!0})}),a.select(a.config.default||a.devices.at(0)),e.on(fe,a._onSelect,a),a}return tn(s,h),s.prototype._onSelect=function(e,n,a){var u=this.em,m=this.events,O=e.previous("device"),P=this.get(n),j=m.select;u.trigger(j,P,this.get(O)),this.__catchAllEvent(j,P,a)},s.prototype.add=function(e,n){var a;n===void 0&&(n={});var u=n;if((0,k.isString)(e)){var m=n;a=wr(wr({},u=arguments[2]||{}),{id:e,name:u.name||e,width:m})}else a=e;return a.id||(a.id=a.name||this._createId()),this.devices.add(a,u)},s.prototype.get=function(e){return this.getAll().filter(function(n){return n.get("name")===e})[0]||this.devices.get(e)||null},s.prototype.remove=function(e,n){return n===void 0&&(n={}),this.__remove(e,n)},s.prototype.getDevices=function(){return this.devices.models},s.prototype.select=function(e,n){n===void 0&&(n={});var a=(0,k.isString)(e)?this.get(e):e;return a&&this.em.set("device",a.get("id"),n),this},s.prototype.getSelected=function(){return this.get(this.em.get("device"))},s.prototype.getAll=function(){return this.devices},s.prototype.render=function(){var e,n=this.em;return(e=this.view)===null||e===void 0||e.remove(),this.view=new fr({collection:this.devices,config:wr({em:n},this.config)}),this.view.render().el},s.prototype.destroy=function(){this.__destroy()},s}(Q);const Cr=Ye;var Wr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zn=function(h){function s(e){var n=this,a=e.em,u=e.config,m=u.scripts,O=u.styles;return(n=h.call(this,e,{scripts:m,styles:O})||this).set("frames",new Vt(e)),n.listenTo(n,"change:zoom",n.onZoomChange),n.listenTo(a,"change:device ".concat(ee),n.updateDevice),n.listenTo(a,at,n._pageUpdated),n}return Wr(s,h),s.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}},Object.defineProperty(s.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),s.prototype.init=function(){var e=this.em.Pages.getMain();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},s.prototype._pageUpdated=function(e,n){var a=this.em;a.setSelected(),a.get("readyCanvas")&&a.stopDefault(),n==null||n.getFrames().map(function(u){return u.disable()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},s.prototype.updateDevice=function(e){e===void 0&&(e={});var n=this.em,a=n.getDeviceModel(),u=e.frame||n.getCurrentFrameModel();if(u&&a){var m=a.attributes,O=m.width,P=m.height;u.set({width:O,height:P},{noUndo:1})}},s.prototype.onZoomChange=function(){this.get("zoom")<1&&this.set("zoom",1)},s}(It);const Dn=zn;var lo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const ho=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return lo(s,h),Object.defineProperty(s.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"module",{get:function(){var e,n;return(n=(e=this.model)===null||e===void 0?void 0:e.module)!==null&&n!==void 0?n:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),s.prototype.preinitialize=function(e){this.className=""},s}(N.G7);var vn=K(491),ro=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const In=function(h){function s(e,n){e===void 0&&(e={}),n===void 0&&(n=!1);var a=h.call(this,e)||this;return a.itemsView="",a.itemType="type",a.reuseView=!1,a.viewCollection=[],n&&a.listenTo(a.collection,"add",a.addTo),a}return ro(s,h),s.prototype.addTo=function(e){this.add(e)},s.prototype.itemViewNotFound=function(e){},s.prototype.add=function(e,n){var a,u=this,m=u.reuseView,O=u.viewCollection,P=(u.itemsView,n||null),j=e.get(this.itemType);a=e.view&&m?e.view:this.renderView(e,j),O.push(a);var A=a.render().el;P?P.appendChild(A):this.$el.append(A)},s.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(a){return e.add(a,n)}),this.$el.append(n),this.onRender(),this},s.prototype.onRender=function(){},s.prototype.onRemoveBefore=function(e,n){},s.prototype.onRemove=function(e,n){},s.prototype.remove=function(e){e===void 0&&(e={});var n=this.viewCollection;return this.onRemoveBefore(n,e),this.clearItems(),N.G7.prototype.remove.apply(this,e),this.onRemove(n,e),this},s.prototype.clearItems=function(){this.viewCollection},s}(ho);var Yo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const go=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.config=e.config||{};var a=n.model;return n.listenTo(a,"change",n.render),n.listenTo(a,"destroy remove",n.remove),n.listenTo(a.get("selectors"),"change",n.render),n}return Yo(s,h),s.prototype.tagName=function(){return"style"},s.prototype.render=function(){var e=this.model,n=this.el,a=e.get("important");return n.innerHTML=e.toCSS({important:a}),this},s}(N.G7);var Fo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Co=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Fo(s,h),s.prototype._createElement=function(){return document.createTextNode("")},s.prototype.render=function(){var e=this.model,n=e.get("important");return this.el.textContent=e.getDeclaration({important:n}),this},s}(go);var yo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),So=function(h,s){return"".concat(h).concat(s?"-".concat(parseFloat(s)):"")},Gi=function(h){function s(e){var n=h.call(this,e)||this;(0,k.bindAll)(n,"sortRules");var a=e.config||{};n.atRules={},n.config=a,n.em=a.em,n.pfx=a.stylePrefix||"",n.className=n.pfx+"rules";var u=n.collection;return n.listenTo(u,"add",n.addTo),n.listenTo(u,"reset",n.render),n}return yo(s,h),s.prototype.addTo=function(e){this.addToCollection(e)},s.prototype.addToCollection=function(e,n){if(this.renderStarted){var a,u,m=n||null,O={model:e,config:this.config};if(e.get("atRuleType")==="keyframes"){var P=e.getAtRule(),j=this.atRules[P];if(!j){var A=document.createElement("style");j=document.createTextNode(""),A.appendChild(document.createTextNode("".concat(P,"{"))),A.appendChild(j),A.appendChild(document.createTextNode("}")),this.atRules[P]=j,a=A}u=new Co(O),j.appendData(u.render().el.textContent)}else a=(u=new go(O)).render().el;var nt=this.className,At=e.get("mediaText"),Bt=So(nt),qt=Bt;if(At&&(qt=So(nt,this.getMediaWidth(At))),a){var be=m||this.el,Ee=void 0;try{Ee=be.querySelector("#".concat(qt))}catch{}Ee||(Ee=be.querySelector("#".concat(Bt))),Ee==null||Ee.appendChild(a)}return a}},s.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},s.prototype.sortRules=function(e,n){var a=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return a?(a?e:n)-(a?n:e):0},s.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var n=this,a=n.em,u=n.$el,m=n.collection,O=this.className,P=document.createDocumentFragment();u.empty();var j=a.Devices.getAll().pluck("priority").sort(this.sortRules);return j.every(function(A){return A})&&j.unshift(0),j.forEach(function(A){return P.appendChild((0,vn.ut)("div",{id:So(O,A)}))}),m.each(function(A){return e.addToCollection(A,P)}),u.append(P),u.attr("class",O),this},s}(N.G7);const Wo=Gi;var Mo=function(){return Mo=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Mo.apply(this,arguments)},ao=function(){function h(s,e){var n=this;this.em=s,this.canvas=s.Canvas;var a=e||this.canvas.getFrames().map(function(m){return m.getComponent().getEl()}),u=Array.isArray(a)?a:[a];this.el=u[0],this.counter=0,(0,k.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),u.forEach(function(m){return n.toggleEffects(m,!0)})}return h.prototype.toggleEffects=function(s,e){var n={on:B.on,off:B.off},a=e?"on":"off";n[a](s,"dragenter",this.handleDragEnter),n[a](s,"dragover",this.handleDragOver),n[a](s,"drop",this.handleDrop),n[a](s,"dragleave",this.handleDragLeave)},h.prototype.__customTglEff=function(s){var e,n=s?B.on:B.off,a=this.el.ownerDocument,u=(e=a.defaultView)===null||e===void 0?void 0:e.frameElement;this.sortOpts=s?{onStart:function(m){var O=m.sorter;(0,B.on)(u,"pointermove",O.onMove)},onEnd:function(m){var O=m.sorter;(0,B.off)(u,"pointermove",O.onMove)},customTarget:function(m){var O=m.event;return a.elementFromPoint(O.clientX,O.clientY)}}:null,n(u,"pointerenter",this.handleDragEnter),n(u,"pointermove",this.handleDragOver),n(document,"pointerup",this.handleDrop),n(u,"pointerout",this.handleDragLeave)},h.prototype.startCustom=function(){this.__customTglEff(!0)},h.prototype.endCustom=function(s){this.over?this.endDrop(s):this.__customTglEff(!1)},h.prototype.endDrop=function(s,e){var n=this.em,a=this.dragStop;this.counter=0,a&&a(s),this.__customTglEff(!1),n.trigger("canvas:dragend",e)},h.prototype.handleDragLeave=function(s){this.updateCounter(-1,s)},h.prototype.updateCounter=function(s,e){this.counter+=s,this.counter===0&&this.endDrop(!0,e)},h.prototype.handleDragEnter=function(s){var e=this,n=this.em,a=this.canvas,u=s.dataTransfer;if(this.updateCounter(1,s),!this.over){this.over=!0;var m,O,P=n.Utils,j=n.get("dragContent")||"<br>";if(n.stopDefault(),n.inAbsoluteMode()){var A=n.Components.getWrapper(),nt=A.append({})[0],At=n.Commands.run("core:component-drag",{event:s,guidesInfo:1,center:1,target:nt,onEnd:function(qt,be,Ee){var Ce;if(!Ee.cancelled){Ce=A.append(j)[0];var rr=a.getOffset(),yr=nt.getStyle(),Jr=yr.top,Qr=yr.left,Sn=yr.position,Pn=(0,vn.GX)(qt.target),xo=parseInt("".concat(parseFloat(Qr)+Pn.x-rr.left),10),ii=parseInt("".concat(parseFloat(Jr)+Pn.y-rr.top),10);Ce.addStyle({left:xo+"px",top:ii+"px",position:Sn})}e.handleDragEnd(Ce,u),nt.remove()}});m=function(qt){return At.stop(s,{cancel:qt})},O=function(qt){return j=qt}}else{var Bt=new P.Sorter(Mo({em:n,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:a.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(qt){return e.handleDragEnd(qt,u)},document:this.el.ownerDocument},this.sortOpts||{}));Bt.setDropContent(j),Bt.startSort(),this.sorter=Bt,m=function(qt){qt&&(Bt.moved=!1),Bt.endMove()},O=function(qt){return Bt.setDropContent(qt)}}this.dragStop=m,this.dragContent=O,n.trigger("canvas:dragenter",u,j)}},h.prototype.handleDragEnd=function(s,e){var n=this.em;this.over=!1,s&&(n.set("dragResult",s),n.trigger("canvas:drop",e,s)),n.runDefault({preserveSelected:1})},h.prototype.handleDragOver=function(s){s.preventDefault(),this.em.trigger("canvas:dragover",s)},h.prototype.handleDrop=function(s){s.preventDefault();var e=this.dragContent,n=s.dataTransfer,a=this.getContentByData(n).content;s.target.style.border="",a&&e&&e(a),this.endDrop(!a,s)},h.prototype.getContentByData=function(s){var e=this.em,n=s&&s.types,a=s&&s.files||[],u=e.get("dragContent"),m=s&&s.getData("text");if(a.length){m=[];for(var O=0;O<a.length;O++){var P=a[O],j=P.type.split("/")[0];j=="image"&&m.push({type:j,file:P,attributes:{alt:P.name}})}}else if(u)m=u;else if((0,k.indexOf)(n,"text/html")>=0)m=s&&s.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,k.indexOf)(n,"text/uri-list")>=0)m={type:"link",attributes:{href:m},content:m};else if((0,k.indexOf)(n,"text/json")>=0){var A=s&&s.getData("text/json");A&&(m=JSON.parse(A))}else n.length===1&&n[0]==="text/plain"&&(m="<div>".concat(m,"</div>"));var nt={content:m};return e.trigger("canvas:dragdata",s,nt),nt},h}();const Xn=ao;var $r=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),co=function(){return co=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},co.apply(this,arguments)},Jn=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Lo=function(h){function s(e,n){var a=h.call(this,{model:e})||this;a.dragging=!1,a.loaded=!1,a.lastMaxHeight=0,a.tools={},(0,k.bindAll)(a,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var u=a,m=u.el;u.em,a.module._config=co(co({},a.config||{}),{frameView:a}),a.frameWrapView=n,a.showGlobalTools=(0,k.debounce)(a.showGlobalTools.bind(a),50);var O=a.getCanvasModel();return a.listenTo(e,"change:head",a.updateHead),a.listenTo(O,"change:styles",a.renderStyles),e.view=a,(0,B.setViewEl)(m,a),a}return $r(s,h),Object.defineProperty(s.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),s.prototype.updateHead=function(){var e=this.model,n=this.getHead(),a=[],u=[],m=e.head,O=e.previous("head"),P=function(A){return A===void 0&&(A={}),Object.keys(A).sort().map(function(nt){return"[".concat(nt,'="').concat(A[nt],'"]')}).join("")},j=function(A,nt,At){A.forEach(function(Bt){var qt=Bt.tag,be=Bt.attributes;!nt.some(function(Ee){return Ee.tag===qt&&P(Ee.attributes)===P(be)})&&At.push(Bt)})};j(m,O,u),j(O,m,a),a.forEach(function(A){var nt,At=n.querySelector("".concat(A.tag).concat(P(A.attributes)));(nt=At==null?void 0:At.parentNode)===null||nt===void 0||nt.removeChild(At)}),(0,vn.SJ)(n,u)},s.prototype.getEl=function(){return this.el},s.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},s.prototype.getWindow=function(){return this.getEl().contentWindow},s.prototype.getDoc=function(){return this.getEl().contentDocument},s.prototype.getHead=function(){return this.getDoc().querySelector("head")},s.prototype.getBody=function(){return this.getDoc().querySelector("body")},s.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},s.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,vn.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},s.prototype.getToolsEl=function(){var e;return(e=this.frameWrapView)===null||e===void 0?void 0:e.elTools},s.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},s.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},s.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},s.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},s.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},s.prototype.getOffsetRect=function(){var e=this.el,n=this.getBody(),a=n.scrollTop,u=n.scrollLeft,m=e.offsetHeight,O=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:m,width:O,scrollTop:a,scrollLeft:u,scrollBottom:a+m,scrollRight:u+O}},s.prototype._getTool=function(e){var n=this.tools,a=this.getToolsEl();return n[e]||(n[e]=a.querySelector(e)),n[e]},s.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=this.wrapper;return this._toggleEffects(!1),this.tools={},a&&a.remove(),ho.prototype.remove.apply(this,e),this},s.prototype.startAutoscroll=function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){e._toggleAutoscrollFx(!0),requestAnimationFrame(e.autoscroll)},0)},s.prototype.autoscroll=function(){if(this.dragging){var e=this.lastClientY,n=this.em.Canvas,a=this.getWindow(),u=a.pageYOffset,m=e||0,O=n.getConfig().autoscrollLimit,P=this.getRect().height-O,j=u;m<O&&(j-=O-m),m>P&&(j+=m-P),!(0,k.isUndefined)(e)&&j!==u&&j>0&&j<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity="0",this.showGlobalTools(),a.scrollTo(0,j)),requestAnimationFrame(this.autoscroll)}},s.prototype.updateClientY=function(e){e.preventDefault(),this.lastClientY=(0,B.getPointerEvent)(e).clientY*this.em.getZoomDecimal()},s.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},s.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},s.prototype._toggleAutoscrollFx=function(e){this.dragging=e;var n=this.getWindow(),a=e?"on":"off",u={on:B.on,off:B.off};u[a](n,"mousemove dragover",this.updateClientY),u[a](n,"mouseup",this.stopAutoscroll)},s.prototype.render=function(){var e=this.$el,n=this.ppfx;return e.attr({class:"".concat(n,"frame")}),this.renderScripts(),this},s.prototype.renderScripts=function(){var e=this,n=this,a=n.el,u=n.model,m=n.em,O="frame:load",P={el:a,model:u,view:this},j=this.getCanvasModel(),A=function(nt){var At;if(nt.length>0){var Bt=nt.shift(),qt=(0,vn.ut)("script",co({type:"text/javascript"},(0,k.isString)(Bt)?{src:Bt}:Bt));qt.onerror=qt.onload=A.bind(null,nt),(At=a.contentDocument)===null||At===void 0||At.head.appendChild(qt)}else e.renderBody(),m&&m.trigger(O,P)};a.onload=function(){var nt=e.config.frameContent;if(nt){var At=e.getDoc();At.open(),At.write(nt),At.close()}m&&m.trigger("".concat(O,":before"),P),A(Jn([],j.get("scripts"),!0))}},s.prototype.renderStyles=function(e){e===void 0&&(e={});var n=this.getHead(),a=this.getCanvasModel(),u=function(nt){return nt.map(function(At){return{tag:"link",attributes:co({rel:"stylesheet"},(0,k.isString)(At)?{href:At}:At)}})},m=u(e.prev||a.previous("styles")),O=u(a.get("styles")),P=[],j=[],A=function(nt,At,Bt){nt.forEach(function(qt){var be=qt.attributes.href;!At.some(function(Ee){return Ee.attributes.href===be})&&Bt.push(qt)})};A(O,m,j),A(m,O,P),P.forEach(function(nt){var At,Bt=n.querySelector('link[href="'.concat(nt.attributes.href,'"]'));(At=Bt==null?void 0:Bt.parentNode)===null||At===void 0||At.removeChild(Bt)}),(0,vn.SJ)(n,j)},s.prototype.renderBody=function(){var e,n,a=this,u=this,m=u.config,O=u.em,P=u.model,j=u.ppfx,A=this.getDoc(),nt=this.getBody(),At=this.getWindow(),Bt=O.config;At._isEditor=!0,this.renderStyles({prev:[]}),(0,vn.R3)(nt,`<style>
      `.concat(Bt.baseCss||m.frameStyle||"",`

      [data-gjs-type="wrapper"] {
        min-height: 100vh;
        padding-top: 0.001em;
      }

      .`).concat(j,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(j,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(j,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(j,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(j,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(j,`no-pointer {
        pointer-events: none;
      }

      .`).concat(j,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(j,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(j,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(j,`is__grabbing,
      .`).concat(j,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(Bt.canvasCss||"",`
      `).concat(Bt.protectedCss||"",`
    </style>`));var qt=P.getComponent(),be=O.Components.getType("wrapper").view;this.wrapper=new be({model:qt,config:co(co({},qt.config),{em:O,frameView:this})}).render(),(0,vn.R3)(nt,(e=this.wrapper)===null||e===void 0?void 0:e.el),(0,vn.R3)(nt,new Wo({collection:P.getStyles(),config:co(co({},O.Css.getConfig()),{frameView:this})}).render().el),(0,vn.R3)(nt,this.getJsContainer()),(0,B.on)(nt,"click",function(Ee){var Ce;return Ee&&((Ce=Ee.target)===null||Ce===void 0?void 0:Ce.tagName)=="A"&&Ee.preventDefault()}),(0,B.on)(nt,"submit",function(Ee){return Ee&&Ee.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent"}].forEach(function(Ee){return Ee.event.split(" ").forEach(function(Ce){A.addEventListener(Ce,function(rr){return a.el.dispatchEvent((0,vn.t3)(rr,Ee.class))})})}),this._toggleEffects(!0),(0,B.hasDnd)(O)&&(this.droppable=new Xn(O,(n=this.wrapper)===null||n===void 0?void 0:n.el)),P.trigger("loaded"),this.loaded=!0},s.prototype._toggleEffects=function(e){var n=e?B.on:B.off,a=this.getWindow();a&&n(a,"".concat(vn.G1," resize"),this._emitUpdate)},s.prototype._emitUpdate=function(){this.model._emitUpdated()},s}(ho);const fn=Lo;var Oo=K(668),bo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),En=function(){return En=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},En.apply(this,arguments)};const rt=function(h){function s(e,n){var a=h.call(this,{model:e})||this;return(0,k.bindAll)(a,"onScroll","frameLoaded","updateOffset","remove","startDrag"),En(En({},e.config),{frameWrapView:a}),a.cv=n,a.frame=new fn(e,a),a.classAnim="".concat(a.ppfx,"frame-wrapper--anim"),a.updateOffset=(0,k.debounce)(a.updateOffset.bind(a),0),a.updateSize=(0,k.debounce)(a.updateSize.bind(a),0),a.listenTo(e,"loaded",a.frameLoaded),a.listenTo(e,"change:x change:y",a.updatePos),a.listenTo(e,"change:width change:height",a.updateSize),a.listenTo(e,"destroy remove",a.remove),a.updatePos(),a.setupDragger(),a}return bo(s,h),s.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},s.prototype.setupDragger=function(){var e,n,a,u=this,m=this.module,O=this.model,P=function(j){m.toggleFramesEvents(j)};this.dragger=new Oo.Z({onStart:function(){var j=O.attributes,A=j.x,nt=j.y;a=u.em.getZoomMultiplier(),e=A,n=nt,P(!1)},onEnd:function(){return P(!0)},setPosition:function(j){O.set({x:e+j.x*a,y:n+j.y*a})}})},s.prototype.startDrag=function(e){var n;e&&((n=this.dragger)===null||n===void 0||n.start(e))},s.prototype.__clear=function(e){var n=this.frame;n&&n.remove(e),(0,vn.L_)(this.elTools)},s.prototype.remove=function(e){var n=this;return this.__clear(e),ho.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(a){return n[a]=0}),this},s.prototype.updateOffset=function(){var e,n=this,a=n.em,u=n.$el,m=n.frame;a&&!a.destroyed&&(a.runDefault({preserveSelected:1}),u.removeClass(this.classAnim),(e=m==null?void 0:m.model)===null||e===void 0||e._emitUpdated())},s.prototype.updatePos=function(e){var n=this.model,a=this.el,u=n.attributes,m=u.x,O=u.y,P=a.style;this.frame.rect=void 0,P.left=isNaN(m)?m:"".concat(m,"px"),P.top=isNaN(O)?O:"".concat(O,"px"),e&&this.updateOffset()},s.prototype.updateSize=function(){this.updateDim()},s.prototype.updateDim=function(){var e=this,n=e.em,a=e.el,u=e.$el,m=e.model,O=e.classAnim,P=e.frame;if(P){P.rect=void 0,u.addClass(O);var j=this.__handleSize(),A=j.noChanges,nt=j.width,At=j.height;((0,k.isNull)(nt)||(0,k.isNull)(At))&&m.set(En(En({},nt?{}:{width:a.offsetWidth}),At?{}:{height:a.offsetHeight}),{silent:1}),n.stopDefault({preserveSelected:1}),A?this.updateOffset():setTimeout(this.updateOffset,350)}},s.prototype.onScroll=function(){var e=this.frame;this.em.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},s.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},s.prototype.__handleSize=function(){var e="px",n=this.model,a=this.el.style,u=n.attributes,m=u.width,O=u.height,P=a.width||"",j=a.height||"",A=m||"",nt=O||"",At=P==A&&j==nt;return a.width=(0,k.isNumber)(A)?"".concat(A).concat(e):A,a.height=(0,k.isNumber)(nt)?"".concat(nt).concat(e):nt,{noChanges:At,width:m,height:O,newW:A,newH:nt}},s.prototype.render=function(){var e=this,n=e.frame,a=e.$el,u=e.ppfx,m=e.cv,O=e.model,P=e.el,j=O.attributes.onRender;this.__clear(),this.__handleSize(),n.render(),a.empty().attr({class:"".concat(u,"frame-wrapper")}).append(`
      <div class="`.concat(u,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(u,`frame-wrapper__name" data-action-move>
          `).concat(O.get("name")||"",`
        </div>
        <div class="`).concat(u,`frame-wrapper__top-r">
          <div class="`).concat(u,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(u,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(u,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(u,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(n.el);var A=(0,vn.ut)("div",{class:"".concat(u,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(u,`highlighter" data-hl></div>
      <div class="`).concat(u,`badge" data-badge></div>
      <div class="`).concat(u,`placeholder">
        <div class="`).concat(u,`placeholder-int"></div>
      </div>
      <div class="`).concat(u,`ghost"></div>
      <div class="`).concat(u,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(u,`resizer"></div>
      <div class="`).concat(u,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(u,`offset-fixed-v"></div>
    `));this.elTools=A;var nt=m==null?void 0:m.toolsWrapper;return nt&&nt.appendChild(A),j&&j({el:P,elTop:P.querySelector("[data-frame-top]"),elRight:P.querySelector("[data-frame-right]"),elBottom:P.querySelector("[data-frame-bottom]"),elLeft:P.querySelector("[data-frame-left]"),frame:O,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},s}(ho);var Xt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ir=function(h){function s(e,n){e===void 0&&(e={});var a=h.call(this,e,!0)||this;return a.listenTo(a.collection,"reset",a.render),a.canvasView=n.canvasView,a._module=n.module,a}return Xt(s,h),s.prototype.onRemoveBefore=function(e,n){n===void 0&&(n={}),e.forEach(function(a){return a.remove(n)})},s.prototype.onRender=function(){var e=this.$el,n=this.ppfx;e.attr({class:"".concat(n,"frames")})},s.prototype.renderView=function(e,n){return new rt(e,this.canvasView)},s}(In);const pr=ir;var Hr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wn=function(){return wn=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},wn.apply(this,arguments)},Nn=function(h){function s(e){var n=h.call(this,{model:e})||this;n.ready=!1,(0,k.bindAll)(n,"clearOff","onKeyPress","onCanvasMove");var a=n,u=a.em,m=a.pfx;return n.className="".concat(m,"canvas").concat(u.config.customUI?"":" ".concat(m,"canvas-bg")),n._initFrames(),n.listenTo(u,"change:canvasOffset",n.clearOff),n.listenTo(u,"component:selected",n.checkSelected),n.listenTo(e,"change:zoom change:x change:y",n.updateFrames),n.listenTo(e,"change:frames",n._onFramesUpdate),n.toggleListeners(!0),n}return Hr(s,h),s.prototype.events=function(){return{wheel:"onWheel"}},s.prototype.template=function(){var e=this.pfx;return`
      <div class="`.concat(e,`canvas__frames" data-frames></div>
      <div id="`).concat(e,'tools" class="').concat(e,`canvas__tools" data-tools></div>
    `)},s.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},s.prototype._initFrames=function(){var e=this,n=e.frames,a=e.model,u=e.config,m=e.em,O=a.frames;m.set("readyCanvas",0),O.once("loaded:all",function(){return m.set("readyCanvas",1)}),n==null||n.remove(),this.frames=new pr({collection:O},wn(wn({},u),{canvasView:this}))},s.prototype.checkSelected=function(e,n){var a;n===void 0&&(n={});var u=n.scroll,m=this.em.get("currentFrame");u&&((a=e.views)===null||a===void 0||a.forEach(function(O){O._getFrame()===m&&O.scrollIntoView(u)}))},s.prototype.remove=function(){for(var e,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return(e=this.frames)===null||e===void 0||e.remove(),this.frames=void 0,ho.prototype.remove.apply(this,n),this.toggleListeners(!1),this},s.prototype.preventDefault=function(e){var n;e&&(e.preventDefault(),(n=e._parentEvent)===null||n===void 0||n.preventDefault())},s.prototype.onCanvasMove=function(e){},s.prototype.toggleListeners=function(e){this.el;var n=e?B.on:B.off;n(document,"keypress",this.onKeyPress),n(window,"scroll resize",this.clearOff)},s.prototype.onKeyPress=function(e){var n=this.em;(0,B.getKeyChar)(e)!==" "||n.getZoomDecimal()===1||n.Canvas.isInputFocused()||(this.preventDefault(e),n.Editor.runCommand("core:canvas-move"))},s.prototype.onWheel=function(e){if((e.ctrlKey||e.metaKey)&&this.em.getConfig().multiFrames){this.preventDefault(e);var n=this.model,a=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),u=n.get("zoom");n.set("zoom",u+2*a)}},s.prototype.updateFrames=function(e){var n=this.em,a=this.model.attributes,u=a.x,m=a.y,O=this.getZoom(),P={preserveSelected:1},j=O?1/O:1;this.framesArea.style.transform="scale(".concat(O,") translate(").concat(u*j,"px, ").concat(m*j,"px)"),this.clearOff(),n.stopDefault(P),n.trigger("canvas:update",e),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){return n.runDefault(P)},300)},s.prototype.getZoom=function(){return this.em.getZoomDecimal()},s.prototype.isElInViewport=function(e){var n=(0,B.getElement)(e),a=(0,B.getElRect)(n),u=this.getFrameOffset(n),m=a.top,O=a.left;return m>=0&&O>=0&&m<=u.height&&O<=u.width},s.prototype.offset=function(e,n){n===void 0&&(n={});var a=n.noScroll,u=(0,B.getElRect)(e),m=a?{x:0,y:0}:(0,vn.GX)(e);return{top:u.top+m.y,left:u.left+m.x,width:u.width,height:u.height}},s.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},s.prototype.getFrameOffset=function(e){var n;if(!this.frmOff||e){var a=(n=this.frame)===null||n===void 0?void 0:n.el,u=e==null?void 0:e.ownerDocument.defaultView,m=u?u.frameElement:a;this.frmOff=this.offset(m||a)}return this.frmOff},s.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},s.prototype.getElementPos=function(e,n){n===void 0&&(n={});var a=this.getZoom(),u=this.getFrameOffset(e),m=this.el,O=this.getCanvasOffset(),P=this.offset(e,n),j=n.avoidFrameOffset?0:u.top,A=n.avoidFrameOffset?0:u.left,nt=n.avoidFrameZoom?P.top:P.top*a,At=n.avoidFrameZoom?P.left:P.left*a;return{top:n.avoidFrameOffset?nt:nt+j-O.top+m.scrollTop,left:n.avoidFrameOffset?At:At+A-O.left+m.scrollLeft,height:n.avoidFrameZoom?P.height:P.height*a,width:n.avoidFrameZoom?P.width:P.width*a,zoom:a,rect:P}},s.prototype.getElementOffsets=function(e){var n=this;if(!e||(0,B.isTextNode)(e))return{};var a={},u=window.getComputedStyle(e);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach(function(m){a[m]=parseFloat(u[m])*n.getZoom()}),a},s.prototype.getPosition=function(e){var n;e===void 0&&(e={});var a=(n=this.frame)===null||n===void 0?void 0:n.el.contentDocument;if(!a)return{top:0,left:0,width:0,height:0};var u=a.body,m=this.getZoom(),O=this.getFrameOffset(),P=this.getCanvasOffset(),j=e.noScroll;return{top:O.top+(j?0:u.scrollTop)*m-P.top,left:O.left+(j?0:u.scrollLeft)*m-P.left,width:P.width,height:P.height}},s.prototype.updateScript=function(e){var n=e.model,a=n.getId();e.scriptContainer||(e.scriptContainer=(0,vn.ut)("div",{"data-id":a}),this.getJsContainer().appendChild(e.scriptContainer)),e.el.id=a,e.scriptContainer.innerHTML="";var u=document.createElement("script"),m=n.getScriptString(),O=n.get("script-props")?m:`function(){
`.concat(m,`
;}`),P=JSON.stringify(n.__getScriptProps());u.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(a,`');
        if (!item) return;
        (`).concat(O,".bind(item))(").concat(P,`)
      }, 1);`),setTimeout(function(){var j=e.scriptContainer;j==null||j.appendChild(u)},0)},s.prototype.getJsContainer=function(e){var n=this.getFrameView(e);return n&&n.getJsContainer()},s.prototype.getFrameView=function(e){return(e==null?void 0:e._getFrame())||this.em.get("currentFrame")},s.prototype._renderFrames=function(){if(this.ready){var e=this,n=e.model,a=e.frames,u=e.em,m=e.framesArea,O=n.frames;O.listenToLoad(),a.render();var P=O.at(0),j=P==null?void 0:P.view;u.setCurrentFrame(j),m==null||m.appendChild(a.el),this.frame=j}},s.prototype.render=function(){var e=this,n=e.el,a=e.$el,u=e.ppfx,m=e.config,O=e.em;a.html(this.template());var P=a.find("[data-frames]");this.framesArea=P.get(0);var j=a.find("[data-tools]");return this.toolsWrapper=j.get(0),j.append(`
      <div class="`.concat(u,"tools ").concat(u,`tools-gl" style="pointer-events:none">
        <div class="`).concat(u,`placeholder">
          <div class="`).concat(u,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(u,`tools" style="pointer-events:none">
        `).concat(m.extHl?'<div class="'.concat(u,'highlighter-sel"></div>'):"",`
        <div class="`).concat(u,`badge"></div>
        <div class="`).concat(u,`ghost"></div>
        <div class="`).concat(u,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(u,`resizer"></div>
        <div class="`).concat(u,`offset-v"></div>
        <div class="`).concat(u,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=n.querySelector("#".concat(u,"tools")),this.hlEl=n.querySelector(".".concat(u,"highlighter")),this.badgeEl=n.querySelector(".".concat(u,"badge")),this.placerEl=n.querySelector(".".concat(u,"placeholder")),this.ghostEl=n.querySelector(".".concat(u,"ghost")),this.toolbarEl=n.querySelector(".".concat(u,"toolbar")),this.resizerEl=n.querySelector(".".concat(u,"resizer")),this.offsetEl=n.querySelector(".".concat(u,"offset-v")),this.fixedOffsetEl=n.querySelector(".".concat(u,"offset-fixed-v")),this.toolsGlobEl=n.querySelector(".".concat(u,"tools-gl")),this.el.className=(0,B.getUiClass)(O,this.className),this.ready=!0,this._renderFrames(),this},s}(ho);const Xr=Nn;var cr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mt=function(){return Mt=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Mt.apply(this,arguments)},xe=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},lr=function(h){function s(e){var n=h.call(this,e,"Canvas",_t)||this;return n.canvas=new Dn(n),n.model=n.canvas,n.startAutoscroll=n.startAutoscroll.bind(n),n.stopAutoscroll=n.stopAutoscroll.bind(n),n}return cr(s,h),s.prototype.getCanvasView=function(){return this.canvasView},s.prototype.onLoad=function(){this.model.init()},s.prototype.getModel=function(){return this.canvas},s.prototype.getElement=function(){return this.getCanvasView().el},s.prototype.getFrame=function(e){return this.getFrames()[e||0]},s.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e==null?void 0:e.el},s.prototype.getFramesEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.framesArea},s.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e==null?void 0:e.getWindow()},s.prototype.getDocument=function(){var e=this.getFrameEl();return e==null?void 0:e.contentDocument},s.prototype.getBody=function(){var e=this.getDocument();return e==null?void 0:e.body},s.prototype._getLocalEl=function(e,n,a){var u=e,m=n==null?void 0:n._getFrame();return m?m[a]():u},s.prototype.getGlobalToolsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.toolsGlobEl},s.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},s.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},s.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},s.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},s.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},s.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},s.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},s.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},s.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},s.prototype.render=function(){var e;return(e=this.canvasView)===null||e===void 0||e.remove(),this.canvasView=new Xr(this.canvas),this.canvasView.render().el},s.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),n=this.offset(this.getElement());return{top:e.top-n.top,left:e.left-n.left}},s.prototype.offset=function(e){return this.getCanvasView().offset(e)},s.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},s.prototype.getElementPos=function(e,n){return this.getCanvasView().getElementPos(e,n)},s.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},s.prototype.getRect=function(){var e,n=(e=this.getCanvasView().getPosition())!==null&&e!==void 0?e:{},a=n.top,u=a===void 0?0:a,m=n.left,O=m===void 0?0:m;return Mt(Mt({},this.getCanvasView().getCanvasOffset()),{topScroll:u,leftScroll:O})},s.prototype.getTargetToElementDim=function(e,n,a){a===void 0&&(a={});var u=a||{},m=this.getCanvasView().getPosition();if(m){var O=u.elPos||this.getCanvasView().getElementPos(n),P=a.toRight||0,j=u.targetHeight||e.offsetHeight,A=u.targetWidth||e.offsetWidth,nt=u.event||null,At=O.top-j,Bt=O.left;Bt+=P?O.width:0;var qt=(Bt=P?Bt-A:Bt)<m.left?m.left:Bt,be=At<m.top?m.top:At,Ee={top:be=be>O.top+O.height?O.top+O.height:be,left:qt,elementTop:O.top,elementLeft:O.left,elementWidth:O.width,elementHeight:O.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:m.top,canvasLeft:m.left,canvasWidth:m.width,canvasHeight:m.height};return nt&&this.em&&this.em.trigger(nt,Ee),Ee}},s.prototype.canvasRectOffset=function(e,n,a){var u=this;a===void 0&&(a={});var m=function(O,P,j){P===void 0&&(P=1);var A=u.em.getZoomDecimal(),nt=P?"top":"left",At=O.ownerDocument,Bt=a.offset?function(xo){var ii=xo.defaultView;return ii==null?void 0:ii.frameElement}(At):{},qt=Bt.offsetTop,be=qt===void 0?0:qt,Ee=Bt.offsetLeft,Ce=Ee===void 0?0:Ee,rr=At.body||{},yr=rr.scrollTop,Jr=yr===void 0?0:yr,Qr=rr.scrollLeft,Sn=P?Jr:Qr===void 0?0:Qr,Pn=P?be:Ce;return j[nt]-(Sn-Pn)*A};return{top:m(e,1,n),left:m(e,0,n)}},s.prototype.getTargetToElementFixed=function(e,n,a){a===void 0&&(a={});var u=a.pos||this.getElementPos(e,{noScroll:!0}),m=a.canvasOff||this.canvasRectOffset(e,u),O=n.offsetHeight||0,P=n.offsetWidth||0,j=u.left+u.width,A=this.getCanvasView(),nt=A.getPosition(),At=A.getFrameOffset(e),Bt=a.event,qt=-O,be=(0,k.isUndefined)(a.left)?u.width-P:a.left;if(be=u.left<-be?-u.left:be,be=j>nt.width?be-(j-nt.width):be,m.top<O){var Ee=u.height+O;Ee<At.height?qt+=Ee:qt=-m.top<u.height?-m.top:u.height}var Ce={top:qt,left:be,canvasOffsetTop:m.top,canvasOffsetLeft:m.left,elRect:u,canvasOffset:m,canvasRect:nt,targetWidth:P,targetHeight:O};return Bt&&this.em.trigger(Bt,Ce),Ce},s.prototype.getMouseRelativePos=function(e,n){n===void 0&&(n={});var a=0,u=0,m=n.subWinOffset,O=e.target.ownerDocument,P=O.defaultView||O.parentWindow,j=P.frameElement,A=m?P.pageYOffset:0,nt=m?P.pageXOffset:0;if(j){var At=j.getBoundingClientRect();a=At.top||0,u=At.left||0}return{y:e.clientY+a-A,x:e.clientX+u-nt}},s.prototype.getMouseRelativeCanvas=function(e,n){var a,u=this.getZoomDecimal(),m=(a=this.getCanvasView().getPosition(n))!==null&&a!==void 0?a:{},O=m.top,P=O===void 0?0:O,j=m.left,A=j===void 0?0:j;return{y:e.clientY*u+P,x:e.clientX*u+A}},s.prototype.hasFocus=function(){return this.getDocument().hasFocus()},s.prototype.isInputFocused=function(){var e=this.getDocument(),n=this.getFrameEl(),a=xe(["body"],this.config.notTextable,!0),u=n&&document.activeElement===n?e&&e.activeElement:document.activeElement;return u&&!a.some(function(m){return u.matches(m)})},s.prototype.scrollTo=function(e,n){n===void 0&&(n={});var a=(0,B.getElement)(e),u=a&&(0,B.getViewEl)(a);u&&u.scrollIntoView(n)},s.prototype.startAutoscroll=function(e){var n=e&&e.view||this.em.getCurrentFrame();n&&n.startAutoscroll()},s.prototype.stopAutoscroll=function(e){var n=e&&e.view||this.em.getCurrentFrame();n&&n.stopAutoscroll()},s.prototype.setZoom=function(e){return this.canvas.set("zoom",typeof e=="string"?parseFloat(e):e),this},s.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},s.prototype.setCoords=function(e,n){return this.canvas.set({x:parseFloat(e),y:parseFloat(n)}),this},s.prototype.getCoords=function(){var e=this.canvas.attributes;return{x:e.x,y:e.y}},s.prototype.getZoomDecimal=function(){return this.getZoom()/100},s.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},s.prototype.toggleFramesEvents=function(e){this.getFramesEl().style.pointerEvents=e?"":"none"},s.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},s.prototype.addFrame=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this.canvas.frames.add(new Dt(this,Mt({},e)),n)},s.prototype.destroy=function(){var e,n=this;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(a){return n[a]={}})},s}(xt);const Yr=lr,en={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var gn="text/html",Mr=gn,Wn=function(){return Wn=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Wn.apply(this,arguments)},wo="data-gjs-",$o="parse:html";const Vo=function(h,s){return s===void 0&&(s={}),{compTypes:"",modelAttrStart:wo,getPropAttribute:function(e,n){var a=e.replace(this.modelAttrStart,""),u=(n==null?void 0:n.length)||0,m=n==null?void 0:n.substring(0,1),O=n==null?void 0:n.substring(u-1),P=n==="true"||n!=="false"&&n;try{P=m=="{"&&O=="}"||m=="["&&O=="]"?JSON.parse(P):P}catch{}return{name:a,value:P}},splitPropsFromAttr:function(e){var n=this;e===void 0&&(e={});var a={},u={};return(0,k.each)(e,function(m,O){if(O.indexOf(n.modelAttrStart)===0){var P=n.getPropAttribute(O,m);a[P.name]=P.value}else u[O]=m}),{props:a,attrs:u}},parseStyle:function(e){for(var n={},a=e.split(";"),u=0,m=a.length;u<m;u++){var O=a[u].trim();if(O){var P=O.split(":");n[P[0].trim()]=P.slice(1).join(":").trim()}}return n},parseClass:function(e){for(var n=[],a=e.split(" "),u=0,m=a.length;u<m;u++){var O=a[u].trim();O&&n.push(O)}return n},parseNode:function(e,n){n===void 0&&(n={});for(var a=[],u=e.childNodes,m=0,O=u.length;m<O;m++){var P=u[m],j=P.attributes||[],A=j.length,nt=a[a.length-1],At=P.childNodes.length,Bt=this.compTypes,qt={};if(Bt){var be="",Ee=P.getAttribute&&P.getAttribute("".concat(this.modelAttrStart,"type"));if(Ee)qt={type:Ee};else{for(var Ce=0;Ce<Bt.length;Ce++){var rr=Bt[Ce];if(be=rr.model.isComponent(P,n)){typeof be!="object"&&(be={type:rr.id});break}}qt=be}}if(!qt.tagName){var yr=P.tagName||"",Jr=P.namespaceURI||"";qt.tagName=yr&&Jr==="http://www.w3.org/1999/xhtml"?yr.toLowerCase():yr}A&&(qt.attributes={});for(var Qr=0;Qr<A;Qr++){var Sn=j[Qr].nodeName,Pn=j[Qr].nodeValue;if(Sn=="style")qt.style=this.parseStyle(Pn);else if(Sn=="class")qt.classes=this.parseClass(Pn);else{if(Sn=="contenteditable")continue;if(Sn.indexOf(this.modelAttrStart)===0){var xo=this.getPropAttribute(Sn,Pn);qt[xo.name]=xo.value}else Pn===""&&P[Sn]===!0&&(Pn=!0),qt.attributes[Sn]=Pn}}if(At&&!qt.components){var ii=P.childNodes[0];At===1&&ii.nodeType===3?(!qt.type&&(qt.type="text"),qt.components={type:"textnode",content:ii.nodeValue}):qt.components=this.parseNode(P,Wn(Wn({},n),{inSvg:n.inSvg||qt.type==="svg"}))}if(qt.type=="textnode"){if(nt&&nt.type=="textnode"){nt.content+=qt.content;continue}if(!n.keepEmptyTextNodes){var va=P.nodeValue;if(va!=" "&&!va.trim())continue}}At||"".concat(P.outerHTML).slice(-2)!=="/>"||(qt.void=!0);var Qs=qt.components;if(!qt.type&&Qs){for(var tl=1,Ll=0,Xa=0;Xa<Qs.length;Xa++){var lu=Qs[Xa],Wu=lu.type;if(["text","textnode"].indexOf(Wu)<0&&s.textTags.indexOf(lu.tagName)<0){tl=0;break}Wu=="textnode"&&(Ll=1)}tl&&Ll&&(qt.type="text")}(qt.tagName||qt.type=="textnode")&&a.push(qt)}return a},parse:function(e,n,a){var u;a===void 0&&(a={});var m=(h==null?void 0:h.get("Config"))||{},O={},P=Wn(Wn({},s),a),j=Wn(Wn(Wn({},s.optionsHtml),{htmlType:((u=s.optionsHtml)===null||u===void 0?void 0:u.htmlType)||s.htmlType}),a),A=(0,k.isFunction)(P.parserHtml)?P.parserHtml(e,j):function(rr,yr){yr===void 0&&(yr={});var Jr,Qr=new DOMParser,Sn=yr.htmlType||Mr,Pn=Sn===gn,xo=Pn?rr:"<div>".concat(rr,"</div>"),ii=Qr.parseFromString(xo,Sn);if(Pn){var va=ii.head,Qs=ii.body,tl=va.querySelectorAll("script");(0,k.each)(tl,function(Xa){return Qs.appendChild(Xa)});var Ll=[];(0,k.each)(va.children,function(Xa){return Ll.push(Xa)}),(0,k.each)(Ll,function(Xa,lu){return Qs.insertBefore(Xa,Qs.children[lu])}),Jr=Qs}else Jr=ii.firstChild;return Jr}(e,j),nt=A.querySelectorAll("script"),At=nt.length;if(!((0,k.isUndefined)(m.allowScripts)?j.allowScripts:m.allowScripts))for(;At--;)nt[At].parentNode.removeChild(nt[At]);if(j.allowUnsafeAttr||this.__clearUnsafeAttr(A),n){for(var Bt=A.querySelectorAll("style"),qt=Bt.length,be="";qt--;)be=Bt[qt].innerHTML+be,Bt[qt].parentNode.removeChild(Bt[qt]);be&&(O.css=n.parse(be))}h&&h.trigger("".concat($o,":root"),{input:e,root:A});var Ee=this.parseNode(A,P),Ce=Ee.length!==1||P.returnArray?Ee:Ee[0];return O.html=Ce,h&&h.trigger($o,{input:e,output:O}),O},__clearUnsafeAttr:function(e){var n=this,a=e.attributes||[],u=e.childNodes||[],m=[];(0,k.each)(a,function(O){var P=O.nodeName||"";P.indexOf("on")===0&&m.push(P)}),m.map(function(O){return e.removeAttribute(O)}),(0,k.each)(u,function(O){return n.__clearUnsafeAttr(O)})}}};var ol=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jo=function(){return jo=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},jo.apply(this,arguments)},Ra=Vo();const xa=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ol(s,h),s.prototype.parseStyle=function(e){return Ra.parseStyle(e)},s.prototype.extendStyle=function(e){return jo(jo({},this.getStyle()),e)},s.prototype.getStyle=function(e){var n=this.get("style")||{},a=jo({},n);return e&&(0,k.isString)(e)?a[e]:a},s.prototype.setStyle=function(e,n){var a=this;e===void 0&&(e={}),n===void 0&&(n={}),(0,k.isString)(e)&&(e=this.parseStyle(e));var u=this.getStyle(n),m=jo({},e),O=jo({},m);(0,k.keys)(O).forEach(function(j){O[j]===""&&delete O[j]}),this.set("style",O,n);var P=(0,B.shallowDiff)(u,m);return delete P.__p,(0,k.keys)(P).forEach(function(j){var A=a.em;n.noEvent||(a.trigger("change:style:".concat(j)),A&&(A.trigger("styleable:change",a,j,n),A.trigger("styleable:change:".concat(j),a,j,n)))}),m},s.prototype.addStyle=function(e,n,a){var u;n===void 0&&(n=""),a===void 0&&(a={}),typeof e=="string"?((u={})[e]=n,e=u):a=n||{},e=this.extendStyle(e),this.setStyle(e,a)},s.prototype.removeStyle=function(e){var n=this.getStyle();delete n[e],this.setStyle(n)},s.prototype.styleToString=function(e){e===void 0&&(e={});var n=[],a=this.getStyle(e);for(var u in a){var m=e.important,O=(0,k.isArray)(m)?m.indexOf(u)>=0:m,P="".concat(a[u]).concat(O?" !important":""),j=u.substr(0,2)=="__";P&&!j&&n.push("".concat(u,":").concat(P,";"))}return n.join("")},s.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},s.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},s}(N.Hn);var il=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Go=function(){return Go=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Go.apply(this,arguments)},al=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},oa=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},qi=function(h,s){return s===void 0&&(s=[]),h?(((0,k.isArray)(h)||(0,k.isFunction)(h.map)?h:[h]).map(function(e){s.push(e.getId()),qi(e.components().models,s)}),s):[]},si=function(h,s,e){s===void 0&&(s={}),e===void 0&&(e={}),e.visitedCmps=e.visitedCmps||{};var n=e.visitedCmps;return((0,k.isArray)(h)?h:[h]).map(function(a){var u=a.attributes,m=u===void 0?{}:u,O=a.components,P=a.tagName,j=m.id,A=(m.draggable,al(m,["id","draggable"])),nt=a;if(j&&(n[j]?(n[j].push(nt),j=Si.getNewId(s),nt.attributes.id=j):(n[j]=[],s[j]&&(nt=s[j],P&&nt.set({tagName:P},Go(Go({},e),{silent:!0})),(0,k.keys)(A).length&&nt.addAttributes(A,Go({},e))))),O){var At=si(O,s);if((0,k.isFunction)(nt.components)){var Bt=nt.components();Bt.length>0&&Bt.reset(At,e)}else nt.components=At}return nt})},yi=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return il(s,h),s.prototype.initialize=function(e,n){n===void 0&&(n={}),this.opt=n,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var a=n.em,u=n.config;this.config=u,this.em=a,this.domc=n.domc||(a==null?void 0:a.Components)},s.prototype.resetChildren=function(e,n){var a=this;n===void 0&&(n={});var u=this,m=n.previousModels||[],O=m.filter(function(A){return!e.get(A.cid)}),P=qi(e),j=qi(m).filter(function(A){return P.indexOf(A)>=0});n.keepIds=(n.keepIds||[]).concat(j),O.forEach(function(A){return a.removeChildren(A,u,n)}),e.each(function(A){return a.onAdd(A)})},s.prototype.resetFromString=function(e,n){var a,u;e===void 0&&(e=""),n===void 0&&(n={}),n.keepIds=qi(this);var m=this,O=m.domc,P=m.em,j=m.parent,A=P==null?void 0:P.Css,nt=(O==null?void 0:O.allById())||{},At=this.parseString(e,n),Bt=si(At,nt,n),qt=n.visitedCmps,be=qt===void 0?{}:qt;Object.keys(be).forEach(function(Ee){var Ce=be[Ee];if(Ce.length){var rr=(A==null?void 0:A.getRules("#".concat(Ee)))||[];rr.length&&Ce.forEach(function(yr){rr.forEach(function(Jr){var Qr=Jr.clone();Qr.set("selectors",["#".concat(yr.attributes.id)]),A.getAll().add(Qr)})})}}),this.reset(Bt,n),P==null||P.trigger("component:content",j,n,e),(u=(a=j).__checkInnerChilds)===null||u===void 0||u.call(a)},s.prototype.removeChildren=function(e,n,a){var u=this;if(a===void 0&&(a={}),e){var m=this.domc,O=this.em,P=a.temporary||a.fromUndo;if(e.prevColl=this,!P){var j=e.getId(),A=O.Selectors.getAll(),nt=O.Css.getAll(),At=(a.keepIds||[]).indexOf(j)<0;delete(m?m.allById():{})[j];var Bt=At?nt.remove(nt.filter(function(be){return be.getSelectors().getFullString()==="#".concat(j)}),a):[];A.remove(Bt.map(function(be){return be.getSelectors().at(0)})),e.opt.temporary||(O.Commands.run("core:component-style-clear",{target:e}),e.removed(),e.trigger("removed"),O.trigger("component:remove",e)),e.components().forEach(function(be){return u.removeChildren(be,n,a)})}var qt=e.components();O.stopListening(qt),O.stopListening(e),O.stopListening(e.get("classes")),e.__postRemove()}},s.prototype.model=function(e,n){var a,u=n.collection.opt,m=u.em,O=m.Components.componentTypes;n.em=m,n.config=u.config,n.componentTypes=O,n.domc=u.domc;for(var P=0;P<O.length;P++)if(O[P].id==e.type){a=O[P].model;break}return a||(a=O[O.length-1].model,m&&e.type&&m.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:n})),new a(e,n)},s.prototype.parseString=function(e,n){n===void 0&&(n={});var a=this.em,u=this.domc,m=a.Css,O=a.Parser.parseHtml(e);if(Si.checkId(O.html,O.css,u.componentsById,n),O.css&&m&&!n.temporary){n.at;var P=al(n,["at"]);m.addCollection(O.css,Go(Go({},P),{extend:1}))}return O.html},s.prototype.add=function(e,n){var a=this;n===void 0&&(n={}),n.keepIds=oa(oa([],n.keepIds||[],!0),qi(n.previousModels),!0),(0,k.isString)(e)?e=this.parseString(e,n):(0,k.isArray)(e)&&(e=oa([],e,!0)).forEach(function(O,P){if((0,k.isString)(O)){var j=a.parseString(O,n);e[P]=(0,k.isArray)(j)&&!j.length?null:j}});var u=(0,k.isArray)(e);e=(u?e:[e]).filter(Boolean).map(function(O){return a.processDef(O)}),e=u?(0,k.flatten)(e,1):e[0];var m=N.FE.prototype.add.apply(this,[e,n]);return this.__firstAdd=m,m},s.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var n=this.em,a=this.config,u=(a===void 0?{}:a).processor,m=e;if(u){var O=u(m=Go({},m));O&&((0,k.each)(m,function(Bt,qt){return delete m[qt]}),(0,k.extend)(m,O))}if(m.$$typeof&&typeof m.props=="object"){(m=Go({},m)).props=Go({},m.props);var P=n.Components,j=n.Parser.parserHtml;(0,k.each)(m,function(Bt,qt){(0,k.includes)(["props","type"],qt)||delete m[qt]});var A=m.props,nt=A.children;delete A.children,delete m.props;var At=j.splitPropsFromAttr(A);m.attributes=At.attrs,nt&&(m.components=nt),m.type?P.getType(m.type)||(m.tagName=m.type,delete m.type):m.type="textnode",(0,k.extend)(m,At.props)}return m},s.prototype.onAdd=function(e,n,a){a===void 0&&(a={});var u=this.domc,m=this.em,O=e.getStyle(),P=m&&m.getConfig().avoidInlineStyle;if(u&&u.Component.ensureInList(e),!(0,k.isEmpty)(O)&&!P&&m&&m.get&&m.getConfig().forceClass&&!a.temporary){var j=e.cid;m.Css.setClassRule(j,O),e.setStyle({}),e.addClass(j)}e.__postAdd({recursive:!0})},s}(N.FE);const Ha=yi;var Ns=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ts=1,Ca=2,Ba=function(h){function s(e,n){n===void 0&&(n={});var a=h.call(this,e,n)||this,u=n.config,m=u===void 0?{}:u,O=a.get("name"),P=a.get("label");O?P||a.set("label",O):a.set("name",P);var j=a.get("name"),A=m.escapeName,nt=A?A(j):s.escapeName(j);return a.set("name",nt),a.em=n.em,a}return Ns(s,h),s.prototype.defaults=function(){return{name:"",label:"",type:ts,active:!0,private:!1,protected:!1,_undo:!0}},s.prototype.isId=function(){return this.get("type")===Ca},s.prototype.isClass=function(){return this.get("type")===ts},s.prototype.getFullName=function(e){e===void 0&&(e={});var n=e.escape,a=this.get("name"),u="";switch(this.get("type")){case ts:u=".";break;case Ca:u="#"}return u+(n?n(a):a)},s.prototype.toString=function(){return this.getFullName()},s.prototype.getLabel=function(){return this.get("label")},s.prototype.setLabel=function(e){return this.set("label",e)},s.prototype.getActive=function(){return this.get("active")},s.prototype.setActive=function(e){return this.set("active",e)},s.prototype.toJSON=function(e){e===void 0&&(e={});var n=this.em,a=N.Hn.prototype.toJSON.call(this,[e]),u=(0,k.result)(this,"defaults");if(n&&n.getConfig().avoidDefaults){(0,k.forEach)(u,function(O,P){a[P]===O&&delete a[P]}),a.label===a.name&&delete a.label;var m=(0,k.keys)(a).length;m===1&&a.name&&(a=a.name),m===2&&a.name&&a.type&&(a=this.getFullName())}return a},s.escapeName=function(e){return"".concat(e).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},s.TYPE_CLASS=ts,s.TYPE_ID=Ca,s}(N.Hn);const bi=Ba;Ba.prototype.idAttribute="name";var Vs=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ki=function(h,s){return h.reduce(function(e,n,a){return e.concat(Ki(h.slice(a+1),"".concat(s).concat(n)))},[s])},ka=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Vs(s,h),s.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||bi.TYPE_CLASS)},s.prototype.getStyleable=function(){return(0,k.filter)(this.models,function(e){return e.get("active")&&!e.get("private")})},s.prototype.getValid=function(e){var n=(e===void 0?{}:e).noDisabled;return(0,k.filter)(this.models,function(a){return!a.get("private")}).filter(function(a){return n?a.get("active"):1})},s.prototype.getFullString=function(e,n){n===void 0&&(n={});var a=[];return(e||this).forEach(function(u){return a.push(u.getFullName(n))}),n.sort&&a.sort(),a.join("").trim()},s.prototype.getFullName=function(e){e===void 0&&(e={});var n=e.combination,a=e.array,u=[],m=this.map(function(O){return O.getFullName(e)}).sort();return n?m.forEach(function(O,P){u=u.concat(Ki(m.slice(P+1),O))}):u=m,a?u:n?u.join(","):u.join("")},s}(N.FE);const xi=ka;ka.prototype.model=bi;var hs=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gs=function(){return gs=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},gs.apply(this,arguments)};const Yi=function(h){function s(e,n){var a=h.call(this,e)||this,u=a.attributes,m=u.target,O=u.name;return!a.get("id")&&a.set("id",O),m&&a.setTarget(m),a.em=n,a}return hs(s,h),s.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},s.prototype.setTarget=function(e){if(e){var n=this.attributes,a=n.name,u=n.changeProp,m=n.value;this.target=e,this.unset("target");var O=u?"change:".concat(a):"change:attributes:".concat(a);this.listenTo(e,O,this.targetUpdated);var P=m||this.getValue();!(0,k.isUndefined)(P)&&this.set({value:P},{silent:!0})}},s.prototype.getId=function(){return this.get("id")},s.prototype.getType=function(){return this.get("type")},s.prototype.getName=function(){return this.get("name")},s.prototype.getLabel=function(e){var n;e===void 0&&(e={});var a=e.locale,u=a===void 0||a,m=this.getId(),O=this.get("label")||this.getName();return u&&((n=this.em)===null||n===void 0?void 0:n.t("traitManager.traits.labels.".concat(m)))||O},s.prototype.getValue=function(){return this.getTargetValue()},s.prototype.setValue=function(e,n){var a;n===void 0&&(n={});var u={},m=this.get("setValue");m?m({value:e,editor:(a=this.em)===null||a===void 0?void 0:a.getEditor(),trait:this,component:this.target,partial:!!n.partial}):(n.partial&&(u.avoidStore=!0),this.setTargetValue(e,u),n.partial===!1&&(this.setTargetValue(""),this.setTargetValue(e)))},s.prototype.getDefault=function(){return this.get("default")},s.prototype.getOptions=function(){return this.get("options")||[]},s.prototype.getOption=function(e){var n=this,a=(0,B.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(u){return n.getOptionId(u)===a})[0]},s.prototype.getOptionId=function(e){return e.id||e.value},s.prototype.getOptionLabel=function(e,n){var a;n===void 0&&(n={});var u=n.locale,m=u===void 0||u,O=(0,k.isString)(e)?this.getOption(e):e,P=this.getOptionId(O),j=O.label||O.name||P,A=this.getName();return m&&((a=this.em)===null||a===void 0?void 0:a.t("traitManager.traits.options.".concat(A,".").concat(P)))||j},s.prototype.props=function(){return this.attributes},s.prototype.targetUpdated=function(){var e,n=this.getTargetValue();this.set({value:n},{fromTarget:1}),(e=this.em)===null||e===void 0||e.trigger("trait:update",{trait:this,component:this.target})},s.prototype.getTargetValue=function(){var e,n,a=this.getName(),u=this.target,m=this.get("getValue");return n=m?m({editor:(e=this.em)===null||e===void 0?void 0:e.getEditor(),trait:this,component:u}):this.get("changeProp")?u.get(a):u.getAttributes()[a],(0,k.isUndefined)(n)?"":n},s.prototype.setTargetValue=function(e,n){var a;n===void 0&&(n={});var u=this.target,m=this.attributes,O=this.getName();if(!(0,k.isUndefined)(e)){var P=e;if(e==="false"?P=!1:e==="true"&&(P=!0),this.getType()==="checkbox"){var j=m.valueTrue,A=m.valueFalse;P&&!(0,k.isUndefined)(j)&&(P=j),P||(0,k.isUndefined)(A)||(P=A)}this.get("changeProp")?u.set(O,P,n):u.addAttributes(((a={})[O]=P,a),n)}},s.prototype.setValueFromInput=function(e,n,a){n===void 0&&(n=!0),a===void 0&&(a={});var u={value:e};this.set(u,gs(gs({},a),{avoidStore:1})),n&&(this.set("value","",a),this.set(u,a))},s.prototype.getInitValue=function(){var e,n=this.target,a=this.getName();if(n){var u=n.get("attributes");e=this.get("changeProp")?n.get(a):u[a]}return e||this.get("value")||this.get("default")},s}(N.Hn);var sl=function(){function h(s){s===void 0&&(s={}),this.config=s}return h.prototype.build=function(s,e){return(0,k.isString)(s)?this.buildFromString(s,e):new Yi(s,e)},h.prototype.buildFromString=function(s,e){var n={name:s,type:"text"};return s==="target"&&(n.type="select",n.default=!1,n.options=this.config.optionsTarget),new Yi(n,e)},h}();const Ci=sl;var Zo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const An=function(h){function s(e,n){var a,u=this;(u=h.call(this,e)||this).em=n.em,u.listenTo(u,"add",u.handleAdd),u.listenTo(u,"reset",u.handleReset);var m=(a=u.em)===null||a===void 0?void 0:a.Traits,O=m==null?void 0:m.getConfig();return u.tf=new Ci(O),u}return Zo(s,h),s.prototype.handleReset=function(e,n){var a=(n===void 0?{}:n).previousModels;(a===void 0?[]:a).forEach(function(u){return u.trigger("remove")})},s.prototype.handleAdd=function(e){e.em=this.em;var n=this.target;n&&(e.target=n)},s.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(n){return n.setTarget(e)})},s.prototype.add=function(e,n){if(e!=null){var a=this.target,u=this.em;if((0,k.isArray)(e)){for(var m=[],O=0,P=e.length;O<P;O++){var j=e[O];m[O]=j instanceof Yi?j:this.tf.build(j,u),m[O].setTarget(a)}return h.prototype.add.call(this,m,n)}var A=e instanceof Yi?e:this.tf.build(e,u);return A.setTarget(a),h.prototype.add.call(this,A,n)}},s}(N.FE);var vs=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sn=function(){return sn=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},sn.apply(this,arguments)},Do=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},li=function(h){return h.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},ci=function(h){return!!(h!=null&&h.getConfig().avoidInlineStyle)},Gn="component:drag",pn="__symbols",ui="__symbol",Ii="__symbol_ovrd",Hi="component:update",ia="".concat(Hi,"-inside"),wi=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return vs(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){var e;return(e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null})[ui]=0,e[pn]=0,e[Ii]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),s.prototype.init=function(){},s.prototype.updated=function(e,n,a){},s.prototype.removed=function(){},s.prototype.initialize=function(e,n){var a=this;e===void 0&&(e={}),n===void 0&&(n={}),(0,k.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var u=n.em,m=this.parent(),O=m==null?void 0:m.attributes,P=this.get("propagate");if(P&&this.set("propagate",(0,k.isArray)(P)?P:[P]),O&&O.propagate&&!P){var j={},A=O.propagate;A.forEach(function(be){return j[be]=m.get(be)}),j.propagate=A,this.set(sn(sn({},j),e))}if(n&&n.config&&n.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),n.em=u,this.opt=n,this.em=u,this.frame=n.frame,this.config=n.config||{},this.set("attributes",sn(sn({},(0,k.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=s.createId(this,n),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(ia,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(be){var Ee="add remove ".concat(be!=="components"?"change":"");a.listenTo(a.get(be),Ee.trim(),function(){for(var Ce=[],rr=0;rr<arguments.length;rr++)Ce[rr]=arguments[rr];return a.emitUpdate.apply(a,Do([be],Ce,!1))})}),!n.temporary){var nt=u&&u.Css,At=this.attributes,Bt=At.styles,qt=At.type;Bt&&nt&&nt.addCollection(Bt,{avoidUpdateStyle:!0},{group:"cmp:".concat(qt)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),u&&u.trigger("component:create",this)}},s.prototype.__postAdd=function(e){e===void 0&&(e={});var n=this.em,a=n==null?void 0:n.UndoManager,u=this.components();a&&!this.__hasUm&&(a.add(u),a.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&u.map(function(m){return m.__postAdd(e)})},s.prototype.__postRemove=function(){var e=this.em,n=e==null?void 0:e.get("UndoManager");n&&(n.remove(this.components()),n.remove(this.getSelectors()),delete this.__hasUm)},s.prototype.__onChange=function(e,n){var a=this,u=this.changedAttributes()||{};(0,k.keys)(u).forEach(function(m){return a.emitUpdate(m)}),["status","open","toolbar","traits"].forEach(function(m){return delete u[m]}),(0,B.isEmptyObj)(u)||(this.__changesUp(n),this.__propSelfToParent({component:this,changed:u,options:n}))},s.prototype.__changesUp=function(e){var n=this.em;[this.frame,n].forEach(function(a){return a&&a.changesUp(e)})},s.prototype.__propSelfToParent=function(e){this.trigger(Hi,e),this.__propToParent(e)},s.prototype.__propToParent=function(e){var n=this.parent();n&&n.trigger(ia,e)},s.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},s.prototype.is=function(e){return this.get("type")==e},s.prototype.props=function(){return this.attributes},s.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},s.prototype.setDragMode=function(e){return this.set("dmode",e)},s.prototype.getDragMode=function(){return this.get("dmode")||""},s.prototype.find=function(e){var n,a=[],u=(n=this.view)===null||n===void 0?void 0:n.$el.find(e);return u==null||u.each(function(m){var O=u.eq(m).data("model");O&&a.push(O)}),a},s.prototype.findType=function(e){var n=[],a=function(u){return u.forEach(function(m){m.is(e)&&n.push(m),a(m.components())})};return a(this.components()),n},s.prototype.closest=function(e){var n,a=(n=this.view)===null||n===void 0?void 0:n.$el.closest(e);return a!=null&&a.length?a.data("model"):void 0},s.prototype.closestType=function(e){for(var n=this.parent();n&&!n.is(e);)n=n.parent();return n},s.prototype.contains=function(e){var n=!1;if(!e)return n;var a=function(u){!n&&u.forEach(function(m){m===e&&(n=!0),!n&&a(m.components())})};return a(this.components()),n},s.prototype.tagUpdated=function(){this.trigger("rerender")},s.prototype.replaceWith=function(e){var n=this.collection,a=n.indexOf(this);return n.remove(this),n.add(e,{at:a})},s.prototype.attrUpdated=function(e,n,a){var u=this;a===void 0&&(a={});var m=this.get("attributes"),O=m.class;O&&this.setClass(O),delete m.class;var P=m.style;P&&this.setStyle(P),delete m.style;var j=sn({},this.previous("attributes")),A=(0,B.shallowDiff)(j,this.get("attributes"));(0,k.keys)(A).forEach(function(nt){return u.trigger("change:attributes:".concat(nt),u,A[nt],a)})},s.prototype.setAttributes=function(e,n){return n===void 0&&(n={}),this.set("attributes",sn({},e),n),this},s.prototype.addAttributes=function(e,n){return n===void 0&&(n={}),this.setAttributes(sn(sn({},this.getAttributes({noClass:!0})),e),n)},s.prototype.removeAttributes=function(e,n){e===void 0&&(e=[]),n===void 0&&(n={});var a=Array.isArray(e)?e:[e],u=this.getAttributes();return a.map(function(m){return delete u[m]}),this.setAttributes(u,n)},s.prototype.getStyle=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var a=this.em,u=(0,k.isString)(e)?e:"",m=u?n:e;if(ci(a)&&!m.inline){var O=a.get("state"),P=a.Css.getIdRule(this.getId(),sn({state:O},m));if(this.rule=P,P)return P.getStyle(u)}return h.prototype.getStyle.call(this,u)},s.prototype.setStyle=function(e,n){var a=this;e===void 0&&(e={}),n===void 0&&(n={});var u=this.opt,m=this.em;if(!ci(m)||u.temporary||n.inline)e=h.prototype.setStyle.apply(this,arguments);else{var O=this.get("style")||{};e=(0,k.isString)(e)?this.parseStyle(e):e,e=sn(sn({},e),O);var P=m.get("state"),j=m.Css,A=this.getStyle(n);this.rule=j.setIdRule(this.getId(),e,sn(sn({},n),{state:P}));var nt=(0,B.shallowDiff)(A,e);this.set("style","",{silent:!0}),(0,k.keys)(nt).forEach(function(At){return a.trigger("change:style:".concat(At))})}return e},s.prototype.getAttributes=function(e){e===void 0&&(e={});var n=this.em,a=[],u=sn({},this.get("attributes")),m=n==null?void 0:n.Selectors,O=this.getId();if(e.noClass?delete u.class:(this.classes.forEach(function(A){return a.push((0,k.isString)(A)?A:A.get("name"))}),a.length&&(u.class=a.join(" "))),!e.noStyle){var P=this.get("style");(0,B.isObject)(P)&&!(0,B.isEmptyObj)(P)&&(u.style=this.styleToString({inline:1}))}if(!(0,k.has)(u,"id")){var j=!1;!ci(n)&&(0,k.isEmpty)(this.getStyle())||(j=!!(m!=null&&m.get(O,m.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols())&&(j=!0),j&&(u.id=O)}return u},s.prototype.addClass=function(e){var n=this.em.Selectors.addClass(e);return this.classes.add(n)},s.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},s.prototype.removeClass=function(e){var n=[];e=(0,k.isArray)(e)?e:[e];var a=this.classes,u=bi.TYPE_CLASS;return e.forEach(function(m){m.split(" ").forEach(function(O){var P=a.where({name:O,type:u})[0];P&&n.push(a.remove(P))})}),n},s.prototype.getClasses=function(){var e=this.getAttributes().class;return e?e.split(" "):[]},s.prototype.__logSymbol=function(e,n,a){a===void 0&&(a={});var u=this.__getSymbol(),m=this.__getSymbols();(u||m)&&this.em.log(e,{model:this,toUp:n,context:"symbols",opts:a})},s.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},s.prototype.__isSymbol=function(){return(0,k.isArray)(this.get(pn))},s.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(ui))},s.prototype.__isSymbolTop=function(){var e=this.parent();return this.__isSymbolOrInst()&&(!e||e&&!e.__isSymbol()&&!e.__getSymbol())},s.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var e=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),n=this.__getSymbTop();return(n.__isSymbol()?n:n.__getSymbol())!==e},s.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},s.prototype.__getSymbol=function(){var e=this.get(ui);if(e&&(0,k.isString)(e)){var n=this.__getAllById()[e];n?(e=n,this.set(ui,n)):e=0}return e},s.prototype.__getSymbols=function(){var e=this,n=this.get(pn);return n&&(0,k.isArray)(n)&&(n.forEach(function(a,u){a&&(0,k.isString)(a)&&(n[u]=e.__getAllById()[a])}),n=n.filter(function(a){return a&&!(0,k.isString)(a)})),n},s.prototype.__isSymbOvrd=function(e){e===void 0&&(e="");var n=this.get(Ii),a=e.split(":")[0],u=e!==a?[e,a]:[e];return n===!0||(0,k.isArray)(n)&&u.some(function(m){return n.indexOf(m)>=0})},s.prototype.__getSymbToUp=function(e){var n=this;e===void 0&&(e={});var a=[],u=e.changed;if(e.fromInstance||e.noPropagate||e.fromUndo||u&&this.__isSymbOvrd(u))return a;var m=this.__getSymbols()||[],O=this.__getSymbol();return(O?Do([O],O.__getSymbols()||[],!0):m).filter(function(P){return P!==n}).filter(function(P){return!(u&&P.__isSymbOvrd(u))})},s.prototype.__getSymbTop=function(e){for(var n=this,a=this.parent(e);a&&(a.__isSymbol()||a.__getSymbol());)n=a,a=a.parent(e);return n},s.prototype.__upSymbProps=function(e,n){var a=this;n===void 0&&(n={});var u=this.changedAttributes()||{},m=u.attributes||{};if(delete u.status,delete u.open,delete u[pn],delete u[ui],delete u[Ii],delete u.attributes,delete m.id,(0,B.isEmptyObj)(m)||(u.attributes=m),!(0,B.isEmptyObj)(u)){var O=this.__getSymbToUp(n);(0,k.keys)(u).map(function(P){a.__isSymbOvrd(P)&&delete u[P]}),this.__logSymbol("props",O,{opts:n,changed:u}),O.forEach(function(P){var j=sn({},u);(0,k.keys)(j).map(function(A){P.__isSymbOvrd(A)&&delete j[A]}),P.set(j,sn({fromInstance:a},n))})}},s.prototype.__upSymbCls=function(e,n,a){var u=this;a===void 0&&(a={});var m=this.__getSymbToUp(a);this.__logSymbol("classes",m,{opts:a}),m.forEach(function(O){O.set("classes",u.get("classes"),{fromInstance:u})}),this.__changesUp(a)},s.prototype.__upSymbComps=function(e,n,a){var u=this,m=a||n||{},O={fromInstance:m.fromInstance,fromUndo:m.fromUndo},P=e.opt.temporary;if(a)if(a.add){var j=[],A=!!this.__getSymbols();if((yr=this.__getSymbToUp(sn(sn({},O),{changed:"components:add"}))).length){var nt=e.__getSymbol();j=(nt?nt.__getSymbols():e.__getSymbols())||[],(j=Do([],j,!0)).push(nt||e)}!P&&this.__logSymbol("add",yr,{opts:a,addedInstances:j.map(function(Qr){return Qr.cid}),added:e.cid}),yr.forEach(function(Qr){var Sn=Qr.__getSymbTop(),Pn=j.filter(function(xo){var ii=xo.__getSymbTop({prev:1});return Sn&&ii&&ii===Sn})[0]||e.clone({symbol:!0,symbolInv:A});Qr.append(Pn,sn({fromInstance:u},a))})}else{var At=e.__getSymbol();if(At&&!a.temporary&&At.set(pn,At.__getSymbols().filter(function(Qr){return Qr!==e})),!e.__isSymbolTop()){var Bt="components:remove",qt=a.index,be=e.parent(),Ee=sn({fromInstance:e},a),Ce=e.__isSymbolNested(),rr=function(Qr){var Sn=Qr.parent();Sn&&!Sn.__isSymbOvrd(Bt)&&Qr.remove(Ee)};yr=be!=null&&be.__isSymbOvrd(Bt)?[]:e.__getSymbToUp(O),Ce&&(yr=be==null?void 0:be.__getSymbToUp(sn(sn({},O),{changed:Bt})),rr=function(Qr){var Sn=Qr.components().at(qt);Sn&&Sn.remove(sn({fromInstance:be},Ee))}),!P&&this.__logSymbol("remove",yr,{opts:a,removed:e.cid,isSymbNested:Ce}),yr.forEach(rr)}}else{var yr=this.__getSymbToUp(sn(sn({},O),{changed:"components:reset"})),Jr=e.models;this.__logSymbol("reset",yr,{components:Jr}),yr.forEach(function(Qr){var Sn=Jr.map(function(Pn){return Pn.clone({symbol:!0})});Qr.components().reset(Sn,sn({fromInstance:u},n))})}this.__changesUp(m)},s.prototype.initClasses=function(e,n,a){a===void 0&&(a={});var u=this.get("attributes").class||[],m=[this,"change:classes",this.initClasses],O=this.get("classes")||u,P=(0,k.isString)(O)?O.split(" "):O;this.stopListening.apply(this,m);var j=this.normalizeClasses(P),A=new xi([]);return this.set("classes",A,a),A.add(j),A.on("add remove reset",this.__upSymbCls),this.listenTo.apply(this,m),this},s.prototype.initComponents=function(){var e=[this,"change:components",this.initComponents];this.stopListening.apply(this,e);var n=new Ha([],this.opt);n.parent=this;var a=this.get("components"),u=!this.opt.avoidChildren;return this.set("components",n),u&&a&&n.add((0,k.isFunction)(a)?a(this):a,this.opt),n.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},s.prototype.initTraits=function(e){var n=this.em,a="change:traits";this.off(a,this.initTraits),this.__loadTraits();var u=sn({},this.get("attributes")),m=this.traits;return m.each(function(O){if(!O.get("changeProp")){var P=O.get("name"),j=O.getInitValue();P&&j&&(u[P]=j)}}),m.length&&this.set("attributes",u),this.on(a,this.initTraits),e&&n&&n.trigger("component:toggled"),this},s.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",n=["change:".concat(e),this.initScriptProps];this.off.apply(this,n);var a=this.previous(e)||[],u=this.get(e)||[],m=a.map(function(P){return"change:".concat(P)}).join(" "),O=u.map(function(P){return"change:".concat(P)}).join(" ");m&&this.off(m,this.__scriptPropsChange),O&&this.on(O,this.__scriptPropsChange),this.on.apply(this,n)}},s.prototype.__scriptPropsChange=function(e,n,a){a===void 0&&(a={}),a.avoidStore||this.trigger("rerender")},s.prototype.append=function(e,n){n===void 0&&(n={});var a=((0,k.isArray)(e)?Do([],e,!0):[e]).map(function(m){return(0,k.isString)(m)||m.collection&&m.collection.remove(m,{temporary:!0}),m}),u=this.components().add(a,n);return(0,k.isArray)(u)?u:[u]},s.prototype.components=function(e,n){n===void 0&&(n={});var a=this.get("components");return(0,k.isUndefined)(e)?a:(a.reset(void 0,n),e?this.append(e,n):[])},s.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},s.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},s.prototype.empty=function(e){return e===void 0&&(e={}),this.components().reset(void 0,e),this},s.prototype.parent=function(e){e===void 0&&(e={});var n=this.collection||e.prev&&this.prevColl;return n?n.parent:void 0},s.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},s.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},s.prototype.initToolbar=function(){var e=this.em,n=this,a=e&&e.getConfig().stylePrefix||"";if(!n.get("toolbar")&&e){var u=[];n.collection&&u.push({label:e.getIcon("arrowUp"),command:function(m){return m.runCommand("core:component-exit",{force:1})}}),n.get("draggable")&&u.push({attributes:{class:"".concat(a,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),n.get("copyable")&&u.push({label:e.getIcon("copy"),command:"tlb-clone"}),n.get("removable")&&u.push({label:e.getIcon("delete"),command:"tlb-delete"}),n.set("toolbar",u)}},s.prototype.__loadTraits=function(e,n){n===void 0&&(n={});var a=e||this.traits;if(!(a instanceof An)){a=(0,k.isFunction)(a)?a(this):a;var u=new An([],this.opt);u.setTarget(this),a.length&&(a.forEach(function(m){return m.attributes&&delete m.attributes.value}),u.add(a)),this.set({traits:u},n)}return this},s.prototype.getTraits=function(){return this.__loadTraits(),Do([],this.traits.models,!0)},s.prototype.setTraits=function(e){var n=(0,k.isArray)(e)?e:[e];return this.set({traits:n}),this.getTraits()},s.prototype.getTrait=function(e){return this.getTraits().filter(function(n){return n.get("id")===e||n.get("name")===e})[0]||null},s.prototype.updateTrait=function(e,n){var a,u=this.getTrait(e);return u&&u.set(n),(a=this.em)===null||a===void 0||a.trigger("component:toggled"),this},s.prototype.getTraitIndex=function(e){var n=this.getTrait(e);return n?this.traits.indexOf(n):-1},s.prototype.removeTrait=function(e){var n,a=this,u=((0,k.isArray)(e)?e:[e]).map(function(P){return a.getTrait(P)}),m=this.traits,O=u.length?m.remove(u):[];return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,k.isArray)(O)?O:[O]},s.prototype.addTrait=function(e,n){var a;n===void 0&&(n={}),this.__loadTraits();var u=this.traits.add(e,n);return(a=this.em)===null||a===void 0||a.trigger("component:toggled"),(0,k.isArray)(u)?u:[u]},s.prototype.normalizeClasses=function(e){var n=[],a=this.em,u=a==null?void 0:a.Selectors;return u?e.models?Do([],e.models,!0):(e.forEach(function(m){return n.push(u.add(m))}),n):[]},s.prototype.clone=function(e){e===void 0&&(e={});var n=this.em,a=sn({},this.attributes),u=sn({},this.opt),m=this.getId(),O=n==null?void 0:n.Css;a.attributes=sn({},a.attributes),delete a.attributes.id,a.components=[],a.classes=[],a.traits=[],this.__isSymbolTop()&&(e.symbol=!0),this.get("components").each(function(Bt,qt){a.components[qt]=Bt.clone(sn(sn({},e),{_inner:1}))}),this.get("traits").each(function(Bt,qt){a.traits[qt]=Bt.clone()}),this.get("classes").each(function(Bt,qt){a.classes[qt]=Bt.get("name")}),a.status="",u.collection=null;var P=new this.constructor(a,u),j="#".concat(P.getId());(O?O.getRules("#".concat(m)):[]).forEach(function(Bt){var qt=Bt.clone();qt.set("selectors",[j]),O.getAll().add(qt)}),P.set(pn,0);var A=this.__getSymbol(),nt=this.__getSymbols();e.symbol||!A&&!nt?A?(A.set(pn,Do(Do([],A.__getSymbols(),!0),[P],!1)),P.__initSymb()):e.symbol&&(this.__isSymbol()?(this.set(pn,Do(Do([],nt,!0),[P],!1)),P.set(ui,this),P.__initSymb()):e.symbolInv?(this.set(pn,[P]),P.set(ui,this),[this,P].map(function(Bt){return Bt.__initSymb()})):(P.set(pn,[this]),[this,P].map(function(Bt){return Bt.__initSymb()}),this.set(ui,P))):(P.set(ui,0),P.set(pn,0));var At="component:clone";return n&&n.trigger(At,P),this.trigger(At,P),P},s.prototype.getName=function(e){e===void 0&&(e={});var n=this.em,a=this.attributes,u=a.type,m=a.tagName,O=a.name,P=u||m,j=u?"":m,A="domComponents.names.",nt=O&&(n==null?void 0:n.t("".concat(A).concat(O))),At=j&&(n==null?void 0:n.t("".concat(A).concat(j))),Bt=n&&(n.t("".concat(A).concat(u))||n.t("".concat(A).concat(m))),qt=this.get("custom-name");return(e.noCustom?"":qt)||nt||O||At||(0,B.capitalize)(j)||Bt||(0,B.capitalize)(P)},s.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},s.prototype.toHTML=function(e){e===void 0&&(e={});var n=this,a=[],u=e.tag||n.get("tagName"),m=n.get("void"),O=e.attributes,P=this.getAttrToHTML();if(delete e.tag,O&&((0,k.isFunction)(O)?P=O(n,P)||{}:(0,B.isObject)(O)&&(P=O)),e.withProps){var j=this.toJSON();(0,k.forEach)(j,function(Ce,rr){rr[0]!=="_"&&["classes","attributes","components"].indexOf(rr)<0&&(P["data-gjs-".concat(rr)]=(0,k.isArray)(Ce)||(0,B.isObject)(Ce)?JSON.stringify(Ce):Ce)})}for(var A in P){var nt=P[A];if(!(0,k.isUndefined)(nt)&&nt!==null)if((0,k.isBoolean)(nt))nt&&a.push(A);else{var At="";if(e.altQuoteAttr&&(0,k.isString)(nt)&&nt.indexOf('"')>=0)At="'".concat(nt.replace(/'/g,"&apos;"),"'");else{var Bt=(0,k.isString)(nt)?nt.replace(/"/g,"&quot;"):nt;At='"'.concat(Bt,'"')}a.push("".concat(A,"=").concat(At))}}var qt=a.length?" ".concat(a.join(" ")):"",be=n.getInnerHTML(e),Ee="<".concat(u).concat(qt).concat(m?"/":"",">").concat(be);return!m&&(Ee+="</".concat(u,">")),Ee},s.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},s.prototype.__innerHTML=function(e){e===void 0&&(e={});var n=this.components();return n.length?n.map(function(a){return a.toHTML(e)}).join(""):this.get("content")},s.prototype.getAttrToHTML=function(){var e=this.getAttributes();return ci(this.em)&&delete e.style,e},s.prototype.toJSON=function(e){e===void 0&&(e={});var n=H.Model.prototype.toJSON.call(this,e);if(n.attributes=this.getAttributes(),delete n.attributes.class,delete n.toolbar,delete n.traits,delete n.status,delete n.open,delete n._undoexc,!e.fromUndo){var a=n[ui],u=n[pn];u&&(0,k.isArray)(u)&&(n[pn]=u.filter(function(m){return m}).map(function(m){return m.getId?m.getId():m})),a&&!(0,k.isString)(a)&&(n[ui]=a.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(n),n},s.prototype.getChangedProps=function(e){var n=e||H.Model.prototype.toJSON.apply(this),a=(0,k.result)(this,"defaults");return(0,k.forEach)(a,function(u,m){["type"].indexOf(m)===-1&&n[m]===u&&delete n[m]}),(0,k.isEmpty)(n.type)&&delete n.type,(0,k.forEach)(["attributes","style"],function(u){(0,k.isEmpty)(a[u])&&(0,k.isEmpty)(n[u])&&delete n[u]}),(0,k.forEach)(["classes","components"],function(u){(!n[u]||(0,k.isEmpty)(a[u])&&!n[u].length)&&delete n[u]}),n},s.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},s.prototype.setId=function(e,n){var a=sn({},this.get("attributes"));return a.id=e,this.set("attributes",a,n),this},s.prototype.getEl=function(e){e===void 0&&(e=void 0);var n=this.getView(e);return n&&n.el},s.prototype.getView=function(e){var n=this.view,a=this.views;return e&&(n=a.filter(function(u){return u._getFrame()===e.view})[0]),n},s.prototype.getCurrentView=function(){var e=(this.em.get("currentFrame")||{}).model;return this.getView(e)},s.prototype.__getScriptProps=function(){var e=this.props();return(this.get("script-props")||[]).reduce(function(n,a){return n[a]=e[a],n},{})},s.prototype.getScriptString=function(e){var n=this,a=e||this.get("script")||"";if(!a)return a;if(this.get("script-props"))a=a.toString().trim();else{if(typeof a=="function"){var u=a.toString().trim();a=(u=u.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var m=this.em.getConfig(),O=li(m.tagVarStart||"{[ "),P=li(m.tagVarEnd||" ]}"),j=new RegExp("".concat(O,"([\\w\\d-]*)").concat(P),"g");a=a.replace(j,function(A,nt){n.scriptUpdated();var At=n.attributes[nt]||"";return(0,k.isArray)(At)||typeof At=="object"?JSON.stringify(At):At})}return a},s.prototype.emitUpdate=function(e){for(var n,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var m=this.em,O=Hi+(e?":".concat(e):""),P=e&&this.get(e);e&&this.updated.apply(this,Do([e,P,e&&this.previous(e)],a,!1)),this.trigger.apply(this,Do([O],a,!1)),m&&m.trigger.apply(m,Do([O,this],a,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(n={},n[e]=P,n),options:a[2]||a[1]||{}})},s.prototype.onAll=function(e){return(0,k.isFunction)(e)&&(e(this),this.components().forEach(function(n){return n.onAll(e)})),this},s.prototype.forEachChild=function(e){(0,k.isFunction)(e)&&this.components().forEach(function(n){e(n),n.forEachChild(e)})},s.prototype.remove=function(e){var n=this;e===void 0&&(e={});var a=this.em,u=this.collection,m=function(){u&&u.remove(n,sn(sn({},e),{action:"remove-component"})),u||(n.components("",e),n.components().removeChildren(n,void 0,e))},O=sn({},e);return[this,a].map(function(P){return P.trigger("component:remove:before",n,m,O)}),!O.abort&&m(),this},s.prototype.move=function(e,n){if(n===void 0&&(n={}),e){var a=n.at,u=this.index(),m=e===this.parent();m&&(u===a||u===a-1)||(m&&a&&a>u&&(n.at=a-1),this.remove({temporary:1}),e.append(this,n),this.emitUpdate())}return this},s.prototype.isInstanceOf=function(e){var n,a,u=(a=(n=this.em)===null||n===void 0?void 0:n.Components.getType(e))===null||a===void 0?void 0:a.model;return!!u&&this instanceof u},s.prototype.isChildOf=function(e){for(var n=(0,k.isString)(e),a=this.parent();a;){if(n){if(a.isInstanceOf(e))return!0}else if(a===e)return!0;a=a.parent()}return!1},s.prototype.resetId=function(e){var n=this.em,a=this.getId();if(!a)return this;var u=s.createId(this);this.setId(u);var m=n==null?void 0:n.Css.getIdRule(a),O=m==null?void 0:m.get("selectors").at(0);return O==null||O.set("name",u),this},s.prototype._getStyleRule=function(e){var n=(e===void 0?{}:e).id,a=this.em,u=n||this.getId();return a==null?void 0:a.Css.getIdRule(u)},s.prototype._getStyleSelector=function(e){var n=this._getStyleRule(e);return n==null?void 0:n.get("selectors").at(0)},s.prototype._idUpdated=function(e,n,a){if(a===void 0&&(a={}),!a.idUpdate){var u=this.ccid,m=(this.get("attributes")||{}).id,O=(this.previous("attributes")||{}).id||u,P=s.getList(this);if(P[m]||!m&&O)return this.setId(O,{idUpdate:!0});delete P[O],P[m]=this,this.ccid=m;var j=this._getStyleSelector({id:O});j&&j.set({name:m,label:m})}},s.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},s.isComponent=function(e){return{tagName:(0,B.toLowerCase)(e.tagName)}},s.ensureInList=function(e){var n=s.getList(e),a=e.getId(),u=n[a];if(u){if(u!==e){var m=s.getIncrementId(a,n);e.setId(m),n[m]=e}}else n[a]=e;e.components().forEach(function(O){return s.ensureInList(O)})},s.createId=function(e,n){n===void 0&&(n={});var a,u=s.getList(e),m=n.idMap,O=m===void 0?{}:m,P=e.get("attributes").id;return P?(a=s.getIncrementId(P,u,n),e.setId(a),P!==a&&(O[P]=a)):a=s.getNewId(u),u[a]=e,a},s.getNewId=function(e){for(var n=Object.keys(e).length.toString().length+2,a=(Math.random()+1.1).toString(36).slice(-n),u="i".concat(a);e[u];)u=s.getNewId(e);return u},s.getIncrementId=function(e,n,a){a===void 0&&(a={});var u=a.keepIds,m=1,O=e;if((u===void 0?[]:u).indexOf(e)<0)for(;n[O];)m++,O="".concat(e,"-").concat(m);return O},s.getList=function(e){var n=e.opt,a=n===void 0?{}:n,u=a.domc,m=a.em,O=u||(m==null?void 0:m.Components);return O?O.componentsById:{}},s.checkId=function(e,n,a,u){n===void 0&&(n=[]),a===void 0&&(a={}),u===void 0&&(u={});var m=(0,k.isArray)(e)?e:[e],O=u.keepIds,P=O===void 0?[]:O;m.forEach(function(j){j.attributes;var A=j.attributes,nt=A===void 0?{}:A,At=j.components,Bt=nt.id;if(Bt&&a[Bt]&&P.indexOf(Bt)<0){var qt=s.getIncrementId(Bt,a);nt.id=qt,(0,k.isArray)(n)&&n.forEach(function(be){var Ee=be.selectors;Ee.forEach(function(Ce,rr){Ce==="#".concat(Bt)&&(Ee[rr]="#".concat(qt))})})}At&&s.checkId(At,n,a,u)})},s}(xa);const Si=wi;var es=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fi=function(h){function s(){var e=h!==null&&h.apply(this,arguments)||this;return e.compView=Ro,e}return es(s,h),s.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.resetChildren),this.listenTo(n,"remove",this.removeChildren)},s.prototype.removeChildren=function(e,n,a){var u=this;a===void 0&&(a={}),e.views.forEach(function(m){if(m){var O=m.childrenView,P=m.scriptContainer;O&&O.stopListening(),(0,vn.L_)(P),m.remove.apply(m)}}),e.components().forEach(function(m){return u.removeChildren(m,n,a)})},s.prototype.addTo=function(e,n,a){a===void 0&&(a={});var u=this.em,m=this.collection.indexOf(e);if(this.addToCollection(e,null,m),u&&!a.temporary){var O=function(P){u.trigger("component:add",P),P.components().forEach(function(j){return O(j)})};O(e)}},s.prototype.addToCollection=function(e,n,a){for(var u=this,m=u.config,O=u.opts,P=u.em,j=n||null,A=m.frameView,nt=(A==null?void 0:A.model)&&e.getView(A.model),At=O.componentTypes||(P==null?void 0:P.Components.getTypes()),Bt=e.get("type")||"default",qt=this.compView,be=0;be<At.length;be++)if(At[be].id==Bt){qt=At[be].view;break}var Ee,Ce=nt||new qt({model:e,config:m,componentTypes:At});try{Ee=Ce.render().el}catch(Qr){Ee=document.createTextNode(""),P.logError(Qr)}if(j)j.appendChild(Ee);else{var rr=this.parentEl,yr=rr.childNodes;if((0,k.isUndefined)(a))rr.appendChild(Ee);else{var Jr=yr.length==a;Jr&&a--,Jr||!yr.length?rr.appendChild(Ee):rr.insertBefore(Ee,yr[a])}}return e.opt.temporary||P==null||P.trigger("component:mount",e),Ee},s.prototype.resetChildren=function(e,n){var a=this,u=(n===void 0?{}:n).previousModels,m=u===void 0?[]:u;this.parentEl.innerHTML="",m.forEach(function(O){return a.removeChildren(O,a.collection)}),e.each(function(O){return a.addToCollection(O)})},s.prototype.render=function(e){var n=this,a=this.el,u=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(m){return n.addToCollection(m,u)}),a.innerHTML="",a.appendChild(u),this},s}(N.G7);const ll=fi;var Dl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zi=function(){return Zi=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Zi.apply(this,arguments)},rs=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Dl(s,h),s.prototype.className=function(){return this.getClasses()},s.prototype.tagName=function(){return this.model.get("tagName")},s.prototype.initialize=function(e){e===void 0&&(e={});var n=this.model,a=e.config||{},u=a.em,m=n.opt||{},O=this.$el,P=this.el;this.opts=e,this.modelOpt=m,this.config=a,this.em=u,this.pfx=a.stylePrefix||"",this.ppfx=a.pStylePrefix||"",this.attr=n.get("attributes"),this.classe=this.attr.class||[],this.listenTo(n,"change:style",this.updateStyle),this.listenTo(n,"change:attributes",this.renderAttributes),this.listenTo(n,"change:highlightable",this.updateHighlight),this.listenTo(n,"change:status change:locked",this.updateStatus),this.listenTo(n,"change:script rerender",this.reset),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change",this.handleChange),this.listenTo(n,"active",this.onActive),this.listenTo(n,"disable",this.onDisable),O.data("model",n),(0,B.setViewEl)(P,this),n.view=this,this._getFrame()&&n.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Zi(Zi({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!m.temporary&&this.init(this._clbObj())},s.prototype.__isDraggable=function(){var e=this.model,n=this.config,a=e.attributes.draggable;return n.draggableComponents&&a},s.prototype._clbObj=function(){var e=this,n=e.em,a=e.model,u=e.el;return{editor:n==null?void 0:n.getEditor(),model:a,el:u}},s.prototype.init=function(e){},s.prototype.removed=function(e){},s.prototype.onRender=function(e){},s.prototype.onActive=function(e){},s.prototype.onDisable=function(){},s.prototype.remove=function(){var e;h.prototype.remove.call(this);var n=this.model,a=this.$el,u=n.views,m=this._getFrame()||{};return n.components().forEach(function(O){var P=O.getView(m.model);P==null||P.remove()}),(e=this.childrenView)===null||e===void 0||e.remove(),u.splice(u.indexOf(this),1),this.removed(this._clbObj()),a.data({model:"",collection:"",view:""}),this},s.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:e})},s.prototype.initClasses=function(){var e=this.model,n="change:classes",a=e.get("classes");a instanceof xi&&(this.stopListening(e,n,this.initClasses),this.listenTo(e,n,this.initClasses),this.listenTo(a,"add remove change",this.updateClasses),a.length&&this.importClasses())},s.prototype.initComponents=function(e){e===void 0&&(e={});var n=this,a=n.model,u=n.$el,m=n.childrenView,O=a.get("components"),P=[a,"change:components",this.initComponents];O instanceof Ha&&(u.data("collection",O),m&&m.remove(),this.stopListening.apply(this,P),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,P))},s.prototype.handleChange=function(){var e=this.model,n=(0,k.keys)(e.changed);if(n.length!==1||n[0]!=="status")for(var a in e.emitUpdate(),e.changed)e.emitUpdate(a)},s.prototype.importClasses=function(){var e=this.em.Selectors;e&&this.model.classes.each(function(n){e.add(n.get("name"))})},s.prototype.updateStatus=function(e){e===void 0&&(e={});var n=this,a=n.em,u=n.el,m=n.ppfx,O=n.model,P=a==null?void 0:a.Canvas.getConfig().extHl,j=O.get("status"),A="".concat(m,"selected"),nt="".concat(A,"-parent"),At="".concat(m,"freezed"),Bt="".concat(m,"hovered"),qt="".concat(m,"no-pointer"),be=[A,nt,At,Bt,qt],Ee=P&&!e.noExtHl?"":A;this.$el.removeClass(be.join(" "));var Ce=[u.getAttribute("class")||""];switch(j){case"selected":Ce.push(Ee);break;case"selected-parent":Ce.push(nt);break;case"freezed":Ce.push(At);break;case"freezed-selected":Ce.push(At,Ee);break;case"hovered":!e.avoidHover&&Ce.push(Bt)}O.get("locked")&&Ce.push(qt);var rr=Ce.filter(Boolean).join(" ");rr&&u.setAttribute("class",rr)},s.prototype.updateHighlight=function(){var e=this.model,n=e.get("textable"),a=e.get("highlightable")&&(n||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!a||"")},s.prototype.updateStyle=function(e,n,a){a===void 0&&(a={});var u=this.model,m=this.em;if(m&&m.getConfig().avoidInlineStyle&&!a.inline){var O=u.getStyle();!(0,k.isEmpty)(O)&&u.setStyle(O)}else this.setAttribute("style",u.styleToString(a))},s.prototype.updateClasses=function(){var e=this.model.classes.pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus(),this.onAttrUpdate()},s.prototype.setAttribute=function(e,n){var a=this.$el;n?a.attr(e,n):a.removeAttr(e)},s.prototype.getClasses=function(){return this.model.getClasses().join(" ")},s.prototype.updateAttributes=function(){var e=[],n=this,a=n.model,u=n.$el,m=n.el,O=a.attributes,P=O.textable,j=O.type,A=Zi(Zi({id:a.getId(),"data-gjs-type":j||"default"},this.__isDraggable()&&{draggable:!0}),P&&{contenteditable:"false"});(0,k.each)(m.attributes,function(At){return e.push(At.nodeName)}),e.forEach(function(At){return u.removeAttr(At)}),this.updateStyle(),this.updateHighlight();var nt=Zi(Zi({},A),a.getAttributes());(0,k.keys)(nt).forEach(function(At){return nt[At]===!1&&delete nt[At]}),u.attr(nt)},s.prototype.updateContent=function(){var e=this.model.get("content"),n=this.model.components().length;this.getChildrenContainer().innerHTML=n?"":e},s.prototype.prevDef=function(e){e.preventDefault()},s.prototype.updateScript=function(){var e=this.model,n=this.em;e.get("script")&&(n==null||n.Canvas.getCanvasView().updateScript(this))},s.prototype.getChildrenContainer=function(){var e=this.el;return typeof this.getChildrenSelector=="function"?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},s.prototype.getOffsetRect=function(){var e={},n=this.el,a=0,u=0,m=function(O){var P=O.offsetParent;P?(a+=P.offsetTop,u+=P.offsetLeft,m(P)):(e.top=n.offsetTop+a,e.left=n.offsetLeft+u,e.bottom=e.top+n.offsetHeight,e.right=e.left+n.offsetWidth)};return m(n),e},s.prototype.isInViewport=function(e){var n,a=(e===void 0?{}:e).rect,u=this.el.ownerDocument,m=u.body,O=(n=u.defaultView)===null||n===void 0?void 0:n.frameElement,P=a||this.getOffsetRect(),j=P.top,A=P.left,nt=this._getFrame().getOffsetRect();return j>=nt.scrollTop&&A>=nt.scrollLeft&&j<=nt.scrollBottom&&A<=(O==null?void 0:O.offsetWidth)+m.scrollLeft},s.prototype.scrollIntoView=function(e){var n;e===void 0&&(e={});var a=this.getOffsetRect();if(!this.isInViewport({rect:a})||e.force){var u=this.el;e.behavior!=="smooth"?(n=u.ownerDocument.defaultView)===null||n===void 0||n.scrollTo(0,a.top):u.scrollIntoView(Zi({behavior:"smooth",block:"nearest"},e))}},s.prototype.reset=function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),(0,vn.dL)(e,this.el),this.render()},s.prototype._setData=function(){var e=this.model,n=e.components();this.$el.data({model:e,collection:n,view:this})},s.prototype._getFrame=function(){var e;return(e=this.em)===null||e===void 0?void 0:e.get("Canvas").config.frameView},s.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),n=this.childrenView||new ll({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});n.render(e),this.childrenView=n;for(var a=Array.prototype.slice.call(n.el.childNodes),u=0,m=a.length;u<m;u++)e.appendChild(a.shift())},s.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},s.prototype.onAttrUpdate=function(){},s.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,B.setViewEl)(this.el,this),this.postRender()),this},s.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},s.getEvents=function(){return(0,k.result)(this.prototype,"events")},s}(N.G7);const Ro=rs;var Fs=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Xo=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Fs(s,h),s.prototype.tagName=function(){return"div"},s}(Ro);var Ni=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ns=function(){return ns=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ns.apply(this,arguments)};const aa=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ni(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ns(ns({},h.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return["td","th"].indexOf((0,B.toLowerCase)(e.tagName))>=0},s}(Si);var cl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Il=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return cl(s,h),s}(Ro);var os=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ri=function(){return ri=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ri.apply(this,arguments)},Jo="tr";const wc=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return os(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ri(ri({},h.prototype.defaults),{tagName:Jo,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===Jo},s}(Si);var rc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Ua=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return rc(s,h),s}(Ro);var _c=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bi=function(){return Bi=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Bi.apply(this,arguments)},pi="table";const sa=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return _c(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Bi(Bi({},h.prototype.defaults),{type:pi,tagName:pi,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){h.prototype.initialize.call(this,e,n);var a=this.get("components");!a.length&&a.add({type:"tbody"})},s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===pi},s}(Si),is=Ro.extend({events:{}});var nc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ni=function(){return ni=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ni.apply(this,arguments)},la="tbody";const ms=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return nc(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ni(ni({},h.prototype.defaults),{type:la,tagName:la,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){h.prototype.initialize.call(this,e,n);var a=this.get("components"),u=this.get("columns"),m=this.get("rows");if(!a.length){for(var O=[];m--;){for(var P=[],j=u;j--;)P.push({type:"cell",classes:["cell"]});O.push({type:"row",classes:["row"],components:P})}a.add(O)}},s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===la},s}(Si);var ys=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ca=function(){return ca=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ca.apply(this,arguments)},Xi="thead";const Oi=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ys(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ca(ca({},h.prototype.defaults),{type:Xi,tagName:Xi})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===Xi},s}(ms);var ua=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const gt=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ua(s,h),s}(Ro);var Nt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const he=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Nt(s,h),s}(Ro);var Oe=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Be=function(){return Be=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Be.apply(this,arguments)},Re="tfoot";const hr=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Oe(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Be(Be({},h.prototype.defaults),{type:Re,tagName:Re})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===Re},s}(ms);var Ir=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const lt=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ir(s,h),s}(Ro);var Lt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ce=function(){return ce=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ce.apply(this,arguments)},me='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',We=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Lt(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ce(ce({},h.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(me,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(me,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){h.prototype.initialize.call(this,e,n);var a=this.get("attributes").src;a&&(0,B.buildBase64UrlFromSvg)((0,k.result)(this,"defaults").src)!==a&&this.set("src",a,{silent:!0})},s.prototype.initToolbar=function(){h.prototype.initToolbar.call(this);var e=this.em;if(e){var n="image-editor";if(e.Commands.has(n)){for(var a=!1,u=this.get("toolbar"),m=0;m<u.length;m++)if(u[m].command==="image-editor"){a=!0;break}a||(u.push({attributes:{class:"fa fa-pencil"},command:n}),this.set("toolbar",u))}}},s.prototype.getAttrToHTML=function(){var e=h.prototype.getAttrToHTML.call(this),n=this.getSrcResult();return n&&(e.src=n),e},s.prototype.getSrcResult=function(e){e===void 0&&(e={});var n=this.get(e.fallback?"fallback":"src")||"",a=n;return n&&n.substr(0,4)==="<svg"&&(a=(0,B.buildBase64UrlFromSvg)(n)),a},s.prototype.isDefaultSrc=function(){var e=this.get("src"),n=(0,k.result)(this,"defaults").src;return e===n||e===(0,B.buildBase64UrlFromSvg)(n)},s.prototype.toJSON=function(e){var n=h.prototype.toJSON.call(this,e),a=n.attributes;return a&&n.src===a.src&&delete n.src,n},s.prototype.parseUri=function(e){var n={};if((0,B.hasWin)())(n=document.createElement("a")).href=e;else if(typeof URL<"u")try{n=new URL(e)}catch{}return{hostname:n.hostname||"",pathname:n.pathname||"",protocol:n.protocol||"",search:n.search||"",hash:n.hash||"",port:n.port||"",query:function(a){a===void 0&&(a="");for(var u={},m=a.substring(1).split("&"),O=0;O<m.length;O++){var P=m[O].split("="),j=decodeURIComponent(P[0]);j&&(u[j]=decodeURIComponent(P[1]||""))}return u}(n.search)}},s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)==="img"},s}(Si);const Ve=We;var ur=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lr=function(){return Lr=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Lr.apply(this,arguments)},dn=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ur(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){var e=h.prototype.defaults;return Lr(Lr({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){this.get("src")?this.parseFromSrc():this.updateSrc(),h.prototype.initialize.call(this,e,n),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},s.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},s.prototype.getMapUrl=function(){var e=this.get("address"),n=this.get("zoom"),a=this.get("mapType");return e=e?"&q="+e:"",n=n?"&z="+n:"",a=a?"&t="+a:"",this.get("mapUrl")+"?"+e+n+a+"&output=embed"},s.prototype.parseFromSrc=function(){var e=this.parseUri(this.get("src")).query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},s.isComponent=function(e){if((0,B.toLowerCase)(e.tagName)=="iframe"&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},s}(Ve);const jn=dn;var To=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),za=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return To(s,h),s.prototype.tagName=function(){return"img"},s.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},s.prototype.initialize=function(e){h.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},s.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this.model,n=this.em,a=e.get("file");if(a&&n){var u=n.Assets.FileUploader();u==null||u.uploadFile({dataTransfer:{files:[a]}},function(m){var O=m&&m.data&&m.data[0],P=O&&((0,k.isString)(O)?O:O.src);P&&e.set({src:P})}),e.set("file","")}}},s.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},s.prototype.updateClasses=function(){h.prototype.updateClasses.call(this);var e=this,n=e.el,a=e.classEmpty,u=e.model,m=u.getSrcResult()&&!u.isDefaultSrc()?"remove":"add";n.classList[m](a)},s.prototype.onActive=function(e){e==null||e.stopPropagation();var n=this.em,a=this.model,u=n==null?void 0:n.Assets;u&&a.get("editable")&&u.open({select:function(m,O){a.set({src:m.getSrc()}),O&&u.close()},target:a,types:["image"],accept:"image/*"})},s.prototype.onError=function(){var e=this.model.getSrcResult({fallback:!0});e&&(this.el.src=e)},s.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},s.prototype.noDrag=function(e){return e.preventDefault(),!1},s.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var e=this.$el,n=this.model,a=e.attr("class")||"";return!n.get("src")&&e.attr("class","".concat(a," ").concat(this.classEmpty).trim()),this.postRender(),this},s}(Ro);const as=za;var oc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Zu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return oc(s,h),s.prototype.tagName=function(){return"div"},s.prototype.events=function(){return{}},s.prototype.initialize=function(e){h.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},s.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},s.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},s.prototype.render=function(){return h.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},s}(as);var yp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bs=function(){return bs=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},bs.apply(this,arguments)};const ki=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return yp(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return bs(bs({},h.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){h.prototype.initialize.call(this,e,n),this.__checkInnerChilds()},s.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var n=function(a){a.isInstanceOf("textnode")||a.set({locked:!0,layerable:!1})};(0,k.isFunction)(e)?this.forEachChild(function(a){e(a)&&n(a)}):this.forEachChild(n)}},s}(Si);var gu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ic=function(){return ic=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ic.apply(this,arguments)},vu="link",Xu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return gu(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return ic(ic({},h.prototype.defaults),{type:vu,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),s.isComponent=function(e,n){var a;if(n===void 0&&(n={}),(0,B.toLowerCase)(e.tagName)==="a"){var u=n.textTags||[];a={type:vu,editable:!1};var m=e.childNodes;m.length||delete a.editable,(0,k.forEach)(m,function(O){var P=O.tagName;(O.nodeType==3&&O.textContent.trim()!==""||P&&u.indexOf((0,B.toLowerCase)(P))>=0)&&delete a.editable})}return a},s}(ki);const Rs=Xu;var Nl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ui=function(){return Ui=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ui.apply(this,arguments)},Hs=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},Wa=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}},ws=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Nl(s,h),s.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},s.prototype.initialize=function(e){h.prototype.initialize.call(this,e),(0,k.bindAll)(this,"disableEditing","onDisable");var n=this.model,a=this.em;this.listenTo(n,"focus",this.onActive),this.listenTo(n,"change:content",this.updateContentText),this.listenTo(n,"sync:content",this.syncContent),this.rte=a==null?void 0:a.RichTextEditor},s.prototype.updateContentText=function(e,n,a){a===void 0&&(a={}),!a.fromDisable&&this.disableEditing()},s.prototype.canActivate=function(){var e,n=this,a=n.model,u=n.rteEnabled,m=n.em,O=(m==null?void 0:m.getEditing())===a,P=!0,j=!1;if((u||!a.get("editable")||O||(j=a.isChildOf("text")))&&(P=!1,j&&!a.get("textable"))){for(var A=a.parent();A&&!A.isInstanceOf("text");)A=A.parent();A&&A.get("editable")?e=A:P=!0}return{result:P,delegate:e}},s.prototype.onActive=function(e){var n,a;return Hs(this,void 0,void 0,function(){var u,m,O,P,j,A,nt,At,Bt;return Wa(this,function(qt){switch(qt.label){case 0:return m=(u=this).rte,O=u.em,P=this.canActivate(),j=P.result,A=P.delegate,j?((a=e==null?void 0:e.stopPropagation)===null||a===void 0||a.call(e),nt=this,[4,this.getContent()]):(A&&((n=e==null?void 0:e.stopPropagation)===null||n===void 0||n.call(e),O.setSelected(A),A.trigger("active",e)),[2]);case 1:if(nt.lastContent=qt.sent(),!m)return[3,5];qt.label=2;case 2:return qt.trys.push([2,4,,5]),At=this,[4,m.enable(this,this.activeRte,{event:e})];case 3:return At.activeRte=qt.sent(),[3,5];case 4:return Bt=qt.sent(),O.logError(Bt),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},s.prototype.onDisable=function(){this.disableEditing()},s.prototype.disableEditing=function(e){return e===void 0&&(e={}),Hs(this,void 0,void 0,function(){var n,a,u,m,O,P,j,A;return Wa(this,function(nt){switch(nt.label){case 0:if(a=(n=this).model,u=n.rte,m=n.activeRte,O=n.em,P=a&&a.get("editable"),!u)return[3,8];nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,u.disable(this,m)];case 2:return nt.sent(),[3,4];case 3:return j=nt.sent(),O.logError(j),[3,4];case 4:return(A=P)?[4,this.getContent()]:[3,6];case 5:A=nt.sent()!==this.lastContent,nt.label=6;case 6:return A?[4,this.syncContent(e)]:[3,8];case 7:nt.sent(),this.lastContent="",nt.label=8;case 8:return this.toggleEvents(),[2]}})})},s.prototype.getContent=function(){return Hs(this,void 0,void 0,function(){var e,n,a,u;return Wa(this,function(m){switch(m.label){case 0:return n=(e=this).rte,a=e.activeRte,u="",n?[4,n.getContent(this,a)]:[3,2];case 1:u=m.sent(),m.label=2;case 2:return[2,u]}})})},s.prototype.syncContent=function(e){return e===void 0&&(e={}),Hs(this,void 0,void 0,function(){var n,a,u,m,O,P;return Wa(this,function(j){switch(j.label){case 0:return a=(n=this).model,u=n.rte,n.rteEnabled||e.force?[4,this.getContent()]:[2];case 1:return m=j.sent(),O=a.components(),P=Ui({fromDisable:1},e),a.set("content","",P),u!=null&&u.customRte&&!u.customRte.parseContent?(O.length&&O.reset(void 0,Ui(Ui({},e),{keepIds:qi(O)})),a.set("content",m,P)):O.resetFromString(m,e),[2]}})})},s.prototype.insertComponent=function(e,n){var a;n===void 0&&(n={});var u=this.model,m=this.el.ownerDocument.getSelection();if(m!=null&&m.rangeCount){var O=m.getRangeAt(0),P=O.startContainer,j=O.startOffset,A=(0,B.getModel)(P),nt=[];if(A&&(!((a=A.is)===null||a===void 0)&&a.call(A,"textnode"))){var At=A.collection;At.forEach(function(be){if(be===A){var Ee="textnode",Ce=be.get("content")||"";nt.push({type:Ee,content:Ce.slice(0,j)}),nt.push(e),nt.push({type:Ee,content:Ce.slice(j)})}else nt.push(be)});var Bt=nt.filter(Boolean),qt=Bt.indexOf(e);return At.reset(Bt,n),At.at(qt)}}return u.append(e,n)},s.prototype.onInput=function(){var e=this.em,n="component",a=["".concat(n,":update"),"".concat(n,":input")].join(" ");e&&e.trigger(a,this.model)},s.prototype.disablePropagation=function(e){e.stopPropagation()},s.prototype.toggleEvents=function(e){var n=this,a=n.em,u=n.model,m=n.$el,O={on:B.on,off:B.off},P=e?"on":"off";a.setEditing(!!e&&this),this.rteEnabled=!!e;var j=[this.el.ownerDocument,document];if(O.off(j,"mousedown",this.onDisable),O[P](j,"mousedown",this.onDisable),a[P]("toolbar:run:before",this.onDisable),u&&(u[P]("removed",this.onDisable),u.trigger("rte:".concat(e?"enable":"disable"))),m==null||m.off("mousedown",this.disablePropagation),m&&m[P]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var A=this.el;A;)A.draggable=!e,(A=A.parentNode)&&A.tagName=="BODY"&&(A=0)},s}(Ro);const ac=ws;var ul=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const mu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ul(s,h),s.prototype.render=function(){return h.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},s}(ac);var sc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fl=function(){return fl=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},fl.apply(this,arguments)},yu="label";const pl=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return sc(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return fl(fl({},h.prototype.defaults),{type:yu,tagName:yu,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===yu},s}(ki);var lc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Vi=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return lc(s,h),s}(mu);var dl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Sa=function(){return Sa=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Sa.apply(this,arguments)},Vl="video",hl="yt",_s="vi",xs="ytnc",qc=function(h){return h&&h!=="0"},cc=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return dl(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Sa(Sa({},h.prototype.defaults),{type:Vl,tagName:Vl,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e,n){this.em=n.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),h.prototype.initialize.call(this,e,n)},s.prototype.updateTraits=function(){var e,n=this.em,a="iframe";switch(this.get("provider")){case hl:case xs:e=this.getYoutubeTraits();break;case _s:e=this.getVimeoTraits();break;default:a="video",e=this.getSourceTraits()}this.set({tagName:a},{silent:!0}),this.set({traits:e}),n.get("ready")&&n.trigger("component:toggled")},s.prototype.parseFromSrc=function(){var e=this.get("provider"),n=this.parseUri(this.get("src")),a=n.query;switch(e){case hl:case xs:case _s:this.set("videoId",n.pathname.split("/").pop()),a.list&&this.set("list",a.list),qc(a.autoplay)&&this.set("autoplay",1),qc(a.loop)&&this.set("loop",1),parseInt(a.controls)===0&&this.set("controls",0),qc(a.color)&&this.set("color",a.color),a.rel==="0"&&this.set("rel",0),a.modestbranding==="1"&&this.set("modestbranding",1)}},s.prototype.updateSrc=function(){var e="";switch(this.get("provider")){case hl:e=this.getYoutubeSrc();break;case xs:e=this.getYoutubeNoCookieSrc();break;case _s:e=this.getVimeoSrc()}this.set({src:e})},s.prototype.getAttrToHTML=function(){var e=h.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case hl:case xs:case _s:break;default:this.get("loop")&&(e.loop="loop"),this.get("autoplay")&&(e.autoplay="autoplay"),this.get("controls")&&(e.controls="controls")}return e},s.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:hl,name:"Youtube"},{value:xs,name:"Youtube (no cookie)"},{value:_s,name:"Vimeo"}]}},s.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},s.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},s.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},s.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},s.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},s.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},s.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),n=this.get("ytUrl"),a=this.get("list");return n+=e+(e.indexOf("?")<0?"?":""),n+=a?"&list=".concat(a):"",n+=this.get("autoplay")?"&autoplay=1":"",n+=this.get("controls")?"":"&controls=0&showinfo=0",n+=this.get("loop")?"&loop=1&playlist=".concat(e):"",(n+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},s.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e.replace(this.get("ytUrl"),this.get("ytncUrl"))},s.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("loop")?"&loop=1":"",(e+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")},s.isComponent=function(e){var n=e.tagName,a=e.src,u=/youtube\.com\/embed/.test(a),m=/youtube-nocookie\.com\/embed/.test(a),O=/player\.vimeo\.com\/video/.test(a),P=u||m||O;if((0,B.toLowerCase)(n)==Vl||(0,B.toLowerCase)(n)=="iframe"&&P){var j={type:"video"};return a&&(j.src=a),P&&(u?j.provider=hl:m?j.provider=xs:O&&(j.provider=_s)),j}},s}(Ve);const Bs=cc;var Kc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ju=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Kc(s,h),s.prototype.tagName=function(){return"div"},s.prototype.events=function(){return{}},s.prototype.initialize=function(){Ro.prototype.initialize.apply(this,arguments);var e=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"].map(function(a){return"change:".concat(a)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,n,this.updateVideo)},s.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},s.prototype.updateSrc=function(){var e=this.model,n=this.videoEl;if(n){var a=e.get("provider"),u=e.get("src");switch(a){case"yt":u=e.getYoutubeSrc();break;case"ytnc":u=e.getYoutubeNoCookieSrc();break;case"vi":u=e.getVimeoSrc()}n.src=u}},s.prototype.updateVideo=function(){var e=this.model,n=this.videoEl;switch(e.get("provider")){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(n){var a=n;a.loop=e.get("loop"),a.autoplay=e.get("autoplay"),a.controls=e.get("controls"),a.poster=e.get("poster")}}},s.prototype.renderByProvider=function(e){var n;switch(e){case"yt":n=this.renderYoutube();break;case"ytnc":n=this.renderYoutubeNoCookie();break;case"vi":n=this.renderVimeo();break;default:n=this.renderSource()}return this.videoEl=n,n},s.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},s.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},s.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},s.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},s.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},s.prototype.render=function(){Ro.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},s}(as);const uc=Ju;var Qu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Aa=function(){return Aa=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Aa.apply(this,arguments)},ss="script";const gl=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Qu(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Aa(Aa({},h.prototype.defaults),{type:ss,tagName:ss,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),s.isComponent=function(e){if((0,B.toLowerCase)(e.tagName)==ss){var n={type:ss};return e.src&&(n.src=e.src,n.onload=e.onload),n}},s}(Si);var Yc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Cs=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Yc(s,h),s.prototype.tagName=function(){return"script"},s.prototype.events=function(){return{}},s.prototype.render=function(){var e=this.model,n=this.em,a=e.get("src"),u=n&&n.get("scriptCount")||0,m="";if(a){var O=e.get("onload"),P="script".concat(u),j="script".concat(u+1),A="".concat(P,"Start"),nt="".concat(j,"Start");m=`
        var `.concat(P,` = document.createElement('script');
        `).concat(P,`.onload = function() {
          `).concat(O?"".concat(O,`();
`):"",`
          typeof `).concat(nt," == 'function' && ").concat(nt,`();
        };
        `).concat(P,".src = '").concat(a,`';
        function `).concat(A,"() { document.body.appendChild(").concat(P,`); };
        `).concat(u?"":"".concat(A,"();"),`
      `),n&&n.set("scriptCount",u+1)}else m=e.__innerHTML();return this.el.innerHTML=m,this.postRender(),this},s}(as);const tf=Cs;var bp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bu=function(){return bu=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},bu.apply(this,arguments)},wu="svg";const ls=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return bp(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return bu(bu({},h.prototype.defaults),{type:wu,tagName:wu,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),s.prototype.getName=function(){var e=this.get("tagName"),n=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),n||e},s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===wu},s}(Si);var $a=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fc=function(){return fc=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},fc.apply(this,arguments)};const Jp=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return $a(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return fc(fc({},h.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),s.isComponent=function(e,n){return n===void 0&&(n={}),!!n.inSvg},s}(ls);var ef=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_u=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ef(s,h),s.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},s}(Ro);const xc=_u;var Ma=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ho=function(){return Ho=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ho.apply(this,arguments)};const Ai=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ma(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Ho(Ho({},h.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),s.prototype.toHTML=function(){var e=this.parent(),n=this.get("content");return e!=null&&e.is("script")?n:this.__escapeContent(n)},s.prototype.__escapeContent=function(e){return(0,B.escapeNodeContent)(e)},s.isComponent=function(e){if(e.nodeType===3)return{type:"textnode",content:e.textContent}},s}(Si);var Bo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cs=function(){return cs=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},cs.apply(this,arguments)};const Us=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Bo(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return cs({},h.prototype.defaults)},enumerable:!1,configurable:!0}),s.prototype.toHTML=function(){return"<!--".concat(this.get("content"),"-->")},s.isComponent=function(e){if(e.nodeType==8)return{tagName:"NULL",type:"comment",content:e.textContent}},s}(Ai);var vl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const ml=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return vl(s,h),s.prototype._setAttributes=function(){},s.prototype.renderAttributes=function(){},s.prototype.updateStatus=function(){},s.prototype.updateClasses=function(){},s.prototype.setAttribute=function(){},s.prototype.updateAttributes=function(){},s.prototype.initClasses=function(){},s.prototype.initComponents=function(){},s.prototype.delegateEvents=function(){return this},s.prototype._createElement=function(){return document.createTextNode("")},s.prototype.render=function(){var e=this.model,n=this.el;return e.opt.temporary||(n.textContent=e.get("content")),this},s}(Ro);var rf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const xu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return rf(s,h),s.prototype._createElement=function(){return document.createComment(this.model.get("content"))},s}(ml);var Cc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ss=function(){return Ss=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ss.apply(this,arguments)};const Df=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Cc(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Ss(Ss({},h.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),s.prototype.__postAdd=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return!this.__hasUm&&(n==null||n.add(this)),h.prototype.__postAdd.call(this)},s.prototype.__postRemove=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return n==null||n.remove(this),h.prototype.__postRemove.call(this)},s.isComponent=function(){return!1},s}(Si);var Cu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Su=function(){return Su=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Su.apply(this,arguments)},Ou="iframe";const wp=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Cu(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Su(Su({},h.prototype.defaults),{type:Ou,tagName:Ou,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),s.isComponent=function(e){return(0,B.toLowerCase)(e.tagName)===Ou},s}(Si);var Tu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const La=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Tu(s,h),s.prototype.tagName=function(){return"div"},s.prototype.initialize=function(e){h.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},s.prototype.updateSrc=function(){var e=(0,vn.sE)(this.el,"iframe")[0];e&&(0,vn.FW)(e,{src:this.__getSrc()})},s.prototype.render=function(){h.prototype.render.call(this);var e=(0,vn.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},s.prototype.__getSrc=function(){return this.model.getAttributes().src||""},s}(Ro);var Ti=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fn=function(){return Fn=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Fn.apply(this,arguments)},Fi=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},di=function(h){function s(e){var n=h.call(this,e,"DomComponents",new Ha(void 0,{em:e}))||this;for(var a in n.componentTypes=[{id:"cell",model:aa,view:Il},{id:"row",model:wc,view:Ua},{id:"table",model:sa,view:is},{id:"thead",model:Oi,view:gt},{id:"tbody",model:ms,view:he},{id:"tfoot",model:hr,view:lt},{id:"map",model:jn,view:Zu},{id:"link",model:Rs,view:mu},{id:"label",model:pl,view:Vi},{id:"video",model:Bs,view:uc},{id:"image",model:Ve,view:as},{id:"script",model:gl,view:tf},{id:"svg-in",model:Jp,view:xc},{id:"svg",model:ls,view:xc},{id:"iframe",model:wp,view:La},{id:"comment",model:Us,view:xu},{id:"textnode",model:Ai,view:ml},{id:"text",model:ki,view:ac},{id:"wrapper",model:Df,view:Xo},{id:"default",model:Si,view:Ro}],n.componentsById={},n.Component=Si,n.Components=Ha,n.ComponentsView=ll,n.storageKey="components",e&&(n.config.components=e.config.components||n.config.components),en)a in n.config||(n.config[a]=en[a]);var u=n.config.pStylePrefix;if(u&&(n.config.stylePrefix=u+n.config.stylePrefix),e){e.get("Parser").compTypes=n.componentTypes,e.on("change:componentHovered",n.componentHovered,n);var m=e.get("selected");e.listenTo(m,"add",function(O,P,j){return n.selectAdd(m.getComponent(O),j)}),e.listenTo(m,"remove",function(O,P,j){return n.selectRemove(m.getComponent(O),j)})}return n}return Ti(s,h),s.prototype.load=function(e){var n=this;return this.loadProjectData(e,{onResult:function(a){var u=n.getWrapper();if(u||(n.em.Pages.add({},{select:!0}),u=n.getWrapper()),(0,k.isArray)(a))a.length&&u.components(a);else{var m=a.components,O=m===void 0?[]:m,P=Fi(a,["components"]);u.set(P),u.components(O)}}})},s.prototype.store=function(){return{}},s.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),n=e==null?void 0:e.getMainFrame();return n==null?void 0:n.getComponent()},s.prototype.getWrapper=function(){return this.getComponent()},s.prototype.getComponents=function(){var e=this.getWrapper();return e==null?void 0:e.components()},s.prototype.addComponent=function(e,n){return n===void 0&&(n={}),this.getComponents().add(e,n)},s.prototype.render=function(){var e;return(e=this.componentView)===null||e===void 0?void 0:e.render().el},s.prototype.clear=function(e){e===void 0&&(e={});var n=this.getComponents();return n==null||n.filter(Boolean).forEach(function(a){return a.remove(e)}),this},s.prototype.setComponents=function(e,n){n===void 0&&(n={}),this.clear(n).addComponent(e,n)},s.prototype.addType=function(e,n){var a=this.em,u=n.model,m=u===void 0?{}:u,O=n.view,P=O===void 0?{}:O,j=n.isComponent,A=n.extend,nt=n.extendView,At=n.extendFn,Bt=At===void 0?[]:At,qt=n.extendFnView,be=qt===void 0?[]:qt,Ee=this.getType(e),Ce=this.getType(A),rr=this.getType(nt),yr=Ce||Ee||this.getType("default"),Jr=yr.model,Qr=rr?rr.view:yr.view,Sn=function(ii,va,Qs){return ii.reduce(function(tl,Ll){var Xa=va[Ll],lu=Qs.prototype[Ll];return Xa&&lu&&(tl[Ll]=function(){for(var Wu=[],up=0;up<arguments.length;up++)Wu[up]=arguments[up];lu.bind(this).apply(void 0,Wu),Xa.bind(this).apply(void 0,Wu)}),tl},{})};if(typeof m=="object"){var Pn={defaults:m.defaults};delete m.defaults,n.model=Jr.extend(Fn(Fn({},m),Sn(Bt,m,Jr)),{isComponent:!Ee||Ce||j?j||function(){return 0}:Jr.isComponent}),Object.defineProperty(n.model.prototype,"defaults",{get:function(){return Fn(Fn({},(0,k.result)(Jr.prototype,"defaults")||{}),(0,k.result)(Pn,"defaults")||{})}})}typeof P=="object"&&(n.view=Qr.extend(Fn(Fn({},P),Sn(be,P,Qr)))),Ee?(Ee.model=n.model,Ee.view=n.view):(n.id=e,this.componentTypes.unshift(n));var xo="component:type:".concat(Ee?"update":"add");return a==null||a.trigger(xo,Ee||n),this},s.prototype.getType=function(e){for(var n=this.componentTypes,a=0;a<n.length;a++)if(n[a].id==e)return n[a]},s.prototype.removeType=function(e){var n=this.componentTypes,a=this.getType(e);if(a){var u=n.indexOf(a);return n.splice(u,1),a}},s.prototype.getTypes=function(){return this.componentTypes},s.prototype.selectAdd=function(e,n){var a=this;n===void 0&&(n={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(u){return a.em.trigger(u,e,n)}))},s.prototype.selectRemove=function(e,n){var a=this;n===void 0&&(n={}),e&&(this.em,e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(u){return a.em.trigger(u,e,n)}))},s.prototype.componentHovered=function(){var e=this.em,n=e.get("componentHovered"),a=e.previous("componentHovered"),u="hovered";a&&a.get("status")==u&&a.set({status:"",state:""}),n&&(0,k.isEmpty)(n.get("status"))&&n.set("status",u)},s.prototype.getShallowWrapper=function(){var e=this.shallow,n=this.em;if(!e&&n){var a=n.shallow;if(!a)return;var u=a.Components;if(u.componentTypes=this.componentTypes,e=u.getWrapper()){var m=[Hi,ia].join(" ");e.on(m,(0,k.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},s.prototype.canMove=function(e,n,a){var u=a||a===0?a:null,m={result:!1,reason:0,target:e,source:null};if(!n||!e)return m;var O=n.toHTML?n:null;if(!O){var P=this.getShallowWrapper();O=(P==null?void 0:P.append(n)[0])||null}if(m.source=O,!O)return m;var j=O.get("draggable");if((0,k.isFunction)(j))j=!!j(O,e,u);else{var A=e.getEl();j=(0,k.isArray)(j)?j.join(","):j,j=(0,k.isString)(j)?A==null?void 0:A.matches(j):j}if(!j)return Fn(Fn({},m),{reason:1});var nt=e.get("droppable");(0,k.isFunction)(nt)?nt=!!nt(O,e,u):nt===!1&&e.isInstanceOf("text")&&O.get("textable")?nt=!0:(A=O.getEl(),nt=(0,k.isArray)(nt)?nt.join(","):nt,nt=(0,k.isString)(nt)?A==null?void 0:A.matches(nt):nt);var At=[e].concat(e.parents()).indexOf(O)>-1;return Fn(Fn({},m),!nt||At?{reason:2}:{result:!0})},s.prototype.allById=function(){return this.componentsById},s.prototype.getById=function(e){return this.componentsById[e]||null},s.prototype.destroy=function(){var e,n=this.allById();Object.keys(n).forEach(function(a){return n[a]&&n[a].remove()}),(e=this.componentView)===null||e===void 0||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(a){return{}})},s}(Q);const _p=di,Oa={stylePrefix:"css-",rules:[]};var _o=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zs=Number.MAX_VALUE,pc=function(h){function s(){var e=h.call(this)||this;return(0,k.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return _o(s,h),s.prototype.buildFromModel=function(e,n){var a=this;n===void 0&&(n={});var u="",m=this.em,O=m&&m.getConfig().avoidInlineStyle,P=e.styleToString(),j=e.classes;return this.ids.push("#".concat(e.getId())),j.forEach(function(A){return a.compCls.push(A.getFullName())}),!O&&P&&(u="#".concat(e.getId(),"{").concat(P,"}")),e.components().forEach(function(A){return u+=a.buildFromModel(A,n)}),u},s.prototype.build=function(e,n){var a=this;n===void 0&&(n={});var u=n.json,m=n.em,O=n.cssc||(m==null?void 0:m.Css);this.em=m,this.compCls=[],this.ids=[],this.model=e;var P=[],j=e?this.buildFromModel(e,n):"",A=(0,k.isUndefined)(n.clearStyles)&&m?m.getConfig().clearStyles:n.clearStyles;if(O){var nt=n.rules||O.getAll(),At={},Bt=[];n.onlyMatched&&e&&(0,B.hasWin)()&&(nt=this.matchedRules(e,nt)),nt.forEach(function(qt){var be=qt.getAtRule();if(be){var Ee=At[be];Ee?Ee.push(qt):At[be]=[qt]}else{var Ce=a.buildFromRule(qt,Bt,n);u?P.push(Ce):j+=Ce}}),this.sortMediaObject(At).forEach(function(qt){var be="",Ee=qt.key;qt.value.forEach(function(Ce){var rr=a.buildFromRule(Ce,Bt,n);Ce.get("singleAtRule")?j+="".concat(Ee,"{").concat(rr,"}"):be+=rr,u&&P.push(rr)}),be&&(j+="".concat(Ee,"{").concat(be,"}"))}),m&&A&&nt.remove&&nt.remove(Bt)}return u?P.filter(function(qt){return qt}):j},s.prototype.buildFromRule=function(e,n,a){var u,m=this;a===void 0&&(a={});var O,P="",j=this.model,A=e.selectorsToString({skipAdd:1}),nt=e.get("selectorsAdd"),At=e.get("singleAtRule");if((u=e.get("selectors"))===null||u===void 0||u.forEach(function(qt){var be=qt.getFullName();(m.compCls.indexOf(be)>=0||m.ids.indexOf(be)>=0||a.keepUnusedStyles)&&(O=1)}),A&&O||nt||At||!j){var Bt=e.getDeclaration({body:1});Bt&&(a.json?P=e:P+=Bt)}else n.push(e);return P},s.prototype.matchedRules=function(e,n){var a=this,u=e.getEl(),m=[];return n.forEach(function(O){try{O.selectorsToString().split(",").some(function(P){return u==null?void 0:u.matches(a.__cleanSelector(P))})&&m.push(O)}catch{}}),e.components().forEach(function(O){m=m.concat(a.matchedRules(O,n))}),m=m.filter(function(O,P){return m.indexOf(O)===P})},s.prototype.getQueryLength=function(e){var n=/(-?\d*\.?\d+)\w{0,}/.exec(e);return n?parseFloat(n[1]):zs},s.prototype.sortMediaObject=function(e){var n=this;e===void 0&&(e={});var a=[];return(0,k.each)(e,function(u,m){return a.push({key:m,value:u})}),a.sort(function(u,m){var O=[u.key,m.key].every(function(A){return A.indexOf("min-width")!==-1}),P=O?u.key:m.key,j=O?m.key:u.key;return n.getQueryLength(P)-n.getQueryLength(j)})},s.prototype.sortRules=function(e,n){var a=function(P){return P.get("mediaText")||""},u=[a(e),a(n)].every(function(P){return P.indexOf("min-width")!==-1}),m=a(u?e:n),O=a(u?n:e);return this.getQueryLength(m)-this.getQueryLength(O)},s.prototype.__cleanSelector=function(e){return e.split(" ").map(function(n){return n.split(":")[0]}).join(" ")},s}(N.Hn);const yl=pc;var If=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fl=function(){return Fl=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Fl.apply(this,arguments)},xp=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Sc=((0,B.hasWin)()?window:{}).CSS,Oc=function(h){function s(e,n){n===void 0&&(n={});var a=h.call(this,e)||this;return a.config=e||{},a.opt=n,a.em=n.em,a.ensureSelectors(null,null,{}),a.on("change",a.__onChange),a}return If(s,h),s.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},s.prototype.__onChange=function(e,n){var a=this.em,u=this.changedAttributes();u&&!(0,B.isEmptyObj)(u)&&(a==null||a.changesUp(n))},s.prototype.clone=function(){var e=Fl({},this.opt),n=Fl({},this.attributes);return n.selectors=this.get("selectors").map(function(a){return a.clone()}),new this.constructor(n,e)},s.prototype.ensureSelectors=function(e,n,a){var u=this.em,m=u==null?void 0:u.get("SelectorManager"),O=[this,"change:selectors",this.ensureSelectors],P=this.getSelectors();if(this.stopListening.apply(this,O),P.models&&(P=xp([],P.models,!0)),P=(0,k.isString)(P)?[P]:P,Array.isArray(P)){var j=P.filter(function(A){return A}).map(function(A){return m?m.add(A):A});P=new xi(j)}this.set("selectors",P,a),this.listenTo.apply(this,O)},s.prototype.getAtRule=function(){var e=this.get("atRuleType"),n=this.get("mediaText"),a=e?"@".concat(e):n?"@media":"";return a+(n&&a?" ".concat(n):"")},s.prototype.selectorsToString=function(e){e===void 0&&(e={});var n=[],a=this.get("state"),u=this.get("selectorsAdd"),m={escape:function(j){return Sc&&Sc.escape?Sc.escape(j):j}},O=this.get("selectors").getFullString(0,m),P=a&&!e.skipState?":".concat(a):"";return O&&n.push("".concat(O).concat(P)),u&&!e.skipAdd&&n.push(u),n.join(", ")},s.prototype.getDeclaration=function(e){e===void 0&&(e={});var n="",a=this.attributes.important,u=this.selectorsToString(e),m=this.styleToString(Fl({important:a},e)),O=this.get("singleAtRule");return(u||O)&&(m||e.allowEmpty)&&(n=O?m:"".concat(u,"{").concat(m,"}")),n},s.prototype.getDevice=function(){var e=this.em,n=this.attributes,a=n.atRuleType,u=n.mediaText,m=(e==null?void 0:e.get("DeviceManager").getDevices())||[],O=m.filter(function(P){return P.getWidthMedia()===""})[0];return a==="media"&&u?m.filter(function(P){return P.getWidthMedia()===((j=/(-?\d*\.?\d+)\w{0,}/.exec(u))?j[0]:"");var j})[0]||null:O||null},s.prototype.getState=function(){var e=this.em,n=this.get("state");return((e==null?void 0:e.get("SelectorManager").getStates())||[]).filter(function(a){return a.getName()===n})[0]||null},s.prototype.getComponent=function(){var e,n=this.getSelectors(),a=n.length==1&&n.at(0),u=a&&a.isId()&&a.get("name");return u&&((e=this.em)===null||e===void 0?void 0:e.get("DomComponents").getById(u))||null},s.prototype.toCSS=function(e){e===void 0&&(e={});var n="",a=this.getAtRule(),u=this.getDeclaration(e);return(u||e.allowEmpty)&&(n=u),a&&n&&(n="".concat(a,"{").concat(n,"}")),n},s.prototype.toJSON=function(){for(var e,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var u=N.Hn.prototype.toJSON.apply(this,n);if(!((e=this.em)===null||e===void 0)&&e.getConfig().avoidDefaults){var m=this.defaults();(0,k.forEach)(m,function(O,P){u[P]===O&&delete u[P]}),delete u.style.__p,(0,k.isEmpty)(u.selectors)&&delete u.selectors,(0,k.isEmpty)(u.style)&&delete u.style}return u},s.prototype.compare=function(e,n,a,u){var m;u===void 0&&(u={});var O=n||"",P=a||"",j=u.selectorsAdd||"",A=u.atRuleType||"";P&&!A&&(A="media");var nt=((0,k.isArray)(e)||e.models?e.models||e:[e]).map(function(be){return be.getFullName()}),At=(m=this.get("selectors"))===null||m===void 0?void 0:m.map(function(be){return be.getFullName()}),Bt=nt.slice().sort(),qt=At.slice().sort();return!(nt.length!==At.length||!Bt.every(function(be,Ee){return be===qt[Ee]}))&&this.get("state")===O&&this.get("mediaText")===P&&this.get("selectorsAdd")===j&&this.get("atRuleType")===A},s}(xa);const Zc=Oc;var nf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ja=function(h){function s(e,n){var a=h.call(this,e)||this;return a.editor=n==null?void 0:n.em,setTimeout(function(){a.on("remove",a.onRemove),a.on("add",a.onAdd)}),a}return nf(s,h),s.prototype.toJSON=function(e){return N.FE.prototype.toJSON.call(this,e).filter(function(n){return n.style&&!n.shallow})},s.prototype.onAdd=function(e,n,a){e.ensureSelectors(e,n,a)},s.prototype.onRemove=function(e){var n=this.editor;n.stopListening(e),n.UndoManager.remove(e)},s.prototype.add=function(e,n){return n===void 0&&(n={}),typeof e=="string"&&(e=this.editor.get("Parser").parseCss(e)),n.em=this.editor,N.FE.prototype.add.apply(this,[e,n])},s}(N.FE);const Xc=ja;ja.prototype.model=Zc;var Rl=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bl=function(){return bl=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},bl.apply(this,arguments)},Tc=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},wl=function(h){function s(e){var n=h.call(this,e,"CssComposer",null,{},Oa)||this;n.Selectors=xi,n.storageKey="styles";var a=n.config,u=a.pStylePrefix;return u&&(a.stylePrefix=u+a.stylePrefix),a.rules=n.em.config.style||a.rules||"",n.rules=new Xc([],a),n}return Rl(s,h),s.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},s.prototype.postLoad=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.get("UndoManager");n&&n.add(this.getAll())},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},s.prototype.add=function(e,n,a,u,m){u===void 0&&(u={}),m===void 0&&(m={});var O=n||"",P=a||"",j=bl({},u),A=this.get(e,O,P,j);return A&&A.config&&!A.config.singleAtRule||(j.state=O,j.mediaText=P,j.selectors=[],P&&!j.atRuleType&&(j.atRuleType="media"),(A=new Zc(j,this.config)).get("selectors").add(e,m),this.rules.add(A,m)),A},s.prototype.get=function(e,n,a,u){var m=e;if((0,k.isString)(e)){var O=this.em.Selectors,P=e.split(",")[0].trim(),j=this.em.Parser.parserCss.checkNode({selectors:P})[0];m=O.get(j.selectors)}return this.rules.find(function(A){return A.compare(m,n,a,u)})||null},s.prototype.getAll=function(){return this.rules},s.prototype.addCollection=function(e,n,a){n===void 0&&(n={}),a===void 0&&(a={});var u=this.em,m=[];(0,k.isString)(e)&&(e=u.Parser.parseCss(e));for(var O=e instanceof Array?e:[e],P=0,j=O.length;P<j;P++){var A=O[P]||{};if(A.selectors){var nt=u==null?void 0:u.Selectors;nt||console.warn("Selector Manager not found");for(var At=A.selectors,Bt=At instanceof Array?At:[At],qt=[],be=0,Ee=Bt.length;be<Ee;be++){var Ce=nt.add(Bt[be]);qt.push(Ce)}var rr=this.get(qt,A.state,A.mediaText,A),yr=this.add(qt,A.state,A.mediaText,A,n),Jr=!rr||!n.avoidUpdateStyle,Qr=A.style||{};if((0,B.isObject)(a)&&yr.set(a,n),Jr){var Sn=n.extend?bl(bl({},yr.get("style")),Qr):Qr;yr.set("style",Sn,n)}m.push(yr)}}return m},s.prototype.addRules=function(e){return this.addCollection(e)},s.prototype.setRule=function(e,n,a){n===void 0&&(n={}),a===void 0&&(a={});var u=a.atRuleType,m=a.atRuleParams,O=this.em.Parser.parserCss.checkNode({selectors:e,style:n})[0],P=O.state,j=O.selectorsAdd,A=this.em.Selectors.add(O.selectors),nt=this.add(A,P,m,{selectorsAdd:j,atRule:u});return a.addStyles?nt.addStyle(n,a):nt.setStyle(n,a),nt},s.prototype.getRule=function(e,n){n===void 0&&(n={});var a=this.em,u=a.Selectors,m=a.Parser.parserCss.checkNode({selectors:e})[0],O=u.get(m.selectors),P=m.state,j=m.selectorsAdd,A=n.atRuleType,nt=n.atRuleParams;return O?this.get(O,P,nt,{selectorsAdd:j,atRuleType:A}):void 0},s.prototype.getRules=function(e){var n=this.getAll();if(!e)return Tc([],n.models,!0);var a={sort:!0},u=(0,k.isString)(e)?e.split(",").map(function(m){return m.trim()}):e;return n.filter(function(m){return u.indexOf(m.getSelectors().getFullString(null,a))>=0})},s.prototype.setIdRule=function(e,n,a){n===void 0&&(n={}),a===void 0&&(a={});var u=a.addOpts,m=u===void 0?{}:u,O=a.mediaText,P=a.state||"",j=(0,k.isUndefined)(O)?this.em.getCurrentMedia():O,A=this.em.Selectors.add({name:e,type:bi.TYPE_ID},m),nt=this.add(A,P,j,{},m);return nt.setStyle(n,bl(bl({},a),m)),nt},s.prototype.getIdRule=function(e,n){n===void 0&&(n={});var a=n.mediaText,u=n.state||"",m=(0,k.isUndefined)(a)?this.em.getCurrentMedia():a,O=this.em.Selectors.get(e,bi.TYPE_ID);return O&&this.get(O,u,m)},s.prototype.setClassRule=function(e,n,a){n===void 0&&(n={}),a===void 0&&(a={});var u=a.state||"",m=a.mediaText||this.em.getCurrentMedia(),O=this.em.Selectors.add({name:e,type:bi.TYPE_CLASS}),P=this.add(O,u,m);return P.setStyle(n,a),P},s.prototype.getClassRule=function(e,n){n===void 0&&(n={});var a=n.state||"",u=n.mediaText||this.em.getCurrentMedia(),m=this.em.Selectors.get(e,bi.TYPE_CLASS);return m&&this.get(m,a,u)},s.prototype.remove=function(e,n){var a=(0,k.isString)(e)?this.getRules(e):e,u=this.getAll().remove(a,n);return(0,k.isArray)(u)?u:[u]},s.prototype.clear=function(e){return e===void 0&&(e={}),this.getAll().reset([],e),this},s.prototype.getComponentRules=function(e,n){n===void 0&&(n={});var a=n.state,u=n.mediaText;n.current&&(a=this.em.get("state")||"",u=this.em.getCurrentMedia());var m=e.getId();return this.getAll().filter(function(O){return!(!(0,k.isUndefined)(a)&&O.get("state")!==a||!(0,k.isUndefined)(u)&&O.get("mediaText")!==u||O.getSelectorsString()!=="#".concat(m))})},s.prototype.render=function(){var e;return(e=this.rulesView)===null||e===void 0||e.remove(),this.rulesView=new Wo({collection:this.rules,config:this.config}),this.rulesView.render().el},s.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),(e=this.rulesView)===null||e===void 0||e.remove()},s}(Q);const Nf=wl,Cp={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};var Eu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Da=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Eu(s,h),s.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},s.prototype.getId=function(){return this.id},s.prototype.getLabel=function(){return this.get("label")},s.prototype.getMedia=function(){return this.get("media")},s.prototype.getContent=function(){return this.get("content")},s.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,k.isFunction)(e==null?void 0:e.get)?e.get("label"):e!=null&&e.label?e==null?void 0:e.label:e},s}(N.Hn);var Eo=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),us=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Eo(s,h),s}(N.FE);const Ta=us;us.prototype.model=Da;var _l=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Jc=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return _l(s,h),s.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},s}(N.Hn);var of=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return of(s,h),s}(N.FE);const Vf=Pu;Pu.prototype.model=Jc;var af=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ei=function(h){function s(e,n){n===void 0&&(n={});var a=h.call(this,e)||this,u=a.model;return a.em=n.em,a.config=n,a.endDrag=a.endDrag.bind(a),a.ppfx=n.pStylePrefix||"",a.listenTo(u,"destroy remove",a.remove),a.listenTo(u,"change",a.render),a}return af(s,h),s.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},s.prototype.__getModule=function(){return this.em.Blocks},s.prototype.handleClick=function(e){var n=this,a=n.config,u=n.model,m=n.em,O=u.get("onClick")||a.appendOnClick;if(m.trigger("block:click",u,e),O){if((0,k.isFunction)(O))return O(u,m==null?void 0:m.getEditor(),{event:e});var P,j,A=a.getSorter(),nt=u.get("content"),At=m.getSelected();if(A.setDropContent(nt),At)if(A.validTarget(At.getEl(),nt).valid)P=At;else{var Bt=At.parent();Bt&&A.validTarget(Bt.getEl(),nt).valid&&(P=Bt,j=Bt.components().indexOf(At)+1)}if(!P){var qt=m.getWrapper();A.validTarget(qt.getEl(),nt).valid&&(P=qt)}var be=P&&P.append(nt,{at:j})[0];be&&m.setSelected(be,{scroll:1})}},s.prototype.startDrag=function(e){var n=this,a=n.config,u=n.em,m=n.model,O=m.get("disable");if(e.button===0&&a.getSorter&&!this.el.draggable&&!O){u.refreshCanvas();var P=a.getSorter();P.__currentBlock=m,P.setDragHelper(this.el,e),P.setDropContent(this.model.get("content")),P.startSort(this.el),(0,B.on)(document,"mouseup",this.endDrag)}},s.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},s.prototype.handleDrag=function(e){this.__getModule().__drag(e)},s.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},s.prototype.endDrag=function(){(0,B.off)(document,"mouseup",this.endDrag);var e=this.config.getSorter();e.moved=0,e.endMove()},s.prototype.render=function(){var e,n=this,a=n.em,u=n.el,m=n.$el,O=n.ppfx,P=n.model,j=P.get("disable"),A=P.get("attributes")||{},nt=A.class||"",At="".concat(O,"block"),Bt=a&&a.t("blockManager.labels.".concat(P.id))||P.get("label"),qt=P.get("render"),be=P.get("media"),Ee=j?"".concat(At,"--disable"):"".concat(O,"four-color-h");m.attr(A),u.className="".concat(nt," ").concat(At," ").concat(O,"one-bg ").concat(Ee).trim(),u.innerHTML=`
      `.concat(be?'<div class="'.concat(At,'__media">').concat(be,"</div>"):"",`
      <div class="`).concat(At,'-label">').concat(Bt,`</div>
    `),u.title=A.title||((e=u.textContent)===null||e===void 0?void 0:e.trim()),u.setAttribute("draggable","".concat(!(!(0,B.hasDnd)(a)||j)));var Ce=qt&&qt({el:u,model:P,className:At,prefix:O});return Ce&&(u.innerHTML=Ce),this},s}(N.G7);const ku=Ei;var sf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Hl=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},Ff=function(h){function s(e,n){var a=h.call(this,e)||this;a.config=n;var u=n.pStylePrefix||"";return a.em=n.em,a.pfx=u,a.caretR="fa fa-caret-right",a.caretD="fa fa-caret-down",a.iconClass="".concat(u,"caret-icon"),a.activeClass="".concat(u,"open"),a.className="".concat(u,"block-category"),a.listenTo(a.model,"change:open",a.updateVisibility),a.model.view=a,a}return sf(s,h),s.prototype.events=function(){return{"click [data-title]":"toggle"}},s.prototype.template=function(e){var n=e.pfx,a=e.label;return ct(Au||(Au=Hl([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),n,n,a,n)},s.prototype.attributes=function(){return this.model.get("attributes")||{}},s.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},s.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},s.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},s.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},s.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},s.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},s.prototype.append=function(e){this.getBlocksEl().appendChild(e)},s.prototype.render=function(){var e=this,n=e.em,a=e.el,u=e.$el,m=e.model,O=e.pfx,P=n.t("blockManager.categories.".concat(m.id))||m.get("label");return a.innerHTML=this.template({pfx:O,label:P}),u.addClass(this.className),u.css({order:m.get("order")}),this.updateVisibility(),this},s}(N.G7);const Ec=Ff;var Au,Mu=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pc=function(){return Pc=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Pc.apply(this,arguments)},Rf=function(h){function s(e,n){var a=h.call(this,e)||this;(0,k.bindAll)(a,"getSorter","onDrag","onDrop","onMove"),a.config=n||{},a.categories=e.categories||"",a.renderedCategories={};var u=a.config.pStylePrefix||"";a.ppfx=u,a.noCatClass="".concat(u,"blocks-no-cat"),a.blockContClass="".concat(u,"blocks-c"),a.catsClass="".concat(u,"block-categories");var m=a.collection;return a.listenTo(m,"add",a.addTo),a.listenTo(m,"reset",a.render),a.em=a.config.em,a.em&&(a.config.getSorter=a.getSorter),a}return Mu(s,h),s.prototype.__getModule=function(){return this.em.Blocks},s.prototype.updateConfig=function(e){e===void 0&&(e={}),this.config=Pc(Pc({},this.config),e)},s.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var n=e.Utils,a=e.Canvas;this.sorter=new n.Sorter({container:a.getBody(),placer:a.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:a.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:e,canvasRelative:1})}return this.sorter}},s.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},s.prototype.onMove=function(e){this.__getModule().__drag(e),this.em.trigger("block:drag:move",e)},s.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},s.prototype.addTo=function(e){this.add(e)},s.prototype.add=function(e,n){var a=this.config,u=new ku({model:e,attributes:e.get("attributes")},a).render().el,m=e.get("category");if(m&&this.categories&&!a.ignoreCategories){(0,k.isString)(m)?m={id:m,label:m}:(0,k.isObject)(m)&&!m.id&&(m.id=m.label);var O=this.categories.add(m),P=O.get("id"),j=this.getCategoriesEl(),A=this.renderedCategories[P];return e.set("category",O,{silent:!0}),!A&&j&&(A=new Ec({model:O},a).render(),this.renderedCategories[P]=A,j.appendChild(A.el)),void(A&&A.append(u))}n?n.appendChild(u):this.append(u)},s.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},s.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},s.prototype.append=function(e){var n=this.getBlocksEl();n&&n.appendChild(e)},s.prototype.render=function(){var e=this,n=this.ppfx,a=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(m){return e.add(m,a)}),this.append(a);var u="".concat(this.blockContClass,"s ").concat(n,"one-bg ").concat(n,"two-color");return this.$el.addClass(u),this.rendered=!0,this},s}(N.G7);const kc=Rf;var Hf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ws=function(){return Ws=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ws.apply(this,arguments)},Bf="block",Os="".concat(Bf,":"),Ac="".concat(Os,"add"),Sp="".concat(Os,"update"),Uf="".concat(Os,"remove"),zf="".concat(Uf,":before"),Ts="".concat(Os,"drag"),Mc={all:Bf,update:Sp,add:Ac,remove:Uf,removeBefore:zf,drag:Ts,dragStart:"".concat(Ts,":start"),dragEnd:"".concat(Ts,":stop"),custom:"".concat(Os,"custom")},dc=function(h){function s(e){var n,a=this;return(a=h.call(this,e,"BlockManager",new Ta(((n=e.config.blockManager)===null||n===void 0?void 0:n.blocks)||[]),Mc,Cp)||this).Block=Da,a.Blocks=Ta,a.Category=Jc,a.Categories=Vf,a.storageKey="",a.blocks=a.all,a.blocksVisible=new Ta(a.blocks.models),a.categories=new Vf,a.blocks.on("add",function(u){return a.blocksVisible.add(u)}),a.blocks.on("remove",function(u){return a.blocksVisible.remove(u)}),a.blocks.on("reset",function(u){return a.blocksVisible.reset(u.models)}),a.__onAllEvent=(0,k.debounce)(function(){return a.__trgCustom()},0),a}return Hf(s,h),s.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},s.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:n.container,dragStart:function(a,u){return e.startDrag(a,u)},drag:function(a){return e.__drag(a)},dragStop:function(a){return e.endDrag(a)}}},s.prototype.__startDrag=function(e,n){var a=this,u=a.em,m=a.events,O=a.blocks,P=e.getContent?e.getContent():e;this._dragBlock=e,u.set({dragResult:null,dragContent:P}),[u,O].map(function(j){return j.trigger(m.dragStart,e,n)})},s.prototype.__drag=function(e){var n=this,a=n.em,u=n.events,m=n.blocks,O=this._dragBlock;[a,m].map(function(P){return P.trigger(u.drag,O,e)})},s.prototype.__endDrag=function(e){e===void 0&&(e={});var n=this,a=n.em,u=n.events,m=n.blocks,O=this._dragBlock,P=e.component||a.get("dragResult");if(delete this._dragBlock,P&&O){var j="activeOnRender",A=P.get&&P.get(j),nt=O.get("activate")||A,At=O.get("select"),Bt=(0,k.isArray)(P)?P[0]:P;(At||nt&&At!==!1)&&a.setSelected(Bt),nt&&(Bt.trigger("active"),A&&Bt.unset(j)),O.get("resetId")&&Bt.onAll(function(qt){return qt.resetId()})}a.set({dragResult:null,dragContent:null}),O&&[a,m].map(function(qt){return qt.trigger(u.dragEnd,P,O)})},s.prototype.__getFrameViews=function(){return this.em.get("Canvas").getFrames().map(function(e){return e.view})},s.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Ws(Ws({},this._bhv||{}),e)},s.prototype.__getBehaviour=function(){return this._bhv||{}},s.prototype.startDrag=function(e,n){this.__startDrag(e,n),this.__getFrameViews().forEach(function(a){return a.droppable.startCustom()})},s.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(n){return n.droppable.endCustom(e)}),this.__endDrag()},s.prototype.postRender=function(){var e=this,n=e.categories,a=e.config,u=e.em,m=this.blocksVisible;this.blocksView=new kc({collection:m,categories:n},Ws(Ws({},a),{em:u})),this.__appendTo(m.models),this.__trgCustom()},s.prototype.add=function(e,n,a){a===void 0&&(a={});var u=n||{};return u.id=e,this.blocks.add(u,a)},s.prototype.get=function(e){return this.blocks.get(e)},s.prototype.getAll=function(){return this.blocks},s.prototype.getAllVisible=function(){return this.blocksVisible},s.prototype.remove=function(e,n){return n===void 0&&(n={}),this.__remove(e,n)},s.prototype.getCategories=function(){return this.categories},s.prototype.getContainer=function(){var e;return(e=this.blocksView)===null||e===void 0?void 0:e.el},s.prototype.render=function(e,n){n===void 0&&(n={});var a=this,u=a.categories,m=a.config,O=a.em,P=e||this.getAll().models;if(n.external){var j=new Ta(P);return new kc({collection:j,categories:u},Ws(Ws({em:O},m),n)).render().el}return this.blocksView&&(this.blocksView.updateConfig(n),this.blocksView.collection.reset(P),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},s.prototype.destroy=function(){var e,n=[this.blocks,this.blocksVisible,this.categories];n.map(function(a){return a.stopListening()}),n.map(function(a){return a.reset()}),(e=this.blocksView)===null||e===void 0||e.remove()},s}(Q);const Qc=dc,lf={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var Wf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bl=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Wf(s,h),s.prototype.defaults=function(){return{name:"",label:""}},s.prototype.getName=function(){return this.get("name")},s.prototype.getLabel=function(){return this.get("label")||this.getName()},s}(N.Hn);const Es=Bl;Bl.prototype.idAttribute="name";var Mi=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lu=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},$f="contentEditable",fa=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this,a=e.config||{};return n.config=a,n.module=e.module,n.coll=e.coll||null,n.pfx=a.stylePrefix||"",n.ppfx=a.pStylePrefix||"",n.em=a.em,n.listenTo(n.model,"change:active",n.updateStatus),n}return Mi(s,h),s.prototype.template=function(){var e=this,n=e.pfx,a=e.model,u=e.config,m=a.get("label")||"";return ct(hc||(hc=Lu([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),n,n,n,m,n,n,u.iconTagRemove)},s.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},s.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},s.prototype.startEditTag=function(){var e=this.em,n=this.getInputEl();n[$f]="true",n.focus(),e==null||e.setEditing(!0)},s.prototype.endEditTag=function(){var e=this.model,n=this.em,a=this.getInputEl(),u=a.textContent||"",m=n==null?void 0:n.Selectors;a[$f]="false",n==null||n.setEditing(!1),m&&m.rename(e,u)!==e&&(a.innerText=e.get("label"))},s.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.get("active"))},s.prototype.removeTag=function(){this.module.removeSelected(this.model)},s.prototype.updateStatus=function(){var e=this,n=e.model,a=e.$el,u=e.config,m=u.iconTagOn,O=u.iconTagOff,P=a.find("[data-tag-status]");n.get("active")?(P.html(m),a.removeClass("opac50")):(P.html(O),a.addClass("opac50"))},s.prototype.render=function(){var e=this.pfx,n=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(e,"tag ").concat(n,"three-bg")),this.updateStatus(),this},s}(N.G7);const Ea=fa;var hc,gc=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lc=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},Gf=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.className=n.pfx+"tags",n.stateInputId=n.pfx+"states",n.stateInputC=n.pfx+"input-c",n.states=n.config.states||[];var a=n.config.em,u=n.collection;n.target=a;var m=a.Selectors;return n.module=m,n.em=a,n.componentChanged=(0,k.debounce)(n.componentChanged.bind(n),0),n.checkSync=(0,k.debounce)(n.checkSync.bind(n),0),n.listenTo(a,"component:toggled component:update:classes",n.componentChanged),n.listenTo(a,"styleManager:update",n.componentChanged),n.listenTo(a,"component:update:classes change:state",n.__handleStateChange),n.listenTo(a,"styleable:change change:device",n.checkSync),n.listenTo(u,"add",n.addNew),n.listenTo(u,"reset",n.renderClasses),n.listenTo(u,"remove",n.tagRemoved),n.listenTo(m.getAll(),m.events.state,(0,k.debounce)(function(){return n.renderStates()},0)),n.delegateEvents(),n}return gc(s,h),s.prototype.template=function(e){var n=e.labelInfo,a=e.labelHead,u=e.iconSync,m=e.iconAdd,O=e.pfx,P=e.ppfx;return ct(jc||(jc=Lc([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),O,O,O,O,a,O,O,O,P,P,P,O,P,P,O,P,O,O,O,O,O,m,O,O,u,O,O,n,O)},s.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},s.prototype.syncStyle=function(){var e,n=this.em,a=this.getTarget(),u=n.Css,m=this.getCommonSelectors({opts:{noDisabled:1}}),O=n.get("state"),P=n.getCurrentMedia(),j=[],A=u.get(m,O,P)||u.add(m,O,P);this.getTargets().forEach(function(nt){var At=u.getIdRule(nt.getId(),{state:O,mediaText:P});e=At.getStyle(),At.setStyle({}),j.push(At)}),e&&A.addStyle(e),n.trigger("component:toggled"),n.trigger("component:sync-style",{component:a,selectors:m,mediaText:P,rule:A,ruleComponents:j,state:O})},s.prototype.tagRemoved=function(e){this.updateStateVis()},s.prototype.addNew=function(e){this.addToClasses(e)},s.prototype.startNewTag=function(){var e,n;(e=this.$addBtn)===null||e===void 0||e.css({display:"none"}),(n=this.$input)===null||n===void 0||n.show().focus()},s.prototype.endNewTag=function(){var e,n;(e=this.$addBtn)===null||e===void 0||e.css({display:""}),(n=this.$input)===null||n===void 0||n.hide().val("")},s.prototype.onInputKeyUp=function(e){var n;e.keyCode===13?(e.preventDefault(),this.addNewTag((n=this.$input)===null||n===void 0?void 0:n.val())):e.keyCode===27&&this.endNewTag()},s.prototype.checkStates=function(){var e=this.em.getState(),n=this.getStates();n&&n.val(e)},s.prototype.componentChanged=function(e){var n=(e===void 0?{}:e).targets;this.updateSelection(n)},s.prototype.updateSelection=function(e){var n=e||this.getTargets(),a=[];return(n=(0,k.isArray)(n)?n:[n])&&n.length&&(a=this.getCommonSelectors({targets:n}),this.checkSync({validSelectors:a})),this.collection.reset(a),this.updateStateVis(n),this.module.__trgCustom(),a},s.prototype.getCommonSelectors=function(e){var n=e===void 0?{}:e,a=n.targets,u=n.opts,m=u===void 0?{}:u,O=a||this.getTargets();return this.module.__getCommonSelectors(O,m)},s.prototype._commonSelectors=function(){for(var e,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return(e=this.module).__common.apply(e,n)},s.prototype.checkSync=function(){var e,n=this,a=n.$btnSyncEl,u=n.config,m=n.collection,O=this.getTarget();if(O&&u.componentFirst&&m.length){var P=O.getStyle();e=!(0,k.isEmpty)(P)}a&&a[e?"show":"hide"]()},s.prototype.getTarget=function(){return this.target.getSelected()},s.prototype.getTargets=function(){return this.target.getSelectedAll()},s.prototype.updateStateVis=function(e){var n=this.em,a=n&&n.getConfig().avoidInlineStyle,u=this.collection.length||a?"":"none";this.getStatesC().css("display",u),this.updateSelector(e)},s.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},s.prototype.updateSelector=function(e){var n=this,a=this.el.querySelector("[data-selected]"),u=[],m=e||this.getTargets();(m=(0,k.isArray)(m)?m:[m]).forEach(function(O){return u.push(n.__getName(O))}),a&&(a.innerHTML=u.join(", ")),this.checkStates()},s.prototype.__getName=function(e){var n,a=this,u=a.pfx,m=a.config,O=a.em,P=m.selectedName,j=m.componentFirst;if((0,k.isString)(e))n=ct(Kf||(Kf=Lc(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),u,e);else{var A=e==null?void 0:e.getSelectors();if(!A)return"";var nt=A.getStyleable(),At=O.get("state"),Bt=e.getId?ct(Ps||(Ps=Lc(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),u,e.getName(),u,e.getId()):"";n=(n=this.collection.getFullString(nt))?ct(Dc||(Dc=Lc(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),u,n):e.get("selectorsAdd")||Bt,n=j&&Bt?Bt:n,n+=At?ct(Ul||(Ul=Lc(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),u,At):"",n=P?P({result:n,state:At,target:e}):n}return n&&'<span class="'.concat(u,'sel">').concat(n,"</span>")},s.prototype.stateChanged=function(e){var n=this.em,a=e.target.value;n.set("state",a)},s.prototype.addNewTag=function(e){var n=e.trim();n&&(this.module.addSelected({label:n}),this.endNewTag())},s.prototype.addToClasses=function(e,n){var a=n,u=this.getClasses(),m=new Ea({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return a?a.appendChild(m):u.append(m),m},s.prototype.renderClasses=function(){var e=this,n=document.createDocumentFragment(),a=this.getClasses();a.empty(),this.collection.each(function(u){return e.addToClasses(u,n)}),a.append(n)},s.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},s.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},s.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},s.prototype.renderStates=function(){var e=this.module,n=this.em,a=n.t("selectorManager.emptyState"),u=e.getStates().map(function(O){var P=n.t("selectorManager.states.".concat(O.id))||O.getLabel()||O.id;return'<option value="'.concat(O.id,'">').concat(P,"</option>")}).join(""),m=this.getStates();m&&m.html('<option value="">'.concat(a,"</option>").concat(u)),this.checkStates()},s.prototype.render=function(){var e=this,n=e.em,a=e.pfx,u=e.ppfx,m=e.config,O=e.$el,P=e.el,j=m.render,A={iconSync:m.iconSync,iconAdd:m.iconAdd,labelHead:n.t("selectorManager.label"),labelInfo:n.t("selectorManager.selected"),ppfx:u,pfx:a,el:P};O.html(this.template(A));var nt=j&&j(A);return nt&&nt!==P&&O.empty().append(nt),this.$input=O.find("[data-input]"),this.$addBtn=O.find("[data-add]"),this.$classes=O.find("#"+a+"tags-c"),this.$btnSyncEl=O.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),O.attr("class","".concat(this.className," ").concat(u,"one-bg ").concat(u,"two-color")),this},s}(N.G7);const qf=Gf;var jc,Kf,Ps,Dc,Ul,ju=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ji=function(){return Ji=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ji.apply(this,arguments)},vc=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Yf=function(h){return(0,k.isString)(h)&&h[0]=="#"},xl=function(h){return(0,k.isString)(h)&&h[0]=="."},Ic="selector",$s="".concat(Ic,":"),tu="".concat($s,"add"),zl="".concat($s,"update"),mc="".concat($s,"remove"),Zf="".concat(mc,":before"),Cl="".concat($s,"custom"),Gs="".concat($s,"state"),Sl={all:Ic,update:zl,add:tu,remove:mc,removeBefore:Zf,state:Gs,custom:Cl},eu=function(h){function s(e){var n=h.call(this,e,"SelectorManager",new xi([]),Sl,lf,{skipListen:!0})||this;n.Selector=bi,n.Selectors=xi,n.storageKey="",(0,k.bindAll)(n,"__updateSelectedByComponents");var a=n.config,u=a.pStylePrefix;return u&&(a.stylePrefix=u+a.stylePrefix),n.all=new xi(a.selectors),n.selected=new xi([],{em:e,config:a}),n.states=new N.FE(a.states.map(function(m){return new Es(m)}),{model:Es}),n.model=new N.Hn({cFirst:a.componentFirst,_undo:!0}),n.__update=(0,k.debounce)(function(){return n.__trgCustom()},0),n.__initListen({collections:[n.states,n.selected],propagate:[{entity:n.states,event:n.events.state}]}),e.on("change:state",function(m,O){return e.trigger(Gs,O)}),n.model.on("change:cFirst",function(m,O){return e.trigger("selector:type",O)}),e.on("component:toggled component:update:classes",n.__updateSelectedByComponents),n.model.listenTo(e,"component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target",function(){return n.__update()}),n}return ju(s,h),s.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},s.prototype.getAll=function(e){return e===void 0&&(e={}),this.all?e.array?vc([],this.all.models,!0):this.all:[]},s.prototype.__customData=function(e){return e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},s.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},s.prototype.select=function(e,n){n===void 0&&(n={});var a=Array.isArray(e)?e:[e],u=this.em.Styles.select(a,n);this.selected.reset(this.__getCommonSelectors(u));var m=this.selectorTags,O=u.filter(function(P){return P}).map(function(P){return(0,B.isComponent)(P)||(0,B.isRule)(P)&&!P.get("selectorsAdd")?P:P.getSelectorsString()});return m&&m.componentChanged({targets:O}),this},s.prototype.addSelector=function(e,n,a){n===void 0&&(n={}),a===void 0&&(a={});var u=Ji({},n);(0,k.isObject)(e)?u=e:u.name=e,Yf(u.name)?(u.name=u.name.substr(1),u.type=bi.TYPE_ID):xl(u.name)&&(u.name=u.name.substr(1)),u.label&&!u.name&&(u.name=this.escapeName(u.label));var m=u.name,O=this.getConfig(),P=this.all,j=this.em,A=m?this.get(m,u.type):P.where(u)[0];if(!A){var nt=u instanceof bi?u:new bi(u,Ji(Ji({},a),{config:O,em:j}));return P.add(nt,a)}return A},s.prototype.getSelector=function(e,n){return n===void 0&&(n=bi.TYPE_CLASS),Yf(e)?(e=e.substr(1),n=bi.TYPE_ID):xl(e)&&(e=e.substr(1)),this.all.where({name:e,type:n})[0]},s.prototype.add=function(e,n){var a=this;n===void 0&&(n={});var u=(0,k.isString)(e)?{}:n;return(0,k.isArray)(e)?e.map(function(m){return a.addSelector(m,n,u)}):this.addSelector(e,n,u)},s.prototype.addClass=function(e){var n=this,a=[];return(0,k.isString)(e)&&(e=e.trim().split(" ")),e.forEach(function(u){return a.push(n.addSelector(u))}),a},s.prototype.get=function(e,n){var a=this;if((0,k.isArray)(e)){var u=[];return e.map(function(m){return a.getSelector(m)}).filter(Boolean).forEach(function(m){return u.indexOf(m)<0&&u.push(m)}),u}return this.getSelector(e,n)},s.prototype.remove=function(e,n){return this.__remove(e,n)},s.prototype.rename=function(e,n,a){var u=this.escapeName(n);return this.get(u)||e.set({name:u,label:n},a)},s.prototype.setState=function(e){return this.em.setState(e),this},s.prototype.getState=function(){return this.em.getState()},s.prototype.getStates=function(){return vc([],this.states.models,!0)},s.prototype.setStates=function(e,n){return this.states.reset(e.map(function(a){return new Es(a)}),n)},s.prototype.getSelected=function(){return this.__getCommon()},s.prototype.getSelectedAll=function(){return vc([],this.selected.models,!0)},s.prototype.addSelected=function(e){var n=this.add(e);this.em.getSelectedAll().forEach(function(a){a.getSelectors().add(n)})},s.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(n){!e.get("protected")&&n&&n.getSelectors().remove(e)})},s.prototype.duplicateSelected=function(e,n){var a=this;n===void 0&&(n={});var u=this.em,m=this.getSelected();if(!(m.indexOf(e)<0)){var O=this.getState(),P=u.getCurrentMedia(),j=u.Css.get(m,O,P),A=j==null?void 0:j.getStyle();u.getSelectedAll().forEach(function(nt){var At=nt.getSelectors();if(At.includes(e)){var Bt=n.suffix||" copy",qt=e.getLabel(),be=a.addSelector("".concat(qt).concat(Bt)),Ee=At.indexOf(e);At.remove(e),At.add(be,{at:Ee})}}),A&&u.Css.add(this.getSelected(),O,P).setStyle(A)}},s.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},s.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},s.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},s.prototype.escapeName=function(e){var n=this.getConfig().escapeName;return n?n(e):bi.escapeName(e)},s.prototype.render=function(e){var n=this.selectorTags,a=this.getConfig(),u=n==null?void 0:n.el;return this.selected.reset(e),this.selectorTags=new qf({el:u,collection:this.selected,module:this,config:a}),this.selectorTags.render().el},s.prototype.destroy=function(){var e=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},s.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},s.prototype.__getCommonSelectors=function(e,n){n===void 0&&(n={});var a=e.map(function(u){return u.getSelectors&&u.getSelectors().getValid(n)}).filter(Boolean);return this.__common.apply(this,a)},s.prototype.__common=function(){for(var e=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return n.length?n.length===1?n[0]:n.length===2?n[0].filter(function(u){return n[1].indexOf(u)>=0}):n.slice(1).reduce(function(u,m){return e.__common(u,m)},n[0]):[]},s.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},s}(Q);const Op=eu,Du={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var cf={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},Iu=(0,k.keys)(cf),Xf=["5","6","11","15"],Pa=["font-face","page","counter-style","viewport"],ru=function(h){h===void 0&&(h="");for(var s=[],e=[],n=h.split(","),a=0,u=n.length;a<u;a++){var m=n[a].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(m)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(m)){var O=m.split(".").filter(Boolean);e.push(O)}else s.push(m)}return{result:e,add:s}},Nu=function(h){for(var s=h.style,e={},n=0,a=s.length;n<a;n++){var u=s[n],m=s.getPropertyValue(u),O=s.getPropertyPriority(u);e[u]="".concat(m).concat(O?" !".concat(O):"")}return e},Nc=function(h){return(h.conditionText||h.media&&h.media.mediaText||h.name||h.selectorText||"").trim()},uf=function(h,s,e){s===void 0&&(s={}),e===void 0&&(e={});var n={},a=h.length,u=h[a-1],m=u?u.split(/:(.+)/):[],O=m[1],P=e.atRule,j=e.selectorsAdd,A=e.mediaText;return Pa.indexOf(P)>=0&&(n.singleAtRule=!0),P&&(n.atRuleType=P),j&&(n.selectorsAdd=j),A&&(n.mediaText=A),O&&(h[a-1]=m[0],n.state=O,m.splice(m.length-1,1)),n.selectors=h,n.style=s,n},Vc=function(h){for(var s=[],e=h.cssRules||[],n=0,a=e.length;n<a;n++){var u=e[n],m=u.type.toString(),O=!1,P="",j="",A=u.selectorText||u.keyText,nt=Xf.indexOf(m)>=0;if(nt)O=!0,P=cf[m],j=Nc(u);else if(Iu.indexOf(m)>=0){var At=Vc(u);j=Nc(u);for(var Bt=0,qt=At.length;Bt<qt;Bt++){var be=At[Bt];j&&(be.mediaText=j),be.atRuleType=cf[m]}s=s.concat(At)}if(A||nt){for(var Ee=Nu(u),Ce=ru(A),rr=Ce.add,yr=Ce.result,Jr=void 0,Qr=0,Sn=yr.length;Qr<Sn;Qr++){var Pn=uf(yr[Qr],Ee,{atRule:cf[m]});s.push(Pn),Jr=Pn}if(rr.length){var xo=rr.join(", ");Jr?Jr.selectorsAdd=xo:(Pn={selectors:[],selectorsAdd:xo,style:Ee},O&&(Pn.singleAtRule=O),P&&(Pn.atRuleType=P),j&&(Pn.mediaText=j),s.push(Pn))}}}return s};const nu=function(h,s){return s===void 0&&(s={}),{parse:function(e){var n=this,a=[],u=s.parserCss,m=h==null?void 0:h.Editor,O=u?u(e,m):function(P){var j=document.createElement("style");j.innerHTML=P,document.head.appendChild(j);var A=j.sheet;return document.head.removeChild(j),Vc(A)}(e);return O.forEach(function(P){return a=a.concat(n.checkNode(P))}),h==null||h.trigger("parse:css",{input:e,output:a}),a},checkNode:function(e){var n=e.selectors,a=e.style,u=[e];if((0,k.isString)(n)){var m=[],O=e,P=ru(n),j=P.result,A=P.add.join(", "),nt={atRule:O.atRule,mediaText:O.params};j.length?j.forEach(function(At){m.push(uf(At,a,nt))}):m.push(uf([],a,nt)),A&&(m[m.length-1].selectorsAdd=A),u=m}return u}}};var Tp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jf=function(h){function s(e){var n=h.call(this,e,"Parser",Du)||this,a=n.config;return n.parserCss=nu(e,a),n.parserHtml=Vo(e,a),n}return Tp(s,h),s.prototype.parseHtml=function(e,n){n===void 0&&(n={});var a=this.em,u=this.parserHtml;return u.compTypes=a.Components.getTypes()||{},u.parse(e,this.parserCss,n)},s.prototype.parseCss=function(e){return this.parserCss.parse(e)},s.prototype.destroy=function(){},s}(xt);const Ep=Jf,Pp={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(h){return h},onLoad:function(h){return h},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(h){return h},onLoad:function(h){return h}}}};var qs=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},Fc=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}};const Wl=function(){function h(){}return h.prototype.store=function(s,e){return e===void 0&&(e={}),qs(this,void 0,void 0,function(){return Fc(this,function(n){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(s)),[2,s]})})},h.prototype.load=function(s){return s===void 0&&(s={}),qs(this,void 0,void 0,function(){var e;return Fc(this,function(n){return e={},this.hasLocal(s,!0)&&(e=JSON.parse(localStorage.getItem(s.key)||"{}")),[2,e]})})},h.prototype.hasLocal=function(s,e){if(s===void 0&&(s={}),s.checkLocal&&(!(0,B.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},h}();function ks(h){return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ks(h)}function As(h,s){this.name="AggregateError",this.errors=h,this.message=s||""}As.prototype=Error.prototype;var ou=setTimeout;function Ol(h){return!!(h&&h.length!==void 0)}function $l(){}function hi(h){if(!(this instanceof hi))throw new TypeError("Promises must be constructed via new");if(typeof h!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Rc(h,this)}function Qf(h,s){for(;h._state===3;)h=h._value;h._state!==0?(h._handled=!0,hi._immediateFn(function(){var e=h._state===1?s.onFulfilled:s.onRejected;if(e!==null){var n;try{n=e(h._value)}catch(a){return void Tl(s.promise,a)}Uo(s.promise,n)}else(h._state===1?Uo:Tl)(s.promise,h._value)})):h._deferreds.push(s)}function Uo(h,s){try{if(s===h)throw new TypeError("A promise cannot be resolved with itself.");if(s&&(ks(s)==="object"||typeof s=="function")){var e=s.then;if(s instanceof hi)return h._state=3,h._value=s,void fs(h);if(typeof e=="function")return void Rc((n=e,a=s,function(){n.apply(a,arguments)}),h)}h._state=1,h._value=s,fs(h)}catch(u){Tl(h,u)}var n,a}function Tl(h,s){h._state=2,h._value=s,fs(h)}function fs(h){h._state===2&&h._deferreds.length===0&&hi._immediateFn(function(){h._handled||hi._unhandledRejectionFn(h._value)});for(var s=0,e=h._deferreds.length;s<e;s++)Qf(h,h._deferreds[s]);h._deferreds=null}function Ia(h,s,e){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof s=="function"?s:null,this.promise=e}function Rc(h,s){var e=!1;try{h(function(n){e||(e=!0,Uo(s,n))},function(n){e||(e=!0,Tl(s,n))})}catch(n){if(e)return;e=!0,Tl(s,n)}}hi.prototype.catch=function(h){return this.then(null,h)},hi.prototype.then=function(h,s){var e=new this.constructor($l);return Qf(this,new Ia(h,s,e)),e},hi.prototype.finally=function(h){var s=this.constructor;return this.then(function(e){return s.resolve(h()).then(function(){return e})},function(e){return s.resolve(h()).then(function(){return s.reject(e)})})},hi.all=function(h){return new hi(function(s,e){if(!Ol(h))return e(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(h);if(n.length===0)return s([]);var a=n.length;function u(O,P){try{if(P&&(ks(P)==="object"||typeof P=="function")){var j=P.then;if(typeof j=="function")return void j.call(P,function(A){u(O,A)},e)}n[O]=P,--a==0&&s(n)}catch(A){e(A)}}for(var m=0;m<n.length;m++)u(m,n[m])})},hi.any=function(h){var s=this;return new s(function(e,n){if(!h||h.length===void 0)return n(new TypeError("Promise.any accepts an array"));var a=Array.prototype.slice.call(h);if(a.length===0)return n();for(var u=[],m=0;m<a.length;m++)try{s.resolve(a[m]).then(e).catch(function(O){u.push(O),u.length===a.length&&n(new As(u,"All promises were rejected"))})}catch(O){n(O)}})},hi.allSettled=function(h){return new this(function(s,e){if(!h||h.length===void 0)return e(new TypeError(ks(h)+" "+h+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(h);if(n.length===0)return s([]);var a=n.length;function u(O,P){if(P&&(ks(P)==="object"||typeof P=="function")){var j=P.then;if(typeof j=="function")return void j.call(P,function(A){u(O,A)},function(A){n[O]={status:"rejected",reason:A},--a==0&&s(n)})}n[O]={status:"fulfilled",value:P},--a==0&&s(n)}for(var m=0;m<n.length;m++)u(m,n[m])})},hi.resolve=function(h){return h&&ks(h)==="object"&&h.constructor===hi?h:new hi(function(s){s(h)})},hi.reject=function(h){return new hi(function(s,e){e(h)})},hi.race=function(h){return new hi(function(s,e){if(!Ol(h))return e(new TypeError("Promise.race accepts an array"));for(var n=0,a=h.length;n<a;n++)hi.resolve(h[n]).then(s,e)})},hi._immediateFn=typeof setImmediate=="function"&&function(h){setImmediate(h)}||function(h){ou(h,0)},hi._unhandledRejectionFn=function(h){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",h)};const Hc=hi;(0,B.hasWin)()&&(window.Promise=window.Promise||Hc);const ff=typeof fetch=="function"?fetch.bind():function(h,s){return new Hc(function(e,n){var a=new XMLHttpRequest;for(var u in a.open(s.method||"get",h),a.withCredentials=s.credentials=="include",s.headers||{})a.setRequestHeader(u,s.headers[u]);a.onload=function(m){return e({status:a.status,statusText:a.statusText,text:function(){return Hc.resolve(a.responseText)}})},a.onerror=n,a.upload&&s.onProgress&&(a.upload.onprogress=s.onProgress),s.body?a.send(s.body):a.send()})};var Gl=function(){return Gl=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Gl.apply(this,arguments)},pf=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},df=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}};const tp=function(){function h(){}return h.prototype.store=function(s,e){return e===void 0&&(e={}),pf(this,void 0,void 0,function(){return df(this,function(n){switch(n.label){case 0:return[4,this.request(e.urlStore,this.__props(e,s),e)];case 1:return[2,n.sent()]}})})},h.prototype.load=function(s){return s===void 0&&(s={}),pf(this,void 0,void 0,function(){return df(this,function(e){switch(e.label){case 0:return[4,this.request(s.urlLoad,this.__props(s),s)];case 1:return[2,e.sent()]}})})},h.prototype.request=function(s,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),ff(s,e).then(function(a){var u=a.text();return(a.status/200|0)==1?u:u.then(Promise.reject)}).then(function(a){var u=a&&(0,k.isString)(a);return n.contentTypeJson&&u?JSON.parse(a):a})},h.prototype.__props=function(s,e){s===void 0&&(s={});var n,a=s.contentTypeJson,u=s.headers||{},m=s.fetchOptions||{},O="X-Requested-With",P="Content-Type";if((0,k.isUndefined)(u[O])&&(u[O]="XMLHttpRequest"),(0,k.isUndefined)(u[P])&&a&&(u[P]="application/json; charset=utf-8"),e)if(a)n=JSON.stringify(e);else for(var j in n=new FormData,e)n.append(j,e[j]);var A={method:n?"POST":"GET",credentials:s.credentials,headers:u,body:n};return Gl(Gl({},A),(0,k.isFunction)(m)?m(A):m)},h}();var El=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bc=function(){return Bc=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Bc.apply(this,arguments)},Po=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},ql=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}},Kl="storage:start",Uc="storage:after",ep="storage:end",Qo="storage:error",Vu="local",Yl="remote",f=function(h){function s(e){var n=h.call(this,e,"StorageManager",Pp)||this;n.storages={};var a=n.config;return a._disable&&(a.type=void 0),n.storages={},n.add(Vu,new Wl),n.add(Yl,new tp),n.setCurrent(a.type),n}return El(s,h),s.prototype.isAutosave=function(){return!!this.config.autosave},s.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},s.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},s.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},s.prototype.add=function(e,n){return this.storages[e]=n,this},s.prototype.get=function(e){return this.storages[e]},s.prototype.getStorages=function(){return this.storages},s.prototype.getCurrent=function(){return this.config.currentStorage},s.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},s.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},s.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},s.prototype.store=function(e,n){return n===void 0&&(n={}),Po(this,void 0,void 0,function(){var a,u,m,O,P;return ql(this,function(j){switch(j.label){case 0:a=this.getCurrentStorage(),u=Bc(Bc({},this.getCurrentOptions()),n),m=this.getRecoveryStorage(),O=this.getCurrentOptions(Vu),j.label=1;case 1:return j.trys.push([1,5,,9]),[4,this.__exec(a,u,e)];case 2:return j.sent(),m?[4,this.__exec(m,O,{})]:[3,4];case 3:j.sent(),j.label=4;case 4:return[3,9];case 5:return P=j.sent(),m?[4,this.__exec(m,O,e)]:[3,7];case 6:return j.sent(),[3,8];case 7:throw P;case 8:return[3,9];case 9:return[2,e]}})})},s.prototype.load=function(e){return e===void 0&&(e={}),Po(this,void 0,void 0,function(){var n,a,u,m,O;return ql(this,function(P){switch(P.label){case 0:return n=this.getCurrentStorage(),a=Bc(Bc({},this.getCurrentOptions()),e),(u=this.getRecoveryStorage())?[4,this.__exec(u,this.getCurrentOptions(Vu))]:[3,5];case 1:if(O=P.sent(),(0,k.isEmpty)(O))return[3,5];P.label=2;case 2:return P.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return P.sent(),m=O,[3,5];case 4:return P.sent(),[3,5];case 5:return m?[3,7]:[4,this.__exec(n,a)];case 6:m=P.sent(),P.label=7;case 7:return[2,m||{}]}})})},s.prototype.__askRecovery=function(){var e=this.em,n=this.getRecovery();return new Promise(function(a,u){(0,k.isFunction)(n)?n(a,u,e==null?void 0:e.getEditor()):confirm(e==null?void 0:e.t("storageManager.recover"))?a(null):u()})},s.prototype.getRecovery=function(){return this.config.recovery},s.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===Yl&&this.get(Vu)},s.prototype.__exec=function(e,n,a){var u;return Po(this,void 0,void 0,function(){var m,O,P,j,A,nt,At,Bt,qt,be,Ee,Ce,rr;return ql(this,function(yr){switch(yr.label){case 0:if(m=a?"store":"load",O=this.getConfig(),P=O.onStore,j=O.onLoad,this.onStart(m,a),!e)return[2,a||{}];yr.label=1;case 1:return yr.trys.push([1,14,,15]),nt=(u=this.em)===null||u===void 0?void 0:u.getEditor(),At=void 0,a?(qt=P)?[4,P(a,nt)]:[3,3]:[3,7];case 2:qt=yr.sent(),yr.label=3;case 3:return Bt=qt||a,(be=n.onStore)?[4,n.onStore(Bt,nt)]:[3,5];case 4:be=yr.sent(),yr.label=5;case 5:return Bt=be||Bt,[4,e.store(Bt,n)];case 6:return At=yr.sent(),A=a,[3,13];case 7:return[4,e.load(n)];case 8:return At=yr.sent(),A=this.__clearKeys(At),(Ee=n.onLoad)?[4,n.onLoad(A,nt)]:[3,10];case 9:Ee=yr.sent(),yr.label=10;case 10:return A=Ee||A,(Ce=j)?[4,j(A,nt)]:[3,12];case 11:Ce=yr.sent(),yr.label=12;case 12:A=Ce||A,yr.label=13;case 13:return this.onAfter(m,A,At),this.onEnd(m,A),[3,15];case 14:throw rr=yr.sent(),this.onError(m,rr),rr;case 15:return[2,A]}})})},s.prototype.__clearKeys=function(e){e===void 0&&(e={});var n=this.getConfig(),a=new RegExp("^".concat(n.id)),u={};for(var m in e)u[m.replace(a,"")]=e[m];return u},s.prototype.getCurrentOptions=function(e){var n=this.getConfig(),a=e||this.getCurrent();return n.options[a]||{}},s.prototype.onStart=function(e,n){var a=this.em;a&&(a.trigger(Kl),e&&a.trigger("".concat(Kl,":").concat(e),n))},s.prototype.onAfter=function(e,n,a){var u=this.em;u&&(u.trigger(Uc),u.trigger("".concat(Uc,":").concat(e),n,a),u.trigger("storage:".concat(e),n,a))},s.prototype.onEnd=function(e,n){var a=this.em;a&&(a.trigger(ep),e&&a.trigger("".concat(ep,":").concat(e),n))},s.prototype.onError=function(e,n){var a=this.em;a&&(a.trigger(Qo,n),e&&a.trigger("".concat(Qo,":").concat(e),n),this.onEnd(e,n))},s.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},s.prototype.destroy=function(){this.storages={}},s}(xt);const g=f,S={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};var _=K(330),T=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),D=function(){return D=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},D.apply(this,arguments)},Y=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.events={},n.appendInput=!0;var a=e.config,u=a===void 0?{}:a,m=n,O=m.model,P=m.eventCapture,j=O.target,A=O.attributes.type;n.config=u,n.em=u.em,n.ppfx=u.pStylePrefix||"",n.pfx=n.ppfx+u.stylePrefix||"",n.target=j;var nt=n.ppfx;return n.clsField="".concat(nt,"field ").concat(nt,"field-").concat(A),[["change:value",n.onValueChange],["remove",n.removeView]].forEach(function(At){var Bt=At[0],qt=At[1];O.off(Bt,qt),n.listenTo(O,Bt,qt)}),O.view=n,n.listenTo(O,"change:label",n.render),n.listenTo(O,"change:placeholder",n.rerender),n.events={},P.forEach(function(At){return n.events[At]="onChange"}),n.delegateEvents(),n.init(),n}return T(s,h),s.prototype.attributes=function(){return this.model.get("attributes")||{}},s.prototype.templateLabel=function(e){var n=this.ppfx,a=this.getLabel();return'<div class="'.concat(n,'label" title="').concat(a,'">').concat(a,"</div>")},s.prototype.templateInput=function(e){var n=this.clsField;return'<div class="'.concat(n,'" data-input></div>')},s.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},s.prototype.removeView=function(){this.remove(),this.removed()},s.prototype.init=function(){},s.prototype.removed=function(){},s.prototype.onRender=function(e){},s.prototype.onUpdate=function(e){},s.prototype.onEvent=function(e){},s.prototype.onChange=function(e){var n=this.getInputElem();n&&!(0,k.isUndefined)(n.value)&&this.model.set("value",n.value),this.onEvent(D(D({},this.getClbOpts()),{event:e}))},s.prototype.getValueForTarget=function(){return this.model.get("value")},s.prototype.setInputValue=function(e){var n=this.getInputElem();n&&(n.value=e)},s.prototype.onValueChange=function(e,n,a){if(a===void 0&&(a={}),a.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var u=this.getValueForTarget();e.setTargetValue(u,a)}},s.prototype.renderLabel=function(){var e=this.$el,n=this.target,a=this.getLabel(),u=this.templateLabel(n);this.createLabel&&(u=this.createLabel({label:a,component:n,trait:this})||""),e.find("[data-label]").append(u)},s.prototype.getLabel=function(){var e=this.em,n=this.model.attributes,a=n.label,u=n.name;return e.t("traitManager.traits.labels.".concat(u))||(0,B.capitalize)(a||u).replace(/-/g," ")},s.prototype.getComponent=function(){return this.target},s.prototype.getInputEl=function(){if(!this.$input){var e=this.em,n=this.model,a=n,u=n.attributes.name,m=a.get("placeholder")||a.get("default")||"",O=a.get("type")||"text",P=a.get("min"),j=a.get("max"),A=this.getModelValue(),nt=(0,I.default)('<input type="'.concat(O,'">')),At=e.t("traitManager.traits.attributes.".concat(u))||{};nt.attr(D({placeholder:m},At)),(0,k.isUndefined)(A)||(a.set({value:A},{silent:!0}),nt.prop("value",A)),P&&nt.prop("min",P),j&&nt.prop("max",j),this.$input=nt}return this.$input.get(0)},s.prototype.getInputElem=function(){var e=this.input,n=this.$input;return e||n&&n.get&&n.get(0)||this.getElInput()},s.prototype.getModelValue=function(){var e,n=this.model,a=this.target,u=n.getName();if(n.get("changeProp"))e=a.get(u);else{var m=a.get("attributes");e=n.get("value")||m[u]}return(0,k.isUndefined)(e)?"":e},s.prototype.getElInput=function(){return this.elInput},s.prototype.renderField=function(){var e=this,n=e.$el,a=e.appendInput,u=e.model,m=n.find("[data-input]"),O=m[m.length-1],P=u.el;P||(P=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,k.isString)(P)?(O.innerHTML=P,this.elInput=O.firstChild):(a?O.appendChild(P):O.insertBefore(P,O.firstChild),this.elInput=P),u.el=this.elInput},s.prototype.hasLabel=function(){var e=this.model.attributes.label;return!this.noLabel&&e!==!1},s.prototype.rerender=function(){delete this.model.el,this.render()},s.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},s.prototype.render=function(){var e=this,n=e.$el,a=e.pfx,u=e.ppfx,m=e.model.attributes,O=m.type,P=m.id,j=this.hasLabel&&this.hasLabel(),A="".concat(a,"trait");delete this.$input;var nt='<div class="'.concat(A," ").concat(A,"--").concat(O,`">
      `).concat(j?'<div class="'.concat(u,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(u,"field-wrp ").concat(u,"field-wrp--").concat(O,`" data-input>
        `).concat(this.templateInput?(0,k.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return n.empty().append(nt),j&&this.renderLabel(),this.renderField(),this.el.className="".concat(A,"__wrp ").concat(A,"__wrp-").concat(P),this.postUpdate(),this.onRender(this.getClbOpts()),this},s}(N.G7);const Z=Y;Y.prototype.eventCapture=["change"];var bt=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ht=function(h){function s(e,n){e===void 0&&(e={});var a=h.call(this,e)||this;a.reuseView=!0,a.itemsView=n;var u=e.config||{},m=e.editor;return a.config=u,a.em=m,a.ppfx=u.pStylePrefix||"",a.pfx=a.ppfx+u.stylePrefix||"",a.className="".concat(a.pfx,"traits"),a.listenTo(m,"component:toggled",a.updatedCollection),a.updatedCollection(),a}return bt(s,h),s.prototype.updatedCollection=function(){var e=this,n=e.ppfx,a=e.className,u=e.em.getSelected();this.el.className="".concat(a," ").concat(n,"one-bg ").concat(n,"two-color"),this.collection=u?u.traits:[],this.render()},s}(_.Z);const Qt=ht;ht.prototype.itemView=Z;var re=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Se=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;return n.listenTo(n.model,"change:options",n.rerender),n}return re(s,h),s.prototype.templateInput=function(){var e=this.ppfx,n=this.clsField;return'<div class="'.concat(n,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},s.prototype.getInputEl=function(){if(!this.$input){var e=this.model,n=this.em,a=e.get("name"),u=e.get("options")||[],m=[],O="<select>";u.forEach(function(A){var nt,At,Bt,qt="";(0,k.isString)(A)?(nt=A,At=A):(nt=A.name||A.label||A.value,At="".concat((0,k.isUndefined)(A.value)?A.id:A.value).replace(/"/g,"&quot;"),qt+=(Bt=A.style?A.style.replace(/"/g,"&quot;"):"")?' style="'.concat(Bt,'"'):"");var be=n.t("traitManager.traits.options.".concat(a,".").concat(At))||nt;O+='<option value="'.concat(At,'"').concat(qt,">").concat(be,"</option>"),m.push(At)}),O+="</select>",this.$input=(0,I.default)(O);var P=e.getTargetValue(),j=m.indexOf(P)>=0?P:e.get("default");!(0,k.isUndefined)(j)&&this.$input.val(j)}return this.$input.get(0)},s}(Z);var ge=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const $e=function(h){function s(){var e=h!==null&&h.apply(this,arguments)||this;return e.appendInput=!1,e}return ge(s,h),s.prototype.templateInput=function(){var e=this.ppfx,n=this.clsField;return'<label class="'.concat(n,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},s.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},s.prototype.setInputValue=function(e){var n=this.getInputElem();n&&(n.checked=!!e)},s.prototype.getInputEl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=!this.$input,u=Z.prototype.getInputEl.apply(this,e);if(a){var m=void 0,O=void 0,P=this.model,j=this.target,A=P.attributes.valueFalse,nt=P.getName();P.get("changeProp")?O=m=j.get(nt):m=!(!(O=j.get("attributes")[nt])&&O!==""),(0,k.isUndefined)(A)||O!==A||(m=!1),u.checked=m}return u},s}(Z);var Ge=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),He=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this,a=e.ppfx||"";return n.opts=e,n.ppfx=a,n.em=e.target||{},!e.onChange&&n.listenTo(n.model,"change:value",n.handleModelChange),n}return Ge(s,h),s.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},s.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},s.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},s.prototype.elementUpdated=function(){this.model.trigger("el:change")},s.prototype.setValue=function(e,n){var a=this.model,u=e||a.get("defaults"),m=this.getInputEl();m&&(m.value=u)},s.prototype.handleModelChange=function(e,n,a){this.setValue(n,a)},s.prototype.handleChange=function(e){e.stopPropagation();var n=this.getInputEl().value;this.__onInputChange(n),this.elementUpdated()},s.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},s.prototype.getInputEl=function(){if(!this.inputEl){var e=this.model,n=this.opts.type||"text",a=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,I.default)('<input type="'.concat(n,'" placeholder="').concat(a,'">'))}return this.inputEl.get(0)},s.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},s}(N.G7);const Ze=He;He.prototype.events={change:"handleChange"};var vr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),br=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;return(0,k.bindAll)(n,"moveIncrement","upIncrement"),n.doc=document,n.listenTo(n.model,"change:unit",n.handleModelChange),n}return vr(s,h),s.prototype.template=function(){var e=this.ppfx;return`
      <span class="`.concat(e,`input-holder"></span>
      <span class="`).concat(e,`field-units"></span>
      <div class="`).concat(e,`field-arrows" data-arrows>
        <div class="`).concat(e,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(e,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},s.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},s.prototype.setValue=function(e,n){var a=n||{},u=this.validateInputValue(e,{deepCheck:1}),m={value:u.value,unit:""};(u.unit||u.force)&&(m.unit=u.unit),this.model.set(m,a),a.silent&&this.handleModelChange()},s.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},s.prototype.handleUnitChange=function(e){e.stopPropagation();var n=this.getUnitEl().value;this.model.set("unit",n),this.elementUpdated()},s.prototype.handleKeyDown=function(e){e.key==="ArrowUp"&&(e.preventDefault(),this.upArrowClick()),e.key==="ArrowDown"&&(e.preventDefault(),this.downArrowClick())},s.prototype.elementUpdated=function(){this.model.trigger("el:change")},s.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var n=this.getUnitEl();n&&(n.value=e.get("unit")||"")},s.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,n=e.get("units")||[];if(n.length){var a=['<option value="" disabled hidden>-</option>'];n.forEach(function(m){var O=m==e.get("unit")?"selected":"";a.push("<option ".concat(O,">").concat(m,"</option>"))});var u=document.createElement("div");u.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(a.join(""),"</select>"),this.unitEl=u.firstChild}}return this.unitEl},s.prototype.upArrowClick=function(){var e=this.model,n=e.get("step"),a=parseFloat(e.get("value"));this.setValue(this.normalizeValue(a+n)),this.elementUpdated()},s.prototype.downArrowClick=function(){var e=this.model,n=e.get("step"),a=parseFloat(e.get("value"));this.setValue(this.normalizeValue(a-n)),this.elementUpdated()},s.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var n=this.model.get("value")||0;n=this.normalizeValue(n),this.current={y:e.pageY,val:n},(0,B.on)(this.doc,"mousemove",this.moveIncrement),(0,B.on)(this.doc,"mouseup",this.upIncrement)},s.prototype.moveIncrement=function(e){this.moved=!0;var n=this.model,a=n.get("step"),u=this.current,m=this.normalizeValue(u.val+(u.y-e.pageY)*a),O=this.validateInputValue(m),P=O.value,j=O.unit;return this.prValue=P,n.set({value:P,unit:j},{avoidStore:1}),!1},s.prototype.upIncrement=function(){var e=this.model,n=e.get("step");if((0,B.off)(this.doc,"mouseup",this.upIncrement),(0,B.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var a=this.prValue-n;e.set("value",a,{avoidStore:1}).set("value",a+n),this.elementUpdated()}},s.prototype.normalizeValue=function(e,n){n===void 0&&(n=0);var a=this.model.get("step"),u=0;if(isNaN(e))return n;if(e=parseFloat(e),Math.floor(e)!==e){var m=a.toString().split(".")[1];u=m?m.length:0}return u?parseFloat(e.toFixed(u)):e},s.prototype.validateInputValue=function(e,n){n===void 0&&(n={});var a=0,u=n||{},m=this.model,O="",P=(0,k.isUndefined)(e)?O:e,j=n.units||m.get("units")||[],A=m.get("unit")||j.length&&j[0]||"",nt=(0,k.isUndefined)(n.max)?m.get("max"):n.max,At=(0,k.isUndefined)(n.min)?m.get("min"):n.min,Bt=!!m.get("limitlessMax"),qt=!!m.get("limitlessMin");if(u.deepCheck){var be=m.get("fixedValues")||[];if(P===""&&(A=""),P){var Ee=new RegExp("^"+be.join("|"),"g");if(be.length&&Ee.test(P))P=P.match(Ee)[0],A="",a=1;else{var Ce=P+"";P+="",P=parseFloat(P.replace(",",".")),P=isNaN(P)?O:P;var rr=Ce.replace(P,"");(0,k.indexOf)(j,rr)>=0&&(A=rr)}}}return Bt||(0,k.isUndefined)(nt)||nt===""||(P=P>nt?nt:P),qt||(0,k.isUndefined)(At)||At===""||(P=P<At?At:P),{force:a,value:P,unit:A}},s.prototype.render=function(){Ze.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},s}(Ze);const Pr=br;br.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Sr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Tr=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Sr(s,h),s.prototype.getValueForTarget=function(){var e=this.model,n=e.attributes,a=n.value,u=n.unit;return(0,k.isUndefined)(a)||a===""?e.get("default"):a+u},s.prototype.getInputEl=function(){if(!this.input){var e=this.ppfx,n=this.model,a=this.getModelValue(),u=new Pr({contClass:"".concat(e,"field-int"),type:"number",model:n,ppfx:e});u.render(),this.$input=u.inputEl,this.$unit=u.unitEl,n.set("value",a,{fromTarget:!0}),this.$input.val(a),this.input=u.el}return this.input},s}(Z);var hn=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ln=function(){return ln=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ln.apply(this,arguments)};I.default&&function(h,s){if((0,B.hasWin)()){var e={beforeShow:va,move:va,change:va,show:va,hide:va,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],a=!!/msie/i.exec(window.navigator.userAgent),u=function(){function De(nr,xr){return!!~(""+nr).indexOf(xr)}var Qe=document.createElement("div").style;return Qe.cssText="background-color:rgba(0,0,0,.5)",De(Qe.backgroundColor,"rgba")||De(Qe.backgroundColor,"hsla")}(),m=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),O=function(){var De="";if(a)for(var Qe=1;Qe<=6;Qe++)De+="<div class='sp-"+Qe+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",De,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),P="spectrum.id";h.fn.spectrum=function(De,Qe){if(typeof De=="string"){var nr=this,xr=Array.prototype.slice.call(arguments,1);return this.each(function(){var on=n[h(this).data(P)];if(on){var _r=on[De];if(!_r)throw new Error("Spectrum: no such method: '"+De+"'");De=="get"?nr=on.get():De=="container"?nr=on.container:De=="option"?nr=on.option.apply(on,xr):De=="destroy"?(on.destroy(),h(this).removeData(P)):_r.apply(on,xr)}}),nr}return this.spectrum("destroy").each(function(){var on=ii(this,h.extend({},De,h(this).data()));h(this).data(P,on.id)})},h.fn.spectrum.load=!0,h.fn.spectrum.loadOpts={},h.fn.spectrum.draggable=Ll,h.fn.spectrum.defaults=e,h.fn.spectrum.inputTypeColorSupport=function De(){if(De._cachedResult===void 0){var Qe=h("<input type='color'/>")[0];De._cachedResult=Qe.type==="color"&&Qe.value!==""}return De._cachedResult},h.spectrum={},h.spectrum.localization={},h.spectrum.palettes={},h.fn.spectrum.processNativeColorInputs=function(){var De=h("input[type=color]");De.length&&!Xa()&&De.spectrum({preferredFormat:"hex6"})};var j=/^[\s,#]+/,A=/\s+$/,nt=0,At=Math,Bt=At.round,qt=At.min,be=At.max,Ee=At.random,Ce=function(De,Qe){if(Qe=Qe||{},(De=De||"")instanceof Ce)return De;if(!(this instanceof Ce))return new Ce(De,Qe);var nr=function(xr){var on,_r,oo,Ao={r:0,g:0,b:0},so=1,el=!1,ma=!1;return typeof xr=="string"&&(xr=function(Io){Io=Io.replace(j,"").replace(A,"").toLowerCase();var cn,No=!1;if(Qr[Io])Io=Qr[Io],No=!0;else if(Io=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(cn=Pn.rgb.exec(Io))?{r:cn[1],g:cn[2],b:cn[3]}:(cn=Pn.rgba.exec(Io))?{r:cn[1],g:cn[2],b:cn[3],a:cn[4]}:(cn=Pn.hsl.exec(Io))?{h:cn[1],s:cn[2],l:cn[3]}:(cn=Pn.hsla.exec(Io))?{h:cn[1],s:cn[2],l:cn[3],a:cn[4]}:(cn=Pn.hsv.exec(Io))?{h:cn[1],s:cn[2],v:cn[3]}:(cn=Pn.hsva.exec(Io))?{h:cn[1],s:cn[2],v:cn[3],a:cn[4]}:(cn=Pn.hex8.exec(Io))?{a:C0(cn[1]),r:cu(cn[2]),g:cu(cn[3]),b:cu(cn[4]),format:No?"name":"hex8"}:(cn=Pn.hex6.exec(Io))?{r:cu(cn[1]),g:cu(cn[2]),b:cu(cn[3]),format:No?"name":"hex"}:!!(cn=Pn.hex3.exec(Io))&&{r:cu(cn[1]+""+cn[1]),g:cu(cn[2]+""+cn[2]),b:cu(cn[3]+""+cn[3]),format:No?"name":"hex"}}(xr)),typeof xr=="object"&&(xr.hasOwnProperty("r")&&xr.hasOwnProperty("g")&&xr.hasOwnProperty("b")?(on=xr.r,_r=xr.g,oo=xr.b,Ao={r:255*Ri(on,255),g:255*Ri(_r,255),b:255*Ri(oo,255)},el=!0,ma=String(xr.r).substr(-1)==="%"?"prgb":"rgb"):xr.hasOwnProperty("h")&&xr.hasOwnProperty("s")&&xr.hasOwnProperty("v")?(xr.s=yd(xr.s),xr.v=yd(xr.v),Ao=function(Io,cn,No){Io=6*Ri(Io,360),cn=Ri(cn,100),No=Ri(No,100);var ti=At.floor(Io),ya=Io-ti,ra=No*(1-cn),ds=No*(1-ya*cn),rl=No*(1-(1-ya)*cn),jl=ti%6;return{r:255*[No,ds,ra,ra,rl,No][jl],g:255*[rl,No,No,ds,ra,ra][jl],b:255*[ra,ra,rl,No,No,ds][jl]}}(xr.h,xr.s,xr.v),el=!0,ma="hsv"):xr.hasOwnProperty("h")&&xr.hasOwnProperty("s")&&xr.hasOwnProperty("l")&&(xr.s=yd(xr.s),xr.l=yd(xr.l),Ao=function(Io,cn,No){var ti,ya,ra;function ds(xf,Gu,nl){return nl<0&&(nl+=1),nl>1&&(nl-=1),nl<1/6?xf+6*(Gu-xf)*nl:nl<1/2?Gu:nl<2/3?xf+(Gu-xf)*(2/3-nl)*6:xf}if(Io=Ri(Io,360),cn=Ri(cn,100),No=Ri(No,100),cn===0)ti=ya=ra=No;else{var rl=No<.5?No*(1+cn):No+cn-No*cn,jl=2*No-rl;ti=ds(jl,rl,Io+1/3),ya=ds(jl,rl,Io),ra=ds(jl,rl,Io-1/3)}return{r:255*ti,g:255*ya,b:255*ra}}(xr.h,xr.s,xr.l),el=!0,ma="hsl"),xr.hasOwnProperty("a")&&(so=xr.a)),so=md(so),{ok:el,format:xr.format||ma,r:qt(255,be(Ao.r,0)),g:qt(255,be(Ao.g,0)),b:qt(255,be(Ao.b,0)),a:so}}(De);this._originalInput=De,this._r=nr.r,this._g=nr.g,this._b=nr.b,this._a=nr.a,this._roundA=Bt(100*this._a)/100,this._format=Qe.format||nr.format,this._gradientType=Qe.gradientType,this._r<1&&(this._r=Bt(this._r)),this._g<1&&(this._g=Bt(this._g)),this._b<1&&(this._b=Bt(this._b)),this._ok=nr.ok,this._tc_id=nt++};Ce.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var De=this.toRgb();return(299*De.r+587*De.g+114*De.b)/1e3},setAlpha:function(De){return this._a=md(De),this._roundA=Bt(100*this._a)/100,this},toHsv:function(){var De=Wu(this._r,this._g,this._b);return{h:360*De.h,s:De.s,v:De.v,a:this._a}},toHsvString:function(){var De=Wu(this._r,this._g,this._b),Qe=Bt(360*De.h),nr=Bt(100*De.s),xr=Bt(100*De.v);return this._a==1?"hsv("+Qe+", "+nr+"%, "+xr+"%)":"hsva("+Qe+", "+nr+"%, "+xr+"%, "+this._roundA+")"},toHsl:function(){var De=lu(this._r,this._g,this._b);return{h:360*De.h,s:De.s,l:De.l,a:this._a}},toHslString:function(){var De=lu(this._r,this._g,this._b),Qe=Bt(360*De.h),nr=Bt(100*De.s),xr=Bt(100*De.l);return this._a==1?"hsl("+Qe+", "+nr+"%, "+xr+"%)":"hsla("+Qe+", "+nr+"%, "+xr+"%, "+this._roundA+")"},toHex:function(De){return up(this._r,this._g,this._b,De)},toHexString:function(De){return"#"+this.toHex(De)},toHex8:function(){return Nv(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:Bt(this._r),g:Bt(this._g),b:Bt(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Bt(this._r)+", "+Bt(this._g)+", "+Bt(this._b)+")":"rgba("+Bt(this._r)+", "+Bt(this._g)+", "+Bt(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Bt(100*Ri(this._r,255))+"%",g:Bt(100*Ri(this._g,255))+"%",b:Bt(100*Ri(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Bt(100*Ri(this._r,255))+"%, "+Bt(100*Ri(this._g,255))+"%, "+Bt(100*Ri(this._b,255))+"%)":"rgba("+Bt(100*Ri(this._r,255))+"%, "+Bt(100*Ri(this._g,255))+"%, "+Bt(100*Ri(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Sn[up(this._r,this._g,this._b,!0)]||!1)},toFilter:function(De){var Qe="#"+Nv(this._r,this._g,this._b,this._a),nr=Qe,xr=this._gradientType?"GradientType = 1, ":"";return De&&(nr=Ce(De).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+xr+"startColorstr="+Qe+",endColorstr="+nr+")"},toString:function(De){var Qe=!!De;De=De||this._format;var nr=!1,xr=this._a<1&&this._a>=0;return Qe||!xr||De!=="hex"&&De!=="hex6"&&De!=="hex3"&&De!=="name"?(De==="rgb"&&(nr=this.toRgbString()),De==="prgb"&&(nr=this.toPercentageRgbString()),De!=="hex"&&De!=="hex6"||(nr=this.toHexString()),De==="hex3"&&(nr=this.toHexString(!0)),De==="hex8"&&(nr=this.toHex8String()),De==="name"&&(nr=this.toName()),De==="hsl"&&(nr=this.toHslString()),De==="hsv"&&(nr=this.toHsvString()),nr||this.toHexString()):De==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(De,Qe){var nr=De.apply(null,[this].concat([].slice.call(Qe)));return this._r=nr._r,this._g=nr._g,this._b=nr._b,this.setAlpha(nr._a),this},lighten:function(){return this._applyModification(m0,arguments)},brighten:function(){return this._applyModification(y0,arguments)},darken:function(){return this._applyModification(ah,arguments)},desaturate:function(){return this._applyModification($u,arguments)},saturate:function(){return this._applyModification(g0,arguments)},greyscale:function(){return this._applyModification(v0,arguments)},spin:function(){return this._applyModification(Vv,arguments)},_applyCombination:function(De,Qe){return De.apply(null,[this].concat([].slice.call(Qe)))},analogous:function(){return this._applyCombination(Fv,arguments)},complement:function(){return this._applyCombination(b0,arguments)},monochromatic:function(){return this._applyCombination(x0,arguments)},splitcomplement:function(){return this._applyCombination(_0,arguments)},triad:function(){return this._applyCombination(fg,arguments)},tetrad:function(){return this._applyCombination(w0,arguments)}},Ce.fromRatio=function(De,Qe){if(typeof De=="object"){var nr={};for(var xr in De)De.hasOwnProperty(xr)&&(nr[xr]=xr==="a"?De[xr]:yd(De[xr]));De=nr}return Ce(De,Qe)},Ce.equals=function(De,Qe){return!(!De||!Qe)&&Ce(De).toRgbString()==Ce(Qe).toRgbString()},Ce.random=function(){return Ce.fromRatio({r:Ee(),g:Ee(),b:Ee()})},Ce.mix=function(De,Qe,nr){nr=nr===0?0:nr||50;var xr,on=Ce(De).toRgb(),_r=Ce(Qe).toRgb(),oo=nr/100,Ao=2*oo-1,so=_r.a-on.a,el=1-(xr=((xr=Ao*so==-1?Ao:(Ao+so)/(1+Ao*so))+1)/2),ma={r:_r.r*xr+on.r*el,g:_r.g*xr+on.g*el,b:_r.b*xr+on.b*el,a:_r.a*oo+on.a*(1-oo)};return Ce(ma)},Ce.readability=function(De,Qe){var nr=Ce(De),xr=Ce(Qe),on=nr.toRgb(),_r=xr.toRgb(),oo=nr.getBrightness(),Ao=xr.getBrightness(),so=Math.max(on.r,_r.r)-Math.min(on.r,_r.r)+Math.max(on.g,_r.g)-Math.min(on.g,_r.g)+Math.max(on.b,_r.b)-Math.min(on.b,_r.b);return{brightness:Math.abs(oo-Ao),color:so}},Ce.isReadable=function(De,Qe){var nr=Ce.readability(De,Qe);return nr.brightness>125&&nr.color>500},Ce.mostReadable=function(De,Qe){for(var nr=null,xr=0,on=!1,_r=0;_r<Qe.length;_r++){var oo=Ce.readability(De,Qe[_r]),Ao=oo.brightness>125&&oo.color>500,so=3*(oo.brightness/125)+oo.color/500;(Ao&&!on||Ao&&on&&so>xr||!Ao&&!on&&so>xr)&&(on=Ao,xr=so,nr=Ce(Qe[_r]))}return nr};var rr,yr,Jr,Qr=Ce.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Sn=Ce.hexNames=function(De){var Qe={};for(var nr in De)De.hasOwnProperty(nr)&&(Qe[De[nr]]=nr);return Qe}(Qr),Pn=(yr="[\\s|\\(]+("+(rr="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+rr+")[,|\\s]+("+rr+")\\s*\\)?",Jr="[\\s|\\(]+("+rr+")[,|\\s]+("+rr+")[,|\\s]+("+rr+")[,|\\s]+("+rr+")\\s*\\)?",{rgb:new RegExp("rgb"+yr),rgba:new RegExp("rgba"+Jr),hsl:new RegExp("hsl"+yr),hsla:new RegExp("hsla"+Jr),hsv:new RegExp("hsv"+yr),hsva:new RegExp("hsva"+Jr),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=Ce,h(function(){h.fn.spectrum.load&&h.fn.spectrum.processNativeColorInputs()})}function xo(De,Qe,nr,xr){for(var on=[],_r=0;_r<De.length;_r++){var oo=De[_r];if(oo){var Ao=Ce(oo),so=Ao.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";so+=Ce.equals(Qe,oo)?" sp-thumb-active":"";var el=Ao.toString(xr.preferredFormat||"rgb"),ma=u?"background-color:"+Ao.toRgbString():"filter:"+Ao.toFilter();on.push('<span title="'+el+'" data-color="'+Ao.toRgbString()+'" class="'+so+'"><span class="sp-thumb-inner" style="'+ma+';"></span></span>')}else on.push(h("<div />").append(h('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",xr.noColorSelectedText)).html())}return"<div class='sp-cf "+nr+"'>"+on.join("")+"</div>"}function ii(De,Qe){var nr,xr,on,_r=function(yn,_n){var Rn=h.extend({},e,yn);return Rn.callbacks={move:tl(Rn.move,_n),change:tl(Rn.change,_n),show:tl(Rn.show,_n),hide:tl(Rn.hide,_n),beforeShow:tl(Rn.beforeShow,_n)},Rn}(Qe,De),oo=_r.flat,Ao=_r.showSelectionPalette,so=_r.localStorageKey,el=_r.theme,ma=_r.callbacks,Io=(nr=hu,xr=10,function(){var yn=this,_n=arguments;on||(on=setTimeout(function(){on=null,nr.apply(yn,_n)},xr))}),cn=!1,No=!1,ti=!0,ya=0,ra=0,ds=0,rl=0,jl=0,xf=0,Gu=0,nl=0,bd=0,bc=0,uu=1,fu=[],Wi=[],lh={},pu=_r.selectionPalette.slice(0),S0=_r.maxSelectionSize,Rv="sp-dragging",Cf=null,wd=De.ownerDocument,ba=(wd.body,h(De)),pg=!1,fo=h(O,wd).addClass(el),O0=fo.find(".sp-picker-container"),ch=fo.find(".sp-color"),Gc=fo.find(".sp-dragger"),uh=fo.find(".sp-hue"),_d=fo.find(".sp-slider"),qu=fo.find(".sp-alpha-inner"),fh=fo.find(".sp-alpha"),ph=fo.find(".sp-alpha-handle"),du=fo.find(".sp-input"),Hv=fo.find(".sp-palette"),dh=fo.find(".sp-initial"),Bv=fo.find(".sp-cancel"),dg=fo.find(".sp-clear"),Uv=fo.find(".sp-choose"),hh=fo.find(".sp-palette-toggle"),Up=ba.is("input"),T0=Up&&ba.attr("type")==="color"&&Xa(),gh=Up&&!oo,zp=gh?h(m).addClass(el).addClass(_r.className).addClass(_r.replacerClassName):h([]),xd=gh?zp:ba,Wp=zp.find(".sp-preview-inner"),Cd=_r.color||Up&&ba.val(),wa=!1,Sf=_r.preferredFormat,hg=!_r.showButtons||_r.clickoutFiresChange,Of=!Cd,pp=_r.allowEmpty&&!T0;function gg(){if(_r.showPaletteOnly&&(_r.showPalette=!0),hh.text(_r.showPaletteOnly?_r.togglePaletteMoreText:_r.togglePaletteLessText),_r.palette){fu=_r.palette.slice(0),Wi=h.isArray(fu[0])?fu:[fu],lh={};for(var yn=0;yn<Wi.length;yn++)for(var _n=0;_n<Wi[yn].length;_n++){var Rn=Ce(Wi[yn][_n]).toRgbString();lh[Rn]=!0}}fo.toggleClass("sp-flat",oo),fo.toggleClass("sp-input-disabled",!_r.showInput),fo.toggleClass("sp-alpha-enabled",_r.showAlpha),fo.toggleClass("sp-clear-enabled",pp),fo.toggleClass("sp-buttons-disabled",!_r.showButtons),fo.toggleClass("sp-palette-buttons-disabled",!_r.togglePaletteOnly),fo.toggleClass("sp-palette-disabled",!_r.showPalette),fo.toggleClass("sp-palette-only",_r.showPaletteOnly),fo.toggleClass("sp-initial-disabled",!_r.showInitial),fo.addClass(_r.className).addClass(_r.containerClassName),hu()}function zv(){if(so&&window.localStorage){try{var yn=window.localStorage[so].split(",#");yn.length>1&&(delete window.localStorage[so],h.each(yn,function(_n,Rn){vh(Rn)}))}catch{}try{pu=window.localStorage[so].split(";")}catch{}}}function vh(yn){if(Ao){var _n=Ce(yn).toRgbString();if(!lh[_n]&&h.inArray(_n,pu)===-1)for(pu.push(_n);pu.length>S0;)pu.shift();if(so&&window.localStorage)try{window.localStorage[so]=pu.join(";")}catch{}}}function Wv(){var yn=Is(),_n=h.map(Wi,function(Rn,p){return xo(Rn,yn,"sp-palette-row sp-palette-row-"+p,_r)});zv(),pu&&_n.push(xo(function(){var Rn=[];if(_r.showPalette)for(var p=0;p<pu.length;p++){var i=Ce(pu[p]).toRgbString();lh[i]||Rn.push(pu[p])}return Rn.reverse().slice(0,_r.maxSelectionSize)}(),yn,"sp-palette-row sp-palette-row-selection",_r)),Hv.html(_n.join(""))}function $v(){if(_r.showInitial){var yn=wa,_n=Is();dh.html(xo([yn,_n],_n,"sp-palette-row-initial",_r))}}function vg(){(ra<=0||ya<=0||rl<=0)&&hu(),No=!0,fo.addClass(Rv),Cf=null,ba.trigger("dragstart.spectrum",[Is()])}function mg(){No=!1,fo.removeClass(Rv),ba.trigger("dragstop.spectrum",[Is()])}function yg(){var yn=du.val();if(yn!==null&&yn!==""||!pp){var _n=Ce(yn);_n.isValid()?(dp(_n),gp(!0)):du.addClass("sp-validation-error")}else dp(null),gp(!0)}function $p(){cn?Tf():mh()}function mh(){var yn=h.Event("beforeShow.spectrum");if(cn)hu();else if(ba.trigger("beforeShow.spectrum",[Is()]),ma.beforeShow(Is())!==!1&&!yn.isDefaultPrevented()){(function(){for(var Rn=0;Rn<n.length;Rn++)n[Rn]&&n[Rn].hide()})(),cn=!0;var _n=h(wd);_n.bind("keydown.spectrum",bg),_n.bind("click.spectrum",Gv),h(window).bind("resize.spectrum",Io),zp.addClass("sp-active"),fo.removeClass("sp-hidden"),hu(),Gp(),wa=Is(),$v(),ma.show(wa),ba.trigger("show.spectrum",[wa])}}function bg(yn){yn.keyCode===27&&Tf()}function Gv(yn){yn.button!=2&&(No||(hg?gp(!0):qv(),Tf()))}function Tf(){cn&&!oo&&(cn=!1,h(wd).unbind("keydown.spectrum",bg),h(wd).unbind("click.spectrum",Gv),h(window).unbind("resize.spectrum",Io),zp.removeClass("sp-active"),fo.addClass("sp-hidden"),ma.hide(Is()),ba.trigger("hide.spectrum",[Is()]))}function qv(){dp(wa,!0)}function dp(yn,_n){var Rn,p;Ce.equals(yn,Is())?Gp():(!yn&&pp?Of=!0:(Of=!1,ti=!yn,p=(Rn=Ce(yn)).toHsv(),nl=p.h%360/360,bd=p.s,bc=p.v,uu=p.a),Gp(),Rn&&Rn.isValid()&&!_n&&(Sf=_r.preferredFormat||Rn.getFormat()))}function Is(yn){return yn=yn||{},pp&&Of?null:Ce.fromRatio({h:nl,s:bd,v:bc,a:Math.round(100*uu)/100},{format:yn.format||Sf})}function hp(){Gp(),ma.move(Is()),ba.trigger("move.spectrum",[Is()])}function Gp(){du.removeClass("sp-validation-error"),Kv();var yn=Ce.fromRatio({h:nl,s:1,v:1});ch.css("background-color",yn.toHexString());var _n=Sf;uu<1&&(uu!==0||_n!=="name")&&(_n!=="hex"&&_n!=="hex3"&&_n!=="hex6"&&_n!=="name"||(_n="rgb"));var Rn=Is({format:_n}),p="";if(Wp.removeClass("sp-clear-display"),Wp.css("background-color","transparent"),!Rn&&pp)Wp.addClass("sp-clear-display");else{var i=Rn.toHexString(),t=Rn.toRgbString();if(u||Rn.alpha===1?Wp.css("background-color",t):(Wp.css("background-color","transparent"),Wp.css("filter",Rn.toFilter())),_r.showAlpha){var r=Rn.toRgb();r.a=0;var o=Ce(r).toRgbString(),l="linear-gradient(left, "+o+", "+i+")";a?qu.css("filter",Ce(o).toFilter({gradientType:1},i)):(qu.css("background","-webkit-"+l),qu.css("background","-moz-"+l),qu.css("background","-ms-"+l),qu.css("background","linear-gradient(to right, "+o+", "+i+")"))}p=Rn.toString(_n)}_r.showInput&&du.val(p),_r.showPalette&&Wv(),$v()}function Kv(){var yn=bd,_n=bc;if(pp&&Of)ph.hide(),_d.hide(),Gc.hide();else{ph.show(),_d.show(),Gc.show();var Rn=yn*ya,p=ra-_n*ra;Rn=Math.max(-ds,Math.min(ya-ds,Rn-ds)),p=Math.max(-ds,Math.min(ra-ds,p-ds)),Gc.css({top:p+"px",left:Rn+"px"});var i=uu*jl;ph.css({left:i-xf/2+"px"});var t=nl*rl;_d.css({top:t-Gu+"px"})}}function gp(yn){var _n=Is(),Rn="",p=!!ti||!Ce.equals(_n,wa);_n&&(Rn=_n.toString(Sf),!cn&&vh(_n)),Up&&ba.val(Rn),yn&&p&&(ma.change(_n),ba.trigger("change",[_n]))}function hu(){cn&&(ya=ch.width(),ra=ch.height(),ds=Gc.height(),uh.width(),rl=uh.height(),Gu=_d.height(),jl=fh.width(),xf=ph.width(),oo||(fo.css("position","absolute"),_r.offset?fo.offset(_r.offset):fo.offset(function(yn,_n){var Rn=0,p=yn.outerWidth(),i=yn.outerHeight(),t=_n.outerHeight(),r=yn[0].ownerDocument,o=r.documentElement,l=o.clientWidth,v=o.clientHeight,w=l+h(r).scrollLeft(),x=v+h(r).scrollTop(),E=_n.offset();return E.top+=t,E.left-=Math.min(E.left,E.left+p>w&&w>p?Math.abs(E.left+p-w):0),E.top-=Math.min(E.top,E.top+i>x&&x>i?Math.abs(i+t-Rn):Rn),E}(fo,xd))),Kv(),_r.showPalette&&Wv(),ba.trigger("reflow.spectrum"))}function yh(){Tf(),pg=!0,ba.attr("disabled",!0),xd.addClass("sp-disabled")}(function(){if(a&&fo.find("*:not(input)").attr("unselectable","on"),gg(),gh&&ba.after(zp).hide(),pp||dg.hide(),oo)ba.after(fo).hide();else{var yn=_r.appendTo==="parent"?ba.parent():h(_r.appendTo);yn.length!==1&&(yn=h("body")),yn.append(fo)}function _n(p){return p.data&&p.data.ignore?(dp(h(p.target).closest(".sp-thumb-el").data("color")),hp()):(dp(h(p.target).closest(".sp-thumb-el").data("color")),hp(),_r.hideAfterPaletteSelect&&(gp(!0),Tf())),!1}zv(),xd.bind("click.spectrum touchstart.spectrum",function(p){pg||$p(),p.stopPropagation(),h(p.target).is("input")||p.preventDefault()}),(ba.is(":disabled")||_r.disabled===!0)&&yh(),fo.click(Qs),du.change(yg),du.bind("paste",function(){setTimeout(yg,1)}),du.keydown(function(p){p.keyCode==13&&yg()}),Bv.text(_r.cancelText),Bv.bind("click.spectrum",function(p){p.stopPropagation(),p.preventDefault(),qv(),Tf()}),dg.attr("title",_r.clearText),dg.bind("click.spectrum",function(p){p.stopPropagation(),p.preventDefault(),Of=!0,hp(),oo&&gp(!0)}),Uv.text(_r.chooseText),Uv.bind("click.spectrum",function(p){p.stopPropagation(),p.preventDefault(),a&&du.is(":focus")&&du.trigger("change"),du.hasClass("sp-validation-error")||(gp(!0),Tf())}),hh.text(_r.showPaletteOnly?_r.togglePaletteMoreText:_r.togglePaletteLessText),hh.bind("click.spectrum",function(p){p.stopPropagation(),p.preventDefault(),_r.showPaletteOnly=!_r.showPaletteOnly,_r.showPaletteOnly||oo||fo.css("left","-="+(O0.outerWidth(!0)+5)),gg()}),Ll(fh,function(p,i,t){uu=p/jl,Of=!1,t.shiftKey&&(uu=Math.round(10*uu)/10),hp()},vg,mg),Ll(uh,function(p,i){nl=parseFloat(i/rl),Of=!1,_r.showAlpha||(uu=1),hp()},vg,mg),Ll(ch,function(p,i,t){if(t.shiftKey){if(!Cf){var r=bd*ya,o=ra-bc*ra,l=Math.abs(p-r)>Math.abs(i-o);Cf=l?"x":"y"}}else Cf=null;var v=!Cf||Cf==="y";(!Cf||Cf==="x")&&(bd=parseFloat(p/ya)),v&&(bc=parseFloat((ra-i)/ra)),Of=!1,_r.showAlpha||(uu=1),hp()},vg,mg),Cd?(dp(Cd),Gp(),Sf=_r.preferredFormat||Ce(Cd).getFormat(),vh(Cd)):Gp(),oo&&mh();var Rn=a?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Hv.delegate(".sp-thumb-el",Rn,_n),dh.delegate(".sp-thumb-el:nth-child(1)",Rn,{ignore:!0},_n)})();var Sd={show:mh,hide:Tf,toggle:$p,reflow:hu,option:function(yn,_n){return yn===s?h.extend({},_r):_n===s?_r[yn]:(_r[yn]=_n,yn==="preferredFormat"&&(Sf=_r.preferredFormat),void gg())},enable:function(){pg=!1,ba.attr("disabled",!1),xd.removeClass("sp-disabled")},disable:yh,offset:function(yn){_r.offset=yn,hu()},set:function(yn){dp(yn),gp()},get:Is,destroy:function(){ba.show(),xd.unbind("click.spectrum touchstart.spectrum"),fo.remove(),zp.remove(),n[Sd.id]=null},container:fo};return Sd.id=n.push(Sd)-1,Sd}function va(){}function Qs(De){De.stopPropagation()}function tl(De,Qe){var nr=Array.prototype.slice,xr=nr.call(arguments,2);return function(){return De.apply(Qe,xr.concat(nr.call(arguments)))}}function Ll(De,Qe,nr,xr){Qe=Qe||function(){},nr=nr||function(){},xr=xr||function(){};var on=document,_r=!1,oo={},Ao=0,so=0,el="ontouchstart"in window,ma={};function Io(ti){ti.stopPropagation&&ti.stopPropagation(),ti.preventDefault&&ti.preventDefault(),ti.returnValue=!1}function cn(ti){if(_r){if(a&&on.documentMode<9&&!ti.button)return No();var ya=ti&&ti.touches&&ti.touches[0],ra=ya&&ya.pageX||ti.pageX,ds=ya&&ya.pageY||ti.pageY,rl=Math.max(0,Math.min(ra-oo.left,so)),jl=Math.max(0,Math.min(ds-oo.top,Ao));el&&Io(ti),Qe.apply(De,[rl,jl,ti])}}function No(){_r&&(h(on).unbind(ma),h(on.body).removeClass("sp-dragging"),setTimeout(function(){xr.apply(De,arguments)},0)),_r=!1}ma.selectstart=Io,ma.dragstart=Io,ma["touchmove mousemove"]=cn,ma["touchend mouseup"]=No,h(De).bind("touchstart mousedown",function(ti){(ti.which?ti.which==3:ti.button==2)||_r||nr.apply(De,arguments)!==!1&&(_r=!0,Ao=h(De).height(),so=h(De).width(),oo=h(De).offset(),h(on).bind(ma),h(on.body).addClass("sp-dragging"),cn(ti),Io(ti))})}function Xa(){return h.fn.spectrum.inputTypeColorSupport()}function lu(De,Qe,nr){De=Ri(De,255),Qe=Ri(Qe,255),nr=Ri(nr,255);var xr,on,_r=be(De,Qe,nr),oo=qt(De,Qe,nr),Ao=(_r+oo)/2;if(_r==oo)xr=on=0;else{var so=_r-oo;switch(on=Ao>.5?so/(2-_r-oo):so/(_r+oo),_r){case De:xr=(Qe-nr)/so+(Qe<nr?6:0);break;case Qe:xr=(nr-De)/so+2;break;case nr:xr=(De-Qe)/so+4}xr/=6}return{h:xr,s:on,l:Ao}}function Wu(De,Qe,nr){De=Ri(De,255),Qe=Ri(Qe,255),nr=Ri(nr,255);var xr,on,_r=be(De,Qe,nr),oo=qt(De,Qe,nr),Ao=_r,so=_r-oo;if(on=_r===0?0:so/_r,_r==oo)xr=0;else{switch(_r){case De:xr=(Qe-nr)/so+(Qe<nr?6:0);break;case Qe:xr=(nr-De)/so+2;break;case nr:xr=(De-Qe)/so+4}xr/=6}return{h:xr,s:on,v:Ao}}function up(De,Qe,nr,xr){var on=[fp(Bt(De).toString(16)),fp(Bt(Qe).toString(16)),fp(Bt(nr).toString(16))];return xr&&on[0].charAt(0)==on[0].charAt(1)&&on[1].charAt(0)==on[1].charAt(1)&&on[2].charAt(0)==on[2].charAt(1)?on[0].charAt(0)+on[1].charAt(0)+on[2].charAt(0):on.join("")}function Nv(De,Qe,nr,xr){var on;return[fp((on=xr,Math.round(255*parseFloat(on)).toString(16))),fp(Bt(De).toString(16)),fp(Bt(Qe).toString(16)),fp(Bt(nr).toString(16))].join("")}function $u(De,Qe){Qe=Qe===0?0:Qe||10;var nr=Ce(De).toHsl();return nr.s-=Qe/100,nr.s=sh(nr.s),Ce(nr)}function g0(De,Qe){Qe=Qe===0?0:Qe||10;var nr=Ce(De).toHsl();return nr.s+=Qe/100,nr.s=sh(nr.s),Ce(nr)}function v0(De){return Ce(De).desaturate(100)}function m0(De,Qe){Qe=Qe===0?0:Qe||10;var nr=Ce(De).toHsl();return nr.l+=Qe/100,nr.l=sh(nr.l),Ce(nr)}function y0(De,Qe){Qe=Qe===0?0:Qe||10;var nr=Ce(De).toRgb();return nr.r=be(0,qt(255,nr.r-Bt(255*(-Qe/100)))),nr.g=be(0,qt(255,nr.g-Bt(255*(-Qe/100)))),nr.b=be(0,qt(255,nr.b-Bt(255*(-Qe/100)))),Ce(nr)}function ah(De,Qe){Qe=Qe===0?0:Qe||10;var nr=Ce(De).toHsl();return nr.l-=Qe/100,nr.l=sh(nr.l),Ce(nr)}function Vv(De,Qe){var nr=Ce(De).toHsl(),xr=(Bt(nr.h)+Qe)%360;return nr.h=xr<0?360+xr:xr,Ce(nr)}function b0(De){var Qe=Ce(De).toHsl();return Qe.h=(Qe.h+180)%360,Ce(Qe)}function fg(De){var Qe=Ce(De).toHsl(),nr=Qe.h;return[Ce(De),Ce({h:(nr+120)%360,s:Qe.s,l:Qe.l}),Ce({h:(nr+240)%360,s:Qe.s,l:Qe.l})]}function w0(De){var Qe=Ce(De).toHsl(),nr=Qe.h;return[Ce(De),Ce({h:(nr+90)%360,s:Qe.s,l:Qe.l}),Ce({h:(nr+180)%360,s:Qe.s,l:Qe.l}),Ce({h:(nr+270)%360,s:Qe.s,l:Qe.l})]}function _0(De){var Qe=Ce(De).toHsl(),nr=Qe.h;return[Ce(De),Ce({h:(nr+72)%360,s:Qe.s,l:Qe.l}),Ce({h:(nr+216)%360,s:Qe.s,l:Qe.l})]}function Fv(De,Qe,nr){Qe=Qe||6,nr=nr||30;var xr=Ce(De).toHsl(),on=360/nr,_r=[Ce(De)];for(xr.h=(xr.h-(on*Qe>>1)+720)%360;--Qe;)xr.h=(xr.h+on)%360,_r.push(Ce(xr));return _r}function x0(De,Qe){Qe=Qe||6;for(var nr=Ce(De).toHsv(),xr=nr.h,on=nr.s,_r=nr.v,oo=[],Ao=1/Qe;Qe--;)oo.push(Ce({h:xr,s:on,v:_r})),_r=(_r+Ao)%1;return oo}function md(De){return De=parseFloat(De),(isNaN(De)||De<0||De>1)&&(De=1),De}function Ri(De,Qe){(function(xr){return typeof xr=="string"&&xr.indexOf(".")!=-1&&parseFloat(xr)===1})(De)&&(De="100%");var nr=function(xr){return typeof xr=="string"&&xr.indexOf("%")!=-1}(De);return De=qt(Qe,be(0,parseFloat(De))),nr&&(De=parseInt(De*Qe,10)/100),At.abs(De-Qe)<1e-6?1:De%Qe/parseFloat(Qe)}function sh(De){return qt(1,be(0,De))}function cu(De){return parseInt(De,16)}function fp(De){return De.length==1?"0"+De:""+De}function yd(De){return De<=1&&(De=100*De+"%"),De}function C0(De){return cu(De)/255}}(I.default);var Bn=function(h){var s=h.getFormat()==="name"&&h.toName(),e=h.getAlpha()==1?h.toHexString():h.toRgbString();return s||e.replace(/ /g,"")};const Ur=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return hn(s,h),s.prototype.template=function(){var e=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(e,`field-colorp">
        <div class="`).concat(e,`field-colorp-c" data-colorp-c>
          <div class="`).concat(e,`checker-bg"></div>
        </div>
      </div>
    `)},s.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},s.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},s.prototype.remove=function(){return h.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},s.prototype.handleChange=function(e){e.stopPropagation();var n=e.target.value;(0,k.isUndefined)(n)||this.__onInputChange(n)},s.prototype.__onInputChange=function(e){var n=this.model,a=this.opts.onChange,u=e,m=this.getColorEl();if(m){m.spectrum("set",u);var O=m.spectrum("get"),P=u&&Bn(O);P&&(u=P)}a?a(u):n.set({value:u},{fromInput:1})},s.prototype.setValue=function(e,n){n===void 0&&(n={});var a=this.model,u=(0,k.isUndefined)(n.def)?a.get("defaults"):n.def,m=(0,k.isUndefined)(e)?(0,k.isUndefined)(u)?"":u:e,O=this.getInputEl(),P=this.getColorEl(),j=m!="none"?m:"";O.value=m,P.get(0).style.backgroundColor=j,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(P.spectrum("set",j),this.noneColor=m=="none",this.movedColor=j)},s.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var n=this,a=n.em,u=n.model,m=n.opts,O=this.ppfx,P=m.onChange,j=(0,I.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),A=j.get(0).style,nt=a&&a.config?a.config.el:"",At=a&&a.getConfig&&a.getConfig().colorPicker||{};this.movedColor="";var Bt,qt=!1;this.$el.find("[data-colorp-c]").append(j);var be=function(Ee,Ce){Ce===void 0&&(Ce=!0),P?P(Ee,!Ce):(Ce&&u.setValueFromInput(0,!1),u.setValueFromInput(Ee,Ce))};j.spectrum(ln(ln(ln({color:u.getValue()||!1,containerClassName:"".concat(O,"one-bg ").concat(O,"two-color"),appendTo:nt||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},At),u.get("colorPicker")||{}),{move:function(Ee){var Ce=Bn(Ee);e.movedColor=Ce,A.backgroundColor=Ce,be(Ce,!1)},change:function(Ee){qt=!0;var Ce=Bn(Ee);A.backgroundColor=Ce,be(Ce),e.noneColor=!1},show:function(Ee){qt=!1,e.movedColor="",Bt=P?u.getValue({noDefault:!0}):Bn(Ee)},hide:function(){qt||!Bt&&!P||(e.noneColor&&(Bt=""),A.backgroundColor=Bt,j.spectrum("set",Bt),be(Bt,!1))}})),a&&a.on&&this.listenTo(a,"component:selected",function(){e.movedColor&&be(e.movedColor),qt=!0,e.movedColor="",j.spectrum("hide")}),this.colorEl=j}return this.colorEl},s.prototype.render=function(){return Ze.prototype.render.call(this),this.getColorEl(),this},s}(Ze);var no=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const ko=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return no(s,h),s.prototype.templateInput=function(){return""},s.prototype.getInputEl=function(){if(!this.input){var e=this.model,n=this.getModelValue(),a=new Ur({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();a.setValue(n,{fromTarget:1}),this.input=a.el}return this.input},s}(Z);var qn=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qn=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return qn(s,h),s.prototype.templateInput=function(){return""},s.prototype.onChange=function(){this.handleClick()},s.prototype.handleClick=function(){var e=this.model,n=this.em,a=e.get("command");a&&((0,k.isString)(a)?n.Commands.run(a):a(n.Editor,e))},s.prototype.renderLabel=function(){this.model.get("label")&&Z.prototype.renderLabel.apply(this)},s.prototype.getInputEl=function(){var e=this.model,n=this.ppfx,a=e.props(),u=a.labelButton,m=a.text,O=a.full,P=u||m,j="".concat(n,"btn");return'<button type="button" class="'.concat(j,"-prim").concat(O?" ".concat(j,"--full"):"",'">').concat(P,"</button>")},s}(Z);const uo=Qn;Qn.prototype.eventCapture=["click button"];var On=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$n="trait",Kn="".concat($n,":"),Mn="".concat(Kn,"custom"),gi={text:Z,number:Tr,select:Se,checkbox:$e,color:ko,button:uo},vi=function(h){function s(e){var n=h.call(this,e,"TraitManager",S)||this;n.TraitsView=Qt,n.events={all:$n,custom:Mn};var a=new N.Hn;n.model=a,n.types=gi;var u=(0,k.debounce)(function(){return n.__upSel()},0);a.listenTo(e,"component:toggled",u);var m=(0,k.debounce)(function(){return n.__onUp()},0);return a.listenTo(e,"trait:update",m),n}return On(s,h),s.prototype.__upSel=function(){this.select(this.em.getSelected())},s.prototype.__onUp=function(){this.select(this.getSelected())},s.prototype.select=function(e){var n=e?e.getTraits():[];this.model.set({component:e,traits:n}),this.__trgCustom()},s.prototype.getSelected=function(){return this.model.get("component")},s.prototype.getCurrent=function(){return this.model.get("traits")||[]},s.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},s.prototype.postRender=function(){this.__appendTo()},s.prototype.getTraitsViewer=function(){return this.view},s.prototype.addType=function(e,n){var a=this.getType("text");this.types[e]=a.extend(n)},s.prototype.getType=function(e){return this.getTypes()[e]},s.prototype.getTypes=function(){return this.types},s.prototype.render=function(){var e=this.view,n=this.em,a=this.getConfig(),u=e&&e.el;return e=new Qt({el:u,collection:[],editor:n,config:a},this.getTypes()),this.view=e,e.el},s.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},s}(xt);const po=vi,to={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var Ga=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xn=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.items=[],n.opt=e;var a=e.config||{};n.config=a,n.parentView=e.parentView;var u=a.stylePrefix||"",m=a.pStylePrefix||"",O=n.collection;n.listenTo(O,"add",n.addTo),n.listenTo(O,"reset resetNavigator",n.render),n.listenTo(O,"remove",n.removeChildren),n.className="".concat(u,"layers");var P=a.em;if(a.sortable&&!n.opt.sorter){var j=P.Utils;n.opt.sorter=new j.Sorter({container:a.sortContainer||n.el,containerSel:".".concat(n.className),itemSel:".".concat(u,"layer"),ignoreViewChildren:1,onEndMove:function(A,nt,At){var Bt=nt.getSourceModel();P.setSelected(Bt,{forceChange:1}),P.trigger("".concat(Gn,":end"),At)},avoidSelectOnEnd:1,nested:1,ppfx:m,pfx:u})}return n.$el.data("collection",O),e.parent&&n.$el.data("model",e.parent),n}return Ga(s,h),s.prototype.removeChildren=function(e){var n=e.viewLayer;n&&(n.remove(),delete e.viewLayer)},s.prototype.addTo=function(e){var n=this.collection.indexOf(e);this.addToCollection(e,null,n)},s.prototype.addToCollection=function(e,n,a){var u=this,m=u.parentView,O=u.opt,P=u.config,j=O.ItemView,A=O.opened,nt=O.module,At=n||null,Bt=new j({ItemView:j,level:O.level,model:e,parentView:m,config:P,sorter:O.sorter,opened:A,module:nt}),qt=Bt.render().el;if(At)At.appendChild(qt);else if(a!==void 0){var be="before";this.$el.children().length==a&&(a--,be="after"),a<0?this.$el.append(qt):this.$el.children().eq(a)[be](qt)}else this.$el.append(qt);return this.items.push(Bt),qt},s.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return N.G7.prototype.remove.apply(this,e),this.items.map(function(a){return a.remove()}),this},s.prototype.render=function(){var e=this,n=document.createDocumentFragment(),a=this.el;return a.innerHTML="",this.collection.each(function(u){return e.addToCollection(u,n)}),a.appendChild(n),a.className=this.className,this},s}(N.G7);const Li=xn;var Qi=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vo="contentEditable",Na=function(h){function s(e){var n=h.call(this,e)||this;(0,k.bindAll)(n,"__render"),n.opt=e,n.module=e.module,n.config=e.config||{},n.sorter=e.sorter||"",n.parentView=e.parentView;var a=n,u=a.model,m=a.pfx,O=a.ppfx,P=u.get("type")||"default";return n.className="".concat(m,"layer ").concat(m,"layer__t-").concat(P," no-select ").concat(O,"two-color"),n.inputNameCls="".concat(O,"layer-name"),n.clsTitleC="".concat(m,"layer-title-c"),n.clsTitle="".concat(m,"layer-title"),n.clsCaret="".concat(m,"layer-caret"),n.clsCount="".concat(m,"layer-count"),n.clsMove="".concat(m,"layer-move"),n.clsChildren="".concat(m,"layer-children"),n.clsNoChild="".concat(m,"layer-no-chld"),n.clsEdit="".concat(n.inputNameCls,"--edit"),n.clsNoEdit="".concat(n.inputNameCls,"--no-edit"),n.initComponent(),n}return Qi(s,h),s.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},s.prototype.template=function(e){var n=this,a=n.pfx,u=n.ppfx,m=n.config,O=n.clsNoEdit,P=n.module,j=n.opt,A=n.em,nt=m.hidable,At=P.getComponents(e).length,Bt=At?"":this.clsNoChild,qt="".concat(this.clsTitle," ").concat(Bt),be="".concat(this.clsTitleC," ").concat(u,"one-bg"),Ee="".concat(this.inputNameCls," ").concat(O," ").concat(u,"no-app"),Ce=j.level+1,rr="".concat(30+10*Ce,"px"),yr=e.getName(),Jr=e.getIcon(),Qr="".concat(a,"layer"),Sn=(A==null?void 0:A.getConfig()).icons,Pn=Sn.move,xo=Sn.eye,ii=Sn.eyeOff,va=Sn.chevron;return`
      `.concat(nt?'<i class="'.concat(a,`layer-vis" data-toggle-visible>
            <i class="`).concat(a,'layer-vis-on">').concat(xo,`</i>
            <i class="`).concat(a,'layer-vis-off">').concat(ii,`</i>
          </i>`):"",`
      <div class="`).concat(be,`">
        <div class="`).concat(qt,'" style="padding-left: ').concat(rr,`" data-toggle-select>
          <div class="`).concat(a,'layer-title-inn" title="').concat(yr,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(va,`</i>
            `).concat(Jr?'<span class="'.concat(Qr,'__icon">').concat(Jr,"</span>"):"",`
            <span class="`).concat(Ee,'" data-name>').concat(yr,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(At||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(Pn||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(s.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),s.prototype.initComponent=function(){var e=this,n=this.model,a=this.config.onInit,u=n.components();this.listenTo(u,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(m){return e.listenTo(n,m[0],m[1])}),this.$el.data("model",n),this.$el.data("collection",u),n.viewLayer=this,a.bind(this)({component:n,render:this.__render,listenTo:this.listenTo})},s.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},s.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},s.prototype.updateVisibility=function(){var e=this,n=e.pfx,a=e.model,u=e.module,m="".concat(n,"layer-hidden"),O=u.isVisible(a)?"removeClass":"addClass";this.$el[O](m),this.getVisibilityEl()[O]("".concat(n,"layer-off"))},s.prototype.toggleVisibility=function(e){e==null||e.stopPropagation();var n=this.module,a=this.model;n.setVisible(a,!n.isVisible(a))},s.prototype.handleEdit=function(e){e==null||e.stopPropagation();var n=this,a=n.em,u=n.$el,m=n.clsNoEdit,O=n.clsEdit,P=this.getInputName();P[vo]="true",P.focus(),document.execCommand("selectAll",!1),a.setEditing(!0),u.find(".".concat(this.inputNameCls)).removeClass(m).addClass(O)},s.prototype.handleEditKey=function(e){e.stopPropagation(),((0,B.isEscKey)(e)||(0,B.isEnterKey)(e))&&this.handleEditEnd(e)},s.prototype.handleEditEnd=function(e){e==null||e.stopPropagation();var n=this,a=n.em,u=n.$el,m=n.clsNoEdit,O=n.clsEdit,P=this.getInputName(),j=P.textContent;P.scrollLeft=0,P[vo]="false",this.setName(j,{component:this.model,propName:"custom-name"}),a.setEditing(!1),u.find(".".concat(this.inputNameCls)).addClass(m).removeClass(O),this.updateName()},s.prototype.setName=function(e,n){var a=n.propName;this.model.set(a,e)},s.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},s.prototype.updateOpening=function(){var e=this,n=e.$el,a=e.model,u=e.pfx,m="open",O="".concat(u,"layer-open"),P=this.getCaret();this.module.isOpen(a)?(n.addClass(m),P.addClass(O)):(n.removeClass(m),P.removeClass(O))},s.prototype.toggleOpening=function(e){var n=this.model,a=this.module;e==null||e.stopImmediatePropagation(),n.get("components").length&&a.setOpen(n,!a.isOpen(n))},s.prototype.handleSelect=function(e){e==null||e.stopPropagation();var n=this.module,a=this.model;n.setLayerData(a,{selected:!0},{event:e})},s.prototype.handleHover=function(e){e==null||e.stopPropagation();var n=this.module,a=this.model;n.setLayerData(a,{hovered:!0})},s.prototype.handleHoverOut=function(e){e==null||e.stopPropagation();var n=this.module,a=this.model;n.setLayerData(a,{hovered:!1})},s.prototype.startSort=function(e){e.stopPropagation();var n=this.em,a=this.sorter;e.button&&e.button!==0||a&&(a.onStart=function(u){return n.trigger("".concat(Gn,":start"),u)},a.onMoveClb=function(u){return n.trigger(Gn,u)},a.startSort(e.target))},s.prototype.updateStatus=function(){Ro.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},s.prototype.checkChildren=function(){var e=this,n=e.model,a=e.clsNoChild,u=e.$el,m=e.module,O=m.getComponents(n).length,P=u.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),j=this.cnt;j||(j=u.children("[data-count]").get(0),this.cnt=j),P[O?"removeClass":"addClass"](a),j&&(j.innerHTML=O||""),!O&&m.setOpen(n,!1)},s.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},s.prototype.setRoot=function(e){var n;e=(0,k.isString)(e)?(n=this.em.getWrapper())===null||n===void 0?void 0:n.find(e)[0]:e;var a=(0,B.getModel)(e,0);a&&(this.stopListening(),this.model=a,this.initComponent(),this._rendered&&this.render())},s.prototype.updateLayerable=function(){(this.parentView||this).render()},s.prototype.__clearItems=function(){var e;(e=this.items)===null||e===void 0||e.remove()},s.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return N.G7.prototype.remove.apply(this,e),this.__clearItems(),this},s.prototype.render=function(){var e=this,n=e.model,a=e.config,u=e.pfx,m=e.ppfx,O=e.opt,P=e.sorter;this.__clearItems();var j=O.opened,A=O.module,nt=O.ItemView,At=!A.__isLayerable(n),Bt=this.$el.empty(),qt=O.level+1;delete this.inputName,this.items=new Li({ItemView:nt,collection:n.get("components"),config:a,sorter:P,opened:j,parentView:this,parent:n,level:qt,module:A});var be=this.items.render().$el;return a.showWrapper||qt!==1?(Bt.html(this.template(n)),Bt.find(".".concat(this.clsChildren)).append(be)):Bt.append(be),n.get("draggable")&&a.sortable||Bt.children(".".concat(this.clsMove)).remove(),!A.isVisible(n)&&(this.className+=" ".concat(u,"hide")),At&&(this.className+=" ".concat(m,"hidden")),Bt.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},s.prototype.__render=function(){var e=this,n=e.model,a=e.config,u={component:n,el:e.el};a.onRender.bind(this)(u),this.em.trigger("layer:render",u)},s}(N.G7);const qa=Na;var kp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),oi=function(){return oi=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},oi.apply(this,arguments)},yc="layer",pa="".concat(yc,":"),Zl="".concat(pa,"root"),Fu="".concat(pa,"component"),c="".concat(pa,"custom"),d={all:yc,root:Zl,component:Fu,custom:c},b={mediaText:""},y=["open","status","locked","custom-name","components","classes"].map(function(h){return"component:update:".concat(h)}).join(" "),C=function(h){function s(e){var n=h.call(this,e,"LayerManager",to)||this;return n.events=d,(0,k.bindAll)(n,"componentChanged","__onRootChange","__onComponent"),n.model=new It(n,{opened:{}}),n.config.stylePrefix=n.config.pStylePrefix,n}return kp(s,h),s.prototype.onLoad=function(){var e=this,n=this,a=n.em,u=n.config,m=n.model;m.listenTo(a,"component:selected",this.componentChanged),m.on("change:root",this.__onRootChange),m.listenTo(a,y,this.__onComponent),this.componentChanged(),m.listenToOnce(a,"load",function(){e.setRoot(u.root),e.__appendTo()})},s.prototype.setRoot=function(e){var n=this.em.getWrapper(),a=(0,B.isComponent)(e)?e:n;return e&&(0,k.isString)(e)&&(0,B.hasWin)()&&(a=n.find(e)[0]||n),this.model.set("root",a),a},s.prototype.getRoot=function(){return this.model.get("root")},s.prototype.getComponents=function(e){var n=this;return e.components().filter(function(a){return n.__isLayerable(a)})},s.prototype.setOpen=function(e,n){e.set("open",n)},s.prototype.isOpen=function(e){return!!e.get("open")},s.prototype.setVisible=function(e,n){var a="__prev-display",u=e.getStyle(b),m=u.display;if(n){var O=e.get(a);delete u.display,O&&(u.display=O,e.unset(a))}else m&&e.set(a,m),u.display="none";e.setStyle(u,b),this.updateLayer(e),this.em.trigger("component:toggled")},s.prototype.isVisible=function(e){return(n=e.getStyle(b))===void 0&&(n={}),(n.display||"").trim().indexOf("none")!==0;var n},s.prototype.setLocked=function(e,n){e.set("locked",n)},s.prototype.isLocked=function(e){return!!e.get("locked")},s.prototype.setName=function(e,n){e.set("custom-name",n)},s.prototype.getName=function(e){return e.getName()},s.prototype.getLayerData=function(e){var n=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:n==="selected",hovered:n==="hovered",visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},s.prototype.setLayerData=function(e,n,a){var u;a===void 0&&(a={});var m=this.em,O=this.config,P=n.open,j=n.selected,A=n.hovered,nt=n.visible,At=n.locked,Bt=n.name,qt=oi({fromLayers:!0},a);if((0,B.isDef)(P)&&this.setOpen(e,P),(0,B.isDef)(j))if(j){m.setSelected(e,qt);var be=O.scrollCanvas;be&&((u=e.views)===null||u===void 0||u.forEach(function(Ee){return Ee.scrollIntoView(be)}))}else m.removeSelected(e,qt);(0,B.isDef)(A)&&O.showHover&&(A?m.setHovered(e,qt):m.setHovered(null,qt)),(0,B.isDef)(nt)&&nt!==this.isVisible(e)&&this.setVisible(e,nt),(0,B.isDef)(At)&&this.setLocked(e,At),(0,B.isDef)(Bt)&&this.setName(e,Bt)},s.prototype.componentChanged=function(e,n){var a;if(n===void 0&&(n={}),!n.fromLayers){var u=this.em,m=this.config.scrollLayers,O=this.model.get("opened"),P=u.getSelected(),j=P==null?void 0:P.parent();for(var A in O)O[A].set("open",!1),delete O[A];for(;j;)j.set("open",!0),O[j.cid]=j,j=j.parent();if(P&&m){var nt=(a=P.viewLayer)===null||a===void 0?void 0:a.el;nt==null||nt.scrollIntoView(m)}}},s.prototype.getAll=function(){return this.view},s.prototype.render=function(){var e,n,a=this.config,u=this.model,m=qa.extend(a.extend);return this.view=new m({el:(e=this.view)===null||e===void 0?void 0:e.el,ItemView:m,level:0,config:a,opened:u.get("opened"),model:this.getRoot(),module:this}),(n=this.view)===null||n===void 0?void 0:n.render().el},s.prototype.destroy=function(){var e;(e=this.view)===null||e===void 0||e.remove()},s.prototype.__onRootChange=function(){var e,n=this.getRoot();(e=this.view)===null||e===void 0||e.setRoot(n),this.em.trigger(Zl,n)},s.prototype.__onComponent=function(e){this.updateLayer(e)},s.prototype.__isLayerable=function(e){var n=e.get("tagName");return(!this.config.hideTextnode||!e.is("textnode")&&n!=="br")&&e.get("layerable")},s.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,{container:e.container,root:this.getRoot()})},s.prototype.updateLayer=function(e,n){this.em.trigger(Fu,e,n)},s}(xt);const L=C,z={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};var J=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ut=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return J(s,h),s.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},s.prototype.defaults=function(){return{type:"",src:""}},s.prototype.getType=function(){return this.get("type")},s.prototype.getSrc=function(){return this.get("src")},s.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},s.prototype.getExtension=function(){return this.getFilename().split(".").pop()},s}(N.Hn);const Pt=ut;ut.prototype.idAttribute="src";var oe=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ve=function(){return ve=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ve.apply(this,arguments)};const Ue=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return oe(s,h),s.prototype.defaults=function(){return ve(ve({},Pt.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},s}(Pt);var Fe=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sr=function(h){function s(e){var n=h.call(this,e)||this;n.options=e,n.collection=e.collection;var a=e.config||{};n.config=a,n.pfx=a.stylePrefix||"",n.ppfx=a.pStylePrefix||"",n.em=a.em,n.className=n.pfx+"asset",n.listenTo(n.model,"destroy remove",n.remove),n.model.view=n;var u=n.init&&n.init.bind(n);return u&&u(e),n}return Fe(s,h),s.prototype.__getBhv=function(){var e=this.em,n=e==null?void 0:e.Assets;return(n==null?void 0:n.__getBehaviour())||{}},s.prototype.template=function(e,n){var a=this.pfx;return`
      <div class="`.concat(a,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(a,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(a,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},s.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,k.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},s.prototype.getPreview=function(){return""},s.prototype.getInfo=function(){return""},s.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},s}(N.G7);const dr=sr;var jr=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rr=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},Kr=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return jr(s,h),s.prototype.getPreview=function(){var e=this,n=e.pfx,a=e.ppfx,u=e.model.get("src");return ct(Zr||(Zr=Rr([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),n,u,n,a)},s.prototype.getInfo=function(){var e=this.pfx,n=this.model,a=n.get("name"),u=n.get("width"),m=n.get("height"),O=n.get("unitDim"),P=u&&m?"".concat(u,"x").concat(m).concat(O):"";return a=a||n.getFilename(),ct(mn||(mn=Rr([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,a,e,P)},s.prototype.init=function(e){var n=this.pfx;this.className+=" ".concat(n,"asset-image")},s.prototype.onClick=function(){var e=this.model,n=this.pfx,a=this.__getBhv().select,u=this.config.onClick,m=this.collection;m.trigger("deselectAll"),this.$el.addClass(n+"highlight"),(0,k.isFunction)(a)?a(e,!1):(0,k.isFunction)(u)?u(e):this.updateTarget(m.target)},s.prototype.onDblClick=function(){var e=this.em,n=this.model,a=this.__getBhv().select,u=this.config.onDblClick,m=this.collection,O=m.target,P=m.onSelect;(0,k.isFunction)(a)?a(n,!0):(0,k.isFunction)(u)?u(n):(this.updateTarget(O),e==null||e.Modal.close()),(0,k.isFunction)(P)&&P(n)},s.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},s}(dr);const zr=Kr;var Zr,mn;Kr.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var un=function(){return un=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},un.apply(this,arguments)},Yn={types:[],initialize:function(h,s){var e=this;s===void 0&&(s={});var n=s.em;this.em=n,this.opts=s,this.model=function(u,m){var O,P,j;if(u===void 0&&(u={}),m===void 0&&(m={}),u&&u.type){var A=e.getBaseType();O=(j=e.getType(u.type))?j.model:A.model,P=j?j.view:A.view}else{var nt=e.recognizeType(u);O=(j=nt.type).model,P=j.view,u=nt.attributes}var At=new O(u,un(un({},m),{em:n}));return At.typeView=P,At};var a=this.init&&this.init.bind(this);a&&a()},recognizeType:function(h){for(var s=this.getTypes(),e=0;e<s.length;e++){var n=s[e],a=n.isType(h);if(a=typeof a=="boolean"&&a?{type:n.id}:a)return{type:n,attributes:a}}return{type:this.getBaseType(),attributes:h}},getBaseType:function(){var h=this.getTypes();return h[h.length-1]},getTypes:function(){return this.types},getType:function(h){for(var s=this.getTypes(),e=0;e<s.length;e++){var n=s[e];if(n.id===h)return n}},addType:function(h,s){var e=this.getType(h),n=this.getBaseType(),a=e?e.model:n.model,u=e?e.view:n.view,m=s.model,O=s.view,P=s.isType;m=m instanceof N.Hn||(0,k.isFunction)(m)?m:a.extend(m||{}),O=O instanceof N.G7||(0,k.isFunction)(O)?O:u.extend(O||{}),!this.extendViewApi||s.model||s.view||(O=O.extend(s)),e?(e.model=m,e.view=O,e.isType=P||e.isType):(s.id=h,s.model=m,s.view=O,s.isType=P||function(j){if(j&&j.type==h)return!0},this.getTypes().unshift(s))}};const qo=Yn;var da=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_i=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return da(s,h),s}(N.FE.extend(qo));const ta=_i;_i.prototype.types=[{id:"image",model:Ue,view:zr,isType:function(h){return typeof h=="string"?{type:"image",src:h}:h}}];var Ka=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zo=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.options=e,n.config=e.config,n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.em=n.config.em;var a=n.collection;return n.listenTo(a,"reset",n.renderAssets),n.listenTo(a,"add",n.addToAsset),n.listenTo(a,"remove",n.removedAsset),n.listenTo(a,"deselectAll",n.deselectAll),n}return Ka(s,h),s.prototype.template=function(e){var n=e.pfx,a=e.ppfx,u=e.em,m="";return this.config.showUrlInput&&(m=`
          <form class="`.concat(n,`add-asset">
            <div class="`).concat(a,"field ").concat(n,`add-field">
              <input placeholder="`).concat(u==null?void 0:u.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(a,'btn-prim">').concat(u==null?void 0:u.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(n,`assets-cont">
      <div class="`).concat(n,`assets-header">
        `).concat(m,`
      </div>
      <div class="`).concat(n,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},s.prototype.handleSubmit=function(e){e.preventDefault();var n=this.getAddInput(),a=n&&n.value.trim(),u=this.config.handleAdd;if(a){n.value="";var m=this.getAssetsEl();m&&(m.scrollTop=0),u?u.bind(this)(a):this.options.globalCollection.add(a,{at:0})}},s.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},s.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},s.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},s.prototype.addToAsset=function(e){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(e)},s.prototype.addAsset=function(e,n){n===void 0&&(n=null);var a=n,u=this.collection,m=this.config,O=new e.typeView({model:e,collection:u,config:m}).render().el;if(a)a.appendChild(O);else{var P=this.getAssetsEl();P&&P.insertBefore(O,P.firstChild)}return O},s.prototype.toggleNoAssets=function(e){e===void 0&&(e=!1);var n=this.$el.find(".".concat(this.pfx,"assets"));if(e)n.empty();else{var a=this.config.noAssets;a&&n.append(a)}},s.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},s.prototype.renderAssets=function(){var e=this,n=document.createDocumentFragment(),a=this.$el.find(".".concat(this.pfx,"assets"));a.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(u){return e.addAsset(u,n)}),a.append(n)},s.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},s}(N.G7);const ps=zo;zo.prototype.events={submit:"handleSubmit"};var ha=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ea=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},zi=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;n.options=e;var a=e.config||{};n.module=e.module,n.config=a,n.em=n.config.em,n.pfx=a.stylePrefix||"",n.ppfx=a.pStylePrefix||"",n.target=n.options.globalCollection||{},n.uploadId=n.pfx+"uploadFile",n.disabled=a.disableUpload!==void 0?a.disableUpload:!a.upload&&!a.embedAsBase64,n.multiUpload=a.multiUpload===void 0||a.multiUpload;var u=a.uploadFile;return u?n.uploadFile=u.bind(n):!a.upload&&a.embedAsBase64&&(n.uploadFile=s.embedAsBase64),n.delegateEvents(),n}return ha(s,h),s.prototype.template=function(e){var n=e.pfx,a=e.title,u=e.uploadId,m=e.disabled,O=e.multiUpload;return ct(Ya||(Ya=ea([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),n,a,u,m?"disabled":"",O?"multiple":"")},s.prototype.events=function(){return{"change [data-input]":"uploadFile"}},s.prototype.onUploadStart=function(){var e=this.module;e&&e.__propEv("asset:upload:start")},s.prototype.onUploadEnd=function(e){var n=this.$el,a=this.module;a&&a.__propEv("asset:upload:end",e);var u=n.find("input");u&&u.val("")},s.prototype.onUploadError=function(e){var n=this.module;console.error(e),this.onUploadEnd(e),n&&n.__propEv("asset:upload:error",e)},s.prototype.onUploadResponse=function(e,n){var a,u=this,m=u.module,O=u.config,P=u.target;try{a=typeof e=="string"?JSON.parse(e):e}catch{a=e}m&&m.__propEv("asset:upload:response",a),O.autoAdd&&P&&P.add(a.data,{at:0}),this.onUploadEnd(e),n==null||n(a)},s.prototype.uploadFile=function(e,n){var a=this,u=e.dataTransfer?e.dataTransfer.files:e.target.files,m=this.config,O=m.beforeUpload;if((O&&O(u))!==!1){var P=new FormData,j=m.params,A=m.customFetch,nt=m.fetchOptions;for(var At in j)P.append(At,j[At]);if(this.multiUpload)for(var Bt=0;Bt<u.length;Bt++)P.append("".concat(m.uploadName,"[]"),u[Bt]);else u.length&&P.append(m.uploadName,u[0]);var qt=m.upload,be=m.headers,Ee="X-Requested-With";if(be[Ee]===void 0&&(be[Ee]="XMLHttpRequest"),qt){this.onUploadStart();var Ce={method:"post",credentials:m.credentials||"include",headers:be,body:P},rr=(nt==null?void 0:nt(Ce))||Ce;return(A?A(qt,rr):ff(qt,rr).then(function(yr){return(yr.status/200|0)==1?yr.text():yr.text().then(function(Jr){return Promise.reject(Jr)})})).then(function(yr){return a.onUploadResponse(yr,n)}).catch(function(yr){return a.onUploadError(yr)})}}},s.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var n=this.uploadForm;"draggable"in n&&(this.uploadForm.ondragover=function(){return n.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return n.className="",!1},this.uploadForm.ondrop=function(a){n.className="",a.preventDefault(),e.uploadFile(a)})}},s.prototype.initDropzone=function(e){var n=this,a=0,u=this.config,m=e.model,O=e.el,P=m.Editor,j=m.Canvas.getBody(),A=this.ppfx,nt="".concat(A,"dropzone-active"),At="".concat(A,"dropzone"),Bt=function(){O.className=O.className.replace(nt,"").trim(),a=0},qt=function(){return a||(O.className+=" ".concat(nt),a=1),!1},be=function(){return Bt(),!1},Ee=function(Ce){if(Bt(),Ce.preventDefault(),Ce.stopPropagation(),n.uploadFile(Ce),u.openAssetsOnDrop&&P){var rr=P.getSelected();P.runCommand("open-assets",{target:rr,onSelect:function(){P.Modal.close(),P.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(At,'">').concat(u.dropzoneContent,"</div>")),Bt(),"draggable"in O&&[O,j].forEach(function(Ce){Ce.ondragover=qt,Ce.ondragleave=be,Ce.ondrop=Ee})},s.prototype.render=function(){var e=this,n=e.$el,a=e.pfx,u=e.em;return n.html(this.template({title:u&&u.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:a})),this.initDrop(),n.attr("class",a+"file-uploader"),this},s.embedAsBase64=function(e,n){var a=this,u=e.dataTransfer?e.dataTransfer.files:e.target.files,m={data:[]};if(FileReader){for(var O=[],P=/^(.+)\/(.+)$/,j=function(At){var Bt=new Promise(function(qt,be){var Ee=new FileReader;Ee.addEventListener("load",function(Ce){var rr,yr=At.name,Jr=P.exec(At.type);if((rr=Jr?Jr[1]:At.type)==="image"){var Qr={src:Ee.result,name:yr,type:rr,height:0,width:0},Sn=new Image;Sn.addEventListener("error",function(Pn){be(Pn)}),Sn.addEventListener("load",function(){Qr.height=Sn.height,Qr.width=Sn.width,qt(Qr)}),Sn.src=Qr.src}else qt(rr?{src:Ee.result,name:yr,type:rr}:Ee.result)}),Ee.addEventListener("error",function(Ce){be(Ce)}),Ee.addEventListener("abort",function(Ce){be("Aborted")}),Ee.readAsDataURL(At)});O.push(Bt)},A=0,nt=u;A<nt.length;A++)j(nt[A]);return Promise.all(O).then(function(At){m.data=At,a.onUploadResponse(m,n)},function(At){a.onUploadError(At)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},s}(N.G7);const ji=zi;var Ya,hf=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ks=function(){return Ks=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ks.apply(this,arguments)},ga=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Ms="asset",mi="".concat(Ms,":"),Ru="".concat(mi,"select"),Pl="".concat(mi,"update"),Hu="".concat(mi,"add"),zc="".concat(mi,"remove"),Za="".concat(zc,":before"),gf="".concat(mi,"custom"),Qp="".concat(mi,"open"),um="".concat(mi,"close"),td="".concat(mi,"upload"),Mg="".concat(td,":start"),fm="".concat(td,":end"),pm="".concat(td,":error"),dm="".concat(td,":response"),ed="open-assets",hm={all:Ms,select:Ru,update:Pl,add:Hu,remove:zc,removeBefore:Za,custom:gf,open:Qp,close:um,uploadStart:Mg,uploadEnd:fm,uploadError:pm,uploadResponse:dm},gm=function(h){function s(e){var n=h.call(this,e,"AssetManager",new ta([],e),hm,z)||this;n.storageKey="assets",n.Asset=Pt,n.Assets=ta;var a=n,u=a.all,m=a.config;n.assetsVis=new ta([]);var O=m.pStylePrefix;return O&&(m.stylePrefix="".concat(O).concat(m.stylePrefix)),u.on("add",function(P){return n.getAllVisible().add(P)}),u.on("remove",function(P){return n.getAllVisible().remove(P)}),n.__onAllEvent=(0,k.debounce)(function(){return n.__trgCustom()},0),n}return hf(s,h),s.prototype.__propEv=function(e){for(var n,a,u=[],m=1;m<arguments.length;m++)u[m-1]=arguments[m];(n=this.em).trigger.apply(n,ga([e],u,!1)),(a=this.getAll()).trigger.apply(a,ga([e],u,!1))},s.prototype.__trgCustom=function(){var e=this.__getBehaviour(),n=this.getConfig().custom;(e.container||n.open)&&this.em.trigger(this.events.custom,this.__customData())},s.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:n.types||[],container:n.container,close:function(){return e.close()},remove:function(a,u){return e.remove(a,u)},select:function(a,u){var m=e.add(a);(0,k.isFunction)(n.select)&&n.select(m,u)},options:n.options||{}}},s.prototype.open=function(e){e===void 0&&(e={}),this.em.Commands.run(ed,Ks({types:["image"],select:function(){}},e))},s.prototype.close=function(){this.em.Commands.stop(ed)},s.prototype.isOpen=function(){var e=this.em.Commands;return!!(e!=null&&e.isActive(ed))},s.prototype.add=function(e,n){return n===void 0&&(n={}),n.at===void 0&&(n.at=0),this.all.add(e,n)},s.prototype.get=function(e){return this.all.where({src:e})[0]||null},s.prototype.getAll=function(){return this.all},s.prototype.getAllVisible=function(){return this.assetsVis},s.prototype.remove=function(e,n){return this.__remove(e,n)},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(e){return this.loadProjectData(e)},s.prototype.getContainer=function(){var e;return this.__getBehaviour().container||((e=this.am)===null||e===void 0?void 0:e.el)},s.prototype.getAssetsEl=function(){var e;return(e=this.am)===null||e===void 0?void 0:e.el.querySelector("[data-el=assets]")},s.prototype.render=function(e){if(!this.getConfig().custom){var n=e||this.getAll().models;if(!this.am){var a=this.__viewParams();a.fu=this.FileUploader(),this.am=new ps(Ks({},a)),this.am.render()}return this.assetsVis.reset(n),this.getContainer()}},s.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},s.prototype.addType=function(e,n){this.getAll().addType(e,n)},s.prototype.getType=function(e){return this.getAll().getType(e)},s.prototype.getTypes=function(){return this.getAll().getTypes()},s.prototype.AssetsView=function(){return this.am},s.prototype.FileUploader=function(){return this.fu||(this.fu=new ji(this.__viewParams())),this.fu},s.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var n=this.em,a=this.events;n.on("run:".concat(ed),function(){return e.__propEv(a.open)}),n.on("stop:".concat(ed),function(){return e.__propEv(a.close)})},s.prototype.postRender=function(e){var n;this.config.dropzone&&((n=this.fu)===null||n===void 0||n.initDropzone(e))},s.prototype.setTarget=function(e){this.assetsVis.target=e},s.prototype.onSelect=function(e){this.assetsVis.onSelect=e},s.prototype.onClick=function(e){this.config.onClick=e},s.prototype.onDblClick=function(e){this.config.onDblClick=e},s.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Ks(Ks({},this._bhv||{}),e)},s.prototype.__getBehaviour=function(e){return this._bhv||{}},s.prototype.destroy=function(){var e,n;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(e=this.fu)===null||e===void 0||e.remove(),(n=this.am)===null||n===void 0||n.remove(),this._bhv={}},s}(Q);const vm=gm;var Eh={placeholder:"eg. Text here"};const Lg={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:Eh,alt:Eh,title:Eh,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};var jg=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Dg=function(h){function s(e){var n=h.call(this,e,"I18n",Lg)||this,a=n.config.messagesAdd;return a&&n.addMessages(a),n.config.detectLocale&&(n.config.locale=n._localLang()),n}return jg(s,h),s.prototype.setLocale=function(e){var n=this.em,a=this.config,u={value:e,valuePrev:a.locale};return n&&n.trigger("i18n:locale",u),a.locale=e,this},s.prototype.getLocale=function(){return this.config.locale},s.prototype.getMessages=function(e,n){n===void 0&&(n={});var a=this.config.messages;return e&&!a[e]&&this._debug("'".concat(e,"' i18n lang not found"),n),e?a[e]:a},s.prototype.setMessages=function(e){var n=this.em;return this.config.messages=e,n&&n.trigger("i18n:update",e),this},s.prototype.addMessages=function(e){var n=this.em,a=this.config.messages;return n&&n.trigger("i18n:add",e),this.setMessages((0,B.deepMerge)(a,e)),this},s.prototype.t=function(e,n){n===void 0&&(n={});var a=this.config,u=n.params||{},m=n.l||this.getLocale(),O=n.lFlb||a.localeFallback,P=this._getMsg(e,m,n);return P||(P=this._getMsg(e,O,n)),!P&&this._debug("'".concat(e,"' i18n key not found in '").concat(m,"' lang"),n),P&&(0,k.isString)(P)?this._addParams(P,u):P},s.prototype._localLang=function(){var e=(0,B.hasWin)()&&window.navigator||{},n=e.language||e.userLanguage;return n?n.split("-")[0]:"en"},s.prototype._addParams=function(e,n){var a=new RegExp("{([\\w\\d-]*)}","g");return e.replace(a,function(u,m){return n[m]||""}).trim()},s.prototype._getMsg=function(e,n,a){a===void 0&&(a={});var u=this.getMessages(n,a);if(u){var m=u[e];return!m&&e.indexOf(".")>0&&(m=e.split(".").reduce(function(O,P){if(!(0,k.isUndefined)(O))return O[P]},u)),m}},s.prototype._debug=function(e,n){n===void 0&&(n={});var a=this.em,u=this.config;(n.debug||u.debug)&&a&&a.logWarning(e)},s.prototype.destroy=function(){},s}(xt);const Ig=Dg;var mm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vf=function(){return vf=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},vf.apply(this,arguments)},ym=function(){},bm=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return mm(s,h),s.prototype.initialize=function(e){e===void 0&&(e={}),this.opt=e||{},(0,k.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var n=e||{};this.elT=0,this.elL=0,this.borderOffset=n.borderOffset||10;var a=n.container;this.el=typeof a=="string"?document.querySelector(a):a,this.$el=(0,I.default)(this.el),this.containerSel=n.containerSel||"div",this.itemSel=n.itemSel||"div",this.draggable=n.draggable||!0,this.nested=!!n.nested,this.pfx=n.pfx||"",this.ppfx=n.ppfx||"",this.freezeClass=n.freezeClass||this.pfx+"freezed",this.onStart=n.onStart||ym,this.onEndMove=n.onEndMove,this.customTarget=n.customTarget,this.onEnd=n.onEnd,this.direction=n.direction||"v",this.onMoveClb=n.onMove,this.relative=n.relative||!1,this.ignoreViewChildren=!!n.ignoreViewChildren,this.plh=n.placer,this.wmargin=n.wmargin||0,this.offTop=n.offsetTop||0,this.offLeft=n.offsetLeft||0,this.document=n.document||document,this.em=n.em,this.canvasRelative=!!n.canvasRelative,this.selectOnEnd=!n.avoidSelectOnEnd,this.scale=n.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},s.prototype.getScale=function(){return(0,k.result)(this,"scale")||1},s.prototype.getContainerEl=function(e){if(e&&(this.el=e),!this.el){var n=this.opt.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,I.default)(this.el)}return this.el},s.prototype.getDocuments=function(e){var n=this.em,a=e?e.ownerDocument:n==null?void 0:n.Canvas.getBody().ownerDocument,u=[document];return a&&u.push(a),u},s.prototype.updateOffset=function(){var e,n=((e=this.em)===null||e===void 0?void 0:e.get("canvasOffset"))||{};this.offTop=n.top,this.offLeft=n.left},s.prototype.setDropContent=function(e){delete this.dropModel,this.dropContent=e},s.prototype.updateTextViewCursorPosition=function(e){var n=this.em;if(n){var a=n.get("Canvas"),u=a.getDocument(),m=null;if(u.caretRangeFromPoint){var O=(0,B.getPointerEvent)(e);m=u.caretRangeFromPoint(O.clientX,O.clientY)}else e.rangeParent&&(m=u.createRange()).setStart(e.rangeParent,e.rangeOffset);var P=a.getWindow().getSelection();a.getFrameEl().focus(),P.removeAllRanges(),m&&P.addRange(m),this.setContentEditable(this.activeTextModel,!0)}},s.prototype.setContentEditable=function(e,n){if(e){var a=e.getEl();a.contentEditable!=n&&(a.contentEditable=n)}},s.prototype.toggleSortCursor=function(e){var n=this.em,a=n&&n.get("Canvas");a&&(e?a.startAutoscroll():a.stopAutoscroll())},s.prototype.setDragHelper=function(e,n){for(var a=n||"",u=e.cloneNode(!0),m=e.getBoundingClientRect(),O=getComputedStyle(e),P="",j=0;j<O.length;j++){var A=O[j];P+="".concat(A,":").concat(O.getPropertyValue(A),";")}document.body.appendChild(u),u.className+=" ".concat(this.pfx,"bdrag"),u.setAttribute("style",P),this.dragHelper=u,u.style.width="".concat(m.width,"px"),u.style.height="".concat(m.height,"px"),a&&this.moveDragHelper(a),this.em&&(0,I.default)(this.em.Canvas.getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),(0,I.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},s.prototype.moveDragHelper=function(e){var n=e.target.ownerDocument;if(this.dragHelper&&n){var a=e.pageY,u=e.pageX,m=0,O=0,P=(n.defaultView||n.parentWindow).frameElement,j=this.dragHelper.style;if(P){var A=P.getBoundingClientRect();m=A.top+document.documentElement.scrollTop,O=A.left+document.documentElement.scrollLeft,a=e.clientY,u=e.clientX}j.top=a+m+"px",j.left=u+O+"px"}},s.prototype.matches=function(e,n){return B.matches.call(e,n)},s.prototype.closest=function(e,n){if(e)for(var a=e.parentNode;a&&a.nodeType===1;){if(this.matches(a,n))return a;a=a.parentNode}},s.prototype.offset=function(e){var n=e.getBoundingClientRect();return{top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft}},s.prototype.createPlaceholder=function(){var e=this.pfx,n=document.createElement("div"),a=document.createElement("div");return n.className=e+"placeholder",n.style.display="none",n.style.pointerEvents="none",a.className=e+"placeholder-int",n.appendChild(a),n},s.prototype.startSort=function(e,n){var a,u;n===void 0&&(n={});var m,O=this,P=O.em,j=O.itemSel,A=O.containerSel,nt=O.plh,At=this.getContainerEl(n.container),Bt=this.getDocuments(e);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,e&&!this.matches(e,"".concat(j,", ").concat(A))&&(e=this.closest(e,j)),this.sourceEl=e,nt||(this.plh=this.createPlaceholder(),At.appendChild(this.plh)),e&&((m=this.getSourceModel(e))&&m.set&&m.set("status","freezed"),this.srcModel=m),(0,B.on)(At,"mousemove dragover",this.onMove),(0,B.on)(Bt,"mouseup dragend touchend",this.endMove),(0,B.on)(Bt,"keydown",this.rollback),this.onStart({sorter:this,target:m,parent:m&&((a=m.parent)===null||a===void 0?void 0:a.call(m)),index:m&&((u=m.index)===null||u===void 0?void 0:u.call(m))}),P==null||P.clearSelection(),this.toggleSortCursor(!0),P==null||P.trigger("sorter:drag:start",e,m)},s.prototype.getTargetModel=function(e){var n=e||this.target;return(0,I.default)(n).data("model")},s.prototype.getSourceModel=function(e,n){var a=this,u=n===void 0?{}:n,m=u.target,O=u.avoidChildren,P=O===void 0?1:O,j=this.em,A=this.sourceEl,nt=e||A,At=this.dropModel,Bt=this.dropContent,qt=function(rr){return rr&&m&&rr.opt&&rr.opt.avoidChildren&&a.isTextableActive(rr,m)};if(Bt&&j){if(qt(At)&&(At=void 0),!At){var be=j.Components.getComponents(),Ee={avoidChildren:P,avoidStore:1,avoidUpdateStyle:1},Ce=be.add(Bt,vf(vf({},Ee),{temporary:!0}));if(At=(At=be.remove(Ce,Ee))instanceof Array?At[0]:At,this.dropModel=At,qt(At))return this.getSourceModel(nt,{target:m,avoidChildren:0})}return At}return nt&&(0,I.default)(nt).data("model")},s.prototype.selectTargetModel=function(e,n){if(!(e instanceof N.FE||n&&n===e)){var a=this.targetModel;a&&a!==this.srcModel&&a.set("status",""),e&&e.set&&(e.set("status","selected-parent"),this.targetModel=e)}},s.prototype.onMove=function(e){var n=e,a=this,u=a.em,m=a.onMoveClb,O=a.plh,P=a.customTarget;this.moved=!0;var j=O.style.display;j&&j!=="none"||(O.style.display="block");var A=this.offset(this.el);this.elT=this.wmargin?Math.abs(A.top):A.top,this.elL=this.wmargin?Math.abs(A.left):A.left;var nt=e.pageY-this.elT+this.el.scrollTop,At=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&u){var Bt=u.get("Canvas").getMouseRelativeCanvas(e,{noScroll:1});At=Bt.x,nt=Bt.y}this.rX=At,this.rY=nt,this.eventMove=e;var qt=this.getSourceModel(),be=P?P({sorter:this,event:e}):e.target,Ee=this.dimsFromTarget(be,At,nt),Ce=this.target,rr=Ce&&this.getTargetModel(Ce);if(this.selectTargetModel(rr,qt),rr||(O.style.display="none"),Ce){this.lastDims=Ee;var yr=this.findPosition(Ee,At,nt);this.isTextableActive(qt,rr)?(this.activeTextModel=rr,O.style.display="none",this.lastPos=yr,this.updateTextViewCursorPosition(n)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==yr.index&&this.lastPos.method==yr.method||(this.movePlaceholder(this.plh,Ee,yr,this.prevTargetDim),this.$plh||(this.$plh=(0,I.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=yr)),(0,k.isFunction)(m)&&m({event:e,target:qt,parent:rr,index:yr.index+(yr.method=="after"?1:0)}),u&&u.trigger("sorter:drag",{target:Ce,targetModel:rr,sourceModel:qt,dims:Ee,pos:yr,x:At,y:nt})}},s.prototype.isTextableActive=function(e,n){var a;return((a=e==null?void 0:e.get)===null||a===void 0?void 0:a.call(e,"textable"))&&(n==null?void 0:n.isInstanceOf("text"))},s.prototype.disableTextable=function(){var e=this.activeTextModel;e==null||e.getView().disableEditing(),this.setContentEditable(e,!1)},s.prototype.isInFlow=function(e,n){if(!e)return!1;n=n||document.body;var a=e;return a.offsetHeight,!!this.styleInFlow(a,n)},s.prototype.styleInFlow=function(e,n){if(!(0,B.isTextNode)(e)){var a=e.style||{},u=(0,I.default)(e),m=n&&(0,I.default)(n);if(!a.overflow||a.overflow==="visible"){var O=u.css("float");if(!(O&&O!=="none"||m&&m.css("display")=="flex"&&m.css("flex-direction")!=="column")){switch(a.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(u.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},s.prototype.validTarget=function(e,n){var a=this.getTargetModel(e),u=this.getSourceModel(n,{target:a}),m={valid:!0,src:n=u&&u.view&&u.view.el,srcModel:u,trg:e=a&&a.view&&a.view.el,trgModel:a,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!n||!e)return m.valid=!1,m;var O=u.get("draggable");if((0,k.isFunction)(O)){var P=O(u,a);m.dragInfo=P,m.draggable=P,O=P}else O=O instanceof Array?O.join(", "):O,m.dragInfo=O,O=(0,k.isString)(O)?this.matches(e,O):O,m.draggable=O;var j=a.get("droppable");return(0,k.isFunction)(j)?(P=j(u,a),m.droppable=P,m.dropInfo=P,j=P):(j=(j=j instanceof N.FE?1:j)instanceof Array?j.join(", "):j,m.dropInfo=j,j=(0,k.isString)(j)?this.matches(n,j):j,j=O&&this.isTextableActive(u,a)?1:j,m.droppable=j),j&&O||(m.valid=!1),m},s.prototype.dimsFromTarget=function(e,n,a){var u=this.em,m=[];if(!e||(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e))return m;if(this.prevTarget&&this.prevTarget!=e&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var O=this.validTarget(e);if(u&&u.trigger("sorter:drag:validation",O),!O.valid&&this.targetP)return this.dimsFromTarget(this.targetP,n,a);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(m=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,n,a)||!this.nested&&!this.cacheDims.length){var P=this.targetP;P&&this.validTarget(P).valid&&(m=this.cacheDimsP,this.target=P)}return delete this.lastPos,m},s.prototype.getTargetFromEl=function(e){var n,a=e,u=this.targetPrev,m=this.em,O=this.containerSel,P=this.itemSel;if(this.matches(a,"".concat(P,", ").concat(O))||(a=this.closest(a,P)),this.draggable instanceof Array&&(a=this.closest(a,this.draggable.join(","))),u&&u!=a&&delete this.targetPrev,!this.targetPrev){n=this.closest(a,O);var j=this.validTarget(a);if(m&&m.trigger("sorter:drag:validation",j),!j.valid&&n)return this.getTargetFromEl(n);this.targetPrev=a}return this.nearElBorders(a)&&(n=this.closest(a,O))&&this.validTarget(n).valid&&(a=n),a},s.prototype.nearElBorders=function(e){var n=10,a=e.getBoundingClientRect(),u=e.ownerDocument.body,m=this.getCurrentPos(),O=m.x,P=m.y,j=a.top+u.scrollTop,A=a.left+u.scrollLeft,nt=a.width,At=a.height;if(P<j+n||P>j+At-n||O<A+n||O>A+nt-n)return 1},s.prototype.getCurrentPos=function(){var e=this.eventMove;return{x:(e==null?void 0:e.pageX)||0,y:(e==null?void 0:e.pageY)||0}},s.prototype.getDim=function(e){var n,a,u,m,O=this.em,P=this.canvasRelative,j=O==null?void 0:O.Canvas,A=j?j.getElementOffsets(e):{};if(P&&O){var nt=j.getElementPos(e,{noScroll:1});n=nt.top,a=nt.left,u=nt.height,m=nt.width}else{var At=this.offset(e);n=this.relative?e.offsetTop:At.top-(this.wmargin?-1:1)*this.elT,a=this.relative?e.offsetLeft:At.left-(this.wmargin?-1:1)*this.elL,u=e.offsetHeight,m=e.offsetWidth}return{top:n,left:a,height:u,width:m,offsets:A}},s.prototype.getChildrenDim=function(e){var n=this,a=[];if(!e)return a;var u=this.getTargetModel(e);if(u&&u.view&&!this.ignoreViewChildren){var m=u.getCurrentView?u.getCurrentView():u.view;e=m.getChildrenContainer()}return(0,k.each)(e.children,function(O,P){var j=O,A=(0,B.getModel)(j,I.default),nt=A&&A.index?A.index():P;if((0,B.isTextNode)(j)||n.matches(j,n.itemSel)){var At,Bt=n.getDim(j),qt=n.direction;At=qt=="v"||qt!="h"&&n.isInFlow(j,e),Bt.dir=At,Bt.el=j,Bt.indexEl=nt,a.push(Bt)}}),a},s.prototype.nearBorders=function(e,n,a){var u=!1,m=this.borderOffset,O=n||0,P=a||0,j=e.top,A=e.left,nt=e.height,At=e.width;return(j+m>P||P>j+nt-m||A+m>O||O>A+At-m)&&(u=!0),u},s.prototype.findPosition=function(e,n,a){for(var u,m={index:0,indexEl:0,method:"before"},O=0,P=0,j=0,A=0,nt=0,At=0,Bt=0,qt=e.length;Bt<qt;Bt++){var be=(u=e[Bt]).top,Ee=u.left,Ce=u.height,rr=u.width;if(At=be+Ce,A=Ee+rr/2,nt=be+Ce/2,!(P&&Ee>P||j&&nt>=j||O&&Ee+rr<O))if(m.index=Bt,m.indexEl=u.indexEl,u.dir){if(a<nt){m.method="before";break}m.method="after"}else a<At&&(j=At),n<A?(P=A,m.method="before"):(O=A,m.method="after")}return m},s.prototype.movePlaceholder=function(e,n,a,u){var m=0,O=0,P=0,j="",A="",nt="px",At=5,Bt=a.method,qt=n[a.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),qt){var be=qt.top,Ee=qt.left,Ce=qt.height,rr=qt.width;qt.dir?(j=rr+nt,A="auto",O=Bt=="before"?be-m:be+Ce-m,P=Ee):(j="auto",A=Ce-2*m+nt,O=be+m,P=Bt=="before"?Ee-m:Ee+rr-m,e.classList.remove("horizontal"),e.classList.add("vertical"))}else{if(!this.nested)return void(e.style.display="none");if(u){var yr=u.offsets||{},Jr=yr.paddingTop||At,Qr=yr.paddingLeft||At;O=u.top+Jr,P=u.left+Qr,j=parseInt("".concat(u.width))-2*Qr+nt,A="auto"}}e.style.top=O+nt,e.style.left=P+nt,j&&(e.style.width=j),A&&(e.style.height=A)},s.prototype.parents=function(e){return e?[e].concat(this.parents(e.parent())):[]},s.prototype.sort=function(e,n){var a=e.parents.filter(function(m){return n.parents.includes(m)})[0];if(!a)return n.model.index()-e.model.index();var u=e.parents[e.parents.indexOf(a)-1];return n.parents[n.parents.indexOf(a)-1].index()-u.index()},s.prototype.endMove=function(){var e,n=this,a=this.sourceEl,u=[],m=this.getDocuments(),O=this.getContainerEl(),P=this.onEndMove,j=this.onEnd,A=this.target,nt=this.lastPos;if((0,B.off)(O,"mousemove dragover",this.onMove),(0,B.off)(m,"mouseup dragend touchend",this.endMove),(0,B.off)(m,"keydown",this.rollback),this.plh.style.display="none",a&&(e=this.getSourceModel(),this.selectOnEnd&&e&&e.set&&(e.set("status",""),e.set("status","selected"))),this.moved&&A){var At=this.toMove,Bt=(0,k.isArray)(At)?At:At?[At]:[a],qt=0;Bt.length===1?u.push(this.move(A,Bt[0],nt)):Bt.map(function(Ce){return{model:Ce,parents:n.parents(Ce)}}).sort(this.sort).forEach(function(Ce){var rr=Ce.model,yr=rr.index(),Jr=rr.parent().getEl();u.push(n.move(A,rr,vf(vf({},nt),{indexEl:nt.indexEl-qt,index:nt.index-qt}))),Jr===A&&yr<=nt.index&&qt++})}this.plh&&(this.plh.style.display="none");var be=this.dragHelper;if(be&&(be.parentNode.removeChild(be),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,k.isFunction)(P)){var Ee={target:e,parent:e&&e.parent(),index:e&&e.index()};u.length?u.forEach(function(Ce){return P(Ce,n,Ee)}):P(null,this,vf(vf({},Ee),{cancelled:1}))}(0,k.isFunction)(j)&&j({sorter:this})},s.prototype.move=function(e,n,a){var u,m,O=this.em,P=this.dropContent,j=(0,B.getElement)(n),A=[],nt=a.method==="after"?a.indexEl+1:a.indexEl,At=this.validTarget(e,j),Bt=(0,I.default)(e).data("collection"),qt=At.trgModel,be=At.srcModel,Ee=At.draggable,Ce=qt instanceof N.FE?1:At.droppable;if(Bt&&Ce&&Ee){var rr={at:nt,action:"move-component"},yr=this.isTextableActive(be,qt);if(P)u=(0,k.isFunction)(P)?P():P,rr.avoidUpdateStyle=!0,rr.action="add-component";else{var Jr=be.collection.indexOf(be),Qr=Bt===be.collection;(!Qr||Jr!==nt&&Jr!==nt-1||yr)&&(u=be.collection.remove(be,{temporary:!0}),Qr&&nt>Jr&&(rr.at=nt-1))}u&&(yr?(delete rr.at,m=qt.getView().insertComponent(u,rr)):m=Bt.add(u,rr)),delete this.dropContent,delete this.prevTarget}else if(O){var Sn=At.dropInfo||(qt==null?void 0:qt.get("droppable")),Pn=At.dragInfo||(be==null?void 0:be.get("draggable"));!Bt&&A.push("Target collection not found"),!Ce&&Sn&&A.push("Target is not droppable, accepts [".concat(Sn,"]")),!Ee&&Pn&&A.push("Component not draggable, acceptable by [".concat(Pn,"]")),O.logWarning("Invalid target position",{errors:A,model:be,context:"sorter",target:qt})}return O==null||O.trigger("sorter:drag:end",{targetCollection:Bt,modelToDrop:u,warns:A,validResult:At,dst:e,srcEl:j}),m},s.prototype.rollback=function(e){(0,B.off)(this.getDocuments(),"keydown",this.rollback),(e.which||e.keyCode)==27&&(this.moved=!1,this.endMove())},s}(N.G7);const wm=bm;var rp=function(){return rp=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},rp.apply(this,arguments)},_m=function(){function h(s){s===void 0&&(s={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=rp({},this.defOpts),this.setOptions(s),(0,k.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return h.prototype.getConfig=function(){return this.opts},h.prototype.setOptions=function(s,e){s===void 0&&(s={}),this.opts=rp(rp({},e?this.defOpts:this.opts),s),this.setup()},h.prototype.setup=function(){var s=this.opts,e=s.prefix||"",n=s.appendTo||document.body,a=this.container;for(a||((a=document.createElement("div")).className="".concat(e,"resizer-c"),n.appendChild(a),this.container=a);a.firstChild;)a.removeChild(a.firstChild);var u={};for(var m in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(P){return u[P]=s[P]?function(j,A){A===void 0&&(A={});var nt=A.prefix||"",At=document.createElement("i");return At.className=nt+"resizer-h "+nt+"resizer-h-"+j,At.setAttribute("data-"+nt+"handler",j),At}(P,s):null}),u){var O=u[m];O&&a.appendChild(O)}this.handlers=u,this.mousePosFetcher=s.mousePosFetcher,this.updateTarget=s.updateTarget,this.posFetcher=s.posFetcher,this.onStart=s.onStart,this.onMove=s.onMove,this.onEnd=s.onEnd,this.onUpdateContainer=s.onUpdateContainer},h.prototype.toggleFrames=function(s){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,k.each)(e,function(n){return n.style.pointerEvents=s?"none":""})}},h.prototype.isHandler=function(s){var e=this.handlers;for(var n in e)if(e[n]===s)return!0;return!1},h.prototype.getFocusedEl=function(){return this.el},h.prototype.getParentEl=function(){var s;return(s=this.el)===null||s===void 0?void 0:s.parentElement},h.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},h.prototype.getElementPos=function(s,e){e===void 0&&(e={});var n=this.posFetcher;return n?n(s,e):function(a,u){var m=window,O=a.getBoundingClientRect();return{left:O.left+m.pageXOffset,top:O.top+m.pageYOffset,width:O.width,height:O.height}}(s)},h.prototype.focus=function(s){s&&s===this.el||(this.el=s,this.updateContainer({forceShow:!0}),(0,B.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},h.prototype.blur=function(){this.container.style.display="none",this.el&&((0,B.off)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},h.prototype.start=function(s){var e=s;if(e.button===0){e.preventDefault(),e.stopPropagation();var n=this.el,a=this.getParentEl(),u=this.opts||{},m=this.mousePosFetcher,O="data-"+u.prefix+"handler",P=this.getElementPos(n,{avoidFrameZoom:!0,avoidFrameOffset:!0}),j=this.getElementPos(a),A=e.target;this.handlerAttr=A.getAttribute(O),this.clickedHandler=A,this.startDim={t:P.top,l:P.left,w:P.width,h:P.height},this.rectDim={t:P.top,l:P.left,w:P.width,h:P.height},this.startPos=m?m(e):{x:e.clientX,y:e.clientY},this.parentDim={t:j.top,l:j.left,w:j.width,h:j.height};var nt=this.getDocumentEl();this.docs=nt,(0,B.on)(nt,"pointermove",this.move),(0,B.on)(nt,"keydown",this.handleKeyDown),(0,B.on)(nt,"pointerup",this.stop),(0,k.isFunction)(this.onStart)&&this.onStart(e,{docs:nt,config:u,el:n,resizer:this}),this.toggleFrames(!0),this.move(e)}},h.prototype.move=function(s){var e=s,n=this.onMove,a=this.mousePosFetcher,u=a?a(e):{x:e.clientX,y:e.clientY};this.currentPos=u,this.delta={x:u.x-this.startPos.x,y:u.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),n&&n(e)},h.prototype.stop=function(s){var e=this.el,n=this.opts,a=this.docs||this.getDocumentEl();(0,B.off)(a,"pointermove",this.move),(0,B.off)(a,"keydown",this.handleKeyDown),(0,B.off)(a,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,k.isFunction)(this.onEnd)&&this.onEnd(s,{docs:a,config:n,el:e,resizer:this}),delete this.docs},h.prototype.updateRect=function(s){var e=this.el,n=this.opts,a=this.rectDim,u=this.updateTarget,m=this.getSelectedHandler(),O=n.unitHeight,P=n.unitWidth,j=n.keyWidth,A=n.keyHeight;if((0,k.isFunction)(u))u(e,a,{store:s,selectedHandler:m,resizer:this,config:n});else{var nt=e.style;nt[j]=a.w+P,nt[A]=a.h+O,nt.top=a.t+O,nt.left=a.l+P}this.updateContainer()},h.prototype.updateContainer=function(s){var e;s===void 0&&(s={});var n=this,a=n.opts,u=n.container,m=n.el,O=u.style;!a.avoidContainerUpdate&&m&&s.forceShow&&(O.display="block"),(e=this.onUpdateContainer)===null||e===void 0||e.call(this,{el:u,resizer:this,opts:rp(rp({},a),s)})},h.prototype.getSelectedHandler=function(){var s=this.handlers;if(this.selectedHandler){for(var e in s)if(s[e]===this.selectedHandler)return e}},h.prototype.handleKeyDown=function(s){s.keyCode===27&&(this.rectDim=this.startDim,this.stop(s))},h.prototype.handleMouseDown=function(s){var e=s.target;this.isHandler(e)?(this.selectedHandler=e,this.start(s)):e!==this.el&&(delete this.selectedHandler,this.blur())},h.prototype.calc=function(s){var e,n=this.opts||{},a=n.step,u=this.startDim,m=n.minDim,O=n.maxDim,P=s.delta.x,j=s.delta.y,A=this.parentDim.w,nt=this.parentDim.h,At=this.opts.unitWidth,Bt=this.opts.unitHeight,qt=At==="%"?u.w/100*A:u.w,be=Bt==="%"?u.h/100*nt:u.h,Ee={t:u.t,l:u.l,w:qt,h:be};if(s){var Ce=s.handlerAttr;~Ce.indexOf("r")&&(e=At==="%"?(0,B.normalizeFloat)((qt+P*a)/A*100,.01):(0,B.normalizeFloat)(qt+P*a,a),e=Math.max(m,e),O&&(e=Math.min(O,e)),Ee.w=e),~Ce.indexOf("b")&&(e=Bt==="%"?(0,B.normalizeFloat)((be+j*a)/nt*100,.01):(0,B.normalizeFloat)(be+j*a,a),e=Math.max(m,e),O&&(e=Math.min(O,e)),Ee.h=e),~Ce.indexOf("l")&&(e=At==="%"?(0,B.normalizeFloat)((qt-P*a)/A*100,.01):(0,B.normalizeFloat)(qt-P*a,a),e=Math.max(m,e),O&&(e=Math.min(O,e)),Ee.w=e),~Ce.indexOf("t")&&(e=Bt==="%"?(0,B.normalizeFloat)((be-j*a)/nt*100,.01):(0,B.normalizeFloat)(be-j*a,a),e=Math.max(m,e),O&&(e=Math.min(O,e)),Ee.h=e);var rr=n.ratioDefault?!s.keys.shift:s.keys.shift;if(Ce.indexOf("c")<0&&rr){var yr=u.w/u.h;Ee.w/Ee.h>yr?Ee.h=Math.round(Ee.w/yr):Ee.w=Math.round(Ee.h*yr)}for(var Jr in~Ce.indexOf("l")&&(Ee.l+=u.w-Ee.w),~Ce.indexOf("t")&&(Ee.t+=u.h-Ee.h),Ee){var Qr=Jr;Ee[Qr]=parseInt("".concat(Ee[Qr]),10)}return Ee}},h}();const xm=_m;var Cm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rd=function(){return rd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},rd.apply(this,arguments)};const Sm=function(h){function s(e){var n=h.call(this,e,"Utils")||this;return n.Sorter=wm,n.Resizer=xm,n.Dragger=Oo.Z,n.helpers=rd({},B),n}return Cm(s,h),s.prototype.destroy=function(){},s}(xt);var kl,Xl={},Ys={16:!1,18:!1,17:!1,91:!1},nd="all",mf={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Ph={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Id=function(h){return Ph[h]||h.toUpperCase().charCodeAt(0)},np=[];for(kl=1;kl<20;kl++)Ph["f"+kl]=111+kl;function Ap(h,s){for(var e=h.length;e--;)if(h[e]===s)return e;return-1}function Ng(h,s){if(h.length!=s.length)return!1;for(var e=0;e<h.length;e++)if(h[e]!==s[e])return!1;return!0}var Om={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Tm(h){var s,e=h.keyCode,n=Ap(np,e);if(n>=0&&np.splice(n,1),e!=93&&e!=224||(e=91),e in Ys)for(s in Ys[e]=!1,mf)mf[s]==e&&(Ls[s]=!1)}function Em(){for(kl in Ys)Ys[kl]=!1;for(kl in mf)Ls[kl]=!1}function Ls(h,s,e){var n,a;n=Vg(h),e===void 0&&(e=s,s="all");for(var u=0;u<n.length;u++)a=[],(h=n[u].split("+")).length>1&&(a=Fg(h),h=[h[h.length-1]]),h=h[0],(h=Id(h))in Xl||(Xl[h]=[]),Xl[h].push({shortcut:n[u],scope:s,method:e,key:n[u],mods:a})}for(kl in mf)Ls[kl]=!1;function Mp(){return nd||"all"}function Vg(h){var s;return(s=(h=h.replace(/\s/g,"")).split(","))[s.length-1]==""&&(s[s.length-2]+=","),s}function Fg(h){for(var s=h.slice(0,h.length-1),e=0;e<s.length;e++)s[e]=mf[s[e]];return s}function kh(h,s,e){h.addEventListener?h.addEventListener(s,e,!1):h.attachEvent&&h.attachEvent("on"+s,function(){e(window.event)})}Ls.setScope=function(h){nd=h||"all"},Ls.getScope=Mp,Ls.deleteScope=function(h){var s,e,n;for(s in Xl)for(e=Xl[s],n=0;n<e.length;)e[n].scope===h?e.splice(n,1):n++},Ls.filter=function(h){var s=(h.target||h.srcElement).tagName;return!(s=="INPUT"||s=="SELECT"||s=="TEXTAREA")},Ls.isPressed=function(h){return typeof h=="string"&&(h=Id(h)),Ap(np,h)!=-1},Ls.getPressedKeyCodes=function(){return np.slice(0)},Ls.unbind=function(h,s){var e,n,a,u,m,O=[];for(e=Vg(h),u=0;u<e.length;u++){if((n=e[u].split("+")).length>1&&(O=Fg(n)),h=n[n.length-1],h=Id(h),s===void 0&&(s=Mp()),!Xl[h])return;for(a=0;a<Xl[h].length;a++)(m=Xl[h][a]).scope===s&&Ng(m.mods,O)&&(Xl[h][a]={})}},Ls.handlers=Xl,Ls.init=function(h){kh(h.document,"keydown",function(s){(function(e){var n,a,u,m,O,P;if(n=e.keyCode,Ap(np,n)==-1&&np.push(n),n!=93&&n!=224||(n=91),n in Ys)for(u in Ys[n]=!0,mf)mf[u]==n&&(Ls[u]=!0);else if(function(j){for(kl in Ys)Ys[kl]=j[Om[kl]]}(e),Ls.filter.call(this,e)&&n in Xl){for(P=Mp(),m=0;m<Xl[n].length;m++)if((a=Xl[n][m]).scope==P||a.scope=="all"){for(u in O=a.mods.length>0,Ys)(!Ys[u]&&Ap(a.mods,+u)>-1||Ys[u]&&Ap(a.mods,+u)==-1)&&(O=!1);(a.mods.length!=0||Ys[16]||Ys[18]||Ys[17]||Ys[91])&&!O||a.method(e,a)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}})(s)}),kh(h.document,"keyup",Tm),kh(h,"focus",Em)};const op=Ls,Rg={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};var Ah=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mh=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))};(0,B.hasWin)()&&op.init(window);var Hg=function(h){function s(e){var n=h.call(this,e,"Keymaps",Rg)||this;return n.keymaster=op,n.keymaps={},n}return Ah(s,h),s.prototype.onLoad=function(){var e=this.config.defaults;for(var n in e){var a=e[n];this.add(n,a.keys,a.handler,a.opts||{})}},s.prototype.add=function(e,n,a,u){u===void 0&&(u={});var m=this.em,O=m.Commands,P=m.getEditor(),j=m.Canvas,A={id:e,keys:n,handler:a};return this.keymaps[e]&&this.remove(e),this.keymaps[e]=A,op(n,function(nt,At){var Bt={event:nt,h:At},qt=(0,k.isString)(a)?O.get(a):a;if(!m.isEditing()&&!P.Canvas.isInputFocused()||u.force){u.prevent&&j.getCanvasView().preventDefault(nt),(0,k.isFunction)(qt)?qt(P,0,Bt):O.runCommand(qt,Bt);var be=[e,At.shortcut,nt];m.trigger.apply(m,Mh(["keymap:emit"],be,!1)),m.trigger.apply(m,Mh(["keymap:emit:".concat(e)],be,!1))}},void 0),m.trigger("keymap:add",A),A},s.prototype.get=function(e){return this.keymaps[e]},s.prototype.getAll=function(){return this.keymaps},s.prototype.remove=function(e){var n=this.em,a=this.get(e);if(a)return delete this.keymaps[e],a.keys.split(", ").forEach(function(u){op.unbind(u.trim())}),n==null||n.trigger("keymap:remove",a),a},s.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(n){return e.remove(n)}),op.handlers={},this},s.prototype.destroy=function(){this.removeAll(),this.keymaps={}},s}(xt);const Pm=Hg,km={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};var Lh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Am=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Lh(s,h),s.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},s.prototype.open=function(){this.set("open",!0)},s.prototype.close=function(){this.set("open",!1)},s}(It);var Mm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nd=function(){return Nd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Nd.apply(this,arguments)};const Lm=function(h){function s(e){var n=h.call(this,e)||this,a=n.model;return n.listenTo(a,"change:open",n.updateOpen),n.listenTo(a,"change:title",n.updateTitle),n.listenTo(a,"change:content",n.updateContent),n}return Mm(s,h),s.prototype.template=function(e){var n=e.pfx,a=e.ppfx,u=e.content,m=e.title;return'<div class="'.concat(n,"dialog ").concat(a,"one-bg ").concat(a,`two-color">
      <div class="`).concat(n,`header">
        <div class="`).concat(n,'title">').concat(m,`</div>
        <div class="`).concat(n,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(n,`content">
        <div id="`).concat(n,'c">').concat(u,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(n,'collector" style="display: none"></div>')},s.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},s.prototype.onClick=function(e){this.config.backdrop&&e.target===this.el&&this.hide()},s.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},s.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},s.prototype.getTitle=function(e){return e===void 0&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},s.prototype.updateContent=function(){var e=this.getContent(),n=e.children(),a=this.getCollector(),u=this.model.get("content");n.length&&a.append(n),e.empty().append(u)},s.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},s.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},s.prototype.hide=function(){this.model.close()},s.prototype.show=function(){this.model.open()},s.prototype.updateAttr=function(e){var n=this,a=n.pfx,u=n.$el,m=n.el,O=[].slice.call(m.attributes).map(function(P){return P.name});u.removeAttr(O.join(" ")),u.attr(Nd(Nd({},e||{}),{class:"".concat(a,"container ").concat(e&&e.class||"").trim()}))},s.prototype.render=function(){var e=this.$el,n=this.model.toJSON();return n.pfx=this.pfx,n.ppfx=this.ppfx,e.html(this.template(n)),this.updateAttr(),this.updateOpen(),this},s}(ho);var jm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Dm=function(h){function s(e){var n=h.call(this,e,"Modal",km)||this;return n.model=new Am(n),n.model.on("change:open",function(a,u){e.trigger("modal:".concat(u?"open":"close"))}),n.model.on("change",(0,k.debounce)(function(){var a=n._evData(),u=n.config.custom;(0,k.isFunction)(u)&&u(a),e.trigger("modal",a)},0)),n}return jm(s,h),s.prototype._evData=function(){var e=this,n=this.getTitle(),a=this.getContent(),u=this.model.attributes;return{open:u.open,attributes:u.attributes,title:(0,k.isString)(n)?(0,vn.rw)(n):n,content:(0,k.isString)(a)?(0,vn.rw)(a):a.get?a.get(0):a,close:function(){e.close()}}},s.prototype.postRender=function(e){var n=e.model.config.el||e.el,a=this.render();a&&(n==null||n.appendChild(a))},s.prototype.open=function(e){e===void 0&&(e={});var n=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",n),this.model.open(),this.modal&&this.modal.updateAttr(n),this},s.prototype.close=function(){return this.model.close(),this},s.prototype.onceClose=function(e){return this.em.once("modal:close",e),this},s.prototype.onceOpen=function(e){return this.em.once("modal:open",e),this},s.prototype.isOpen=function(){return!!this.model.get("open")},s.prototype.setTitle=function(e){return this.model.set("title",e),this},s.prototype.getTitle=function(){return this.model.get("title")},s.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},s.prototype.getContent=function(){return this.model.get("content")},s.prototype.getContentEl=function(){var e;return(e=this.modal)===null||e===void 0?void 0:e.getContent().get(0)},s.prototype.getModel=function(){return this.model},s.prototype.render=function(){var e;if(!this.config.custom){var n=Lm.extend(this.config.extend),a=this.modal&&this.modal.el;return this.modal=new n({el:a,model:this.model,config:this.config}),(e=this.modal)===null||e===void 0?void 0:e.render().el}},s.prototype.destroy=function(){var e;(e=this.modal)===null||e===void 0||e.remove()},s}(xt);var Bg="sw-visibility",jh="export-template",Vd="open-sm",Ug="open-tm",od="open-layers",zg="open-blocks",Dh="fullscreen",Ih="preview";const Nh={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Bg,className:"fa fa-square-o",command:"core:component-outline",context:Bg,attributes:{title:"View components"}},{id:Ih,className:"fa fa-eye",command:Ih,context:Ih,attributes:{title:"Preview"}},{id:Dh,className:"fa fa-arrows-alt",command:Dh,context:Dh,attributes:{title:"Fullscreen"}},{id:jh,className:"fa fa-code",command:jh,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Vd,className:"fa fa-paint-brush",command:Vd,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Ug,className:"fa fa-cog",command:Ug,togglable:!1,attributes:{title:"Settings"}},{id:od,className:"fa fa-bars",command:od,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:zg,className:"fa fa-th-large",command:zg,togglable:!1,attributes:{title:"Open Blocks"}}]}]};var Im=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Wg=function(h){function s(e,n){var a=h.call(this,e,n)||this;return a.get("buttons").length&&a.set("buttons",new Gg(a.module,a.get("buttons"))),a}return Im(s,h),s.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(s.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),s}(It);var $g=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vh=function(h){function s(e,n){return h.call(this,e,n,Wg)||this}return $g(s,h),s.prototype.deactivateAllExceptOne=function(e,n){this.forEach(function(a,u){a!==e&&(a.set("active",!1),n&&a.get("buttons").length&&a.get("buttons").deactivateAllExceptOne(e,n))})},s.prototype.deactivateAll=function(e,n){var a=e||"";this.forEach(function(u){u.get("context")==a&&u!==n&&u.set("active",!1,{fromCollection:!0})})},s.prototype.disableAllButtons=function(e){var n=e||"";this.forEach(function(a,u){a.get("context")==n&&a.set("disable",!0)})},s.prototype.disableAllButtonsExceptOne=function(e,n){this.forEach(function(a,u){a!==e&&(a.set("disable",!0),n&&a.get("buttons").length&&a.get("buttons").disableAllButtonsExceptOne(e,n))})},s}(Yt);const Gg=Vh;Vh.prototype.model=Wg;var qg=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Fh=function(h){function s(e,n){var a=h.call(this,e,n)||this,u=a.get("buttons")||[];return a.buttons=new Gg(e,u),a}return qg(s,h),s.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(s.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),s}(It);var Fd=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Kg=function(h){function s(e,n){return h.call(this,e,n,Fh)||this}return Fd(s,h),s}(Yt);const Yg=Kg;Kg.prototype.model=Fh;var Nm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lp=function(){return Lp=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Lp.apply(this,arguments)},Zg=function(h){function s(e){var n=h.call(this,e)||this,a=n,u=a.model,m=a.em,O=a.pfx,P=a.ppfx,j=u.className,A=u.attributes,nt=A.command,At=A.listen;if(n.id=O+u.get("id"),n.activeCls="".concat(O,"active ").concat(P,"four-color"),n.disableCls="".concat(P,"disabled"),n.btnsVisCls="".concat(O,"visible"),n.className=O+"btn"+(j?" "+j:""),n.listenTo(u,"change",n.render),n.listenTo(u,"change:active updateActive",n.updateActive),n.listenTo(u,"checkActive",n.checkActive),n.listenTo(u,"change:bntsVis",n.updateBtnsVis),n.listenTo(u,"change:attributes",n.updateAttributes),n.listenTo(u,"change:className",n.updateClassName),n.listenTo(u,"change:disable",n.updateDisable),m&&(0,k.isString)(nt)&&At){var Bt={fromListen:!0};n.listenTo(m,"run:".concat(nt),function(){return u.set("active",!0,Bt)}),n.listenTo(m,"stop:".concat(nt),function(){return u.set("active",!1,Bt)})}return m&&m.get&&(n.commands=m.get("Commands")),n}return Nm(s,h),s.prototype.tagName=function(){return this.model.get("tagName")},s.prototype.events=function(){return{click:"clicked"}},s.prototype.updateClassName=function(){var e=this.model,n=this.pfx,a=e.className,u=e.get("attributes").class,m="".concat(u||""," ").concat(n,"btn ").concat(a||"");this.$el.attr("class",m.trim())},s.prototype.updateAttributes=function(){var e=this,n=e.em,a=e.model,u=e.$el,m=a.get("attributes")||{},O=n&&n.t&&n.t("panels.buttons.titles.".concat(a.id));u.attr(m),O&&u.attr({title:O}),this.updateClassName()},s.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},s.prototype.updateActive=function(e,n,a){var u;a===void 0&&(a={});var m=this,O=m.model,P=m.commands,j=m.$el,A=m.activeCls,nt=a.fromCollection,At=a.fromListen,Bt=O.get("context"),qt=O.get("options"),be=O.command,Ee={};be&&(P&&(0,k.isString)(be)?Ee=P.get(be)||{}:(0,k.isFunction)(be)?Ee=P.create({run:be}):be!==null&&(0,k.isObject)(be)&&(Ee=P.create(be)),O.active?(!nt&&((u=O.collection)===null||u===void 0||u.deactivateAll(Bt,O)),O.set("active",!0,{silent:!0}).trigger("checkActive"),!At&&P.runCommand(Ee,Lp(Lp({},qt),{sender:O})),Ee.noStop&&O.set("active",!1)):(j.removeClass(A),!At&&P.stopCommand(Ee,Lp(Lp({},qt),{sender:O,force:1}))))},s.prototype.updateDisable=function(){var e=this.disableCls,n=this.model.disable;this.$el[n?"addClass":"removeClass"](e)},s.prototype.checkActive=function(){var e=this,n=e.model,a=e.$el,u=e.activeCls;n.active?a.addClass(u):a.removeClass(u)},s.prototype.clicked=function(e){var n=this.model;n.get("bntsVis")||n.disable||!n.command||this.toggleActive()},s.prototype.toggleActive=function(){var e=this.model,n=this.em,a=e.active,u=e.togglable;a&&!u||(e.active=!a,a?e.runDefaultCommand&&n.runDefault():e.stopDefaultCommand&&n.stopDefault())},s.prototype.render=function(){var e=this.model,n=e.get("label"),a=this.$el;return!e.get("el")&&a.empty(),this.updateAttributes(),n&&a.append(n),this.checkActive(),this.updateDisable(),this},s}(ho);const Rh=Zg;var Hh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Xg=function(h){function s(e){var n=h.call(this,{collection:e})||this;return n.listenTo(n.collection,"add",n.addTo),n.listenTo(n.collection,"reset remove",n.render),n.className=n.pfx+"buttons",n}return Hh(s,h),s.prototype.addTo=function(e){this.addToCollection(e)},s.prototype.addToCollection=function(e,n){var a=n||null,u=e.get("el"),m=new Rh({el:u,model:e}).render().el;return a?a.appendChild(m):this.$el.append(m),m},s.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(a){return e.addToCollection(a,n)}),this.$el.append(n),this.$el.attr("class",(0,k.result)(this,"className")),this},s}(ho);var Vm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rd=function(){return Rd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Rd.apply(this,arguments)},Fm=function(h){function s(e){var n=h.call(this,{model:e,el:e.get("el")})||this;return n.className=n.pfx+"panel",n.id=n.pfx+e.get("id"),n.listenTo(e,"change:appendContent",n.appendContent),n.listenTo(e,"change:content",n.updateContent),n.listenTo(e,"change:visible",n.toggleVisible),e.view=n,n}return Vm(s,h),s.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},s.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},s.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},s.prototype.attributes=function(){return this.model.get("attributes")},s.prototype.initResize=function(){var e=this.em,n=e==null?void 0:e.Editor,a=this.model.get("resizable");if(n&&a){var u=a===!0?[!0,!0,!0,!0]:a,m=u.length,O=void 0,P=void 0,j=void 0,A=!1;if(m==2)O=(nt=u)[0],j=nt[0],P=nt[1],A=nt[1];else if(m==4){var nt;O=(nt=u)[0],P=nt[1],j=nt[2],A=nt[3]}var At=new n.Utils.Resizer(Rd({tc:O,cr:P,bc:j,cl:A,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:n.getConfig().stylePrefix,onEnd:function(){e&&e.trigger("change:canvasOffset")},posFetcher:function(Bt,qt){var be=qt.target,Ee=Bt.style,Ce=At.getConfig(),rr=Ce.keyWidth,yr=Ce.keyHeight,Jr=Bt.getBoundingClientRect(),Qr=be=="container",Sn=Ee[rr],Pn=Ee[yr];return{left:0,top:0,width:Sn&&!Qr?parseFloat(Sn):Jr.width,height:Pn&&!Qr?parseFloat(Pn):Jr.height}}},a&&typeof a!="boolean"?a:{}));At.blur=function(){},At.focus(this.el)}},s.prototype.render=function(){var e=this.model.buttons,n=this.$el,a=this.ppfx,u="".concat(this.className," ").concat(this.id," ").concat(a,"one-bg ").concat(a,"two-color");if(n.addClass(u),this.toggleVisible(),e.length){var m=new Xg(e);n.append(m.render().el)}return n.append(this.model.get("content")),this},s}(ho);const Rm=Fm;var Hm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Bm=function(h){function s(e){var n=h.call(this,{collection:e})||this;return n.listenTo(e,"add",n.addTo),n.listenTo(e,"reset",n.render),n.listenTo(e,"remove",n.onRemove),n.className=n.pfx+"panels",n}return Hm(s,h),s.prototype.onRemove=function(e){var n=e.view;n&&n.remove()},s.prototype.addTo=function(e){this.addToCollection(e)},s.prototype.addToCollection=function(e,n){var a=n||null,u=e.get("el"),m=new Rm(e),O=m.render().el,P=e.get("appendTo");if(!u)if(P){var j=document.querySelector(P);j==null||j.appendChild(O)}else a?a.appendChild(O):this.$el.append(O);return m.initResize(),O},s.prototype.render=function(){var e=this,n=this.$el,a=document.createDocumentFragment();return n.empty(),this.collection.each(function(u){return e.addToCollection(u,a)}),n.append(a),n.attr("class",this.className),this},s}(ho);var Um=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Jg=function(h){function s(e){var n=h.call(this,e,"Panels",Nh)||this;for(var a in n.panels=new Yg(n,n.config.defaults),Nh)a in n.config||(n.config[a]=Nh[a]);return n}return Um(s,h),s.prototype.getPanels=function(){return this.panels},s.prototype.getPanelsEl=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0?void 0:e.el},s.prototype.addPanel=function(e){return this.panels.add(e)},s.prototype.removePanel=function(e){return this.panels.remove(e)},s.prototype.getPanel=function(e){var n=this.panels.where({id:e});return n.length?n[0]:null},s.prototype.addButton=function(e,n){var a=this.getPanel(e);return a?a.buttons.add(n):null},s.prototype.removeButton=function(e,n){var a=this.getPanel(e);return a&&a.buttons.remove(n)},s.prototype.getButton=function(e,n){var a=this.getPanel(e);if(a){var u=a.buttons.where({id:n});return u.length?u[0]:null}return null},s.prototype.render=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0||e.remove(),this.PanelsViewObj=new Bm(this.panels),this.PanelsViewObj.render().el},s.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(n){n.get("active")&&n.trigger("updateActive")})})},s.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(n){n.get("disable")&&n.trigger("change:disable")})})},s.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},s}(xt),zm={stylePrefix:"cm-",optsCodeViewer:{}};var jp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qg=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e};const id=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return jp(s,h),s.prototype.build=function(e,n){n===void 0&&(n={});var a=n.em,u=Qg(n,["em"]);if(n.cleanId&&a){var m=a.Css.getAll().toJSON().map(function(O){var P=O.selectors,j=P&&P.length===1&&P.models[0];return j&&j.isId()&&j.get("name")}).filter(Boolean);u.attributes||(u.attributes=function(O,P){var j=P.id;return j&&j[0]==="i"&&!O.get("script")&&!O.get("attributes").id&&m.indexOf(j)<0&&delete P.id,P})}return e.toHTML(u)},s}(N.Hn);var Wm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$m=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Wm(s,h),s.prototype.build=function(e){var n=this,a=e.toJSON();return this.beforeEach(a),(0,k.each)(a,function(u,m){var O=a[m];if(O instanceof N.Hn)a[m]=n.build(O);else if(O instanceof N.FE){var P=O;a[m]=[],P.length&&P.forEach(function(j,A){a[m][A]=n.build(j)})}}),a},s.prototype.beforeEach=function(e){delete e.status},s}(N.Hn);const Gm=$m;var qm=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bh=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return qm(s,h),s.prototype.mapModel=function(e){var n,a=this,u="",m=e.get("script-export")||e.get("script"),O=e.get("type"),P=e.get("components"),j=e.getId();if(m){var A=e.get("attributes");A=(0,k.extend)({},A,{id:j}),e.set("attributes",A,{silent:!0});var nt=e.getScriptString(m),At=e.get("script-props");if(e.get("scriptUpdated")&&!At)this.mapJs[O+"-"+j]={ids:[j],code:nt};else{var Bt=void 0,qt=this.mapJs[O];if(At&&(Bt=e.__getScriptProps()),qt)qt.ids.push(j),Bt&&(qt.props[j]=Bt);else{var be={ids:[j],code:nt};Bt&&(be.props=((n={})[j]=Bt,n)),this.mapJs[O]=be}}}return P.forEach(function(Ee){u+=a.mapModel(Ee)}),u},s.prototype.build=function(e){this.mapJs={},this.mapModel(e);var n,a="";for(var u in this.mapJs){var m=this.mapJs[u];if(m.code)if(m.props){if((((n=m.code.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0)continue;a+=`
          var props = `.concat(JSON.stringify(m.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(m.code,`.bind(el))(props[el.id]);
          }`)}else{var O="#"+m.ids.join(", #");a+=`
          var items = document.querySelectorAll('`.concat(O,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(m.code,`
}.bind(items[i]))();
          }`)}}return a},s}(N.Hn);const Km=Bh;var yf,Ym=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Uh=function(){return Uh=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Uh.apply(this,arguments)};(0,B.hasWin)()&&(yf=K(631),K(531),K(629),K(210));var tv=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ym(s,h),s.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},s.prototype.init=function(e){return(0,k.bindAll)(this,"onChange"),this.editor=yf.fromTextArea(e,Uh({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},s.prototype.onChange=function(){this.trigger("update",this)},s.prototype.getEditor=function(){return this.editor},s.prototype.getElement=function(){return this.element},s.prototype.setElement=function(e){return this.element=e,this},s.prototype.refresh=function(){return this.getEditor().refresh(),this},s.prototype.focus=function(){return this.getEditor().focus(),this},s.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},s.prototype.setContent=function(e,n){var a=this;n===void 0&&(n={});var u=this.editor;if(u){u.setValue(e);var m=this.get("autoFormat");u.autoFormatRange&&(m===!0||Array.isArray(m)&&m.includes(this.get("codeName")))&&(yf.commands.selectAll(u),u.autoFormatRange(u.getCursor(!0),u.getCursor(!1)),yf.commands.goDocStart(u)),!n.noRefresh&&setTimeout(function(){return a.refresh()})}},s}(N.Hn);const Zm=tv;tv.prototype.CodeMirror=yf;var ev=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rv=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h};const Xm=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return ev(s,h),s.prototype.template=function(e){var n=e.pfx,a=e.codeName,u=e.label;return ct(nv||(nv=rv([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),n,n,a,n,u,n)},s.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},s.prototype.render=function(){var e,n,a=this,u=a.model,m=a.pfx,O=a.$el,P=u.toJSON(),j=u.get("input")||((n=(e=u).getElement)===null||n===void 0?void 0:n.call(e));return P.pfx=m,O.html(this.template(P)),O.attr("class","".concat(m,"editor-c")),O.find("#".concat(m,"code")).append(j),this},s}(N.G7);var nv,zh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wh=function(){return Wh=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Wh.apply(this,arguments)},Jm="CodeMirror",Qm=function(h){function s(e){var n=h.call(this,e,"CodeManager",zm)||this;n.EditorView=Xm;var a=n.config,u=a.pStylePrefix;return u&&(a.stylePrefix=u+a.stylePrefix),n.generators={},n.viewers={},n.defGenerators={html:new id,css:new yl,json:new Gm,js:new Km},n.defViewers={CodeMirror:new Zm},n.loadDefaultGenerators().loadDefaultViewers(),n}return zh(s,h),s.prototype.addGenerator=function(e,n){return this.generators[e]=n,this},s.prototype.getGenerator=function(e){return this.generators[e]},s.prototype.getGenerators=function(){return this.generators},s.prototype.addViewer=function(e,n){return this.viewers[e]=n,this},s.prototype.getViewer=function(e){return this.viewers[e]},s.prototype.getViewers=function(){return this.viewers},s.prototype.createViewer=function(e){e===void 0&&(e={});var n=(0,k.isUndefined)(e.type)?Jm:e.type,a=this.getViewer(n)&&this.getViewer(n).clone(),u=document.createElement("div"),m=document.createElement("textarea");return u.appendChild(m),a.set(Wh(Wh({},this.config.optsCodeViewer),e)),a.init(m),a.setElement(u),a},s.prototype.updateViewer=function(e,n){e.setContent(n)},s.prototype.getCode=function(e,n,a){a===void 0&&(a={}),a.em=this.em;var u=this.getGenerator(n);return u?u.build(e,a):""},s.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},s.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},s.prototype.destroy=function(){},s}(xt);const $h=Qm;var ty=K(410),ey=K.n(ty);const ry={maximumStackLength:500,trackSelection:!0};var ny=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bu=function(){return Bu=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Bu.apply(this,arguments)},iu=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Hd=function(h){return h.avoidStore||h.noUndo},ov=function(h){return Object.keys(h.changedAttributes())},iv=function(h){function s(e){var n=h.call(this,e,"UndoManager",ry)||this;n.config._disable&&(n.config.maximumStackLength=0);var a=!0;return n.um=new(ey())(Bu({track:!0,register:[]},n.config)),n.um.changeUndoType("change",{condition:function(u){var m=u.get("_undo");if(m){var O=u.get("_undoexc");if((0,k.isArray)(O)&&ov(u).some(function(P){return O.indexOf(P)>=0}))return!1;if((0,k.isBoolean)(m)||(0,k.isArray)(m)&&ov(u).some(function(P){return m.indexOf(P)>=0}))return!0}return!1},on:function(u,m,O){var P=this;!this.beforeCache&&(this.beforeCache=u.previousAttributes());var j=O||m||{};if(j.noUndo&&setTimeout(function(){P.beforeCache=null}),!Hd(j)){var A=u.toJSON({fromUndo:a}),nt={object:u,before:this.beforeCache,after:A};if(this.beforeCache=null,!(0,k.isEmpty)(A))return nt}}}),n.um.changeUndoType("add",{on:function(u,m,O){if(O===void 0&&(O={}),!Hd(O)&&n.isRegistered(m))return{object:m,before:void 0,after:u,options:Bu(Bu({},O),{fromUndo:a})}}}),n.um.changeUndoType("remove",{on:function(u,m,O){if(O===void 0&&(O={}),!Hd(O)&&n.isRegistered(m))return{object:m,before:u,after:void 0,options:Bu(Bu({},O),{fromUndo:a})}}}),n.um.changeUndoType("reset",{undo:function(u,m){u.reset(m,{fromUndo:a})},redo:function(u,m,O){u.reset(O,{fromUndo:a})},on:function(u,m){if(m===void 0&&(m={}),!Hd(m)&&n.isRegistered(u))return{object:u,before:m.previousModels,after:iu([],u.models,!0),options:Bu(Bu({},m),{fromUndo:a})}}}),n.um.on("undo redo",function(){e.trigger("change:canvasOffset"),e.getSelectedAll().map(function(u){return u.trigger("rerender:layer")})}),["undo","redo"].forEach(function(u){return n.um.on(u,function(){return e.trigger(u)})}),n}return ny(s,h),s.prototype.postLoad=function(){var e=this.config,n=this.em;e.trackSelection&&n&&this.add(n.get("selected"))},s.prototype.add=function(e){return this.um.register(e),this},s.prototype.remove=function(e){return this.um.unregister(e),this},s.prototype.removeAll=function(){return this.um.unregisterAll(),this},s.prototype.start=function(){return this.um.startTracking(),this},s.prototype.stop=function(){return this.um.stopTracking(),this},s.prototype.undo=function(e){e===void 0&&(e=!0);var n=this.em,a=this.um;return!n.isEditing()&&a.undo(e),this},s.prototype.undoAll=function(){return this.um.undoAll(),this},s.prototype.redo=function(e){e===void 0&&(e=!0);var n=this.em,a=this.um;return!n.isEditing()&&a.redo(e),this},s.prototype.redoAll=function(){return this.um.redoAll(),this},s.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},s.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},s.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},s.prototype.getStack=function(){return this.um.stack},s.prototype.getStackGroup=function(){var e=[],n=[];return this.getStack().forEach(function(a){var u=a.get("magicFusionIndex");n.indexOf(u)<0&&(n.push(u),e.push(a))}),e},s.prototype.skip=function(e){this.stop(),e(),this.start()},s.prototype.getGroupedStack=function(){var e={};return this.getStack().forEach(function(n,a){var u=n.get("magicFusionIndex"),m=function(O,P){var j=O.attributes,A=j.type,nt=j.after,At=j.before,Bt=j.object,qt=j.options;return{index:P,type:A,after:nt,before:At,object:Bt,options:qt===void 0?{}:qt}}(n,a);e[u]?e[u].push(m):e[u]=[m]}),Object.keys(e).map(function(n){var a=e[n];return{index:a[a.length-1].index,actions:a,labels:(0,k.unique)(a.reduce(function(u,m){var O,P=(O=m.options)===null||O===void 0?void 0:O.action;return P&&u.push(P),u},[]))}})},s.prototype.goToGroup=function(e){var n=this;if(e){var a=this.getPointer(),u=e.index-a;(0,k.times)(Math.abs(u),function(){n[u<0?"undo":"redo"](!1)})}},s.prototype.getPointer=function(){return this.getStack().pointer},s.prototype.clear=function(){return this.um.clear(),this},s.prototype.getInstance=function(){return this.um},s.prototype.destroy=function(){this.clear().removeAll()},s}(xt);const oy=iv,iy={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};var au,Dp=function(){return Dp=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Dp.apply(this,arguments)};(function(h){h[h.ACTIVE=1]="ACTIVE",h[h.INACTIVE=0]="INACTIVE",h[h.DISABLED=-1]="DISABLED"})(au||(au={}));var Gh="_rte",av=1,qh=0,sv=-1,Ip=function(h,s){s===void 0&&(s="A");var e=h.selection()||{},n=e.anchorNode,a=e.focusNode,u=n==null?void 0:n.parentNode,m=a==null?void 0:a.parentNode;return(u==null?void 0:u.nodeName)==s||(m==null?void 0:m.nodeName)==s},Bd="data-selectme",ad={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(h){return h.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(h){return h.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(h){return h.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(h){return h.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(h){return h&&h.selection()&&Ip(h)?av:qh},result:function(h){Ip(h)?h.exec("unlink"):h.insertHTML('<a href="" '.concat(Bd,">").concat(h.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(h){return h!=null&&h.selection()&&Ip(h,"SPAN")?sv:qh},result:function(h){!Ip(h,"SPAN")&&h.insertHTML("<span ".concat(Bd,">").concat(h.selection(),"</span>"),{select:!0})}}},Al=function(){function h(s,e,n){n===void 0&&(n={});var a=this;if(this.em=s,this.settings=n,e[Gh])return e[Gh];e[Gh]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var u=(n.actions||[]).map(function(A){var nt=A;return(0,k.isString)(A)?nt=Dp({},ad[A]):ad[A.name]&&(nt=Dp(Dp({},ad[A.name]),A)),nt}),m=u.length?u:Object.keys(ad).map(function(A){return ad[A]});n.classes=Dp({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},n.classes);var O=n.classes,P=n.actionbar;if(this.actionbar=P,this.classes=O,this.actions=m,!P){if(!this.isCustom(n.module)){var j=n.actionbarContainer;(P=document.createElement("div")).className=O.actionbar,j==null||j.appendChild(P),this.actionbar=P}m.forEach(function(A){return a.addAction(A)})}return n.styleWithCSS&&this.exec("styleWithCSS"),this}return h.prototype.isCustom=function(s){var e=s||this.em.RichTextEditor;return!(!(e!=null&&e.config.custom)&&!(e!=null&&e.customRte))},h.prototype.destroy=function(){},h.prototype.setEl=function(s){this.el=s,this.doc=s.ownerDocument},h.prototype.updateActiveActions=function(){var s=this,e=this.getActions();e.forEach(function(n){var a=n.update,u=n.btn,m=s.classes,O=m.active,P=m.inactive,j=m.disabled,A=n.state,nt=n.name,At=s.doc,Bt=au.INACTIVE;if(u&&(u.className=u.className.replace(O,"").trim(),u.className=u.className.replace(P,"").trim(),u.className=u.className.replace(j,"").trim()),A){var qt=A(s,At);if(Bt=qt,u)switch(qt){case av:u.className+=" ".concat(O);break;case qh:u.className+=" ".concat(P);break;case sv:u.className+=" ".concat(j)}}else At.queryCommandSupported(nt)&&At.queryCommandState(nt)&&(u&&(u.className+=" ".concat(O)),Bt=au.ACTIVE);n.currentState=Bt,a==null||a(s,n)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},h.prototype.enable=function(s){return this.enabled?this:this.__toggleEffects(!0,s)},h.prototype.disable=function(){return this.__toggleEffects(!1)},h.prototype.__toggleEffects=function(s,e){s===void 0&&(s=!1),e===void 0&&(e={});var n=s?B.on:B.off,a=this.el,u=this.doc,m=this.actionbarEl();if(m&&(m.style.display=s?"":"none"),a.contentEditable="".concat(!!s),n(a,"mouseup keyup",this.updateActiveActions),n(u,"keydown",this.__onKeydown),n(u,"paste",this.__onPaste),this.enabled=s,s){var O=e.event;if(this.syncActions(),this.updateActiveActions(),O){var P=null;if(u.caretRangeFromPoint){var j=(0,B.getPointerEvent)(O);P=u.caretRangeFromPoint(j.clientX,j.clientY)}else O.rangeParent&&(P=u.createRange()).setStart(O.rangeParent,O.rangeOffset);var A=u.getSelection();A==null||A.removeAllRanges(),P&&(A==null||A.addRange(P))}a.focus()}return this},h.prototype.__onKeydown=function(s){var e=s,n=this.doc;e.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(a){return n.queryCommandState(a)})||(n.execCommand("insertLineBreak"),e.preventDefault())},h.prototype.__onPaste=function(s){var e=s.clipboardData||window.clipboardData,n=e.getData("text"),a=e.getData("text/html");if(n&&!a){s.preventDefault();var u=n.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,u)}},h.prototype.syncActions=function(){var s=this;this.getActions().forEach(function(e){if(s.actionbar&&(!e.state||e.state&&e.state(s,s.doc)>=0)){var n=e.event||"click",a=e.btn;a&&(a["on".concat(n)]=function(){e.result(s,e),s.updateActiveActions()})}})},h.prototype.addAction=function(s,e){e===void 0&&(e={});var n=e.sync,a=this.actionbarEl();if(a){var u=s.icon,m=s.attributes,O=m===void 0?{}:m,P=document.createElement("span");for(var j in P.className=this.classes.button,s.btn=P,O)P.setAttribute(j,O[j]);typeof u=="string"?P.innerHTML=u:P.appendChild(u),a.appendChild(P)}n&&(this.actions.push(s),this.syncActions())},h.prototype.getActions=function(){return this.actions},h.prototype.selection=function(){return this.doc.getSelection()},h.prototype.exec=function(s,e){this.doc.execCommand(s,!1,e)},h.prototype.actionbarEl=function(){return this.actionbar},h.prototype.insertHTML=function(s,e){var n=(e===void 0?{}:e).select,a=this,u=a.em,m=a.doc,O=a.el,P=m.getSelection();if(P&&P.rangeCount){var j=(0,B.getModel)(O),A=m.createElement("div"),nt=P.getRangeAt(0);nt.deleteContents(),(0,k.isString)(s)?A.innerHTML=s:s&&A.appendChild(s),Array.prototype.slice.call(A.childNodes).forEach(function(At){nt.insertNode(At)}),P.removeAllRanges(),P.addRange(nt),O.focus(),n&&j&&(j.once("rte:disable",function(){var At=j.find("[".concat(Bd,"]"))[0];At&&(u.setSelected(At),At.removeAttributes(Bd))}),j.trigger("disable"))}},h}();const Jl=Al;var Zs=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Kh=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},bf=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}},lv=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},sd="change:canvasOffset frame:scroll component:update",Np={enable:"rte:enable",disable:"rte:disable",custom:"rte:custom"},ld=function(h){function s(e){var n=h.call(this,e,"RichTextEditor",iy)||this;n.events=Np;var a=n.config,u=a.pStylePrefix;u&&(a.stylePrefix=u+a.stylePrefix),n.pfx=a.stylePrefix,n.actions=a.actions||[];var m=new N.Hn;return n.model=m,m.on("change:currentView",n.__trgCustom,n),n.__dbdTrgCustom=(0,k.debounce)(function(){return n.__trgCustom()},0),n}return Zs(s,h),s.prototype.onLoad=function(){if((0,B.hasWin)()){var e=this.config,n=e.pStylePrefix,a=e.custom,u=(0,vn.ut)("div",{class:(0,vn.cx)("".concat(n,"rte-toolbar"),!a&&"".concat(n,"one-bg ").concat(n,"rte-toolbar-ui"))});this.toolbar=u,this.initRte((0,vn.ut)("div")),(0,B.on)(u,"mousedown",function(m){return m.stopPropagation()})}},s.prototype.__trgCustom=function(){var e=this,n=e.model,a=e.em,u=e.events;a.trigger(u.custom,{enabled:!!n.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},s.prototype.destroy=function(){var e,n,a;(e=this.globalRte)===null||e===void 0||e.destroy(),(a=(n=this.customRte)===null||n===void 0?void 0:n.destroy)===null||a===void 0||a.call(n),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,vn.L_)(this.toolbar)},s.prototype.postRender=function(e){var n=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),n.getToolsEl().appendChild(this.toolbar)},s.prototype.initRte=function(e){var n=this.globalRte,a=this,u=a.em,m=a.pfx,O=a.actionbar,P=a.config,j=this.actions||lv([],P.actions,!0),A={actionbar:"".concat(m,"actionbar"),button:"".concat(m,"action"),active:"".concat(m,"active"),inactive:"".concat(m,"inactive"),disabled:"".concat(m,"disabled")};return n?(n.em=u,n.setEl(e)):(n=new Jl(u,e,{classes:A,actions:j,actionbar:O,actionbarContainer:this.toolbar,module:this}),this.globalRte=n),n.actionbar&&(this.actionbar=n.actionbar),n.actions&&(this.actions=n.actions),n},s.prototype.add=function(e,n){var a;n===void 0&&(n={}),n.name=e,(a=this.globalRte)===null||a===void 0||a.addAction(n,{sync:!0})},s.prototype.get=function(e){var n,a;return(n=this.globalRte)===null||n===void 0||n.getActions().forEach(function(u){u.name==e&&(a=u)}),a},s.prototype.getAll=function(){var e;return((e=this.globalRte)===null||e===void 0?void 0:e.getActions())||[]},s.prototype.remove=function(e){var n,a=this.getAll(),u=this.get(e);if(u){var m=u.btn,O=a.indexOf(u);(n=m==null?void 0:m.parentNode)===null||n===void 0||n.removeChild(m),a.splice(O,1)}return u},s.prototype.run=function(e){var n=this.globalRte,a=(0,k.isString)(e)?this.get(e):e;n&&a&&(a.result(n,a),n.updateActiveActions())},s.prototype.getToolbarEl=function(){return this.toolbar},s.prototype.updatePosition=function(){var e=this.em,n=this.toolbar,a="px",u=e.Canvas,m=n.style,O=u.getTargetToElementFixed(this.lastEl,n,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(P){var j=O[P];(0,B.isDef)(j)&&(m[P]=(0,k.isString)(j)?j:(j||0)+a)})},s.prototype.enable=function(e,n,a){return a===void 0&&(a={}),Kh(this,void 0,void 0,function(){var u,m,O,P,j;return bf(this,function(A){switch(A.label){case 0:return this.lastEl=e.el,m=(u=this).customRte,O=u.em,P=e.getChildrenContainer(),this.toolbar.style.display="",[4,m?m.enable(P,n):this.initRte(P).enable(a)];case 1:return j=A.sent(),O&&(setTimeout(this.updatePosition.bind(this),0),O.off(sd,this.updatePosition,this),O.on(sd,this.updatePosition,this),O.trigger("rte:enable",e,j)),this.model.set({currentView:e}),[2,j]}})})},s.prototype.getContent=function(e,n){return Kh(this,void 0,void 0,function(){var a;return bf(this,function(u){switch(u.label){case 0:return(a=this.customRte)&&n&&(0,k.isFunction)(a.getContent)?[4,a.getContent(e.el,n)]:[3,2];case 1:return[2,u.sent()];case 2:return[2,e.getChildrenContainer().innerHTML]}})})},s.prototype.hideToolbar=function(){var e=this.toolbar.style,n="-1000px";e.top=n,e.left=n,e.display="none"},s.prototype.disable=function(e,n){var a=this.em,u=this.customRte,m=e.getChildrenContainer();u?u.disable(m,n):n&&n.disable(),this.hideToolbar(),a&&(a.off(sd,this.updatePosition,this),a.trigger("rte:disable",e,n)),this.model.unset("currentView")},s}(xt);const ay=ld;var Yh=K(790);const sy={stylePrefix:"com-",defaults:{},strict:!0};var ly=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ud=function(){return Ud=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ud.apply(this,arguments)},cv=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},js=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],cy=function(h){function s(e){var n=h.call(this,e,"Commands",sy)||this;n.CommandAbstract=Yh.default,n.defaultCommands={},n.commands={},n.active={};var a=n.config,u=a.pStylePrefix,m=n.defaultCommands;for(var O in u&&(a.stylePrefix=u+a.stylePrefix),Object.keys(a.defaults).forEach(function(P){var j=a.defaults[P];j.id&&n.add(j.id,j)}),m["tlb-delete"]={run:function(P){return P.runCommand("core:component-delete")}},m["tlb-clone"]={run:function(P){P.runCommand("core:copy"),P.runCommand("core:paste",{action:"clone-component"})}},m["tlb-move"]={run:function(P,j,A){A===void 0&&(A={});var nt=P.getModel(),At=A&&A.event,Bt=A.target,qt=Bt||P.getSelected(),be=Bt?[Bt]:cv([],P.getSelectedAll(),!0),Ee=At&&At.type=="dragstart",Ce={preserveSelected:1};if(!qt||!qt.get("draggable"))return nt.logWarning("The element is not draggable");var rr=qt.get("dmode")||nt.get("dmode"),yr=function(){return nt.stopDefault(Ce)},Jr=(0,k.includes)(["absolute","translate"],rr);be.forEach(function(ii){return ii.trigger("disable")}),Ee?setTimeout(yr,0):yr();var Qr=function(ii){nt.trigger("".concat(Gn,":start"),ii)},Sn=function(ii){nt.trigger(Gn,ii)},Pn=function(ii,va,Qs){be.forEach(function(tl){return tl.set("status","selected")}),P.select(be),qt.emitUpdate(),nt.trigger("".concat(Gn,":end"),Qs),setTimeout(function(){return nt.runDefault(Ce)}),(Jr||Qs.cancelled)&&nt.set("_cmpDrag",1)};if(Jr)P.runCommand("core:component-drag",{guidesInfo:1,mode:rr,target:qt,onStart:Qr,onDrag:Sn,onEnd:Pn,event:At});else{Ee&&At.dataTransfer.setDragImage(qt.view.el,0,0);var xo=P.Commands.get("move-comp");xo.onStart=Qr,xo.onDrag=Sn,xo.onEndMoveFromModel=Pn,xo.initSorterFromModels(be)}be.forEach(function(ii){return ii.set("status","freezed-selected")})}},m["core:undo"]=function(P){return P.UndoManager.undo()},m["core:redo"]=function(P){return P.UndoManager.redo()},js.forEach(function(P){var j=P[2],A=K(828)("./".concat(P[1])).default,nt="core:".concat(P[0]);m[nt]=A,j&&(m[j]=A,["run","stop"].forEach(function(At){e.on("".concat(At,":").concat(j),function(){for(var Bt=[],qt=0;qt<arguments.length;qt++)Bt[qt]=arguments[qt];return e.trigger.apply(e,cv(["".concat(At,":").concat(nt)],Bt,!1))})}))}),a.model=e.Canvas,m)n.add(O,m[O]);return n}return ly(s,h),s.prototype.add=function(e,n){var a=(0,k.isFunction)(n)?{run:n}:n;return a.stop||(a.noStop=!0),delete a.initialize,a.id=e,this.commands[e]=Yh.default.extend(a),this},s.prototype.get=function(e){var n=this.commands[e];return(0,k.isFunction)(n)?(n=new n(this.config),this.commands[e]=n):n||this.em.logWarning("'".concat(e,"' command not found")),n},s.prototype.extend=function(e,n){n===void 0&&(n={});var a=this.get(e);if(a){var u=Ud(Ud({},a.constructor.prototype),n);this.add(e,u);var m=js.filter(function(O){return"core:".concat(O[0])===e&&O[2]})[0];m&&this.add(m[2],u)}return this},s.prototype.has=function(e){return!!this.commands[e]},s.prototype.getAll=function(){return this.commands},s.prototype.run=function(e,n){return n===void 0&&(n={}),this.runCommand(this.get(e),n)},s.prototype.stop=function(e,n){return n===void 0&&(n={}),this.stopCommand(this.get(e),n)},s.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},s.prototype.getActive=function(){return this.active},s.prototype.runCommand=function(e,n){var a;if(n===void 0&&(n={}),e&&e.run){var u=this.em,m=this.config,O=e.id,P=u.Editor;this.isActive(O)&&!n.force&&m.strict||(a=P&&e.callRun(P,n),O&&e.stop&&!e.noStop&&!n.abort&&(this.active[O]=a))}return a},s.prototype.stopCommand=function(e,n){var a;if(n===void 0&&(n={}),e&&e.run){var u=this.em,m=this.config,O=e.id,P=u.Editor;(this.isActive(O)||n.force||!m.strict)&&(O&&delete this.active[O],a=e.callStop(P,n))}return a},s.prototype.create=function(e){return e.stop||(e.noStop=!0),new(Yh.default.extend(e))(this.config)},s.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},s}(xt);const uy=cy,fy={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var py=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xs=function(){return Xs=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Xs.apply(this,arguments)},Zh=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},uv=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},zd=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return py(s,h),s.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},s.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},s.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.em=n.em;var a=this.getId()||"",u=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(u||a).replace(/ /g,"-"));var m=this.get("property");!this.get("id")&&this.set("id",m),!u&&this.set("name",(0,B.capitalize)(m).replace(/-/g," ")),this.on("change",this.__upTargets),s.callInit(this,e,n)},s.prototype.__getParentProp=function(){var e,n;return(n=(e=this.collection)===null||e===void 0?void 0:e.opts)===null||n===void 0?void 0:n.parentProp},s.prototype.__upTargets=function(e,n){var a,u=this;n===void 0&&(n={});var m=this.em.Styles,O=this.getName(),P=n.__clear,j=P?"":this.__getFullValue(n),A=this.__getParentProp(),nt=this.changedAttributes(),At=(0,k.keys)(nt).reduce(function(rr,yr){return rr[yr]=u.previous(yr),rr},{}),Bt=uv(uv([],(0,k.keys)(this.__getClearProps()),!0),["__p"],!1),qt=(0,k.keys)(nt),be=!n.__up&&!A&&(P||Bt.some(function(rr){return qt.indexOf(rr)>=0})),Ee=this.get("onChange"),Ce={property:this,from:At,to:nt,value:j,opts:n};m.__trgEv(m.events.propertyUpdate,Ce),Ee&&Ee(Ce),be&&this.__upTargetsStyle(((a={})[O]=j,a),n)},s.prototype.__upTargetsStyle=function(e,n){var a,u=(a=this.em)===null||a===void 0?void 0:a.get("StyleManager");u==null||u.addStyleTargets(Xs(Xs({},e),{__p:!!n.avoidStore}),n)},s.prototype._up=function(e,n){n===void 0&&(n={}),n.noTarget&&(n.__up=!0);var a=n.partial,u=Zh(n,["partial"]);return e.__p=!(!u.avoidStore&&!a),this.set(e,Xs(Xs({},u),{avoidStore:e.__p}))},s.prototype.up=function(e,n){n===void 0&&(n={}),this.set(e,Xs(Xs({},n),{__up:!0}))},s.prototype.init=function(){},s.prototype.getId=function(){return this.get("id")},s.prototype.getType=function(){return this.get("type")},s.prototype.getName=function(){return this.get("property")},s.prototype.getLabel=function(e){var n;e===void 0&&(e={});var a=e.locale,u=a===void 0||a,m=this.getId(),O=this.get("name")||this.get("label");return u&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.properties.".concat(m)))||O},s.prototype.getValue=function(e){e===void 0&&(e={});var n=e.noDefault,a=this.get("value");return this.hasValue()||n?a:this.getDefaultValue()},s.prototype.hasValue=function(e){e===void 0&&(e={});var n=e.noParent&&this.getParentTarget(),a=this.get("value");return!(0,k.isUndefined)(a)&&a!==""&&!n},s.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},s.prototype.getStyle=function(e){var n;e===void 0&&(e={});var a=this.getName();return(n={})[e.camelCase?(0,B.camelCase)(a):a]=this.__getFullValue(e),n},s.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,k.isUndefined)(e)?this.get("defaults"):e)},s.prototype.upValue=function(e,n){n===void 0&&(n={});var a=e===null||e===""?this.__getClearProps():this.__parseValue(e,n);return this._up(a,n)},s.prototype.isVisible=function(){return!!this.get("visible")},s.prototype.clear=function(e){return e===void 0&&(e={}),this._up(this.__getClearProps(),Xs(Xs({},e),{__clear:!0})),this},s.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},s.prototype.getParent=function(){return this.__getParentProp()},s.prototype.isFull=function(){return!!this.get("full")},s.prototype.__parseValue=function(e,n){return this.parseValue(e,n)},s.prototype.__getClearProps=function(){return{value:""}},s.prototype.setValue=function(e,n,a){n===void 0&&(n=!0),a===void 0&&(a={});var u=this.parseValue(e),m=!n;!m&&this.set({value:void 0},{avoidStore:m,silent:!0}),this.set(u,Xs({avoidStore:m},a))},s.prototype.setValueFromInput=function(e,n,a){a===void 0&&(a={}),this.setValue(e,n,Xs(Xs({},a),{fromInput:1}))},s.prototype.parseValue=function(e,n){n===void 0&&(n={});var a={value:e},u="!important";if((0,k.isString)(e)&&e.indexOf(u)!==-1&&(a.value=e.replace(u,"").trim(),a.important=!0),!this.get("functionName")&&!n.complete)return a;var m=[],O="".concat(a.value),P=O.indexOf("(")+1,j=O.lastIndexOf(")"),A=O.substring(0,P-1);if(A&&(a.functionName=A),m.push(P),j>=0&&m.push(j),a.value=String.prototype.substring.apply(O,m),n.numeric){var nt=parseFloat(a.value);a.unit=a.value.replace(nt,""),a.value=nt}return a},s.prototype.__getFullValue=function(e){var n=(e===void 0?{}:e).withDefault;return!this.hasValue()&&n?this.getDefaultValue():this.getFullValue()},s.prototype.getFullValue=function(e,n){n===void 0&&(n={});var a=this.get("functionName"),u=this.getDefaultValue(),m=(0,k.isUndefined)(e)?this.get("value"):e,O=!(0,k.isUndefined)(m)&&m!=="";if(m&&u&&m===u)return u;if(a&&O){var P=a==="url"?"'".concat(m.replace(/'|"/g,""),"'"):m;m="".concat(a,"(").concat(P,")")}return O&&this.get("important")&&!n.skipImportant&&(m="".concat(m," !important")),m||""},s.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},s.prototype.getParentTarget=function(){return this.get("parentTarget")||null},s.prototype.__parseFn=function(e){e===void 0&&(e="");var n=e.indexOf("(")+1,a=e.lastIndexOf(")");return{name:e.substring(0,n-1).trim(),value:String.prototype.substring.apply(e,[n,a>=0?a:void 0]).trim()}},s.prototype.__checkVisibility=function(e){var n=e.target,a=e.component,u=e.sectors,m=a||n;if(!m)return!1;var O=this.getId(),P=this.getName(),j=this.get("toRequire"),A=this.get("requires"),nt=this.get("requiresParent"),At=m.get("unstylable"),Bt=m.get("stylable-require"),qt=m.get("stylable");if((0,k.isArray)(qt)&&(qt=qt.indexOf(P)>=0),(0,k.isArray)(At)&&(qt=At.indexOf(P)<0),j&&(qt=!n||Bt&&(Bt.indexOf(O)>=0||Bt.indexOf(P)>=0)),u&&A){var be=(0,k.keys)(A);u.forEach(function(yr){yr.getProperties().forEach(function(Jr){if((0,k.includes)(be,Jr.id)){var Qr=A[Jr.id];qt=qt&&(0,k.includes)(Qr,Jr.get("value"))}})})}if(nt){var Ee=a&&a.parent(),Ce=Ee&&Ee.getEl();if(Ce){var rr=(0,B.hasWin)()?window.getComputedStyle(Ce):{};(0,k.each)(nt,function(yr,Jr){qt=qt&&rr[Jr]&&(0,k.includes)(yr,rr[Jr])})}else qt=!1}return!!qt},s}(N.Hn);const Pi=zd;zd.callParentInit=function(h,s,e,n){n===void 0&&(n={}),h.prototype.initialize.apply(s,[e,Xs(Xs({},n),{skipInit:1})])},zd.callInit=function(h,s,e){e===void 0&&(e={}),!e.skipInit&&h.init(s,e)};var Xh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),su=function(){return su=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},su.apply(this,arguments)},fv=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},pv=function(h){return h==="integer"||h==="number"},dy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Xh(s,h),s.prototype.defaults=function(){return su(su({},Pi.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},s.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Pi.callParentInit(Pi,this,e,n);var a=this.em,u=new eg(this.get("properties")||[],{em:a,parentProp:this});this.set("properties",u,{silent:!0}),this.listenTo(u,"change",this.__upProperties),Pi.callInit(this,e,n)},Object.defineProperty(s.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),s.prototype.getProperties=function(){return fv([],this.get("properties").models,!0)},s.prototype.getProperty=function(e){return this.properties.filter(function(n){return n.getId()===e||n.getName()===e})[0]},s.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},s.prototype.isDetached=function(){return!!this.get("detached")},s.prototype.getValues=function(e){var n=(e===void 0?{}:e).byName;return this.getProperties().reduce(function(a,u){return a[n?u.getName():u.getId()]="".concat(u.__getFullValue()),a},{})},s.prototype.getSeparator=function(){return this.getSplitSeparator()},s.prototype.getJoin=function(){return this.__getJoin()},s.prototype.getStyleFromProps=function(e){var n;e===void 0&&(e={});var a=this.getName(),u=this.__getJoin(),m=this.get("toStyle"),O=this.getValues(),P={};if(m)P=m(O,{join:u,name:a,property:this});else if(O=this.getValues({byName:!0}),this.isDetached())P=O;else{var j=this.getProperties().map(function(A){return A.__getFullValue({withDefault:1})}).filter(Boolean).join(u);(n={})[a]=j,P=n}return this.isDetached()?P[a]="":(P[a]=P[a]||"",P=su(su({},P),this.getProperties().reduce(function(A,nt){return A[nt.getName()]="",A},{}))),e.camelCase?Object.keys(P).reduce(function(A,nt){return A[(0,B.camelCase)(nt)]=P[nt],A},{}):P},s.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},s.prototype.__upProperties=function(e,n){if(n===void 0&&(n={}),!n.__up&&!n.__clearIn){var a=this.__getParentProp();if(a)return a.__upProperties(this,n);this.__upTargetsStyleProps(n,e)}},s.prototype.__upTargetsStyleProps=function(e,n){var a;e===void 0&&(e={});var u=this.getStyleFromProps();if(this.isDetached()&&n){var m=n.getName();(a={})[m]=u[m],u=a}this.__upTargetsStyle(u,e)},s.prototype._up=function(e,n){return n===void 0&&(n={}),this.__setProperties(this.__getSplitValue(e.value),n),Pi.prototype._up.call(this,e,n),this},s.prototype.getStyle=function(e){return this.getStyleFromProps(e)},s.prototype.__getFullValue=function(e){return e===void 0&&(e={}),this.isDetached()||e.__clear?"":this.getStyleFromProps()[this.getName()]||""},s.prototype.__getJoin=function(){var e=this.get("join");return(0,k.isString)(e)?e:this.get("separator")},s.prototype.__styleHasProps=function(e){e===void 0&&(e={});var n=this.getName(),a=this.getProperties().map(function(u){return u.getName()});return fv([n],a,!0).some(function(u){return!(0,k.isUndefined)(e[u])&&e[u]!==""})},s.prototype.__splitValue=function(e,n){return e.split(n).map(function(a){return a.trim()}).filter(Boolean)},s.prototype.__splitStyleName=function(e,n,a){return this.__splitValue(e[n]||"",a)},s.prototype.__getSplitValue=function(e,n){e===void 0&&(e="");var a=(n===void 0?{}:n).byName,u=this.getProperties(),m=u.length===4&&u.every(function(j){return pv(j.getType())}),O=this.__splitValue(e,this.getSplitSeparator()),P={};return u.forEach(function(j,A){var nt=O[A],At=(0,k.isUndefined)(nt)?"":nt;if(m){var Bt=O.length;At=O[A]||O[A%Bt+(Bt!=1&&Bt%2?1:0)]||At}var qt=a?j.getName():j.getId();P[qt]=At||""}),P},s.prototype.__getPropsFromStyle=function(e,n){if(e===void 0&&(e={}),n===void 0&&(n={}),!this.__styleHasProps(e))return null;var a=n.byName,u=this.getName(),m=this.getProperties(),O=this.getSplitSeparator(),P=this.get("fromStyle"),j=P?P(e,{property:this,name:u,separator:O}):{};return P||(j=this.__getSplitValue(e[u]||"",{byName:a}),m.forEach(function(A){var nt=e[A.getName()],At=a?A.getName():A.getId();(0,k.isUndefined)(nt)||nt===""||(j[At]=nt)})),j},s.prototype.__setProperties=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.getProperties().forEach(function(u){var m=e[u.getId()];u.__getFullValue()!==m&&u.upValue(m,n)});var a=(0,k.keys)(e).map(function(u){return e[u]}).join(" ");this.set("value",a,{silent:!0})},s.prototype.clear=function(){var e=this;return this.getProperties().map(function(n){return n.clear({__clearIn:!e.isDetached()})}),Pi.prototype.clear.call(this),this},s.prototype.hasValue=function(e){return this.getProperties().some(function(n){return n.hasValue(e)})},s.prototype.getFullValue=function(){return this.__getFullValue()},s.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},s}(Pi);const ip=dy;var hy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wd=function(){return Wd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Wd.apply(this,arguments)},gy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return hy(s,h),s.prototype.defaults=function(){return{values:{}}},s.prototype.initialize=function(){var e=this.collection;this.prop=e==null?void 0:e.prop},s.prototype.getId=function(){return this.cid},s.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},s.prototype.getValues=function(e){e===void 0&&(e={});var n=this.get("values");return e.camelCase?Object.keys(n).reduce(function(a,u){return a[(0,B.camelCase)(u)]=n[u],a},{}):n},s.prototype.getLabel=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.getLayerLabel(this)},s.prototype.isSelected=function(){var e;return((e=this.prop)===null||e===void 0?void 0:e.getSelectedLayer())===this},s.prototype.select=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.selectLayer(this)},s.prototype.remove=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.removeLayer(this)},s.prototype.move=function(e){var n;return(n=this.prop)===null||n===void 0?void 0:n.moveLayer(this,e)},s.prototype.getStylePreview=function(e){var n;return e===void 0&&(e={}),(n=this.prop)===null||n===void 0?void 0:n.getStylePreview(this,e)},s.prototype.hasPreview=function(){var e;return!!(!((e=this.prop)===null||e===void 0)&&e.get("preview"))},s.prototype.upValues=function(e){return e===void 0&&(e={}),this.set("values",Wd(Wd({},this.getValues()),e))},s}(N.Hn);const vy=gy;var my=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dv=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return my(s,h),s.prototype.initialize=function(e,n){n===void 0&&(n={}),this.prop=n.prop},s}(N.FE);const yy=dv;dv.prototype.model=vy;var by=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ql=function(){return Ql=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ql.apply(this,arguments)},wy=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},_y=/,(?![^\(]*\))/,xy=/\s(?![^(]*\))/,Cy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return by(s,h),s.prototype.defaults=function(){return Ql(Ql({},ip.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},s.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),ip.callParentInit(ip,this,e,n);var a=this.get("layers"),u=new yy(a,{prop:this});u.property=this,u.properties=this.get("properties"),this.set("layers",u,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(u,"add remove",this.__upLayers),ip.callInit(this,e,n)},s.prototype.getLayers=function(){return this.__getLayers().models},s.prototype.__getLayers=function(){return this.get("layers")},s.prototype.getLayer=function(e){return e===void 0&&(e=0),this.__getLayers().at(e)||void 0},s.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},s.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},s.prototype.selectLayerAt=function(e){e===void 0&&(e=0);var n=this.getLayer(e);return n&&this.selectLayer(n)},s.prototype.moveLayer=function(e,n){n===void 0&&(n=0);var a=e?e.getIndex():-1;a>=0&&(0,k.isNumber)(n)&&n>=0&&n<this.getLayers().length&&a!==n&&(this.removeLayer(e),this.__getLayers().add(e,{at:n}))},s.prototype.addLayer=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var a={};return this.getProperties().forEach(function(u){var m=u.getId(),O=e[m];a[m]=(0,k.isUndefined)(O)?u.getDefaultValue():O}),this.__getLayers().push({values:a},n)},s.prototype.removeLayer=function(e){return this.__getLayers().remove(e)},s.prototype.removeLayerAt=function(e){e===void 0&&(e=0);var n=this.getLayer(e);return n?this.removeLayer(n):null},s.prototype.getLayerLabel=function(e){var n="";if(e){var a=this.get("layerLabel"),u=e.getValues(),m=e.getIndex();if(a)n=a(e,{index:m,values:u,property:this});else{var O=[];this.getProperties().map(function(P){O.push(u[P.getId()])}),n=O.filter(Boolean).join(" ")}}return n},s.prototype.getStyleFromLayer=function(e,n){var a;n===void 0&&(n={});var u,m=this.__getJoin(),O=this.__getJoinLayers(),P=this.get("toStyle"),j=this.getName(),A=e.getValues();if(P)u=P(A,{join:m,joinLayers:O,name:j,layer:e,property:this});else{var nt=this.getProperties().map(function(At){var Bt=At.getName(),qt=A[At.getId()],be=(0,k.isUndefined)(qt)?At.getDefaultValue():qt;if(n.number&&pv(At.getType())){var Ee=At.parseValue(qt,n.number);be="".concat(Ee.value).concat(Ee.unit)}return{name:Bt,value:be}});u=this.isDetached()?nt.reduce(function(At,Bt){return At[Bt.name]=Bt.value,At},{}):((a={})[this.getName()]=nt.map(function(At){return At.value}).join(m),a)}return n.camelCase?Object.keys(u).reduce(function(At,Bt){return At[(0,B.camelCase)(Bt)]=u[Bt],At},{}):u},s.prototype.getStylePreview=function(e,n){n===void 0&&(n={});var a={};return this.get("preview")&&(a=this.getStyleFromLayer(e,n)),a},s.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,k.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},s.prototype.__upProperties=function(e,n){var a;n===void 0&&(n={});var u=this.getSelectedLayer();u&&(u.upValues(((a={})[e.getId()]=e.__getFullValue(),a)),n.__up||this.__upTargetsStyleProps(n))},s.prototype.__upLayers=function(e,n,a){this.__upTargetsStyleProps(a||n)},s.prototype.__upTargets=function(e,n){if(n===void 0&&(n={}),!n.__select)return Pi.prototype.__upTargets.call(this,e,n)},s.prototype.__upTargetsStyleProps=function(e){e===void 0&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(),e)},s.prototype.__upTargetsStyle=function(e,n){return Pi.prototype.__upTargetsStyle.call(this,e,n)},s.prototype.__upSelected=function(e,n){var a=(e===void 0?{}:e).noEvent;n===void 0&&(n={});var u=this.em.Styles,m=this.getSelectedLayer(),O=m==null?void 0:m.getValues();O&&this.getProperties().forEach(function(P){var j,A=(j=O[P.getId()])!==null&&j!==void 0?j:"";P.__getFullValue()!==A&&P.upValue(A,Ql(Ql({},n),{__up:!0}))}),!a&&u.__trgEv(u.events.layerSelect,{property:this})},s.prototype._up=function(e,n){n===void 0&&(n={});var a=e.__layers,u=a===void 0?[]:a,m=wy(e,["__layers"]);return!this.isDetached()&&this.__setLayers(u),this.__upSelected({noEvent:!0},n),Pi.prototype._up.call(this,m,n),this},s.prototype.__setLayers=function(e){e===void 0&&(e=[]);var n=this.__getLayers(),a=e.map(function(u){return{values:u}});n.length===a.length?a.map(function(u,m){var O;return(O=n.at(m))===null||O===void 0?void 0:O.upValues(u.values)}):this.__getLayers().reset(a),this.__upSelected({noEvent:!0})},s.prototype.__parseValue=function(e){var n=this,a=this.parseValue(e);return a.__layers=e.split(_y).map(function(u){return u.trim()}).map(function(u){return n.__parseLayer(u)}).filter(Boolean),a},s.prototype.__parseLayer=function(e){var n=this.get("parseLayer"),a=e.split(xy),u=this.getProperties();return n?n({value:e,values:a}):u.reduce(function(m,O,P){var j=a[P];return m[O.getId()]=(0,k.isUndefined)(j)?O.getDefaultValue():j,m},{})},s.prototype.__getLayersFromStyle=function(e){var n=this;if(e===void 0&&(e={}),!this.__styleHasProps(e))return null;var a=this.getName(),u=this.getProperties(),m=this.getLayerSeparator(),O=this.get("fromStyle"),P=O?O(e,{property:this,name:a,separatorLayers:m}):[];if(!O){var j=this.__splitStyleName(e,a,m).map(function(A){return A.split(n.getSplitSeparator())}).map(function(A){var nt={};return u.forEach(function(At,Bt){var qt=A[Bt];nt[At.getId()]=(0,k.isUndefined)(qt)?At.getDefaultValue():qt}),nt});u.forEach(function(A){var nt=A.getId();n.__splitStyleName(e,A.getName(),m).map(function(At){var Bt;return(Bt={})[nt]=At||A.getDefaultValue(),Bt}).forEach(function(At,Bt){j[Bt]=j[Bt]?Ql(Ql({},j[Bt]),At):At})}),P=j}return(0,k.isArray)(P)?P:[P]},s.prototype.getStyle=function(e){return e===void 0&&(e={}),this.getStyleFromLayers(e)},s.prototype.getStyleFromLayers=function(e){var n=this;e===void 0&&(e={});var a={},u=this.getName(),m=this.getLayers(),O=this.getProperties();if(m.map(function(j){return n.getStyleFromLayer(j,e)}).forEach(function(j){(0,k.keys)(j).map(function(A){a[A]||(a[A]=[]),a[A].push(j[A])})}),(0,k.keys)(a).map(function(j){a[j]=a[j].join(n.__getJoinLayers())}),this.isDetached())a[u]="",!m.length&&O.map(function(j){a[j.getName()]=""});else{var P=O.reduce(function(j,A){return j[A.getName()]="",j},{});a[u]=a[u]||"",a=Ql(Ql({},a),P)}return a},s.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),n=this.get("layerSeparator");return e||((0,k.isString)(n)?n:e)},s.prototype.__getFullValue=function(){return this.get("detached")?"":this.getStyleFromLayers()[this.getName()]},s.prototype.hasValue=function(e){e===void 0&&(e={});var n=e.noParent&&this.getParentTarget();return this.getLayers().length>0&&!n},s.prototype.clear=function(e){return e===void 0&&(e={}),this.__getLayers().reset(),this.__upTargetsStyleProps(e),Pi.prototype.clear.call(this),this},s.prototype.__canClearProp=function(){return!1},s}(ip);const Sy=Cy;var hv=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cd=function(){return cd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},cd.apply(this,arguments)},gv=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},vv=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},$d="data-clear-style",mv=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this;(0,k.bindAll)(n,"__change","__updateStyle");var a=e.config||{},u=a.em;n.config=a,n.em=u,n.pfx=a.stylePrefix||"",n.ppfx=a.pStylePrefix||"",n.__destroyFn=n.destroy?n.destroy.bind(n):function(){};var m=n.model;m.view=n,n.onValueChange=(0,k.debounce)(n.onValueChange.bind(n),10),n.updateStatus=(0,k.debounce)(n.updateStatus.bind(n),0),n.listenTo(m,"destroy remove",n.remove),n.listenTo(m,"change:visible",n.updateVisibility),n.listenTo(m,"change:name change:className change:full",n.render),n.listenTo(m,"change:value",n.onValueChange),n.listenTo(m,"change:parentTarget",n.updateStatus),n.listenTo(u,"change:device",n.onValueChange);var O=n.init&&n.init.bind(n);return O&&O(),n}return hv(s,h),s.prototype.events=function(){var e;return(e={change:"inputValueChanged"})["click [".concat($d,"]")]="clear",e},s.prototype.template=function(e){var n=this.pfx,a=this.ppfx;return`
      <div class="`.concat(n,`label" data-sm-label></div>
      <div class="`).concat(a,`fields" data-sm-fields></div>
    `)},s.prototype.templateLabel=function(e){var n=this.pfx,a=this.em,u=e.parent,m=e.attributes,O=m.icon,P=O===void 0?"":O,j=m.info,A=j===void 0?"":j,nt=a==null?void 0:a.getConfig().icons,At=(nt==null?void 0:nt.close)||"";return`
      <span class="`.concat(n,"icon ").concat(P,'" title="').concat(A,`">
        `).concat(e.getLabel(),`
      </span>
      `).concat(u?"":'<div class="'.concat(n,'clear" style="display: none" ').concat($d,">").concat(At,"</div>"),`
    `)},s.prototype.templateInput=function(e){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(e.getDefaultValue(),`"/>
      </div>
    `)},s.prototype.remove=function(){var e=this;return N.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(n){return e[n]=null}),this.__destroyFn(this._getClbOpts()),this},s.prototype.updateStatus=function(){var e,n=this,a=n.model,u=n.pfx,m=n.ppfx,O=n.config,P="".concat(m,"four-color"),j="".concat(m,"color-warn"),A=this.$el.children(".".concat(u,"label")),nt=this.getClearEl(),At=nt?nt.style:{};A.removeClass("".concat(P," ").concat(j)),At.display="none",a.hasValue({noParent:!0})&&O.highlightChanged?(A.addClass(P),O.clearProperties&&(At.display="")):a.hasValue()&&O.highlightComputed&&A.addClass(j),(e=this.parent)===null||e===void 0||e.updateStatus()},s.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},s.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat($d,"]"))),this.clearEl},s.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),this.emit||this.model.upValue(e.target.value)},s.prototype.onValueChange=function(e,n,a){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},s.prototype.setValue=function(e){var n=this.model,a=(0,k.isUndefined)(e)||e===""?n.getDefaultValue():e;if(this.update)return this.__update(a);this.__setValueInput(a)},s.prototype.__setValueInput=function(e){var n=this.getInputEl();n&&(n.value=e)},s.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},s.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},s.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},s.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},s.prototype.__update=function(e){var n=this.update&&this.update.bind(this);n&&n(cd(cd({},this._getClbOpts()),{value:e}))},s.prototype.__change=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=this.emit&&this.emit.bind(this);a&&a.apply(void 0,vv([this._getClbOpts()],e,!1))},s.prototype.__updateStyle=function(e,n){n===void 0&&(n={});var a=n.complete,u=n.partial,m=(gv(n,["complete","partial"]),this.model),O=a!==!1&&u!==!0;(0,B.isObject)(e)?m.__upTargetsStyle(e,{avoidStore:!O}):m.upValue(e,{partial:!O})},s.prototype._getClbOpts=function(){var e=this,n=e.model;return{el:e.el,createdEl:e.createdEl,property:n,props:n.attributes,change:this.__change,updateStyle:this.__updateStyle}},s.prototype.render=function(){this.clearCached();var e=this,n=e.pfx,a=e.model,u=e.el,m=e.$el,O=a.getName(),P=a.getType(),j=a.get("className")||"",A="".concat(n,"property"),nt=P==="number"?"".concat(n).concat(P," ").concat(n,"integer"):"".concat(n).concat(P);this.createdEl&&this.__destroyFn(this._getClbOpts()),m.empty().append(this.template(a)),m.find("[data-sm-label]").append(this.templateLabel(a));var At=this.create&&this.create.bind(this);this.createdEl=At&&At(this._getClbOpts()),m.find("[data-sm-fields]").append(this.createdEl||this.templateInput(a)),u.className="".concat(A," ").concat(nt," ").concat(A,"__").concat(O," ").concat(j).trim(),u.className+=a.isFull()?" ".concat(A,"--full"):"";var Bt=this.onRender&&this.onRender.bind(this);return Bt&&Bt(),this.setValue(a.getValue()),this},s.prototype.onRender=function(){},s}(N.G7);const Wc=mv;var Jh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Oy=function(h){function s(e){var n=h.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||"",n.properties=[],n.parent=e.parent;var a=n.collection;return n.listenTo(a,"add",n.addTo),n.listenTo(a,"reset",n.render),n}return Jh(s,h),s.prototype.addTo=function(e,n,a){this.add(e,null,a)},s.prototype.add=function(e,n,a){a===void 0&&(a={});var u=this.parent,m=this.config,O=n||this.el,P=new e.typeView({model:e,config:m});u&&(P.parent=u),P.render();var j=P.el;this.properties.push(P),(0,vn.$Q)(O,j,a.at)},s.prototype.remove=function(){return N.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},s.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},s.prototype.render=function(){var e=this,n=this.$el,a=this.pfx;this.clearItems();var u=document.createDocumentFragment();return this.collection.forEach(function(m){return e.add(m,u)}),n.empty(),n.append(u),n.attr("class","".concat(a,"properties")),this},s}(N.G7);const ud=Oy;var Ty=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gd=function(){return Gd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Gd.apply(this,arguments)};const Vp=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ty(s,h),s.prototype.templateInput=function(){var e=this.pfx;return`
      <div class="`.concat(e,"field ").concat(e,`composite">
        <span id="`).concat(e,`input-holder"></span>
      </div>
    `)},s.prototype.remove=function(){var e;return(e=this.props)===null||e===void 0||e.remove(),Wc.prototype.remove.apply(this,arguments),this},s.prototype.onValueChange=function(){},s.prototype.onRender=function(){var e=this.pfx,n=this.model,a=n.get("properties");if(a.length&&!this.props){var u=n.isDetached(),m=new ud({config:Gd(Gd({},this.config),{highlightComputed:u,highlightChanged:u}),collection:a,parent:this});m.render(),this.$el.find("#".concat(e,"input-holder")).append(m.el),this.props=m}},s.prototype.clearCached=function(){Wc.prototype.clearCached.apply(this,arguments),delete this.props},s}(Wc);var Ey=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yv=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ey(s,h),s.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},s.prototype.template=function(){var e=this,n=e.pfx,a=e.ppfx,u=e.em,m=u==null?void 0:u.getConfig().icons,O=(m==null?void 0:m.close)||"",P=(m==null?void 0:m.move)||"";return`
      <div class="`.concat(n,`label-wrp">
        <div id="`).concat(n,'move" class="').concat(a,`no-touch-actions" data-move-layer>
          `).concat(P,`
        </div>
        <div id="`).concat(n,`label" data-label></div>
        <div id="`).concat(n,'preview-box" class="').concat(n,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(n,'preview" class="').concat(n,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(n,'close-layer" class="').concat(n,`btn-close" data-close-layer>
          `).concat(O,`
        </div>
      </div>
      <div id="`).concat(n,`inputs" data-properties></div>
    `)},s.prototype.initialize=function(e){e===void 0&&(e={});var n=this.model,a=e.config||{};this.em=a.em,this.config=a,this.sorter=e.sorter,this.pfx=a.stylePrefix||"",this.ppfx=a.pStylePrefix||"",this.propertyView=e.propertyView;var u=this.propertyView.model;this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change:values",this.updateLabel),this.listenTo(u,"change:selectedLayer",this.updateVisibility),n.view=this,n.set({droppable:0,draggable:1}),this.$el.data("model",n)},s.prototype.initSorter=function(){var e;(e=this.sorter)===null||e===void 0||e.startSort(this.el)},s.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},s.prototype.select=function(){this.model.select()},s.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},s.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},s.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},s.prototype.updateLabel=function(){var e=this.model,n=e.getLabel();if(this.getLabelEl().innerHTML=n,e.hasPreview()){var a=this.getPreviewEl(),u=e.getStylePreview({number:{min:-3,max:3}}),m=(0,k.keys)(u).map(function(O){return"".concat(O,":").concat(u[O])}).join(";");a.setAttribute("style",m)}},s.prototype.updateVisibility=function(){var e,n=this,a=n.pfx,u=n.model,m=n.propertyView,O=this.getPropertiesWrapper(),P=u.isSelected();O.style.display=P?"":"none",this.$el[P?"addClass":"removeClass"]("".concat(a,"active")),P&&O.appendChild((e=m.props)===null||e===void 0?void 0:e.el)},s.prototype.render=function(){var e=this,n=e.el,a=e.pfx,u=e.model;return n.innerHTML=this.template(),n.className="".concat(a,"layer"),u.hasPreview()&&(n.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},s}(N.G7);const bv=yv;var Py=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ky=function(h){function s(e){var n=h.call(this,e)||this,a=n.collection,u=e.config||{},m=u.em,O=u.stylePrefix||"",P=u.pStylePrefix||"";n.config=u,n.pfx=O,n.ppfx=P,n.propertyView=e.propertyView,n.className="".concat(O,"layers ").concat(P,"field"),n.listenTo(a,"add",n.addTo),n.listenTo(a,"reset",n.reset),n.items=[];var j=m==null?void 0:m.Utils;return n.sorter=j?new j.Sorter({container:n.el,ignoreViewChildren:1,containerSel:".".concat(O,"layers"),itemSel:".".concat(O,"layer"),pfx:u.pStylePrefix}):"",a.view=n,n.$el.data("model",a),n.$el.data("collection",a),n}return Py(s,h),s.prototype.addTo=function(e){var n=this.collection.indexOf(e);this.addToCollection(e,null,n)},s.prototype.addToCollection=function(e,n,a){var u=n||null,m=this,O=m.propertyView,P=m.config,j=m.sorter,A=m.$el,nt=new bv({model:e,config:P,sorter:j,propertyView:O}),At=nt.render().el;if(this.items.push(nt),u)u.appendChild(At);else if(a!==void 0){var Bt="before";A.children().length===a&&(a--,Bt="after"),a<0?A.append(At):A.children().eq(a)[Bt](At)}else A.append(At);return At},s.prototype.reset=function(e,n){this.clearItems(),this.render()},s.prototype.remove=function(){return this.clearItems(),N.G7.prototype.remove.apply(this,arguments),this},s.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},s.prototype.render=function(){var e=this,n=this.$el,a=this.sorter,u=document.createDocumentFragment();return n.empty(),this.collection.forEach(function(m){return e.addToCollection(m,u)}),n.append(u),n.attr("class",this.className),a&&(a.plh=null),this},s}(N.G7);const wv=ky;var Ay=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ap=function(){return ap=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},ap.apply(this,arguments)},My=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ay(s,h),s.prototype.events=function(){return ap(ap({},Vp.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},s.prototype.templateInput=function(){var e=this.pfx,n=this.em,a=n==null?void 0:n.getConfig().icons,u=(a==null?void 0:a.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(u,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},s.prototype.init=function(){var e=this.model;this.listenTo(e.__getLayers(),"change reset",this.updateStatus)},s.prototype.addLayer=function(){this.model.addLayer({},{at:0})},s.prototype.setValue=function(){},s.prototype.remove=function(){var e;return(e=this.layersView)===null||e===void 0||e.remove(),Vp.prototype.remove.apply(this,arguments),this},s.prototype.clearCached=function(){Vp.prototype.clearCached.apply(this,arguments),delete this.layersView},s.prototype.onRender=function(){var e=this,n=e.model,a=e.el,u=e.config,m=n.get("properties");if(m.length&&!this.props){var O=new ud({config:ap(ap({},u),{highlightComputed:!1,highlightChanged:!1}),collection:m,parent:this});O.render();var P=new wv({collection:n.__getLayers(),config:u,propertyView:this});P.render(),a.querySelector("[data-layers-wrapper]").appendChild(P.el),this.props=O,this.layersView=P}},s}(Vp);const Ly=My;var Fp=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qd=function(){return qd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},qd.apply(this,arguments)};const jy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Fp(s,h),s.prototype.events=function(){return qd(qd({},Wc.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},s.prototype.templateInput=function(){var e,n=this.pfx,a=this.em,u=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,m=u==null?void 0:u.close;return`
      <div class="`.concat(n,"field ").concat(n,`file">
        <div id='`).concat(n,`input-holder'>
          <div class="`).concat(n,`btn-c">
            <button class="`).concat(n,'btn" id="').concat(n,`images" type="button" data-open-assets>
              `).concat(a.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(n,'preview-box" class="').concat(n,`preview-file" data-preview-box>
          <div id="`).concat(n,'preview-file" class="').concat(n,`preview-file-cnt" data-preview></div>
          <div id="`).concat(n,'close" class="').concat(n,'preview-file-close" data-clear-asset>').concat(m,`</div>
        </div>
      </div>
    `)},s.prototype.__setValueInput=function(e){var n=this.model,a=this.el,u=n.getDefaultValue(),m=a.querySelector("[data-preview-box]"),O=a.querySelector("[data-preview]");m.style.display=e&&e!==u?"":"none",O.style.backgroundImage=e||n.getDefaultValue()},s.prototype.openAssetManager=function(){var e,n=this,a=(e=this.em)===null||e===void 0?void 0:e.Assets;a==null||a.open({select:function(u,m){var O=(0,k.isString)(u)?u:u.get("src");n.model.upValue(O,{partial:!m}),m&&a.close()},types:["image"],accept:"image/*"})},s}(Wc);var Dy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Uu=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Dy(s,h),s.prototype.templateInput=function(e){return""},s.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},s.prototype.setValue=function(e){},s.prototype.onRender=function(){var e=this,n=e.ppfx,a=e.model,u=e.el;if(!this.inputInst){var m=a.input;m.ppfx=n,m.render(),u.querySelector(".".concat(n,"fields")).appendChild(m.el),this.input=m.inputEl.get(0),this.inputInst=m}},s.prototype.clearCached=function(){Wc.prototype.clearCached.apply(this,arguments),this.inputInst=null},s}(Wc);var Iy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const Ny=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Iy(s,h),s.prototype.setValue=function(e){var n;(n=this.inputInst)===null||n===void 0||n.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},s.prototype.remove=function(){var e=this;Uu.prototype.remove.apply(this,arguments);var n=this.inputInst;return n&&n.remove&&n.remove(),["inputInst","$color"].forEach(function(a){return e[a]=null}),this},s.prototype.__handleChange=function(e,n){this.model.upValue(e,{partial:n})},s.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var n=this,a=n.ppfx,u=n.model,m=n.em,O=n.el,P=new Ur({target:m,model:u,ppfx:a,onChange:this.__handleChange}).render();O.querySelector(".".concat(a,"fields")).appendChild(P.el),this.input=(e=P.inputEl)===null||e===void 0?void 0:e.get(0),this.inputInst=P}},s}(Uu);var Qh=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Kd=function(){return Kd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Kd.apply(this,arguments)},_v=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))};const tg=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Qh(s,h),s.prototype.defaults=function(){return Kd(Kd({},Pi.getDefaults()),{options:[],full:0})},s.prototype.getOptions=function(){var e=this.attributes,n=e.options,a=e.list;return(n&&n.length?n:a)||[]},s.prototype.getOption=function(e){var n=this,a=(0,B.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(u){return n.getOptionId(u)===a})[0]||null},s.prototype.setOptions=function(e){return e===void 0&&(e=[]),this.set("options",e),this},s.prototype.addOption=function(e){if(e){var n=this.getOptions();this.setOptions(_v(_v([],n,!0),[e],!1))}return this},s.prototype.getOptionId=function(e){return(0,B.isDef)(e.id)?e.id:e.value},s.prototype.getOptionLabel=function(e,n){var a;n===void 0&&(n={});var u=n.locale,m=u===void 0||u,O=((0,k.isString)(e)?this.getOption(e):e)||{},P=this.getOptionId(O),j=O.label||O.name||P,A=n.property||this.getId();return m&&((a=this.em)===null||a===void 0?void 0:a.t("styleManager.options.".concat(A,".").concat(P)))||j},s.prototype.initialize=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Pi.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},s.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},s}(Pi);var Vy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const xv=function(h){function s(e){var n=h.call(this,e)||this;return n.listenTo(n.model,"change:options",n.updateOptions),n}return Vy(s,h),s.prototype.templateInput=function(){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(n,"field ").concat(n,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(n,`sel-arrow">
          <div class="`).concat(n,`d-s-arrow"></div>
        </div>
      </div>
    `)},s.prototype.updateOptions=function(){delete this.input,this.onRender()},s.prototype.onRender=function(){var e=this.pfx,n=this.model,a=n.getOptions();if(!this.input){var u=[];a.forEach(function(O){var P=n.getOptionId(O),j=n.getOptionLabel(P),A=O.style?O.style.replace(/"/g,"&quot;"):"",nt=A?'style="'.concat(A,'"'):"",At=P.replace(/"/g,"&quot;");u.push('<option value="'.concat(At,'" ').concat(nt,">").concat(j,"</option>"))});var m=this.el.querySelector("#".concat(e,"input-holder"));m.innerHTML="<select>".concat(u.join(""),"</select>"),this.input=m.firstChild}},s.prototype.__setValueInput=function(e){var n=this.model,a=this.getInputEl(),u=n.getOptions()[0],m=u?n.getOptionId(u):"";a&&(a.value=e||m)},s}(Wc);var Fy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yd=function(){return Yd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Yd.apply(this,arguments)};const Ry=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Fy(s,h),s.prototype.defaults=function(){return Yd(Yd({},tg.getDefaults()),{full:1})},s}(tg);var Hy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();const By=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Hy(s,h),s.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},s.prototype.onRender=function(){var e=this.pfx,n=this.ppfx,a=this.model,u="".concat(n,"radio-item-label"),m=a.getName(),O=a.getOptions(),P="".concat(e,"radio ").concat(e,"radio-").concat(m),j=a.cid;if(!this.input){var A=[];O.forEach(function(At){var Bt=At.className?"".concat(At.className," ").concat(e,"icon ").concat(u):"",qt=a.getOptionId(At),be="".concat(m,"-").concat(qt,"-").concat(j),Ee=Bt?"":a.getOptionLabel(qt),Ce=At.title?'title="'.concat(At.title,'"'):"",rr=a.getValue()===qt?"checked":"";A.push(`
          <div class="`.concat(n,`radio-item">
            <input type="radio" class="`).concat(P,'" id="').concat(be,'" name="').concat(m,"-").concat(j,'" value="').concat(qt,'" ').concat(rr,`/>
            <label class="`).concat(Bt||u,'" ').concat(Ce,' for="').concat(be,'">').concat(Ee,`</label>
          </div>
        `))});var nt=this.el.querySelector(".".concat(n,"field"));nt.innerHTML='<div class="'.concat(n,'radio-items">').concat(A.join(""),"</div>"),this.input=nt.firstChild}},s.prototype.__setValueInput=function(e){var n,a=this.model,u=e||a.getDefaultValue(),m=(n=this.getInputEl())===null||n===void 0?void 0:n.querySelector('[value="'.concat(u,'"]'));m&&(m.checked=!0)},s}(xv);var Uy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sp=function(){return sp=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},sp.apply(this,arguments)};const Zd=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Uy(s,h),s.prototype.defaults=function(){return sp(sp({},Pi.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},s.prototype.getUnits=function(){return this.get("units")||[]},s.prototype.getUnit=function(){return this.get("unit")},s.prototype.getMin=function(){return this.get("min")},s.prototype.getMax=function(){return this.get("max")},s.prototype.getStep=function(){return this.get("step")},s.prototype.upUnit=function(e,n){return n===void 0&&(n={}),this._up({unit:e},n)},s.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Pi.callParentInit(Pi,this,e,n);var a=this.get("unit"),u=this.getUnits();this.input=(0,B.hasWin)()?new Pr({model:this}):void 0,u.length&&!a&&this.set("unit",u[0],{silent:!0}),Pi.callInit(this,e,n)},s.prototype.__getClearProps=function(){return sp(sp({},Pi.prototype.__getClearProps()),{unit:""})},s.prototype.parseValue=function(e,n){n===void 0&&(n={});var a=Pi.prototype.parseValue.apply(this,arguments),u=this.input.validateInputValue(a.value,sp({deepCheck:1},n)),m=u.value,O=u.unit;return a.value=m,a.unit=O,a},s.prototype.getFullValue=function(){var e=this.get("value"),n=this.get("unit"),a=(0,k.isUndefined)(e)?"":"".concat(e),u=!(0,k.isUndefined)(n)&&a?n:"",m="".concat(a).concat(u);return Pi.prototype.getFullValue.apply(this,[m])},s}(Pi);var zy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xd=function(){return Xd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Xd.apply(this,arguments)};const Wy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return zy(s,h),s.prototype.defaults=function(){return Xd(Xd({},Zd.getDefaults()),{showInput:1})},s}(Zd);var $y=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jd=function(){return Jd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Jd.apply(this,arguments)};const Gy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return $y(s,h),s.prototype.events=function(){return Jd(Jd({},Uu.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},s.prototype.templateInput=function(e){var n=this.ppfx;return`
      <div class="`.concat(n,"field ").concat(n,`field-range">
        <input type="range" min="`).concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),`"/>
      </div>
    `)},s.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},s.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},s.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},s.prototype.setValue=function(e){var n=this.model,a=n.parseValue(e);this.getSliderEl().value=e===""?n.getDefaultValue():parseFloat(a.value),Uu.prototype.setValue.apply(this,arguments)},s.prototype.onRender=function(){Uu.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},s.prototype.clearCached=function(){Uu.prototype.clearCached.apply(this,arguments),delete this.slider},s}(Uu),eg=N.FE.extend(qo).extend({extendViewApi:1,init:function(){var h=this.opts,s=this.em,e=h.module||(s==null?void 0:s.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:Sy,view:Ly,isType:function(h){if(h&&h.type=="stack")return h}},{id:"composite",model:ip,view:Vp,isType:function(h){if(h&&h.type=="composite")return h}},{id:"file",model:Pi,view:jy,isType:function(h){if(h&&h.type=="file")return h}},{id:"color",model:Pi,view:Ny,isType:function(h){if(h&&h.type=="color")return h}},{id:"select",model:tg,view:xv,isType:function(h){if(h&&h.type=="select")return h}},{id:"radio",model:Ry,view:By,isType:function(h){if(h&&h.type=="radio")return h}},{id:"slider",model:Wy,view:Gy,isType:function(h){if(h&&h.type=="slider")return h}},{id:"integer",model:Zd,view:Uu,isType:function(h){if(h&&h.type=="integer")return h}},{id:"number",model:Zd,view:Uu,isType:function(h){if(h&&h.type=="number")return h}},{id:"base",model:Pi,view:Wc,isType:function(h){return h.type="base",h}}]});var qy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qd=function(){return Qd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Qd.apply(this,arguments)},rg=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},fd=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))};const ng=function(h){function s(e,n){n===void 0&&(n={});var a=h.call(this,e)||this,u=n.em;a.em=u;var m=e||{},O=a.buildProperties(m.buildProps),P=a.get("name")||"",j=[];!a.get("id")&&a.set("id",P.replace(/ /g,"_").toLowerCase()),j=(j=O?a.extendProperties(O):a.get("properties").map(function(nt){return(0,k.isString)(nt)?a.buildProperties(nt)[0]:nt}).filter(Boolean)).map(function(nt){return a.checkExtend(nt)});var A=new eg(j,{em:u});return A.sector=a,a.set("properties",A),a}return qy(s,h),s.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(s.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),s.prototype.getId=function(){return this.get("id")},s.prototype.getName=function(){var e,n=this.getId();return((e=this.em)===null||e===void 0?void 0:e.t("styleManager.sectors.".concat(n)))||this.get("name")},s.prototype.setName=function(e){return this.set("name",e)},s.prototype.isOpen=function(){return!!this.get("open")},s.prototype.setOpen=function(e){return this.set("open",e)},s.prototype.isVisible=function(){return!!this.get("visible")},s.prototype.getProperties=function(e){e===void 0&&(e={});var n=this.get("properties");return(n.models?fd([],n.models,!0):n).filter(function(a){var u=!0;return e.withValue&&(u=a.hasValue({noParent:!0})),e.withParentValue&&(u=!a.hasValue({noParent:!0})&&a.hasValue()),u})},s.prototype.getProperty=function(e){return this.getProperties().filter(function(n){return n.get("id")===e})[0]||void 0},s.prototype.addProperty=function(e,n){return this.get("properties").add(this.checkExtend(e),n)},s.prototype.extendProperties=function(e,n,a){a===void 0&&(a=!1);for(var u=e.length,m=n||this.get("properties"),O=this.get("extendBuilded"),P=[],j=0,A=m.length;j<A;j++){for(var nt=m[j],At=0,Bt=0;Bt<u;Bt++){var qt=e[Bt];if(!(nt.property!=qt.property&&nt.id!=qt.property)){var be=nt.properties;be&&be.length&&(nt.properties=this.extendProperties(qt.properties||[],be,1)),e[Bt]=O?(0,k.extend)(qt,nt):nt,P[Bt]=e[Bt],At=1}}At||(e.push(nt),P.push(nt))}return a?P.filter(function(Ee){return Ee}):e},s.prototype.checkExtend=function(e){var n=((0,k.isString)(e)?{extend:e}:e)||{},a=n.extend,u=rg(n,["extend"]);return a?Qd(Qd({},this.buildProperties([a])[0]||{}),u):e},s.prototype.buildProperties=function(e){var n,a=e||[];if(!a.length)return[];var u=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager").builtIn;return u==null?void 0:u.build(a)},s}(N.Hn);var Ky=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),th=function(){return th=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},th.apply(this,arguments)};const Yy=function(h){function s(){return h!==null&&h.apply(this,arguments)||this}return Ky(s,h),s.prototype.initialize=function(e,n){n===void 0&&(n={});var a=n.module,u=n.em;this.em=u,this.module=a,this.listenTo(this,"reset",this.onReset)},s.prototype.model=function(e,n){n===void 0&&(n={});var a=n.collection.em;return new ng(e,th(th({},n),{em:a}))},s.prototype.onReset=function(e,n){n===void 0&&(n={}),(n.previousModels||[]).forEach(function(a){return a.get("properties").reset()})},s}(N.FE);var wf=function(){return wf=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},wf.apply(this,arguments)},Zy=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},_f=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Va=function(h){return h.map(function(s){return{id:s}})},eh=function(){function h(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var s=", sans-serif",e=["flex-start","flex-end","center"],n=_f(_f([],e,!0),["baseline","stretch"],!1);this.optsBgSize=Va(["auto","cover","contain"]),this.optsBgAttach=Va(["scroll","fixed","local"]),this.optsBgRepeat=Va(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=Va(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=Va(["visible","hidden","scroll","auto"]),this.optsDir=Va(["row","row-reverse","column","column-reverse"]),this.opstDisplay=Va(["block","inline","inline-block","flex","none"]),this.optsTransitFn=Va(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=Va(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=Va(["none","left","right"]),this.optsPos=Va(["static","relative","absolute","fixed"]),this.optsTextAlign=Va(["left","center","right","justify"]),this.optsFlexAlign=Va(n),this.optsJustCont=Va(_f(_f([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=Va(_f(_f([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=Va(_f(["auto"],n,!0)),this.optsTransitProp=Va(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=Va(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=Va(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+s,"Arial Black, Gadget"+s,"Brush Script MT"+s,"Comic Sans MS, cursive"+s,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+s,"Impact, Charcoal"+s,"Lucida Sans Unicode, Lucida Grande"+s,"Tahoma, Geneva"+s,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+s,"Verdana, Geneva"+s].map(function(a){return{id:a,label:a.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return h.prototype.__sub=function(s){var e=this;return function(){return s.map(function(n){if((0,k.isString)(n))return e.get(n);var a=n.extend,u=Zy(n,["extend"]);return wf(wf({},e.get(a)),u)})}},h.prototype.init=function(){var s=this,e=this,n=e.fixedValues,a=e.requireFlex,u=e.typeNumber;this.props={};var m=[["text-shadow-h",{type:u,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:n},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:a},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:u,default:"0",requiresParent:a}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:a},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:a},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(O,P){var j=P.values,A=j["box-shadow-h"],nt=j["box-shadow-v"],At=j["box-shadow-blur"],Bt=j["box-shadow-spread"];return"".concat(A," ").concat(nt," ").concat(At," ").concat(Bt)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(O,P){var j=P.values,A=j["text-shadow-h"],nt=j["text-shadow-v"],At=j["text-shadow-blur"];return"".concat(A," ").concat(nt," ").concat(At)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(O,P){var j=P.values;return[j["background-repeat-sub"]||"",j["background-position-sub"]||"",j["background-attachment-sub"]||"",j["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(O,P){var j=P.property,A=O[P.name]||"",nt=j.getLayerSeparator();return A?A.split(nt).map(function(At){var Bt=j.__parseFn(At);return{"transform-type":Bt.name,"transform-value":Bt.value}}):[]},toStyle:function(O,P){var j;return(j={})[P.name]="".concat(O["transform-type"],"(").concat(O["transform-value"],")"),j},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(O){var P=O.property;if(O.to.value){var j=P.getOption(),A=wf({},j.propValue||{}),nt=P.getParent().getProperty("transform-value"),At=nt.getUnit();(!At||(A==null?void 0:A.units.indexOf(At))<0)&&(A.unit=(A==null?void 0:A.units[0])||""),nt.up(A)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return m.forEach(function(O){var P=O[0],j=O[1],A=O[2];s.add(P,j||{},{from:A})}),this},h.prototype.add=function(s,e,n){e===void 0&&(e={}),n===void 0&&(n={});var a=n.from||"",u=this.props[a||s]||{},m=wf(wf(wf({},u),{property:s}),e);return m.properties&&(0,k.isFunction)(m.properties)&&(m.properties=m.properties()),this.props[s]=m,m},h.prototype.get=function(s){return this.props[s]},h.prototype.build=function(s){var e=this,n=[];return((0,k.isString)(s)?[s]:s).forEach(function(a){n.push(e.get(a)||{property:a})}),n},h}();const Xy=eh;var Jy=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qy=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},t0=function(h){function s(e){var n=h.call(this,e)||this,a=e.config||{},u=n.model,m=a.em;return n.config=a,n.em=m,n.pfx=a.stylePrefix||"",n.listenTo(u,"destroy remove",n.remove),n.listenTo(u,"change:open",n.updateOpen),n.listenTo(u,"change:visible",n.updateVisibility),n}return Jy(s,h),s.prototype.template=function(e){var n,a=e.pfx,u=e.label,m=(n=this.em)===null||n===void 0?void 0:n.getConfig().icons,O=(m==null?void 0:m.caret)||"",P="".concat(a,"sector-");return ct(Cv||(Cv=Qy([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),P,P,O,P,u)},s.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},s.prototype.updateOpen=function(){var e=this,n=e.$el,a=e.model,u=e.pfx,m=a.isOpen();n[m?"addClass":"removeClass"]("".concat(u,"open")),this.getPropertiesEl().style.display=m?"":"none"},s.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},s.prototype.getPropertiesEl=function(){var e=this.$el,n=this.pfx;return e.find(".".concat(n,"properties")).get(0)},s.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},s.prototype.renderProperties=function(){var e=this.model,n=this.config,a=e.get("properties");if(a){var u=new ud({collection:a,config:n});this.$el.append(u.render().el)}},s.prototype.render=function(){var e=this,n=e.pfx,a=e.model,u=e.$el,m=a.getId(),O=a.getName();return u.html(this.template({pfx:n,label:O})),this.renderProperties(),u.attr("class","".concat(n,"sector ").concat(n,"sector__").concat(m," no-select")),this.updateOpen(),this},s}(N.G7);const e0=t0;var Cv,r0=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),n0=function(h){function s(e){e===void 0&&(e={});var n=h.call(this,e)||this,a=e.module,u=e.config,m=n.collection;return n.pfx=(u==null?void 0:u.stylePrefix)||"",n.ppfx=(u==null?void 0:u.pStylePrefix)||"",n.config=u,n.module=a,n.listenTo(m,"add",n.addTo),n.listenTo(m,"reset",n.render),n}return r0(s,h),s.prototype.remove=function(){var e=this;return N.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(n){return e[n]={}}),this},s.prototype.addTo=function(e,n,a){a===void 0&&(a={}),this.addToCollection(e,null,a)},s.prototype.addToCollection=function(e,n,a){a===void 0&&(a={});var u=this.config,m=this.el,O=n||m,P=new e0({model:e,config:u}).render().el;return(0,vn.$Q)(O,P,a.at),P},s.prototype.render=function(){var e=this,n=this,a=n.$el,u=n.pfx,m=n.ppfx;a.empty();var O=document.createDocumentFragment();return this.collection.each(function(P){return e.addToCollection(P,O)}),a.append(O),a.addClass("".concat(u,"sectors ").concat(m,"one-bg ").concat(m,"two-color")),this},s}(N.G7);const zu=n0;var o0=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$c=function(){return $c=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},$c.apply(this,arguments)},og=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},Sv="style",pd="".concat(Sv,":"),ig="".concat(pd,"sector"),i0="".concat(ig,":add"),Rp="".concat(ig,":remove"),rh="".concat(ig,":update"),dd="".concat(pd,"property"),lp="".concat(dd,":add"),nh="".concat(dd,":remove"),oh="".concat(dd,":update"),Hp="".concat(pd,"layer:select"),ag="".concat(pd,"target"),a0="".concat(pd,"custom"),Ov=function(h){return h||h===0},Tv={all:Sv,sectorAdd:i0,sectorRemove:Rp,sectorUpdate:rh,propertyAdd:lp,propertyRemove:nh,propertyUpdate:oh,layerSelect:Hp,target:ag,custom:a0},Ev=function(h){function s(e){var n=h.call(this,e,"StyleManager",new Yy([],{em:e}),Tv,fy)||this;n.Sector=ng,n.storageKey="",(0,k.bindAll)(n,"__clearStateTarget");var a=n.config,u=a.pStylePrefix;u&&(a.stylePrefix=u+a.stylePrefix),n.builtIn=new Xy,n.properties=new eg([],{em:e,module:n}),n.sectors=n.all;var m=new N.Hn({targets:[]});n.model=m,n.upAll=(0,k.debounce)(function(){return n.__upSel()},0),m.listenTo(e,"component:toggled component:update:classes change:state change:device frame:resized selector:type",n.upAll),m.listenTo(e,"component:toggled",n.__clearStateTarget);var O=(0,k.debounce)(function(){n.__upProps(),n.__trgCustom()},0);m.listenTo(e,"styleable:change undo redo",O);var P=(0,k.debounce)(function(){return n.__trgCustom()},0);return m.listenTo(e,"".concat(Hp," ").concat(ag),P),m.on("change:lastTarget",function(){return e.trigger(ag,n.getSelected())}),n}return o0(s,h),s.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},s.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},s.prototype.__trgEv=function(e){for(var n,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];(n=this.em).trigger.apply(n,og([e],a,!1))},s.prototype.__clearStateTarget=function(){var e=this,n=this.em,a=this.__getStateTarget();a&&(n==null||n.skip(function(){n.Css.remove(a),e.model.set({stateTarget:null})}))},s.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},s.prototype.postRender=function(){this.__appendTo()},s.prototype.addSector=function(e,n,a){a===void 0&&(a={});var u=this.getSector(e);return u||(n.id=e,u=this.sectors.add(n,a)),u},s.prototype.getSector=function(e,n){n===void 0&&(n={});var a=this.sectors.where({id:e})[0];return!a&&n.warn&&this._logNoSector(e),a||null},s.prototype.getSectors=function(e){e===void 0&&(e={});var n=this.sectors,a=n&&n.models?e.array?og([],n.models,!0):n:[];return e.visible?a.filter(function(u){return u.isVisible()}):a},s.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},s.prototype.addProperty=function(e,n,a){a===void 0&&(a={});var u=this.getSector(e,{warn:!0}),m=null;return u&&(m=u.addProperty(n,a)),m},s.prototype.getProperty=function(e,n){var a,u=this.getSector(e,{warn:!0});return u&&(a=u.properties.filter(function(m){return m.get("property")===n||m.get("id")===n})[0]),a},s.prototype.getProperties=function(e){var n,a=this.getSector(e,{warn:!0});return a&&(n=a.properties),n},s.prototype.removeProperty=function(e,n){var a=this.getProperties(e);return a?a.remove(this.getProperty(e,n)):null},s.prototype.select=function(e,n){var a=this;n===void 0&&(n={});var u=this.em,m=(0,k.isArray)(e)?e:[e],O=n.stylable,P=u.Css,j=[];m.filter(Boolean).forEach(function(be){var Ee=be;if((0,k.isString)(be)){var Ce=P.getRule(be)||P.setRule(be);!(0,k.isUndefined)(O)&&Ce.set({stylable:O}),Ee=Ce}j.push(Ee)});var A=n.component||j.filter(function(be){return(0,B.isComponent)(be)}).reverse()[0];j=j.map(function(be){return a.getModelToStyle(be)});var nt=u.getState(),At=j.slice().reverse()[0],Bt=this.getParentRules(At,{state:nt,component:A}),qt=this.__getStateTarget();return u.skip(function(){var be;if(nt&&(!((be=At==null?void 0:At.getState)===null||be===void 0)&&be.call(At))){var Ee=At.getStyle();qt?qt.setStyle(Ee):qt=P.getAll().add({selectors:"gjs-selected",style:Ee,shallow:!0,important:!0})}else qt&&(P.remove(qt),qt=void 0)}),this.model.set({targets:j,lastTarget:At,lastTargetParents:Bt,stateTarget:qt,component:A}),this.__upProps(n),j},s.prototype.getSelected=function(){return this.model.get("lastTarget")},s.prototype.getSelectedAll=function(){return this.model.get("targets")},s.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},s.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},s.prototype.addStyleTargets=function(e,n){this.getSelectedAll().map(function(m){return m.addStyle(e,n)});var a=this.getSelected();a&&this.__emitCmpStyleUpdate(e);var u=this.__getStateTarget();a&&(u==null||u.setStyle(a.getStyle(),n))},s.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},s.prototype.getBuiltInAll=function(){return this.builtIn.props},s.prototype.addBuiltIn=function(e,n){return this.builtIn.add(e,n)},s.prototype.getModelToStyle=function(e,n){n===void 0&&(n={});var a=this.em,u=n.skipAdd;if(a&&(e!=null&&e.toHTML)){var m=a.getConfig(),O=a.UndoManager,P=a.Css,j=a.Selectors,A=j?j.getConfig():{},nt=m.devicePreviewMode?"":a.get("state"),At=e.get("classes").getStyleable(),Bt=At.length,qt=!A.componentFirst||n.useClasses,be={noCount:1},Ee={state:nt,addOpts:be},Ce=void 0;if(O.stop(),Bt&&qt){var rr=a.getCurrentMedia();(Ce=P.get(At,nt,rr))||u||(Ce=P.add(At,nt,rr,{},be))}else if(m.avoidInlineStyle){var yr=e.getId();!(Ce=P.getIdRule(yr,Ee))&&!u&&(Ce=P.setIdRule(yr,{},Ee)),e.is("wrapper")&&Ce.set("wrapper",1,be)}Ce&&(e=Ce),O.start()}return e},s.prototype.getParentRules=function(e,n){var a=n===void 0?{}:n,u=a.state,m=a.component,O=this.em,P=[];if(O&&e){var j=m,A=O.Css,nt=O.CodeManager.getGenerator("css"),At=e.toHTML?e:e.getComponent(),Bt={combination:!0,array:!0},qt=[],be=[],Ee=[];At?(qt=A.getRules("#".concat(At.getId())),Ee=(be=j?A.getRules(j.getSelectors().getFullName(Bt)):[]).concat(qt)):(qt=j?A.getRules("#".concat(j.getId())):[],be=A.getRules(e.getSelectors().getFullName(Bt)),Ee=qt.concat(be));var Ce=Ee.filter(function(rr){return(0,k.isUndefined)(u)?1:rr.get("state")===u}).sort(nt.sortRules).reverse();P=Ce.slice(Ce.indexOf(e)+1)}return P},s.prototype.addType=function(e,n){this.properties.addType(e,n)},s.prototype.getType=function(e){return this.properties.getType(e)},s.prototype.getTypes=function(){return this.properties.getTypes()},s.prototype.createType=function(e,n){var a=n===void 0?{}:n,u=a.model,m=u===void 0?{}:u,O=a.view,P=O===void 0?{}:O,j=this.config,A=this.getType(e);if(A)return new A.view($c({model:new A.model(m),config:j},P))},s.prototype.render=function(){var e=this,n=e.config,a=e.em,u=e.SectView,m=u&&u.el;return this.SectView=new zu({el:m,em:a,config:n,module:this,collection:this.sectors}),this.SectView.render().el},s.prototype._logNoSector=function(e){var n=this.em;n&&n.logWarning("'".concat(e,"' sector not found"))},s.prototype.__emitCmpStyleUpdate=function(e,n){n===void 0&&(n={});var a=this.em,u="component:styleUpdate";if(!e.__p){var m=n.components||a.getSelectedAll(),O=Array.isArray(m)?m:[m],P=$c({},e);delete P.__p;var j=Object.keys(P),A={style:P};O.forEach(function(nt){a.trigger(u,nt,A),j.forEach(function(At){return a.trigger("".concat(u,":").concat(At),nt,A)})})}},s.prototype.__upProps=function(e){var n=this;e===void 0&&(e={});var a=this.getSelected();if(a){var u=this.sectors,m=this.model.get("component"),O=this.getSelectedParents(),P=a.getStyle(),j=O.map(function(A){return{target:A,style:A.getStyle()}});u.map(function(A){A.getProperties().map(function(nt){n.__upProp(nt,P,j,e)})}),u.forEach(function(A){var nt=A.getProperties();nt.forEach(function(Bt){var qt=Bt.__checkVisibility({target:a,component:m,sectors:u});Bt.set("visible",qt)});var At=nt.some(function(Bt){return Bt.isVisible()});A.set("visible",At)})}},s.prototype.__upProp=function(e,n,a,u){var m=this,O=e.getName(),P=n[O],j=Ov(P),A=e.getType()==="stack",nt=e.getType()==="composite",At=$c($c({},u),{__up:!0}),Bt=!nt&&!A,qt=A?e.__getLayersFromStyle(n):[],be=nt?e.__getPropsFromStyle(n):{},Ee=j?P:null,Ce=null;if(A&&qt===null||nt&&be===null){var rr=A?"__getLayersFromStyle":"__getPropsFromStyle";if(Jr=a.filter(function(xo){return e[rr](xo.style)!==null})[0]){Ee=Jr.style[O],Ce=Jr.target;var yr=e[rr](Jr.style);A?qt=yr:be=yr}}else if(!j){var Jr;Ee=null,(Jr=a.filter(function(xo){return Ov(xo.style[O])})[0])&&(Ee=Jr.style[O],Ce=Jr.target)}if(e.__setParentTarget(Ce),Bt&&e.__getFullValue()!==Ee&&e.upValue(Ee,At),A&&e.__setLayers(qt||[]),nt){var Qr=e.getProperties();if(e.isDetached()){var Sn=e.__getPropsFromStyle(n,{byName:!0})||{},Pn=a.map(function(xo){return $c($c({},xo),{style:e.__getPropsFromStyle(xo.style,{byName:!0})||{}})});Qr.map(function(xo){return m.__upProp(xo,Sn,Pn,u)})}else e.__setProperties(be||{},At),e.getProperties().map(function(xo){return xo.__setParentTarget(Ce)})}},s.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(n){n.reset(),n.stopListening()}),(e=this.SectView)===null||e===void 0||e.remove(),this.model.stopListening(),this.upAll.cancel()},s}(Q);const s0=Ev;var sg=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ds=function(){return Ds=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},Ds.apply(this,arguments)},lg=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},cg=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}},l0=function(h,s){var e={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(e[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(n=Object.getOwnPropertySymbols(h);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(h,n[a])&&(e[n[a]]=h[n[a]])}return e},c0=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))};R().$=I.default;var u0=[Sm,Ig,Pm,oy,g,Cr,Ep,s0,Op,Dm,$h,Jg,ay,po,L,Yr,uy,Qc],f0=[vm,Nf,Dr,_p];(function(h){var s=h.$;if(s&&s.prototype&&s.prototype.constructor.name!=="jQuery"){var e=s.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var u=this.get(0);return u&&u.focus(),this},e.bind=function(u,m){return this.on(u,m)},e.unbind=function(u,m){if((0,k.isObject)(u)){for(var O in u)u.hasOwnProperty(O)&&this.off(O,u[O]);return this}return this.off(u,m)},e.click=function(u){return u?this.on("click",u):this.trigger("click")},e.change=function(u){return u?this.on("change",u):this.trigger("change")},e.keydown=function(u){return u?this.on("keydown",u):this.trigger("keydown")},e.delegate=function(u,m,O,P){return P||(P=O),this.on(m,u,function(j){j.data=O,P(j)})},e.scrollLeft=function(){var u=this.get(0),m=(u=u.nodeType==9?u.defaultView:u)instanceof Window?u:null;return m?m.pageXOffset:u.scrollLeft||0},e.scrollTop=function(){var u=this.get(0),m=(u=u.nodeType==9?u.defaultView:u)instanceof Window?u:null;return m?m.pageYOffset:u.scrollTop||0};var n=s.prototype.offset;e.offset=function(u){var m,O;return u&&(m=u.top,O=u.left),m!==void 0&&this.css("top","".concat(m,"px")),O!==void 0&&this.css("left","".concat(O,"px")),n.call(this)},s.map=function(u,m){for(var O=[],P=0;P<u.length;P++)O.push(m(u[P],P));return O};var a=Array.prototype.indexOf;s.inArray=function(u,m,O){return m==null?-1:a.call(m,u,O)},s.Event=function(u,m){if(!(this instanceof s.Event))return new s.Event(u,m);this.type=u,this.isDefaultPrevented=function(){return!1}}}})({$:I.default});var Pv={debug:console.log,info:console.info,warning:console.warn,error:console.error},Js=function(h){function s(e){e===void 0&&(e={});var n=h.call(this)||this;n.__skip=!1,n.defaultRunning=!1,n.destroyed=!1,n._config=e;var a=n.config;n.set("Config",e),n.set("modules",[]),n.set("toLoad",[]),n.set("storables",[]),n.set("selected",new V),n.set("dmode",a.dragMode);var u=a.el,m=a.log,O=m===!0?(0,k.keys)(Pv):(0,k.isArray)(m)?m:[];return(0,k.bindAll)(n,"initBaseColorPicker"),u&&a.fromElement&&(a.components=u.innerHTML),n.attrsOrig=u?(0,k.toArray)(u.attributes).reduce(function(P,j){return P[j.nodeName]=j.nodeValue,P},{}):"",a.components&&!a.pageManager&&(a.pageManager={pages:[{component:a.components}]}),u0.forEach(function(P){return n.loadModule(P)}),f0.forEach(function(P){return n.loadStorableModule(P)}),n.on("change:componentHovered",n.componentHovered,n),n.on("change:changesCount",n.updateChanges,n),n.on("change:readyLoad change:readyCanvas",n._checkReady,n),O.forEach(function(P){return n.listenLog(P)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(P){var j=P.from,A=P.to;n.listenTo(n,j,function(){for(var nt=[],At=0;At<arguments.length;At++)nt[At]=arguments[At];n.trigger.apply(n,c0([A],nt,!1)),n.logWarning("The event '".concat(j,"' is deprecated, replace it with '").concat(A,"'"))})}),n}return sg(s,h),s.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(s.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),s.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},s.prototype.getContainer=function(){return this.config.el},s.prototype.listenLog=function(e){this.listenTo(this,"log:".concat(e),Pv[e])},Object.defineProperty(s.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),s.prototype.getConfig=function(e){var n=this.config;return(0,k.isUndefined)(e)?n:n[e]},s.prototype.loadOnStart=function(){var e=this,n=this.config,a=n.projectData,u=n.headless,m=this.get("StorageManager");this.toLoad.reverse().forEach(function(j){return j.onLoad()});var O=function(){e.modules.forEach(function(j){return j.postLoad&&j.postLoad(e)}),e.set("readyLoad",1)};u?(a&&this.loadData(a),O()):this._storageTimeout=setTimeout(function(){return lg(e,void 0,void 0,function(){var j;return cg(this,function(A){switch(A.label){case 0:return a?(this.loadData(a),[3,5]):[3,1];case 1:if(!(m!=null&&m.canAutoload()))return[3,5];A.label=2;case 2:return A.trys.push([2,4,,5]),[4,this.load()];case 3:return A.sent(),[3,5];case 4:return j=A.sent(),this.logError(j),[3,5];case 5:return O(),[2]}})})});var P=new s({noticeOnUnload:!1,storageManager:!1,undoManager:!1});["PageManager","Canvas"].forEach(function(j){return P.get(j).onLoad()}),this.set("shallow",P)},s.prototype.updateChanges=function(){var e=this,n=this.get("StorageManager"),a=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return e.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=a?function(){return!0}:null),n.isAutosave()&&a>=n.getStepsBeforeSave()&&this.store().catch(function(u){return e.logError(u)})},s.prototype.loadModule=function(e){var n=new e(this);return this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),n},s.prototype.loadStorableModule=function(e){var n=this.loadModule(e);return this.storables.push(n),n},s.prototype.init=function(e,n){n===void 0&&(n={}),this.destroyed&&(this.initialize(n),this.destroyed=!1),this.set("Editor",e)},s.prototype.getEditor=function(){return this.get("Editor")},s.prototype.handleUpdates=function(e,n,a){var u=this;a===void 0&&(a={}),this.__skip||a.temporary||a.noCount||a.avoidStore||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var m=u.getDirtyCount()||0,O=(a.unset,l0(a,["unset"]));u.set("changesCount",m+1,O)},0))},s.prototype.changesUp=function(e){this.handleUpdates(0,0,e)},s.prototype.componentHovered=function(e,n,a){var u=this.previous("componentHovered");u&&this.trigger("component:unhovered",u,a),n&&this.trigger("component:hovered",n,a)},s.prototype.getSelected=function(){return this.selected.lastComponent()},s.prototype.getSelectedAll=function(){return this.selected.allComponents()},s.prototype.setSelected=function(e,n){var a=this;n===void 0&&(n={});var u=n.event,m=u&&(u.ctrlKey||u.metaKey),O=(u||{}).shiftKey,P=((0,k.isArray)(e)?e:[e]).map(function(At){return(0,B.getModel)(At,I.default)}),j=this.getSelectedAll(),A=this.getConfig().multipleSelection,nt=(0,k.isArray)(e);nt&&this.removeSelected(j.filter(function(At){return!(0,k.contains)(P,At)})),P.forEach(function(At){var Bt=(0,B.getModel)(At,void 0);if(Bt&&(a.trigger("component:select:before",Bt,n),!Bt.get("selectable")||n.abort)){if(!n.useValid)return;for(var qt=Bt.parent();qt&&!qt.get("selectable");)qt=qt.parent();Bt=qt}if(m&&A)return a.toggleSelected(Bt);if(O&&A){a.clearSelection(a.get("Canvas").getWindow());var be,Ee,Ce=Bt.collection,rr=Bt.index();if(a.getSelectedAll().forEach(function(yr){var Jr=yr.collection,Qr=yr.index();Jr===Ce&&(Qr<rr?be=(0,k.isUndefined)(be)?Qr:Math.max(be,Qr):Qr>rr&&(Ee=(0,k.isUndefined)(Ee)?Qr:Math.min(Ee,Qr)))}),!(0,k.isUndefined)(be))for(;be!==rr;)a.addSelected(Ce.at(be)),be++;if(!(0,k.isUndefined)(Ee))for(;Ee!==rr;)a.addSelected(Ce.at(Ee)),Ee--;return a.addSelected(Bt)}!nt&&a.removeSelected(j.filter(function(yr){return yr!==Bt})),a.addSelected(Bt,n)})},s.prototype.addSelected=function(e,n){var a=this;n===void 0&&(n={});var u=(0,B.getModel)(e,I.default);((0,k.isArray)(u)?u:[u]).forEach(function(m){var O=a.selected;m&&m.get("selectable")&&!m.parents().some(function(P){return O.hasComponent(P)})&&(n.forceChange&&a.removeSelected(m,n),O.allComponents().filter(function(P){return(0,k.contains)(P.parents(),m)}).forEach(function(P){return a.removeSelected(P,n)}),O.addComponent(m,n),m&&a.trigger("component:select",m,n))})},s.prototype.removeSelected=function(e,n){n===void 0&&(n={}),this.selected.removeComponent((0,B.getModel)(e,I.default),n)},s.prototype.toggleSelected=function(e,n){var a=this;n===void 0&&(n={});var u=(0,B.getModel)(e,I.default);((0,k.isArray)(u)?u:[u]).forEach(function(m){a.selected.hasComponent(m)?a.removeSelected(m,n):a.addSelected(m,n)})},s.prototype.setHovered=function(e,n){if(n===void 0&&(n={}),!e)return this.set("componentHovered","");var a="component:hover",u=(0,B.getModel)(e,void 0);if(u){if(n.forceChange&&this.set("componentHovered",""),this.trigger("".concat(a,":before"),u,n),!u.get("hoverable")){if(!n.useValid||n.abort)return;for(var m=u&&u.parent();m&&!m.get("hoverable");)m=m.parent();u=m}n.abort||(this.set("componentHovered",u,n),this.trigger(a,u,n))}},s.prototype.getHovered=function(){return this.get("componentHovered")},s.prototype.setComponents=function(e,n){return n===void 0&&(n={}),this.Components.setComponents(e,n)},s.prototype.getComponents=function(){var e=this.Components,n=this.CodeManager;if(e&&n){var a=e.getComponents();return n.getCode(a,"json")}},s.prototype.setStyle=function(e,n){n===void 0&&(n={});var a=this.Css;return a.clear(n),a.getAll().add(e,n),this},s.prototype.addStyle=function(e,n){n===void 0&&(n={});var a=this.getStyle().add(e,n);return(0,k.isArray)(a)?a:[a]},s.prototype.getStyle=function(){return this.Css.getAll()},s.prototype.setState=function(e){return this.set("state",e),this},s.prototype.getState=function(){return this.get("state")||""},s.prototype.getHtml=function(e){e===void 0&&(e={});var n=this.config,a=n.optsHtml,u=n.jsInHtml?this.getJs(e):"",m=e.component||this.Components.getComponent();return(m?this.CodeManager.getCode(m,"html",Ds(Ds({},a),e)):"")+(u?"<script>".concat(u,"<\/script>"):"")},s.prototype.getCss=function(e){e===void 0&&(e={});var n=this.config,a=n.optsCss,u=e.avoidProtected,m=(0,k.isUndefined)(e.keepUnusedStyles)?n.keepUnusedStyles:e.keepUnusedStyles,O=this.Css,P=e.component||this.Components.getComponent(),j=u?"":n.protectedCss,A=P&&this.CodeManager.getCode(P,"css",Ds(Ds({cssc:O,keepUnusedStyles:m},a),e));return P?e.json?A:j+A:""},s.prototype.getJs=function(e){e===void 0&&(e={});var n=e.component||this.Components.getWrapper();return n?this.CodeManager.getCode(n,"js").trim():""},s.prototype.store=function(e){return lg(this,void 0,void 0,function(){var n;return cg(this,function(a){switch(a.label){case 0:return n=this.storeData(),[4,this.Storage.store(n,e)];case 1:return a.sent(),this.clearDirtyCount(),[2,n]}})})},s.prototype.load=function(e){return lg(this,void 0,void 0,function(){var n;return cg(this,function(a){switch(a.label){case 0:return[4,this.Storage.load(e)];case 1:return n=a.sent(),this.loadData(n),[2,n]}})})},s.prototype.storeData=function(){var e={},n=this.getEditing();return n&&n.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(a){e=Ds(Ds({},e),a.store(1))}),JSON.parse(JSON.stringify(e))},s.prototype.loadData=function(e){return e===void 0&&(e={}),(0,B.isEmptyObj)(e)||(this.storables.forEach(function(n){return n.clear()}),this.storables.forEach(function(n){return n.load(e)})),e},s.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},s.prototype.runDefault=function(e){e===void 0&&(e={});var n=this.get("Commands").get(this.config.defaultCommand);n&&!this.defaultRunning&&(n.stop(this,this,e),n.run(this,this,e),this.defaultRunning=!0)},s.prototype.stopDefault=function(e){e===void 0&&(e={});var n=this.get("Commands").get(this.config.defaultCommand);n&&this.defaultRunning&&(n.stop(this,this,e),this.defaultRunning=!1)},s.prototype.refreshCanvas=function(e){e===void 0&&(e={}),this.set("canvasOffset",null),this.set("canvasOffset",this.Canvas.getOffset()),e.tools&&this.trigger("canvas:updateTools")},s.prototype.clearSelection=function(e){var n;(n=(e||window).getSelection())===null||n===void 0||n.removeAllRanges()},s.prototype.getCurrentMedia=function(){var e=this.config,n=this.getDeviceModel(),a=e.mediaCondition,u=e.devicePreviewMode,m=n&&n.get("widthMedia");return n&&m&&!u?"(".concat(a,": ").concat(m,")"):""},s.prototype.getWrapper=function(){return this.Components.getWrapper()},s.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},s.prototype.getCurrentFrame=function(){return this.get("currentFrame")},s.prototype.getCurrentFrameModel=function(){return(this.getCurrentFrame()||{}).model},s.prototype.getIcon=function(e){return(this.config.icons||{})[e]||""},s.prototype.getDirtyCount=function(){return this.get("changesCount")},s.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},s.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},s.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},s.prototype.setDragMode=function(e){return this.set("dmode",e)},s.prototype.getDragMode=function(e){return(e==null?void 0:e.getDragMode())||this.get("dmode")||""},s.prototype.t=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=this.get("I18n");return a==null?void 0:a.t.apply(a,e)},s.prototype.inAbsoluteMode=function(e){return this.getDragMode(e)==="absolute"},s.prototype.destroyAll=function(){var e=this,n=this.config,a=this.view,u=this.getEditor(),m=(n.grapesjs||{}).editors,O=m===void 0?[]:m,P=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),P==null||P.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(j){return j.destroy()}),a&&a.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(j){return e[j]={}}),O.splice(O.indexOf(u),1),(0,B.hasWin)()&&(0,I.default)(n.el).empty().attr(this.attrsOrig)},s.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},s.prototype.setEditing=function(e){return this.set("editing",e),this},s.prototype.isEditing=function(){return!!this.get("editing")},s.prototype.log=function(e,n){n===void 0&&(n={});var a=n.ns,u=n.level,m=u===void 0?"debug":u;if(this.trigger("log",e,n),m&&this.trigger("log:".concat(m),e,n),a){var O="log-".concat(a);this.trigger(O,e,n),m&&this.trigger("".concat(O,":").concat(m),e,n)}},s.prototype.logInfo=function(e,n){this.log(e,Ds(Ds({},n),{level:"info"}))},s.prototype.logWarning=function(e,n){this.log(e,Ds(Ds({},n),{level:"warning"}))},s.prototype.logError=function(e,n){this.log(e,Ds(Ds({},n),{level:"error"}))},s.prototype.initBaseColorPicker=function(e,n){n===void 0&&(n={});var a=this.config,u=a.colorPicker,m=u===void 0?{}:u,O=a.el,P=a.stylePrefix;return(0,I.default)(e).spectrum(Ds(Ds({containerClassName:"".concat(P,"one-bg ").concat(P,"two-color"),appendTo:O||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},n),m))},s.prototype.skip=function(e){this.__skip=!0;var n=this.UndoManager;n?n.skip(e):e(),this.__skip=!1},s.prototype.data=function(e,n,a){var u="_gjs-data";if(e[u]||(e[u]={}),(0,k.isUndefined)(a))return e[u][n];e[u][n]=a},s}(N.Hn);const p0=Js;var kv=function(){var h=function(s,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},h(s,e)};return function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=s}h(s,e),s.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ug=function(h){function s(e){var n=h.call(this,{model:e})||this,a=e.attributes,u=a.Panels,m=a.UndoManager;return e.view=n,e.once("change:ready",function(){u.active(),u.disableButtons(),m.clear(),setTimeout(function(){e.trigger("load",e.get("Editor")),e.clearDirtyCount()})}),n}return kv(s,h),s.prototype.render=function(){var e=this,n=this.$el,a=this.model,u=a.attributes,m=u.Panels,O=u.Canvas,P=a.config,j=a.modules,A=P.stylePrefix,nt=["".concat(A,"editor")];!P.customUI&&nt.push("".concat(A,"one-bg ").concat(A,"two-color"));var At=(0,I.default)(P.el||"body ".concat(P.container));P.cssIcons&&(0,B.appendStyles)(P.cssIcons,{unique:!0,prepand:!0}),n.empty(),P.width&&At.css("width",P.width),P.height&&At.css("height",P.height),n.append(O.render()),n.append(m.render());var Bt=a.get("shallow").get("Canvas").render();return Bt.style.display="none",n.append(Bt),n.attr("class",nt.join(" ")),At.addClass("".concat(A,"editor-cont")).empty().append(n),j.forEach(function(qt){return qt.postRender&&qt.postRender(e)}),this},s}(N.G7);const Di=ug;var hd=function(){return hd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},hd.apply(this,arguments)},gd=function(h,s,e,n){return new(e||(e=Promise))(function(a,u){function m(j){try{P(n.next(j))}catch(A){u(A)}}function O(j){try{P(n.throw(j))}catch(A){u(A)}}function P(j){var A;j.done?a(j.value):(A=j.value,A instanceof e?A:new e(function(nt){nt(A)})).then(m,O)}P((n=n.apply(h,s||[])).next())})},Av=function(h,s){var e,n,a,u,m={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function O(P){return function(j){return function(A){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,A[0]&&(m=0)),m;)try{if(e=1,n&&(a=2&A[0]?n.return:A[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,A[1])).done)return a;switch(n=0,a&&(A=[2&A[0],a.value]),A[0]){case 0:case 1:a=A;break;case 4:return m.label++,{value:A[1],done:!1};case 5:m.label++,n=A[1],A=[0];continue;case 7:A=m.ops.pop(),m.trys.pop();continue;default:if(!((a=(a=m.trys).length>0&&a[a.length-1])||A[0]!==6&&A[0]!==2)){m=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){m.label=A[1];break}if(A[0]===6&&m.label<a[1]){m.label=a[1],a=A;break}if(a&&m.label<a[2]){m.label=a[2],m.ops.push(A);break}a[2]&&m.ops.pop(),m.trys.pop();continue}A=s.call(h,m)}catch(nt){A=[6,nt],n=0}finally{e=a=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,j])}}},d0=function(h,s,e){if(e||arguments.length===2)for(var n,a=0,u=s.length;a<u;a++)!n&&a in s||(n||(n=Array.prototype.slice.call(s,0,a)),n[a]=s[a]);return h.concat(n||Array.prototype.slice.call(s))},h0=function(){function h(s,e){var n;s===void 0&&(s={}),e===void 0&&(e={}),this.html=ct,this.config=hd(hd(hd({},vt),s),{pStylePrefix:(n=s.stylePrefix)!==null&&n!==void 0?n:vt.stylePrefix}),this.em=new p0(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(h.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),h.prototype.getConfig=function(s){return this.em.getConfig(s)},h.prototype.getHtml=function(s){return this.em.getHtml(s)},h.prototype.getCss=function(s){return this.em.getCss(s)},h.prototype.getJs=function(s){return this.em.getJs(s)},h.prototype.getComponents=function(){return this.Components.getComponents()},h.prototype.getWrapper=function(){return this.Components.getWrapper()},h.prototype.setComponents=function(s,e){return e===void 0&&(e={}),this.em.setComponents(s,e),this},h.prototype.addComponents=function(s,e){return this.getWrapper().append(s,e)},h.prototype.getStyle=function(){return this.em.Css.getAll()},h.prototype.setStyle=function(s,e){return e===void 0&&(e={}),this.em.setStyle(s,e),this},h.prototype.addStyle=function(s,e){return e===void 0&&(e={}),this.em.addStyle(s,e)},h.prototype.getSelected=function(){return this.em.getSelected()},h.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},h.prototype.getSelectedToStyle=function(){var s=this.em.getSelected();if(s)return this.StyleManager.getModelToStyle(s)},h.prototype.select=function(s,e){return this.em.setSelected(s,e),this},h.prototype.selectAdd=function(s){return this.em.addSelected(s),this},h.prototype.selectRemove=function(s){return this.em.removeSelected(s),this},h.prototype.selectToggle=function(s){return this.em.toggleSelected(s),this},h.prototype.getEditing=function(){return this.em.getEditing()},h.prototype.setDevice=function(s){return this.em.set("device",s),this},h.prototype.getDevice=function(){return this.em.get("device")},h.prototype.runCommand=function(s,e){return e===void 0&&(e={}),this.Commands.run(s,e)},h.prototype.stopCommand=function(s,e){return e===void 0&&(e={}),this.Commands.stop(s,e)},h.prototype.store=function(s){return gd(this,void 0,void 0,function(){return Av(this,function(e){switch(e.label){case 0:return[4,this.em.store(s)];case 1:return[2,e.sent()]}})})},h.prototype.load=function(s){return gd(this,void 0,void 0,function(){return Av(this,function(e){switch(e.label){case 0:return[4,this.em.load(s)];case 1:return[2,e.sent()]}})})},h.prototype.getProjectData=function(){return this.em.storeData()},h.prototype.loadProjectData=function(s){return this.em.loadData(s)},h.prototype.storeData=function(){return this.em.storeData()},h.prototype.loadData=function(s){return this.em.loadData(s)},h.prototype.getContainer=function(){return this.config.el},h.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},h.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},h.prototype.refresh=function(s){this.em.refreshCanvas(s)},h.prototype.setCustomRte=function(s){this.RichTextEditor.customRte=s},h.prototype.setCustomParserCss=function(s){return this.Parser.getConfig().parserCss=s,this},h.prototype.setDragMode=function(s){return this.em.setDragMode(s),this},h.prototype.log=function(s,e){return e===void 0&&(e={}),this.em.log(s,e),this},h.prototype.t=function(){for(var s,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(s=this.em).t.apply(s,e)},h.prototype.on=function(s,e){return this.em.on(s,e),this},h.prototype.once=function(s,e){return this.em.once(s,e),this},h.prototype.off=function(s,e){return this.em.off(s,e),this},h.prototype.trigger=function(s){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.em.trigger.apply(this.em,d0([s],e,!0)),this},h.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},h.prototype.getEl=function(){var s;return(s=this.editorView)===null||s===void 0?void 0:s.el},h.prototype.getModel=function(){return this.em},h.prototype.render=function(){var s;return(s=this.editorView)===null||s===void 0||s.remove(),this.editorView=new Di(this.em),this.editorView.render().el},h.prototype.onReady=function(s){this.em.get("ready")?s(this):this.em.on("load",s)},h}();const Mv=h0;var Lv=function(h,s){return(0,k.isString)(h)?function(e,n){var a=n.get(e);if(!a){var u=(0,B.getGlobal)()[e];a=(u==null?void 0:u.default)||u}return a}(h,s):h},jv=function(h,s){h.getModel().logWarning("Plugin ".concat(s," not found"),{context:"plugins",plugin:s})};const Bp=function(){function h(){this.plugins={}}return h.prototype.add=function(s,e){return this.get(s)||(this.plugins[s]=e,e)},h.prototype.get=function(s){return this.plugins[s]},h.prototype.getAll=function(){return this.plugins},h}();var vd=function(){return vd=Object.assign||function(h){for(var s,e=1,n=arguments.length;e<n;e++)for(var a in s=arguments[e])Object.prototype.hasOwnProperty.call(s,a)&&(h[a]=s[a]);return h},vd.apply(this,arguments)};(function(){if((0,B.hasWin)()&&function(){for(var s,e=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],a=0;a<n.length&&!(s=n[a][1].exec(e));a++);return!!s}()){var h=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(s){return s||(s=""),h.apply(document.implementation,[s])}}})();var ih=new Bp,Dv=[],cp=function(h,s){var e=Lv(h,ih);return function(n){e?e(n,s||{}):jv(n,h)}},Iv={$:I.default,editors:Dv,plugins:ih,usePlugin:cp,version:"0.21.3",init:function(h){h===void 0&&(h={});var s=h.headless,e=h.container;if(!e&&!s)throw new Error("'container' is required");var n=vd(vd({autorender:!0,plugins:[],pluginsOpts:{}},h),{grapesjs:this,el:s?void 0:(0,k.isElement)(e)?e:document.querySelector(e)}),a=new Mv(n,{$:I.default}),u=a.getModel();return n.plugins.forEach(function(m){var O=Lv(m,ih),P=n.pluginsOpts[m]||{};O?O(a,P):jv(a,m)}),u.loadOnStart(),n.autorender&&!s&&a.render(),Dv.push(a),a}};const Ml=Iv})(),st})())}},we={};function ke(Kt){var ft=we[Kt];if(ft!==void 0)return ft.exports;var Ot=we[Kt]={exports:{}};return Te[Kt].call(Ot.exports,Ot,Ot.exports,ke),Ot.exports}ke.n=Kt=>{var ft=Kt&&Kt.__esModule?()=>Kt.default:()=>Kt;return ke.d(ft,{a:ft}),ft},ke.d=(Kt,ft)=>{for(var Ot in ft)ke.o(ft,Ot)&&!ke.o(Kt,Ot)&&Object.defineProperty(Kt,Ot,{enumerable:!0,get:ft[Ot]})},ke.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ke.o=(Kt,ft)=>Object.prototype.hasOwnProperty.call(Kt,ft),ke.r=Kt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Kt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Kt,"__esModule",{value:!0})};var Jt={};return(()=>{function Kt(H,R){(R==null||R>H.length)&&(R=H.length);for(var I=0,N=new Array(R);I<R;I++)N[I]=H[I];return N}function ft(H){return function(R){if(Array.isArray(R))return Kt(R)}(H)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(H)||function(R,I){if(R){if(typeof R=="string")return Kt(R,I);var N=Object.prototype.toString.call(R).slice(8,-1);return N==="Object"&&R.constructor&&(N=R.constructor.name),N==="Map"||N==="Set"?Array.from(R):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?Kt(R,I):void 0}}(H)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ot(H){return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Ot(H)}function q(H){var R=function(I,N){if(Ot(I)!=="object"||I===null)return I;var $=I[Symbol.toPrimitive];if($!==void 0){var F=$.call(I,N||"default");if(Ot(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(I)}(H,"string");return Ot(R)==="symbol"?R:String(R)}function mt(H,R,I){return(R=q(R))in H?Object.defineProperty(H,R,{value:I,enumerable:!0,configurable:!0,writable:!0}):H[R]=I,H}ke.r(Jt),ke.d(Jt,{default:()=>dt});var K=ke(531);const st={"grapesjs-advance-components":{}};function k(H,R){var I=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!I){if(Array.isArray(H)||(I=function(it,X){if(it){if(typeof it=="string")return B(it,X);var tt=Object.prototype.toString.call(it).slice(8,-1);if(tt==="Object"&&it.constructor&&(tt=it.constructor.name),tt==="Map"||tt==="Set")return Array.from(it);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return B(it,X)}}(H))||R){I&&(H=I);var N=0,$=function(){};return{s:$,n:function(){return N>=H.length?{done:!0}:{done:!1,value:H[N++]}},e:function(it){throw it},f:$}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F,V=!0,U=!1;return{s:function(){I=I.call(H)},n:function(){var it=I.next();return V=it.done,it},e:function(it){U=!0,F=it},f:function(){try{V||I.return==null||I.return()}finally{if(U)throw F}}}}function B(H,R){(R==null||R>H.length)&&(R=H.length);for(var I=0,N=new Array(R);I<R;I++)N[I]=H[I];return N}function ct(H,R){var I=Object.keys(H);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(H);R&&(N=N.filter(function($){return Object.getOwnPropertyDescriptor(H,$).enumerable})),I.push.apply(I,N)}return I}function vt(H){for(var R=1;R<arguments.length;R++){var I=arguments[R]!=null?arguments[R]:{};R%2?ct(Object(I),!0).forEach(function(N){mt(H,N,I[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(I)):ct(Object(I)).forEach(function(N){Object.defineProperty(H,N,Object.getOwnPropertyDescriptor(I,N))})}return H}const dt=ke.n(K)().plugins.add("AdvancedComponents",function(H){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=vt(vt({},{components:[{visible:!0,label:"Faq",name:"faq",category:"Text",type:"text",componentType:"faq"},{visible:!0,label:"Heading",name:"heading",category:"Text",type:"text",componentType:"heading"},{visible:!0,label:"Paragraph",name:"paragraph",category:"Text",type:"text",componentType:"paragraph"},{visible:!0,label:"List",name:"list",category:"Text",type:"list",componentType:"list"},{visible:!0,label:"Divider",name:"divider",category:"Custom",type:"divider",componentType:"divider"},{visible:!0,label:"Map",name:"map",category:"Custom",type:"map",componentType:"map"},{visible:!0,label:"Countdown",name:"countdown",category:"Custom",type:"countdown",componentType:"countdown"},{visible:!0,label:"Image",name:"image",category:"Media",type:"image",componentType:"image"},{visible:!0,label:"Video",name:"video",category:"Media",type:"video",componentType:"video"},{visible:!0,label:"Button",name:"button",category:"Custom",type:"button",componentType:"button"},{visible:!0,label:"Image Feature",name:"Image Feature",category:"Custom",type:"imageFeature",componentType:"imageFeature"},{visible:!0,label:"Tab",name:"tab",category:"Custom",type:"tab",componentType:"tab"},{visible:!0,label:"Form",name:"form",category:"Custom",type:"form",componentType:"form"},{visible:!0,label:"Checkout",name:"checkout",category:"Custom",type:"checkout",componentType:"checkout"},{visible:!0,label:"Slider",name:"slider",category:"Custom",type:"slider",componentType:"slider"},{visible:!0,label:"Header",name:"header",category:"Custom",type:"header",componentType:"header"},{visible:!0,label:"Footer",name:"footer",category:"Custom",type:"footer",componentType:"footer"},{visible:!0,label:"Quote",name:"quote",category:"Custom",type:"text",componentType:"quote"},{visible:!0,label:"Progress Bar",name:"Progress Bar",category:"Custom",type:"progress-bar",componentType:"progress-bar"},{visible:!0,label:"Link",name:"link",category:"Custom",type:"link",componentType:"link"},{visible:!0,label:"Icon",name:"icon",category:"Custom",type:"icon",componentType:"icon"},{visible:!0,label:"Checkbox",name:"Checkbox",category:"Form",type:"input",componentType:"inputElement",formElement:{type:"checkbox",name:"checkbox1",label:"Checkbox",placeholder:"Pick the correct option"}},{visible:!0,label:"Radio",name:"Radio",category:"Form",type:"input",componentType:"inputElement",formElement:{type:"radio",name:"radio1",label:"Radio",placeholder:"Pick the correct option"}},{visible:!0,label:"Input",name:"Input",category:"Form",type:"input",componentType:"inputElement",formElement:{type:"text",name:"input1",label:"Textfield",placeholder:"Enter your text..."}},{visible:!0,label:"Select",name:"Dropdown",category:"Form",type:"dropdown",componentType:"dropdown",formElement:{type:"text",name:"select1",label:"Dropdown",options:[{label:"Option 1",value:"option1"},{label:"Option 2",value:"option2"},{label:"Option 3",value:"option3"}]}},{visible:!0,label:"Textarea",name:"Textarea",category:"Form",type:"textarea",componentType:"textarea",formElement:{type:"text",name:"textarea",label:"Textarea",placeholder:"Enter your text..."}}],i18n:{}}),R);if(R.components){var N,$=k(I.components);try{var F=function(){var V=N.value,U=V.name;R.components.find(function(it){return it.name===U})||R.components.push(V)};for($.s();!(N=$.n()).done;)F()}catch(V){$.e(V)}finally{$.f()}}else R.components=ft(I.components);(function(V){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=V.DomComponents,X=it.getType("default").view;Array.isArray(U.components)&&U.components.forEach(function(tt){switch((tt==null?void 0:tt.componentType)||"Text"){case"faq":it.addType("faq-block",{model:{defaults:{traits:[],script:function(){console.log("faq")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("faq"))return{type:tt.name}},view:{}});break;case"heading":var xt,Q=(xt=["h1","h2","h3","h4","h5","h6"])!==null&&xt!==void 0&&xt.includes(tt==null?void 0:tt.headingType)?tt==null?void 0:tt.headingType:"h1";it.addType("heading-".concat(Q,"-block"),{model:{defaults:{traits:[],script:function(){console.log("heading block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("heading"))return{type:tt.name}},view:{}});break;case"paragraph":it.addType("paragraph-block",{model:{defaults:{traits:[],script:function(){console.log("paragraph block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("paragraph"))return{type:tt.name}},view:{}});break;case"list":it.addType("list-block",{model:{defaults:{traits:[],script:function(){console.log("list block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("list"))return{type:tt.name}},view:{}});break;case"link":it.addType("link-block",{model:{defaults:{traits:[],script:function(){console.log("link block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("link"))return{type:tt.name}},view:{}});break;case"image":it.addType("image-block",{model:{defaults:{traits:[],script:function(){console.log("image block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("image"))return{type:tt.name}},view:{}});break;case"video":it.addType("video-block",{model:{defaults:{traits:[],script:function(){console.log("video block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("video"))return{type:tt.name}},view:{}});break;case"divider":it.addType("divider-block",{model:{defaults:{traits:[],script:function(){console.log("divider block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("divider"))return{type:tt.name}},view:{}});break;case"inputElement":var _t,W,It,$t=(_t=["color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week","checkbox"])!==null&&_t!==void 0&&_t.includes(tt==null||(W=tt.formElement)===null||W===void 0?void 0:W.type)?tt==null||(It=tt.formElement)===null||It===void 0?void 0:It.type:"text";it.addType("input-element-".concat($t,"-block"),{model:{defaults:{traits:[],script:function(){console.log("form Element block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("inputElement"))return{type:tt.name}},view:{}});break;case"dropdown":it.addType("dropdown-block",{model:{defaults:{traits:[],script:function(){console.log("dropdown block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("dropdown"))return{type:tt.name}},view:{}});break;case"textarea":it.addType("textarea-block",{model:{defaults:{traits:[],script:function(){console.log("textarea block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("textarea"))return{type:tt.name}},view:{}});break;case"map":it.addType("map-block",{model:{defaults:{traits:[],script:function(){console.log("map block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("map"))return{type:tt.name}},view:{}});break;case"progress-bar":it.addType("progress-bar-block",{model:{defaults:{traits:[{type:"text",name:"progressPercentage",label:"Progress Percentage",changeProp:1},{type:"color",name:"progressColor",label:"Progress Color",changeProp:1}]}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("progress-bar"))return{type:tt.name}},view:X.extend({init:function(Yt){var Ne=Yt.model;this.listenTo(Ne,"change:progressPercentage",this.updateScript),this.listenTo(Ne,"change:progressColor",this.updateScript)}})});break;case"button":it.addType("button-block",{model:{defaults:{traits:[],script:function(){console.log("button block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("button"))return{type:tt.name}},view:{}});break;case"slider":it.addType("slider-block",{model:{defaults:{traits:[],script:function(){console.log("slider block")}}},isComponent:function(Yt){if(Yt.className&&Yt.className.includes("slider"))return{type:tt.name}},view:{}});break;default:return}})})(H,I),function(V){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=V.BlockManager,X=V.TraitManager;U.components.forEach(function(tt){switch((tt==null?void 0:tt.componentType)||"Text"){case"faq":it.add("faq-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"text",content:`
          <style>
            .faq-section {
              font-family: Arial, sans-serif;
              border: 1px solid #ccc;
              padding: 10px;
              background-color: #f7f7f7;
            }
            .faq-question {
              font-weight: bold;
              color: #333;
              cursor: pointer;
              padding: 5px;
            }
            .faq-answer {
              display: none;
              padding: 10px;
            }
            .faq-item.open .faq-answer {
              display: block;
            }
          </style>
          <div class="faq-section">
            <div class="faq-item">
              <div class="faq-question">Question 1: What is [Company/Product/Service Name]?</div>
              <div class="faq-answer">[Answer goes here]</div>
            </div>
          </div>
        `}});break;case"heading":var xt,Q=(xt=["h1","h2","h3","h4","h5","h6"])!==null&&xt!==void 0&&xt.includes(tt==null?void 0:tt.headingType)?tt==null?void 0:tt.headingType:"h1";it.add("heading-".concat(Q,"-block"),{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{tagName:Q,type:"text",content:"This ia a heading ".concat(Q," block")}});break;case"paragraph":it.add("paragraph-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{tagName:"p",type:"text",content:`
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        `}});break;case"list":it.add("list-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{tagName:"ul",type:"text",components:[{type:"text",tagName:"li",content:"List Item 1"},{type:"text",tagName:"li",content:"List Item 2"},{type:"text",tagName:"li",content:"List Item 3"},{type:"text",tagName:"li",content:"List Item 4"}]}});break;case"link":it.add("link-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"link",components:[{tagName:"a",content:"Link"}]}});break;case"image":it.add("image-block",{label:`
          <i class="fa fa-image"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"image",src:""}});break;case"video":it.add("video-block",{label:`
          <i class="fa fa-file-video-o"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"video",traits:[{label:"Video Url",type:"text",name:"src",changeProp:1},{label:"Title",type:"text",name:"title",changeProp:1}]}});break;case"divider":it.add("divider-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"divider",content:`<style>.dividerClass {
              height:1px;
              border-top:1px solid;
              border-bottom-width:0px;
              border-left-width:0px;
              border-right-width:0px;
            }</style><div name="divider" class="dividerClass"></div>`}});break;case"inputElement":var _t,W,It,$t=(_t=["color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week","checkbox"])!==null&&_t!==void 0&&_t.includes(tt==null||(W=tt.formElement)===null||W===void 0?void 0:W.type)?tt==null||(It=tt.formElement)===null||It===void 0?void 0:It.type:"text",Yt=(tt==null?void 0:tt.formElement)||{},Ne=Yt.name,et=Yt.placeholder,Tt=Yt.label,jt=Yt.id;it.add("input-element-".concat($t,"-block"),{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"text",content:`
            <div class="input-block">
              <label for="input-block-field">`.concat(Tt||"Label :",`</label>
              <input id="input-block-field" type="`).concat($t,'" id="').concat(jt||Tt,'" name="').concat(Ne||"",'" placeholder="').concat(et||"Enter your text here",`">
            </div>
          `)}});break;case"dropdown":var zt=tt.formElement||{},Ht=zt.label,Dt=zt.id,St=zt.name,Vt=zt.placeholder,Me=zt.options,de=Me?Me.map(function(ye){return'<option value="'.concat(ye.value,'">').concat(ye.label,"</option>")}).join(""):"";it.add("dropdown-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"text",content:`
                <div class="input-block">
                  <label for="input-block-field">`.concat(Ht||"Label :",`</label>
                  <select id="input-block-field" id="`).concat(Dt||Ht,'" name="').concat(St||"",'" placeholder="').concat(Vt||"Enter your text here",`">
                    `).concat(de,`
                  </select>
                </div>
              `)}});break;case"textarea":var Le=(tt==null?void 0:tt.formElement)||{},ar=Le.name,Er=Le.placeholder,Nr=Le.label,Ar=Le.id;it.add("textarea-block",{label:`
          <i class="fa fa-arrows-h"></i>
          <div class="gjs-block-label">
            `.concat(tt.label,`
          </div> 
          `),category:tt.category,content:{type:"text",content:`
            <div class="input-block">
              <label for="input-block-field">`.concat(Nr||"Label :",`</label>
              <textarea id="input-block-field" id="`).concat(Ar||Nr,'" name="').concat(ar||"",'" placeholder="').concat(Er||"Enter your text here",`"></textarea>
            </div>
          `)}});break;case"map":it.add("map-block",{label:`
        <i class="fa fa-arrows-h"></i>
        <div class="gjs-block-label">
          `.concat(tt.label,`
        </div> 
        `),category:tt.category,content:{type:"map",name:"Map"}});break;case"progress-bar":var Fr=`<style>
        .progressContainer {
          width: 100%;
          height: 70px;
          background-color: #ededed;
          overflow: hidden;
          position: relative;
          margin: 0px auto;
      }
      .progressInner {
          display: flex;
          align-items: center;
          padding: 0px 8px;
          height: 100%;
          text-wrap:nowrap;
          position: absolute;
      }</style>`;X.addType("progressColor",{createInput:function(ye){ye.trait;var Ae=document.createElement("div");return Ae.innerHTML='<input type="color" name="progress_color"/></div>',Ae},onEvent:function(ye){ye.elInput;var Ae=ye.component,pt=ye.event,le=Ae.get("progressPercentage"),se=Ae.get("progressColor"),or="#000000";pt.target.value&&(or=pt.target.value);var mr="".concat(Fr,`
            <div class="progressContainer">
              <div class="progressInner" style="width: `).concat(le||65,"%; background-color: ").concat(or||se||"#f1c40f",`;">
              </div>
            </div>
          `);console.log("process",mr),Ae.view.el.querySelector(".progressInner").style["background-color"]=se||or,Ae.view.model.set("progressColor",or),Ae.set("content",mr)},onUpdate:function(ye){ye.elInput;var Ae=ye.component;Ae.listenTo(Ae,"change:progressPercentage",function(pt,le){var se,or;console.log("cmp",pt);var mr=pt.get("progressPercentage")||le,er=pt.get("progressColor")||((se=pt.attributes)===null||se===void 0?void 0:se.progressColor)||((or=pt.getTrait("progressColor"))===null||or===void 0?void 0:or.value),Dr="".concat(Fr,`
              <div class="progressContainer">
                <div class="progressInner" style="width: `).concat(mr||65,"%; background-color: ").concat(er||"#f1c40f",`;">
                </div>
              </div>
            `);pt.view.el.querySelector(".progressInner").style.width="".concat(mr,"%"),pt.set("content",Dr)})}}),it.add("progress-bar-block",{label:`
        <i class="fa fa-arrows-h"></i>
        <div class="gjs-block-label">
          `.concat(tt.label,`
        </div> 
        `),category:tt.category,content:{content:"".concat(Fr,`<div class="progressContainer">
          <div class="progressInner"
          style="width:65%;background-color:#f1c40f;"></div>
      </div>`),traits:[{type:"text",name:"progressPercentage",label:"Progress Percentage",changeProp:1},{type:"progressColor",name:"progressColor",label:"Progress Color",changeProp:1}]}});break;case"button":var Xe=tt.buttonElement||{},at=Xe.buttonText,kt=at===void 0?"Click Here":at,Gt=Xe.handleClick;console.log("handle",Gt),it.add("button-block",{label:`
        <i class="fa fa-arrows-h"></i>
        <div class="gjs-block-label">
          `.concat(tt.label,`
        </div> 
        `),category:tt.category,content:{script:function(ye){this.addEventListener("click",function(){console.log("clicked")})},tagName:"button",content:"".concat(kt)}});break;case"slider":it.add("slider-block",{label:`
        <i class="fa fa-arrows-h"></i>
        <div class="gjs-block-label">
          `.concat(tt.label,`
        </div> 
        `),category:tt.category,content:{type:"text",content:`
          <style>
          .content-slider {
            width: 100%;
            height: 360px;
          }
          .slider {
            height: 320px;
            width: 680px;
            margin: 40px auto 0;
            overflow: visible;
            position: relative;
          }
          .mask {
            overflow: hidden;
            height: 320px;
            width: 680px;
          }
          .slider ul {
            margin: 0;
            padding: 0;
            position: relative;
            width: 3400px; /* 680px * number of slides */
          }
          .slider li {
            width: 680px;
            height: 320px;
            position: absolute;
            left: 680px;
            list-style: none;
          }
          .slider .quote {
            font-size: 40px;
            font-style: italic;
          }
          .slider .source {
            font-size: 20px;
            text-align: right;
          }
          .slider li:hover {
            -webkit-animation-play-state: paused;
            animation-play-state: paused;}
          .slider ul:hover {
              -webkit-animation-play-state: paused;
              animation-play-state: paused;
          }
          .slider li.anim1 {
            -webkit-animation: cycle1 45s linear infinite;
            animation: cycle1 45s linear infinite;
          }
          .slider li.anim2 {
            -webkit-animation: cycle2 45s linear infinite;
            animation: cycle2 45s linear infinite;
          }
          .slider li.anim3 {
            -webkit-animation: cycle3 45s linear infinite;
            animation: cycle3 45s linear infinite;
          }
          .slider li.anim4 {
            -webkit-animation: cycle4 45s linear infinite;
            animation: cycle4 45s linear infinite;
          }
          .slider li.anim5 {
            -webkit-animation: cycle5 45s linear infinite;
            animation: cycle5 45s linear infinite;
          }
          @keyframes cycle1 {
            0%, 20% {
              left: 0px;
              opacity: 1;
            }
            24%, 100% {
              left: -680px;
              opacity: 0;
            }
          }
          @keyframes cycle2 {
            0%, 20% {
              left: 680px;
              opacity: 0;
            }
            24%, 40% {
              left: 0px;
              opacity: 1;
            }
            44%, 100% {
              left: -680px;
              opacity: 0;
            }
          }
          @keyframes cycle3 {
            0%, 40% {
              left: 680px;
              opacity: 0;
            }
            44%, 60% {
              left: 0px;
              opacity: 1;
            }
            64%, 100% {
              left: -680px;
              opacity: 0;
            }
          }
          @keyframes cycle4 {
            0%, 60% {
              left: 680px;
              opacity: 0;
            }
            64%, 80% {
              left: 0px;
              opacity: 1;
            }
            84%, 100% {
              left: -680px;
              opacity: 0;
            }
          }
          @keyframes cycle5 {
            0%, 80% {
              left: 680px;
              opacity: 0;
            }
            84%, 100% {
              left: 0px;
              opacity: 1;
            }
          }          
          </style>
          <div class="content-slider">
          <div class="slider">
            <div class="mask">
              <ul>
                <li class="anim1">
                <img src="" />
                  <div class="quote">This is another quote from another person.</div>
                  <div class="source">- Another Person</div>
                </li>
                <li class="anim2">
                  <div class="quote">This is another quote from another person.</div>
                  <div class="source">- Another Person</div>
                </li>
                <li class="anim3">
                  <div class="quote">Yet another quote from yet another person.</div>
                  <div class="source">- Yet Another Person</div>
                </li>
                <li class="anim4">
                  <div class="quote">This is a fourth quote from a fourth person.</div>
                  <div class="source">- Fourth Person</div>
                </li>
                <li class="anim5">
                  <div class="quote">This is a fifth quote from a fifth person.</div>
                  <div class="source">- Fifth Person</div>
                </li>
              </ul>
            </div>
          </div>
        </div>`}});default:return}})}(H,I),H.I18n&&H.I18n.addMessages(vt({en:st},I.i18n))})})(),Jt})())})(hb);var uw=hb.exports;const fw=cm(uw);var gb={exports:{}};(function(wt,pe){var Te={};/*! grapesjs-parser-postcss - 1.0.3 */(function(we,ke){wt.exports=ke()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:lm,()=>(()=>{var we={241:ft=>{var Ot=String,q=function(){return{isColorSupported:!1,reset:Ot,bold:Ot,dim:Ot,italic:Ot,underline:Ot,inverse:Ot,hidden:Ot,strikethrough:Ot,black:Ot,red:Ot,green:Ot,yellow:Ot,blue:Ot,magenta:Ot,cyan:Ot,white:Ot,gray:Ot,bgBlack:Ot,bgRed:Ot,bgGreen:Ot,bgYellow:Ot,bgBlue:Ot,bgMagenta:Ot,bgCyan:Ot,bgWhite:Ot}};ft.exports=q(),ft.exports.createColors=q},353:(ft,Ot,q)=>{let mt=q(19);class K extends mt{constructor(k){super(k),this.type="atrule"}append(...k){return this.proxyOf.nodes||(this.nodes=[]),super.append(...k)}prepend(...k){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...k)}}ft.exports=K,K.default=K,mt.registerAtRule(K)},932:(ft,Ot,q)=>{let mt=q(631);class K extends mt{constructor(k){super(k),this.type="comment"}}ft.exports=K,K.default=K},19:(ft,Ot,q)=>{let mt,K,st,k,{isClean:B,my:ct}=q(513),vt=q(258),dt=q(932),H=q(631);function R($){return $.map(F=>(F.nodes&&(F.nodes=R(F.nodes)),delete F.source,F))}function I($){if($[B]=!1,$.proxyOf.nodes)for(let F of $.proxyOf.nodes)I(F)}class N extends H{append(...F){for(let V of F){let U=this.normalize(V,this.last);for(let it of U)this.proxyOf.nodes.push(it)}return this.markDirty(),this}cleanRaws(F){if(super.cleanRaws(F),this.nodes)for(let V of this.nodes)V.cleanRaws(F)}each(F){if(!this.proxyOf.nodes)return;let V,U,it=this.getIterator();for(;this.indexes[it]<this.proxyOf.nodes.length&&(V=this.indexes[it],U=F(this.proxyOf.nodes[V],V),U!==!1);)this.indexes[it]+=1;return delete this.indexes[it],U}every(F){return this.nodes.every(F)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let F=this.lastEach;return this.indexes[F]=0,F}getProxyProcessor(){return{get:(F,V)=>V==="proxyOf"?F:F[V]?V==="each"||typeof V=="string"&&V.startsWith("walk")?(...U)=>F[V](...U.map(it=>typeof it=="function"?(X,tt)=>it(X.toProxy(),tt):it)):V==="every"||V==="some"?U=>F[V]((it,...X)=>U(it.toProxy(),...X)):V==="root"?()=>F.root().toProxy():V==="nodes"?F.nodes.map(U=>U.toProxy()):V==="first"||V==="last"?F[V].toProxy():F[V]:F[V],set:(F,V,U)=>(F[V]===U||(F[V]=U,V!=="name"&&V!=="params"&&V!=="selector"||F.markDirty()),!0)}}index(F){return typeof F=="number"?F:(F.proxyOf&&(F=F.proxyOf),this.proxyOf.nodes.indexOf(F))}insertAfter(F,V){let U,it=this.index(F),X=this.normalize(V,this.proxyOf.nodes[it]).reverse();it=this.index(F);for(let tt of X)this.proxyOf.nodes.splice(it+1,0,tt);for(let tt in this.indexes)U=this.indexes[tt],it<U&&(this.indexes[tt]=U+X.length);return this.markDirty(),this}insertBefore(F,V){let U,it=this.index(F),X=it===0&&"prepend",tt=this.normalize(V,this.proxyOf.nodes[it],X).reverse();it=this.index(F);for(let xt of tt)this.proxyOf.nodes.splice(it,0,xt);for(let xt in this.indexes)U=this.indexes[xt],it<=U&&(this.indexes[xt]=U+tt.length);return this.markDirty(),this}normalize(F,V){if(typeof F=="string")F=R(mt(F).nodes);else if(Array.isArray(F)){F=F.slice(0);for(let U of F)U.parent&&U.parent.removeChild(U,"ignore")}else if(F.type==="root"&&this.type!=="document"){F=F.nodes.slice(0);for(let U of F)U.parent&&U.parent.removeChild(U,"ignore")}else if(F.type)F=[F];else if(F.prop){if(F.value===void 0)throw new Error("Value field is missed in node creation");typeof F.value!="string"&&(F.value=String(F.value)),F=[new vt(F)]}else if(F.selector)F=[new K(F)];else if(F.name)F=[new st(F)];else{if(!F.text)throw new Error("Unknown node type in node creation");F=[new dt(F)]}return F.map(U=>(U[ct]||N.rebuild(U),(U=U.proxyOf).parent&&U.parent.removeChild(U),U[B]&&I(U),U.raws.before===void 0&&V&&V.raws.before!==void 0&&(U.raws.before=V.raws.before.replace(/\S/g,"")),U.parent=this.proxyOf,U))}prepend(...F){F=F.reverse();for(let V of F){let U=this.normalize(V,this.first,"prepend").reverse();for(let it of U)this.proxyOf.nodes.unshift(it);for(let it in this.indexes)this.indexes[it]=this.indexes[it]+U.length}return this.markDirty(),this}push(F){return F.parent=this,this.proxyOf.nodes.push(F),this}removeAll(){for(let F of this.proxyOf.nodes)F.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(F){let V;F=this.index(F),this.proxyOf.nodes[F].parent=void 0,this.proxyOf.nodes.splice(F,1);for(let U in this.indexes)V=this.indexes[U],V>=F&&(this.indexes[U]=V-1);return this.markDirty(),this}replaceValues(F,V,U){return U||(U=V,V={}),this.walkDecls(it=>{V.props&&!V.props.includes(it.prop)||V.fast&&!it.value.includes(V.fast)||(it.value=it.value.replace(F,U))}),this.markDirty(),this}some(F){return this.nodes.some(F)}walk(F){return this.each((V,U)=>{let it;try{it=F(V,U)}catch(X){throw V.addToError(X)}return it!==!1&&V.walk&&(it=V.walk(F)),it})}walkAtRules(F,V){return V?F instanceof RegExp?this.walk((U,it)=>{if(U.type==="atrule"&&F.test(U.name))return V(U,it)}):this.walk((U,it)=>{if(U.type==="atrule"&&U.name===F)return V(U,it)}):(V=F,this.walk((U,it)=>{if(U.type==="atrule")return V(U,it)}))}walkComments(F){return this.walk((V,U)=>{if(V.type==="comment")return F(V,U)})}walkDecls(F,V){return V?F instanceof RegExp?this.walk((U,it)=>{if(U.type==="decl"&&F.test(U.prop))return V(U,it)}):this.walk((U,it)=>{if(U.type==="decl"&&U.prop===F)return V(U,it)}):(V=F,this.walk((U,it)=>{if(U.type==="decl")return V(U,it)}))}walkRules(F,V){return V?F instanceof RegExp?this.walk((U,it)=>{if(U.type==="rule"&&F.test(U.selector))return V(U,it)}):this.walk((U,it)=>{if(U.type==="rule"&&U.selector===F)return V(U,it)}):(V=F,this.walk((U,it)=>{if(U.type==="rule")return V(U,it)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}N.registerParse=$=>{mt=$},N.registerRule=$=>{K=$},N.registerAtRule=$=>{st=$},N.registerRoot=$=>{k=$},ft.exports=N,N.default=N,N.rebuild=$=>{$.type==="atrule"?Object.setPrototypeOf($,st.prototype):$.type==="rule"?Object.setPrototypeOf($,K.prototype):$.type==="decl"?Object.setPrototypeOf($,vt.prototype):$.type==="comment"?Object.setPrototypeOf($,dt.prototype):$.type==="root"&&Object.setPrototypeOf($,k.prototype),$[ct]=!0,$.nodes&&$.nodes.forEach(F=>{N.rebuild(F)})}},671:(ft,Ot,q)=>{let mt=q(241),K=q(868);class st extends Error{constructor(B,ct,vt,dt,H,R){super(B),this.name="CssSyntaxError",this.reason=B,H&&(this.file=H),dt&&(this.source=dt),R&&(this.plugin=R),ct!==void 0&&vt!==void 0&&(typeof ct=="number"?(this.line=ct,this.column=vt):(this.line=ct.line,this.column=ct.column,this.endLine=vt.line,this.endColumn=vt.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,st)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",this.line!==void 0&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(B){if(!this.source)return"";let ct=this.source;B==null&&(B=mt.isColorSupported),K&&B&&(ct=K(ct));let vt,dt,H=ct.split(/\r?\n/),R=Math.max(this.line-3,0),I=Math.min(this.line+2,H.length),N=String(I).length;if(B){let{bold:$,gray:F,red:V}=mt.createColors(!0);vt=U=>$(V(U)),dt=U=>F(U)}else vt=dt=$=>$;return H.slice(R,I).map(($,F)=>{let V=R+1+F,U=" "+(" "+V).slice(-N)+" | ";if(V===this.line){let it=dt(U.replace(/\d/g," "))+$.slice(0,this.column-1).replace(/[^\t]/g," ");return vt(">")+dt(U)+$+`
 `+it+vt("^")}return" "+dt(U)+$}).join(`
`)}toString(){let B=this.showSourceCode();return B&&(B=`

`+B+`
`),this.name+": "+this.message+B}}ft.exports=st,st.default=st},258:(ft,Ot,q)=>{let mt=q(631);class K extends mt{constructor(k){k&&k.value!==void 0&&typeof k.value!="string"&&(k={...k,value:String(k.value)}),super(k),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}ft.exports=K,K.default=K},461:(ft,Ot,q)=>{let mt,K,st=q(19);class k extends st{constructor(ct){super({type:"document",...ct}),this.nodes||(this.nodes=[])}toResult(ct={}){return new mt(new K,this,ct).stringify()}}k.registerLazyResult=B=>{mt=B},k.registerProcessor=B=>{K=B},ft.exports=k,k.default=k},250:(ft,Ot,q)=>{let mt=q(258),K=q(981),st=q(932),k=q(353),B=q(995),ct=q(25),vt=q(675);function dt(H,R){if(Array.isArray(H))return H.map($=>dt($));let{inputs:I,...N}=H;if(I){R=[];for(let $ of I){let F={...$,__proto__:B.prototype};F.map&&(F.map={...F.map,__proto__:K.prototype}),R.push(F)}}if(N.nodes&&(N.nodes=H.nodes.map($=>dt($,R))),N.source){let{inputId:$,...F}=N.source;N.source=F,$!=null&&(N.source.input=R[$])}if(N.type==="root")return new ct(N);if(N.type==="decl")return new mt(N);if(N.type==="rule")return new vt(N);if(N.type==="comment")return new st(N);if(N.type==="atrule")return new k(N);throw new Error("Unknown node type: "+H.type)}ft.exports=dt,dt.default=dt},995:(ft,Ot,q)=>{let{SourceMapConsumer:mt,SourceMapGenerator:K}=q(209),{fileURLToPath:st,pathToFileURL:k}=q(414),{isAbsolute:B,resolve:ct}=q(830),{nanoid:vt}=q(961),dt=q(868),H=q(671),R=q(981),I=Symbol("fromOffsetCache"),N=!!(mt&&K),$=!!(ct&&B);class F{constructor(U,it={}){if(U==null||typeof U=="object"&&!U.toString)throw new Error(`PostCSS received ${U} instead of CSS string`);if(this.css=U.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,it.from&&(!$||/^\w+:\/\//.test(it.from)||B(it.from)?this.file=it.from:this.file=ct(it.from)),$&&N){let X=new R(this.css,it);if(X.text){this.map=X;let tt=X.consumer().file;!this.file&&tt&&(this.file=this.mapResolve(tt))}}this.file||(this.id="<input css "+vt(6)+">"),this.map&&(this.map.file=this.from)}error(U,it,X,tt={}){let xt,Q,_t;if(it&&typeof it=="object"){let It=it,$t=X;if(typeof It.offset=="number"){let Yt=this.fromOffset(It.offset);it=Yt.line,X=Yt.col}else it=It.line,X=It.column;if(typeof $t.offset=="number"){let Yt=this.fromOffset($t.offset);Q=Yt.line,_t=Yt.col}else Q=$t.line,_t=$t.column}else if(!X){let It=this.fromOffset(it);it=It.line,X=It.col}let W=this.origin(it,X,Q,_t);return xt=W?new H(U,W.endLine===void 0?W.line:{column:W.column,line:W.line},W.endLine===void 0?W.column:{column:W.endColumn,line:W.endLine},W.source,W.file,tt.plugin):new H(U,Q===void 0?it:{column:X,line:it},Q===void 0?X:{column:_t,line:Q},this.css,this.file,tt.plugin),xt.input={column:X,endColumn:_t,endLine:Q,line:it,source:this.css},this.file&&(k&&(xt.input.url=k(this.file).toString()),xt.input.file=this.file),xt}fromOffset(U){let it,X;if(this[I])X=this[I];else{let xt=this.css.split(`
`);X=new Array(xt.length);let Q=0;for(let _t=0,W=xt.length;_t<W;_t++)X[_t]=Q,Q+=xt[_t].length+1;this[I]=X}it=X[X.length-1];let tt=0;if(U>=it)tt=X.length-1;else{let xt,Q=X.length-2;for(;tt<Q;)if(xt=tt+(Q-tt>>1),U<X[xt])Q=xt-1;else{if(!(U>=X[xt+1])){tt=xt;break}tt=xt+1}}return{col:U-X[tt]+1,line:tt+1}}mapResolve(U){return/^\w+:\/\//.test(U)?U:ct(this.map.consumer().sourceRoot||this.map.root||".",U)}origin(U,it,X,tt){if(!this.map)return!1;let xt,Q,_t=this.map.consumer(),W=_t.originalPositionFor({column:it,line:U});if(!W.source)return!1;typeof X=="number"&&(xt=_t.originalPositionFor({column:tt,line:X})),Q=B(W.source)?k(W.source):new URL(W.source,this.map.consumer().sourceRoot||k(this.map.mapFile));let It={column:W.column,endColumn:xt&&xt.column,endLine:xt&&xt.line,line:W.line,url:Q.toString()};if(Q.protocol==="file:"){if(!st)throw new Error("file: protocol is not available in this PostCSS build");It.file=st(Q)}let $t=_t.sourceContentFor(W.source);return $t&&(It.source=$t),It}toJSON(){let U={};for(let it of["hasBOM","css","file","id"])this[it]!=null&&(U[it]=this[it]);return this.map&&(U.map={...this.map},U.map.consumerCache&&(U.map.consumerCache=void 0)),U}get from(){return this.file||this.id}}ft.exports=F,F.default=F,dt&&dt.registerInput&&dt.registerInput(F)},939:(ft,Ot,q)=>{let{isClean:mt,my:K}=q(513),st=q(505),k=q(88),B=q(19),ct=q(461),vt=(q(448),q(632)),dt=q(964),H=q(25);const R={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},I={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},N={Once:!0,postcssPlugin:!0,prepare:!0},$=0;function F(xt){return typeof xt=="object"&&typeof xt.then=="function"}function V(xt){let Q=!1,_t=R[xt.type];return xt.type==="decl"?Q=xt.prop.toLowerCase():xt.type==="atrule"&&(Q=xt.name.toLowerCase()),Q&&xt.append?[_t,_t+"-"+Q,$,_t+"Exit",_t+"Exit-"+Q]:Q?[_t,_t+"-"+Q,_t+"Exit",_t+"Exit-"+Q]:xt.append?[_t,$,_t+"Exit"]:[_t,_t+"Exit"]}function U(xt){let Q;return Q=xt.type==="document"?["Document",$,"DocumentExit"]:xt.type==="root"?["Root",$,"RootExit"]:V(xt),{eventIndex:0,events:Q,iterator:0,node:xt,visitorIndex:0,visitors:[]}}function it(xt){return xt[mt]=!1,xt.nodes&&xt.nodes.forEach(Q=>it(Q)),xt}let X={};class tt{constructor(Q,_t,W){let It;if(this.stringified=!1,this.processed=!1,typeof _t!="object"||_t===null||_t.type!=="root"&&_t.type!=="document")if(_t instanceof tt||_t instanceof vt)It=it(_t.root),_t.map&&(W.map===void 0&&(W.map={}),W.map.inline||(W.map.inline=!1),W.map.prev=_t.map);else{let $t=dt;W.syntax&&($t=W.syntax.parse),W.parser&&($t=W.parser),$t.parse&&($t=$t.parse);try{It=$t(_t,W)}catch(Yt){this.processed=!0,this.error=Yt}It&&!It[K]&&B.rebuild(It)}else It=it(_t);this.result=new vt(Q,It,W),this.helpers={...X,postcss:X,result:this.result},this.plugins=this.processor.plugins.map($t=>typeof $t=="object"&&$t.prepare?{...$t,...$t.prepare(this.result)}:$t)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Q){return this.async().catch(Q)}finally(Q){return this.async().then(Q,Q)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Q,_t){let W=this.result.lastPlugin;try{_t&&_t.addToError(Q),this.error=Q,Q.name!=="CssSyntaxError"||Q.plugin?W.postcssVersion:(Q.plugin=W.postcssPlugin,Q.setMessage())}catch(It){console&&console.error&&console.error(It)}return Q}prepareVisitors(){this.listeners={};let Q=(_t,W,It)=>{this.listeners[W]||(this.listeners[W]=[]),this.listeners[W].push([_t,It])};for(let _t of this.plugins)if(typeof _t=="object")for(let W in _t){if(!I[W]&&/^[A-Z]/.test(W))throw new Error(`Unknown event ${W} in ${_t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!N[W])if(typeof _t[W]=="object")for(let It in _t[W])Q(_t,It==="*"?W:W+"-"+It.toLowerCase(),_t[W][It]);else typeof _t[W]=="function"&&Q(_t,W,_t[W])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let Q=0;Q<this.plugins.length;Q++){let _t=this.plugins[Q],W=this.runOnRoot(_t);if(F(W))try{await W}catch(It){throw this.handleError(It)}}if(this.prepareVisitors(),this.hasListener){let Q=this.result.root;for(;!Q[mt];){Q[mt]=!0;let _t=[U(Q)];for(;_t.length>0;){let W=this.visitTick(_t);if(F(W))try{await W}catch(It){let $t=_t[_t.length-1].node;throw this.handleError(It,$t)}}}if(this.listeners.OnceExit)for(let[_t,W]of this.listeners.OnceExit){this.result.lastPlugin=_t;try{if(Q.type==="document"){let It=Q.nodes.map($t=>W($t,this.helpers));await Promise.all(It)}else await W(Q,this.helpers)}catch(It){throw this.handleError(It)}}}return this.processed=!0,this.stringify()}runOnRoot(Q){this.result.lastPlugin=Q;try{if(typeof Q=="object"&&Q.Once){if(this.result.root.type==="document"){let _t=this.result.root.nodes.map(W=>Q.Once(W,this.helpers));return F(_t[0])?Promise.all(_t):_t}return Q.Once(this.result.root,this.helpers)}if(typeof Q=="function")return Q(this.result.root,this.result)}catch(_t){throw this.handleError(_t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Q=this.result.opts,_t=k;Q.syntax&&(_t=Q.syntax.stringify),Q.stringifier&&(_t=Q.stringifier),_t.stringify&&(_t=_t.stringify);let W=new st(_t,this.result.root,this.result.opts).generate();return this.result.css=W[0],this.result.map=W[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Q of this.plugins)if(F(this.runOnRoot(Q)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let Q=this.result.root;for(;!Q[mt];)Q[mt]=!0,this.walkSync(Q);if(this.listeners.OnceExit)if(Q.type==="document")for(let _t of Q.nodes)this.visitSync(this.listeners.OnceExit,_t);else this.visitSync(this.listeners.OnceExit,Q)}return this.result}then(Q,_t){return this.async().then(Q,_t)}toString(){return this.css}visitSync(Q,_t){for(let[W,It]of Q){let $t;this.result.lastPlugin=W;try{$t=It(_t,this.helpers)}catch(Yt){throw this.handleError(Yt,_t.proxyOf)}if(_t.type!=="root"&&_t.type!=="document"&&!_t.parent)return!0;if(F($t))throw this.getAsyncError()}}visitTick(Q){let _t=Q[Q.length-1],{node:W,visitors:It}=_t;if(W.type!=="root"&&W.type!=="document"&&!W.parent)return void Q.pop();if(It.length>0&&_t.visitorIndex<It.length){let[Yt,Ne]=It[_t.visitorIndex];_t.visitorIndex+=1,_t.visitorIndex===It.length&&(_t.visitors=[],_t.visitorIndex=0),this.result.lastPlugin=Yt;try{return Ne(W.toProxy(),this.helpers)}catch(et){throw this.handleError(et,W)}}if(_t.iterator!==0){let Yt,Ne=_t.iterator;for(;Yt=W.nodes[W.indexes[Ne]];)if(W.indexes[Ne]+=1,!Yt[mt])return Yt[mt]=!0,void Q.push(U(Yt));_t.iterator=0,delete W.indexes[Ne]}let $t=_t.events;for(;_t.eventIndex<$t.length;){let Yt=$t[_t.eventIndex];if(_t.eventIndex+=1,Yt===$)return void(W.nodes&&W.nodes.length&&(W[mt]=!0,_t.iterator=W.getIterator()));if(this.listeners[Yt])return void(_t.visitors=this.listeners[Yt])}Q.pop()}walkSync(Q){Q[mt]=!0;let _t=V(Q);for(let W of _t)if(W===$)Q.nodes&&Q.each(It=>{It[mt]||this.walkSync(It)});else{let It=this.listeners[W];if(It&&this.visitSync(It,Q.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}tt.registerPostcss=xt=>{X=xt},ft.exports=tt,tt.default=tt,H.registerLazyResult(tt),ct.registerLazyResult(tt)},715:ft=>{let Ot={comma:q=>Ot.split(q,[","],!0),space:q=>Ot.split(q,[" ",`
`,"	"]),split(q,mt,K){let st=[],k="",B=!1,ct=0,vt=!1,dt="",H=!1;for(let R of q)H?H=!1:R==="\\"?H=!0:vt?R===dt&&(vt=!1):R==='"'||R==="'"?(vt=!0,dt=R):R==="("?ct+=1:R===")"?ct>0&&(ct-=1):ct===0&&mt.includes(R)&&(B=!0),B?(k!==""&&st.push(k.trim()),k="",B=!1):k+=R;return(K||k!=="")&&st.push(k.trim()),st}};ft.exports=Ot,Ot.default=Ot},505:(ft,Ot,q)=>{let{SourceMapConsumer:mt,SourceMapGenerator:K}=q(209),{dirname:st,relative:k,resolve:B,sep:ct}=q(830),{pathToFileURL:vt}=q(414),dt=q(995),H=!!(mt&&K),R=!!(st&&B&&k&&ct);ft.exports=class{constructor(I,N,$,F){this.stringify=I,this.mapOpts=$.map||{},this.root=N,this.opts=$,this.css=F,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let I;I=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let N=`
`;this.css.includes(`\r
`)&&(N=`\r
`),this.css+=N+"/*# sourceMappingURL="+I+" */"}applyPrevMaps(){for(let I of this.previous()){let N,$=this.toUrl(this.path(I.file)),F=I.root||st(I.file);this.mapOpts.sourcesContent===!1?(N=new mt(I.text),N.sourcesContent&&(N.sourcesContent=N.sourcesContent.map(()=>null))):N=I.consumer(),this.map.applySourceMap(N,$,this.toUrl(this.path(F)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let I;for(let N=this.root.nodes.length-1;N>=0;N--)I=this.root.nodes[N],I.type==="comment"&&I.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(N)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),R&&H&&this.isMap())return this.generateMap();{let I="";return this.stringify(this.root,N=>{I+=N}),[I]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let I=this.previous()[0].consumer();I.file=this.outputFile(),this.map=K.fromSourceMap(I)}else this.map=new K({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new K({file:this.outputFile()});let I,N,$=1,F=1,V="<no source>",U={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(it,X,tt)=>{if(this.css+=it,X&&tt!=="end"&&(U.generated.line=$,U.generated.column=F-1,X.source&&X.source.start?(U.source=this.sourcePath(X),U.original.line=X.source.start.line,U.original.column=X.source.start.column-1,this.map.addMapping(U)):(U.source=V,U.original.line=1,U.original.column=0,this.map.addMapping(U))),I=it.match(/\n/g),I?($+=I.length,N=it.lastIndexOf(`
`),F=it.length-N):F+=it.length,X&&tt!=="start"){let xt=X.parent||{raws:{}};(X.type==="decl"||X.type==="atrule"&&!X.nodes)&&X===xt.last&&!xt.raws.semicolon||(X.source&&X.source.end?(U.source=this.sourcePath(X),U.original.line=X.source.end.line,U.original.column=X.source.end.column-1,U.generated.line=$,U.generated.column=F-2,this.map.addMapping(U)):(U.source=V,U.original.line=1,U.original.column=0,U.generated.line=$,U.generated.column=F-1,this.map.addMapping(U)))}})}isAnnotation(){return!!this.isInline()||(this.mapOpts.annotation!==void 0?this.mapOpts.annotation:!this.previous().length||this.previous().some(I=>I.annotation))}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let I=this.mapOpts.annotation;return(I===void 0||I===!0)&&(!this.previous().length||this.previous().some(N=>N.inline))}isMap(){return this.opts.map!==void 0?!!this.opts.map:this.previous().length>0}isSourcesContent(){return this.mapOpts.sourcesContent!==void 0?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(I=>I.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(I){if(this.mapOpts.absolute||I.charCodeAt(0)===60||/^\w+:\/\//.test(I))return I;let N=this.memoizedPaths.get(I);if(N)return N;let $=this.opts.to?st(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&($=st(B($,this.mapOpts.annotation)));let F=k($,I);return this.memoizedPaths.set(I,F),F}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(I=>{if(I.source&&I.source.input.map){let N=I.source.input.map;this.previousMaps.includes(N)||this.previousMaps.push(N)}});else{let I=new dt(this.css,this.opts);I.map&&this.previousMaps.push(I.map)}return this.previousMaps}setSourcesContent(){let I={};if(this.root)this.root.walk(N=>{if(N.source){let $=N.source.input.from;if($&&!I[$]){I[$]=!0;let F=this.usesFileUrls?this.toFileUrl($):this.toUrl(this.path($));this.map.setSourceContent(F,N.source.input.css)}}});else if(this.css){let N=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(N,this.css)}}sourcePath(I){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(I.source.input.from):this.toUrl(this.path(I.source.input.from))}toBase64(I){return Buffer?Buffer.from(I).toString("base64"):window.btoa(unescape(encodeURIComponent(I)))}toFileUrl(I){let N=this.memoizedFileURLs.get(I);if(N)return N;if(vt){let $=vt(I).toString();return this.memoizedFileURLs.set(I,$),$}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(I){let N=this.memoizedURLs.get(I);if(N)return N;ct==="\\"&&(I=I.replace(/\\/g,"/"));let $=encodeURI(I).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(I,$),$}}},647:(ft,Ot,q)=>{let mt=q(505),K=q(88),st=(q(448),q(964));const k=q(632);class B{constructor(vt,dt,H){let R;dt=dt.toString(),this.stringified=!1,this._processor=vt,this._css=dt,this._opts=H,this._map=void 0;let I=K;this.result=new k(this._processor,R,this._opts),this.result.css=dt;let N=this;Object.defineProperty(this.result,"root",{get:()=>N.root});let $=new mt(I,R,this._opts,dt);if($.isMap()){let[F,V]=$.generate();F&&(this.result.css=F),V&&(this.result.map=V)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(vt){return this.async().catch(vt)}finally(vt){return this.async().then(vt,vt)}sync(){if(this.error)throw this.error;return this.result}then(vt,dt){return this.async().then(vt,dt)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let vt,dt=st;try{vt=dt(this._css,this._opts)}catch(H){this.error=H}if(this.error)throw this.error;return this._root=vt,vt}get[Symbol.toStringTag](){return"NoWorkResult"}}ft.exports=B,B.default=B},631:(ft,Ot,q)=>{let{isClean:mt,my:K}=q(513),st=q(671),k=q(62),B=q(88);function ct(dt,H){let R=new dt.constructor;for(let I in dt){if(!Object.prototype.hasOwnProperty.call(dt,I)||I==="proxyCache")continue;let N=dt[I],$=typeof N;I==="parent"&&$==="object"?H&&(R[I]=H):I==="source"?R[I]=N:Array.isArray(N)?R[I]=N.map(F=>ct(F,R)):($==="object"&&N!==null&&(N=ct(N)),R[I]=N)}return R}class vt{constructor(H={}){this.raws={},this[mt]=!1,this[K]=!0;for(let R in H)if(R==="nodes"){this.nodes=[];for(let I of H[R])typeof I.clone=="function"?this.append(I.clone()):this.append(I)}else this[R]=H[R]}addToError(H){if(H.postcssNode=this,H.stack&&this.source&&/\n\s{4}at /.test(H.stack)){let R=this.source;H.stack=H.stack.replace(/\n\s{4}at /,`$&${R.input.from}:${R.start.line}:${R.start.column}$&`)}return H}after(H){return this.parent.insertAfter(this,H),this}assign(H={}){for(let R in H)this[R]=H[R];return this}before(H){return this.parent.insertBefore(this,H),this}cleanRaws(H){delete this.raws.before,delete this.raws.after,H||delete this.raws.between}clone(H={}){let R=ct(this);for(let I in H)R[I]=H[I];return R}cloneAfter(H={}){let R=this.clone(H);return this.parent.insertAfter(this,R),R}cloneBefore(H={}){let R=this.clone(H);return this.parent.insertBefore(this,R),R}error(H,R={}){if(this.source){let{end:I,start:N}=this.rangeBy(R);return this.source.input.error(H,{column:N.column,line:N.line},{column:I.column,line:I.line},R)}return new st(H)}getProxyProcessor(){return{get:(H,R)=>R==="proxyOf"?H:R==="root"?()=>H.root().toProxy():H[R],set:(H,R,I)=>(H[R]===I||(H[R]=I,R!=="prop"&&R!=="value"&&R!=="name"&&R!=="params"&&R!=="important"&&R!=="text"||H.markDirty()),!0)}}markDirty(){if(this[mt]){this[mt]=!1;let H=this;for(;H=H.parent;)H[mt]=!1}}next(){if(!this.parent)return;let H=this.parent.index(this);return this.parent.nodes[H+1]}positionBy(H,R){let I=this.source.start;if(H.index)I=this.positionInside(H.index,R);else if(H.word){let N=(R=this.toString()).indexOf(H.word);N!==-1&&(I=this.positionInside(N,R))}return I}positionInside(H,R){let I=R||this.toString(),N=this.source.start.column,$=this.source.start.line;for(let F=0;F<H;F++)I[F]===`
`?(N=1,$+=1):N+=1;return{column:N,line:$}}prev(){if(!this.parent)return;let H=this.parent.index(this);return this.parent.nodes[H-1]}rangeBy(H){let R={column:this.source.start.column,line:this.source.start.line},I=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:R.column+1,line:R.line};if(H.word){let N=this.toString(),$=N.indexOf(H.word);$!==-1&&(R=this.positionInside($,N),I=this.positionInside($+H.word.length,N))}else H.start?R={column:H.start.column,line:H.start.line}:H.index&&(R=this.positionInside(H.index)),H.end?I={column:H.end.column,line:H.end.line}:H.endIndex?I=this.positionInside(H.endIndex):H.index&&(I=this.positionInside(H.index+1));return(I.line<R.line||I.line===R.line&&I.column<=R.column)&&(I={column:R.column+1,line:R.line}),{end:I,start:R}}raw(H,R){return new k().raw(this,H,R)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...H){if(this.parent){let R=this,I=!1;for(let N of H)N===this?I=!0:I?(this.parent.insertAfter(R,N),R=N):this.parent.insertBefore(R,N);I||this.remove()}return this}root(){let H=this;for(;H.parent&&H.parent.type!=="document";)H=H.parent;return H}toJSON(H,R){let I={},N=R==null;R=R||new Map;let $=0;for(let F in this){if(!Object.prototype.hasOwnProperty.call(this,F)||F==="parent"||F==="proxyCache")continue;let V=this[F];if(Array.isArray(V))I[F]=V.map(U=>typeof U=="object"&&U.toJSON?U.toJSON(null,R):U);else if(typeof V=="object"&&V.toJSON)I[F]=V.toJSON(null,R);else if(F==="source"){let U=R.get(V.input);U==null&&(U=$,R.set(V.input,$),$++),I[F]={end:V.end,inputId:U,start:V.start}}else I[F]=V}return N&&(I.inputs=[...R.keys()].map(F=>F.toJSON())),I}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(H=B){H.stringify&&(H=H.stringify);let R="";return H(this,I=>{R+=I}),R}warn(H,R,I){let N={node:this};for(let $ in I)N[$]=I[$];return H.warn(R,N)}get proxyOf(){return this}}ft.exports=vt,vt.default=vt},964:(ft,Ot,q)=>{let mt=q(19),K=q(867),st=q(995);function k(B,ct){let vt=new st(B,ct),dt=new K(vt);try{dt.parse()}catch(H){throw H}return dt.root}ft.exports=k,k.default=k,mt.registerParse(k)},867:(ft,Ot,q)=>{let mt=q(258),K=q(852),st=q(932),k=q(353),B=q(25),ct=q(675);const vt={empty:!0,space:!0};ft.exports=class{constructor(dt){this.input=dt,this.root=new B,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:dt,start:{column:1,line:1,offset:0}}}atrule(dt){let H,R,I,N=new k;N.name=dt[1].slice(1),N.name===""&&this.unnamedAtrule(N,dt),this.init(N,dt[2]);let $=!1,F=!1,V=[],U=[];for(;!this.tokenizer.endOfFile();){if(H=(dt=this.tokenizer.nextToken())[0],H==="("||H==="["?U.push(H==="("?")":"]"):H==="{"&&U.length>0?U.push("}"):H===U[U.length-1]&&U.pop(),U.length===0){if(H===";"){N.source.end=this.getPosition(dt[2]),N.source.end.offset++,this.semicolon=!0;break}if(H==="{"){F=!0;break}if(H==="}"){if(V.length>0){for(I=V.length-1,R=V[I];R&&R[0]==="space";)R=V[--I];R&&(N.source.end=this.getPosition(R[3]||R[2]),N.source.end.offset++)}this.end(dt);break}V.push(dt)}else V.push(dt);if(this.tokenizer.endOfFile()){$=!0;break}}N.raws.between=this.spacesAndCommentsFromEnd(V),V.length?(N.raws.afterName=this.spacesAndCommentsFromStart(V),this.raw(N,"params",V),$&&(dt=V[V.length-1],N.source.end=this.getPosition(dt[3]||dt[2]),N.source.end.offset++,this.spaces=N.raws.between,N.raws.between="")):(N.raws.afterName="",N.params=""),F&&(N.nodes=[],this.current=N)}checkMissedSemicolon(dt){let H=this.colon(dt);if(H===!1)return;let R,I=0;for(let N=H-1;N>=0&&(R=dt[N],R[0]==="space"||(I+=1,I!==2));N--);throw this.input.error("Missed semicolon",R[0]==="word"?R[3]+1:R[2])}colon(dt){let H,R,I,N=0;for(let[$,F]of dt.entries()){if(H=F,R=H[0],R==="("&&(N+=1),R===")"&&(N-=1),N===0&&R===":"){if(I){if(I[0]==="word"&&I[1]==="progid")continue;return $}this.doubleColon(H)}I=H}return!1}comment(dt){let H=new st;this.init(H,dt[2]),H.source.end=this.getPosition(dt[3]||dt[2]),H.source.end.offset++;let R=dt[1].slice(2,-2);if(/^\s*$/.test(R))H.text="",H.raws.left=R,H.raws.right="";else{let I=R.match(/^(\s*)([^]*\S)(\s*)$/);H.text=I[2],H.raws.left=I[1],H.raws.right=I[3]}}createTokenizer(){this.tokenizer=K(this.input)}decl(dt,H){let R=new mt;this.init(R,dt[0][2]);let I,N=dt[dt.length-1];for(N[0]===";"&&(this.semicolon=!0,dt.pop()),R.source.end=this.getPosition(N[3]||N[2]||function(V){for(let U=V.length-1;U>=0;U--){let it=V[U],X=it[3]||it[2];if(X)return X}}(dt)),R.source.end.offset++;dt[0][0]!=="word";)dt.length===1&&this.unknownWord(dt),R.raws.before+=dt.shift()[1];for(R.source.start=this.getPosition(dt[0][2]),R.prop="";dt.length;){let V=dt[0][0];if(V===":"||V==="space"||V==="comment")break;R.prop+=dt.shift()[1]}for(R.raws.between="";dt.length;){if(I=dt.shift(),I[0]===":"){R.raws.between+=I[1];break}I[0]==="word"&&/\w/.test(I[1])&&this.unknownWord([I]),R.raws.between+=I[1]}R.prop[0]!=="_"&&R.prop[0]!=="*"||(R.raws.before+=R.prop[0],R.prop=R.prop.slice(1));let $,F=[];for(;dt.length&&($=dt[0][0],$==="space"||$==="comment");)F.push(dt.shift());this.precheckMissedSemicolon(dt);for(let V=dt.length-1;V>=0;V--){if(I=dt[V],I[1].toLowerCase()==="!important"){R.important=!0;let U=this.stringFrom(dt,V);U=this.spacesFromEnd(dt)+U,U!==" !important"&&(R.raws.important=U);break}if(I[1].toLowerCase()==="important"){let U=dt.slice(0),it="";for(let X=V;X>0;X--){let tt=U[X][0];if(it.trim().indexOf("!")===0&&tt!=="space")break;it=U.pop()[1]+it}it.trim().indexOf("!")===0&&(R.important=!0,R.raws.important=it,dt=U)}if(I[0]!=="space"&&I[0]!=="comment")break}dt.some(V=>V[0]!=="space"&&V[0]!=="comment")&&(R.raws.between+=F.map(V=>V[1]).join(""),F=[]),this.raw(R,"value",F.concat(dt),H),R.value.includes(":")&&!H&&this.checkMissedSemicolon(dt)}doubleColon(dt){throw this.input.error("Double colon",{offset:dt[2]},{offset:dt[2]+dt[1].length})}emptyRule(dt){let H=new ct;this.init(H,dt[2]),H.selector="",H.raws.between="",this.current=H}end(dt){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(dt[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(dt)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(dt){if(this.spaces+=dt[1],this.current.nodes){let H=this.current.nodes[this.current.nodes.length-1];H&&H.type==="rule"&&!H.raws.ownSemicolon&&(H.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(dt){let H=this.input.fromOffset(dt);return{column:H.col,line:H.line,offset:dt}}init(dt,H){this.current.push(dt),dt.source={input:this.input,start:this.getPosition(H)},dt.raws.before=this.spaces,this.spaces="",dt.type!=="comment"&&(this.semicolon=!1)}other(dt){let H=!1,R=null,I=!1,N=null,$=[],F=dt[1].startsWith("--"),V=[],U=dt;for(;U;){if(R=U[0],V.push(U),R==="("||R==="[")N||(N=U),$.push(R==="("?")":"]");else if(F&&I&&R==="{")N||(N=U),$.push("}");else if($.length===0){if(R===";"){if(I)return void this.decl(V,F);break}if(R==="{")return void this.rule(V);if(R==="}"){this.tokenizer.back(V.pop()),H=!0;break}R===":"&&(I=!0)}else R===$[$.length-1]&&($.pop(),$.length===0&&(N=null));U=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(H=!0),$.length>0&&this.unclosedBracket(N),H&&I){if(!F)for(;V.length&&(U=V[V.length-1][0],U==="space"||U==="comment");)this.tokenizer.back(V.pop());this.decl(V,F)}else this.unknownWord(V)}parse(){let dt;for(;!this.tokenizer.endOfFile();)switch(dt=this.tokenizer.nextToken(),dt[0]){case"space":this.spaces+=dt[1];break;case";":this.freeSemicolon(dt);break;case"}":this.end(dt);break;case"comment":this.comment(dt);break;case"at-word":this.atrule(dt);break;case"{":this.emptyRule(dt);break;default:this.other(dt)}this.endFile()}precheckMissedSemicolon(){}raw(dt,H,R,I){let N,$,F,V,U=R.length,it="",X=!0;for(let tt=0;tt<U;tt+=1)N=R[tt],$=N[0],$!=="space"||tt!==U-1||I?$==="comment"?(V=R[tt-1]?R[tt-1][0]:"empty",F=R[tt+1]?R[tt+1][0]:"empty",vt[V]||vt[F]||it.slice(-1)===","?X=!1:it+=N[1]):it+=N[1]:X=!1;if(!X){let tt=R.reduce((xt,Q)=>xt+Q[1],"");dt.raws[H]={raw:tt,value:it}}dt[H]=it}rule(dt){dt.pop();let H=new ct;this.init(H,dt[0][2]),H.raws.between=this.spacesAndCommentsFromEnd(dt),this.raw(H,"selector",dt),this.current=H}spacesAndCommentsFromEnd(dt){let H,R="";for(;dt.length&&(H=dt[dt.length-1][0],H==="space"||H==="comment");)R=dt.pop()[1]+R;return R}spacesAndCommentsFromStart(dt){let H,R="";for(;dt.length&&(H=dt[0][0],H==="space"||H==="comment");)R+=dt.shift()[1];return R}spacesFromEnd(dt){let H,R="";for(;dt.length&&(H=dt[dt.length-1][0],H==="space");)R=dt.pop()[1]+R;return R}stringFrom(dt,H){let R="";for(let I=H;I<dt.length;I++)R+=dt[I][1];return dt.splice(H,dt.length-H),R}unclosedBlock(){let dt=this.current.source.start;throw this.input.error("Unclosed block",dt.line,dt.column)}unclosedBracket(dt){throw this.input.error("Unclosed bracket",{offset:dt[2]},{offset:dt[2]+1})}unexpectedClose(dt){throw this.input.error("Unexpected }",{offset:dt[2]},{offset:dt[2]+1})}unknownWord(dt){throw this.input.error("Unknown word",{offset:dt[0][2]},{offset:dt[0][2]+dt[0][1].length})}unnamedAtrule(dt,H){throw this.input.error("At-rule without name",{offset:H[2]},{offset:H[2]+H[1].length})}}},20:(ft,Ot,q)=>{let mt=q(671),K=q(258),st=q(939),k=q(19),B=q(723),ct=q(88),vt=q(250),dt=q(461),H=q(728),R=q(932),I=q(353),N=q(632),$=q(995),F=q(964),V=q(715),U=q(675),it=q(25),X=q(631);function tt(...xt){return xt.length===1&&Array.isArray(xt[0])&&(xt=xt[0]),new B(xt)}tt.plugin=function(xt,Q){let _t,W=!1;function It(...$t){console&&console.warn&&!W&&(W=!0,console.warn(xt+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),Te.LANG&&Te.LANG.startsWith("cn")&&console.warn(xt+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let Yt=Q(...$t);return Yt.postcssPlugin=xt,Yt.postcssVersion=new B().version,Yt}return Object.defineProperty(It,"postcss",{get:()=>(_t||(_t=It()),_t)}),It.process=function($t,Yt,Ne){return tt([It(Ne)]).process($t,Yt)},It},tt.stringify=ct,tt.parse=F,tt.fromJSON=vt,tt.list=V,tt.comment=xt=>new R(xt),tt.atRule=xt=>new I(xt),tt.decl=xt=>new K(xt),tt.rule=xt=>new U(xt),tt.root=xt=>new it(xt),tt.document=xt=>new dt(xt),tt.CssSyntaxError=mt,tt.Declaration=K,tt.Container=k,tt.Processor=B,tt.Document=dt,tt.Comment=R,tt.Warning=H,tt.AtRule=I,tt.Result=N,tt.Input=$,tt.Rule=U,tt.Root=it,tt.Node=X,st.registerPostcss(tt),ft.exports=tt,tt.default=tt},981:(ft,Ot,q)=>{let{SourceMapConsumer:mt,SourceMapGenerator:K}=q(209),{existsSync:st,readFileSync:k}=q(777),{dirname:B,join:ct}=q(830);class vt{constructor(H,R){if(R.map===!1)return;this.loadAnnotation(H),this.inline=this.startWith(this.annotation,"data:");let I=R.map?R.map.prev:void 0,N=this.loadMap(R.from,I);!this.mapFile&&R.from&&(this.mapFile=R.from),this.mapFile&&(this.root=B(this.mapFile)),N&&(this.text=N)}consumer(){return this.consumerCache||(this.consumerCache=new mt(this.text)),this.consumerCache}decodeInline(H){if(/^data:application\/json;charset=utf-?8,/.test(H)||/^data:application\/json,/.test(H))return decodeURIComponent(H.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(H)||/^data:application\/json;base64,/.test(H))return R=H.substr(RegExp.lastMatch.length),Buffer?Buffer.from(R,"base64").toString():window.atob(R);var R;let I=H.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+I)}getAnnotationURL(H){return H.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(H){return typeof H=="object"&&(typeof H.mappings=="string"||typeof H._mappings=="string"||Array.isArray(H.sections))}loadAnnotation(H){let R=H.match(/\/\*\s*# sourceMappingURL=/gm);if(!R)return;let I=H.lastIndexOf(R.pop()),N=H.indexOf("*/",I);I>-1&&N>-1&&(this.annotation=this.getAnnotationURL(H.substring(I,N)))}loadFile(H){if(this.root=B(H),st(H))return this.mapFile=H,k(H,"utf-8").toString().trim()}loadMap(H,R){if(R===!1)return!1;if(R){if(typeof R=="string")return R;if(typeof R!="function"){if(R instanceof mt)return K.fromSourceMap(R).toString();if(R instanceof K)return R.toString();if(this.isMap(R))return JSON.stringify(R);throw new Error("Unsupported previous source map format: "+R.toString())}{let I=R(H);if(I){let N=this.loadFile(I);if(!N)throw new Error("Unable to load previous source map: "+I.toString());return N}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let I=this.annotation;return H&&(I=ct(B(H),I)),this.loadFile(I)}}}startWith(H,R){return!!H&&H.substr(0,R.length)===R}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}ft.exports=vt,vt.default=vt},723:(ft,Ot,q)=>{let mt=q(647),K=q(939),st=q(461),k=q(25);class B{constructor(vt=[]){this.version="8.4.31",this.plugins=this.normalize(vt)}normalize(vt){let dt=[];for(let H of vt)if(H.postcss===!0?H=H():H.postcss&&(H=H.postcss),typeof H=="object"&&Array.isArray(H.plugins))dt=dt.concat(H.plugins);else if(typeof H=="object"&&H.postcssPlugin)dt.push(H);else if(typeof H=="function")dt.push(H);else if(typeof H!="object"||!H.parse&&!H.stringify)throw new Error(H+" is not a PostCSS plugin");return dt}process(vt,dt={}){return this.plugins.length===0&&dt.parser===void 0&&dt.stringifier===void 0&&dt.syntax===void 0?new mt(this,vt,dt):new K(this,vt,dt)}use(vt){return this.plugins=this.plugins.concat(this.normalize([vt])),this}}ft.exports=B,B.default=B,k.registerProcessor(B),st.registerProcessor(B)},632:(ft,Ot,q)=>{let mt=q(728);class K{constructor(k,B,ct){this.processor=k,this.messages=[],this.root=B,this.opts=ct,this.css=void 0,this.map=void 0}toString(){return this.css}warn(k,B={}){B.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(B.plugin=this.lastPlugin.postcssPlugin);let ct=new mt(k,B);return this.messages.push(ct),ct}warnings(){return this.messages.filter(k=>k.type==="warning")}get content(){return this.css}}ft.exports=K,K.default=K},25:(ft,Ot,q)=>{let mt,K,st=q(19);class k extends st{constructor(ct){super(ct),this.type="root",this.nodes||(this.nodes=[])}normalize(ct,vt,dt){let H=super.normalize(ct);if(vt){if(dt==="prepend")this.nodes.length>1?vt.raws.before=this.nodes[1].raws.before:delete vt.raws.before;else if(this.first!==vt)for(let R of H)R.raws.before=vt.raws.before}return H}removeChild(ct,vt){let dt=this.index(ct);return!vt&&dt===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[dt].raws.before),super.removeChild(ct)}toResult(ct={}){return new mt(new K,this,ct).stringify()}}k.registerLazyResult=B=>{mt=B},k.registerProcessor=B=>{K=B},ft.exports=k,k.default=k,st.registerRoot(k)},675:(ft,Ot,q)=>{let mt=q(19),K=q(715);class st extends mt{constructor(B){super(B),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return K.comma(this.selector)}set selectors(B){let ct=this.selector?this.selector.match(/,\s*/):null,vt=ct?ct[0]:","+this.raw("between","beforeOpen");this.selector=B.join(vt)}}ft.exports=st,st.default=st,mt.registerRule(st)},62:ft=>{const Ot={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class q{constructor(K){this.builder=K}atrule(K,st){let k="@"+K.name,B=K.params?this.rawValue(K,"params"):"";if(K.raws.afterName!==void 0?k+=K.raws.afterName:B&&(k+=" "),K.nodes)this.block(K,k+B);else{let ct=(K.raws.between||"")+(st?";":"");this.builder(k+B+ct,K)}}beforeAfter(K,st){let k;k=K.type==="decl"?this.raw(K,null,"beforeDecl"):K.type==="comment"?this.raw(K,null,"beforeComment"):st==="before"?this.raw(K,null,"beforeRule"):this.raw(K,null,"beforeClose");let B=K.parent,ct=0;for(;B&&B.type!=="root";)ct+=1,B=B.parent;if(k.includes(`
`)){let vt=this.raw(K,null,"indent");if(vt.length)for(let dt=0;dt<ct;dt++)k+=vt}return k}block(K,st){let k,B=this.raw(K,"between","beforeOpen");this.builder(st+B+"{",K,"start"),K.nodes&&K.nodes.length?(this.body(K),k=this.raw(K,"after")):k=this.raw(K,"after","emptyBody"),k&&this.builder(k),this.builder("}",K,"end")}body(K){let st=K.nodes.length-1;for(;st>0&&K.nodes[st].type==="comment";)st-=1;let k=this.raw(K,"semicolon");for(let B=0;B<K.nodes.length;B++){let ct=K.nodes[B],vt=this.raw(ct,"before");vt&&this.builder(vt),this.stringify(ct,st!==B||k)}}comment(K){let st=this.raw(K,"left","commentLeft"),k=this.raw(K,"right","commentRight");this.builder("/*"+st+K.text+k+"*/",K)}decl(K,st){let k=this.raw(K,"between","colon"),B=K.prop+k+this.rawValue(K,"value");K.important&&(B+=K.raws.important||" !important"),st&&(B+=";"),this.builder(B,K)}document(K){this.body(K)}raw(K,st,k){let B;if(k||(k=st),st&&(B=K.raws[st],B!==void 0))return B;let ct=K.parent;if(k==="before"&&(!ct||ct.type==="root"&&ct.first===K||ct&&ct.type==="document"))return"";if(!ct)return Ot[k];let vt=K.root();if(vt.rawCache||(vt.rawCache={}),vt.rawCache[k]!==void 0)return vt.rawCache[k];if(k==="before"||k==="after")return this.beforeAfter(K,k);{let H="raw"+((dt=k)[0].toUpperCase()+dt.slice(1));this[H]?B=this[H](vt,K):vt.walk(R=>{if(B=R.raws[st],B!==void 0)return!1})}var dt;return B===void 0&&(B=Ot[k]),vt.rawCache[k]=B,B}rawBeforeClose(K){let st;return K.walk(k=>{if(k.nodes&&k.nodes.length>0&&k.raws.after!==void 0)return st=k.raws.after,st.includes(`
`)&&(st=st.replace(/[^\n]+$/,"")),!1}),st&&(st=st.replace(/\S/g,"")),st}rawBeforeComment(K,st){let k;return K.walkComments(B=>{if(B.raws.before!==void 0)return k=B.raws.before,k.includes(`
`)&&(k=k.replace(/[^\n]+$/,"")),!1}),k===void 0?k=this.raw(st,null,"beforeDecl"):k&&(k=k.replace(/\S/g,"")),k}rawBeforeDecl(K,st){let k;return K.walkDecls(B=>{if(B.raws.before!==void 0)return k=B.raws.before,k.includes(`
`)&&(k=k.replace(/[^\n]+$/,"")),!1}),k===void 0?k=this.raw(st,null,"beforeRule"):k&&(k=k.replace(/\S/g,"")),k}rawBeforeOpen(K){let st;return K.walk(k=>{if(k.type!=="decl"&&(st=k.raws.between,st!==void 0))return!1}),st}rawBeforeRule(K){let st;return K.walk(k=>{if(k.nodes&&(k.parent!==K||K.first!==k)&&k.raws.before!==void 0)return st=k.raws.before,st.includes(`
`)&&(st=st.replace(/[^\n]+$/,"")),!1}),st&&(st=st.replace(/\S/g,"")),st}rawColon(K){let st;return K.walkDecls(k=>{if(k.raws.between!==void 0)return st=k.raws.between.replace(/[^\s:]/g,""),!1}),st}rawEmptyBody(K){let st;return K.walk(k=>{if(k.nodes&&k.nodes.length===0&&(st=k.raws.after,st!==void 0))return!1}),st}rawIndent(K){if(K.raws.indent)return K.raws.indent;let st;return K.walk(k=>{let B=k.parent;if(B&&B!==K&&B.parent&&B.parent===K&&k.raws.before!==void 0){let ct=k.raws.before.split(`
`);return st=ct[ct.length-1],st=st.replace(/\S/g,""),!1}}),st}rawSemicolon(K){let st;return K.walk(k=>{if(k.nodes&&k.nodes.length&&k.last.type==="decl"&&(st=k.raws.semicolon,st!==void 0))return!1}),st}rawValue(K,st){let k=K[st],B=K.raws[st];return B&&B.value===k?B.raw:k}root(K){this.body(K),K.raws.after&&this.builder(K.raws.after)}rule(K){this.block(K,this.rawValue(K,"selector")),K.raws.ownSemicolon&&this.builder(K.raws.ownSemicolon,K,"end")}stringify(K,st){if(!this[K.type])throw new Error("Unknown AST node type "+K.type+". Maybe you need to change PostCSS stringifier.");this[K.type](K,st)}}ft.exports=q,q.default=q},88:(ft,Ot,q)=>{let mt=q(62);function K(st,k){new mt(k).stringify(st)}ft.exports=K,K.default=K},513:ft=>{ft.exports.isClean=Symbol("isClean"),ft.exports.my=Symbol("my")},852:ft=>{const X=/[\t\n\f\r "#'()/;[\\\]{}]/g,tt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,xt=/.[\r\n"'(/\\]/,Q=/[\da-f]/i;ft.exports=function(_t,W={}){let It,$t,Yt,Ne,et,Tt,jt,zt,Ht,Dt,St=_t.css.valueOf(),Vt=W.ignoreErrors,Me=St.length,de=0,Le=[],ar=[];function Er(Nr){throw _t.error("Unclosed "+Nr,de)}return{back:function(Nr){ar.push(Nr)},endOfFile:function(){return ar.length===0&&de>=Me},nextToken:function(Nr){if(ar.length)return ar.pop();if(de>=Me)return;let Ar=!!Nr&&Nr.ignoreUnclosed;switch(It=St.charCodeAt(de),It){case 10:case 32:case 9:case 13:case 12:$t=de;do $t+=1,It=St.charCodeAt($t);while(It===32||It===10||It===9||It===13||It===12);Dt=["space",St.slice(de,$t)],de=$t-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let Fr=String.fromCharCode(It);Dt=[Fr,Fr,de];break}case 40:if(zt=Le.length?Le.pop()[1]:"",Ht=St.charCodeAt(de+1),zt==="url"&&Ht!==39&&Ht!==34&&Ht!==32&&Ht!==10&&Ht!==9&&Ht!==12&&Ht!==13){$t=de;do{if(Tt=!1,$t=St.indexOf(")",$t+1),$t===-1){if(Vt||Ar){$t=de;break}Er("bracket")}for(jt=$t;St.charCodeAt(jt-1)===92;)jt-=1,Tt=!Tt}while(Tt);Dt=["brackets",St.slice(de,$t+1),de,$t],de=$t}else $t=St.indexOf(")",de+1),Ne=St.slice(de,$t+1),$t===-1||xt.test(Ne)?Dt=["(","(",de]:(Dt=["brackets",Ne,de,$t],de=$t);break;case 39:case 34:Yt=It===39?"'":'"',$t=de;do{if(Tt=!1,$t=St.indexOf(Yt,$t+1),$t===-1){if(Vt||Ar){$t=de+1;break}Er("string")}for(jt=$t;St.charCodeAt(jt-1)===92;)jt-=1,Tt=!Tt}while(Tt);Dt=["string",St.slice(de,$t+1),de,$t],de=$t;break;case 64:X.lastIndex=de+1,X.test(St),$t=X.lastIndex===0?St.length-1:X.lastIndex-2,Dt=["at-word",St.slice(de,$t+1),de,$t],de=$t;break;case 92:for($t=de,et=!0;St.charCodeAt($t+1)===92;)$t+=1,et=!et;if(It=St.charCodeAt($t+1),et&&It!==47&&It!==32&&It!==10&&It!==9&&It!==13&&It!==12&&($t+=1,Q.test(St.charAt($t)))){for(;Q.test(St.charAt($t+1));)$t+=1;St.charCodeAt($t+1)===32&&($t+=1)}Dt=["word",St.slice(de,$t+1),de,$t],de=$t;break;default:It===47&&St.charCodeAt(de+1)===42?($t=St.indexOf("*/",de+2)+1,$t===0&&(Vt||Ar?$t=St.length:Er("comment")),Dt=["comment",St.slice(de,$t+1),de,$t],de=$t):(tt.lastIndex=de+1,tt.test(St),$t=tt.lastIndex===0?St.length-1:tt.lastIndex-2,Dt=["word",St.slice(de,$t+1),de,$t],Le.push(Dt),de=$t)}return de++,Dt},position:function(){return de}}}},448:ft=>{let Ot={};ft.exports=function(q){Ot[q]||(Ot[q]=!0,typeof console<"u"&&console.warn&&console.warn(q))}},728:ft=>{class Ot{constructor(mt,K={}){if(this.type="warning",this.text=mt,K.node&&K.node.source){let st=K.node.rangeBy(K);this.line=st.start.line,this.column=st.start.column,this.endLine=st.end.line,this.endColumn=st.end.column}for(let st in K)this[st]=K[st]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}ft.exports=Ot,Ot.default=Ot},868:()=>{},777:()=>{},830:()=>{},209:()=>{},414:()=>{},961:ft=>{let Ot="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";ft.exports={nanoid:(q=21)=>{let mt="",K=q;for(;K--;)mt+=Ot[64*Math.random()|0];return mt},customAlphabet:(q,mt=21)=>(K=mt)=>{let st="",k=K;for(;k--;)st+=q[Math.random()*q.length|0];return st}}}},ke={};function Jt(ft){var Ot=ke[ft];if(Ot!==void 0)return Ot.exports;var q=ke[ft]={exports:{}};return we[ft](q,q.exports,Jt),q.exports}Jt.d=(ft,Ot)=>{for(var q in Ot)Jt.o(Ot,q)&&!Jt.o(ft,q)&&Object.defineProperty(ft,q,{enumerable:!0,get:Ot[q]})},Jt.o=(ft,Ot)=>Object.prototype.hasOwnProperty.call(ft,Ot),Jt.r=ft=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ft,"__esModule",{value:!0})};var Kt={};return(()=>{Jt.r(Kt),Jt.d(Kt,{default:()=>k});var ft=Jt(20);const Ot=ft;ft.stringify,ft.fromJSON,ft.plugin,ft.parse,ft.list,ft.document,ft.comment,ft.atRule,ft.rule,ft.decl,ft.root,ft.CssSyntaxError,ft.Declaration,ft.Container,ft.Processor,ft.Document,ft.Comment,ft.Warning,ft.AtRule,ft.Result,ft.Input,ft.Rule,ft.Root,ft.Node;var q=function(){return q=Object.assign||function(B){for(var ct,vt=1,dt=arguments.length;vt<dt;vt++)for(var H in ct=arguments[vt])Object.prototype.hasOwnProperty.call(ct,H)&&(B[H]=ct[H]);return B},q.apply(this,arguments)},mt=function(B,ct){return B&&B.log(ct,{ns:"parser-poscss"})},K=function(B){var ct=B.nodes||[],vt={};return ct.forEach(function(dt){var H=dt.prop,R=dt.value,I=dt.important;vt[H]=R+(I?" !important":"")}),{selectors:B.selector||"",style:vt}};const st=function(B,ct){var vt=[];mt(ct,["Input CSS",B]);var dt=Ot().process(B).sync().root;return mt(ct,["PostCSS AST",dt]),dt.nodes.forEach(function(H){switch(H.type){case"rule":vt.push(K(H));break;case"atrule":(function(R,I){var N=R.name,$=R.params;["media","keyframes"].indexOf(N)>=0?R.nodes.forEach(function(F){I.push(q(q({},K(F)),{atRule:N,params:$}))}):I.push(q(q({},K(R)),{atRule:N}))})(H,vt)}}),mt(ct,["Output",vt]),vt},k=function(B){B.setCustomParserCss(st)}})(),Kt})())})(gb);var pw=gb.exports;const dw=cm(pw);var B0={};Object.defineProperty(B0,"__esModule",{value:!0});var vb=B0.default=void 0,R0={placeholder:"例子. 输入文字"},hw={assetManager:{addButton:"添加图片",inputPlh:"http://path/to/the/image.jpg",modalTitle:"选择图片",uploadTitle:"点击或者拖拽图片上传"},domComponents:{names:{"":"Box",wrapper:"Body",text:"文字",comment:"评论",image:"图片",video:"视频",label:"文本",link:"超链接",map:"地图",tfoot:"表格末尾",tbody:"表格主体",thead:"表头",table:"表格",row:"行",cell:"单元格"}},deviceManager:{device:"设备",devices:{desktop:"桌面",tablet:"平板",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"预览",fullscreen:"全屏","sw-visibility":"查看组件","export-template":"查看代码","open-sm":"打开样式管理器","open-tm":"设置","open-layers":"打开布局管理器","open-blocks":"打开块"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"设置样式前选择请一个元素",layer:"层级",fileButton:"图片",sectors:{general:"常规",layout:"布局",typography:"版式",decorations:"装饰",extra:"扩展",flex:"盒子模型",dimension:"尺寸"},properties:{}},traitManager:{empty:"用设置项前选择一个组件",label:"组件设置",traits:{attributes:{id:R0,alt:R0,title:R0,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"本窗口",_blank:"新窗口"}}}}};vb=B0.default=hw;const gw="/assets/5-Bf4O6aCo.png",vw="/assets/8-B4yI2dAt.png",H0={attributes:{"Link Block":"链接块",Quote:"引用","Text section":"文本部分","1 Column":"一列","2 Columns":"两列","3 Columns":"三列","2 Columns 3/7":"两列 3/7",Text:"文本",Link:"链接",Image:"图片",Video:"视频",Map:"地图",Faq:"常见问题",Heading:"标题",Paragraph:"段落",List:"列表",Divider:"分隔线",Button:"按钮",Slider:"滑块","Progress Bar":"进度条",Checkbox:"复选框",Radio:"单选框",Input:"输入框",Select:"下拉框",Textarea:"文本区域"},changed:{Basic:"基础",Text:"文本",Custom:"自定义",Media:"媒体",Form:"表单"}},mw=wt=>{wt.forEach(pe=>{var Te,we,ke,Jt,Kt,ft,Ot;if((Te=pe.attributes.label)!=null&&Te.includes("gjs-block-label")){const q=(we=pe.attributes.label)==null?void 0:we.match(/<div class="gjs-block-label">\s*(.*?)\s*<\/div>/);pe.attributes.label=(ke=pe.attributes.label)==null?void 0:ke.replace(new RegExp(q[1],"g"),H0.attributes[q[1]])}else pe.attributes.label=H0.attributes[pe.attributes.label]??pe.attributes.label;(ft=(Kt=(Jt=pe.changed)==null?void 0:Jt.category)==null?void 0:Kt.attributes)!=null&&ft.label&&(pe.changed.category.attributes.label=((Ot=H0.changed)==null?void 0:Ot[pe.changed.category.attributes.label])??pe.changed.category.attributes.label)})},yw=`<body>
 <style type="text/css">
 * {

  margin: 0;
  padding: 0;
}

.flex-col {
  display: flex;
  flex-direction: column;
}
.flex-row {
  display: flex;
  flex-direction: row;
}

.justify-between {
  display: flex;
  justify-content: space-around;
}
.page {
  margin-bottom: 7.5rem;
}
.group_5 {

  width: 100%;

  background-image: linear-gradient(
    180deg,
    rgba(237, 244, 255, 1) 0,
    rgba(255, 255, 255, 1) 100%
  );
}

.block_4 {

  margin-top: 198px;
    margin-left: 11.25rem;
}

.box_10 {
  height: 5.494rem;
  margin-top: 1.92rem;
}

.text_36 {

  color: rgba(51, 51, 51, 1);
  font-size: 3rem;
  font-family: Source Han Sans CN-Bold;
  font-weight: 700;

  white-space: nowrap;

}

.text_37 {
  width: 21.227rem;

    color: rgba(119, 119, 119, 1);
    font-size: 1.5rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;

    margin-top: 1rem;
}
.text-click {
  cursor: pointer;
}


.text_38 {
  background-color: rgba(32, 141, 255, 1);
  border-radius: 4px;

  margin-top: 2rem;
  overflow-wrap: break-word;
  color: rgba(255, 255, 255, 1);
  font-size: 1.125rem;
  font-family: Source Han Sans CN-Medium;
  font-weight: 500;
  white-space: nowrap;
  display: inline-block;
    width: 128px;
    padding: 10px;
    text-align: center;
}

.image_11 {
  width: 32.5rem;
  height: 32.5rem;
}




    </style>
     <div class="page flex-col">
      <div class="group_5 flex-col">
        <div class="block_4 flex-row justify-between">
          <div class="box_10 flex-col">
            <span class="text_36">有偿问卷在家远程办公也能轻松赚钱</span>
            <span class="text_37">做完问卷即得奖励</span>

              <span class="text_38 text-click">申请免费试用</span>

          </div>
         <img
         class="image_11"
         referrerpolicy="no-referrer"
         src=
         />
        </div>
      </div>
    </div>







</body>
`,bw=`<body>
 <style type="text/css">
  * {

    margin: 0;
    padding: 0;

  }

  .flex-col {
    display: flex;
    flex-direction: column;
  }

  .justify-between {
    display: flex;
    justify-content: space-between;
  }

.text-group-1 {
  padding-top: 4rem;
  margin-bottom: 4rem;
}


  .block_1 {
    width: 100%;
  }

  .box_5 {
    background-color: rgba(248, 249, 251, 1);
    width: 100%;
    text-align: center;
    padding-bottom: 4rem;
  }
  .box-5-margin {
    margin-bottom: 7.5rem;
  }

 .group_2 {
  display: flex;
  justify-content: center;
 }

  .text_7 {


    overflow-wrap: break-word;
    color: rgba(119, 119, 119, 1);
    font-size: 1.75rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;
    text-align: left;
    white-space: nowrap;

  }

  .text_8 {

    overflow-wrap: break-word;
    color: rgba(51, 51, 51, 1);
    font-size: 3rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;
    text-align: left;
    white-space: nowrap;

  }



  .box_6 {
    background-color: rgba(255, 255, 255, 1);
    border-radius: 8px;
     width: 21.25rem;
    height: 23.75rem;
    padding: 2.25rem 1.5rem 2.625rem 1.5rem;
  }
.box-margin {
  margin: 0 2rem;
}
  .image_5 {
    width: 7.5rem;
    height:  7.5rem;
  }



  .text_9 {

    overflow-wrap: break-word;
    color: rgba(51, 51, 51, 1);
    font-size: 1.5rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;
    text-align: center;
    white-space: nowrap;
    margin: 1.5rem 0 1.5rem 0;

  }

  .text_10 {

    height: 1.28rem;
    overflow-wrap: break-word;
    color: rgba(51, 51, 51, 1);
    font-size: 1rem;
    font-family: Source Han Sans CN-Regular;
    font-weight: 500;
    text-align: left;
    margin-top: 0.427rem;
  }

  .text-wrapper_2 {
    border: 1px solid rgba(68, 157, 250, 1);
    width: 6rem;
    height: 2.125rem;
    border-radius: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;

    margin: 0 auto;
    margin-top: 2.5rem;
  }

  .text_11 {

    overflow-wrap: break-word;
    color: rgba(68, 157, 250, 1);
    font-weight: 500;
    font-family: PingFang SC-Medium;
    font-weight: 500;
    text-align: left;
    white-space: nowrap;
    line-height: 0.427rem;
  }


  .group_5 {
    position: absolute;
    left: 0;
    top: -0.533rem;
    width: 51.2rem;
    height: 21.334rem;
  }




    </style>
 <div class="box-5-margin">
  <div class="box_5 ">
    <div class="text-group_4 text-group-1">
      <span class="text_8">简单三步即可填问卷赚钱</span>

    </div>

    <div class="group_2">
      <div class="box_6">

        <img class="image_5" referrerpolicy="no-referrer"

           src=
          />
        <div class="text-group_5 flex-col justify-between">
          <span class="text_9">注册</span>
          <span class="text_10">
            任何人都可以参加，注册步骤简单只需要30秒
          </span>

        </div>
        <div class="text-wrapper_2 text_11 text-click">
          马上注册
        </div>
      </div>
      <div class="box_6 box-margin">
        <img class="image_5" referrerpolicy="no-referrer"
             src= />
        <div class="text-group_5 flex-col justify-between">
          <span class="text_9">问卷</span>
          <span class="text_10">
            将在问卷列表中收到问卷，请如实认真回答，并且您所回答内容是匿名的，请放心
          </span>

        </div>

      </div>
      <div class="box_6">
        <img class="image_5" referrerpolicy="no-referrer"      src=
         />
        <div class="text-group_5 flex-col justify-between">
          <span class="text_9">佣金</span>
          <span class="text_10">
            将在问卷列表中收到问卷，请如实认真回答，操作完成，佣金会在第一时间进入账号明细并且您所回答内容是匿名的，请放心
          </span>

        </div>
      </div>
    </div>

  </div>
</div>







</body>
`,ww=`<body>
 <style type="text/css">
   * {

margin: 0;
padding: 0;

}

.flex-col {
  display: flex;
  flex-direction: column;
}
.flex-row {
  display: flex;
  flex-direction: row;
}

.justify-between {
  display: flex;
  justify-content: space-between;
}




.group_1 {
  width: 100%;
  background-color: white;
}

.block_1 {
  background-color: white;
}

.box_1 {
margin: 11.25rem 11.25rem 0 11.25rem;
}

.image_1 {
  width: 41.125rem;
  height: 27.375rem;
}

.text-group_1 {
  margin-top: 5.375rem;
  margin-left: 5rem;
}

.text_1 {

  overflow-wrap: break-word;
  color: rgba(51, 51, 51, 1);
  font-size: 3rem;
  font-family: Source Han Sans CN-Medium;
  font-weight: 500;
  text-align: left;
  white-space: nowrap;

}

.paragraph_1 {

  overflow-wrap: break-word;
  color: rgba(119, 119, 119, 1);
  font-size: 1.5rem;
  font-family: Source Han Sans CN-Regular;
  font-weight: 400;
  text-align: left;
  margin-top: 1rem;
}

.box_2 {

  margin: 7.5rem 11.25rem;
}

.text-group_2 {
  margin-top: 5.375rem;
  margin-right: 5rem;
}

.text_2 {

  overflow-wrap: break-word;
  color: rgba(51, 51, 51, 1);
  font-size: 3rem;
  font-family: Source Han Sans CN-Medium;
  font-weight: 500;
  text-align: left;
  white-space: nowrap;
}

.paragraph_2 {
  overflow-wrap: break-word;
  color: rgba(119, 119, 119, 1);
  font-size: 1.5rem;
  font-family: Source Han Sans CN-Regular;
  font-weight: 400;
  text-align: left;
  margin-top: 1rem;
}

.image_2 {
  width: 41.125rem;
  height: 27.375rem;
}

.box_3 {
  margin: 0 11.25rem 7.5rem 11.25rem;
}

.image_3 {
  width: 41.125rem;
  height: 27.375rem;
}

.text-group_3 {
  margin-top: 5.375rem;
  margin-left: 5rem;
}

.text_3 {

  overflow-wrap: break-word;
  color: rgba(51, 51, 51, 1);
  font-size: 3rem;
  font-family: Source Han Sans CN-Medium;
  font-weight: 500;
  text-align: left;
  white-space: nowrap;
}

.text_4 {
  overflow-wrap: break-word;
  color: rgba(119, 119, 119, 1);
  font-size: 1.5rem;
  font-family: Source Han Sans CN-Regular;
  font-weight: 400;
  text-align: left;
  margin-top: 1rem;
}






.group_2 {
  width: 28.907rem;
  height: 10.134rem;
  margin: 1.707rem 0 0 11.147rem;
}


    </style>
  <div class="group_1 flex-row">
        <div class="block_1 flex-col">
          <div class="box_1 flex-row justify-between">
            <img
            class="image_1"
            referrerpolicy="no-referrer"
            src=${gw}
            />
               <div class="text-group_1 flex-col">
              <span class="text_3">在线赚钱</span>
              <span class="text_4">
                在该网站填写问卷就可轻松在线赚钱
                <br />
                我们已经优化系统来匹配最适配的问卷。问卷相关性越高，意味着可获奖金也更多。
                当我们为您匹配到完美问卷后，请及时进行参与，每一份问卷的配额是有限的。
                在该网站上赚钱趣味十足。公司参考您的意见来改善产品开发设计，这意味着您的意见非常宝贵。
              </span>
            </div>
          </div>
          <div class="box_2 flex-row justify-between">
            <div class="text-group_2 flex-col ">
              <span class="text_2">填问卷，在家办公</span>
              <span class="text_4">
                通过您的手机或电脑就可轻松参与问卷填写，您随时随地都可以在线填问卷，所以这是在家工作的理想选择。
                <br />
                这不需要花太多时间，您随时可以参与问卷，任何人都可以通过参与问卷的方式在家赚钱，您甚至可以在填写问卷的同时边做其他事。这是简单、有弹性的快速赚钱方法。
                <br />
                在家填写问卷是一件非常有意义的事，您的意见有助于公司设计更优质的产品和服务，问卷仅作为公司的产品调研使用。
              </span>
            </div>
            <img
            class="image_2"
            referrerpolicy="no-referrer"  src= />
          </div>
          <div class="box_3 flex-row justify-between">
            <img
              class="image_3"
              referrerpolicy="no-referrer" src= />
            <div class="text-group_3 flex-col ">
              <span class="text_3">在家工作您能赚多少?</span>
              <span class="text_4">
                您填写的每一份问卷都会获得奖金。这是一份有保障的兼职收入。让您轻松在家填问卷赚钱。我们提供最详细的市场问卷内容，您还可以在问卷邀请上查看每份问卷能赚到的奖金金额。
              </span>
            </div>
          </div>



        </div>

      </div>







</body>
`,_w=`

<body>
<style type="text/css">
 * {

    margin: 0;
    padding: 0;

  }

  .flex-col {
    display: flex;
    flex-direction: column;
  }

  .flex-row {
    display: flex;
    flex-direction: row;
  }

  .box_4 {
    display: flex;
  justify-content: center;
    align-items: center;
    width: 100%;
    height: 31.25rem;
    background: url(${vw})  no-repeat;
    background-size: 100% 100%;
    margin: 0 0 0.027rem 0;
  }

  .text_5 {
    overflow-wrap: break-word;
    color: rgba(51, 51, 51, 1);
    font-size: 3rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;
    white-space: nowrap;

  }

  .text-wrapper_1 {
    background-color: rgba(36, 144, 255, 1);
    border-radius: 4px;
    margin-top: 1.5rem;
    width: 14rem;
height: 4.9375rem;
background: #2490FF;
display: flex;
justify-content: center;
align-items: center;
  }

  .text_6 {

    overflow-wrap: break-word;
    color: rgba(255, 255, 255, 1);
    font-weight: 500;
    font-size: 2rem;
    font-family: Source Han Sans CN-Medium;
    font-weight: 500;
    white-space: nowrap;

  }
    </style>



  <div class="box_4 flex-col">
    <span class="text_5">立即注册并体验功能</span>
    <div class="text-wrapper_1 flex-col">
      <span class="text_6 text-click">注册</span>
    </div>
  </div>




</body>`,xw=[{id:"B2C-Html1",label:"B2C首页模板第一部分",content:yw,category:"Custom"},{id:"B2C-Html2",label:"B2C首页模板第二部分",content:bw,category:"Custom"},{id:"B2C-Html3",label:"B2C首页模板第三部分",content:ww,category:"Custom"},{id:"B2C-Html4",label:"B2C首页模板第四部分",content:_w,category:"Custom"}],Cw=()=>{alert("这是一个色块")},Sw=[{id:"color-blocks",model:{defaults:{script:Cw,style:{width:"100px",height:"100px",background:"red"}}}}],Ow=Yb({__name:"index",emits:["fetch-data"],setup(wt,{expose:pe,emit:Te}){const we=Te,ke=Zb({title:"",dialogFormVisible:!1,form:{}});Xb();const Jt=ob(null),Kt=ob(null),ft=(K,st="编辑")=>{ke.title=st,ke.form=K,ke.dialogFormVisible=!0},Ot=async()=>{await tw(),Jt.value=iw.init({container:Kt.value,height:"900px",width:"100%",plugins:[sw,cw,fw,dw],i18n:{locale:"zh",messages:{zh:vb}},projectData:JSON.parse(ke.form.rawData||"{}"),storageManager:!1,deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px",widthMedia:"992px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"575px"}]}}),Jt.value.on("block:custom",K=>{mw(K.blocks)}),xw.forEach(K=>{Jt.value.Blocks.add(K.id,K)}),Sw.forEach(K=>{Jt.value.Components.addType(K.id,K)})},q=async()=>{if(ke.title==="编辑"){const K=Jt.value.getHtml(),st=Jt.value.getCss(),k=JSON.stringify(Jt.value.getProjectData());ke.form={...ke.form,html:K,css:st,rawData:k};const{status:B}=await nw.edit(ke.form);B===1&&ew.success({message:"编辑成功",center:!0}),we("fetch-data"),mt()}},mt=()=>{Jt.value&&(Jt.value.destroy(),Jt.value=null),ke.form={},ke.dialogFormVisible=!1};return pe({showEdit:ft}),(K,st)=>{const k=ib("el-button"),B=ib("el-drawer");return Ag(ke).dialogFormVisible?(ab(),sb(B,{key:0,modelValue:Ag(ke).dialogFormVisible,"onUpdate:modelValue":st[0]||(st[0]=ct=>Ag(ke).dialogFormVisible=ct),title:Ag(ke).title,size:"80%",onOpened:Ot,onClose:mt},{footer:sm(()=>[Jb(k,{onClick:mt},{default:sm(()=>[lb("取 消")]),_:1}),Ag(ke).title==="编辑"?(ab(),sb(k,{key:0,type:"primary",onClick:q},{default:sm(()=>[lb("确 定")]),_:1})):cb("",!0)]),default:sm(()=>[Qb("div",{ref_key:"formRef",ref:Kt,id:"gjs"},null,512)]),_:1},8,["modelValue","title"])):cb("",!0)}}}),Pw=rw(Ow,[["__scopeId","data-v-214f922f"]]);export{Pw as default};
