
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as le,r as j,c as R,l as oe,a as m,o as f,b as h,f as e,aG as se,i as l,w as t,b7 as k,b8 as U,Q as g,C as i,D as s,g as n,e as x,F as Q,n as z,j as I,G as ne,E as F,aK as re,aL as ie,P as ce}from"./index-CAB4bd2D.js";import{g as ue,v as de,a as me}from"./index-CNFhpY8O.js";import{f as fe}from"./file-DAYH1F3G.js";import{o as pe}from"./apiLoading-C8EgKo_A.js";import{a as T}from"./projectManagement-Ch9RIJDm.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-BcUlIxQD.js";import{D as ye}from"./download-C8PHVIy1.js";import{u as ge}from"./otherFunctions_basicDictionary-CbW9PTAe.js";import{u as Se}from"./user_customer-JFC4VkSF.js";import"./basicDictionary-DnVvvvad.js";import"./user_customer-i4xtTq6t.js";const S=N=>(re("data-v-5034c441"),N=N(),ie(),N),be={style:{"margin-left":"25.5%"}},he=S(()=>i("span",{style:{"margin-left":"19.5%"}},"操作员",-1)),xe=S(()=>i("span",{style:{"margin-left":"12.5%"}},"操作员",-1)),ve=S(()=>i("span",{style:{"margin-left":"8.5%"}},"操作员",-1)),je=S(()=>i("span",{style:{"margin-left":"28.5%"}},"操作员",-1)),Ie={class:"card-header"},Le={class:"leftTitle"},we={class:"m-4 spanStatus"},Ce={class:"rightStatus"},ke=S(()=>i("div",{class:"card-header"},[i("span",null,"其他设置")],-1)),Ne={class:"peizjo-header"},Pe=S(()=>i("span",null,"配置信息",-1)),Ue={key:0,style:{"margin-left":"50px"}},De={key:1,style:{"margin-left":"30px"}},Qe=S(()=>i("div",{class:"card-header"},[i("span",null,"安全信息")],-1)),Te=S(()=>i("div",{class:"card-header"},[i("span",null,"描述配额")],-1)),Ve={class:"demo-image__preview"},Oe={class:"radius p-2 flex gap-2"},Be=S(()=>i("div",{class:"card-header"},[i("span",null,"操作日志")],-1)),Ee=le({name:"ProjectDetails",__name:"index",setup(N,{expose:M}){const $=Se(),V=j([]),A=ge();j("# Fantastic-admin");const O=j(),D=j(1),a=j({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});ue({locale:me});const G=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function q(u){O.value.showEdit(u)}const L=j(!1);async function H(u){a.value.isOnline=u.isOnline,a.value.allocationStatus=u.allocationStatus;const p=await pe(T.detail({projectId:u.projectId}));a.value.form=p.data,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((y,o)=>(y.find(r=>r.settlementStatus===o.settlementStatus)||y.push(o),y),[]);const d=await fe.detail({fileName:a.value.form.descriptionUrl});a.value.imgUrl=d.data.fileUrl,a.value.srcList=[d.data.fileUrl],K(),L.value=!0}const K=async()=>{if(a.value.form.projectQuotaInfoList.length){const u=await T.getProjectCountryList({countryIdList:a.value.form.countryIdList}),p={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},d=await T.getProjectCategoryList(p),y=B(u.data.getProjectCountryListInfoList,"countryId",p.countryId),o=B(d.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=y.countryName,a.value.form.projectProblemCategoryName=o.projectProblemCategoryName}},B=(u,p,d)=>u.find(y=>y[p]===d),P=R(()=>u=>a.value.countryList.filter(d=>u.includes(d.id)).map(d=>d.chineseName));async function J(u){try{await navigator.clipboard.writeText(u),F.success({message:"已复制文本",center:!0})}catch{F.warning({message:"复制失败,请重试",center:!0})}}async function W(){await ye(a.value.imgUrl,a.value.form.descriptionUrl)}function E(){L.value=!1}const X=R(()=>V.value.find(u=>u.tenantCustomerId===a.value.form.clientId));return oe(async()=>{a.value.countryList=await A.getCountry(),V.value=await $.getCustomerList()}),M({showEdit:H}),(u,p)=>{const d=m("el-step"),y=m("el-steps"),o=m("el-col"),b=m("el-row"),r=m("el-text"),c=m("el-form-item"),Y=m("el-link"),w=m("el-button"),v=m("el-card"),Z=m("el-image"),C=m("el-table-column"),ee=m("el-table"),te=m("ElForm"),ae=m("el-drawer");return f(),h("div",null,[e(ae,{modelValue:l(L),"onUpdate:modelValue":p[1]||(p[1]=_=>ne(L)?L.value=_:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},se({footer:t(()=>[e(w,{onClick:E},{default:t(()=>[n(" 取消 ")]),_:1}),e(w,{type:"primary",onClick:E},{default:t(()=>[n(" 确定 ")]),_:1})]),default:t(()=>[e(te,{"label-width":"120px"},{default:t(()=>[e(v,{class:"box-card"},{header:t(()=>[i("div",Ie,[i("div",Le,[n(" 基本信息 "),i("span",we,s(l(a).allocationStatus===1?"未分配":"已分配"),1)]),i("div",Ce,[i("div",{class:g(l(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},s(l(a).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[e(b,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(c,{label:"项目ID :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.projectId?l(a).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"项目名称 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.name?l(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.projectIdentification?l(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"所属客户 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(X).customerAccord),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"所属国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[l(P)(l(a).form.countryIdList).length>4?(f(),x(Y,{key:0,type:"primary"},{default:t(()=>[n(s(l(P)(l(a).form.countryIdList).length===185?"全球":l(P)(l(a).form.countryIdList).length),1)]),_:1})):(f(!0),h(Q,{key:1},z(l(P)(l(a).form.countryIdList),_=>(f(),h("span",{key:_},s(_)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"原价 :"},{default:t(()=>[l(a).form.currencyType===1?(f(),x(r,{key:0,class:"mx-1"},{default:t(()=>[n(s(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):I("",!0),l(a).form.currencyType===2?(f(),x(r,{key:1,class:"mx-1"},{default:t(()=>[n(s(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):I("",!0)]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"配额 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.num?l(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"最小时长 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.minimumDuration?l(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"IR/NIR :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.ir?l(a).form.ir+"%":l(a).form.ir)+" / "+s(l(a).form.nir?l(a).form.nir+"%":l(a).form.nir),1)]),_:1})]),_:1})]),_:1}),e(o,{span:12},{default:t(()=>[e(c,{label:"URL :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.uidUrl?l(a).form.uidUrl:"-"),1)]),_:1}),e(w,{type:"primary",style:{"margin-left":"auto"},onClick:p[0]||(p[0]=_=>J(l(a).form.uidUrl)),link:""},{default:t(()=>[n(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{class:"box-card"},{header:t(()=>[ke]),default:t(()=>[e(b,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(c,{label:"置顶 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"在线 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"资料 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"B2B :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s()+" "+s(l(a).form.isPinned===1?l(a).form.projectType.join(","):"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"定时发布 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"备注 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).formNaNpxark?l(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{class:"box-card"},{header:t(()=>[i("div",Ne,[Pe,l(a).form.countryName?(f(),h("span",Ue,"国家："+s(l(a).form.countryName),1)):I("",!0),l(a).form.projectProblemCategoryName?(f(),h("span",De,"问卷："+s(l(a).form.projectProblemCategoryName),1)):I("",!0)])]),default:t(()=>[e(b,{gutter:10,class:g(l(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[e(o,{span:8}),e(o,{span:8}),(f(!0),h(Q,null,z(l(a).form.projectQuotaInfoList,_=>(f(),x(o,{span:24,class:g({isNone:!l(a).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[e(c,{"label-width":"200px",label:_.keyValue+" :"},{default:t(()=>[_.answerValueList&&_.answerValueList[0]!=="null"?(f(),x(r,{key:0,class:"mx-1"},{default:t(()=>[n(s(_.answerValueList.join(", ")),1)]),_:2},1024)):(f(),x(r,{key:1,class:"mx-1"},{default:t(()=>[n(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1}),e(v,{class:"box-card"},{header:t(()=>[Qe]),default:t(()=>[e(b,{gutter:20},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(c,{label:"小时准入量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.preNum?l(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"小时完成量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.limitedQuantity?l(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(c,{label:"IP一致性检测:"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(s(l(a).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(a).form.descriptionUrl?(f(),x(v,{key:0,class:"box-card"},{header:t(()=>[Te]),default:t(()=>[l(a).form.descriptionUrl?(f(),h(Q,{key:0},[i("div",Ve,[e(Z,{style:{width:"6.25rem",height:"6.25rem"},src:l(a).imgUrl,"preview-src-list":l(a).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),e(w,{style:{padding:"0"},type:"primary",text:"",onClick:W},{default:t(()=>[n(s(l(a).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):I("",!0),e(b,{class:g({isNone:!l(a).form.descriptionUrl}),gutter:20},{default:t(()=>[e(o,{span:24},{default:t(()=>[i("div",Oe,[e(l(de),{value:l(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):I("",!0),e(v,{class:"box-card"},{header:t(()=>[Be]),default:t(()=>[e(ee,{data:G,border:"",style:{width:"100%"}},{default:t(()=>[e(C,{align:"center",type:"index",width:"80",label:"序号"}),e(C,{align:"center",prop:"a",label:"操作时间"}),e(C,{align:"center",prop:"b",label:"操作人"}),e(C,{align:"center",prop:"c",label:"操作事项"}),e(C,{align:"center",prop:"d",label:"详情"},{default:t(()=>[e(w,{text:"",type:"primary",size:"default",onClick:q},{default:t(()=>[n(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},[l(a).form.projectSettlementStatusSet&&l(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:t(()=>[e(b,{gutter:20},{default:t(()=>[e(o,{span:24},{default:t(()=>[e(y,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:l(a).form.projectSettlementStatusSet[0].settlementStatus},{default:t(()=>[e(d,{title:"待审核",description:"2021-09-09 11:11:11",icon:l(k)},null,8,["icon"]),e(d,{title:"已审核",description:l(a).form.projectSettlementStatusSet[0].operationTime,icon:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2?l(k):l(U)},null,8,["description","icon"]),e(d,{title:"已开票",description:"2021-09-09 11:11:11",icon:l(D)>=3?l(k):l(U)},null,8,["icon"]),e(d,{title:"已结算",description:"2021-09-09 11:11:11",icon:l(D)>=4?l(k):l(U)},null,8,["icon"]),e(d,{title:"已冻结",description:"2021-09-09 11:11:11",icon:l(D)>=5?l(k):l(U)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(b,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:t(()=>[e(o,{span:1}),e(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=1}),span:5},{default:t(()=>[i("span",be,s(l(a).form.projectSettlementStatusSet[0].operationName),1)]),_:1},8,["class"]),e(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2}),span:5},{default:t(()=>[he]),_:1},8,["class"]),e(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=3}),span:5},{default:t(()=>[xe]),_:1},8,["class"]),e(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=4}),span:4},{default:t(()=>[ve]),_:1},8,["class"]),e(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=5}),span:4},{default:t(()=>[je]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),e(_e,{ref_key:"logDetailsRef",ref:O},null,512)])}}}),We=ce(Ee,[["__scopeId","data-v-5034c441"]]);export{We as default};
