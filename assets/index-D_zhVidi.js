
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ce,aM as ke,r as i,a5 as ye,l as Se,a as s,al as we,o as c,b as Ee,f as t,w as o,i as a,am as P,g as p,J as x,p as b,e as m,j as d,S as Ve,E as O,aN as Ie,O as ze,aO as xe,aP as Ne,s as Ue,aK as Ae,aL as De,I as $e,aE as j,_ as Fe}from"./index-trCasUqd.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-CFYH0NOv.js";import{_ as Re}from"./index.vue_vue_type_script_setup_true_lang-CLHZcaGU.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-EMcA7A8K.js";import Pe from"./index-DB-EMDfT.js";import{s as q}from"./apiLoading-BczDGtUj.js";import{u as Me}from"./user_customer-BQxzwEsT.js";import{a as M}from"./user_customer-DBKbvE_T.js";import"./index.vue_vue_type_script_setup_true_lang-BMPfNTAj.js";import"./index-BT25rMKR.js";import"./stagedData-DmXBOKcK.js";import"./index.vue_vue_type_script_setup_true_lang-lipso6sI.js";const He=k=>(Ae("data-v-f6ee3eb2"),k=k(),De(),k),Qe=He(()=>$e("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Te=Ce({name:"UserCustomerIndex",__name:"index",setup(k){const J=Me(),{pagination:f,getParams:K,onSizeChange:G,onCurrentChange:W}=ke(),N=i(!1),H=i([]),U=i(),Q=i(),X=i(),y=i(!0),S=i(!1),w=i(!1),E=i("default"),u=i([]),V=i([{label:"客户编码",checked:!0,sortable:!0,prop:"tenantCustomerId"},{label:"客户名称",checked:!0,sortable:!0,prop:"customerAccord"},{label:"客户简称",checked:!0,sortable:!0,prop:"customerShortName"},{label:"负责人",checked:!0,sortable:!0,prop:"chargeName"},{label:"客户状态",checked:!0,sortable:!0,prop:"customerStatus"},{label:"前置问卷",checked:!0,sortable:!0,prop:"antecedentQuestionnaire"},{label:"风险控制",checked:!0,sortable:!0,prop:"riskControl"},{label:"客户营业限额/月",checked:!0,sortable:!0,prop:"turnover"},{label:"审核率Min值",checked:!0,sortable:!0,prop:"rateAudit"}]);function Y(){U.value.showEdit()}function Z(l){U.value.showEdit(l)}async function A(l,n,v){const $={status:l,operationalType:n,tenantCustomerId:v},{status:I}=await q(M.changestatus($));I===1&&O.success({message:"修改成功"}),J.customer=null,g()}function ee(l){Q.value.showEdit(l)}function te(l){Ie.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:n}=await q(M.delete({tenantCustomerId:l.tenantCustomerId}));n===1&&O.success({message:"删除成功"}),g()}).catch(()=>{})}const h=ye({customerShortName:"",customerStatus:null});function oe(l){G(l).then(()=>D())}function T(l=1){W(l).then(()=>D())}function ae(){Object.assign(h,{customerShortName:"",customerStatus:null}),g()}function g(){f.value.page=1,D()}async function D(){N.value=!0;const l={...K(),...h},{data:n}=await M.list(l);H.value=n.getTenantCustomerInfoList,f.value.total=Number(n.total),N.value=!1}function ne(l){X.value=l}return Se(()=>{V.value.forEach(l=>{l.checked&&u.value.push(l.prop)}),g()}),(l,n)=>{const v=s("el-option"),$=s("el-input"),I=s("el-form-item"),le=s("el-select"),F=ze,L=s("ElButton"),se=s("ElFormItem"),re=s("ElForm"),ue=Re,ie=s("ElDivider"),C=s("el-button"),ce=Le,pe=xe,me=Ne,de=s("el-row"),_=s("el-table-column"),R=s("ElSwitch"),B=s("ElTableColumn"),_e=s("ElSpace"),fe=s("el-empty"),he=s("el-table"),ge=s("ElPagination"),ve=Ue,be=we("loading");return c(),Ee("div",{class:Ve({"absolute-container":a(w)})},[t(ve,null,{default:o(()=>[t(ue,{"show-toggle":!1},{default:o(({fold:e,toggle:r})=>[t(re,{model:a(h).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[P(t(I,null,{default:o(()=>[t($,{modelValue:a(h).customerShortName,"onUpdate:modelValue":n[0]||(n[0]=z=>a(h).customerShortName=z),clearable:"",placeholder:"客户简称"},{default:o(()=>[t(v,{label:"name",value:"name"})]),_:1},8,["modelValue"])]),_:2},1536),[[j,!e]]),P(t(I,null,{default:o(()=>[t(le,{modelValue:a(h).customerStatus,"onUpdate:modelValue":n[1]||(n[1]=z=>a(h).customerStatus=z),clearable:"",placeholder:"客户状态"},{default:o(()=>[t(v,{label:"禁用",value:1}),t(v,{label:"启用",value:2}),t(v,{label:"风险暂停",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[j,!e]]),t(se,null,{default:o(()=>[t(L,{type:"primary",onClick:n[2]||(n[2]=z=>T())},{icon:o(()=>[t(F,{name:"i-ep:search"})]),default:o(()=>[p(" 筛选 ")]),_:1}),t(L,{onClick:ae},{icon:o(()=>[Qe]),default:o(()=>[p(" 重置 ")]),_:1}),t(L,{disabled:"",link:"",onClick:r},{icon:o(()=>[t(F,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[p(" "+x(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ie,{"border-style":"dashed"}),t(de,null,{default:o(()=>[t(ce,null,{default:o(()=>[t(C,{type:"primary",size:"default",onClick:Y},{icon:o(()=>[t(F,{name:"i-ep:plus"})]),default:o(()=>[p(" 新增 ")]),_:1})]),_:1}),t(me,null,{default:o(()=>[t(C,{size:"default"},{default:o(()=>[p(" 导出 ")]),_:1}),t(pe,{border:a(y),"onUpdate:border":n[3]||(n[3]=e=>b(y)?y.value=e:null),tableAutoHeight:a(w),"onUpdate:tableAutoHeight":n[4]||(n[4]=e=>b(w)?w.value=e:null),checkList:a(u),"onUpdate:checkList":n[5]||(n[5]=e=>b(u)?u.value=e:null),columns:a(V),"onUpdate:columns":n[6]||(n[6]=e=>b(V)?V.value=e:null),"line-height":a(E),"onUpdate:lineHeight":n[7]||(n[7]=e=>b(E)?E.value=e:null),stripe:a(S),"onUpdate:stripe":n[8]||(n[8]=e=>b(S)?S.value=e:null),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),P((c(),m(he,{border:a(y),data:a(H),size:a(E),stripe:a(S),onSelectionChange:ne},{empty:o(()=>[t(fe,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(_,{align:"center","show-overflow-tooltip":"",type:"selection"}),a(u).includes("tenantCustomerId")?(c(),m(_,{key:0,align:"center",prop:"tenantCustomerId","show-overflow-tooltip":"",label:"客户编码"})):d("",!0),a(u).includes("customerAccord")?(c(),m(_,{key:1,align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"})):d("",!0),a(u).includes("customerShortName")?(c(),m(_,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):d("",!0),a(u).includes("turnover")?(c(),m(_,{key:3,align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额/月"},{default:o(({row:e})=>[p(x(e.turnover?e.turnover:"-"),1)]),_:1})):d("",!0),a(u).includes("rateAudit")?(c(),m(_,{key:4,align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"},{default:o(({row:e})=>[p(x(e.rateAudit?e.rateAudit+"%":"-"),1)]),_:1})):d("",!0),a(u).includes("chargeName")?(c(),m(_,{key:5,align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"},{default:o(({row:e})=>[p(x(e.chargeName?e.rateAudit:"-"),1)]),_:1})):d("",!0),a(u).includes("customerStatus")?(c(),m(B,{key:6,align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:o(({row:e})=>[t(R,{modelValue:e.customerStatus,"onUpdate:modelValue":r=>e.customerStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>A(r,1,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),a(u).includes("antecedentQuestionnaire")?(c(),m(B,{key:7,align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:o(({row:e})=>[t(R,{modelValue:e.antecedentQuestionnaire,"onUpdate:modelValue":r=>e.antecedentQuestionnaire=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>A(r,2,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),a(u).includes("riskControl")?(c(),m(B,{key:8,align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:o(({row:e})=>[t(R,{modelValue:e.riskControl,"onUpdate:modelValue":r=>e.riskControl=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>A(r,3,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),t(_,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"200"},{default:o(({row:e})=>[t(_e,null,{default:o(()=>[t(C,{size:"small",plain:"",type:"primary",onClick:r=>Z(e)},{default:o(()=>[p(" 编辑 ")]),_:2},1032,["onClick"]),t(C,{type:"primary",plain:"",size:"small",onClick:r=>ee(e)},{default:o(()=>[p(" 详情 ")]),_:2},1032,["onClick"]),t(C,{type:"danger",plain:"",size:"small",onClick:r=>te(e)},{default:o(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[be,a(N)]]),t(ge,{"current-page":a(f).page,total:a(f).total,"page-size":a(f).size,"page-sizes":a(f).sizes,layout:a(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:oe,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"]),t(Be,{ref_key:"editRef",ref:U,onFetchData:g},null,512),t(Pe,{ref_key:"checkRef",ref:Q,onFetchData:g},null,512)]),_:1})],2)}}}),ot=Fe(Te,[["__scopeId","data-v-f6ee3eb2"]]);export{ot as default};
