
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as ve,d as he,ao as Ie,aN as ge,r as _,a5 as q,k as Se,a as c,p as ke,o as r,b as M,f as o,w as l,i as e,q as I,F as A,t as Q,e as s,g as p,H as b,I as k,j as u,S as we,N as Ce,aP as Ve,aQ as xe,aq as Le,aJ as De,aK as Pe,s as Te,ar as w,R as je}from"./index-BCb3LVAr.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-DsBBUNS6.js";import{_ as Ue}from"./index.vue_vue_type_style_index_0_lang-gsjcPjDc.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-DuGgmZIh.js";import{u as Ee}from"./user_customer-qKYTIef9.js";import"./user_customer-DmO8SDQT.js";const Me={list:g=>ve.post("callback/getMemberChildSurveyRecord",g)},Be=g=>(De("data-v-6db2ecf9"),g=g(),Pe(),g),Re=Be(()=>Te("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=he({name:"memberSurveyRecords",__name:"index",setup(g){const G=Ie(),J=Ee(),{getParams:K,pagination:S,onSizeChange:O,onCurrentChange:W}=ge(),N=_(!1),B=_([]),X=_(""),d=_([]),x=_(!0),L=_(!1),D=_("default"),P=_(!1),Y=_(),T=_([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortable:!0,checked:!0},{prop:"supplierPrice",label:"供应商价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),n=q({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),v=q({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function Z(){n.pageNo=1,C()}function ee(f){O(f).then(()=>C())}function R(f=1){W(f).then(()=>C())}async function C(){N.value=!0;const f={...K(),...n},{data:a}=await Me.list(f);B.value=a.memberChildSurveyRecordInfoList,Y.value=a.currencyType,S.value.total=a.total,N.value=!1}function te(f){X.value=f}function le(){Object.assign(n,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),C()}return Se(async()=>{v.customerList=await J.getCustomerList(),v.country=await G.getCountry(),T.value.forEach(f=>{f.checked&&d.value.push(f.prop)}),C()}),(f,a)=>{const h=c("el-input"),y=c("el-form-item"),j=c("el-option"),U=c("el-select"),F=Ce,z=c("ElButton"),oe=c("ElFormItem"),ae=c("ElForm"),re=ze,ne=c("ElDivider"),ie=Ue,se=c("el-button"),ue=Ve,de=xe,pe=c("el-row"),m=c("el-table-column"),$=Ne,V=c("el-text"),H=c("ElTableColumn"),ce=c("el-empty"),me=c("el-table"),be=c("ElPagination"),fe=Le,ye=ke("loading");return r(),M("div",{class:we({"absolute-container":e(P)})},[o(fe,null,{default:l(()=>[o(re,{"show-toggle":!1},{default:l(({fold:t,toggle:_e})=>[o(ae,{model:e(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).projectId,"onUpdate:modelValue":a[0]||(a[0]=i=>e(n).projectId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).projectName,"onUpdate:modelValue":a[1]||(a[1]=i=>e(n).projectName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),o(y,{label:""},{default:l(()=>[o(U,{modelValue:e(n).surveySource,"onUpdate:modelValue":a[2]||(a[2]=i=>e(n).surveySource=i),clearable:"",filterable:"",placeholder:"会员类型"},{default:l(()=>[o(j,{label:"内部会员",value:1}),o(j,{label:"外部会员",value:2})]),_:1},8,["modelValue"])]),_:1}),o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).memberId,"onUpdate:modelValue":a[3]||(a[3]=i=>e(n).memberId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),I(o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).memberChildId,"onUpdate:modelValue":a[4]||(a[4]=i=>e(n).memberChildId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),I(o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).randomIdentityId,"onUpdate:modelValue":a[5]||(a[5]=i=>e(n).randomIdentityId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),I(o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).tenantSupplierId,"onUpdate:modelValue":a[6]||(a[6]=i=>e(n).tenantSupplierId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),I(o(y,{label:""},{default:l(()=>[o(h,{modelValue:e(n).ip,"onUpdate:modelValue":a[7]||(a[7]=i=>e(n).ip=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[w,!t]]),I(o(y,{label:""},{default:l(()=>[o(U,{modelValue:e(n).surveyStatus,"onUpdate:modelValue":a[8]||(a[8]=i=>e(n).surveyStatus=i),clearable:"",filterable:"",placeholder:"调查状态"},{default:l(()=>[(r(!0),M(A,null,Q(e(v).surveyStatusList,(i,E)=>(r(),s(j,{label:i,value:E+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!t]]),I(o(y,{label:""},{default:l(()=>[o(U,{modelValue:e(n).viceStatus,"onUpdate:modelValue":a[9]||(a[9]=i=>e(n).viceStatus=i),clearable:"",placeholder:"副状态"},{default:l(()=>[(r(!0),M(A,null,Q(e(v).viceStatusList,(i,E)=>(r(),s(j,{label:i,value:E+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[w,!t]]),o(oe,null,{default:l(()=>[o(z,{type:"primary",onClick:a[10]||(a[10]=i=>R())},{icon:l(()=>[o(F,{name:"i-ep:search"})]),default:l(()=>[p(" 筛选 ")]),_:1}),o(z,{onClick:le},{icon:l(()=>[Re]),default:l(()=>[p(" 重置 ")]),_:1}),o(z,{link:"",onClick:_e},{icon:l(()=>[o(F,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[p(" "+b(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(ne,{"border-style":"dashed"}),o(pe,null,{default:l(()=>[o(ie),o(de,null,{default:l(()=>[o(se,{size:"default"},{default:l(()=>[p(" 导出 ")]),_:1}),o(ue,{border:e(x),"onUpdate:border":a[11]||(a[11]=t=>k(x)?x.value=t:null),tableAutoHeight:e(P),"onUpdate:tableAutoHeight":a[12]||(a[12]=t=>k(P)?P.value=t:null),checkList:e(d),"onUpdate:checkList":a[13]||(a[13]=t=>k(d)?d.value=t:null),columns:e(T),"onUpdate:columns":a[14]||(a[14]=t=>k(T)?T.value=t:null),"line-height":e(D),"onUpdate:lineHeight":a[15]||(a[15]=t=>k(D)?D.value=t:null),stripe:e(L),"onUpdate:stripe":a[16]||(a[16]=t=>k(L)?L.value=t:null),style:{"margin-left":"12px"},onQueryData:Z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((r(),s(me,{border:e(x),data:e(B),size:e(D),stripe:e(L),onSelectionChange:te},{empty:l(()=>[o(ce,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[o(m,{align:"center",type:"selection"}),e(d).includes("id")?(r(),s(m,{key:0,align:"center",prop:"id",width:"180","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:l(({row:t})=>[p(b(t.id?t.id:"-"),1)]),_:1})):u("",!0),e(d).includes("surveySource")?(r(),s(m,{key:1,align:"center",prop:"memberId",width:"180","show-overflow-tooltip":"",label:"会员类型"},{default:l(({row:t})=>[p(b(t.surveySource===1?"内部会员":"外部会员"),1)]),_:1})):u("",!0),e(d).includes("memberChildrenId")?(r(),s(m,{key:2,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID",width:"180"},{default:l(({row:t})=>[p(b(t.memberChildrenId?t.memberChildrenId:"-"),1)]),_:1})):u("",!0),e(d).includes("memberId")?(r(),s(m,{key:3,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID",width:"180"},{default:l(({row:t})=>[p(b(t.memberId?t.memberId:"-"),1)]),_:1})):u("",!0),e(d).includes("randomIdentityId")?(r(),s(m,{key:4,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",width:"180",label:"随机身份"},{default:l(({row:t})=>[p(b(t.randomIdentityId?t.randomIdentityId:"-"),1)]),_:1})):u("",!0),e(d).includes("tenantSupplierId")?(r(),s(m,{key:5,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",width:"180",label:"供应商ID"},{default:l(({row:t})=>[p(b(t.tenantSupplierId?t.tenantSupplierId:"-"),1)]),_:1})):u("",!0),e(d).includes("projectId")?(r(),s(m,{key:6,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):u("",!0),e(d).includes("projectName")?(r(),s(m,{key:7,align:"center",prop:"projectName","show-overflow-tooltip":"",width:"180",label:"项目名称"})):u("",!0),e(d).includes("customerShortName")?(r(),s(m,{key:8,align:"center",prop:"customerShortName","show-overflow-tooltip":"",width:"120",label:"客户简称"})):u("",!0),e(d).includes("allocationType")?(r(),s(m,{key:9,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:l(({row:t})=>[p(b(e(v).allocationTypeList[t.allocationType-1]),1)]),_:1})):u("",!0),e(d).includes("doMoneyPrice")?(r(),s(m,{key:10,align:"center",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"90",fixed:"right",label:"原价"},{default:l(({row:t})=>[o($),p(b(t.doMoneyPrice||0),1)]),_:1})):u("",!0),e(d).includes("supplierPrice")?(r(),s(m,{key:11,align:"center",prop:"supplierPrice","show-overflow-tooltip":"",width:"90",fixed:"right",label:"供应商价"},{default:l(({row:t})=>[o($),p(b(t.supplierPrice||0),1)]),_:1})):u("",!0),e(d).includes("ipBelong")?(r(),s(m,{key:12,align:"center",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/所属国"})):u("",!0),e(d).includes("surveyTime")?(r(),s(m,{key:13,align:"center","show-overflow-tooltip":"",fixed:"right",width:"120",label:"调查时间"},{default:l(({row:t})=>[p(b(t.surveyTime?t.surveyTime+"min":0)+"/ "+b(t.projectTime?t.projectTime+"min":0),1)]),_:1})):u("",!0),e(d).includes("surveyStatus")?(r(),s(H,{key:14,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"调查状态"},{default:l(({row:t})=>[t.surveyStatus===3?(r(),s(V,{key:0,class:"mx-1",type:"primary"},{default:l(()=>[p("配额满")]),_:1})):u("",!0),t.surveyStatus===1?(r(),s(V,{key:1,class:"mx-1",type:"success"},{default:l(()=>[p("完成")]),_:1})):u("",!0),t.surveyStatus===2?(r(),s(V,{key:2,class:"mx-1",type:"danger"},{default:l(()=>[p("被甄别")]),_:1})):u("",!0),t.surveyStatus===4?(r(),s(V,{key:3,class:"mx-1",type:"warning"},{default:l(()=>[p("安全终止")]),_:1})):u("",!0),t.surveyStatus===5?(r(),s(V,{key:4,class:"mx-1",type:"info"},{default:l(()=>[p("未完成")]),_:1})):u("",!0)]),_:1})):u("",!0),e(d).includes("viceStatus")?(r(),s(H,{key:15,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:l(({row:t})=>[p(b(e(v).viceStatusList[t.viceStatus-1]?e(v).viceStatusList[t.viceStatus-1]:"-"),1)]),_:1})):u("",!0)]),_:1},8,["border","data","size","stripe"])),[[ye,e(N)]]),o(be,{"current-page":e(S).page,total:e(S).total,"page-size":e(S).size,"page-sizes":e(S).sizes,layout:e(S).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ee,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Je=je(Fe,[["__scopeId","data-v-6db2ecf9"]]);export{Je as default};
