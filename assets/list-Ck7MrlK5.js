
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,aO as me,r,a5 as ce,l as de,b as u,q as fe,o as n,e as M,g as o,w as t,h as m,s as he,f as p,j as h,aN as _e,k as _,t as s,H as b,S as be,be as ge,E as ve,aQ as ye,aR as ke,ap as Ne,aI as we,aJ as Ce,R as Se}from"./index-D7Sst9VF.js";import{_ as Ge}from"./index-DFK48xBm.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-CmFAJyPs.js";import{_ as Le}from"./index-CaP4xy9m.js";import{s as xe}from"./apiLoading-COoxwg6Z.js";import De from"./index-C52UHITJ.js";import ze from"./index-BDV6df9G.js";import{a as R}from"./survey_vipGroup-BHik2cGl.js";import{u as Ee}from"./survey_vipGroup-bcaO23dJ.js";import"./index-B6EhJAmM.js";import"./index.vue_vue_type_script_setup_true_lang-C4I_GVgn.js";import"./sortable.esm-C0-Qcoum.js";import"./survey_vip-BHafgx5Z.js";import"./survey_vip-DEiFyktV.js";const Me=y=>(we("data-v-7286df6d"),y=y(),Ce(),y),Ve={key:0,class:"hoverSvg"},Te={class:"fineBom"},Be={class:"c-fx"},He={class:"weightColor"},Pe={key:0,class:"hoverSvg"},Re={class:"weightColor"},je={class:"fineBom"},Fe={class:"c-fx"},Ue=Me(()=>s("span",{class:"headerIcon"},[s("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[s("g",{id:"Time (æ¶é´)"},[s("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),s("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),m(" 创建时间 ")],-1)),Ae=pe({name:"vipGroup",__name:"list",setup(y){const{pagination:d,getParams:j,onSizeChange:F,onCurrentChange:U}=me(),A=Ee(),{format:$}=ge(),k=r(!1),V=r([]);r();const C=r(),T=r(),S=r(!1),G=r(!1),I=r("default"),i=r([]),L=r(!1),B=r(),O=r("formSearch-vipGroup"),x=r([{label:"组状态",prop:"groupStatus",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组ID",prop:"memberGroupId",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组名称",prop:"memberGroupName",sortable:!0,disableCheck:!1,checked:!0},{label:"组长名称(ID)",prop:"groupLeaderMemberName",sortable:!0,disableCheck:!1,checked:!0},{label:"成员",prop:"memberNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"项目数",prop:"projectNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"创建时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0}]),f=ce({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function q(){C.value.showEdit()}function Q(a){C.value.showEdit(a)}function J(a){T.value.showEdit(a)}function g(){d.value.page=1,N()}function Z(a){F(a).then(()=>N())}function H(a=1){U(a).then(()=>N())}async function N(){try{k.value=!0;const a={...j(),...f};f.time&&f.time.length&&(a.beginTime=f.time[0]||"",a.endTime=f.time[1]||"");const{data:l}=await R.list(a);V.value=l.getMemberGroupInfoList,d.value.total=l.total,k.value=!1}catch{}finally{k.value=!1}}function K(){Object.assign(f,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),N()}async function W(a,l){const D={memberGroupId:l,groupStatus:a},{status:z}=await xe(R.changestatus(D));z===1&&ve.success({message:"修改成功"}),A.GroupNameList=null,g()}de(()=>{x.value.forEach(a=>{a.checked&&i.value.push(a.prop)}),g(),B.value=[{index:1,show:!0,type:"input",modelName:"memberGroupId",placeholder:"会员组ID"},{index:2,show:!0,type:"input",modelName:"memberGroupName",placeholder:"会员组名称"},{index:3,show:!0,type:"input",modelName:"groupLeaderMemberName",placeholder:"组长ID、组长名称"},{index:4,show:!0,type:"select",modelName:"groupStatus",placeholder:"会员组状态",option:"groupStatus",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const X={groupStatus:()=>[{label:"关闭",value:1},{label:"开启",value:2}]};return(a,l)=>{const D=Le,z=u("ElDivider"),E=u("el-button"),Y=Ie,ee=ye,te=ke,oe=u("el-row"),c=u("el-table-column"),ae=u("ElSwitch"),P=Ge,w=u("el-text"),le=u("el-tag"),re=u("el-empty"),ne=u("el-table"),se=u("ElPagination"),ie=Ne,ue=fe("loading");return n(),M("div",{class:be({"absolute-container":L.value})},[o(ie,null,{default:t(()=>[o(D,{formSearchList:B.value,formSearchName:O.value,onCurrentChange:H,onOnReset:K,model:f,formOption:X},null,8,["formSearchList","formSearchName","model"]),o(z,{"border-style":"dashed"}),o(oe,null,{default:t(()=>[o(Y,null,{default:t(()=>[o(E,{type:"primary",size:"default",onClick:q},{default:t(()=>[m(" 新增 ")]),_:1})]),_:1}),o(te,null,{default:t(()=>[o(E,{size:"default"},{default:t(()=>[m(" 导出 ")]),_:1}),o(ee,{border:S.value,"onUpdate:border":l[0]||(l[0]=e=>S.value=e),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":l[1]||(l[1]=e=>L.value=e),checkList:i.value,"onUpdate:checkList":l[2]||(l[2]=e=>i.value=e),columns:x.value,"onUpdate:columns":l[3]||(l[3]=e=>x.value=e),"line-height":I.value,"onUpdate:lineHeight":l[4]||(l[4]=e=>I.value=e),stripe:G.value,"onUpdate:stripe":l[5]||(l[5]=e=>G.value=e),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),he((n(),p(ne,{border:S.value,data:V.value,size:I.value,stripe:G.value},{empty:t(()=>[o(re,{image:h(_e),"image-size":300},null,8,["image"])]),default:t(()=>[o(c,{align:"left",type:"selection"}),i.value.includes("groupStatus")?(n(),p(c,{key:0,align:"left",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:t(({row:e})=>[o(ae,{modelValue:e.groupStatus,"onUpdate:modelValue":v=>e.groupStatus=v,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:v=>W(v,e.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):_("",!0),i.value.includes("memberGroupId")?(n(),p(c,{key:1,width:"200",align:"left",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"},{default:t(({row:e})=>[e.memberGroupId?(n(),M("div",Ve,[s("p",Te,"ID："+b(e.memberGroupId),1),s("span",Be,[o(P,{class:"copy",content:e.memberGroupId},null,8,["content"])])])):(n(),p(w,{key:1},{default:t(()=>[m("-")]),_:1}))]),_:1})):_("",!0),i.value.includes("memberGroupName")?(n(),p(c,{key:2,align:"left",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"},{default:t(({row:e})=>[s("p",He,b(e.memberGroupName?e.memberGroupName:"-"),1)]),_:1})):_("",!0),i.value.includes("groupLeaderMemberName")?(n(),p(c,{key:3,align:"left",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:t(({row:e})=>[e.groupLeaderMemberName?(n(),M("div",Pe,[s("div",Re,b(e.groupLeaderMemberName.split("/")[0]),1),m("    "),s("p",je,"ID："+b(e.groupLeaderMemberName.split("/")[1]),1),s("span",Fe,[o(P,{class:"copy",content:e.groupLeaderMemberName.split("/")[1]},null,8,["content"])])])):(n(),p(w,{key:1},{default:t(()=>[m("-")]),_:1}))]),_:1})):_("",!0),i.value.includes("memberNumber")?(n(),p(c,{key:4,width:"100",align:"left",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"},{default:t(({row:e})=>[o(w,{class:"buleBorder",type:"primary"},{default:t(()=>[m(b(e.memberNumber?e.memberNumber:0),1)]),_:2},1024)]),_:1})):_("",!0),i.value.includes("projectNumber")?(n(),p(c,{key:5,width:"100",align:"left",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:t(({row:e})=>[o(w,{class:"buleBorder",type:"primary",onClick:v=>J(e)},{default:t(()=>[m(b(e.projectNumber?e.projectNumber:0),1)]),_:2},1032,["onClick"])]),_:1})):_("",!0),i.value.includes("createTime")?(n(),p(c,{key:6,align:"left",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{header:t(()=>[Ue]),default:t(({row:e})=>[o(le,{effect:"plain",type:"info"},{default:t(()=>[m(b(h($)(e.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),o(c,{align:"left",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:t(({row:e})=>[o(E,{size:"small",plain:"",type:"primary",onClick:v=>Q(e)},{default:t(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ue,k.value]]),o(se,{"current-page":h(d).page,total:h(d).total,"page-size":h(d).size,"page-sizes":h(d).sizes,layout:h(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:H},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(De,{ref_key:"editRef",ref:C,onFetchData:g},null,512),o(ze,{ref_key:"checkRef",ref:T,onFetchData:g},null,512)],2)}}}),lt=Se(Ae,[["__scopeId","data-v-7286df6d"]]);export{lt as default};
