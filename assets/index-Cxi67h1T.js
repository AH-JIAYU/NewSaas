
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as y,d as b,$ as j,n as h,a as m,o as g,b as C,f as u,w as r,v as n,g as v,i,e as E,j as k,ap as D,E as x,br as V,_ as A,aI as B,aJ as L,M as N}from"./index-DZ7Gqds7.js";/* empty css                      */const J={list:s=>y.post("callback/getProjectSurveyScreenList",s),childList:s=>y.post("callback/getProjectScreenMemberChildList",s),getDetail:s=>y.post("callback/getProjectSurveyScreenDetailList",s)},M=s=>(B("data-v-ac9dcdac"),s=s(),L(),s),O={class:"heade"},P={class:"title"},$=M(()=>n("div",{class:"tooltip"},[n("div",null,[n("div",{class:"label"},[n("span",{class:"red"},"红色")]),v(" : 正确答案 ")]),n("div",null,[n("div",{class:"label"},[n("span",{class:"spot"})]),v(" : 所选答案 ")])],-1)),z=b({__name:"index",setup(s,{expose:I}){const o=j({visible:!1,survey:null}),S=f=>{let e=[];return f.forEach(a=>{if(a.projectCorrectAnswerId.includes(",")){const d=a.projectCorrectAnswerId.split(",").map(c=>c.trim());e=e.concat(d)}else e.push(a.projectCorrectAnswerId.trim())}),e},w=async f=>{const e=await J.getDetail({id:f.id}),a=D(JSON.parse(e.data.projectJson));if(!a)x.warning({message:"无详情数据",center:!0});else{console.log(a.pages,"projectJson.pages"),a.pages.forEach(c=>{c.elements.forEach(t=>{t.readOnly=!0;const p=e.data.projectSurveyScreenDetailInfoList.find(l=>l.projectProblemId===t.surveyId);if(p){if(t.type==="radiogroup"){const l=t.choices.filter(_=>p.projectAnswerId.includes(_.surveyId));t.defaultValue=l.map(_=>_.value)}t.type=="text"&&(t.defaultValue=p.answerValue)}})}),o.survey=new V.Model(JSON.stringify(a)),o.survey.showNavigationButtons=!1;const d=S(e.data.projectSurveyScreenDetailInfoList);o.survey.onUpdateChoiceItemCss.add(function(c,t){d.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),o.visible=!0}};return h(async()=>{}),I({showEdit:w}),(f,e)=>{const a=A,d=m("el-tooltip"),c=m("SurveyComponent"),t=m("ElButton"),p=m("ElDrawer");return g(),C("div",null,[u(p,{modelValue:i(o).visible,"onUpdate:modelValue":e[2]||(e[2]=l=>i(o).visible=l),title:"",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{header:r(()=>[n("div",O,[n("div",P,[v(" 查看 "),u(d,{class:"tooltips",content:"",placement:"top",effect:"light"},{content:r(()=>[$]),default:r(()=>[u(a,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])])]),footer:r(()=>[u(t,{size:"large",onClick:e[0]||(e[0]=l=>i(o).visible=!1)},{default:r(()=>[v(" 取消 ")]),_:1}),u(t,{type:"primary",size:"large",onClick:e[1]||(e[1]=l=>i(o).visible=!1)},{default:r(()=>[v(" 确定 ")]),_:1})]),default:r(()=>[i(o).survey?(g(),E(c,{key:0,model:i(o).survey,style:{width:"100%"}},null,8,["model"])):k("",!0)]),_:1},8,["modelValue"])])}}}),q=N(z,[["__scopeId","data-v-ac9dcdac"]]),U=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{J as a,U as i,q};
