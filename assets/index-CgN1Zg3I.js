
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{c as B}from"./user_cooperation-DHCn0J43.js";import{d as w,r as g,a as r,o as n,b as p,i as a,e as c,w as s,f as i,g as _,F as M,t as S,y as b,z as v,j as h,an as P,p as z,E as Q,L as R}from"./index-CNsz2S3y.js";const j={style:{float:"left"}},q={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"0.8125rem"}},A=w({name:"componentsQuickEdit",__name:"index",emits:["fetch-data"],setup(F,{expose:y,emit:V}){const D=V,u=g(),e=g({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},staffList:[],rules:{chargeId:[{required:!0,message:"请选择PM",trigger:"change"}]}}),U={chargeUserId:"PM"};async function I(t,l){k(),e.value.title=U[l],e.value.type=l,e.value.loading=!0,e.value.formData=P(t),e.value.formData.chargeUserId=t.userId,e.value.formData.chargeUserName=t.userName,e.value.dialogTableVisible=!0,e.value.loading=!1}const k=async()=>{const t=await z.getTenantStaffList();e.value.staffList=t.data},N=t=>{if(t){const l=e.value.staffList.find(d=>d.id===t);e.value.formData.chargeUserName=l.userName}else e.value.formData.chargeUserId="",e.value.formData.chargeUserName=""};async function L(){e.value.loading=!0,u.value.validate(async t=>{if(t){const{status:l}=await B.updateInvitationBindUser(e.value.formData);l===1&&Q.success({message:"编辑成功",center:!0}),D("fetch-data"),f()}e.value.loading=!1})}function f(){e.value.dialogTableVisible=!1,e.value.formData={}}return y({showEdit:I}),(t,l)=>{const d=r("el-option"),T=r("el-select"),x=r("el-form-item"),C=r("el-form"),m=r("el-button"),E=r("el-dialog");return n(),p("div",null,[a(e).dialogTableVisible?(n(),c(E,{key:0,modelValue:a(e).dialogTableVisible,"onUpdate:modelValue":l[1]||(l[1]=o=>a(e).dialogTableVisible=o),title:a(e).title+"编辑",draggable:""},{footer:s(()=>[i(m,{onClick:f,disabled:a(e).loading},{default:s(()=>[_(" 取消 ")]),_:1},8,["disabled"]),i(m,{type:"primary",onClick:L,disabled:a(e).loading},{default:s(()=>[_(" 确定 ")]),_:1},8,["disabled"])]),default:s(()=>[i(C,{ref_key:"formRef",ref:u,model:a(e).formData,rules:a(e).rules,"label-width":"100","label-position":"right"},{default:s(()=>[a(e).type==="chargeUserId"?(n(),c(x,{key:0,label:"PM",prop:"chargeUserId"},{default:s(()=>[i(T,{modelValue:a(e).formData.chargeUserId,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).formData.chargeUserId=o),clearable:"",onChange:N},{default:s(()=>[(n(!0),p(M,null,S(a(e).staffList,o=>(n(),c(d,{key:o.id,value:o.id,label:o.userName},{default:s(()=>[b("span",j,v(o.userName),1),b("span",q,v(o.id),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):h("",!0)])}}}),J=R(A,[["__scopeId","data-v-2f2f172e"]]);export{J as default};
