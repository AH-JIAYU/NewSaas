
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as B}from"./index-hBNxJq5H.js";import"./index-iJRjh0Y-.js";import{a as I}from"./survey_myProjeck-bXbzK5Sl.js";import{f as L}from"./file-KgBaBShg.js";import{D as T}from"./download-C8PHVIy1.js";import{d as A,r as l,a as t,q as E,s as F,o as a,b as n,f as c,w as p,F as w,t as h,e as x,j as y,g as q,z as M,N as P,y as Q,i as k,aM as S,L as G}from"./index-CS2KSSDR.js";const H={key:0,class:"demo-image__preview"},J={style:{"margin-bottom":"5px"}},K={class:"radius flex gap-2 p-2"},O=A({__name:"index",setup(R,{expose:U}){const u=l(!1),v=l(""),e=l({}),o=l([]),s=l([]),d=l(!1);async function C(_){try{if(u.value=!0,v.value="项目详情",_){d.value=!0;const i=await I.getQuotaProjectInfo({projectId:_.projectId});if(e.value=i.data,e.value.descriptionUrl!==""){const m=e.value.descriptionUrl.split(",");s.value=m,m.map(async f=>{const g=await L.detail({fileName:f});o.value.push(g.data.fileUrl)})}s.value=o.value,d.value=!1}}catch{}finally{d.value=!1}}async function D(){await T(o.value,e.value.descriptionUrl)}function N(){v.value="",e.value={},o.value=[],s.value=[],u.value=!1}return U({showEdit:C}),(_,i)=>{const m=t("el-image"),f=t("el-link"),g=t("el-col"),V=t("el-row"),b=t("el-empty"),j=t("el-dialog"),z=E("loading");return F((a(),n("div",null,[c(j,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=r=>u.value=r),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:v.value,draggable:"",width:"50%",onClose:N},{default:p(()=>[e.value.descriptionUrl?(a(),n("div",H,[(a(!0),n(w,null,h(o.value,r=>(a(),x(m,{style:{width:"6.25rem",height:"6.25rem","margin-right":"5px"},src:r,"preview-src-list":s.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"]))),256))])):y("",!0),e.value.descriptionUrl?(a(!0),n(w,{key:1},h(s.value,r=>(a(),n("div",J,[c(f,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:D},{default:p(()=>[q(M(r)+"下载",1)]),_:2},1024)]))),256)):y("",!0),c(V,{gutter:20,class:P({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:p(()=>[c(g,{span:24},{default:p(()=>[Q("div",K,[c(k(B),{value:e.value.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(a(),x(b,{key:2,image:k(S),"image-size":300},null,8,["image"])):y("",!0)]),_:1},8,["modelValue","title"])])),[[z,d.value]])}}}),ae=G(O,[["__scopeId","data-v-2cded8b4"]]);export{ae as default};
