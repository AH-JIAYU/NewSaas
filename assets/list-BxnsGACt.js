
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,r as n,aN as fe,Z as _e,n as ge,a as m,q as F,s as d,o as s,b as ve,f as l,w as o,i as r,e as i,g as k,A as he,aM as ye,y as f,z as S,N as P,j as v,aO as be,E as Ce,ba as ke,bb as Se,_ as we,an as ze,L as Ee}from"./index-B6vdodWb.js";import{_ as Le}from"./index-B4zU8xsx.js";import{_ as xe}from"./index.vue_vue_type_style_index_0_lang-EprqUVEg.js";import{_ as De}from"./index-7vslTR3A.js";import{a as H}from"./position_manage-DSgm3i5i.js";import Re from"./index-Bu4WtBy6.js";import{u as Pe}from"./user_customer-08TybZZe.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-CsIb0ZGa.js";import{columns as w,formSearchList as $e}from"./index-LKHl6-K8.js";import"./index-B3NPbehX.js";import"./clipboard-CNr1cPWR.js";import"./index.vue_vue_type_script_setup_true_lang-BCAz2r9p.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-CA5SwUIR.js";const Ue={class:"copyId tableSmall"},Be={class:"id oneLine idFont"},Fe={class:"tableBig"},He={class:"fontC-System"},Ae={class:"flex-s"},Ie={class:"oneLine fontC-System",style:{width:"calc(100% - 20px)"}},Me=de({name:"position_manage",__name:"list",setup(Oe){const A=Pe(),I=n([]),{pagination:p,onSizeChange:M,onCurrentChange:O,onSortChange:Qe}=fe(),Q=n(""),N=n([]),h=n(!0),z=n(),E=n(!1),c=n([]),L=n(!1),x=n("default"),$=n(),y=n(),D=n(!1),V=n([]),j=n("formSearch-position_manage"),q=[{lable:"启用",value:1},{lable:"禁用",value:2}],_=_e({page:1,limit:10,id:null,name:"",active:null});function T(){z.value.showEdit()}function J(t){z.value.showEdit(JSON.stringify(t))}function Z(t){t?y.value=t.id:y.value=""}function G(t,a){$.value.showEdit(t,a)}function K(t){V.value=t}function W(t){be.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(async()=>{(await H.delete({id:t.id})).status===1&&(Ce.success({message:"删除成功",center:!0}),u())})}function X(){Object.assign(_,{page:1,limit:10,id:null,name:"",active:null}),u()}function Y(t){M(t).then(()=>{_.limit=t,u()})}function R(t=1){O(t).then(()=>{_.page=t,u()})}async function u(){try{h.value=!0,I.value=await A.getCustomerList();const{data:t,status:a}=await H.list(_);t&&a===1&&(N.value=t.data,p.value.total=parseInt(t.total)||0),h.value=!1}catch{}finally{h.value=!1}}ge(()=>{w.forEach(t=>{t.checked&&c.value.push(t.prop)}),u()});const ee={active:()=>q};return(t,a)=>{const te=De,ae=m("ElDivider"),b=m("el-button"),oe=xe,ne=ke,le=Se,se=m("el-row"),ie=Le,g=m("el-table-column"),re=we,ce=m("el-empty"),ue=m("el-table"),me=m("ElPagination"),pe=ze,C=F("auth"),U=F("loading");return d((s(),ve("div",{class:P({"absolute-container":E.value})},[l(pe,null,{default:o(()=>[l(te,{formSearchList:r($e),formSearchName:j.value,onCurrentChange:R,onOnReset:X,model:_,formOption:ee},null,8,["formSearchList","formSearchName","model"]),l(ae,{"border-style":"dashed"}),l(se,{gutter:24},{default:o(()=>[l(oe,null,{default:o(()=>[d((s(),i(b,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:T},{default:o(()=>[k(" 新增职位 ")]),_:1})),[[C,"position_manage-insert-insertPosition"]])]),_:1}),l(le,null,{default:o(()=>[l(b,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[k(" 导出 ")]),_:1}),l(ne,{border:L.value,"onUpdate:border":a[1]||(a[1]=e=>L.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>E.value=e),checkList:c.value,"onUpdate:checkList":a[3]||(a[3]=e=>c.value=e),columns:r(w),"onUpdate:columns":a[4]||(a[4]=e=>he(w)?w.value=e:null),"line-height":x.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>x.value=e),stripe:D.value,"onUpdate:stripe":a[6]||(a[6]=e=>D.value=e),style:{"margin-left":"12px"},onQueryData:R},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),d((s(),i(ue,{ref_key:"tableSortRef",ref:Q,style:{"margin-top":"10px"},"row-key":"id",data:N.value,border:L.value,size:x.value,stripe:D.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:Z},{empty:o(()=>[l(ce,{image:r(ye),"image-size":300},null,8,["image"])]),default:o(()=>[c.value.includes("id")?(s(),i(g,{key:0,prop:"id","show-overflow-tooltip":"",align:"left",label:"职位ID"},{default:o(({row:e})=>[f("div",Ue,[f("div",Be,S(e.id),1),l(ie,{content:e.id,class:P({rowCopy:"rowCopy",current:e.id===y.value})},null,8,["content","class"])])]),_:1})):v("",!0),c.value.includes("name")?(s(),i(g,{key:1,prop:"name","show-overflow-tooltip":"",align:"left",label:"职位名称"},{default:o(({row:e})=>[f("div",Fe,S(e.name),1)]),_:1})):v("",!0),c.value.includes("count")?(s(),i(g,{key:2,prop:"count","show-overflow-tooltip":"",align:"left",label:"账户数"},{default:o(({row:e})=>[f("div",He,S(e.count?e.count:"-"),1)]),_:1})):v("",!0),c.value.includes("remark")?(s(),i(g,{key:3,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:o(({row:e})=>[f("div",Ae,[f("div",Ie,S(e.remark?e.remark:"-"),1),e.projectType!==2?d((s(),i(re,{key:0,onClick:B=>G(e,"remark"),class:P({edit:"edit",current:e.id===y.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])),[[C,"position_manage-update-updatePosition"]]):v("",!0)])]),_:1})):v("",!0),l(g,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[d((s(),i(b,{size:"small",plain:"",type:"primary",onClick:B=>J(e)},{default:o(()=>[k(" 编辑 ")]),_:2},1032,["onClick"])),[[C,"position_manage-update-updatePosition"]]),d((s(),i(b,{size:"small",plain:"",type:"danger",onClick:B=>W(e)},{default:o(()=>[k(" 删除 ")]),_:2},1032,["onClick"])),[[C,"position_manage-delete-deletePosition"]])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[U,!1]]),l(me,{"current-page":r(p).page,total:r(p).total,"page-size":r(p).size,"page-sizes":r(p).sizes,layout:r(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:R,onSizeChange:Y},null,8,["current-page","total","page-size","page-sizes","layout"]),l(Ne,{onSuccess:u,ref_key:"editRef",ref:z},null,512),l(Re,{ref_key:"QuickEditRef",ref:$,onFetchData:u},null,512)]),_:1})],2)),[[U,h.value]])}}}),ot=Ee(Me,[["__scopeId","data-v-ac29536b"]]);export{ot as default};
