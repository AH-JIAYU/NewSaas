
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as T}from"./index-CijouOqg.js";import"./index-iJRjh0Y-.js";import{a as A}from"./survey_myProjeck-BksVsjO0.js";import{f as E}from"./file-CNaZ4gSj.js";import{D as R}from"./download-C8PHVIy1.js";import{d as q,r as l,a as i,q as H,s as M,o,b as r,f as c,w as _,F as C,t as I,e as N,j as k,g as P,z as Q,N as $,y as V,i as D,aM as G,aH as J,aI as K,L as O}from"./index-imHNa2Ye.js";const W=d=>(J("data-v-3e434dd3"),d=d(),K(),d),X={key:0,class:"demo-image__preview"},Y=W(()=>V("div",{class:"i-f7:doc-text w-1rem h-1rem"},null,-1)),Z={class:"radius flex gap-2 p-2"},ee=q({__name:"index",setup(d,{expose:j}){const u=l(!1),g=l(""),e=l({}),y=l([]),p=l([]),m=l([]),v=l(!1);async function F(a){try{if(u.value=!0,g.value="项目详情",a){v.value=!0;const t=await A.getQuotaProjectInfo({projectId:a.projectId});if(e.value=t.data,e.value.descriptionUrl!==""){const f=e.value.descriptionUrl.split(",");p.value=f;const h=[".jpg",".jpeg",".png",".gif"];f.map(async w=>{const n=await E.detail({fileName:w});h.some(x=>n.data.fileUrl.includes(x))&&m.value.push(n.data.fileUrl),y.value.push(n.data.fileUrl)})}p.value=y.value,v.value=!1}}catch{}finally{v.value=!1}}async function L(a){if(a){const t=decodeURIComponent(a.split("/").pop().split("?")[0]);await R(a,t)}}function b(){g.value="",e.value={},y.value=[],p.value=[],m.value=[],u.value=!1}const z=a=>decodeURIComponent(a.split("/").pop().split("?")[0]);return j({showEdit:F}),(a,t)=>{const f=i("el-image"),h=i("el-link"),w=i("el-col"),n=i("el-row"),x=i("el-empty"),B=i("el-dialog"),S=H("loading");return M((o(),r("div",null,[c(B,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:g.value,draggable:"",width:"50%",onClose:b},{default:_(()=>[e.value.descriptionUrl?(o(),r("div",X,[(o(!0),r(C,null,I(m.value,(s,U)=>(o(),N(f,{key:U,style:{width:"6.25rem",height:"6.25rem","margin-right":"5px"},src:s,"preview-src-list":m.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":U,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),128))])):k("",!0),e.value.descriptionUrl?(o(!0),r(C,{key:1},I(p.value,s=>(o(),r("div",null,[Y,c(h,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:U=>L(s)},{default:_(()=>[P(Q(z(s))+"下载",1)]),_:2},1032,["onClick"])]))),256)):k("",!0),c(n,{gutter:20,class:$({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:_(()=>[c(w,{span:24},{default:_(()=>[V("div",Z,[c(D(T),{value:e.value.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(o(),N(x,{key:2,image:D(G),"image-size":300},null,8,["image"])):k("",!0)]),_:1},8,["modelValue","title"])])),[[S,v.value]])}}}),ne=O(ee,[["__scopeId","data-v-3e434dd3"]]);export{ne as default};
