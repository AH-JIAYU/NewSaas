
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ne,aM as ze,r,n as De,a as s,q as Se,o as c,b as Le,f as t,w as l,g as h,s as de,e as d,i as p,aL as pe,y as u,z as f,N as I,j as _,be as xe,b8 as Ee,b9 as Te,_ as Ue,ap as Ve,aG as Re,aH as $e,L as Be}from"./index-EelVT0AB.js";import{_ as He}from"./index.vue_vue_type_script_setup_true_lang-BhXeN7HZ.js";import{_ as Fe}from"./index-hVQKPDG2.js";import{_ as Ae}from"./index.vue_vue_type_style_index_0_lang-DajTt8PV.js";import{_ as Pe}from"./index-BeVgjXfY.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-8gHrzV02.js";import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-CyvC-Fwg.js";import qe from"./index-9JGYGmKO.js";import{a as Oe}from"./projectManagement_materials-CYjWa6Cs.js";import"./index-Ct57cHvM.js";import"./sortable.esm-C0-Qcoum.js";import"./file-D8UNLYKY.js";import"./download-C8PHVIy1.js";const Qe=E=>(Re("data-v-257a968e"),E=E(),$e(),E),Je={class:"copyId tableSmall"},Ke={class:"id oneLine projectId"},We={class:"tableBig"},Xe={class:"tableBig"},Ye={class:"copyId tableSmall"},Ze={class:"id oneLine projectId"},et={class:"flex-c tableBig"},tt={class:"oneLine",style:{width:"calc(100% - 20px)"}},lt=Qe(()=>u("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),ot={class:"copyId tableSmall"},at={class:"id oneLine projectId"},nt={class:"tableBig"},rt={class:"tableBig"},it={class:"copyId tableSmall"},st={class:"id oneLine projectId"},ut={class:"flex-c tableBig"},ct={class:"oneLine",style:{width:"calc(100% - 20px)"}},dt=Ne({name:"materials",__name:"list",setup(E){const{format:H}=xe(),{getParams:me,pagination:b,onSizeChange:fe,onCurrentChange:_e}=ze(),F=r(""),D=r(!1),y=r(!1),A=r(),P=r(),G=r(),S=r(!1),n=r([]),M=r(),be=r("formSearch-materials"),k=r("default"),j=r(!1),q=r([]),v=r([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),m=r({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),V=r([]),L=r();function he(a){a?L.value=a.projectId:L.value=""}const x=r();function ve(a){a?x.value=a.projectId:x.value=""}function O(a){q.value.length||P.value.showEdit(a)}function Q(a){G.value.showEdit(a)}function J(a){A.value.showEdit(a)}function K(a){q.value=a}function W(a){fe(a).then(()=>g())}function w(a=1){_e(a).then(()=>g())}function X(){Object.assign(m.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),g()}async function g(){try{D.value=!0;const a={...me(),...m.value},o=await Oe.list(a);V.value=o.data.projectMaterialInfoList,b.value.total=o.data.total,D.value=!1}catch{}finally{D.value=!1}}const ge=()=>{m.value.type===1?(n.value=[],v.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g()):(n.value=[],v.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g())};return De(()=>{v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g(),M.value=[{index:1,show:!0,type:"input",modelName:"memberChildId",placeholder:"会员ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"}]}),(a,o)=>{const Ce=Pe,Y=s("ElDivider"),Z=Ae,N=s("el-button"),ee=Ee,te=Te,le=s("el-row"),i=s("el-table-column"),T=Fe,oe=s("el-tag"),ae=s("el-tooltip"),U=Ue,ne=s("ElSpace"),re=s("el-empty"),ie=s("el-table"),se=s("ElPagination"),ue=s("el-tab-pane"),R=s("el-input"),$=s("el-form-item"),B=s("ElButton"),Ie=s("ElFormItem"),ye=s("el-form"),ke=He,je=s("el-tabs"),we=Ve,ce=Se("loading");return c(),Le("div",{class:I({"absolute-container":S.value})},[t(we,null,{default:l(()=>[t(je,{modelValue:m.value.type,"onUpdate:modelValue":o[18]||(o[18]=e=>m.value.type=e),onTabChange:ge},{default:l(()=>[t(ue,{label:"会员素材",name:1},{default:l(()=>[t(Ce,{formSearchList:M.value,formSearchName:be.value,onCurrentChange:w,onOnReset:X,model:m.value},null,8,["formSearchList","formSearchName","model"]),t(Y,{"border-style":"dashed"}),t(le,{gutter:24},{default:l(()=>[t(Z),t(te,null,{default:l(()=>[t(N,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(ee,{border:y.value,"onUpdate:border":o[1]||(o[1]=e=>y.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>S.value=e),checkList:n.value,"onUpdate:checkList":o[3]||(o[3]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[4]||(o[4]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>k.value=e),stripe:j.value,"onUpdate:stripe":o[6]||(o[6]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),de((c(),d(ie,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:V.value,border:y.value,size:k.value,stripe:j.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:he},{empty:l(()=>[t(re,{image:p(pe),"image-size":300},null,8,["image"])]),default:l(()=>[t(i,{align:"left",type:"selection"}),n.value.includes("memberChildId")?(c(),d(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"会员ID"},{default:l(({row:e})=>[u("div",Je,[u("div",Ke,f(e.memberChildId),1),t(T,{content:e.memberChildId,class:I({rowCopy:"rowCopy",current:e.projectId===L.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("memberChildName")?(c(),d(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"会员名称"},{default:l(({row:e})=>[u("div",We,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("projectName")?(c(),d(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[u("div",Xe,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(c(),d(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[u("div",Ye,[u("div",Ze,f(e.projectId),1),t(T,{content:e.projectId,class:I({rowCopy:"rowCopy",current:e.projectId===L.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("createTime")?(c(),d(i,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(ae,{content:e.createTime,placement:"top"},{default:l(()=>[t(oe,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(H)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):_("",!0),n.value.includes("instructions")?(c(),d(i,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[u("div",et,[u("div",tt,f(e.instructions?e.instructions:"-"),1),t(U,{onClick:C=>Q(e),class:I({edit:"edit",current:e.projectId===L.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ne,null,{default:l(()=>[t(N,{type:"primary",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"]),t(N,{type:"danger",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ce,D.value]]),t(se,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(ue,{label:"子会员素材",name:2},{default:l(()=>[t(ke,{"show-toggle":!1},{default:l(({fold:e,toggle:C})=>[t(ye,{model:m.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t($,{label:""},{default:l(()=>[t(R,{modelValue:m.value.memberChildId,"onUpdate:modelValue":o[7]||(o[7]=z=>m.value.memberChildId=z),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),t($,{label:""},{default:l(()=>[t(R,{modelValue:m.value.projectId,"onUpdate:modelValue":o[8]||(o[8]=z=>m.value.projectId=z),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t($,{label:""},{default:l(()=>[t(R,{modelValue:m.value.projectName,"onUpdate:modelValue":o[9]||(o[9]=z=>m.value.projectName=z),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),t(Ie,null,{default:l(()=>[t(B,{type:"primary",onClick:o[10]||(o[10]=z=>w())},{icon:l(()=>[t(U,{name:"i-ep:search"})]),default:l(()=>[h(" 筛选 ")]),_:1}),t(B,{onClick:X},{icon:l(()=>[lt]),default:l(()=>[h(" 重置 ")]),_:1}),t(B,{link:"",onClick:C,disabled:""},{icon:l(()=>[t(U,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[h(" "+f(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(Y,{"border-style":"dashed"}),t(le,{gutter:24},{default:l(()=>[t(Z),t(te,null,{default:l(()=>[t(N,{size:"default",onClick:o[11]||(o[11]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(ee,{border:y.value,"onUpdate:border":o[12]||(o[12]=e=>y.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[13]||(o[13]=e=>S.value=e),checkList:n.value,"onUpdate:checkList":o[14]||(o[14]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[15]||(o[15]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[16]||(o[16]=e=>k.value=e),stripe:j.value,"onUpdate:stripe":o[17]||(o[17]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),de((c(),d(ie,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:V.value,border:y.value,size:k.value,stripe:j.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:ve},{empty:l(()=>[t(re,{image:p(pe),"image-size":300},null,8,["image"])]),default:l(()=>[t(i,{type:"selection"}),n.value.includes("memberChildId")?(c(),d(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"子会员ID"},{default:l(({row:e})=>[u("div",ot,[u("div",at,f(e.memberChildId),1),t(T,{content:e.memberChildId,class:I({rowCopy:"rowCopy",current:e.projectId===x.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("memberChildName")?(c(),d(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"子会员名称"},{default:l(({row:e})=>[u("div",nt,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("projectName")?(c(),d(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[u("div",rt,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(c(),d(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[u("div",it,[u("div",st,f(e.projectId),1),t(T,{content:e.projectId,class:I({rowCopy:"rowCopy",current:e.projectId===x.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("customerIdentification")?(c(),d(i,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"left",label:"客户简称/标识"})):_("",!0),n.value.includes("createTime")?(c(),d(i,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(ae,{content:e.createTime,placement:"top"},{default:l(()=>[t(oe,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(H)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):_("",!0),n.value.includes("instructions")?(c(),d(i,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[u("div",ut,[u("div",ct,f(e.instructions?e.instructions:"-"),1),t(U,{onClick:C=>Q(e),class:I({edit:"edit",current:e.projectId===x.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ne,null,{default:l(()=>[t(N,{type:"primary",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"]),t(N,{type:"danger",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ce,D.value]]),t(se,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(Ge,{ref_key:"deleteRef",ref:A},null,512),t(Me,{ref_key:"detailsRef",ref:P,onFetchData:g},null,512),t(qe,{ref_key:"editsRef",ref:G,onFetchData:g},null,512)]),_:1})],2)}}}),wt=Be(dt,[["__scopeId","data-v-257a968e"]]);export{wt as default};
