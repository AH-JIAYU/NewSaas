
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as be,d as fe,aO as _e,r as f,a5 as ge,l as ve,b as i,q as ke,o as d,e as x,g as t,w as a,j as l,az as w,F as Ie,v as ye,s as N,h as p,H as k,I as y,f as m,aN as he,k as _,S as Ce,bd as we,N as Se,aQ as Ue,aR as Ve,ap as je,aI as De,aJ as ze,t as F,aq as $,R as Ne}from"./index-ClxkxBuo.js";import{_ as Te}from"./index.vue_vue_type_style_index_0_lang-xYOpFn_y.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-B4398pD_.js";const Le={list:I=>be.post("callback/getCustomerCallbackRecordList",I)},Q=I=>(De("data-v-69cd767b"),I=I(),ze(),I),Re=Q(()=>F("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=Q(()=>F("br",null,null,-1)),xe=fe({name:"callback",__name:"index",setup(I){const{pagination:g,getParams:B,onSizeChange:H,onCurrentChange:M}=_e(),{format:P}=we(),S=f(!1),L=f([]),K=f(""),u=f([]),U=f(!0),V=f(!1),j=f("default"),D=f(!1),z=f([{prop:"projectQuestionnaireClickId",label:"点击ID",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID/会员ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调URL",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级URL",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0}]),R=[{label:"内部",value:1},{label:"外部",value:2}],r=ge({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""});function q(s){H(s).then(()=>h())}function b(s=1){M(s).then(()=>h())}function A(){g.value.page=1,h()}async function h(){try{S.value=!0;const s={...B(),...r};r.time&&r.time.length&&(s.beginTime=r.time[0]||"",s.endTime=r.time[1]||"");const e=await Le.list(s);L.value=e.data.customerCallbackRecordInfoList,g.value.total=e.data.total,S.value=!1}catch{}finally{S.value=!1}}function O(){Object.assign(r,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""}),h()}function J(s){K.value=s}return ve(async()=>{z.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),h()}),(s,e)=>{const C=i("el-input"),v=i("el-form-item"),G=i("el-option"),W=i("el-select"),X=i("el-date-picker"),E=Se,T=i("ElButton"),Y=i("ElFormItem"),Z=i("ElForm"),ee=$e,le=i("ElDivider"),te=Te,oe=i("el-button"),ae=Ue,ne=Ve,re=i("el-row"),c=i("el-table-column"),ie=i("el-tag"),se=i("el-empty"),ue=i("el-table"),de=i("ElPagination"),ce=je,pe=ke("loading");return d(),x("div",{class:Ce({"absolute-container":l(D)})},[t(ce,null,{default:a(()=>[t(ee,{"show-toggle":!1},{default:a(({fold:o,toggle:me})=>[t(Z,{model:l(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(v,{label:""},{default:a(()=>[t(C,{modelValue:l(r).tenantSupplierId,"onUpdate:modelValue":e[0]||(e[0]=n=>l(r).tenantSupplierId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:e[1]||(e[1]=w(n=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(C,{modelValue:l(r).projectId,"onUpdate:modelValue":e[2]||(e[2]=n=>l(r).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:e[3]||(e[3]=w(n=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(C,{modelValue:l(r).projectQuestionnaireClickId,"onUpdate:modelValue":e[4]||(e[4]=n=>l(r).projectQuestionnaireClickId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"点击ID",onKeydown:e[5]||(e[5]=w(n=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(W,{modelValue:l(r).surveySource,"onUpdate:modelValue":e[6]||(e[6]=n=>l(r).surveySource=n),"value-key":"",placeholder:"会员类型",clearable:"",filterable:"",onChange:e[7]||(e[7]=n=>b())},{default:a(()=>[(d(),x(Ie,null,ye(R,n=>t(G,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),N(t(v,{label:""},{default:a(()=>[t(C,{modelValue:l(r).projectName,"onUpdate:modelValue":e[8]||(e[8]=n=>l(r).projectName=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:e[9]||(e[9]=w(n=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[$,!o]]),N(t(v,{label:""},{default:a(()=>[t(C,{modelValue:l(r).memberChildId,"onUpdate:modelValue":e[10]||(e[10]=n=>l(r).memberChildId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID/会员ID",onKeydown:e[11]||(e[11]=w(n=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[$,!o]]),N(t(v,{label:""},{default:a(()=>[t(X,{modelValue:l(r).time,"onUpdate:modelValue":e[12]||(e[12]=n=>l(r).time=n),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true",onChange:e[13]||(e[13]=n=>b())},null,8,["modelValue"])]),_:2},1536),[[$,!o]]),t(Y,null,{default:a(()=>[t(T,{type:"primary",onClick:e[14]||(e[14]=n=>b())},{icon:a(()=>[t(E,{name:"i-ep:search"})]),default:a(()=>[p(" 筛选 ")]),_:1}),t(T,{onClick:O},{icon:a(()=>[Re]),default:a(()=>[p(" 重置 ")]),_:1}),t(T,{link:"",onClick:me},{icon:a(()=>[t(E,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[p(" "+k(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(le,{"border-style":"dashed"}),t(re,null,{default:a(()=>[t(te),t(ne,null,{default:a(()=>[t(oe,{size:"default"},{default:a(()=>[p(" 导出 ")]),_:1}),t(ae,{border:l(U),"onUpdate:border":e[15]||(e[15]=o=>y(U)?U.value=o:null),tableAutoHeight:l(D),"onUpdate:tableAutoHeight":e[16]||(e[16]=o=>y(D)?D.value=o:null),checkList:l(u),"onUpdate:checkList":e[17]||(e[17]=o=>y(u)?u.value=o:null),columns:l(z),"onUpdate:columns":e[18]||(e[18]=o=>y(z)?z.value=o:null),"line-height":l(j),"onUpdate:lineHeight":e[19]||(e[19]=o=>y(j)?j.value=o:null),stripe:l(V),"onUpdate:stripe":e[20]||(e[20]=o=>y(V)?V.value=o:null),style:{"margin-left":"12px"},onQueryData:A},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),N((d(),m(ue,{border:l(U),data:l(L),size:l(j),stripe:l(V),onSelectionChange:J},{empty:a(()=>[t(se,{image:l(he),"image-size":300},null,8,["image"])]),default:a(()=>[t(c,{align:"center",type:"selection"}),l(u).includes("projectQuestionnaireClickId")?(d(),m(c,{key:0,align:"center",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:"点击ID"},{default:a(({row:o})=>[p(k(o.projectQuestionnaireClickId?o.projectQuestionnaireClickId:"-"),1)]),_:1})):_("",!0),l(u).includes("customerShortName")?(d(),m(c,{key:1,align:"center",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型",width:"100"},{default:a(({row:o})=>[p(k(R[o.surveySource-1].label),1)]),_:1})):_("",!0),l(u).includes("customerShortName")?(d(),m(c,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):_("",!0),l(u).includes("memberChildId")?(d(),m(c,{key:3,align:"center","show-overflow-tooltip":"",label:"子会员ID/会员ID"},{default:a(({row:o})=>[p(k(o.memberChildId)+" ",1),Ee,p(" "+k(o.randomIdentityId),1)]),_:1})):_("",!0),l(u).includes("projectId")?(d(),m(c,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):_("",!0),l(u).includes("projectName")?(d(),m(c,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):_("",!0),l(u).includes("callbackUrl")?(d(),m(c,{key:6,align:"center",prop:"callbackUrl",label:"回调URL"})):_("",!0),l(u).includes("subordinateUrl")?(d(),m(c,{key:7,align:"center",prop:"subordinateUrl",label:"下级URL"},{default:a(({row:o})=>[p(k(o.subordinateUrl?o.subordinateUrl:"-"),1)]),_:1})):_("",!0),l(u).includes("callbackTime")?(d(),m(c,{key:8,align:"center",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"},{default:a(({row:o})=>[t(ie,{effect:"plain",type:"info"},{default:a(()=>[p(k(l(P)(o.callbackTime)),1)]),_:2},1024)]),_:1})):_("",!0)]),_:1},8,["border","data","size","stripe"])),[[pe,l(S)]]),t(de,{"current-page":l(g).page,total:l(g).total,"page-size":l(g).size,"page-sizes":l(g).sizes,layout:l(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=Ne(xe,[["__scopeId","data-v-69cd767b"]]);export{He as default};
