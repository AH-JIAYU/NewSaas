
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as W,r as v,c as X,D as Y,a as d,o as p,b as w,f as e,w as a,i as t,b3 as Z,b4 as j,b5 as D,g as o,F as c,G as n,P as N,e as C,a3 as V,a4 as R,j as ee,l as ae,ak as S,aG as te,aH as le,_ as se}from"./index-BO_elwP_.js";import{g as oe,v as ne,a as ie}from"./index-CyLh5ZM2.js";import{f as re}from"./file-umdSQNZF.js";import{o as ce}from"./apiLoading-3YOeM8H8.js";import{a as de}from"./projectManagement-CjGax7QK.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-DvuEqg5B.js";import{u as fe}from"./otherFunctions_basicDictionary-DnDLVvDa.js";import"./basicDictionary-B1PzvGA-.js";const k=I=>(te("data-v-0a102d75"),I=I(),le(),I),me={class:"card-header"},_e={class:"m-4",style:{width:"60px !important",height:"20px !important",background:"var(--el-color-primary)",color:"var(--el-color-white)",padding:"0 8px","font-size":"0.875rem","border-radius":"3.125rem"}},pe={class:"status"},be=k(()=>c("div",{class:"card-header"},[c("span",null,"其他设置")],-1)),xe=k(()=>c("div",{class:"card-header"},[c("span",null,"配置信息")],-1)),ye=k(()=>c("div",{class:"card-header"},[c("span",null,"安全信息")],-1)),ge=k(()=>c("div",{class:"card-header"},[c("span",null,"描述及配额")],-1)),he={class:"demo-image__preview"},ve={class:"radius p-2 flex gap-2"},we=k(()=>c("div",{class:"card-header"},[c("span",null,"操作日志")],-1)),ke=W({name:"ProjectDetails",__name:"index",setup(I,{expose:T}){const B=fe();v("# Fantastic-admin");const O=v(),L=v(1),l=v({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});oe({locale:ie});const E=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function F(u){O.value.showEdit(u)}const y=v(!1);async function z(u){l.value.isOnline=u.isOnline,l.value.allocationStatus=u.allocationStatus;const f=await ce(de.detail({projectId:u.projectId}));l.value.form=f.data;const s=await re.detail({fileName:l.value.form.descriptionUrl});l.value.imgUrl=s.data.fileUrl,l.value.srcList=[s.data.fileUrl],y.value=!0}const U=X(()=>u=>l.value.countryList.filter(s=>u.includes(s.id)).map(s=>s.chineseName));async function M(u){try{await navigator.clipboard.writeText(u),S.success({message:"已复制文本",center:!0})}catch{S.warning({message:"复制失败,请重试",center:!0})}}async function Q(){const f=await(await fetch(l.value.imgUrl)).blob(),s=URL.createObjectURL(f),m=document.createElement("a");m.href=s,document.body.appendChild(m),m.download=l.value.form.descriptionUrl,m.click(),document.body.removeChild(m),URL.revokeObjectURL(s)}function P(){y.value=!1}return Y(async()=>{l.value.countryList=await B.getCountry()}),T({showEdit:z}),(u,f)=>{const s=d("el-col"),m=d("el-step"),G=d("el-steps"),b=d("el-row"),i=d("el-text"),r=d("el-form-item"),H=d("el-link"),$=d("el-tooltip"),g=d("el-button"),x=d("el-card"),A=d("el-image"),h=d("el-table-column"),q=d("el-table"),J=d("ElForm"),K=d("el-drawer");return p(),w("div",null,[e(K,{modelValue:t(y),"onUpdate:modelValue":f[1]||(f[1]=_=>ae(y)?y.value=_:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},{header:a(()=>[e(b,{gutter:20},{default:a(()=>[e(s,{span:2}),e(s,{span:20},{default:a(()=>[e(G,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:t(L)},{default:a(()=>[e(m,{title:"已开始",description:"2021-09-09 11:11:11",icon:t(Z)},null,8,["icon"]),e(m,{title:"已确认",description:"2021-09-09 11:11:11",icon:t(L)>=2?t(j):t(D)},null,8,["icon"]),e(m,{title:"已开票",description:"2021-09-09 11:11:11",icon:t(L)>=3?t(j):t(D)},null,8,["icon"]),e(m,{title:"已完结",description:"2021-09-09 11:11:11",icon:t(L)>=4?t(j):t(D)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(s,{span:2})]),_:1})]),footer:a(()=>[e(g,{onClick:P},{default:a(()=>[o(" 取消 ")]),_:1}),e(g,{type:"primary",onClick:P},{default:a(()=>[o(" 确定 ")]),_:1})]),default:a(()=>[e(J,{"label-width":"6.25rem"},{default:a(()=>[e(x,{class:"box-card"},{header:a(()=>[c("div",me,[c("div",null,[o(" 基本信息 "),c("span",_e,n(t(l).allocationStatus===1?"未分配":"已分配"),1)]),c("div",pe,[c("div",{class:N(t(l).isOnline===1?"isOnlineTrue":"isOnlineFalse")},n(t(l).isOnline===1?"在线":"离线"),3)])])]),default:a(()=>[e(b,{gutter:10},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(r,{label:"项目ID :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.projectId?t(l).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"项目名称 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.name?t(l).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"项目标识 :",prop:"client_pid"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.projectIdentification?t(l).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"所属客户 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.clientId?t(l).form.clientId:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"所属国家 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[t(U)(t(l).form.countryIdList).length>4?(p(),C($,{key:0,class:"box-item",effect:"dark",content:t(U)(t(l).form.countryIdList).join(","),placement:"top"},{default:a(()=>[e(H,{type:"primary"},{default:a(()=>[o(n(t(U)(t(l).form.countryIdList).length),1)]),_:1})]),_:1},8,["content"])):(p(!0),w(V,{key:1},R(t(U)(t(l).form.countryIdList),_=>(p(),w("span",{key:_},n(_)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"原价 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.doMoneyPrice?t(l).form.doMoneyPrice:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"配额 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.num?t(l).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"最小时长 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.minimumDuration?t(l).form.minimumDuration:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"IR :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ir?t(l).form.ir:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"URL :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.uidUrl?t(l).form.uidUrl:"-"),1)]),_:1}),e(g,{type:"primary",style:{"margin-left":"auto"},onClick:f[0]||(f[0]=_=>M(t(l).form.uidUrl)),link:""},{default:a(()=>[o(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[be]),default:a(()=>[e(b,{gutter:10},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(r,{label:"置顶 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"在线 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"资料 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"B2B :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"定时发布 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"备注 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).formNaNpxark?t(l).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[xe]),default:a(()=>[e(b,{class:N({isNone:!t(l).form.projectQuotaInfoList.length}),gutter:10},{default:a(()=>[(p(!0),w(V,null,R(t(l).form.projectQuotaInfoList,_=>(p(),C(s,{span:8},{default:a(()=>[e(r,{label:_.keyValue},{default:a(()=>[_.answerValueList&&_.answerValueList[0]!=="null"?(p(),C(i,{key:0,class:"mx-1"},{default:a(()=>[o(n(_.answerValueList.join(", ")),1)]),_:2},1024)):(p(),C(i,{key:1,class:"mx-1"},{default:a(()=>[o(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1024))),256))]),_:1},8,["class"])]),_:1}),e(x,{class:"box-card"},{header:a(()=>[ye]),default:a(()=>[e(b,{gutter:20},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(r,{label:"小时准入量 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.preNum?t(l).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"小时完成量 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.limitedQuantity?t(l).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"时差检测 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.timeDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"重复IP检测 :"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ipDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(r,{label:"IP一致性检测:"},{default:a(()=>[e(i,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[ge]),default:a(()=>[t(l).form.descriptionUrl?(p(),w(V,{key:0},[c("div",he,[e(A,{style:{width:"6.25rem",height:"6.25rem"},src:t(l).imgUrl,"preview-src-list":t(l).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),e(g,{style:{padding:"0"},type:"primary",text:"",onClick:Q},{default:a(()=>[o(n(t(l).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):ee("",!0),e(b,{class:N({isNone:!t(l).form.descriptionUrl}),gutter:20},{default:a(()=>[e(s,{span:24},{default:a(()=>[c("div",ve,[e(t(ne),{value:t(l).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1}),e(x,{class:"box-card"},{header:a(()=>[we]),default:a(()=>[e(q,{data:E,border:"",style:{width:"100%"}},{default:a(()=>[e(h,{align:"center",type:"index",width:"80",label:"序号"}),e(h,{align:"center",prop:"a",label:"操作时间"}),e(h,{align:"center",prop:"b",label:"操作人"}),e(h,{align:"center",prop:"c",label:"操作事项"}),e(h,{align:"center",prop:"d",label:"详情"},{default:a(()=>[e(g,{text:"",type:"primary",size:"default",onClick:F},{default:a(()=>[o(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ue,{ref_key:"logDetailsRef",ref:O},null,512)])}}}),Oe=se(ke,[["__scopeId","data-v-0a102d75"]]);export{Oe as default};
