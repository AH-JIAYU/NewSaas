
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./department-Aa6xSBJC.js";import{d as C,r as _,b as o,o as m,e as E,j as a,f as b,w as l,g as n,h as g,k as v,E as R,R as B}from"./index-CxQzir39.js";const N=C({name:"RoleQuicEdit",__name:"index",emits:["fetch-data"],setup(Q,{expose:y,emit:V}){const k=V,u=_(),e=_({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{}}),w={remark:"备注"};async function x(i,t){e.value.title=w[t],e.value.type=t;try{e.value.loading=!0;const s={id:i.id},r=await p.detail(s);e.value.formData=r.data,e.value.dialogTableVisible=!0,e.value.loading=!1}catch{}finally{e.value.loading=!1}}async function h(){e.value.loading=!0,u.value.validate(async i=>{if(i){const{status:t}=await p.edit(e.value.formData);t===1&&R.success({message:"编辑成功",center:!0}),k("fetch-data"),f()}e.value.loading=!1})}function f(){e.value.dialogTableVisible=!1,e.value.formData={}}return y({showEdit:x}),(i,t)=>{const s=o("el-input"),r=o("el-form-item"),D=o("el-form"),c=o("el-button"),T=o("el-dialog");return m(),E("div",null,[a(e).dialogTableVisible?(m(),b(T,{key:0,modelValue:a(e).dialogTableVisible,"onUpdate:modelValue":t[1]||(t[1]=d=>a(e).dialogTableVisible=d),title:a(e).title+"编辑",draggable:""},{footer:l(()=>[n(c,{onClick:f,disabled:a(e).loading},{default:l(()=>[g(" 取消 ")]),_:1},8,["disabled"]),n(c,{type:"primary",onClick:h,disabled:a(e).loading},{default:l(()=>[g(" 确定 ")]),_:1},8,["disabled"])]),default:l(()=>[n(D,{ref_key:"formRef",ref:u,model:a(e).formData,rules:a(e).rules,"label-width":"100","label-position":"right"},{default:l(()=>[a(e).type==="remark"?(m(),b(r,{key:0,label:"备注"},{default:l(()=>[n(s,{maxlength:"200","show-word-limit":"",style:{width:"100%"},type:"textarea",rows:5,modelValue:a(e).formData.remark,"onUpdate:modelValue":t[0]||(t[0]=d=>a(e).formData.remark=d)},null,8,["modelValue"])]),_:1})):v("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):v("",!0)])}}}),H=B(N,[["__scopeId","data-v-691eb889"]]);export{H as default};
