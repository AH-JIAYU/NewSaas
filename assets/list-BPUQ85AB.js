
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as be,aN as ge,r as g,a5 as ye,l as he,b as u,q as ke,o as i,e as F,g as e,w as l,az as se,F as ie,v as re,f as d,j as m,h as o,H as c,s as ue,t as b,k as v,S as Ie,N as we,aP as je,aQ as Ce,ap as Se,aI as Ne,aJ as Le,R as ze}from"./index-Ch_t1wnJ.js";import{_ as Ve}from"./index-ehTuwwyN.js";import{_ as De}from"./index.vue_vue_type_style_index_0_lang-tj1dU9Fq.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-WglbtpEF.js";import{u as xe,o as $e,a as pe}from"./index-CKjkTCL6.js";import"./index-BHChwjQY.js";const de=D=>(Ne("data-v-bf17f245"),D=D(),Le(),D),Ee=de(()=>b("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),He={class:"copyId"},Ae={class:"id oneLine"},Pe={class:"copyId"},Fe={class:"id oneLine"},Re=de(()=>b("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Be={class:"copyId"},Me={class:"id oneLine"},Qe={class:"copyId"},Ke={class:"id oneLine"},Oe=be({name:"outsource",__name:"list",setup(D){const U=xe(),{pagination:_,getParams:ce,onSizeChange:me,onCurrentChange:fe}=ge(),R=g(""),N=g(!0),k=g(!0),B=g(),L=g(!1),r=g([]),I=g("default"),w=g(!1),z=g([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),n=ye({tenantId:"",tenantName:"",projectStatus:"",type:2}),x=g([]);function M(f){B.value.showEdit(f,n.type===2?1:0)}function Q(f){me(f).then(()=>j())}function y(f=1){fe(f).then(()=>j())}function K(){Object.assign(n,{tenantId:"",tenantName:"",projectStatus:"",type:2}),j()}async function j(){try{N.value=!0;const f={...ce(),...n};if(n.type===1){const a=await pe.list(f);x.value=a.data.projectAllocationInfoList,_.value.total=a.data.total}else{const a=await pe.meList(f);x.value=a.data.projectMeAllocationInfoList,_.value.total=a.data.total}N.value=!1}catch{}finally{N.value=!1}}return he(()=>{z.value.forEach(f=>{f.checked&&r.value.push(f.prop)}),j()}),(f,a)=>{const $=u("el-input"),C=u("el-form-item"),O=u("el-option"),T=u("el-select"),E=we,S=u("ElButton"),q=u("ElFormItem"),J=u("el-form"),G=Ue,W=u("ElDivider"),X=De,H=u("el-button"),Y=je,Z=Ce,ee=u("el-row"),p=u("el-table-column"),A=Ve,h=u("el-text"),te=u("el-empty"),le=u("el-table"),ae=u("ElPagination"),oe=u("el-tab-pane"),_e=u("el-tabs"),ve=Se,ne=ke("loading");return i(),F("div",{class:Ie({"absolute-container":L.value})},[e(ve,null,{default:l(()=>[e(_e,{modelValue:n.type,"onUpdate:modelValue":a[25]||(a[25]=t=>n.type=t),onTabChange:j},{default:l(()=>[e(oe,{label:"外包项目",name:2},{default:l(()=>[e(G,{"show-toggle":!1},{default:l(({fold:t,toggle:V})=>[e(J,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(C,{label:""},{default:l(()=>[e($,{modelValue:n.tenantId,"onUpdate:modelValue":a[0]||(a[0]=s=>n.tenantId=s),clearable:"",placeholder:"租户id",onKeydown:a[1]||(a[1]=se(s=>y(),["enter"]))},null,8,["modelValue"])]),_:1}),e(C,{label:""},{default:l(()=>[e($,{modelValue:n.tenantName,"onUpdate:modelValue":a[2]||(a[2]=s=>n.tenantName=s),clearable:"",placeholder:"租户名称",onKeydown:a[3]||(a[3]=se(s=>y(),["enter"]))},null,8,["modelValue"])]),_:1}),e(C,{label:""},{default:l(()=>[e(T,{modelValue:n.projectStatus,"onUpdate:modelValue":a[4]||(a[4]=s=>n.projectStatus=s),clearable:"",placeholder:"项目状态",onChange:a[5]||(a[5]=s=>y())},{default:l(()=>[(i(!0),F(ie,null,re(m(U).projectStatusList,(s,P)=>(i(),d(O,{label:s,value:P+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(q,null,{default:l(()=>[e(S,{type:"primary",onClick:a[6]||(a[6]=s=>y())},{icon:l(()=>[e(E,{name:"i-ep:search"})]),default:l(()=>[o(" 筛选 ")]),_:1}),e(S,{onClick:K},{icon:l(()=>[Ee]),default:l(()=>[o(" 重置 ")]),_:1}),e(S,{disabled:"",link:"",onClick:V},{icon:l(()=>[e(E,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[o(" "+c(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(W,{"border-style":"dashed"}),e(ee,{gutter:24},{default:l(()=>[e(X),e(Z,null,{default:l(()=>[e(H,{size:"default",onClick:a[7]||(a[7]=()=>{})},{default:l(()=>[o(" 导出 ")]),_:1}),e(Y,{border:k.value,"onUpdate:border":a[8]||(a[8]=t=>k.value=t),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":a[9]||(a[9]=t=>L.value=t),checkList:r.value,"onUpdate:checkList":a[10]||(a[10]=t=>r.value=t),columns:z.value,"onUpdate:columns":a[11]||(a[11]=t=>z.value=t),"line-height":I.value,"onUpdate:lineHeight":a[12]||(a[12]=t=>I.value=t),stripe:w.value,"onUpdate:stripe":a[13]||(a[13]=t=>w.value=t),style:{"margin-left":"12px"},onQueryData:y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ue((i(),d(le,{ref_key:"tableSortRef",ref:R,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:k.value,size:I.value,stripe:w.value},{empty:l(()=>[e(te,{description:"暂无数据"})]),default:l(()=>[e(p,{align:"center",type:"selection"}),r.value.includes("projectStatus")?(i(),d(p,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:l(({row:t})=>[b("span",null,c(m(U).projectStatusList[t.projectStatus-1]),1)]),_:1})):v("",!0),r.value.includes("tenantName")?(i(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):v("",!0),r.value.includes("tenantId")?(i(),d(p,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"},{default:l(({row:t})=>[b("div",He,[b("div",Ae,"ID: "+c(t.tenantId),1),e(A,{class:"copy",content:t.tenantId},null,8,["content"])])]),_:1})):v("",!0),r.value.includes("projectName")?(i(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):v("",!0),r.value.includes("projectId")?(i(),d(p,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"},{default:l(({row:t})=>[b("div",Pe,[b("div",Fe,"ID: "+c(t.projectId),1),e(A,{class:"copy",content:t.projectId},null,8,["content"])])]),_:1})):v("",!0),r.value.includes("participationNumber")?(i(),d(p,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参数",width:"300"},{default:l(({row:t})=>[e(h,{class:"oneLine",type:"danger"},{default:l(()=>[o("参与: "+c(t.participationNumber||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"success"},{default:l(()=>[o("完成: "+c(t.doneNumber||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"warning"},{default:l(()=>[o("配额: "+c(t.num||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"info"},{default:l(()=>[o("限量: "+c(t.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):v("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:l(({row:t})=>[e(H,{type:"primary",plain:"",size:"small",onClick:V=>M(t)},{default:l(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ne,N.value]]),e(ae,{"current-page":m(_).page,total:m(_).total,"page-size":m(_).size,"page-sizes":m(_).sizes,layout:m(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(oe,{label:"接收项目",name:1},{default:l(()=>[e(G,{"show-toggle":!1},{default:l(({fold:t,toggle:V})=>[e(J,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(C,{label:""},{default:l(()=>[e($,{modelValue:n.tenantId,"onUpdate:modelValue":a[14]||(a[14]=s=>n.tenantId=s),clearable:"",placeholder:"租户ID"},null,8,["modelValue"])]),_:1}),e(C,{label:""},{default:l(()=>[e($,{modelValue:n.tenantName,"onUpdate:modelValue":a[15]||(a[15]=s=>n.tenantName=s),clearable:"",placeholder:"租户名称"},null,8,["modelValue"])]),_:1}),e(C,{label:""},{default:l(()=>[e(T,{modelValue:n.projectStatus,"onUpdate:modelValue":a[16]||(a[16]=s=>n.projectStatus=s),clearable:"",placeholder:"项目状态"},{default:l(()=>[(i(!0),F(ie,null,re(m(U).projectStatusList,(s,P)=>(i(),d(O,{label:s,value:P+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(q,null,{default:l(()=>[e(S,{type:"primary",onClick:a[17]||(a[17]=s=>y())},{icon:l(()=>[e(E,{name:"i-ep:search"})]),default:l(()=>[o(" 筛选 ")]),_:1}),e(S,{onClick:K},{icon:l(()=>[Re]),default:l(()=>[o(" 重置 ")]),_:1}),e(S,{disabled:"",link:"",onClick:V},{icon:l(()=>[e(E,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[o(" "+c(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(W,{"border-style":"dashed"}),e(ee,{gutter:24},{default:l(()=>[e(X),e(Z,null,{default:l(()=>[e(H,{size:"default",onClick:a[18]||(a[18]=()=>{})},{default:l(()=>[o(" 导出 ")]),_:1}),e(Y,{border:k.value,"onUpdate:border":a[19]||(a[19]=t=>k.value=t),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":a[20]||(a[20]=t=>L.value=t),checkList:r.value,"onUpdate:checkList":a[21]||(a[21]=t=>r.value=t),columns:z.value,"onUpdate:columns":a[22]||(a[22]=t=>z.value=t),"line-height":I.value,"onUpdate:lineHeight":a[23]||(a[23]=t=>I.value=t),stripe:w.value,"onUpdate:stripe":a[24]||(a[24]=t=>w.value=t),style:{"margin-left":"12px"},onQueryData:y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ue((i(),d(le,{ref_key:"tableSortRef",ref:R,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:k.value,size:I.value,stripe:w.value},{empty:l(()=>[e(te,{description:"暂无数据"})]),default:l(()=>[e(p,{align:"center",type:"selection"}),r.value.includes("projectStatus")?(i(),d(p,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:l(({row:t})=>[b("span",null,c(m(U).projectStatusList[t.projectStatus-1]),1)]),_:1})):v("",!0),r.value.includes("tenantName")?(i(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):v("",!0),r.value.includes("tenantId")?(i(),d(p,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"},{default:l(({row:t})=>[b("div",Be,[b("div",Me,"ID: "+c(t.tenantId),1),e(A,{class:"copy",content:t.tenantId},null,8,["content"])])]),_:1})):v("",!0),r.value.includes("projectName")?(i(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):v("",!0),r.value.includes("projectId")?(i(),d(p,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"},{default:l(({row:t})=>[b("div",Qe,[b("div",Ke,"ID: "+c(t.projectId),1),e(A,{class:"copy",content:t.projectId},null,8,["content"])])]),_:1})):v("",!0),r.value.includes("participationNumber")?(i(),d(p,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参数",width:"300"},{default:l(({row:t})=>[e(h,{class:"oneLine",type:"danger"},{default:l(()=>[o("参与: "+c(t.participationNumber||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"success"},{default:l(()=>[o("完成: "+c(t.doneNumber||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"warning"},{default:l(()=>[o("配额: "+c(t.num||0),1)]),_:2},1024),o("   "),e(h,{class:"oneLine",type:"info"},{default:l(()=>[o("限量: "+c(t.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):v("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:l(({row:t})=>[e(H,{type:"primary",plain:"",size:"small",onClick:V=>M(t)},{default:l(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ne,N.value]]),e(ae,{"current-page":m(_).page,total:m(_).total,"page-size":m(_).size,"page-sizes":m(_).sizes,layout:m(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),e($e,{ref_key:"editRef",ref:B,onFetchData:j},null,512)]),_:1})],2)}}}),Ye=ze(Oe,[["__scopeId","data-v-bf17f245"]]);export{Ye as default};
