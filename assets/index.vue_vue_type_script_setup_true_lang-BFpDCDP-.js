
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-DlTEMQ7B.js";import{u as k}from"./survey_vip-ChNp3SRp.js";import{d as I,r as s,a2 as w,X as z,a as v,o as m,b as f,f as p,w as c,g as C,F as N,t as B,e as D,y as L,z as R,N as j}from"./index-CBnd12V0.js";const M=I({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(_,{expose:T,emit:g}){const h=k(),n=_,y=g;s();const e=s(n.leftTabsData),S=s(n.validateTopTabs);e.value.forEach((l,a)=>{const i=s(null);w(`formRef${a}`,i)});const b=s(0),t=s(0);function V(){t.value=++b.value,e.value.push({...h.initialTopTabsData});const l=e.value[0].organizationalStructureId;e.value.forEach(a=>{a.hasOwnProperty("organizationalStructureId")||(a.organizationalStructureId=l)})}function x(l){e.value.splice(l,1),S.value.splice(l,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),b.value=Math.max(0,e.value.length-1))}return z(()=>t.value,(l,a)=>{n.validateAll.reduce((u,d,o)=>(d==="rejected"&&u.push(o),u),[]).includes(a)&&y("validate")}),T({activeLeftTab:t}),(l,a)=>{const i=v("el-button"),u=v("el-tab-pane"),d=v("el-tabs");return m(),f("div",null,[p(i,{class:"button",disabled:e.value.length>29||n.title!=="新增",onClick:a[0]||(a[0]=o=>V())},{default:c(()=>[C(" 新增会员 ")]),_:1},8,["disabled"]),p(d,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value=o),"tab-position":"left",onTabRemove:x},{default:c(()=>[(m(!0),f(N,null,B(e.value,(o,r)=>(m(),D(u,{key:r,closable:e.value.length!==1,name:r},{label:c(()=>[L("div",{class:j(n.validateAll[r]&&n.validateAll[r]==="rejected"?"validateRejected":"")},R(o.memberNickname||"会员名称"),3)]),default:c(()=>[p(A,{"left-tab":o,"tab-index":r},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128))]),_:1},8,["modelValue"])])}}});export{M as _};
