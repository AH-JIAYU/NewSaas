
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as de,d as pe,aN as me,r as m,a3 as be,l as _e,a as i,ao as fe,o as c,b as R,f as l,w as o,i as e,F as ge,n as ke,al as U,g as _,D as y,G as h,e as p,j as b,Q as he,L as ve,aP as Ie,aQ as ye,ak as Ce,aK as we,aL as Se,C as F,am as D,P as Ve}from"./index-XH02SKV1.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-lf_1wSc8.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-_TYtOJUm.js";const Ne={list:k=>de.post("callback/getCustomerCallbackRecordList",k)},P=k=>(we("data-v-b81b5288"),k=k(),Se(),k),ze=P(()=>F("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),De=P(()=>F("br",null,null,-1)),Le=pe({name:"RecordCallbackIndex",__name:"index",setup(k){const{pagination:f,getParams:Q,onSizeChange:B,onCurrentChange:M}=me(),N=m(!1),L=m([]),$=m(""),s=m([]),C=m(!0),w=m(!1),S=m("default"),V=m(!1),j=m([{prop:"projectQuestionnaireCIickId",label:"点击ID",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"对象",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调url",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级url",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0}]),E=[{label:"内部",value:1},{label:"外部",value:2}],n=be({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""});function H(u){B(u).then(()=>v())}function T(u=1){M(u).then(()=>v())}function A(){f.value.page=1,v()}async function v(){N.value=!0;const u={...Q(),...n};n.time&&n.time.length&&(u.beginTime=n.time[0]||"",u.endTime=n.time[1]||"");const t=await Ne.list(u);L.value=t.data.customerCallbackRecordInfoList,f.value.total=t.data.total,N.value=!1}function q(){Object.assign(n,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""}),v()}function G(u){$.value=u}return _e(async()=>{j.value.forEach(u=>{u.checked&&s.value.push(u.prop)}),v()}),(u,t)=>{const I=i("el-input"),g=i("el-form-item"),K=i("el-option"),O=i("el-select"),J=i("el-date-picker"),x=ve,z=i("ElButton"),W=i("ElFormItem"),X=i("ElForm"),Y=Ue,Z=i("ElDivider"),ee=je,le=i("el-button"),te=Ie,oe=ye,ae=i("el-row"),d=i("el-table-column"),ne=i("el-empty"),re=i("el-table"),ie=i("ElPagination"),se=Ce,ue=fe("loading");return c(),R("div",{class:he({"absolute-container":e(V)})},[l(se,null,{default:o(()=>[l(Y,{"show-toggle":!1},{default:o(({fold:a,toggle:ce})=>[l(X,{model:e(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[l(g,{label:""},{default:o(()=>[l(I,{modelValue:e(n).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:o(()=>[l(I,{modelValue:e(n).projectId,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:o(()=>[l(I,{modelValue:e(n).memberId,"onUpdate:modelValue":t[2]||(t[2]=r=>e(n).memberId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"点击ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:o(()=>[l(O,{modelValue:e(n).surveySource,"onUpdate:modelValue":t[3]||(t[3]=r=>e(n).surveySource=r),"value-key":"",placeholder:"会员类型",clearable:"",filterable:""},{default:o(()=>[(c(),R(ge,null,ke(E,r=>l(K,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),U(l(g,{label:""},{default:o(()=>[l(I,{modelValue:e(n).projectName,"onUpdate:modelValue":t[4]||(t[4]=r=>e(n).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[D,!a]]),U(l(g,{label:""},{default:o(()=>[l(I,{modelValue:e(n).memberChildId,"onUpdate:modelValue":t[5]||(t[5]=r=>e(n).memberChildId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员id/会员id"},null,8,["modelValue"])]),_:2},1536),[[D,!a]]),U(l(g,{label:""},{default:o(()=>[l(J,{modelValue:e(n).time,"onUpdate:modelValue":t[6]||(t[6]=r=>e(n).time=r),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[D,!a]]),l(W,null,{default:o(()=>[l(z,{type:"primary",onClick:t[7]||(t[7]=r=>T())},{icon:o(()=>[l(x,{name:"i-ep:search"})]),default:o(()=>[_(" 筛选 ")]),_:1}),l(z,{onClick:q},{icon:o(()=>[ze]),default:o(()=>[_(" 重置 ")]),_:1}),l(z,{link:"",onClick:ce},{icon:o(()=>[l(x,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[_(" "+y(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(Z,{"border-style":"dashed"}),l(ae,null,{default:o(()=>[l(ee),l(oe,null,{default:o(()=>[l(le,{size:"default"},{default:o(()=>[_(" 导出 ")]),_:1}),l(te,{border:e(C),"onUpdate:border":t[8]||(t[8]=a=>h(C)?C.value=a:null),tableAutoHeight:e(V),"onUpdate:tableAutoHeight":t[9]||(t[9]=a=>h(V)?V.value=a:null),checkList:e(s),"onUpdate:checkList":t[10]||(t[10]=a=>h(s)?s.value=a:null),columns:e(j),"onUpdate:columns":t[11]||(t[11]=a=>h(j)?j.value=a:null),"line-height":e(S),"onUpdate:lineHeight":t[12]||(t[12]=a=>h(S)?S.value=a:null),stripe:e(w),"onUpdate:stripe":t[13]||(t[13]=a=>h(w)?w.value=a:null),style:{"margin-left":"12px"},onQueryData:A},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),U((c(),p(re,{border:e(C),data:e(L),size:e(S),stripe:e(w),onSelectionChange:G},{empty:o(()=>[l(ne,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[l(d,{align:"center",type:"selection"}),e(s).includes("projectQuestionnaireCIickId")?(c(),p(d,{key:0,align:"center",prop:"projectQuestionnaireCIickId","show-overflow-tooltip":"",label:"点击ID"},{default:o(({row:a})=>[_(y(a.projectQuestionnaireCIickId?a.projectQuestionnaireCIickId:"-"),1)]),_:1})):b("",!0),e(s).includes("customerShortName")?(c(),p(d,{key:1,align:"center",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型"},{default:o(({row:a})=>[_(y(E[a.surveySource-1].label),1)]),_:1})):b("",!0),e(s).includes("customerShortName")?(c(),p(d,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):b("",!0),e(s).includes("memberChildId")?(c(),p(d,{key:3,align:"center","show-overflow-tooltip":"",label:"对象"},{default:o(({row:a})=>[_(y(a.memberChildId)+" ",1),De,_(" "+y(a.randomIdentityId),1)]),_:1})):b("",!0),e(s).includes("projectId")?(c(),p(d,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):b("",!0),e(s).includes("projectName")?(c(),p(d,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):b("",!0),e(s).includes("callbackUrl")?(c(),p(d,{key:6,align:"center",prop:"callbackUrl",label:"回调URL"})):b("",!0),e(s).includes("subordinateUrl")?(c(),p(d,{key:7,align:"center",prop:"subordinateUrl",label:"下级URL"})):b("",!0),e(s).includes("callbackTime")?(c(),p(d,{key:8,align:"center",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"})):b("",!0)]),_:1},8,["border","data","size","stripe"])),[[ue,e(N)]]),l(ie,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:H,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Re=Ve(Le,[["__scopeId","data-v-b81b5288"]]);export{Re as default};
