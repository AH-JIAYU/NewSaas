
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as R,aN as U,r as h,a as s,q as $,s as T,o as f,e as v,w as t,f as a,i as d,aM as G,g as n,z as r,j as y,b as k,bf as J,be as K,aH as W,aI as X,y as z,L as Y}from"./index-UdTJk9b4.js";import{a as Z}from"./user_cooperation-5BCYW126.js";const S=m=>(W("data-v-79c94926"),m=m(),X(),m),ee={key:0,class:"plus color3"},ae=S(()=>z("div",{class:"plusSpan i-majesticons:plus-line w-1em h-1em"},null,-1)),te={key:1,class:"plus color3"},le=S(()=>z("div",{class:"minusSign i-iconamoon:sign-minus-bold w-1em h-1em"},null,-1)),oe=R({__name:"index",emits:["fetch-data"],setup(m,{expose:x,emit:D}){const{format:E}=J(),B=D,{pagination:u,getParams:ne,onSizeChange:j,onCurrentChange:V,onSortChange:se}=U();h([]);const l=h({loading:!1,activeName:"myFinancial",tableAutoHeight:!1,border:!1,stripe:!1,lineHeight:"default",checkList:[],search:{page:1,limit:10,allocationTenantId:null,projectId:null,clickId:null,operationType:null,type:null}}),g=h(!1),C=h();async function N(o){o.beInvitationTenantId&&(l.value.search.allocationTenantId=o.beInvitationTenantId,await b()),g.value=!0}const b=async()=>{try{l.value.loading=!0;const o={...l.value.search},c=await Z.queryCompanyRecordQueryAmount(o);C.value=c.data.items,u.value.total=+c.data.total,l.value.loading=!1}catch{}finally{l.value.loading=!1}};function L(o){j(o).then(()=>{l.value.search.limit=o,b()})}function H(o=1){V(o).then(()=>{l.value.search.page=o,b()})}function P(){B("fetch-data"),Object.assign(l.value.search,{page:1,limit:10,userId:null,organizationalStructureId:null}),g.value=!1}return x({showEdit:N}),(o,c)=>{const M=s("ElDivider"),p=s("el-text"),i=s("ElTableColumn"),w=s("el-tag"),_=K,q=s("el-tooltip"),A=s("el-empty"),F=s("ElTable"),O=s("ElPagination"),Q=s("el-drawer"),I=$("loading");return T((f(),v(Q,{modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=e=>g.value=e),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"70%",title:"财务日志",onClose:P},{default:t(()=>[a(M,{"border-style":"dashed"}),T((f(),v(F,{border:l.value.border,size:l.value.lineHeight,stripe:l.value.stripe,class:"my-4",data:C.value,"highlight-current-row":"",onSortChange:o.sortChange,onSelectionChange:c[0]||(c[0]=e=>l.value.batch.selectionDataList=e)},{empty:t(()=>[a(A,{image:d(G),"image-size":300},null,8,["image"])]),default:t(()=>[a(i,{"show-overflow-tooltip":"",align:"left",prop:"",label:"点击ID"},{default:t(({row:e})=>[a(p,{class:"color3"},{default:t(()=>[n(r(e.clientId?e.clientId:"-"),1)]),_:2},1024)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"projectId",label:"项目ID"},{default:t(({row:e})=>[a(p,{class:"color3"},{default:t(()=>[n(r(e.projectId?e.projectId:"-"),1)]),_:2},1024)]),_:1}),a(i,{"show-overflow-tooltip":"",width:"120",align:"left",prop:"type",label:"类型"},{default:t(({row:e})=>[e.type===1?(f(),v(w,{key:0,type:"warning",effect:"dark"},{default:t(()=>[n("待审余额")]),_:1})):y("",!0),e.type===2?(f(),v(w,{key:1,type:"primary",effect:"dark"},{default:t(()=>[n("可用余额")]),_:1})):y("",!0)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"remark",label:"说明"},{default:t(({row:e})=>[a(p,{class:"mx-1 color3"},{default:t(()=>[n(r(e.remark?e.remark:"-"),1)]),_:2},1024)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"beforeBalance",width:"150",label:"变动前"},{default:t(({row:e})=>[a(_),a(p,{class:"mx-1 color3"},{default:t(()=>[n(r(e.beforeBalance||0),1)]),_:2},1024)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"difference",label:"加减款",width:"120"},{default:t(({row:e})=>[e.operationType===1?(f(),k("p",ee,[ae,a(p,null,{default:t(()=>[a(_),n(r(Math.abs(e.difference)),1)]),_:2},1024)])):y("",!0),e.operationType===2?(f(),k("p",te,[le,a(p,null,{default:t(()=>[a(_),n(r(Math.abs(e.difference)),1)]),_:2},1024)])):y("",!0)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"afterBalance",width:"150",label:"变动后"},{default:t(({row:e})=>[a(_),a(p,{class:"color3"},{default:t(()=>[n(r(e.afterBalance||0),1)]),_:2},1024)]),_:1}),a(i,{"show-overflow-tooltip":"",align:"left",prop:"createTime",label:"时间"},{default:t(({row:e})=>[a(q,{content:e.createTime,placement:"top"},{default:t(()=>[a(w,{effect:"plain",type:"info"},{default:t(()=>[n(r(d(E)(e.updateTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})]),_:1},8,["border","size","stripe","data","onSortChange"])),[[I,l.value.loading]]),a(O,{"current-page":d(u).page,total:d(u).total,"page-size":d(u).size,"page-sizes":d(u).sizes,layout:d(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:L,onCurrentChange:H},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["modelValue"])),[[I,l.value.loading]])}}}),ce=Y(oe,[["__scopeId","data-v-79c94926"]]);export{ce as default};
