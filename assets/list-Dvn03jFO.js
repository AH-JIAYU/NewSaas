
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ce,d as ue,aN as ie,r as m,a3 as F,n as de,a as _,q as pe,o,b as k,f as r,w as t,i as n,g as a,A as g,s as me,e as l,aM as fe,y as b,z as f,j as s,N as ye,b9 as _e,ba as be,bd as ke,ap as he,L as ge}from"./index-eqTpju21.js";import{_ as ve}from"./index-Dgx2zIfO.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-BJuvgyQd.js";import{_ as Se}from"./index-CDlDfsou.js";import{u as xe}from"./user_customer-5Ede6Lnz.js";import"./index-DMtPPWaF.js";import"./index.vue_vue_type_script_setup_true_lang-DYSiBY64.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-OklKkBdg.js";const Ne={list:D=>ce.post("callback/getMemberSurveyRecord",D)},Ce={key:0,class:"hoverSvg"},Le={class:"fineBom"},Be={class:"c-fx"},je={key:0,class:"hoverSvg"},we={class:"fineBom"},De={class:"c-fx"},Te={key:0,class:"hoverSvg"},Pe={class:"fineBom"},ze={class:"c-fx"},Ee={key:0,class:"hoverSvg"},Re={class:"fineBom"},Fe={class:"c-fx"},Ae={key:0,class:"hoverSvg"},Me={class:"fineBom"},Ue={class:"c-fx"},He={key:0,style:{color:"#4797fb"},class:"i-healthicons:yes w-1.3em h-1.3em"},Ve={key:1,style:{color:"#f1756c"},class:"i-healthicons:no w-1.3em h-1.3em"},$e={key:0},qe=ue({name:"investigation_records",__name:"list",setup(D){const A=xe(),{getParams:M,pagination:h,onSizeChange:U,onCurrentChange:H}=ie(),S=m(!1),T=m([]),V=m(""),u=m([]),x=m(!1),N=m(!1),C=m("default"),L=m(!1),$=m(),P=m(),q=m("formSearch-investigation_records"),B=m([{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"memberName",label:"部门",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortable:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortable:!0,checked:!0},{prop:"ipBelong",label:"区域/IP",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),j=F({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),w=F({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:[{label:"完成",value:1},{label:"被甄别",value:2},{label:"配额满",value:3},{label:"安全终止",value:4},{label:"未完成",value:5}],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function G(){j.pageNo=1,v()}function O(p){U(p).then(()=>v())}function z(p=1){H(p).then(()=>v())}async function v(){try{S.value=!0;const p={...M(),...j},{data:i}=await Ne.list(p);T.value=i.memberSurveyRecordInfoList,$.value=i.currencyType,h.value.total=i.total,S.value=!1}catch{}finally{S.value=!1}}function Q(p){V.value=p}function J(){Object.assign(j,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),v()}de(async()=>{w.customerList=await A.getCustomerList(),B.value.forEach(p=>{p.checked&&u.value.push(p.prop)}),v(),P.value=[{index:1,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:2,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份",event:"keydown.enter"},{index:3,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID",event:"keydown.enter"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称",event:"keydown.enter"},{index:5,show:!0,type:"select",modelName:"customerId",placeholder:"客户简称",option:"customerId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:7,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:"surveyStatus",optionLabel:"label",optionValue:"value"}]});const K={customerId:()=>w.customerList,surveyStatus:()=>w.surveyStatusList};return(p,i)=>{const W=Se,X=_("ElDivider"),Y=Ie,Z=_("el-button"),ee=_e,te=be,oe=_("el-row"),y=_("el-table-column"),I=ve,d=_("el-text"),c=_("el-tag"),E=ke,R=_("ElTableColumn"),le=_("el-empty"),ae=_("el-table"),se=_("ElPagination"),ne=he,re=pe("loading");return o(),k("div",{class:ye({"absolute-container":n(L)})},[r(ne,null,{default:t(()=>[r(W,{formSearchList:n(P),formSearchName:n(q),onCurrentChange:z,onOnReset:J,model:n(j),formOption:K},null,8,["formSearchList","formSearchName","model"]),r(X,{"border-style":"dashed"}),r(oe,null,{default:t(()=>[r(Y),r(te,null,{default:t(()=>[r(Z,{size:"default"},{default:t(()=>[a(" 导出 ")]),_:1}),r(ee,{border:n(x),"onUpdate:border":i[0]||(i[0]=e=>g(x)?x.value=e:null),tableAutoHeight:n(L),"onUpdate:tableAutoHeight":i[1]||(i[1]=e=>g(L)?L.value=e:null),checkList:n(u),"onUpdate:checkList":i[2]||(i[2]=e=>g(u)?u.value=e:null),columns:n(B),"onUpdate:columns":i[3]||(i[3]=e=>g(B)?B.value=e:null),"line-height":n(C),"onUpdate:lineHeight":i[4]||(i[4]=e=>g(C)?C.value=e:null),stripe:n(N),"onUpdate:stripe":i[5]||(i[5]=e=>g(N)?N.value=e:null),style:{"margin-left":"12px"},onQueryData:G},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((o(),l(ae,{border:n(x),data:n(T),size:n(C),stripe:n(N),onSelectionChange:Q},{empty:t(()=>[r(le,{image:n(fe),"image-size":300},null,8,["image"])]),default:t(()=>[r(y,{align:"left",type:"selection"}),n(u).includes("randomIdentityId")?(o(),l(y,{key:0,align:"left",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:t(({row:e})=>[e.randomIdentityId?(o(),k("div",Ce,[b("p",Le,"ID："+f(e.randomIdentityId),1),b("span",Be,[r(I,{class:"copy",content:e.randomIdentityId},null,8,["content"])])])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0),n(u).includes("memberId")?(o(),l(y,{key:1,align:"left",prop:"memberId","show-overflow-tooltip":"",width:"200",label:"会员ID"},{default:t(({row:e})=>[e.memberId?(o(),k("div",je,[b("p",we,"ID："+f(e.memberId),1),b("span",De,[r(I,{class:"copy",content:e.memberId},null,8,["content"])])])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0),n(u).includes("projectName")?(o(),l(y,{key:2,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:t(({row:e})=>[r(d,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[a(f(e.projectName?e.projectName:"-"),1)]),_:2},1024)]),_:1})):s("",!0),n(u).includes("projectId")?(o(),l(y,{key:3,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"200",label:"项目ID"},{default:t(({row:e})=>[e.projectId?(o(),k("div",Te,[b("p",Pe,"ID："+f(e.projectId),1),b("span",ze,[r(I,{class:"copy",content:e.projectId},null,8,["content"])])])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0),n(u).includes("memberName")?(o(),l(y,{key:4,width:"120",align:"left",prop:"memberName","show-overflow-tooltip":"",label:"部门"},{default:t(({row:e})=>[e.memberName?(o(),k("div",Ee,[r(d,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[a(f(e.memberName.split("/")[0]),1)]),_:2},1024),a("    "),b("p",Re,"ID："+f(e.memberName.split("/")[1]),1),b("span",Fe,[r(I,{class:"copy",content:e.memberName.split("/")[1]},null,8,["content"])])])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0),n(u).includes("allocationType")?(o(),l(y,{key:5,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:t(({row:e})=>[e.allocationType===1?(o(),l(c,{key:0,effect:"plain",type:"info"},{default:t(()=>[a(" 未分配 ")]),_:1})):s("",!0),e.allocationType===2?(o(),l(c,{key:1,style:{"background-color":"#626aef",color:"#fff"}},{default:t(()=>[a(" 供应商 ")]),_:1})):s("",!0),e.allocationType===3?(o(),l(c,{key:2,style:{"background-color":"#05C9BE",color:"#fff"}},{default:t(()=>[a(" 会员组 ")]),_:1})):s("",!0)]),_:1})):s("",!0),n(u).includes("doMoneyPrice")?(o(),l(y,{key:6,width:"80",align:"left",prop:"h","show-overflow-tooltip":"",label:"项目价"},{default:t(({row:e})=>[r(d,null,{default:t(()=>[r(E)]),_:1}),r(d,{style:{color:"#333333","font-weight":"700"}},{default:t(()=>[a(f(e.doMoneyPrice||0),1)]),_:2},1024)]),_:1})):s("",!0),n(u).includes("memberPrice")?(o(),l(y,{key:7,width:"110",align:"left",prop:"h","show-overflow-tooltip":"",label:"成本价(会员)"},{default:t(({row:e})=>[r(d,null,{default:t(()=>[r(E)]),_:1}),r(d,{style:{color:"#333333","font-weight":"700"}},{default:t(()=>[a(f(e.memberPrice||0),1)]),_:2},1024)]),_:1})):s("",!0),n(u).includes("ipBelong")?(o(),l(y,{key:8,align:"left",width:"150",prop:"ipBelong","show-overflow-tooltip":"",label:"区域/IP"},{default:t(({row:e})=>[e.ipBelong?(o(),k("div",Ae,[r(c,{style:{"font-weight":"700"}},{default:t(()=>[a(f(e.ipBelong.split("/")[1]),1)]),_:2},1024),a("    "),b("p",Me,f(e.ipBelong.split("/")[0]),1),b("span",Ue,[r(I,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0),n(u).includes("surveyTime")?(o(),l(y,{key:9,align:"left","show-overflow-tooltip":"",label:"调查时间"},{default:t(({row:e})=>[r(c,{effect:"plain",type:"info"},{default:t(()=>[a(f(e.surveyTime?e.surveyTime+"min":0)+"/ "+f(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):s("",!0),n(u).includes("surveyStatus")?(o(),l(R,{key:10,align:"left","show-overflow-tooltip":"",prop:"",label:"调查状态"},{default:t(({row:e})=>[e.surveyStatus===3?(o(),l(c,{key:0,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[a("配额满")]),_:1})):s("",!0),e.surveyStatus===1?(o(),l(c,{key:1,effect:"dark",style:{"background-color":"#379AFF",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[a("完成")]),_:1})):s("",!0),e.surveyStatus===2?(o(),l(c,{key:2,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[a("被甄别")]),_:1})):s("",!0),e.surveyStatus===4?(o(),l(c,{key:3,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[a("安全终止")]),_:1})):s("",!0),e.surveyStatus===5?(o(),l(c,{key:4,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:t(()=>[a("未完成")]),_:1})):s("",!0),e.settlementRemarks?(o(),l(d,{key:5},{default:t(()=>[e.settlementRemarks==="结算成功"?(o(),k("div",He)):s("",!0),e.settlementRemarks==="结算失败"?(o(),k("div",Ve)):s("",!0)]),_:2},1024)):s("",!0)]),_:1})):s("",!0),n(u).includes("viceStatus")?(o(),l(R,{key:11,align:"left","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:t(({row:e})=>[e.viceStatus?(o(),k("div",$e,[e.viceStatus===1?(o(),l(c,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[a("待审")]),_:1})):s("",!0),e.viceStatus===2?(o(),l(c,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[a("免审")]),_:1})):s("",!0),e.viceStatus===3?(o(),l(c,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[a("过IR")]),_:1})):s("",!0),e.viceStatus===4?(o(),l(c,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[a("时间过短")]),_:1})):s("",!0),e.viceStatus===5?(o(),l(c,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:t(()=>[a("超时完成")]),_:1})):s("",!0),e.viceStatus===6?(o(),l(c,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:t(()=>[a("超量完成")]),_:1})):s("",!0),e.viceStatus===7?(o(),l(c,{key:6,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[a("审核成功")]),_:1})):s("",!0),e.viceStatus===8?(o(),l(c,{key:7,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[a("审核失败")]),_:1})):s("",!0),e.viceStatus===9?(o(),l(c,{key:8,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[a("数据冻结")]),_:1})):s("",!0),e.viceStatus===10?(o(),l(c,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:t(()=>[a("时间段过载")]),_:1})):s("",!0),e.viceStatus===11?(o(),l(c,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:t(()=>[a("IP不一致")]),_:1})):s("",!0),e.viceStatus===12?(o(),l(c,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:t(()=>[a("ID重复参与")]),_:1})):s("",!0),e.viceStatus===13?(o(),l(c,{key:12,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[a("和解")]),_:1})):s("",!0)])):(o(),l(d,{key:1},{default:t(()=>[a("-")]),_:1}))]),_:1})):s("",!0)]),_:1},8,["border","data","size","stripe"])),[[re,n(S)]]),r(se,{"current-page":n(h).page,total:n(h).total,"page-size":n(h).size,"page-sizes":n(h).sizes,layout:n(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),et=ge(qe,[["__scopeId","data-v-e5435398"]]);export{et as default};
