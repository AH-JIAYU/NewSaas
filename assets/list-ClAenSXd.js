
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,am as Ne,aO as we,r as s,a5 as je,c as Le,l as Se,b as f,q as xe,o as n,e as g,g as l,w as t,j as o,h as i,I as C,s as Re,f as r,aN as Pe,H as d,k as p,t as y,F as Q,v as Ee,S as Te,bd as ze,E as Be,aQ as De,aR as Me,bc as Ae,ap as Ue,aI as Fe,aJ as Oe,R as Ve}from"./index-C6Z_9UGF.js";import{_ as $e}from"./index-XRIGruIn.js";import{_ as He}from"./index.vue_vue_type_style_index_0_lang-DlC3kz2i.js";import{_ as Ge}from"./index-BVV3vXjr.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-Diixglcv.js";import qe from"./index-o4TrWin1.js";import Je from"./index-DBejhzpC.js";import Ze from"./index-7TUwR9Ui.js";import{a as Ke}from"./survey_myProjeck-l52_O8Hl.js";import{u as We}from"./user_customer-B73tGE-0.js";import{u as Xe}from"./index-B9pB3x6a.js";import"./index-BihVzFKk.js";import"./index.vue_vue_type_script_setup_true_lang-CA_nELLL.js";import"./sortable.esm-C0-Qcoum.js";import"./index-DIJtEL2Q.js";import"./file-C968bsFi.js";import"./download-C8PHVIy1.js";import"./apiLoading-Ca1aZjOo.js";import"./clipboard-DCepKiEn.js";import"./projectManagement-QWTu6pIW.js";import"./survey_vipGroup-BgfHSj9k.js";import"./survey_vipGroup-GltaqOYM.js";import"./user_customer-CedkKX76.js";const Ye=w=>(Fe("data-v-df5dd3c8"),w=w(),Oe(),w),et={key:0,class:"crudeTop"},tt={key:1,class:"hoverSvg"},ot={class:"fineSize"},lt={key:0,class:"crudeTop"},at={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},nt={class:"fineBom"},rt={class:"parameter oneLine"},it=Ye(()=>y("span",{class:"headerIcon"},[y("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[y("g",{id:"Time (æ¶é´)"},[y("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),y("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),i(" 创建时间 ")],-1)),ct=Ie({name:"myProjeck",__name:"list",setup(w){const{format:q}=ze(),{toClipboard:J}=Xe(),D=Ne(),Z=We(),{pagination:b,getParams:K,onSizeChange:W,onCurrentChange:X,onSortChange:st}=we(),z=s([]),M=s([]),A=s(),Y=s(""),U=s(),j=s(!0),ee=s(),F=s(),L=s(!0),u=s([]),S=s(!1),O=s(),te=s("formSearch-myProjeck"),x=s("default"),R=s(!1),P=s([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=je({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),V=s([]),$=s();function oe(a){U.value.showEdit(a)}function le(a){F.value.showEdit(a)}function ae(a){$.value.showEdit(a)}function ne(a){W(a).then(()=>I())}function B(a=1){X(a).then(()=>I())}function re(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),I()}async function I(){try{j.value=!0;const a={...K(),..._};_.time&&_.time.length&&(a.beginTime=_.time[0]||"",a.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?a.countryId=[_.countryId]:a.countryId=[];const c=await Ke.list(a);A.value=c.data.currencyType,V.value=c.data.getMemberProjectListInfoList,b.value.total=c.data.total,j.value=!1}catch{}finally{j.value=!1}}const ie=a=>{J(a),Be({type:"success",message:"复制成功"})},ce=s();function se(a){ce.value=a.projectId}const E=Le(()=>a=>z.value.filter(N=>a==null?void 0:a.includes(N.id)).map(N=>N.chineseName));return Se(async()=>{P.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),z.value=await D.getCountry(),M.value=await Z.getCustomerList(),I(),O.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"国家地区",option:z.value,optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:M.value,optionLabel:"tenantCustomerId",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:[{label:"B2B",value:1},{label:"B2C",value:2}],optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startplaceholder:"创建开始日期",endplaceholder:"创建结束日期"}]}),(a,c)=>{const N=Ge,ue=f("ElDivider"),pe=He,T=f("el-button"),de=De,me=Me,fe=f("el-row"),m=f("el-table-column"),_e=$e,H=f("el-tooltip"),h=f("el-text"),he=Ae,G=f("el-link"),k=f("el-tag"),ye=f("ElSpace"),ge=f("el-empty"),be=f("el-table"),ke=f("ElPagination"),ve=Ue,Ce=xe("loading");return n(),g("div",{class:Te({"absolute-container":o(S)})},[l(ve,null,{default:t(()=>[l(N,{formSearchList:o(O),formSearchName:o(te),onCurrentChange:B,onOnReset:re,model:o(_)},null,8,["formSearchList","formSearchName","model"]),l(ue,{"border-style":"dashed"}),l(fe,{gutter:24},{default:t(()=>[l(pe),l(me,null,{default:t(()=>[l(T,{size:"default",onClick:c[0]||(c[0]=()=>{})},{default:t(()=>[i(" 导出 ")]),_:1}),l(de,{border:o(L),"onUpdate:border":c[1]||(c[1]=e=>C(L)?L.value=e:null),tableAutoHeight:o(S),"onUpdate:tableAutoHeight":c[2]||(c[2]=e=>C(S)?S.value=e:null),checkList:o(u),"onUpdate:checkList":c[3]||(c[3]=e=>C(u)?u.value=e:null),columns:o(P),"onUpdate:columns":c[4]||(c[4]=e=>C(P)?P.value=e:null),"line-height":o(x),"onUpdate:lineHeight":c[5]||(c[5]=e=>C(x)?x.value=e:null),stripe:o(R),"onUpdate:stripe":c[6]||(c[6]=e=>C(R)?R.value=e:null),style:{"margin-left":"12px"},onQueryData:B},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Re((n(),r(be,{ref_key:"tableSortRef",ref:Y,style:{"margin-top":"10px"},"row-key":"id",data:o(V),border:o(L),size:o(x),stripe:o(R),onCurrentChange:se},{empty:t(()=>[l(ge,{image:o(Pe),"image-size":300},null,8,["image"])]),default:t(()=>[l(m,{align:"left",type:"selection"}),o(u).includes("project")?(n(),r(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:t(({row:e})=>[o(u).includes("projectName")?(n(),g("p",et,"名称："+d(e.projectName),1)):p("",!0),o(u).includes("projectId")?(n(),g("div",tt,[y("p",ot,"ID："+d(e.projectId),1),l(_e,{class:"copy",content:e.projectId},null,8,["content"])])):p("",!0)]),_:1})):p("",!0),o(u).includes("projectIdentificationOrClientName")?(n(),r(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:t(({row:e})=>[o(u).includes("projectIdentification")?(n(),g("p",lt," 名称："+d(e.projectIdentification),1)):p("",!0),o(u).includes("projectIdClientName")?(n(),g("p",at,[i("标："),y("span",nt,d(e.clientName),1)])):p("",!0)]),_:1})):p("",!0),o(u).includes("withoutUrl")?(n(),r(m,{key:2,prop:"withoutUrl",align:"left",label:"URL"},{default:t(({row:e})=>[l(H,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:t(()=>[l(T,{link:"",type:"primary",onClick:v=>ie(e.withoutUrl)},{default:t(()=>[i("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):p("",!0),o(u).includes("participation")?(n(),r(m,{key:3,"show-overflow-tooltip":"",width:"180",align:"left",label:"参数"},{default:t(({row:e})=>[y("p",rt,[l(h,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:t(()=>[i("参与："+d(e.participation||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:t(()=>[i("完成："+d(e.complete||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:t(()=>[i("配额："+d(e.num||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:t(()=>[i("限量："+d(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):p("",!0),o(u).includes("doMoneyPrice")?(n(),r(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"原价"},{default:t(({row:e})=>[o(A)===3?(n(),r(h,{key:0,class:"mx-1"},{default:t(()=>[i("暂无数据")]),_:1})):(n(),r(h,{key:1,class:"mx-1"},{default:t(()=>[l(h,{style:{color:"#FD8989"}},{default:t(()=>[l(he)]),_:1}),l(h,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:t(()=>[i(d(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):p("",!0),o(u).includes("memberPrice")?(n(),r(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"会员价"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(G,{key:0,size:"small",plain:"",type:"primary",onClick:v=>le(e)},{default:t(()=>[i(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(h,{key:1},{default:t(()=>[i(" - ")]),_:1}))]),_:1})):p("",!0),o(u).includes("countryNameList")?(n(),r(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"国家"},{default:t(({row:e})=>[e.countryNameList?(n(),g(Q,{key:0},[e.countryNameList.length===o(D).country.length?(n(),r(k,{key:0,type:"primary"},{default:t(()=>[i("全球")]),_:1})):o(E)(e.countryNameList).length>1?(n(),r(H,{key:1,class:"box-item",effect:"dark",content:o(E)(e.countryNameList).join(","),placement:"top"},{default:t(()=>[l(G,{type:"primary"},{default:t(()=>[l(k,{type:"primary"},{default:t(()=>[i("x"+d(o(E)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),g(Q,{key:2},Ee(o(E)(e.countryNameList),v=>(n(),r(k,{key:v,type:"primary"},{default:t(()=>[i(d(v),1)]),_:2},1024))),128))],64)):p("",!0)]),_:1})):p("",!0),o(u).includes("ir")?(n(),r(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:t(({row:e})=>[l(h,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:t(()=>[i(d(e.ir?e.ir:"-")+" / "+d(e.nir?e.nir:"-"),1)]),_:2},1024)]),_:1})):p("",!0),o(u).includes("memberStatus")?(n(),r(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(k,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:t(()=>[i(" 会员组 ")]),_:1})):(n(),r(k,{key:1,effect:"plain",type:"info"},{default:t(()=>[i(" 未分配 ")]),_:1}))]),_:1})):p("",!0),o(u).includes("createTime")?(n(),r(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{header:t(()=>[it]),default:t(({row:e})=>[l(k,{effect:"plain",type:"info"},{default:t(()=>[i(d(o(q)(e.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:t(({row:e})=>[l(ye,null,{default:t(()=>[e.getMemberGroupNameInfoList.length?p("",!0):(n(),r(T,{key:0,type:"primary",plain:"",size:"small",onClick:v=>ae(e)},{default:t(()=>[i(" 分配 ")]),_:2},1032,["onClick"])),l(T,{size:"small",plain:"",type:"warning",onClick:v=>oe(e)},{default:t(()=>[i(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ce,o(j)]]),l(ke,{"current-page":o(b).page,total:o(b).total,"page-size":o(b).size,"page-sizes":o(b).sizes,layout:o(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:B},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Qe,{ref_key:"CheckEditRef",ref:ee},null,512),l(qe,{ref_key:"detailRef",ref:U},null,512),l(Je,{ref_key:"checkMembershipPriceRef",ref:F},null,512),l(Ze,{ref_key:"addAllocationEditRef",ref:$,onFetchData:I},null,512)],2)}}}),Tt=Ve(ct,[["__scopeId","data-v-df5dd3c8"]]);export{Tt as default};
