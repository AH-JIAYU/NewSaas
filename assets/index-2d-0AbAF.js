
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{c as g}from"./user_cooperation-BoTJjSQ8.js";import{d as R,r as u,c as D,b as l,o as d,e as m,g as a,w as n,h as I,j as s,F as j,v as q,f as y,t as h,H as f,k as z,I as A,E as H,aF as M,R as O}from"./index-VWAStke3.js";const S={style:{float:"left"}},G={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":".8125rem"}},J={key:0},K={key:1},P=R({__name:"index",emits:["fetch-data"],setup(Q,{expose:k,emit:V}){const L=V,i=u(!1);u("");const _=u(),t=u({form:{},tenantUserList:[],rules:{beInvitationTenantId:[{required:!0,message:"请选择租户",trigger:"blur"}]}});async function U(){await x(),i.value=!0}async function x(){const o=await g.getTenantUserList({});t.value.tenantUserList=o.data.tenantUserInfoList}const p=D(()=>{const o=t.value.tenantUserList.find(r=>r.tenantId===t.value.form.beInvitationTenantId);return o?(t.value.form.tenantName=o.name,t.value.form.phoneOrEmail=M.local.get("account"),[o]):[]});function v(){i.value=!1,t.value.form={},_.value.resetFields()}async function E(){_.value.validate(o=>{o&&g.addInvitationBind(t.value.form).then(()=>{H.success({message:"发送成功",center:!0}),L("fetch-data"),v()})})}return k({showEdit:U}),(o,r)=>{const N=l("el-option"),T=l("el-select"),w=l("el-form-item"),C=l("ElForm"),c=l("el-table-column"),F=l("el-table"),b=l("el-button"),B=l("el-dialog");return d(),m("div",null,[a(B,{modelValue:s(i),"onUpdate:modelValue":r[1]||(r[1]=e=>A(i)?i.value=e:null),"close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"30%",title:"邀约公司"},{footer:n(()=>[a(b,{onClick:v},{default:n(()=>[I(" 关闭 ")]),_:1}),a(b,{type:"primary",onClick:E},{default:n(()=>[I(" 发送邀约 ")]),_:1})]),default:n(()=>[a(C,{ref_key:"formRef",ref:_,rules:s(t).rules,model:s(t).form,"label-width":"7rem"},{default:n(()=>[a(w,{label:"公司名称",prop:"beInvitationTenantId"},{default:n(()=>[a(T,{modelValue:s(t).form.beInvitationTenantId,"onUpdate:modelValue":r[0]||(r[0]=e=>s(t).form.beInvitationTenantId=e),clearable:""},{default:n(()=>[(d(!0),m(j,null,q(s(t).tenantUserList,e=>(d(),y(N,{key:e.tenantId,value:e.tenantId,label:e.tenantName},{default:n(()=>[h("span",S,f(e.tenantName),1),h("span",G,f(e.tenantId),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),s(p).length?(d(),y(F,{key:0,data:s(p),border:"",stripe:""},{default:n(()=>[a(c,{prop:"name",label:"用户名"}),a(c,{prop:"tenantName",label:"公司名称"}),a(c,{prop:"country",label:"国家"}),a(c,{label:"电子邮箱/手机号"},{default:n(({row:e})=>[e.phone?(d(),m("span",J,f(e.phone),1)):(d(),m("span",K,f(e.email),1))]),_:1})]),_:1},8,["data"])):z("",!0)]),_:1},8,["modelValue"])])}}}),Y=O(P,[["__scopeId","data-v-d90eb96a"]]);export{Y as default};
