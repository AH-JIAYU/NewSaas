
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as J,r as V,A as O,a5 as G,bc as X,n as Y,b as m,o as s,e as r,g as e,w as t,t as d,h as c,F as h,v as N,f as _,k as p,H as g,j as D,ar as Z,p as ee,N as te,aI as ae,aJ as le,R as ne}from"./index-C3b6PpKr.js";import{a as P}from"./user_customer-CpPxnUNN.js";import oe from"./index-DHF5voYD.js";import"./department-CG0X7AQ0.js";import"./position_manage-PlLC5Wew.js";import"./department-WbAlI3aD.js";import"./tenant_role-BEvLc0du.js";import"./configuration_role-BAeBWxzF.js";import"./configuration_manager-D0QSW04b.js";const f=y=>(ae("data-v-d1be5d35"),y=y(),le(),y),ue=f(()=>d("div",{class:"card-header"},[d("span",null,"基本信息")],-1)),se={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},de=f(()=>d("div",{class:"card-header"},[d("span",null,"权限信息")],-1)),ie=f(()=>d("div",{class:"card-header"},[d("span",null,"重定向配置")],-1)),re=f(()=>d("span",null," /redirect?status=c&uid=[uid] ",-1)),me={key:0},pe=f(()=>d("span",null," /redirect?status=q&uid=[uid] ",-1)),fe={key:0},ce=f(()=>d("span",null," /redirect?status=s&uid=[uid] ",-1)),ve={key:0},_e=f(()=>d("span",null," /redirect?status=t&uid=[uid] ",-1)),be={key:0},ge={class:"card-header"},Ce=f(()=>d("span",null,"服务端回调配置",-1)),Ve=f(()=>d("span",null,"/callback/serviceCallback?status=c&uid=[uid]",-1)),ye={key:0},Ie=f(()=>d("span",null,"/callback/serviceCallback?status=q&uid=[uid]",-1)),he={key:0},ke=f(()=>d("span",null,"/callback/serviceCallback?status=s&uid=[uid]",-1)),Le={key:0},xe=f(()=>d("span",null,"/callback/serviceCallback?status=t&uid=[uid]",-1)),Ue={key:0},Se=J({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(y){const j=y,b="https://saas-api.surveysaas.com/api",T=V([]),F=O("validateTopTabs"),R=G({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),A=V("basicSettings"),w=V(!1),k=V([]),L=V(!1),$=v=>{if(v)l.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const n=l.value.tenantCustomerConfigInfoList.findIndex(i=>i.callbackWay===1);n!==-1&&l.value.tenantCustomerConfigInfoList.splice(n,1)}},E=async(v,n)=>{if(v){const i=k.value.find(u=>u.id===v),o=await P.generateKey({type:i.name});l.value.tenantCustomerConfigInfoList[n].secretKey=o.data}},K=async()=>{const{data:v}=await ee.getTenantStaffList();T.value=v};X(async()=>{await K(),w.value=l.value.tenantCustomerConfigInfoList.length===2;const v=await P.getTenantSecretKeyConfigList();k.value=v.data});const q=V(null),l=V(j.leftTab);return Y(()=>{F(q.value)}),(v,n)=>{const i=m("el-input"),o=m("el-form-item"),u=m("el-col"),C=m("el-option"),z=te,M=m("el-button"),x=m("el-select"),U=m("el-row"),S=m("el-card"),I=m("el-switch"),Q=m("el-input-number"),B=m("el-tab-pane"),W=m("el-checkbox"),H=m("el-tabs");return s(),r("div",null,[e(D(Z),{ref_key:"formRef",ref:q,rules:D(R),model:l.value,"label-width":"100px"},{default:t(()=>[e(H,{modelValue:A.value,"onUpdate:modelValue":n[25]||(n[25]=a=>A.value=a)},{default:t(()=>[e(B,{label:"基础设置",name:"basicSettings"},{default:t(()=>[e(S,{class:"box-card"},{header:t(()=>[ue]),default:t(()=>[e(U,{gutter:24},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(o,{label:"客户名称",prop:"customerAccord"},{default:t(()=>[e(i,{modelValue:l.value.customerAccord,"onUpdate:modelValue":n[0]||(n[0]=a=>l.value.customerAccord=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户简称",prop:"customerShortName"},{default:t(()=>[e(i,{modelValue:l.value.customerShortName,"onUpdate:modelValue":n[1]||(n[1]=a=>l.value.customerShortName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"公司名称",prop:"companyName"},{default:t(()=>[e(i,{modelValue:l.value.companyName,"onUpdate:modelValue":n[2]||(n[2]=a=>l.value.companyName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户姓名",prop:"customerName"},{default:t(()=>[e(i,{modelValue:l.value.customerName,"onUpdate:modelValue":n[3]||(n[3]=a=>l.value.customerName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"手机号码",prop:"customerPhone"},{default:t(()=>[e(i,{modelValue:l.value.customerPhone,"onUpdate:modelValue":n[4]||(n[4]=a=>l.value.customerPhone=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"电子邮箱",prop:"emailAddress"},{default:t(()=>[e(i,{modelValue:l.value.emailAddress,"onUpdate:modelValue":n[5]||(n[5]=a=>l.value.emailAddress=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"负责人",prop:"chargeId"},{default:t(()=>[e(x,{modelValue:l.value.chargeId,"onUpdate:modelValue":n[7]||(n[7]=a=>l.value.chargeId=a),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{empty:t(()=>[d("div",se,[c(" 暂无数据 "),e(M,{type:"primary",link:"",onClick:n[6]||(n[6]=a=>L.value=!0),size:"small"},{default:t(()=>[c(" 快捷新增 "),e(z,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"2px",margin:"0 2px"}})]),_:1})])]),default:t(()=>[(s(!0),r(h,null,N(T.value,a=>(s(),_(C,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"结算周期",prop:"settlementCycle"},{default:t(()=>[e(x,{modelValue:l.value.settlementCycle,"onUpdate:modelValue":n[8]||(n[8]=a=>l.value.settlementCycle=a)},{default:t(()=>[e(C,{label:"net 30",value:30}),e(C,{label:"net 60",value:60}),e(C,{label:"net 90",value:90}),e(C,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{class:"box-card"},{header:t(()=>[de]),default:t(()=>[e(U,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(o,{label:"客户状态"},{default:t(()=>[e(I,{modelValue:l.value.customerStatus,"onUpdate:modelValue":n[9]||(n[9]=a=>l.value.customerStatus=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:4},{default:t(()=>[e(o,{label:"前置问卷"},{default:t(()=>[e(I,{modelValue:l.value.antecedentQuestionnaire,"onUpdate:modelValue":n[10]||(n[10]=a=>l.value.antecedentQuestionnaire=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:16},{default:t(()=>[e(o,{label:"风险控制"},{default:t(()=>[e(I,{modelValue:l.value.riskControl,"onUpdate:modelValue":n[11]||(n[11]=a=>l.value.riskControl=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),l.value.riskControl===2?(s(),_(u,{key:0,span:12},{default:t(()=>[e(o,{label:"营业限额/月"},{default:t(()=>[e(Q,{modelValue:l.value.turnover,"onUpdate:modelValue":n[12]||(n[12]=a=>l.value.turnover=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):p("",!0),l.value.riskControl===2?(s(),_(u,{key:1,span:12},{default:t(()=>[e(o,{label:"审核率Min值"},{default:t(()=>[e(i,{modelValue:l.value.rateAudit,"onUpdate:modelValue":n[13]||(n[13]=a=>l.value.rateAudit=a),"controls-position":"right",min:1,type:"number"},{append:t(()=>[c(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),e(B,{label:"端口设置",name:"portSettings"},{default:t(()=>[e(S,{class:"box-card"},{header:t(()=>[ie]),default:t(()=>[e(U,{gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(I,{modelValue:l.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":n[14]||(n[14]=a=>l.value.tenantCustomerConfigInfoList[0].isEncryption=a),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),l.value.tenantCustomerConfigInfoList[0].isEncryption===1?(s(),r(h,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(x,{onChange:n[15]||(n[15]=a=>E(a,0)),clearable:"",modelValue:l.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":n[16]||(n[16]=a=>l.value.tenantCustomerConfigInfoList[0].encryptionId=a)},{default:t(()=>[(s(!0),r(h,null,N(k.value,a=>(s(),_(C,{label:a.name,value:a.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(i,{disabled:"",modelValue:l.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":n[17]||(n[17]=a=>l.value.tenantCustomerConfigInfoList[0].secretKey=a)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),_(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(i,{placeholder:"输入ip两个ip之间用,分开",modelValue:l.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":n[18]||(n[18]=a=>l.value.tenantCustomerConfigInfoList[0].whitelistIp=a)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功重定向"},{default:t(()=>[c(g(b)+" "),re,l.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",me,"&hash =[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满重定向"},{default:t(()=>[c(g(b)+" "),pe,l.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",fe,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别重定向"},{default:t(()=>[c(g(b)+" "),ce,l.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",ve,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全重定向"},{default:t(()=>[c(g(b)+" "),_e,l.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",be,"&hash=[hash]")):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{class:"box-card"},{header:t(()=>[d("div",ge,[e(W,{modelValue:w.value,"onUpdate:modelValue":n[19]||(n[19]=a=>w.value=a),size:"large",onChange:$},{default:t(()=>[Ce]),_:1},8,["modelValue"])])]),default:t(()=>[l.value.tenantCustomerConfigInfoList.length===2?(s(),_(U,{key:0,gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(I,{modelValue:l.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":n[20]||(n[20]=a=>l.value.tenantCustomerConfigInfoList[1].isEncryption=a),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),l.value.tenantCustomerConfigInfoList[1].isEncryption===1?(s(),r(h,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(x,{onChange:n[21]||(n[21]=a=>E(a,1)),clearable:"",modelValue:l.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":n[22]||(n[22]=a=>l.value.tenantCustomerConfigInfoList[1].encryptionId=a)},{default:t(()=>[(s(!0),r(h,null,N(k.value,a=>(s(),_(C,{label:a.name,value:a.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(i,{disabled:"",modelValue:l.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":n[23]||(n[23]=a=>l.value.tenantCustomerConfigInfoList[1].secretKey=a)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),_(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(i,{placeholder:"输入ip两个ip之间用,分开",modelValue:l.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":n[24]||(n[24]=a=>l.value.tenantCustomerConfigInfoList[1].whitelistIp=a)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功回调"},{default:t(()=>[c(g(b)+" "),Ve,l.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",ye,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满回调"},{default:t(()=>[c(g(b)+" "),Ie,l.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",he,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别回调"},{default:t(()=>[c(g(b)+" "),ke,l.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Le,"&hash=[hash]")):p("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全终止回调"},{default:t(()=>[c(g(b)+" "),xe,l.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Ue,"&hash=[hash]")):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"]),L.value?(s(),_(oe,{key:0,modelValue:L.value,"onUpdate:modelValue":n[26]||(n[26]=a=>L.value=a),onSuccess:K},null,8,["modelValue"])):p("",!0)])}}}),Pe=ne(Se,[["__scopeId","data-v-d1be5d35"]]);export{Pe as default};
