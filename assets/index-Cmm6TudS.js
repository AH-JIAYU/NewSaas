
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as Ie,d as _e,am as he,aK as Se,r as g,a5 as q,k as we,a as m,p as ke,o as r,b as B,f as a,w as o,i as e,az as h,q as S,F as A,t as G,e as s,g as p,H as b,I as C,j as u,S as Ce,N as Ve,aM as xe,aN as Le,ba as De,ap as Te,aG as je,aH as Pe,s as $e,aq as V,R as Ne}from"./index-O4wggHBV.js";import{_ as Ue}from"./index.vue_vue_type_style_index_0_lang-BUj70Ffr.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-YtZwJdhz.js";import{u as Me}from"./user_customer-BUpPiPGx.js";import"./user_customer-ByPUDGTB.js";const Ee={list:w=>Ie.post("callback/getMemberChildSurveyRecord",w)},Be=w=>(je("data-v-e6a81224"),w=w(),Pe(),w),Re=Be(()=>$e("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=_e({name:"memberSurveyRecords",__name:"index",setup(w){const O=he(),Q=Me(),{getParams:J,pagination:k,onSizeChange:W,onCurrentChange:X}=Se(),D=g(!1),R=g([]),Y=g(""),d=g([]),T=g(!0),j=g(!1),P=g("default"),$=g(!1),Z=g(),N=g([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortable:!0,checked:!0},{prop:"supplierPrice",label:"供应商价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),i=q({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),I=q({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function ee(){i.pageNo=1,x()}function te(y){W(y).then(()=>x())}function f(y=1){X(y).then(()=>x())}async function x(){try{D.value=!0;const y={...J(),...i},{data:t}=await Ee.list(y);R.value=t.memberChildSurveyRecordInfoList,Z.value=t.currencyType,k.value.total=t.total,D.value=!1}catch{}finally{D.value=!1}}function le(y){Y.value=y}function oe(){Object.assign(i,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),x()}return we(async()=>{I.customerList=await Q.getCustomerList(),I.country=await O.getCountry(),N.value.forEach(y=>{y.checked&&d.value.push(y.prop)}),x()}),(y,t)=>{const _=m("el-input"),v=m("el-form-item"),U=m("el-option"),z=m("el-select"),F=Ve,M=m("ElButton"),ae=m("ElFormItem"),ne=m("ElForm"),re=ze,ie=m("ElDivider"),se=Ue,ue=m("el-button"),de=xe,pe=Le,me=m("el-row"),c=m("el-table-column"),K=De,L=m("el-text"),H=m("ElTableColumn"),ce=m("el-empty"),be=m("el-table"),fe=m("ElPagination"),ye=Te,ve=ke("loading");return r(),B("div",{class:Ce({"absolute-container":e($)})},[a(ye,null,{default:o(()=>[a(re,{"show-toggle":!1},{default:o(({fold:l,toggle:ge})=>[a(ne,{model:e(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).projectId,"onUpdate:modelValue":t[0]||(t[0]=n=>e(i).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:t[1]||(t[1]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:1}),a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).projectName,"onUpdate:modelValue":t[2]||(t[2]=n=>e(i).projectName=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:t[3]||(t[3]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:1}),a(v,{label:""},{default:o(()=>[a(z,{modelValue:e(i).surveySource,"onUpdate:modelValue":t[4]||(t[4]=n=>e(i).surveySource=n),clearable:"",filterable:"",placeholder:"会员类型",onChange:t[5]||(t[5]=n=>f())},{default:o(()=>[a(U,{label:"内部会员",value:1}),a(U,{label:"外部会员",value:2})]),_:1},8,["modelValue"])]),_:1}),a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).memberId,"onUpdate:modelValue":t[6]||(t[6]=n=>e(i).memberId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID",onKeydown:t[7]||(t[7]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:1}),S(a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).memberChildId,"onUpdate:modelValue":t[8]||(t[8]=n=>e(i).memberChildId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID",onKeydown:t[9]||(t[9]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!l]]),S(a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).randomIdentityId,"onUpdate:modelValue":t[10]||(t[10]=n=>e(i).randomIdentityId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份",onKeydown:t[11]||(t[11]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!l]]),S(a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).tenantSupplierId,"onUpdate:modelValue":t[12]||(t[12]=n=>e(i).tenantSupplierId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:t[13]||(t[13]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!l]]),S(a(v,{label:""},{default:o(()=>[a(_,{modelValue:e(i).ip,"onUpdate:modelValue":t[14]||(t[14]=n=>e(i).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址",onKeydown:t[15]||(t[15]=h(n=>f(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!l]]),S(a(v,{label:""},{default:o(()=>[a(z,{modelValue:e(i).surveyStatus,"onUpdate:modelValue":t[16]||(t[16]=n=>e(i).surveyStatus=n),clearable:"",filterable:"",placeholder:"调查状态",onChange:t[17]||(t[17]=n=>f())},{default:o(()=>[(r(!0),B(A,null,G(e(I).surveyStatusList,(n,E)=>(r(),s(U,{label:n,value:E+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!l]]),S(a(v,{label:""},{default:o(()=>[a(z,{modelValue:e(i).viceStatus,"onUpdate:modelValue":t[18]||(t[18]=n=>e(i).viceStatus=n),clearable:"",placeholder:"副状态",onChange:t[19]||(t[19]=n=>f())},{default:o(()=>[(r(!0),B(A,null,G(e(I).viceStatusList,(n,E)=>(r(),s(U,{label:n,value:E+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!l]]),a(ae,null,{default:o(()=>[a(M,{type:"primary",onClick:t[20]||(t[20]=n=>f())},{icon:o(()=>[a(F,{name:"i-ep:search"})]),default:o(()=>[p(" 筛选 ")]),_:1}),a(M,{onClick:oe},{icon:o(()=>[Re]),default:o(()=>[p(" 重置 ")]),_:1}),a(M,{link:"",onClick:ge},{icon:o(()=>[a(F,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[p(" "+b(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(ie,{"border-style":"dashed"}),a(me,null,{default:o(()=>[a(se),a(pe,null,{default:o(()=>[a(ue,{size:"default"},{default:o(()=>[p(" 导出 ")]),_:1}),a(de,{border:e(T),"onUpdate:border":t[21]||(t[21]=l=>C(T)?T.value=l:null),tableAutoHeight:e($),"onUpdate:tableAutoHeight":t[22]||(t[22]=l=>C($)?$.value=l:null),checkList:e(d),"onUpdate:checkList":t[23]||(t[23]=l=>C(d)?d.value=l:null),columns:e(N),"onUpdate:columns":t[24]||(t[24]=l=>C(N)?N.value=l:null),"line-height":e(P),"onUpdate:lineHeight":t[25]||(t[25]=l=>C(P)?P.value=l:null),stripe:e(j),"onUpdate:stripe":t[26]||(t[26]=l=>C(j)?j.value=l:null),style:{"margin-left":"12px"},onQueryData:ee},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((r(),s(be,{border:e(T),data:e(R),size:e(P),stripe:e(j),onSelectionChange:le},{empty:o(()=>[a(ce,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[a(c,{align:"center",type:"selection"}),e(d).includes("id")?(r(),s(c,{key:0,align:"center",prop:"id",width:"180","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:o(({row:l})=>[p(b(l.id?l.id:"-"),1)]),_:1})):u("",!0),e(d).includes("surveySource")?(r(),s(c,{key:1,align:"center",prop:"memberId",width:"100","show-overflow-tooltip":"",label:"会员类型"},{default:o(({row:l})=>[p(b(l.surveySource===1?"内部会员":"外部会员"),1)]),_:1})):u("",!0),e(d).includes("memberChildrenId")?(r(),s(c,{key:2,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID",width:"180"},{default:o(({row:l})=>[p(b(l.memberChildrenId?l.memberChildrenId:"-"),1)]),_:1})):u("",!0),e(d).includes("memberId")?(r(),s(c,{key:3,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID",width:"180"},{default:o(({row:l})=>[p(b(l.memberId?l.memberId:"-"),1)]),_:1})):u("",!0),e(d).includes("randomIdentityId")?(r(),s(c,{key:4,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",width:"180",label:"随机身份"},{default:o(({row:l})=>[p(b(l.randomIdentityId?l.randomIdentityId:"-"),1)]),_:1})):u("",!0),e(d).includes("tenantSupplierId")?(r(),s(c,{key:5,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",width:"180",label:"供应商ID"},{default:o(({row:l})=>[p(b(l.tenantSupplierId?l.tenantSupplierId:"-"),1)]),_:1})):u("",!0),e(d).includes("projectId")?(r(),s(c,{key:6,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):u("",!0),e(d).includes("projectName")?(r(),s(c,{key:7,align:"center",prop:"projectName","show-overflow-tooltip":"",width:"180",label:"项目名称"})):u("",!0),e(d).includes("customerShortName")?(r(),s(c,{key:8,align:"center",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"})):u("",!0),e(d).includes("allocationType")?(r(),s(c,{key:9,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:o(({row:l})=>[p(b(e(I).allocationTypeList[l.allocationType-1]),1)]),_:1})):u("",!0),e(d).includes("doMoneyPrice")?(r(),s(c,{key:10,align:"center",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"90",fixed:"right",label:"原价"},{default:o(({row:l})=>[a(K),p(b(l.doMoneyPrice||0),1)]),_:1})):u("",!0),e(d).includes("supplierPrice")?(r(),s(c,{key:11,align:"center",prop:"supplierPrice","show-overflow-tooltip":"",width:"90",fixed:"right",label:"供应商价"},{default:o(({row:l})=>[a(K),p(b(l.supplierPrice||0),1)]),_:1})):u("",!0),e(d).includes("ipBelong")?(r(),s(c,{key:12,align:"center",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/所属国"})):u("",!0),e(d).includes("surveyTime")?(r(),s(c,{key:13,align:"center","show-overflow-tooltip":"",fixed:"right",width:"120",label:"调查时间"},{default:o(({row:l})=>[p(b(l.surveyTime?l.surveyTime+"min":0)+"/ "+b(l.projectTime?l.projectTime+"min":0),1)]),_:1})):u("",!0),e(d).includes("surveyStatus")?(r(),s(H,{key:14,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"调查状态"},{default:o(({row:l})=>[l.surveyStatus===3?(r(),s(L,{key:0,class:"mx-1",type:"primary"},{default:o(()=>[p("配额满")]),_:1})):u("",!0),l.surveyStatus===1?(r(),s(L,{key:1,class:"mx-1",type:"success"},{default:o(()=>[p("完成")]),_:1})):u("",!0),l.surveyStatus===2?(r(),s(L,{key:2,class:"mx-1",type:"danger"},{default:o(()=>[p("被甄别")]),_:1})):u("",!0),l.surveyStatus===4?(r(),s(L,{key:3,class:"mx-1",type:"warning"},{default:o(()=>[p("安全终止")]),_:1})):u("",!0),l.surveyStatus===5?(r(),s(L,{key:4,class:"mx-1",type:"info"},{default:o(()=>[p("未完成")]),_:1})):u("",!0)]),_:1})):u("",!0),e(d).includes("viceStatus")?(r(),s(H,{key:15,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:o(({row:l})=>[p(b(e(I).viceStatusList[l.viceStatus-1]?e(I).viceStatusList[l.viceStatus-1]:"-"),1)]),_:1})):u("",!0)]),_:1},8,["border","data","size","stripe"])),[[ve,e(D)]]),a(fe,{"current-page":e(k).page,total:e(k).total,"page-size":e(k).size,"page-sizes":e(k).sizes,layout:e(k).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:te,onCurrentChange:f},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Oe=Ne(Fe,[["__scopeId","data-v-e6a81224"]]);export{Oe as default};
