
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import R from"./index-BRADKWpt.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-zoMm-7jD.js";import{u as w}from"./projectManagement_list-BtDc3CSZ.js";import{d as F,ac as Q,r as i,X as z,n as N,Z as O,a as f,o as d,b,f as A,w as v,g as Y,O as g,e as T,F as L,t as W,v as I,j as h,A as X,ap as U,aI as Z,aJ as P,M as G}from"./index-fxjDEbzK.js";import"./user_customer-yPRMEmfg.js";import"./download-pJRwo0Lr.js";import"./zh_Hans-BiAfgf-k.js";import"./index-Bmb2yTfB.js";/* empty css              */import"./projectManagement-BsMMfgLt.js";import"./index-CrKhVL4o.js";import"./index.vue_vue_type_script_setup_true_lang-BE_IIBcw.js";import"./index-CNhdCS27.js";import"./index-BK07XJpG.js";import"./index-BOiTd8p2.js";import"./clipboard-8Jy29zkY.js";import"./index-BoheC_rc.js";import"./department-CpNba4Be.js";import"./position_manage-96BGlgBb.js";import"./configuration_role-Bg9G994P.js";import"./tenant_role-DkYNyds5.js";import"./configuration_manager-DnKHpCi4.js";import"./configuration_siteSetting-CXlYINab.js";import"./configuration_site_setting-D3zfVa69.js";import"./apiLoading-CYh17AYl.js";import"./stagedData-B8grIY8C.js";import"./index.vue_vue_type_script_setup_true_lang-DZKOXuII.js";import"./otherFunctions_screenLibrary-pAfqkDIW.js";import"./pdf-BhHCHn5I.js";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAAXNSR0IArs4c6QAAAl9JREFUOE+tlV1IVFEQx3/jmmWrZYUsUVRghkoFQdGDuKxFD0IkBUlpIK09SfVoUEEmFfVQDxYEhbtFFn1QyhZEX7j2IIhUFCWFlaJlRRFhkaXunbxra/fuutqCBy5c5sz8zszc/50jxFlrT+mcISeVYuBGWAlkAL9U6RZoEwhoDzeC1TIUjZBog8evGWpwUITd8Q602DsEdjV55Y7V1wZ1+zU7SQkAOf8B/OciHM10sv9aiYRM4yh0zXmdZ4R4/rdMG1MEXE74+CP+UQo1zV45MAotqtWp/U4eIOSPFVa5CopzoegCGDpODQYbgzukMZxpoV+9qtTFc09PgUAZFF+Cvt/jNqaLbrLDUE+ddiAsNt/npsOZDbGBaSkwEBp5rCvYCcdbbKYtUnBWlzscPI2Yp08B9yJ7oNnTqny49wYef7Dv9fbBs0822xUZzrJsOMv68YpyJMH9cjjRAjdfTaiLHin0aZXCsUmDKkNjQpe5oGSpVYaQvwDefoXeKFnVBGHQ2mcT6vFpOXDOmmnWbCjKtkM35cGjXuj6Zq/pdBuEDItN6ZQCn+Y54MUkln99RFI+bQdy44ET+lDKtoj4S1W5aEKnJUNykh1vQhu3wslWuPs69uifg6N/2ntT72Ho5qvq+PydNoQVe92wLmtC2dgctjeM9NpQih9WSCB6oDxZOJPMWamJQV9+gf5BjjRXyD4z0jb6PH7NQWlIePTBocw0qmNGXyS31bU6IzWNw8DOifJVaBfYE/TKLatvzOSPbHrqdb4MUKqwHlgCuMzrBOgBWsXgctM7blMtVpWGw/8A0EXSXcO+hTEAAAAASUVORK5CYII=",q=n=>(Z("data-v-c76821e2"),n=n(),P(),n),J={key:0,src:K,alt:"",style:{"margin-right":"5px",width:"16px",height:"16px"}},H=q(()=>I("div",{style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},null,-1)),$=F({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(n,{expose:_,emit:y}){const V=w(),s=n,B=y,x=Q("currentProjectTimeline"),C=i(),e=i(s.leftTabsData),D=i(s.validateTopTabs),u=i(),j=i(0),t=i(0);function S(){const{projectId:o,parentId:l,projectIdentification:r,countryIdList:p,uidUrl:m,...a}=U(e.value[0]);e.value[t.value].projectId&&(a.projectId=e.value[t.value].projectId,a.parentId=e.value[t.value].parentId),u.value[t.value].getUpLoad(a.descriptionUrl),e.value.splice(t.value,1,a)}function E(){t.value=++j.value;const{projectId:o,...l}=U(V.initialTopTabsData);e.value.push(l)}function M(o){e.value.splice(o,1),D.value.splice(o,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),j.value=Math.max(0,e.value.length-1))}return z(()=>t.value,(o,l)=>{s.validateAll.reduce((p,m,a)=>(m==="rejected"&&p.push(a),p),[]).includes(l)&&B("validate"),x(e.value[t.value].releaseTime)}),N(()=>{for(let o=0;o<u.value.length;o++)u.value[o].getUpLoad(e.value[o].descriptionUrl)}),e.value.forEach((o,l)=>{const r=i(null);O(`formRef${l}`,r)}),_({activeLeftTab:t}),(o,l)=>{const r=f("el-button"),p=f("el-tab-pane"),m=f("el-tabs");return d(),b("div",null,[A(r,{class:g((s.title==="新增","button")),disabled:e.value.length>29||s.title==="编辑"&&e.value[0].parentId!=="0",onClick:l[0]||(l[0]=a=>E())},{default:v(()=>[Y(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(d(),T(m,{key:0,modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value=a),"tab-position":"left",onTabRemove:M,class:g(s.title==="新增"?"":"editHideCloseButton")},{default:v(()=>[(d(!0),b(L,null,W(e.value,(a,c)=>(d(),T(p,{key:c,style:{position:"relative"},closable:e.value.length!==1,name:c},{label:v(()=>[I("div",{class:g(["flex-c",s.validateAll[c]&&s.validateAll[c]==="rejected"?"validateRejected":""])},[a.parentId=="0"?(d(),b("img",J)):h("",!0),I("span",null,X(a.name||"项目名称"),1)],2)]),default:v(()=>[H,A(R,{ref_for:!0,ref_key:"topTabsRef",ref:u,"left-tab":a,"tab-index":c,onSyncProject:S},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),A(k,{ref_key:"settingsRef",ref:C},null,512)]),_:1},8,["modelValue","class"])):h("",!0)])}}}),Ce=G($,[["__scopeId","data-v-c76821e2"]]);export{Ce as default};
