
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as re}from"./index-CGoANE-I.js";import{d as se,aL as de,r as m,l as ue,$ as D,a as i,n as ce,o as y,b as pe,q as c,f as l,w as n,aA as k,p as C,e as N,C as H,an as U,g,i as f,j as me,aM as ge,J as ve,aN as he,aH as fe,aI as _e,N as be,al as R}from"./index-CyRDEfVX.js";import ye from"./index-BUzjxRcs.js";import ke from"./index-DQjQ-ZVT.js";import{a as T}from"./tenantDictionary-DCMj_l52.js";const Ce=_=>(fe("data-v-c06a9ed6"),_=_(),_e(),_),Ie={class:"absolute-container"},we={class:"page-main"},Ne={class:"custom-tree-node"},Ve=["title"],Ee={class:"code"},Le={class:"dictionary-container"},xe={class:"dictionary-container"},Se=Ce(()=>c("div",{class:"empty"},"请在左侧选择一个部门",-1)),ze=[Se],A=se({name:"user",__name:"index",setup(_){const{pagination:u,getParams:B,onSizeChange:j,onCurrentChange:K,onSortChange:M}=de(),V=m([{label:"项目ID",prop:"projectOrMemberGroupId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectOrMemberGroupName",sortable:!0,checked:!0},{label:"项目IR",prop:"ir",sortable:!0,checked:!0},{label:"项目实际IR",prop:"projectIr",sortable:!0,checked:!0}]),E=m(),L=m(),s=m({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),P=m(),e=m({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],search:{catalogueId:"",chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}});async function I(){s.value.loading=!0,e.value.search.catalogueId="";const t={...s.value.search},a=await T.list(t);s.value.tree=a.data,s.value.loading=!1}ue(()=>{I()}),D(()=>s.value.search,t=>{E.value.filter(t)});function $(t,a){return t?a.label.includes(t):!0}function O(t){u.value.page=1,e.value.search.catalogueId=t.id}D(()=>e.value.search.catalogueId,()=>{d()});async function d(){e.value.loading=!0;const t={...B(),...e.value.search},a=await T.itemlist(t);e.value.loading=!1,e.value.dataList=a.data,e.value.dataList.forEach(v=>{v.enableLoading=!1}),u.value.total=a.data.length}function G(t){j(t).then(()=>d())}function x(t=1){K(t).then(()=>d())}function J({prop:t,order:a}){M(t,a).then(()=>d())}function q(t){e.value.dialog.id="",e.value.dialog.visible=!0,e.value.dialog.level=1,t&&(e.value.dialog.parentId=t.id,e.value.dialog.level=Number(t.level)+1)}function F(t){ge.confirm(`确认将「${t.name}」的密码重置为 “123456” 吗？`,"确认信息").then(()=>{}).catch(()=>{})}function Q(t){e.value.row=JSON.stringify(t),e.value.dialog.id=t.id,e.value.dialog.parentId=t.parentId,e.value.dialog.visible=!0}function W(t){L.value.showEdit(t)}return(t,a)=>{const v=ve,h=i("ElButton"),b=i("ElInput"),X=i("ElTree"),Y=i("ElScrollbar"),Z=i("ElSpace"),w=i("el-button"),S=i("el-col"),ee=he,ae=i("el-row"),r=i("ElTableColumn"),le=i("el-switch"),te=i("el-empty"),oe=i("ElTable"),ne=i("ElPagination"),ie=re,z=ce("loading");return y(),pe("div",Ie,[c("div",we,[l(ie,{"hide-left-side-toggle":""},{leftSide:n(()=>[l(b,{modelValue:s.value.search.chineseName,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.search.chineseName=o),placeholder:"请输入关键词筛选",clearable:"",class:"search",onKeydown:k(I,["enter"])},{append:n(()=>[l(h,{onClick:I},{default:n(()=>[l(v,{name:"i-ep:search"})]),_:1})]),_:1},8,["modelValue"]),l(Y,{class:"tree"},{default:n(()=>[C((y(),N(X,{ref_key:"dictionaryRef",ref:E,data:s.value.tree,"filter-node-method":$,"default-expand-all":"",onNodeClick:O},{default:n(({node:o,data:p})=>[c("div",Ne,[c("div",{class:"label",title:o.label},H(p.chineseName),9,Ve),c("div",Ee,H(p.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[z,s.value.loading]])]),_:1})]),default:n(()=>[C(c("div",Le,[l(Z,{wrap:""},{default:n(()=>[l(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.search.chineseName=o),placeholder:"员工ID",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),l(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.search.chineseName=o),placeholder:"用户名",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),l(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.search.chineseName=o),placeholder:"状态",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),l(h,{type:"primary",onClick:d},{icon:n(()=>[l(v,{name:"i-ep:search"})]),_:1}),l(h,{onClick:d},{icon:n(()=>[l(v,{name:"i-ep:refresh"})]),_:1})]),_:1}),l(ae,{style:{"margin-bottom":"5px"},gutter:24},{default:n(()=>[l(S,{span:10},{default:n(()=>[l(w,{type:"primary",size:"default",onClick:q},{default:n(()=>[g(" 新增 ")]),_:1}),l(w,{size:"default",onClick:F},{default:n(()=>[g(" 重置密码 ")]),_:1})]),_:1}),l(S,{style:{display:"flex","justify-content":"flex-end"},span:14},{default:n(()=>[l(w,{size:"default",onClick:a[4]||(a[4]=()=>{})},{default:n(()=>[g(" 导出 ")]),_:1}),l(ee,{border:e.value.border,"onUpdate:border":a[5]||(a[5]=o=>e.value.border=o),tableAutoHeight:e.value.tableAutoHeight,"onUpdate:tableAutoHeight":a[6]||(a[6]=o=>e.value.tableAutoHeight=o),checkList:e.value.checkList,"onUpdate:checkList":a[7]||(a[7]=o=>e.value.checkList=o),columns:V.value,"onUpdate:columns":a[8]||(a[8]=o=>V.value=o),"line-height":e.value.lineHeight,"onUpdate:lineHeight":a[9]||(a[9]=o=>e.value.lineHeight=o),stripe:e.value.stripe,"onUpdate:stripe":a[10]||(a[10]=o=>e.value.stripe=o),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((y(),N(oe,{ref_key:"dictionaryItemRef",ref:P,data:e.value.dataList,border:e.value.border,size:e.value.lineHeight,stripe:e.value.stripe,"highlight-current-row":"",height:"100%",onSortChange:J,onSelectionChange:a[12]||(a[12]=o=>e.value.selectionDataList=o),"row-key":"id","default-expand-all":""},{empty:n(()=>[l(te,{description:"暂无数据"})]),default:n(()=>[l(r,{type:"selection",align:"center",fixed:""}),l(r,{align:"center",prop:"chineseName",label:"员工ID"}),l(r,{align:"center",prop:"englishName",label:"用户名"}),l(r,{align:"center",prop:"remark",label:"姓名"}),l(r,{align:"center",prop:"remark",label:"电话号码"}),l(r,{align:"center",prop:"remark",label:"邮箱"}),l(r,{align:"center",prop:"remark",label:"部门"}),g(' align="center" '),l(r,{align:"center",prop:"remark",label:"职位"}),l(r,{align:"center",prop:"remark",label:"小组"}),l(r,{align:"center",prop:"remark",label:"状态"},{default:n(({row:o})=>[l(le,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[11]||(a[11]=p=>e.value.search.chineseName=p),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),l(r,{label:"操作",width:"150",align:"center"},{default:n(o=>[l(h,{type:"primary",size:"small",plain:"",onClick:p=>Q(o.row)},{default:n(()=>[g(" 编辑 ")]),_:2},1032,["onClick"]),l(h,{type:"primary",size:"small",plain:"",onClick:p=>W(o.row)},{default:n(()=>[g(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[z,e.value.loading]]),l(ne,{"current-page":f(u).page,total:f(u).total,"page-size":f(u).size,"page-sizes":f(u).sizes,layout:f(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[U,e.value.search.catalogueId]]),C(c("div",xe,ze,512),[[U,!e.value.search.catalogueId]])]),_:1}),e.value.dialog.visible?(y(),N(ye,{key:0,id:e.value.dialog.id,modelValue:e.value.dialog.visible,"onUpdate:modelValue":a[13]||(a[13]=o=>e.value.dialog.visible=o),"catalogue-id":e.value.search.catalogueId,"parent-id":e.value.dialog.parentId,level:e.value.dialog.level,tree:s.value.tree,dataList:e.value.dataList,row:e.value.row,onSuccess:d},null,8,["id","modelValue","catalogue-id","parent-id","level","tree","dataList","row"])):me("",!0),l(ke,{ref_key:"detailRef",ref:L},null,512)])])}}});typeof R=="function"&&R(A);const Ae=be(A,[["__scopeId","data-v-c06a9ed6"]]);export{Ae as default};
