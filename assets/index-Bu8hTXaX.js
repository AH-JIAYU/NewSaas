
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as M,T as B}from"./index-381DLN_z.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-CDHYs5hc.js";import{d as S,r as o,a2 as z,a5 as U,a3 as $,G as E,a as v,o as u,b as T,f,w as c,g,e as m,F,n as P,l as y,I as G,R as q,j as h,an as j,_ as H}from"./index-C29iptdf.js";import"./index-D7k_Vn1v.js";import"./index-DFJLODe7.js";import"./apiLoading-DqtAc4mt.js";import"./otherFunctions_basicDictionary-BOi-M26g.js";import"./basicDictionary-CrjET7Gj.js";import"./user_customer-bFUIgmZc.js";import"./user_customer-Bnw28do9.js";import"./stagedData-CMAIBnSg.js";const J={style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},K=S({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(x,{expose:k,emit:I}){const R=M(),i=x,L=I;o();const V=o(),e=o(i.leftTabsData),A=o(i.validateTopTabs),b=o(),_=o(0),t=o(0);function C(){const{projectId:s,parentId:a,...l}=j(e.value[0]);e.value[t.value].projectId&&(l.projectId=e.value[t.value].projectId,l.parentId=e.value[t.value].parentId),b.value[t.value].getUpLoad(l.descriptionUrl),e.value.splice(t.value,1,l)}function D(){t.value=++_.value;const{projectId:s,...a}=j(R.initialTopTabsData);e.value.push(a)}function w(s){e.value.splice(s,1),A.value.splice(s,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),_.value=Math.max(0,e.value.length-1))}return z(()=>t.value,(s,a)=>{i.validateAll.reduce((p,d,n)=>(d==="rejected"&&p.push(n),p),[]).includes(a)&&L("validate")}),U(()=>{e.value.forEach((s,a)=>{const l=o(null);$(`formRef${a}`,l)})}),E(()=>{console.log("leftTabs",e.value)}),k({activeLeftTab:t}),(s,a)=>{const l=v("el-button"),p=v("el-tab-pane"),d=v("el-tabs");return u(),T("div",null,[f(l,{class:"button",disabled:e.value.length>29,onClick:a[0]||(a[0]=n=>D())},{default:c(()=>[g(" 新增 ")]),_:1},8,["disabled"]),e.value.length?(u(),m(d,{key:0,modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=n=>t.value=n),"tab-position":"left",onTabRemove:w},{default:c(()=>[(u(!0),T(F,null,P(e.value,(n,r)=>(u(),m(p,{key:r,style:{position:"relative"},closable:e.value.length!==1,name:r},{label:c(()=>[y("div",{class:q(i.validateAll[r]&&i.validateAll[r]==="rejected"?"validateRejected":"")},G(n.name||"项目名称"),3)]),default:c(()=>[y("div",J,[t.value>0?(u(),m(l,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:C},{default:c(()=>[g(" 同步数据 ")]),_:1})):h("",!0)]),f(B,{ref_for:!0,ref_key:"topTabsRef",ref:b,"left-tab":n,title:i.title,"tab-index":r},null,8,["left-tab","title","tab-index"])]),_:2},1032,["closable","name"]))),128)),f(N,{ref_key:"settingsRef",ref:V},null,512)]),_:1},8,["modelValue"])):h("",!0)])}}}),se=H(K,[["__scopeId","data-v-3065fed2"]]);export{se as default};
