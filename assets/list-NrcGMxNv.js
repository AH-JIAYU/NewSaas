
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as me,r as l,aN as de,Z as pe,n as fe,a as c,q as _e,s as U,o as u,b as ge,f as n,w as o,i as s,g as b,A as ve,e as p,aM as he,y as f,z as C,N as D,j as g,aO as ye,E as be,bb as Ce,bc as ke,_ as Se,an as we,L as ze}from"./index-C9n1rX8T.js";import{_ as Ee}from"./index-DPrVJsSZ.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-BzkF9ONo.js";import{_ as xe}from"./index-A1o33NnT.js";import{a as B}from"./position_manage-DdM8JqOH.js";import De from"./index-JIv6EDZM.js";import{u as Re}from"./user_customer-BtsnHmy3.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-Bx8A0GPB.js";import{columns as k,formSearchList as $e}from"./index-CTZTVcyi.js";import"./index-BvIhVChz.js";import"./index.vue_vue_type_script_setup_true_lang-CjldkkOy.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-t54KsrrN.js";const Pe={class:"copyId tableSmall"},Ue={class:"id oneLine idFont"},Be={class:"tableBig"},Fe={class:"fontC-System"},He={class:"flex-s"},Ae={class:"oneLine fontC-System",style:{width:"calc(100% - 20px)"}},Ie=me({name:"position_manage",__name:"list",setup(Me){const F=Re(),H=l([]),{pagination:m,onSizeChange:A,onCurrentChange:I,onSortChange:Oe}=de(),M=l(""),R=l([]),v=l(!0),S=l(),w=l(!1),i=l([]),z=l(!1),E=l("default"),N=l(),h=l(),L=l(!1),O=l([]),Q=l("formSearch-position_manage"),V=[{lable:"启用",value:1},{lable:"禁用",value:2}],_=pe({page:1,limit:10,id:null,name:"",active:null});function j(){S.value.showEdit()}function q(t){S.value.showEdit(JSON.stringify(t))}function T(t){t?h.value=t.id:h.value=""}function J(t,a){N.value.showEdit(t,a)}function Z(t){O.value=t}function G(t){ye.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(async()=>{(await B.delete({id:t.id})).status===1&&(be.success({message:"删除成功",center:!0}),r())})}function K(){Object.assign(_,{page:1,limit:10,id:null,name:"",active:null}),r()}function W(t){A(t).then(()=>{_.limit=t,r()})}function x(t=1){I(t).then(()=>{_.page=t,r()})}async function r(){try{v.value=!0,H.value=await F.getCustomerList();const{data:t,status:a}=await B.list(_);t&&a===1&&(R.value=t.data,m.value.total=parseInt(t.total)||0),v.value=!1}catch{}finally{v.value=!1}}fe(()=>{k.forEach(t=>{t.checked&&i.value.push(t.prop)}),r()});const X={active:()=>V};return(t,a)=>{const Y=xe,ee=c("ElDivider"),y=c("el-button"),te=Le,ae=Ce,ne=ke,oe=c("el-row"),d=c("el-table-column"),le=Ee,se=Se,ie=c("el-empty"),re=c("el-table"),ce=c("ElPagination"),ue=we,$=_e("loading");return U((u(),ge("div",{class:D({"absolute-container":w.value})},[n(ue,null,{default:o(()=>[n(Y,{formSearchList:s($e),formSearchName:Q.value,onCurrentChange:x,onOnReset:K,model:_,formOption:X},null,8,["formSearchList","formSearchName","model"]),n(ee,{"border-style":"dashed"}),n(oe,{gutter:24},{default:o(()=>[n(te,null,{default:o(()=>[n(y,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:j},{default:o(()=>[b(" 新增职位 ")]),_:1})]),_:1}),n(ne,null,{default:o(()=>[n(y,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[b(" 导出 ")]),_:1}),n(ae,{border:z.value,"onUpdate:border":a[1]||(a[1]=e=>z.value=e),tableAutoHeight:w.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>w.value=e),checkList:i.value,"onUpdate:checkList":a[3]||(a[3]=e=>i.value=e),columns:s(k),"onUpdate:columns":a[4]||(a[4]=e=>ve(k)?k.value=e:null),"line-height":E.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>E.value=e),stripe:L.value,"onUpdate:stripe":a[6]||(a[6]=e=>L.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),U((u(),p(re,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:R.value,border:z.value,size:E.value,stripe:L.value,onSelectionChange:Z,"highlight-current-row":"",onCurrentChange:T},{empty:o(()=>[n(ie,{image:s(he),"image-size":300},null,8,["image"])]),default:o(()=>[n(d,{align:"left",type:"selection"}),i.value.includes("id")?(u(),p(d,{key:0,prop:"id","show-overflow-tooltip":"",align:"left",label:"职位ID"},{default:o(({row:e})=>[f("div",Pe,[f("div",Ue,C(e.id),1),n(le,{content:e.id,class:D({rowCopy:"rowCopy",current:e.id===h.value})},null,8,["content","class"])])]),_:1})):g("",!0),i.value.includes("name")?(u(),p(d,{key:1,prop:"name","show-overflow-tooltip":"",align:"left",label:"职位名称"},{default:o(({row:e})=>[f("div",Be,C(e.name),1)]),_:1})):g("",!0),i.value.includes("count")?(u(),p(d,{key:2,prop:"count","show-overflow-tooltip":"",align:"left",label:"账户数"},{default:o(({row:e})=>[f("div",Fe,C(e.count?e.count:"-"),1)]),_:1})):g("",!0),i.value.includes("remark")?(u(),p(d,{key:3,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:o(({row:e})=>[f("div",He,[f("div",Ae,C(e.remark?e.remark:"-"),1),e.projectType!==2?(u(),p(se,{key:0,onClick:P=>J(e,"remark"),class:D({edit:"edit",current:e.id===h.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):g("",!0)])]),_:1})):g("",!0),n(d,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[n(y,{size:"small",plain:"",type:"primary",onClick:P=>q(e)},{default:o(()=>[b(" 编辑 ")]),_:2},1032,["onClick"]),n(y,{size:"small",plain:"",type:"danger",onClick:P=>G(e)},{default:o(()=>[b(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[$,!1]]),n(ce,{"current-page":s(m).page,total:s(m).total,"page-size":s(m).size,"page-sizes":s(m).sizes,layout:s(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:x,onSizeChange:W},null,8,["current-page","total","page-size","page-sizes","layout"]),n(Ne,{onSuccess:r,ref_key:"editRef",ref:S},null,512),n(De,{ref_key:"QuickEditRef",ref:N,onFetchData:r},null,512)]),_:1})],2)),[[$,v.value]])}}}),tt=ze(Ie,[["__scopeId","data-v-fba20c1e"]]);export{tt as default};
