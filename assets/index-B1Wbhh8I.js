
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as N}from"./tenantDictionary-DHOZmfly.js";import{d as M,m as E,u as S,c as q,r as p,n as z,a as u,o as F,e as R,w as s,f as a,g,i as t,z as A,E as y,L as P}from"./index-DlUJUCOk.js";const J=M({__name:"index",props:E({catalogueId:{default:""},parentId:{default:""},id:{default:""},tree:{},dataList:{},row:{},level:{default:1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:E(["success"],["update:modelValue"]),setup(V,{emit:k}){const n=V,_=k,f=S(V,"modelValue"),w=q(()=>n.id===""?"新增字典项":"编辑字典项"),i=p(),b=p([]),e=p({id:n.id,parentId:n.parentId,catalogueId:n.catalogueId,englishName:"",chineseName:"",code:"",remark:"",level:n.level}),C=p({catalogueId:[{required:!0,message:"请选择所属字典"}],chineseName:[{required:!0,message:"请输入字典项名称"}],englishName:[{required:!0,message:"请输入字典项英文名称"}],code:[{required:!0,message:"请输入字典项键值"}]}),x=d=>{if(d){const l=b.value.find(r=>r.id===d);e.value.level=Number(l.level)+1}else e.value.level=1};function D(){e.value.id===""?i.value&&i.value.validate(d=>{d&&N.itemcreate(e.value).then(()=>{y.success({message:"新增成功",center:!0}),_("success"),c()})}):i.value&&i.value.validate(d=>{d&&N.itemedit(e.value).then(()=>{y.success({message:"编辑成功",center:!0}),_("success"),c()})})}function c(){f.value=!1}const h=d=>d.reduce((l,r)=>Array.isArray(r)?l.concat(h(r)):l.concat(r),[]);return z(()=>{n.id!==""&&n.row&&(e.value=JSON.parse(n.row)),b.value=h(n.dataList)}),(d,l)=>{const r=u("ElCascader"),m=u("ElFormItem"),v=u("ElInput"),U=u("el-button"),B=u("ElForm"),I=u("ElButton"),L=u("ElDialog");return F(),R(L,{modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=o=>f.value=o),title:t(w),width:"25rem","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:c},{footer:s(()=>[a(I,{size:"large",onClick:c},{default:s(()=>[g(" 取消 ")]),_:1}),a(I,{type:"primary",size:"large",onClick:D},{default:s(()=>[g(" 确定 ")]),_:1})]),default:s(()=>[a(B,{ref_key:"formRef",ref:i,model:t(e),rules:t(C),"label-width":"8.25rem"},{default:s(()=>[a(m,{label:"所属字典"},{default:s(()=>[a(r,{modelValue:t(e).catalogueId,"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).catalogueId=o),options:n.tree,clearable:"",props:{value:"id",label:"chineseName",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择所属字典"},null,8,["modelValue","options"])]),_:1}),a(m,{label:"选择父级"},{default:s(()=>[a(r,{modelValue:t(e).parentId,"onUpdate:modelValue":l[1]||(l[1]=o=>t(e).parentId=o),options:n.dataList,clearable:"",props:{value:"id",label:"chineseName",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择所属父级",onChange:x},null,8,["modelValue","options"])]),_:1}),a(m,{label:"中文名称",prop:"chineseName"},{default:s(()=>[a(v,{modelValue:t(e).chineseName,"onUpdate:modelValue":l[2]||(l[2]=o=>t(e).chineseName=o),placeholder:"请输入中文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"英文名称",prop:"englishName"},{default:s(()=>[a(v,{modelValue:t(e).englishName,"onUpdate:modelValue":l[3]||(l[3]=o=>t(e).englishName=o),placeholder:"请输入英文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"字典项键值",prop:"code"},{default:s(o=>[a(U,{size:"small",plain:""},{default:s(()=>[g(A(o.row.code),1)]),_:2},1024)]),_:1}),a(m,{label:"备注"},{default:s(()=>[a(v,{modelValue:t(e).remark,"onUpdate:modelValue":l[4]||(l[4]=o=>t(e).remark=o),placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),j=P(J,[["__scopeId","data-v-d66b314c"]]);export{j as default};
