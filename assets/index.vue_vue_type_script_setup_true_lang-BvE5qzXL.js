
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as K,am as W,a0 as X,r as x,a4 as h,k as Y,n as ee,a as i,o as r,b as g,f as e,w as l,i as b,ar as le,F as V,t as T,s as y,g as S,e as c,j as C,_ as ae}from"./index-CXflPANZ.js";import te from"./index-BZMP1j_v.js";import{U as ue}from"./user_supplier-Dph8s6XS.js";import{u as oe}from"./configuration_supplierLevel-CbnnkHte.js";import{u as ne}from"./user_customer-D2t3DRdH.js";const re=y("div",{class:"card-header"},[y("span",null,"基本信息")],-1),de={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},se=y("div",{class:"card-header"},[y("span",null,"权限信息")],-1),ie=y("div",{class:"card-header"},[y("span",null,"财务信息")],-1),ve=K({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(P){const B=ue(),q=oe(),M=ne(),U=W(),R=X("validateTopTabs"),I=x(),t=P,N=x(null);x({});const D=[{label:"公司",value:"company"},{label:"个人",value:"personal"}],v=h({supplierAccord:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择国家",trigger:"change"}],supplierLevelId:[{required:!0,message:"请选择供应商等级",trigger:"change"}],type:[{required:!0,message:"请选择供应商类型",trigger:"change"}]}),j=(m,u,d)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(t.leftTab.supplierPhone)?d():d(new Error("请输入合法手机号"))},z=(m,u,d)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.leftTab.emailAddress)?d():d(new Error("请输入合法邮箱"))},A=m=>{m&&(t.leftTab.countryType=m==="343"?1:2,m==="343"?(v.emailAddress&&delete v.emailAddress,v.supplierPhone=[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:j,trigger:"blur"}]):(v.supplierPhone&&delete v.supplierPhone,v.emailAddress=[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:z,trigger:"blur"}]))},F=()=>{t.leftTab.relevanceCountryIdList=[],s.checked&&s.countryList.map(m=>{t.leftTab.relevanceCountryIdList.push(m.id)})},$=()=>{I.value.showEdit()},O=()=>{s.checked=t.leftTab.relevanceCountryIdList.length===U.country.length},s=h({checked:!1,relatedCustomers:[],payMethod:B.payMethod,countryList:[],supplierLevelList:[]}),E=x("basicSettings"),w=async()=>{s.supplierLevelList=await q.getLevelNameList(),A(t.leftTab.subordinateCountryId)};return Y(async()=>{s.relatedCustomers=await M.getCustomerList(),s.countryList=await U.getCountry(),await w()}),ee(()=>{R(N.value)}),(m,u)=>{const d=i("el-option"),f=i("el-select"),o=i("el-form-item"),n=i("el-col"),p=i("el-input"),Z=ae,Q=i("el-button"),_=i("el-row"),k=i("el-card"),L=i("ElSwitch"),G=i("el-checkbox"),H=i("el-tab-pane"),J=i("el-tabs");return r(),g("div",null,[e(J,{modelValue:E.value,"onUpdate:modelValue":u[21]||(u[21]=a=>E.value=a)},{default:l(()=>[e(H,{label:"基础设置",name:"basicSettings"},{default:l(()=>[e(b(le),{ref_key:"formRef",ref:N,rules:b(v),model:t.leftTab,"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(k,{class:"box-card"},{header:l(()=>[re]),default:l(()=>[e(_,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(o,{label:"供应商类型",prop:"type"},{default:l(()=>[e(f,{modelValue:t.leftTab.type,"onUpdate:modelValue":u[0]||(u[0]=a=>t.leftTab.type=a),"value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(r(),g(V,null,T(D,a=>e(d,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"供应商名称",prop:"supplierAccord"},{default:l(()=>[e(p,{modelValue:t.leftTab.supplierAccord,"onUpdate:modelValue":u[1]||(u[1]=a=>t.leftTab.supplierAccord=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"供应商等级",prop:"supplierLevelId"},{default:l(()=>[e(f,{clearable:"",filterable:"",modelValue:t.leftTab.supplierLevelId,"onUpdate:modelValue":u[2]||(u[2]=a=>t.leftTab.supplierLevelId=a)},{empty:l(()=>[y("div",de,[S(" 暂无数据 "),e(Q,{type:"primary",link:"",size:"small",onClick:$},{default:l(()=>[S(" 快捷新增 "),e(Z,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"2px",margin:"0 2px"}})]),_:1})])]),default:l(()=>[(r(!0),g(V,null,T(b(s).supplierLevelList,a=>(r(),c(d,{key:a.tenantSupplierLevelId,value:a.tenantSupplierLevelId,label:a.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(o,{label:"所属国家",prop:"subordinateCountryId"},{default:l(()=>[e(f,{clearable:"",filterable:"",modelValue:t.leftTab.subordinateCountryId,"onUpdate:modelValue":u[3]||(u[3]=a=>t.leftTab.subordinateCountryId=a),onChange:A},{default:l(()=>[(r(!0),g(V,null,T(b(s).countryList,a=>(r(),c(d,{key:a.id,value:a.id,label:a.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"供应商姓名"},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.supplierName,"onUpdate:modelValue":u[4]||(u[4]=a=>t.leftTab.supplierName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"手机号码",prop:"supplierPhone"},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.supplierPhone,"onUpdate:modelValue":u[5]||(u[5]=a=>t.leftTab.supplierPhone=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(o,{label:"电子邮箱",prop:"emailAddress"},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.emailAddress,"onUpdate:modelValue":u[6]||(u[6]=a=>t.leftTab.emailAddress=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[t.leftTab.type==="company"?(r(),c(o,{key:0,label:"公司名称"},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.companyName,"onUpdate:modelValue":u[7]||(u[7]=a=>t.leftTab.companyName=a)},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1}),e(n,{span:8},{default:l(()=>[t.leftTab.type==="company"?(r(),c(o,{key:0,label:"法人姓名",prop:""},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.legalPersonName,"onUpdate:modelValue":u[8]||(u[8]=a=>t.leftTab.legalPersonName=a)},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1})]),_:1}),e(_,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[t.leftTab.type==="company"?(r(),c(o,{key:0,label:"公司税号",prop:""},{default:l(()=>[e(p,{clearable:"",modelValue:t.leftTab.taxID,"onUpdate:modelValue":u[9]||(u[9]=a=>t.leftTab.taxID=a)},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1}),e(k,{class:"box-card"},{header:l(()=>[se]),default:l(()=>[e(_,{gutter:10},{default:l(()=>[e(n,{span:3},{default:l(()=>[e(o,{label:"调查系统"},{default:l(()=>[e(L,{modelValue:t.leftTab.surveySystem,"onUpdate:modelValue":u[10]||(u[10]=a=>t.leftTab.surveySystem=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(o,{label:"B2B"},{default:l(()=>[e(L,{modelValue:t.leftTab.b2bStatus,"onUpdate:modelValue":u[11]||(u[11]=a=>t.leftTab.b2bStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(o,{label:"B2C"},{default:l(()=>[e(L,{modelValue:t.leftTab.b2cStatus,"onUpdate:modelValue":u[12]||(u[12]=a=>t.leftTab.b2cStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(o,{label:"供应商状态"},{default:l(()=>[e(L,{modelValue:t.leftTab.supplierStatus,"onUpdate:modelValue":u[13]||(u[13]=a=>t.leftTab.supplierStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:20},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(o,{label:"地区"},{default:l(()=>[e(f,{onChange:O,modelValue:t.leftTab.relevanceCountryIdList,"onUpdate:modelValue":u[15]||(u[15]=a=>t.leftTab.relevanceCountryIdList=a),clearable:"",filterable:"",multiple:"","collapse-tags":""},{header:l(()=>[e(G,{modelValue:b(s).checked,"onUpdate:modelValue":u[14]||(u[14]=a=>b(s).checked=a),onChange:F,style:{display:"flex",height:"unset"}},{default:l(()=>[S("全球")]),_:1},8,["modelValue"])]),default:l(()=>[(r(!0),g(V,null,T(b(s).countryList,a=>(r(),c(d,{key:a.id,value:a.id,label:a.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{class:"box-card"},{header:l(()=>[ie]),default:l(()=>[e(_,{gutter:20},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(o,{label:"付款方式"},{default:l(()=>[e(f,{modelValue:t.leftTab.payMethod,"onUpdate:modelValue":u[16]||(u[16]=a=>t.leftTab.payMethod=a)},{default:l(()=>[(r(!0),g(V,null,T(b(s).payMethod,a=>(r(),c(d,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"账户名称"},{default:l(()=>[e(p,{modelValue:t.leftTab.accountName,"onUpdate:modelValue":u[17]||(u[17]=a=>t.leftTab.accountName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(o,{label:"收款账号"},{default:l(()=>[e(p,{modelValue:t.leftTab.collectionAccount,"onUpdate:modelValue":u[18]||(u[18]=a=>t.leftTab.collectionAccount=a)},null,8,["modelValue"])]),_:1})]),_:1}),t.leftTab.payMethod===1?(r(),c(n,{key:0,span:8},{default:l(()=>[e(o,{label:"银行名称"},{default:l(()=>[e(p,{modelValue:t.leftTab.bankName,"onUpdate:modelValue":u[19]||(u[19]=a=>t.leftTab.bankName=a)},null,8,["modelValue"])]),_:1})]),_:1})):C("",!0),e(n,{span:8},{default:l(()=>[e(o,{label:"结算周期"},{default:l(()=>[e(f,{modelValue:t.leftTab.settlementCycle,"onUpdate:modelValue":u[20]||(u[20]=a=>t.leftTab.settlementCycle=a)},{default:l(()=>[e(d,{label:"net 30",value:30}),e(d,{label:"net 60",value:60})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})]),_:1},8,["modelValue"]),e(te,{ref_key:"EditRef",ref:I,onQueryData:w},null,512)])}}});export{ve as _};
