
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as ne,d as ae,aO as se,r as u,l as ie,b as _,q as re,o as l,e as P,g as a,w as o,j as t,h as m,I as y,s as ce,f as n,aN as pe,k as r,t as p,H as h,S as ue,bd as de,aQ as me,aR as _e,N as he,ap as fe,aI as ge,aJ as be,R as ye}from"./index-CmQVGKv8.js";import{_ as ve}from"./index-BeE3z3Ua.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-Dg3oJW2Y.js";import{_ as Se}from"./index-C8Hjyg6e.js";import"./index-BZ93YuCz.js";import"./index.vue_vue_type_script_setup_true_lang-BqGhEpJf.js";import"./sortable.esm-C0-Qcoum.js";const ke={list:b=>ne.post("callback/getProjectTerminationScreenDetail",b)},we=b=>(ge("data-v-3b01aabe"),b=b(),be(),b),Ce={class:"tableBig oneLine"},De={class:"copyId tableSmall"},Ne={class:"id oneLine"},je={class:"copyId tableSmall"},Te={key:0,class:"id oneLine"},Le={class:"copyId tableSmall"},xe={class:"id oneLine"},ze={class:"copyId tableSmall"},Be={class:"id oneLine"},Pe={class:"copyId tableSmall"},Re={class:"id oneLine"},He={class:"flex-c"},Ee=we(()=>p("span",null,"终止时间",-1)),Ue={class:"tableBig oneLine"},Ve=ae({name:"termination",__name:"index",setup(b){const{getParams:R,pagination:f,onSizeChange:H,onCurrentChange:E}=se(),{format:U}=de(),S=u(!1),L=u([]),V=u(""),c=u([]),k=u(!0),w=u(!1),C=u("default"),D=u(!1),x=u(),$=u("formSearch-termination"),N=u([{label:"会员",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),A=[{label:"内部",value:1},{label:"外部",value:2}],g=u({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function F(){f.value.page=1,v()}function M(i){H(i).then(()=>v())}function z(i=1){E(i).then(()=>v())}async function v(){try{S.value=!0;const i={...R(),...g.value};g.value.time&&g.value.time.length&&(i.beginTime=g.value.time[0]||"",i.endTime=g.value.time[1]||"");const s=await ke.list(i);L.value=s.data.projectTerminationScreenDetailInfoList,f.value.total=s.data.total,S.value=!1}catch{}finally{S.value=!1}}function q(){Object.assign(g.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),v()}function O(i){V.value=i}return ie(()=>{N.value.forEach(i=>{i.checked&&c.value.push(i.prop)}),v(),x.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:A,optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:5,show:!0,type:"input",modelName:"ipBelong",placeholder:"IP/所属国"},{index:6,show:!0,type:"datetimerange",modelName:"time",startplaceholder:"创建开始日期",endplaceholder:"创建结束日期"}]}),(i,s)=>{const Q=Se,J=_("ElDivider"),G=Ie,T=_("el-button"),K=me,W=_e,X=_("el-row"),d=_("el-table-column"),I=ve,j=_("el-text"),B=_("el-tag"),Y=he,Z=_("el-empty"),ee=_("el-table"),te=_("ElPagination"),oe=fe,le=re("loading");return l(),P("div",{class:ue({"absolute-container":t(D)})},[a(oe,null,{default:o(()=>[a(Q,{formSearchList:t(x),formSearchName:t($),onCurrentChange:z,onOnReset:q,model:t(g)},null,8,["formSearchList","formSearchName","model"]),a(J,{"border-style":"dashed"}),a(X,null,{default:o(()=>[a(G),a(W,null,{default:o(()=>[a(T,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),a(K,{border:t(k),"onUpdate:border":s[0]||(s[0]=e=>y(k)?k.value=e:null),tableAutoHeight:t(D),"onUpdate:tableAutoHeight":s[1]||(s[1]=e=>y(D)?D.value=e:null),checkList:t(c),"onUpdate:checkList":s[2]||(s[2]=e=>y(c)?c.value=e:null),columns:t(N),"onUpdate:columns":s[3]||(s[3]=e=>y(N)?N.value=e:null),"line-height":t(C),"onUpdate:lineHeight":s[4]||(s[4]=e=>y(C)?C.value=e:null),stripe:t(w),"onUpdate:stripe":s[5]||(s[5]=e=>y(w)?w.value=e:null),style:{"margin-left":"12px"},onQueryData:F},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((l(),n(ee,{border:t(k),data:t(L),size:t(C),stripe:t(w),onSelectionChange:O},{empty:o(()=>[a(Z,{image:t(pe),"image-size":300},null,8,["image"])]),default:o(()=>[a(d,{align:"center",type:"selection"}),t(c).includes("surveySource")?(l(),n(d,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",width:"120",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(l(),n(T,{key:0,class:"p-1",size:"small",type:"primary"},{default:o(()=>[m("内部会员")]),_:1})):r("",!0),e.surveySource===2?(l(),n(T,{key:1,class:"p-1",size:"small",type:"warning"},{default:o(()=>[m("外部会员")]),_:1})):r("",!0)]),_:1})):r("",!0),t(c).includes("projectName")?(l(),n(d,{key:1,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[p("div",Ce,h(e.projectName),1)]),_:1})):r("",!0),t(c).includes("projectId")?(l(),n(d,{key:2,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"},{default:o(({row:e})=>[p("div",De,[p("div",Ne,"ID: "+h(e.projectId),1),a(I,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("memberChildId")?(l(),n(d,{key:3,align:"center",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[p("div",je,[e.peopleType===1?(l(),P("div",Te,"ID: "+h(e.memberChildId),1)):r("",!0),a(I,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("supplierMemberChildId")?(l(),n(d,{key:4,align:"center",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:o(({row:e})=>[p("div",Le,[p("div",xe,[e.peopleType!==1?(l(),n(j,{key:0},{default:o(()=>[m(" ID: "+h(e.memberChildId),1)]),_:2},1024)):(l(),n(j,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.peopleType!==1?(l(),n(I,{key:0,class:"copy",content:e.memberChildId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("tenantSupplierId")?(l(),n(d,{key:5,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[p("div",ze,[p("div",Be,[e.tenantSupplierId?(l(),n(j,{key:0},{default:o(()=>[m(" ID: "+h(e.memberChildId),1)]),_:2},1024)):(l(),n(j,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.tenantSupplierId?(l(),n(I,{key:0,class:"copy",content:e.tenantSupplierId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("ipBelong")?(l(),n(d,{key:6,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国",width:"220"},{default:o(({row:e})=>[p("div",Pe,[p("div",Re,[a(B,{type:"primary"},{default:o(()=>[m(h(e.ipBelong.split("/")[1]),1)]),_:2},1024),m(" "+h(e.ipBelong.split("/")[0]),1)]),a(I,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("terminationTime")?(l(),n(d,{key:7,align:"center",prop:"terminationTime","show-overflow-tooltip":""},{header:o(()=>[p("div",He,[a(Y,{name:"ant-design:clock-circle-filled",color:"#45a0ff"}),Ee])]),default:o(({row:e})=>[a(B,{effect:"plain",type:"info"},{default:o(()=>[m(h(t(U)(e.terminationTime)),1)]),_:2},1024)]),_:1})):r("",!0),t(c).includes("notes")?(l(),n(d,{key:8,align:"center",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"},{default:o(({row:e})=>[p("div",Ue,h(e.notes),1)]),_:1})):r("",!0)]),_:1},8,["border","data","size","stripe"])),[[le,t(S)]]),a(te,{"current-page":t(f).page,total:t(f).total,"page-size":t(f).size,"page-sizes":t(f).sizes,layout:t(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Je=ye(Ve,[["__scopeId","data-v-3b01aabe"]]);export{Je as default};
