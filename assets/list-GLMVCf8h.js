
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-C94paLeK.js";import{d as ee,O as te,aK as ae,r as x,k as oe,G as I,J as ne,a as d,p as le,o as u,b as ie,f as t,w as a,q as V,i as o,e as m,j as g,g as s,H as C,az as se,S as re,E as H,aL as de,aB as ce,ap as ue,N as me,aG as pe,aH as fe,s as ge,R as _e}from"./index-BVH6EIfs.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-DziSGTPl.js";import{_ as be}from"./index.vue_vue_type_style_index_0_lang-DXm4orFc.js";import{a as w}from"./configuration_homepageSetting-w8GJKTLU.js";import"./index-BVDRNj0I.js";const ve=h=>(pe("data-v-32e8c34f"),h=h(),fe(),h),ye=ve(()=>ge("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ce=ee({name:"TenantTenantHomepageSettingList",__name:"list",setup(h){te();const{pagination:_,getParams:T,onSizeChange:N,onCurrentChange:F,onSortChange:R}=ae(),k=x(),e=x({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,row:"",id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],controlDataList:[]});oe(()=>{c(),e.value.formMode==="router"&&I.on("get-data-list",()=>{c()})}),ne(()=>{e.value.formMode==="router"&&I.off("get-data-list")});function c(){try{e.value.loading=!0;const i={...T(),...e.value.search.title&&{title:e.value.search.title}};w.list(i).then(n=>{e.value.loading=!1,e.value.controlDataList=n.data.controlData,e.value.dataList=n.data.data,_.value.total=Number(n.data.total)})}catch{}finally{e.value.loading=!1}}function G(i){N(i).then(()=>c())}function b(i=1){F(i).then(()=>c())}function E({prop:i,order:n}){R(i,n).then(()=>c())}function K(){e.value.formModeProps.id="",e.value.formModeProps.row="",e.value.formModeProps.visible=!0}function O(i){e.value.formModeProps.id=i.id,e.value.formModeProps.row=JSON.stringify(i),e.value.formModeProps.visible=!0}function S(i,n="编辑"){k.value.showEdit(i,n)}async function z(i){(await w.setHomePageTemplate({templateId:i.id})).status===1&&H.success({message:"设置成功",center:!0}),c()}function U(i){de.confirm(`确认删除「${i.title}」吗？`,"确认信息").then(()=>{w.del({id:i.id}).then(n=>{n.status===1&&H.success({message:"删除成功",center:!0}),c()})}).catch(()=>{})}function j(){Object.assign(e.value.search,{title:""}),c()}return(i,n)=>{const P=ce,p=d("ElTableColumn"),r=d("ElButton"),M=d("el-empty"),D=d("ElTable"),$=ue,A=d("ElInput"),L=d("ElFormItem"),y=me,J=d("ElForm"),q=Z,Q=d("ElDivider"),W=d("ElButtonGroup"),X=d("ElSpace"),Y=d("ElPagination"),B=le("loading");return u(),ie("div",{class:re({"absolute-container":o(e).tableAutoHeight})},[t($,null,{default:a(()=>[t(P,{title:"通用模板"}),V((u(),m(D,{class:"my-4",data:o(e).controlDataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:n[0]||(n[0]=l=>o(e).batch.selectionDataList=l)},{empty:a(()=>[t(M,{description:"暂无数据"})]),default:a(()=>[o(e).batch.enable?(u(),m(p,{key:0,type:"selection",align:"center",fixed:""})):g("",!0),t(p,{prop:"title",label:"标题"}),t(p,{prop:"isSet",align:"center",width:"100",label:"是否默认"},{default:a(({row:l})=>[s(C(l.isSet?"是":"否"),1)]),_:1}),t(p,{label:"操作",width:"250",align:"center",fixed:"right"},{default:a(l=>[l.row.isSet?g("",!0):(u(),m(r,{key:0,type:"primary",size:"small",plain:"",onClick:f=>z(l.row)},{default:a(()=>[s(" 设置为主页 ")]),_:2},1032,["onClick"])),t(r,{type:"primary",size:"small",plain:"",onClick:f=>S(l.row,"查看")},{default:a(()=>[s(" 查看 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,o(e).loading]])]),_:1}),t($,null,{default:a(()=>[t(P,{title:"自定义模板"}),t(q,{"show-toggle":!1},{default:a(({fold:l,toggle:f})=>[t(J,{model:o(e).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(L,{label:"标题"},{default:a(()=>[t(A,{modelValue:o(e).search.title,"onUpdate:modelValue":n[1]||(n[1]=v=>o(e).search.title=v),placeholder:"请输入标题，支持模糊查询",clearable:"",onKeydown:n[2]||(n[2]=se(v=>b(),["enter"])),onClear:n[3]||(n[3]=v=>b())},null,8,["modelValue"])]),_:1}),t(L,null,{default:a(()=>[t(r,{type:"primary",onClick:n[4]||(n[4]=v=>b())},{icon:a(()=>[t(y,{name:"i-ep:search"})]),default:a(()=>[s(" 筛选 ")]),_:1}),t(r,{onClick:j},{icon:a(()=>[ye]),default:a(()=>[s(" 重置 ")]),_:1}),t(r,{link:"",disabled:"",onClick:f},{icon:a(()=>[t(y,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[s(" "+C(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(Q,{"border-style":"dashed"}),t(X,{wrap:""},{default:a(()=>[t(r,{type:"primary",size:"default",onClick:K},{icon:a(()=>[t(y,{name:"i-ep:plus"})]),default:a(()=>[s(" 新增首页设置 ")]),_:1}),o(e).batch.enable?(u(),m(r,{key:0,size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[s(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):g("",!0),o(e).batch.enable?(u(),m(W,{key:1},{default:a(()=>[t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[s(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[s(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):g("",!0)]),_:1}),V((u(),m(D,{class:"my-4",data:o(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:E,onSelectionChange:n[5]||(n[5]=l=>o(e).batch.selectionDataList=l)},{empty:a(()=>[t(M,{description:"暂无数据"})]),default:a(()=>[o(e).batch.enable?(u(),m(p,{key:0,type:"selection",align:"center",fixed:""})):g("",!0),t(p,{prop:"title",label:"标题"}),t(p,{prop:"isSet",align:"center",width:"100",label:"是否默认"},{default:a(({row:l})=>[s(C(l.isSet?"是":"否"),1)]),_:1}),t(p,{label:"操作",width:"350",align:"center",fixed:"right"},{default:a(l=>[l.row.isSet?g("",!0):(u(),m(r,{key:0,type:"primary",size:"small",plain:"",onClick:f=>z(l.row)},{default:a(()=>[s(" 设置为主页 ")]),_:2},1032,["onClick"])),t(r,{type:"primary",size:"small",plain:"",onClick:f=>O(l.row)},{default:a(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),t(r,{type:"primary",size:"small",plain:"",onClick:f=>S(l.row)},{default:a(()=>[s(" 设计主页 ")]),_:2},1032,["onClick"]),t(r,{type:"danger",size:"small",plain:"",onClick:f=>U(l.row)},{default:a(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,o(e).loading]]),t(Y,{"current-page":o(_).page,total:o(_).total,"page-size":o(_).size,"page-sizes":o(_).sizes,layout:o(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(e).formMode==="dialog"||o(e).formMode==="drawer"?(u(),m(he,{key:0,id:o(e).formModeProps.id,row:o(e).formModeProps.row,modelValue:o(e).formModeProps.visible,"onUpdate:modelValue":n[6]||(n[6]=l=>o(e).formModeProps.visible=l),mode:o(e).formMode,onSuccess:c},null,8,["id","row","modelValue","mode"])):g("",!0),t(be,{ref_key:"homePageRef",ref:k,onFetchData:c},null,512)],2)}}}),Me=_e(Ce,[["__scopeId","data-v-32e8c34f"]]);export{Me as default};
