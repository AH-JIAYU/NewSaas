
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as A,d as fe,aM as ge,r as s,D as be,a as o,al as ve,o as f,b as k,f as e,w as t,am as M,a3 as x,a4 as he,g as n,G as d,e as H,i as g,P as ke,ak as ye,L as we,aO as Se,aP as Ce,p as ze,aK as Ie,aL as De,F as Ee,aE as xe,_ as Le}from"./index-13Balsai.js";import{_ as Ue}from"./index.vue_vue_type_style_index_0_lang-CSh2gVlG.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-DF9smcU1.js";import{U as Be}from"./user_supplier-B00bz6UN.js";import"./user_supplier-Jtjoj2u0.js";const R={list:p=>A.post("bill/getTenantSupplierBillList",p),changestatus:p=>A.post("bill/updateTenantSupplierBill",p)},Te=p=>(Ie("data-v-dc2984df"),p=p(),De(),p),$e=Te(()=>Ee("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=fe({name:"FinanceSupplierSettlementIndex",__name:"list",setup(p){const N=Be(),{getParams:Y,pagination:m,onSizeChange:O,onCurrentChange:j}=ge(),q=s(""),L=s(!0);s();const y=s(!1),U=s([]),w=s(!0);s(!1);const S=s("default"),C=s(!1),G=s([]),V=["待收票","待支付","已支付","已拒绝"],K=N.payMethod,B=s([{label:"项目ID",prop:"ID",sortable:!0,disableCheck:!0,checked:!0}]),u=s({supplierId:"",billStatus:"",time:[],beginTime:"",endTime:""}),T=s([]);function Q(i){G.value=i}function J(){Object.assign(u.value,{supplierId:0,billStatus:0,time:[],beginTime:"",endTime:""})}function W(i){O(i).then(()=>b())}function z(i=1){j(i).then(()=>b())}async function b(){L.value=!0;const i={...Y(),...u.value},a=await R.list(i);T.value=a.data.tenantSupplierBillInfoList,m.value.total=a.data.total,L.value=!1}async function I(i,a){(await R.changestatus({id:i,type:a})).status===1&&ye.success({message:"已发送"}),b()}return be(()=>{b()}),(i,a)=>{const $=o("el-input"),D=o("el-form-item"),X=o("el-date-picker"),Z=o("el-option"),ee=o("el-select"),F=we,E=o("ElButton"),te=o("ElFormItem"),le=o("el-form"),ae=Ve,oe=o("ElDivider"),ne=Ue,v=o("el-button"),se=Se,ie=Ce,P=o("el-row"),_=o("el-col"),c=o("el-table-column"),ue=o("ElTableColumn"),re=o("el-empty"),pe=o("el-table"),ce=o("ElPagination"),de=ze,me=ve("loading");return f(),k("div",{class:ke({"absolute-container":y.value})},[e(de,null,{default:t(()=>[e(ae,{"show-toggle":!1},{default:t(({fold:l,toggle:h})=>[e(le,{model:u.value,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(D,{label:""},{default:t(()=>[e($,{modelValue:u.value.supplierId,"onUpdate:modelValue":a[0]||(a[0]=r=>u.value.supplierId=r),clearable:"",placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),M(e(D,null,{default:t(()=>[e(X,{modelValue:u.value.time,"onUpdate:modelValue":a[1]||(a[1]=r=>u.value.time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[xe,!l]]),e(D,{label:""},{default:t(()=>[e(ee,{modelValue:u.value.billStatus,"onUpdate:modelValue":a[2]||(a[2]=r=>u.value.billStatus=r),placeholder:"状态",clearable:"",filterable:""},{default:t(()=>[(f(),k(x,null,he(V,(r,_e)=>e(Z,{key:r,label:r,value:_e+1},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(te,null,{default:t(()=>[e(E,{type:"primary",onClick:a[3]||(a[3]=r=>z())},{icon:t(()=>[e(F,{name:"i-ep:search"})]),default:t(()=>[n(" 筛选 ")]),_:1}),e(E,{onClick:J},{icon:t(()=>[$e]),default:t(()=>[n(" 重置 ")]),_:1}),e(E,{disabled:"",link:"",onClick:h},{icon:t(()=>[e(F,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[n(" "+d(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(oe,{"border-style":"dashed"}),e(P,{gutter:24},{default:t(()=>[e(ne),e(ie,null,{default:t(()=>[e(v,{size:"default",onClick:a[4]||(a[4]=()=>{})},{default:t(()=>[n(" 导出 ")]),_:1}),e(se,{border:w.value,"onUpdate:border":a[5]||(a[5]=l=>w.value=l),tableAutoHeight:y.value,"onUpdate:tableAutoHeight":a[6]||(a[6]=l=>y.value=l),checkList:U.value,"onUpdate:checkList":a[7]||(a[7]=l=>U.value=l),columns:B.value,"onUpdate:columns":a[8]||(a[8]=l=>B.value=l),"line-height":S.value,"onUpdate:lineHeight":a[9]||(a[9]=l=>S.value=l),stripe:C.value,"onUpdate:stripe":a[10]||(a[10]=l=>C.value=l),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),M((f(),H(pe,{ref_key:"tableSortRef",ref:q,style:{"margin-top":"10px"},"row-key":"id",data:T.value,border:w.value,size:S.value,stripe:C.value,onSelectionChange:Q},{empty:t(()=>[e(re,{description:"暂无数据"})]),default:t(()=>[e(c,{type:"expand"},{default:t(l=>[e(P,{gutter:20,style:{margin:"10px 0"}},{default:t(()=>[e(_,{span:1}),e(_,{span:3},{default:t(()=>[n(" 付款方式: "+d(g(K)[l.row.billStatus-1].label),1)]),_:2},1024),e(_,{span:3},{default:t(()=>[n("账户名称: "+d(l.row.accountName),1)]),_:2},1024),e(_,{span:3},{default:t(()=>[n("收款账号: "+d(l.row.collectionAccount),1)]),_:2},1024),e(_,{span:3},{default:t(()=>[n("银行名称: "+d(l.row.bankName),1)]),_:2},1024),e(_,{span:3},{default:t(()=>[n("结算周期: "+d(l.row.settlementCycle),1)]),_:2},1024)]),_:2},1024)]),_:1}),e(c,{prop:"supplierId","show-overflow-tooltip":"",align:"center",label:"供应商ID"}),e(c,{prop:"billAmount","show-overflow-tooltip":"",align:"center",label:"账单日期"}),e(c,{prop:"billAmount","show-overflow-tooltip":"",align:"center",label:"账单金额"}),e(c,{prop:"taxesFees","show-overflow-tooltip":"",align:"center",label:"税费"}),e(c,{prop:"payAmount","show-overflow-tooltip":"",align:"center",label:"实付金额"}),e(ue,{align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:t(({row:l})=>[n(d(V[l.billStatus-1]),1)]),_:1}),e(c,{align:"center",label:"操作",width:"170"},{default:t(({row:l})=>[l.billStatus===1?(f(),H(v,{key:0,size:"small",plain:"",type:"primary",onClick:h=>I(l.id,1)},{default:t(()=>[n(" 确认收票 ")]),_:2},1032,["onClick"])):l.billStatus===2?(f(),k(x,{key:1},[e(v,{size:"small",plain:"",onClick:h=>I(l.id,2)},{default:t(()=>[n(" 支付 ")]),_:2},1032,["onClick"]),e(v,{size:"small",plain:"",type:"danger",onClick:h=>I(l.id,3)},{default:t(()=>[n(" 拒绝 ")]),_:2},1032,["onClick"])],64)):(f(),k(x,{key:2},[n("- ")],64))]),_:1})]),_:1},8,["data","border","size","stripe"])),[[me,!1]]),e(ce,{"current-page":g(m).page,total:g(m).total,"page-size":g(m).size,"page-sizes":g(m).sizes,layout:g(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ne=Le(Fe,[["__scopeId","data-v-dc2984df"]]);export{Ne as default};
