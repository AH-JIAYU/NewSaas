
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{o as D}from"./apiLoading-2Qhhsr2Y.js";import{d as O,ao as Z,A as $,r as y,a5 as C,k as h,n as M,a as s,o as i,b as f,f as e,w as l,i as t,at as H,F as I,t as S,e as x,I as J,s as c}from"./index-DNJfIwMj.js";import{u as K}from"./survey_vipLevel-CkNwzV6-.js";import{u as Q}from"./survey_vipGroup-CNimirn1.js";const W=c("div",{class:"card-header"},[c("span",null,"基本信息")],-1),X=c("div",{class:"card-header"},[c("span",null,"权限信息")],-1),te=O({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(k){const A=Z(),E=K(),G=Q(),P=$("validateTopTabs"),T=k,_=y("basicSettings"),p=C({vipLevelList:[],vipGroupList:[],countryList:[]}),m=C({memberNickname:[{required:!0,message:"请输入会员昵称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择国家",trigger:"change"}]}),B=(b,r,d)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(o.value.memberPhone)?d():d(new Error("请输入合法手机号"))},q=(b,r,d)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.value.emailAddress)?d():d(new Error("请输入合法邮箱"))},N=b=>{b&&(o.value.countryType=b==="343"?1:2,b==="343"?(m.emailAddress&&delete m.emailAddress,m.memberPhone=[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:B,trigger:"blur"}]):(m.memberPhone&&delete m.memberPhone,m.emailAddress=[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:q,trigger:"blur"}]))};h(async()=>{await D(R()),N(o.value.subordinateCountryId)});const R=async()=>{p.vipLevelList=await E.getLevelNameList(),p.vipGroupList=await G.getGroupNameList(),p.countryList=await A.getCountry()},w=y(null),o=y(T.leftTab);return M(()=>{P(w.value)}),(b,r)=>{const d=s("el-input"),u=s("el-form-item"),n=s("el-col"),V=s("el-option"),g=s("el-select"),L=s("el-row"),U=s("el-card"),v=s("el-switch"),F=s("el-divider"),j=s("el-tab-pane"),z=s("el-tabs");return i(),f("div",null,[e(z,{modelValue:t(_),"onUpdate:modelValue":r[12]||(r[12]=a=>J(_)?_.value=a:null)},{default:l(()=>[e(j,{label:"会员信息",name:"basicSettings"},{default:l(()=>[e(t(H),{ref_key:"formRef",ref:w,model:t(o),rules:t(m),"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(U,{class:"box-card"},{header:l(()=>[W]),default:l(()=>[e(L,{gutter:24},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"会员名称",prop:"memberNickname"},{default:l(()=>[e(d,{modelValue:t(o).memberNickname,"onUpdate:modelValue":r[0]||(r[0]=a=>t(o).memberNickname=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"所属国家",prop:"subordinateCountryId"},{default:l(()=>[e(g,{clearable:"",filterable:"",modelValue:t(o).subordinateCountryId,"onUpdate:modelValue":r[1]||(r[1]=a=>t(o).subordinateCountryId=a),onChange:N},{default:l(()=>[(i(!0),f(I,null,S(t(p).countryList,a=>(i(),x(V,{key:a.id,value:a.id,label:a.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"会员姓名"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).memberName,"onUpdate:modelValue":r[2]||(r[2]=a=>t(o).memberName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"手机号码",prop:"memberPhone"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).memberPhone,"onUpdate:modelValue":r[3]||(r[3]=a=>t(o).memberPhone=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"电子邮箱",prop:"emailAddress"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).emailAddress,"onUpdate:modelValue":r[4]||(r[4]=a=>t(o).emailAddress=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"初始密码"},{default:l(()=>[e(d,{clearable:"",value:"123456",disabled:""})]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{class:"box-card"},{header:l(()=>[X]),default:l(()=>[e(L,{gutter:20},{default:l(()=>[e(n,{span:4},{default:l(()=>[e(u,{label:"会员状态"},{default:l(()=>[e(v,{"active-value":2,"inactive-value":1,modelValue:t(o).memberStatus,"onUpdate:modelValue":r[5]||(r[5]=a=>t(o).memberStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(u,{label:"B2B"},{default:l(()=>[e(v,{"active-value":2,"inactive-value":1,modelValue:t(o).b2bStatus,"onUpdate:modelValue":r[6]||(r[6]=a=>t(o).b2bStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(u,{label:"B2C"},{default:l(()=>[e(v,{"active-value":2,"inactive-value":1,modelValue:t(o).b2cStatus,"onUpdate:modelValue":r[7]||(r[7]=a=>t(o).b2cStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:5},{default:l(()=>[e(u,{label:"免审"},{default:l(()=>[e(v,{"active-value":2,"inactive-value":1,modelValue:t(o).exemptionTrial,"onUpdate:modelValue":r[8]||(r[8]=a=>t(o).exemptionTrial=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(u,{label:"随机身份"},{default:l(()=>[e(v,{"active-value":2,"inactive-value":1,modelValue:t(o).randomStatus,"onUpdate:modelValue":r[9]||(r[9]=a=>t(o).randomStatus=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F,{"content-position":"center"}),e(L,{gutter:20},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"会员等级",prop:"memberLevelId"},{default:l(()=>[e(g,{clearable:"",filterable:"",modelValue:t(o).memberLevelId,"onUpdate:modelValue":r[10]||(r[10]=a=>t(o).memberLevelId=a)},{default:l(()=>[(i(!0),f(I,null,S(t(p).vipLevelList,a=>(i(),x(V,{key:a.memberLevelId,value:a.memberLevelId,label:a.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"会员组"},{default:l(()=>[e(g,{clearable:"",filterable:"",modelValue:t(o).memberGroupId,"onUpdate:modelValue":r[11]||(r[11]=a=>t(o).memberGroupId=a)},{default:l(()=>[(i(!0),f(I,null,S(t(p).vipGroupList,a=>(i(),x(V,{key:a.memberGroupId,label:a.memberGroupName,value:a.memberGroupId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"])])}}});export{te as _};
