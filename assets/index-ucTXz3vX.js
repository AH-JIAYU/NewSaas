
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as f,d as H,aM as R,r as s,k as z,a as r,l as F,n as J,o as O,b as Q,f as e,w as l,p as m,g as _,E as S,t as j,aH as K,aI as W,Q as X}from"./index-BQjh9Koe.js";import{u as Y}from"./department-BNSAG56v.js";import"./department-CrCIjCWC.js";const g={list:n=>f.post("team/getGroupTeam",n),create:n=>f.post("team/insertGroupTeam",n),edit:n=>f.post("team/updateGroupTeam",n),delete:n=>f.post("team/deleteGroupTeam",n)},T=n=>(K("data-v-0301ec7f"),n=n(),W(),n),Z=T(()=>m("div",{class:"card-header"},[m("span",null,"组长")],-1)),ee=T(()=>m("div",{class:"card-header"},[m("span",null,"组员")],-1)),le={style:{flex:"auto"}},te=H({name:"Edit",__name:"index",emits:["success"],setup(n,{expose:B,emit:E}){R(),Y();const b=s(),h=E,w=s(""),N=s(),q=s(!1);s([]);const v=s(),u=s(!1),y=[{lable:"未收款",value:1},{lable:"部分收款",value:2},{lable:"已完结",value:3},{lable:"坏账",value:4}];s({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],search:{chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}}),s({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1});const a=s({userId:null,commission:""}),A={children:"children",label:"name"};s({invoiceCode:[{required:!0,trigger:"blur",message:"请输入姓名"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});async function x(i){console.log("row",i)}function L(){return new Promise(i=>{a.value.id?v.value&&v.value.validate(t=>{if(t){const o=j(a.value);g.edit(o).then(()=>{S.success({message:"编辑成功",center:!0}),h("success"),u.value=!1,i()})}}):v.value&&v.value.validate(t=>{t&&(delete a.value.id,g.create(a.value).then(()=>{S.success({message:"新增成功",center:!0}),h("success"),u.value=!1,i()}))})})}async function G(i){w.value=i!=null&&i.id?"编辑":"新增";const t=JSON.parse(i);a.value=t,console.log("form.value",a.value);const o={page:1,limit:10,groupId:a.value.id},c=await g.list(o);console.log("res",c),u.value=!0}return z(async()=>{b.value=[{id:"574449384760348672",name:"技术部",director:"574448371148066816",memberCount:null,commissionStatus:1,commission:100,commissionTyp:2,remark:"技术部",children:[{id:"574451094157332480",phone:null,email:"131631@qq.com",name:"小小",country:"DE",role:"admin",active:!0},{id:"574449041162964992",phone:null,email:"131616@qq.com",name:"王二",country:"CA",role:"admin",active:!0}]}],console.log("departmentList",b.value),N.value=new Date}),B({showEdit:G}),(i,t)=>{const o=r("el-table-column"),c=r("el-input"),V=r("el-empty"),k=r("el-table"),I=r("el-card"),M=r("el-tree"),D=r("el-col"),P=r("el-row"),C=r("el-button"),U=r("el-drawer"),$=F("loading");return J((O(),Q("div",null,[e(U,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=d=>u.value=d),title:w.value,size:"60%"},{footer:l(()=>[m("div",le,[e(C,{type:"",onClick:t[3]||(t[3]=d=>u.value=!1)},{default:l(()=>[_(" 取消 ")]),_:1}),e(C,{type:"primary",onClick:L},{default:l(()=>[_(" 确定 ")]),_:1})])]),default:l(()=>[e(I,{class:"box-card"},{header:l(()=>[Z]),default:l(()=>[e(k,{data:y,border:""},{empty:l(()=>[e(V,{description:"暂无数据"})]),default:l(()=>[e(o,{align:"center",type:"index",label:"序号",width:"80"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"员工ID"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(o,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"组内提成比例"},{default:l(({row:d})=>[e(c,{modelValue:a.value.invoiceAmount,"onUpdate:modelValue":t[0]||(t[0]=p=>a.value.invoiceAmount=p),modelModifiers:{number:!0},placeholder:"请输入提成比例",clearable:"",onBlur:p=>x(d)},{append:l(()=>[_("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1})]),_:1}),e(I,{class:"box-card"},{header:l(()=>[ee]),default:l(()=>[e(P,{gutter:20},{default:l(()=>[e(D,{class:"leftData",span:8},{default:l(()=>[e(c,{modelValue:a.value.invoiceAmount,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value.invoiceAmount=d),placeholder:"可输入关键字查找",clearable:""},null,8,["modelValue"]),e(M,{style:{"max-width":"600px","margin-top":"20px",height:"90%"},data:b.value,"show-checkbox":"","node-key":"id","default-expanded-keys":[2,3],"default-checked-keys":[5],props:A},null,8,["data"])]),_:1}),e(D,{span:16},{default:l(()=>[e(k,{data:y,border:""},{empty:l(()=>[e(V,{description:"暂无数据"})]),default:l(()=>[e(o,{align:"center",type:"index",label:"序号",width:"80"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"员工ID"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"}),e(o,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(o,{align:"center",width:"190",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:l(({row:d})=>[e(c,{modelValue:a.value.commission,"onUpdate:modelValue":t[2]||(t[2]=p=>a.value.commission=p),modelModifiers:{number:!0},placeholder:"提成比例",clearable:"",onBlur:p=>x(d)},{append:l(()=>[_("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])),[[$,q.value]])}}}),se=X(te,[["__scopeId","data-v-0301ec7f"]]);export{se as default};
