
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as T}from"./index-B2fAt7Ca.js";import{a as M}from"./user_cooperation-7YU9rz3g.js";import{d as V,r,n as w,a as v,o as u,b as p,f as c,w as m,y as d,g as _,i as o,z as L,F as x,t as k,j as C,A as I,L as D}from"./index-C6CLk4Z_.js";import"./index-DKawIwSv.js";import"./clipboard-CE9fCCin.js";const E={style:{height:"21.875rem",overflow:"auto"}},j={key:0,class:"idList"},A={style:{flex:"auto"}},B=V({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(z,{expose:y,emit:F}){const f=r(!1),l=r(!1);r();const e=r({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),g=async s=>{const{data:a}=await M.getTenantSupplierMemberNameInfo(s);return a},h=async s=>{e.value.supplierList=[],e.value.memberList=[],e.value.tenantList=[];for(let a of s.type){const i=await g({projectId:s.projectId,type:a});e.value.results.push({type:a,getTenantSupplierMemberNameList:i.getTenantSupplierMemberNameList}),e.value.results.forEach(t=>{t.type==2&&(e.value.supplierList=t.getTenantSupplierMemberNameList?t.getTenantSupplierMemberNameList:[]),t.type==3&&(e.value.memberList=t.getTenantSupplierMemberNameList?t.getTenantSupplierMemberNameList:[]),t.type==4&&(e.value.tenantList=t.getTenantSupplierMemberNameList?t.getTenantSupplierMemberNameList:[])})}};async function N(s){try{f.value=!0,h(s),f.value=!1,l.value=!0}catch{}finally{f.value=!1}}function b(){l.value=!1}return w(async()=>{}),y({showEdit:N}),(s,a)=>{const i=v("el-button"),t=T,S=v("el-dialog");return u(),p("div",null,[c(S,{modelValue:o(l),"onUpdate:modelValue":a[0]||(a[0]=n=>I(l)?l.value=n:null),title:"分配",width:"700","before-close":b},{footer:m(()=>[d("div",A,[c(i,{onClick:b},{default:m(()=>[_(" 关闭 ")]),_:1})])]),default:m(()=>[d("div",E,[o(e).memberList.length!=0?(u(),p("div",j,[c(i,{size:"small",type:"success"},{default:m(()=>[_("部门 "+L(o(e).memberList>1?o(e).memberList:""),1)]),_:1}),(u(!0),p(x,null,k(o(e).memberList,n=>(u(),p("div",{class:"item",key:n.id},[d("b",null,L(n.name),1),_("   "),d("span",null,"ID: "+L(n.id),1),c(t,{content:n.id},null,8,["content"])]))),128))])):C("",!0)])]),_:1},8,["modelValue"])])}}}),J=D(B,[["__scopeId","data-v-2ee47720"]]);export{J as default};
