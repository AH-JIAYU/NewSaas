
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ue,r as m,aM as Le,a3 as xe,l as Ae,a as p,al as Be,o as s,b as $,f as t,w as a,i as l,am as w,g as f,D as z,G as S,e as r,j as b,F as Pe,n as ze,Q as De,E as J,L as Te,aO as Me,aP as Re,ak as Ne,aK as Fe,aL as $e,C as V,aE as D,P as He}from"./index-B4ooH8ql.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-DIhMdtGz.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-BR30v6AQ.js";import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang-BXUGK8z-.js";import qe from"./index-DXsdCZNy.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-CH5nYdfC.js";import{u as Ge}from"./configuration_supplierLevel-qPumdakS.js";import{s as Ke}from"./apiLoading-DivxCBsL.js";import{a as T}from"./user_supplier-BwvNh0Fb.js";import{U as Je}from"./user_supplier-BG0rSo6G.js";import"./index.vue_vue_type_script_setup_true_lang-B18MEaxq.js";import"./index.vue_vue_type_script_setup_true_lang-BGrAKEWi.js";import"./user_customer-CXI7jkik.js";import"./user_customer-BThhfWnE.js";import"./otherFunctions_basicDictionary-CAAJZq4Q.js";import"./basicDictionary-LvQ-wF0l.js";import"./stagedData-BpalX-8m.js";import"./index.vue_vue_type_script_setup_true_lang-CyDxuDa0.js";const I=E=>(Fe("data-v-f870e4e4"),E=E(),$e(),E),We=I(()=>V("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe=["value"],Ze=I(()=>V("div",{class:"i-fluent-emoji-flat:check-mark-button w-1.5em h-1.5em"},null,-1)),et=I(()=>V("div",{class:"i-emojione:cross-mark-button w-1.5em h-1.5em"},null,-1)),tt=I(()=>V("div",{class:"i-fluent-emoji-flat:check-mark-button w-1.5em h-1.5em"},null,-1)),lt=I(()=>V("div",{class:"i-emojione:cross-mark-button w-1.5em h-1.5em"},null,-1)),at=Ue({name:"UserSupplierIndex",__name:"index",setup(E){const W=Je(),X=Ge(),H=m([]),{pagination:g,getParams:Z,onSizeChange:ee,onCurrentChange:te}=Le(),M=m(!1),j=m([]),le=m(),R=m(),O=m(),Y=m(),U=m(!0),L=m(!1),x=m("default"),c=m([]),A=m(!1),B=m([{label:"供应商id",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称+所属国",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"所属国",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"余额",checked:!0,sortable:!0,prop:"balanceUs"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"余额-人民币",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"供应商等级id",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"B2B|B2C"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),i=xe({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ae(){R.value.showEdit()}function oe(n){R.value.showEdit(n)}function ne(n){O.value.showEdit(n)}async function se(n){const{data:o}=await T.detail({tenantSupplierId:n.tenantSupplierId});if(o.remark!==n.remark){o.countryType=o.subordinateCountryId==="343"?1:2,o.remark=n.remark;const{status:h}=await T.edit(o);h===1&&J.success({message:"更新备注",center:!0}),P()}}async function q(n,o){const h={status:n,tenantSupplierId:o},{status:v}=await Ke(T.changestatus(h));v===1&&J.success({message:"修改成功"}),P(),W.TenantSupplierList=null}function P(){g.value.page=1,k()}function ie(){Object.assign(i,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),k()}function re(n){Y.value.showEdit(n)}function ue(n){ee(n).then(()=>k())}function Q(n=1){te(n).then(()=>k())}async function k(){M.value=!0;const n={...Z(),...i};i.time&&i.time.length&&(n.beginTime=i.time[0]||"",n.endTime=i.time[1]||"");const{data:o}=await T.list(n);j.value=o.getTenantSupplierInfoList,g.value.total=o.total,M.value=!1}function pe(n){le.value=n}return Ae(async()=>{B.value.forEach(n=>{n.checked&&c.value.push(n.prop)}),H.value=await X.getLevelNameList(),P()}),(n,o)=>{const h=p("el-input"),v=p("el-form-item"),N=p("el-option"),ce=p("el-select"),de=p("el-date-picker"),G=Te,F=p("ElButton"),me=p("ElFormItem"),fe=p("ElForm"),_e=Oe,be=p("ElDivider"),C=p("el-button"),he=je,ve=Me,ge=Re,ke=p("el-row"),_=p("el-table-column"),y=p("el-text"),K=p("ElSwitch"),ye=p("ElTableColumn"),Se=p("ElSpace"),Ce=p("el-empty"),we=p("el-table"),Ve=p("ElPagination"),Ie=Ne,Ee=Be("loading");return s(),$("div",{class:De({"absolute-container":l(A)})},[t(Ie,null,{default:a(()=>[t(_e,{"show-toggle":!1},{default:a(({fold:e,toggle:u})=>[t(fe,{model:l(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(i).tenantSupplierId,"onUpdate:modelValue":o[0]||(o[0]=d=>l(i).tenantSupplierId=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(i).supplierAccord,"onUpdate:modelValue":o[1]||(o[1]=d=>l(i).supplierAccord=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(i).supplierPhone,"onUpdate:modelValue":o[2]||(o[2]=d=>l(i).supplierPhone=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码"},null,8,["modelValue"])]),_:1}),w(t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(i).accountName,"onUpdate:modelValue":o[3]||(o[3]=d=>l(i).accountName=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称"},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),w(t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(i).emailAddress,"onUpdate:modelValue":o[4]||(o[4]=d=>l(i).emailAddress=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱"},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),w(t(v,{label:""},{default:a(()=>[t(ce,{modelValue:l(i).supplierStatus,"onUpdate:modelValue":o[5]||(o[5]=d=>l(i).supplierStatus=d),clearable:"",placeholder:"供应商状态"},{default:a(()=>[t(N,{label:"开启",value:2}),t(N,{label:"关闭",value:1}),t(N,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),w(t(v,{label:""},{default:a(()=>[t(de,{modelValue:l(i).time,"onUpdate:modelValue":o[6]||(o[6]=d=>l(i).time=d),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),t(me,null,{default:a(()=>[t(F,{type:"primary",onClick:o[7]||(o[7]=d=>Q())},{icon:a(()=>[t(G,{name:"i-ep:search"})]),default:a(()=>[f(" 筛选 ")]),_:1}),t(F,{onClick:ie},{icon:a(()=>[We]),default:a(()=>[f(" 重置 ")]),_:1}),t(F,{link:"",onClick:u},{icon:a(()=>[t(G,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[f(" "+z(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(be,{"border-style":"dashed"}),t(ke,null,{default:a(()=>[t(he,null,{default:a(()=>[t(C,{type:"primary",size:"default",onClick:ae},{default:a(()=>[f(" 新增 ")]),_:1})]),_:1}),t(ge,null,{default:a(()=>[t(C,{size:"default"},{default:a(()=>[f(" 导出 ")]),_:1}),t(ve,{border:l(U),"onUpdate:border":o[8]||(o[8]=e=>S(U)?U.value=e:null),tableAutoHeight:l(A),"onUpdate:tableAutoHeight":o[9]||(o[9]=e=>S(A)?A.value=e:null),checkList:l(c),"onUpdate:checkList":o[10]||(o[10]=e=>S(c)?c.value=e:null),columns:l(B),"onUpdate:columns":o[11]||(o[11]=e=>S(B)?B.value=e:null),"line-height":l(x),"onUpdate:lineHeight":o[12]||(o[12]=e=>S(x)?x.value=e:null),stripe:l(L),"onUpdate:stripe":o[13]||(o[13]=e=>S(L)?L.value=e:null),style:{"margin-left":"12px"},onQueryData:P},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),w((s(),r(we,{border:l(U),data:l(j),size:l(x),stripe:l(L),onSelectionChange:pe},{empty:a(()=>[t(Ce,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[t(_,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),l(c).includes("tenantSupplierId")?(s(),r(_,{key:0,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):b("",!0),l(c).includes("supplierAccord")?(s(),r(_,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:a(({row:e})=>[f(z(e.supplierAccord),1)]),_:1})):b("",!0),l(c).includes("balanceUs")?(s(),r(_,{key:2,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"})):b("",!0),l(c).includes("balanceUs")?(s(),r(_,{key:3,align:"center",prop:"balanceUs","show-overflow-tooltip":"",label:"可用余额"})):b("",!0),l(c).includes("amountPendingTrial")?(s(),r(_,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"})):b("",!0),l(c).includes("supplierLevelId")?(s(),r(_,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:a(({row:e})=>[(s(!0),$(Pe,null,ze(l(H),u=>(s(),$("div",{key:u.tenantSupplierLevelId,value:u.levelNameOrAdditionRatio},[u.tenantSupplierLevelId===e.supplierLevelId?(s(),r(y,{key:0,class:"mx-1"},{default:a(()=>[f(z(u.levelNameOrAdditionRatio),1)]),_:2},1024)):(s(),r(y,{key:1,class:"mx-1"},{default:a(()=>[f("-")]),_:1}))],8,Xe))),128))]),_:1})):b("",!0),l(c).includes("B2B|B2C")?(s(),r(_,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:a(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(s(),r(y,{key:0,class:"mx-1"},{default:a(()=>[Ze]),_:1})):(s(),r(y,{key:1,class:"mx-1"},{default:a(()=>[et]),_:1})),f(" | "),e.b2cStatus&&e.b2cStatus===2?(s(),r(y,{key:2,class:"mx-1"},{default:a(()=>[tt]),_:1})):(s(),r(y,{key:3,class:"mx-1"},{default:a(()=>[lt]),_:1}))]),_:1})):b("",!0),l(c).includes("settlementCycle")?(s(),r(_,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:a(({row:e})=>[f(z(e.settlementCycle?e.settlementCycle+"天":"-"),1)]),_:1})):b("",!0),l(c).includes("supplierStatus")?(s(),r(ye,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:a(({row:e})=>[e.supplierStatus===3?(s(),r(K,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":u=>e.supplierStatus=u,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:u=>q(u,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),r(K,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":u=>e.supplierStatus=u,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:u=>q(u,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):b("",!0),l(c).includes("createTime")?(s(),r(_,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):b("",!0),l(c).includes("remark")?(s(),r(_,{key:10,align:"center",prop:"remark","show-overflow-tooltip":"",label:"备注"},{default:a(({row:e})=>[t(h,{modelValue:e.remark,"onUpdate:modelValue":u=>e.remark=u,onBlur:u=>se(e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):b("",!0),t(_,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"250"},{default:a(({row:e})=>[t(Se,null,{default:a(()=>[t(C,{size:"small",plain:"",type:"primary",onClick:re},{default:a(()=>[f(" 加减款 ")]),_:1}),t(C,{size:"small",plain:"",type:"primary",onClick:u=>oe(e)},{default:a(()=>[f(" 编辑 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:u=>ne(e)},{default:a(()=>[f(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ee,l(M)]]),t(Ve,{"current-page":l(g).page,total:l(g).total,"page-size":l(g).size,"page-sizes":l(g).sizes,layout:l(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ue,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Ye,{ref_key:"editRef",ref:R,onFetchData:k},null,512),t(qe,{ref_key:"checkRef",ref:O,onFetchData:k},null,512),t(Qe,{ref_key:"plusMinusPaymentsRef",ref:Y,onFetchData:k},null,512)],2)}}}),St=He(at,[["__scopeId","data-v-f870e4e4"]]);export{St as default};
