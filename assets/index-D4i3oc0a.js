
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as T}from"./index-JOjef5fN.js";import{a as M}from"./user_cooperation-DHaPIGqm.js";import{d as V,r,n as w,a as L,o as u,b as p,f as c,w as m,y as d,g as _,i as l,z as b,F as x,t as k,j as C,A as I,L as D}from"./index-DlPOUnhP.js";import"./index-Dq-5DzK5.js";import"./clipboard-BHFOhrJK.js";const E={style:{height:"21.875rem",overflow:"auto"}},j={key:0,class:"idList"},A={style:{flex:"auto"}},B=V({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(z,{expose:g,emit:F}){const f=r(!1),o=r(!1);r();const t=r({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),v=async s=>{const{data:a}=await M.getTenantSupplierMemberNameInfo(s);return a},h=async s=>{for(let a of s.type){const i=await v({projectId:s.projectId,type:a});t.value.results.push({type:a,getTenantSupplierMemberNameList:i.getTenantSupplierMemberNameList}),t.value.results.forEach(e=>{e.type==2&&(t.value.supplierList=e.getTenantSupplierMemberNameList?e.getTenantSupplierMemberNameList:[]),e.type==3&&(t.value.memberList=e.getTenantSupplierMemberNameList?e.getTenantSupplierMemberNameList:[]),e.type==4&&(t.value.tenantList=e.getTenantSupplierMemberNameList?e.getTenantSupplierMemberNameList:[])})}};async function N(s){try{f.value=!0,h(s),f.value=!1,o.value=!0}catch{}finally{f.value=!1}}function y(){o.value=!1}return w(async()=>{}),g({showEdit:N}),(s,a)=>{const i=L("el-button"),e=T,S=L("el-dialog");return u(),p("div",null,[c(S,{modelValue:l(o),"onUpdate:modelValue":a[0]||(a[0]=n=>I(o)?o.value=n:null),title:"分配",width:"700","before-close":y},{footer:m(()=>[d("div",A,[c(i,{onClick:y},{default:m(()=>[_(" 关闭 ")]),_:1})])]),default:m(()=>[d("div",E,[l(t).memberList.length!=0?(u(),p("div",j,[c(i,{size:"small",type:"success"},{default:m(()=>[_("部门 "+b(l(t).memberList>1?l(t).memberList:""),1)]),_:1}),(u(!0),p(x,null,k(l(t).memberList,n=>(u(),p("div",{class:"item",key:n.id},[d("b",null,b(n.name),1),_("   "),d("span",null,"ID: "+b(n.id),1),c(e,{content:n.id},null,8,["content"])]))),128))])):C("",!0)])]),_:1},8,["modelValue"])])}}}),J=D(B,[["__scopeId","data-v-a265b2c8"]]);export{J as default};
