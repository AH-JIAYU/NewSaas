
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as xe,r as _,aN as ze,a5 as Pe,c as $e,l as Ne,b as r,q as Te,o as u,e as De,g as l,w as a,j as n,az as V,s as I,h as c,H as h,I as C,f as p,k as g,S as Be,bc as Re,E as X,N as Me,aP as He,aQ as Fe,bb as Ke,ap as qe,aI as Ye,aJ as Oe,t as L,aq as B,R as je}from"./index-Ch_t1wnJ.js";import{_ as Je}from"./index.vue_vue_type_style_index_0_lang-tj1dU9Fq.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-WglbtpEF.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-B166GiI1.js";import We from"./index-1FNilhVQ.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-R20LLL9g.js";import{u as Ze}from"./index-fkHkdTxL.js";import{s as et}from"./apiLoading-DyaEYmQL.js";import{a as R}from"./user_supplier-BoPKopT3.js";import{U as tt}from"./user_supplier-C4jerCHi.js";import"./index.vue_vue_type_script_setup_true_lang-C75AEY2z.js";import"./index.vue_vue_type_script_setup_true_lang-C1X-EUZi.js";import"./user_customer-BwhD2fIR.js";import"./user_customer-B4PigaPU.js";import"./stagedData-D4vxuKid.js";import"./index.vue_vue_type_script_setup_true_lang-C5hHMgM3.js";const E=A=>(Ye("data-v-ae3a833e"),A=A(),Oe(),A),lt=E(()=>L("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),at=E(()=>L("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),nt=E(()=>L("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),ot=E(()=>L("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),it=E(()=>L("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),st=xe({name:"supplier",__name:"index",setup(A){const Z=tt(),{format:ee}=Re(),te=Ze(),K=_([]),{pagination:k,getParams:le,onSizeChange:ae,onCurrentChange:ne}=ze(),U=_(!1),q=_([]),oe=_(),M=_(),Y=_(),O=_(),x=_(!0),z=_(!1),P=_("default"),d=_([]),$=_(!1),N=_([{label:"供应商ID",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"国家",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"可用余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"b2bStatus"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),i=Pe({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ie(){M.value.showEdit()}function se(o){M.value.showEdit(o)}function re(o){Y.value.showEdit(o)}async function ue(o){const{data:e}=await R.detail({tenantSupplierId:o.tenantSupplierId});if(e.remark!==o.remark){e.countryType=e.subordinateCountryId==="343"?1:2,e.remark=o.remark;const{status:b}=await R.edit(e);b===1&&X.success({message:"更新备注",center:!0}),T()}}async function j(o,e){const b={status:o,tenantSupplierId:e},{status:y}=await et(R.changestatus(b));y===1&&X.success({message:"修改成功"}),T(),Z.TenantSupplierList=null}function T(){k.value.page=1,S()}function pe(){Object.assign(i,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),S()}function ce(o){O.value.showEdit(JSON.stringify(o))}function de(o){ae(o).then(()=>S())}function v(o=1){ne(o).then(()=>S())}async function S(){try{U.value=!0;const o={...le(),...i};i.time&&i.time.length&&(o.beginTime=i.time[0]||"",o.endTime=i.time[1]||"");const{data:e}=await R.list(o);q.value=e.getTenantSupplierInfoList,k.value.total=e.total,U.value=!1}catch{}finally{U.value=!1}}function me(o){oe.value=o}const fe=$e(()=>o=>{const e=K.value.find(b=>b.tenantSupplierLevelId===o);return e==null?void 0:e.levelNameOrAdditionRatio});return Ne(async()=>{N.value.forEach(o=>{o.checked&&d.value.push(o.prop)}),K.value=await te.getLevelNameList(),T()}),(o,e)=>{const b=r("el-input"),y=r("el-form-item"),H=r("el-option"),_e=r("el-select"),be=r("el-date-picker"),J=Me,F=r("ElButton"),ge=r("ElFormItem"),ve=r("ElForm"),ye=Qe,he=r("ElDivider"),w=r("el-button"),ke=Je,Se=He,Ce=Fe,we=r("el-row"),f=r("el-table-column"),Q=r("ElSwitch"),G=Ke,W=r("el-tag"),D=r("el-text"),Ve=r("ElSpace"),Ie=r("el-empty"),Le=r("el-table"),Ee=r("ElPagination"),Ae=qe,Ue=Te("loading");return u(),De("div",{class:Be({"absolute-container":n($)})},[l(Ae,null,{default:a(()=>[l(ye,{"show-toggle":!1},{default:a(({fold:t,toggle:m})=>[l(ve,{model:n(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(y,{label:""},{default:a(()=>[l(b,{modelValue:n(i).tenantSupplierId,"onUpdate:modelValue":e[0]||(e[0]=s=>n(i).tenantSupplierId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:e[1]||(e[1]=V(s=>v(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:a(()=>[l(b,{modelValue:n(i).supplierAccord,"onUpdate:modelValue":e[2]||(e[2]=s=>n(i).supplierAccord=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称",onKeydown:e[3]||(e[3]=V(s=>v(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:a(()=>[l(b,{modelValue:n(i).supplierPhone,"onUpdate:modelValue":e[4]||(e[4]=s=>n(i).supplierPhone=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码",onKeydown:e[5]||(e[5]=V(s=>v(),["enter"]))},null,8,["modelValue"])]),_:1}),I(l(y,{label:""},{default:a(()=>[l(b,{modelValue:n(i).accountName,"onUpdate:modelValue":e[6]||(e[6]=s=>n(i).accountName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称",onKeydown:e[7]||(e[7]=V(s=>v(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[B,!t]]),I(l(y,{label:""},{default:a(()=>[l(b,{modelValue:n(i).emailAddress,"onUpdate:modelValue":e[8]||(e[8]=s=>n(i).emailAddress=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱",onKeydown:e[9]||(e[9]=V(s=>v(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[B,!t]]),I(l(y,{label:""},{default:a(()=>[l(_e,{modelValue:n(i).supplierStatus,"onUpdate:modelValue":e[10]||(e[10]=s=>n(i).supplierStatus=s),clearable:"",placeholder:"供应商状态",onChange:e[11]||(e[11]=s=>v())},{default:a(()=>[l(H,{label:"开启",value:2}),l(H,{label:"关闭",value:1}),l(H,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),I(l(y,{label:""},{default:a(()=>[l(be,{modelValue:n(i).time,"onUpdate:modelValue":e[12]||(e[12]=s=>n(i).time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true",onChange:e[13]||(e[13]=s=>v())},null,8,["modelValue"])]),_:2},1536),[[B,!t]]),l(ge,null,{default:a(()=>[l(F,{type:"primary",onClick:e[14]||(e[14]=s=>v())},{icon:a(()=>[l(J,{name:"i-ep:search"})]),default:a(()=>[c(" 筛选 ")]),_:1}),l(F,{onClick:pe},{icon:a(()=>[lt]),default:a(()=>[c(" 重置 ")]),_:1}),l(F,{link:"",onClick:m},{icon:a(()=>[l(J,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[c(" "+h(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(he,{"border-style":"dashed"}),l(we,null,{default:a(()=>[l(ke,null,{default:a(()=>[l(w,{type:"primary",size:"default",onClick:ie},{default:a(()=>[c(" 新增 ")]),_:1})]),_:1}),l(Ce,null,{default:a(()=>[l(w,{size:"default"},{default:a(()=>[c(" 导出 ")]),_:1}),l(Se,{border:n(x),"onUpdate:border":e[15]||(e[15]=t=>C(x)?x.value=t:null),tableAutoHeight:n($),"onUpdate:tableAutoHeight":e[16]||(e[16]=t=>C($)?$.value=t:null),checkList:n(d),"onUpdate:checkList":e[17]||(e[17]=t=>C(d)?d.value=t:null),columns:n(N),"onUpdate:columns":e[18]||(e[18]=t=>C(N)?N.value=t:null),"line-height":n(P),"onUpdate:lineHeight":e[19]||(e[19]=t=>C(P)?P.value=t:null),stripe:n(z),"onUpdate:stripe":e[20]||(e[20]=t=>C(z)?z.value=t:null),style:{"margin-left":"12px"},onQueryData:T},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((u(),p(Le,{border:n(x),data:n(q),size:n(P),stripe:n(z),onSelectionChange:me},{empty:a(()=>[l(Ie,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(f,{align:"center",type:"selection"}),n(d).includes("supplierStatus")?(u(),p(f,{key:0,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:a(({row:t})=>[t.supplierStatus===3?(u(),p(Q,{key:0,modelValue:t.supplierStatus,"onUpdate:modelValue":m=>t.supplierStatus=m,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:m=>j(m,t.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(u(),p(Q,{key:1,modelValue:t.supplierStatus,"onUpdate:modelValue":m=>t.supplierStatus=m,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:m=>j(m,t.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):g("",!0),n(d).includes("supplierAccord")?(u(),p(f,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:a(({row:t})=>[c(h(t.supplierAccord),1)]),_:1})):g("",!0),n(d).includes("tenantSupplierId")?(u(),p(f,{key:2,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"})):g("",!0),n(d).includes("supplierLevelId")?(u(),p(f,{key:3,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:a(({row:t})=>[c(h(n(fe)(t.supplierLevelId)),1)]),_:1})):g("",!0),n(d).includes("balanceHumanLife")?(u(),p(f,{key:4,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:a(({row:t})=>[l(G),c(h(t.balanceHumanLife||0),1)]),_:1})):g("",!0),n(d).includes("amountPendingTrial")?(u(),p(f,{key:5,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:a(({row:t})=>[l(G),c(h(t.amountPendingTrial||0),1)]),_:1})):g("",!0),n(d).includes("countryAffiliationName")?(u(),p(f,{key:6,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"},{default:a(({row:t})=>[l(W,{type:"primary"},{default:a(()=>[c(h(t.countryAffiliationName),1)]),_:2},1024)]),_:1})):g("",!0),n(d).includes("b2bStatus")?(u(),p(f,{key:7,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:a(({row:t})=>[t.b2bStatus&&t.b2bStatus===2?(u(),p(D,{key:0,class:"mx-1"},{default:a(()=>[at]),_:1})):(u(),p(D,{key:1,class:"mx-1"},{default:a(()=>[nt]),_:1})),c(" | "),t.b2cStatus&&t.b2cStatus===2?(u(),p(D,{key:2,class:"mx-1"},{default:a(()=>[ot]),_:1})):(u(),p(D,{key:3,class:"mx-1"},{default:a(()=>[it]),_:1}))]),_:1})):g("",!0),n(d).includes("settlementCycle")?(u(),p(f,{key:8,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:a(({row:t})=>[c(h(t.settlementCycle?t.settlementCycle+"天":"-"),1)]),_:1})):g("",!0),n(d).includes("createTime")?(u(),p(f,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建"},{default:a(({row:t})=>[l(W,{effect:"plain",type:"info"},{default:a(()=>[c(h(n(ee)(t.createTime)),1)]),_:2},1024)]),_:1})):g("",!0),n(d).includes("remark")?(u(),p(f,{key:10,align:"center",prop:"remark",width:"180",label:"备注"},{default:a(({row:t})=>[l(b,{modelValue:t.remark,"onUpdate:modelValue":m=>t.remark=m,onBlur:m=>ue(t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):g("",!0),l(f,{align:"center",prop:"i",label:"操作",fixed:"right",width:"250"},{default:a(({row:t})=>[l(Ve,null,{default:a(()=>[l(w,{size:"small",plain:"",type:"primary",onClick:m=>ce(t)},{default:a(()=>[c(" 加减款 ")]),_:2},1032,["onClick"]),l(w,{size:"small",plain:"",type:"primary",onClick:m=>se(t)},{default:a(()=>[c(" 编辑 ")]),_:2},1032,["onClick"]),l(w,{size:"small",plain:"",type:"primary",onClick:m=>re(t)},{default:a(()=>[c(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ue,n(U)]]),l(Ee,{"current-page":n(k).page,total:n(k).total,"page-size":n(k).size,"page-sizes":n(k).sizes,layout:n(k).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:de,onCurrentChange:v},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Ge,{ref_key:"editRef",ref:M,onFetchData:S},null,512),l(We,{ref_key:"checkRef",ref:Y,onFetchData:S},null,512),l(Xe,{ref_key:"plusMinusPaymentsRef",ref:O,onFetchData:S},null,512)],2)}}}),wt=je(st,[["__scopeId","data-v-ae3a833e"]]);export{wt as default};
