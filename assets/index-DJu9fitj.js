
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as fe,aF as ge,r as c,a1 as ve,B as he,a as l,aj as be,o as P,b as Ce,f as e,w as o,i as a,ak as B,g as r,D as we,E as f,e as ke,O as ye,ai as T,aG as Se,K as Ee,aH as Ve,aI as ze,q as xe,az as Ie,aA as Ue,l as De,aK as M,_ as $e}from"./index-AWq_1fCc.js";import{_ as Fe}from"./index.vue_vue_type_style_index_0_lang-PwzNCLxr.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-DDE9p2qD.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-BjJdJ0GO.js";import Re from"./index-bXJRxme1.js";import{a as R}from"./user_customer-Um3Ufjwv.js";import"./index.vue_vue_type_script_setup_true_lang-4uRg-9q9.js";import"./index-BmCXmmNY.js";import"./index.vue_vue_type_script_setup_true_lang-DIyyS2W_.js";const Ae=v=>(Ie("data-v-7d8b944a"),v=v(),Ue(),v),He=Ae(()=>De("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Le=fe({name:"UserCustomerIndex",__name:"index",setup(v){const{pagination:u,getParams:Q,onSizeChange:q,onCurrentChange:j}=ge(),S=c(!1),A=c([]),E=c(),H=c(),K=c(),h=c(!0),b=c(!1),C=c(!1),w=c("default"),V=c([]),z=c([{label:"等级名称",prop:"name",sortable:!0,disableCheck:!0,checked:!0}]);function O(){E.value.showEdit()}function G(s){E.value.showEdit(s)}async function x(s,n,_){const U={status:s,operationalType:n,tenantCustomerId:_},{status:k}=await R.editState(U);k===1&&T.success({message:"修改成功"})}function J(s){H.value.showEdit(s)}function W(s){Se.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:n}=await R.delete({tenantCustomerId:s.tenantCustomerId});n===1&&T.success({message:"删除成功"}),d()}).catch(()=>{})}const p=ve({customerShortName:"",customerStatus:null});function X(s){q(s).then(()=>I())}function L(s=1){j(s).then(()=>I())}function Y(){Object.assign(p,{customerShortName:"",customerStatus:null}),d()}function d(){u.value.page=1,I()}async function I(){S.value=!0;const s={...Q(),...p},{data:n}=await R.list(s);A.value=n.getTenantCustomerInfoList,u.value.total=Number(n.total),S.value=!1}function Z(s){K.value=s}return he(()=>{d()}),(s,n)=>{const _=l("el-option"),U=l("el-input"),k=l("el-form-item"),ee=l("el-select"),D=Ee,$=l("ElButton"),te=l("ElFormItem"),oe=l("ElForm"),ne=Ne,ae=l("ElDivider"),g=l("el-button"),le=Fe,se=Ve,ie=ze,ce=l("el-row"),m=l("el-table-column"),F=l("ElSwitch"),N=l("ElTableColumn"),re=l("ElSpace"),ue=l("el-empty"),pe=l("el-table"),me=l("ElPagination"),de=xe,_e=be("loading");return P(),Ce("div",{class:ye({"absolute-container":a(C)})},[e(de,null,{default:o(()=>[e(ne,{"show-toggle":!1},{default:o(({fold:t,toggle:i})=>[e(oe,{model:a(p).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[B(e(k,null,{default:o(()=>[e(U,{modelValue:a(p).customerShortName,"onUpdate:modelValue":n[0]||(n[0]=y=>a(p).customerShortName=y),clearable:"",placeholder:"客户简称"},{default:o(()=>[e(_,{label:"name",value:"name"})]),_:1},8,["modelValue"])]),_:2},1536),[[M,!t]]),B(e(k,null,{default:o(()=>[e(ee,{modelValue:a(p).customerStatus,"onUpdate:modelValue":n[1]||(n[1]=y=>a(p).customerStatus=y),clearable:"",placeholder:"客户状态"},{default:o(()=>[e(_,{label:"禁用",value:1}),e(_,{label:"启用",value:2}),e(_,{label:"风险暂停",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[M,!t]]),e(te,null,{default:o(()=>[e($,{type:"primary",onClick:n[2]||(n[2]=y=>L())},{icon:o(()=>[e(D,{name:"i-ep:search"})]),default:o(()=>[r(" 筛选 ")]),_:1}),e($,{onClick:Y},{icon:o(()=>[He]),default:o(()=>[r(" 重置 ")]),_:1}),e($,{disabled:"",link:"",onClick:i},{icon:o(()=>[e(D,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[r(" "+we(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(ae,{"border-style":"dashed"}),e(ce,null,{default:o(()=>[e(le,null,{default:o(()=>[e(g,{type:"primary",size:"default",onClick:O},{icon:o(()=>[e(D,{name:"i-ep:plus"})]),default:o(()=>[r(" 新增 ")]),_:1})]),_:1}),e(ie,null,{default:o(()=>[e(g,{size:"default"},{default:o(()=>[r(" 导出 ")]),_:1}),e(se,{border:a(h),"onUpdate:border":n[3]||(n[3]=t=>f(h)?h.value=t:null),tableAutoHeight:a(C),"onUpdate:tableAutoHeight":n[4]||(n[4]=t=>f(C)?C.value=t:null),checkList:a(V),"onUpdate:checkList":n[5]||(n[5]=t=>f(V)?V.value=t:null),columns:a(z),"onUpdate:columns":n[6]||(n[6]=t=>f(z)?z.value=t:null),"line-height":a(w),"onUpdate:lineHeight":n[7]||(n[7]=t=>f(w)?w.value=t:null),stripe:a(b),"onUpdate:stripe":n[8]||(n[8]=t=>f(b)?b.value=t:null),style:{"margin-left":"12px"},onQueryData:d},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),B((P(),ke(pe,{border:a(h),data:a(A),size:a(w),stripe:a(b),onSelectionChange:Z},{empty:o(()=>[e(ue,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(m,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),e(m,{align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"}),e(m,{align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"}),e(m,{align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额($/月)"}),e(m,{align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"}),e(m,{align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"}),e(N,{align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:o(({row:t})=>[e(F,{modelValue:t.customerStatus,"onUpdate:modelValue":i=>t.customerStatus=i,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:i=>x(i,1,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(N,{align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:o(({row:t})=>[e(F,{modelValue:t.antecedentQuestionnaire,"onUpdate:modelValue":i=>t.antecedentQuestionnaire=i,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:i=>x(i,2,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(N,{align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:o(({row:t})=>[e(F,{modelValue:t.riskControl,"onUpdate:modelValue":i=>t.riskControl=i,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:i=>x(i,3,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(m,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"200"},{default:o(({row:t})=>[e(re,null,{default:o(()=>[e(g,{size:"small",plain:"",type:"primary",onClick:i=>G(t)},{default:o(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),e(g,{type:"primary",plain:"",size:"small",onClick:i=>J(t)},{default:o(()=>[r(" 详情 ")]),_:2},1032,["onClick"]),e(g,{type:"danger",plain:"",size:"small",onClick:i=>W(t)},{default:o(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[_e,a(S)]]),e(me,{"current-page":a(u).page,total:a(u).total,"page-size":a(u).size,"page-sizes":a(u).sizes,layout:a(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:L},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Be,{ref_key:"editRef",ref:E,onFetchData:d},null,512),e(Re,{ref_key:"checkRef",ref:H,onFetchData:d},null,512)]),_:1})],2)}}}),Je=$e(Le,[["__scopeId","data-v-7d8b944a"]]);export{Je as default};
