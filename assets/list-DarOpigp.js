
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as V,d as y,r as c,D as T,ak as _,a as n,al as C,am as k,o as D,b as A,f as e,w as l,g as E,at as B,p as N,_ as M}from"./index-BGuSShNg.js";import{C as W}from"./clipboard-Iz46j3VN.js";const b={list:()=>V.post("supplier-config/get/getSupplierConfig"),create:d=>V.post("supplier-config/insert/insertSupplierConfig",d),edit:d=>V.post("/supplier-config/update/updateSupplierConfig",d)},$=y({name:"SettingSiteSettingList",__name:"list",setup(d){const u=c(!1);({VITE_APP_SETTING:"false",VITE_APP_TITLE:"Fantastic-admin 专业版",VITE_APP_API_BASEURL:"http://47.96.98.102:9100",VITE_APP_DEBUG_TOOL:"",VITE_BUILD_MOCK:"false",VITE_BUILD_SOURCEMAP:"false",VITE_BUILD_COMPRESS:"gzip,brotli",VITE_BUILD_ARCHIVE:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}).VITE_APP_SUPPLIER;const i=c(),t=c({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:""}),x=c({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}]});T(()=>{v()});async function v(){u.value=!0;const{data:s}=await b.list();t.value=s||t.value,u.value=!1}const U=new W(".btn");U.on("success",function(s){_.success({message:"复制成功",center:!0}),s.clearSelection()}),U.on("error",function(s){_.error({message:"复制失败",center:!0})});function I(){t.value.id===""?i.value&&i.value.validate(s=>{s&&(u.value=!0,delete t.value.id,b.create(t.value).then(()=>{u.value=!1,v(),_.success({message:"新增成功",center:!0})}))}):i.value&&i.value.validate(s=>{if(s)try{let{id:a,keyWords:g,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:m,webName:O}=t.value;const p={id:a,keyWords:g,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:m,webName:O};u.value=!0,b.edit(p).then(()=>{u.value=!1,v(),_.success({message:"修改成功",center:!0})})}catch{}})}return(s,a)=>{const g=B,f=n("el-switch"),o=n("el-form-item"),m=n("el-col"),O=n("el-row"),p=n("el-input"),L=n("el-text"),w=n("el-button"),P=n("el-form"),R=N,S=C("loading");return k((D(),A("div",null,[e(g,{title:"站点设置管理"}),e(R,null,{default:l(()=>[e(P,{ref_key:"formRef",ref:i,model:t.value,rules:x.value,"label-width":"100px",inline:!1},{default:l(()=>[e(O,{gutter:20},{default:l(()=>[e(m,{span:3},{default:l(()=>[e(o,{label:"注册开关"},{default:l(()=>[e(f,{modelValue:t.value.registerOffOrOn,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value.registerOffOrOn=r),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:6},{default:l(()=>[e(o,{label:"注册审核"},{default:l(()=>[e(f,{modelValue:t.value.registerExamineOffOrOn,"onUpdate:modelValue":a[1]||(a[1]=r=>t.value.registerExamineOffOrOn=r),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{label:"网站名称",prop:"webName"},{default:l(()=>[e(p,{modelValue:t.value.webName,"onUpdate:modelValue":a[2]||(a[2]=r=>t.value.webName=r),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(o,{label:"keyWords"},{default:l(()=>[e(p,{modelValue:t.value.keyWords,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.keyWords=r),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(o,{label:"供应商网址",prop:"supplierURL"},{default:l(()=>[e(p,{modelValue:t.value.supplierURL,"onUpdate:modelValue":a[4]||(a[4]=r=>t.value.supplierURL=r),style:{width:"8rem"}},null,8,["modelValue"]),e(L,{class:"mx-1"},{default:l(()=>[E(".front-supplier.surveyssaas.com")]),_:1}),e(w,{class:"btn","data-clipboard-text":`${t.value.supplierURL}.front-supplier-web.surveyssaas.com`,type:"primary",link:""},{default:l(()=>[E("复制")]),_:1},8,["data-clipboard-text"])]),_:1}),e(o,null,{default:l(()=>[e(w,{type:"primary",onClick:I},{default:l(()=>[E(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])),[[S,u.value]])}}}),q=M($,[["__scopeId","data-v-d9f727a6"]]);export{q as default};
