
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as z,r as y,aN as H,n as F,a as h,q as M,o as s,b as g,f as o,w as a,y as k,g as c,s as P,i as l,e as r,aM as R,z as f,j as n,bf as q,be as U,aH as W,aI as $,L as G}from"./index-CIpj5PiF.js";import{c as J}from"./user_customer-C5KWuZW5.js";const v=b=>(W("data-v-055fed90"),b=b(),$(),b),K={key:0,class:"plus"},O=v(()=>k("div",{class:"plusSpan i-majesticons:plus-line w-1em h-1em"},null,-1)),Q={key:1,class:"plus"},X=v(()=>k("div",{class:"minusSign i-iconamoon:sign-minus-bold w-1em h-1em"},null,-1)),Y={style:{"text-align":"center"}},Z=z({name:"financialLog",__name:"index",setup(b,{expose:C}){const{format:w}=q(),e=y({dialogTableVisible:!1,title:"",type:"",loading:!1,activeName:"myFinancial",tableAutoHeight:!1,border:!1,stripe:!1,lineHeight:"default",dataList:[],checkList:[]}),I=y([{label:"点击ID",prop:"clientId",sortable:!0,disableCheck:!1,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,disableCheck:!1,checked:!0},{label:"类型",prop:"type",sortable:!0,disableCheck:!1,checked:!0},{label:"说明",prop:"remark",sortable:!0,disableCheck:!1,checked:!0},{label:"变动前",prop:"beforeBalance",sortable:!0,disableCheck:!1,checked:!0},{label:"加减款",prop:"addAndSubtraction",sortable:!0,disableCheck:!1,checked:!0},{label:"变动后",prop:"afterBalance",sortable:!0,disableCheck:!1,checked:!0},{label:"时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0}]),{pagination:L,getParams:T,onSizeChange:ee,onCurrentChange:te,onSortChange:ae}=H();async function S(u){e.value.loading=!0,e.value.dialogTableVisible=!0,x(),I.value.forEach(i=>{i.checked&&e.value.checkList.push(i.prop)})}function x(){try{e.value.loading=!0;const u={...T(),...e.value.search};J.list(u).then(i=>{e.value.loading=!1,e.value.dataList=i.data.tenantFinancialRecordInfoList,L.value.total=+i.data.total})}catch{}finally{e.value.loading=!1}}const B=u=>{const i=u.match(/[-+]?\d*\.?\d+/);if(i){const d=parseFloat(i[0]).toFixed(2);return u.replace(i[0],d)}return u};function V(){e.value.dialogTableVisible=!1,e.value.tableData=[]}return F(async()=>{}),C({showEdit:S}),(u,i)=>{const d=h("el-text"),p=h("ElTableColumn"),m=h("el-tag"),_=U,D=h("el-empty"),j=h("ElTable"),A=h("el-button"),E=h("el-dialog"),N=M("loading");return s(),g("div",null,[o(E,{modelValue:l(e).dialogTableVisible,"onUpdate:modelValue":i[0]||(i[0]=t=>l(e).dialogTableVisible=t),title:"财务日志",draggable:""},{footer:a(()=>[k("div",Y,[o(A,{type:"primary",onClick:V},{default:a(()=>[c("关闭")]),_:1})])]),default:a(()=>[P((s(),r(j,{border:l(e).border,size:l(e).lineHeight,stripe:l(e).stripe,class:"my-4",data:l(e).dataList,"highlight-current-row":"",height:"100%",style:{"min-height":"370px"},"sort-change":"sortChange"},{empty:a(()=>[o(D,{image:l(R),"image-size":300},null,8,["image"])]),default:a(()=>[l(e).checkList.includes("clientId")?(s(),r(p,{key:0,"show-overflow-tooltip":"",align:"left",prop:"clientId",label:"点击ID",width:"200"},{default:a(({row:t})=>[o(d,{class:"fontColor"},{default:a(()=>[c(f(t.clientId?t.clientId:"-"),1)]),_:2},1024)]),_:1})):n("",!0),l(e).checkList.includes("projectId")?(s(),r(p,{key:1,"show-overflow-tooltip":"",align:"left",prop:"projectId",label:"项目ID",width:"200"},{default:a(({row:t})=>[o(d,{class:"fontColor"},{default:a(()=>[c(f(t.projectId?t.projectId:"-"),1)]),_:2},1024)]),_:1})):n("",!0),l(e).checkList.includes("type")?(s(),r(p,{key:2,"show-overflow-tooltip":"",align:"left",prop:"",label:"类型"},{default:a(({row:t})=>[t.type===1?(s(),r(m,{key:0,type:"warning",effect:"dark"},{default:a(()=>[c("待审余额")]),_:1})):n("",!0),t.type===2?(s(),r(m,{key:1,type:"primary",effect:"dark"},{default:a(()=>[c("可用余额")]),_:1})):n("",!0)]),_:1})):n("",!0),l(e).checkList.includes("remark")?(s(),r(p,{key:3,width:"260","show-overflow-tooltip":"",align:"left",prop:"remark",label:"说明"},{default:a(({row:t})=>[o(d,{class:"mx-1 fontColor fontC-System"},{default:a(()=>[c(f(B(t.remark)||"-"),1)]),_:2},1024)]),_:1})):n("",!0),l(e).checkList.includes("beforeBalance")?(s(),r(p,{key:4,"show-overflow-tooltip":"",align:"left",prop:"beforeBalance",width:"130",label:"变动前"},{default:a(({row:t})=>[o(_),o(d,{class:"fontColor"},{default:a(()=>[c(f(t.beforeBalance||0),1)]),_:2},1024)]),_:1})):n("",!0),l(e).checkList.includes("addAndSubtraction")?(s(),r(p,{key:5,"show-overflow-tooltip":"",align:"left",prop:"addAndSubtraction",width:"150",label:"加减款"},{default:a(({row:t})=>[t.operationType===1?(s(),g("p",K,[O,o(d,{class:"color3"},{default:a(()=>[o(_),c(f(Math.abs(t.addAndSubtraction)),1)]),_:2},1024)])):n("",!0),t.operationType===2?(s(),g("p",Q,[X,o(d,{class:"color3"},{default:a(()=>[o(_),c(f(Math.abs(t.addAndSubtraction)),1)]),_:2},1024)])):n("",!0)]),_:1})):n("",!0),l(e).checkList.includes("afterBalance")?(s(),r(p,{key:6,"show-overflow-tooltip":"",align:"left",prop:"afterBalance",width:"130",label:"变动后"},{default:a(({row:t})=>[o(_),o(d,{class:"fontColor"},{default:a(()=>[c(f(t.afterBalance||0),1)]),_:2},1024)]),_:1})):n("",!0),l(e).checkList.includes("createTime")?(s(),r(p,{key:7,"show-overflow-tooltip":"",align:"left",prop:"createTime",label:"时间"},{default:a(({row:t})=>[o(m,{effect:"plain",type:"info"},{default:a(()=>[c(f(l(w)(t.createTime)),1)]),_:2},1024)]),_:1})):n("",!0)]),_:1},8,["border","size","stripe","data"])),[[N,l(e).loading]])]),_:1},8,["modelValue"])])}}}),se=G(Z,[["__scopeId","data-v-055fed90"]]);export{se as default};
