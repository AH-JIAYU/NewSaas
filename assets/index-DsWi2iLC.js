
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as X}from"./index-BCoAbmCK.js";import{c as j}from"./user_customer-BpE4lCiu.js";import Y from"./index-DvlMFAem.js";import{d as Z,r as V,$ as ee,a3 as te,bc as ae,a4 as le,aE as ne,a as b,o,b as v,f as e,w as a,y as c,g as _,F as E,t as A,e as d,j as y,z as p,i,bd as oe,p as ue,aH as se,aI as ie,L as de}from"./index-ChQqcNbm.js";import{u as re}from"./configuration_siteSetting-CSz81nps.js";import"./index-d1Kj8fIT.js";import"./department-htT9pOTR.js";import"./position_manage-C13TJms3.js";import"./configuration_role-TOsY5p4E.js";import"./tenant_role-BZdE9ym3.js";import"./configuration_manager-BJFVFXbQ.js";import"./configuration_site_setting-BAusWwyt.js";const k=L=>(se("data-v-f2f1cc18"),L=L(),ie(),L),ce=k(()=>c("div",{class:"card-header"},[c("span",null,"基本信息")],-1)),me=k(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),pe={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},fe=k(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ve=k(()=>c("div",{class:"card-header"},[c("span",null,"权限信息")],-1)),Ce=k(()=>c("div",{class:"card-header"},[c("span",null,"重定向配置")],-1)),be={key:0},ge={key:0},_e={key:0},ye={key:0},Ie={class:"card-header"},Ve=k(()=>c("span",null,"服务端回调配置",-1)),he={key:0},ke={key:0},Le={key:0},$e={key:0},xe=Z({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(L){const F=re(),R=L,C=V(),g=V("https://saas-api.surveysaas.com/api"),q=V([]),Q=ee("validateTopTabs"),W=te({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择PM",trigger:"change"}]}),K=V("basicSettings"),T=V(!1),U=V([]),$=V(!1),H=I=>{if(I)t.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const l=t.value.tenantCustomerConfigInfoList.findIndex(f=>f.callbackWay===1);l!==-1&&t.value.tenantCustomerConfigInfoList.splice(l,1)}},P=async(I,l)=>{if(I){const f=U.value.find(s=>s.id===I),u=await j.generateKey({type:f.name});t.value.tenantCustomerConfigInfoList[l].secretKey=u.data}},D=async()=>{const{data:I}=await ue.getTenantStaffList();q.value=I};ae(async()=>{await D(),T.value=t.value.tenantCustomerConfigInfoList.length===2;const I=await j.getTenantSecretKeyConfigList();U.value=I.data;const l=await F.getSiteConfig();C.value=`${l.httpsStatus===1?"http":"https"}://${l.topLevelDomainName??l.personalizedDomainName}`});const z=V(null),t=V(R.leftTab);le(()=>{Q(z.value)});const r=ne.local.get("tenantId");return(I,l)=>{const f=b("el-input"),u=b("el-form-item"),s=b("el-col"),h=b("el-option"),B=b("el-button"),S=b("el-select"),w=b("el-row"),N=b("el-card"),x=b("el-switch"),O=b("el-input-number"),M=b("el-tab-pane"),m=X,G=b("el-checkbox"),J=b("el-tabs");return o(),v("div",null,[e(i(oe),{ref_key:"formRef",ref:z,rules:i(W),model:t.value,"label-width":"100px"},{default:a(()=>[e(J,{modelValue:K.value,"onUpdate:modelValue":l[26]||(l[26]=n=>K.value=n)},{default:a(()=>[e(M,{label:"基础设置",name:"basicSettings"},{default:a(()=>[e(N,{class:"box-card"},{header:a(()=>[ce]),default:a(()=>[e(w,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"客户名称",prop:"customerAccord"},{default:a(()=>[e(f,{modelValue:t.value.customerAccord,"onUpdate:modelValue":l[0]||(l[0]=n=>t.value.customerAccord=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"客户简称",prop:"customerShortName"},{default:a(()=>[e(f,{modelValue:t.value.customerShortName,"onUpdate:modelValue":l[1]||(l[1]=n=>t.value.customerShortName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"公司名称",prop:"companyName"},{default:a(()=>[e(f,{modelValue:t.value.companyName,"onUpdate:modelValue":l[2]||(l[2]=n=>t.value.companyName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"客户姓名",prop:"customerName"},{default:a(()=>[e(f,{modelValue:t.value.customerName,"onUpdate:modelValue":l[3]||(l[3]=n=>t.value.customerName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"手机号码",prop:"customerPhone"},{default:a(()=>[e(f,{modelValue:t.value.customerPhone,"onUpdate:modelValue":l[4]||(l[4]=n=>t.value.customerPhone=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"电子邮箱",prop:"emailAddress"},{default:a(()=>[e(f,{modelValue:t.value.emailAddress,"onUpdate:modelValue":l[5]||(l[5]=n=>t.value.emailAddress=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"PM",prop:"chargeId"},{default:a(()=>[e(S,{modelValue:t.value.chargeId,"onUpdate:modelValue":l[8]||(l[8]=n=>t.value.chargeId=n),"value-key":"",placeholder:"请选择PM",clearable:"",filterable:""},{empty:a(()=>[c("div",pe,[_(" 暂无数据 "),e(B,{type:"primary",link:"",onClick:l[7]||(l[7]=n=>$.value=!0),size:"small"},{default:a(()=>[_(" 快捷新增 "),fe]),_:1})])]),default:a(()=>[(o(!0),v(E,null,A(q.value,n=>(o(),d(h,{key:n.id,label:n.userName,value:n.id},null,8,["label","value"]))),128)),e(B,{class:"buttonClass",onClick:l[6]||(l[6]=n=>$.value=!0),size:"small"},{default:a(()=>[_(" 快捷新增 "),me]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"结算周期",prop:"settlementCycle"},{default:a(()=>[e(S,{modelValue:t.value.settlementCycle,"onUpdate:modelValue":l[9]||(l[9]=n=>t.value.settlementCycle=n)},{default:a(()=>[e(h,{label:"net 30",value:30}),e(h,{label:"net 60",value:60}),e(h,{label:"net 90",value:90}),e(h,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{class:"box-card"},{header:a(()=>[ve]),default:a(()=>[e(w,{gutter:24},{default:a(()=>[e(s,{span:4},{default:a(()=>[e(u,{label:"客户状态"},{default:a(()=>[e(x,{modelValue:t.value.customerStatus,"onUpdate:modelValue":l[10]||(l[10]=n=>t.value.customerStatus=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"前置问卷"},{default:a(()=>[e(x,{modelValue:t.value.antecedentQuestionnaire,"onUpdate:modelValue":l[11]||(l[11]=n=>t.value.antecedentQuestionnaire=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:16},{default:a(()=>[e(u,{label:"风险控制"},{default:a(()=>[e(x,{modelValue:t.value.riskControl,"onUpdate:modelValue":l[12]||(l[12]=n=>t.value.riskControl=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.riskControl===2?(o(),d(s,{key:0,span:12},{default:a(()=>[e(u,{label:"营业限额/月"},{default:a(()=>[e(O,{modelValue:t.value.turnover,"onUpdate:modelValue":l[13]||(l[13]=n=>t.value.turnover=n),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),t.value.riskControl===2?(o(),d(s,{key:1,span:12},{default:a(()=>[e(u,{label:"审核率Min值"},{default:a(()=>[e(f,{modelValue:t.value.rateAudit,"onUpdate:modelValue":l[14]||(l[14]=n=>t.value.rateAudit=n),"controls-position":"right",min:1,type:"number"},{append:a(()=>[_(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1}),e(M,{label:"端口设置",name:"portSettings"},{default:a(()=>[e(N,{class:"box-card"},{header:a(()=>[Ce]),default:a(()=>[e(w,{gutter:24},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(u,{label:"加密"},{default:a(()=>[e(x,{modelValue:t.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":l[15]||(l[15]=n=>t.value.tenantCustomerConfigInfoList[0].isEncryption=n),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),v(E,{key:0},[e(s,{span:24},{default:a(()=>[e(u,{label:"加密方式"},{default:a(()=>[e(S,{onChange:l[16]||(l[16]=n=>P(n,0)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":l[17]||(l[17]=n=>t.value.tenantCustomerConfigInfoList[0].encryptionId=n)},{default:a(()=>[(o(!0),v(E,null,A(U.value,n=>(o(),d(h,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"密钥"},{default:a(()=>[e(f,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":l[18]||(l[18]=n=>t.value.tenantCustomerConfigInfoList[0].secretKey=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(o(),d(s,{key:1,span:24},{default:a(()=>[e(u,{label:"IP白名单"},{default:a(()=>[e(f,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":l[19]||(l[19]=n=>t.value.tenantCustomerConfigInfoList[0].whitelistIp=n)},null,8,["modelValue"])]),_:1})]),_:1})),e(s,{span:24},{default:a(()=>[e(u,{label:"成功重定向"},{default:a(()=>[_(p(C.value)+" ",1),c("span",null,p(`/redirect?tid=${i(r)}&status=c&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),v("span",be,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${C.value}/redirect?tid=${i(r)}&status=c&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${C.value}/redirect?tid=${i(r)}&status=c&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"配额满重定向"},{default:a(()=>[_(p(C.value)+" ",1),c("span",null,p(`/redirect?tid=${i(r)}&status=q&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),v("span",ge,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${C.value}/redirect?tid=${i(r)}&status=q&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${C.value}/redirect?tid=${i(r)}&status=q&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"被甄别重定向"},{default:a(()=>[_(p(C.value)+" ",1),c("span",null,p(`/redirect?tid=${i(r)}&status=s&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),v("span",_e,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${C.value}/redirect?tid=${i(r)}&status=s&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${C.value}/redirect?tid=${i(r)}&status=s&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"安全重定向"},{default:a(()=>[_(p(C.value)+" ",1),c("span",null,p(`/redirect?tid=${i(r)}&status=t&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),v("span",ye,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${C.value}/redirect?tid=${i(r)}&status=t&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${C.value}/redirect?tid=${i(r)}&status=t&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{class:"box-card"},{header:a(()=>[c("div",Ie,[e(G,{modelValue:T.value,"onUpdate:modelValue":l[20]||(l[20]=n=>T.value=n),size:"large",onChange:H},{default:a(()=>[Ve]),_:1},8,["modelValue"])])]),default:a(()=>[t.value.tenantCustomerConfigInfoList.length===2?(o(),d(w,{key:0,gutter:24},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(u,{label:"加密"},{default:a(()=>[e(x,{modelValue:t.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":l[21]||(l[21]=n=>t.value.tenantCustomerConfigInfoList[1].isEncryption=n),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),v(E,{key:0},[e(s,{span:24},{default:a(()=>[e(u,{label:"加密方式"},{default:a(()=>[e(S,{onChange:l[22]||(l[22]=n=>P(n,1)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":l[23]||(l[23]=n=>t.value.tenantCustomerConfigInfoList[1].encryptionId=n)},{default:a(()=>[(o(!0),v(E,null,A(U.value,n=>(o(),d(h,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"密钥"},{default:a(()=>[e(f,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":l[24]||(l[24]=n=>t.value.tenantCustomerConfigInfoList[1].secretKey=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(o(),d(s,{key:1,span:24},{default:a(()=>[e(u,{label:"IP白名单"},{default:a(()=>[e(f,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":l[25]||(l[25]=n=>t.value.tenantCustomerConfigInfoList[1].whitelistIp=n)},null,8,["modelValue"])]),_:1})]),_:1})),e(s,{span:24},{default:a(()=>[e(u,{label:"成功回调"},{default:a(()=>[_(p(g.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${i(r)}&status=c&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),v("span",he," &hash=[hash] ")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=c&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=c&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"配额满回调"},{default:a(()=>[_(p(g.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${i(r)}&status=q&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),v("span",ke,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=q&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=q&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"被甄别回调"},{default:a(()=>[_(p(g.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${i(r)}&status=s&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),v("span",Le,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=s&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=s&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"安全终止回调"},{default:a(()=>[_(p(g.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${i(r)}&status=t&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),v("span",$e,"&hash=[hash]")):y("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),d(m,{key:1,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=t&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),d(m,{key:2,content:`${g.value}/callback/serviceCallback?tid=${i(r)}&status=t&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"]),$.value?(o(),d(Y,{key:0,modelValue:$.value,"onUpdate:modelValue":l[27]||(l[27]=n=>$.value=n),onSuccess:D},null,8,["modelValue"])):y("",!0)])}}}),Be=de(xe,[["__scopeId","data-v-f2f1cc18"]]);export{Be as default};
