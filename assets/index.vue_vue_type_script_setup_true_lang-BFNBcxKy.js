
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import h from"./index-EzJOSgPK.js";import{u as D}from"./user_customer-iJBTdTua.js";import{d as N,ae as R,r,M as S,L as I,a3 as b,b as u,j as f,O as g,g as p,w as d,h as M,t as k,i as T,P as E,c as x,f as U,B as $}from"./index-CZbucr5m.js";const P=N({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(A,{expose:C,emit:w}){const y=D(),s=A,{t:v}=R(),V=w,e=r(s.leftTabsData),B=r(s.validateTopTabs);e.value.forEach((o,a)=>{const i=r(null);S(`formRef${a}`,i)});const _=r(0),l=r(0);function L(){l.value=++_.value,e.value.push({...y.initialTopTabsData})}function j(o){e.value.splice(o,1),B.value.splice(o,1),l.value>=e.value.length&&(l.value=Math.max(0,e.value.length-1),_.value=Math.max(0,e.value.length-1))}return I(()=>l.value,(o,a)=>{s.validateAll.reduce((c,m,t)=>(m==="rejected"&&c.push(t),c),[]).includes(a)&&V("validate")}),C({activeLeftTab:l}),(o,a)=>{const i=b("el-button"),c=b("el-tab-pane"),m=b("el-tabs");return u(),f("div",null,[e.value[0].id?(u(),x(h,{key:1,"left-tab":e.value[0]},null,8,["left-tab"])):(u(),f(g,{key:0},[p(i,{class:"button",disabled:e.value.length>29||s.title!==T(v)("leftTabs.new"),onClick:a[0]||(a[0]=t=>L())},{default:d(()=>[M(k(T(v)("leftTabs.newCustomer")),1)]),_:1},8,["disabled"]),p(m,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),"tab-position":"left",onTabRemove:j},{default:d(()=>[(u(!0),f(g,null,E(e.value,(t,n)=>(u(),x(c,{key:n,closable:e.value.length!==1,label:t.customerAccord,name:n},{label:d(()=>[U("div",{class:$(s.validateAll[n]&&s.validateAll[n]==="rejected"?"validateRejected":"")},k(t.memberNickname||T(v)("leftTabs.newCustomer")),3)]),default:d(()=>[p(h,{"left-tab":t,"tab-index":n},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","label","name"]))),128))]),_:1},8,["modelValue"])],64))])}}});export{P as _};
