
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as re,d as ce,aM as pe,r as p,n as ue,a as _,q as de,o as n,b as R,f as l,w as o,i as t,g as u,A as y,s as me,e as a,aL as _e,j as r,y as d,z as f,N as v,be as fe,b8 as he,b9 as ge,ap as be,L as ye}from"./index-BRLuNibF.js";import{_ as ve}from"./index-zMQ6Nwy3.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-p4XF_7tQ.js";import{_ as ke}from"./index-DpkJjMIr.js";import"./index-mFLbZNyX.js";import"./index.vue_vue_type_script_setup_true_lang-HdocEKxS.js";import"./sortable.esm-C0-Qcoum.js";const Ce={list:x=>re.post("callback/getProjectTerminationScreenDetail",x)},Se={class:"tableBig oneLine"},je={class:"copyId tableSmall"},we={class:"id oneLine projectId"},Ne={class:"copyId tableSmall"},De={key:0,class:"id oneLine projectId"},Le={class:"copyId tableSmall"},Te={class:"id oneLine projectId"},ze={class:"copyId tableSmall"},xe={class:"id oneLine projectId"},Be={class:"copyId tableSmall"},Pe={class:"id oneLine projectId"},He={class:"tableBig oneLine"},Ee=ce({name:"termination",__name:"index",setup(x){const{getParams:U,pagination:h,onSizeChange:A,onCurrentChange:M}=pe(),{format:V}=fe(),S=p(!1),B=p([]),F=p(""),c=p([]),j=p(!1),w=p(!1),N=p("default"),D=p(!1),P=p(),$=p("formSearch-termination"),L=p([{label:"会员",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),q=[{label:"内部",value:1},{label:"外部",value:2}],g=p({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function O(){h.value.page=1,I()}function Q(i){A(i).then(()=>I())}function H(i=1){M(i).then(()=>I())}async function I(){try{S.value=!0;const i={...U(),...g.value};g.value.time&&g.value.time.length&&(i.beginTime=g.value.time[0]||"",i.endTime=g.value.time[1]||"");const s=await Ce.list(i);B.value=s.data.projectTerminationScreenDetailInfoList,h.value.total=s.data.total,S.value=!1}catch{}finally{S.value=!1}}function G(){Object.assign(g.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),I()}function J(i){F.value=i}ue(()=>{L.value.forEach(i=>{i.checked&&c.value.push(i.prop)}),I(),P.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:5,show:!0,type:"input",modelName:"ipBelong",placeholder:"IP/所属国"},{index:6,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const K={surveySource:()=>q},b=p();function W(i){i?b.value=i.id:b.value=""}return(i,s)=>{const X=ke,Y=_("ElDivider"),Z=Ie,z=_("el-button"),ee=he,te=ge,oe=_("el-row"),m=_("el-table-column"),k=_("el-tooltip"),C=ve,T=_("el-text"),E=_("el-tag"),le=_("el-empty"),ne=_("el-table"),ae=_("ElPagination"),ie=be,se=de("loading");return n(),R("div",{class:v({"absolute-container":t(D)})},[l(ie,null,{default:o(()=>[l(X,{formSearchList:t(P),formSearchName:t($),onCurrentChange:H,onOnReset:G,model:t(g),formOption:K},null,8,["formSearchList","formSearchName","model"]),l(Y,{"border-style":"dashed"}),l(oe,null,{default:o(()=>[l(Z),l(te,null,{default:o(()=>[l(z,{size:"default"},{default:o(()=>[u(" 导出 ")]),_:1}),l(ee,{border:t(j),"onUpdate:border":s[0]||(s[0]=e=>y(j)?j.value=e:null),tableAutoHeight:t(D),"onUpdate:tableAutoHeight":s[1]||(s[1]=e=>y(D)?D.value=e:null),checkList:t(c),"onUpdate:checkList":s[2]||(s[2]=e=>y(c)?c.value=e:null),columns:t(L),"onUpdate:columns":s[3]||(s[3]=e=>y(L)?L.value=e:null),"line-height":t(N),"onUpdate:lineHeight":s[4]||(s[4]=e=>y(N)?N.value=e:null),stripe:t(w),"onUpdate:stripe":s[5]||(s[5]=e=>y(w)?w.value=e:null),style:{"margin-left":"12px"},onQueryData:O},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((n(),a(ne,{border:t(j),data:t(B),size:t(N),stripe:t(w),"highlight-current-row":"",onCurrentChange:W,onSelectionChange:J},{empty:o(()=>[l(le,{image:t(_e),"image-size":300},null,8,["image"])]),default:o(()=>[l(m,{align:"left",type:"selection"}),t(c).includes("surveySource")?(n(),a(m,{key:0,align:"left",prop:"surveySource","show-overflow-tooltip":"",width:"120",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(n(),a(z,{key:0,class:"p-1",size:"small",type:"primary"},{default:o(()=>[u("内部会员")]),_:1})):r("",!0),e.surveySource===2?(n(),a(z,{key:1,class:"p-1",size:"small",type:"warning"},{default:o(()=>[u("外部会员")]),_:1})):r("",!0)]),_:1})):r("",!0),t(c).includes("projectName")?(n(),a(m,{key:1,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[d("div",Se,f(e.projectName),1)]),_:1})):r("",!0),t(c).includes("projectId")?(n(),a(m,{key:2,align:"left",prop:"projectId",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",je,[d("div",we,[l(k,{effect:"dark",content:e.projectId,placement:"top-start"},{default:o(()=>[u(f(e.projectId),1)]),_:2},1032,["content"])]),l(C,{content:e.projectId,class:v({rowCopy:"rowCopy",current:e.id===t(b)})},null,8,["content","class"])])]),_:1})):r("",!0),t(c).includes("memberChildId")?(n(),a(m,{key:3,align:"left",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[d("div",Ne,[e.peopleType===1?(n(),R("div",De,[l(k,{effect:"dark",content:e.memberChildId,placement:"top-start"},{default:o(()=>[u(f(e.memberChildId),1)]),_:2},1032,["content"])])):r("",!0),l(C,{content:e.memberChildId,class:v({rowCopy:"rowCopy",current:e.id===t(b)})},null,8,["content","class"])])]),_:1})):r("",!0),t(c).includes("supplierMemberChildId")?(n(),a(m,{key:4,align:"left",prop:"",width:"180",label:"子会员ID"},{default:o(({row:e})=>[d("div",Le,[d("div",Te,[e.peopleType!==1?(n(),a(T,{key:0},{default:o(()=>[l(k,{effect:"dark",content:e.memberChildId,placement:"top-start"},{default:o(()=>[u(f(e.memberChildId),1)]),_:2},1032,["content"])]),_:2},1024)):(n(),a(T,{key:1},{default:o(()=>[u(" - ")]),_:1}))]),e.peopleType!==1?(n(),a(C,{key:0,content:e.memberChildId,class:v({rowCopy:"rowCopy",current:e.id===t(b)})},null,8,["content","class"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("tenantSupplierId")?(n(),a(m,{key:5,align:"left",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[d("div",ze,[d("div",xe,[e.tenantSupplierId?(n(),a(T,{key:0},{default:o(()=>[l(k,{effect:"dark",content:e.tenantSupplierId,placement:"top-start"},{default:o(()=>[u(f(e.tenantSupplierId),1)]),_:2},1032,["content"])]),_:2},1024)):(n(),a(T,{key:1},{default:o(()=>[u(" - ")]),_:1}))]),e.tenantSupplierId?(n(),a(C,{key:0,content:e.tenantSupplierId,class:v({rowCopy:"rowCopy",current:e.id===t(b)})},null,8,["content","class"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("ipBelong")?(n(),a(m,{key:6,align:"left",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国",width:"220"},{default:o(({row:e})=>[d("div",Be,[d("div",Pe,[l(E,{type:"primary"},{default:o(()=>[u(f(e.ipBelong.split("/")[1]),1)]),_:2},1024),u(" "+f(e.ipBelong.split("/")[0]),1)]),l(C,{content:e.ipBelong.split("/")[0],class:v({rowCopy:"rowCopy",current:e.id===t(b)})},null,8,["content","class"])])]),_:1})):r("",!0),t(c).includes("terminationTime")?(n(),a(m,{key:7,label:"终止时间",align:"left",prop:"terminationTime","show-overflow-tooltip":""},{default:o(({row:e})=>[l(k,{content:e.terminationTime,placement:"top"},{default:o(()=>[l(E,{effect:"plain",type:"info"},{default:o(()=>[u(f(t(V)(e.terminationTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):r("",!0),t(c).includes("notes")?(n(),a(m,{key:8,align:"left",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"},{default:o(({row:e})=>[d("div",He,f(e.notes),1)]),_:1})):r("",!0)]),_:1},8,["border","data","size","stripe"])),[[se,t(S)]]),l(ae,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:H},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),qe=ye(Ee,[["__scopeId","data-v-e1f26656"]]);export{qe as default};
