
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{c as M}from"./user_customer-C7MiT6AT.js";import J from"./index-5EBN2ykO.js";import{d as X,r as b,$ as Y,a3 as Z,bb as ee,a4 as te,aD as le,a as p,o as s,b as m,f as e,w as t,y as i,g as f,F as x,t as A,e as C,j as c,z as d,i as v,bc as ae,p as ne,aG as oe,aH as ue,L as se}from"./index-DrndPOKy.js";import{u as ie}from"./configuration_siteSetting-CZH1waPN.js";import"./department-DHOGJsqL.js";import"./position_manage-Du9BCRR3.js";import"./configuration_role-CyJzRr7X.js";import"./tenant_role-B62Y5rWU.js";import"./configuration_manager-BjrCvfL4.js";import"./configuration_site_setting-C6Vg7-y2.js";const y=I=>(oe("data-v-4320c865"),I=I(),ue(),I),de=y(()=>i("div",{class:"card-header"},[i("span",null,"基本信息")],-1)),re=y(()=>i("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),me={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},pe=y(()=>i("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),fe=y(()=>i("div",{class:"card-header"},[i("span",null,"权限信息")],-1)),ce=y(()=>i("div",{class:"card-header"},[i("span",null,"重定向配置")],-1)),ve={key:0},_e={key:0},be={key:0},Ce={key:0},ge={class:"card-header"},Ve=y(()=>i("span",null,"服务端回调配置",-1)),ye={key:0},Ie={key:0},he={key:0},ke={key:0},Le=X({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(I){const j=ie(),F=I,h=b(),U=b("https://saas-api.surveysaas.com/api"),E=b([]),R=Y("validateTopTabs"),Q=Z({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择PM",trigger:"change"}]}),K=b("basicSettings"),T=b(!1),S=b([]),k=b(!1),W=_=>{if(_)n.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const l=n.value.tenantCustomerConfigInfoList.findIndex(r=>r.callbackWay===1);l!==-1&&n.value.tenantCustomerConfigInfoList.splice(l,1)}},D=async(_,l)=>{if(_){const r=S.value.find(u=>u.id===_),o=await M.generateKey({type:r.name});n.value.tenantCustomerConfigInfoList[l].secretKey=o.data}},P=async()=>{const{data:_}=await ne.getTenantStaffList();E.value=_};ee(async()=>{await P(),T.value=n.value.tenantCustomerConfigInfoList.length===2;const _=await M.getTenantSecretKeyConfigList();S.value=_.data;const l=await j.getSiteConfig();h.value=`${l.httpsStatus===1?"http":"https"}://${l.topLevelDomainName??l.personalizedDomainName}`});const q=b(null),n=b(F.leftTab);te(()=>{R(q.value)});const g=le.local.get("tenantId");return(_,l)=>{const r=p("el-input"),o=p("el-form-item"),u=p("el-col"),V=p("el-option"),z=p("el-button"),w=p("el-select"),N=p("el-row"),$=p("el-card"),L=p("el-switch"),G=p("el-input-number"),B=p("el-tab-pane"),H=p("el-checkbox"),O=p("el-tabs");return s(),m("div",null,[e(v(ae),{ref_key:"formRef",ref:q,rules:v(Q),model:n.value,"label-width":"100px"},{default:t(()=>[e(O,{modelValue:K.value,"onUpdate:modelValue":l[26]||(l[26]=a=>K.value=a)},{default:t(()=>[e(B,{label:"基础设置",name:"basicSettings"},{default:t(()=>[e($,{class:"box-card"},{header:t(()=>[de]),default:t(()=>[e(N,{gutter:24},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(o,{label:"客户名称",prop:"customerAccord"},{default:t(()=>[e(r,{modelValue:n.value.customerAccord,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value.customerAccord=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户简称",prop:"customerShortName"},{default:t(()=>[e(r,{modelValue:n.value.customerShortName,"onUpdate:modelValue":l[1]||(l[1]=a=>n.value.customerShortName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"公司名称",prop:"companyName"},{default:t(()=>[e(r,{modelValue:n.value.companyName,"onUpdate:modelValue":l[2]||(l[2]=a=>n.value.companyName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"客户姓名",prop:"customerName"},{default:t(()=>[e(r,{modelValue:n.value.customerName,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value.customerName=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"手机号码",prop:"customerPhone"},{default:t(()=>[e(r,{modelValue:n.value.customerPhone,"onUpdate:modelValue":l[4]||(l[4]=a=>n.value.customerPhone=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"电子邮箱",prop:"emailAddress"},{default:t(()=>[e(r,{modelValue:n.value.emailAddress,"onUpdate:modelValue":l[5]||(l[5]=a=>n.value.emailAddress=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"PM",prop:"chargeId"},{default:t(()=>[e(w,{modelValue:n.value.chargeId,"onUpdate:modelValue":l[8]||(l[8]=a=>n.value.chargeId=a),"value-key":"",placeholder:"请选择PM",clearable:"",filterable:""},{empty:t(()=>[i("div",me,[f(" 暂无数据 "),e(z,{type:"primary",link:"",onClick:l[7]||(l[7]=a=>k.value=!0),size:"small"},{default:t(()=>[f(" 快捷新增 "),pe]),_:1})])]),default:t(()=>[(s(!0),m(x,null,A(E.value,a=>(s(),C(V,{key:a.id,label:a.userName,value:a.id},null,8,["label","value"]))),128)),e(z,{class:"buttonClass",onClick:l[6]||(l[6]=a=>k.value=!0),size:"small"},{default:t(()=>[f(" 快捷新增 "),re]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"结算周期",prop:"settlementCycle"},{default:t(()=>[e(w,{modelValue:n.value.settlementCycle,"onUpdate:modelValue":l[9]||(l[9]=a=>n.value.settlementCycle=a)},{default:t(()=>[e(V,{label:"net 30",value:30}),e(V,{label:"net 60",value:60}),e(V,{label:"net 90",value:90}),e(V,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e($,{class:"box-card"},{header:t(()=>[fe]),default:t(()=>[e(N,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(o,{label:"客户状态"},{default:t(()=>[e(L,{modelValue:n.value.customerStatus,"onUpdate:modelValue":l[10]||(l[10]=a=>n.value.customerStatus=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:4},{default:t(()=>[e(o,{label:"前置问卷"},{default:t(()=>[e(L,{modelValue:n.value.antecedentQuestionnaire,"onUpdate:modelValue":l[11]||(l[11]=a=>n.value.antecedentQuestionnaire=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:16},{default:t(()=>[e(o,{label:"风险控制"},{default:t(()=>[e(L,{modelValue:n.value.riskControl,"onUpdate:modelValue":l[12]||(l[12]=a=>n.value.riskControl=a),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.riskControl===2?(s(),C(u,{key:0,span:12},{default:t(()=>[e(o,{label:"营业限额/月"},{default:t(()=>[e(G,{modelValue:n.value.turnover,"onUpdate:modelValue":l[13]||(l[13]=a=>n.value.turnover=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0),n.value.riskControl===2?(s(),C(u,{key:1,span:12},{default:t(()=>[e(o,{label:"审核率Min值"},{default:t(()=>[e(r,{modelValue:n.value.rateAudit,"onUpdate:modelValue":l[14]||(l[14]=a=>n.value.rateAudit=a),"controls-position":"right",min:1,type:"number"},{append:t(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1}),e(B,{label:"端口设置",name:"portSettings"},{default:t(()=>[e($,{class:"box-card"},{header:t(()=>[ce]),default:t(()=>[e(N,{gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(L,{modelValue:n.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":l[15]||(l[15]=a=>n.value.tenantCustomerConfigInfoList[0].isEncryption=a),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.tenantCustomerConfigInfoList[0].isEncryption===1?(s(),m(x,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(w,{onChange:l[16]||(l[16]=a=>D(a,0)),clearable:"",modelValue:n.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":l[17]||(l[17]=a=>n.value.tenantCustomerConfigInfoList[0].encryptionId=a)},{default:t(()=>[(s(!0),m(x,null,A(S.value,a=>(s(),C(V,{label:a.name,value:a.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(r,{disabled:"",modelValue:n.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":l[18]||(l[18]=a=>n.value.tenantCustomerConfigInfoList[0].secretKey=a)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),C(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(r,{placeholder:"输入ip两个ip之间用,分开",modelValue:n.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":l[19]||(l[19]=a=>n.value.tenantCustomerConfigInfoList[0].whitelistIp=a)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功重定向"},{default:t(()=>[f(d(h.value)+" ",1),i("span",null,d(`/redirect?tid=${v(g)}&status=c&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),m("span",ve,"&hash =[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满重定向"},{default:t(()=>[f(d(h.value)+" ",1),i("span",null,d(`/redirect?tid=${v(g)}&status=q&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),m("span",_e,"&hash=[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别重定向"},{default:t(()=>[f(d(h.value)+" ",1),i("span",null,d(`/redirect?tid=${v(g)}&status=s&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),m("span",be,"&hash=[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全重定向"},{default:t(()=>[f(d(h.value)+" ",1),i("span",null,d(`/redirect?tid=${v(g)}&status=t&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),m("span",Ce,"&hash=[hash]")):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e($,{class:"box-card"},{header:t(()=>[i("div",ge,[e(H,{modelValue:T.value,"onUpdate:modelValue":l[20]||(l[20]=a=>T.value=a),size:"large",onChange:W},{default:t(()=>[Ve]),_:1},8,["modelValue"])])]),default:t(()=>[n.value.tenantCustomerConfigInfoList.length===2?(s(),C(N,{key:0,gutter:24},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(o,{label:"加密"},{default:t(()=>[e(L,{modelValue:n.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":l[21]||(l[21]=a=>n.value.tenantCustomerConfigInfoList[1].isEncryption=a),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),n.value.tenantCustomerConfigInfoList[1].isEncryption===1?(s(),m(x,{key:0},[e(u,{span:24},{default:t(()=>[e(o,{label:"加密方式"},{default:t(()=>[e(w,{onChange:l[22]||(l[22]=a=>D(a,1)),clearable:"",modelValue:n.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":l[23]||(l[23]=a=>n.value.tenantCustomerConfigInfoList[1].encryptionId=a)},{default:t(()=>[(s(!0),m(x,null,A(S.value,a=>(s(),C(V,{label:a.name,value:a.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"密钥"},{default:t(()=>[e(r,{disabled:"",modelValue:n.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":l[24]||(l[24]=a=>n.value.tenantCustomerConfigInfoList[1].secretKey=a)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),C(u,{key:1,span:24},{default:t(()=>[e(o,{label:"IP白名单"},{default:t(()=>[e(r,{placeholder:"输入ip两个ip之间用,分开",modelValue:n.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":l[25]||(l[25]=a=>n.value.tenantCustomerConfigInfoList[1].whitelistIp=a)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:t(()=>[e(o,{label:"成功回调"},{default:t(()=>[f(d(U.value)+" ",1),i("span",null,d(`/callback/serviceCallback?tid=${v(g)}&status=c&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),m("span",ye,"&hash=[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"配额满回调"},{default:t(()=>[f(d(U.value)+" ",1),i("span",null,d(`/callback/serviceCallback?tid=${v(g)}&status=q&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),m("span",Ie,"&hash=[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"被甄别回调"},{default:t(()=>[f(d(U.value)+" ",1),i("span",null,d(`/callback/serviceCallback?tid=${v(g)}&status=s&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),m("span",he,"&hash=[hash]")):c("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"安全终止回调"},{default:t(()=>[f(d(U.value)+" ",1),i("span",null,d(`/callback/serviceCallback?tid=${v(g)}&status=t&uid=[uid]`),1),n.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),m("span",ke,"&hash=[hash]")):c("",!0)]),_:1})]),_:1})]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"]),k.value?(s(),C(J,{key:0,modelValue:k.value,"onUpdate:modelValue":l[27]||(l[27]=a=>k.value=a),onSuccess:P},null,8,["modelValue"])):c("",!0)])}}}),De=se(Le,[["__scopeId","data-v-4320c865"]]);export{De as default};
