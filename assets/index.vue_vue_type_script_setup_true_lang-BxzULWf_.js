
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as R}from"./financial_pm_log-DQNRHw9s.js";import{d as q,r as n,a as r,q as B,s as F,o as y,b as V,f as e,w as o,g as p,z as M,F as O,t as T,E as k}from"./index-KzkPapPJ.js";const G=q({__name:"index",emits:["fetch-data"],setup(j,{expose:S,emit:w}){const x=w,i=n(!1),u=n(!1),m=n(),v=n(""),c=n(),_=n(),I=[{label:"加款",value:1},{label:"减款",value:2}],t=n({organizationalStructureId:null,type:null,amount:null,remark:""}),z=n({amount:[{required:!0,message:"请输入金额",trigger:"blur"}]});async function C(s){try{i.value=!0,u.value=!0,s?(v.value="编辑",c.value=JSON.parse(s),_.value=c.value.organizationalStructureId,t.value.organizationalStructureId=c.value.organizationalStructureId):v.value="新增",u.value=!1}catch{}finally{u.value=!1}}function f(){Object.assign(t.value,{organizationalStructureId:null,type:null,amount:null,remark:""}),i.value=!1}async function h(){m.value&&m.value.validate(async s=>{if(s)try{u.value=!0,(await R.additionAndSubtraction(t.value)).status===1?(u.value=!1,x("fetch-data"),k.success({message:"操作成功",center:!0}),f()):k.warning({message:"出现错误请联系管理人员",center:!0})}catch{}finally{u.value=!1}})}return S({showEdit:C}),(s,l)=>{const d=r("el-form-item"),D=r("el-option"),E=r("el-select"),g=r("el-input"),U=r("el-form"),b=r("el-button"),L=r("el-dialog"),N=B("loading");return F((y(),V("div",null,[e(L,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=a=>i.value=a),title:"加减款","append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"35%",onClose:f},{footer:o(()=>[e(b,{onClick:f},{default:o(()=>[p(" 取消 ")]),_:1}),e(b,{type:"primary",onClick:h},{default:o(()=>[p(" 确定 ")]),_:1})]),default:o(()=>[e(U,{model:t.value,rules:z.value,ref_key:"formRef",ref:m,"label-width":"58px",inline:!1},{default:o(()=>[e(d,{label:"ID"},{default:o(()=>[p(M(_.value),1)]),_:1}),e(d,{label:"加减款"},{default:o(()=>[e(E,{modelValue:t.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.type=a),"value-key":"",placeholder:"请选择加减款",clearable:"",filterable:""},{default:o(()=>[(y(),V(O,null,T(I,a=>e(D,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"金额",prop:"amount"},{default:o(()=>[e(g,{modelValue:t.value.amount,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.amount=a),modelModifiers:{number:!0},placeholder:"请输入金额"},null,8,["modelValue"])]),_:1}),e(d,{label:"说明",prop:""},{default:o(()=>[e(g,{modelValue:t.value.remark,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.remark=a),placeholder:"请输入说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])),[[N,u.value]])}}});export{G as _};
