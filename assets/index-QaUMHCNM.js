
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as M,T as N}from"./index-6m-nyZLW.js";import{_ as S}from"./index.vue_vue_type_script_setup_true_lang-C3zFf8_c.js";import{d as U,r as n,a1 as z,a2 as P,a as f,o as p,b as y,f as m,w as c,g,e as b,F as $,n as E,C as I,D as F,Q,j,an as h,P as q}from"./index-BXQCfZB9.js";import"./index-Vy0hzkRs.js";import"./zh_Hans-B39mJ-rS.js";import"./apiLoading-BEADuyWx.js";import"./file-ARdcytrj.js";import"./projectManagement-4qhN1AxB.js";import"./otherFunctions_basicDictionary-CXeOo5sL.js";import"./basicDictionary-CNsb4Izq.js";import"./user_customer-hw7gvGc-.js";import"./user_customer-CyNOUXXF.js";const G={style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},H=U({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(x,{expose:k,emit:L}){const C=M(),s=x,R=L,V=n(),e=n(s.leftTabsData),A=n(s.validateTopTabs),_=n(),T=n(0),t=n(0);function D(){const{projectId:o,parentId:a,name:i,projectIdentification:u,clientId:d,countryIdList:l,uidUrl:r,...v}=h(e.value[0]);e.value[t.value].projectId&&(v.projectId=e.value[t.value].projectId,v.parentId=e.value[t.value].parentId),_.value[t.value].getUpLoad(v.descriptionUrl),e.value.splice(t.value,1,v)}function w(){t.value=++T.value;const{projectId:o,...a}=h(C.initialTopTabsData);e.value.push(a)}function B(o){e.value.splice(o,1),A.value.splice(o,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),T.value=Math.max(0,e.value.length-1))}return z(()=>t.value,(o,a)=>{s.validateAll.reduce((u,d,l)=>(d==="rejected"&&u.push(l),u),[]).includes(a)&&R("validate")}),e.value.forEach((o,a)=>{const i=n(null);P(`formRef${a}`,i)}),k({activeLeftTab:t}),(o,a)=>{const i=f("el-button"),u=f("el-tab-pane"),d=f("el-tabs");return p(),y("div",null,[m(i,{class:"button",disabled:e.value.length>29||s.title==="编辑"&&e.value[0].parentId!=="0",onClick:a[0]||(a[0]=l=>w())},{default:c(()=>[g(" 新增 ")]),_:1},8,["disabled"]),e.value.length?(p(),b(d,{key:0,modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=l=>t.value=l),"tab-position":"left",onTabRemove:B},{default:c(()=>[(p(!0),y($,null,E(e.value,(l,r)=>(p(),b(u,{key:r,style:{position:"relative"},closable:e.value.length!==1,name:r},{label:c(()=>[I("div",{class:Q(s.validateAll[r]&&s.validateAll[r]==="rejected"?"validateRejected":"")},F(l.name||"项目名称"),3)]),default:c(()=>[I("div",G,[t.value>0?(p(),b(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:D},{default:c(()=>[g(" 同步数据 ")]),_:1})):j("",!0)]),m(N,{ref_for:!0,ref_key:"topTabsRef",ref:_,"left-tab":l,"tab-index":r},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),m(S,{ref_key:"settingsRef",ref:V},null,512)]),_:1},8,["modelValue"])):j("",!0)])}}}),ne=q(H,[["__scopeId","data-v-64e73f9f"]]);export{ne as default};
