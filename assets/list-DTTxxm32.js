
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as O,d as T,r as _,D as k,a as n,al as C,am as D,o as A,b as B,f as e,w as a,g as V,G as N,i as M,ak as E,at as h,p as W,_ as $}from"./index-CxuGvTiO.js";const U={list:()=>O.post("supplier-config/get/getSupplierConfig"),create:d=>O.post("supplier-config/insert/insertSupplierConfig",d),edit:d=>O.post("/supplier-config/update/updateSupplierConfig",d)},G=T({name:"SettingSiteSettingList",__name:"list",setup(d){const i=_(!1),b={VITE_APP_SETTING:"false",VITE_APP_TITLE:"Fantastic-admin 专业版",VITE_APP_API_BASEURL:"http://47.96.98.102:9100",VITE_APP_DEBUG_TOOL:"",VITE_BUILD_MOCK:"false",VITE_BUILD_SOURCEMAP:"false",VITE_BUILD_COMPRESS:"gzip,brotli",VITE_BUILD_ARCHIVE:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}.VITE_APP_SUPPLIER,u=_(),t=_({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:""}),y=_({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}]});k(()=>{c()});async function c(){i.value=!0;const{data:r}=await U.list();t.value=r||t.value,i.value=!1}const I=async()=>{const r=`http://${t.value.supplierURL}.${b}`;try{await navigator.clipboard.writeText(r),E.success({message:"复制成功",center:!0})}catch(l){console.error(l)}};function L(){t.value.id===""?u.value&&u.value.validate(r=>{r&&(i.value=!0,delete t.value.id,U.create(t.value).then(()=>{i.value=!1,c(),E.success({message:"新增成功",center:!0})}))}):u.value&&u.value.validate(r=>{if(r)try{let{id:l,keyWords:v,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:m,webName:g}=t.value;const p={id:l,keyWords:v,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:m,webName:g};i.value=!0,U.edit(p).then(()=>{i.value=!1,c(),E.success({message:"修改成功",center:!0})})}catch{}})}return(r,l)=>{const v=h,f=n("el-switch"),o=n("el-form-item"),m=n("el-col"),g=n("el-row"),p=n("el-input"),x=n("el-text"),w=n("el-button"),P=n("el-form"),R=W,S=C("loading");return D((A(),B("div",null,[e(v,{title:"站点设置管理"}),e(R,null,{default:a(()=>[e(P,{ref_key:"formRef",ref:u,model:t.value,rules:y.value,"label-width":"100px",inline:!1},{default:a(()=>[e(g,{gutter:20},{default:a(()=>[e(m,{span:3},{default:a(()=>[e(o,{label:"注册开关"},{default:a(()=>[e(f,{modelValue:t.value.registerOffOrOn,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.registerOffOrOn=s),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:6},{default:a(()=>[e(o,{label:"注册审核"},{default:a(()=>[e(f,{modelValue:t.value.registerExamineOffOrOn,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.registerExamineOffOrOn=s),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{label:"网站名称",prop:"webName"},{default:a(()=>[e(p,{modelValue:t.value.webName,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.webName=s),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(o,{label:"keyWords"},{default:a(()=>[e(p,{modelValue:t.value.keyWords,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.keyWords=s),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(o,{label:"供应商网址",prop:"supplierURL"},{default:a(()=>[e(p,{modelValue:t.value.supplierURL,"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.supplierURL=s),style:{width:"8rem"}},null,8,["modelValue"]),e(x,{class:"mx-1"},{default:a(()=>[V("."+N(M(b)),1)]),_:1}),e(w,{type:"primary",link:"",onClick:I},{default:a(()=>[V("复制")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(w,{type:"primary",onClick:L},{default:a(()=>[V(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])),[[S,i.value]])}}}),H=$(G,[["__scopeId","data-v-e1e073d0"]]);export{H as default};
