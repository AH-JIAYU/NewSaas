
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as X}from"./index-B2H-8K6K.js";import{d as j,aM as A,r as p,n as K,X as w,a as l,q as O,o as m,b as Q,y as r,f as n,w as i,s as f,e as E,z as v,aq as S,i as c,aL as U,g as W,aJ as z,aG as Y,aH as Z,L as $}from"./index-Dh-iMYnr.js";const ee=u=>(Y("data-v-39226baf"),u=u(),Z(),u),ae={class:"absolute-container"},te={class:"page-main"},ne={class:"custom-tree-node"},oe=["title"],ie={class:"code"},se={class:"dictionary-container"},le={class:"dictionary-container"},re=ee(()=>r("div",{class:"empty"},"请在左侧新增或选择一个字典",-1)),ce=[re],de=j({name:"basicDictionary",__name:"index",setup(u){const{pagination:o,getParams:L,onSizeChange:N,onCurrentChange:k,onSortChange:I}=A();o.value.size=20;const y=p(),s=p({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),x=p(),a=p({loading:!1,search:{id:"",chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}});async function D(){try{s.value.loading=!0,a.value.search.id="";const e=await z.list();s.value.tree=e.data,s.value.loading=!1}catch{}finally{s.value.loading=!1}}K(()=>{D()}),w(()=>s.value.search,e=>{y.value.filter(e)});function T(e,t){return e?t.label.includes(e):!0}function B(e){o.value.page=1,a.value.search.id=e.id}w(()=>a.value.search.id,()=>{g()});async function g(){try{a.value.loading=!0;const e={...L(),id:a.value.search.id},t=await z.itemlist(e);a.value.loading=!1,a.value.dataList=t.data.records,a.value.dataList.forEach(h=>{h.enableLoading=!1}),o.value.total=Number(t.data.total)}catch{}finally{a.value.loading=!1}}function P(e){N(e).then(()=>g())}function R(e=1){k(e).then(()=>g())}function V({prop:e,order:t}){I(e,t).then(()=>g())}return(e,t)=>{const h=l("ElTree"),q=l("ElScrollbar"),_=l("ElTableColumn"),M=l("ElTag"),F=l("el-empty"),G=l("ElTable"),H=l("ElPagination"),J=X,b=O("loading");return m(),Q("div",ae,[r("div",te,[n(J,{"hide-left-side-toggle":""},{leftSide:i(()=>[n(q,{class:"tree"},{default:i(()=>[f((m(),E(h,{ref_key:"dictionaryRef",ref:y,data:s.value.tree,"filter-node-method":T,"default-expand-all":"",onNodeClick:B},{default:i(({node:d,data:C})=>[r("div",ne,[r("div",{class:"label",title:d.label},v(C.chineseName),9,oe),r("div",ie,v(C.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[b,s.value.loading]])]),_:1})]),default:i(()=>[f(r("div",se,[f((m(),E(G,{ref_key:"dictionaryItemRef",ref:x,data:a.value.dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:V,onSelectionChange:t[0]||(t[0]=d=>a.value.selectionDataList=d),"row-key":"id","default-expand-all":""},{empty:i(()=>[n(F,{image:c(U),"image-size":300},null,8,["image"])]),default:i(()=>[n(_,{prop:"chineseName",label:"中文名称"}),n(_,{prop:"englishName",label:"英文名称"}),n(_,{prop:"remark",label:"备注"}),n(_,{label:"键值",align:"left",width:"150"},{default:i(d=>[n(M,{type:"info"},{default:i(()=>[W(v(d.row.code),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[b,a.value.loading]]),n(H,{"current-page":c(o).page,total:c(o).total,"page-size":c(o).size,"page-sizes":c(o).sizes,layout:c(o).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:P,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[S,a.value.search.id]]),f(r("div",le,ce,512),[[S,!a.value.search.id]])]),_:1})])])}}}),_e=$(de,[["__scopeId","data-v-39226baf"]]);export{_e as default};
