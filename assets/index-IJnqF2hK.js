
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Q,r as p,n as W,a as c,o,e as u,w as e,y as i,f as a,g as s,b as y,z as d,t as w,j as T,F as S,p as X,aH as Y,aI as Z,L as $}from"./index-Bp3_84TR.js";import{u as ee}from"./department-CQ-DE8Oe.js";import{u as ae}from"./tenant_role-DjmoRicH.js";import{u as te}from"./configuration_manager-C1px6nYu.js";import{u as le}from"./position_manage-BCZ4MMtO.js";import{a as oe}from"./department-CwOJllT1.js";import"./configuration_role-BbmjlYnP.js";import"./position_manage-DASkXNpB.js";const M=b=>(Y("data-v-4b6e684d"),b=b(),Z(),b),se=M(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"基本信息")],-1)),ne={key:1,class:"avatar"},ue={style:{"font-size":"14px"}},de=M(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"角色信息")],-1)),re={class:"card-header"},ce={class:"leftTitle"},ie={style:{"margin-left":"20px","font-size":"14px"}},_e={class:"flex-c"},fe=Q({__name:"index",emits:["fetch-data"],setup(b,{expose:P,emit:B}){const j=te(),z=p([]),E=le(),C=p(),R=ae(),I=p();ee();const U={children:"children",label:"name"},x=p(),h=p({}),F=B,k=p(!1),V=p([]),l=p();async function H(m){h.value=m;const f={id:m.id},{status:r,data:N}=await X.list(f);l.value=N.data[0],h.value.roleList=[l.value.role],V.value&&V.value.push(l.value.organizationalStructureId),k.value=!0}function D(){F("fetch-data"),k.value=!1}return W(async()=>{console.log("1111"),C.value=await E.getPositionManage(),z.value=await j.getStaff(),I.value=await R.getRole();const m=await oe.list({name:""});m.data&&(x.value=m.data,x.value.forEach(f=>{f.disabled=!0}))}),P({showEdit:H}),(m,f)=>{const r=c("el-col"),N=c("el-avatar"),g=c("el-row"),n=c("el-text"),_=c("el-form-item"),L=c("el-card"),q=c("el-checkbox"),A=c("el-checkbox-group"),G=c("el-tree"),J=c("el-form"),K=c("el-button"),O=c("el-drawer");return o(),u(O,{modelValue:k.value,"onUpdate:modelValue":f[1]||(f[1]=t=>k.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:D},{footer:e(()=>[i("div",_e,[a(K,{type:"primary",onClick:D},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(J,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(L,{class:"box-card"},{header:e(()=>[se]),default:e(()=>[a(g,{gutter:20},{default:e(()=>[a(r,{span:1}),a(r,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(o(),u(N,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(o(),y("div",ne,d(l.value.name),1))]),_:1}),a(r,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[i("p",null,d(l.value.userName),1),i("p",ue,[s("账号:"),i("span",null,d(l.value.userName),1)])]),_:1})]),_:1}),a(g,{gutter:24},{default:e(()=>[a(r,{span:6},{default:e(()=>[a(_,{label:"员工ID:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"姓名:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"手机号:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.phone?l.value.phone:"-"),1)]}),_:1})]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"邮箱:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"部门:"},{default:e(()=>[(o(!0),y(S,null,w(x.value,t=>(o(),u(n,null,{default:e(()=>[l.value.departmentId===t.id?(o(),u(n,{key:0},{default:e(()=>[s(d(t.name?t.name:"-"),1)]),_:2},1024)):T("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"职位:"},{default:e(()=>[(o(!0),y(S,null,w(C.value,t=>(o(),u(n,null,{default:e(()=>[l.value.positionId===t.id?(o(),u(n,{key:0},{default:e(()=>[s(d(t.name?t.name:"-"),1)]),_:2},1024)):T("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"帐号状态:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(r,{span:6},{default:e(()=>[a(_,{label:"创建时间:"},{default:e(()=>[a(n,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{class:"box-card"},{header:e(()=>[de]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(_,{label:"分配角色:"},{default:e(()=>{var t;return[(t=I.value)!=null&&t.length?(o(),u(A,{key:0,style:{"margin-left":"1.5rem"},modelValue:h.value.roleList,"onUpdate:modelValue":f[0]||(f[0]=v=>h.value.roleList=v)},{default:e(()=>[(o(!0),y(S,null,w(I.value,v=>(o(),u(q,{key:v.id,label:v.roleName,value:v.roleName,disabled:""},{default:e(()=>[s(d(v.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(o(),u(n,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(L,{class:"box-card"},{header:e(()=>[i("div",re,[i("div",ce,[s(" 部门信息"),i("span",ie,[s("PM:"),(o(!0),y(S,null,w(z.value,t=>(o(),u(n,{key:t.id},{default:e(()=>[t.id===h.value.director?(o(),u(n,{key:0},{default:e(()=>[s(d(t.name),1)]),_:2},1024)):T("",!0)]),_:2},1024))),128))])])])]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(_,{label:"分配部门:"},{default:e(()=>[x.value.length>0?(o(),u(G,{key:0,style:{"max-width":"600px"},ref:"treeRef",data:x.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":V.value,"default-expand-all":"",props:U},null,8,["data","default-checked-keys"])):(o(),u(n,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ge=$(fe,[["__scopeId","data-v-4b6e684d"]]);export{ge as default};
