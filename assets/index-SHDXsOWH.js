
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as m,d as D,r as u,a5 as L,k as q,a as i,p as O,o as w,b as M,f as l,w as a,s as f,g as n,q as S,e as $,E as y,R as F}from"./index-BCb3LVAr.js";const k={list:s=>m.post("tenant-update-record/getTenantUpdateRecordList",s),create:s=>m.post("notice/insertNotice",s),edit:s=>m.post("tenant-update-record/updateTenantUpdateRecord",s),delete:s=>m.post("notice/deleteNotice",s)},P={class:"shenhe"},H={class:"beizhu"},A={style:{"margin-top":"10px"}},G={style:{flex:"auto"}},J=D({name:"ProjectReview",__name:"index",emits:["success"],setup(s,{expose:T,emit:z}){const I=u([]),C=z,p=u(!1);u();const e=u({surveyType:null,viceType:null,type:"",remark:"",projectClickIdList:[],arr:[]}),R=L({page:1,limit:10,type:null,createUserId:""}),U=u({type:[{required:!0,message:"请选择审核方式",trigger:"change"}],arr:[{required:!0,message:"请输入至少一个ID",trigger:"blur"},{validator:(d,t,o)=>{/^[\d\n]*$/.test(t)?o():o(new Error("请输入数字，支持换行"))},trigger:"blur"}]}),v=u(),c=u(!1);async function j(d){c.value=!0}async function E(){v.value&&v.value.validate(async d=>{try{if(d){p.value=!0;const t=e.value.type.split(",");e.value.surveyType=+t[0],t[1]==="null"?e.value.viceType=null:e.value.viceType=+t[1],e.value.projectClickIdList=e.value.arr.split(`
`)||[],delete e.value.arr,delete e.value.type;const{status:o}=await k.edit(e.value);o===1?(C("success"),p.value=!1,y.success({message:"操作成功",center:!0}),g()):y.error({message:"操作失败，请联系工作人员",center:!0})}else y({message:"请检查必填项,或数据格式不正确",type:"warning"})}catch{}finally{p.value=!1}})}function g(){v.value.resetFields(),Object.assign(e.value,{surveyType:null,viceType:null,remark:"",projectClickIdList:[]}),e.value.arr=[],c.value=!1}return q(async()=>{const{data:d}=await k.list(R);I.value=d.tenantUpdateRecordVOBuilders}),T({showEdit:j}),(d,t)=>{const o=i("el-radio"),b=i("el-radio-group"),_=i("el-form-item"),V=i("el-input"),N=i("el-form"),x=i("el-button"),h=i("el-drawer"),B=O("loading");return w(),M("div",null,[l(h,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=r=>c.value=r),title:"记录变更",size:"50%","before-close":g},{footer:a(()=>[f("div",G,[l(x,{onClick:t[3]||(t[3]=r=>c.value=!1)},{default:a(()=>[n(" 取消 ")]),_:1}),l(x,{type:"primary",onClick:E},{default:a(()=>[n(" 确定 ")]),_:1})])]),default:a(()=>[S((w(),$(N,{ref_key:"formRef",ref:v,model:e.value,rules:U.value,"label-width":"174px",inline:!1},{default:a(()=>[f("div",P,[l(_,{prop:"type",style:{display:"flex","align-items":"center"},label:"变更状态"},{default:a(()=>[l(b,{modelValue:e.value.type,"onUpdate:modelValue":t[0]||(t[0]=r=>e.value.type=r)},{default:a(()=>[l(o,{value:"1,0",size:"large"},{default:a(()=>[n(" 完成 ")]),_:1}),l(o,{value:"1,7",size:"large"},{default:a(()=>[n(" 审核通过 ")]),_:1}),l(o,{value:"1,8",size:"large"},{default:a(()=>[n(" 审核失败 ")]),_:1}),l(o,{value:"1,9",size:"large"},{default:a(()=>[n(" 数据冻结 ")]),_:1}),l(o,{value:"2,null",size:"large"},{default:a(()=>[n(" 被甄别 ")]),_:1}),l(o,{value:"3,null",size:"large"},{default:a(()=>[n(" 配额满 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),f("div",H,[l(_,{label:"备注"},{default:a(()=>[l(V,{class:"custom-input",modelValue:e.value.remark,"onUpdate:modelValue":t[1]||(t[1]=r=>e.value.remark=r),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),f("div",A,[l(_,{prop:"arr"},{default:a(()=>[l(V,{modelValue:e.value.arr,"onUpdate:modelValue":t[2]||(t[2]=r=>e.value.arr=r),placeholder:"请粘贴ID，每行一个,多个请回车换行",type:"textarea",rows:15},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])),[[B,p.value]])]),_:1},8,["modelValue"])])}}}),K=F(J,[["__scopeId","data-v-a7dfc396"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as E,k as a,X as i};
