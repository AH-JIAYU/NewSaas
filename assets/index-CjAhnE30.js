
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import D from"./index-DVcPsJQi.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-CX5t1dSG.js";import{u as U}from"./projectManagement_list-0WFwVrw8.js";import{d as N,a0 as P,r as n,Z as $,k as z,a3 as E,a as b,o as v,b as I,f as _,w as f,g as F,O as T,e as h,F as H,t as J,s as y,A as O,j as Z,an as j,aI as q,aJ as G,M as K}from"./index--d-k_wOm.js";import"./index-CkxRY-nc.js";import"./zh_Hans-WPr6qT-T.js";import"./zh_Hans-B39mJ-rS.js";import"./file-Xh2hVNOi.js";import"./projectManagement-DxAL1oKo.js";import"./user_customer-iIoT-1Ji.js";import"./user_customer-Ob1NcA57.js";import"./index.vue_vue_type_script_setup_true_lang-6V5y7LRm.js";import"./index.vue_vue_type_script_setup_true_lang-DI0GOpPa.js";import"./index-D_QwNsZL.js";import"./index-D6IylxuS.js";import"./department-DAbjezxk.js";import"./position_manage-C-une7s-.js";import"./department-B3UDBfLd.js";import"./tenant_role-BxnX-GeH.js";import"./configuration_role-bu7V9cGt.js";import"./configuration_manager-CCjheCbw.js";import"./configuration_siteSetting-CazPyiuu.js";import"./configuration_site_setting-DpwTyCCR.js";import"./apiLoading-BGGBhKZB.js";import"./stagedData-DCjq6TMs.js";const Q=r=>(q("data-v-77231b22"),r=r(),G(),r),W=Q(()=>y("div",{style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},null,-1)),X=N({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(r,{expose:x,emit:k}){const L=U(),l=r,A=k,R=P("currentProjectTimeline"),S=n(),e=n(l.leftTabsData),V=n(l.validateTopTabs),u=n(),g=n(0),t=n(0);function C(){const{projectId:a,parentId:o,name:p,projectIdentification:c,clientId:d,countryIdList:s,uidUrl:i,...m}=j(e.value[0]);e.value[t.value].projectId&&(m.projectId=e.value[t.value].projectId,m.parentId=e.value[t.value].parentId),u.value[t.value].getUpLoad(m.descriptionUrl),e.value.splice(t.value,1,m)}function w(){t.value=++g.value;const{projectId:a,...o}=j(L.initialTopTabsData);e.value.push(o)}function B(a){e.value.splice(a,1),V.value.splice(a,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),g.value=Math.max(0,e.value.length-1))}return $(()=>t.value,(a,o)=>{l.validateAll.reduce((c,d,s)=>(d==="rejected"&&c.push(s),c),[]).includes(o)&&A("validate"),R(e.value[t.value].releaseTime)}),z(()=>{for(let a=0;a<u.value.length;a++)u.value[a].getUpLoad(e.value[a].descriptionUrl)}),e.value.forEach((a,o)=>{const p=n(null);E(`formRef${o}`,p)}),x({activeLeftTab:t}),(a,o)=>{const p=b("el-button"),c=b("el-tab-pane"),d=b("el-tabs");return v(),I("div",null,[_(p,{class:T(l.title==="新增"?"button":"button hideButton"),disabled:e.value.length>29||l.title==="编辑"&&e.value[0].parentId!=="0",onClick:o[0]||(o[0]=s=>w())},{default:f(()=>[F(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(v(),h(d,{key:0,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=s=>t.value=s),"tab-position":"left",onTabRemove:B,class:T(l.title==="新增"?"":"editHideCloseButton")},{default:f(()=>[(v(!0),I(H,null,J(e.value,(s,i)=>(v(),h(c,{key:i,style:{position:"relative"},closable:e.value.length!==1,name:i},{label:f(()=>[y("div",{class:T(l.validateAll[i]&&l.validateAll[i]==="rejected"?"validateRejected":"")},O(s.name||"项目名称"),3)]),default:f(()=>[W,_(D,{ref_for:!0,ref_key:"topTabsRef",ref:u,"left-tab":s,"tab-index":i,onSyncProject:C},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),_(M,{ref_key:"settingsRef",ref:S},null,512)]),_:1},8,["modelValue","class"])):Z("",!0)])}}}),xe=K(X,[["__scopeId","data-v-77231b22"]]);export{xe as default};
