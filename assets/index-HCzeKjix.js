
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as L}from"./configuration_manager-CpSTDvzv.js";import{g as V}from"./group_manage-Cb7xzqbX.js";import{u as R}from"./department-BMLFpc-V.js";import{d as M,r as u,k as N,E as S,a as i,l as T,n as A,i as a,o as m,b as p,f as o,w as n,F as w,q as k,e as x,Q as J}from"./index-D5mKHCpP.js";import"./department-DKXp8nbC.js";const O=M({__name:"index",props:["id","row"],setup(y,{expose:D}){const I=R(),f=u(),v=y,h=L(),_=u([]),r=u(!1),d=u(),e=u({id:v.id,name:"",director:null,departmentId:null,remark:"",commissionStatus:null}),E=u({name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]});N(async()=>{r.value=!0,f.value=await I.getDepartment(),_.value=await h.getStaff(),e.value.id!==""&&F(),r.value=!1});function F(){const s=JSON.parse(v.row);e.value=s}return D({submit(){try{return new Promise(s=>{delete e.value.count,e.value.id===""?d.value&&d.value.validate(t=>{t&&(delete e.value.id,r.value=!0,V.create(e.value).then(()=>{r.value=!1,S.success({message:"新增成功",center:!0}),s()}))}):d.value&&d.value.validate(t=>{t&&(r.value=!0,V.edit(e.value).then(()=>{r.value=!1,S.success({message:"编辑成功",center:!0}),s()}))})})}catch{}finally{r.value=!1}}}),(s,t)=>{const U=i("el-input"),c=i("el-form-item"),b=i("el-option"),g=i("el-select"),q=i("el-switch"),B=i("ElForm"),C=T("loading");return A((m(),p("div",null,[o(B,{ref_key:"formRef",ref:d,model:a(e),rules:a(E),"label-width":"130px","label-suffix":"："},{default:n(()=>[o(c,{label:"组名称",prop:"name"},{default:n(()=>[o(U,{modelValue:a(e).name,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).name=l),placeholder:"请输入部门名称",clearable:"",disabled:!!a(e).id},null,8,["modelValue","disabled"])]),_:1}),o(c,{label:"所属部门",prop:"departmentId"},{default:n(()=>[o(g,{modelValue:a(e).departmentId,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).departmentId=l),"value-key":"",placeholder:"请选择所属部门",clearable:"",disabled:!!a(e).id,filterable:""},{default:n(()=>[(m(!0),p(w,null,k(a(f),l=>(m(),x(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(c,{label:"组长",prop:"commissionType"},{default:n(()=>[o(g,{modelValue:a(e).director,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).director=l),"value-key":"",placeholder:"请选择组长",clearable:"",filterable:""},{default:n(()=>[(m(!0),p(w,null,k(a(_),l=>(m(),x(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(c,{label:"组提成",prop:"commissionStatus"},{default:n(()=>[o(q,{modelValue:a(e).commissionStatus,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).commissionStatus=l),"active-text":"启用","inactive-text":"禁用","inline-prompt":"","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[C,a(r)]])}}}),H=J(O,[["__scopeId","data-v-93b8ff9e"]]);export{H as default};
