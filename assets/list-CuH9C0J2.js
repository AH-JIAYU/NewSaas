
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as me,aO as _e,r as c,a5 as fe,l as ge,b as a,q as ye,o as i,e as he,g as t,w as o,az as R,h as s,H as u,s as be,f as r,j as y,aN as ve,t as d,k as g,S as ke,bd as Ie,aP as we,E as Ce,N as Se,aQ as je,aR as Ne,bc as ze,ap as Te,aI as De,aJ as Pe,R as xe}from"./index-BOIe6JP6.js";import{_ as Ee}from"./index-DPUv1hQk.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-DdCfPL4K.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-CCuXacrE.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-DVDK1aNa.js";import{a as G}from"./projectManagement_scheduling-C_ztugeV.js";import"./index-AvUmW2fa.js";import"./apiLoading-Bbvg9_e1.js";const Ve=I=>(De("data-v-334749d1"),I=I(),Pe(),I),Ue=Ve(()=>d("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Me={class:"tableBig"},Re={class:"tableBig"},Ge={class:"copyId tableSmall"},He={class:"id oneLine"},Fe={class:"tableBig"},Ae={class:"tableBig"},Ke={class:"specifyTheTarget"},qe={class:"tableBig"},Oe={class:"id tableSmall"},Qe=me({name:"scheduling",__name:"list",setup(I){const{format:H}=Ie(),{pagination:h,getParams:F,onSizeChange:A,onCurrentChange:K}=_e(),q=c(""),w=c(!1),C=c(!0),S=c(),j=c(!1),p=c([]),N=c("default"),z=c(!1),T=c([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"原价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定会员组",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),m=fe({dispatchType:"",projectId:"",projectName:""}),E=c([]);function O(){S.value.showEdit()}function Q(n){S.value.showEdit(n)}function J(n){we.confirm(`确认删除「${n.projectName}」吗？`,"确认信息").then(()=>{G.delete({projectDispatchId:n.projectDispatchId}).then(l=>{v(),Ce.success({message:"删除成功",center:!0})})}).catch(()=>{})}function W(n){A(n).then(()=>v())}function b(n=1){K(n).then(()=>v())}function X(){Object.assign(m,{dispatchType:"",projectId:"",projectName:""}),v()}async function v(){try{w.value=!0;const n={...F(),...m},l=await G.list(n);E.value=l.data.getProjectDispatchInfoList,h.value.total=l.data.total,w.value=!1}catch{}finally{w.value=!1}}return ge(()=>{T.value.forEach(n=>{n.checked&&p.value.push(n.prop)}),v()}),(n,l)=>{const L=a("el-input"),D=a("el-form-item"),$=a("el-option"),Y=a("el-select"),B=Se,P=a("ElButton"),Z=a("ElFormItem"),ee=a("el-form"),te=$e,oe=a("ElDivider"),k=a("el-button"),le=Le,ae=je,ne=Ne,se=a("el-row"),_=a("el-table-column"),V=a("el-text"),U=Ee,M=ze,ie=a("el-tag"),re=a("el-empty"),pe=a("el-table"),ce=a("ElPagination"),ue=Te,de=ye("loading");return i(),he("div",{class:ke({"absolute-container":j.value})},[t(ue,null,{default:o(()=>[t(te,{"show-toggle":!1},{default:o(({fold:e,toggle:x})=>[t(ee,{model:m.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[t(D,{label:""},{default:o(()=>[t(L,{modelValue:m.projectId,"onUpdate:modelValue":l[0]||(l[0]=f=>m.projectId=f),clearable:"",placeholder:"项目ID",onKeydown:l[1]||(l[1]=R(f=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(D,{label:""},{default:o(()=>[t(L,{modelValue:m.projectName,"onUpdate:modelValue":l[2]||(l[2]=f=>m.projectName=f),clearable:"",placeholder:"项目名称",onKeydown:l[3]||(l[3]=R(f=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(D,{label:""},{default:o(()=>[t(Y,{modelValue:m.dispatchType,"onUpdate:modelValue":l[4]||(l[4]=f=>m.dispatchType=f),clearable:"",placeholder:"全部类型",onChange:l[5]||(l[5]=f=>b())},{default:o(()=>[t($,{label:"指定关闭",value:1}),t($,{label:"指定价格",value:2})]),_:1},8,["modelValue"])]),_:1}),t(Z,null,{default:o(()=>[t(P,{type:"primary",onClick:l[6]||(l[6]=f=>b())},{icon:o(()=>[t(B,{name:"i-ep:search"})]),default:o(()=>[s(" 筛选 ")]),_:1}),t(P,{onClick:X},{icon:o(()=>[Ue]),default:o(()=>[s(" 重置 ")]),_:1}),t(P,{disabled:"",link:"",onClick:x},{icon:o(()=>[t(B,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[s(" "+u(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(oe,{"border-style":"dashed"}),t(se,{gutter:24},{default:o(()=>[t(le,null,{default:o(()=>[t(k,{type:"primary",size:"default",onClick:O},{default:o(()=>[s(" 新增 ")]),_:1})]),_:1}),t(ne,null,{default:o(()=>[t(k,{size:"default",onClick:l[7]||(l[7]=()=>{})},{default:o(()=>[s(" 导出 ")]),_:1}),t(ae,{border:C.value,"onUpdate:border":l[8]||(l[8]=e=>C.value=e),tableAutoHeight:j.value,"onUpdate:tableAutoHeight":l[9]||(l[9]=e=>j.value=e),checkList:p.value,"onUpdate:checkList":l[10]||(l[10]=e=>p.value=e),columns:T.value,"onUpdate:columns":l[11]||(l[11]=e=>T.value=e),"line-height":N.value,"onUpdate:lineHeight":l[12]||(l[12]=e=>N.value=e),stripe:z.value,"onUpdate:stripe":l[13]||(l[13]=e=>z.value=e),style:{"margin-left":"12px"},onQueryData:b},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),be((i(),r(pe,{ref_key:"tableSortRef",ref:q,style:{"margin-top":"10px"},"row-key":"id",data:E.value,border:C.value,size:N.value,stripe:z.value},{empty:o(()=>[t(re,{image:y(ve),"image-size":300},null,8,["image"])]),default:o(()=>[t(_,{align:"center",type:"selection"}),p.value.includes("dispatchType")?(i(),r(_,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"center",label:"类型"},{default:o(({row:e})=>[d("div",Me,[e.dispatchType===1?(i(),r(V,{key:0,class:"mx-1",type:"primary"},{default:o(()=>[s("指定关闭")]),_:1})):(i(),r(V,{key:1,class:"mx-1",type:"danger"},{default:o(()=>[s("指定价格")]),_:1}))])]),_:1})):g("",!0),p.value.includes("projectName")?(i(),r(_,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目"},{default:o(({row:e})=>[d("div",Re,u(e.projectName),1)]),_:1})):g("",!0),p.value.includes("projectId")?(i(),r(_,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",Ge,[d("div",He,"ID: "+u(e.projectId),1),t(U,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):g("",!0),p.value.includes("moneyPrice")?(i(),r(_,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"center",label:"原价"},{default:o(({row:e})=>[d("div",Fe,[t(M),s(u(e.moneyPrice||0),1)])]),_:1})):g("",!0),p.value.includes("doMoneyPrice")?(i(),r(_,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"center",label:"指定价格"},{default:o(({row:e})=>[d("div",Ae,[t(M),s(u(e.doMoneyPrice||0),1)])]),_:1})):g("",!0),p.value.includes("Supplier")?(i(),r(_,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"center",label:"指定目标",width:"350"},{default:o(({row:e})=>[d("div",Ke,[e.dataType==2?(i(),r(k,{key:0,style:{width:"46px"},type:"primary",size:"small",class:"p-1"},{default:o(()=>[s(u(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"会员组"),1)]),_:2},1024)):e.dataType===1?(i(),r(k,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:o(()=>[s(u(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):g("",!0),d("b",qe,u(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),s("  "),d("span",Oe,"ID: "+u(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),t(U,{class:"copy",content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId},null,8,["content"])])]),_:1})):g("",!0),p.value.includes("createTime")?(i(),r(_,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:o(({row:e})=>[t(ie,{effect:"plain",type:"info"},{default:o(()=>[s(u(y(H)(e.createTime)),1)]),_:2},1024)]),_:1})):g("",!0),t(_,{align:"center",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(k,{type:"primary",plain:"",size:"small",onClick:x=>Q(e)},{default:o(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),t(k,{type:"danger",plain:"",size:"small",onClick:x=>J(e)},{default:o(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[de,w.value]]),t(ce,{"current-page":y(h).page,total:y(h).total,"page-size":y(h).size,"page-sizes":y(h).sizes,layout:y(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"]),t(Be,{ref_key:"editRef",ref:S,onFetchData:v},null,512)]),_:1})],2)}}}),lt=xe(Qe,[["__scopeId","data-v-334749d1"]]);export{lt as default};
