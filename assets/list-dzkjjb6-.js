
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ze,am as Me,aK as Re,r as d,a5 as Pe,c as ee,k as Be,a as p,p as De,o as n,b as I,f as l,w as e,i as o,q as w,F as L,t as D,e as r,g as i,H as f,I as C,j as b,s as te,S as Te,bb as $e,E as Ge,N as He,aM as Oe,aN as Fe,ba as Ae,ap as Ye,aG as qe,aH as Qe,aq as T,R as Ke}from"./index-Bf0tJ0Rs.js";import{_ as Je}from"./index.vue_vue_type_style_index_0_lang-CJ6wSSH7.js";import{_ as We}from"./index.vue_vue_type_script_setup_true_lang-CHOHguRd.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-tc3BTQHU.js";import Ze from"./index-DvdcbV2T.js";import et from"./index-BcL2RDKU.js";import tt from"./index-C4j8so6u.js";import{a as lt}from"./survey_myProjeck-CWcJ5Cq7.js";import{u as ot}from"./user_customer-rZRxhfzy.js";import{u as at}from"./index-B57cF2Wy.js";import"./index-CM7Gchr1.js";import"./file-CP29JbRg.js";import"./download-C8PHVIy1.js";import"./apiLoading-BZol-vG7.js";import"./projectManagement-CfOxBH9i.js";import"./survey_vipGroup-BV3uh28A.js";import"./survey_vipGroup-Ca4bvm4b.js";import"./user_customer-tZD-ykHP.js";import"./clipboard-Bet-_sw7.js";const nt=j=>(qe("data-v-6a7c3652"),j=j(),Qe(),j),rt=nt(()=>te("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),it=ze({name:"myProjeck",__name:"list",setup(j){const{format:le}=$e(),{toClipboard:oe}=at(),A=Me(),ae=ot(),{pagination:g,getParams:st,onSizeChange:ne,onCurrentChange:re,onSortChange:ct}=Re(),$=d([]),Y=d([]),q=d(),ie=d(""),Q=d(),S=d(!0),se=d(),K=d(),V=d(!0),m=d([]),E=d(!1),x=d("default"),U=d(!1),z=d([{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"客户简称/标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配状态",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),c=Pe({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),J=d([]),W=d();function ce(s){Q.value.showEdit(s)}function ue(s){K.value.showEdit(s)}function pe(s){W.value.showEdit(s)}function me(s){ne(s)}function X(s=1){re(s)}function de(){Object.assign(c,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),M()}const fe=ee(()=>J.value.slice((g.value.page-1)*g.value.size,g.value.page*g.value.size));async function M(){try{S.value=!0;const s={...c};c.time&&c.time.length&&(s.beginTime=c.time[0]||"",s.endTime=c.time[1]||"");const a=await lt.list(s);q.value=a.data.currencyType,J.value=a.data.getMemberProjectListInfoList,g.value.total=a.data.getMemberProjectListInfoList.length,S.value=!1}catch{}finally{S.value=!1}}const _e=s=>{oe(s),Ge({type:"success",message:"复制成功"})},R=ee(()=>s=>$.value.filter(h=>s.includes(h.id)).map(h=>h.chineseName));return Be(async()=>{z.value.forEach(s=>{s.checked&&m.value.push(s.prop)}),$.value=await A.getCountry(),Y.value=await ae.getCustomerList(),M()}),(s,a)=>{const h=p("el-input"),v=p("el-form-item"),be=p("ElOption"),G=p("el-select"),H=p("el-option"),ye=p("el-date-picker"),Z=He,O=p("ElButton"),ge=p("ElFormItem"),ke=p("el-form"),he=We,ve=p("ElDivider"),Ie=Je,P=p("el-button"),Ce=Oe,Ne=Fe,we=p("el-row"),_=p("el-table-column"),k=p("el-text"),F=p("el-tooltip"),Le=Ae,N=p("el-link"),B=p("el-tag"),je=p("ElSpace"),Se=p("el-empty"),Ve=p("el-table"),Ee=p("ElPagination"),xe=Ye,Ue=De("loading");return n(),I("div",{class:Te({"absolute-container":o(E)})},[l(xe,null,{default:e(()=>[l(he,{"show-toggle":!1},{default:e(({fold:t,toggle:y})=>[l(ke,{model:o(c).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[l(v,{label:""},{default:e(()=>[l(h,{modelValue:o(c).projectId,"onUpdate:modelValue":a[0]||(a[0]=u=>o(c).projectId=u),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:e(()=>[l(h,{clearable:"",modelValue:o(c).projectName,"onUpdate:modelValue":a[1]||(a[1]=u=>o(c).projectName=u),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:e(()=>[l(h,{modelValue:o(c).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=u=>o(c).projectIdentification=u),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),w(l(v,{label:""},{default:e(()=>[l(G,{placeholder:"国家地区",modelValue:o(c).countryId,"onUpdate:modelValue":a[3]||(a[3]=u=>o(c).countryId=u),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:e(()=>[(n(!0),I(L,null,D(o($),u=>(n(),r(be,{label:u.chineseName,value:u.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),w(l(v,{label:""},{default:e(()=>[l(G,{placeholder:"客户简称",modelValue:o(c).clientId,"onUpdate:modelValue":a[4]||(a[4]=u=>o(c).clientId=u)},{default:e(()=>[(n(!0),I(L,null,D(o(Y),u=>(n(),r(H,{key:u.tenantCustomerId,value:u.tenantCustomerId,label:u.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),w(l(v,{label:""},{default:e(()=>[l(G,{placeholder:"B2B/B2C",modelValue:o(c).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=u=>o(c).b2bOrB2cStatus=u)},{default:e(()=>[l(H,{label:"B2B",value:"1"}),l(H,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),w(l(v,null,{default:e(()=>[l(ye,{modelValue:o(c).time,"onUpdate:modelValue":a[6]||(a[6]=u=>o(c).time=u),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[T,!t]]),l(ge,null,{default:e(()=>[l(O,{type:"primary",onClick:a[7]||(a[7]=u=>M())},{icon:e(()=>[l(Z,{name:"i-ep:search"})]),default:e(()=>[i(" 筛选 ")]),_:1}),l(O,{onClick:de},{icon:e(()=>[rt]),default:e(()=>[i(" 重置 ")]),_:1}),l(O,{link:"",onClick:y},{icon:e(()=>[l(Z,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[i(" "+f(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(ve,{"border-style":"dashed"}),l(we,{gutter:24},{default:e(()=>[l(Ie),l(Ne,null,{default:e(()=>[l(P,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:e(()=>[i(" 导出 ")]),_:1}),l(Ce,{border:o(V),"onUpdate:border":a[9]||(a[9]=t=>C(V)?V.value=t:null),tableAutoHeight:o(E),"onUpdate:tableAutoHeight":a[10]||(a[10]=t=>C(E)?E.value=t:null),checkList:o(m),"onUpdate:checkList":a[11]||(a[11]=t=>C(m)?m.value=t:null),columns:o(z),"onUpdate:columns":a[12]||(a[12]=t=>C(z)?z.value=t:null),"line-height":o(x),"onUpdate:lineHeight":a[13]||(a[13]=t=>C(x)?x.value=t:null),stripe:o(U),"onUpdate:stripe":a[14]||(a[14]=t=>C(U)?U.value=t:null),style:{"margin-left":"12px"},onQueryData:X},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),w((n(),r(Ve,{ref_key:"tableSortRef",ref:ie,style:{"margin-top":"10px"},"row-key":"id",data:o(fe),border:o(V),size:o(x),stripe:o(U)},{empty:e(()=>[l(Se,{description:"暂无数据"})]),default:e(()=>[l(_,{align:"center",type:"selection"}),o(m).includes("projectId")?(n(),r(_,{key:0,"show-overflow-tooltip":"",width:"180",fixed:"left",prop:"projectId",align:"center",label:"项目ID"})):b("",!0),o(m).includes("projectName")?(n(),r(_,{key:1,"show-overflow-tooltip":"",width:"180",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),o(m).includes("projectIdentificationOrClientName")?(n(),r(_,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"center",label:"客户简称/标识"},{default:e(({row:t})=>[l(k,{class:"mx-1"},{default:e(()=>[i(f(t.projectIdentification),1)]),_:2},1024),te("p",null,f(t.clientName),1)]),_:1})):b("",!0),o(m).includes("withoutUrl")?(n(),r(_,{key:3,prop:"withoutUrl",align:"center",label:"URL"},{default:e(({row:t})=>[l(F,{class:"box-item",effect:"dark",content:t.withoutUrl,placement:"top"},{default:e(()=>[l(P,{link:"",type:"primary",onClick:y=>_e(t.withoutUrl)},{default:e(()=>[i("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):b("",!0),o(m).includes("participation")?(n(),r(_,{key:4,"show-overflow-tooltip":"",width:"170",align:"center",label:"参与/完成/配额/限量"},{default:e(({row:t})=>[l(k,{class:"mx-1"},{default:e(()=>[i(f(t.participation||0),1)]),_:2},1024),i(" / "),l(k,{class:"mx-1",type:"success"},{default:e(()=>[i(f(t.complete||0),1)]),_:2},1024),i("/ "),l(k,{class:"mx-1",type:"warning"},{default:e(()=>[i(f(t.num||0),1)]),_:2},1024),i("/ "+f(t.limitedQuantity||"-"),1)]),_:1})):b("",!0),o(m).includes("doMoneyPrice")?(n(),r(_,{key:5,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[o(q)===3?(n(),r(k,{key:0,class:"mx-1"},{default:e(()=>[i("暂无数据")]),_:1})):(n(),r(k,{key:1,class:"mx-1"},{default:e(()=>[l(Le),i(f(t.doMoneyPrice||0),1)]),_:2},1024))]),_:1})):b("",!0),o(m).includes("memberPrice")?(n(),r(_,{key:6,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(N,{key:0,size:"small",plain:"",type:"primary",onClick:y=>ue(t)},{default:e(()=>[i(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(k,{key:1},{default:e(()=>[i(" - ")]),_:1}))]),_:1})):b("",!0),o(m).includes("ir")?(n(),r(_,{key:7,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[i(f(t.ir?t.ir:"-")+" / "+f(t.nir?t.nir:"-"),1)]),_:1})):b("",!0),o(m).includes("countryNameList")?(n(),r(_,{key:8,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:e(({row:t})=>[t.countryNameList?(n(),I(L,{key:0},[t.countryNameList.length===o(A).country.length?(n(),r(N,{key:0,type:"primary"},{default:e(()=>[l(B,{type:"warning"},{default:e(()=>[i("全球")]),_:1})]),_:1})):o(R)(t.countryNameList).length>4?(n(),r(F,{key:1,class:"box-item",effect:"dark",content:o(R)(t.countryNameList).join(","),placement:"top"},{default:e(()=>[l(N,{type:"primary"},{default:e(()=>[l(B,{type:"success"},{default:e(()=>[i(f(o(R)(t.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),I(L,{key:2},D(o(R)(t.countryNameList),y=>(n(),r(B,{key:y,type:"primary"},{default:e(()=>[i(f(y),1)]),_:2},1024))),128))],64)):b("",!0)]),_:1})):b("",!0),o(m).includes("memberStatus")?(n(),r(_,{key:9,"show-overflow-tooltip":"",align:"center",label:"分配状态"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(k,{key:0,type:"primary"},{default:e(()=>[i(" 已分配 ")]),_:1})):(n(),r(k,{key:1},{default:e(()=>[i(" 未分配 ")]),_:1}))]),_:1})):b("",!0),o(m).includes("memberGroupName")?(n(),r(_,{key:10,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(n(),r(F,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:e(()=>[(n(!0),I(L,null,D(t.getMemberGroupNameInfoList,y=>(n(),I("div",null,f(y.memberGroupName)+"-"+f(y.memberGroupId),1))),256))]),default:e(()=>[l(N,{type:"primary"},{default:e(()=>[i(f(t.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)):(n(),r(N,{key:1},{default:e(()=>[i("-")]),_:1}))]),_:1})):b("",!0),o(m).includes("createTime")?(n(),r(_,{key:11,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{default:e(({row:t})=>[l(B,{effect:"plain",type:"info"},{default:e(()=>[i(f(o(le)(t.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),l(_,{align:"center",fixed:"right",label:"操作",width:"200"},{default:e(({row:t})=>[l(je,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?b("",!0):(n(),r(P,{key:0,type:"primary",plain:"",size:"small",onClick:y=>pe(t)},{default:e(()=>[i(" 分配 ")]),_:2},1032,["onClick"])),l(P,{size:"small",plain:"",type:"primary",onClick:y=>ce(t)},{default:e(()=>[i(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ue,o(S)]]),l(Ee,{"current-page":o(g).page,total:o(g).total,"page-size":o(g).size,"page-sizes":o(g).sizes,layout:o(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:me,onCurrentChange:X},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Xe,{ref_key:"CheckEditRef",ref:se},null,512),l(Ze,{ref_key:"detailRef",ref:Q},null,512),l(et,{ref_key:"checkMembershipPriceRef",ref:K},null,512),l(tt,{ref_key:"addAllocationEditRef",ref:W,onFetchData:M},null,512)],2)}}}),Vt=Ke(it,[["__scopeId","data-v-6a7c3652"]]);export{Vt as default};
