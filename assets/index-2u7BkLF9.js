
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import R from"./index-DP-x3auN.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-Bmr7Yfv8.js";import{u as w}from"./projectManagement_list-BYWSyAeB.js";import{d as F,a6 as N,r as n,K as Q,o as z,L,a2 as f,a as u,i as b,f as A,w as v,g as O,A as g,c as I,N as Y,O as W,b as T,j as h,t as P,ak as U,aH as X,aI as Z,y as K}from"./index-JYvP5qSa.js";import"./user_customer-GaF9B56j.js";import"./user_customer-Cgy0OjAz.js";import"./download-DDrL_Zvf.js";import"./zh_Hans-CrfEz-Jr.js";import"./index-iJRjh0Y-.js";import"./projectManagement-C0Zxq6ed.js";import"./index-CQLXM8Rx.js";import"./index.vue_vue_type_script_setup_true_lang-CX4e0eNv.js";import"./index-F9MwN-i-.js";import"./index-kU6dpmrd.js";import"./index-C7vei4re.js";import"./clipboard-DSudtVPY.js";import"./index-CMOfJFaK.js";import"./department-BHLiBIEP.js";import"./position_manage-jixVVUOL.js";import"./configuration_role-Bq0VzreC.js";import"./tenant_role-CtdT2ipf.js";import"./configuration_manager-PYCkDTJb.js";import"./configuration_siteSetting-CoAwVmdc.js";import"./configuration_site_setting-DSSvoXi2.js";import"./apiLoading-CZk12JPg.js";import"./stagedData-C9KoV8Ig.js";import"./index.vue_vue_type_script_setup_true_lang-BV460acn.js";import"./otherFunctions_screenLibrary-SbblOAH-.js";import"./pdf-BhHCHn5I.js";const G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAAXNSR0IArs4c6QAAAl9JREFUOE+tlV1IVFEQx3/jmmWrZYUsUVRghkoFQdGDuKxFD0IkBUlpIK09SfVoUEEmFfVQDxYEhbtFFn1QyhZEX7j2IIhUFCWFlaJlRRFhkaXunbxra/fuutqCBy5c5sz8zszc/50jxFlrT+mcISeVYuBGWAlkAL9U6RZoEwhoDzeC1TIUjZBog8evGWpwUITd8Q602DsEdjV55Y7V1wZ1+zU7SQkAOf8B/OciHM10sv9aiYRM4yh0zXmdZ4R4/rdMG1MEXE74+CP+UQo1zV45MAotqtWp/U4eIOSPFVa5CopzoegCGDpODQYbgzukMZxpoV+9qtTFc09PgUAZFF+Cvt/jNqaLbrLDUE+ddiAsNt/npsOZDbGBaSkwEBp5rCvYCcdbbKYtUnBWlzscPI2Yp08B9yJ7oNnTqny49wYef7Dv9fbBs0822xUZzrJsOMv68YpyJMH9cjjRAjdfTaiLHin0aZXCsUmDKkNjQpe5oGSpVYaQvwDefoXeKFnVBGHQ2mcT6vFpOXDOmmnWbCjKtkM35cGjXuj6Zq/pdBuEDItN6ZQCn+Y54MUkln99RFI+bQdy44ET+lDKtoj4S1W5aEKnJUNykh1vQhu3wslWuPs69uifg6N/2ntT72Ho5qvq+PydNoQVe92wLmtC2dgctjeM9NpQih9WSCB6oDxZOJPMWamJQV9+gf5BjjRXyD4z0jb6PH7NQWlIePTBocw0qmNGXyS31bU6IzWNw8DOifJVaBfYE/TKLatvzOSPbHrqdb4MUKqwHlgCuMzrBOgBWsXgctM7blMtVpWGw/8A0EXSXcO+hTEAAAAASUVORK5CYII=",q=r=>(X("data-v-a012088b"),r=r(),Z(),r),H={key:0,src:G,alt:"",style:{"margin-right":"5px",width:"16px",height:"16px"}},J=q(()=>T("div",{style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},null,-1)),$=F({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(r,{expose:_,emit:y}){const V=w(),s=r,B=y,C=N("currentProjectTimeline"),D=n(),e=n(s.leftTabsData),S=n(s.validateTopTabs),d=n(),j=n(0),t=n(0);function x(){const{projectId:a,parentId:o,name:p,projectIdentification:c,countryIdList:m,uidUrl:i,...l}=U(e.value[0]);e.value[t.value].projectId&&(l.projectId=e.value[t.value].projectId,l.parentId=e.value[t.value].parentId),d.value[t.value].getUpLoad(l.descriptionUrl),e.value.splice(t.value,1,l)}function k(){t.value=++j.value;const{projectId:a,...o}=U(V.initialTopTabsData);e.value.push(o)}function E(a){e.value.splice(a,1),S.value.splice(a,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),j.value=Math.max(0,e.value.length-1))}return Q(()=>t.value,(a,o)=>{s.validateAll.reduce((c,m,i)=>(m==="rejected"&&c.push(i),c),[]).includes(o)&&B("validate"),C(e.value[t.value].releaseTime)}),z(()=>{for(let a=0;a<d.value.length;a++)d.value[a].getUpLoad(e.value[a].descriptionUrl)}),e.value.forEach((a,o)=>{const p=n(null);L(`formRef${o}`,p)}),_({activeLeftTab:t}),(a,o)=>{const p=f("el-button"),c=f("el-tab-pane"),m=f("el-tabs");return u(),b("div",null,[A(p,{class:g((s.title==="新增","button")),disabled:e.value.length>29||s.title==="编辑"&&e.value[0].parentId!=="0",onClick:o[0]||(o[0]=i=>k())},{default:v(()=>[O(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(u(),I(m,{key:0,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=i=>t.value=i),"tab-position":"left",onTabRemove:E,class:g(s.title==="新增"?"":"editHideCloseButton")},{default:v(()=>[(u(!0),b(Y,null,W(e.value,(i,l)=>(u(),I(c,{key:l,style:{position:"relative"},closable:e.value.length!==1,name:l},{label:v(()=>[T("div",{class:g(["flex-c",s.validateAll[l]&&s.validateAll[l]==="rejected"?"validateRejected":""])},[l==0?(u(),b("img",H)):h("",!0),T("span",null,P(i.name||"项目名称"),1)],2)]),default:v(()=>[J,A(R,{ref_for:!0,ref_key:"topTabsRef",ref:d,"left-tab":i,"tab-index":l,onSyncProject:x},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),A(M,{ref_key:"settingsRef",ref:D},null,512)]),_:1},8,["modelValue","class"])):h("",!0)])}}}),De=K($,[["__scopeId","data-v-a012088b"]]);export{De as default};
