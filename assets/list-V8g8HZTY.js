
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,aN as ce,r as n,Z as ue,n as de,a as c,q as me,o as s,b as fe,f as o,w as t,g as r,s as _e,e as i,i as _,aM as ge,y as d,j as f,z as m,N as z,bf as he,aO as ye,E as ve,bb as be,bc as ke,be as Ie,an as Ce,L as Se}from"./index-cQSkRrUB.js";import{_ as Ne}from"./index-Ds8AXvHE.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-DpU-Pf9A.js";import{_ as we}from"./index-lq1wenKj.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-CYZfz8CH.js";import{a as $}from"./projectManagement_scheduling-DGoG_kco.js";import"./index-CfPtNynR.js";import"./index.vue_vue_type_script_setup_true_lang-C-h8osgR.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-CtHGrTGi.js";const ze={class:"fontC-System"},Le={class:"tableBig oneLine"},xe={class:"copyId tableSmall projectId"},De={class:"id oneLine"},Pe={class:"fontC-System"},Ee={class:"fontC-System"},Me={class:"specifyTheTarget"},$e={class:"tableBig"},Be={class:"id tableSmall",style:{"font-size":"14px"}},Fe=pe({name:"scheduling",__name:"list",setup(Ge){const{format:B}=he(),{pagination:g,getParams:F,onSizeChange:G,onCurrentChange:R}=ce(),H=n(""),v=n(!1),k=n(!1),I=n(),C=n(!1),p=n([]),L=n(),U=n("formSearch-scheduling"),S=n("default"),N=n(!1),j=n([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"项目价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定部门",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),w=ue({dispatchType:"",projectId:"",projectName:""}),x=n([]);function A(){I.value.showEdit()}function V(a){I.value.showEdit(a)}function O(a){ye.confirm(`确认删除「${a.projectName}」吗？`,"确认信息").then(()=>{$.delete({projectDispatchId:a.projectDispatchId}).then(l=>{h(),ve.success({message:"删除成功",center:!0})})}).catch(()=>{})}function q(a){G(a).then(()=>h())}const b=n();function Q(a){a?b.value=a.projectId:b.value=""}function T(a=1){R(a).then(()=>h())}function Z(){Object.assign(w,{dispatchType:"",projectId:"",projectName:""}),h()}async function h(){try{v.value=!0;const a={...F(),...w},l=await $.list(a);x.value=l.data.getProjectDispatchInfoList,g.value.total=l.data.total,v.value=!1}catch{}finally{v.value=!1}}de(()=>{j.value.forEach(a=>{a.checked&&p.value.push(a.prop)}),h(),L.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:"全部类型",option:"dispatchType",optionLabel:"label",optionValue:"value"}]});const J={dispatchType:()=>[{label:"指定关闭",value:1},{label:"指定价格",value:2}]};return(a,l)=>{const K=we,W=c("ElDivider"),y=c("el-button"),X=je,Y=be,ee=ke,te=c("el-row"),u=c("el-table-column"),D=c("el-text"),P=c("el-tooltip"),E=Ne,M=Ie,oe=c("el-tag"),ae=c("el-empty"),le=c("el-table"),ne=c("ElPagination"),se=Ce,re=me("loading");return s(),fe("div",{class:z({"absolute-container":C.value})},[o(se,null,{default:t(()=>[o(K,{formSearchList:L.value,formSearchName:U.value,onCurrentChange:T,onOnReset:Z,model:w,formOption:J},null,8,["formSearchList","formSearchName","model"]),o(W,{"border-style":"dashed"}),o(te,{gutter:24},{default:t(()=>[o(X,null,{default:t(()=>[o(y,{type:"primary",size:"default",onClick:A},{default:t(()=>[r(" 新增 ")]),_:1})]),_:1}),o(ee,null,{default:t(()=>[o(y,{size:"default",onClick:l[0]||(l[0]=()=>{})},{default:t(()=>[r(" 导出 ")]),_:1}),o(Y,{border:k.value,"onUpdate:border":l[1]||(l[1]=e=>k.value=e),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":l[2]||(l[2]=e=>C.value=e),checkList:p.value,"onUpdate:checkList":l[3]||(l[3]=e=>p.value=e),columns:j.value,"onUpdate:columns":l[4]||(l[4]=e=>j.value=e),"line-height":S.value,"onUpdate:lineHeight":l[5]||(l[5]=e=>S.value=e),stripe:N.value,"onUpdate:stripe":l[6]||(l[6]=e=>N.value=e),style:{"margin-left":"12px"},onQueryData:T},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),_e((s(),i(le,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:k.value,size:S.value,stripe:N.value,"highlight-current-row":"",onCurrentChange:Q},{empty:t(()=>[o(ae,{image:_(ge),"image-size":300},null,8,["image"])]),default:t(()=>[o(u,{align:"left",type:"selection"}),p.value.includes("dispatchType")?(s(),i(u,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:"类型"},{default:t(({row:e})=>[d("div",ze,[e.dispatchType===1?(s(),i(D,{key:0,type:"primary",style:{"font-weight":"700"}},{default:t(()=>[r("指定关闭")]),_:1})):(s(),i(D,{key:1,type:"danger",style:{"font-weight":"700"}},{default:t(()=>[r("指定价格")]),_:1}))])]),_:1})):f("",!0),p.value.includes("projectName")?(s(),i(u,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目"},{default:t(({row:e})=>[d("div",Le,m(e.projectName),1)]),_:1})):f("",!0),p.value.includes("projectId")?(s(),i(u,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID",width:"200"},{default:t(({row:e})=>[d("div",xe,[d("div",De,[o(P,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[r(m(e.projectId),1)]),_:2},1032,["content"])]),o(E,{content:e.projectId,class:z({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("moneyPrice")?(s(),i(u,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:"项目价"},{default:t(({row:e})=>[d("div",Pe,[o(M),r(m(e.moneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("doMoneyPrice")?(s(),i(u,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:"指定价格"},{default:t(({row:e})=>[d("div",Ee,[o(M),r(m(e.doMoneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("Supplier")?(s(),i(u,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:"指定目标",width:"400"},{default:t(({row:e})=>[d("div",Me,[e.dataType==2?(s(),i(y,{key:0,style:{width:"46px","background-color":"#FFAC54"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"部门"),1)]),_:2},1024)):e.dataType===1?(s(),i(y,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):f("",!0),d("b",$e,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),d("span",Be,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),o(E,{content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId,class:z({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("createTime")?(s(),i(u,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:t(({row:e})=>[o(P,{content:e.createTime,placement:"top"},{default:t(()=>[o(oe,{effect:"plain",type:"info"},{default:t(()=>[r(m(_(B)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):f("",!0),o(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[o(y,{type:"primary",plain:"",size:"small",onClick:ie=>V(e)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),o(y,{type:"danger",plain:"",size:"small",onClick:ie=>O(e)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[re,v.value]]),o(ne,{"current-page":_(g).page,total:_(g).total,"page-size":_(g).size,"page-sizes":_(g).sizes,layout:_(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"]),o(Te,{ref_key:"editRef",ref:I,onFetchData:h},null,512)]),_:1})],2)}}}),Ke=Se(Fe,[["__scopeId","data-v-c1f80de4"]]);export{Ke as default};
