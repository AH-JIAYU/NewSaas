
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as d,d as q,r as p,B as y,ai as k,a as m,aj as C,ak as M,i as o,o as _,b as E,f as n,w as s,g as R,F as S,n as D,e as G}from"./index-1E3Ahbco.js";import{a as N}from"./role-CLRWDJEh.js";const b={list:a=>d.get("manager/list",{params:a,baseURL:"/mock/"}),detail:a=>d.get("manager/detail",{params:{id:a},baseURL:"/mock/"}),create:a=>d.post("manager/create",a,{baseURL:"/mock/"}),edit:a=>d.post("manager/edit",a,{baseURL:"/mock/"}),delete:a=>d.post("manager/delete",{id:a},{baseURL:"/mock/"}),passwordReset:a=>d.post("manager/password/reset",{id:a},{baseURL:"/mock/"}),changeStatus:a=>d.post("manager/change/status",a,{baseURL:"/mock/"}),check:a=>d.post("manager/check",a,{baseURL:"/mock/"})},P=q({__name:"index",props:{id:{default:""}},setup(a,{expose:V}){const x=a,v=p([]);N.allList().then(r=>{v.value=r.data.list});const g=p(!1),c=p(),e=p({id:x.id,account:"",name:"",mobile:"",sex:"1",role_id:""}),U=p({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(r,l,i)=>{const u={key:"mobile",value:l};e.value.id!==""&&(u.id=e.value.id),b.check(u).then(f=>{f.data.exist?i(new Error("手机号已存在")):i()})},trigger:"blur"}]});y(()=>{e.value.id!==""&&L()});function L(){g.value=!0,b.detail(e.value.id).then(r=>{g.value=!1,e.value.account=r.data.account,e.value.name=r.data.name,e.value.mobile=r.data.mobile})}return V({submit(){return new Promise(r=>{e.value.id===""?c.value&&c.value.validate(l=>{l&&b.create(e.value).then(()=>{k.success({message:"模拟新增成功",center:!0}),r()})}):c.value&&c.value.validate(l=>{l&&b.edit(e.value).then(()=>{k.success({message:"模拟编辑成功",center:!0}),r()})})})}}),(r,l)=>{const i=m("ElInput"),u=m("ElFormItem"),f=m("ElRadioButton"),h=m("ElRadioGroup"),w=m("ElOption"),B=m("ElSelect"),F=m("ElForm"),I=C("loading");return M((_(),E("div",null,[n(F,{ref_key:"formRef",ref:c,model:o(e),rules:o(U),"label-width":"120px","label-suffix":"："},{default:s(()=>[n(u,{label:"帐号",prop:"account"},{default:s(()=>[n(i,{modelValue:o(e).account,"onUpdate:modelValue":l[0]||(l[0]=t=>o(e).account=t),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),n(u,{label:"姓名",prop:"name"},{default:s(()=>[n(i,{modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=t=>o(e).name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),n(u,{label:"手机号",prop:"mobile"},{default:s(()=>[n(i,{modelValue:o(e).mobile,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).mobile=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),n(u,{label:"性别",prop:"sex"},{default:s(()=>[n(h,{modelValue:o(e).sex,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).sex=t)},{default:s(()=>[n(f,{label:"1"},{default:s(()=>[R(" 男 ")]),_:1}),n(f,{label:"0"},{default:s(()=>[R(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(u,{label:"角色",prop:"role_id"},{default:s(()=>[n(B,{modelValue:o(e).role_id,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).role_id=t),placeholder:"请选择角色",clearable:""},{default:s(()=>[(_(!0),E(S,null,D(o(v),t=>(_(),G(w,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[I,o(g)]])}}});export{P as _,b as a};
