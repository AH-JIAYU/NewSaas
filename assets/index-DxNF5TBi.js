
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as g}from"./apiLoading-BDrRswJy.js";import{u as q,a as b}from"./configuration_supplierLevel-D4Zf3xw3.js";import{d as B,r as u,$ as D,a as r,o as E,e as M,w as a,f as o,g as p,i as l,B as U,ap as I,E as V,M as T}from"./index-SHuwLsia.js";const $=B({__name:"index",emits:["queryData"],setup(F,{expose:x,emit:y}){const N=q(),R=y,s=u(!1),m=u(""),e=u(),d=u(),w=D({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入0以上的正整数",trigger:"blur"}]});async function C(n){n?(m.value="编辑",e.value=I(n)):(m.value="新增",e.value={}),s.value=!0}function f(){d.value.resetFields(),s.value=!1}function L(){d.value.validate(async n=>{if(n){if(e.value.tenantSupplierLevelId){const{status:t}=await g(b.edit(e.value));t===1&&V.success({message:"编辑成功",center:!0})}else{const{status:t}=await g(b.create(e.value));t===1&&V.success({message:"新增成功",center:!0})}N.LevelNameList=null,R("queryData"),f()}})}return x({showEdit:C}),(n,t)=>{const c=r("el-input"),_=r("el-form-item"),S=r("el-form"),v=r("el-button"),k=r("el-dialog");return E(),M(k,{modelValue:l(s),"onUpdate:modelValue":t[2]||(t[2]=i=>U(s)?s.value=i:null),title:l(m),width:"600"},{footer:a(()=>[o(v,{onClick:f},{default:a(()=>[p(" 取消 ")]),_:1}),o(v,{type:"primary",onClick:L},{default:a(()=>[p(" 确定 ")]),_:1})]),default:a(()=>[o(S,{ref_key:"formRef",ref:d,model:l(e),rules:l(w),"label-width":"7rem",inline:!1},{default:a(()=>[o(_,{label:"等级名称",prop:"levelName"},{default:a(()=>[o(c,{modelValue:l(e).levelName,"onUpdate:modelValue":t[0]||(t[0]=i=>l(e).levelName=i),maxlength:"100"},null,8,["modelValue"])]),_:1}),o(_,{label:"价格比例",prop:"additionRatio"},{default:a(()=>[o(c,{modelValue:l(e).additionRatio,"onUpdate:modelValue":t[1]||(t[1]=i=>l(e).additionRatio=i),modelModifiers:{number:!0},min:1,max:100,type:"number"},{append:a(()=>[p(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),A=T($,[["__scopeId","data-v-78618035"]]);export{A as default};
