
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ee,aK as Ve,r as c,a5 as xe,k as ze,a as r,p as Ie,o as i,b as O,f as t,w as o,i as n,q as U,az as Ne,g as m,H as A,I as C,e as p,j as d,F as Ue,t as Ae,S as $e,E as J,aL as Le,l as De,N as Fe,aM as Qe,aN as Re,ba as Te,ap as Be,aG as He,aH as Me,s as Pe,aq as B,R as qe}from"./index-oDag-wCq.js";import{_ as Ke}from"./index.vue_vue_type_style_index_0_lang-XJ6Rw5eV.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-CjOqAAYH.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-CP0SLuA0.js";import Oe from"./index-D7HeFAhN.js";import{s as W}from"./apiLoading-omxokyBY.js";import{u as Je}from"./user_customer-DH9WASFt.js";import{a as H}from"./user_customer-Bs-_NLVz.js";import"./index.vue_vue_type_script_setup_true_lang-Bz6NgGAR.js";import"./index-BI46Pkn2.js";import"./index-DkU0C3h9.js";import"./department-9TCRL8n8.js";import"./position_manage-Bpc6LAsA.js";import"./department-B0c7nVjo.js";import"./tenant_role-D6OIKvFV.js";import"./configuration_role-Ct1ss5ca.js";import"./configuration_manager-LgMdVioL.js";import"./stagedData-B6MI9TxV.js";import"./index.vue_vue_type_script_setup_true_lang-DR11fTBL.js";const We=S=>(He("data-v-5a9b977e"),S=S(),Me(),S),Xe=We(()=>Pe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ye=Ee({name:"customer",__name:"index",setup(S){const X=Je(),{pagination:h,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=Ve(),M=c([]),E=c(!1),P=c([]),$=c(),q=c(),te=c(),V=c(!0),x=c(!1),z=c(!1),I=c("default"),u=c([]),N=c([{label:"客户编码",checked:!0,sortable:!0,prop:"tenantCustomerId"},{label:"客户名称",checked:!0,sortable:!0,prop:"customerAccord"},{label:"客户简称",checked:!0,sortable:!0,prop:"customerShortName"},{label:"负责人",checked:!0,sortable:!0,prop:"chargeName"},{label:"客户状态",checked:!0,sortable:!0,prop:"customerStatus"},{label:"前置问卷",checked:!0,sortable:!0,prop:"antecedentQuestionnaire"},{label:"风险控制",checked:!0,sortable:!0,prop:"riskControl"},{label:"客户营业限额/月",checked:!0,sortable:!0,prop:"turnover"},{label:"审核率Min值",checked:!0,sortable:!0,prop:"rateAudit"}]);function oe(){$.value.showEdit()}function ne(l){$.value.showEdit(l)}async function L(l,a,F){const y={status:l,operationalType:a,tenantCustomerId:F},{status:b}=await W(H.changestatus(y));b===1&&J.success({message:"修改成功"}),X.customer=null,v()}function ae(l){q.value.showEdit(l)}function le(l){Le.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:a}=await W(H.delete({tenantCustomerId:l.tenantCustomerId}));a===1&&J.success({message:"删除成功"}),v()}).catch(()=>{})}const f=xe({customerShortName:"",customerStatus:null,antecedentQuestionnaire:null}),se=async()=>{const{data:l}=await De.getTenantStaffList();M.value=l};function re(l){Z(l).then(()=>D())}function k(l=1){ee(l).then(()=>D())}function ie(){Object.assign(f,{customerShortName:"",customerStatus:null,antecedentQuestionnaire:null}),v()}function v(){h.value.page=1,D()}async function D(){try{E.value=!0;const l={...Y(),...f},{data:a}=await H.list(l);P.value=a.getTenantCustomerInfoList,h.value.total=Number(a.total),E.value=!1}catch{}finally{E.value=!1}}function ue(l){te.value=l}return ze(async()=>{await se(),N.value.forEach(l=>{l.checked&&u.value.push(l.prop)}),v()}),(l,a)=>{const F=r("el-input"),y=r("el-form-item"),b=r("el-option"),K=r("el-select"),j=Fe,Q=r("ElButton"),ce=r("ElFormItem"),pe=r("ElForm"),me=je,de=r("ElDivider"),w=r("el-button"),fe=Ke,_e=Qe,ge=Re,he=r("el-row"),g=r("el-table-column"),ve=Te,G=r("el-text"),R=r("ElSwitch"),T=r("ElTableColumn"),be=r("ElSpace"),Ce=r("el-empty"),ke=r("el-table"),ye=r("ElPagination"),we=Be,Se=Ie("loading");return i(),O("div",{class:$e({"absolute-container":n(z)})},[t(we,null,{default:o(()=>[t(me,{"show-toggle":!1},{default:o(({fold:e,toggle:s})=>[t(pe,{model:n(f).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[U(t(y,null,{default:o(()=>[t(F,{modelValue:n(f).customerShortName,"onUpdate:modelValue":a[0]||(a[0]=_=>n(f).customerShortName=_),clearable:"",placeholder:"客户简称",onKeydown:a[1]||(a[1]=Ne(_=>k(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[B,!e]]),U(t(y,null,{default:o(()=>[t(K,{modelValue:n(f).customerStatus,"onUpdate:modelValue":a[2]||(a[2]=_=>n(f).customerStatus=_),clearable:"",placeholder:"客户状态",onChange:a[3]||(a[3]=_=>k())},{default:o(()=>[t(b,{label:"禁用",value:1}),t(b,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!e]]),U(t(y,null,{default:o(()=>[t(K,{modelValue:n(f).antecedentQuestionnaire,"onUpdate:modelValue":a[4]||(a[4]=_=>n(f).antecedentQuestionnaire=_),clearable:"",placeholder:"前置问卷",onChange:a[5]||(a[5]=_=>k())},{default:o(()=>[t(b,{label:"禁用",value:1}),t(b,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!e]]),t(ce,null,{default:o(()=>[t(Q,{type:"primary",onClick:a[6]||(a[6]=_=>k())},{icon:o(()=>[t(j,{name:"i-ep:search"})]),default:o(()=>[m(" 筛选 ")]),_:1}),t(Q,{onClick:ie},{icon:o(()=>[Xe]),default:o(()=>[m(" 重置 ")]),_:1}),t(Q,{disabled:"",link:"",onClick:s},{icon:o(()=>[t(j,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[m(" "+A(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(de,{"border-style":"dashed"}),t(he,null,{default:o(()=>[t(fe,null,{default:o(()=>[t(w,{type:"primary",size:"default",onClick:oe},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),t(ge,null,{default:o(()=>[t(w,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),t(_e,{border:n(V),"onUpdate:border":a[7]||(a[7]=e=>C(V)?V.value=e:null),tableAutoHeight:n(z),"onUpdate:tableAutoHeight":a[8]||(a[8]=e=>C(z)?z.value=e:null),checkList:n(u),"onUpdate:checkList":a[9]||(a[9]=e=>C(u)?u.value=e:null),columns:n(N),"onUpdate:columns":a[10]||(a[10]=e=>C(N)?N.value=e:null),"line-height":n(I),"onUpdate:lineHeight":a[11]||(a[11]=e=>C(I)?I.value=e:null),stripe:n(x),"onUpdate:stripe":a[12]||(a[12]=e=>C(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:v},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),U((i(),p(ke,{border:n(V),data:n(P),size:n(I),stripe:n(x),onSelectionChange:ue},{empty:o(()=>[t(Ce,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(g,{align:"center",type:"selection"}),n(u).includes("tenantCustomerId")?(i(),p(g,{key:0,align:"center",prop:"tenantCustomerId",width:"180","show-overflow-tooltip":"",label:"客户编码"})):d("",!0),n(u).includes("customerAccord")?(i(),p(g,{key:1,align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"})):d("",!0),n(u).includes("customerShortName")?(i(),p(g,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"})):d("",!0),n(u).includes("turnover")?(i(),p(g,{key:3,align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额/月"},{default:o(({row:e})=>[t(ve),m(A(e.turnover||0),1)]),_:1})):d("",!0),n(u).includes("rateAudit")?(i(),p(g,{key:4,align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"},{default:o(({row:e})=>[m(A(e.rateAudit?e.rateAudit:"-"),1)]),_:1})):d("",!0),n(u).includes("chargeName")?(i(),p(g,{key:5,align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"},{default:o(({row:e})=>[(i(!0),O(Ue,null,Ae(n(M),s=>(i(),p(G,{key:s.id},{default:o(()=>[s.id===e.chargeId?(i(),p(G,{key:0},{default:o(()=>[m(A(s.name),1)]),_:2},1024)):d("",!0)]),_:2},1024))),128))]),_:1})):d("",!0),n(u).includes("customerStatus")?(i(),p(T,{key:6,align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:o(({row:e})=>[t(R,{modelValue:e.customerStatus,"onUpdate:modelValue":s=>e.customerStatus=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,1,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),n(u).includes("antecedentQuestionnaire")?(i(),p(T,{key:7,align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:o(({row:e})=>[t(R,{modelValue:e.antecedentQuestionnaire,"onUpdate:modelValue":s=>e.antecedentQuestionnaire=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,2,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),n(u).includes("riskControl")?(i(),p(T,{key:8,align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:o(({row:e})=>[t(R,{modelValue:e.riskControl,"onUpdate:modelValue":s=>e.riskControl=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,3,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),t(g,{align:"center",fixed:"right",prop:"i",label:"操作",width:"200"},{default:o(({row:e})=>[t(be,null,{default:o(()=>[t(w,{size:"small",plain:"",type:"primary",onClick:s=>ne(e)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),t(w,{type:"primary",plain:"",size:"small",onClick:s=>ae(e)},{default:o(()=>[m(" 详情 ")]),_:2},1032,["onClick"]),t(w,{type:"danger",plain:"",size:"small",onClick:s=>le(e)},{default:o(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Se,n(E)]]),t(ye,{"current-page":n(h).page,total:n(h).total,"page-size":n(h).size,"page-sizes":n(h).sizes,layout:n(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"]),t(Ge,{ref_key:"editRef",ref:$,onFetchData:v},null,512),t(Oe,{ref_key:"checkRef",ref:q,onFetchData:v},null,512)]),_:1})],2)}}}),vt=qe(Ye,[["__scopeId","data-v-5a9b977e"]]);export{vt as default};
