
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as n,d as w,ai as m,aj as p,r as u,B as x,at as h,a as L,ak as j,al as k,i as v,o as E,b as F,l as M,f as S,_ as D}from"./index-C32xF_ni.js";import"./survey-creator-core.i18n-DA1fh3wM.js";const d={list:e=>n.get("otherFunctions/screen_library/list",{params:e,baseURL:"/mock/"}),detail:e=>n.get("otherFunctions/screen_library/detail",{params:{id:e},baseURL:"/mock/"}),create:e=>n.post("otherFunctions/screen_library/create",e,{baseURL:"/mock/"}),edit:e=>n.post("otherFunctions/screen_library/edit",e,{baseURL:"/mock/"}),delete:e=>n.post("otherFunctions/screen_library/delete",{id:e},{baseURL:"/mock/"})},N={style:{width:"100%",height:"93%","margin-bottom":"80px"}},U={style:{width:"100%",height:"100%"}},z=w({__name:"index",props:{id:{default:""}},setup(e,{expose:_}){m.editorLocalization.currentLocale="zh-cn",p.surveyLocalization.supportedLocales=["en","fr","zh-cn"],p.setLicenseKey("ZjU4MjI0NjMtN2YzYi00ZDMyLWEyYmEtOTliMmVhZmEyODc5OzE9MjAyNS0wMi0yNA==");const f={showLogicTab:!0,isAutoSave:!1,showTranslationTab:!0},y={pages:[{name:"Name",elements:[{name:"country",type:"dropdown",placeholder:"Select a country...",choicesByUrl:{url:"https://surveyjs.io/api/CountriesExample"}}]}]},r=new m.SurveyCreatorModel(f);r.text=window.localStorage.getItem("survey-json")||JSON.stringify(y),r.saveSurveyFunc=(o,t)=>{window.localStorage.setItem("survey-json",r.text),t(o,!0)},r.onUploadFile.add((o,t)=>{const i=new FormData;t.files.forEach(a=>{i.append(a.name,a)}),fetch("https://example.com/uploadFiles",{method:"post",body:i}).then(a=>a.json()).then(a=>{t.callback("success",`https://example.com/files?name=${a[t.files[0].name]}`)}).catch(a=>{t.callback(a,"error")})});const b=e,l=u(!1),c=u(),s=u({id:b.id,title:""});x(()=>{s.value.id!==""&&g()});function g(){l.value=!0,d.detail(s.value.id).then(o=>{l.value=!1,s.value.title=o.data.title})}return _({submit(){return new Promise(o=>{s.value.id===""?c.value&&c.value.validate(t=>{t&&d.create(s.value).then(()=>{h.success({message:"模拟新增成功",center:!0}),o()})}):c.value&&c.value.validate(t=>{t&&d.edit(s.value).then(()=>{h.success({message:"模拟编辑成功",center:!0}),o()})})})}}),(o,t)=>{const i=L("survey-creator-component"),a=j("loading");return k((E(),F("div",N,[M("div",U,[S(i,{model:v(r)},null,8,["model"])])])),[[a,v(l)]])}}}),O=D(z,[["__scopeId","data-v-3d0b6bca"]]),B=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{O as D,d as a,B as i};
