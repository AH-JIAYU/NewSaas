
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./department-DrQv5Etz.js";import{d as U,r as u,k as M,a as s,l as h,n as A,o as B,b as N,f as a,w as o,p as q,g as _,E as V,t as I}from"./index-BdHtZquS.js";const S={style:{flex:"auto"}},z=U({name:"Edit",__name:"index",emits:["success"],setup(P,{expose:b,emit:g}){const c=g,v=u(""),x=u(),C=u(!1);u([]);const d=u(),i=u(!1),l=u({id:null,tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""}),y=u({invoiceCode:[{required:!0,trigger:"blur",message:"请输入姓名"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function T(){return new Promise(n=>{l.value.id?d.value&&d.value.validate(e=>{if(e){const r=I(l.value);p.edit(r).then(()=>{V.success({message:"编辑成功",center:!0}),c("success"),i.value=!1,n()})}}):d.value&&d.value.validate(e=>{e&&(delete l.value.id,p.create(l.value).then(()=>{V.success({message:"新增成功",center:!0}),c("success"),i.value=!1,n()}))})})}async function k(n){v.value=n!=null&&n.id?"编辑":"新增",l.value=n,i.value=!0}return M(async()=>{x.value=new Date}),b({showEdit:k}),(n,e)=>{const r=s("el-input"),m=s("el-form-item"),w=s("el-switch"),D=s("el-form"),f=s("el-button"),E=s("el-dialog"),R=h("loading");return A((B(),N("div",null,[a(E,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value=t),title:v.value,width:"700"},{footer:o(()=>[q("div",S,[a(f,{type:"",onClick:e[4]||(e[4]=t=>i.value=!1)},{default:o(()=>[_(" 取消 ")]),_:1}),a(f,{type:"primary",onClick:T},{default:o(()=>[_(" 确定 ")]),_:1})])]),default:o(()=>[a(D,{ref_key:"formRef",ref:d,"label-width":"80px",model:l.value,rules:y.value,inline:!1},{default:o(()=>[a(m,{prop:"invoiceCode",label:"组名称"},{default:o(()=>[a(r,{modelValue:l.value.invoiceCode,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.invoiceCode=t),placeholder:"请输入组名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"所属部门"},{default:o(()=>[a(r,{modelValue:l.value.invoiceAmount,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.invoiceAmount=t),modelModifiers:{number:!0},placeholder:"请输入发票金额",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"组长"},{default:o(()=>[a(r,{modelValue:l.value.invoiceTax,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.invoiceTax=t),modelModifiers:{number:!0},placeholder:"请输入手续费",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"组提成"},{default:o(()=>[a(w,{modelValue:l.value.invoiceTax,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.invoiceTax=t),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[R,C.value]])}}});export{z as _};
