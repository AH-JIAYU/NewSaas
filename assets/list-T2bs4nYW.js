
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,aK as fe,r as i,a1 as _e,n as ge,a as r,an as be,o as G,b as ve,f as e,w as o,ak as z,g as p,B as D,e as B,j as he,i as g,O as ke,E as we,J as ye,aM as Ce,aN as Ve,aj as Se,aH as Ne,aI as Ee,A as Ie,al as $,N as Ge}from"./index-CWNW1mmx.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-B01w1OEm.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-D4lYCKH-.js";import{s as Le}from"./apiLoading-D5m7XAH4.js";import Me from"./index-6KYfd2R_.js";import Ue from"./index-DxHu_Y8s.js";import{a as H}from"./survey_vipGroup-B_WVXlCX.js";import{u as xe}from"./survey_vipGroup-C8ShLuA7.js";import"./survey_vip-D97Iojzz.js";import"./survey_vip-DnjD-ftU.js";const Fe=b=>(Ne("data-v-92ccaf4d"),b=b(),Ee(),b),Be=Fe(()=>Ie("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),$e=de({name:"SurveyVipGroupList",__name:"list",setup(b){const P=xe(),{pagination:m,getParams:A,onSizeChange:R,onCurrentChange:j}=fe(),k=i(!1),L=i([]);i();const w=i(),M=i(),y=i(!0),C=i(!1),V=i("default"),v=i([]),S=i(!1),N=i([{label:"等级名称",prop:"a",sortable:!0,disableCheck:!1,checked:!0}]),l=_e({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function T(){w.value.showEdit()}function Y(n){w.value.showEdit(n)}function q(n){M.value.showEdit(n)}function f(){m.value.page=1,h()}function O(n){R(n).then(()=>h())}function U(n=1){j(n).then(()=>h())}async function h(){k.value=!0;const n={...A(),...l};l.time&&l.time.length&&(n.beginTime=l.time[0]||"",n.endTime=l.time[1]||"");const{data:t}=await H.list(n);L.value=t.getMemberGroupInfoList,m.value.total=t.total,k.value=!1}function J(){Object.assign(l,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),h()}async function K(n,t){const _={memberGroupId:t,groupStatus:n},{status:c}=await Le(H.changestatus(_));c===1&&we.success({message:"修改成功"}),P.GroupNameList=null,f()}return ge(()=>{N.value.forEach(n=>{n.checked&&v.value.push(n.prop)}),f()}),(n,t)=>{const _=r("el-input"),c=r("el-form-item"),x=r("el-option"),Q=r("el-select"),W=r("el-date-picker"),F=ye,E=r("ElButton"),X=r("ElFormItem"),Z=r("ElForm"),ee=De,te=r("ElDivider"),I=r("el-button"),oe=ze,ae=Ce,le=Ve,ne=r("el-row"),u=r("el-table-column"),re=r("el-link"),ie=r("ElSwitch"),se=r("el-empty"),ue=r("el-table"),pe=r("ElPagination"),me=Se,ce=be("loading");return G(),ve("div",{class:ke({"absolute-container":S.value})},[e(me,null,{default:o(()=>[e(ee,{"show-toggle":!1},{default:o(({fold:a,toggle:d})=>[e(Z,{model:l,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.memberGroupId,"onUpdate:modelValue":t[0]||(t[0]=s=>l.memberGroupId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.memberGroupName,"onUpdate:modelValue":t[1]||(t[1]=s=>l.memberGroupName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(_,{modelValue:l.groupLeaderMemberName,"onUpdate:modelValue":t[2]||(t[2]=s=>l.groupLeaderMemberName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称"},null,8,["modelValue"])]),_:1}),z(e(c,{label:""},{default:o(()=>[e(Q,{modelValue:l.groupStatus,"onUpdate:modelValue":t[3]||(t[3]=s=>l.groupStatus=s),clearable:"",placeholder:"会员组状态"},{default:o(()=>[e(x,{label:"关闭",value:1}),e(x,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!a]]),z(e(c,null,{default:o(()=>[e(W,{modelValue:l.time,"onUpdate:modelValue":t[4]||(t[4]=s=>l.time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[$,!a]]),e(X,null,{default:o(()=>[e(E,{type:"primary",onClick:t[5]||(t[5]=s=>U())},{icon:o(()=>[e(F,{name:"i-ep:search"})]),default:o(()=>[p(" 筛选 ")]),_:1}),e(E,{onClick:J},{icon:o(()=>[Be]),default:o(()=>[p(" 重置 ")]),_:1}),e(E,{link:"",onClick:d},{icon:o(()=>[e(F,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[p(" "+D(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,null,{default:o(()=>[e(oe,null,{default:o(()=>[e(I,{type:"primary",size:"default",onClick:T},{default:o(()=>[p(" 新增 ")]),_:1})]),_:1}),e(le,null,{default:o(()=>[e(I,{size:"default"},{default:o(()=>[p(" 导出 ")]),_:1}),e(ae,{border:y.value,"onUpdate:border":t[6]||(t[6]=a=>y.value=a),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":t[7]||(t[7]=a=>S.value=a),checkList:v.value,"onUpdate:checkList":t[8]||(t[8]=a=>v.value=a),columns:N.value,"onUpdate:columns":t[9]||(t[9]=a=>N.value=a),"line-height":V.value,"onUpdate:lineHeight":t[10]||(t[10]=a=>V.value=a),stripe:C.value,"onUpdate:stripe":t[11]||(t[11]=a=>C.value=a),style:{"margin-left":"12px"},onQueryData:f},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),z((G(),B(ue,{border:y.value,data:L.value,size:V.value,stripe:C.value},{empty:o(()=>[e(se,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(u,{align:"center",type:"selection"}),v.value.includes("a")?(G(),B(u,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):he("",!0),e(u,{align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"}),e(u,{align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:o(({row:a})=>[p(D(a.groupLeaderMemberName?a.groupLeaderMemberName:"-"),1)]),_:1}),e(u,{align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"}),e(u,{align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:o(({row:a})=>[e(re,{type:"primary",onClick:d=>q(a)},{default:o(()=>[p(D(a.projectNumber),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"}),e(u,{align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:o(({row:a})=>[e(ie,{modelValue:a.groupStatus,"onUpdate:modelValue":d=>a.groupStatus=d,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:d=>K(d,a.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"180"},{default:o(({row:a})=>[e(I,{size:"small",plain:"",type:"primary",onClick:d=>Y(a)},{default:o(()=>[p(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ce,k.value]]),e(pe,{"current-page":g(m).page,total:g(m).total,"page-size":g(m).size,"page-sizes":g(m).sizes,layout:g(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:U},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Me,{ref_key:"editRef",ref:w,onFetchData:f},null,512),e(Ue,{ref_key:"checkRef",ref:M,onFetchData:f},null,512)],2)}}}),Ke=Ge($e,[["__scopeId","data-v-92ccaf4d"]]);export{Ke as default};
