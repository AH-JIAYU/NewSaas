
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as re,aO as ne,r as u,a5 as se,l as ue,p as ie,b as y,q as pe,s as E,o as a,e as V,g as p,w as t,h as n,f as l,j as m,aN as ce,k as o,H as z,F as fe,v as ye,S as de,bf as me,aQ as ve,aR as _e,ap as be,R as ge}from"./index-LpvUbtoC.js";import{_ as ke}from"./index.vue_vue_type_style_index_0_lang-BTo5oVp7.js";import{_ as he}from"./index-BgypVYqf.js";import{E as Te,a as Se}from"./index-Dr8E31nv.js";import xe from"./index-BLNzLDP0.js";import"./index.vue_vue_type_script_setup_true_lang-D3AY25Pv.js";import"./sortable.esm-C0-Qcoum.js";const Ce=re({name:"alter",__name:"list",setup(Ve){const{format:H}=me(),{pagination:v,onSizeChange:F,onCurrentChange:P}=ne(),j=u(""),R=u([]),_=u(!0),U=u(),w=u(),g=u(!1),c=u([]),k=u(!1);u(!1);const h=u("default"),T=u(!1),A=u([]),L=u(),O=u("formSearch-alter"),B=[{label:"完成",value:"1,0"},{label:"审核通过",value:"1,7"},{label:"审核失败",value:"1,8"},{label:"数据冻结",value:"1,9"},{label:"被甄别",value:"2,null"},{label:"配额满",value:"3,null"}],S=u([{prop:"projectClickId",label:"点击ID",sortable:!0,checked:!0},{prop:"beforeType",label:"变更前",sortable:!0,checked:!0},{prop:"afterType",label:"变更后",sortable:!0,checked:!0},{prop:"createTime",label:"创建时间",sortable:!0,checked:!0},{prop:"remark",label:"备注",sortable:!0,checked:!0},{prop:"createUserId",label:"操作人",sortable:!0,checked:!0}]),f=se({page:1,limit:10,type:null,createUserName:"",surveyType:null,viceType:null}),D=u([]);function $(){U.value.showEdit()}function q(s){A.value=s}function M(){Object.assign(f,{type:null,createUserName:"",surveyType:null,viceType:null}),b()}function Q(s){F(s).then(()=>{f.limit=s,b()})}function x(s=1){P(s).then(()=>{f.page=s,b()})}async function b(){try{if(_.value=!0,f.type){const r=f.type.split(",");f.surveyType=r[0],f.viceType=r[1]}const{data:s}=await Se.list(f);D.value=s.tenantUpdateRecordVOBuilders,v.value.total=+s.total,_.value=!1}catch{}finally{_.value=!1}}ue(async()=>{const{data:s}=await ie.getTenantStaffListData({});R.value=s,S.value.forEach(r=>{r.checked&&c.value.push(r.prop)}),b(),L.value=[{index:1,show:!0,type:"input",modelName:"createUserName",placeholder:"操作人"},{index:2,show:!0,type:"select",modelName:"type",placeholder:"变更状态",option:"type",optionLabel:"label",optionValue:"value"}]});const G={type:()=>B.map(s=>({label:s.label,value:s.value}))};return(s,r)=>{const J=he,K=y("ElDivider"),N=y("el-button"),W=ke,X=ve,Y=_e,Z=y("el-row"),d=y("el-table-column"),i=y("el-text"),ee=y("el-tag"),te=y("el-empty"),ae=y("el-table"),le=y("ElPagination"),oe=be,I=pe("loading");return E((a(),V("div",{class:de({"absolute-container":g.value})},[p(oe,null,{default:t(()=>[p(J,{formSearchList:L.value,formSearchName:O.value,onCurrentChange:x,onOnReset:M,model:f,formOption:G},null,8,["formSearchList","formSearchName","model"]),p(K,{"border-style":"dashed"}),p(Z,{gutter:24},{default:t(()=>[p(W,null,{default:t(()=>[p(N,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:$},{default:t(()=>[n(" 新增 ")]),_:1})]),_:1}),p(Y,null,{default:t(()=>[p(N,{size:"default",onClick:r[0]||(r[0]=()=>{})},{default:t(()=>[n(" 导出 ")]),_:1}),p(X,{border:k.value,"onUpdate:border":r[1]||(r[1]=e=>k.value=e),tableAutoHeight:g.value,"onUpdate:tableAutoHeight":r[2]||(r[2]=e=>g.value=e),checkList:c.value,"onUpdate:checkList":r[3]||(r[3]=e=>c.value=e),columns:S.value,"onUpdate:columns":r[4]||(r[4]=e=>S.value=e),"line-height":h.value,"onUpdate:lineHeight":r[5]||(r[5]=e=>h.value=e),stripe:T.value,"onUpdate:stripe":r[6]||(r[6]=e=>T.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),E((a(),l(ae,{ref_key:"tableSortRef",ref:j,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:h.value,stripe:T.value,onSelectionChange:q},{empty:t(()=>[p(te,{image:m(ce),"image-size":300},null,8,["image"])]),default:t(()=>[p(d,{align:"left",type:"selection"}),c.value.includes("projectClickId")?(a(),l(d,{key:0,prop:"projectClickId","show-overflow-tooltip":"",align:"left",label:"点击ID"})):o("",!0),c.value.includes("beforeType")?(a(),l(d,{key:1,prop:"beforeType","show-overflow-tooltip":"",align:"left",label:"变更前"},{default:t(({row:e})=>[e.beforeSurveyType===5&&e.beforeViceType===0?(a(),l(i,{key:0,type:"info",class:"mx-1"},{default:t(()=>[n("未完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===0?(a(),l(i,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===7?(a(),l(i,{key:2,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===8?(a(),l(i,{key:3,type:"warning",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===9?(a(),l(i,{key:4,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):o("",!0),e.beforeSurveyType===2?(a(),l(i,{key:5,type:"danger",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):o("",!0),e.beforeSurveyType===3?(a(),l(i,{key:6,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):o("",!0),e.beforeViceType===13?(a(),l(i,{key:7,type:"success",class:"mx-1"},{default:t(()=>[n("和解")]),_:1})):o("",!0)]),_:1})):o("",!0),c.value.includes("afterType")?(a(),l(d,{key:2,prop:"afterType","show-overflow-tooltip":"",align:"left",label:"变更后"},{default:t(({row:e})=>[e.afterSurveyType===1&&e.afterViceType===0?(a(),l(i,{key:0,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===7?(a(),l(i,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===8?(a(),l(i,{key:2,type:"warning",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===9?(a(),l(i,{key:3,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):o("",!0),e.afterSurveyType===2?(a(),l(i,{key:4,type:"danger",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):o("",!0),e.afterSurveyType===3?(a(),l(i,{key:5,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):o("",!0)]),_:1})):o("",!0),c.value.includes("createTime")?(a(),l(d,{key:3,prop:"createTime","show-overflow-tooltip":"",align:"left",label:"创建时间"},{default:t(({row:e})=>[p(ee,{effect:"plain",type:"info"},{default:t(()=>[n(z(m(H)(e.createTime)),1)]),_:2},1024)]),_:1})):o("",!0),c.value.includes("remark")?(a(),l(d,{key:4,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:t(({row:e})=>[n(z(e.remark?e.remark:"-"),1)]),_:1})):o("",!0),c.value.includes("createUserId")?(a(),l(d,{key:5,prop:"createUserId","show-overflow-tooltip":"",align:"left",label:"操作人"},{default:t(({row:e})=>[(a(!0),V(fe,null,ye(R.value,C=>(a(),V("div",{key:C.id},[C.id===e.createUserId?(a(),l(i,{key:0},{default:t(()=>[n(z(C.name),1)]),_:2},1024)):o("",!0)]))),128))]),_:1})):o("",!0)]),_:1},8,["data","border","size","stripe"])),[[I,_.value]]),p(le,{"current-page":m(v).page,total:m(v).total,"page-size":m(v).size,"page-sizes":m(v).sizes,layout:m(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"]),p(Te,{onSuccess:b,ref_key:"editRef",ref:U},null,512),p(xe,{ref_key:"detailRef",ref:w},null,512)]),_:1})],2)),[[I,_.value]])}}}),Ee=ge(Ce,[["__scopeId","data-v-477379f8"]]);export{Ee as default};
