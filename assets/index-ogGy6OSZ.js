
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as de,d as ue,l as pe,aN as me,r as b,a3 as E,n as ye,a as _,q as fe,o as t,b as p,f as i,w as o,i as s,g as n,A as k,s as be,e as a,aM as _e,j as l,y as m,z as y,F as M,N as he,b9 as ve,ba as ke,bd as ge,ap as Ie,L as Se}from"./index-BEOl4zGe.js";import{_ as xe}from"./index-CK048iN6.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-Cnug4DTe.js";import{_ as Ce}from"./index-BLW48kyV.js";import{u as Ne}from"./user_customer-DbtTjex8.js";import"./index-444kN2BY.js";import"./index.vue_vue_type_script_setup_true_lang-BjKMupJr.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-DYDBNx4m.js";const De={list:T=>de.post("callback/getMemberChildSurveyRecord",T)},Pe={class:"copyId flex-s tableSmall"},Te={class:"id oneLine"},je={key:0,class:"copyId flex-s tableSmall"},we={class:"oneLine"},ze={key:0,class:"id oneLine"},Be={key:1,class:"id"},Re={key:0},Ee={key:0},Me={class:"copyId tableSmall flex-s"},Ue={class:"id oneLine"},Ve={key:1,class:"id"},Fe={key:0},He={key:0},Ae={class:"copyId tableSmall flex-s"},$e={class:"id oneLine"},qe={key:1,class:"id"},Oe={key:0,class:"copyId tableSmall flex-s"},Ge={class:"oneLine"},Qe={key:0,class:"id oneLine"},Je={key:1,class:"id"},Ke={class:"tableBig oneLine"},We={class:"copyId tableSmall flex-s"},Xe={class:"id oneLine"},Ye={class:"tableBig"},Ze={class:"copyId tableSmall flex-s"},et={class:"id oneLine"},tt={class:"tableBig"},ot={class:"tableBig",style:{color:"#fd8989"}},lt={key:0},at=ue({name:"memberSurveyRecords",__name:"index",setup(T){const U=pe(),V=Ne(),{getParams:F,pagination:v,onSizeChange:H,onCurrentChange:A}=me(),I=b(!1),j=b([]),$=b(""),d=b([]),S=b(!1),x=b(!1),L=b("default"),C=b(!1),q=b(),w=b(),O=b("formSearch-memberSurveyRecords"),N=b([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortable:!0,checked:!0},{prop:"memberPrice",label:"成本价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),D=E({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),P=E({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function G(){D.pageNo=1,g()}function Q(u){H(u).then(()=>g())}function z(u=1){A(u).then(()=>g())}async function g(){try{I.value=!0;const u={...F(),...D},{data:c}=await De.list(u);j.value=c.memberChildSurveyRecordInfoList,q.value=c.currencyType,v.value.total=c.total,I.value=!1}catch{}finally{I.value=!1}}function J(u){$.value=u}function K(){Object.assign(D,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),g()}ye(async()=>{P.customerList=await V.getCustomerList(),P.country=await U.getCountry(),N.value.forEach(u=>{u.checked&&d.value.push(u.prop)}),g(),w.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:5,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID"},{index:6,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份"},{index:7,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:8,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:9,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:"surveyStatus",optionLabel:"label",optionValue:"value"},{index:10,show:!0,type:"select",modelName:"viceStatus",placeholder:"副状态",option:"viceStatus",optionLabel:"label",optionValue:"value"}]});const W={surveySource:()=>[{label:"内部会员",value:1},{label:"外部会员",value:2}],surveyStatus:()=>P.surveyStatusList.map((u,c)=>({label:u,value:c+1})),viceStatus:()=>P.viceStatusList.map((u,c)=>({label:u,value:c+1}))};return(u,c)=>{const X=Ce,Y=_("ElDivider"),Z=Le,ee=_("el-button"),te=ve,oe=ke,le=_("el-row"),f=_("el-table-column"),r=_("el-tag"),h=xe,B=ge,R=_("ElTableColumn"),ae=_("el-text"),se=_("el-empty"),ne=_("el-table"),re=_("ElPagination"),ce=Ie,ie=fe("loading");return t(),p("div",{class:he({"absolute-container":s(C)})},[i(ce,null,{default:o(()=>[i(X,{formSearchList:s(w),formSearchName:s(O),onCurrentChange:z,onOnReset:K,model:s(D),formOption:W},null,8,["formSearchList","formSearchName","model"]),i(Y,{"border-style":"dashed"}),i(le,null,{default:o(()=>[i(Z),i(oe,null,{default:o(()=>[i(ee,{size:"default"},{default:o(()=>[n(" 导出 ")]),_:1}),i(te,{border:s(S),"onUpdate:border":c[0]||(c[0]=e=>k(S)?S.value=e:null),tableAutoHeight:s(C),"onUpdate:tableAutoHeight":c[1]||(c[1]=e=>k(C)?C.value=e:null),checkList:s(d),"onUpdate:checkList":c[2]||(c[2]=e=>k(d)?d.value=e:null),columns:s(N),"onUpdate:columns":c[3]||(c[3]=e=>k(N)?N.value=e:null),"line-height":s(L),"onUpdate:lineHeight":c[4]||(c[4]=e=>k(L)?L.value=e:null),stripe:s(x),"onUpdate:stripe":c[5]||(c[5]=e=>k(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:G},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),be((t(),a(ne,{border:s(S),data:s(j),size:s(L),stripe:s(x),onSelectionChange:J},{empty:o(()=>[i(se,{image:s(_e),"image-size":300},null,8,["image"])]),default:o(()=>[i(f,{align:"left",type:"selection"}),s(d).includes("id")?(t(),a(f,{key:0,align:"left",prop:"id","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:o(({row:e})=>[e.surveySource===2?(t(),a(r,{key:0,effect:"dark",type:"warning"},{default:o(()=>[n("外部人员")]),_:1})):l("",!0),m("div",Pe,[m("div",Te,"ID: "+y(e.id),1),i(h,{class:"copy edit",content:e.id},null,8,["content"])])]),_:1})):l("",!0),s(d).includes("randomIdentityId")?(t(),a(f,{key:1,align:"left",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:o(({row:e})=>[e.surveySource===1?(t(),p("div",je,[m("div",we,[e.randomIdentityId?(t(),p("span",ze," ID: "+y(e.randomIdentityId),1)):(t(),p("span",Be))]),e.randomIdentityId?(t(),a(h,{key:0,class:"copy edit",content:e.randomIdentityId},null,8,["content"])):l("",!0)])):l("",!0)]),_:1})):l("",!0),s(d).includes("surveySource")?(t(),a(f,{key:2,align:"left",prop:"memberId","show-overflow-tooltip":"",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(t(),p("div",Re,[e.memberId?(t(),p("div",Ee,[m("div",Me,[m("div",Ue,"ID: "+y(e.memberId),1),i(h,{class:"copy edit",content:e.memberId},null,8,["content"])])])):(t(),p("span",Ve))])):l("",!0)]),_:1})):l("",!0),s(d).includes("memberChildId")?(t(),a(f,{key:3,align:"left",prop:"memberChildId","show-overflow-tooltip":"",label:"子会员ID"},{default:o(({row:e})=>[e.surveySource===1?(t(),p("div",Fe,[e.memberChildId?(t(),p("div",He,[m("div",Ae,[m("div",$e,"ID: "+y(e.memberChildId),1),i(h,{class:"copy edit",content:e.memberChildId},null,8,["content"])])])):(t(),p("span",qe))])):l("",!0)]),_:1})):l("",!0),s(d).includes("tenantSupplierId")?(t(),a(f,{key:4,align:"left",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[e.surveySource===1?(t(),p("div",Oe,[m("div",Ge,[e.tenantSupplierId?(t(),p("span",Qe," ID: "+y(e.tenantSupplierId),1)):(t(),p("span",Je))]),e.tenantSupplierId?(t(),a(h,{key:0,class:"copy edit",content:e.tenantSupplierId},null,8,["content"])):l("",!0)])):l("",!0)]),_:1})):l("",!0),s(d).includes("projectId")?(t(),a(f,{key:5,align:"left",prop:"projectId","show-overflow-tooltip":"",label:"项目"},{default:o(({row:e})=>[m("div",Ke,"名称: "+y(e.projectName),1),m("div",We,[m("div",Xe,"ID: "+y(e.projectId),1),e.projectId?(t(),a(h,{key:0,class:"copy edit",content:e.projectId},null,8,["content"])):l("",!0)])]),_:1})):l("",!0),s(d).includes("customerShortName")?(t(),a(f,{key:6,align:"left",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"},{default:o(({row:e})=>[m("div",Ye,y(e.customerShortName),1)]),_:1})):l("",!0),s(d).includes("ipBelong")?(t(),a(f,{key:7,align:"left",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/区域"},{default:o(({row:e})=>[i(r,{type:"primary"},{default:o(()=>[n(y(e.ipBelong.split("/")[1]),1)]),_:2},1024),m("div",Ze,[m("div",et,y(e.ipBelong.split("/")[0]),1),i(h,{class:"copy edit",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):l("",!0),s(d).includes("allocationType")?(t(),a(f,{key:8,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:o(({row:e})=>[e.allocationType===1?(t(),a(r,{key:0,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:o(()=>[n("未分配")]),_:1})):l("",!0),e.allocationType===2?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("供应商")]),_:1})):l("",!0),e.allocationType===3?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("会员组")]),_:1})):l("",!0)]),_:1})):l("",!0),s(d).includes("doMoneyPrice")?(t(),a(f,{key:9,align:"left",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"项目价"},{default:o(({row:e})=>[m("div",tt,[i(B),n(y(e.doMoneyPrice||0),1)])]),_:1})):l("",!0),s(d).includes("memberPrice")?(t(),a(f,{key:10,align:"left",prop:"memberPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"成本价"},{default:o(({row:e})=>[m("div",ot,[i(B),e.memberId?(t(),p(M,{key:0},[n(y(e.memberPrice||0),1)],64)):(t(),p(M,{key:1},[n(y(e.supplierPrice||0),1)],64))])]),_:1})):l("",!0),s(d).includes("surveyTime")?(t(),a(f,{key:11,width:"120",align:"left",fixed:"right","show-overflow-tooltip":"",label:"调查时间"},{default:o(({row:e})=>[i(r,{effect:"plain",type:"info"},{default:o(()=>[n(y(e.surveyTime?e.surveyTime+"min":0)+"/ "+y(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):l("",!0),s(d).includes("surveyStatus")?(t(),a(R,{key:12,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"调查状态"},{default:o(({row:e})=>[e.surveyStatus===3?(t(),a(r,{key:0,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("配额满")]),_:1})):l("",!0),e.surveyStatus===1?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#379aff",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[n("完成")]),_:1})):l("",!0),e.surveyStatus===2?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[n("被甄别")]),_:1})):l("",!0),e.surveyStatus===4?(t(),a(r,{key:3,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("安全终止")]),_:1})):l("",!0),e.surveyStatus===5?(t(),a(r,{key:4,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:o(()=>[n("未完成")]),_:1})):l("",!0)]),_:1})):l("",!0),s(d).includes("viceStatus")?(t(),a(R,{key:13,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:o(({row:e})=>[e.viceStatus?(t(),p("div",lt,[e.viceStatus===1?(t(),a(r,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[n("待审")]),_:1})):l("",!0),e.viceStatus===2?(t(),a(r,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[n("免审")]),_:1})):l("",!0),e.viceStatus===3?(t(),a(r,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[n("过IR")]),_:1})):l("",!0),e.viceStatus===4?(t(),a(r,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[n("时间过短")]),_:1})):l("",!0),e.viceStatus===5?(t(),a(r,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:o(()=>[n("超时完成")]),_:1})):l("",!0),e.viceStatus===6?(t(),a(r,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:o(()=>[n("超量完成")]),_:1})):l("",!0),e.viceStatus===7?(t(),a(r,{key:6,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:o(()=>[n("审核成功")]),_:1})):l("",!0),e.viceStatus===8?(t(),a(r,{key:7,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:o(()=>[n("审核失败")]),_:1})):l("",!0),e.viceStatus===9?(t(),a(r,{key:8,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:o(()=>[n("数据冻结")]),_:1})):l("",!0),e.viceStatus===10?(t(),a(r,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:o(()=>[n("时间段过载")]),_:1})):l("",!0),e.viceStatus===11?(t(),a(r,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:o(()=>[n("IP不一致")]),_:1})):l("",!0),e.viceStatus===12?(t(),a(r,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:o(()=>[n("ID重复参与")]),_:1})):l("",!0),e.viceStatus===13?(t(),a(r,{key:12,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:o(()=>[n("和解")]),_:1})):l("",!0)])):(t(),a(ae,{key:1}))]),_:1})):l("",!0)]),_:1},8,["border","data","size","stripe"])),[[ie,s(I)]]),i(re,{"current-page":s(v).page,total:s(v).total,"page-size":s(v).size,"page-sizes":s(v).sizes,layout:s(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),yt=Se(at,[["__scopeId","data-v-a8003c71"]]);export{yt as default};
