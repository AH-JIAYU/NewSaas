
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as g,d as M,r,a as n,al as $,o as V,b as q,f as l,w as a,F as u,g as p,am as H,e as w,j as N,ak as I,aK as J,aL as K,_ as A}from"./index-BqEk6xQN.js";const G={list:s=>g.post("projectSettlement/get/getProjectSettlementList",s),review:s=>g.post("projectSettlement/update/projectSettlement",s),edit:s=>g.post("",s),delete:s=>g.post("menu/delete",{id:s},{baseURL:"/mock/"})},h=s=>(J("data-v-e8b4e998"),s=s(),K(),s),Q={class:"border"},W=h(()=>u("p",{class:"pp"},"项目ID",-1)),X={class:"neip"},Y={class:"border"},Z=h(()=>u("p",{class:"pp"},"项目名称",-1)),ee={class:"neip"},le={class:"shenhe"},te={class:"beizhu"},ae={class:"po"},oe={style:{flex:"auto"}},se=M({name:"ProjectReview",__name:"index",emits:["success"],setup(s,{expose:z,emit:U}){const B=U,b=r(!1),_=r([]),d=r(),t=r({projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),D=r({settlementType:[{required:!0,message:"请选择审核方式",trigger:"change"}]}),f=r(),y=r(!1),i=r(!1);async function C(m){m&&(d.value=JSON.parse(m),t.value.projectId=d.value.projectId,t.value.projectName=d.value.projectName),i.value=!0}async function L(){f.value&&f.value.validate(async m=>{if(m){b.value=!0,delete t.value.projectName,t.value.settlementType===1||t.value.settlementType===2?t.value.projectSettlementBuilderList=_.value.split(`
`)||[]:t.value.projectSettlementBuilderList=[];const{status:e}=await G.review(t.value);e===1?(B("success"),b.value=!1,I.success({message:"操作成功",center:!0}),S()):I.error({message:"操作失败，请联系工作人员",center:!0})}else I({message:"请选择审核方式",type:"warning"})})}function S(){f.value.resetFields(),Object.assign(t.value,{projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),_.value=[],i.value=!1}return z({showEdit:C}),(m,e)=>{const c=n("el-input"),j=n("el-row"),v=n("el-radio"),O=n("el-radio-group"),k=n("el-form-item"),x=n("el-col"),R=n("el-checkbox"),P=n("el-form"),T=n("el-button"),E=n("el-drawer"),F=$("loading");return V(),q("div",null,[l(E,{modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=o=>i.value=o),title:"项目审核",size:"50%","before-close":S},{footer:a(()=>[u("div",oe,[l(T,{type:"primary",onClick:L},{default:a(()=>[p(" 确定 ")]),_:1}),l(T,{onClick:e[8]||(e[8]=o=>i.value=!1)},{default:a(()=>[p(" 取消 ")]),_:1})])]),default:a(()=>[H((V(),w(P,{ref_key:"formRef",ref:f,model:t.value,rules:D.value,"label-width":"174px",inline:!1},{default:a(()=>[l(j,{style:{margin:"0"},gutter:20},{default:a(()=>[u("div",Q,[W,u("p",X,[l(c,{modelValue:d.value.projectId,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value.projectId=o),placeholder:"请输入项目ID",clearable:""},null,8,["modelValue"])])]),u("div",Y,[Z,u("p",ee,[l(c,{modelValue:d.value.projectName,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value.projectName=o),placeholder:"请输入项目名称",clearable:""},null,8,["modelValue"])])])]),_:1}),u("div",le,[l(k,{prop:"settlementType",style:{display:"flex","align-items":"center"},label:"审核方式"},{default:a(()=>[l(O,{modelValue:t.value.settlementType,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.settlementType=o)},{default:a(()=>[l(v,{value:1,size:"large"},{default:a(()=>[p(" 按成功ID ")]),_:1}),l(v,{value:2,size:"large"},{default:a(()=>[p(" 按失败ID ")]),_:1}),l(v,{value:3,size:"large"},{default:a(()=>[p(" 全部通过 ")]),_:1}),l(v,{value:4,size:"large"},{default:a(()=>[p(" 全部失败 ")]),_:1}),l(v,{value:5,size:"large"},{default:a(()=>[p(" 数据冻结 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),u("div",te,[l(k,{label:"备注"},{default:a(()=>[l(c,{class:"custom-input",modelValue:t.value.remark,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.remark=o),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),u("div",ae,[y.value?(V(),w(k,{key:0,label:"结算PO号"},{default:a(()=>[l(c,{modelValue:t.value.po,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.po=o),class:"custom-input",placeholder:"",clearable:"",onChange:e[5]||(e[5]=()=>{})},null,8,["modelValue"])]),_:1})):N("",!0)]),l(j,{style:{margin:"0"},gutter:20},{default:a(()=>[l(x,{span:20}),l(x,{span:4},{default:a(()=>[l(R,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),label:"填写结算PO号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.settlementType===1||t.value.settlementType===2?(V(),w(j,{key:0,style:{margin:"0"},gutter:20},{default:a(()=>[l(c,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=o=>_.value=o),placeholder:"请粘贴ID，每行一个,多个请回车换行",type:"textarea",rows:"15"},null,8,["modelValue"])]),_:1})):N("",!0)]),_:1},8,["model","rules"])),[[F,b.value]])]),_:1},8,["modelValue"])])}}}),ne=A(se,[["__scopeId","data-v-e8b4e998"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{G as a,re as i,ne as p};
