
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,r as n,aN as fe,N as _e,o as ge,a3 as m,al as F,a4 as d,b as i,j as ve,g as l,w as o,i as r,c as s,h as b,l as he,aM as ye,f,t as S,B as R,k as v,aS as ke,ai as Ce,aO as be,aP as Se,_ as we,ao as ze,z as Ee}from"./index-CZbucr5m.js";import{_ as Le}from"./index-PN1hupeh.js";import{_ as xe}from"./index.vue_vue_type_style_index_0_lang-CqdxPdGY.js";import{_ as De}from"./index-BSfOfdYZ.js";import{a as H}from"./position_manage-Be9Wjkpg.js";import Pe from"./index-D2UzAYzU.js";import{u as Re}from"./user_customer-iJBTdTua.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-C1b6LAC0.js";import{columns as w,formSearchList as $e}from"./index-LKHl6-K8.js";import"./index-DJcwqxDh.js";import"./clipboard-Dvk2Ua3v.js";import"./index.vue_vue_type_script_setup_true_lang-DxVdHgVW.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-BhbG_hn6.js";const Be={class:"copyId tableSmall"},Ue={class:"id oneLine idFont"},Fe={class:"tableBig"},He={class:"fontC-System"},Ie={class:"flex-s"},Me={class:"oneLine fontC-System",style:{width:"calc(100% - 20px)"}},Oe=de({name:"position_manage",__name:"list",setup(Ae){const I=Re(),M=n([]),{pagination:p,onSizeChange:O,onCurrentChange:A,onSortChange:Qe}=fe(),Q=n(""),N=n([]),h=n(!0),z=n(),E=n(!1),c=n([]),L=n(!1),x=n("default"),$=n(),y=n(),D=n(!1),V=n([]),j=n("formSearch-position_manage"),T=[{lable:"启用",value:1},{lable:"禁用",value:2}],_=_e({page:1,limit:10,id:null,name:"",active:null});function q(){z.value.showEdit()}function J(t){z.value.showEdit(JSON.stringify(t))}function G(t){t?y.value=t.id:y.value=""}function K(t,a){$.value.showEdit(t,a)}function W(t){V.value=t}function X(t){ke.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(async()=>{(await H.delete({id:t.id})).status===1&&(Ce.success({message:"删除成功",center:!0}),u())})}function Y(){Object.assign(_,{page:1,limit:10,id:null,name:"",active:null}),u()}function Z(t){O(t).then(()=>{_.limit=t,u()})}function P(t=1){A(t).then(()=>{_.page=t,u()})}async function u(){try{h.value=!0,M.value=await I.getCustomerList();const{data:t,status:a}=await H.list(_);t&&a===1&&(N.value=t.data,p.value.total=parseInt(t.total)||0),h.value=!1}catch{}finally{h.value=!1}}ge(()=>{w.forEach(t=>{t.checked&&c.value.push(t.prop)}),u()});const ee={active:()=>T};return(t,a)=>{const te=De,ae=m("ElDivider"),k=m("el-button"),oe=xe,ne=be,le=Se,ie=m("el-row"),se=Le,g=m("el-table-column"),re=we,ce=m("el-empty"),ue=m("el-table"),me=m("ElPagination"),pe=ze,C=F("auth"),B=F("loading");return d((i(),ve("div",{class:R({"absolute-container":E.value})},[l(pe,null,{default:o(()=>[l(te,{formSearchList:r($e),formSearchName:j.value,onCurrentChange:P,onOnReset:Y,model:_,formOption:ee},null,8,["formSearchList","formSearchName","model"]),l(ae,{"border-style":"dashed"}),l(ie,{gutter:24},{default:o(()=>[l(oe,null,{default:o(()=>[d((i(),s(k,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:q},{default:o(()=>[b(" 新增职位 ")]),_:1})),[[C,"position_manage-insert-insertPosition"]])]),_:1}),l(le,null,{default:o(()=>[l(k,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[b(" 导出 ")]),_:1}),l(ne,{border:L.value,"onUpdate:border":a[1]||(a[1]=e=>L.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>E.value=e),checkList:c.value,"onUpdate:checkList":a[3]||(a[3]=e=>c.value=e),columns:r(w),"onUpdate:columns":a[4]||(a[4]=e=>he(w)?w.value=e:null),"line-height":x.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>x.value=e),stripe:D.value,"onUpdate:stripe":a[6]||(a[6]=e=>D.value=e),style:{"margin-left":"12px"},onQueryData:P},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),d((i(),s(ue,{ref_key:"tableSortRef",ref:Q,style:{"margin-top":"10px"},"row-key":"id",data:N.value,border:L.value,size:x.value,stripe:D.value,onSelectionChange:W,"highlight-current-row":"",onCurrentChange:G},{empty:o(()=>[l(ce,{image:r(ye),"image-size":300},null,8,["image"])]),default:o(()=>[c.value.includes("id")?(i(),s(g,{key:0,prop:"id","show-overflow-tooltip":"",align:"left",label:"职位ID"},{default:o(({row:e})=>[f("div",Be,[f("div",Ue,S(e.id),1),l(se,{content:e.id,class:R([{rowCopy:"rowCopy",current:e.id===y.value},"littleButton"])},null,8,["content","class"])])]),_:1})):v("",!0),c.value.includes("name")?(i(),s(g,{key:1,prop:"name","show-overflow-tooltip":"",align:"left",label:"职位名称"},{default:o(({row:e})=>[f("div",Fe,S(e.name),1)]),_:1})):v("",!0),c.value.includes("count")?(i(),s(g,{key:2,prop:"count","show-overflow-tooltip":"",align:"left",label:"账户数"},{default:o(({row:e})=>[f("div",He,S(e.count?e.count:"-"),1)]),_:1})):v("",!0),c.value.includes("remark")?(i(),s(g,{key:3,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:o(({row:e})=>[f("div",Ie,[f("div",Me,S(e.remark?e.remark:"-"),1),e.projectType!==2?d((i(),s(re,{key:0,onClick:U=>K(e,"remark"),class:R({edit:"edit",current:e.id===y.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])),[[C,"position_manage-update-updatePosition"]]):v("",!0)])]),_:1})):v("",!0),l(g,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[d((i(),s(k,{size:"small",plain:"",type:"primary",onClick:U=>J(e)},{default:o(()=>[b(" 编辑 ")]),_:2},1032,["onClick"])),[[C,"position_manage-update-updatePosition"]]),d((i(),s(k,{size:"small",plain:"",type:"danger",onClick:U=>X(e)},{default:o(()=>[b(" 删除 ")]),_:2},1032,["onClick"])),[[C,"position_manage-delete-deletePosition"]])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[B,!1]]),l(me,{"current-page":r(p).page,total:r(p).total,"page-size":r(p).size,"page-sizes":r(p).sizes,layout:r(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:P,onSizeChange:Z},null,8,["current-page","total","page-size","page-sizes","layout"]),l(Ne,{onSuccess:u,ref_key:"editRef",ref:z},null,512),l(Pe,{ref_key:"QuickEditRef",ref:$,onFetchData:u},null,512)]),_:1})],2)),[[B,h.value]])}}}),ot=Ee(Oe,[["__scopeId","data-v-5316bf75"]]);export{ot as default};
