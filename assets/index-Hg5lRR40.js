
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as q}from"./project_settlement-D-RlYrQI.js";import{d as F,r as n,a as s,al as H,o as g,b as J,f as l,w as a,D as u,g as d,am as K,e as k,j as T,E as w,aK as M,aL as $,P as A}from"./index-BP3NysZD.js";const h=v=>(M("data-v-1d28a4fb"),v=v(),$(),v),G={class:"border"},Q=h(()=>u("p",{class:"pp"},"项目ID",-1)),W={class:"neip"},X={class:"border"},Y=h(()=>u("p",{class:"pp"},"项目名称",-1)),Z={class:"neip"},ee={class:"shenhe"},le={class:"beizhu"},te={class:"po"},ae={style:{flex:"auto"}},oe=F({name:"ProjectReview",__name:"index",emits:["success"],setup(v,{expose:D,emit:S}){const z=S,V=n(!1),_=n([]),r=n(),t=n({projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),B=n({settlementType:[{required:!0,message:"请选择审核方式",trigger:"change"}]}),f=n(),y=n(!1),p=n(!1);async function U(i){i&&(r.value=JSON.parse(i),t.value.projectId=r.value.projectId,t.value.projectName=r.value.projectName),p.value=!0}async function C(){f.value&&f.value.validate(async i=>{if(i){V.value=!0,delete t.value.projectName,t.value.settlementType===1||t.value.settlementType===2?t.value.projectSettlementBuilderList=_.value.split(`
`)||[]:t.value.projectSettlementBuilderList=[];const{status:e}=await q.review(t.value);e===1?(z("success"),V.value=!1,w.success({message:"操作成功",center:!0}),I()):w.error({message:"操作失败，请联系工作人员",center:!0})}else w({message:"请选择审核方式",type:"warning"})})}function I(){f.value.resetFields(),Object.assign(t.value,{projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),_.value=[],p.value=!1}return D({showEdit:U}),(i,e)=>{const m=s("el-input"),b=s("el-row"),c=s("el-radio"),L=s("el-radio-group"),j=s("el-form-item"),x=s("el-col"),R=s("el-checkbox"),E=s("el-form"),N=s("el-button"),O=s("el-drawer"),P=H("loading");return g(),J("div",null,[l(O,{modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value=o),title:"项目审核",size:"50%","before-close":I},{footer:a(()=>[u("div",ae,[l(N,{type:"primary",onClick:C},{default:a(()=>[d(" 确定 ")]),_:1}),l(N,{onClick:e[8]||(e[8]=o=>p.value=!1)},{default:a(()=>[d(" 取消 ")]),_:1})])]),default:a(()=>[K((g(),k(E,{ref_key:"formRef",ref:f,model:t.value,rules:B.value,"label-width":"174px",inline:!1},{default:a(()=>[l(b,{style:{margin:"0"},gutter:20},{default:a(()=>[u("div",G,[Q,u("p",W,[l(m,{modelValue:r.value.projectId,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.projectId=o),placeholder:"请输入项目ID",clearable:""},null,8,["modelValue"])])]),u("div",X,[Y,u("p",Z,[l(m,{modelValue:r.value.projectName,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.projectName=o),placeholder:"请输入项目名称",clearable:""},null,8,["modelValue"])])])]),_:1}),u("div",ee,[l(j,{prop:"settlementType",style:{display:"flex","align-items":"center"},label:"审核方式"},{default:a(()=>[l(L,{modelValue:t.value.settlementType,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.settlementType=o)},{default:a(()=>[l(c,{value:1,size:"large"},{default:a(()=>[d(" 按成功ID ")]),_:1}),l(c,{value:2,size:"large"},{default:a(()=>[d(" 按失败ID ")]),_:1}),l(c,{value:3,size:"large"},{default:a(()=>[d(" 全部通过 ")]),_:1}),l(c,{value:4,size:"large"},{default:a(()=>[d(" 全部失败 ")]),_:1}),l(c,{value:5,size:"large"},{default:a(()=>[d(" 数据冻结 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),u("div",le,[l(j,{label:"备注"},{default:a(()=>[l(m,{class:"custom-input",modelValue:t.value.remark,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.remark=o),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),u("div",te,[y.value?(g(),k(j,{key:0,label:"结算PO号"},{default:a(()=>[l(m,{modelValue:t.value.po,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.po=o),class:"custom-input",placeholder:"",clearable:"",onChange:e[5]||(e[5]=()=>{})},null,8,["modelValue"])]),_:1})):T("",!0)]),l(b,{style:{margin:"0"},gutter:20},{default:a(()=>[l(x,{span:20}),l(x,{span:4},{default:a(()=>[l(R,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),label:"填写结算PO号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.settlementType===1||t.value.settlementType===2?(g(),k(b,{key:0,style:{margin:"0"},gutter:20},{default:a(()=>[l(m,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=o=>_.value=o),placeholder:"请粘贴ID，每行一个,多个请回车换行",type:"textarea",rows:"15"},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1},8,["model","rules"])),[[P,V.value]])]),_:1},8,["modelValue"])])}}}),ne=A(oe,[["__scopeId","data-v-1d28a4fb"]]);export{ne as default};
