
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as M,e as R,a as U}from"./index-DGhlutN9.js";import{z as j}from"./zh_Hans-B39mJ-rS.js";import{k as p,d as q,r as m,G as B,ak as v,a as r,al as I,am as L,i as t,o as _,b as g,f as a,w as u,F as O,n as P,_ as S}from"./index-CxgaPvOC.js";const b={list:o=>p.post("notice/get/getNotice",o),create:o=>p.post("notice/insert/insertNotice",o),edit:o=>p.post("notice/update/updateNotice",o),delete:o=>p.post("notice/delete/deleteNotice",o)},G=q({__name:"index",props:["id","row"],setup(o,{expose:x}){const f=o,y=[{label:"公告",value:1},{label:"常见问题",value:2},{label:"帮助",value:3}],s=m(!1),i=m(),e=m({id:f.id,title:"",type:"",text:"",top:!1}),V=m({title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),k=[M({locale:U})];function h(d){e.value.text=d}B(()=>{e.value.id!==""&&w()});function w(){s.value=!0,e.value=f.row,s.value=!1}return x({submit(){return new Promise(d=>{e.value.id===""?i.value&&i.value.validate(l=>{l&&(delete e.value.id,s.value=!0,b.create(e.value).then(()=>{s.value=!1,v.success({message:"新增成功",center:!0}),d()}))}):i.value&&i.value.validate(l=>{l&&(s.value=!0,b.edit(e.value).then(()=>{s.value=!1,v.success({message:"编辑成功",center:!0}),d()}))})})}}),(d,l)=>{const C=r("el-input"),c=r("el-form-item"),F=r("el-option"),N=r("el-select"),z=r("el-checkbox"),D=r("ElForm"),E=I("loading");return L((_(),g("div",null,[a(D,{ref_key:"formRef",ref:i,model:t(e),rules:t(V),"label-width":"120px","label-suffix":"："},{default:u(()=>[a(c,{label:"标题",prop:"title"},{default:u(()=>[a(C,{modelValue:t(e).title,"onUpdate:modelValue":l[0]||(l[0]=n=>t(e).title=n),placeholder:"请输入标题",clearable:"",onChange:l[1]||(l[1]=()=>{})},null,8,["modelValue"])]),_:1}),a(c,{label:"类型",prop:"type"},{default:u(()=>[a(N,{modelValue:t(e).type,"onUpdate:modelValue":l[2]||(l[2]=n=>t(e).type=n),"value-key":"",placeholder:"类型",clearable:"",filterable:""},{default:u(()=>[(_(),g(O,null,P(y,n=>a(F,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"内容"},{default:u(()=>[a(t(R),{class:"editor",value:t(e).text,plugins:k,locale:t(j),onChange:h},null,8,["value","locale"])]),_:1}),a(c,{label:""},{default:u(()=>[a(z,{modelValue:t(e).top,"onUpdate:modelValue":l[3]||(l[3]=n=>t(e).top=n),label:"置顶",size:"large"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[E,t(s)]])}}}),H=S(G,[["__scopeId","data-v-8585b54c"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as D,b as a,J as i};
