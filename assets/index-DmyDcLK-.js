
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as _,d as M,aM as P,r as n,k as U,a as i,l as $,n as K,o as R,b as z,f as e,w as o,p as f,g as m,G as F,aH as J,aI as O,Q}from"./index-D5mKHCpP.js";import{u as j}from"./department-BMLFpc-V.js";import"./department-DKXp8nbC.js";const W={list:s=>_.post("team/getGroupTeam",s),create:s=>_.post("team/insertGroupTeam",s),edit:s=>_.post("team/updateGroupTeam",s),delete:s=>_.post("team/deleteGroupTeam",s)},D=s=>(J("data-v-e31130ef"),s=s(),O(),s),X=D(()=>f("div",{class:"card-header"},[f("span",null,"组长")],-1)),Y=D(()=>f("div",{class:"card-header"},[f("span",null,"组员")],-1)),Z={style:{flex:"auto"}},ee=M({name:"Edit",__name:"index",emits:["success"],setup(s,{expose:I,emit:oe}){P();const h=n();j();const g=n(),b=n(""),S=n(),T=n(!1);n([]),n();const v=n(!1),u=n([]);n({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],search:{chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}}),n({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1});const r=n({userId:null,commission:""}),B={children:"children",label:"name"};n({invoiceCode:[{required:!0,trigger:"blur",message:"请输入姓名"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});async function w(a){console.log("row",a)}async function N(a){b.value=a!=null&&a.id?"编辑":"新增";const t=JSON.parse(a);r.value=t,console.log("form.value",r.value);const l={page:1,limit:10,groupId:r.value.id},c=await W.list(l);console.log("res",c),v.value=!0}U(async()=>{g.value=[{id:"574449384760348672",name:"技术部",director:"574448371148066816",memberCount:null,commissionStatus:1,commission:100,commissionTyp:2,remark:"技术部",children:[{id:"574451094157332480",phone:null,email:"131631@qq.com",name:"小小",country:"DE",role:"admin",active:!0},{id:"574449041162964992",phone:null,email:"131616@qq.com",name:"王二",country:"CA",role:"admin",active:!0}]}],S.value=new Date});const q=a=>{u.value.map(t=>{if(t.id===a.id)return console.log(11111)}),a.children&&a.children.length?a.children.forEach(t=>{u.value.push(t)}):u.value.push(a)};function A(){return new Promise(a=>{const t=h.value.getCheckedKeys(),l=h.value.getHalfCheckedKeys(),c=t.concat(l);console.log("menupath",c)})}return I({showEdit:N}),(a,t)=>{const l=i("el-table-column"),c=i("el-input"),y=i("el-empty"),x=i("el-table"),k=i("el-card"),E=i("el-tree"),V=i("el-col"),G=i("el-row"),C=i("el-button"),L=i("el-drawer"),H=$("loading");return K((R(),z("div",null,[e(L,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=d=>v.value=d),title:b.value,size:"60%"},{footer:o(()=>[f("div",Z,[e(C,{type:"",onClick:t[3]||(t[3]=d=>v.value=!1)},{default:o(()=>[m(" 取消 ")]),_:1}),e(C,{type:"primary",onClick:A},{default:o(()=>[m(" 确定 ")]),_:1})])]),default:o(()=>[e(k,{class:"box-card"},{header:o(()=>[X]),default:o(()=>[e(x,{data:u.value,border:""},{empty:o(()=>[e(y,{description:"暂无数据"})]),default:o(()=>[e(l,{align:"center",type:"index",label:"序号",width:"80"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"员工ID"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(l,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"组内提成比例"},{default:o(({row:d})=>[e(c,{modelValue:r.value.invoiceAmount,"onUpdate:modelValue":t[0]||(t[0]=p=>r.value.invoiceAmount=p),modelModifiers:{number:!0},placeholder:"请输入提成比例",clearable:"",onBlur:p=>w(d)},{append:o(()=>[m("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1},8,["data"])]),_:1}),e(k,{class:"box-card"},{header:o(()=>[Y]),default:o(()=>[e(G,{gutter:20},{default:o(()=>[e(V,{class:"leftData",span:8},{default:o(()=>[m(F(u.value)+" ",1),e(c,{modelValue:r.value.invoiceAmount,"onUpdate:modelValue":t[1]||(t[1]=d=>r.value.invoiceAmount=d),placeholder:"可输入关键字查找",clearable:""},null,8,["modelValue"]),e(E,{style:{"max-width":"600px","margin-top":"20px",height:"90%"},data:g.value,ref_key:"treeRef",ref:h,"show-checkbox":"","node-key":"id","default-expanded-keys":[2,3],"default-checked-keys":[5],props:B,onCheck:q},null,8,["data"])]),_:1}),e(V,{span:16},{default:o(()=>[e(x,{data:u.value,border:""},{empty:o(()=>[e(y,{description:"暂无数据"})]),default:o(()=>[e(l,{align:"center",type:"selection"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"id",label:"员工ID"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"name",label:"用户名"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"name",label:"姓名"}),e(l,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(l,{align:"center",width:"190",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:o(({row:d})=>[e(c,{modelValue:r.value.commission,"onUpdate:modelValue":t[2]||(t[2]=p=>r.value.commission=p),modelModifiers:{number:!0},placeholder:"提成比例",clearable:"",onBlur:p=>w(d)},{append:o(()=>[m("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])),[[H,T.value]])}}}),ne=Q(ee,[["__scopeId","data-v-e31130ef"]]);export{ne as default};
