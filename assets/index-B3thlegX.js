
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ee,l as le,ab as ae,r as g,Z as D,n as te,$ as oe,a as s,o as i,b as V,f as e,w as l,i as C,b9 as ue,F as x,t as I,y as p,g as _,e as T,j as U,_ as ne,aH as re,aI as se,L as de}from"./index-DblQ9bv_.js";import ie from"./index-ODBhldb6.js";import{U as pe}from"./user_supplier-DiJRumPz.js";import{u as me}from"./configuration_supplierLevel-Bs3sUmq3.js";import{u as fe}from"./user_customer-Cy9R7uwN.js";import"./apiLoading-bn_2S6uh.js";import"./user_supplier-cU-bwr5z.js";import"./user_customer-Cn2_S8uF.js";const L=y=>(re("data-v-caafcb69"),y=y(),se(),y),be=L(()=>p("div",{class:"card-header"},[p("span",null,"基本信息")],-1)),ce={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},ve=L(()=>p("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),_e=L(()=>p("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ye=L(()=>p("div",{class:"card-header"},[p("span",null,"权限信息")],-1)),ge=L(()=>p("div",null,[_(" 为供应商设定筛选条件，更高效匹配合适项目"),p("br"),_(" 例:仅选中【法国】，该供应商只能做【法国】的项目 ")],-1)),Ve=ee({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(y){const R=pe(),j=me(),z=fe(),M=le(),$=ae("validateTopTabs"),w=g(),o=y,k=g(null);g({});const F=[{label:"公司",value:"company"},{label:"个人",value:"personal"}],Z=[{label:"美元",value:1},{label:"人民币",value:2}],m=D({supplierAccord:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择区域",trigger:"change"}],supplierLevelId:[{required:!0,message:"请选择供应商等级",trigger:"change"}],type:[{required:!0,message:"请选择供应商类型",trigger:"change"}]}),O=(d,t,r)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(o.leftTab.supplierPhone)?r():r(new Error("请输入合法手机号"))},H=(d,t,r)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.leftTab.emailAddress)?r():r(new Error("请输入合法邮箱"))},E=d=>{d&&(o.leftTab.countryType=d==="343"?1:2,d==="343"?(m.emailAddress&&delete m.emailAddress,m.supplierPhone=[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:O,trigger:"blur"}]):(m.supplierPhone&&delete m.supplierPhone,m.emailAddress=[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:H,trigger:"blur"}]))};o.leftTab.relevanceCountryIdList||(o.leftTab.relevanceCountryIdList=[]);const N=()=>{w.value.showEdit()},c=D({checked:!1,relatedCustomers:[],payMethod:R.payMethod,countryList:[],supplierLevelList:[]}),A=g("basicSettings"),h=async()=>{c.supplierLevelList=await j.getLevelNameList(),E(o.leftTab.subordinateCountryId)},P=g([]),Q=(d,t)=>d?t.label&&t.label.toLowerCase().includes(d.toLowerCase()):!0,G=d=>{d.forEach(t=>{P.value.push({label:t.chineseName,key:t.id,initial:t.code})})};return te(async()=>{c.relatedCustomers=await z.getCustomerList(),c.countryList=await M.getCountry(),await h(),G(c.countryList)}),oe(()=>{$(k.value)}),(d,t)=>{const r=s("el-option"),f=s("el-select"),u=s("el-form-item"),n=s("el-col"),b=s("el-input"),B=s("el-button"),v=s("el-row"),q=s("el-card"),S=s("ElSwitch"),J=ne,K=s("el-tooltip"),W=s("el-transfer"),X=s("el-tab-pane"),Y=s("el-tabs");return i(),V("div",null,[e(Y,{modelValue:A.value,"onUpdate:modelValue":t[18]||(t[18]=a=>A.value=a)},{default:l(()=>[e(X,{label:"基础设置",name:"basicSettings"},{default:l(()=>[e(C(ue),{ref_key:"formRef",ref:k,rules:C(m),model:o.leftTab,"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(q,{class:"box-card"},{header:l(()=>[be]),default:l(()=>[e(v,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"供应商类型",prop:"type"},{default:l(()=>[e(f,{modelValue:o.leftTab.type,"onUpdate:modelValue":t[0]||(t[0]=a=>o.leftTab.type=a),"value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(i(),V(x,null,I(F,a=>e(r,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商名称",prop:"supplierAccord"},{default:l(()=>[e(b,{modelValue:o.leftTab.supplierAccord,"onUpdate:modelValue":t[1]||(t[1]=a=>o.leftTab.supplierAccord=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商等级",prop:"supplierLevelId"},{default:l(()=>[e(f,{clearable:"",filterable:"",modelValue:o.leftTab.supplierLevelId,"onUpdate:modelValue":t[2]||(t[2]=a=>o.leftTab.supplierLevelId=a)},{empty:l(()=>[p("div",ce,[_(" 暂无数据 "),e(B,{type:"primary",link:"",size:"small",onClick:N},{default:l(()=>[_(" 快捷新增 "),ve]),_:1})])]),default:l(()=>[(i(!0),V(x,null,I(C(c).supplierLevelList,a=>(i(),T(r,{key:a.tenantSupplierLevelId,value:a.tenantSupplierLevelId,label:a.levelNameOrAdditionRatio},null,8,["value","label"]))),128)),e(B,{size:"small",class:"buttonClass",onClick:N},{default:l(()=>[_(" 快捷新增 "),_e]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"所属区域",prop:"subordinateCountryId"},{default:l(()=>[e(f,{clearable:"",filterable:"",modelValue:o.leftTab.subordinateCountryId,"onUpdate:modelValue":t[3]||(t[3]=a=>o.leftTab.subordinateCountryId=a),onChange:E},{default:l(()=>[(i(!0),V(x,null,I(C(c).countryList,a=>(i(),T(r,{key:a.id,value:a.id,label:a.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商姓名"},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.supplierName,"onUpdate:modelValue":t[4]||(t[4]=a=>o.leftTab.supplierName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"手机号码",prop:"supplierPhone"},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.supplierPhone,"onUpdate:modelValue":t[5]||(t[5]=a=>o.leftTab.supplierPhone=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"电子邮箱",prop:"emailAddress"},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.emailAddress,"onUpdate:modelValue":t[6]||(t[6]=a=>o.leftTab.emailAddress=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"结算周期"},{default:l(()=>[e(f,{modelValue:o.leftTab.settlementCycle,"onUpdate:modelValue":t[7]||(t[7]=a=>o.leftTab.settlementCycle=a)},{default:l(()=>[e(r,{label:"net 30",value:30}),e(r,{label:"net 60",value:60}),e(r,{label:"net 90",value:90}),e(r,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"结算币种",prop:""},{default:l(()=>[e(f,{modelValue:o.leftTab.currency,"onUpdate:modelValue":t[8]||(t[8]=a=>o.leftTab.currency=a),"value-key":"",style:{width:"22.4375rem"},placeholder:"请选择币种",clearable:"",filterable:"",onChange:t[9]||(t[9]=()=>{})},{default:l(()=>[(i(),V(x,null,I(Z,a=>e(r,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[o.leftTab.type==="company"?(i(),T(u,{key:0,label:"公司名称"},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.companyName,"onUpdate:modelValue":t[10]||(t[10]=a=>o.leftTab.companyName=a)},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1}),e(n,{span:8},{default:l(()=>[o.leftTab.type==="company"?(i(),T(u,{key:0,label:"法人姓名",prop:""},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.legalPersonName,"onUpdate:modelValue":t[11]||(t[11]=a=>o.leftTab.legalPersonName=a)},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1}),e(n,{span:8},{default:l(()=>[o.leftTab.type==="company"?(i(),T(u,{key:0,label:"公司税号",prop:""},{default:l(()=>[e(b,{clearable:"",modelValue:o.leftTab.taxID,"onUpdate:modelValue":t[12]||(t[12]=a=>o.leftTab.taxID=a)},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1}),e(q,{class:"box-card"},{header:l(()=>[ye]),default:l(()=>[e(v,{gutter:10},{default:l(()=>[e(n,{span:3},{default:l(()=>[e(u,{label:"调查系统"},{default:l(()=>[e(S,{modelValue:o.leftTab.surveySystem,"onUpdate:modelValue":t[13]||(t[13]=a=>o.leftTab.surveySystem=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(u,{label:"B2B"},{default:l(()=>[e(S,{modelValue:o.leftTab.b2bStatus,"onUpdate:modelValue":t[14]||(t[14]=a=>o.leftTab.b2bStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(u,{label:"B2C"},{default:l(()=>[e(S,{modelValue:o.leftTab.b2cStatus,"onUpdate:modelValue":t[15]||(t[15]=a=>o.leftTab.b2cStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(u,{label:"供应商状态"},{default:l(()=>[e(S,{modelValue:o.leftTab.supplierStatus,"onUpdate:modelValue":t[16]||(t[16]=a=>o.leftTab.supplierStatus=a),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:20},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,null,{label:l(()=>[p("div",null,[e(K,{class:"tooltips",placement:"top"},{content:l(()=>[ge]),default:l(()=>[e(J,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1}),_(" 授权区域 ")])]),default:l(()=>[e(W,{modelValue:o.leftTab.relevanceCountryIdList,"onUpdate:modelValue":t[17]||(t[17]=a=>o.leftTab.relevanceCountryIdList=a),filterable:"","filter-method":Q,"filter-placeholder":"输入查询国家",data:P.value,titles:["未选择国家","已选择国家"]},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})]),_:1},8,["modelValue"]),e(ie,{ref_key:"EditRef",ref:w,onQueryData:h},null,512)])}}}),ke=de(Ve,[["__scopeId","data-v-caafcb69"]]);export{ke as default};
