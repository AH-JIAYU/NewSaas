
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as me,aK as _e,r as p,a5 as fe,k as ge,a,p as ye,o as r,b as ve,f as e,w as t,az as B,g as s,H as h,q as be,e as i,j as _,s as N,i as b,S as he,bb as ke,aL as we,E as Ce,N as Ie,aM as je,aN as ze,ba as De,ap as Te,aG as Pe,aH as Ee,R as xe}from"./index-Bfr0BA5v.js";import{_ as Ne}from"./index-B-DzQuOL.js";import{_ as Se}from"./index.vue_vue_type_style_index_0_lang-BqHjkwfA.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-CW-_h2n5.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-B8sTOBSU.js";import{a as H}from"./projectManagement_scheduling-BeZPrCEF.js";import"./index-GLPKdL2-.js";import"./apiLoading-Bfc8HAf5.js";const Le=k=>(Pe("data-v-d26ac75d"),k=k(),Ee(),k),Me=Le(()=>N("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ue={class:"copyId"},Be={class:"id oneLine"},He=me({name:"scheduling",__name:"list",setup(k){const{format:R}=ke(),{pagination:f,getParams:F,onSizeChange:A,onCurrentChange:K}=_e(),q=p(""),w=p(!1),C=p(!0),I=p(),j=p(!1),c=p([]),z=p("default"),D=p(!1),T=p([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"原价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定会员组",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),u=fe({dispatchType:"",projectId:"",projectName:""}),S=p([]);function G(){I.value.showEdit()}function O(n){I.value.showEdit(n)}function Q(n){we.confirm(`确认删除「${n.projectName}」吗？`,"确认信息").then(()=>{H.delete({projectDispatchId:n.projectDispatchId}).then(o=>{y(),Ce.success({message:"删除成功",center:!0})})}).catch(()=>{})}function J(n){A(n).then(()=>y())}function g(n=1){K(n).then(()=>y())}function W(){Object.assign(u,{dispatchType:"",projectId:"",projectName:""}),y()}async function y(){try{w.value=!0;const n={...F(),...u},o=await H.list(n);S.value=o.data.getProjectDispatchInfoList,f.value.total=o.data.total,w.value=!1}catch{}finally{w.value=!1}}return ge(()=>{T.value.forEach(n=>{n.checked&&c.value.push(n.prop)}),y()}),(n,o)=>{const $=a("el-input"),P=a("el-form-item"),V=a("el-option"),X=a("el-select"),L=Ie,E=a("ElButton"),Y=a("ElFormItem"),Z=a("el-form"),ee=$e,te=a("ElDivider"),v=a("el-button"),oe=Se,le=je,ae=ze,ne=a("el-row"),d=a("el-table-column"),M=a("el-text"),se=Ne,U=De,re=a("el-tag"),ie=a("el-empty"),ce=a("el-table"),pe=a("ElPagination"),ue=Te,de=ye("loading");return r(),ve("div",{class:he({"absolute-container":j.value})},[e(ue,null,{default:t(()=>[e(ee,{"show-toggle":!1},{default:t(({fold:l,toggle:x})=>[e(Z,{model:u.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(P,{label:""},{default:t(()=>[e($,{modelValue:u.projectId,"onUpdate:modelValue":o[0]||(o[0]=m=>u.projectId=m),clearable:"",placeholder:"项目ID",onKeydown:o[1]||(o[1]=B(m=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),e(P,{label:""},{default:t(()=>[e($,{modelValue:u.projectName,"onUpdate:modelValue":o[2]||(o[2]=m=>u.projectName=m),clearable:"",placeholder:"项目名称",onKeydown:o[3]||(o[3]=B(m=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),e(P,{label:""},{default:t(()=>[e(X,{modelValue:u.dispatchType,"onUpdate:modelValue":o[4]||(o[4]=m=>u.dispatchType=m),clearable:"",placeholder:"全部类型",onChange:o[5]||(o[5]=m=>g())},{default:t(()=>[e(V,{label:"指定关闭",value:1}),e(V,{label:"指定价格",value:2})]),_:1},8,["modelValue"])]),_:1}),e(Y,null,{default:t(()=>[e(E,{type:"primary",onClick:o[6]||(o[6]=m=>g())},{icon:t(()=>[e(L,{name:"i-ep:search"})]),default:t(()=>[s(" 筛选 ")]),_:1}),e(E,{onClick:W},{icon:t(()=>[Me]),default:t(()=>[s(" 重置 ")]),_:1}),e(E,{disabled:"",link:"",onClick:x},{icon:t(()=>[e(L,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[s(" "+h(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,{gutter:24},{default:t(()=>[e(oe,null,{default:t(()=>[e(v,{type:"primary",size:"default",onClick:G},{default:t(()=>[s(" 新增 ")]),_:1})]),_:1}),e(ae,null,{default:t(()=>[e(v,{size:"default",onClick:o[7]||(o[7]=()=>{})},{default:t(()=>[s(" 导出 ")]),_:1}),e(le,{border:C.value,"onUpdate:border":o[8]||(o[8]=l=>C.value=l),tableAutoHeight:j.value,"onUpdate:tableAutoHeight":o[9]||(o[9]=l=>j.value=l),checkList:c.value,"onUpdate:checkList":o[10]||(o[10]=l=>c.value=l),columns:T.value,"onUpdate:columns":o[11]||(o[11]=l=>T.value=l),"line-height":z.value,"onUpdate:lineHeight":o[12]||(o[12]=l=>z.value=l),stripe:D.value,"onUpdate:stripe":o[13]||(o[13]=l=>D.value=l),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),be((r(),i(ce,{ref_key:"tableSortRef",ref:q,style:{"margin-top":"10px"},"row-key":"id",data:S.value,border:C.value,size:z.value,stripe:D.value},{empty:t(()=>[e(ie,{description:"暂无数据"})]),default:t(()=>[e(d,{align:"center",type:"selection"}),c.value.includes("dispatchType")?(r(),i(d,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"center",label:"类型"},{default:t(({row:l})=>[l.dispatchType===1?(r(),i(M,{key:0,class:"mx-1",type:"primary"},{default:t(()=>[s("指定关闭")]),_:1})):(r(),i(M,{key:1,class:"mx-1",type:"danger"},{default:t(()=>[s("指定价格")]),_:1}))]),_:1})):_("",!0),c.value.includes("projectName")?(r(),i(d,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目"})):_("",!0),c.value.includes("projectId")?(r(),i(d,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"},{default:t(({row:l})=>[N("div",Ue,[N("div",Be,"ID: "+h(l.projectId),1),e(se,{class:"copy",content:l.projectId},null,8,["content"])])]),_:1})):_("",!0),c.value.includes("moneyPrice")?(r(),i(d,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"center",label:"原价"},{default:t(({row:l})=>[e(U),s(h(l.moneyPrice||0),1)]),_:1})):_("",!0),c.value.includes("doMoneyPrice")?(r(),i(d,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"center",label:"指定价格"},{default:t(({row:l})=>[e(U),s(h(l.doMoneyPrice||0),1)]),_:1})):_("",!0),c.value.includes("Supplier")?(r(),i(d,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"center",label:"指定目标"},{default:t(({row:l})=>[l.dataType==2?(r(),i(v,{key:0,type:"primary",size:"small",class:"p-1"},{default:t(()=>[s("会员组")]),_:1})):l.dataType===1?(r(),i(v,{key:1,type:"warning",size:"small",class:"p-1"},{default:t(()=>[s("供应商")]),_:1})):_("",!0)]),_:1})):_("",!0),c.value.includes("createTime")?(r(),i(d,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:t(({row:l})=>[e(re,{effect:"plain",type:"info"},{default:t(()=>[s(h(b(R)(l.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),e(d,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:l})=>[e(v,{type:"primary",plain:"",size:"small",onClick:x=>O(l)},{default:t(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),e(v,{type:"danger",plain:"",size:"small",onClick:x=>Q(l)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[de,w.value]]),e(pe,{"current-page":b(f).page,total:b(f).total,"page-size":b(f).size,"page-sizes":b(f).sizes,layout:b(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:g},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ve,{ref_key:"editRef",ref:I,onFetchData:y},null,512)]),_:1})],2)}}}),Je=xe(He,[["__scopeId","data-v-d26ac75d"]]);export{Je as default};
