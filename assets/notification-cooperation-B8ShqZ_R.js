
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as P,aK as M,r as _,a as l,o as f,b as I,y as r,z as u,i as s,f as i,w as n,g as d,j as q,F as D,t as $,e as j,A as G,p as H,b7 as b,aG as K,aH as O,L as J}from"./index-DrndPOKy.js";const Q=p=>(K("data-v-60dfea69"),p=p(),O(),p),W={class:"news p-4"},X=Q(()=>r("div",{class:"type"},[r("span"),d(" 合作邀约")],-1)),Y={class:"news-content"},Z={class:"content"},ee={class:"time"},te={key:0,class:"footer"},ae={style:{float:"left"}},oe={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"0.8125rem"}},ne=P({name:"PersonalNotificationCooperation",__name:"notification-cooperation",emits:["delSelectId"],setup(p,{expose:w,emit:N}){const C=N,v=M(),e=_({}),c=_(!1),g=_([]),h=_(),V={priceRatio:[{required:!0,message:"请输入价格比例",trigger:"blur"}],beInvitationChargeUserId:[{required:!0,message:"请选择PM",trigger:"change"}]},S=async o=>{await k(),e.value=o,T()},k=async()=>{const o=await H.getTenantStaffList();g.value=o.data},R=o=>{if(o){const t=g.value.find(m=>m.id===e.value.beInvitationChargeUserId);e.value.beInvitationChargeUserName=t.userName}else e.value.beInvitationChargeUserId="",e.value.beInvitationChargeUserName=""},T=async()=>{const o={id:e.value.id,type:1};await b.updateTenantAudit(o),await v.getUnreadTodo()},x=async()=>{const o={id:e.value.id,type:2};C("delSelectId"),await b.updateTenantAudit(o),await v.getUnreadTodo()},B=async()=>{h.value.validate(async o=>{if(o){const t={id:e.value.id,beInvitationChargeUserId:e.value.beInvitationChargeUserId,beInvitationChargeUserName:e.value.beInvitationChargeUserName,priceRatio:e.value.priceRatio,type:3};C("delSelectId"),await b.updateTenantAudit(t),await v.getUnreadTodo()}})};return w({showEdit:S}),(o,t)=>{const m=l("el-button"),E=l("el-input"),y=l("el-form-item"),F=l("el-option"),L=l("el-select"),z=l("ElForm"),U=l("ElButton"),A=l("el-dialog");return f(),I("div",W,[X,r("div",Y,[r("div",Z,"尊贵的"+u(s(e).beInvitedName),1),r("div",ee," 您好，我是"+u(s(e).invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+u(s(e).phoneOrEmail)+"。 ",1),s(e).auditStatus===1?(f(),I("div",te,[i(m,{onClick:x},{default:n(()=>[d("拒绝合作")]),_:1}),i(m,{type:"primary",onClick:t[0]||(t[0]=a=>c.value=!0)},{default:n(()=>[d(" 同意合作 ")]),_:1})])):q("",!0)]),i(A,{modelValue:s(c),"onUpdate:modelValue":t[4]||(t[4]=a=>G(c)?c.value=a:null),title:"添加PM"},{footer:n(()=>[i(U,{size:"large",onClick:t[3]||(t[3]=a=>c.value=!1)},{default:n(()=>[d(" 取消 ")]),_:1}),i(U,{type:"primary",size:"large",onClick:B},{default:n(()=>[d(" 确定 ")]),_:1})]),default:n(()=>[i(z,{ref_key:"FormRef",ref:h,rules:V,model:s(e),"label-width":"7rem"},{default:n(()=>[i(y,{label:"价格比例",prop:"priceRatio"},{default:n(()=>[i(E,{modelValue:s(e).priceRatio,"onUpdate:modelValue":t[1]||(t[1]=a=>s(e).priceRatio=a),clearable:""},{append:n(()=>[d("%")]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"PM",prop:"beInvitationChargeUserId"},{default:n(()=>[i(L,{modelValue:s(e).beInvitationChargeUserId,"onUpdate:modelValue":t[2]||(t[2]=a=>s(e).beInvitationChargeUserId=a),clearable:"",onChange:R},{default:n(()=>[(f(!0),I(D,null,$(s(g),a=>(f(),j(F,{key:a.id,value:a.id,label:a.userName},{default:n(()=>[r("span",ae,u(a.userName),1),r("span",oe,u(a.id),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ie=J(ne,[["__scopeId","data-v-60dfea69"]]);export{ie as default};
