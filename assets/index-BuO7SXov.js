
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as _}from"./group_manage-DXu6e1QO.js";import{u as L}from"./department-BGNQaZ1m.js";import{d as R,r,l as q,n as B,p as C,E as g,b as u,q as U,s as A,j as a,o as p,e as b,g as s,w as d,F as M,v as N,f as T,R as j}from"./index-Bgpn2lkb.js";import"./department-CT2Pe4Lu.js";const J=R({__name:"index",props:["id","row"],setup(w,{expose:y}){const x=L(),f=r(),v=w,V=r([]),t=r(!1),i=r(),e=r({id:v.id,name:"",departmentId:null,remark:"",commissionStatus:null}),h=r({name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],director:[{required:!0,message:"请选择组长",trigger:"change"}]});q(async()=>{try{t.value=!0,B(async()=>{f.value=await x.getDepartment();const{data:n}=await C.getTenantStaffList();V.value=n}),e.value.id!==""&&k(),t.value=!1}catch{}finally{t.value=!1}});function k(){const n=JSON.parse(v.row);e.value=n}return y({submit(){return new Promise(n=>{delete e.value.count,e.value.id===""?i.value&&i.value.validate(l=>{if(l)try{delete e.value.id,t.value=!0,_.create(e.value).then(()=>{t.value=!1,g.success({message:"新增成功",center:!0}),n()})}catch{}finally{t.value=!1}}):i.value&&i.value.validate(l=>{if(l)try{t.value=!0,_.edit(e.value).then(()=>{t.value=!1,g.success({message:"编辑成功",center:!0}),n()})}catch{}finally{t.value=!1}})})}}),(n,l)=>{const m=u("el-input"),c=u("el-form-item"),S=u("el-option"),D=u("el-select"),I=u("el-switch"),E=u("ElForm"),F=U("loading");return A((p(),b("div",null,[s(E,{ref_key:"formRef",ref:i,model:a(e),rules:a(h),"label-width":"130px"},{default:d(()=>[s(c,{label:"组名称",prop:"name"},{default:d(()=>[s(m,{modelValue:a(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).name=o),placeholder:"请输入组名称",clearable:"",disabled:!!a(e).id},null,8,["modelValue","disabled"])]),_:1}),s(c,{label:"所属部门",prop:"departmentId"},{default:d(()=>[s(D,{modelValue:a(e).departmentId,"onUpdate:modelValue":l[1]||(l[1]=o=>a(e).departmentId=o),"value-key":"",placeholder:"请选择所属部门",clearable:"",disabled:!!a(e).id,filterable:""},{default:d(()=>[(p(!0),b(M,null,N(a(f),o=>(p(),T(S,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s(c,{label:"组提成",prop:"commissionStatus"},{default:d(()=>[s(I,{modelValue:a(e).commissionStatus,"onUpdate:modelValue":l[2]||(l[2]=o=>a(e).commissionStatus=o),"active-text":"启用","inactive-text":"禁用","inline-prompt":"","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[F,a(t)]])}}}),H=j(J,[["__scopeId","data-v-8b13454b"]]);export{H as default};
