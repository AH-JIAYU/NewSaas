
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as Se,d as Ce,aK as xe,r as g,a5 as O,k as we,a as m,p as Ne,o as l,b as v,f as o,w as t,i as a,q as N,az as R,F as Q,t as Z,e as n,g as s,H as _,I as V,j as c,s as f,S as Ve,E as Be,N as je,aM as Ee,aN as Le,ba as Te,ap as De,aG as Fe,aH as $e,aq as L,R as Pe}from"./index-BGn-IkNo.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-Cp8UMUek.js";import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-Db_kon2i.js";import{u as Ue}from"./user_customer-Dg108Aa8.js";import{e as Re}from"./empty-bAzhJQI7.js";import{u as He}from"./index-wyal79b3.js";import"./user_customer-DtCYwskH.js";import"./clipboard-CkahaWvI.js";const Ae={list:C=>Se.post("callback/getMemberSurveyRecord",C)},J=C=>(Fe("data-v-396e5d34"),C=C(),$e(),C),Ke=J(()=>f("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),qe={key:0,class:"hoverSvg"},Ge={class:"fineBom"},Oe={class:"c-fx"},Qe={key:0,class:"hoverSvg"},Ze={class:"fineBom"},Je={class:"c-fx"},We={key:0,class:"hoverSvg"},Xe={class:"fineBom"},Ye={class:"c-fx"},et={key:0,class:"hoverSvg"},tt={class:"fineBom"},lt={class:"c-fx"},ot={key:0,class:"hoverSvg"},at={class:"fineBom"},nt={class:"c-fx"},rt=J(()=>f("span",{class:"headerIcon"},[f("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[f("g",{id:"Time (æ¶é´)"},[f("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),f("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),s(" 调查时间 ")],-1)),st={key:0},ct=Ce({name:"investigation_records",__name:"list",setup(C){const{toClipboard:W}=He(),X=Ue(),{getParams:Y,pagination:x,onSizeChange:ee,onCurrentChange:te}=xe(),T=g(!1),H=g([]),le=g(""),p=g([]),D=g(!0),F=g(!1),$=g("default"),P=g(!1),oe=g(),z=g([{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortable:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortable:!0,checked:!0},{prop:"ipBelong",label:"国家/IP",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),d=O({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),M=O({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function ae(){d.pageNo=1,B()}function ne(y){ee(y).then(()=>B())}function h(y=1){te(y).then(()=>B())}async function B(){try{T.value=!0;const y={...Y(),...d},{data:r}=await Ae.list(y);H.value=r.memberSurveyRecordInfoList,oe.value=r.currencyType,x.value.total=r.total,T.value=!1}catch{}finally{T.value=!1}}function re(y){le.value=y}const j=y=>{W(y),Be({type:"success",message:"复制成功"})};function se(){Object.assign(d,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),B()}return we(async()=>{M.customerList=await X.getCustomerList(),z.value.forEach(y=>{y.checked&&p.value.push(y.prop)}),B()}),(y,r)=>{const E=m("el-input"),I=m("el-form-item"),A=m("el-option"),K=m("el-select"),S=je,U=m("ElButton"),ce=m("ElFormItem"),ie=m("ElForm"),ue=Me,de=m("ElDivider"),pe=ze,me=m("el-button"),fe=Ee,ye=Le,_e=m("el-row"),k=m("el-table-column"),b=m("el-text"),u=m("el-tag"),q=Te,G=m("ElTableColumn"),be=m("el-empty"),ke=m("el-table"),ge=m("ElPagination"),ve=De,he=Ne("loading");return l(),v("div",{class:Ve({"absolute-container":a(P)})},[o(ve,null,{default:t(()=>[o(ue,{"show-toggle":!1},{default:t(({fold:e,toggle:w})=>[o(ie,{model:a(d),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[o(I,{label:""},{default:t(()=>[o(E,{modelValue:a(d).memberId,"onUpdate:modelValue":r[0]||(r[0]=i=>a(d).memberId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),N(o(I,{label:""},{default:t(()=>[o(E,{modelValue:a(d).randomIdentityId,"onUpdate:modelValue":r[1]||(r[1]=i=>a(d).randomIdentityId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份",onKeydown:r[2]||(r[2]=R(i=>h(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[L,!e]]),o(I,{label:""},{default:t(()=>[o(E,{modelValue:a(d).projectId,"onUpdate:modelValue":r[3]||(r[3]=i=>a(d).projectId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:r[4]||(r[4]=R(i=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),N(o(I,{label:""},{default:t(()=>[o(E,{modelValue:a(d).projectName,"onUpdate:modelValue":r[5]||(r[5]=i=>a(d).projectName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:r[6]||(r[6]=R(i=>h(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[L,!e]]),N(o(I,{label:""},{default:t(()=>[o(K,{modelValue:a(d).customerId,"onUpdate:modelValue":r[7]||(r[7]=i=>a(d).customerId=i),clearable:"",filterable:"",placeholder:"客户简称",onChange:r[8]||(r[8]=i=>h())},{default:t(()=>[(l(!0),v(Q,null,Z(a(M).customerList,i=>(l(),n(A,{key:i.tenantCustomerId,value:i.tenantCustomerId,label:i.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[L,!e]]),N(o(I,{label:""},{default:t(()=>[o(E,{modelValue:a(d).ip,"onUpdate:modelValue":r[9]||(r[9]=i=>a(d).ip=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[L,!e]]),N(o(I,{label:""},{default:t(()=>[o(K,{modelValue:a(d).surveyStatus,"onUpdate:modelValue":r[10]||(r[10]=i=>a(d).surveyStatus=i),clearable:"",filterable:"",placeholder:"调查状态",onChange:r[11]||(r[11]=i=>h())},{default:t(()=>[(l(!0),v(Q,null,Z(a(M).surveyStatusList,(i,Ie)=>(l(),n(A,{label:i,value:Ie+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[L,!e]]),o(ce,null,{default:t(()=>[o(U,{type:"primary",onClick:r[12]||(r[12]=i=>h())},{icon:t(()=>[o(S,{name:"i-ep:search"})]),default:t(()=>[s(" 筛选 ")]),_:1}),o(U,{onClick:se},{icon:t(()=>[Ke]),default:t(()=>[s(" 重置 ")]),_:1}),o(U,{link:"",onClick:w},{icon:t(()=>[o(S,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[s(" "+_(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(de,{"border-style":"dashed"}),o(_e,null,{default:t(()=>[o(pe),o(ye,null,{default:t(()=>[o(me,{size:"default"},{default:t(()=>[s(" 导出 ")]),_:1}),o(fe,{border:a(D),"onUpdate:border":r[13]||(r[13]=e=>V(D)?D.value=e:null),tableAutoHeight:a(P),"onUpdate:tableAutoHeight":r[14]||(r[14]=e=>V(P)?P.value=e:null),checkList:a(p),"onUpdate:checkList":r[15]||(r[15]=e=>V(p)?p.value=e:null),columns:a(z),"onUpdate:columns":r[16]||(r[16]=e=>V(z)?z.value=e:null),"line-height":a($),"onUpdate:lineHeight":r[17]||(r[17]=e=>V($)?$.value=e:null),stripe:a(F),"onUpdate:stripe":r[18]||(r[18]=e=>V(F)?F.value=e:null),style:{"margin-left":"12px"},onQueryData:ae},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),N((l(),n(ke,{border:a(D),data:a(H),size:a($),stripe:a(F),onSelectionChange:re},{empty:t(()=>[o(be,{image:a(Re),"image-size":300},null,8,["image"])]),default:t(()=>[o(k,{align:"center",type:"selection"}),a(p).includes("projectName")?(l(),n(k,{key:0,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:t(({row:e})=>[o(b,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[s(_(e.projectName?e.projectName:"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(p).includes("projectId")?(l(),n(k,{key:1,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"200",label:"项目ID"},{default:t(({row:e})=>[e.projectId?(l(),v("div",qe,[f("p",Ge,"ID："+_(e.projectId),1),f("span",Oe,[o(S,{onClick:w=>j(e.projectId),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0),a(p).includes("memberId")?(l(),n(k,{key:2,align:"center",prop:"memberId","show-overflow-tooltip":"",width:"200",label:"会员ID"},{default:t(({row:e})=>[e.memberId?(l(),v("div",Qe,[f("p",Ze,"ID："+_(e.memberId),1),f("span",Je,[o(S,{onClick:w=>j(e.memberId),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0),a(p).includes("randomIdentityId")?(l(),n(k,{key:3,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:t(({row:e})=>[e.randomIdentityId?(l(),v("div",We,[f("p",Xe,"ID："+_(e.randomIdentityId),1),f("span",Ye,[o(S,{onClick:w=>j(e.randomIdentityId),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0),a(p).includes("customerShortName")?(l(),n(k,{key:4,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"},{default:t(({row:e})=>[o(b,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[s(_(e.customerShortName?e.customerShortName:"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(p).includes("memberName")?(l(),n(k,{key:5,width:"150",align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"},{default:t(({row:e})=>[e.memberName?(l(),v("div",et,[o(b,{style:{"font-weight":"700",color:"#333333"}},{default:t(()=>[s(_(e.memberName.split("/")[0]),1)]),_:2},1024),s("    "),f("p",tt,"ID："+_(e.memberName.split("/")[1]),1),f("span",lt,[o(S,{onClick:w=>j(e.memberName.split("/")[1]),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0),a(p).includes("allocationType")?(l(),n(k,{key:6,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:t(({row:e})=>[e.allocationType===1?(l(),n(u,{key:0,effect:"plain",type:"info"},{default:t(()=>[s(" 未分配 ")]),_:1})):c("",!0),e.allocationType===2?(l(),n(u,{key:1,style:{"background-color":"#FFAC54",color:"#fff"}},{default:t(()=>[s(" 供应商 ")]),_:1})):c("",!0),e.allocationType===3?(l(),n(u,{key:2,style:{"background-color":"#05C9BE",color:"#fff"}},{default:t(()=>[s(" 会员组 ")]),_:1})):c("",!0)]),_:1})):c("",!0),a(p).includes("doMoneyPrice")?(l(),n(k,{key:7,width:"80",align:"center",prop:"h","show-overflow-tooltip":"",label:"原价"},{default:t(({row:e})=>[o(b,null,{default:t(()=>[o(q)]),_:1}),o(b,{style:{color:"#333333","font-weight":"700"}},{default:t(()=>[s(_(e.doMoneyPrice||0),1)]),_:2},1024)]),_:1})):c("",!0),a(p).includes("memberPrice")?(l(),n(k,{key:8,width:"80",align:"center",prop:"h","show-overflow-tooltip":"",label:"会员价"},{default:t(({row:e})=>[o(b,null,{default:t(()=>[o(q)]),_:1}),o(b,{style:{color:"#333333","font-weight":"700"}},{default:t(()=>[s(_(e.memberPrice||0),1)]),_:2},1024)]),_:1})):c("",!0),a(p).includes("ipBelong")?(l(),n(k,{key:9,align:"center",width:"130",prop:"ipBelong","show-overflow-tooltip":"",label:"国家/IP"},{default:t(({row:e})=>[e.memberName?(l(),v("div",ot,[o(u,{style:{"font-weight":"700"}},{default:t(()=>[s(_(e.ipBelong.split("/")[1]),1)]),_:2},1024),s("    "),f("p",at,_(e.ipBelong.split("/")[0]),1),f("span",nt,[o(S,{onClick:w=>j(e.ipBelong.split("/")[0]),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0),a(p).includes("surveyTime")?(l(),n(k,{key:10,align:"center","show-overflow-tooltip":"",label:"调查时间"},{header:t(()=>[rt]),default:t(({row:e})=>[o(u,{effect:"plain",type:"info"},{default:t(()=>[s(_(e.surveyTime?e.surveyTime+"min":0)+"/ "+_(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):c("",!0),a(p).includes("surveyStatus")?(l(),n(G,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"调查状态"},{default:t(({row:e})=>[e.surveyStatus===3?(l(),n(u,{key:0,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[s("配额满")]),_:1})):c("",!0),e.surveyStatus===1?(l(),n(u,{key:1,effect:"dark",style:{"background-color":"#379AFF",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[s("完成")]),_:1})):c("",!0),e.surveyStatus===2?(l(),n(u,{key:2,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[s("被甄别")]),_:1})):c("",!0),e.surveyStatus===4?(l(),n(u,{key:3,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[s("安全终止")]),_:1})):c("",!0),e.surveyStatus===5?(l(),n(u,{key:4,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:t(()=>[s("未完成")]),_:1})):c("",!0)]),_:1})):c("",!0),a(p).includes("viceStatus")?(l(),n(G,{key:12,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:t(({row:e})=>[e.viceStatus?(l(),v("div",st,[e.viceStatus===1?(l(),n(u,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[s("待审")]),_:1})):c("",!0),e.viceStatus===2?(l(),n(u,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[s("免审")]),_:1})):c("",!0),e.viceStatus===3?(l(),n(u,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[s("过IR")]),_:1})):c("",!0),e.viceStatus===4?(l(),n(u,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[s("时间过短")]),_:1})):c("",!0),e.viceStatus===5?(l(),n(u,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:t(()=>[s("超时完成")]),_:1})):c("",!0),e.viceStatus===6?(l(),n(u,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:t(()=>[s("超量完成")]),_:1})):c("",!0),e.viceStatus===7?(l(),n(u,{key:6,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[s("审核成功")]),_:1})):c("",!0),e.viceStatus===8?(l(),n(u,{key:7,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[s("审核失败")]),_:1})):c("",!0),e.viceStatus===9?(l(),n(u,{key:8,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[s("数据冻结")]),_:1})):c("",!0),e.viceStatus===10?(l(),n(u,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:t(()=>[s("时间段过载")]),_:1})):c("",!0),e.viceStatus===11?(l(),n(u,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:t(()=>[s("IP不一致")]),_:1})):c("",!0),e.viceStatus===12?(l(),n(u,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:t(()=>[s("ID重复参与")]),_:1})):c("",!0),e.viceStatus===13?(l(),n(u,{key:12,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[s("和解")]),_:1})):c("",!0)])):(l(),n(b,{key:1},{default:t(()=>[s("-")]),_:1}))]),_:1})):c("",!0)]),_:1},8,["border","data","size","stripe"])),[[he,a(T)]]),o(ge,{"current-page":a(x).page,total:a(x).total,"page-size":a(x).size,"page-sizes":a(x).sizes,layout:a(x).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),bt=Pe(ct,[["__scopeId","data-v-396e5d34"]]);export{bt as default};
