
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{g as v}from"./group_manage-BicDJ1x8.js";import{u as L}from"./department-Dhzrv43p.js";import{d as R,r,k as q,n as B,l as C,E as _,a as i,p as U,q as A,i as t,o as c,b as g,f as s,w as d,F as M,t as N,e as T,R as J}from"./index-AMUerYFu.js";import"./department-BpPmetXR.js";const O=R({__name:"index",props:["id","row"],setup(b,{expose:w}){const x=L(),p=r(),f=b,V=r([]),o=r(!1),u=r(),e=r({id:f.id,name:"",departmentId:null,remark:"",commissionStatus:null}),k=r({name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],director:[{required:!0,message:"请选择组长",trigger:"change"}]});q(async()=>{o.value=!0,B(async()=>{p.value=await x.getDepartment();const{data:n}=await C.getTenantStaffList();V.value=n}),e.value.id!==""&&S(),o.value=!1});function S(){const n=JSON.parse(f.row);e.value=n}return w({submit(){try{return new Promise(n=>{delete e.value.count,e.value.id===""?u.value&&u.value.validate(a=>{a&&(delete e.value.id,o.value=!0,v.create(e.value).then(()=>{o.value=!1,_.success({message:"新增成功",center:!0}),n()}))}):u.value&&u.value.validate(a=>{a&&(o.value=!0,v.edit(e.value).then(()=>{o.value=!1,_.success({message:"编辑成功",center:!0}),n()}))})})}catch{}finally{o.value=!1}}}),(n,a)=>{const y=i("el-input"),m=i("el-form-item"),h=i("el-option"),D=i("el-select"),I=i("el-switch"),E=i("ElForm"),F=U("loading");return A((c(),g("div",null,[s(E,{ref_key:"formRef",ref:u,model:t(e),rules:t(k),"label-width":"130px","label-suffix":"："},{default:d(()=>[s(m,{label:"组名称",prop:"name"},{default:d(()=>[s(y,{modelValue:t(e).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(e).name=l),placeholder:"请输入组名称",clearable:"",disabled:!!t(e).id},null,8,["modelValue","disabled"])]),_:1}),s(m,{label:"所属部门",prop:"departmentId"},{default:d(()=>[s(D,{modelValue:t(e).departmentId,"onUpdate:modelValue":a[1]||(a[1]=l=>t(e).departmentId=l),"value-key":"",placeholder:"请选择所属部门",clearable:"",disabled:!!t(e).id,filterable:""},{default:d(()=>[(c(!0),g(M,null,N(t(p),l=>(c(),T(h,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s(m,{label:"组提成",prop:"commissionStatus"},{default:d(()=>[s(I,{modelValue:t(e).commissionStatus,"onUpdate:modelValue":a[2]||(a[2]=l=>t(e).commissionStatus=l),"active-text":"启用","inactive-text":"禁用","inline-prompt":"","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[F,t(o)]])}}}),H=J(O,[["__scopeId","data-v-1c63e8fc"]]);export{H as default};
