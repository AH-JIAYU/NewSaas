
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as V}from"./apiLoading-BICZ0jcq.js";import{x as r,af as I,r as d,d as D,a5 as E,a as p,o as M,e as U,w as a,f as n,g as c,i as o,I as j,am as B,E as x,R as O}from"./index-Cikis37a.js";const _={list:e=>r.post("tenantSupplierLevel/getTenantSupplierLevelList  ",e),create:e=>r.post("tenantSupplierLevel/addTenantSupplierLevel",e),edit:e=>r.post("tenantSupplierLevel/updateTenantSupplierLevel",e),delete:e=>r.post("tenantSupplierLevel/deleteTenantSupplierLevel",e),getLevelNameList:e=>r.post("tenantSupplierLevel/getTenantSupplierLevelName",e)},$=I("ConfigurationSupplierLevel",()=>{const e=d(null);return{LevelNameList:e,getLevelNameList:async()=>{if(!e.value){const{data:m}=await _.getLevelNameList({});e.value=m.getTenantSupplierLevelNameInfoList}return e.value}}}),h=$,z=D({__name:"index",emits:["queryData"],setup(e,{expose:L,emit:m}){const y=h(),T=m,i=d(!1),v=d(""),t=d(),f=d(),C=E({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function R(s){s?(v.value="编辑",t.value=B(s)):(v.value="新增",t.value={}),i.value=!0}function g(){f.value.resetFields(),i.value=!1}function w(){f.value.validate(async s=>{if(s){if(t.value.tenantSupplierLevelId){const{status:l}=await V(_.edit(t.value));l===1&&x.success({message:"编辑成功",center:!0})}else{const{status:l}=await V(_.create(t.value));l===1&&x.success({message:"新增成功",center:!0})}y.LevelNameList=null,T("queryData"),g()}})}return L({showEdit:R}),(s,l)=>{const S=p("el-input"),b=p("el-form-item"),k=p("el-form"),N=p("el-button"),q=p("el-dialog");return M(),U(q,{modelValue:o(i),"onUpdate:modelValue":l[2]||(l[2]=u=>j(i)?i.value=u:null),title:o(v),width:"600"},{footer:a(()=>[n(N,{onClick:g},{default:a(()=>[c(" 取消 ")]),_:1}),n(N,{type:"primary",onClick:w},{default:a(()=>[c(" 确定 ")]),_:1})]),default:a(()=>[n(k,{ref_key:"formRef",ref:f,model:o(t),rules:o(C),"label-width":"5.1875rem",inline:!1},{default:a(()=>[n(b,{label:"等级名称",prop:"levelName"},{default:a(()=>[n(S,{modelValue:o(t).levelName,"onUpdate:modelValue":l[0]||(l[0]=u=>o(t).levelName=u),maxlength:"100"},null,8,["modelValue"])]),_:1}),n(b,{label:"价格比例",prop:"additionRatio"},{default:a(()=>[n(S,{modelValue:o(t).additionRatio,"onUpdate:modelValue":l[1]||(l[1]=u=>o(t).additionRatio=u),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;",type:"number"},{append:a(()=>[c(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),F=O(z,[["__scopeId","data-v-f2e22230"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{_ as a,F as e,G as i,h as u};
