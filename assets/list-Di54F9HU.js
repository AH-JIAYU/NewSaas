
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,aM as ce,r as n,a3 as ue,n as de,a as c,q as me,o as s,b as fe,f as o,w as t,g as r,s as _e,e as i,i as _,aL as he,y as d,j as f,z as m,N as T,be as ge,aN as ye,E as ve,b8 as be,b9 as ke,bd as Ie,ap as Ce,L as Se}from"./index-ynKxKXgj.js";import{_ as Ne}from"./index-DRHAi7un.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-BQjpFRWF.js";import{_ as we}from"./index-CPb5I-xH.js";import{_ as Le}from"./index.vue_vue_type_script_setup_true_lang-Z0X2I3VY.js";import{a as $}from"./projectManagement_scheduling-dig7ujfY.js";import"./index-w2H3Wy_u.js";import"./index.vue_vue_type_script_setup_true_lang-BDk7ptXt.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-DXBFInfp.js";const Te={class:"fontC-System"},ze={class:"tableBig oneLine"},xe={class:"copyId tableSmall projectId"},De={class:"id oneLine"},Pe={class:"fontC-System"},Ee={class:"fontC-System"},Me={class:"specifyTheTarget"},$e={class:"tableBig"},Be={class:"id tableSmall",style:{"font-size":"14px"}},Ge=pe({name:"scheduling",__name:"list",setup(Re){const{format:B}=ge(),{pagination:h,getParams:G,onSizeChange:R,onCurrentChange:H}=ce(),U=n(""),v=n(!1),k=n(!1),I=n(),C=n(!1),p=n([]),z=n(),F=n("formSearch-scheduling"),S=n("default"),N=n(!1),j=n([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"项目价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定部门",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),w=ue({dispatchType:"",projectId:"",projectName:""}),x=n([]);function V(){I.value.showEdit()}function A(a){I.value.showEdit(a)}function O(a){ye.confirm(`确认删除「${a.projectName}」吗？`,"确认信息").then(()=>{$.delete({projectDispatchId:a.projectDispatchId}).then(l=>{g(),ve.success({message:"删除成功",center:!0})})}).catch(()=>{})}function q(a){R(a).then(()=>g())}const b=n();function Q(a){a?b.value=a.projectId:b.value=""}function L(a=1){H(a).then(()=>g())}function J(){Object.assign(w,{dispatchType:"",projectId:"",projectName:""}),g()}async function g(){try{v.value=!0;const a={...G(),...w},l=await $.list(a);x.value=l.data.getProjectDispatchInfoList,h.value.total=l.data.total,v.value=!1}catch{}finally{v.value=!1}}de(()=>{j.value.forEach(a=>{a.checked&&p.value.push(a.prop)}),g(),z.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:"全部类型",option:"dispatchType",optionLabel:"label",optionValue:"value"}]});const K={dispatchType:()=>[{label:"指定关闭",value:1},{label:"指定价格",value:2}]};return(a,l)=>{const W=we,X=c("ElDivider"),y=c("el-button"),Y=je,Z=be,ee=ke,te=c("el-row"),u=c("el-table-column"),D=c("el-text"),P=c("el-tooltip"),E=Ne,M=Ie,oe=c("el-tag"),ae=c("el-empty"),le=c("el-table"),ne=c("ElPagination"),se=Ce,re=me("loading");return s(),fe("div",{class:T({"absolute-container":C.value})},[o(se,null,{default:t(()=>[o(W,{formSearchList:z.value,formSearchName:F.value,onCurrentChange:L,onOnReset:J,model:w,formOption:K},null,8,["formSearchList","formSearchName","model"]),o(X,{"border-style":"dashed"}),o(te,{gutter:24},{default:t(()=>[o(Y,null,{default:t(()=>[o(y,{type:"primary",size:"default",onClick:V},{default:t(()=>[r(" 新增 ")]),_:1})]),_:1}),o(ee,null,{default:t(()=>[o(y,{size:"default",onClick:l[0]||(l[0]=()=>{})},{default:t(()=>[r(" 导出 ")]),_:1}),o(Z,{border:k.value,"onUpdate:border":l[1]||(l[1]=e=>k.value=e),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":l[2]||(l[2]=e=>C.value=e),checkList:p.value,"onUpdate:checkList":l[3]||(l[3]=e=>p.value=e),columns:j.value,"onUpdate:columns":l[4]||(l[4]=e=>j.value=e),"line-height":S.value,"onUpdate:lineHeight":l[5]||(l[5]=e=>S.value=e),stripe:N.value,"onUpdate:stripe":l[6]||(l[6]=e=>N.value=e),style:{"margin-left":"12px"},onQueryData:L},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),_e((s(),i(le,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:k.value,size:S.value,stripe:N.value,"highlight-current-row":"",onCurrentChange:Q},{empty:t(()=>[o(ae,{image:_(he),"image-size":300},null,8,["image"])]),default:t(()=>[o(u,{align:"left",type:"selection"}),p.value.includes("dispatchType")?(s(),i(u,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:"类型"},{default:t(({row:e})=>[d("div",Te,[e.dispatchType===1?(s(),i(D,{key:0,type:"primary"},{default:t(()=>[r("指定关闭")]),_:1})):(s(),i(D,{key:1,type:"danger"},{default:t(()=>[r("指定价格")]),_:1}))])]),_:1})):f("",!0),p.value.includes("projectName")?(s(),i(u,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目"},{default:t(({row:e})=>[d("div",ze,m(e.projectName),1)]),_:1})):f("",!0),p.value.includes("projectId")?(s(),i(u,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:t(({row:e})=>[d("div",xe,[d("div",De,[o(P,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[r(m(e.projectId),1)]),_:2},1032,["content"])]),o(E,{content:e.projectId,class:T({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("moneyPrice")?(s(),i(u,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:"项目价",width:"96"},{default:t(({row:e})=>[d("div",Pe,[o(M),r(m(e.moneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("doMoneyPrice")?(s(),i(u,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:"指定价格",width:"96"},{default:t(({row:e})=>[d("div",Ee,[o(M),r(m(e.doMoneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("Supplier")?(s(),i(u,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:"指定目标",width:"400"},{default:t(({row:e})=>[d("div",Me,[e.dataType==2?(s(),i(y,{key:0,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"部门"),1)]),_:2},1024)):e.dataType===1?(s(),i(y,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):f("",!0),d("b",$e,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),d("span",Be,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),o(E,{content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId,class:T({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("createTime")?(s(),i(u,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:t(({row:e})=>[o(P,{content:e.createTime,placement:"top"},{default:t(()=>[o(oe,{effect:"plain",type:"info"},{default:t(()=>[r(m(_(B)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):f("",!0),o(u,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[o(y,{type:"primary",plain:"",size:"small",onClick:ie=>A(e)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),o(y,{type:"danger",plain:"",size:"small",onClick:ie=>O(e)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[re,v.value]]),o(ne,{"current-page":_(h).page,total:_(h).total,"page-size":_(h).size,"page-sizes":_(h).sizes,layout:_(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:L},null,8,["current-page","total","page-size","page-sizes","layout"]),o(Le,{ref_key:"editRef",ref:I,onFetchData:g},null,512)]),_:1})],2)}}}),We=Se(Ge,[["__scopeId","data-v-12a836f1"]]);export{We as default};
