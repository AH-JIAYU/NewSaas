
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as g}from"./apiLoading-Dc9xIhH7.js";import{u as S,a as V}from"./survey_vipLevel-CfLso4FH.js";import{d as D,r as f,Z as E,a as u,o as T,e as U,w as t,f as s,g as _,i as a,A as B,ap as y,E as x,L as F}from"./index-CYKxYhEx.js";const M=D({__name:"index",emits:["queryData"],setup(h,{expose:L,emit:N}){const R=S(),k=N,i=f(!1),c=f(""),e=f(),p=f(),C=E({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function q(o,l){if(!o)c.value="新增",e.value={};else if(c.value="编辑",o.memberId){const r=y(o),{additionRatio:m,memberLevelId:v,memberLevelName:d}=r;e.value={additionRatio:m,memberLevelId:v,levelName:d}}else e.value=y(o);i.value=!0}function b(){p.value.resetFields(),i.value=!1}function w(){p.value.validate(async o=>{if(o){if(e.value.memberLevelId){const{status:l}=await g(V.edit(e.value));l===1&&x.success({message:"编辑成功",center:!0})}else{const{status:l}=await g(V.create(e.value));l===1&&x.success({message:"新增成功",center:!0})}R.LevelNameList=null,k("queryData"),b()}})}return L({showEdit:q}),(o,l)=>{const r=u("el-input"),m=u("el-form-item"),v=u("el-form"),d=u("el-button"),I=u("el-dialog");return T(),U(I,{modelValue:a(i),"onUpdate:modelValue":l[2]||(l[2]=n=>B(i)?i.value=n:null),title:a(c),width:"600"},{footer:t(()=>[s(d,{onClick:b},{default:t(()=>[_(" 取消 ")]),_:1}),s(d,{type:"primary",onClick:w},{default:t(()=>[_(" 确定 ")]),_:1})]),default:t(()=>[s(v,{ref_key:"formRef",ref:p,model:a(e),rules:a(C),"label-width":"7rem",inline:!1},{default:t(()=>[s(m,{label:"等级名称",prop:"levelName"},{default:t(()=>[s(r,{modelValue:a(e).levelName,"onUpdate:modelValue":l[0]||(l[0]=n=>a(e).levelName=n),maxlength:"100"},null,8,["modelValue"])]),_:1}),s(m,{label:"价格比例",prop:"additionRatio"},{default:t(()=>[s(r,{modelValue:a(e).additionRatio,"onUpdate:modelValue":l[1]||(l[1]=n=>a(e).additionRatio=n),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;",type:"number"},{append:t(()=>[_(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),z=F(M,[["__scopeId","data-v-20157d1e"]]);export{z as default};
