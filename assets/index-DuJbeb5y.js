
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as K}from"./group_team-HFpWA8pQ.js";import{a as M}from"./department-CaIjgMtb.js";import{u as P}from"./department-DW9JldVy.js";import{u as U}from"./configuration_manager-CNoUCYsk.js";import{d as A,aN as G,r as i,k as Q,a as p,p as W,q as X,o as a,b as f,f as o,w as e,s as I,g as s,F as v,t as b,e as n,H as u,j as g,aJ as Y,aK as Z,R as ee}from"./index-D7ktWcYH.js";const B=w=>(Y("data-v-59abb0c5"),w=w(),Z(),w),te=B(()=>I("div",{class:"card-header"},[I("span",null,"组长")],-1)),ae=B(()=>I("div",{class:"card-header"},[I("span",null,"组员")],-1)),le={style:{flex:"auto"}},oe=A({name:"Edit",__name:"index",emits:["success"],setup(w,{expose:T,emit:ne}){G();const R=i(),j=P(),_=i(),F=U(),h=i([]),L=i(""),J=i(),O=i(!1),k=i(!1),N=i([]),V=i([]),x=i(),C=i({groupId:null,userInfo:[],menuId:[]});async function $(E){L.value="详情";const m=JSON.parse(E);C.value.groupId=m.id;const d={page:1,limit:10,groupId:m.id},l=await K.list(d);x.value=l.data.departmentId;const S=await M.createEvery();_.value=S.data.result,_.value=_.value.filter(c=>c.id===x.value),l.data.data.forEach(c=>{var y,D;c.isLeader?V.value.push(c):((D=(y=C.value)==null?void 0:y.menuId)==null||D.push(c.memberId),N.value.push(c))}),k.value=!0}Q(async()=>{_.value=await j.getDepartment(),h.value=await F.getStaff(),J.value=new Date});const q=()=>{Object.assign(C.value,{groupId:null,userInfo:[],menuId:[]}),V.value=[],N.value=[]};return T({showEdit:$}),(E,m)=>{const d=p("el-table-column"),l=p("el-text"),S=p("el-empty"),c=p("el-table"),y=p("el-card"),D=p("el-button"),z=p("el-drawer"),H=W("loading");return X((a(),f("div",null,[o(z,{modelValue:k.value,"onUpdate:modelValue":m[1]||(m[1]=t=>k.value=t),title:L.value,onClose:q,size:"60%"},{footer:e(()=>[I("div",le,[o(D,{type:"",onClick:m[0]||(m[0]=t=>k.value=!1)},{default:e(()=>[s(" 取消 ")]),_:1})])]),default:e(()=>[o(y,{class:"box-card"},{header:e(()=>[te]),default:e(()=>[o(c,{data:V.value,border:""},{empty:e(()=>[o(S,{description:"暂无数据"})]),default:e(()=>[o(d,{align:"center",type:"index",label:"序号",width:"80"}),o(d,{align:"center","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"}),o(d,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"},{default:e(({row:t})=>[t.memberId?(a(!0),f(v,{key:0},b(h.value,r=>(a(),n(l,null,{default:e(()=>[t.memberId===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256)):(a(),n(l,{key:1},{default:e(()=>[s(u(t.name),1)]),_:2},1024))]),_:1}),o(d,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"},{default:e(({row:t})=>[t.memberId?(a(!0),f(v,{key:0},b(h.value,r=>(a(),n(l,null,{default:e(()=>[t.memberId===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256)):(a(),n(l,{key:1},{default:e(()=>[s(u(t.name),1)]),_:2},1024))]),_:1}),o(d,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:e(({row:t})=>[(a(!0),f(v,null,b(_.value,r=>(a(),n(l,null,{default:e(()=>[x.value===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256))]),_:1}),o(d,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:e(({row:t})=>[s(u(t.commission?t.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1}),o(y,{class:"box-card"},{header:e(()=>[ae]),default:e(()=>[o(c,{ref_key:"tableRef",ref:R,data:N.value,border:""},{empty:e(()=>[o(S,{description:"暂无数据"})]),default:e(()=>[o(d,{align:"center",type:"index",label:"序号",width:"80"}),o(d,{align:"center","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"},{default:e(({row:t})=>[t.memberId?(a(),n(l,{key:0},{default:e(()=>[s(u(t.memberId),1)]),_:2},1024)):(a(),n(l,{key:1},{default:e(()=>[s(u(t.id),1)]),_:2},1024))]),_:1}),o(d,{align:"center","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:e(({row:t})=>[t.memberId?(a(!0),f(v,{key:0},b(h.value,r=>(a(),n(l,null,{default:e(()=>[t.memberId===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256)):(a(),n(l,{key:1},{default:e(()=>[s(u(t.userName?t.userName:"-"),1)]),_:2},1024))]),_:1}),o(d,{align:"center","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:e(({row:t})=>[t.memberId?(a(!0),f(v,{key:0},b(h.value,r=>(a(),n(l,null,{default:e(()=>[t.memberId===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256)):(a(),n(l,{key:1},{default:e(()=>[s(u(t.name),1)]),_:2},1024))]),_:1}),o(d,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:e(({row:t})=>[(a(!0),f(v,null,b(_.value,r=>(a(),n(l,null,{default:e(()=>[x.value===r.id?(a(),n(l,{key:0},{default:e(()=>[s(u(r.name),1)]),_:2},1024)):g("",!0)]),_:2},1024))),256))]),_:1}),o(d,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:e(({row:t})=>[s(u(t.commission?t.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])])),[[H,O.value]])}}}),ce=ee(oe,[["__scopeId","data-v-59abb0c5"]]);export{ce as default};
