
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as le,d as ae,aN as oe,r as u,Z as re,n as ne,a as d,q as se,o as n,b as ce,f as s,w as r,i as e,g as m,A as g,s as ie,e as c,aM as ue,z as b,j as p,N as pe,be as de,ba as me,bb as be,an as fe,aH as he,aI as _e,y as ge,L as ke}from"./index-CEuraEPQ.js";import{_ as ve}from"./index.vue_vue_type_style_index_0_lang-DIhmelqH.js";import{_ as ye}from"./index-D0OzW783.js";import"./index.vue_vue_type_script_setup_true_lang-fLeZBDfa.js";import"./sortable.esm-C0-Qcoum.js";const Ie={list:_=>le.post("callback/getCustomerCallbackRecordList",_)},Se=_=>(he("data-v-18c1a37a"),_=_(),_e(),_),Ce=Se(()=>ge("br",null,null,-1)),we=ae({name:"callback",__name:"index",setup(_){const{pagination:f,getParams:L,onSizeChange:x,onCurrentChange:z}=oe(),{format:R}=de(),v=u(!1),N=u([]),T=u(""),l=u([]),y=u(!1),I=u(!1),S=u("default"),C=u(!1),U=u(),H=u("formSearch-callback"),w=u([{prop:"projectQuestionnaireClickId",label:"点击ID",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID/会员ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调URL",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级URL",sortable:!0,checked:!0},{prop:"sourceUrl",label:"客户URL来源",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0},{prop:"callbackStatus",label:"回调状态",sortable:!0,checked:!0}]),D=[{label:"内部会员",value:1},{label:"外部会员",value:2}],P=[{label:"成功",value:1},{label:"回调id不对",value:2},{label:"加密hash不对",value:2}],h=re({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""});function Q(a){x(a).then(()=>k())}function j(a=1){z(a).then(()=>k())}function E(){f.value.page=1,k()}async function k(){try{v.value=!0;const a={...L(),...h};h.time&&h.time.length&&(a.beginTime=h.time[0]||"",a.endTime=h.time[1]||""),delete a.time;const o=await Ie.list(a);N.value=o.data.customerCallbackRecordInfoList,f.value.total=o.data.total,v.value=!1}catch{}finally{v.value=!1}}function A(){Object.assign(h,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""}),k()}function V(a){T.value=a}ne(async()=>{w.value.forEach(a=>{a.checked&&l.value.push(a.prop)}),k(),U.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:"点击ID"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID/会员ID"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const B={surveySource:()=>D};return(a,o)=>{const F=ye,$=d("ElDivider"),q=ve,M=d("el-button"),O=me,Z=be,G=d("el-row"),i=d("el-table-column"),J=d("el-tag"),K=d("el-text"),W=d("el-empty"),X=d("el-table"),Y=d("ElPagination"),ee=fe,te=se("loading");return n(),ce("div",{class:pe({"absolute-container":e(C)})},[s(ee,null,{default:r(()=>[s(F,{formSearchList:e(U),formSearchName:e(H),onCurrentChange:j,onOnReset:A,model:e(h),formOption:B},null,8,["formSearchList","formSearchName","model"]),s($,{"border-style":"dashed"}),s(G,null,{default:r(()=>[s(q),s(Z,null,{default:r(()=>[s(M,{size:"default"},{default:r(()=>[m(" 导出 ")]),_:1}),s(O,{border:e(y),"onUpdate:border":o[0]||(o[0]=t=>g(y)?y.value=t:null),tableAutoHeight:e(C),"onUpdate:tableAutoHeight":o[1]||(o[1]=t=>g(C)?C.value=t:null),checkList:e(l),"onUpdate:checkList":o[2]||(o[2]=t=>g(l)?l.value=t:null),columns:e(w),"onUpdate:columns":o[3]||(o[3]=t=>g(w)?w.value=t:null),"line-height":e(S),"onUpdate:lineHeight":o[4]||(o[4]=t=>g(S)?S.value=t:null),stripe:e(I),"onUpdate:stripe":o[5]||(o[5]=t=>g(I)?I.value=t:null),style:{"margin-left":"12px"},onQueryData:E},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ie((n(),c(X,{border:e(y),data:e(N),size:e(S),stripe:e(I),onSelectionChange:V},{empty:r(()=>[s(W,{image:e(ue),"image-size":300},null,8,["image"])]),default:r(()=>[e(l).includes("projectQuestionnaireClickId")?(n(),c(i,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:"点击ID"},{default:r(({row:t})=>[m(b(t.projectQuestionnaireClickId?t.projectQuestionnaireClickId:"-"),1)]),_:1})):p("",!0),e(l).includes("customerShortName")?(n(),c(i,{key:1,align:"left",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型",width:"100"},{default:r(({row:t})=>[m(b(D[t.surveySource-1].label),1)]),_:1})):p("",!0),e(l).includes("customerShortName")?(n(),c(i,{key:2,align:"left",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):p("",!0),e(l).includes("memberChildId")?(n(),c(i,{key:3,align:"left","show-overflow-tooltip":"",label:"子会员ID/会员ID"},{default:r(({row:t})=>[m(b(t.memberChildId)+" ",1),Ce,m(" "+b(t.randomIdentityId),1)]),_:1})):p("",!0),e(l).includes("projectId")?(n(),c(i,{key:4,align:"left",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):p("",!0),e(l).includes("projectName")?(n(),c(i,{key:5,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):p("",!0),e(l).includes("callbackUrl")?(n(),c(i,{key:6,align:"left",prop:"callbackUrl",label:"回调URL"})):p("",!0),e(l).includes("subordinateUrl")?(n(),c(i,{key:7,align:"left",prop:"subordinateUrl",label:"下级URL"},{default:r(({row:t})=>[m(b(t.subordinateUrl?t.subordinateUrl:"-"),1)]),_:1})):p("",!0),e(l).includes("sourceUrl")?(n(),c(i,{key:8,align:"left",prop:"sourceUrl",label:"客户URL来源"},{default:r(({row:t})=>[m(b(t.sourceUrl?t.sourceUrl:"-"),1)]),_:1})):p("",!0),e(l).includes("callbackTime")?(n(),c(i,{key:9,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"},{default:r(({row:t})=>[s(J,{effect:"plain",type:"info"},{default:r(()=>[m(b(e(R)(t.callbackTime)),1)]),_:2},1024)]),_:1})):p("",!0),e(l).includes("callbackStatus")?(n(),c(i,{key:10,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:"回调状态"},{default:r(({row:t})=>[s(K,null,{default:r(()=>[m(b(t.callbackStatus?P[t.callbackStatus-1].label:""),1)]),_:2},1024)]),_:1})):p("",!0)]),_:1},8,["border","data","size","stripe"])),[[te,e(v)]]),s(Y,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:j},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),xe=ke(we,[["__scopeId","data-v-18c1a37a"]]);export{xe as default};
