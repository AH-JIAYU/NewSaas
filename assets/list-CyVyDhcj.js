
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,aN as ye,r as u,Z as me,n as _e,p as ve,a as p,q as F,s as z,o as a,b as L,f as i,w as t,e as l,g as s,i as y,aM as be,y as H,z as g,N as P,j as o,F as ge,t as he,be as ke,ba as Te,bb as Se,an as Ce,L as xe}from"./index-CyfLm8Mb.js";import{_ as Ue}from"./index-hlwHUEVA.js";import{_ as Ve}from"./index.vue_vue_type_style_index_0_lang-CnYMDdxM.js";import{_ as ze}from"./index-JOC03Xzj.js";import{E as Le,a as Ne}from"./index-C0mjd1JP.js";import Ie from"./index-C98Ja4EL.js";import"./index-B-Cthlxw.js";import"./clipboard-B0WT-fqj.js";import"./index.vue_vue_type_script_setup_true_lang-CWsI3IjZ.js";import"./sortable.esm-C0-Qcoum.js";const Re={class:"copyId tableSmall"},De={class:"id oneLine projectId"},Ee=de({name:"alter",__name:"list",setup(je){const{format:w}=ke(),{pagination:m,onSizeChange:B,onCurrentChange:A}=ye(),O=u(""),N=u([]),v=u(!0),I=u(),$=u(),h=u(!1),f=u([]),k=u(!1);u(!1);const T=u("default"),S=u(!1),M=u([]),R=u(),q=u("formSearch-alter"),Q=[{label:"完成",value:"1,0"},{label:"审核通过",value:"1,7"},{label:"审核失败",value:"1,8"},{label:"数据冻结",value:"1,9"},{label:"被甄别",value:"2,null"},{label:"配额满",value:"3,null"}],C=u([{prop:"projectClickId",label:"点击ID",sortable:!0,checked:!0},{prop:"beforeType",label:"变更前",sortable:!0,checked:!0},{prop:"afterType",label:"变更后",sortable:!0,checked:!0},{prop:"createTime",label:"创建时间",sortable:!0,checked:!0},{prop:"remark",label:"备注",sortable:!0,checked:!0},{prop:"createUserId",label:"操作人",sortable:!0,checked:!0}]),d=me({page:1,limit:10,type:null,createUserName:"",surveyType:null,viceType:null}),D=u([]);function Z(){I.value.showEdit()}function G(n){M.value=n}function J(){Object.assign(d,{type:null,createUserName:"",surveyType:null,viceType:null}),b()}function K(n){B(n).then(()=>{d.limit=n,b()})}function x(n=1){A(n).then(()=>{d.page=n,b()})}async function b(){try{if(v.value=!0,d.type){const r=d.type.split(",");d.surveyType=r[0],d.viceType=r[1]}const{data:n}=await Ne.list(d);D.value=n.tenantUpdateRecordVOBuilders,m.value.total=+n.total,v.value=!1}catch{}finally{v.value=!1}}_e(async()=>{const{data:n}=await ve.getTenantStaffListData({});N.value=n,C.value.forEach(r=>{r.checked&&f.value.push(r.prop)}),b(),R.value=[{index:1,show:!0,type:"input",modelName:"createUserName",placeholder:"操作人"},{index:2,show:!0,type:"select",modelName:"type",placeholder:"变更状态",option:"type",optionLabel:"label",optionValue:"value"}]});const W={type:()=>Q.map(n=>({label:n.label,value:n.value}))},U=u();function X(n){n?U.value=n.id:U.value=""}return(n,r)=>{const Y=ze,ee=p("ElDivider"),E=p("el-button"),te=Ve,ae=Te,le=Se,oe=p("el-row"),ne=Ue,_=p("el-table-column"),c=p("el-text"),re=p("el-tag"),se=p("el-tooltip"),ue=p("el-empty"),ce=p("el-table"),ie=p("ElPagination"),pe=Ce,fe=F("auth"),j=F("loading");return z((a(),L("div",{class:P({"absolute-container":h.value})},[i(pe,null,{default:t(()=>[i(Y,{formSearchList:R.value,formSearchName:q.value,onCurrentChange:x,onOnReset:J,model:d,formOption:W},null,8,["formSearchList","formSearchName","model"]),i(ee,{"border-style":"dashed"}),i(oe,{gutter:24},{default:t(()=>[i(te,null,{default:t(()=>[z((a(),l(E,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:Z},{default:t(()=>[s(" 新增 ")]),_:1})),[[fe,"alter-update-updateTenantUpdateRecord"]])]),_:1}),i(le,null,{default:t(()=>[i(E,{size:"default",onClick:r[0]||(r[0]=()=>{})},{default:t(()=>[s(" 导出 ")]),_:1}),i(ae,{border:k.value,"onUpdate:border":r[1]||(r[1]=e=>k.value=e),tableAutoHeight:h.value,"onUpdate:tableAutoHeight":r[2]||(r[2]=e=>h.value=e),checkList:f.value,"onUpdate:checkList":r[3]||(r[3]=e=>f.value=e),columns:C.value,"onUpdate:columns":r[4]||(r[4]=e=>C.value=e),"line-height":T.value,"onUpdate:lineHeight":r[5]||(r[5]=e=>T.value=e),stripe:S.value,"onUpdate:stripe":r[6]||(r[6]=e=>S.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),z((a(),l(ce,{ref_key:"tableSortRef",ref:O,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:T.value,stripe:S.value,onSelectionChange:G,"highlight-current-row":"",onCurrentChange:X},{empty:t(()=>[i(ue,{image:y(be),"image-size":300},null,8,["image"])]),default:t(()=>[f.value.includes("projectClickId")?(a(),l(_,{key:0,prop:"projectClickId","show-overflow-tooltip":"",align:"left",label:"点击ID"},{default:t(({row:e})=>[H("div",Re,[H("div",De,g(e.projectClickId),1),i(ne,{content:e.projectClickId,class:P({rowCopy:"rowCopy",current:e.id===U.value})},null,8,["content","class"])])]),_:1})):o("",!0),f.value.includes("beforeType")?(a(),l(_,{key:1,prop:"beforeType","show-overflow-tooltip":"",align:"left",label:"变更前"},{default:t(({row:e})=>[e.beforeSurveyType===5&&e.beforeViceType===0?(a(),l(c,{key:0,type:"info",class:"mx-1"},{default:t(()=>[s("未完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===0?(a(),l(c,{key:1,type:"success",class:"mx-1"},{default:t(()=>[s("完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===7?(a(),l(c,{key:2,type:"success",class:"mx-1"},{default:t(()=>[s("审核通过")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===8?(a(),l(c,{key:3,type:"danger",class:"mx-1"},{default:t(()=>[s("审核失败")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===9?(a(),l(c,{key:4,class:"mx-1"},{default:t(()=>[s("数据冻结")]),_:1})):o("",!0),e.beforeSurveyType===2?(a(),l(c,{key:5,type:"warning",class:"mx-1"},{default:t(()=>[s("被甄别")]),_:1})):o("",!0),e.beforeSurveyType===3?(a(),l(c,{key:6,type:"primary",class:"mx-1"},{default:t(()=>[s("配额满")]),_:1})):o("",!0),e.beforeViceType===13?(a(),l(c,{key:7,type:"success",class:"mx-1"},{default:t(()=>[s("和解")]),_:1})):o("",!0)]),_:1})):o("",!0),f.value.includes("afterType")?(a(),l(_,{key:2,prop:"afterType","show-overflow-tooltip":"",align:"left",label:"变更后"},{default:t(({row:e})=>[e.afterSurveyType===1&&e.afterViceType===0?(a(),l(c,{key:0,type:"success",class:"mx-1"},{default:t(()=>[s("完成")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===7?(a(),l(c,{key:1,type:"success",class:"mx-1"},{default:t(()=>[s("审核通过")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===8?(a(),l(c,{key:2,type:"danger",class:"mx-1"},{default:t(()=>[s("审核失败")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===9?(a(),l(c,{key:3,class:"mx-1"},{default:t(()=>[s("数据冻结")]),_:1})):o("",!0),e.afterSurveyType===2?(a(),l(c,{key:4,type:"warning",class:"mx-1"},{default:t(()=>[s("被甄别")]),_:1})):o("",!0),e.afterSurveyType===3?(a(),l(c,{key:5,type:"primary",class:"mx-1"},{default:t(()=>[s("配额满")]),_:1})):o("",!0)]),_:1})):o("",!0),f.value.includes("createTime")?(a(),l(_,{key:3,prop:"createTime","show-overflow-tooltip":"",align:"left",label:"创建时间"},{default:t(({row:e})=>[i(se,{content:e.createTime,placement:"top"},{default:t(()=>[i(re,{effect:"plain",type:"info"},{default:t(()=>[s(g(y(w)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):o("",!0),f.value.includes("remark")?(a(),l(_,{key:4,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:t(({row:e})=>[s(g(e.remark?e.remark:"-"),1)]),_:1})):o("",!0),f.value.includes("createUserId")?(a(),l(_,{key:5,prop:"createUserId","show-overflow-tooltip":"",align:"left",label:"操作人"},{default:t(({row:e})=>[(a(!0),L(ge,null,he(N.value,V=>(a(),L("div",{key:V.id},[V.id===e.createUserId?(a(),l(c,{key:0},{default:t(()=>[s(g(V.userName),1)]),_:2},1024)):o("",!0)]))),128))]),_:1})):o("",!0)]),_:1},8,["data","border","size","stripe"])),[[j,v.value]]),i(ie,{"current-page":y(m).page,total:y(m).total,"page-size":y(m).size,"page-sizes":y(m).sizes,layout:y(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:K,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"]),i(Le,{onSuccess:b,ref_key:"editRef",ref:I},null,512),i(Ie,{ref_key:"detailRef",ref:$},null,512)]),_:1})],2)),[[j,v.value]])}}}),Qe=xe(Ee,[["__scopeId","data-v-72415762"]]);export{Qe as default};
