
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./position_manage-DRy2p4uo.js";import{d as R,r as o,n as q,a as m,q as B,s as D,o as T,b as U,f as s,w as n,y as M,g,E as y,al as P}from"./index-CROH153d.js";const S={style:{flex:"auto"}},$=R({name:"Edit",__name:"index",emits:["success"],setup(I,{expose:V,emit:b}){const c=b,f=o(""),k=o(),t=o(!1),d=o(),u=o(!1),e=o({id:null,name:"",active:1,remark:1}),x=o({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});async function h(a){try{t.value=!0,a?e.value=JSON.parse(a):e.value={id:null,name:"",active:1,remark:""},f.value=a!=null&&a.id?"编辑":"新增",t.value=!1,u.value=!0}catch{}finally{t.value=!1}}function C(){return new Promise(a=>{d.value&&d.value.validate(l=>{if(l)try{if(t.value=!0,!e.value.id)delete e.value.id,_.create(e.value).then(()=>{t.value=!1,y.success({message:"新增成功",center:!0}),c("success"),u.value=!1,a()});else{const i=P(e.value);_.edit(i).then(()=>{t.value=!1,y.success({message:"编辑成功",center:!0}),c("success"),u.value=!1,a()})}}catch{}finally{t.value=!1}})})}return q(async()=>{k.value=new Date}),V({showEdit:h}),(a,l)=>{const i=m("el-input"),v=m("el-form-item"),E=m("el-form"),p=m("el-button"),w=m("el-dialog"),N=B("loading");return D((T(),U("div",null,[s(w,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=r=>u.value=r),title:f.value,width:"700"},{footer:n(()=>[M("div",S,[s(p,{type:"",onClick:l[2]||(l[2]=r=>u.value=!1)},{default:n(()=>[g(" 取消 ")]),_:1}),s(p,{type:"primary",onClick:C},{default:n(()=>[g(" 确定 ")]),_:1})])]),default:n(()=>[s(E,{ref_key:"formRef",ref:d,"label-width":"7rem",model:e.value,rules:x.value,inline:!1},{default:n(()=>[s(v,{prop:"name",label:"职位名称"},{default:n(()=>[s(i,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=r=>e.value.name=r),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"备注"},{default:n(()=>[s(i,{modelValue:e.value.remark,"onUpdate:modelValue":l[1]||(l[1]=r=>e.value.remark=r),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[N,t.value]])}}});export{$ as _};
