
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as B,_ as y}from"./index.vue_vue_type_script_setup_true_lang-CcTjuKyF.js";import{d as L,r,a3 as N,a2 as z,a as p,o,b as m,F as T,f,w as c,g as h,n as I,e as b,l as g,I as $,R as E,j as F,an as x}from"./index-DqTjMncf.js";const M={style:{float:"right",position:"sticky",top:"19px",width:"85%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},q=L({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(k,{expose:A,emit:V}){const C=B(),n=k,j=V,e=r(n.leftTabsData),w=r(n.validateTopTabs);e.value.forEach((s,t)=>{const i=r(null);N(`formRef${t}`,i)});const _=r(0),a=r(0);function D(){const s=x(e.value[0]);e.value[a.value]=s}function R(){x(e.value[0]),a.value=++_.value,e.value.push({...C.initialTopTabsData})}function S(s){e.value.splice(s,1),w.value.splice(s,1),a.value>=e.value.length&&(a.value=Math.max(0,e.value.length-1),_.value=Math.max(0,e.value.length-1))}return z(()=>a.value,(s,t)=>{n.validateAll.reduce((d,v,l)=>(v==="rejected"&&d.push(l),d),[]).includes(t)&&j("validate")}),A({activeLeftTab:a}),(s,t)=>{const i=p("el-button"),d=p("el-tab-pane"),v=p("el-tabs");return o(),m("div",null,[e.value[0].id?(o(),b(y,{key:1,"left-tab":e.value[0]},null,8,["left-tab"])):(o(),m(T,{key:0},[f(i,{class:"button",disabled:e.value.length>9||n.title!=="添加",onClick:t[0]||(t[0]=l=>R())},{default:c(()=>[h(" 添加子项目 ")]),_:1},8,["disabled"]),f(v,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l),"tab-position":"left",onTabRemove:S},{default:c(()=>[(o(!0),m(T,null,I(e.value,(l,u)=>(o(),b(d,{key:u,closable:e.value.length!==1,label:l.supplierAccord,name:u},{label:c(()=>[g("div",{class:E(n.validateAll[u]&&n.validateAll[u]==="rejected"?"validateRejected":"")},$(l.supplierAccord||"供应商名称"),3)]),default:c(()=>[g("div",M,[a.value>0?(o(),b(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:D},{default:c(()=>[h(" 同步主项目数据 ")]),_:1})):F("",!0)]),f(y,{"left-tab":l,"tab-index":u},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","label","name"]))),128))]),_:1},8,["modelValue"])],64))])}}});export{q as _};
