
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as O,r as m,n as Q,a as n,o as u,e as f,w as e,y as i,f as a,g as s,b as C,z as d,t as T,j as W,F as z,p as X,aH as Y,aI as Z,L as $}from"./index-DRvQ9OL4.js";import{a as ee}from"./department-BvPrViH_.js";import{u as ae}from"./tenant_role-Cg68JtOd.js";import{u as te}from"./configuration_manager-CCtDRAat.js";import{u as le}from"./position_manage-BmUjkjFJ.js";import"./configuration_role-8YXvrIwe.js";import"./position_manage-DolGuVOj.js";const V=h=>(Y("data-v-bf3e5b6b"),h=h(),Z(),h),oe=V(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"基本信息")],-1)),se={key:1,class:"avatar"},ne={style:{"font-size":"14px"}},ue=V(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"角色信息")],-1)),de=V(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"}," 部门信息 ")],-1)),re={class:"flex-c"},ce=O({__name:"index",emits:["fetch-data"],setup(h,{expose:D,emit:M}){const B=te(),P=m([]),j=le(),I=m(),E=ae(),S=m(),x=m(),R={children:"children",label:"name"},y=m([]),b=m({}),U=M,g=m(!1),l=m();async function F(p){b.value=p,b.value.roleList=[b.value.role];const _={id:p.id},{status:o,data:k}=await X.list(_);k&&o===1&&(l.value=k.data[0]),y.value&&y.value.push(l.value.organizationalStructureId),g.value=!0}function L(){U("fetch-data"),y.value=[],g.value=!1}return Q(async()=>{I.value=await j.getPositionManage(),P.value=await B.getStaff(),S.value=await E.getRole();const p=await ee.list({name:""});p.data&&(x.value=p.data,x.value.forEach(_=>{_.disabled=!0}))}),D({showEdit:F}),(p,_)=>{const o=n("el-col"),k=n("el-avatar"),w=n("el-row"),r=n("el-text"),c=n("el-form-item"),N=n("el-card"),H=n("el-checkbox"),q=n("el-checkbox-group"),A=n("el-tree"),G=n("el-form"),J=n("el-button"),K=n("el-drawer");return u(),f(K,{modelValue:g.value,"onUpdate:modelValue":_[1]||(_[1]=t=>g.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:L},{footer:e(()=>[i("div",re,[a(J,{type:"primary",onClick:L},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(G,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(N,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[a(w,{gutter:20},{default:e(()=>[a(o,{span:1}),a(o,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(u(),f(k,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(u(),C("div",se,d(l.value.name),1))]),_:1}),a(o,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[i("p",null,d(l.value.userName),1),i("p",ne,[s("账号:"),i("span",null,d(l.value.userName),1)])]),_:1})]),_:1}),a(w,{gutter:24},{default:e(()=>[a(o,{span:6},{default:e(()=>[a(c,{label:"员工ID:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"姓名:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"手机号:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.phoneNumber?l.value.phoneNumber:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"邮箱:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"部门:"},{default:e(()=>[s(d(l.value.organizationalStructureName?l.value.organizationalStructureName:"-"),1)]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"职位:"},{default:e(()=>[(u(!0),C(z,null,T(I.value,t=>(u(),f(r,null,{default:e(()=>[l.value.positionId===t.id?(u(),f(r,{key:0},{default:e(()=>[s(d(t.name?t.name:"-"),1)]),_:2},1024)):W("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"帐号状态:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(c,{label:"创建时间:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(N,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(c,{label:"分配角色:"},{default:e(()=>{var t;return[(t=S.value)!=null&&t.length?(u(),f(q,{key:0,style:{"margin-left":"1.5rem"},modelValue:b.value.roleList,"onUpdate:modelValue":_[0]||(_[0]=v=>b.value.roleList=v)},{default:e(()=>[(u(!0),C(z,null,T(S.value,v=>(u(),f(H,{key:v.id,label:v.roleName,value:v.roleName,disabled:""},{default:e(()=>[s(d(v.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(u(),f(r,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(N,{class:"box-card"},{header:e(()=>[de]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(c,{label:"分配部门:"},{default:e(()=>[x.value.length>0?(u(),f(A,{key:0,style:{"max-width":"600px"},ref:"treeRef",disabled:!0,data:x.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":y.value,"default-expand-all":"",props:R,onCheckChange:p.handleNodeClick},null,8,["data","default-checked-keys","onCheckChange"])):(u(),f(r,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),he=$(ce,[["__scopeId","data-v-bf3e5b6b"]]);export{he as default};
