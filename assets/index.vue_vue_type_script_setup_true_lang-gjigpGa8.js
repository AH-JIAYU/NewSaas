
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./finance_invoice-Dk3IHkbt.js";import{d as N,r as n,k as S,a as s,l as U,n as B,o as I,b as q,f as t,w as i,p as A,g as _,E as g,t as M}from"./index-WdaD7n5-.js";const J={style:{flex:"auto"}},$=N({name:"Edit",__name:"index",emits:["success"],setup(L,{expose:V,emit:C}){const m=C,v=n(""),b=n(),x=n(!1),k=n([]),r=n(),u=n(!1),l=n({id:null,tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""}),y=n({invoiceCode:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function D(){return new Promise(a=>{l.value.id?r.value&&r.value.validate(e=>{if(e){const d=M(l.value);p.edit(d).then(()=>{g.success({message:"编辑成功",center:!0}),m("success"),u.value=!1,a()})}}):r.value&&r.value.validate(e=>{e&&(delete l.value.id,p.create(l.value).then(()=>{g.success({message:"新增成功",center:!0}),m("success"),u.value=!1,a()}))})})}async function w(a,e){a?l.value=JSON.parse(a):l.value={id:null,tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""},v.value=a!=null&&a.id?"编辑":"新增",k.value=e,u.value=!0}return S(async()=>{b.value=new Date}),V({showEdit:w}),(a,e)=>{const d=s("el-input"),c=s("el-form-item"),R=s("el-switch"),E=s("el-form"),f=s("el-button"),T=s("el-dialog"),h=U("loading");return B((I(),q("div",null,[t(T,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value=o),title:v.value,width:"700"},{footer:i(()=>[A("div",J,[t(f,{type:"",onClick:e[3]||(e[3]=o=>u.value=!1)},{default:i(()=>[_(" 取消 ")]),_:1}),t(f,{type:"primary",onClick:D},{default:i(()=>[_(" 确定 ")]),_:1})])]),default:i(()=>[t(E,{ref_key:"formRef",ref:r,"label-width":"80px",model:l.value,rules:y.value,inline:!1},{default:i(()=>[t(c,{prop:"invoiceCode",label:"职位名称"},{default:i(()=>[t(d,{modelValue:l.value.invoiceCode,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.invoiceCode=o),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),t(c,{label:"职位日志"},{default:i(()=>[t(R,{modelValue:l.value.active,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.active=o),"inline-prompt":"","active-text":"启用","inactive-text":"禁用","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),t(c,{label:"备注"},{default:i(()=>[t(d,{modelValue:l.value.remark,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.remark=o),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[h,x.value]])}}});export{$ as _};
