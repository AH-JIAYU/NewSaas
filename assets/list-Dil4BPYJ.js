
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as De,ae as Ve,aN as Le,r as p,F as d,o as Te,a3 as m,al as be,b as s,j as Ee,g as t,w as l,i as o,h as g,t as c,a4 as y,c as u,aM as _e,f,B as j,k as h,aR as Ue,aO as Re,aP as $e,_ as Be,ao as Me,aH as Pe,aI as He,z as Fe}from"./index-CZbucr5m.js";import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-DxVdHgVW.js";import{_ as Ge}from"./index-PN1hupeh.js";import{_ as Oe}from"./index.vue_vue_type_style_index_0_lang-CqdxPdGY.js";import{_ as qe}from"./index-BSfOfdYZ.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-BfOObWc1.js";import{_ as Je}from"./index.vue_vue_type_script_setup_true_lang-BrKK1pnm.js";import Ke from"./index-BApq9VLO.js";import{a as We}from"./projectManagement_materials-CHMcEu_A.js";import"./index-DJcwqxDh.js";import"./clipboard-Dvk2Ua3v.js";import"./sortable.esm-C0-Qcoum.js";import"./download-cs4Swt4h.js";const Xe=R=>(Pe("data-v-4804ac1d"),R=R(),He(),R),Ye={class:"copyId tableSmall"},Ze={class:"id oneLine projectId"},et={class:"tableBig"},tt={class:"tableBig"},lt={class:"copyId tableSmall"},at={class:"id oneLine projectId"},ot={class:"flex-c fontC-System"},rt={class:"oneLine",style:{width:"calc(100% - 20px)"}},nt=Xe(()=>f("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),it={class:"copyId tableSmall"},st={class:"id oneLine projectId"},ct={class:"tableBig"},ut={class:"tableBig"},pt={class:"copyId tableSmall"},dt={class:"id oneLine projectId"},mt={class:"flex-c fontC-System"},ft={class:"oneLine",style:{width:"calc(100% - 20px)"}},bt=De({name:"materials",__name:"list",setup(R){const{t:a}=Ve(),{format:A}=Ue(),{getParams:he,pagination:v,onSizeChange:ve,onCurrentChange:ge}=Le(),G=p(""),L=p(!1),w=p(!1),O=p(),q=p(),Q=p(),T=p(!1),i=p([]),J=p(),Ce=p("formSearch-materials"),N=p("default"),z=p(!1),K=p([]),C=p([{label:d(()=>a("materials.vipId")),prop:"memberChildId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.vipName")),prop:"memberChildName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.vipGroupsId")),prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectID")),prop:"projectId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectName")),prop:"projectName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.instructions")),prop:"instructions",sotrtable:!0,checked:!0},{label:d(()=>a("materials.createTime")),prop:"createTime",sotrtable:!0,checked:!0}]),_=p({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),M=p([]),E=p();function Ie(n){n?E.value=n.projectId:E.value=""}const U=p();function ye(n){n?U.value=n.projectId:U.value=""}function W(n){K.value.length||q.value.showEdit(n)}function X(n){Q.value.showEdit(n)}function Y(n){O.value.showEdit(n)}function Z(n){K.value=n}function ee(n){ve(n).then(()=>I())}function S(n=1){ge(n).then(()=>I())}function te(){Object.assign(_.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),I()}async function I(){try{L.value=!0;const n={...he(),..._.value},r=await We.list(n);M.value=r.data.projectMaterialInfoList,v.value.total=r.data.total,L.value=!1}catch{}finally{L.value=!1}}const ke=()=>{_.value.type===1?(i.value=[],C.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],C.value.forEach(n=>{n.checked&&i.value.push(n.prop)}),I()):(i.value=[],C.value=[{label:d(()=>a("materials.subVipId")),prop:"memberChildId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.subVipName")),prop:"memberChildName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.subVipGroupsId")),prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectID")),prop:"projectId",sotrtable:!0,checked:!0},{label:d(()=>a("materials.projectName")),prop:"projectName",sotrtable:!0,checked:!0},{label:d(()=>a("materials.instructions")),prop:"instructions",sotrtable:!0,checked:!0},{label:d(()=>a("materials.createTime")),prop:"createTime",sotrtable:!0,checked:!0}],C.value.forEach(n=>{n.checked&&i.value.push(n.prop)}),I())};return Te(()=>{C.value.forEach(n=>{n.checked&&i.value.push(n.prop)}),I(),J.value=[{index:1,show:!0,type:"input",modelName:"memberChildId",placeholder:d(()=>a("materials.vipId"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:d(()=>a("materials.projectID"))},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:d(()=>a("materials.projectName"))}]}),(n,r)=>{const je=qe,le=m("ElDivider"),ae=Oe,x=m("el-button"),oe=Re,re=$e,ne=m("el-row"),$=Ge,b=m("el-table-column"),ie=m("el-tag"),se=m("el-tooltip"),B=Be,ce=m("ElSpace"),ue=m("el-empty"),pe=m("el-table"),de=m("ElPagination"),me=m("el-tab-pane"),P=m("el-input"),H=m("el-form-item"),F=m("ElButton"),we=m("ElFormItem"),Ne=m("el-form"),ze=Ae,Se=m("el-tabs"),xe=Me,D=be("auth"),fe=be("loading");return s(),Ee("div",{class:j({"absolute-container":T.value})},[t(xe,null,{default:l(()=>[t(Se,{modelValue:_.value.type,"onUpdate:modelValue":r[18]||(r[18]=e=>_.value.type=e),onTabChange:ke},{default:l(()=>[t(me,{label:o(a)("materials.vipMaterial"),name:1},{default:l(()=>[t(je,{formSearchList:J.value,formSearchName:Ce.value,onCurrentChange:S,onOnReset:te,model:_.value},null,8,["formSearchList","formSearchName","model"]),t(le,{"border-style":"dashed"}),t(ne,{gutter:24},{default:l(()=>[t(ae),t(re,null,{default:l(()=>[t(x,{size:"default",onClick:r[0]||(r[0]=()=>{})},{default:l(()=>[g(c(o(a)("materials.export")),1)]),_:1}),t(oe,{border:w.value,"onUpdate:border":r[1]||(r[1]=e=>w.value=e),tableAutoHeight:T.value,"onUpdate:tableAutoHeight":r[2]||(r[2]=e=>T.value=e),checkList:i.value,"onUpdate:checkList":r[3]||(r[3]=e=>i.value=e),columns:C.value,"onUpdate:columns":r[4]||(r[4]=e=>C.value=e),"line-height":N.value,"onUpdate:lineHeight":r[5]||(r[5]=e=>N.value=e),stripe:z.value,"onUpdate:stripe":r[6]||(r[6]=e=>z.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),y((s(),u(pe,{ref_key:"tableSortRef",ref:G,style:{"margin-top":"10px"},"row-key":"id",data:M.value,border:w.value,size:N.value,stripe:z.value,onSelectionChange:Z,"highlight-current-row":"",onCurrentChange:Ie},{empty:l(()=>[t(ue,{image:o(_e),"image-size":300},null,8,["image"])]),default:l(()=>[i.value.includes("memberChildId")?(s(),u(b,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:o(a)("materials.vipId")},{default:l(({row:e})=>[f("div",Ye,[f("div",Ze,c(e.memberChildId),1),t($,{content:e.memberChildId,class:j({rowCopy:"rowCopy",current:e.projectId===E.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),i.value.includes("memberChildName")?(s(),u(b,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:o(a)("materials.vipName")},{default:l(({row:e})=>[f("div",et,c(e.memberChildName),1)]),_:1},8,["label"])):h("",!0),i.value.includes("projectName")?(s(),u(b,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:o(a)("materials.projectName")},{default:l(({row:e})=>[f("div",tt,c(e.projectName),1)]),_:1},8,["label"])):h("",!0),i.value.includes("projectId")?(s(),u(b,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:o(a)("materials.projectID")},{default:l(({row:e})=>[f("div",lt,[f("div",at,c(e.projectId),1),t($,{content:e.projectId,class:j({rowCopy:"rowCopy",current:e.projectId===E.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),i.value.includes("createTime")?(s(),u(b,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:o(a)("materials.create")},{default:l(({row:e})=>[t(se,{content:e.createTime,placement:"top"},{default:l(()=>[t(ie,{effect:"plain",type:"info"},{default:l(()=>[g(c(o(A)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1},8,["label"])):h("",!0),i.value.includes("instructions")?(s(),u(b,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:o(a)("materials.instructions")},{default:l(({row:e})=>[f("div",ot,[f("div",rt,c(e.instructions?e.instructions:"-"),1),y(t(B,{onClick:k=>X(e),class:j({edit:"edit",current:e.projectId===E.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"]),[[D,"materials-update-updateProjectMaterialInstructions"]])])]),_:1},8,["label"])):h("",!0),t(b,{align:"left",fixed:"right",label:o(a)("materials.control"),width:"240"},{default:l(({row:e})=>[t(ce,null,{default:l(()=>[y((s(),u(x,{type:"primary",plain:"",size:"small",onClick:k=>W(e)},{default:l(()=>[g(c(o(a)("materials.view")),1)]),_:2},1032,["onClick"])),[[D,"materials-get-getMaterials-btn"]]),y((s(),u(x,{type:"danger",plain:"",size:"small",onClick:k=>Y(e)},{default:l(()=>[g(c(o(a)("materials.delete")),1)]),_:2},1032,["onClick"])),[[D,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","border","size","stripe"])),[[fe,L.value]]),t(de,{"current-page":o(v).page,total:o(v).total,"page-size":o(v).size,"page-sizes":o(v).sizes,layout:o(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ee,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["label"]),t(me,{label:o(a)("materials.subVipMaterial"),name:2},{default:l(()=>[t(ze,{"show-toggle":!1},{default:l(({fold:e,toggle:k})=>[t(Ne,{model:_.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(H,{label:""},{default:l(()=>[t(P,{modelValue:_.value.memberChildId,"onUpdate:modelValue":r[7]||(r[7]=V=>_.value.memberChildId=V),clearable:"",placeholder:o(a)("materials.vipId")},null,8,["modelValue","placeholder"])]),_:1}),t(H,{label:""},{default:l(()=>[t(P,{modelValue:_.value.projectId,"onUpdate:modelValue":r[8]||(r[8]=V=>_.value.projectId=V),clearable:"",placeholder:o(a)("materials.projectID")},null,8,["modelValue","placeholder"])]),_:1}),t(H,{label:""},{default:l(()=>[t(P,{modelValue:_.value.projectName,"onUpdate:modelValue":r[9]||(r[9]=V=>_.value.projectName=V),clearable:"",placeholder:o(a)("materials.projectName")},null,8,["modelValue","placeholder"])]),_:1}),t(we,null,{default:l(()=>[t(F,{type:"primary",onClick:r[10]||(r[10]=V=>S())},{icon:l(()=>[t(B,{name:"i-ep:search"})]),default:l(()=>[g(" "+c(o(a)("materials.sift")),1)]),_:1}),t(F,{onClick:te},{icon:l(()=>[nt]),default:l(()=>[g(" "+c(o(a)("materials.reset")),1)]),_:1}),t(F,{link:"",onClick:k,disabled:""},{icon:l(()=>[t(B,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[g(" "+c(e?o(a)("materials.expand"):o(a)("materials.collapse")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(le,{"border-style":"dashed"}),t(ne,{gutter:24},{default:l(()=>[t(ae),t(re,null,{default:l(()=>[t(x,{size:"default",onClick:r[11]||(r[11]=()=>{})},{default:l(()=>[g(c(o(a)("materials.export")),1)]),_:1}),t(oe,{border:w.value,"onUpdate:border":r[12]||(r[12]=e=>w.value=e),tableAutoHeight:T.value,"onUpdate:tableAutoHeight":r[13]||(r[13]=e=>T.value=e),checkList:i.value,"onUpdate:checkList":r[14]||(r[14]=e=>i.value=e),columns:C.value,"onUpdate:columns":r[15]||(r[15]=e=>C.value=e),"line-height":N.value,"onUpdate:lineHeight":r[16]||(r[16]=e=>N.value=e),stripe:z.value,"onUpdate:stripe":r[17]||(r[17]=e=>z.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),y((s(),u(pe,{ref_key:"tableSortRef",ref:G,style:{"margin-top":"10px"},"row-key":"id",data:M.value,border:w.value,size:N.value,stripe:z.value,onSelectionChange:Z,"highlight-current-row":"",onCurrentChange:ye},{empty:l(()=>[t(ue,{image:o(_e),"image-size":300},null,8,["image"])]),default:l(()=>[i.value.includes("memberChildId")?(s(),u(b,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:o(a)("materials.subVipId")},{default:l(({row:e})=>[f("div",it,[f("div",st,c(e.memberChildId),1),t($,{content:e.memberChildId,class:j({rowCopy:"rowCopy",current:e.projectId===U.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),i.value.includes("memberChildName")?(s(),u(b,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:o(a)("materials.subVipName")},{default:l(({row:e})=>[f("div",ct,c(e.memberChildName),1)]),_:1},8,["label"])):h("",!0),i.value.includes("projectName")?(s(),u(b,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:o(a)("materials.projectName")},{default:l(({row:e})=>[f("div",ut,c(e.projectName),1)]),_:1},8,["label"])):h("",!0),i.value.includes("projectId")?(s(),u(b,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:o(a)("materials.projectID")},{default:l(({row:e})=>[f("div",pt,[f("div",dt,c(e.projectId),1),t($,{content:e.projectId,class:j({rowCopy:"rowCopy",current:e.projectId===U.value})},null,8,["content","class"])])]),_:1},8,["label"])):h("",!0),i.value.includes("customerIdentification")?(s(),u(b,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"left",label:o(a)("materials.customer")},null,8,["label"])):h("",!0),i.value.includes("createTime")?(s(),u(b,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:o(a)("materials.create")},{default:l(({row:e})=>[t(se,{content:e.createTime,placement:"top"},{default:l(()=>[t(ie,{effect:"plain",type:"info"},{default:l(()=>[g(c(o(A)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1},8,["label"])):h("",!0),i.value.includes("instructions")?(s(),u(b,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:o(a)("materials.instructions")},{default:l(({row:e})=>[f("div",mt,[f("div",ft,c(e.instructions?e.instructions:"-"),1),y(t(B,{onClick:k=>X(e),class:j({edit:"edit",current:e.projectId===U.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"]),[[D,"materials-update-updateProjectMaterialInstructions"]])])]),_:1},8,["label"])):h("",!0),t(b,{align:"left",fixed:"right",label:o(a)("materials.control"),width:"240"},{default:l(({row:e})=>[t(ce,null,{default:l(()=>[y((s(),u(x,{type:"primary",plain:"",size:"small",onClick:k=>W(e)},{default:l(()=>[g(" 查看 ")]),_:2},1032,["onClick"])),[[D,"materials-get-getMaterials-btn"]]),y((s(),u(x,{type:"danger",plain:"",size:"small",onClick:k=>Y(e)},{default:l(()=>[g(" 删除 ")]),_:2},1032,["onClick"])),[[D,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","border","size","stripe"])),[[fe,L.value]]),t(de,{"current-page":o(v).page,total:o(v).total,"page-size":o(v).size,"page-sizes":o(v).sizes,layout:o(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ee,onCurrentChange:S},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),t(Qe,{ref_key:"deleteRef",ref:O},null,512),t(Je,{ref_key:"detailsRef",ref:q,onFetchData:I},null,512),t(Ke,{ref_key:"editsRef",ref:Q,onFetchData:I},null,512)]),_:1})],2)}}}),xt=Fe(bt,[["__scopeId","data-v-4804ac1d"]]);export{xt as default};
