
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as X,l as Y,$ as ee,r as S,a3 as R,n as le,a4 as te,a as r,o as i,b as T,f as e,w as l,i as v,bc as ae,F as x,t as I,y as p,g as _,e as y,j as h,_ as oe,aG as ue,aH as ne,L as se}from"./index-CpwchEAF.js";import re from"./index-CK2Lw5wt.js";import{U as de}from"./user_supplier-adeI5-FA.js";import{u as ie}from"./configuration_supplierLevel-69iSwWq1.js";import{u as pe}from"./user_customer-D_YAbnfA.js";import"./apiLoading-1k151ezF.js";import"./user_supplier-DvLfSZBr.js";import"./user_customer-VvTp49Xv.js";const L=V=>(ue("data-v-70f87868"),V=V(),ne(),V),me=L(()=>p("div",{class:"card-header"},[p("span",null,"基本信息")],-1)),fe={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},ce=L(()=>p("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),be=L(()=>p("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ve=L(()=>p("div",{class:"card-header"},[p("span",null,"权限信息")],-1)),_e=L(()=>p("div",null,[_(" 为供应商设定筛选条件，更高效匹配合适项目"),p("br"),_(" 例:仅选中【法国】，该供应商只能做【法国】的项目 ")],-1)),ge=X({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(V){const D=de(),j=ie(),z=pe(),k=Y(),$=ee("validateTopTabs"),U=S(),a=V,w=S(null);S({});const F=[{label:"公司",value:"company"},{label:"个人",value:"personal"}],f=R({supplierAccord:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择区域",trigger:"change"}],supplierLevelId:[{required:!0,message:"请选择供应商等级",trigger:"change"}],type:[{required:!0,message:"请选择供应商类型",trigger:"change"}]}),M=(m,o,s)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.leftTab.supplierPhone)?s():s(new Error("请输入合法手机号"))},O=(m,o,s)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.leftTab.emailAddress)?s():s(new Error("请输入合法邮箱"))},E=m=>{m&&(a.leftTab.countryType=m==="343"?1:2,m==="343"?(f.emailAddress&&delete f.emailAddress,f.supplierPhone=[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:M,trigger:"blur"}]):(f.supplierPhone&&delete f.supplierPhone,f.emailAddress=[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:O,trigger:"blur"}]))},Z=()=>{a.leftTab.relevanceCountryIdList=[],d.checked&&d.countryList.map(m=>{a.leftTab.relevanceCountryIdList.push(m.id)})},N=()=>{U.value.showEdit()},G=()=>{d.checked=a.leftTab.relevanceCountryIdList.length===k.country.length},d=R({checked:!1,relatedCustomers:[],payMethod:D.payMethod,countryList:[],supplierLevelList:[]}),A=S("basicSettings"),P=async()=>{d.supplierLevelList=await j.getLevelNameList(),E(a.leftTab.subordinateCountryId)};return le(async()=>{d.relatedCustomers=await z.getCustomerList(),d.countryList=await k.getCountry(),await P()}),te(()=>{$(w.value)}),(m,o)=>{const s=r("el-option"),c=r("el-select"),u=r("el-form-item"),n=r("el-col"),b=r("el-input"),B=r("el-button"),g=r("el-row"),q=r("el-card"),C=r("ElSwitch"),H=oe,Q=r("el-tooltip"),J=r("el-checkbox"),K=r("el-tab-pane"),W=r("el-tabs");return i(),T("div",null,[e(W,{modelValue:A.value,"onUpdate:modelValue":o[17]||(o[17]=t=>A.value=t)},{default:l(()=>[e(K,{label:"基础设置",name:"basicSettings"},{default:l(()=>[e(v(ae),{ref_key:"formRef",ref:w,rules:v(f),model:a.leftTab,"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(q,{class:"box-card"},{header:l(()=>[me]),default:l(()=>[e(g,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"供应商类型",prop:"type"},{default:l(()=>[e(c,{modelValue:a.leftTab.type,"onUpdate:modelValue":o[0]||(o[0]=t=>a.leftTab.type=t),"value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(i(),T(x,null,I(F,t=>e(s,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商名称",prop:"supplierAccord"},{default:l(()=>[e(b,{modelValue:a.leftTab.supplierAccord,"onUpdate:modelValue":o[1]||(o[1]=t=>a.leftTab.supplierAccord=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商等级",prop:"supplierLevelId"},{default:l(()=>[e(c,{clearable:"",filterable:"",modelValue:a.leftTab.supplierLevelId,"onUpdate:modelValue":o[2]||(o[2]=t=>a.leftTab.supplierLevelId=t)},{empty:l(()=>[p("div",fe,[_(" 暂无数据 "),e(B,{type:"primary",link:"",size:"small",onClick:N},{default:l(()=>[_(" 快捷新增 "),ce]),_:1})])]),default:l(()=>[(i(!0),T(x,null,I(v(d).supplierLevelList,t=>(i(),y(s,{key:t.tenantSupplierLevelId,value:t.tenantSupplierLevelId,label:t.levelNameOrAdditionRatio},null,8,["value","label"]))),128)),e(B,{size:"small",class:"buttonClass",onClick:N},{default:l(()=>[_(" 快捷新增 "),be]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"所属区域",prop:"subordinateCountryId"},{default:l(()=>[e(c,{clearable:"",filterable:"",modelValue:a.leftTab.subordinateCountryId,"onUpdate:modelValue":o[3]||(o[3]=t=>a.leftTab.subordinateCountryId=t),onChange:E},{default:l(()=>[(i(!0),T(x,null,I(v(d).countryList,t=>(i(),y(s,{key:t.id,value:t.id,label:t.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"供应商姓名"},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.supplierName,"onUpdate:modelValue":o[4]||(o[4]=t=>a.leftTab.supplierName=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"手机号码",prop:"supplierPhone"},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.supplierPhone,"onUpdate:modelValue":o[5]||(o[5]=t=>a.leftTab.supplierPhone=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"电子邮箱",prop:"emailAddress"},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.emailAddress,"onUpdate:modelValue":o[6]||(o[6]=t=>a.leftTab.emailAddress=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:8},{default:l(()=>[e(u,{label:"结算周期"},{default:l(()=>[e(c,{modelValue:a.leftTab.settlementCycle,"onUpdate:modelValue":o[7]||(o[7]=t=>a.leftTab.settlementCycle=t)},{default:l(()=>[e(s,{label:"net 30",value:30}),e(s,{label:"net 60",value:60}),e(s,{label:"net 90",value:90}),e(s,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:10},{default:l(()=>[e(n,{span:8},{default:l(()=>[a.leftTab.type==="company"?(i(),y(u,{key:0,label:"公司名称"},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.companyName,"onUpdate:modelValue":o[8]||(o[8]=t=>a.leftTab.companyName=t)},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1}),e(n,{span:8},{default:l(()=>[a.leftTab.type==="company"?(i(),y(u,{key:0,label:"法人姓名",prop:""},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.legalPersonName,"onUpdate:modelValue":o[9]||(o[9]=t=>a.leftTab.legalPersonName=t)},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1}),e(n,{span:8},{default:l(()=>[a.leftTab.type==="company"?(i(),y(u,{key:0,label:"公司税号",prop:""},{default:l(()=>[e(b,{clearable:"",modelValue:a.leftTab.taxID,"onUpdate:modelValue":o[10]||(o[10]=t=>a.leftTab.taxID=t)},null,8,["modelValue"])]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1}),e(q,{class:"box-card"},{header:l(()=>[ve]),default:l(()=>[e(g,{gutter:10},{default:l(()=>[e(n,{span:3},{default:l(()=>[e(u,{label:"调查系统"},{default:l(()=>[e(C,{modelValue:a.leftTab.surveySystem,"onUpdate:modelValue":o[11]||(o[11]=t=>a.leftTab.surveySystem=t),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(u,{label:"B2B"},{default:l(()=>[e(C,{modelValue:a.leftTab.b2bStatus,"onUpdate:modelValue":o[12]||(o[12]=t=>a.leftTab.b2bStatus=t),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:4},{default:l(()=>[e(u,{label:"B2C"},{default:l(()=>[e(C,{modelValue:a.leftTab.b2cStatus,"onUpdate:modelValue":o[13]||(o[13]=t=>a.leftTab.b2cStatus=t),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:3},{default:l(()=>[e(u,{label:"供应商状态"},{default:l(()=>[e(C,{modelValue:a.leftTab.supplierStatus,"onUpdate:modelValue":o[14]||(o[14]=t=>a.leftTab.supplierStatus=t),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:20},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,null,{label:l(()=>[p("div",null,[e(Q,{class:"tooltips",placement:"top"},{content:l(()=>[_e]),default:l(()=>[e(H,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1}),_(" 授权区域 ")])]),default:l(()=>[e(c,{onChange:G,modelValue:a.leftTab.relevanceCountryIdList,"onUpdate:modelValue":o[16]||(o[16]=t=>a.leftTab.relevanceCountryIdList=t),clearable:"",filterable:"",multiple:"","collapse-tags":""},{header:l(()=>[e(J,{modelValue:v(d).checked,"onUpdate:modelValue":o[15]||(o[15]=t=>v(d).checked=t),onChange:Z,style:{display:"flex",height:"unset"}},{default:l(()=>[_("全球")]),_:1},8,["modelValue"])]),default:l(()=>[(i(!0),T(x,null,I(v(d).countryList,t=>(i(),y(s,{key:t.id,value:t.id,label:t.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})]),_:1},8,["modelValue"]),e(re,{ref_key:"EditRef",ref:U,onQueryData:P},null,512)])}}}),he=se(ge,[["__scopeId","data-v-70f87868"]]);export{he as default};
