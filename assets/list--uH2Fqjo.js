
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as h,d as A,r as V,k as $,a as d,p as M,q as W,o as T,b as B,f as e,w as l,g as _,E as q,aB as D,ao as z,R as Q}from"./index-BzjzRFt1.js";import{u as Z}from"./index-x9dy0DX7.js";import"./clipboard-fzx_sNWM.js";const k={list:()=>h.post("supplier-config/getSupplierConfig"),create:b=>h.post("supplier-config/insertSupplierConfig",b),edit:b=>h.post("supplier-config/updateSupplierConfig",b)},H=A({name:"site_setting",__name:"list",setup(b){const{toClipboard:N}=Z(),L=V("基本设置"),i=V(!1),p=V(),a=V({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:"",externalSite:"",defaultPriceRatio:null,taxRate:null,minimumAmount:null,phone:"",email:"",qqCode:"",address:""}),y=V({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}],phone:[{required:!1,trigger:"submit",message:"请输入手机号"},{validator:(s,t,m)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.value.phone)?m():m(new Error("请输入合法手机号"))},trigger:"submit"}],email:[{required:!1,trigger:"submit",message:"请输入邮箱"},{validator:(s,t,m)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.value.email)?m():m(new Error("请输入合法邮箱"))},trigger:"submit"}]});$(()=>{x()});async function x(){try{i.value=!0;const{data:s}=await k.list();a.value=s||a.value,i.value=!1}catch{}finally{i.value=!1}}const P=()=>{const s=`${a.value.supplierURL}.front-supplier.surveyssaas.com`;N(s),q({type:"success",message:"复制成功"})};function w(){a.value.email===""&&(y.value.email=[],p.value.clearValidate("email")),a.value.phone===""&&(y.value.phone=[],p.value.clearValidate("phone")),a.value.id===""?p.value&&p.value.validate(s=>{if(s)try{i.value=!0,delete a.value.id,k.create(a.value).then(()=>{i.value=!1,x(),q.success({message:"新增成功",center:!0})})}catch{}finally{i.value=!1}}):p.value&&p.value.validate(s=>{if(s)try{let{id:t,keyWords:m,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:n,webName:r,externalSite:O,defaultPriceRatio:v,taxRate:c,minimumAmount:g,phone:U,email:C,qqCode:E,address:R}=a.value;const u={id:t,keyWords:m,registerExamineOffOrOn:f,registerOffOrOn:o,supplierURL:n,webName:r,externalSite:O,defaultPriceRatio:v,taxRate:c,minimumAmount:g,phone:U,email:C,qqCode:E,address:R};i.value=!0,k.edit(u).then(S=>{i.value=!1,S.status===1&&(x(),q.success({message:"修改成功",center:!0}))})}catch{}finally{i.value=!1}})}return(s,t)=>{const m=D,f=d("el-switch"),o=d("el-form-item"),n=d("el-col"),r=d("el-input"),O=d("el-text"),v=d("el-button"),c=d("el-row"),g=d("el-tab-pane"),U=d("el-form"),C=d("el-tabs"),E=z,R=M("loading");return W((T(),B("div",null,[e(m,{title:"站点设置管理"}),e(E,null,{default:l(()=>[e(C,{modelValue:L.value,"onUpdate:modelValue":t[12]||(t[12]=u=>L.value=u),type:"border-card"},{default:l(()=>[e(U,{ref_key:"formRef",ref:p,model:a.value,rules:y.value,"label-width":"100px","label-position":"right",inline:!1},{default:l(()=>[e(g,{label:"基础设置",name:"基本设置"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(n,{span:3},{default:l(()=>[e(o,{label:"注册开关"},{default:l(()=>[e(f,{modelValue:a.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.registerOffOrOn=u),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:6},{default:l(()=>[e(o,{label:"注册审核"},{default:l(()=>[e(f,{modelValue:a.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.registerExamineOffOrOn=u),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"网站名称",prop:"webName"},{default:l(()=>[e(r,{modelValue:a.value.webName,"onUpdate:modelValue":t[2]||(t[2]=u=>a.value.webName=u),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"keyWords"},{default:l(()=>[e(r,{modelValue:a.value.keyWords,"onUpdate:modelValue":t[3]||(t[3]=u=>a.value.keyWords=u),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"个性化域名",prop:"supplierURL"},{default:l(()=>[e(r,{modelValue:a.value.supplierURL,"onUpdate:modelValue":t[4]||(t[4]=u=>a.value.supplierURL=u),style:{width:"8rem"}},null,8,["modelValue"]),e(O,{class:"mx-1"},{default:l(()=>[_(".front-supplier.surveyssaas.com")]),_:1}),e(v,{class:"copy",type:"primary",link:"",onClick:P},{default:l(()=>[_("复制")]),_:1})]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"顶级域名"},{default:l(()=>[e(r,{modelValue:a.value.externalSite,"onUpdate:modelValue":t[5]||(t[5]=u=>a.value.externalSite=u),style:{width:"8rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,null,{default:l(()=>[e(v,{type:"primary",onClick:w},{default:l(()=>[_(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{label:"高级设置",name:"高级设置"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(n,{span:24},{default:l(()=>[e(o,{label:"最低结算金额",prop:""},{default:l(()=>[e(r,{modelValue:a.value.minimumAmount,"onUpdate:modelValue":t[6]||(t[6]=u=>a.value.minimumAmount=u),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"供应商税点",prop:""},{default:l(()=>[e(r,{modelValue:a.value.taxRate,"onUpdate:modelValue":t[7]||(t[7]=u=>a.value.taxRate=u),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[_("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,null,{default:l(()=>[e(v,{type:"primary",onClick:w},{default:l(()=>[_(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{label:"联系我们",name:"联系我们"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(n,{span:24},{default:l(()=>[e(o,{label:"电子邮箱",prop:"email"},{default:l(()=>[e(r,{style:{width:"18rem"},modelValue:a.value.email,"onUpdate:modelValue":t[8]||(t[8]=u=>a.value.email=u),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"手机号码",prop:"phone"},{default:l(()=>[e(r,{style:{width:"18rem"},modelValue:a.value.phone,"onUpdate:modelValue":t[9]||(t[9]=u=>a.value.phone=u),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"QQ号码",prop:""},{default:l(()=>[e(r,{style:{width:"18rem"},modelValue:a.value.qqCode,"onUpdate:modelValue":t[10]||(t[10]=u=>a.value.qqCode=u),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,{label:"公司地址",prop:""},{default:l(()=>[e(r,{style:{width:"18rem"},modelValue:a.value.address,"onUpdate:modelValue":t[11]||(t[11]=u=>a.value.address=u),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(o,null,{default:l(()=>[e(v,{type:"primary",onClick:w},{default:l(()=>[_("确认")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])),[[R,i.value]])}}}),K=Q(H,[["__scopeId","data-v-7f573906"]]);export{K as default};
