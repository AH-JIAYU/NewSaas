
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ne}from"./index-DIeqV6it.js";import{d as re,r as j,l as ie,c as z,n as ce,a as v,o as l,b as u,f as o,aJ as ue,i as e,w as t,bn as A,bo as N,N as S,y as r,z as n,g as f,e as h,j as k,F as C,t as Q,A as de,E as K,aH as fe,aI as me,L as pe}from"./index-DlUJUCOk.js";import{v as _e}from"./index-C3g6LdD0.js";import{g as ye,a as ge}from"./zh_Hans-BB41844o.js";import{f as ve}from"./file-BhdkLGEx.js";import{o as he}from"./apiLoading-Bq7NGZ5f.js";import{a as V}from"./projectManagement-CzDLHufn.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-Cs-8Kma0.js";import{D as ke}from"./download-C8PHVIy1.js";import{u as be}from"./user_customer-CghNPLZg.js";import"./index-BXvqP47p.js";import"./user_customer-Htrr1Wpi.js";const je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMpJREFUOE/NkrFpw1AYhO9kPVuV8ABpMoFXUJFBXLgz6NkIQ0YIBJE8QcqABkmhFTSBmwwQVMmSeOdKRYIIwpWvPPj+/w6OuFG8kcOdgJ21b77vP1bGLDpptyqK099Kk1F7azMvPYFsKVXLonD/guftNnqI4wxkJOAZ0iDyPQB+wrrOWVXDeODXRyVJOGw2mQfWlA4gQwIvkNrvpskfy7KdBEezS1MrMoEUBeSXcS6f1fGSpq/w/lPeD4Ex+6Vzx1ngnFHcyQDmRL0C0uVHD8d5KiAAAAAASUVORK5CYII=",T=D=>(fe("data-v-cf60f2e2"),D=D(),me(),D),xe={style:{"margin-left":"25.5%"}},Ie={style:{"margin-left":"19.5%"}},we={style:{"margin-left":"12.5%"}},Le={style:{"margin-left":"8.5%"}},Ae={style:{"margin-left":"28.5%"}},Ne={class:"card-header"},Ce={class:"leftTitle"},Te={class:"m-4 spanStatus"},De={class:"rightStatus"},Pe={class:"copyId"},Oe=T(()=>r("div",{class:"card-header"},[r("span",null,"其他设置")],-1)),Qe={key:0,class:"open"},Ve={key:1,class:"close"},Ue={key:0,class:"open"},Be={key:1,class:"close"},Fe={key:0,class:"open"},Ee={key:1,class:"close"},Re={key:0,class:"open"},Me={key:1,class:"close"},ze={key:0,class:"open"},Ke={key:1,class:"close"},Je={class:"peizjo-header"},Xe=T(()=>r("span",null,"配置信息",-1)),qe={key:0,style:{"margin-left":"50px","font-weight":"700","margin-right":"10px"}},Ye={class:"quotaInfoDiv"},Ge=["src"],$e={class:"tableBig"},He={key:0,class:"answer"},We=T(()=>r("div",{class:"card-header"},[r("span",null,"安全信息")],-1)),Ze={key:0,class:"open"},et={key:1,class:"close"},tt=T(()=>r("div",{class:"card-header"},[r("span",null,"描述配额")],-1)),at={class:"radius p-2 flex gap-2"},ot=T(()=>r("div",{class:"card-header"},[r("span",null,"操作日志")],-1)),st={class:"flex-c"},lt=re({name:"ProjectDetails",__name:"index",setup(D,{expose:J}){const X=be(),U=j([]),B=ie();j("# Fantastic-admin");const F=j(),d=j(1),a=j({form:{},imgUrl:[],isOnline:"",allocationStatus:"",projectType:1,srcList:[],countryList:[]}),P=j();ye({locale:ge});const q=["新增","编辑","分配","调度"];function Y(p){F.value.showEdit(p)}const I=j(!1);async function G(p,y){a.value.projectType=y,a.value.isOnline=p.isOnline,a.value.allocationStatus=p.allocationStatus;const _=await he(V.detail({projectId:p.projectId}));a.value.form=_.data,d.value=_.data.projectSettlementStatusSet[0].settlementStatus,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((g,s)=>(g.find(c=>c.settlementStatus===s.settlementStatus)||g.push(s),g),[]).sort((g,s)=>g.settlementStatus-s.settlementStatus),P.value=a.value.form.descriptionUrl.split(","),P.value.length&&P.value.forEach(async g=>{if(g){const s=await ve.detail({fileName:g});a.value.imgUrl.push(s.data.fileUrl),a.value.srcList.push(s.data.fileUrl)}}),$(),I.value=!0}const $=async()=>{if(a.value.form.projectQuotaInfoList.length){const p=await V.getProjectCountryList({countryIdList:a.value.form.countryIdList}),y={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},_=await V.getProjectCategoryList(y),g=E(p.data.getProjectCountryListInfoList,"countryId",y.countryId),s=E(_.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=g.countryName,a.value.form.projectProblemCategoryName=s.projectProblemCategoryName}},E=(p,y,_)=>p.find(g=>g[y]===_),O=z(()=>p=>a.value.countryList.filter(_=>p.includes(_.id)).map(_=>_.chineseName));async function H(p){try{await navigator.clipboard.writeText(p),K.success({message:"已复制文本",center:!0})}catch{K.warning({message:"复制失败,请重试",center:!0})}}async function W(p,y){await ke(a.value.imgUrl[y],p)}function R(){a.value.srcList=[],I.value=!1}const Z=z(()=>U.value.find(p=>p.tenantCustomerId===a.value.form.clientId));return ce(async()=>{a.value.countryList=await B.getCountry(),U.value=await X.getCustomerList()}),J({showEdit:G}),(p,y)=>{const _=v("el-step"),g=v("el-steps"),s=v("el-col"),b=v("el-row"),c=v("el-text"),ee=ne,m=v("el-form-item"),te=v("el-link"),w=v("el-button"),x=v("el-card"),ae=v("el-image"),L=v("el-table-column"),oe=v("el-table"),se=v("ElForm"),le=v("el-drawer");return l(),u("div",null,[o(le,{modelValue:e(I),"onUpdate:modelValue":y[1]||(y[1]=i=>de(I)?I.value=i:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",onClose:R,size:"55%",title:"项目详情"},ue({footer:t(()=>[r("div",st,[o(w,{type:"primary",onClick:R},{default:t(()=>[f(" 关闭 ")]),_:1})])]),default:t(()=>[o(se,null,{default:t(()=>[o(x,{class:"box-card"},{header:t(()=>[r("div",Ne,[r("div",Ce,[f(" 基本信息 "),r("span",Te,n(e(a).allocationStatus===1?"未分配":"已分配"),1)]),r("div",De,[r("span",{class:S(e(a).isOnline===1?"isOnlineSpanTrue":"isOnlineSpanFalse")},null,2),r("div",{class:S(e(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},n(e(a).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[o(b,{gutter:10},{default:t(()=>[o(s,{span:8},{default:t(()=>[o(m,{label:"项目ID :"},{default:t(()=>[r("div",Pe,[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.projectId?e(a).form.projectId:"-"),1)]),_:1}),o(ee,{class:"copy",content:e(a).form.projectId},null,8,["content"])])]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"项目名称 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.name?e(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.projectIdentification?e(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(l(),h(s,{key:0,span:8},{default:t(()=>[o(m,{label:"所属客户 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>{var i;return[f(n((i=e(Z))==null?void 0:i.customerAccord),1)]}),_:1})]),_:1})]),_:1})):k("",!0),o(s,{span:8},{default:t(()=>[o(m,{label:"所属区域 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(O)(e(a).form.countryIdList).length>4?(l(),h(te,{key:0,type:"primary"},{default:t(()=>[f(n(e(O)(e(a).form.countryIdList).length===e(B).country.length?"全球":e(O)(e(a).form.countryIdList).length),1)]),_:1})):(l(!0),u(C,{key:1},Q(e(O)(e(a).form.countryIdList),i=>(l(),u("span",{key:i},n(i)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(l(),h(s,{key:1,span:8},{default:t(()=>[o(m,{label:"项目价 :"},{default:t(()=>[e(a).form.currencyType===1?(l(),h(c,{key:0,class:"mx-1"},{default:t(()=>[f(n(e(a).form.doMoneyPrice?e(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):k("",!0),e(a).form.currencyType===2?(l(),h(c,{key:1,class:"mx-1"},{default:t(()=>[f(n(e(a).form.doMoneyPrice?e(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):k("",!0)]),_:1})]),_:1})):k("",!0),o(s,{span:8},{default:t(()=>[o(m,{label:"配额 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.num?e(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"最小时长 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.minimumDuration?e(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"IR/NIR :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.ir?e(a).form.ir+"%":e(a).form.ir)+" / "+n(e(a).form.nir?e(a).form.nir+"%":e(a).form.nir),1)]),_:1})]),_:1})]),_:1}),o(s,{span:12},{default:t(()=>[o(m,{label:"URL :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.uidUrl?e(a).form.uidUrl:"-")+" ",1),o(w,{type:"primary",style:{"margin-left":"auto"},onClick:y[0]||(y[0]=i=>H(e(a).form.uidUrl)),link:""},{default:t(()=>[f(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(x,{class:"box-card"},{header:t(()=>[Oe]),default:t(()=>[o(b,{gutter:10},{default:t(()=>[o(s,{span:8},{default:t(()=>[o(m,{label:"置顶 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isPinned===1?(l(),u("div",Qe,"开启")):(l(),u("div",Ve,"关闭"))]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"在线 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isOnline===1?(l(),u("div",Ue,"开启")):(l(),u("div",Be,"关闭"))]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"资料 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isProfile===2?(l(),u("div",Fe,"开启")):(l(),u("div",Ee,"关闭"))]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"B2B :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isPinned===1?(l(),u("div",Re,n(e(a).form.projectType.join(",")),1)):(l(),u("div",Me,"关闭"))]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"定时发布 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isTimeReleases===2?(l(),u("div",ze," 开 ")):(l(),u("div",Ke,"关闭"))]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"备注 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).formNaNpxark?e(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(l(),h(x,{key:0,class:"box-card"},{header:t(()=>[r("div",Je,[Xe,e(a).form.projectProblemCategoryName?(l(),u("span",qe,"问卷名称："+n(e(a).form.projectProblemCategoryName),1)):k("",!0),e(a).form.countryName?(l(),h(w,{key:1,type:"primary",plain:"",size:"small"},{default:t(()=>[f(n(e(a).form.countryName),1)]),_:1})):k("",!0)])]),default:t(()=>[o(b,{gutter:10,class:S(e(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[o(s,{span:8}),o(s,{span:8}),(l(!0),u(C,null,Q(e(a).form.projectQuotaInfoList,i=>(l(),h(s,{span:24,class:S({isNone:!e(a).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[r("div",Ye,[r("div",{class:S({bottom:!i.answerValueList})},[r("img",{src:e(je)},null,8,Ge),r("span",$e,n(i.keyValue),1)],2),i.answerValueList&&i.answerValueList[0]!=="null"?(l(),u("div",He,n(i.answerValueList.join(", ")),1)):k("",!0)])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1})):k("",!0),o(x,{class:"box-card"},{header:t(()=>[We]),default:t(()=>[o(b,{gutter:20},{default:t(()=>[o(s,{span:8},{default:t(()=>[o(m,{label:"小时准入量 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.preNum?e(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"小时完成量 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[f(n(e(a).form.limitedQuantity?e(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(m,{label:"重复参与:"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.ipDifferenceDetection===1?(l(),u("div",Ze," 开 ")):(l(),u("div",et,"关"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(a).form.descriptionUrl?(l(),h(x,{key:1,class:"box-card"},{header:t(()=>[tt]),default:t(()=>[e(a).form.descriptionUrl?(l(),u(C,{key:0},[(l(!0),u(C,null,Q(e(a).srcList,i=>(l(),u("div",{key:i,class:"demo-image__preview"},[o(ae,{style:{width:"6.25rem",height:"6.25rem"},src:i,"preview-src-list":i,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]))),128)),(l(!0),u(C,null,Q(e(P),(i,M)=>(l(),u("p",{key:i},[o(w,{style:{padding:"0"},type:"primary",text:"",onClick:nt=>W(i,M)},{default:t(()=>[f(n(i)+" 下载 ",1)]),_:2},1032,["onClick"])]))),128))],64)):k("",!0),o(b,{class:S({isNone:!e(a).form.descriptionUrl}),gutter:20},{default:t(()=>[o(s,{span:24},{default:t(()=>[r("div",at,[o(e(_e),{value:e(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):k("",!0),e(a).projectType===1?(l(),h(x,{key:2,class:"box-card"},{header:t(()=>[ot]),default:t(()=>[o(oe,{data:e(a).form.projectOperationInfoList,style:{width:"100%"}},{default:t(()=>[o(L,{align:"left",type:"index",width:"80",label:"序号"}),o(L,{align:"left",prop:"operationTime",label:"操作时间"}),o(L,{align:"left",prop:"operationName",label:"操作人"}),o(L,{align:"left",prop:"operationType",label:"操作事项"},{default:t(({row:i})=>[f(n(q[i.operationType-1]),1)]),_:1}),o(L,{align:"left",label:"详情"},{default:t(({row:i})=>[i.operationType!==1?(l(),h(w,{key:0,type:"primary",link:"",onClick:M=>Y(i)},{default:t(()=>[f(" 详情 ")]),_:2},1032,["onClick"])):(l(),h(c,{key:1},{default:t(()=>[f("-")]),_:1}))]),_:1})]),_:1},8,["data"])]),_:1})):k("",!0)]),_:1})]),_:2},[e(a).form.projectSettlementStatusSet&&e(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:t(()=>[o(b,{gutter:20},{default:t(()=>[o(s,{span:24},{default:t(()=>[o(g,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:e(d)},{default:t(()=>[o(_,{title:"待审核",description:e(d)>=1?e(a).form.projectSettlementStatusSet[0].operationTime:"-",icon:e(d)>=1?e(A):e(N)},null,8,["description","icon"]),o(_,{title:"已审核",description:e(d)>=2?e(a).form.projectSettlementStatusSet[1].operationTime:"-",icon:e(d)>=2?e(A):e(N)},null,8,["description","icon"]),o(_,{title:"已开票",description:e(d)>=3?e(a).form.projectSettlementStatusSet[2].operationTime:"-",icon:e(d)>=3?e(A):e(N)},null,8,["description","icon"]),o(_,{title:"已结算",description:e(d)>=4?e(a).form.projectSettlementStatusSet[3].operationTime:"-",icon:e(d)>=4?e(A):e(N)},null,8,["description","icon"]),o(_,{title:"已冻结",description:e(d)>=5?e(a).form.projectSettlementStatusSet[4].operationTime:"-",icon:e(d)>=5?e(A):e(N)},null,8,["description","icon"])]),_:1},8,["active"])]),_:1}),o(b,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:t(()=>[o(s,{span:1}),o(s,{class:S({colorgreen:e(d)>=1}),span:5},{default:t(()=>[r("span",xe,n(e(d)>=1?e(a).form.projectSettlementStatusSet[0].operationName:"暂无"),1)]),_:1},8,["class"]),o(s,{class:S({colorgreen:e(d)>=2}),span:5},{default:t(()=>[r("span",Ie,n(e(d)>=2?e(a).form.projectSettlementStatusSet[1].operationName:"暂无"),1)]),_:1},8,["class"]),o(s,{class:S({colorgreen:e(d)>=3}),span:5},{default:t(()=>[r("span",we,n(e(d)>=3?e(a).form.projectSettlementStatusSet[2].operationName:"暂无"),1)]),_:1},8,["class"]),o(s,{class:S({colorgreen:e(d)>=4}),span:4},{default:t(()=>[r("span",Le,n(e(d)>=4?e(a).form.projectSettlementStatusSet[3].operationName:"暂无"),1)]),_:1},8,["class"]),o(s,{class:S({colorgreen:e(d)>=5}),span:4},{default:t(()=>[r("span",Ae,n(e(d)>=5?e(a).form.projectSettlementStatusSet[4].operationName:"暂无"),1)]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),o(Se,{ref_key:"logDetailsRef",ref:F},null,512)])}}}),ht=pe(lt,[["__scopeId","data-v-cf60f2e2"]]);export{ht as default};
