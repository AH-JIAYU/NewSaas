
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as b}from"./third-WeIZet9U.js";import{d as x,r as c,n as q,a as i,o as N,b as R,f as l,w as o,i as t,g as w,B as h,E as I,M as O}from"./index-puGejJ6c.js";const B={style:{"margin-left":"30px"}},F=x({name:"Qiniu",__name:"index",setup(M){const p=c("first"),s=c({accessKeyId:"",accessKeySecret:"",bucketName:"",activeState:0,domain:"",region:""}),r=c({accessKey:"",secretKey:"",bucket:"",activeState:0,domain:""}),m=(u,e,f)=>{/[\u4e00-\u9fa5]/.test(e)?f(new Error("不能输入汉字")):f()},C=c({accessKeyId:[{required:!0,message:"请输入阿里云AccessKeyId",trigger:"blur"},{validator:m,trigger:"blur"}],accessKeySecret:[{required:!0,trigger:"blur",message:"请输入阿里云AccessKeySecret"},{validator:m,trigger:"blur"}]}),E=c({appId:[{required:!0,message:"请输入七牛云appId",trigger:"blur"},{validator:m,trigger:"blur"}],accessKey:[{required:!0,message:"请输入七牛云AccessKeyId",trigger:"blur"},{validator:m,trigger:"blur"}],secretKey:[{required:!0,trigger:"blur",message:"请输入七牛云AccessKeySecret"},{validator:m,trigger:"blur"}]}),y=c(),g=c(),A=()=>{y.value&&y.value.validate(async u=>{if(u)try{s.value.activeState=s.value.activeState==1?s.value.activeState:"0",(await b.updateAliConfig(s.value)).status===1&&(v(),I.success({message:"修改成功",center:!0}))}catch(e){console.log("error",e)}finally{}})},U=()=>{g.value&&g.value.validate(async u=>{if(u)try{r.value.activeState=r.value.activeState==1?r.value.activeState:"0",(await b.updateQiniuConfig(r.value)).status===1&&(v(),I.success({message:"修改成功",center:!0}))}catch(e){console.log("error",e)}finally{}})};q(()=>{v()});async function v(){try{const{data:u,status:e}=await b.getConfigList();u&&e===1&&(u.aliCloudOssConfig&&u.aliCloudOssConfig!=null&&(s.value=u.aliCloudOssConfig),u.qiniuOssConfig&&u.qiniuOssConfig!=null&&(r.value=u.qiniuOssConfig))}catch{}finally{}}return(u,e)=>{const f=i("ElSwitch"),d=i("ElFormItem"),n=i("ElInput"),V=i("ElButton"),_=i("ElForm"),K=i("el-row"),S=i("el-tab-pane"),k=i("el-tabs");return N(),R("div",B,[l(k,{modelValue:t(p),"onUpdate:modelValue":e[11]||(e[11]=a=>h(p)?p.value=a:null)},{default:o(()=>[l(S,{label:"阿里云配置",name:"first"},{default:o(()=>[l(K,{gutter:20},{default:o(()=>[l(_,{model:t(s),ref_key:"formRef1",ref:y,"label-width":"150px","label-position":"right",inline:!1,rules:t(C)},{default:o(()=>[l(d,{label:"是否启用:"},{default:o(()=>[l(f,{modelValue:t(s).activeState,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).activeState=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),l(d,{label:"AccessKeyId:",prop:"accessKeyId"},{default:o(()=>[l(n,{modelValue:t(s).accessKeyId,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).accessKeyId=a),placeholder:"请输入阿里云AccessKeyId",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"AccessKeySecret:",prop:"accessKeySecret"},{default:o(()=>[l(n,{modelValue:t(s).accessKeySecret,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).accessKeySecret=a),placeholder:"请输入阿里云AccessKeySecret",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"空间名称:"},{default:o(()=>[l(n,{modelValue:t(s).bucketName,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).bucketName=a),placeholder:"请输入阿里云空间名称",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"空间域名:"},{default:o(()=>[l(n,{modelValue:t(s).domain,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).domain=a),placeholder:"请输入阿里云空间域名",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"空间区域:"},{default:o(()=>[l(n,{modelValue:t(s).region,"onUpdate:modelValue":e[5]||(e[5]=a=>t(s).region=a),placeholder:"请输入阿里云空间区域",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,null,{default:o(()=>[l(V,{type:"primary",onClick:A},{default:o(()=>[w(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1}),l(S,{label:"七牛云配置",name:"second"},{default:o(()=>[l(K,{gutter:20},{default:o(()=>[l(_,{model:t(r),"label-width":"150px","label-position":"right",inline:!1,ref_key:"formRef2",ref:g,rules:t(E)},{default:o(()=>[l(d,{label:"是否启用:"},{default:o(()=>[l(f,{modelValue:t(r).activeState,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).activeState=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),l(d,{label:"AccessKeyId:",prop:"accessKey"},{default:o(()=>[l(n,{modelValue:t(r).accessKey,"onUpdate:modelValue":e[7]||(e[7]=a=>t(r).accessKey=a),placeholder:"请输入七牛云AccessKeyId",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"AccessKeySecret:",prop:"secretKey"},{default:o(()=>[l(n,{modelValue:t(r).secretKey,"onUpdate:modelValue":e[8]||(e[8]=a=>t(r).secretKey=a),placeholder:"请输入七牛云AccessKeySecret",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"空间名称:"},{default:o(()=>[l(n,{modelValue:t(r).bucket,"onUpdate:modelValue":e[9]||(e[9]=a=>t(r).bucket=a),placeholder:"请输入七牛云空间名称",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,{label:"空间域名:"},{default:o(()=>[l(n,{modelValue:t(r).domain,"onUpdate:modelValue":e[10]||(e[10]=a=>t(r).domain=a),placeholder:"请输入七牛云空间域名",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(d,null,{default:o(()=>[l(V,{type:"primary",onClick:U},{default:o(()=>[w(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),D=O(F,[["__scopeId","data-v-d1ced7b5"]]);export{D as default};
