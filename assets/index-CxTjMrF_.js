
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Le,r as c,aN as xe,a3 as He,c as De,n as Ie,a as h,q as Ee,o as s,b as V,f as n,w as i,i as l,g as _,A as y,s as Ne,e as r,aM as Me,j as u,y as t,z as f,N as L,be as Fe,E as Pe,b9 as Ae,ba as Be,_ as Te,bd as ze,ap as Re,aH as Ze,aI as $e,L as Ue}from"./index-76DYku8x.js";import{_ as je}from"./index-C5quodiR.js";import{_ as Oe}from"./index.vue_vue_type_style_index_0_lang-BNtUAZXC.js";import{_ as qe}from"./index-c3t90-7B.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-DoqCiAoC.js";import Ge from"./index-DgVt6Y1z.js";import{_ as Je}from"./index.vue_vue_type_script_setup_true_lang-CqCU7tvp.js";import Ke from"./index-De4QO3eb.js";import{u as We}from"./configuration_supplierLevel-BMpXKvH8.js";import{s as Xe}from"./apiLoading-D77JxuCS.js";import{a as K}from"./user_supplier-DpbuWcGJ.js";import{U as Ye}from"./user_supplier-Cw2dLLN8.js";import"./index-BTabDxVO.js";import"./index.vue_vue_type_script_setup_true_lang-BaAnfl5j.js";import"./sortable.esm-C0-Qcoum.js";import"./index.vue_vue_type_script_setup_true_lang-CumdTa3D.js";import"./index.vue_vue_type_script_setup_true_lang-DyAOESWu.js";import"./index-CITAi1n8.js";import"./user_customer-C4lNaqcO.js";import"./user_customer-7cLfYEv3.js";import"./stagedData-MW3o5yNT.js";import"./index.vue_vue_type_script_setup_true_lang-Y04ypeNZ.js";const C=x=>(Ze("data-v-88fb68d5"),x=x(),$e(),x),et={class:"flex-c tableBig"},tt={class:"oneLine",style:{width:"calc(100% - 20px)"}},lt={class:"copyId tableSmall"},ot={class:"id oneLine"},nt={class:"flex-c tableBig"},it={class:"oneLine",style:{width:"calc(100% - 20px)"}},at={class:"tableBig"},st={class:"tableBig"},rt={class:"flex-s",style:{"justify-content":"center !important"}},ct={key:0,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pt=C(()=>t("g",{id:"Frame","clip-path":"url(#clip0_409_28184)"},[t("path",{id:"Vector",d:"M13.6223 13.2878H1.375C1.28477 13.2878 1.21094 13.214 1.21094 13.1237V0.876465C1.21094 0.78623 1.28477 0.712402 1.375 0.712402H13.6236C13.7139 0.712402 13.7877 0.78623 13.7877 0.876465V13.1251C13.7863 13.2153 13.7139 13.2878 13.6223 13.2878Z",fill:"#409EFF"}),t("path",{id:"Vector_2",d:"M12.3645 14H2.63555C1.4584 14 0.5 13.0416 0.5 11.8645V2.13555C0.5 0.958398 1.4584 0 2.63555 0H12.3645C13.5416 0 14.5 0.958398 14.5 2.13555V11.8645C14.5 13.0416 13.5416 14 12.3645 14ZM2.63555 1.42324C2.24316 1.42324 1.92324 1.74316 1.92324 2.13555V11.8645C1.92324 12.2568 2.24316 12.5768 2.63555 12.5768H12.3645C12.7568 12.5768 13.0768 12.2568 13.0768 11.8645V2.13555C13.0768 1.74316 12.7568 1.42324 12.3645 1.42324H2.63555Z",fill:"#409EFF"}),t("path",{id:"Vector_3",d:"M6.24753 11.0141C6.10124 11.0141 5.95359 10.969 5.82781 10.8774L2.39343 8.36725C2.07624 8.13483 2.00652 7.69049 2.23894 7.37194C2.47136 7.05475 2.91706 6.98502 3.23425 7.21744L6.14909 9.34752L11.663 3.22116C11.9255 2.92858 12.3766 2.90533 12.6678 3.16784C12.9591 3.43034 12.9837 3.88151 12.7212 4.17272L6.778 10.7762C6.63718 10.9335 6.44304 11.0141 6.24753 11.0141Z",fill:"white"})],-1)),ut=C(()=>t("defs",null,[t("clipPath",{id:"clip0_409_28184"},[t("rect",{width:"14",height:"14",fill:"white",transform:"translate(0.5)"})])],-1)),dt=[pt,ut],mt={key:1,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ht=C(()=>t("g",{id:"Frame","clip-path":"url(#clip0_409_28364)"},[t("path",{id:"Vector",d:"M13.6223 13.1901H1.375C1.3387 13.1901 1.30859 13.16 1.30859 13.1237V0.876465C1.30859 0.840165 1.3387 0.810059 1.375 0.810059H13.6236C13.6599 0.810059 13.69 0.840164 13.69 0.876465V13.1242C13.6892 13.1611 13.66 13.1901 13.6223 13.1901Z",stroke:"#409EFF","stroke-width":"0.195312"}),t("path",{id:"Vector_2",d:"M12.3645 14H2.63555C1.4584 14 0.5 13.0416 0.5 11.8645V2.13555C0.5 0.958398 1.4584 0 2.63555 0H12.3645C13.5416 0 14.5 0.958398 14.5 2.13555V11.8645C14.5 13.0416 13.5416 14 12.3645 14ZM2.63555 1.42324C2.24316 1.42324 1.92324 1.74316 1.92324 2.13555V11.8645C1.92324 12.2568 2.24316 12.5768 2.63555 12.5768H12.3645C12.7568 12.5768 13.0768 12.2568 13.0768 11.8645V2.13555C13.0768 1.74316 12.7568 1.42324 12.3645 1.42324H2.63555Z",fill:"#DCDCDC"}),t("g",{id:"Group 18190"},[t("path",{id:"Vector_3",d:"M5 5L10 10",stroke:"#DCDCDC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{id:"Vector_4",d:"M5 10L10 5",stroke:"#DCDCDC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),_t=C(()=>t("defs",null,[t("clipPath",{id:"clip0_409_28364"},[t("rect",{width:"14",height:"14",fill:"white",transform:"translate(0.5)"})])],-1)),ft=[ht,_t],Ct=C(()=>t("span",{class:"mx-1"},"/",-1)),gt={key:2,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vt=C(()=>t("g",{id:"Frame","clip-path":"url(#clip0_409_28184)"},[t("path",{id:"Vector",d:"M13.6223 13.2878H1.375C1.28477 13.2878 1.21094 13.214 1.21094 13.1237V0.876465C1.21094 0.78623 1.28477 0.712402 1.375 0.712402H13.6236C13.7139 0.712402 13.7877 0.78623 13.7877 0.876465V13.1251C13.7863 13.2153 13.7139 13.2878 13.6223 13.2878Z",fill:"#409EFF"}),t("path",{id:"Vector_2",d:"M12.3645 14H2.63555C1.4584 14 0.5 13.0416 0.5 11.8645V2.13555C0.5 0.958398 1.4584 0 2.63555 0H12.3645C13.5416 0 14.5 0.958398 14.5 2.13555V11.8645C14.5 13.0416 13.5416 14 12.3645 14ZM2.63555 1.42324C2.24316 1.42324 1.92324 1.74316 1.92324 2.13555V11.8645C1.92324 12.2568 2.24316 12.5768 2.63555 12.5768H12.3645C12.7568 12.5768 13.0768 12.2568 13.0768 11.8645V2.13555C13.0768 1.74316 12.7568 1.42324 12.3645 1.42324H2.63555Z",fill:"#409EFF"}),t("path",{id:"Vector_3",d:"M6.24753 11.0141C6.10124 11.0141 5.95359 10.969 5.82781 10.8774L2.39343 8.36725C2.07624 8.13483 2.00652 7.69049 2.23894 7.37194C2.47136 7.05475 2.91706 6.98502 3.23425 7.21744L6.14909 9.34752L11.663 3.22116C11.9255 2.92858 12.3766 2.90533 12.6678 3.16784C12.9591 3.43034 12.9837 3.88151 12.7212 4.17272L6.778 10.7762C6.63718 10.9335 6.44304 11.0141 6.24753 11.0141Z",fill:"white"})],-1)),kt=C(()=>t("defs",null,[t("clipPath",{id:"clip0_409_28184"},[t("rect",{width:"14",height:"14",fill:"white",transform:"translate(0.5)"})])],-1)),bt=[vt,kt],yt={key:3,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wt=C(()=>t("g",{id:"Frame","clip-path":"url(#clip0_409_28364)"},[t("path",{id:"Vector",d:"M13.6223 13.1901H1.375C1.3387 13.1901 1.30859 13.16 1.30859 13.1237V0.876465C1.30859 0.840165 1.3387 0.810059 1.375 0.810059H13.6236C13.6599 0.810059 13.69 0.840164 13.69 0.876465V13.1242C13.6892 13.1611 13.66 13.1901 13.6223 13.1901Z",stroke:"#409EFF","stroke-width":"0.195312"}),t("path",{id:"Vector_2",d:"M12.3645 14H2.63555C1.4584 14 0.5 13.0416 0.5 11.8645V2.13555C0.5 0.958398 1.4584 0 2.63555 0H12.3645C13.5416 0 14.5 0.958398 14.5 2.13555V11.8645C14.5 13.0416 13.5416 14 12.3645 14ZM2.63555 1.42324C2.24316 1.42324 1.92324 1.74316 1.92324 2.13555V11.8645C1.92324 12.2568 2.24316 12.5768 2.63555 12.5768H12.3645C12.7568 12.5768 13.0768 12.2568 13.0768 11.8645V2.13555C13.0768 1.74316 12.7568 1.42324 12.3645 1.42324H2.63555Z",fill:"#DCDCDC"}),t("g",{id:"Group 18190"},[t("path",{id:"Vector_3",d:"M5 5L10 10",stroke:"#DCDCDC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{id:"Vector_4",d:"M5 10L10 5",stroke:"#DCDCDC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),St=C(()=>t("defs",null,[t("clipPath",{id:"clip0_409_28364"},[t("rect",{width:"14",height:"14",fill:"white",transform:"translate(0.5)"})])],-1)),Vt=[wt,St],Lt={class:"flex-c tableBig"},xt={class:"oneLine",style:{width:"calc(100% - 20px)"}},Ht={class:"flex-c tableBig"},Dt={class:"oneLine",style:{width:"calc(100% - 20px)"}},It=Le({name:"supplier",__name:"index",setup(x){const W=Ye(),{format:X}=Fe(),Y=We(),z=c([]),{pagination:v,getParams:ee,onSizeChange:te,onCurrentChange:le}=xe(),H=c(!1),R=c([]),oe=c(),A=c(),Z=c(),$=c(),U=c(),D=c(!1),I=c(!1),E=c("default"),p=c([]),N=c(!1),j=c(),ne=c("formSearch-supplier"),M=c([{label:"供应商ID",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"区域",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"可用余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"b2bStatus"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),k=He({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ie(){A.value.showEdit()}function ae(o){A.value.showEdit(o)}function se(o){Z.value.showEdit(o)}const b=c();function re(o){o?b.value=o.tenantSupplierId:b.value=""}function F(o,a){$.value.showEdit(o,a)}async function O(o,a){const w={status:o,tenantSupplierId:a},{status:T}=await Xe(K.changestatus(w));T===1&&Pe.success({message:"修改成功"}),B(),W.TenantSupplierList=null}function B(){v.value.page=1,g()}function ce(){Object.assign(k,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),g()}function pe(o){U.value.showEdit(JSON.stringify(o))}function ue(o){te(o).then(()=>g())}function q(o=1){le(o).then(()=>g())}async function g(){try{H.value=!0;const o={...ee(),...k};k.time&&k.time.length&&(o.beginTime=k.time[0]||"",o.endTime=k.time[1]||"");const{data:a}=await K.list(o);R.value=a.getTenantSupplierInfoList,v.value.total=a.total,H.value=!1}catch{}finally{H.value=!1}}function de(o){oe.value=o}const me=De(()=>o=>{const a=z.value.find(w=>w.tenantSupplierLevelId===o);return a==null?void 0:a.levelNameOrAdditionRatio});Ie(async()=>{M.value.forEach(o=>{o.checked&&p.value.push(o.prop)}),z.value=await Y.getLevelNameList(),B(),j.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"supplierAccord",placeholder:"供应商名称"},{index:3,show:!0,type:"input",modelName:"supplierPhone",placeholder:"手机号码"},{index:4,show:!0,type:"input",modelName:"accountName",placeholder:"账号名称"},{index:5,show:!0,type:"input",modelName:"emailAddress",placeholder:"邮箱"},{index:6,show:!0,type:"select",modelName:"supplierStatus",placeholder:"供应商状态",option:"supplierStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const he={supplierStatus:()=>[{label:"开启",value:2},{label:"关闭",value:1},{label:"待审批",value:3}]};return(o,a)=>{const w=qe,T=h("ElDivider"),S=h("el-button"),_e=Oe,fe=Ae,Ce=Be,ge=h("el-row"),m=h("el-table-column"),Q=h("ElSwitch"),P=Te,ve=je,G=ze,J=h("el-tag"),ke=h("ElSpace"),be=h("el-empty"),ye=h("el-table"),we=h("ElPagination"),Se=Re,Ve=Ee("loading");return s(),V("div",{class:L({"absolute-container":l(N)})},[n(Se,null,{default:i(()=>[n(w,{formSearchList:l(j),formSearchName:l(ne),onCurrentChange:q,onOnReset:ce,model:l(k),formOption:he},null,8,["formSearchList","formSearchName","model"]),n(T,{"border-style":"dashed"}),n(ge,null,{default:i(()=>[n(_e,null,{default:i(()=>[n(S,{type:"primary",size:"default",onClick:ie},{default:i(()=>[_(" 新增 ")]),_:1})]),_:1}),n(Ce,null,{default:i(()=>[n(S,{size:"default"},{default:i(()=>[_(" 导出 ")]),_:1}),n(fe,{border:l(D),"onUpdate:border":a[0]||(a[0]=e=>y(D)?D.value=e:null),tableAutoHeight:l(N),"onUpdate:tableAutoHeight":a[1]||(a[1]=e=>y(N)?N.value=e:null),checkList:l(p),"onUpdate:checkList":a[2]||(a[2]=e=>y(p)?p.value=e:null),columns:l(M),"onUpdate:columns":a[3]||(a[3]=e=>y(M)?M.value=e:null),"line-height":l(E),"onUpdate:lineHeight":a[4]||(a[4]=e=>y(E)?E.value=e:null),stripe:l(I),"onUpdate:stripe":a[5]||(a[5]=e=>y(I)?I.value=e:null),style:{"margin-left":"12px"},onQueryData:B},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Ne((s(),r(ye,{border:l(D),data:l(R),size:l(E),stripe:l(I),onSelectionChange:de,"highlight-current-row":"",onCurrentChange:re},{empty:i(()=>[n(be,{image:l(Me),"image-size":300},null,8,["image"])]),default:i(()=>[n(m,{align:"left",type:"selection"}),l(p).includes("supplierStatus")?(s(),r(m,{key:0,align:"left","show-overflow-tooltip":"",label:"供应商状态"},{default:i(({row:e})=>[e.supplierStatus===3?(s(),r(Q,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":d=>e.supplierStatus=d,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:d=>O(d,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),r(Q,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":d=>e.supplierStatus=d,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:d=>O(d,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):u("",!0),l(p).includes("supplierAccord")?(s(),r(m,{key:1,align:"left",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:i(({row:e})=>[t("div",et,[t("div",tt,f(e.supplierAccord),1),e.projectType!==2?(s(),r(P,{key:0,onClick:d=>F(e,"supplierAccord"),class:L({edit:"edit",current:e.tenantSupplierId===l(b)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):u("",!0)])]),_:1})):u("",!0),l(p).includes("tenantSupplierId")?(s(),r(m,{key:2,align:"left",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:i(({row:e})=>[t("div",lt,[t("div",ot,"ID: "+f(e.tenantSupplierId),1),n(ve,{class:"copy",content:e.tenantSupplierId},null,8,["content"])])]),_:1})):u("",!0),l(p).includes("supplierLevelId")?(s(),r(m,{key:3,align:"left",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:i(({row:e})=>[t("div",nt,[t("div",it,f(l(me)(e.supplierLevelId)),1),e.projectType!==2?(s(),r(P,{key:0,onClick:d=>F(e,"supplierLevelId"),class:L({edit:"edit",current:e.tenantSupplierId===l(b)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):u("",!0)])]),_:1})):u("",!0),l(p).includes("balanceHumanLife")?(s(),r(m,{key:4,align:"left",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:i(({row:e})=>[t("div",at,[n(G),_(f(e.balanceHumanLife||0),1)])]),_:1})):u("",!0),l(p).includes("amountPendingTrial")?(s(),r(m,{key:5,align:"left",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:i(({row:e})=>[t("div",st,[n(G),_(f(e.amountPendingTrial||0),1)])]),_:1})):u("",!0),l(p).includes("countryAffiliationName")?(s(),r(m,{key:6,align:"left",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"区域"},{default:i(({row:e})=>[n(J,{type:"primary"},{default:i(()=>[_(f(e.countryAffiliationName),1)]),_:2},1024)]),_:1})):u("",!0),l(p).includes("b2bStatus")?(s(),r(m,{key:7,align:"left","show-overflow-tooltip":"",label:"B2B/B2C"},{default:i(({row:e})=>[t("div",rt,[e.b2bStatus&&e.b2bStatus===2?(s(),V("svg",ct,dt)):(s(),V("svg",mt,ft)),Ct,e.b2cStatus&&e.b2cStatus===2?(s(),V("svg",gt,bt)):(s(),V("svg",yt,Vt))])]),_:1})):u("",!0),l(p).includes("settlementCycle")?(s(),r(m,{key:8,align:"left",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:i(({row:e})=>[t("div",Lt,[t("div",xt,f(e.settlementCycle?e.settlementCycle+"天":"-"),1),e.projectType!==2?(s(),r(P,{key:0,onClick:d=>F(e,"settlementCycle"),class:L({edit:"edit",current:e.tenantSupplierId===l(b)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):u("",!0)])]),_:1})):u("",!0),l(p).includes("createTime")?(s(),r(m,{key:9,align:"left",prop:"createTime","show-overflow-tooltip":"",label:"创建"},{default:i(({row:e})=>[n(J,{effect:"plain",type:"info"},{default:i(()=>[_(f(l(X)(e.createTime)),1)]),_:2},1024)]),_:1})):u("",!0),l(p).includes("remark")?(s(),r(m,{key:10,align:"left",prop:"remark",width:"180",label:"备注"},{default:i(({row:e})=>[t("div",Ht,[t("div",Dt,f(e.remark),1),e.projectType!==2?(s(),r(P,{key:0,onClick:d=>F(e,"remark"),class:L({edit:"edit",current:e.tenantSupplierId===l(b)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):u("",!0)])]),_:1})):u("",!0),n(m,{align:"left",prop:"i",label:"操作",fixed:"right",width:"250"},{default:i(({row:e})=>[n(ke,null,{default:i(()=>[n(S,{size:"small",plain:"",type:"primary",onClick:d=>pe(e)},{default:i(()=>[_(" 加减款 ")]),_:2},1032,["onClick"]),n(S,{size:"small",plain:"",type:"warning",onClick:d=>ae(e)},{default:i(()=>[_(" 编辑 ")]),_:2},1032,["onClick"]),n(S,{size:"small",plain:"",type:"danger",onClick:d=>se(e)},{default:i(()=>[_(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ve,l(H)]]),n(we,{"current-page":l(v).page,total:l(v).total,"page-size":l(v).size,"page-sizes":l(v).sizes,layout:l(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ue,onCurrentChange:q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),n(Qe,{ref_key:"editRef",ref:A,onFetchData:g},null,512),n(Ge,{ref_key:"checkRef",ref:Z,onFetchData:g},null,512),n(Ke,{ref_key:"QuickEditRef",ref:$,onFetchData:g},null,512),n(Je,{ref_key:"plusMinusPaymentsRef",ref:U,onFetchData:g},null,512)],2)}}}),Yt=Ue(It,[["__scopeId","data-v-88fb68d5"]]);export{Yt as default};
