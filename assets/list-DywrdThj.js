
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-BV6srKR8.js";import{d as W,O as X,aN as Y,r as $,k as Z,G as L,J as ee,a as d,p as te,o as u,b as ae,f as t,w as o,q as x,i as a,e as m,j as f,g as r,aC as oe,H as ne,S as le,E as B,aO as ie,aE as se,aq as re,N as de,R as ue}from"./index-gn7cIfcI.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-DyYcXcJD.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-CwHAj1Lr.js";import{a as C}from"./configuration_homepageSetting-CBPPCmo7.js";import"./index-rBVrvmXA.js";const pe=W({name:"TenantTenantHomepageSettingList",__name:"list",setup(fe){X();const{pagination:g,getParams:V,onSizeChange:T,onCurrentChange:H,onSortChange:I}=Y(),y=$(),e=$({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,row:"",id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],controlDataList:[]});Z(()=>{c(),e.value.formMode==="router"&&L.on("get-data-list",()=>{c()})}),ee(()=>{e.value.formMode==="router"&&L.off("get-data-list")});function c(){e.value.loading=!0;const l={...V(),...e.value.search.title&&{title:e.value.search.title}};C.list(l).then(n=>{e.value.loading=!1,e.value.controlDataList=n.data.controlData,e.value.dataList=n.data.data,g.value.total=Number(n.data.total)})}function N(l){T(l).then(()=>c())}function h(l=1){H(l).then(()=>c())}function k({prop:l,order:n}){I(l,n).then(()=>c())}function F(){e.value.formModeProps.id="",e.value.formModeProps.row="",e.value.formModeProps.visible=!0}function R(l){e.value.formModeProps.id=l.id,e.value.formModeProps.row=JSON.stringify(l),e.value.formModeProps.visible=!0}function w(l,n="编辑"){y.value.showEdit(l,n)}async function E(l){(await C.setHomePageTemplate({templateId:l.id})).status===1&&B.success({message:"设置成功",center:!0}),c()}function G(l){ie.confirm(`确认删除「${l.title}」吗？`,"确认信息").then(()=>{C.del({id:l.id}).then(n=>{n.status===1&&B.success({message:"删除成功",center:!0}),c()})}).catch(()=>{})}return(l,n)=>{const P=se,_=d("ElTableColumn"),s=d("ElButton"),z=d("ElTable"),M=re,O=d("ElInput"),D=d("ElFormItem"),v=de,U=d("ElForm"),q=Q,A=d("ElDivider"),J=d("ElButtonGroup"),K=d("ElSpace"),j=d("ElPagination"),S=te("loading");return u(),ae("div",{class:le({"absolute-container":a(e).tableAutoHeight})},[t(M,null,{default:o(()=>[t(P,{title:"通用模板"}),x((u(),m(z,{class:"my-4",data:a(e).controlDataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:k,onSelectionChange:n[0]||(n[0]=i=>a(e).batch.selectionDataList=i)},{default:o(()=>[a(e).batch.enable?(u(),m(_,{key:0,type:"selection",align:"center",fixed:""})):f("",!0),t(_,{prop:"title",label:"标题"}),t(_,{label:"操作",width:"250",align:"center",fixed:"right"},{default:o(i=>[i.row.isSet?f("",!0):(u(),m(s,{key:0,type:"primary",size:"small",plain:"",onClick:p=>E(i.row)},{default:o(()=>[r(" 设置为主页 ")]),_:2},1032,["onClick"])),t(s,{type:"primary",size:"small",plain:"",onClick:p=>w(i.row,"查看")},{default:o(()=>[r(" 查看 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,a(e).loading]])]),_:1}),t(M,null,{default:o(()=>[t(P,{title:"自定义模板"}),t(q,{"show-toggle":!1},{default:o(({fold:i,toggle:p})=>[t(U,{model:a(e).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[t(D,{label:"标题"},{default:o(()=>[t(O,{modelValue:a(e).search.title,"onUpdate:modelValue":n[1]||(n[1]=b=>a(e).search.title=b),placeholder:"请输入标题，支持模糊查询",clearable:"",onKeydown:n[2]||(n[2]=oe(b=>h(),["enter"])),onClear:n[3]||(n[3]=b=>h())},null,8,["modelValue"])]),_:1}),t(D,null,{default:o(()=>[t(s,{type:"primary",onClick:n[4]||(n[4]=b=>h())},{icon:o(()=>[t(v,{name:"i-ep:search"})]),default:o(()=>[r(" 筛选 ")]),_:1}),t(s,{link:"",disabled:"",onClick:p},{icon:o(()=>[t(v,{name:i?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[r(" "+ne(i?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(A,{"border-style":"dashed"}),t(K,{wrap:""},{default:o(()=>[t(s,{type:"primary",size:"default",onClick:F},{icon:o(()=>[t(v,{name:"i-ep:plus"})]),default:o(()=>[r(" 新增首页设置 ")]),_:1}),a(e).batch.enable?(u(),m(s,{key:0,size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[r(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):f("",!0),a(e).batch.enable?(u(),m(J,{key:1},{default:o(()=>[t(s,{size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[r(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),t(s,{size:"default",disabled:!a(e).batch.selectionDataList.length},{default:o(()=>[r(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):f("",!0)]),_:1}),x((u(),m(z,{class:"my-4",data:a(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:k,onSelectionChange:n[5]||(n[5]=i=>a(e).batch.selectionDataList=i)},{default:o(()=>[a(e).batch.enable?(u(),m(_,{key:0,type:"selection",align:"center",fixed:""})):f("",!0),t(_,{prop:"title",label:"标题"}),t(_,{label:"操作",width:"350",align:"center",fixed:"right"},{default:o(i=>[i.row.isSet?f("",!0):(u(),m(s,{key:0,type:"primary",size:"small",plain:"",onClick:p=>E(i.row)},{default:o(()=>[r(" 设置为主页 ")]),_:2},1032,["onClick"])),t(s,{type:"primary",size:"small",plain:"",onClick:p=>R(i.row)},{default:o(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),t(s,{type:"primary",size:"small",plain:"",onClick:p=>w(i.row)},{default:o(()=>[r(" 设计主页 ")]),_:2},1032,["onClick"]),t(s,{type:"danger",size:"small",plain:"",onClick:p=>G(i.row)},{default:o(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,a(e).loading]]),t(j,{"current-page":a(g).page,total:a(g).total,"page-size":a(g).size,"page-sizes":a(g).sizes,layout:a(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:N,onCurrentChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(e).formMode==="dialog"||a(e).formMode==="drawer"?(u(),m(ce,{key:0,id:a(e).formModeProps.id,row:a(e).formModeProps.row,modelValue:a(e).formModeProps.visible,"onUpdate:modelValue":n[6]||(n[6]=i=>a(e).formModeProps.visible=i),mode:a(e).formMode,onSuccess:c},null,8,["id","row","modelValue","mode"])):f("",!0),t(me,{ref_key:"homePageRef",ref:y,onFetchData:c},null,512)],2)}}}),ye=ue(pe,[["__scopeId","data-v-bed71d88"]]);export{ye as default};
