
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Se,aN as De,r as s,n as Le,a as u,q as me,o as r,b as xe,f as t,w as l,g as h,s as S,e as i,i as p,aM as fe,y as c,z as f,N as I,j as _,be as Ee,ba as Te,bb as Ue,_ as Ve,an as $e,aH as Re,aI as Be,L as He}from"./index-CV_e-tAb.js";import{_ as Pe}from"./index.vue_vue_type_script_setup_true_lang-CeTXTh-W.js";import{_ as Fe}from"./index-CfmhH62t.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-BclMsrk_.js";import{_ as Ae}from"./index-BJulkI5p.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-CZGijhl1.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-CVygU7LK.js";import Oe from"./index-CK7imfhK.js";import{a as Qe}from"./projectManagement_materials-C2UJfbg_.js";import"./index-BsxGvz0L.js";import"./clipboard-fXq3WeC8.js";import"./sortable.esm-C0-Qcoum.js";import"./file-Cw2VRIkV.js";import"./download-C8PHVIy1.js";const Je=T=>(Re("data-v-20e48a89"),T=T(),Be(),T),Ke={class:"copyId tableSmall"},We={class:"id oneLine projectId"},Xe={class:"tableBig"},Ye={class:"tableBig"},Ze={class:"copyId tableSmall"},et={class:"id oneLine projectId"},tt={class:"flex-c fontC-System"},lt={class:"oneLine",style:{width:"calc(100% - 20px)"}},ot=Je(()=>c("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),at={class:"copyId tableSmall"},nt={class:"id oneLine projectId"},rt={class:"tableBig"},it={class:"tableBig"},st={class:"copyId tableSmall"},ut={class:"id oneLine projectId"},ct={class:"flex-c fontC-System"},dt={class:"oneLine",style:{width:"calc(100% - 20px)"}},pt=Se({name:"materials",__name:"list",setup(T){const{format:F}=Ee(),{getParams:_e,pagination:b,onSizeChange:be,onCurrentChange:he}=De(),M=s(""),D=s(!1),y=s(!1),A=s(),q=s(),G=s(),L=s(!1),n=s([]),O=s(),ve=s("formSearch-materials"),k=s("default"),j=s(!1),Q=s([]),v=s([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),m=s({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),R=s([]),x=s();function ge(a){a?x.value=a.projectId:x.value=""}const E=s();function Ce(a){a?E.value=a.projectId:E.value=""}function J(a){Q.value.length||q.value.showEdit(a)}function K(a){G.value.showEdit(a)}function W(a){A.value.showEdit(a)}function X(a){Q.value=a}function Y(a){be(a).then(()=>g())}function w(a=1){he(a).then(()=>g())}function Z(){Object.assign(m.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),g()}async function g(){try{D.value=!0;const a={..._e(),...m.value},o=await Qe.list(a);R.value=o.data.projectMaterialInfoList,b.value.total=o.data.total,D.value=!1}catch{}finally{D.value=!1}}const Ie=()=>{m.value.type===1?(n.value=[],v.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g()):(n.value=[],v.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g())};return Le(()=>{v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g(),O.value=[{index:1,show:!0,type:"input",modelName:"memberChildId",placeholder:"会员ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"}]}),(a,o)=>{const ye=Ae,ee=u("ElDivider"),te=Me,N=u("el-button"),le=Te,oe=Ue,ae=u("el-row"),U=Fe,d=u("el-table-column"),ne=u("el-tag"),re=u("el-tooltip"),V=Ve,ie=u("ElSpace"),se=u("el-empty"),ue=u("el-table"),ce=u("ElPagination"),de=u("el-tab-pane"),B=u("el-input"),H=u("el-form-item"),P=u("ElButton"),ke=u("ElFormItem"),je=u("el-form"),we=Pe,Ne=u("el-tabs"),ze=$e,$=me("auth"),pe=me("loading");return r(),xe("div",{class:I({"absolute-container":L.value})},[t(ze,null,{default:l(()=>[t(Ne,{modelValue:m.value.type,"onUpdate:modelValue":o[18]||(o[18]=e=>m.value.type=e),onTabChange:Ie},{default:l(()=>[t(de,{label:"会员素材",name:1},{default:l(()=>[t(ye,{formSearchList:O.value,formSearchName:ve.value,onCurrentChange:w,onOnReset:Z,model:m.value},null,8,["formSearchList","formSearchName","model"]),t(ee,{"border-style":"dashed"}),t(ae,{gutter:24},{default:l(()=>[t(te),t(oe,null,{default:l(()=>[t(N,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(le,{border:y.value,"onUpdate:border":o[1]||(o[1]=e=>y.value=e),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>L.value=e),checkList:n.value,"onUpdate:checkList":o[3]||(o[3]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[4]||(o[4]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>k.value=e),stripe:j.value,"onUpdate:stripe":o[6]||(o[6]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((r(),i(ue,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:R.value,border:y.value,size:k.value,stripe:j.value,onSelectionChange:X,"highlight-current-row":"",onCurrentChange:ge},{empty:l(()=>[t(se,{image:p(fe),"image-size":300},null,8,["image"])]),default:l(()=>[n.value.includes("memberChildId")?(r(),i(d,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"会员ID"},{default:l(({row:e})=>[c("div",Ke,[c("div",We,f(e.memberChildId),1),t(U,{content:e.memberChildId,class:I({rowCopy:"rowCopy",current:e.projectId===x.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("memberChildName")?(r(),i(d,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"会员名称"},{default:l(({row:e})=>[c("div",Xe,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("projectName")?(r(),i(d,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[c("div",Ye,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(r(),i(d,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[c("div",Ze,[c("div",et,f(e.projectId),1),t(U,{content:e.projectId,class:I({rowCopy:"rowCopy",current:e.projectId===x.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("createTime")?(r(),i(d,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(re,{content:e.createTime,placement:"top"},{default:l(()=>[t(ne,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(F)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):_("",!0),n.value.includes("instructions")?(r(),i(d,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[c("div",tt,[c("div",lt,f(e.instructions?e.instructions:"-"),1),t(V,{onClick:C=>K(e),class:I({edit:"edit",current:e.projectId===x.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(d,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[S((r(),i(N,{type:"primary",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"])),[[$,"materials-get-getMaterials-btn"]]),S((r(),i(N,{type:"danger",plain:"",size:"small",onClick:C=>W(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])),[[$,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,D.value]]),t(ce,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(de,{label:"子会员素材",name:2},{default:l(()=>[t(we,{"show-toggle":!1},{default:l(({fold:e,toggle:C})=>[t(je,{model:m.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(H,{label:""},{default:l(()=>[t(B,{modelValue:m.value.memberChildId,"onUpdate:modelValue":o[7]||(o[7]=z=>m.value.memberChildId=z),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),t(H,{label:""},{default:l(()=>[t(B,{modelValue:m.value.projectId,"onUpdate:modelValue":o[8]||(o[8]=z=>m.value.projectId=z),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t(H,{label:""},{default:l(()=>[t(B,{modelValue:m.value.projectName,"onUpdate:modelValue":o[9]||(o[9]=z=>m.value.projectName=z),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),t(ke,null,{default:l(()=>[t(P,{type:"primary",onClick:o[10]||(o[10]=z=>w())},{icon:l(()=>[t(V,{name:"i-ep:search"})]),default:l(()=>[h(" 筛选 ")]),_:1}),t(P,{onClick:Z},{icon:l(()=>[ot]),default:l(()=>[h(" 重置 ")]),_:1}),t(P,{link:"",onClick:C,disabled:""},{icon:l(()=>[t(V,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[h(" "+f(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ee,{"border-style":"dashed"}),t(ae,{gutter:24},{default:l(()=>[t(te),t(oe,null,{default:l(()=>[t(N,{size:"default",onClick:o[11]||(o[11]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(le,{border:y.value,"onUpdate:border":o[12]||(o[12]=e=>y.value=e),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":o[13]||(o[13]=e=>L.value=e),checkList:n.value,"onUpdate:checkList":o[14]||(o[14]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[15]||(o[15]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[16]||(o[16]=e=>k.value=e),stripe:j.value,"onUpdate:stripe":o[17]||(o[17]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((r(),i(ue,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:R.value,border:y.value,size:k.value,stripe:j.value,onSelectionChange:X,"highlight-current-row":"",onCurrentChange:Ce},{empty:l(()=>[t(se,{image:p(fe),"image-size":300},null,8,["image"])]),default:l(()=>[n.value.includes("memberChildId")?(r(),i(d,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"子会员ID"},{default:l(({row:e})=>[c("div",at,[c("div",nt,f(e.memberChildId),1),t(U,{content:e.memberChildId,class:I({rowCopy:"rowCopy",current:e.projectId===E.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("memberChildName")?(r(),i(d,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"子会员名称"},{default:l(({row:e})=>[c("div",rt,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("projectName")?(r(),i(d,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[c("div",it,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(r(),i(d,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[c("div",st,[c("div",ut,f(e.projectId),1),t(U,{content:e.projectId,class:I({rowCopy:"rowCopy",current:e.projectId===E.value})},null,8,["content","class"])])]),_:1})):_("",!0),n.value.includes("customerIdentification")?(r(),i(d,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"left",label:"客户简称/标识"})):_("",!0),n.value.includes("createTime")?(r(),i(d,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(re,{content:e.createTime,placement:"top"},{default:l(()=>[t(ne,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(F)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):_("",!0),n.value.includes("instructions")?(r(),i(d,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[c("div",ct,[c("div",dt,f(e.instructions?e.instructions:"-"),1),t(V,{onClick:C=>K(e),class:I({edit:"edit",current:e.projectId===E.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(d,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ie,null,{default:l(()=>[S((r(),i(N,{type:"primary",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"])),[[$,"materials-get-getMaterials-btn"]]),S((r(),i(N,{type:"danger",plain:"",size:"small",onClick:C=>W(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])),[[$,"materials-delete-deleteProjectMaterial"]])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,D.value]]),t(ce,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(qe,{ref_key:"deleteRef",ref:A},null,512),t(Ge,{ref_key:"detailsRef",ref:q,onFetchData:g},null,512),t(Oe,{ref_key:"editsRef",ref:G,onFetchData:g},null,512)]),_:1})],2)}}}),zt=He(pt,[["__scopeId","data-v-20e48a89"]]);export{zt as default};
