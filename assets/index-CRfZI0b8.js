
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as U}from"./index-BomjALpZ.js";import{a as G}from"./group_team-C-0QidRm.js";import{a as H}from"./department-BbdFJEEN.js";import{u as K}from"./department-Dac_Dwe6.js";import{u as Q}from"./configuration_manager-CSu16_lu.js";import{u as W}from"./position_manage-BQqT25uP.js";import{d as X,aO as Y,r as s,k as Z,a as p,p as ee,q as te,o as a,b as m,f as l,w as t,s as _,g as f,i as ae,aN as le,F as g,A as r,t as x,e as i,j as S,aI as oe,aJ as se,M as ne}from"./index-CXflPANZ.js";import"./index-VyzXhlau.js";import"./position_manage-19r3vO48.js";const ie=y=>(oe("data-v-e3dea619"),y=y(),se(),y),de=ie(()=>_("div",{class:"card-header"},[_("span",null,"组成员")],-1)),ue={class:"copyId"},re={class:"id oneLine"},ce={class:"id oneLine"},pe={class:"tableBig"},me={style:{flex:"auto"}},fe=X({name:"Edit",__name:"index",emits:["success"],setup(y,{expose:T,emit:_e}){Y();const O=s(),D=W(),C=s(),j=K(),b=s(),z=Q(),B=s([]),E=s(""),F=s(),h=s(!1),I=s(!1),L=s([]),J=s([]),N=s(),V=s({groupId:null,userInfo:[],menuId:[]});async function P(M){try{h.value=!0,E.value="详情";const d=JSON.parse(M);V.value.groupId=d.id,N.value=d.departmentId;const u={page:1,limit:10,groupId:d.id},c=await G.list(u);c!=null&&c.data.data&&c.data.data.forEach(v=>{var w,k;(k=(w=V.value)==null?void 0:w.menuId)==null||k.push(v.id),L.value.push(v)});const o=await H.createEvery();b.value=o.data.result,b.value=b.value.filter(v=>v.id===N.value),h.value=!1,I.value=!0}catch{}finally{h.value=!1}}Z(async()=>{C.value=await(D==null?void 0:D.getPositionManage())||[],b.value=await j.getDepartment(),B.value=await z.getStaff(),F.value=new Date});const R=()=>{Object.assign(V.value,{groupId:null,userInfo:[],menuId:[]}),J.value=[],L.value=[]};return T({showEdit:P}),(M,d)=>{const u=p("el-table-column"),c=U,o=p("el-text"),v=p("el-empty"),w=p("el-table"),k=p("el-card"),$=p("el-button"),q=p("el-drawer"),A=ee("loading");return te((a(),m("div",null,[l(q,{modelValue:I.value,"onUpdate:modelValue":d[1]||(d[1]=e=>I.value=e),title:E.value,onClose:R,size:"60%"},{footer:t(()=>[_("div",me,[l($,{type:"",onClick:d[0]||(d[0]=e=>I.value=!1)},{default:t(()=>[f(" 取消 ")]),_:1})])]),default:t(()=>[l(k,{class:"box-card"},{header:t(()=>[de]),default:t(()=>[l(w,{ref_key:"tableRef",ref:O,data:L.value},{empty:t(()=>[l(v,{image:ae(le),"image-size":300},null,8,["image"])]),default:t(()=>[l(u,{align:"left",type:"index",label:"序号",width:"80"}),l(u,{align:"left","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"},{default:t(({row:e})=>[_("div",ue,[e.memberId?(a(),m(g,{key:0},[_("div",re," ID: "+r(e.memberId),1),l(c,{class:"copy",content:e.memberId},null,8,["content"])],64)):(a(),m(g,{key:1},[_("div",ce,"ID: "+r(e.id),1),l(c,{class:"copy",content:e.id},null,8,["content"])],64))])]),_:1}),l(u,{align:"left","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:t(({row:e})=>[e.id?(a(!0),m(g,{key:0},x(B.value,n=>(a(),i(o,{class:"tableBig"},{default:t(()=>[e.id===n.id?(a(),i(o,{key:0},{default:t(()=>[f(r(n.name),1)]),_:2},1024)):S("",!0)]),_:2},1024))),256)):(a(),i(o,{key:1},{default:t(()=>[f(r(e.userName?e.userName:"-"),1)]),_:2},1024))]),_:1}),l(u,{align:"left","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:t(({row:e})=>[e.id?(a(!0),m(g,{key:0},x(B.value,n=>(a(),i(o,{class:"tableBig"},{default:t(()=>[e.id===n.id?(a(),i(o,{key:0},{default:t(()=>[f(r(n.name),1)]),_:2},1024)):S("",!0)]),_:2},1024))),256)):(a(),i(o,{key:1},{default:t(()=>[f(r(e.name),1)]),_:2},1024))]),_:1}),l(u,{align:"left","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:t(({row:e})=>[(a(!0),m(g,null,x(b.value,n=>(a(),i(o,{class:"tableBig"},{default:t(()=>[N.value===n.id?(a(),i(o,{key:0},{default:t(()=>[f(r(n.name),1)]),_:2},1024)):S("",!0)]),_:2},1024))),256))]),_:1}),l(u,{align:"left","show-overflow-tooltip":"",prop:"lable",label:"职位"},{default:t(({row:e})=>[(a(!0),m(g,null,x(C.value,n=>(a(),i(o,{class:"tableBig"},{default:t(()=>[e.positionId===n.id?(a(),i(o,{key:0},{default:t(()=>[f(r(n.name),1)]),_:2},1024)):S("",!0)]),_:2},1024))),256))]),_:1}),l(u,{align:"left",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:t(({row:e})=>[_("div",pe,r(e.commission?e.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])])),[[A,h.value]])}}}),Se=ne(fe,[["__scopeId","data-v-e3dea619"]]);export{Se as default};
