
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as r,d as $,r as d,a as n,al as q,am as H,o as I,b as J,f as l,w as o,F as u,g as c,e as T,j as x,ak as z,aK as K,aL as A,_ as G}from"./index-DGdNXIGg.js";const f={list:t=>r.post("projectSettlement/get/getProjectSettlementList",t),review:t=>r.post("projectSettlement/get/getProjectSettlementByProjectId",t),fail:t=>r.post("projectSettlement/update/projectSettlementByFail",t),success:t=>r.post("projectSettlement/update/projectSettlementBySuccess",t),failById:t=>r.post("projectSettlement/update/projectSettlementFailById",t),successById:t=>r.post("projectSettlement/update/projectSettlementSuccessById",t),freeze:t=>r.post("projectSettlement/update/projectSettlementFrozen",t),edit:t=>r.post("menu/edit",t,{baseURL:"/mock/"}),delete:t=>r.post("menu/delete",{id:t},{baseURL:"/mock/"})},N=t=>(K("data-v-7cba7934"),t=t(),A(),t),Q={class:"border"},W=N(()=>u("p",{class:"pp"},"项目ID",-1)),X={class:"neip"},Y={class:"border"},Z=N(()=>u("p",{class:"pp"},"项目名称",-1)),ee={class:"neip"},te={class:"shenhe"},le={class:"beizhu"},ae={class:"po"},oe={style:{flex:"auto"}},se=$({name:"ProjectReview",__name:"index",emits:["success"],setup(t,{expose:h,emit:U}){const L=U,y=d(!1),j=d([]),p=d(),e=d({projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),D=d({settlementType:[{required:!0,message:"请选择审核方式",trigger:"change"}]}),g=d(),b=d(!1),i=d(!1);async function C(m){m&&(p.value=JSON.parse(m),e.value.projectId=p.value.projectId,e.value.projectName=p.value.projectName),i.value=!0}async function P(){g.value&&g.value.validate(async m=>{m?(y.value=!0,delete e.value.projectName,e.value.settlementType===1||e.value.settlementType===2?e.value.projectSettlementBuilderList=j.value.split(`
`)||[]:e.value.projectSettlementBuilderList=[],e.value.settlementType===1?await f.successById(e.value):e.value.settlementType===2?await f.failById(e.value):e.value.settlementType===3?(delete e.value.projectSettlementBuilderList,await f.success(e.value)):e.value.settlementType===4?await f.fail(e.value):e.value.settlementType===5&&await f.freeze(e.value),L("success"),y.value=!1,z.success({message:"操作成功",center:!0}),k()):z({message:"请选择审核方式",type:"warning"})})}function k(){Object.assign(e.value,{projectId:"",projectName:"",settlementType:"",remark:"",projectSettlementBuilderList:[],po:""}),i.value=!1}return h({showEdit:C}),(m,a)=>{const v=n("el-input"),V=n("el-row"),_=n("el-radio"),R=n("el-radio-group"),S=n("el-form-item"),w=n("el-col"),O=n("el-checkbox"),F=n("el-form"),B=n("el-button"),E=n("el-drawer"),M=q("loading");return H((I(),J("div",null,[l(E,{modelValue:i.value,"onUpdate:modelValue":a[9]||(a[9]=s=>i.value=s),title:"项目审核",size:"50%","before-close":k},{footer:o(()=>[u("div",oe,[l(B,{type:"primary",onClick:P},{default:o(()=>[c(" 确定 ")]),_:1}),l(B,{onClick:a[8]||(a[8]=s=>i.value=!1)},{default:o(()=>[c(" 取消 ")]),_:1})])]),default:o(()=>[l(F,{ref_key:"formRef",ref:g,model:e.value,rules:D.value,"label-width":"174px",inline:!1},{default:o(()=>[l(V,{style:{margin:"0"},gutter:20},{default:o(()=>[u("div",Q,[W,u("p",X,[l(v,{modelValue:p.value.projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>p.value.projectId=s),placeholder:"请输入项目ID",clearable:""},null,8,["modelValue"])])]),u("div",Y,[Z,u("p",ee,[l(v,{modelValue:p.value.projectName,"onUpdate:modelValue":a[1]||(a[1]=s=>p.value.projectName=s),placeholder:"请输入项目名称",clearable:""},null,8,["modelValue"])])])]),_:1}),u("div",te,[l(S,{prop:"settlementType",style:{display:"flex","align-items":"center"},label:"审核方式"},{default:o(()=>[l(R,{modelValue:e.value.settlementType,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.settlementType=s)},{default:o(()=>[l(_,{value:1,size:"large"},{default:o(()=>[c(" 按成功ID ")]),_:1}),l(_,{value:2,size:"large"},{default:o(()=>[c(" 按失败ID ")]),_:1}),l(_,{value:3,size:"large"},{default:o(()=>[c(" 全部通过 ")]),_:1}),l(_,{value:4,size:"large"},{default:o(()=>[c(" 全部失败 ")]),_:1}),l(_,{value:5,size:"large"},{default:o(()=>[c(" 数据冻结 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),u("div",le,[l(S,{label:"备注"},{default:o(()=>[l(v,{class:"custom-input",modelValue:e.value.remark,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.remark=s),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),u("div",ae,[b.value?(I(),T(S,{key:0,label:"结算PO号"},{default:o(()=>[l(v,{modelValue:e.value.po,"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.po=s),class:"custom-input",placeholder:"",clearable:"",onChange:a[5]||(a[5]=()=>{})},null,8,["modelValue"])]),_:1})):x("",!0)]),l(V,{style:{margin:"0"},gutter:20},{default:o(()=>[l(w,{span:20}),l(w,{span:4},{default:o(()=>[l(O,{modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=s=>b.value=s),label:"填写结算PO号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e.value.settlementType===1||e.value.settlementType===2?(I(),T(V,{key:0,style:{margin:"0"},gutter:20},{default:o(()=>[l(v,{modelValue:j.value,"onUpdate:modelValue":a[7]||(a[7]=s=>j.value=s),placeholder:"请粘贴ID，每行一个,多个请回车换行",type:"textarea",rows:"15"},null,8,["modelValue"])]),_:1})):x("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])),[[M,y.value]])}}}),ne=G(se,[["__scopeId","data-v-7cba7934"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{f as a,re as i,ne as p};
