
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as be,d as ge,aO as ve,r as b,l as ye,b as p,q as he,o as i,e as P,g as n,w as o,j as l,az as N,F as Ie,v as ke,s as $,h as _,H as g,I as k,f as r,aN as Se,k as d,t as c,S as we,bd as Ce,N as De,aQ as Ve,aR as je,ap as ze,aI as Be,aJ as Te,aq as M,R as Le}from"./index-BOglyGfo.js";import{_ as Ne}from"./index-SzktXZdL.js";import{_ as $e}from"./index.vue_vue_type_style_index_0_lang-BYJHJh86.js";import{_ as xe}from"./index.vue_vue_type_script_setup_true_lang-BxwVvGYK.js";import"./index-BKL_UtdK.js";const Ee={list:h=>be.post("callback/getProjectTerminationScreenDetail",h)},R=h=>(Be("data-v-54719415"),h=h(),Te(),h),Ue=R(()=>c("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Pe={class:"tableBig oneLine"},Me={class:"copyId tableSmall"},Fe={class:"id oneLine"},He={class:"copyId tableSmall"},Re={key:0,class:"id oneLine"},Ke={class:"copyId tableSmall"},qe={class:"id oneLine"},Ae={class:"copyId tableSmall"},Ye={class:"id oneLine"},Oe={class:"copyId tableSmall"},Qe={class:"id oneLine"},Je={class:"flex-c"},Ge=R(()=>c("span",null,"终止时间",-1)),We={class:"tableBig oneLine"},Xe=ge({name:"termination",__name:"index",setup(h){const{getParams:K,pagination:y,onSizeChange:q,onCurrentChange:A}=ve(),{format:Y}=Ce(),C=b(!1),F=b([]),O=b(""),m=b([]),D=b(!0),V=b(!1),j=b("default"),z=b(!1),B=b([{label:"会员",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),Q=[{label:"内部",value:1},{label:"外部",value:2}],s=b({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function J(){y.value.page=1,S()}function G(u){q(u).then(()=>S())}function v(u=1){A(u).then(()=>S())}async function S(){try{C.value=!0;const u={...K(),...s.value};s.value.time&&s.value.time.length&&(u.beginTime=s.value.time[0]||"",u.endTime=s.value.time[1]||"");const t=await Ee.list(u);F.value=t.data.projectTerminationScreenDetailInfoList,y.value.total=t.data.total,C.value=!1}catch{}finally{C.value=!1}}function W(){Object.assign(s.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),S()}function X(u){O.value=u}return ye(()=>{B.value.forEach(u=>{u.checked&&m.value.push(u.prop)}),S()}),(u,t)=>{const T=p("el-input"),I=p("el-form-item"),Z=p("el-option"),ee=p("el-select"),te=p("el-date-picker"),x=De,E=p("ElButton"),le=p("ElFormItem"),oe=p("ElForm"),ne=xe,ae=p("ElDivider"),ie=$e,U=p("el-button"),se=Ve,re=je,pe=p("el-row"),f=p("el-table-column"),w=Ne,L=p("el-text"),H=p("el-tag"),ue=p("el-empty"),de=p("el-table"),ce=p("ElPagination"),me=ze,_e=he("loading");return i(),P("div",{class:we({"absolute-container":l(z)})},[n(me,null,{default:o(()=>[n(ne,{"show-toggle":!1},{default:o(({fold:e,toggle:fe})=>[n(oe,{model:l(s),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[n(I,{label:""},{default:o(()=>[n(T,{modelValue:l(s).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=a=>l(s).tenantSupplierId=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:t[1]||(t[1]=N(a=>v(),["enter"]))},null,8,["modelValue"])]),_:1}),n(I,{label:""},{default:o(()=>[n(T,{modelValue:l(s).projectId,"onUpdate:modelValue":t[2]||(t[2]=a=>l(s).projectId=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:t[3]||(t[3]=N(a=>v(),["enter"]))},null,8,["modelValue"])]),_:1}),n(I,{label:""},{default:o(()=>[n(ee,{modelValue:l(s).surveySource,"onUpdate:modelValue":t[4]||(t[4]=a=>l(s).surveySource=a),"value-key":"",placeholder:"会员类型",clearable:"",filterable:"",onChange:t[5]||(t[5]=a=>v())},{default:o(()=>[(i(),P(Ie,null,ke(Q,a=>n(Z,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),$(n(I,{label:""},{default:o(()=>[n(T,{modelValue:l(s).projectName,"onUpdate:modelValue":t[6]||(t[6]=a=>l(s).projectName=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:t[7]||(t[7]=N(a=>v(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[M,!e]]),$(n(I,{label:""},{default:o(()=>[n(T,{modelValue:l(s).ipBelong,"onUpdate:modelValue":t[8]||(t[8]=a=>l(s).ipBelong=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP/所属国",onKeydown:t[9]||(t[9]=N(a=>v(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[M,!e]]),$(n(I,{label:""},{default:o(()=>[n(te,{modelValue:l(s).time,"onUpdate:modelValue":t[10]||(t[10]=a=>l(s).time=a),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",onChange:t[11]||(t[11]=a=>v())},null,8,["modelValue"])]),_:2},1536),[[M,!e]]),n(le,null,{default:o(()=>[n(E,{type:"primary",onClick:t[12]||(t[12]=a=>v())},{icon:o(()=>[n(x,{name:"i-ep:search"})]),default:o(()=>[_(" 筛选 ")]),_:1}),n(E,{onClick:W},{icon:o(()=>[Ue]),default:o(()=>[_(" 重置 ")]),_:1}),n(E,{link:"",onClick:fe},{icon:o(()=>[n(x,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[_(" "+g(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),n(ae,{"border-style":"dashed"}),n(pe,null,{default:o(()=>[n(ie),n(re,null,{default:o(()=>[n(U,{size:"default"},{default:o(()=>[_(" 导出 ")]),_:1}),n(se,{border:l(D),"onUpdate:border":t[13]||(t[13]=e=>k(D)?D.value=e:null),tableAutoHeight:l(z),"onUpdate:tableAutoHeight":t[14]||(t[14]=e=>k(z)?z.value=e:null),checkList:l(m),"onUpdate:checkList":t[15]||(t[15]=e=>k(m)?m.value=e:null),columns:l(B),"onUpdate:columns":t[16]||(t[16]=e=>k(B)?B.value=e:null),"line-height":l(j),"onUpdate:lineHeight":t[17]||(t[17]=e=>k(j)?j.value=e:null),stripe:l(V),"onUpdate:stripe":t[18]||(t[18]=e=>k(V)?V.value=e:null),style:{"margin-left":"12px"},onQueryData:J},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),$((i(),r(de,{border:l(D),data:l(F),size:l(j),stripe:l(V),onSelectionChange:X},{empty:o(()=>[n(ue,{image:l(Se),"image-size":300},null,8,["image"])]),default:o(()=>[n(f,{align:"center",type:"selection"}),l(m).includes("surveySource")?(i(),r(f,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",width:"120",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(i(),r(U,{key:0,class:"p-1",size:"small",type:"primary"},{default:o(()=>[_("内部会员")]),_:1})):d("",!0),e.surveySource===2?(i(),r(U,{key:1,class:"p-1",size:"small",type:"warning"},{default:o(()=>[_("外部会员")]),_:1})):d("",!0)]),_:1})):d("",!0),l(m).includes("projectName")?(i(),r(f,{key:1,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[c("div",Pe,g(e.projectName),1)]),_:1})):d("",!0),l(m).includes("projectId")?(i(),r(f,{key:2,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"},{default:o(({row:e})=>[c("div",Me,[c("div",Fe,"ID: "+g(e.projectId),1),n(w,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):d("",!0),l(m).includes("memberChildId")?(i(),r(f,{key:3,align:"center",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[c("div",He,[e.peopleType===1?(i(),P("div",Re,"ID: "+g(e.memberChildId),1)):d("",!0),n(w,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):d("",!0),l(m).includes("supplierMemberChildId")?(i(),r(f,{key:4,align:"center",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:o(({row:e})=>[c("div",Ke,[c("div",qe,[e.peopleType!==1?(i(),r(L,{key:0},{default:o(()=>[_(" ID: "+g(e.memberChildId),1)]),_:2},1024)):(i(),r(L,{key:1},{default:o(()=>[_(" - ")]),_:1}))]),e.peopleType!==1?(i(),r(w,{key:0,class:"copy",content:e.memberChildId},null,8,["content"])):d("",!0)])]),_:1})):d("",!0),l(m).includes("tenantSupplierId")?(i(),r(f,{key:5,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[c("div",Ae,[c("div",Ye,[e.tenantSupplierId?(i(),r(L,{key:0},{default:o(()=>[_(" ID: "+g(e.memberChildId),1)]),_:2},1024)):(i(),r(L,{key:1},{default:o(()=>[_(" - ")]),_:1}))]),e.tenantSupplierId?(i(),r(w,{key:0,class:"copy",content:e.tenantSupplierId},null,8,["content"])):d("",!0)])]),_:1})):d("",!0),l(m).includes("ipBelong")?(i(),r(f,{key:6,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国",width:"220"},{default:o(({row:e})=>[c("div",Oe,[c("div",Qe,[n(H,{type:"primary"},{default:o(()=>[_(g(e.ipBelong.split("/")[1]),1)]),_:2},1024),_(" "+g(e.ipBelong.split("/")[0]),1)]),n(w,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):d("",!0),l(m).includes("terminationTime")?(i(),r(f,{key:7,align:"center",prop:"terminationTime","show-overflow-tooltip":""},{header:o(()=>[c("div",Je,[n(x,{name:"ant-design:clock-circle-filled",color:"#45a0ff"}),Ge])]),default:o(({row:e})=>[n(H,{effect:"plain",type:"info"},{default:o(()=>[_(g(l(Y)(e.terminationTime)),1)]),_:2},1024)]),_:1})):d("",!0),l(m).includes("notes")?(i(),r(f,{key:8,align:"center",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"},{default:o(({row:e})=>[c("div",We,g(e.notes),1)]),_:1})):d("",!0)]),_:1},8,["border","data","size","stripe"])),[[_e,l(C)]]),n(ce,{"current-page":l(y).page,total:l(y).total,"page-size":l(y).size,"page-sizes":l(y).sizes,layout:l(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:v},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),nt=Le(Xe,[["__scopeId","data-v-54719415"]]);export{nt as default};
