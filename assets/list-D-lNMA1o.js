
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aN as se,r as s,a3 as ie,n as re,a as u,q as pe,o as n,b as ce,f as a,w as t,g as r,s as ue,e as i,i as _,aM as de,y as d,j as f,z as m,N as me,be as fe,aO as _e,E as ge,b9 as he,ba as ye,bd as ve,ap as be,L as ke}from"./index-CBnd12V0.js";import{_ as Ie}from"./index-BCFpaTtF.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-CAOcp70g.js";import{_ as Se}from"./index-8NDa1rpX.js";import{_ as Ce}from"./index.vue_vue_type_script_setup_true_lang-CpLS5nE4.js";import{a as P}from"./projectManagement_scheduling-DJtxVteC.js";import"./index-CqotxWrF.js";import"./index.vue_vue_type_script_setup_true_lang-DbDC0Iw4.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-CxJNhCbd.js";const je={class:"tableBig"},we={class:"tableBig oneLine"},Le={class:"copyId tableSmall"},Te={class:"id oneLine"},ze={class:"tableBig"},De={class:"tableBig"},xe={class:"specifyTheTarget"},Pe={class:"tableBig"},Ee={class:"id tableSmall"},Be=ne({name:"scheduling",__name:"list",setup(Me){const{format:E}=fe(),{pagination:g,getParams:B,onSizeChange:M,onCurrentChange:$}=se(),G=s(""),v=s(!1),b=s(!1),k=s(),I=s(!1),p=s([]),L=s(),R=s("formSearch-scheduling"),N=s("default"),S=s(!1),C=s([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"项目价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定会员组",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),j=ie({dispatchType:"",projectId:"",projectName:""}),T=s([]);function H(){k.value.showEdit()}function U(l){k.value.showEdit(l)}function F(l){_e.confirm(`确认删除「${l.projectName}」吗？`,"确认信息").then(()=>{P.delete({projectDispatchId:l.projectDispatchId}).then(o=>{h(),ge.success({message:"删除成功",center:!0})})}).catch(()=>{})}function V(l){M(l).then(()=>h())}function w(l=1){$(l).then(()=>h())}function A(){Object.assign(j,{dispatchType:"",projectId:"",projectName:""}),h()}async function h(){try{v.value=!0;const l={...B(),...j},o=await P.list(l);T.value=o.data.getProjectDispatchInfoList,g.value.total=o.data.total,v.value=!1}catch{}finally{v.value=!1}}re(()=>{C.value.forEach(l=>{l.checked&&p.value.push(l.prop)}),h(),L.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:"全部类型",option:"dispatchType",optionLabel:"label",optionValue:"value"}]});const O={dispatchType:()=>[{label:"指定关闭",value:1},{label:"指定价格",value:2}]};return(l,o)=>{const q=Se,Q=u("ElDivider"),y=u("el-button"),J=Ne,K=he,W=ye,X=u("el-row"),c=u("el-table-column"),z=u("el-text"),D=Ie,x=ve,Y=u("el-tag"),Z=u("el-empty"),ee=u("el-table"),te=u("ElPagination"),ae=be,oe=pe("loading");return n(),ce("div",{class:me({"absolute-container":I.value})},[a(ae,null,{default:t(()=>[a(q,{formSearchList:L.value,formSearchName:R.value,onCurrentChange:w,onOnReset:A,model:j,formOption:O},null,8,["formSearchList","formSearchName","model"]),a(Q,{"border-style":"dashed"}),a(X,{gutter:24},{default:t(()=>[a(J,null,{default:t(()=>[a(y,{type:"primary",size:"default",onClick:H},{default:t(()=>[r(" 新增 ")]),_:1})]),_:1}),a(W,null,{default:t(()=>[a(y,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:t(()=>[r(" 导出 ")]),_:1}),a(K,{border:b.value,"onUpdate:border":o[1]||(o[1]=e=>b.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>I.value=e),checkList:p.value,"onUpdate:checkList":o[3]||(o[3]=e=>p.value=e),columns:C.value,"onUpdate:columns":o[4]||(o[4]=e=>C.value=e),"line-height":N.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>N.value=e),stripe:S.value,"onUpdate:stripe":o[6]||(o[6]=e=>S.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ue((n(),i(ee,{ref_key:"tableSortRef",ref:G,style:{"margin-top":"10px"},"row-key":"id",data:T.value,border:b.value,size:N.value,stripe:S.value},{empty:t(()=>[a(Z,{image:_(de),"image-size":300},null,8,["image"])]),default:t(()=>[a(c,{align:"left",type:"selection"}),p.value.includes("dispatchType")?(n(),i(c,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:"类型"},{default:t(({row:e})=>[d("div",je,[e.dispatchType===1?(n(),i(z,{key:0,type:"primary"},{default:t(()=>[r("指定关闭")]),_:1})):(n(),i(z,{key:1,type:"danger"},{default:t(()=>[r("指定价格")]),_:1}))])]),_:1})):f("",!0),p.value.includes("projectName")?(n(),i(c,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目"},{default:t(({row:e})=>[d("div",we,m(e.projectName),1)]),_:1})):f("",!0),p.value.includes("projectId")?(n(),i(c,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:t(({row:e})=>[d("div",Le,[d("div",Te,"ID: "+m(e.projectId),1),a(D,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):f("",!0),p.value.includes("moneyPrice")?(n(),i(c,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:"项目价"},{default:t(({row:e})=>[d("div",ze,[a(x),r(m(e.moneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("doMoneyPrice")?(n(),i(c,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:"指定价格"},{default:t(({row:e})=>[d("div",De,[a(x),r(m(e.doMoneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("Supplier")?(n(),i(c,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:"指定目标",width:"350"},{default:t(({row:e})=>[d("div",xe,[e.dataType==2?(n(),i(y,{key:0,style:{width:"46px"},type:"primary",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"会员组"),1)]),_:2},1024)):e.dataType===1?(n(),i(y,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[r(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):f("",!0),d("b",Pe,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),d("span",Ee,"ID: "+m(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),a(D,{class:"copy",content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId},null,8,["content"])])]),_:1})):f("",!0),p.value.includes("createTime")?(n(),i(c,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:t(({row:e})=>[a(Y,{effect:"plain",type:"info"},{default:t(()=>[r(m(_(E)(e.createTime)),1)]),_:2},1024)]),_:1})):f("",!0),a(c,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(y,{type:"primary",plain:"",size:"small",onClick:le=>U(e)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),a(y,{type:"danger",plain:"",size:"small",onClick:le=>F(e)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[oe,v.value]]),a(te,{"current-page":_(g).page,total:_(g).total,"page-size":_(g).size,"page-sizes":_(g).sizes,layout:_(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"]),a(Ce,{ref_key:"editRef",ref:k,onFetchData:h},null,512)]),_:1})],2)}}}),Qe=ke(Be,[["__scopeId","data-v-94e3fa60"]]);export{Qe as default};
