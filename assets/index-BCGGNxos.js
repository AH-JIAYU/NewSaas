
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as $}from"./index-TTfzBsf7.js";import{k as y,d as F,aF as j,r as u,C as z,$ as C,a as d,aj as K,o as h,b as M,l,f as n,w as s,ak as _,e as E,E as g,aK as w,g as q,aD as A,aE as G,_ as H}from"./index-CnQ4xoV5.js";const D={list:o=>y.get("dict/get/getDict"),itemlist:o=>y.get(`dict/get/getDictDataSourceByDictId/${o}`)},J=o=>(A("data-v-2bf72b64"),o=o(),G(),o),O={class:"absolute-container"},Q={class:"page-main"},U={class:"custom-tree-node"},W=["title"],X={class:"code"},Y={class:"dictionary-container"},Z={class:"dictionary-container"},ee=J(()=>l("div",{class:"empty"},"请在左侧新增或选择一个字典",-1)),ae=[ee],te=F({name:"PagesExampleDictionary",__name:"index",setup(o){const{pagination:f,getParams:oe,onSizeChange:ie,onCurrentChange:ne,onSortChange:S}=j(),p=u(),i=u({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),k=u(),a=u({loading:!1,search:{id:"",chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}});async function I(){i.value.loading=!0,a.value.search.id="";const e={...i.value.search},t=await D.list(e);i.value.tree=t.data,i.value.loading=!1}z(()=>{I()}),C(()=>i.value.search,e=>{p.value.filter(e)});function N(e,t){return e?t.label.includes(e):!0}function x(e){f.value.page=1,a.value.search.id=e.id}C(()=>a.value.search.id,()=>{v()});async function v(){a.value.loading=!0;const e=await D.itemlist(a.value.search.id);a.value.loading=!1,a.value.dataList=e.data,a.value.dataList.forEach(t=>{t.enableLoading=!1}),f.value.total=e.data.length}function L({prop:e,order:t}){S(e,t).then(()=>v())}return(e,t)=>{const T=d("ElTree"),B=d("ElScrollbar"),r=d("ElTableColumn"),R=d("ElTag"),P=d("ElTable"),V=$,m=K("loading");return h(),M("div",O,[l("div",Q,[n(V,{"hide-left-side-toggle":""},{leftSide:s(()=>[n(B,{class:"tree"},{default:s(()=>[_((h(),E(T,{ref_key:"dictionaryRef",ref:p,data:i.value.tree,"filter-node-method":N,"default-expand-all":"",onNodeClick:x},{default:s(({node:c,data:b})=>[l("div",U,[l("div",{class:"label",title:c.label},g(b.chineseName),9,W),l("div",X,g(b.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[m,i.value.loading]])]),_:1})]),default:s(()=>[_(l("div",Y,[_((h(),E(P,{ref_key:"dictionaryItemRef",ref:k,data:a.value.dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:L,onSelectionChange:t[0]||(t[0]=c=>a.value.selectionDataList=c),"row-key":"id","default-expand-all":""},{default:s(()=>[n(r,{prop:"chineseName",label:"中文名称"}),n(r,{prop:"englishName",label:"英文名称"}),n(r,{prop:"remark",label:"备注"}),n(r,{label:"键值",align:"center",width:"150"},{default:s(c=>[n(R,{type:"info"},{default:s(()=>[q(g(c.row.code),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[m,a.value.loading]])],512),[[w,a.value.search.id]]),_(l("div",Z,ae,512),[[w,!a.value.search.id]])]),_:1})])])}}}),ce=H(te,[["__scopeId","data-v-2bf72b64"]]);export{ce as default};
