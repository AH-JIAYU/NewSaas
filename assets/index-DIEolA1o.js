
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as T}from"./index-kywxemc_.js";import"./index-iJRjh0Y-.js";import{a as A}from"./survey_myProjeck-C-s-hGoA.js";import{f as E}from"./file-CBtGqFPH.js";import{D as q}from"./download-C8PHVIy1.js";import{d as H,r as l,a as i,q as M,s as P,o as t,b as r,f as c,w as f,F as C,t as I,e as N,j as k,g as Q,z as R,N as $,y as V,i as D,aM as G,aH as J,aI as K,L as O}from"./index-DBquyRqD.js";const W=d=>(J("data-v-a36a13d0"),d=d(),K(),d),X={key:0,class:"demo-image__preview"},Y=W(()=>V("div",{class:"i-f7:doc-text w-1rem h-1rem"},null,-1)),Z={class:"radius flex gap-2 p-2"},ee=H({__name:"index",setup(d,{expose:j}){const u=l(!1),g=l(""),e=l({}),y=l([]),p=l([]),m=l([]),v=l(!1);async function L(a){try{if(u.value=!0,g.value="项目详情",a){v.value=!0;const o=await A.getQuotaProjectInfo({projectId:a.projectId});if(e.value=o.data,e.value.descriptionUrl!==""){const _=e.value.descriptionUrl.split(",");p.value=_;const h=[".jpg",".jpeg",".png",".gif"];_.map(async w=>{const n=await E.detail({fileName:w});h.some(x=>n.data.fileUrl.includes(x))&&m.value.push(n.data.fileUrl),y.value.push(n.data.fileUrl)})}p.value=y.value,v.value=!1}}catch{}finally{v.value=!1}}async function b(a){await q(a,e.value.descriptionUrl)}function z(){g.value="",e.value={},y.value=[],p.value=[],m.value=[],u.value=!1}const B=a=>decodeURIComponent(a.split("/").pop().split("?")[0]);return j({showEdit:L}),(a,o)=>{const _=i("el-image"),h=i("el-link"),w=i("el-col"),n=i("el-row"),x=i("el-empty"),F=i("el-dialog"),S=M("loading");return P((t(),r("div",null,[c(F,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:g.value,draggable:"",width:"50%",onClose:z},{default:f(()=>[e.value.descriptionUrl?(t(),r("div",X,[(t(!0),r(C,null,I(m.value,(s,U)=>(t(),N(_,{key:U,style:{width:"6.25rem",height:"6.25rem","margin-right":"5px"},src:s,"preview-src-list":m.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":U,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),128))])):k("",!0),e.value.descriptionUrl?(t(!0),r(C,{key:1},I(p.value,s=>(t(),r("div",null,[Y,c(h,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:U=>b(s)},{default:f(()=>[Q(R(B(s))+"下载",1)]),_:2},1032,["onClick"])]))),256)):k("",!0),c(n,{gutter:20,class:$({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:f(()=>[c(w,{span:24},{default:f(()=>[V("div",Z,[c(D(T),{value:e.value.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(t(),N(x,{key:2,image:D(G),"image-size":300},null,8,["image"])):k("",!0)]),_:1},8,["modelValue","title"])])),[[S,v.value]])}}}),ne=O(ee,[["__scopeId","data-v-a36a13d0"]]);export{ne as default};
