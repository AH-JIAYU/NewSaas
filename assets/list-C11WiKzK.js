
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ce,l as Ie,aM as Ne,r as c,a3 as we,c as je,n as Le,a as f,q as Se,o as n,b as h,f as l,w as o,i as t,g as s,A as k,s as xe,e as r,aL as Pe,z as d,j as p,y as N,N as E,F as J,t as ze,be as Re,b8 as Be,b9 as Te,bd as Ae,ap as Ee,L as De}from"./index-B2-o9ujD.js";import{_ as Ue}from"./index-BBumVLrs.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-C--W1W9O.js";import{_ as Oe}from"./index-D3fGY9Cd.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-Cbam70Qj.js";import He from"./index-CbC4ee2D.js";import $e from"./index-BPqAfIXI.js";import Ve from"./index-BIafVFHC.js";import{a as Ge}from"./survey_myProjeck-CthgsrDL.js";import{u as qe}from"./user_customer-B1P5LQK-.js";import"./clipboard-CGQpSdJk.js";import"./index-DrcQvRzk.js";import"./index.vue_vue_type_script_setup_true_lang-BILTCV6i.js";import"./sortable.esm-C0-Qcoum.js";import"./index-BbMJMTr4.js";import"./file-BH6lUD-7.js";import"./download-C8PHVIy1.js";import"./apiLoading-qW_Or1hd.js";import"./index-pUv9pbr5.js";import"./projectManagement-BeUurJoN.js";import"./survey_vip_department-6bTroxDx.js";import"./survey_vipGroup-S9d5CF2w.js";import"./survey_vipGroup-Co1JXOf1.js";import"./user_customer-B62wb6Tj.js";const Qe={key:0,class:"crudeTop"},Je={key:1,class:"hoverSvg"},Ke={class:"fineSize"},We={key:0,class:"crudeTop"},Xe={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},Ye={class:"fineBom"},Ze={class:"hoverSvg"},et={class:"withoutUrlSize"},tt={class:"parameter oneLine"},ot=Ce({name:"myProjeck",__name:"list",setup(lt){const{format:K}=Re(),D=Ie(),W=qe(),{pagination:b,getParams:X,onSizeChange:Y,onCurrentChange:Z,onSortChange:nt}=Ne(),U=c([]),M=c([]),O=c(),ee=c(""),F=c(),w=c(!0),te=c(),H=c(),j=c(!1),u=c([]),L=c(!1),$=c(),oe=c("formSearch-myProjeck"),S=c("default"),x=c(!1),P=c([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortabel:!0,checked:!0},{prop:"countryNameList",label:"区域",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=we({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),V=c([]),G=c();function le(a){F.value.showEdit(a)}function ne(a){H.value.showEdit(a)}function ae(a){G.value.showEdit(a)}function re(a){Y(a).then(()=>v())}function R(a=1){Z(a).then(()=>v())}function ie(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),v()}async function v(){try{w.value=!0;const a={...X(),..._};_.time&&_.time.length&&(a.beginTime=_.time[0]||"",a.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?a.countryId=[_.countryId]:a.countryId=[];const i=await Ge.list(a);O.value=i.data.currencyType,V.value=i.data.getMemberProjectListInfoList,b.value.total=i.data.total,w.value=!1}catch{}finally{w.value=!1}}const B=c();function ce(a){B.value=a.projectId}const z=je(()=>a=>U.value.filter(C=>a==null?void 0:a.includes(C.id)).map(C=>C.chineseName));Le(async()=>{P.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),U.value=await D.getCountry(),M.value=await W.getCustomerList(),v(),$.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"区域地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const se={clientId:()=>M.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(a,i)=>{const C=Oe,ue=f("ElDivider"),pe=Me,T=f("el-button"),de=Be,me=Te,fe=f("el-row"),m=f("el-table-column"),q=Ue,A=f("el-tooltip"),y=f("el-text"),_e=Ae,Q=f("el-link"),g=f("el-tag"),ye=f("ElSpace"),he=f("el-empty"),be=f("el-table"),ge=f("ElPagination"),ke=Ee,ve=Se("loading");return n(),h("div",{class:E({"absolute-container":t(L)})},[l(ke,null,{default:o(()=>[l(C,{formSearchList:t($),formSearchName:t(oe),onCurrentChange:R,onOnReset:ie,model:t(_),formOption:se},null,8,["formSearchList","formSearchName","model"]),l(ue,{"border-style":"dashed"}),l(fe,{gutter:24},{default:o(()=>[l(pe),l(me,null,{default:o(()=>[l(T,{size:"default",onClick:i[0]||(i[0]=()=>{})},{default:o(()=>[s(" 导出 ")]),_:1}),l(de,{border:t(j),"onUpdate:border":i[1]||(i[1]=e=>k(j)?j.value=e:null),tableAutoHeight:t(L),"onUpdate:tableAutoHeight":i[2]||(i[2]=e=>k(L)?L.value=e:null),checkList:t(u),"onUpdate:checkList":i[3]||(i[3]=e=>k(u)?u.value=e:null),columns:t(P),"onUpdate:columns":i[4]||(i[4]=e=>k(P)?P.value=e:null),"line-height":t(S),"onUpdate:lineHeight":i[5]||(i[5]=e=>k(S)?S.value=e:null),stripe:t(x),"onUpdate:stripe":i[6]||(i[6]=e=>k(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:R},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),xe((n(),r(be,{ref_key:"tableSortRef",ref:ee,style:{"margin-top":"10px"},"row-key":"id",data:t(V),border:t(j),size:t(S),stripe:t(x),onCurrentChange:ce,"highlight-current-row":""},{empty:o(()=>[l(he,{image:t(Pe),"image-size":300},null,8,["image"])]),default:o(()=>[l(m,{align:"left",type:"selection"}),t(u).includes("project")?(n(),r(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:o(({row:e})=>[t(u).includes("projectName")?(n(),h("p",Qe,"名称："+d(e.projectName),1)):p("",!0),t(u).includes("projectId")?(n(),h("div",Je,[N("p",Ke,d(e.projectId),1),l(q,{content:e.projectId,class:E({rowCopy:"rowCopy",current:e.projectId===t(B)})},null,8,["content","class"])])):p("",!0)]),_:1})):p("",!0),t(u).includes("projectIdentificationOrClientName")?(n(),r(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:o(({row:e})=>[t(u).includes("projectIdentification")?(n(),h("p",We," 名称："+d(e.projectIdentification),1)):p("",!0),t(u).includes("projectIdClientName")?(n(),h("p",Xe,[s("标："),N("span",Ye,d(e.clientName),1)])):p("",!0)]),_:1})):p("",!0),t(u).includes("withoutUrl")?(n(),r(m,{key:2,width:"150",prop:"withoutUrl",align:"left",label:"URL"},{default:o(({row:e})=>[l(A,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:o(()=>[N("div",Ze,[N("p",et,d(e.withoutUrl),1),l(q,{content:e.withoutUrl,class:E({rowCopy:"rowCopy",current:e.projectId===t(B)})},null,8,["content","class"])])]),_:2},1032,["content"])]),_:1})):p("",!0),t(u).includes("participation")?(n(),r(m,{key:3,"show-overflow-tooltip":"",width:"200",align:"left",label:"参数"},{default:o(({row:e})=>[N("p",tt,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:o(()=>[s("参与："+d(e.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:o(()=>[s("完成："+d(e.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:o(()=>[s("配额："+d(e.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:o(()=>[s("限量："+d(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):p("",!0),t(u).includes("doMoneyPrice")?(n(),r(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"项目价"},{default:o(({row:e})=>[t(O)===3?(n(),r(y,{key:0,class:"mx-1"},{default:o(()=>[s("暂无数据")]),_:1})):(n(),r(y,{key:1,class:"mx-1"},{default:o(()=>[l(y,{style:{color:"#FD8989"}},{default:o(()=>[l(_e)]),_:1}),l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[s(d(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):p("",!0),t(u).includes("memberPrice")?(n(),r(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"成本价(会员)"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(Q,{key:0,size:"small",plain:"",type:"primary",onClick:I=>ne(e)},{default:o(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(y,{key:1},{default:o(()=>[s(" - ")]),_:1}))]),_:1})):p("",!0),t(u).includes("countryNameList")?(n(),r(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"区域"},{default:o(({row:e})=>[e.countryNameList?(n(),h(J,{key:0},[e.countryNameList.length===t(D).country.length?(n(),r(g,{key:0,type:"primary"},{default:o(()=>[s("全球")]),_:1})):t(z)(e.countryNameList).length>1?(n(),r(A,{key:1,class:"box-item",effect:"dark",content:t(z)(e.countryNameList).join(","),placement:"top"},{default:o(()=>[l(Q,{type:"primary"},{default:o(()=>[l(g,{type:"primary"},{default:o(()=>[s("x"+d(t(z)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),h(J,{key:2},ze(t(z)(e.countryNameList),I=>(n(),r(g,{key:I,type:"primary"},{default:o(()=>[s(d(I),1)]),_:2},1024))),128))],64)):p("",!0)]),_:1})):p("",!0),t(u).includes("ir")?(n(),r(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:o(({row:e})=>[l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[s(d(e.ir?e.ir:"-")+" / "+d(e.nir?e.nir:0),1)]),_:2},1024)]),_:1})):p("",!0),t(u).includes("memberStatus")?(n(),r(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(g,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:o(()=>[s(" 会员组 ")]),_:1})):(n(),r(g,{key:1,effect:"plain",type:"info"},{default:o(()=>[s(" 未分配 ")]),_:1}))]),_:1})):p("",!0),t(u).includes("createTime")?(n(),r(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{default:o(({row:e})=>[l(A,{content:e.createTime,placement:"top"},{default:o(()=>[l(g,{effect:"plain",type:"info"},{default:o(()=>[s(d(t(K)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):p("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:o(({row:e})=>[l(ye,null,{default:o(()=>[e.getMemberGroupNameInfoList.length?p("",!0):(n(),r(T,{key:0,type:"primary",plain:"",size:"small",onClick:I=>ae(e)},{default:o(()=>[s(" 分配 ")]),_:2},1032,["onClick"])),l(T,{size:"small",plain:"",type:"warning",onClick:I=>le(e)},{default:o(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ve,t(w)]]),l(ge,{"current-page":t(b).page,total:t(b).total,"page-size":t(b).size,"page-sizes":t(b).sizes,layout:t(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Fe,{ref_key:"CheckEditRef",ref:te},null,512),l(He,{ref_key:"detailRef",ref:F},null,512),l($e,{ref_key:"checkMembershipPriceRef",ref:H},null,512),l(Ve,{ref_key:"addAllocationEditRef",ref:G,onFetchData:v},null,512)],2)}}}),xt=De(ot,[["__scopeId","data-v-86bfca00"]]);export{xt as default};
