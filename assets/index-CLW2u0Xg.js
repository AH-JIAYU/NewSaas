
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as de,d as me,aO as _e,r as m,k as fe,a as r,p as be,o as s,b as M,f as t,w as l,i as e,F as ge,t as ve,q as T,g as _,H as h,I as y,e as c,j as f,S as he,ba as ye,N as Ie,aQ as ke,aR as we,ao as Se,aJ as Ce,aK as De,s as Ve,ap as x,R as je}from"./index-Dx7ZN6ED.js";import{_ as Te}from"./index.vue_vue_type_style_index_0_lang-VbqsNECD.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-BT62L1Ry.js";const Be={list:g=>de.post("callback/getProjectTerminationScreenDetail",g)},xe=g=>(Ce("data-v-5a2eea00"),g=g(),De(),g),Ee=xe(()=>Ve("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ne=me({name:"termination",__name:"index",setup(g){const{getParams:F,pagination:b,onSizeChange:L,onCurrentChange:H}=_e(),{format:R}=ye(),k=m(!1),E=m([]),$=m(""),p=m([]),w=m(!0),S=m(!1),C=m("default"),D=m(!1),V=m([{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),N=[{label:"内部",value:1},{label:"外部",value:2}],n=m({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function A(){b.value.page=1,I()}function Y(u){L(u).then(()=>I())}function U(u=1){H(u).then(()=>I())}async function I(){try{k.value=!0;const u={...F(),...n.value};n.value.time&&n.value.time.length&&(u.beginTime=n.value.time[0]||"",u.endTime=n.value.time[1]||"");const a=await Be.list(u);E.value=a.data.projectTerminationScreenDetailInfoList,b.value.total=a.data.total,k.value=!1}catch{}finally{k.value=!1}}function q(){Object.assign(n.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""}),I()}function O(u){$.value=u}return fe(()=>{V.value.forEach(u=>{u.checked&&p.value.push(u.prop)}),I()}),(u,a)=>{const j=r("el-input"),v=r("el-form-item"),Q=r("el-option"),J=r("el-select"),K=r("el-date-picker"),P=Ie,z=r("ElButton"),G=r("ElFormItem"),W=r("ElForm"),X=ze,Z=r("ElDivider"),ee=Te,te=r("el-button"),le=ke,oe=we,ae=r("el-row"),d=r("el-table-column"),B=r("el-text"),ne=r("el-tag"),re=r("el-empty"),ie=r("el-table"),se=r("ElPagination"),ue=Se,pe=be("loading");return s(),M("div",{class:he({"absolute-container":e(D)})},[t(ue,null,{default:l(()=>[t(X,{"show-toggle":!1},{default:l(({fold:o,toggle:ce})=>[t(W,{model:e(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(v,{label:""},{default:l(()=>[t(j,{modelValue:e(n).tenantSupplierId,"onUpdate:modelValue":a[0]||(a[0]=i=>e(n).tenantSupplierId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:l(()=>[t(j,{modelValue:e(n).projectId,"onUpdate:modelValue":a[1]||(a[1]=i=>e(n).projectId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:l(()=>[t(J,{modelValue:e(n).surveySource,"onUpdate:modelValue":a[2]||(a[2]=i=>e(n).surveySource=i),"value-key":"",placeholder:"会员类型",clearable:"",filterable:""},{default:l(()=>[(s(),M(ge,null,ve(N,i=>t(Q,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),T(t(v,{label:""},{default:l(()=>[t(j,{modelValue:e(n).projectName,"onUpdate:modelValue":a[3]||(a[3]=i=>e(n).projectName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[x,!o]]),T(t(v,{label:""},{default:l(()=>[t(j,{modelValue:e(n).ipBelong,"onUpdate:modelValue":a[4]||(a[4]=i=>e(n).ipBelong=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP/所属国"},null,8,["modelValue"])]),_:2},1536),[[x,!o]]),T(t(v,{label:""},{default:l(()=>[t(K,{modelValue:e(n).time,"onUpdate:modelValue":a[5]||(a[5]=i=>e(n).time=i),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[x,!o]]),t(G,null,{default:l(()=>[t(z,{type:"primary",onClick:a[6]||(a[6]=i=>U())},{icon:l(()=>[t(P,{name:"i-ep:search"})]),default:l(()=>[_(" 筛选 ")]),_:1}),t(z,{onClick:q},{icon:l(()=>[Ee]),default:l(()=>[_(" 重置 ")]),_:1}),t(z,{link:"",onClick:ce},{icon:l(()=>[t(P,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[_(" "+h(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(Z,{"border-style":"dashed"}),t(ae,null,{default:l(()=>[t(ee),t(oe,null,{default:l(()=>[t(te,{size:"default"},{default:l(()=>[_(" 导出 ")]),_:1}),t(le,{border:e(w),"onUpdate:border":a[7]||(a[7]=o=>y(w)?w.value=o:null),tableAutoHeight:e(D),"onUpdate:tableAutoHeight":a[8]||(a[8]=o=>y(D)?D.value=o:null),checkList:e(p),"onUpdate:checkList":a[9]||(a[9]=o=>y(p)?p.value=o:null),columns:e(V),"onUpdate:columns":a[10]||(a[10]=o=>y(V)?V.value=o:null),"line-height":e(C),"onUpdate:lineHeight":a[11]||(a[11]=o=>y(C)?C.value=o:null),stripe:e(S),"onUpdate:stripe":a[12]||(a[12]=o=>y(S)?S.value=o:null),style:{"margin-left":"12px"},onQueryData:A},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),T((s(),c(ie,{border:e(w),data:e(E),size:e(C),stripe:e(S),onSelectionChange:O},{empty:l(()=>[t(re,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[t(d,{align:"center",type:"selection"}),e(p).includes("surveySource")?(s(),c(d,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",width:"100",label:"会员类型"},{default:l(({row:o})=>[_(h(N[o.surveySource-1].label),1)]),_:1})):f("",!0),e(p).includes("memberChildId")?(s(),c(d,{key:1,align:"center",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:l(({row:o})=>[o.peopleType===1?(s(),c(B,{key:0},{default:l(()=>[_(h(o.memberChildId),1)]),_:2},1024)):f("",!0)]),_:1})):f("",!0),e(p).includes("supplierMemberChildId")?(s(),c(d,{key:2,align:"center",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:l(({row:o})=>[o.peopleType!==1?(s(),c(B,{key:0},{default:l(()=>[_(h(o.memberChildId),1)]),_:2},1024)):(s(),c(B,{key:1},{default:l(()=>[_(" - ")]),_:1}))]),_:1})):f("",!0),e(p).includes("tenantSupplierId")?(s(),c(d,{key:3,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:l(({row:o})=>[_(h(o.tenantSupplierId?o.tenantSupplierId:"-"),1)]),_:1})):f("",!0),e(p).includes("projectId")?(s(),c(d,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):f("",!0),e(p).includes("projectName")?(s(),c(d,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):f("",!0),e(p).includes("ipBelong")?(s(),c(d,{key:6,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):f("",!0),e(p).includes("notes")?(s(),c(d,{key:7,align:"center",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"})):f("",!0),e(p).includes("terminationTime")?(s(),c(d,{key:8,align:"center",prop:"terminationTime","show-overflow-tooltip":"",label:"终止时间"},{default:l(({row:o})=>[t(ne,{effect:"plain",type:"info"},{default:l(()=>[_(h(e(R)(o.terminationTime)),1)]),_:2},1024)]),_:1})):f("",!0)]),_:1},8,["border","data","size","stripe"])),[[pe,e(k)]]),t(se,{"current-page":e(b).page,total:e(b).total,"page-size":e(b).size,"page-sizes":e(b).sizes,layout:e(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:U},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Fe=je(Ne,[["__scopeId","data-v-5a2eea00"]]);export{Fe as default};
