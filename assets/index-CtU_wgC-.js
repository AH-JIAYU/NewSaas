
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as be,aN as fe,r as _,a3 as F,l as _e,a as p,al as ye,o as r,b as $,f as a,w as l,i as t,am as h,F as Ie,n as ve,e as d,g as c,D as i,G as S,j as m,Q as ge,L as he,aP as Se,aQ as ke,ak as Ce,aK as Ve,aL as Le,C as Pe,aE as C,P as je}from"./index-DBih9DQ6.js";import{_ as we}from"./index.vue_vue_type_style_index_0_lang-BjKVXN-C.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-Dqd5LTGV.js";import{a as Te}from"./record_memberSurveyRecords-BqKKxn2C.js";import{u as De}from"./user_customer-DZQp8-bg.js";import"./user_customer-CLizWJ8j.js";const Ee=V=>(Ve("data-v-f9efa597"),V=V(),Le(),V),Ue=Ee(()=>Pe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),ze=be({name:"RecordSurveyIndex",__name:"index",setup(V){const R=De(),{getParams:H,pagination:v,onSizeChange:A,onCurrentChange:Q}=fe(),T=_(!1),U=_([]),q=_(""),u=_([]),L=_(!0),P=_(!1),j=_("default"),w=_(!1),D=_(),N=_([{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),n=F({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),g=F({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function G(){n.pageNo=1,k()}function K(f){A(f).then(()=>k())}function z(f=1){Q(f).then(()=>k())}async function k(){T.value=!0;const f={...H(),...n},{data:o}=await Te.list(f);U.value=o.memberChildSurveyRecordInfoList,D.value=o.currencyType,v.value.total=o.total,T.value=!1}function O(f){q.value=f}function J(){Object.assign(n,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),k()}return _e(async()=>{g.customerList=await R.getCustomerList(),N.value.forEach(f=>{f.checked&&u.value.push(f.prop)}),k()}),(f,o)=>{const I=p("el-input"),y=p("el-form-item"),W=p("el-option"),X=p("el-select"),M=he,E=p("ElButton"),Y=p("ElFormItem"),Z=p("ElForm"),ee=Ne,te=p("ElDivider"),le=we,oe=p("el-button"),ae=Se,ne=ke,re=p("el-row"),b=p("el-table-column"),x=p("el-text"),B=p("ElTableColumn"),ie=p("el-empty"),se=p("el-table"),ue=p("ElPagination"),de=Ce,pe=ye("loading");return r(),$("div",{class:ge({"absolute-container":t(w)})},[a(de,null,{default:l(()=>[a(ee,{"show-toggle":!1},{default:l(({fold:e,toggle:ce})=>[a(Z,{model:t(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).projectId,"onUpdate:modelValue":o[0]||(o[0]=s=>t(n).projectId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).projectName,"onUpdate:modelValue":o[1]||(o[1]=s=>t(n).projectName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).memberId,"onUpdate:modelValue":o[2]||(o[2]=s=>t(n).memberId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),h(a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).memberChildId,"onUpdate:modelValue":o[3]||(o[3]=s=>t(n).memberChildId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).randomIdentityId,"onUpdate:modelValue":o[4]||(o[4]=s=>t(n).randomIdentityId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).tenantSupplierId,"onUpdate:modelValue":o[5]||(o[5]=s=>t(n).tenantSupplierId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商id"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(I,{modelValue:t(n).ip,"onUpdate:modelValue":o[6]||(o[6]=s=>t(n).ip=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(X,{modelValue:t(n).surveyStatus,"onUpdate:modelValue":o[7]||(o[7]=s=>t(n).surveyStatus=s),clearable:"",placeholder:"调查状态"},{default:l(()=>[(r(!0),$(Ie,null,ve(t(g).surveyStatusList,(s,me)=>(r(),d(W,{label:s,value:me+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!e]]),a(Y,null,{default:l(()=>[a(E,{type:"primary",onClick:o[8]||(o[8]=s=>z())},{icon:l(()=>[a(M,{name:"i-ep:search"})]),default:l(()=>[c(" 筛选 ")]),_:1}),a(E,{onClick:J},{icon:l(()=>[Ue]),default:l(()=>[c(" 重置 ")]),_:1}),a(E,{link:"",onClick:ce},{icon:l(()=>[a(M,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[c(" "+i(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(te,{"border-style":"dashed"}),a(re,null,{default:l(()=>[a(le),a(ne,null,{default:l(()=>[a(oe,{size:"default"},{default:l(()=>[c(" 导出 ")]),_:1}),a(ae,{border:t(L),"onUpdate:border":o[9]||(o[9]=e=>S(L)?L.value=e:null),tableAutoHeight:t(w),"onUpdate:tableAutoHeight":o[10]||(o[10]=e=>S(w)?w.value=e:null),checkList:t(u),"onUpdate:checkList":o[11]||(o[11]=e=>S(u)?u.value=e:null),columns:t(N),"onUpdate:columns":o[12]||(o[12]=e=>S(N)?N.value=e:null),"line-height":t(j),"onUpdate:lineHeight":o[13]||(o[13]=e=>S(j)?j.value=e:null),stripe:t(P),"onUpdate:stripe":o[14]||(o[14]=e=>S(P)?P.value=e:null),style:{"margin-left":"12px"},onQueryData:G},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),h((r(),d(se,{border:t(L),data:t(U),size:t(j),stripe:t(P),onSelectionChange:O},{empty:l(()=>[a(ie,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[a(b,{align:"center",type:"selection"}),t(u).includes("surveySource")?(r(),d(b,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员类型"},{default:l(({row:e})=>[c(i(e.surveySource===1?"内部会员":"外部会员"),1)]),_:1})):m("",!0),t(u).includes("memberChildrenId")?(r(),d(b,{key:1,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID"},{default:l(({row:e})=>[c(i(e.memberChildrenId?e.memberChildrenId:"-"),1)]),_:1})):m("",!0),t(u).includes("memberId")?(r(),d(b,{key:2,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"},{default:l(({row:e})=>[c(i(e.memberId?e.memberId:"-"),1)]),_:1})):m("",!0),t(u).includes("randomIdentityId")?(r(),d(b,{key:3,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[c(i(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):m("",!0),t(u).includes("tenantSupplierId")?(r(),d(b,{key:4,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商id"},{default:l(({row:e})=>[c(i(e.tenantSupplierId?e.tenantSupplierId:"-"),1)]),_:1})):m("",!0),t(u).includes("projectId")?(r(),d(b,{key:5,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):m("",!0),t(u).includes("projectName")?(r(),d(b,{key:6,align:"center",prop:"projectName",label:"项目名称/客户简称"},{default:l(({row:e})=>[c(i(e.projectName?e.projectName:"-")+"/"+i(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):m("",!0),t(u).includes("allocationType")?(r(),d(b,{key:7,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:l(({row:e})=>[c(i(t(g).allocationTypeList[e.allocationType-1]),1)]),_:1})):m("",!0),t(u).includes("price")?(r(),d(b,{key:8,align:"center",prop:"h","show-overflow-tooltip":"",label:"子会员价/供应商价/原价"},{default:l(({row:e})=>[t(D)===1?(r(),d(x,{key:0},{default:l(()=>[c(i(e.memberChildPrice?e.memberChildPrice+"$":0)+"/ "+i(e.supplierPrice?e.supplierPrice+"$":0)+"/ "+i(e.doMoneyPrice?e.doMoneyPrice+"$":0),1)]),_:2},1024)):m("",!0),t(D)===2?(r(),d(x,{key:1},{default:l(()=>[c(i(e.memberChildPrice?e.memberChildPrice+"￥":0)+"/ "+i(e.supplierPrice?e.supplierPrice+"￥":0)+"/ "+i(e.doMoneyPrice?e.doMoneyPrice+"￥":0),1)]),_:2},1024)):m("",!0)]),_:1})):m("",!0),t(u).includes("ipBelong")?(r(),d(b,{key:9,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):m("",!0),t(u).includes("surveyTime")?(r(),d(b,{key:10,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:l(({row:e})=>[c(i(e.surveyTime?e.surveyTime+"min":0)+"/ "+i(e.projectTime?e.projectTime+"min":0),1)]),_:1})):m("",!0),t(u).includes("surveyStatus")?(r(),d(B,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:l(({row:e})=>[c(i(t(g).surveyStatusList[e.surveyStatus-1]),1)]),_:1})):m("",!0),t(u).includes("viceStatus")?(r(),d(B,{key:12,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:l(({row:e})=>[c(i(t(g).viceStatusList[e.viceStatus-1]?t(g).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):m("",!0)]),_:1},8,["border","data","size","stripe"])),[[pe,t(T)]]),a(ue,{"current-page":t(v).page,total:t(v).total,"page-size":t(v).size,"page-sizes":t(v).sizes,layout:t(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:K,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=je(ze,[["__scopeId","data-v-f9efa597"]]);export{He as default};
