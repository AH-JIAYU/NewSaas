
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,aI as Ce,r as d,a4 as we,c as Ne,G as je,a as s,al as Le,o as i,b as h,f as e,w as o,i as t,am as I,F as z,n as P,e as u,g as f,I as m,p as v,j as y,R as Ve,N as Se,aK as ze,aL as Pe,s as Be,aG as Ee,aH as Re,l as Ue,aB as B,_ as Me}from"./index-CWM9ShDd.js";import{_ as De}from"./index.vue_vue_type_style_index_0_lang-DFvaU-eX.js";import{_ as xe}from"./index.vue_vue_type_script_setup_true_lang-DZMg4xWf.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-DcYwdsy7.js";import{c as $e,a as Oe}from"./index-CkWFPz56.js";import{u as Ge}from"./otherFunctions_basicDictionary-CyX90oCl.js";import{u as Fe}from"./user_customer-Tf0kG6A8.js";import"./apiLoading-CJUK7f2q.js";import"./basicDictionary-KnSmd_4Z.js";import"./user_customer-D4hfQ0Dk.js";const He=C=>(Ee("data-v-e2bd4f56"),C=C(),Re(),C),Ae=He(()=>Ue("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Qe=Ie({name:"SurveyMyProjeckList",__name:"list",setup(C){const q=Ge(),K=Fe(),{pagination:b,getParams:qe,onSizeChange:J,onCurrentChange:W,onSortChange:Ke}=Ce(),$=d([]),O=d([]),X=d(""),E=d(!0),Y=d(),G=d(),w=d(!0),p=d([]),N=d(!1),j=d("default"),L=d(!1),V=d([{prop:"projectId",label:"项目Id",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"项目标识",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),n=we({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),F=d([]);function Z(c){console.log("详情")}function ee(c){G.value.showEdit(c)}function te(c){console.log("测查")}function le(c){console.log(1),J(c)}function R(c=1){W(c)}function oe(){Object.assign(n,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:0,time:[],beginTime:"",endTime:""}),H()}const ae=Ne(()=>F.value.slice((b.value.page-1)*b.value.size,b.value.page*b.value.size));async function H(){E.value=!0;const c={...n};n.time&&n.time.length&&(c.beginTime=n.time[0]||"",c.endTime=n.time[1]||"");const a=await Oe.list(c);F.value=a.data.getMemberProjectListInfoList,b.value.total=a.data.getMemberProjectListInfoList.length,E.value=!1}return je(async()=>{V.value.forEach(c=>{c.checked&&p.value.push(c.prop)}),$.value=await q.getCountry(),O.value=await K.getCustomerList(),H()}),(c,a)=>{const U=s("el-input"),k=s("el-form-item"),ne=s("ElOption"),M=s("el-select"),S=s("el-option"),re=s("el-date-picker"),A=Se,D=s("ElButton"),ie=s("ElFormItem"),se=s("el-form"),ce=xe,ue=s("ElDivider"),pe=De,x=s("el-button"),me=ze,de=Pe,fe=s("el-row"),_=s("el-table-column"),T=s("el-link"),Q=s("el-tooltip"),_e=s("el-tag"),be=s("ElSpace"),ge=s("el-empty"),ye=s("el-table"),ke=s("ElPagination"),he=Be,ve=Le("loading");return i(),h("div",{class:Ve({"absolute-container":t(N)})},[e(he,null,{default:o(()=>[e(ce,{"show-toggle":!1},{default:o(({fold:l,toggle:g})=>[e(se,{model:t(n).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(k,{label:""},{default:o(()=>[e(U,{modelValue:t(n).projectId,"onUpdate:modelValue":a[0]||(a[0]=r=>t(n).projectId=r),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(k,{label:""},{default:o(()=>[e(U,{clearable:"",modelValue:t(n).projectName,"onUpdate:modelValue":a[1]||(a[1]=r=>t(n).projectName=r),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(k,{label:""},{default:o(()=>[e(U,{modelValue:t(n).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=r=>t(n).projectIdentification=r),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),I(e(k,{label:""},{default:o(()=>[e(M,{placeholder:"国家地区",modelValue:t(n).countryId,"onUpdate:modelValue":a[3]||(a[3]=r=>t(n).countryId=r),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:o(()=>[(i(!0),h(z,null,P(t($),r=>(i(),u(ne,{label:r.chineseName,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!l]]),I(e(k,{label:""},{default:o(()=>[e(M,{placeholder:"客户简称",modelValue:t(n).clientId,"onUpdate:modelValue":a[4]||(a[4]=r=>t(n).clientId=r)},{default:o(()=>[(i(!0),h(z,null,P(t(O),r=>(i(),u(S,{key:r.tenantCustomerId,value:r.tenantCustomerId,label:r.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!l]]),I(e(k,{label:""},{default:o(()=>[e(M,{placeholder:"B2B/B2C",modelValue:t(n).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=r=>t(n).b2bOrB2cStatus=r)},{default:o(()=>[e(S,{label:"全部",value:""}),e(S,{label:"B2B",value:"1"}),e(S,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!l]]),I(e(k,null,{default:o(()=>[e(re,{modelValue:t(n).time,"onUpdate:modelValue":a[6]||(a[6]=r=>t(n).time=r),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[B,!l]]),e(ie,null,{default:o(()=>[e(D,{type:"primary",onClick:a[7]||(a[7]=r=>R())},{icon:o(()=>[e(A,{name:"i-ep:search"})]),default:o(()=>[f(" 筛选 ")]),_:1}),e(D,{onClick:oe},{icon:o(()=>[Ae]),default:o(()=>[f(" 重置 ")]),_:1}),e(D,{link:"",onClick:g},{icon:o(()=>[e(A,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[f(" "+m(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(ue,{"border-style":"dashed"}),e(fe,{gutter:24},{default:o(()=>[e(pe),e(de,null,{default:o(()=>[e(x,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:o(()=>[f(" 导出 ")]),_:1}),e(me,{border:t(w),"onUpdate:border":a[9]||(a[9]=l=>v(w)?w.value=l:null),tableAutoHeight:t(N),"onUpdate:tableAutoHeight":a[10]||(a[10]=l=>v(N)?N.value=l:null),checkList:t(p),"onUpdate:checkList":a[11]||(a[11]=l=>v(p)?p.value=l:null),columns:t(V),"onUpdate:columns":a[12]||(a[12]=l=>v(V)?V.value=l:null),"line-height":t(j),"onUpdate:lineHeight":a[13]||(a[13]=l=>v(j)?j.value=l:null),stripe:t(L),"onUpdate:stripe":a[14]||(a[14]=l=>v(L)?L.value=l:null),style:{"margin-left":"12px"},onQueryData:R},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((i(),u(ye,{ref_key:"tableSortRef",ref:X,style:{"margin-top":"10px"},"row-key":"id",data:t(ae),border:t(w),size:t(j),stripe:t(L)},{empty:o(()=>[e(ge,{description:"暂无数据"})]),default:o(()=>[e(_,{type:"selection"}),t(p).includes("projectId")?(i(),u(_,{key:0,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):y("",!0),t(p).includes("projectName")?(i(),u(_,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):y("",!0),t(p).includes("projectIdentificationOrClientName")?(i(),u(_,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",align:"center",label:"客户简称/标识"})):y("",!0),t(p).includes("participation")?(i(),u(_,{key:3,"show-overflow-tooltip":"",align:"center",label:"参与/完成/配额/限量"},{default:o(({row:l})=>[f(m(l.participation)+"/ "+m(l.complete)+"/ "+m(l.num)+"/ "+m(l.limitedQuantity),1)]),_:1})):y("",!0),t(p).includes("doMoneyPrice")?(i(),u(_,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:o(({row:l})=>[f(" $ "+m(l.doMoneyPrice)+" ￥"+m(l.memberPrice),1)]),_:1})):y("",!0),t(p).includes("memberPrice")?(i(),u(_,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:o(({row:l})=>[e(T,{size:"small",plain:"",type:"primary",onClick:g=>ee(l)},{default:o(()=>[f(" 会员价 ")]),_:2},1032,["onClick"])]),_:1})):y("",!0),t(p).includes("ir")?(i(),u(_,{key:6,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:o(({row:l})=>[f(m(l.ir)+"/ "+m(l.nir),1)]),_:1})):y("",!0),t(p).includes("countryNameList")?(i(),u(_,{key:7,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:o(({row:l})=>[l.countryNameList.length>4?(i(),u(Q,{key:0,class:"box-item",effect:"dark",content:l.countryNameList.join(","),placement:"top"},{default:o(()=>[e(T,{type:"primary"},{default:o(()=>[f(m(l.countryNameList.length),1)]),_:2},1024)]),_:2},1032,["content"])):(i(!0),h(z,{key:1},P(l.countryNameList,g=>(i(),u(_e,{key:g,type:"primary"},{default:o(()=>[f(m(g),1)]),_:2},1024))),128))]),_:1})):y("",!0),t(p).includes("memberGroupName")?(i(),u(_,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:o(({row:l})=>[e(Q,{class:"box-item",effect:"dark",placement:"top"},{content:o(()=>[(i(!0),h(z,null,P(l.getMemberGroupNameInfoList,g=>(i(),h("div",null,m(g.memberGroupName)+"-"+m(g.memberGroupId),1))),256))]),default:o(()=>[e(T,{type:"primary"},{default:o(()=>[f(m(l.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)]),_:1})):y("",!0),t(p).includes("createTime")?(i(),u(_,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"})):y("",!0),e(_,{align:"center",label:"操作",width:"200"},{default:o(({row:l})=>[e(be,null,{default:o(()=>[e(x,{type:"primary",plain:"",size:"small",onClick:g=>te(l)},{default:o(()=>[f(" 测查 ")]),_:2},1032,["onClick"]),e(x,{size:"small",plain:"",type:"primary",onClick:g=>Z(l)},{default:o(()=>[f(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ve,t(E)]]),e(ke,{"current-page":t(b).page,total:t(b).total,"page-size":t(b).size,"page-sizes":t(b).sizes,layout:t(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:le,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Te,{ref_key:"CheckEditRef",ref:Y},null,512),e($e,{ref_key:"checkMembershipPriceRef",ref:G},null,512)],2)}}}),nt=Me(Qe,[["__scopeId","data-v-e2bd4f56"]]);export{nt as default};
