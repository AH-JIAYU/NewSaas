
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as g}from"./apiLoading-B6Lmv_-i.js";import{u as S,a as b}from"./survey_vipLevel-Bp1uh08L.js";import{d as D,r,a2 as U,a as i,o as B,e as E,w as t,f as o,g as f,i as l,l as I,an as M,ak as V,_ as T}from"./index-CpaKVi3K.js";const h=D({__name:"index",emits:["queryData"],setup(F,{expose:x,emit:y}){const N=S(),R=y,s=r(!1),m=r(""),e=r(),d=r(),k=U({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function w(n){n?(m.value="编辑",e.value=M(n)):(m.value="添加",e.value={}),s.value=!0}function c(){d.value.resetFields(),s.value=!1}function L(){d.value.validate(async n=>{if(n){if(e.value.memberLevelId){const{status:a}=await g(b.edit(e.value));a===1&&V.success({message:"编辑成功",center:!0})}else{const{status:a}=await g(b.create(e.value));a===1&&V.success({message:"新增成功",center:!0})}N.LevelNameList=null,R("queryData"),c()}})}return x({showEdit:w}),(n,a)=>{const p=i("el-input"),v=i("el-form-item"),C=i("el-form"),_=i("el-button"),q=i("el-dialog");return B(),E(q,{modelValue:l(s),"onUpdate:modelValue":a[2]||(a[2]=u=>I(s)?s.value=u:null),title:l(m),width:"600"},{footer:t(()=>[o(_,{onClick:c},{default:t(()=>[f(" 取消 ")]),_:1}),o(_,{type:"primary",onClick:L},{default:t(()=>[f(" 确定 ")]),_:1})]),default:t(()=>[o(C,{ref_key:"formRef",ref:d,model:l(e),rules:l(k),"label-width":"80px",inline:!1},{default:t(()=>[o(v,{label:"等级名称",prop:"levelName"},{default:t(()=>[o(p,{modelValue:l(e).levelName,"onUpdate:modelValue":a[0]||(a[0]=u=>l(e).levelName=u),maxlength:"100"},null,8,["modelValue"])]),_:1}),o(v,{label:"价格比例",prop:"additionRatio"},{default:t(()=>[o(p,{modelValue:l(e).additionRatio,"onUpdate:modelValue":a[1]||(a[1]=u=>l(e).additionRatio=u),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;",type:"number"},{append:t(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),G=T(h,[["__scopeId","data-v-ab7ac2dd"]]);export{G as default};
