
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as E,d as S,r as c,D as T,ak as _,a as n,al as C,am as k,o as D,b as A,f as e,w as l,g as b,at as B,p as N,_ as M}from"./index-BVN4Z1ED.js";import{C as W}from"./clipboard-BgkGDsyT.js";const U={list:()=>E.post("supplier-config/get/getSupplierConfig"),create:d=>E.post("supplier-config/insert/insertSupplierConfig",d),edit:d=>E.post("/supplier-config/update/updateSupplierConfig",d)},$=S({name:"SettingSiteSettingList",__name:"list",setup(d){const u=c(!1);({VITE_APP_SETTING:"false",VITE_APP_TITLE:"Fantastic-admin 专业版",VITE_APP_API_BASEURL:"http://47.96.98.102:9100",VITE_APP_DEBUG_TOOL:"",VITE_BUILD_MOCK:"false",VITE_BUILD_SOURCEMAP:"false",VITE_BUILD_COMPRESS:"gzip,brotli",VITE_BUILD_ARCHIVE:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}).VITE_APP_SUPPLIER;const i=c(),t=c({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:""}),w=c({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}]});T(()=>{v()});async function v(){u.value=!0;const{data:o}=await U.list();t.value=o||t.value,u.value=!1}const g=new W(".copy");g.on("success",function(o){_.success({message:"复制成功",center:!0}),o.clearSelection(),g.destroy()}),g.on("error",function(){_.error({message:"复制失败",center:!0})});function x(){t.value.id===""?i.value&&i.value.validate(o=>{o&&(u.value=!0,delete t.value.id,U.create(t.value).then(()=>{u.value=!1,v(),_.success({message:"新增成功",center:!0})}))}):i.value&&i.value.validate(o=>{if(o)try{let{id:a,keyWords:O,registerExamineOffOrOn:f,registerOffOrOn:r,supplierURL:m,webName:V}=t.value;const p={id:a,keyWords:O,registerExamineOffOrOn:f,registerOffOrOn:r,supplierURL:m,webName:V};u.value=!0,U.edit(p).then(()=>{u.value=!1,v(),_.success({message:"修改成功",center:!0})})}catch{}})}return(o,a)=>{const O=B,f=n("el-switch"),r=n("el-form-item"),m=n("el-col"),V=n("el-row"),p=n("el-input"),I=n("el-text"),y=n("el-button"),L=n("el-form"),P=N,R=C("loading");return k((D(),A("div",null,[e(O,{title:"站点设置管理"}),e(P,null,{default:l(()=>[e(L,{ref_key:"formRef",ref:i,model:t.value,rules:w.value,"label-width":"100px",inline:!1},{default:l(()=>[e(V,{gutter:20},{default:l(()=>[e(m,{span:3},{default:l(()=>[e(r,{label:"注册开关"},{default:l(()=>[e(f,{modelValue:t.value.registerOffOrOn,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.registerOffOrOn=s),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:6},{default:l(()=>[e(r,{label:"注册审核"},{default:l(()=>[e(f,{modelValue:t.value.registerExamineOffOrOn,"onUpdate:modelValue":a[1]||(a[1]=s=>t.value.registerExamineOffOrOn=s),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"网站名称",prop:"webName"},{default:l(()=>[e(p,{modelValue:t.value.webName,"onUpdate:modelValue":a[2]||(a[2]=s=>t.value.webName=s),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{label:"keyWords"},{default:l(()=>[e(p,{modelValue:t.value.keyWords,"onUpdate:modelValue":a[3]||(a[3]=s=>t.value.keyWords=s),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{label:"供应商网址",prop:"supplierURL"},{default:l(()=>[e(p,{modelValue:t.value.supplierURL,"onUpdate:modelValue":a[4]||(a[4]=s=>t.value.supplierURL=s),style:{width:"8rem"}},null,8,["modelValue"]),e(I,{class:"mx-1"},{default:l(()=>[b(".front-supplier.surveyssaas.com")]),_:1}),e(y,{class:"copy","data-clipboard-text":`${t.value.supplierURL}.front-supplier.surveyssaas.com`,type:"primary",link:""},{default:l(()=>[b("复制")]),_:1},8,["data-clipboard-text"])]),_:1}),e(r,null,{default:l(()=>[e(y,{type:"primary",onClick:x},{default:l(()=>[b(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])),[[R,u.value]])}}}),q=M($,[["__scopeId","data-v-f5854a30"]]);export{q as default};
