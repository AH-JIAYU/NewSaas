
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Z,aK as ee,r as s,v as te,a0 as T,a as i,an as ae,o as p,b as ne,f as o,w as l,g as m,i as e,A as d,ak as oe,e as f,j as C,K as le,aL as se,ah as ie,aN as re,aO as ue,F as ce,aj as pe,J as de}from"./index-C4R2SyQS.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-7bk70uGz.js";import{s as fe}from"./apiLoading-BBAU6UOX.js";import{S as _e}from"./sortable.esm-C0-Qcoum.js";import ge from"./index-r5jpz6U2.js";import{u as be,a as D}from"./configuration_supplierLevel-COwHZTpW.js";const ve=Z({name:"supplierLevel",__name:"index",setup(he){const R=be(),{pagination:r,getParams:N,onSizeChange:P,onCurrentChange:$}=ee(),w=s(!1),L=s(),E=s([]),u=s([]),_=s(!0),g=s(!1),b=s("default"),v=s(!1),S=s(),h=s([{label:"等级名称",prop:"levelName",sortable:!0,disableCheck:!1,checked:!0},{label:"加成比例%",prop:"additionRatio",sortable:!0,checked:!0},{label:"成员数量",prop:"memberQuantity",sortable:!0,checked:!0}]);function A(){L.value.showEdit()}function H(a){L.value.showEdit(a)}function U(a){se.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:t}=await fe(D.delete({tenantSupplierLevelId:a.tenantSupplierLevelId}));t===1&&ie.success({message:"删除成功",center:!0}),R.LevelNameList=null,z()}).catch(()=>{})}function z(){r.value.page=1,y()}function I(a){P(a).then(()=>y())}function Q(a=1){$(a).then(()=>y())}async function y(){w.value=!0;const a={...N()},{data:t}=await D.list(a);E.value=t.getTenantSupplierLevelInfoList,r.value.total=t.total,w.value=!1}function x(){const a=S.value.$el.querySelector(".el-table__body-wrapper tbody");_e.create(a,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:t,oldIndex:c})=>{t===void 0||c===void 0||T(()=>x())}})}return te(()=>{h.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),y(),T(()=>{x()})}),(a,t)=>{const c=i("el-button"),B=me,M=re,F=ue,V=i("el-row"),j=ce,q=i("ElTag"),K=i("ElTableColumn"),k=i("el-table-column"),J=i("el-empty"),O=i("el-table"),G=i("ElPagination"),W=pe,X=ae("loading");return p(),ne("div",{class:le({"absolute-container":e(v)})},[o(W,null,{default:l(()=>[o(V,null,{default:l(()=>[o(B,null,{default:l(()=>[o(c,{size:"default",type:"primary",onClick:A},{default:l(()=>[m(" 新增 ")]),_:1})]),_:1}),o(F,null,{default:l(()=>[o(c,{size:"default"},{default:l(()=>[m(" 导出 ")]),_:1}),o(M,{border:e(_),"onUpdate:border":t[0]||(t[0]=n=>d(_)?_.value=n:null),tableAutoHeight:e(v),"onUpdate:tableAutoHeight":t[1]||(t[1]=n=>d(v)?v.value=n:null),checkList:e(u),"onUpdate:checkList":t[2]||(t[2]=n=>d(u)?u.value=n:null),columns:e(h),"onUpdate:columns":t[3]||(t[3]=n=>d(h)?h.value=n:null),"line-height":e(b),"onUpdate:lineHeight":t[4]||(t[4]=n=>d(b)?b.value=n:null),stripe:e(g),"onUpdate:stripe":t[5]||(t[5]=n=>d(g)?g.value=n:null),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),oe((p(),f(O,{ref_key:"elTableRef",ref:S,"row-key":"id",border:e(_),data:e(E),size:e(b),stripe:e(g),fit:""},{empty:l(()=>[o(J,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[o(K,{width:"80",align:"center",fixed:""},{header:l(()=>[m(" 排序 ")]),default:l(()=>[o(q,{type:"info",class:"sortable"},{default:l(()=>[o(j,{name:"i-ep:d-caret"})]),_:1})]),_:1}),e(u).includes("levelName")?(p(),f(k,{key:0,align:"center",prop:"levelName","show-overflow-tooltip":"",label:"等级名称"})):C("",!0),e(u).includes("additionRatio")?(p(),f(k,{key:1,align:"center",prop:"additionRatio","show-overflow-tooltip":"",label:"加成比例(百分比)"})):C("",!0),e(u).includes("memberQuantity")?(p(),f(k,{key:2,align:"center",prop:"memberQuantity","show-overflow-tooltip":"",label:"成员数量"})):C("",!0),o(k,{align:"center",fixed:"right","show-overflow-tooltip":"",label:"操作"},{default:l(({row:n})=>[o(c,{size:"small",plain:"",type:"primary",onClick:Y=>H(n)},{default:l(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),n.isDelete===1?(p(),f(c,{key:0,size:"small",plain:"",type:"danger",onClick:Y=>U(n)},{default:l(()=>[m(" 删除 ")]),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[X,e(w)]]),o(G,{"current-page":e(r).page,total:e(r).total,"page-size":e(r).size,"page-sizes":e(r).sizes,layout:e(r).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:I,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(ge,{ref_key:"EditRef",ref:L,onQueryData:z},null,512)],2)}}}),Ee=de(ve,[["__scopeId","data-v-23232be5"]]);export{Ee as default};
