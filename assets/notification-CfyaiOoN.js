
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,aM as U,r as m,z as P,c as N,l as z,b,o as d,e as c,g as u,w as _,t as o,j as t,S as f,H as l,ai as L,F as $,v as D,k as p,f as v,s as F,aq as j,n as S,ap as O,R as G,ao as q}from"./index-D1NMD0Fi.js";import J from"./notification-news-COJDWLkc.js";import K from"./notification-cooperation-CqDCmivM.js";const Q={class:"absolute-container"},W={class:"flex-c"},X={class:"left"},Y={class:"buttons"},Z=["onClick"],ee={class:"info"},te={class:"time"},se={key:0,class:"new"},ae={class:"auditType"},oe={class:"time"},ne={class:"data"},ie={class:"buttons"},de=["onClick"],le={class:"info"},ce={class:"time"},re={key:0,class:"new"},ue={class:"auditType"},_e={class:"time"},fe={class:"data"},pe={key:0,class:"right"},x=H({name:"PersonalNotification",__name:"notification",setup(ye){const i=U(),k=m(),h=m(),r=P(),e=m({tabs:"",selectId:"",ReadAlready:1});function g(a){e.value.selectId=a.id,S(()=>{var n;(n=h.value)==null||n.showEdit(a)})}function w(a){e.value.selectId=a.id,S(()=>{k.value.showEdit(a)})}const E=async()=>{e.value.selectId="",e.value.ReadAlready=1,e.value.tabs==="news"?await i.getUnreadMessage():e.value.tabs==="cooperation"&&await i.getUnreadTodo()};async function R(){e.value.selectId=""}const y=async a=>{e.value.ReadAlready=a,e.value.tabs==="news"?await i.getUnreadMessage():e.value.tabs==="cooperation"&&await i.getUnreadTodo()},C=N(()=>i.messageList.filter(a=>a.isReadAlready===e.value.ReadAlready)),I=N(()=>i.todoList.filter(a=>a.isReadAlready===e.value.ReadAlready));return z(()=>{if(i.isItConnected(),e.value.tabs=r.query.type==2?"cooperation":"news",r.query.id){if(Number(r.query.type)===1){const a=i.messageList.find(n=>n.id===r.query.id);a&&g(a)}else if(Number(r.query.type)===2){const a=i.todoList.find(n=>n.id===r.query.id);a&&w(a)}}}),(a,n)=>{const T=b("el-empty"),A=b("el-tab-pane"),M=b("el-tabs"),V=O;return d(),c("div",Q,[u(V,null,{default:_(()=>[o("div",W,[o("div",X,[u(M,{modelValue:t(e).tabs,"onUpdate:modelValue":n[4]||(n[4]=s=>t(e).tabs=s),onTabChange:E},{default:_(()=>[u(A,{label:"消息",name:"news"},{default:_(()=>[o("div",Y,[o("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:n[0]||(n[0]=s=>y(1))},"未读"+l(t(i).message<100?`(${t(i).message})`:"99+"),3),o("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:n[1]||(n[1]=s=>y(2))},"已读",2)]),u(t(L),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(C).length?(d(!0),c($,{key:0},D(t(C),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>g(s)},[o("div",ee,[o("div",te,[s.isReadAlready===1?(d(),c("span",se)):p("",!0),o("span",ae,l(t(i).auditTypeList[s.auditType-1]||""),1),o("span",oe,l(s.createTime),1)]),o("div",ne,l(s.messageContent),1)])],10,Z))),256)):(d(),v(T,{key:1,description:"暂无数据"}))]),_:1})]),_:1}),u(A,{label:"代办",name:"cooperation"},{default:_(()=>[o("div",ie,[o("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:n[2]||(n[2]=s=>y(1))},"未读"+l(t(i).todo<100?`(${t(i).todo})`:"99+"),3),o("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:n[3]||(n[3]=s=>y(2))},"已读",2)]),u(t(L),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(I).length?(d(!0),c($,{key:0},D(t(I),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>w(s)},[o("div",le,[o("div",ce,[s.isReadAlready===1?(d(),c("span",re)):p("",!0),o("span",ue,l(t(i).auditTypeList[s.auditType-1]||""),1),o("span",_e,l(s.createTime),1)]),o("div",fe," 您好，我是"+l(s.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(s.phoneOrEmail)+"。 ",1)])],10,de))),256)):(d(),v(T,{key:1,description:"暂无数据"}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e).selectId?F((d(),c("div",pe,[t(e).tabs==="news"?(d(),v(J,{key:0,ref_key:"newsRef",ref:h,onDelSelectId:R},null,512)):p("",!0),t(e).tabs==="cooperation"?(d(),v(K,{key:1,ref_key:"cooperationRef",ref:k,onDelSelectId:R},null,512)):p("",!0)],512)),[[j,t(e).selectId]]):p("",!0)])]),_:1})])}}});typeof q=="function"&&q(x);const ke=G(x,[["__scopeId","data-v-8c4bc978"]]);export{ke as default};
