
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as F,aC as P,aL as j,r as b,H as G,c as L,n as O,a as h,o as d,b as r,f as p,w as c,y as n,i as e,N as _,z as l,ac as S,F as $,t as N,j as f,e as v,aM as U,s as J,aG as K,$ as M,an as Q,aH as W,aI as X,L as Y,am as z}from"./index-BUdUbmhT.js";import Z from"./notification-news-C6zd69gE.js";import ee from"./notification-cooperation-Cjt8KbVg.js";import"./department-Cz92X-qD.js";import"./index-CNFqytgo.js";import"./index-Chc-6as8.js";import"./index-DRAmBjkN.js";import"./clipboard--zkKnKYc.js";import"./index-DMmbaC-Q.js";import"./configuration_site_setting-DiPoniZd.js";const D=y=>(W("data-v-2e8b528f"),y=y(),X(),y),te={class:"absolute-container"},se={class:"flex-c"},ae={class:"left"},oe=D(()=>n("span",{class:"custom-tab-label"},"消息",-1)),ne={class:"buttons"},ie=["onClick"],de={class:"info"},le={class:"time"},re={key:0,class:"new"},ce={class:"auditType"},ue={class:"time"},pe={class:"data"},_e=D(()=>n("span",{class:"custom-tab-label"},"代办",-1)),fe={class:"buttons"},ye=["onClick"],me={class:"info"},ve={class:"time"},be={key:0,class:"new"},he={class:"auditType"},ge={class:"time"},ke={class:"data"},we={key:0,class:"right"},q=F({name:"personalNotification",__name:"notification",setup(y){P();const a=j(),g=b(),k=b(),u=G(),t=b({tabs:"",selectId:"",ReadAlready:1});function w(s){t.value.selectId=s.id,M(()=>{var i;(i=k.value)==null||i.showEdit(s)})}function A(s){t.value.selectId=s.id,M(()=>{g.value.showEdit(s)})}const E=async()=>{t.value.selectId="",t.value.ReadAlready=1,t.value.tabs==="news"?await a.getUnreadMessage():t.value.tabs==="cooperation"&&await a.getUnreadTodo()};async function R(){t.value.selectId=""}const m=async s=>{t.value.ReadAlready=s,t.value.tabs==="news"?await a.getUnreadMessage():t.value.tabs==="cooperation"&&await a.getUnreadTodo()},C=L(()=>t.value.ReadAlready===1?a.messageList.filter(s=>s.isReadAlready===t.value.ReadAlready):a.readAlreadyMessageList.filter(s=>s.isReadAlready!==1)),I=L(()=>t.value.ReadAlready===1?a.todoList.filter(s=>s.auditStatus===1):a.readAlreadyList.filter(s=>s.auditStatus!==1));return O(()=>{if(a.isItConnected(),t.value.tabs=u.query.type==2?"cooperation":"news",u.query.id){if(Number(u.query.type)===1){const s=a.messageList.find(i=>i.id===u.query.id);s&&w(s)}else if(Number(u.query.type)===2){const s=a.todoList.find(i=>i.id===u.query.id);s&&A(s)}}}),(s,i)=>{const x=h("el-empty"),T=h("el-tab-pane"),H=h("el-tabs"),V=Q;return d(),r("div",te,[p(V,null,{default:c(()=>[n("div",se,[n("div",ae,[p(H,{modelValue:e(t).tabs,"onUpdate:modelValue":i[4]||(i[4]=o=>e(t).tabs=o),onTabChange:E},{default:c(()=>[p(T,{label:"消息",name:"news"},{label:c(()=>[oe]),default:c(()=>[n("div",ne,[n("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:i[0]||(i[0]=o=>m(1)),style:{height:"28px","font-size":"14px"}}," 未读"+l(e(a).message<100?`(${e(a).message})`:"99+"),3),n("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:i[1]||(i[1]=o=>m(2)),style:{height:"28px","font-size":"14px"}}," 已读"+l(e(a).readAlreadyMessageUnread<100?`(${e(a).readAlreadyMessageUnread})`:"99+"),3)]),p(e(S),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:c(()=>[e(C).length?(d(!0),r($,{key:0},N(e(C),o=>(d(),r("div",{class:_({item:"item",select:o.id===e(t).selectId}),onClick:B=>w(o)},[n("div",de,[n("div",le,[o.isReadAlready===1?(d(),r("span",re)):f("",!0),n("span",ce,l(e(a).auditTypeList[o.auditType-1]||""),1),n("span",ue,l(o.createTime),1)]),n("div",pe,l(o.messageContent),1)])],10,ie))),256)):(d(),v(x,{key:1,image:e(U),"image-size":300},null,8,["image"]))]),_:1})]),_:1}),p(T,{label:"代办",name:"cooperation"},{label:c(()=>[_e]),default:c(()=>[n("div",fe,[n("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:i[2]||(i[2]=o=>m(1)),style:{height:"28px","font-size":"14px"}}," 待办"+l(e(a).todo<100?`(${e(a).todo})`:"99+"),3),n("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:i[3]||(i[3]=o=>m(2)),style:{height:"28px","font-size":"14px"}}," 已办"+l(e(a).readAlreadyUnread<100?`(${e(a).readAlreadyUnread})`:"99+"),3)]),p(e(S),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:c(()=>[e(I).length?(d(!0),r($,{key:0},N(e(I),o=>(d(),r("div",{class:_({item:"item",select:o.id===e(t).selectId}),onClick:B=>A(o)},[n("div",me,[n("div",ve,[o.isReadAlready===1?(d(),r("span",be)):f("",!0),n("span",he,l(e(a).auditTypeList[o.auditType-1]||""),1),n("span",ge,l(o.createTime),1)]),n("div",ke," 您好，我是"+l(o.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(o.phoneOrEmail)+"。 ",1)])],10,ye))),256)):(d(),v(x,{key:1,image:e(U),"image-size":300},null,8,["image"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(t).selectId?J((d(),r("div",we,[e(t).tabs==="news"?(d(),v(Z,{key:0,ref_key:"newsRef",ref:k,onDelSelectId:R},null,512)):f("",!0),e(t).tabs==="cooperation"?(d(),v(ee,{key:1,ref_key:"cooperationRef",ref:g,onDelSelectId:R},null,512)):f("",!0)],512)),[[K,e(t).selectId]]):f("",!0)])]),_:1})])}}});typeof z=="function"&&z(q);const Ue=Y(q,[["__scopeId","data-v-2e8b528f"]]);export{Ue as default};
