
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{e as R}from"./index---YIw_lW.js";import{g as U,a as q}from"./zh_Hans-B4MI8oS4.js";import{z as B}from"./zh_Hans-B39mJ-rS.js";import{a as f}from"./announcement-ClVxrG3K.js";import{d as I,r as m,l as L,E as c,a as s,n as M,p as N,i as a,o as v,b as _,f as t,w as r,a2 as H,a3 as P,N as j}from"./index-CyRDEfVX.js";const A=I({__name:"index",props:["id","row"],setup(b,{expose:g}){const p=b,x=[{label:"公告",value:1},{label:"常见问题",value:2},{label:"帮助",value:3}],n=m(!1),u=m(),e=m({id:p.id,title:"",type:"",text:"",top:!1}),V=m({title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),y=[U({locale:q})];function h(i){e.value.text=i}L(()=>{e.value.id!==""&&k()});function k(){n.value=!0,e.value=p.row,n.value=!1}return g({submit(){return new Promise(i=>{e.value.id===""?u.value&&u.value.validate(l=>{l&&(delete e.value.id,n.value=!0,f.create(e.value).then(()=>{n.value=!1,c.success({message:"新增成功",center:!0}),i()}))}):u.value&&u.value.validate(l=>{l&&(n.value=!0,f.edit(e.value).then(()=>{n.value=!1,c.success({message:"编辑成功",center:!0}),i()}))})})}}),(i,l)=>{const w=s("el-input"),d=s("el-form-item"),C=s("el-option"),E=s("el-select"),F=s("el-checkbox"),z=s("ElForm"),D=M("loading");return N((v(),_("div",null,[t(z,{ref_key:"formRef",ref:u,model:a(e),rules:a(V),"label-width":"120px","label-suffix":"："},{default:r(()=>[t(d,{label:"标题",prop:"title"},{default:r(()=>[t(w,{modelValue:a(e).title,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).title=o),placeholder:"请输入标题",clearable:"",onChange:l[1]||(l[1]=()=>{})},null,8,["modelValue"])]),_:1}),t(d,{label:"类型",prop:"type"},{default:r(()=>[t(E,{modelValue:a(e).type,"onUpdate:modelValue":l[2]||(l[2]=o=>a(e).type=o),"value-key":"",placeholder:"类型",clearable:"",filterable:""},{default:r(()=>[(v(),_(H,null,P(x,o=>t(C,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"内容"},{default:r(()=>[t(a(R),{class:"editor",value:a(e).text,plugins:y,locale:a(B),onChange:h},null,8,["value","locale"])]),_:1}),t(d,{label:""},{default:r(()=>[t(F,{modelValue:a(e).top,"onUpdate:modelValue":l[3]||(l[3]=o=>a(e).top=o),label:"置顶",size:"large"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,a(n)]])}}}),S=j(A,[["__scopeId","data-v-bb02a4df"]]);export{S as default};
