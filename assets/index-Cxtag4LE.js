
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Z,r as C,c as ee,l as te,a as f,o as m,b as x,f as t,aG as ae,i as l,w as e,b8 as k,b9 as U,Q as g,C as c,D as s,g as r,e as h,F as Q,n as E,j,G as le,E as R,aK as oe,aL as se,P as re}from"./index-B4ooH8ql.js";import{g as ne,v as ie,a as ce}from"./index-9ZC6iaNB.js";import{f as ue}from"./file-B40UrcBX.js";import{o as de}from"./apiLoading-DivxCBsL.js";import{a as T}from"./projectManagement-CnYshljp.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-ClAQDpct.js";import{D as me}from"./download-C8PHVIy1.js";import{u as _e}from"./otherFunctions_basicDictionary-CAAJZq4Q.js";import"./basicDictionary-LvQ-wF0l.js";const b=N=>(oe("data-v-4737f3b7"),N=N(),se(),N),pe={style:{"margin-left":"25.5%"}},ye=b(()=>c("span",{style:{"margin-left":"19.5%"}},"操作员",-1)),ge=b(()=>c("span",{style:{"margin-left":"12.5%"}},"操作员",-1)),be=b(()=>c("span",{style:{"margin-left":"8.5%"}},"操作员",-1)),Se=b(()=>c("span",{style:{"margin-left":"28.5%"}},"操作员",-1)),xe={class:"card-header"},he={class:"leftTitle"},ve={class:"m-4 spanStatus"},je={class:"rightStatus"},Ie=b(()=>c("div",{class:"card-header"},[c("span",null,"其他设置")],-1)),Le={class:"peizjo-header"},we=b(()=>c("span",null,"配置信息",-1)),Ce={key:0,style:{"margin-left":"50px"}},ke={key:1,style:{"margin-left":"30px"}},Ne=b(()=>c("div",{class:"card-header"},[c("span",null,"安全信息")],-1)),Pe=b(()=>c("div",{class:"card-header"},[c("span",null,"描述及配额")],-1)),Ue={class:"demo-image__preview"},De={class:"radius p-2 flex gap-2"},Qe=b(()=>c("div",{class:"card-header"},[c("span",null,"操作日志")],-1)),Te=Z({name:"ProjectDetails",__name:"index",setup(N,{expose:z}){const F=_e();C("# Fantastic-admin");const V=C(),D=C(1),a=C({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});ne({locale:ce});const M=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function $(d){V.value.showEdit(d)}const I=C(!1);async function G(d){a.value.isOnline=d.isOnline,a.value.allocationStatus=d.allocationStatus;const _=await de(T.detail({projectId:d.projectId}));a.value.form=_.data,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((y,o)=>(y.find(n=>n.settlementStatus===o.settlementStatus)||y.push(o),y),[]);const u=await ue.detail({fileName:a.value.form.descriptionUrl});a.value.imgUrl=u.data.fileUrl,a.value.srcList=[u.data.fileUrl],q(),I.value=!0}const q=async()=>{if(a.value.form.projectQuotaInfoList.length){const d=await T.getProjectCountryList({countryIdList:a.value.form.countryIdList}),_={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},u=await T.getProjectCategoryList(_),y=O(d.data.getProjectCountryListInfoList,"countryId",_.countryId),o=O(u.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=y.countryName,a.value.form.projectProblemCategoryName=o.projectProblemCategoryName}},O=(d,_,u)=>d.find(y=>y[_]===u),P=ee(()=>d=>a.value.countryList.filter(u=>d.includes(u.id)).map(u=>u.chineseName));async function A(d){try{await navigator.clipboard.writeText(d),R.success({message:"已复制文本",center:!0})}catch{R.warning({message:"复制失败,请重试",center:!0})}}async function H(){await me(a.value.imgUrl,a.value.form.descriptionUrl)}function B(){I.value=!1}return te(async()=>{a.value.countryList=await F.getCountry()}),z({showEdit:G}),(d,_)=>{const u=f("el-step"),y=f("el-steps"),o=f("el-col"),S=f("el-row"),n=f("el-text"),i=f("el-form-item"),K=f("el-link"),L=f("el-button"),v=f("el-card"),J=f("el-image"),w=f("el-table-column"),W=f("el-table"),X=f("ElForm"),Y=f("el-drawer");return m(),x("div",null,[t(Y,{modelValue:l(I),"onUpdate:modelValue":_[1]||(_[1]=p=>le(I)?I.value=p:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},ae({footer:e(()=>[t(L,{onClick:B},{default:e(()=>[r(" 取消 ")]),_:1}),t(L,{type:"primary",onClick:B},{default:e(()=>[r(" 确定 ")]),_:1})]),default:e(()=>[t(X,{"label-width":"120px"},{default:e(()=>[t(v,{class:"box-card"},{header:e(()=>[c("div",xe,[c("div",he,[r(" 基本信息 "),c("span",ve,s(l(a).allocationStatus===1?"未分配":"已分配"),1)]),c("div",je,[c("div",{class:g(l(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},s(l(a).isOnline===1?"在线":"离线"),3)])])]),default:e(()=>[t(S,{gutter:10},{default:e(()=>[t(o,{span:8},{default:e(()=>[t(i,{label:"项目ID :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.projectId?l(a).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"项目名称 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.name?l(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"项目标识 :",prop:"client_pid"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.projectIdentification?l(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"所属客户 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.clientId?l(a).form.clientId:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"所属国家 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[l(P)(l(a).form.countryIdList).length>4?(m(),h(K,{key:0,type:"primary"},{default:e(()=>[r(s(l(P)(l(a).form.countryIdList).length===185?"全球":l(P)(l(a).form.countryIdList).length),1)]),_:1})):(m(!0),x(Q,{key:1},E(l(P)(l(a).form.countryIdList),p=>(m(),x("span",{key:p},s(p)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"原价 :"},{default:e(()=>[l(a).form.currencyType===1?(m(),h(n,{key:0,class:"mx-1"},{default:e(()=>[r(s(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):j("",!0),l(a).form.currencyType===2?(m(),h(n,{key:1,class:"mx-1"},{default:e(()=>[r(s(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):j("",!0)]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"配额 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.num?l(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"最小时长 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.minimumDuration?l(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"IR/NIR :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.ir?l(a).form.ir+"%":l(a).form.ir)+" / "+s(l(a).form.nir?l(a).form.nir+"%":l(a).form.nir),1)]),_:1})]),_:1})]),_:1}),t(o,{span:12},{default:e(()=>[t(i,{label:"URL :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.uidUrl?l(a).form.uidUrl:"-"),1)]),_:1}),t(L,{type:"primary",style:{"margin-left":"auto"},onClick:_[0]||(_[0]=p=>A(l(a).form.uidUrl)),link:""},{default:e(()=>[r(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{class:"box-card"},{header:e(()=>[Ie]),default:e(()=>[t(S,{gutter:10},{default:e(()=>[t(o,{span:8},{default:e(()=>[t(i,{label:"置顶 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"在线 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"资料 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"B2B :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s()+" "+s(l(a).form.isPinned===1?l(a).form.projectType.join(","):"关"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"定时发布 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"备注 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).formNaNpxark?l(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{class:"box-card"},{header:e(()=>[c("div",Le,[we,l(a).form.countryName?(m(),x("span",Ce,s(l(a).form.countryName),1)):j("",!0),l(a).form.projectProblemCategoryName?(m(),x("span",ke,s(l(a).form.projectProblemCategoryName),1)):j("",!0)])]),default:e(()=>[t(S,{gutter:10,class:g(l(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:e(()=>[t(o,{span:8},{default:e(()=>[t(i,{label:"国家 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.countryName?l(a).form.countryName:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"问卷 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.projectProblemCategoryName?l(a).form.projectProblemCategoryName:"-"),1)]),_:1})]),_:1})]),_:1}),(m(!0),x(Q,null,E(l(a).form.projectQuotaInfoList,p=>(m(),h(o,{span:24,class:g({isNone:!l(a).form.projectQuotaInfoList.length}),gutter:10},{default:e(()=>[t(i,{"label-width":"200px",label:p.keyValue+" :"},{default:e(()=>[p.answerValueList&&p.answerValueList[0]!=="null"?(m(),h(n,{key:0,class:"mx-1"},{default:e(()=>[r(s(p.answerValueList.join(", ")),1)]),_:2},1024)):(m(),h(n,{key:1,class:"mx-1"},{default:e(()=>[r(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1}),t(v,{class:"box-card"},{header:e(()=>[Ne]),default:e(()=>[t(S,{gutter:20},{default:e(()=>[t(o,{span:8},{default:e(()=>[t(i,{label:"小时准入量 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.preNum?l(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"小时完成量 :"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.limitedQuantity?l(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),t(o,{span:8},{default:e(()=>[t(i,{label:"IP一致性检测:"},{default:e(()=>[t(n,{class:"mx-1"},{default:e(()=>[r(s(l(a).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(a).form.descriptionUrl?(m(),h(v,{key:0,class:"box-card"},{header:e(()=>[Pe]),default:e(()=>[l(a).form.descriptionUrl?(m(),x(Q,{key:0},[c("div",Ue,[t(J,{style:{width:"6.25rem",height:"6.25rem"},src:l(a).imgUrl,"preview-src-list":l(a).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),t(L,{style:{padding:"0"},type:"primary",text:"",onClick:H},{default:e(()=>[r(s(l(a).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):j("",!0),t(S,{class:g({isNone:!l(a).form.descriptionUrl}),gutter:20},{default:e(()=>[t(o,{span:24},{default:e(()=>[c("div",De,[t(l(ie),{value:l(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):j("",!0),t(v,{class:"box-card"},{header:e(()=>[Qe]),default:e(()=>[t(W,{data:M,border:"",style:{width:"100%"}},{default:e(()=>[t(w,{align:"center",type:"index",width:"80",label:"序号"}),t(w,{align:"center",prop:"a",label:"操作时间"}),t(w,{align:"center",prop:"b",label:"操作人"}),t(w,{align:"center",prop:"c",label:"操作事项"}),t(w,{align:"center",prop:"d",label:"详情"},{default:e(()=>[t(L,{text:"",type:"primary",size:"default",onClick:$},{default:e(()=>[r(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},[l(a).form.projectSettlementStatusSet&&l(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:e(()=>[t(S,{gutter:20},{default:e(()=>[t(o,{span:24},{default:e(()=>[t(y,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:l(a).form.projectSettlementStatusSet[0].settlementStatus},{default:e(()=>[t(u,{title:"待审核",description:"2021-09-09 11:11:11",icon:l(k)},null,8,["icon"]),t(u,{title:"已审核",description:l(a).form.projectSettlementStatusSet[0].operationTime,icon:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2?l(k):l(U)},null,8,["description","icon"]),t(u,{title:"已开票",description:"2021-09-09 11:11:11",icon:l(D)>=3?l(k):l(U)},null,8,["icon"]),t(u,{title:"已结算",description:"2021-09-09 11:11:11",icon:l(D)>=4?l(k):l(U)},null,8,["icon"]),t(u,{title:"已冻结",description:"2021-09-09 11:11:11",icon:l(D)>=5?l(k):l(U)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),t(S,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:e(()=>[t(o,{span:1}),t(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=1}),span:5},{default:e(()=>[c("span",pe,s(l(a).form.projectSettlementStatusSet[0].operationName),1)]),_:1},8,["class"]),t(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2}),span:5},{default:e(()=>[ye]),_:1},8,["class"]),t(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=3}),span:5},{default:e(()=>[ge]),_:1},8,["class"]),t(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=4}),span:4},{default:e(()=>[be]),_:1},8,["class"]),t(o,{class:g({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=5}),span:4},{default:e(()=>[Se]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),t(fe,{ref_key:"logDetailsRef",ref:V},null,512)])}}}),Ge=re(Te,[["__scopeId","data-v-4737f3b7"]]);export{Ge as default};
