
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Z,r as h,c as ee,D as te,a as f,o as p,b as I,f as e,w as t,i as l,b3 as ae,b4 as U,b5 as D,g as s,F as c,G as n,P as C,e as N,a3 as Q,a4 as T,j as le,l as oe,ak as B,aG as se,aH as ne,_ as re}from"./index-2IdPhYgX.js";import{g as ie,v as ce,a as de}from"./index-Bl7gTwLt.js";import{f as ue}from"./file-DyLjfeoJ.js";import{o as fe}from"./apiLoading-BOpQh4tL.js";import{a as V}from"./projectManagement-BDP_rWLc.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-CFlOs750.js";import{u as _e}from"./otherFunctions_basicDictionary-DN_grapl.js";import"./basicDictionary-C6rG4sgR.js";const L=w=>(se("data-v-ca65349d"),w=w(),ne(),w),pe={class:"card-header"},ye={class:"m-4",style:{width:"60px !important",height:"20px !important",background:"var(--el-color-primary)",color:"var(--el-color-white)",padding:"0 8px","font-size":"0.875rem","border-radius":"3.125rem"}},be={class:"status"},ge=L(()=>c("div",{class:"card-header"},[c("span",null,"其他设置")],-1)),xe=L(()=>c("div",{class:"card-header"},[c("span",null,"配置信息")],-1)),ve=L(()=>c("div",{class:"card-header"},[c("span",null,"安全信息")],-1)),he=L(()=>c("div",{class:"card-header"},[c("span",null,"描述及配额")],-1)),Ie={class:"demo-image__preview"},Le={class:"radius p-2 flex gap-2"},we=L(()=>c("div",{class:"card-header"},[c("span",null,"操作日志")],-1)),je=Z({name:"ProjectDetails",__name:"index",setup(w,{expose:E}){const F=_e();h("# Fantastic-admin");const O=h(),j=h(1),a=h({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});ie({locale:de});const z=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function M(d){O.value.showEdit(d)}const g=h(!1);async function G(d){a.value.isOnline=d.isOnline,a.value.allocationStatus=d.allocationStatus;const u=await fe(V.detail({projectId:d.projectId}));a.value.form=u.data;const o=await ue.detail({fileName:a.value.form.descriptionUrl});a.value.imgUrl=o.data.fileUrl,a.value.srcList=[o.data.fileUrl],H(),g.value=!0}const H=async()=>{if(a.value.form.projectQuotaInfoList.length){const d=await V.getProjectCountryList({countryIdList:a.value.form.countryIdList}),u={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},o=await V.getProjectCategoryList(u),m=R(d.data.getProjectCountryListInfoList,"countryId",u.countryId),P=R(o.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=m.countryName,a.value.form.projectProblemCategoryName=P.projectProblemCategoryName}},R=(d,u,o)=>d.find(m=>m[u]===o),k=ee(()=>d=>a.value.countryList.filter(o=>d.includes(o.id)).map(o=>o.chineseName));async function $(d){try{await navigator.clipboard.writeText(d),B.success({message:"已复制文本",center:!0})}catch{B.warning({message:"复制失败,请重试",center:!0})}}async function q(){const u=await(await fetch(a.value.imgUrl)).blob(),o=URL.createObjectURL(u),m=document.createElement("a");m.href=o,document.body.appendChild(m),m.download=a.value.form.descriptionUrl,m.click(),document.body.removeChild(m),URL.revokeObjectURL(o)}function S(){g.value=!1}return te(async()=>{a.value.countryList=await F.getCountry()}),E({showEdit:G}),(d,u)=>{const o=f("el-col"),m=f("el-step"),P=f("el-steps"),y=f("el-row"),r=f("el-text"),i=f("el-form-item"),A=f("el-link"),J=f("el-tooltip"),x=f("el-button"),b=f("el-card"),K=f("el-image"),v=f("el-table-column"),W=f("el-table"),X=f("ElForm"),Y=f("el-drawer");return p(),I("div",null,[e(Y,{modelValue:l(g),"onUpdate:modelValue":u[1]||(u[1]=_=>oe(g)?g.value=_:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},{header:t(()=>[e(y,{gutter:20},{default:t(()=>[e(o,{span:2}),e(o,{span:20},{default:t(()=>[e(P,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:l(j)},{default:t(()=>[e(m,{title:"已开始",description:"2021-09-09 11:11:11",icon:l(ae)},null,8,["icon"]),e(m,{title:"已确认",description:"2021-09-09 11:11:11",icon:l(j)>=2?l(U):l(D)},null,8,["icon"]),e(m,{title:"已开票",description:"2021-09-09 11:11:11",icon:l(j)>=3?l(U):l(D)},null,8,["icon"]),e(m,{title:"已完结",description:"2021-09-09 11:11:11",icon:l(j)>=4?l(U):l(D)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(o,{span:2})]),_:1})]),footer:t(()=>[e(x,{onClick:S},{default:t(()=>[s(" 取消 ")]),_:1}),e(x,{type:"primary",onClick:S},{default:t(()=>[s(" 确定 ")]),_:1})]),default:t(()=>[e(X,{"label-width":"120px"},{default:t(()=>[e(b,{class:"box-card"},{header:t(()=>[c("div",pe,[c("div",null,[s(" 基本信息 "),c("span",ye,n(l(a).allocationStatus===1?"未分配":"已分配"),1)]),c("div",be,[c("div",{class:C(l(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},n(l(a).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[e(y,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"项目ID :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.projectId?l(a).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"项目名称 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.name?l(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.projectIdentification?l(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"所属客户 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.clientId?l(a).form.clientId:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"所属国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[l(k)(l(a).form.countryIdList).length>4?(p(),N(J,{key:0,class:"box-item",effect:"dark",content:l(k)(l(a).form.countryIdList).join(","),placement:"top"},{default:t(()=>[e(A,{type:"primary"},{default:t(()=>[s(n(l(k)(l(a).form.countryIdList).length),1)]),_:1})]),_:1},8,["content"])):(p(!0),I(Q,{key:1},T(l(k)(l(a).form.countryIdList),_=>(p(),I("span",{key:_},n(_)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"原价 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"配额 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.num?l(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"最小时长 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.minimumDuration?l(a).form.minimumDuration:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"IR :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.ir?l(a).form.ir:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"URL :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.uidUrl?l(a).form.uidUrl:"-"),1)]),_:1}),e(x,{type:"primary",style:{"margin-left":"auto"},onClick:u[0]||(u[0]=_=>$(l(a).form.uidUrl)),link:""},{default:t(()=>[s(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"box-card"},{header:t(()=>[ge]),default:t(()=>[e(y,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"置顶 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"在线 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"资料 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"B2B :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"定时发布 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"备注 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).formNaNpxark?l(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"box-card"},{header:t(()=>[xe]),default:t(()=>[e(y,{gutter:10,class:C(l(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.countryName?l(a).form.countryName:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"问卷 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.projectProblemCategoryName?l(a).form.projectProblemCategoryName:"-"),1)]),_:1})]),_:1})]),_:1}),(p(!0),I(Q,null,T(l(a).form.projectQuotaInfoList,_=>(p(),N(o,{span:24,class:C({isNone:!l(a).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[e(i,{label:_.keyValue+" :"},{default:t(()=>[_.answerValueList&&_.answerValueList[0]!=="null"?(p(),N(r,{key:0,class:"mx-1"},{default:t(()=>[s(n(_.answerValueList.join(", ")),1)]),_:2},1024)):(p(),N(r,{key:1,class:"mx-1"},{default:t(()=>[s(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1}),e(b,{class:"box-card"},{header:t(()=>[ve]),default:t(()=>[e(y,{gutter:20},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"小时准入量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.preNum?l(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"小时完成量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.limitedQuantity?l(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"时差检测 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.timeDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"重复IP检测 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.ipDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"IP一致性检测:"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(l(a).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"box-card"},{header:t(()=>[he]),default:t(()=>[l(a).form.descriptionUrl?(p(),I(Q,{key:0},[c("div",Ie,[e(K,{style:{width:"6.25rem",height:"6.25rem"},src:l(a).imgUrl,"preview-src-list":l(a).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),e(x,{style:{padding:"0"},type:"primary",text:"",onClick:q},{default:t(()=>[s(n(l(a).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):le("",!0),e(y,{class:C({isNone:!l(a).form.descriptionUrl}),gutter:20},{default:t(()=>[e(o,{span:24},{default:t(()=>[c("div",Le,[e(l(ce),{value:l(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1}),e(b,{class:"box-card"},{header:t(()=>[we]),default:t(()=>[e(W,{data:z,border:"",style:{width:"100%"}},{default:t(()=>[e(v,{align:"center",type:"index",width:"80",label:"序号"}),e(v,{align:"center",prop:"a",label:"操作时间"}),e(v,{align:"center",prop:"b",label:"操作人"}),e(v,{align:"center",prop:"c",label:"操作事项"}),e(v,{align:"center",prop:"d",label:"详情"},{default:t(()=>[e(x,{text:"",type:"primary",size:"default",onClick:M},{default:t(()=>[s(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{ref_key:"logDetailsRef",ref:O},null,512)])}}}),Oe=re(je,[["__scopeId","data-v-ca65349d"]]);export{Oe as default};
