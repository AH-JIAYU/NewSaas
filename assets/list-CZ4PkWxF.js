
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ne,am as we,aO as je,r as s,a5 as Le,c as Se,l as xe,b as f,q as Pe,o as n,e as b,g as l,w as t,j as o,h as i,I as C,s as Re,f as r,aN as Be,H as d,k as p,t as y,F as Q,v as Ee,S as Te,be as ze,E as De,aQ as Me,aR as Ae,bd as Ue,ap as Fe,aI as Oe,aJ as He,R as Ve}from"./index-D7Sst9VF.js";import{_ as $e}from"./index-DFK48xBm.js";import{_ as Ge}from"./index.vue_vue_type_style_index_0_lang-CmFAJyPs.js";import{_ as Qe}from"./index-CaP4xy9m.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-DuLYLacY.js";import Je from"./index-C3wr2Pvz.js";import Ze from"./index-BpJaq_Uu.js";import Ke from"./index-CYEE5yC5.js";import{a as We}from"./survey_myProjeck-Cn8_QNZn.js";import{u as Xe}from"./user_customer-WeyHeXqW.js";import{u as Ye}from"./index-BJN4fjIY.js";import"./index-B6EhJAmM.js";import"./index.vue_vue_type_script_setup_true_lang-C4I_GVgn.js";import"./sortable.esm-C0-Qcoum.js";import"./index-DN-H4u5F.js";import"./file-B0c8YuGo.js";import"./download-C8PHVIy1.js";import"./apiLoading-COoxwg6Z.js";import"./clipboard-Bzq-wvag.js";import"./projectManagement-DSha6cDh.js";import"./survey_vipGroup-bcaO23dJ.js";import"./survey_vipGroup-BHik2cGl.js";import"./user_customer-BztjzJoc.js";const et=w=>(Oe("data-v-d97b0edb"),w=w(),He(),w),tt={key:0,class:"crudeTop"},ot={key:1,class:"hoverSvg"},lt={class:"fineSize"},at={key:0,class:"crudeTop"},nt={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},rt={class:"fineBom"},it={class:"parameter oneLine"},ct=et(()=>y("span",{class:"headerIcon"},[y("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[y("g",{id:"Time (æ¶é´)"},[y("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),y("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),i(" 创建时间 ")],-1)),st=Ne({name:"myProjeck",__name:"list",setup(w){const{format:q}=ze(),{toClipboard:J}=Ye(),z=we(),Z=Xe(),{pagination:g,getParams:K,onSizeChange:W,onCurrentChange:X,onSortChange:ut}=je(),D=s([]),M=s([]),A=s(),Y=s(""),U=s(),j=s(!0),ee=s(),F=s(),L=s(!1),u=s([]),S=s(!1),O=s(),te=s("formSearch-myProjeck"),x=s("default"),P=s(!1),R=s([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=Le({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),H=s([]),V=s();function oe(a){U.value.showEdit(a)}function le(a){F.value.showEdit(a)}function ae(a){V.value.showEdit(a)}function ne(a){W(a).then(()=>I())}function T(a=1){X(a).then(()=>I())}function re(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),I()}async function I(){try{j.value=!0;const a={...K(),..._};_.time&&_.time.length&&(a.beginTime=_.time[0]||"",a.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?a.countryId=[_.countryId]:a.countryId=[];const c=await We.list(a);A.value=c.data.currencyType,H.value=c.data.getMemberProjectListInfoList,g.value.total=c.data.total,j.value=!1}catch{}finally{j.value=!1}}const ie=a=>{J(a),De({type:"success",message:"复制成功"})},ce=s();function se(a){ce.value=a.projectId}const B=Se(()=>a=>D.value.filter(N=>a==null?void 0:a.includes(N.id)).map(N=>N.chineseName));xe(async()=>{R.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),D.value=await z.getCountry(),M.value=await Z.getCustomerList(),I(),O.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"国家地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const ue={clientId:()=>M.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(a,c)=>{const N=Qe,pe=f("ElDivider"),de=Ge,E=f("el-button"),me=Me,fe=Ae,_e=f("el-row"),m=f("el-table-column"),he=$e,$=f("el-tooltip"),h=f("el-text"),ye=Ue,G=f("el-link"),k=f("el-tag"),be=f("ElSpace"),ge=f("el-empty"),ke=f("el-table"),ve=f("ElPagination"),Ce=Fe,Ie=Pe("loading");return n(),b("div",{class:Te({"absolute-container":o(S)})},[l(Ce,null,{default:t(()=>[l(N,{formSearchList:o(O),formSearchName:o(te),onCurrentChange:T,onOnReset:re,model:o(_),formOption:ue},null,8,["formSearchList","formSearchName","model"]),l(pe,{"border-style":"dashed"}),l(_e,{gutter:24},{default:t(()=>[l(de),l(fe,null,{default:t(()=>[l(E,{size:"default",onClick:c[0]||(c[0]=()=>{})},{default:t(()=>[i(" 导出 ")]),_:1}),l(me,{border:o(L),"onUpdate:border":c[1]||(c[1]=e=>C(L)?L.value=e:null),tableAutoHeight:o(S),"onUpdate:tableAutoHeight":c[2]||(c[2]=e=>C(S)?S.value=e:null),checkList:o(u),"onUpdate:checkList":c[3]||(c[3]=e=>C(u)?u.value=e:null),columns:o(R),"onUpdate:columns":c[4]||(c[4]=e=>C(R)?R.value=e:null),"line-height":o(x),"onUpdate:lineHeight":c[5]||(c[5]=e=>C(x)?x.value=e:null),stripe:o(P),"onUpdate:stripe":c[6]||(c[6]=e=>C(P)?P.value=e:null),style:{"margin-left":"12px"},onQueryData:T},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Re((n(),r(ke,{ref_key:"tableSortRef",ref:Y,style:{"margin-top":"10px"},"row-key":"id",data:o(H),border:o(L),size:o(x),stripe:o(P),onCurrentChange:se},{empty:t(()=>[l(ge,{image:o(Be),"image-size":300},null,8,["image"])]),default:t(()=>[l(m,{align:"left",type:"selection"}),o(u).includes("project")?(n(),r(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:t(({row:e})=>[o(u).includes("projectName")?(n(),b("p",tt,"名称："+d(e.projectName),1)):p("",!0),o(u).includes("projectId")?(n(),b("div",ot,[y("p",lt,"ID："+d(e.projectId),1),l(he,{class:"copy",content:e.projectId},null,8,["content"])])):p("",!0)]),_:1})):p("",!0),o(u).includes("projectIdentificationOrClientName")?(n(),r(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:t(({row:e})=>[o(u).includes("projectIdentification")?(n(),b("p",at," 名称："+d(e.projectIdentification),1)):p("",!0),o(u).includes("projectIdClientName")?(n(),b("p",nt,[i("标："),y("span",rt,d(e.clientName),1)])):p("",!0)]),_:1})):p("",!0),o(u).includes("withoutUrl")?(n(),r(m,{key:2,prop:"withoutUrl",align:"left",label:"URL"},{default:t(({row:e})=>[l($,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:t(()=>[l(E,{link:"",type:"primary",onClick:v=>ie(e.withoutUrl)},{default:t(()=>[i("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):p("",!0),o(u).includes("participation")?(n(),r(m,{key:3,"show-overflow-tooltip":"",width:"180",align:"left",label:"参数"},{default:t(({row:e})=>[y("p",it,[l(h,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:t(()=>[i("参与："+d(e.participation||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:t(()=>[i("完成："+d(e.complete||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:t(()=>[i("配额："+d(e.num||0),1)]),_:2},1024),l(h,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:t(()=>[i("限量："+d(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):p("",!0),o(u).includes("doMoneyPrice")?(n(),r(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"原价"},{default:t(({row:e})=>[o(A)===3?(n(),r(h,{key:0,class:"mx-1"},{default:t(()=>[i("暂无数据")]),_:1})):(n(),r(h,{key:1,class:"mx-1"},{default:t(()=>[l(h,{style:{color:"#FD8989"}},{default:t(()=>[l(ye)]),_:1}),l(h,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:t(()=>[i(d(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):p("",!0),o(u).includes("memberPrice")?(n(),r(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"会员价"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(G,{key:0,size:"small",plain:"",type:"primary",onClick:v=>le(e)},{default:t(()=>[i(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(h,{key:1},{default:t(()=>[i(" - ")]),_:1}))]),_:1})):p("",!0),o(u).includes("countryNameList")?(n(),r(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"国家"},{default:t(({row:e})=>[e.countryNameList?(n(),b(Q,{key:0},[e.countryNameList.length===o(z).country.length?(n(),r(k,{key:0,type:"primary"},{default:t(()=>[i("全球")]),_:1})):o(B)(e.countryNameList).length>1?(n(),r($,{key:1,class:"box-item",effect:"dark",content:o(B)(e.countryNameList).join(","),placement:"top"},{default:t(()=>[l(G,{type:"primary"},{default:t(()=>[l(k,{type:"primary"},{default:t(()=>[i("x"+d(o(B)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),b(Q,{key:2},Ee(o(B)(e.countryNameList),v=>(n(),r(k,{key:v,type:"primary"},{default:t(()=>[i(d(v),1)]),_:2},1024))),128))],64)):p("",!0)]),_:1})):p("",!0),o(u).includes("ir")?(n(),r(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:t(({row:e})=>[l(h,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:t(()=>[i(d(e.ir?e.ir:"-")+" / "+d(e.nir?e.nir:"-"),1)]),_:2},1024)]),_:1})):p("",!0),o(u).includes("memberStatus")?(n(),r(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(k,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:t(()=>[i(" 会员组 ")]),_:1})):(n(),r(k,{key:1,effect:"plain",type:"info"},{default:t(()=>[i(" 未分配 ")]),_:1}))]),_:1})):p("",!0),o(u).includes("createTime")?(n(),r(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{header:t(()=>[ct]),default:t(({row:e})=>[l(k,{effect:"plain",type:"info"},{default:t(()=>[i(d(o(q)(e.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:t(({row:e})=>[l(be,null,{default:t(()=>[e.getMemberGroupNameInfoList.length?p("",!0):(n(),r(E,{key:0,type:"primary",plain:"",size:"small",onClick:v=>ae(e)},{default:t(()=>[i(" 分配 ")]),_:2},1032,["onClick"])),l(E,{size:"small",plain:"",type:"warning",onClick:v=>oe(e)},{default:t(()=>[i(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ie,o(j)]]),l(ve,{"current-page":o(g).page,total:o(g).total,"page-size":o(g).size,"page-sizes":o(g).sizes,layout:o(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(qe,{ref_key:"CheckEditRef",ref:ee},null,512),l(Je,{ref_key:"detailRef",ref:U},null,512),l(Ze,{ref_key:"checkMembershipPriceRef",ref:F},null,512),l(Ke,{ref_key:"addAllocationEditRef",ref:V,onFetchData:I},null,512)],2)}}}),Tt=Ve(st,[["__scopeId","data-v-d97b0edb"]]);export{Tt as default};
