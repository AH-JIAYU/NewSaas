
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p}from"./position_manage-QlMqtdlO.js";import{d as U,r as s,k as B,a as i,l as D,n as T,o as q,b as M,f as a,w as n,p as S,g as _,E as g,t as I}from"./index-DcqAaBhZ.js";const J={style:{flex:"auto"}},j=U({name:"Edit",__name:"index",emits:["success"],setup(O,{expose:V,emit:b}){const c=b,v=s(""),x=s(),k=s(!1),r=s(),u=s(!1),e=s({id:null,name:"",active:1,remark:1}),y=s({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});function w(){return new Promise(t=>{e.value.id?r.value&&r.value.validate(l=>{if(l){const m=I(e.value);p.edit(m).then(()=>{g.success({message:"编辑成功",center:!0}),c("success"),u.value=!1,t()})}}):r.value&&r.value.validate(l=>{l&&(console.log("form.value",e.value),delete e.value.id,p.create(e.value).then(()=>{g.success({message:"新增成功",center:!0}),c("success"),u.value=!1,t()}))})})}async function C(t){t?e.value=JSON.parse(t):e.value={id:null,name:"",active:1,remark:""},v.value=t!=null&&t.id?"编辑":"新增",u.value=!0}return B(async()=>{x.value=new Date}),V({showEdit:C}),(t,l)=>{const m=i("el-input"),d=i("el-form-item"),E=i("el-switch"),h=i("el-form"),f=i("el-button"),N=i("el-dialog"),R=D("loading");return T((q(),M("div",null,[a(N,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value=o),title:v.value,width:"700"},{footer:n(()=>[S("div",J,[a(f,{type:"",onClick:l[3]||(l[3]=o=>u.value=!1)},{default:n(()=>[_(" 取消 ")]),_:1}),a(f,{type:"primary",onClick:w},{default:n(()=>[_(" 确定 ")]),_:1})])]),default:n(()=>[a(h,{ref_key:"formRef",ref:r,"label-width":"80px",model:e.value,rules:y.value,inline:!1},{default:n(()=>[a(d,{prop:"name",label:"职位名称"},{default:n(()=>[a(m,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"职位日志"},{default:n(()=>[a(E,{modelValue:e.value.active,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.active=o),"inline-prompt":"","active-text":"启用","inactive-text":"禁用","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),a(d,{label:"备注"},{default:n(()=>[a(m,{modelValue:e.value.remark,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.remark=o),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[R,k.value]])}}});export{j as _};
