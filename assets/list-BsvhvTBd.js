
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,r as n,aM as fe,$ as _e,n as ge,a as d,q as F,s as p,o as s,b as ve,f as l,w as a,i as r,e as i,g as b,B as he,aN as ye,v as f,A as S,O as R,j as v,aO as Ce,E as ke,aP as be,aQ as Se,_ as we,ao as ze,M as Ee}from"./index-BDq3fI5e.js";import{_ as Le}from"./index-BBdzIHbt.js";import{_ as xe}from"./index.vue_vue_type_style_index_0_lang-U5OC26yy.js";import{_ as De}from"./index-DqX4Csk4.js";import{a as H}from"./position_manage-CFCuA6eT.js";import Pe from"./index-C1uNra7_.js";import{u as Re}from"./user_customer-DT397afO.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-3vEm1okN.js";import{columns as w,formSearchList as Ne}from"./index-LKHl6-K8.js";import"./index-BPWP68ti.js";import"./clipboard-DhgZaUm3.js";import"./index.vue_vue_type_script_setup_true_lang-ELhxTpQZ.js";import"./sortable.esm-C0-Qcoum.js";const Be={class:"copyId tableSmall"},Ue={class:"id oneLine idFont"},Fe={class:"tableBig"},He={class:"fontC-System"},Me={class:"flex-s"},Oe={class:"oneLine fontC-System",style:{width:"calc(100% - 20px)"}},Ae=pe({name:"position_manage",__name:"list",setup(Ie){const M=Re(),O=n([]),{pagination:m,onSizeChange:A,onCurrentChange:I,onSortChange:Qe}=fe(),Q=n(""),$=n([]),h=n(!0),z=n(),E=n(!1),u=n([]),L=n(!0),x=n("default"),N=n(),y=n(),D=n(!0),V=n([]),j=n("formSearch-position_manage"),q=[{lable:"启用",value:1},{lable:"禁用",value:2}],_=_e({page:1,limit:10,id:null,name:"",active:null});function T(){z.value.showEdit()}function J(t){z.value.showEdit(JSON.stringify(t))}function G(t){t?y.value=t.id:y.value=""}function K(t,o){N.value.showEdit(t,o)}function W(t){V.value=t}function X(t){Ce.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(async()=>{(await H.delete({id:t.id})).status===1&&(ke.success({message:"删除成功",center:!0}),c())})}function Y(){Object.assign(_,{page:1,limit:10,id:null,name:"",active:null}),c()}function Z(t){A(t).then(()=>{_.limit=t,c()})}function P(t=1){I(t).then(()=>{_.page=t,c()})}async function c(){try{h.value=!0,O.value=await M.getCustomerList();const{data:t,status:o}=await H.list(_);t&&o===1&&($.value=t.data,m.value.total=parseInt(t.total)||0),h.value=!1}catch{}finally{h.value=!1}}ge(()=>{w.forEach(t=>{t.checked&&u.value.push(t.prop)}),c()});const ee={active:()=>q};return(t,o)=>{const te=De,oe=d("ElDivider"),C=d("el-button"),ae=xe,ne=be,le=Se,se=d("el-row"),ie=Le,g=d("el-table-column"),re=we,ue=d("el-empty"),ce=d("el-table"),de=d("ElPagination"),me=ze,k=F("auth"),B=F("loading");return p((s(),ve("div",{class:R({"absolute-container":E.value})},[l(me,null,{default:a(()=>[l(te,{formSearchList:r(Ne),formSearchName:j.value,onCurrentChange:P,onOnReset:Y,model:_,formOption:ee},null,8,["formSearchList","formSearchName","model"]),l(oe,{"border-style":"dashed"}),l(se,{gutter:24},{default:a(()=>[l(ae,null,{default:a(()=>[p((s(),i(C,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:T},{default:a(()=>[b(" 新增职位 ")]),_:1})),[[k,"position_manage-insert-insertPosition"]])]),_:1}),l(le,null,{default:a(()=>[l(C,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:a(()=>[b(" 导出 ")]),_:1}),l(ne,{border:L.value,"onUpdate:border":o[1]||(o[1]=e=>L.value=e),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>E.value=e),checkList:u.value,"onUpdate:checkList":o[3]||(o[3]=e=>u.value=e),columns:r(w),"onUpdate:columns":o[4]||(o[4]=e=>he(w)?w.value=e:null),"line-height":x.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>x.value=e),stripe:D.value,"onUpdate:stripe":o[6]||(o[6]=e=>D.value=e),style:{"margin-left":"12px"},onQueryData:P},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),p((s(),i(ce,{ref_key:"tableSortRef",ref:Q,style:{"margin-top":"10px"},"row-key":"id",data:$.value,border:L.value,size:x.value,stripe:D.value,onSelectionChange:W,"highlight-current-row":"",onCurrentChange:G},{empty:a(()=>[l(ue,{image:r(ye),"image-size":300},null,8,["image"])]),default:a(()=>[u.value.includes("id")?(s(),i(g,{key:0,prop:"id","show-overflow-tooltip":"",align:"left",label:"职位ID"},{default:a(({row:e})=>[f("div",Be,[f("div",Ue,S(e.id),1),l(ie,{content:e.id,class:R([{rowCopy:"rowCopy",current:e.id===y.value},"littleButton"])},null,8,["content","class"])])]),_:1})):v("",!0),u.value.includes("name")?(s(),i(g,{key:1,prop:"name","show-overflow-tooltip":"",align:"left",label:"职位名称"},{default:a(({row:e})=>[f("div",Fe,S(e.name),1)]),_:1})):v("",!0),u.value.includes("count")?(s(),i(g,{key:2,prop:"count","show-overflow-tooltip":"",align:"left",label:"账户数"},{default:a(({row:e})=>[f("div",He,S(e.count?e.count:"-"),1)]),_:1})):v("",!0),u.value.includes("remark")?(s(),i(g,{key:3,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:a(({row:e})=>[f("div",Me,[f("div",Oe,S(e.remark?e.remark:"-"),1),e.projectType!==2?p((s(),i(re,{key:0,onClick:U=>K(e,"remark"),class:R({edit:"edit",current:e.id===y.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])),[[k,"position_manage-update-updatePosition"]]):v("",!0)])]),_:1})):v("",!0),l(g,{align:"left",fixed:"right",label:"操作",width:"170"},{default:a(({row:e})=>[p((s(),i(C,{size:"small",plain:"",type:"primary",onClick:U=>J(e)},{default:a(()=>[b(" 编辑 ")]),_:2},1032,["onClick"])),[[k,"position_manage-update-updatePosition"]]),p((s(),i(C,{size:"small",plain:"",type:"danger",onClick:U=>X(e)},{default:a(()=>[b(" 删除 ")]),_:2},1032,["onClick"])),[[k,"position_manage-delete-deletePosition"]])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[B,!1]]),l(de,{"current-page":r(m).page,total:r(m).total,"page-size":r(m).size,"page-sizes":r(m).sizes,layout:r(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:P,onSizeChange:Z},null,8,["current-page","total","page-size","page-sizes","layout"]),l($e,{onSuccess:c,ref_key:"editRef",ref:z},null,512),l(Pe,{ref_key:"QuickEditRef",ref:N,onFetchData:c},null,512)]),_:1})],2)),[[B,h.value]])}}}),ot=Ee(Ae,[["__scopeId","data-v-d443a509"]]);export{ot as default};
