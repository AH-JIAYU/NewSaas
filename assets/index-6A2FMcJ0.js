
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as J}from"./configuration_manager-BbRLKPUD.js";import{a as w}from"./department-BJuJBiRF.js";import{d as L,r as m,k as M,E as x,a as s,l as O,n as R,i as t,o as d,b as v,f as o,w as n,F as y,q as k,e as I,g as P,P as h}from"./index-BdNuNAfF.js";const j=L({__name:"index",props:["id","row"],setup(S,{expose:T}){const p=S,U=[{label:"完成计提",value:1},{label:"审核计提",value:2},{label:"收款计提",value:3}],C=J(),_=m([]),r=m(!1),i=m(),l=m({id:p.id,name:"",director:null,remark:"",commissionStatus:null,commission:null,commissionType:null}),E=m({name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]});M(async()=>{_.value=await C.getStaff(),l.value.id!==""&&F()});function F(){r.value=!0,console.log("JSON.parse(props.row)",JSON.parse(p.row)),l.value=JSON.parse(p.row),r.value=!1}return T({submit(){return new Promise(c=>{l.value.id===""?i.value&&i.value.validate(e=>{e&&(delete l.value.id,r.value=!0,w.create(l.value).then(()=>{r.value=!1,x.success({message:"新增成功",center:!0}),c()}))}):i.value&&i.value.validate(e=>{e&&(r.value=!0,w.edit(l.value).then(()=>{r.value=!1,x.success({message:"编辑成功",center:!0}),c()}))})})}}),(c,e)=>{const f=s("el-input"),u=s("el-form-item"),b=s("el-option"),g=s("el-select"),N=s("el-switch"),V=s("el-col"),q=s("el-row"),B=s("ElForm"),D=O("loading");return R((d(),v("div",null,[o(B,{ref_key:"formRef",ref:i,model:t(l),rules:t(E),"label-width":"130px","label-suffix":"："},{default:n(()=>[o(u,{label:"部门名称",prop:"name"},{default:n(()=>[o(f,{modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).name=a),placeholder:"请输入部门名称",clearable:"",onChange:e[1]||(e[1]=()=>{})},null,8,["modelValue"])]),_:1}),o(u,{label:"部门主管",prop:"director"},{default:n(()=>[o(g,{modelValue:t(l).director,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).director=a),"value-key":"",placeholder:"请选择部门主管",clearable:"",filterable:""},{default:n(()=>[(d(!0),v(y,null,k(t(_),a=>(d(),I(b,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(q,{style:{"margin-bottom":"0px"},gutter:20},{default:n(()=>[o(V,{span:8},{default:n(()=>[o(u,{label:"部门提成",prop:"commissionStatus"},{default:n(()=>[o(N,{modelValue:t(l).commissionStatus,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).commissionStatus=a),"active-text":"启用","inactive-text":"禁用","inline-prompt":"","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1}),o(V,{span:16},{default:n(()=>[o(u,{label:"提成发放规则",prop:"commissionType"},{default:n(()=>[o(g,{modelValue:t(l).commissionType,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).commissionType=a),"value-key":"",placeholder:"请选择发放提成方式",clearable:"",filterable:""},{default:n(()=>[(d(),v(y,null,k(U,a=>o(b,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(u,{label:"提成比例",prop:"commission"},{default:n(()=>[o(f,{modelValue:t(l).commission,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).commission=a),modelModifiers:{number:!0},placeholder:"请输入提成比例",clearable:"",onChange:e[6]||(e[6]=()=>{})},{append:n(()=>[P("%")]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"备注"},{default:n(()=>[o(f,{modelValue:t(l).remark,"onUpdate:modelValue":e[7]||(e[7]=a=>t(l).remark=a),type:"textarea",rows:10,placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,t(r)]])}}}),H=h(j,[["__scopeId","data-v-b3a40e0d"]]);export{H as default};
