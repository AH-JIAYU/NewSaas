
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as fe,aH as _e,r as s,a4 as ge,G as be,a as i,al as he,o as m,b as ve,f as e,w as t,i as a,am as d,e as v,g as r,I as f,p as _,R as we,N as ke,aJ as ye,aK as Ce,s as Ee,aF as Ie,aG as ze,l as Pe,aM as g,_ as Se}from"./index-LooN7LAT.js";import{_ as De}from"./index.vue_vue_type_style_index_0_lang-EEnWqeT0.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-9QTL1c2m.js";import Re from"./index-CDu7cNBx.js";import xe from"./index-C3NE48hI.js";import Ve from"./index-B2BBi7sx.js";import{a as Be}from"./index-By9cxPVj.js";import"./index-fBsTXHVK.js";import"./index.vue_vue_type_script_setup_true_lang-Cu6CY5Pd.js";import"./index-PaHEmWxv.js";import"./index-DFJLODe7.js";import"./apiLoading-DUZm31YG.js";import"./otherFunctions_basicDictionary-BPMnqCZl.js";import"./basicDictionary-CN5sUaNN.js";import"./user_customer-BA7LapcC.js";import"./user_customer-D-OWd7Ke.js";import"./stagedData-CcolcJQm.js";import"./index.vue_vue_type_script_setup_true_lang-BQWZ_8yn.js";const Fe=I=>(Ie("data-v-82bef20e"),I=I(),ze(),I),Le=Fe(()=>Pe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ue=fe({name:"ProjectManagementListIndex",__name:"list",setup(I){const{pagination:b,getParams:M,onSizeChange:T,onCurrentChange:G,onSortChange:$e}=_e(),Q=s(""),R=s(!0),$=s(),x=s(),H=s(),z=s(!0),V=s([]),P=s(!1),w=s(!1),S=s("default"),D=s(!1),B=s([{label:"项目ID",prop:"ID",sortable:!0,disableCheck:!0,checked:!0}]),u=ge({}),N=s([]);function J(p){$.value.showEdit(p)}function K(){x.value.showEdit()}function O(p){x.value.showEdit(p)}function q(p){H.value.showEdit(p)}function W(){w.value=!w.value}function X(p){T(p).then(()=>k())}function F(p=1){G(p).then(()=>k())}function Y(){u.value={},k()}async function k(){R.value=!0;const p={...M(),...u.value},{data:o}=await Be.list(p);N.value=o.getChildrenProjectInfoList,b.value.total=o.total,R.value=!1}return be(()=>{k()}),(p,o)=>{const j=i("el-input"),c=i("el-form-item"),y=i("el-option"),C=i("el-select"),Z=i("el-date-picker"),A=ke,L=i("ElButton"),ee=i("ElFormItem"),te=i("el-form"),le=je,oe=i("ElDivider"),E=i("el-button"),ae=De,ne=ye,ie=Ce,re=i("el-row"),n=i("el-table-column"),se=i("ElSwitch"),pe=i("el-empty"),ce=i("el-table"),ue=i("ElPagination"),de=Ee,me=he("loading");return m(),ve("div",{class:we({"absolute-container":a(P)})},[e(de,{class:"hide-drawer-header"},{default:t(()=>[e(le,{"show-toggle":!1},{default:t(({fold:l,toggle:U})=>[e(te,{model:a(u),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(c,{label:""},{default:t(()=>[e(j,{modelValue:a(u).a,"onUpdate:modelValue":o[0]||(o[0]=h=>a(u).a=h),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:t(()=>[e(j,{modelValue:a(u).b,"onUpdate:modelValue":o[1]||(o[1]=h=>a(u).b=h),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:t(()=>[e(j,{clearable:"",placeholder:"项目标识"})]),_:1}),d(e(c,{label:""},{default:t(()=>[e(C,{placeholder:"国家地区"},{default:t(()=>[(m(),v(y,{key:11,label:11,value:111},{default:t(()=>[r(" 11111 ")]),_:1}))]),_:1})]),_:2},1536),[[g,!l]]),d(e(c,{label:""},{default:t(()=>[e(C,{placeholder:"客户简称"},{default:t(()=>[(m(),v(y,{key:11,label:11,value:111},{default:t(()=>[r(" 11111 ")]),_:1}))]),_:1})]),_:2},1536),[[g,!l]]),d(e(c,{label:""},{default:t(()=>[e(C,{placeholder:"分配类型"},{default:t(()=>[(m(),v(y,{key:11,label:11,value:111},{default:t(()=>[r(" 11111 ")]),_:1}))]),_:1})]),_:2},1536),[[g,!l]]),d(e(c,{label:""},{default:t(()=>[e(C,{placeholder:"项目状态"},{default:t(()=>[(m(),v(y,{key:11,label:11,value:111},{default:t(()=>[r(" 11111 ")]),_:1}))]),_:1})]),_:2},1536),[[g,!l]]),d(e(c,{label:""},{default:t(()=>[e(C,{placeholder:"B2B/B2C"},{default:t(()=>[(m(),v(y,{key:11,label:11,value:111},{default:t(()=>[r(" 11111 ")]),_:1}))]),_:1})]),_:2},1536),[[g,!l]]),d(e(c,null,{default:t(()=>[e(j,{clearable:"",placeholder:"创建人"})]),_:2},1536),[[g,!l]]),d(e(c,null,{default:t(()=>[e(Z,{modelValue:a(u).time,"onUpdate:modelValue":o[2]||(o[2]=h=>a(u).time=h),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[g,!l]]),e(ee,null,{default:t(()=>[e(L,{type:"primary",onClick:o[3]||(o[3]=h=>F())},{icon:t(()=>[e(A,{name:"i-ep:search"})]),default:t(()=>[r(" 筛选 ")]),_:1}),e(L,{onClick:Y},{icon:t(()=>[Le]),default:t(()=>[r(" 重置 ")]),_:1}),e(L,{link:"",onClick:U},{icon:t(()=>[e(A,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[r(" "+f(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(oe,{"border-style":"dashed"}),e(re,{gutter:24},{default:t(()=>[e(ae,null,{default:t(()=>[e(E,{type:"primary",size:"default",onClick:K},{default:t(()=>[r(" 添加项目 ")]),_:1})]),_:1}),e(ie,null,{default:t(()=>[e(E,{size:"default",onClick:o[4]||(o[4]=()=>{})},{default:t(()=>[r(" 导出 ")]),_:1}),e(ne,{border:a(z),"onUpdate:border":o[5]||(o[5]=l=>_(z)?z.value=l:null),tableAutoHeight:a(P),"onUpdate:tableAutoHeight":o[6]||(o[6]=l=>_(P)?P.value=l:null),checkList:a(V),"onUpdate:checkList":o[7]||(o[7]=l=>_(V)?V.value=l:null),columns:a(B),"onUpdate:columns":o[8]||(o[8]=l=>_(B)?B.value=l:null),"is-fullscreen":a(w),"onUpdate:isFullscreen":o[9]||(o[9]=l=>_(w)?w.value=l:null),"line-height":a(S),"onUpdate:lineHeight":o[10]||(o[10]=l=>_(S)?S.value=l:null),stripe:a(D),"onUpdate:stripe":o[11]||(o[11]=l=>_(D)?D.value=l:null),style:{"margin-left":"12px"},onClickFullScreen:W,onQueryData:F},null,8,["border","tableAutoHeight","checkList","columns","is-fullscreen","line-height","stripe"])]),_:1})]),_:1}),d((m(),v(ce,{ref_key:"tableSortRef",ref:Q,style:{"margin-top":"10px"},"row-key":"projectId",data:a(N),"tree-props":{children:"getChildrenProjectListInfoList"},border:a(z),size:a(S),stripe:a(D)},{empty:t(()=>[e(pe,{description:"暂无数据"})]),default:t(()=>[e(n,{type:"selection"}),e(n,{"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"}),e(n,{"show-overflow-tooltip":"",prop:"name",align:"center",label:"项目名称"}),e(n,{"show-overflow-tooltip":"",prop:"clientName",align:"center",label:"客户简称/标识"}),e(n,{"show-overflow-tooltip":"",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:l})=>[r(f(l.participation)+"/ "+f(l.complete)+"/ "+f(l.num)+"/ "+f(l.limitedQuantity),1)]),_:1}),e(n,{"show-overflow-tooltip":"",prop:"allocationType",align:"center",label:"分配类型"}),e(n,{"show-overflow-tooltip":"",align:"center",label:"原价"},{default:t(({row:l})=>[r(" $ "+f(l.doMoneyPrice)+" ￥"+f(l.memberPrice),1)]),_:1}),e(n,{"show-overflow-tooltip":"",prop:"f",align:"center",label:"供应商价"}),e(n,{"show-overflow-tooltip":"",prop:"ir",align:"center",label:"IR/NIR"}),e(n,{"show-overflow-tooltip":"",prop:"countryId",align:"center",label:"国家地区"}),e(n,{"show-overflow-tooltip":"",prop:"allocationStatus",align:"center",label:"分配状态"}),e(n,{"show-overflow-tooltip":"",prop:"isOnline",align:"center",label:"项目状态"},{default:t(()=>[e(se,{"inline-prompt":"","active-text":"启用","inactive-text":"禁用"})]),_:1}),e(n,{"show-overflow-tooltip":"",prop:"remark",align:"center",label:"备注"}),e(n,{"show-overflow-tooltip":"",prop:"createName",align:"center",label:"创建人"}),e(n,{"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"}),e(n,{align:"center",label:"操作",width:"250"},{default:t(({row:l})=>[e(E,{plain:"",type:"primary",size:"small",onClick:J},{default:t(()=>[r(" 重新分配 ")]),_:1}),e(E,{type:"primary",plain:"",size:"small",onClick:U=>O(l)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),e(E,{type:"primary",size:"small",plain:"",onClick:U=>q(l)},{default:t(()=>[r(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[me,a(R)]]),e(ue,{"current-page":a(b).page,total:a(b).total,"page-size":a(b).size,"page-sizes":a(b).sizes,layout:a(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:F},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Re,{ref_key:"addAllocationEditRef",ref:$},null,512),e(xe,{ref_key:"addProjeckRef",ref:x,onFetchData:k},null,512),e(Ve,{ref_key:"projectDetailsRef",ref:H},null,512)],2)}}}),ot=Se(Ue,[["__scopeId","data-v-82bef20e"]]);export{ot as default};
