
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as se,r as j,am as ne,c as $,k as re,a as _,o as c,b as S,f as t,aR as ie,i as o,w as e,be as C,bf as Q,S as v,s as u,H as s,g as n,e as y,j as h,F as N,t as U,I as ce,E as H,aG as ue,aH as de,R as fe}from"./index-DA77yZlp.js";import{v as me}from"./index-7A0e-rm9.js";import{g as pe,a as _e}from"./zh_Hans-dcEU3sQm.js";import{f as ye}from"./file-Cdx_wLZe.js";import{o as ge}from"./apiLoading-BGZ22Gi3.js";import{a as R}from"./projectManagement-BgSQuyUV.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-B1sO6ROC.js";import{D as he}from"./download-C8PHVIy1.js";import{u as ve}from"./user_customer-DzoC3-q9.js";import"./user_customer-BPkI_TYH.js";const b=T=>(ue("data-v-57ee2a80"),T=T(),de(),T),be={style:{"margin-left":"25.5%"}},xe=b(()=>u("span",{style:{"margin-left":"19.5%"}},"操作员",-1)),je=b(()=>u("span",{style:{"margin-left":"12.5%"}},"操作员",-1)),ke=b(()=>u("span",{style:{"margin-left":"8.5%"}},"操作员",-1)),Ie=b(()=>u("span",{style:{"margin-left":"28.5%"}},"操作员",-1)),Le={class:"card-header"},we={class:"leftTitle"},Ce={class:"m-4 spanStatus"},Ne={class:"rightStatus"},Te=b(()=>u("div",{class:"card-header"},[u("span",null,"其他设置")],-1)),Pe={class:"peizjo-header"},De=b(()=>u("span",null,"配置信息",-1)),Qe={key:0,style:{"margin-left":"50px"}},Ue={key:1,style:{"margin-left":"30px"}},Ve=b(()=>u("div",{class:"card-header"},[u("span",null,"安全信息")],-1)),Oe=b(()=>u("div",{class:"card-header"},[u("span",null,"描述配额")],-1)),Re={class:"radius p-2 flex gap-2"},Ee=b(()=>u("div",{class:"card-header"},[u("span",null,"操作日志")],-1)),Be=se({name:"ProjectDetails",__name:"index",setup(T,{expose:A}){const q=ve(),E=j([]),B=ne();j("# Fantastic-admin");const F=j(),V=j(1),a=j({form:{},imgUrl:[],isOnline:"",allocationStatus:"",projectType:1,srcList:[],countryList:[]}),P=j();pe({locale:_e});const G=["新增","编辑","分配","调度"];function J(f){F.value.showEdit(f)}const I=j(!1);async function K(f,m){a.value.projectType=m,a.value.isOnline=f.isOnline,a.value.allocationStatus=f.allocationStatus;const p=await ge(R.detail({projectId:f.projectId}));a.value.form=p.data,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((g,l)=>(g.find(i=>i.settlementStatus===l.settlementStatus)||g.push(l),g),[]),P.value=a.value.form.descriptionUrl.split(","),P.value.length&&P.value.forEach(async g=>{if(g){const l=await ye.detail({fileName:g});a.value.imgUrl.push(l.data.fileUrl),a.value.srcList.push(l.data.fileUrl)}}),W(),I.value=!0}const W=async()=>{if(a.value.form.projectQuotaInfoList.length){const f=await R.getProjectCountryList({countryIdList:a.value.form.countryIdList}),m={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},p=await R.getProjectCategoryList(m),g=M(f.data.getProjectCountryListInfoList,"countryId",m.countryId),l=M(p.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=g.countryName,a.value.form.projectProblemCategoryName=l.projectProblemCategoryName}},M=(f,m,p)=>f.find(g=>g[m]===p),D=$(()=>f=>a.value.countryList.filter(p=>f.includes(p.id)).map(p=>p.chineseName));async function X(f){try{await navigator.clipboard.writeText(f),H.success({message:"已复制文本",center:!0})}catch{H.warning({message:"复制失败,请重试",center:!0})}}async function Y(f,m){await he(a.value.imgUrl[m],f)}function O(){a.value.srcList=[],I.value=!1}const Z=$(()=>E.value.find(f=>f.tenantCustomerId===a.value.form.clientId));return re(async()=>{a.value.countryList=await B.getCountry(),E.value=await q.getCustomerList()}),A({showEdit:K}),(f,m)=>{const p=_("el-step"),g=_("el-steps"),l=_("el-col"),x=_("el-row"),i=_("el-text"),d=_("el-form-item"),ee=_("el-link"),L=_("el-button"),k=_("el-card"),te=_("el-image"),w=_("el-table-column"),ae=_("el-table"),oe=_("ElForm"),le=_("el-drawer");return c(),S("div",null,[t(le,{modelValue:o(I),"onUpdate:modelValue":m[1]||(m[1]=r=>ce(I)?I.value=r:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",onClose:O,size:"55%",title:"项目详情"},ie({footer:e(()=>[t(L,{onClick:O},{default:e(()=>[n(" 取消 ")]),_:1}),t(L,{type:"primary",onClick:O},{default:e(()=>[n(" 确定 ")]),_:1})]),default:e(()=>[t(oe,{"label-width":"120px"},{default:e(()=>[t(k,{class:"box-card"},{header:e(()=>[u("div",Le,[u("div",we,[n(" 基本信息 "),u("span",Ce,s(o(a).allocationStatus===1?"未分配":"已分配"),1)]),u("div",Ne,[u("div",{class:v(o(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},s(o(a).isOnline===1?"在线":"离线"),3)])])]),default:e(()=>[t(x,{gutter:10},{default:e(()=>[t(l,{span:8},{default:e(()=>[t(d,{label:"项目ID :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.projectId?o(a).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"项目名称 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.name?o(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"项目标识 :",prop:"client_pid"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.projectIdentification?o(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),o(a).projectType===1?(c(),y(l,{key:0,span:8},{default:e(()=>[t(d,{label:"所属客户 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>{var r;return[n(s((r=o(Z))==null?void 0:r.customerAccord),1)]}),_:1})]),_:1})]),_:1})):h("",!0),t(l,{span:8},{default:e(()=>[t(d,{label:"所属国家 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[o(D)(o(a).form.countryIdList).length>4?(c(),y(ee,{key:0,type:"primary"},{default:e(()=>[n(s(o(D)(o(a).form.countryIdList).length===o(B).country.length?"全球":o(D)(o(a).form.countryIdList).length),1)]),_:1})):(c(!0),S(N,{key:1},U(o(D)(o(a).form.countryIdList),r=>(c(),S("span",{key:r},s(r)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),o(a).projectType===1?(c(),y(l,{key:1,span:8},{default:e(()=>[t(d,{label:"原价 :"},{default:e(()=>[o(a).form.currencyType===1?(c(),y(i,{key:0,class:"mx-1"},{default:e(()=>[n(s(o(a).form.doMoneyPrice?o(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):h("",!0),o(a).form.currencyType===2?(c(),y(i,{key:1,class:"mx-1"},{default:e(()=>[n(s(o(a).form.doMoneyPrice?o(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):h("",!0)]),_:1})]),_:1})):h("",!0),t(l,{span:8},{default:e(()=>[t(d,{label:"配额 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.num?o(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"最小时长 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.minimumDuration?o(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"IR/NIR :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.ir?o(a).form.ir+"%":o(a).form.ir)+" / "+s(o(a).form.nir?o(a).form.nir+"%":o(a).form.nir),1)]),_:1})]),_:1})]),_:1}),t(l,{span:12},{default:e(()=>[t(d,{label:"URL :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.uidUrl?o(a).form.uidUrl:"-"),1)]),_:1}),t(L,{type:"primary",style:{"margin-left":"auto"},onClick:m[0]||(m[0]=r=>X(o(a).form.uidUrl)),link:""},{default:e(()=>[n(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{class:"box-card"},{header:e(()=>[Te]),default:e(()=>[t(x,{gutter:10},{default:e(()=>[t(l,{span:8},{default:e(()=>[t(d,{label:"置顶 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"在线 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"资料 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"B2B :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s()+" "+s(o(a).form.isPinned===1?o(a).form.projectType.join(","):"关"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"定时发布 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"备注 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).formNaNpxark?o(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(a).projectType===1?(c(),y(k,{key:0,class:"box-card"},{header:e(()=>[u("div",Pe,[De,o(a).form.countryName?(c(),S("span",Qe,"国家："+s(o(a).form.countryName),1)):h("",!0),o(a).form.projectProblemCategoryName?(c(),S("span",Ue,"问卷："+s(o(a).form.projectProblemCategoryName),1)):h("",!0)])]),default:e(()=>[t(x,{gutter:10,class:v(o(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:e(()=>[t(l,{span:8}),t(l,{span:8}),(c(!0),S(N,null,U(o(a).form.projectQuotaInfoList,r=>(c(),y(l,{span:24,class:v({isNone:!o(a).form.projectQuotaInfoList.length}),gutter:10},{default:e(()=>[t(d,{"label-width":"200px",label:r.keyValue+" :"},{default:e(()=>[r.answerValueList&&r.answerValueList[0]!=="null"?(c(),y(i,{key:0,class:"mx-1"},{default:e(()=>[n(s(r.answerValueList.join(", ")),1)]),_:2},1024)):(c(),y(i,{key:1,class:"mx-1"},{default:e(()=>[n(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1})):h("",!0),t(k,{class:"box-card"},{header:e(()=>[Ve]),default:e(()=>[t(x,{gutter:20},{default:e(()=>[t(l,{span:8},{default:e(()=>[t(d,{label:"小时准入量 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.preNum?o(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"小时完成量 :"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.limitedQuantity?o(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),t(l,{span:8},{default:e(()=>[t(d,{label:"重复参与:"},{default:e(()=>[t(i,{class:"mx-1"},{default:e(()=>[n(s(o(a).form.ipDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(a).form.descriptionUrl?(c(),y(k,{key:1,class:"box-card"},{header:e(()=>[Oe]),default:e(()=>[o(a).form.descriptionUrl?(c(),S(N,{key:0},[(c(!0),S(N,null,U(o(a).srcList,r=>(c(),S("div",{key:r,class:"demo-image__preview"},[t(te,{style:{width:"6.25rem",height:"6.25rem"},src:r,"preview-src-list":r,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]))),128)),(c(!0),S(N,null,U(o(P),(r,z)=>(c(),S("p",{key:r},[t(L,{style:{padding:"0"},type:"primary",text:"",onClick:Fe=>Y(r,z)},{default:e(()=>[n(s(r)+" 下载 ",1)]),_:2},1032,["onClick"])]))),128))],64)):h("",!0),t(x,{class:v({isNone:!o(a).form.descriptionUrl}),gutter:20},{default:e(()=>[t(l,{span:24},{default:e(()=>[u("div",Re,[t(o(me),{value:o(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):h("",!0),o(a).projectType===1?(c(),y(k,{key:2,class:"box-card"},{header:e(()=>[Ee]),default:e(()=>[t(ae,{data:o(a).form.projectOperationInfoList,border:"",style:{width:"100%"}},{default:e(()=>[t(w,{align:"center",type:"index",width:"80",label:"序号"}),t(w,{align:"center",prop:"operationTime",label:"操作时间"}),t(w,{align:"center",prop:"operationName",label:"操作人"}),t(w,{align:"center",prop:"operationType",label:"操作事项"},{default:e(({row:r})=>[n(s(G[r.operationType-1]),1)]),_:1}),t(w,{align:"center",label:"详情"},{default:e(({row:r})=>[r.operationType!==1?(c(),y(L,{key:0,type:"primary",link:"",onClick:z=>J(r)},{default:e(()=>[n(" 详情 ")]),_:2},1032,["onClick"])):(c(),y(i,{key:1},{default:e(()=>[n("-")]),_:1}))]),_:1})]),_:1},8,["data"])]),_:1})):h("",!0)]),_:1})]),_:2},[o(a).form.projectSettlementStatusSet&&o(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:e(()=>[t(x,{gutter:20},{default:e(()=>[t(l,{span:24},{default:e(()=>[t(g,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:o(a).form.projectSettlementStatusSet[0].settlementStatus},{default:e(()=>[t(p,{title:"待审核",description:"2021-09-09 11:11:11",icon:o(C)},null,8,["icon"]),t(p,{title:"已审核",description:o(a).form.projectSettlementStatusSet[0].operationTime,icon:o(a).form.projectSettlementStatusSet[0].settlementStatus>=2?o(C):o(Q)},null,8,["description","icon"]),t(p,{title:"已开票",description:"2021-09-09 11:11:11",icon:o(V)>=3?o(C):o(Q)},null,8,["icon"]),t(p,{title:"已结算",description:"2021-09-09 11:11:11",icon:o(V)>=4?o(C):o(Q)},null,8,["icon"]),t(p,{title:"已冻结",description:"2021-09-09 11:11:11",icon:o(V)>=5?o(C):o(Q)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),t(x,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:e(()=>[t(l,{span:1}),t(l,{class:v({colorgreen:o(a).form.projectSettlementStatusSet[0].settlementStatus>=1}),span:5},{default:e(()=>[u("span",be,s(o(a).form.projectSettlementStatusSet[0].operationName),1)]),_:1},8,["class"]),t(l,{class:v({colorgreen:o(a).form.projectSettlementStatusSet[0].settlementStatus>=2}),span:5},{default:e(()=>[xe]),_:1},8,["class"]),t(l,{class:v({colorgreen:o(a).form.projectSettlementStatusSet[0].settlementStatus>=3}),span:5},{default:e(()=>[je]),_:1},8,["class"]),t(l,{class:v({colorgreen:o(a).form.projectSettlementStatusSet[0].settlementStatus>=4}),span:4},{default:e(()=>[ke]),_:1},8,["class"]),t(l,{class:v({colorgreen:o(a).form.projectSettlementStatusSet[0].settlementStatus>=5}),span:4},{default:e(()=>[Ie]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),t(Se,{ref_key:"logDetailsRef",ref:F},null,512)])}}}),Xe=fe(Be,[["__scopeId","data-v-57ee2a80"]]);export{Xe as default};
