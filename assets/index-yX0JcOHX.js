
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as D}from"./configuration_manager-csIgD2uO.js";import{a as g}from"./department-DrQv5Etz.js";import{d as L,r as i,k as R,E as V,a as u,l as q,n as I,i as o,o as d,b as f,f as t,w as s,a2 as y,a3 as k,e as M,N}from"./index-BdHtZquS.js";const P=L({__name:"index",props:["id","row"],setup(w,{expose:x}){const p=w,S=[{label:"完成计提",value:1},{label:"审核计提",value:2},{label:"收款计提",value:3}],E=D(),v=i([]),n=i(!1),r=i(),e=i({id:p.id,name:"",director:null,remark:"",commissionStatus:null,commission:null,commissionType:null}),T=i({name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]});R(async()=>{v.value=await E.getStaff(),e.value.id!==""&&C()});function C(){n.value=!0,e.value=p.row,console.log("form.value",e.value),n.value=!1}return x({submit(){return new Promise(c=>{e.value.id===""?r.value&&r.value.validate(a=>{a&&(delete e.value.id,n.value=!0,g.create(e.value).then(()=>{n.value=!1,V.success({message:"新增成功",center:!0}),c()}))}):r.value&&r.value.validate(a=>{a&&(n.value=!0,g.edit(e.value).then(()=>{n.value=!1,V.success({message:"编辑成功",center:!0}),c()}))})})}}),(c,a)=>{const F=u("el-input"),m=u("el-form-item"),_=u("el-option"),b=u("el-select"),U=u("el-switch"),h=u("ElForm"),B=q("loading");return I((d(),f("div",null,[t(h,{ref_key:"formRef",ref:r,model:o(e),rules:o(T),"label-width":"130px","label-suffix":"："},{default:s(()=>[t(m,{label:"组名称",prop:"name"},{default:s(()=>[t(F,{modelValue:o(e).name,"onUpdate:modelValue":a[0]||(a[0]=l=>o(e).name=l),placeholder:"请输入部门名称",clearable:"",onChange:a[1]||(a[1]=()=>{})},null,8,["modelValue"])]),_:1}),t(m,{label:"所属部门",prop:"director"},{default:s(()=>[t(b,{modelValue:o(e).director,"onUpdate:modelValue":a[2]||(a[2]=l=>o(e).director=l),"value-key":"",placeholder:"请选择所属部门",clearable:"",filterable:""},{default:s(()=>[(d(!0),f(y,null,k(o(v),l=>(d(),M(_,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"组长",prop:"commissionType"},{default:s(()=>[t(b,{modelValue:o(e).commissionType,"onUpdate:modelValue":a[3]||(a[3]=l=>o(e).commissionType=l),"value-key":"",placeholder:"请选择组长",clearable:"",filterable:""},{default:s(()=>[(d(),f(y,null,k(S,l=>t(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"组提成",prop:"commissionStatus"},{default:s(()=>[t(U,{modelValue:o(e).commissionStatus,"onUpdate:modelValue":a[4]||(a[4]=l=>o(e).commissionStatus=l),"active-text":"启用","inactive-text":"禁用","inline-prompt":"","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[B,o(n)]])}}}),G=N(P,[["__scopeId","data-v-c4b8610e"]]);export{G as default};
