
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ke,aO as ye,r as u,a5 as Se,k as we,a as s,p as Ee,o as c,b as Ve,f as t,w as o,i as a,q as N,g as m,H as x,I as C,e as p,j as _,S as ze,E as O,aP as Ie,N as Ne,aQ as xe,aR as Ue,ao as Ae,aJ as De,aK as Qe,s as Re,ap as L,R as $e}from"./index-gkVyJmAv.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-BFpyFF4R.js";import{_ as Be}from"./index.vue_vue_type_style_index_0_lang-CLnlX6Ly.js";import{_ as Le}from"./index.vue_vue_type_script_setup_true_lang-538UIGXU.js";import{_ as Pe}from"./index.vue_vue_type_script_setup_true_lang-B50x68Iu.js";import He from"./index-DHz_jj24.js";import{s as J}from"./apiLoading-xvEoe0aT.js";import{u as Te}from"./user_customer-CX8mHwbY.js";import{a as P}from"./user_customer-BceOm4ks.js";import"./index.vue_vue_type_script_setup_true_lang-DYYFsclO.js";import"./index-BUzZ5qDT.js";import"./index-myhcvh-R.js";import"./department-B61vQFho.js";import"./position_manage-B_1mayir.js";import"./department-q91sITUG.js";import"./tenant_role-BAZ57Zlg.js";import"./configuration_role-XJawiGKU.js";import"./configuration_manager-BuGPiupC.js";import"./stagedData-CMozdQ_S.js";import"./index.vue_vue_type_script_setup_true_lang-Bd4BxXzf.js";const Me=S=>(De("data-v-f134b651"),S=S(),Qe(),S),qe=Me(()=>Re("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),je=ke({name:"customer",__name:"index",setup(S){const K=Te(),{pagination:h,getParams:G,onSizeChange:W,onCurrentChange:X}=ye(),U=u(!1),H=u([]),A=u(),T=u(),Y=u(),w=u(!0),E=u(!1),V=u(!1),z=u("default"),i=u([]),I=u([{label:"客户编码",checked:!0,sortable:!0,prop:"tenantCustomerId"},{label:"客户名称",checked:!0,sortable:!0,prop:"customerAccord"},{label:"客户简称",checked:!0,sortable:!0,prop:"customerShortName"},{label:"负责人",checked:!0,sortable:!0,prop:"chargeName"},{label:"客户状态",checked:!0,sortable:!0,prop:"customerStatus"},{label:"前置问卷",checked:!0,sortable:!0,prop:"antecedentQuestionnaire"},{label:"风险控制",checked:!0,sortable:!0,prop:"riskControl"},{label:"客户营业限额/月",checked:!0,sortable:!0,prop:"turnover"},{label:"审核率Min值",checked:!0,sortable:!0,prop:"rateAudit"}]);function Z(){A.value.showEdit()}function ee(l){A.value.showEdit(l)}async function D(l,n,v){const R={status:l,operationalType:n,tenantCustomerId:v},{status:k}=await J(P.changestatus(R));k===1&&O.success({message:"修改成功"}),K.customer=null,g()}function te(l){T.value.showEdit(l)}function oe(l){Ie.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:n}=await J(P.delete({tenantCustomerId:l.tenantCustomerId}));n===1&&O.success({message:"删除成功"}),g()}).catch(()=>{})}const d=Se({customerShortName:"",customerStatus:null,antecedentQuestionnaire:null});function ae(l){W(l).then(()=>Q())}function M(l=1){X(l).then(()=>Q())}function ne(){Object.assign(d,{customerShortName:"",customerStatus:null,antecedentQuestionnaire:null}),g()}function g(){h.value.page=1,Q()}async function Q(){U.value=!0;const l={...G(),...d},{data:n}=await P.list(l);H.value=n.getTenantCustomerInfoList,h.value.total=Number(n.total),U.value=!1}function le(l){Y.value=l}return we(()=>{I.value.forEach(l=>{l.checked&&i.value.push(l.prop)}),g()}),(l,n)=>{const v=s("el-option"),R=s("el-input"),k=s("el-form-item"),q=s("el-select"),j=Ne,$=s("ElButton"),se=s("ElFormItem"),re=s("ElForm"),ie=Le,ue=s("ElDivider"),y=s("el-button"),ce=Be,me=xe,pe=Ue,de=s("el-row"),f=s("el-table-column"),_e=Fe,F=s("ElSwitch"),B=s("ElTableColumn"),fe=s("ElSpace"),he=s("el-empty"),ge=s("el-table"),ve=s("ElPagination"),be=Ae,Ce=Ee("loading");return c(),Ve("div",{class:ze({"absolute-container":a(V)})},[t(be,null,{default:o(()=>[t(ie,{"show-toggle":!1},{default:o(({fold:e,toggle:r})=>[t(re,{model:a(d).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[N(t(k,null,{default:o(()=>[t(R,{modelValue:a(d).customerShortName,"onUpdate:modelValue":n[0]||(n[0]=b=>a(d).customerShortName=b),clearable:"",placeholder:"客户简称"},{default:o(()=>[t(v,{label:"name",value:"name"})]),_:1},8,["modelValue"])]),_:2},1536),[[L,!e]]),N(t(k,null,{default:o(()=>[t(q,{modelValue:a(d).customerStatus,"onUpdate:modelValue":n[1]||(n[1]=b=>a(d).customerStatus=b),clearable:"",placeholder:"客户状态"},{default:o(()=>[t(v,{label:"禁用",value:1}),t(v,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[L,!e]]),N(t(k,null,{default:o(()=>[t(q,{modelValue:a(d).antecedentQuestionnaire,"onUpdate:modelValue":n[2]||(n[2]=b=>a(d).antecedentQuestionnaire=b),clearable:"",placeholder:"前置问卷"},{default:o(()=>[t(v,{label:"禁用",value:1}),t(v,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[L,!e]]),t(se,null,{default:o(()=>[t($,{type:"primary",onClick:n[3]||(n[3]=b=>M())},{icon:o(()=>[t(j,{name:"i-ep:search"})]),default:o(()=>[m(" 筛选 ")]),_:1}),t($,{onClick:ne},{icon:o(()=>[qe]),default:o(()=>[m(" 重置 ")]),_:1}),t($,{disabled:"",link:"",onClick:r},{icon:o(()=>[t(j,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[m(" "+x(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ue,{"border-style":"dashed"}),t(de,null,{default:o(()=>[t(ce,null,{default:o(()=>[t(y,{type:"primary",size:"default",onClick:Z},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),t(pe,null,{default:o(()=>[t(y,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),t(me,{border:a(w),"onUpdate:border":n[4]||(n[4]=e=>C(w)?w.value=e:null),tableAutoHeight:a(V),"onUpdate:tableAutoHeight":n[5]||(n[5]=e=>C(V)?V.value=e:null),checkList:a(i),"onUpdate:checkList":n[6]||(n[6]=e=>C(i)?i.value=e:null),columns:a(I),"onUpdate:columns":n[7]||(n[7]=e=>C(I)?I.value=e:null),"line-height":a(z),"onUpdate:lineHeight":n[8]||(n[8]=e=>C(z)?z.value=e:null),stripe:a(E),"onUpdate:stripe":n[9]||(n[9]=e=>C(E)?E.value=e:null),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),N((c(),p(ge,{border:a(w),data:a(H),size:a(z),stripe:a(E),onSelectionChange:le},{empty:o(()=>[t(he,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(f,{align:"center",type:"selection"}),a(i).includes("tenantCustomerId")?(c(),p(f,{key:0,align:"center",prop:"tenantCustomerId",width:"180","show-overflow-tooltip":"",label:"客户编码"})):_("",!0),a(i).includes("customerAccord")?(c(),p(f,{key:1,align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"})):_("",!0),a(i).includes("customerShortName")?(c(),p(f,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"})):_("",!0),a(i).includes("turnover")?(c(),p(f,{key:3,align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额/月"},{default:o(({row:e})=>[t(_e),m(x(e.turnover||0),1)]),_:1})):_("",!0),a(i).includes("rateAudit")?(c(),p(f,{key:4,align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"},{default:o(({row:e})=>[m(x(e.rateAudit?e.rateAudit:"-"),1)]),_:1})):_("",!0),a(i).includes("chargeName")?(c(),p(f,{key:5,align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"},{default:o(({row:e})=>[m(x(e.chargeName?e.chargeName:"-"),1)]),_:1})):_("",!0),a(i).includes("customerStatus")?(c(),p(B,{key:6,align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:o(({row:e})=>[t(F,{modelValue:e.customerStatus,"onUpdate:modelValue":r=>e.customerStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>D(r,1,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):_("",!0),a(i).includes("antecedentQuestionnaire")?(c(),p(B,{key:7,align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:o(({row:e})=>[t(F,{modelValue:e.antecedentQuestionnaire,"onUpdate:modelValue":r=>e.antecedentQuestionnaire=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>D(r,2,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):_("",!0),a(i).includes("riskControl")?(c(),p(B,{key:8,align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:o(({row:e})=>[t(F,{modelValue:e.riskControl,"onUpdate:modelValue":r=>e.riskControl=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>D(r,3,e.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):_("",!0),t(f,{align:"center",fixed:"right",prop:"i",label:"操作","show-overflow-tooltip":"",width:"200"},{default:o(({row:e})=>[t(fe,null,{default:o(()=>[t(y,{size:"small",plain:"",type:"primary",onClick:r=>ee(e)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),t(y,{type:"primary",plain:"",size:"small",onClick:r=>te(e)},{default:o(()=>[m(" 详情 ")]),_:2},1032,["onClick"]),t(y,{type:"danger",plain:"",size:"small",onClick:r=>oe(e)},{default:o(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ce,a(U)]]),t(ve,{"current-page":a(h).page,total:a(h).total,"page-size":a(h).size,"page-sizes":a(h).sizes,layout:a(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ae,onCurrentChange:M},null,8,["current-page","total","page-size","page-sizes","layout"]),t(Pe,{ref_key:"editRef",ref:A,onFetchData:g},null,512),t(He,{ref_key:"checkRef",ref:T,onFetchData:g},null,512)]),_:1})],2)}}}),pt=$e(je,[["__scopeId","data-v-f134b651"]]);export{pt as default};
