
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as V}from"./index-Ja4tt9Wo.js";import{a as w}from"./user_cooperation-CNrSZB5M.js";import{d as x,r as f,n as I,a as h,o as n,b as l,f as r,w as m,y as u,g as c,i as s,z as i,F as y,t as b,j as v,A as D,L as C}from"./index-BRWHVDWK.js";import"./index-BNSUhFge.js";import"./clipboard-CZpPYluh.js";const z={style:{height:"21.875rem",overflow:"auto"}},E={key:0,class:"idList"},j={key:1,class:"idList"},A={key:2,class:"idList"},B={style:{flex:"auto"}},F=x({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(q,{expose:N,emit:H}){const L=f(!1),_=f(!1);f();const e=f({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),S=async p=>{const{data:o}=await w.getTenantSupplierMemberNameInfo(p);return o},T=async p=>{e.value.supplierList=[],e.value.memberList=[],e.value.tenantList=[];for(let o of p.type){const d=await S({projectId:p.projectId,type:o});e.value.results.push({type:o,getTenantSupplierMemberNameList:d.getTenantSupplierMemberNameList}),e.value.results.forEach(a=>{a.type==2&&(e.value.supplierList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[]),a.type==3&&(e.value.memberList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[]),a.type==4&&(e.value.tenantList=a.getTenantSupplierMemberNameList?a.getTenantSupplierMemberNameList:[])})}};async function M(p){try{L.value=!0,T(p),L.value=!1,_.value=!0}catch{}finally{L.value=!1}}function g(){_.value=!1}return I(async()=>{}),N({showEdit:M}),(p,o)=>{const d=h("el-button"),a=V,k=h("el-dialog");return n(),l("div",null,[r(k,{modelValue:s(_),"onUpdate:modelValue":o[0]||(o[0]=t=>D(_)?_.value=t:null),title:"分配",width:"700","before-close":g},{footer:m(()=>[u("div",B,[r(d,{onClick:g},{default:m(()=>[c(" 关闭 ")]),_:1})])]),default:m(()=>[u("div",z,[s(e).supplierList.length!=0?(n(),l("div",E,[r(d,{size:"small",type:"danger"},{default:m(()=>[c("供应商 "+i(s(e).supplierList>1?s(e).supplierList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).supplierList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0),s(e).memberList.length!=0?(n(),l("div",j,[r(d,{size:"small",type:"success"},{default:m(()=>[c("内部站 "+i(s(e).memberList>1?s(e).memberList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).memberList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0),s(e).tenantList.length!=0?(n(),l("div",A,[r(d,{size:"small",type:"primary"},{default:m(()=>[c("合作商 "+i(s(e).tenantList>1?s(e).tenantList:""),1)]),_:1}),(n(!0),l(y,null,b(s(e).tenantList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(a,{content:t.id},null,8,["content"])]))),128))])):v("",!0)])]),_:1},8,["modelValue"])])}}}),O=C(F,[["__scopeId","data-v-6a4ba2fe"]]);export{O as default};
