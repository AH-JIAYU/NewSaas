
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as se,aN as ie,ae as ue,r as p,F as t,N as pe,o as de,a3 as h,al as be,b as d,j as me,g as i,w as n,i as e,h as u,t as r,l as _,a4 as ke,c as b,aM as he,k,f as x,B as fe,aR as ge,aO as _e,aP as ve,ao as ye,aH as Ie,aI as Se,z as Ce}from"./index-BnVk3aZr.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-CHjhy5dx.js";import{_ as je}from"./index-BspRMLJp.js";import{a as R}from"./record_callback-yrjHwoB2.js";import"./index.vue_vue_type_script_setup_true_lang-Clie07wY.js";import"./sortable.esm-C0-Qcoum.js";const T=y=>(Ie("data-v-2007e346"),y=y(),Se(),y),Ue=T(()=>x("br",null,null,-1)),we=T(()=>x("br",null,null,-1)),xe=T(()=>x("br",null,null,-1)),De=se({name:"callback",__name:"index",setup(y){const{pagination:f,getParams:E,onSizeChange:O,onCurrentChange:Q}=ie(),{t:l}=ue(),{format:A}=ge(),I=p(!1),z=p([]),B=p(""),s=p([]),S=p(!1),C=p(!1),N=p("default"),j=p(!1),L=p(),F=p("formSearch-callback"),U=p([{prop:"projectQuestionnaireClickId",label:t(()=>l("callback.clickID")),sortable:!0,checked:!0},{label:t(()=>l("callback.vipType")),prop:"surveySource",sortable:!0,checked:!0},{label:t(()=>l("callback.clientID")),prop:"clientId",sortable:!0,checked:!0},{prop:"customerShortName",label:t(()=>l("callback.customerAbbreviation")),sortable:!0,checked:!0},{prop:"memberChildId",label:t(()=>l("callback.vipSubVipId")),sortable:!0,checked:!0},{prop:"projectId",label:t(()=>l("callback.projectID")),sortable:!0,checked:!0},{prop:"projectName",label:t(()=>l("callback.projectName")),sortable:!0,checked:!0},{prop:"callbackUrl",label:t(()=>l("callback.callbackUrl")),sortable:!0,checked:!0},{prop:"subordinateUrl",label:t(()=>l("callback.subordinateUrl")),sortable:!0,checked:!0},{prop:"sourceUrl",label:t(()=>l("callback.source")),sortable:!0,checked:!0},{prop:"callbackTime",label:t(()=>l("callback.callbackTime")),sortable:!0,checked:!0},{prop:"callbackStatus",label:t(()=>l("callback.callbackStatus")),sortable:!0,checked:!0}]),V=[{label:t(()=>l("callback.internalVip")),value:1},{label:t(()=>l("callback.externalVip")),value:2}],w=[{label:l("callback.all"),value:0,type:"info"},{label:l("callback.success"),value:1,type:"success"},{label:l("callback.idWrong"),value:2,type:"warning"},{label:l("callback.hashWrong"),value:3,type:"danger"}],g=pe({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",clientId:"",callbackStatus:0});function M(o){O(o).then(()=>v())}function P(o=1){Q(o).then(()=>v())}function $(){f.value.page=1,v()}const D=[],q=async()=>{D.length=0;const o=await R.getCustomerCooperation({});o.data&&o.data.getCustomerInfoLists&&o.data.getCustomerInfoLists.forEach(c=>{D.push({label:c.customerName,value:c.customerId})})};async function v(){try{I.value=!0;const o={...E(),...g};g.time&&g.time.length&&(o.beginTime=g.time[0]||"",o.endTime=g.time[1]||""),delete o.time;const c=await R.list(o);z.value=c.data.customerCallbackRecordInfoList,f.value.total=c.data.total,I.value=!1}catch{}finally{I.value=!1}}function W(){Object.assign(g,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0,clientId:""}),v()}function G(o){B.value=o}de(async()=>{U.value.forEach(o=>{o.checked&&s.value.push(o.prop)}),q(),v(),L.value=[{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:t(()=>l("callback.clickID"))},{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:t(()=>l("callback.supplierID"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:t(()=>l("callback.projectID"))},{index:3,show:!0,type:"select",modelName:"clientId",placeholder:t(()=>l("callback.clientID")),option:"clientIdOptions",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:t(()=>l("callback.vipType")),option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:t(()=>l("callback.projectName"))},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:t(()=>l("callback.vipSubVipId"))},{index:7,show:!0,type:"select",modelName:"callbackStatus",placeholder:t(()=>l("callback.callbackStatus")),option:"callbackStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:t(()=>l("callback.startDate")),endPlaceHolder:t(()=>l("callback.endDate"))}]});const J={surveySource:()=>V,callbackStatus:()=>w,clientIdOptions:()=>D};return(o,c)=>{const K=je,X=h("ElDivider"),Y=Ne,Z=h("el-button"),ee=_e,le=ve,ae=h("el-row"),m=h("el-table-column"),H=h("el-tag"),te=h("el-empty"),oe=h("el-table"),ce=h("ElPagination"),ne=ye,re=be("loading");return d(),me("div",{class:fe({"absolute-container":e(j)})},[i(ne,null,{default:n(()=>[i(K,{formSearchList:e(L),formSearchName:e(F),onCurrentChange:P,onOnReset:W,model:e(g),formOption:J},null,8,["formSearchList","formSearchName","model"]),i(X,{"border-style":"dashed"}),i(ae,null,{default:n(()=>[i(Y),i(le,null,{default:n(()=>[i(Z,{size:"default"},{default:n(()=>[u(r(e(l)("callback.export")),1)]),_:1}),i(ee,{border:e(S),"onUpdate:border":c[0]||(c[0]=a=>_(S)?S.value=a:null),tableAutoHeight:e(j),"onUpdate:tableAutoHeight":c[1]||(c[1]=a=>_(j)?j.value=a:null),checkList:e(s),"onUpdate:checkList":c[2]||(c[2]=a=>_(s)?s.value=a:null),columns:e(U),"onUpdate:columns":c[3]||(c[3]=a=>_(U)?U.value=a:null),"line-height":e(N),"onUpdate:lineHeight":c[4]||(c[4]=a=>_(N)?N.value=a:null),stripe:e(C),"onUpdate:stripe":c[5]||(c[5]=a=>_(C)?C.value=a:null),style:{"margin-left":"12px"},onQueryData:$},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ke((d(),b(oe,{border:e(S),data:e(z),size:e(N),stripe:e(C),onSelectionChange:G},{empty:n(()=>[i(te,{image:e(he),"image-size":300},null,8,["image"])]),default:n(()=>[e(s).includes("projectQuestionnaireClickId")?(d(),b(m,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:e(l)("callback.clickID")},{default:n(({row:a})=>[u(r(a.projectQuestionnaireClickId?a.projectQuestionnaireClickId:"-"),1)]),_:1},8,["label"])):k("",!0),i(m,{label:e(l)("callback.project"),width:"300",align:"center"},{default:n(({row:a})=>[u(r(a.customerShortName)+" ",1),Ue,u(" "+r(a.projectName)+" ",1),we,u(" "+r(a.projectId),1)]),_:1},8,["label"]),e(s).includes("memberChildId")?(d(),b(m,{key:1,align:"center","show-overflow-tooltip":"",label:e(l)("callback.vipSubVipId")},{default:n(({row:a})=>[x("p",null,r(V[a.surveySource-1].label),1),u(" "+r(a.memberChildId)+" ",1),xe,u(" "+r(a.randomIdentityId),1)]),_:1},8,["label"])):k("",!0),e(s).includes("clientId")?(d(),b(m,{key:2,align:"center","show-overflow-tooltip":"",label:e(l)("callback.clientID")},{default:n(({row:a})=>[u(r(a.clientId),1)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackUrl")?(d(),b(m,{key:3,align:"left",prop:"callbackUrl",label:e(l)("callback.callbackUrl")},null,8,["label"])):k("",!0),e(s).includes("subordinateUrl")?(d(),b(m,{key:4,align:"left",prop:"subordinateUrl",label:e(l)("callback.subordinateUrl")},{default:n(({row:a})=>[u(r(a.subordinateUrl?a.subordinateUrl:"-"),1)]),_:1},8,["label"])):k("",!0),e(s).includes("sourceUrl")?(d(),b(m,{key:5,align:"left",prop:"sourceUrl",label:e(l)("callback.source")},{default:n(({row:a})=>[u(r(a.sourceUrl?a.sourceUrl:"-"),1)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackTime")?(d(),b(m,{key:6,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:e(l)("callback.callbackTime")},{default:n(({row:a})=>[i(H,{effect:"plain",type:"info"},{default:n(()=>[u(r(e(A)(a.callbackTime)),1)]),_:2},1024)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackStatus")?(d(),b(m,{key:7,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:e(l)("callback.callbackStatus")},{default:n(({row:a})=>[a.callbackStatus&&w[a.callbackStatus]?(d(),b(H,{key:0,type:w[a.callbackStatus].type},{default:n(()=>[u(r(w[a.callbackStatus].label),1)]),_:2},1032,["type"])):k("",!0)]),_:1},8,["label"])):k("",!0)]),_:1},8,["border","data","size","stripe"])),[[re,e(I)]]),i(ce,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:P},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Re=Ce(De,[["__scopeId","data-v-2007e346"]]);export{Re as default};
