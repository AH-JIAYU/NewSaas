
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ye,aN as we,r as u,l as je,b as d,q as De,o as c,e as ze,g as e,w as l,az as H,h as m,H as h,s as me,f as p,k as b,t as f,j as v,S as P,bc as Ne,N as Ve,aP as Ue,aQ as Ee,ap as Se,aI as $e,aJ as xe,R as Le}from"./index-ODJju0Ft.js";import{_ as Te}from"./index-BYfRF3bi.js";import{_ as Re}from"./index.vue_vue_type_style_index_0_lang-DyusMtqv.js";import{_ as He}from"./index.vue_vue_type_script_setup_true_lang-C8DtHRKN.js";import{_ as Pe}from"./index.vue_vue_type_script_setup_true_lang-viNtBUKo.js";import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-DsJM9uKr.js";import Be from"./index-C0jfQ_K-.js";import{a as Fe}from"./projectManagement_materials-B0ZzZIkM.js";import"./index-D6HNRVp6.js";import"./file-JNP1gQVk.js";import"./download-C8PHVIy1.js";const fe=$=>($e("data-v-b03bd736"),$=$(),xe(),$),Ke=fe(()=>f("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),qe={class:"copyId"},Ge={class:"id oneLine"},Me={class:"copyId"},Qe={class:"id oneLine"},Je={class:"flex-c"},Oe={class:"oneLine",style:{width:"calc(100% - 20px)"}},We=fe(()=>f("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe={class:"copyId"},Ye={class:"id oneLine"},Ze={class:"copyId"},et={class:"id oneLine"},tt={class:"flex-c"},lt={class:"oneLine",style:{width:"calc(100% - 20px)"}},ot=ye({name:"materials",__name:"list",setup($){const{format:A}=Ne(),{getParams:be,pagination:_,onSizeChange:ve,onCurrentChange:_e}=we(),B=u(""),E=u(!1),y=u(!1),F=u(),K=u(),q=u(),S=u(!1),n=u([]),w=u("default"),j=u(!1),G=u([]),g=u([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),r=u({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),L=u([]),T=u();function he(a){a?T.value=a.projectId:T.value=""}const R=u();function ge(a){a?R.value=a.projectId:R.value=""}function M(a){G.value.length||K.value.showEdit(a)}function Q(a){q.value.showEdit(a)}function J(a){F.value.showEdit(a)}function O(a){G.value=a}function W(a){ve(a).then(()=>I())}function k(a=1){_e(a).then(()=>I())}function X(){Object.assign(r.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),I()}async function I(){try{E.value=!0;const a={...be(),...r.value},o=await Fe.list(a);L.value=o.data.projectMaterialInfoList,_.value.total=o.data.total,E.value=!1}catch{}finally{E.value=!1}}const ke=()=>{r.value.type===1?(n.value=[],g.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I()):(n.value=[],g.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I())};return je(()=>{g.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),I()}),(a,o)=>{const D=d("el-input"),z=d("el-form-item"),N=Ve,V=d("ElButton"),Y=d("ElFormItem"),Z=d("el-form"),ee=He,te=d("ElDivider"),le=Re,U=d("el-button"),oe=Ue,ae=Ee,ne=d("el-row"),i=d("el-table-column"),x=Te,re=d("el-tag"),ie=d("ElSpace"),se=d("el-empty"),ue=d("el-table"),de=d("ElPagination"),ce=d("el-tab-pane"),Ce=d("el-tabs"),Ie=Se,pe=De("loading");return c(),ze("div",{class:P({"absolute-container":S.value})},[e(Ie,null,{default:l(()=>[e(Ce,{modelValue:r.value.type,"onUpdate:modelValue":o[25]||(o[25]=t=>r.value.type=t),onTabChange:ke},{default:l(()=>[e(ce,{label:"会员素材",name:1},{default:l(()=>[e(ee,{"show-toggle":!1},{default:l(({fold:t,toggle:C})=>[e(Z,{model:r.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.memberChildId,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value.memberChildId=s),clearable:"",placeholder:"会员ID",onKeydown:o[1]||(o[1]=H(s=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.projectId,"onUpdate:modelValue":o[2]||(o[2]=s=>r.value.projectId=s),clearable:"",placeholder:"项目ID",onKeydown:o[3]||(o[3]=H(s=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.projectName,"onUpdate:modelValue":o[4]||(o[4]=s=>r.value.projectName=s),clearable:"",placeholder:"项目名称",onKeydown:o[5]||(o[5]=H(s=>k(),["enter"]))},null,8,["modelValue"])]),_:1}),e(Y,null,{default:l(()=>[e(V,{type:"primary",onClick:o[6]||(o[6]=s=>k())},{icon:l(()=>[e(N,{name:"i-ep:search"})]),default:l(()=>[m(" 筛选 ")]),_:1}),e(V,{onClick:X},{icon:l(()=>[Ke]),default:l(()=>[m(" 重置 ")]),_:1}),e(V,{link:"",onClick:C,disabled:""},{icon:l(()=>[e(N,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[m(" "+h(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,{gutter:24},{default:l(()=>[e(le),e(ae,null,{default:l(()=>[e(U,{size:"default",onClick:o[7]||(o[7]=()=>{})},{default:l(()=>[m(" 导出 ")]),_:1}),e(oe,{border:y.value,"onUpdate:border":o[8]||(o[8]=t=>y.value=t),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[9]||(o[9]=t=>S.value=t),checkList:n.value,"onUpdate:checkList":o[10]||(o[10]=t=>n.value=t),columns:g.value,"onUpdate:columns":o[11]||(o[11]=t=>g.value=t),"line-height":w.value,"onUpdate:lineHeight":o[12]||(o[12]=t=>w.value=t),stripe:j.value,"onUpdate:stripe":o[13]||(o[13]=t=>j.value=t),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((c(),p(ue,{ref_key:"tableSortRef",ref:B,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:w.value,stripe:j.value,onSelectionChange:O,"highlight-current-row":"",onCurrentChange:he},{empty:l(()=>[e(se,{description:"暂无数据"})]),default:l(()=>[e(i,{align:"center",type:"selection"}),n.value.includes("memberChildName")?(c(),p(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"会员名称"})):b("",!0),n.value.includes("memberChildId")?(c(),p(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"会员ID"},{default:l(({row:t})=>[f("div",qe,[f("div",Ge,"ID: "+h(t.memberChildId),1),e(x,{class:"copy",content:t.memberChildId},null,8,["content"])])]),_:1})):b("",!0),n.value.includes("projectName")?(c(),p(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),n.value.includes("projectId")?(c(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"},{default:l(({row:t})=>[f("div",Me,[f("div",Qe,"ID: "+h(t.projectId),1),e(x,{class:"copy",content:t.projectId},null,8,["content"])])]),_:1})):b("",!0),n.value.includes("createTime")?(c(),p(i,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:l(({row:t})=>[e(re,{effect:"plain",type:"info"},{default:l(()=>[m(h(v(A)(t.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),n.value.includes("instructions")?(c(),p(i,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"},{default:l(({row:t})=>[f("div",Je,[f("div",Oe,h(t.instructions?t.instructions:"-"),1),e(N,{onClick:C=>Q(t),class:P({edit:"edit",current:t.projectId===T.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):b("",!0),e(i,{align:"center",fixed:"right",label:"操作",width:"240"},{default:l(({row:t})=>[e(ie,null,{default:l(()=>[e(U,{type:"primary",plain:"",size:"small",onClick:C=>M(t)},{default:l(()=>[m(" 查看 ")]),_:2},1032,["onClick"]),e(U,{type:"danger",plain:"",size:"small",onClick:C=>J(t)},{default:l(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,E.value]]),e(de,{"current-page":v(_).page,total:v(_).total,"page-size":v(_).size,"page-sizes":v(_).sizes,layout:v(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(ce,{label:"子会员素材",name:2},{default:l(()=>[e(ee,{"show-toggle":!1},{default:l(({fold:t,toggle:C})=>[e(Z,{model:r.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.memberChildId,"onUpdate:modelValue":o[14]||(o[14]=s=>r.value.memberChildId=s),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.projectId,"onUpdate:modelValue":o[15]||(o[15]=s=>r.value.projectId=s),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(z,{label:""},{default:l(()=>[e(D,{modelValue:r.value.projectName,"onUpdate:modelValue":o[16]||(o[16]=s=>r.value.projectName=s),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(Y,null,{default:l(()=>[e(V,{type:"primary",onClick:o[17]||(o[17]=s=>k())},{icon:l(()=>[e(N,{name:"i-ep:search"})]),default:l(()=>[m(" 筛选 ")]),_:1}),e(V,{onClick:X},{icon:l(()=>[We]),default:l(()=>[m(" 重置 ")]),_:1}),e(V,{link:"",onClick:C,disabled:""},{icon:l(()=>[e(N,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[m(" "+h(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,{gutter:24},{default:l(()=>[e(le),e(ae,null,{default:l(()=>[e(U,{size:"default",onClick:o[18]||(o[18]=()=>{})},{default:l(()=>[m(" 导出 ")]),_:1}),e(oe,{border:y.value,"onUpdate:border":o[19]||(o[19]=t=>y.value=t),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[20]||(o[20]=t=>S.value=t),checkList:n.value,"onUpdate:checkList":o[21]||(o[21]=t=>n.value=t),columns:g.value,"onUpdate:columns":o[22]||(o[22]=t=>g.value=t),"line-height":w.value,"onUpdate:lineHeight":o[23]||(o[23]=t=>w.value=t),stripe:j.value,"onUpdate:stripe":o[24]||(o[24]=t=>j.value=t),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((c(),p(ue,{ref_key:"tableSortRef",ref:B,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:y.value,size:w.value,stripe:j.value,onSelectionChange:O,"highlight-current-row":"",onCurrentChange:ge},{empty:l(()=>[e(se,{description:"暂无数据"})]),default:l(()=>[e(i,{type:"selection"}),n.value.includes("memberChildName")?(c(),p(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"子会员名称"})):b("",!0),n.value.includes("memberChildId")?(c(),p(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"子会员ID"},{default:l(({row:t})=>[f("div",Xe,[f("div",Ye,"ID: "+h(t.memberChildId),1),e(x,{class:"copy",content:t.memberChildId},null,8,["content"])])]),_:1})):b("",!0),n.value.includes("projectName")?(c(),p(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),n.value.includes("projectId")?(c(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"},{default:l(({row:t})=>[f("div",Ze,[f("div",et,"ID: "+h(t.projectId),1),e(x,{class:"copy",content:t.projectId},null,8,["content"])])]),_:1})):b("",!0),n.value.includes("customerIdentification")?(c(),p(i,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"center",label:"客户简称/标识"})):b("",!0),n.value.includes("createTime")?(c(),p(i,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建"},{default:l(({row:t})=>[e(re,{effect:"plain",type:"info"},{default:l(()=>[m(h(v(A)(t.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),n.value.includes("instructions")?(c(),p(i,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"},{default:l(({row:t})=>[f("div",tt,[f("div",lt,h(t.instructions?t.instructions:"-"),1),e(N,{onClick:C=>Q(t),class:P({edit:"edit",current:t.projectId===R.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):b("",!0),e(i,{align:"center",fixed:"right",label:"操作",width:"240"},{default:l(({row:t})=>[e(ie,null,{default:l(()=>[e(U,{type:"primary",plain:"",size:"small",onClick:C=>M(t)},{default:l(()=>[m(" 查看 ")]),_:2},1032,["onClick"]),e(U,{type:"danger",plain:"",size:"small",onClick:C=>J(t)},{default:l(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[pe,E.value]]),e(de,{"current-page":v(_).page,total:v(_).total,"page-size":v(_).size,"page-sizes":v(_).sizes,layout:v(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),e(Pe,{ref_key:"deleteRef",ref:F},null,512),e(Ae,{ref_key:"detailsRef",ref:K,onFetchData:I},null,512),e(Be,{ref_key:"editsRef",ref:q,onFetchData:I},null,512)]),_:1})],2)}}}),bt=Le(ot,[["__scopeId","data-v-b03bd736"]]);export{bt as default};
