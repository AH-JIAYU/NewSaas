
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as g}from"./survey_vipLevel-Dp-vgnc8.js";import{d as q,r,a1 as D,a as i,o as U,e as B,w as l,f as o,g as f,i as t,p as E,an as I,ak as b,_ as L}from"./index-CX2PmK0L.js";const M=q({__name:"index",emits:["queryData"],setup(T,{expose:V,emit:x}){const y=x,s=r(!1),d=r(""),e=r(),m=r(),R=D({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function k(n){n?(d.value="编辑",e.value=I(n)):(d.value="添加",e.value={}),s.value=!0}function c(){m.value.resetFields(),s.value=!1}function w(){m.value.validate(async n=>{if(n){if(e.value.memberLevelId){const{status:a}=await g.edit(e.value);a===1&&b.success({message:"编辑成功",center:!0})}else{const{status:a}=await g.create(e.value);a===1&&b.success({message:"新增成功",center:!0})}y("queryData"),c()}})}return V({showEdit:k}),(n,a)=>{const p=i("el-input"),_=i("el-form-item"),N=i("el-form"),v=i("el-button"),C=i("el-dialog");return U(),B(C,{modelValue:t(s),"onUpdate:modelValue":a[2]||(a[2]=u=>E(s)?s.value=u:null),title:t(d),width:"600"},{footer:l(()=>[o(v,{onClick:c},{default:l(()=>[f(" 取消 ")]),_:1}),o(v,{type:"primary",onClick:w},{default:l(()=>[f(" 确定 ")]),_:1})]),default:l(()=>[o(N,{ref_key:"formRef",ref:m,model:t(e),rules:t(R),"label-width":"80px",inline:!1},{default:l(()=>[o(_,{label:"等级名称",prop:"levelName"},{default:l(()=>[o(p,{modelValue:t(e).levelName,"onUpdate:modelValue":a[0]||(a[0]=u=>t(e).levelName=u),maxlength:"100"},null,8,["modelValue"])]),_:1}),o(_,{label:"加成比例",prop:"additionRatio"},{default:l(()=>[o(p,{modelValue:t(e).additionRatio,"onUpdate:modelValue":a[1]||(a[1]=u=>t(e).additionRatio=u),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0",type:"number"},{append:l(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),S=L(M,[["__scopeId","data-v-edbedf99"]]);export{S as default};
