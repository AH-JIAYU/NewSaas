
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as H}from"./group_team-BZPS9_O3.js";import{a as U}from"./department-Dsv2PSjf.js";import{u as A}from"./department-DSblj4kE.js";import{u as G}from"./configuration_manager-BPNceNCe.js";import{u as K}from"./position_manage-D3hK6OXJ.js";import{d as Q,aO as W,r as o,l as X,b as c,q as Y,s as Z,o as l,e as _,g as n,w as e,t as L,h as r,j as ee,aN as te,f as s,H as f,F as w,v as I,k,aI as ae,aJ as le,R as oe}from"./index-DQD169NL.js";import"./position_manage-Cg5YYjqJ.js";const ne=v=>(ae("data-v-c4a81ddf"),v=v(),le(),v),se=ne(()=>L("div",{class:"card-header"},[L("span",null,"组成员")],-1)),ue={style:{flex:"auto"}},re=Q({name:"Edit",__name:"index",emits:["success"],setup(v,{expose:M,emit:de}){W();const O=o(),x=K(),E=o(),R=A(),m=o(),j=G(),S=o([]),B=o(""),z=o(),g=o(!1),b=o(!1),D=o([]),F=o([]),N=o(),V=o({groupId:null,userInfo:[],menuId:[]});async function J(T){try{g.value=!0,B.value="详情";const d=JSON.parse(T);V.value.groupId=d.id,N.value=d.departmentId;const i={page:1,limit:10,groupId:d.id},a=await H.list(i);a!=null&&a.data.data&&a.data.data.forEach(p=>{var y,h;(h=(y=V.value)==null?void 0:y.menuId)==null||h.push(p.id),D.value.push(p)});const C=await U.createEvery();m.value=C.data.result,m.value=m.value.filter(p=>p.id===N.value),g.value=!1,b.value=!0}catch{}finally{g.value=!1}}X(async()=>{E.value=await(x==null?void 0:x.getPositionManage())||[],m.value=await R.getDepartment(),S.value=await j.getStaff(),z.value=new Date});const P=()=>{Object.assign(V.value,{groupId:null,userInfo:[],menuId:[]}),F.value=[],D.value=[]};return M({showEdit:J}),(T,d)=>{const i=c("el-table-column"),a=c("el-text"),C=c("el-empty"),p=c("el-table"),y=c("el-card"),h=c("el-button"),$=c("el-drawer"),q=Y("loading");return Z((l(),_("div",null,[n($,{modelValue:b.value,"onUpdate:modelValue":d[1]||(d[1]=t=>b.value=t),title:B.value,onClose:P,size:"60%"},{footer:e(()=>[L("div",ue,[n(h,{type:"",onClick:d[0]||(d[0]=t=>b.value=!1)},{default:e(()=>[r(" 取消 ")]),_:1})])]),default:e(()=>[n(y,{class:"box-card"},{header:e(()=>[se]),default:e(()=>[n(p,{ref_key:"tableRef",ref:O,data:D.value,border:""},{empty:e(()=>[n(C,{image:ee(te),"image-size":300},null,8,["image"])]),default:e(()=>[n(i,{align:"left",type:"index",label:"序号",width:"80"}),n(i,{align:"left","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"},{default:e(({row:t})=>[t.memberId?(l(),s(a,{key:0},{default:e(()=>[r(f(t.memberId),1)]),_:2},1024)):(l(),s(a,{key:1},{default:e(()=>[r(f(t.id),1)]),_:2},1024))]),_:1}),n(i,{align:"left","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},I(S.value,u=>(l(),s(a,null,{default:e(()=>[t.id===u.id?(l(),s(a,{key:0},{default:e(()=>[r(f(u.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[r(f(t.userName?t.userName:"-"),1)]),_:2},1024))]),_:1}),n(i,{align:"left","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},I(S.value,u=>(l(),s(a,null,{default:e(()=>[t.id===u.id?(l(),s(a,{key:0},{default:e(()=>[r(f(u.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[r(f(t.name),1)]),_:2},1024))]),_:1}),n(i,{align:"left","show-overflow-tooltip":"",prop:"lable",label:"职位"},{default:e(({row:t})=>[(l(!0),_(w,null,I(E.value,u=>(l(),s(a,null,{default:e(()=>[t.positionId===u.id?(l(),s(a,{key:0},{default:e(()=>[r(f(u.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256))]),_:1}),n(i,{align:"left","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:e(({row:t})=>[(l(!0),_(w,null,I(m.value,u=>(l(),s(a,null,{default:e(()=>[N.value===u.id?(l(),s(a,{key:0},{default:e(()=>[r(f(u.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256))]),_:1}),n(i,{align:"left",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:e(({row:t})=>[r(f(t.commission?t.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])])),[[q,g.value]])}}}),ge=oe(re,[["__scopeId","data-v-c4a81ddf"]]);export{ge as default};
