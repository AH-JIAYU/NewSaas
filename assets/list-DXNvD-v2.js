
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,r as n,aN as me,a3 as fe,n as _e,a as r,q as ge,s as U,o as c,b as ve,f as a,w as l,g as y,e as p,i as m,aM as he,y as f,z as k,N as D,j as g,aO as be,E as ye,b9 as ke,ba as Ce,_ as Se,ap as we,L as ze}from"./index-CtlW-OTR.js";import{_ as Ee}from"./index-DJKeF4wo.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-BZn39aJn.js";import{_ as xe}from"./index-UGNhgAVH.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-BJaqybq-.js";import Ne from"./index-DB0tOr1u.js";import{u as Re}from"./user_customer-CSWKaKw2.js";import{a as B}from"./position_manage-DpEeCfEm.js";import"./index-DwbhBi7v.js";import"./index.vue_vue_type_script_setup_true_lang-B40v29xb.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-BixSvGso.js";const $e={class:"copyId tableSmall"},Ie={class:"id oneLine idFont"},Pe={class:"tableBig"},Ue={class:"fontC-System"},Be={class:"flex-s"},Fe={class:"oneLine fontC-System",style:{width:"calc(100% - 20px)"}},He=pe({name:"position_manage",__name:"list",setup(Me){const F=Re(),H=n([]),{pagination:u,onSizeChange:M,onCurrentChange:O,onSortChange:Oe}=me(),V=n(""),N=n([]),v=n(!0),C=n(),S=n(!1),s=n([]),w=n(!1);n(!1);const z=n("default"),R=n(),h=n(),E=n(!1),A=n([]),$=n(),Q=n("formSearch-position_manage"),j=[{lable:"启用",value:1},{lable:"禁用",value:2}],L=n([{label:"职位ID",prop:"id",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"name",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"count",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),_=fe({page:1,limit:10,id:null,name:"",active:null});function q(){C.value.showEdit()}function T(t){C.value.showEdit(JSON.stringify(t))}function J(t){t?h.value=t.id:h.value=""}function G(t,o){R.value.showEdit(t,o)}function K(t){A.value=t}function W(t){be.confirm(`确认删除「${t.name}」吗？`,"确认信息").then(async()=>{(await B.delete({id:t.id})).status===1&&(ye.success({message:"删除成功",center:!0}),i())})}function X(){Object.assign(_,{page:1,limit:10,id:null,name:"",active:null}),i()}function Y(t){M(t).then(()=>{_.limit=t,i()})}function x(t=1){O(t).then(()=>{_.page=t,i()})}async function i(){try{v.value=!0,H.value=await F.getCustomerList();const{data:t}=await B.list(_);N.value=t.data,u.value.total=parseInt(t.total)||0,v.value=!1}catch{}finally{v.value=!1}}_e(()=>{L.value.forEach(t=>{t.checked&&s.value.push(t.prop)}),i(),$.value=[{index:1,show:!0,type:"input",modelName:"id",placeholder:"职位ID"},{index:2,show:!0,type:"input",modelName:"name",placeholder:"职位名称"},{index:3,show:!0,type:"select",modelName:"active",placeholder:"状态",option:"active",optionLabel:"lable",optionValue:"value"}]});const Z={active:()=>j};return(t,o)=>{const ee=xe,te=r("ElDivider"),b=r("el-button"),ae=Le,oe=ke,ne=Ce,le=r("el-row"),d=r("el-table-column"),se=Ee,ie=Se,re=r("el-empty"),ce=r("el-table"),ue=r("ElPagination"),de=we,I=ge("loading");return U((c(),ve("div",{class:D({"absolute-container":S.value})},[a(de,null,{default:l(()=>[a(ee,{formSearchList:$.value,formSearchName:Q.value,onCurrentChange:x,onOnReset:X,model:_,formOption:Z},null,8,["formSearchList","formSearchName","model"]),a(te,{"border-style":"dashed"}),a(le,{gutter:24},{default:l(()=>[a(ae,null,{default:l(()=>[a(b,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:q},{default:l(()=>[y(" 新增职位 ")]),_:1})]),_:1}),a(ne,null,{default:l(()=>[a(b,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:l(()=>[y(" 导出 ")]),_:1}),a(oe,{border:w.value,"onUpdate:border":o[1]||(o[1]=e=>w.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>S.value=e),checkList:s.value,"onUpdate:checkList":o[3]||(o[3]=e=>s.value=e),columns:L.value,"onUpdate:columns":o[4]||(o[4]=e=>L.value=e),"line-height":z.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>z.value=e),stripe:E.value,"onUpdate:stripe":o[6]||(o[6]=e=>E.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),U((c(),p(ce,{ref_key:"tableSortRef",ref:V,style:{"margin-top":"10px"},"row-key":"id",data:N.value,border:w.value,size:z.value,stripe:E.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:J},{empty:l(()=>[a(re,{image:m(he),"image-size":300},null,8,["image"])]),default:l(()=>[a(d,{align:"left",type:"selection"}),s.value.includes("id")?(c(),p(d,{key:0,prop:"id","show-overflow-tooltip":"",align:"left",label:"职位ID"},{default:l(({row:e})=>[f("div",$e,[f("div",Ie,k(e.id),1),a(se,{content:e.id,class:D({rowCopy:"rowCopy",current:e.id===h.value})},null,8,["content","class"])])]),_:1})):g("",!0),s.value.includes("name")?(c(),p(d,{key:1,prop:"name","show-overflow-tooltip":"",align:"left",label:"职位名称"},{default:l(({row:e})=>[f("div",Pe,k(e.name),1)]),_:1})):g("",!0),s.value.includes("count")?(c(),p(d,{key:2,prop:"count","show-overflow-tooltip":"",align:"left",label:"账户数"},{default:l(({row:e})=>[f("div",Ue,k(e.count?e.count:"-"),1)]),_:1})):g("",!0),s.value.includes("remark")?(c(),p(d,{key:3,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:l(({row:e})=>[f("div",Be,[f("div",Fe,k(e.remark?e.remark:"-"),1),e.projectType!==2?(c(),p(ie,{key:0,onClick:P=>G(e,"remark"),class:D({edit:"edit",current:e.id===h.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):g("",!0)])]),_:1})):g("",!0),a(d,{align:"left",fixed:"right",label:"操作",width:"170"},{default:l(({row:e})=>[a(b,{size:"small",plain:"",type:"primary",onClick:P=>T(e)},{default:l(()=>[y(" 编辑 ")]),_:2},1032,["onClick"]),a(b,{size:"small",plain:"",type:"danger",onClick:P=>W(e)},{default:l(()=>[y(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[I,!1]]),a(ue,{"current-page":m(u).page,total:m(u).total,"page-size":m(u).size,"page-sizes":m(u).sizes,layout:m(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:x,onSizeChange:Y},null,8,["current-page","total","page-size","page-sizes","layout"]),a(De,{onSuccess:i,ref_key:"editRef",ref:C},null,512),a(Ne,{ref_key:"QuickEditRef",ref:R,onFetchData:i},null,512)]),_:1})],2)),[[I,v.value]])}}}),Ze=ze(He,[["__scopeId","data-v-a3e9edb4"]]);export{Ze as default};
