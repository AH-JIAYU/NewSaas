
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import R from"./HDropdown-BbK5y3Gu.js";import{_ as B}from"./HTooltip.vue_vue_type_script_setup_true_lang-DVHt5rPY.js";import{d as N,M as D,q as H,N as M,$ as O,t as V,v as j,c as E,r as T,a0 as F,o as d,b as p,F as c,f as o,w as n,i as a,j as v,ag as q,aR as z,P,a3 as G,a4 as A,e as m,g as K,G as U,az as y,E as J,L as Q,_ as W}from"./index-BVN4Z1ED.js";import{S as X}from"./sortable.esm-BS5toX6s.js";import{u as Y}from"./useTabbar-BUGZDhgH.js";const Z={style:{"margin-right":"5px"}},tt={class:"h-6 w-6 flex-center cursor-pointer rounded-1 bg-[var(--g-container-bg)] text-lg shadow transition-background-color transition-shadow"},at={class:"quick-button"},et=["disabled"],ot=["disabled"],st=["disabled"],it=["title","onClick"],nt=N({name:"TabbarMoreAction",__name:"moreAction",setup(rt){const $=D(),x=H(),g=M(),r=Y(),{t:u}=O(),w=V(j,Function,!0),_=E(()=>r.getId()),k=T(),h=T(!1);F(()=>k.value,l=>{l&&new X(k.value.$el,{animation:200,ghostClass:"ghost",draggable:".tab",filter:".no-drag",onStart:()=>{h.value=!0},onEnd:()=>{h.value=!1},onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&g.sort(e.newIndex,e.oldIndex)}})});function f(l){switch(l){case"search-tabs":J.emit("global-search-toggle","tab");break;case"other-side":r.closeOtherSide();break;case"left-side":r.closeLeftSide();break;case"right-side":r.closeRightSide();break}}function C(l,e,s){let i;return!l&&e||l&&!s?i=e:l&&s&&(i=s),i}return(l,e)=>{const s=Q,i=B,L=R;return d(),p("div",null,[c("div",Z,[c("div",{class:"h-6 w-6 flex-center cursor-pointer rounded-1 bg-[var(--g-container-bg)] text-lg shadow transition-background-color transition-shadow",onClick:e[0]||(e[0]=t=>f("other-side"))},[o(i,{text:a(u)("app.tabbar.closeOtherSide")},{default:n(()=>[o(s,{name:"i-ri:close-fill"})]),_:1},8,["text"])])]),o(L,{placement:"bottom-end","popper-class":"tabbar-dropdown"},{dropdown:n(()=>[c("div",at,[a(x).settings.toolbar.navSearch?(d(),p("button",{key:0,class:"button",onClick:e[1]||(e[1]=t=>f("search-tabs"))},[o(i,{text:a(u)("app.tabbar.searchTabs")},{default:n(()=>[o(s,{name:"i-ri:search-line"})]),_:1},8,["text"])])):v("",!0),c("button",{class:"button",disabled:!a(r).checkCloseOtherSide(),onClick:e[2]||(e[2]=t=>f("other-side"))},[o(i,{text:a(u)("app.tabbar.closeOtherSide")},{default:n(()=>[o(s,{name:"i-ri:close-fill"})]),_:1},8,["text"])],8,et),c("button",{class:"button",disabled:!a(r).checkCloseLeftSide(),onClick:e[3]||(e[3]=t=>f("left-side"))},[o(i,{text:a(u)("app.tabbar.closeLeftSide")},{default:n(()=>[o(s,{name:"i-ph:arrow-line-left"})]),_:1},8,["text"])],8,ot),c("button",{class:"button",disabled:!a(r).checkCloseRightSide(),onClick:e[4]||(e[4]=t=>f("right-side"))},[o(i,{text:a(u)("app.tabbar.closeRightSide")},{default:n(()=>[o(s,{name:"i-ph:arrow-line-right"})]),_:1},8,["text"])],8,st)]),o(a(q),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"max-h-[300px]"},{default:n(()=>[o(z,{ref_key:"dropdownTabContainerRef",ref:k,name:a(h)?void 0:"dropdown-tab",tag:"div",class:P(["tabs",{dragging:a(h)}])},{default:n(()=>[(d(!0),p(G,null,A(a(g).list,t=>{var S,I;return d(),p("div",{key:t.tabId,class:P(["tab",{actived:t.tabId===a(_),"no-drag":t.isPermanent||t.isPin}])},[(d(),p("div",{key:t.tabId,class:"title",title:((S=t.customTitleList.find(b=>b.fullPath===t.fullPath))==null?void 0:S.title)||a(w)(t.i18n,t.title),onClick:b=>a($).push(t.fullPath)},[a(x).settings.tabbar.enableIcon&&C(t.tabId===a(_),t.icon,t.activeIcon)?(d(),m(s,{key:0,name:C(t.tabId===a(_),t.icon,t.activeIcon)},null,8,["name"])):v("",!0),K(" "+U(((I=t.customTitleList.find(b=>b.fullPath===t.fullPath))==null?void 0:I.title)||a(w)(t.i18n,t.title)),1)],8,it)),!t.isPermanent&&t.isPin?(d(),m(s,{key:0,name:"i-ri:pushpin-2-fill",class:"action-icon",onClick:y(b=>a(g).unPin(t.tabId),["stop"])},null,8,["onClick"])):!t.isPermanent&&a(g).list.length>1?(d(),m(s,{key:1,name:"ri:close-fill",class:"action-icon",onClick:y(b=>a(r).closeById(t.tabId),["stop"])},null,8,["onClick"])):v("",!0)],2)}),128))]),_:1},8,["name","class"])]),_:1})]),default:n(()=>[c("div",tt,[o(s,{name:"i-ri:arrow-down-s-fill"})])]),_:1})])}}}),ft=W(nt,[["__scopeId","data-v-16989f54"]]);export{ft as default};
