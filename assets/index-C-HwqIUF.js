
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,az as re,ae as oe,ac as ue,a6 as se,r as w,E as c,M as N,o as ie,P as pe,a2 as d,a as b,i as I,f as e,w as l,h as o,bc as de,b as m,t as v,N as U,O as h,g as f,c as C,j as E,_ as me,aH as ce,aI as be,y as fe}from"./index-Dfh_jK84.js";import ve from"./index-DlZ-wTjx.js";import{U as _e}from"./user_supplier-1sbFhifP.js";import{u as ye}from"./configuration_supplierLevel-CoIH1JL3.js";import{u as ge}from"./user_customer-DOTs2LNv.js";import{a as Te}from"./user_supplier-DHM5gYP9.js";import"./apiLoading-QnSqjYrt.js";import"./user_customer-BHXRPBIa.js";const x=S=>(ce("data-v-e463fee8"),S=S(),be(),S),we={class:"card-header"},Ve={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},Se=x(()=>m("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Ce=x(()=>m("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Le={class:"card-header"},Ie=x(()=>m("br",null,null,-1)),xe=x(()=>m("div",null,[f(" 为供应商设定筛选条件，更精准匹配合适项目"),m("br"),f(" 例：仅选中【客户1】，该供应商只能做【客户1】的项目 ")],-1)),Ne=ne({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(S){const A=re(),{t:n}=oe(),Z=_e(),H=ye();ge();const G=ue(),J=se("validateTopTabs"),k=w();w(!1);const t=S,P=w(null);w({});const K=[{label:n("supplier.new.company"),value:"company"},{label:n("supplier.new.personal"),value:"personal"}];c(()=>n("supplier.new.USD")),c(()=>n("supplier.new.CNY"));const _=N({supplierAccord:[{required:!0,message:c(()=>n("supplier.new.enterSuppllierName")),trigger:"blur"},{min:2,max:50,message:c(()=>n("supplier.new.2to50")),trigger:"blur"}],memberLevelId:[{required:!0,message:c(()=>n("supplier.new.memberLevelSelect")),trigger:"change"}],subordinateCountryId:[{required:!0,message:c(()=>n("supplier.new.areaSelect")),trigger:"change"}],supplierLevelId:[{required:!0,message:c(()=>n("supplier.new.supplierLevelSelect")),trigger:"change"}],type:[{required:!0,message:c(()=>n("supplier.new.supplierTypeSelect")),trigger:"change"}]}),W=(i,a,p)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(t.leftTab.supplierPhone)?p():p(new Error(n("supplier.new.legalPhoneNumber")))},X=(i,a,p)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.leftTab.emailAddress)?p():p(new Error(n("supplier.new.legalEmail")))},D=i=>{i&&(t.leftTab.countryType=i==="343"?1:2,i==="343"?(t.leftTab.tenantSupplierId||(t.leftTab.currencyType=A.currencyType===1?"USD":"CNY"),_.emailAddress&&delete _.emailAddress,_.supplierPhone=[{required:!0,message:c(()=>n("supplier.new.enterPhoneNumber")),trigger:"blur"},{validator:W,trigger:"blur"}]):(t.leftTab.tenantSupplierId||(t.leftTab.currencyType=A.currencyType===1?"USD":"CNY"),_.supplierPhone&&delete _.supplierPhone,_.emailAddress=[{required:!0,message:c(()=>n("supplier.new.enterEmail")),trigger:"blur"},{validator:X,trigger:"blur"}]))};t.leftTab.relevanceCountryIdList?console.log(t.leftTab.relevanceCountryIdList):t.leftTab.relevanceCountryIdList=[],t.leftTab.relevanceCustomerIdList?console.log(t.leftTab.relevanceCustomerIdList):t.leftTab.relevanceCustomerIdList=[];const q=()=>{k.value.showEdit()},y=N({checked:!1,relatedCustomers:[],payMethod:Z.payMethod,countryList:[],supplierLevelList:[]}),B=w("basicSettings"),z=async()=>{y.supplierLevelList=await H.getLevelNameList(),D(t.leftTab.subordinateCountryId)},M=w([]),R=w([]),j=(i,a)=>i?a.label&&a.label.toLowerCase().includes(i.toLowerCase()):!0,ee=i=>{i.forEach(a=>{M.value.push({label:a.chineseName,key:a.id,initial:a.code})})},le=i=>{i.forEach(a=>{R.value.push({label:a.customerAccord,key:a.tenantCustomerId})})};return N({customerShortName:"",customerStatus:2,antecedentQuestionnaire:null}),ie(async()=>{y.relatedCustomers=await Te.getCustomerCooperation({}),y.countryList=await G.getCountry(),await z(),ee(y.countryList),le(y.relatedCustomers)}),pe(()=>{J(P.value)}),(i,a)=>{const p=d("el-option"),V=d("el-select"),u=d("el-form-item"),s=d("el-col"),g=d("el-input"),Y=d("el-button"),T=d("el-row"),O=d("el-card"),L=d("ElSwitch"),Q=me,$=d("el-tooltip"),F=d("el-transfer"),te=d("el-tab-pane"),ae=d("el-tabs");return b(),I("div",null,[e(ae,{modelValue:B.value,"onUpdate:modelValue":a[17]||(a[17]=r=>B.value=r)},{default:l(()=>[e(te,{label:o(n)("supplier.new.basicSettings"),name:"basicSettings"},{default:l(()=>[e(o(de),{ref_key:"formRef",ref:P,rules:o(_),model:t.leftTab,"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(O,{class:"box-card"},{header:l(()=>[m("div",we,[m("span",null,v(o(n)("supplier.new.basicInformation")),1)])]),default:l(()=>[e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.supplierType"),prop:"type"},{default:l(()=>[e(V,{modelValue:t.leftTab.type,"onUpdate:modelValue":a[0]||(a[0]=r=>t.leftTab.type=r),"value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(b(),I(U,null,h(K,r=>e(p,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.supplierAccord"),prop:"supplierAccord"},{default:l(()=>[e(g,{modelValue:t.leftTab.supplierAccord,"onUpdate:modelValue":a[1]||(a[1]=r=>t.leftTab.supplierAccord=r),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.supplierLevel"),prop:"supplierLevelId"},{default:l(()=>[e(V,{clearable:"",filterable:"",modelValue:t.leftTab.supplierLevelId,"onUpdate:modelValue":a[2]||(a[2]=r=>t.leftTab.supplierLevelId=r)},{empty:l(()=>[m("div",Ve,[f(v(o(n)("supplier.new.nodata"))+" ",1),e(Y,{type:"primary",link:"",size:"small",onClick:q},{default:l(()=>[f(v(o(n)("supplier.new.quickAdd"))+" ",1),Se]),_:1})])]),default:l(()=>[(b(!0),I(U,null,h(o(y).supplierLevelList,r=>(b(),C(p,{key:r.tenantSupplierLevelId,value:r.tenantSupplierLevelId,label:r.levelNameOrAdditionRatio},null,8,["value","label"]))),128)),e(Y,{size:"small",class:"buttonClass",onClick:q},{default:l(()=>[f(v(o(n)("supplier.new.quickAdd"))+" ",1),Ce]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.area"),prop:"subordinateCountryId"},{default:l(()=>[e(V,{clearable:"",filterable:"",modelValue:t.leftTab.subordinateCountryId,"onUpdate:modelValue":a[3]||(a[3]=r=>t.leftTab.subordinateCountryId=r),onChange:D},{default:l(()=>[(b(!0),I(U,null,h(o(y).countryList,r=>(b(),C(p,{key:r.id,value:r.id,label:r.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.supplierName")},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.supplierName,"onUpdate:modelValue":a[4]||(a[4]=r=>t.leftTab.supplierName=r)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.supplierPhone"),prop:"supplierPhone"},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.supplierPhone,"onUpdate:modelValue":a[5]||(a[5]=r=>t.leftTab.supplierPhone=r)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.emailAddress"),prop:"emailAddress"},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.emailAddress,"onUpdate:modelValue":a[6]||(a[6]=r=>t.leftTab.emailAddress=r)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(u,{label:o(n)("supplier.new.settlementCycle")},{default:l(()=>[e(V,{modelValue:t.leftTab.settlementCycle,"onUpdate:modelValue":a[7]||(a[7]=r=>t.leftTab.settlementCycle=r)},{default:l(()=>[e(p,{label:"net 30",value:30}),e(p,{label:"net 60",value:60}),e(p,{label:"net 90",value:90}),e(p,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[t.leftTab.type==="company"?(b(),C(u,{key:0,label:o(n)("supplier.new.companyName")},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.companyName,"onUpdate:modelValue":a[8]||(a[8]=r=>t.leftTab.companyName=r)},null,8,["modelValue"])]),_:1},8,["label"])):E("",!0)]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[t.leftTab.type==="company"?(b(),C(u,{key:0,label:o(n)("supplier.new.legalPersonName"),prop:""},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.legalPersonName,"onUpdate:modelValue":a[9]||(a[9]=r=>t.leftTab.legalPersonName=r)},null,8,["modelValue"])]),_:1},8,["label"])):E("",!0)]),_:1}),e(s,{span:8},{default:l(()=>[t.leftTab.type==="company"?(b(),C(u,{key:0,label:o(n)("supplier.new.taxID"),prop:""},{default:l(()=>[e(g,{clearable:"",modelValue:t.leftTab.taxID,"onUpdate:modelValue":a[10]||(a[10]=r=>t.leftTab.taxID=r)},null,8,["modelValue"])]),_:1},8,["label"])):E("",!0)]),_:1})]),_:1})]),_:1}),e(O,{class:"box-card"},{header:l(()=>[m("div",Le,[m("span",null,v(o(n)("supplier.new.permissionInformation")),1)])]),default:l(()=>[e(T,{gutter:10},{default:l(()=>[e(s,{span:3},{default:l(()=>[e(u,{label:o(n)("supplier.new.surveySystem")},{default:l(()=>[e(L,{modelValue:t.leftTab.surveySystem,"onUpdate:modelValue":a[11]||(a[11]=r=>t.leftTab.surveySystem=r),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":o(n)("common.enable"),"inactive-text":o(n)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1}),e(s,{span:3},{default:l(()=>[e(u,{label:"B2B"},{default:l(()=>[e(L,{modelValue:t.leftTab.b2bStatus,"onUpdate:modelValue":a[12]||(a[12]=r=>t.leftTab.b2bStatus=r),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":o(n)("common.enable"),"inactive-text":o(n)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1})]),_:1}),e(s,{span:4},{default:l(()=>[e(u,{label:"B2C"},{default:l(()=>[e(L,{modelValue:t.leftTab.b2cStatus,"onUpdate:modelValue":a[13]||(a[13]=r=>t.leftTab.b2cStatus=r),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":o(n)("common.enable"),"inactive-text":o(n)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1})]),_:1}),e(s,{span:3},{default:l(()=>[e(u,{label:o(n)("supplier.new.surveyStatus")},{default:l(()=>[e(L,{modelValue:t.leftTab.supplierStatus,"onUpdate:modelValue":a[14]||(a[14]=r=>t.leftTab.supplierStatus=r),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":o(n)("common.enable"),"inactive-text":o(n)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:20},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(u,null,{label:l(()=>[m("div",null,[e($,{class:"tooltips",placement:"top"},{content:l(()=>[m("div",null,[f(v(o(n)("supplier.new.tips1")),1),Ie,f(" "+v(o(n)("supplier.new.example")),1)])]),default:l(()=>[e(Q,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1}),f(" "+v(o(n)("supplier.new.authorizationArea")),1)])]),default:l(()=>[e(F,{modelValue:t.leftTab.relevanceCountryIdList,"onUpdate:modelValue":a[15]||(a[15]=r=>t.leftTab.relevanceCountryIdList=r),filterable:"","filter-method":j,"filter-placeholder":o(n)("supplier.new.enterQueryCountry"),data:M.value,titles:[o(n)("supplier.new.unselectedCountry"),o(n)("supplier.new.selectedCountries")]},null,8,["modelValue","filter-placeholder","data","titles"])]),_:1})]),_:1})]),_:1}),e(T,{gutter:20},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(u,null,{label:l(()=>[m("div",null,[e($,{class:"tooltips",placement:"top"},{content:l(()=>[xe]),default:l(()=>[e(Q,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1}),f(" 授权客户 ")])]),default:l(()=>[e(F,{modelValue:t.leftTab.relevanceCustomerIdList,"onUpdate:modelValue":a[16]||(a[16]=r=>t.leftTab.relevanceCustomerIdList=r),filterable:"","filter-method":j,"filter-placeholder":"输入查询客户",data:R.value,titles:["已选择客户","未选择客户"]},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),e(ve,{ref_key:"EditRef",ref:k,onQueryData:z},null,512)])}}}),Be=fe(Ne,[["__scopeId","data-v-e463fee8"]]);export{Be as default};
