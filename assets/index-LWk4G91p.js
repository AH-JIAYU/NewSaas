
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as ce,d as ie,am as de,aO as ue,r as f,a5 as R,l as pe,b,q as me,o as t,e as _,g as u,w as o,j as n,h as s,I as v,s as ye,f as l,aN as fe,t as i,H as m,k as a,S as be,aQ as _e,aR as he,bc as ke,ap as ge,aI as ve,aJ as Ie,R as Se}from"./index--j4xLQ48.js";import{_ as xe}from"./index-yYgNwY06.js";import{_ as Ce}from"./index.vue_vue_type_style_index_0_lang-CHqhl2X3.js";import{_ as Le}from"./index-DlMaRMs7.js";import{u as we}from"./user_customer-BHl_JWbd.js";import"./index-JvmblMAn.js";import"./index.vue_vue_type_script_setup_true_lang-CqhhImEh.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-C8ovrARd.js";const Ne={list:k=>ce.post("callback/getMemberChildSurveyRecord",k)},De=k=>(ve("data-v-45b5bf8a"),k=k(),Ie(),k),Be={class:"copyId tableSmall"},Te={class:"id oneLine"},je={class:"copyId tableSmall"},Ee={class:"id oneLine"},Pe={class:"tableBig oneLine"},ze={class:"copyId tableSmall"},Re={class:"id oneLine"},Fe={class:"copyId tableSmall"},Me={key:0,class:"id oneLine"},Ve={key:1,class:"id"},He={class:"copyId tableSmall"},Ue={key:0,class:"id oneLine"},Ae={key:1,class:"id"},$e={class:"copyId tableSmall"},qe={key:0,class:"id oneLine"},Oe={key:1,class:"id"},Qe={class:"tableBig"},Ge={class:"copyId tableSmall"},Je={class:"id oneLine"},Ze={class:"tableBig"},Ke={class:"tableBig"},We={class:"flex-c"},Xe={style:{"margin-right":"4px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},Ye=De(()=>i("g",{id:"Time (æ¶é´)"},[i("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),i("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),et=[Ye],tt={key:0},ot=ie({name:"memberSurveyRecords",__name:"index",setup(k){const F=de(),M=we(),{getParams:V,pagination:g,onSizeChange:H,onCurrentChange:U}=ue(),S=f(!1),T=f([]),A=f(""),d=f([]),x=f(!0),C=f(!1),L=f("default"),w=f(!1),$=f(),j=f(),q=f("formSearch-memberSurveyRecords"),N=f([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortable:!0,checked:!0},{prop:"supplierPrice",label:"供应商价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),D=R({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),B=R({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function O(){D.pageNo=1,I()}function Q(p){H(p).then(()=>I())}function E(p=1){U(p).then(()=>I())}async function I(){try{S.value=!0;const p={...V(),...D},{data:c}=await Ne.list(p);T.value=c.memberChildSurveyRecordInfoList,$.value=c.currencyType,g.value.total=c.total,S.value=!1}catch{}finally{S.value=!1}}function G(p){A.value=p}function J(){Object.assign(D,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),I()}return pe(async()=>{B.customerList=await M.getCustomerList(),B.country=await F.getCountry(),N.value.forEach(p=>{p.checked&&d.value.push(p.prop)}),I(),j.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:[{label:"内部会员",value:1},{label:"外部会员",value:2}],optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:5,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID"},{index:6,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份"},{index:7,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:8,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:9,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:B.surveyStatusList.map((p,c)=>({label:p,value:c+1})),optionLabel:"label",optionValue:"value"},{index:10,show:!0,type:"select",modelName:"viceStatus",placeholder:"副状态",option:B.viceStatusList.map((p,c)=>({label:p,value:c+1})),optionLabel:"label",optionValue:"value"}]}),(p,c)=>{const Z=Le,K=b("ElDivider"),W=Ce,X=b("el-button"),Y=_e,ee=he,te=b("el-row"),y=b("el-table-column"),h=xe,r=b("el-tag"),P=ke,z=b("ElTableColumn"),oe=b("el-text"),le=b("el-empty"),ae=b("el-table"),ne=b("ElPagination"),se=ge,re=me("loading");return t(),_("div",{class:be({"absolute-container":n(w)})},[u(se,null,{default:o(()=>[u(Z,{formSearchList:n(j),formSearchName:n(q),onCurrentChange:E,onOnReset:J,model:n(D)},null,8,["formSearchList","formSearchName","model"]),u(K,{"border-style":"dashed"}),u(te,null,{default:o(()=>[u(W),u(ee,null,{default:o(()=>[u(X,{size:"default"},{default:o(()=>[s(" 导出 ")]),_:1}),u(Y,{border:n(x),"onUpdate:border":c[0]||(c[0]=e=>v(x)?x.value=e:null),tableAutoHeight:n(w),"onUpdate:tableAutoHeight":c[1]||(c[1]=e=>v(w)?w.value=e:null),checkList:n(d),"onUpdate:checkList":c[2]||(c[2]=e=>v(d)?d.value=e:null),columns:n(N),"onUpdate:columns":c[3]||(c[3]=e=>v(N)?N.value=e:null),"line-height":n(L),"onUpdate:lineHeight":c[4]||(c[4]=e=>v(L)?L.value=e:null),stripe:n(C),"onUpdate:stripe":c[5]||(c[5]=e=>v(C)?C.value=e:null),style:{"margin-left":"12px"},onQueryData:O},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ye((t(),l(ae,{border:n(x),data:n(T),size:n(L),stripe:n(C),onSelectionChange:G},{empty:o(()=>[u(le,{image:n(fe),"image-size":300},null,8,["image"])]),default:o(()=>[u(y,{align:"left",type:"selection"}),n(d).includes("id")?(t(),l(y,{key:0,align:"left",prop:"id",width:"180","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:o(({row:e})=>[i("div",Be,[i("div",Te,"ID: "+m(e.id),1),u(h,{class:"copy",content:e.id},null,8,["content"])])]),_:1})):a("",!0),n(d).includes("surveySource")?(t(),l(y,{key:1,align:"left",prop:"memberId",width:"180","show-overflow-tooltip":"",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(t(),l(r,{key:0,effect:"dark",type:"primary"},{default:o(()=>[s("内部会员")]),_:1})):(t(),l(r,{key:1,effect:"dark",type:"warning"},{default:o(()=>[s("外部会员")]),_:1})),i("div",je,[i("div",Ee,"ID: "+m(e.memberId),1),e.memberId?(t(),l(h,{key:0,class:"copy",content:e.memberId},null,8,["content"])):a("",!0)])]),_:1})):a("",!0),n(d).includes("projectId")?(t(),l(y,{key:2,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目"},{default:o(({row:e})=>[i("div",Pe,"名称: "+m(e.projectName),1),i("div",ze,[i("div",Re,"ID: "+m(e.projectId),1),e.projectId?(t(),l(h,{key:0,class:"copy",content:e.projectId},null,8,["content"])):a("",!0)])]),_:1})):a("",!0),n(d).includes("memberChildrenId")?(t(),l(y,{key:3,align:"left",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID",width:"180"},{default:o(({row:e})=>[i("div",Fe,[e.memberChildrenId?(t(),_("span",Me," ID: "+m(e.memberChildrenId),1)):(t(),_("span",Ve,"-")),e.memberChildrenId?(t(),l(h,{key:2,class:"copy",content:e.memberChildrenId},null,8,["content"])):a("",!0)])]),_:1})):a("",!0),n(d).includes("tenantSupplierId")?(t(),l(y,{key:4,align:"left",prop:"tenantSupplierId","show-overflow-tooltip":"",width:"180",label:"供应商ID"},{default:o(({row:e})=>[i("div",He,[e.tenantSupplierId?(t(),_("span",Ue," ID: "+m(e.tenantSupplierId),1)):(t(),_("span",Ae,"-")),e.tenantSupplierId?(t(),l(h,{key:2,class:"copy",content:e.tenantSupplierId},null,8,["content"])):a("",!0)])]),_:1})):a("",!0),n(d).includes("randomIdentityId")?(t(),l(y,{key:5,align:"left",prop:"randomIdentityId","show-overflow-tooltip":"",width:"180",label:"随机身份"},{default:o(({row:e})=>[i("div",$e,[e.randomIdentityId?(t(),_("span",qe," ID: "+m(e.randomIdentityId),1)):(t(),_("span",Oe,"-")),e.randomIdentityId?(t(),l(h,{key:2,class:"copy",content:e.randomIdentityId},null,8,["content"])):a("",!0)])]),_:1})):a("",!0),n(d).includes("customerShortName")?(t(),l(y,{key:6,align:"left",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"},{default:o(({row:e})=>[i("div",Qe,m(e.customerShortName),1)]),_:1})):a("",!0),n(d).includes("ipBelong")?(t(),l(y,{key:7,align:"left",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/国家"},{default:o(({row:e})=>[u(r,{type:"primary"},{default:o(()=>[s(m(e.ipBelong.split("/")[1]),1)]),_:2},1024),i("div",Ge,[i("div",Je,m(e.ipBelong.split("/")[0]),1),u(h,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):a("",!0),n(d).includes("allocationType")?(t(),l(y,{key:8,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:o(({row:e})=>[e.allocationType===1?(t(),l(r,{key:0,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:o(()=>[s("未分配")]),_:1})):a("",!0),e.allocationType===2?(t(),l(r,{key:1,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[s("供应商")]),_:1})):a("",!0),e.allocationType===3?(t(),l(r,{key:2,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[s("会员组")]),_:1})):a("",!0)]),_:1})):a("",!0),n(d).includes("doMoneyPrice")?(t(),l(y,{key:9,align:"left",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"价格"},{default:o(({row:e})=>[i("div",Ze,[s("原价: "),u(P),s(m(e.doMoneyPrice||0),1)]),i("div",Ke,[s("供应商价格: "),u(P),s(m(e.supplierPrice||0),1)])]),_:1})):a("",!0),n(d).includes("surveyTime")?(t(),l(y,{key:10,width:"120",align:"left",fixed:"right","show-overflow-tooltip":"",label:"调查时间"},{header:o(()=>[i("span",We,[(t(),_("svg",Xe,et)),s(" 调查时间 ")])]),default:o(({row:e})=>[u(r,{effect:"plain",type:"info"},{default:o(()=>[s(m(e.surveyTime?e.surveyTime+"min":0)+"/ "+m(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):a("",!0),n(d).includes("surveyStatus")?(t(),l(z,{key:11,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"调查状态"},{default:o(({row:e})=>[e.surveyStatus===3?(t(),l(r,{key:0,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[s("配额满")]),_:1})):a("",!0),e.surveyStatus===1?(t(),l(r,{key:1,effect:"dark",style:{"background-color":"#379AFF",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[s("完成")]),_:1})):a("",!0),e.surveyStatus===2?(t(),l(r,{key:2,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[s("被甄别")]),_:1})):a("",!0),e.surveyStatus===4?(t(),l(r,{key:3,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[s("安全终止")]),_:1})):a("",!0),e.surveyStatus===5?(t(),l(r,{key:4,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:o(()=>[s("未完成")]),_:1})):a("",!0)]),_:1})):a("",!0),n(d).includes("viceStatus")?(t(),l(z,{key:12,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:o(({row:e})=>[e.viceStatus?(t(),_("div",tt,[e.viceStatus===1?(t(),l(r,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:o(()=>[s("待审")]),_:1})):a("",!0),e.viceStatus===2?(t(),l(r,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:o(()=>[s("免审")]),_:1})):a("",!0),e.viceStatus===3?(t(),l(r,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:o(()=>[s("过IR")]),_:1})):a("",!0),e.viceStatus===4?(t(),l(r,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:o(()=>[s("时间过短")]),_:1})):a("",!0),e.viceStatus===5?(t(),l(r,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:o(()=>[s("超时完成")]),_:1})):a("",!0),e.viceStatus===6?(t(),l(r,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:o(()=>[s("超量完成")]),_:1})):a("",!0),e.viceStatus===7?(t(),l(r,{key:6,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:o(()=>[s("审核成功")]),_:1})):a("",!0),e.viceStatus===8?(t(),l(r,{key:7,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:o(()=>[s("审核失败")]),_:1})):a("",!0),e.viceStatus===9?(t(),l(r,{key:8,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:o(()=>[s("数据冻结")]),_:1})):a("",!0),e.viceStatus===10?(t(),l(r,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:o(()=>[s("时间段过载")]),_:1})):a("",!0),e.viceStatus===11?(t(),l(r,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:o(()=>[s("IP不一致")]),_:1})):a("",!0),e.viceStatus===12?(t(),l(r,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:o(()=>[s("ID重复参与")]),_:1})):a("",!0),e.viceStatus===13?(t(),l(r,{key:12,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:o(()=>[s("和解")]),_:1})):a("",!0)])):(t(),l(oe,{key:1},{default:o(()=>[s("-")]),_:1}))]),_:1})):a("",!0)]),_:1},8,["border","data","size","stripe"])),[[re,n(S)]]),u(ne,{"current-page":n(g).page,total:n(g).total,"page-size":n(g).size,"page-sizes":n(g).sizes,layout:n(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),pt=Se(ot,[["__scopeId","data-v-45b5bf8a"]]);export{pt as default};
