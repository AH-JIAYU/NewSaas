
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{c as I}from"./user_cooperation-FPDOHqoW.js";import{d as D,r as u,c as R,a as l,o as i,b as m,f as n,w as o,g,i as s,F as q,q as j,e as y,p as h,D as f,j as z,G as A,E as G,P as M}from"./index-DcqAaBhZ.js";const O={style:{float:"left"}},P={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},S={key:0},H={key:1},J=D({__name:"index",emits:["fetch-data"],setup(K,{expose:k,emit:x}){const V=x,d=u(!1);u("");const p=u(),t=u({form:{},tenantUserList:[],rules:{beInvitationTenantId:[{required:!0,message:"请选择租户",trigger:"blur"}]}});async function L(){await U(),d.value=!0}async function U(){const a=await I.getTenantUserList({});t.value.tenantUserList=a.data.tenantUserInfoList}const _=R(()=>{const a=t.value.tenantUserList.find(r=>r.tenantId===t.value.form.beInvitationTenantId);return a?(t.value.form.tenantName=a.name,t.value.form.phoneOrEmail=a.phone?a.phone:a.email,[a]):[]});function v(){d.value=!1,t.value.form={},p.value.resetFields()}async function E(){p.value.validate(a=>{a&&I.addInvitationBind(t.value.form).then(()=>{G.success({message:"发送成功",center:!0}),V("fetch-data"),v()})})}return k({showEdit:L}),(a,r)=>{const T=l("el-option"),w=l("el-select"),C=l("el-form-item"),N=l("ElForm"),c=l("el-table-column"),B=l("el-table"),b=l("el-button"),F=l("el-dialog");return i(),m("div",null,[n(F,{modelValue:s(d),"onUpdate:modelValue":r[1]||(r[1]=e=>A(d)?d.value=e:null),"close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"50%",title:"邀约公司"},{footer:o(()=>[n(b,{onClick:v},{default:o(()=>[g(" 关闭 ")]),_:1}),n(b,{type:"primary",onClick:E},{default:o(()=>[g(" 发送邀约 ")]),_:1})]),default:o(()=>[n(N,{ref_key:"formRef",ref:p,rules:s(t).rules,model:s(t).form,"label-width":"100px"},{default:o(()=>[n(C,{label:"客户名称",prop:"beInvitationTenantId"},{default:o(()=>[n(w,{modelValue:s(t).form.beInvitationTenantId,"onUpdate:modelValue":r[0]||(r[0]=e=>s(t).form.beInvitationTenantId=e),clearable:""},{default:o(()=>[(i(!0),m(q,null,j(s(t).tenantUserList,e=>(i(),y(T,{key:e.tenantId,value:e.tenantId,label:e.name},{default:o(()=>[h("span",O,f(e.name),1),h("span",P,f(e.tenantId),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),s(_).length?(i(),y(B,{key:0,data:s(_),border:"",stripe:""},{default:o(()=>[n(c,{prop:"name",label:"用户名"}),n(c,{prop:"tenantName",label:"公司名称"}),n(c,{prop:"country",label:"国家"}),n(c,{label:"电子邮箱/手机号"},{default:o(({row:e})=>[e.phone?(i(),m("span",S,f(e.phone),1)):(i(),m("span",H,f(e.email),1))]),_:1})]),_:1},8,["data"])):z("",!0)]),_:1},8,["modelValue"])])}}}),X=M(J,[["__scopeId","data-v-0a20373f"]]);export{X as default};
