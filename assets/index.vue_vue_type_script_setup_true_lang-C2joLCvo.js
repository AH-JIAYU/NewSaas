
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as x}from"./index.vue_vue_type_script_setup_true_lang-DVqseDzG.js";import{k as d,d as L,r as f,a0 as N,a1 as p,a as _,o as E,b as V,f as l,w as n,g as v,i as z,O as A,ai as D}from"./index-1E3Ahbco.js";const U={list:t=>d.post("tenantCustomer/getTenantCustomerList",t),create:t=>d.post("tenantCustomer/addTenantCustomer",t),edit:t=>d.post("role/edit",t,{baseURL:"/mock/"}),delete:t=>d.post("role/delete",{id:t},{baseURL:"/mock/"})},R=L({__name:"index",emits:["fetch-data"],setup(t,{expose:b,emit:C}){const h=C,r=f(!1),i=f(""),c=f([]);function g(e){c.value.push(e)}N("validateTopTabs",g);let s=p([]);async function y(e){e?(i.value="编辑",k(e)):(i.value="添加",s=p([{customerAccord:"客户名称",customerShortName:"",companyName:"",customerName:"",customerPhone:"",emailAddress:"",chargeName:"李林桂",settlementCycle:7,customerStatus:null,antecedentQuestionnaire:null,riskControl:null,turnover:null,rateAudit:null}])),r.value=!0}function k(e){s.length=0,s.push({...e}),e.children&&e.children.length&&e.children.forEach(a=>{s.push({...a})})}function m(){s=p([]),h("fetch-data"),r.value=!1,c.value=[]}async function w(){const e=[];c.value.forEach(a=>{e.push(a.validate())});try{if((await Promise.all(e)).every(o=>o)){if(i.value==="添加"){const o={tenantCustomerInfoList:s},u=await U.create(o);console.log("res",u),D.success({message:u.data.flag?"新增成功":"新增失败",center:!0})}h("fetch-data"),m()}}catch(a){console.error("Form validation failed:",a)}}return b({showEdit:y}),(e,a)=>{const o=_("el-button"),u=_("el-drawer");return E(),V("div",null,[l(u,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=T=>r.value=T),class:A(i.value==="添加"?"hide-drawer-header":"edit-drawer"),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"70%",onClose:m},{footer:n(()=>[l(o,{onClick:m},{default:n(()=>[v(" 取消 ")]),_:1}),l(o,{type:"warning",onClick:a[0]||(a[0]=()=>{})},{default:n(()=>[v(" 暂存 ")]),_:1}),l(o,{type:"primary",onClick:w},{default:n(()=>[v(" 确定 ")]),_:1})]),default:n(()=>[l(x,{"left-tabs-data":z(s),"validate-top-tabs":c.value},null,8,["left-tabs-data","validate-top-tabs"])]),_:1},8,["modelValue","class"])])}}});export{R as _,U as a};
