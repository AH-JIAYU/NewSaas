
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Se,aI as Ce,r as f,a2 as we,D as Ve,a as s,al as Ie,o as u,b as Ee,f as e,w as o,i as t,am as C,g,G as M,l as y,e as d,j as _,P as Ue,ak as q,L as Be,aK as ze,aL as Pe,p as De,aG as Le,aH as Ae,F as xe,aB as P,_ as Te}from"./index-ZEGlhzrx.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-Dq0RUxsf.js";import{_ as Re}from"./index.vue_vue_type_script_setup_true_lang-JwtTj-h8.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-CIQ_jGaf.js";import Fe from"./index-DMRF-8iW.js";import{_ as He}from"./index.vue_vue_type_script_setup_true_lang-BqbSFOMf.js";import{s as Ne}from"./apiLoading-DQSphbSA.js";import{a as D}from"./user_supplier-DHY4PB73.js";import{u as Ye}from"./user_supplier-C-cOdPsU.js";import"./index.vue_vue_type_script_setup_true_lang-Dr9hHEbf.js";import"./index.vue_vue_type_script_setup_true_lang-xiSPy_BA.js";import"./user_customer-Bm7jtKIP.js";import"./user_customer-Bcg3_yhv.js";import"./otherFunctions_basicDictionary-7mJao2HJ.js";import"./basicDictionary-DlF-qxJt.js";import"./stagedData-CLIQFxGn.js";import"./index.vue_vue_type_script_setup_true_lang-DZfLt2_P.js";const je=w=>(Le("data-v-f24d1069"),w=w(),Ae(),w),qe=je(()=>xe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ge=Se({name:"UserSupplierIndex",__name:"index",setup(w){const G=Ye(),{pagination:v,getParams:K,onSizeChange:O,onCurrentChange:Q}=Ce(),L=f(!1),R=f([]),J=f(),A=f(),$=f(),F=f(),V=f(!0),I=f(!1),E=f("default"),r=f([]),U=f(!1),B=f([{label:"供应商id",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称+所属国",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"余额-美元",checked:!0,sortable:!0,prop:"balanceUs"},{label:"余额-人民币",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级id",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"B2B|B2C"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),i=we({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function W(){A.value.showEdit()}function X(n){A.value.showEdit(n)}function Z(n){$.value.showEdit(n)}async function ee(n){const{data:l}=await D.detail({tenantSupplierId:n.tenantSupplierId});if(l.remark!==n.remark){l.countryType=l.subordinateCountryId==="343"?1:2,l.remark=n.remark;const{status:b}=await D.edit(l);b===1&&q.success({message:"更新备注",center:!0}),z()}}async function H(n,l){const b={status:n,tenantSupplierId:l},{status:h}=await Ne(D.changestatus(b));h===1&&q.success({message:"修改成功"}),z(),G.TenantSupplierList=null}function z(){v.value.page=1,k()}function te(){Object.assign(i,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),k()}function le(n){F.value.showEdit(n)}function ae(n){O(n).then(()=>k())}function N(n=1){Q(n).then(()=>k())}async function k(){L.value=!0;const n={...K(),...i};i.time&&i.time.length&&(n.beginTime=i.time[0]||"",n.endTime=i.time[1]||"");const{data:l}=await D.list(n);R.value=l.getTenantSupplierInfoList,v.value.total=l.total,L.value=!1}function oe(n){J.value=n}return Ve(()=>{B.value.forEach(n=>{n.checked&&r.value.push(n.prop)}),z()}),(n,l)=>{const b=s("el-input"),h=s("el-form-item"),x=s("el-option"),ne=s("el-select"),ie=s("el-date-picker"),Y=Be,T=s("ElButton"),se=s("ElFormItem"),re=s("ElForm"),ue=Re,pe=s("ElDivider"),S=s("el-button"),ce=Me,de=ze,me=Pe,fe=s("el-row"),m=s("el-table-column"),j=s("ElSwitch"),_e=s("ElTableColumn"),be=s("ElSpace"),he=s("el-empty"),ge=s("el-table"),ve=s("ElPagination"),ke=De,ye=Ie("loading");return u(),Ee("div",{class:Ue({"absolute-container":t(U)})},[e(ke,null,{default:o(()=>[e(ue,{"show-toggle":!1},{default:o(({fold:a,toggle:p})=>[e(re,{model:t(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(h,{label:""},{default:o(()=>[e(b,{modelValue:t(i).tenantSupplierId,"onUpdate:modelValue":l[0]||(l[0]=c=>t(i).tenantSupplierId=c),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),e(h,{label:""},{default:o(()=>[e(b,{modelValue:t(i).supplierAccord,"onUpdate:modelValue":l[1]||(l[1]=c=>t(i).supplierAccord=c),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),e(h,{label:""},{default:o(()=>[e(b,{modelValue:t(i).supplierPhone,"onUpdate:modelValue":l[2]||(l[2]=c=>t(i).supplierPhone=c),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码"},null,8,["modelValue"])]),_:1}),C(e(h,{label:""},{default:o(()=>[e(b,{modelValue:t(i).accountName,"onUpdate:modelValue":l[3]||(l[3]=c=>t(i).accountName=c),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称"},null,8,["modelValue"])]),_:2},1536),[[P,!a]]),C(e(h,{label:""},{default:o(()=>[e(b,{modelValue:t(i).emailAddress,"onUpdate:modelValue":l[4]||(l[4]=c=>t(i).emailAddress=c),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱"},null,8,["modelValue"])]),_:2},1536),[[P,!a]]),C(e(h,{label:""},{default:o(()=>[e(ne,{modelValue:t(i).supplierStatus,"onUpdate:modelValue":l[5]||(l[5]=c=>t(i).supplierStatus=c),clearable:"",placeholder:"供应商状态"},{default:o(()=>[e(x,{label:"开启",value:2}),e(x,{label:"关闭",value:1}),e(x,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[P,!a]]),C(e(h,{label:""},{default:o(()=>[e(ie,{modelValue:t(i).time,"onUpdate:modelValue":l[6]||(l[6]=c=>t(i).time=c),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[P,!a]]),e(se,null,{default:o(()=>[e(T,{type:"primary",onClick:l[7]||(l[7]=c=>N())},{icon:o(()=>[e(Y,{name:"i-ep:search"})]),default:o(()=>[g(" 筛选 ")]),_:1}),e(T,{onClick:te},{icon:o(()=>[qe]),default:o(()=>[g(" 重置 ")]),_:1}),e(T,{link:"",onClick:p},{icon:o(()=>[e(Y,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[g(" "+M(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(pe,{"border-style":"dashed"}),e(fe,null,{default:o(()=>[e(ce,null,{default:o(()=>[e(S,{type:"primary",size:"default",onClick:W},{default:o(()=>[g(" 新增 ")]),_:1})]),_:1}),e(me,null,{default:o(()=>[e(S,{size:"default"},{default:o(()=>[g(" 导出 ")]),_:1}),e(de,{border:t(V),"onUpdate:border":l[8]||(l[8]=a=>y(V)?V.value=a:null),tableAutoHeight:t(U),"onUpdate:tableAutoHeight":l[9]||(l[9]=a=>y(U)?U.value=a:null),checkList:t(r),"onUpdate:checkList":l[10]||(l[10]=a=>y(r)?r.value=a:null),columns:t(B),"onUpdate:columns":l[11]||(l[11]=a=>y(B)?B.value=a:null),"line-height":t(E),"onUpdate:lineHeight":l[12]||(l[12]=a=>y(E)?E.value=a:null),stripe:t(I),"onUpdate:stripe":l[13]||(l[13]=a=>y(I)?I.value=a:null),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((u(),d(ge,{border:t(V),data:t(R),size:t(E),stripe:t(I),onSelectionChange:oe},{empty:o(()=>[e(he,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(m,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),t(r).includes("tenantSupplierId")?(u(),d(m,{key:0,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):_("",!0),t(r).includes("supplierAccord")?(u(),d(m,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称(所属国家)"})):_("",!0),t(r).includes("balanceUs")?(u(),d(m,{key:2,align:"center",prop:"balanceUs","show-overflow-tooltip":"",label:"余额($)"})):_("",!0),t(r).includes("balanceHumanLife")?(u(),d(m,{key:3,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"余额(￥)"})):_("",!0),t(r).includes("amountPendingTrial")?(u(),d(m,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"})):_("",!0),t(r).includes("supplierLevelId")?(u(),d(m,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"})):_("",!0),t(r).includes("B2B|B2C")?(u(),d(m,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:o(({row:a})=>[g(M(a.b2bStatus&&a.b2bStatus===2?"√":"×")+" | "+M(a.b2cStatus&&a.b2cStatus===2?"√":"×"),1)]),_:1})):_("",!0),t(r).includes("settlementCycle")?(u(),d(m,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"})):_("",!0),t(r).includes("supplierStatus")?(u(),d(_e,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:o(({row:a})=>[a.supplierStatus===3?(u(),d(j,{key:0,modelValue:a.supplierStatus,"onUpdate:modelValue":p=>a.supplierStatus=p,"inline-prompt":"","inactive-value":2,"active-value":3,"inactive-text":"启用","active-text":"待审核",onChange:p=>H(p,a.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(u(),d(j,{key:1,modelValue:a.supplierStatus,"onUpdate:modelValue":p=>a.supplierStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>H(p,a.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):_("",!0),t(r).includes("createTime")?(u(),d(m,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):_("",!0),t(r).includes("remark")?(u(),d(m,{key:10,align:"center",prop:"remark","show-overflow-tooltip":"",label:"备注"},{default:o(({row:a})=>[e(b,{modelValue:a.remark,"onUpdate:modelValue":p=>a.remark=p,onBlur:p=>ee(a)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):_("",!0),e(m,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"250"},{default:o(({row:a})=>[e(be,null,{default:o(()=>[e(S,{size:"small",plain:"",type:"primary",onClick:le},{default:o(()=>[g(" 加减款 ")]),_:1}),e(S,{size:"small",plain:"",type:"primary",onClick:p=>X(a)},{default:o(()=>[g(" 编辑 ")]),_:2},1032,["onClick"]),e(S,{size:"small",plain:"",type:"primary",onClick:p=>Z(a)},{default:o(()=>[g(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ye,t(L)]]),e(ve,{"current-page":t(v).page,total:t(v).total,"page-size":t(v).size,"page-sizes":t(v).sizes,layout:t(v).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ae,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e($e,{ref_key:"editRef",ref:A,onFetchData:k},null,512),e(Fe,{ref_key:"checkRef",ref:$,onFetchData:k},null,512),e(He,{ref_key:"plusMinusPaymentsRef",ref:F,onFetchData:k},null,512)],2)}}}),pt=Te(Ge,[["__scopeId","data-v-f24d1069"]]);export{pt as default};
