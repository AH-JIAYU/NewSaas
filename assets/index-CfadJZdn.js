
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ad as D,d as ie,aN as ue,ae as pe,r as p,E as t,M as de,o as be,a2 as f,al as me,a as d,i as ke,f as i,w as n,h as e,g as u,t as r,k as v,a3 as he,c as m,aM as fe,j as h,b as x,A as ge,aO as _e,aP as ve,aQ as ye,ao as Ie,aH as Se,aI as Ce,y as Ne}from"./index-BN31BxGx.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-CLYoWiq7.js";import{_ as Ue}from"./index-CeIsITK3.js";import"./index.vue_vue_type_script_setup_true_lang-CzTjKWuq.js";import"./sortable.esm-C0-Qcoum.js";const Q={list:b=>D.post("callback/getCustomerCallbackRecordList",b),getCustomerList:b=>D.post("tenantCustomer/getTenantCustomerAccordList",b),getCustomerCooperation:b=>D.post("tenantSupplier/getCustomerCooperation",b)},T=b=>(Se("data-v-99aee8d8"),b=b(),Ce(),b),we=T(()=>x("br",null,null,-1)),Le=T(()=>x("br",null,null,-1)),xe=T(()=>x("br",null,null,-1)),De=ie({name:"callback",__name:"index",setup(b){const{pagination:g,getParams:R,onSizeChange:A,onCurrentChange:O}=ue(),{t:l}=pe(),{format:B}=_e(),I=p(!1),z=p([]),F=p(""),s=p([]),S=p(!1),C=p(!1),N=p("default"),j=p(!1),V=p(),M=p("formSearch-callback"),U=p([{prop:"projectQuestionnaireClickId",label:t(()=>l("callback.clickID")),sortable:!0,checked:!0},{label:t(()=>l("callback.vipType")),prop:"surveySource",sortable:!0,checked:!0},{label:t(()=>l("callback.clientID")),prop:"clientId",sortable:!0,checked:!0},{prop:"customerShortName",label:t(()=>l("callback.customerAbbreviation")),sortable:!0,checked:!0},{prop:"memberChildId",label:t(()=>l("callback.vipSubVipId")),sortable:!0,checked:!0},{prop:"projectId",label:t(()=>l("callback.projectID")),sortable:!0,checked:!0},{prop:"projectName",label:t(()=>l("callback.projectName")),sortable:!0,checked:!0},{prop:"callbackUrl",label:t(()=>l("callback.callbackUrl")),sortable:!0,checked:!0},{prop:"subordinateUrl",label:t(()=>l("callback.subordinateUrl")),sortable:!0,checked:!0},{prop:"sourceUrl",label:t(()=>l("callback.source")),sortable:!0,checked:!0},{prop:"callbackTime",label:t(()=>l("callback.callbackTime")),sortable:!0,checked:!0},{prop:"callbackStatus",label:t(()=>l("callback.callbackStatus")),sortable:!0,checked:!0}]),P=[{label:t(()=>l("callback.internalVip")),value:1},{label:t(()=>l("callback.externalVip")),value:2}],w=[{label:l("callback.all"),value:0,type:"info"},{label:l("callback.success"),value:1,type:"success"},{label:l("callback.idWrong"),value:2,type:"warning"},{label:l("callback.hashWrong"),value:3,type:"danger"}],_=de({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",clientId:"",callbackStatus:0});function $(o){A(o).then(()=>y())}function E(o=1){O(o).then(()=>y())}function q(){g.value.page=1,y()}const L=[],W=async()=>{L.length=0;const o=await Q.getCustomerCooperation({});o.data&&o.data.getCooperationInfoLists&&o.data.getCooperationInfoLists.forEach(c=>{L.push({label:c.tenantName,value:c.tenantId})}),o.data&&o.data.getCustomerInfoLists&&o.data.getCustomerInfoLists.forEach(c=>{L.push({label:c.customerName,value:c.customerId})})};async function y(){try{I.value=!0;const o={...R(),..._};_.time&&_.time.length&&(o.beginTime=_.time[0]||"",o.endTime=_.time[1]||""),delete o.time;const c=await Q.list(o);z.value=c.data.customerCallbackRecordInfoList,g.value.total=c.data.total,I.value=!1}catch{}finally{I.value=!1}}function G(){Object.assign(_,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0,clientId:""}),y()}function J(o){F.value=o}be(async()=>{U.value.forEach(o=>{o.checked&&s.value.push(o.prop)}),W(),y(),V.value=[{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:t(()=>l("callback.clickID"))},{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:t(()=>l("callback.supplierID"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:t(()=>l("callback.projectID"))},{index:3,show:!0,type:"select",modelName:"clientId",placeholder:t(()=>l("callback.clientID")),option:"clientIdOptions",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:t(()=>l("callback.vipType")),option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:t(()=>l("callback.projectName"))},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:t(()=>l("callback.vipSubVipId"))},{index:7,show:!0,type:"select",modelName:"callbackStatus",placeholder:t(()=>l("callback.callbackStatus")),option:"callbackStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:t(()=>l("callback.startDate")),endPlaceHolder:t(()=>l("callback.endDate"))}]});const K={surveySource:()=>P,callbackStatus:()=>w,clientIdOptions:()=>L};return(o,c)=>{const X=Ue,Y=f("ElDivider"),Z=je,ee=f("el-button"),le=ve,ae=ye,te=f("el-row"),k=f("el-table-column"),H=f("el-tag"),oe=f("el-empty"),ce=f("el-table"),ne=f("ElPagination"),re=Ie,se=me("loading");return d(),ke("div",{class:ge({"absolute-container":e(j)})},[i(re,null,{default:n(()=>[i(X,{formSearchList:e(V),formSearchName:e(M),onCurrentChange:E,onOnReset:G,model:e(_),formOption:K},null,8,["formSearchList","formSearchName","model"]),i(Y,{"border-style":"dashed"}),i(te,null,{default:n(()=>[i(Z),i(ae,null,{default:n(()=>[i(ee,{size:"default"},{default:n(()=>[u(r(e(l)("callback.export")),1)]),_:1}),i(le,{border:e(S),"onUpdate:border":c[0]||(c[0]=a=>v(S)?S.value=a:null),tableAutoHeight:e(j),"onUpdate:tableAutoHeight":c[1]||(c[1]=a=>v(j)?j.value=a:null),checkList:e(s),"onUpdate:checkList":c[2]||(c[2]=a=>v(s)?s.value=a:null),columns:e(U),"onUpdate:columns":c[3]||(c[3]=a=>v(U)?U.value=a:null),"line-height":e(N),"onUpdate:lineHeight":c[4]||(c[4]=a=>v(N)?N.value=a:null),stripe:e(C),"onUpdate:stripe":c[5]||(c[5]=a=>v(C)?C.value=a:null),style:{"margin-left":"12px"},onQueryData:q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),he((d(),m(ce,{border:e(S),data:e(z),size:e(N),stripe:e(C),onSelectionChange:J},{empty:n(()=>[i(oe,{image:e(fe),"image-size":300},null,8,["image"])]),default:n(()=>[e(s).includes("projectQuestionnaireClickId")?(d(),m(k,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:e(l)("callback.clickID")},{default:n(({row:a})=>[u(r(a.projectQuestionnaireClickId?a.projectQuestionnaireClickId:"-"),1)]),_:1},8,["label"])):h("",!0),i(k,{label:e(l)("callback.project"),width:"300",align:"center"},{default:n(({row:a})=>[u(r(a.customerShortName)+" ",1),we,u(" "+r(a.projectName)+" ",1),Le,u(" "+r(a.projectId),1)]),_:1},8,["label"]),e(s).includes("memberChildId")?(d(),m(k,{key:1,align:"center","show-overflow-tooltip":"",label:e(l)("callback.vipSubVipId")},{default:n(({row:a})=>[x("p",null,r(P[a.surveySource-1].label),1),u(" "+r(a.memberChildId)+" ",1),xe,u(" "+r(a.randomIdentityId),1)]),_:1},8,["label"])):h("",!0),e(s).includes("clientId")?(d(),m(k,{key:2,align:"center","show-overflow-tooltip":"",label:e(l)("callback.clientID")},{default:n(({row:a})=>[u(r(a.clientId),1)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackUrl")?(d(),m(k,{key:3,align:"left",prop:"callbackUrl",label:e(l)("callback.callbackUrl")},null,8,["label"])):h("",!0),e(s).includes("subordinateUrl")?(d(),m(k,{key:4,align:"left",prop:"subordinateUrl",label:e(l)("callback.subordinateUrl")},{default:n(({row:a})=>[u(r(a.subordinateUrl?a.subordinateUrl:"-"),1)]),_:1},8,["label"])):h("",!0),e(s).includes("sourceUrl")?(d(),m(k,{key:5,align:"left",prop:"sourceUrl",label:e(l)("callback.source")},{default:n(({row:a})=>[u(r(a.sourceUrl?a.sourceUrl:"-"),1)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackTime")?(d(),m(k,{key:6,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:e(l)("callback.callbackTime")},{default:n(({row:a})=>[i(H,{effect:"plain",type:"info"},{default:n(()=>[u(r(e(B)(a.callbackTime)),1)]),_:2},1024)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackStatus")?(d(),m(k,{key:7,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:e(l)("callback.callbackStatus")},{default:n(({row:a})=>[a.callbackStatus&&w[a.callbackStatus]?(d(),m(H,{key:0,type:w[a.callbackStatus].type},{default:n(()=>[u(r(w[a.callbackStatus].label),1)]),_:2},1032,["type"])):h("",!0)]),_:1},8,["label"])):h("",!0)]),_:1},8,["border","data","size","stripe"])),[[se,e(I)]]),i(ne,{"current-page":e(g).page,total:e(g).total,"page-size":e(g).size,"page-sizes":e(g).sizes,layout:e(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:$,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=Ne(De,[["__scopeId","data-v-99aee8d8"]]);export{He as default};
