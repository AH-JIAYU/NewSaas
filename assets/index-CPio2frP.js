
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as k}from"./project_settlement-DywhnUTk.js";import{d as C,ae as B,r as s,a3 as r,al as E,a4 as N,b as R,j as T,g as l,w as a,f as U,h as _,t as v,i as d,ai as $,z as q}from"./index-D3JQ81m5.js";const z={style:{flex:"auto"}},A=C({name:"AddSettlement",__name:"index",emits:["success"],setup(F,{expose:g,emit:b}){const{t:e}=B(),S=b,i=s(),u=s(!1),o=s(!1),n=s({projectId:null}),I=s({projectId:[{required:!0,trigger:"blur",message:e("addSettlement.enterID")},{pattern:/^\d+$/,message:e("addSettlement.num"),trigger:"blur"}]});function j(){i.value&&i.value.validate(async f=>{if(f)try{u.value=!0,await k.omissionProject(n.value),S("success"),u.value=!1,$.success({message:"t('addSettlement.complete')",center:!0}),m()}catch{}finally{u.value=!1}})}async function V(){o.value=!0}function m(){i.value.resetFields(),Object.assign(n,{projectId:null}),o.value=!1}return g({showEdit:V}),(f,t)=>{const y=r("el-input"),x=r("el-form-item"),w=r("el-form"),p=r("el-button"),D=r("el-dialog"),h=E("loading");return N((R(),T("div",null,[l(D,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=c=>o.value=c),title:d(e)("addSettlement.add"),width:"700","before-close":m},{footer:a(()=>[U("div",z,[l(p,{onClick:t[1]||(t[1]=c=>o.value=!1)},{default:a(()=>[_(v(d(e)("addSettlement.cancel")),1)]),_:1}),l(p,{type:"primary",onClick:j},{default:a(()=>[_(v(d(e)("addSettlement.confirm")),1)]),_:1})])]),default:a(()=>[l(w,{ref_key:"formRef",ref:i,"label-width":"6.375rem",model:n.value,rules:I.value,inline:!1},{default:a(()=>[l(x,{label:d(e)("addSettlement.projectID"),prop:"projectId"},{default:a(()=>[l(y,{modelValue:n.value.projectId,"onUpdate:modelValue":t[0]||(t[0]=c=>n.value.projectId=c),placeholder:d(e)("addSettlement.enterID")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[h,u.value]])}}}),O=q(A,[["__scopeId","data-v-d2684ff1"]]);export{O as default};
