
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as $e,am as De,aK as Te,r as m,a5 as Ae,c as Fe,k as Oe,a as p,p as He,o as a,b as k,f as l,w as e,i as o,az as K,q as S,F as G,t as le,e as c,g as s,H as _,I as x,j as f,s as b,S as Ke,bb as Ge,E as oe,N as Ye,aM as qe,aN as Qe,ba as Ze,ap as Je,aG as We,aH as Xe,aq as $,R as et}from"./index-BMiaO8YQ.js";import{_ as tt}from"./index.vue_vue_type_style_index_0_lang-DmHO05zK.js";import{_ as lt}from"./index.vue_vue_type_script_setup_true_lang-BMAvMc8j.js";import{_ as ot}from"./index.vue_vue_type_script_setup_true_lang-x9MQ_6ZG.js";import nt from"./index-D9BPmgZu.js";import at from"./index-CD3UTsqp.js";import rt from"./index-DBTknq4U.js";import{a as it}from"./survey_myProjeck-CjmVtvT_.js";import{u as st}from"./user_customer-DSZrAXOS.js";import{u as ct}from"./index-AK10HrFG.js";import{e as ut}from"./empty-bAzhJQI7.js";import"./index-C0YVHZSw.js";import"./file-DfPte3fV.js";import"./download-C8PHVIy1.js";import"./apiLoading-DHk9ZlU1.js";import"./clipboard-BPA_boIV.js";import"./projectManagement-D9_b8okT.js";import"./survey_vipGroup-tN8cSGRb.js";import"./survey_vipGroup-3u3FXPfi.js";import"./user_customer-LPVkJ-4i.js";const ne=L=>(We("data-v-a830de12"),L=L(),Xe(),L),pt=ne(()=>b("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),dt={key:0,class:"crudeTop"},mt={class:"hoverSvg"},ft={key:0,class:"fineSize"},_t={class:"c-fx"},yt={key:0,class:"crudeTop"},bt={key:1,style:{"text-align":"left","font-weight":"700",color:"#777"}},gt={class:"fineBom"},ht={class:"parameter"},kt={class:"parameter"},vt=ne(()=>b("span",{class:"headerIcon"},[b("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[b("g",{id:"Time (æ¶é´)"},[b("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),b("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),s(" 创建时间 ")],-1)),Ct=$e({name:"myProjeck",__name:"list",setup(L){const{format:ae}=Ge(),{toClipboard:Y}=ct(),q=De(),re=st(),{pagination:I,getParams:ie,onSizeChange:se,onCurrentChange:ce,onSortChange:It}=Te(),D=m([]),Q=m([]),Z=m(),ue=m(""),J=m(),V=m(!0),pe=m(),W=m(),E=m(!0),d=m([]),B=m(!1),U=m("default"),z=m(!1),M=m([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),u=Ae({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),X=m([]),ee=m();function de(i){J.value.showEdit(i)}function me(i){W.value.showEdit(i)}function fe(i){ee.value.showEdit(i)}function _e(i){se(i).then(()=>w())}function h(i=1){ce(i).then(()=>w())}function ye(){Object.assign(u,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),w()}async function w(){try{V.value=!0;const i={...ie(),...u};u.time&&u.time.length&&(i.beginTime=u.time[0]||"",i.endTime=u.time[1]||"");const n=await it.list(i);Z.value=n.data.currencyType,X.value=n.data.getMemberProjectListInfoList,I.value.total=n.data.total,V.value=!1}catch{}finally{V.value=!1}}const be=i=>{Y(i),oe({type:"success",message:"复制成功"})},ge=m();function he(i){ge.value=i.projectId}const ke=i=>{Y(i),oe({type:"success",message:"复制成功"})},P=Fe(()=>i=>D.value.filter(v=>i.includes(v.id)).map(v=>v.chineseName));return Oe(async()=>{M.value.forEach(i=>{i.checked&&d.value.push(i.prop)}),D.value=await q.getCountry(),Q.value=await re.getCustomerList(),w()}),(i,n)=>{const v=p("el-input"),C=p("el-form-item"),ve=p("ElOption"),T=p("el-select"),A=p("el-option"),Ce=p("el-date-picker"),F=Ye,O=p("ElButton"),Ie=p("ElFormItem"),we=p("el-form"),je=lt,Ne=p("ElDivider"),xe=tt,R=p("el-button"),Se=qe,Le=Qe,Ve=p("el-row"),y=p("el-table-column"),te=p("el-tooltip"),g=p("el-text"),Ee=Ze,H=p("el-link"),j=p("el-tag"),Be=p("ElSpace"),Ue=p("el-empty"),ze=p("el-table"),Me=p("ElPagination"),Pe=Je,Re=He("loading");return a(),k("div",{class:Ke({"absolute-container":o(B)})},[l(Pe,null,{default:e(()=>[l(je,{"show-toggle":!1},{default:e(({fold:t,toggle:N})=>[l(we,{model:o(u).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[l(C,{label:""},{default:e(()=>[l(v,{modelValue:o(u).projectId,"onUpdate:modelValue":n[0]||(n[0]=r=>o(u).projectId=r),clearable:"",placeholder:"项目ID",onKeydown:n[1]||(n[1]=K(r=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),l(C,{label:""},{default:e(()=>[l(v,{clearable:"",modelValue:o(u).projectName,"onUpdate:modelValue":n[2]||(n[2]=r=>o(u).projectName=r),placeholder:"项目名称",onKeydown:n[3]||(n[3]=K(r=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),l(C,{label:""},{default:e(()=>[l(v,{modelValue:o(u).projectIdentification,"onUpdate:modelValue":n[4]||(n[4]=r=>o(u).projectIdentification=r),clearable:"",placeholder:"项目标识",onKeydown:n[5]||(n[5]=K(r=>h(),["enter"]))},null,8,["modelValue"])]),_:1}),S(l(C,{label:""},{default:e(()=>[l(T,{placeholder:"国家地区",modelValue:o(u).countryId,"onUpdate:modelValue":n[6]||(n[6]=r=>o(u).countryId=r),clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:n[7]||(n[7]=r=>h())},{default:e(()=>[(a(!0),k(G,null,le(o(D),r=>(a(),c(ve,{label:r.chineseName,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[$,!t]]),S(l(C,{label:""},{default:e(()=>[l(T,{placeholder:"客户简称",clearable:"",filterable:"",modelValue:o(u).clientId,"onUpdate:modelValue":n[8]||(n[8]=r=>o(u).clientId=r),onChange:n[9]||(n[9]=r=>h())},{default:e(()=>[(a(!0),k(G,null,le(o(Q),r=>(a(),c(A,{key:r.tenantCustomerId,value:r.tenantCustomerId,label:r.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[$,!t]]),S(l(C,{label:""},{default:e(()=>[l(T,{placeholder:"B2B/B2C",clearable:"",filterable:"",modelValue:o(u).b2bOrB2cStatus,"onUpdate:modelValue":n[10]||(n[10]=r=>o(u).b2bOrB2cStatus=r),onChange:n[11]||(n[11]=r=>h())},{default:e(()=>[l(A,{label:"B2B",value:"1"}),l(A,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!t]]),S(l(C,null,{default:e(()=>[l(Ce,{modelValue:o(u).time,"onUpdate:modelValue":n[12]||(n[12]=r=>o(u).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"192px"},"clear-icon":"true",onChange:n[13]||(n[13]=r=>h())},null,8,["modelValue"])]),_:2},1536),[[$,!t]]),l(Ie,null,{default:e(()=>[l(O,{type:"primary",onClick:n[14]||(n[14]=r=>w())},{icon:e(()=>[l(F,{name:"i-ep:search"})]),default:e(()=>[s(" 筛选 ")]),_:1}),l(O,{onClick:ye},{icon:e(()=>[pt]),default:e(()=>[s(" 重置 ")]),_:1}),l(O,{link:"",onClick:N},{icon:e(()=>[l(F,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[s(" "+_(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(Ne,{"border-style":"dashed"}),l(Ve,{gutter:24},{default:e(()=>[l(xe),l(Le,null,{default:e(()=>[l(R,{size:"default",onClick:n[15]||(n[15]=()=>{})},{default:e(()=>[s(" 导出 ")]),_:1}),l(Se,{border:o(E),"onUpdate:border":n[16]||(n[16]=t=>x(E)?E.value=t:null),tableAutoHeight:o(B),"onUpdate:tableAutoHeight":n[17]||(n[17]=t=>x(B)?B.value=t:null),checkList:o(d),"onUpdate:checkList":n[18]||(n[18]=t=>x(d)?d.value=t:null),columns:o(M),"onUpdate:columns":n[19]||(n[19]=t=>x(M)?M.value=t:null),"line-height":o(U),"onUpdate:lineHeight":n[20]||(n[20]=t=>x(U)?U.value=t:null),stripe:o(z),"onUpdate:stripe":n[21]||(n[21]=t=>x(z)?z.value=t:null),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((a(),c(ze,{ref_key:"tableSortRef",ref:ue,style:{"margin-top":"10px"},"row-key":"id",data:o(X),border:o(E),size:o(U),stripe:o(z),onCurrentChange:he},{empty:e(()=>[l(Ue,{image:o(ut),"image-size":300},null,8,["image"])]),default:e(()=>[l(y,{align:"center",type:"selection"}),o(d).includes("project")?(a(),c(y,{key:0,"show-overflow-tooltip":"",align:"center",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:e(({row:t})=>[o(d).includes("projectName")?(a(),k("p",dt,"名称："+_(t.projectName),1)):f("",!0),b("div",mt,[o(d).includes("projectId")?(a(),k("p",ft,"ID："+_(t.projectId),1)):f("",!0),b("span",_t,[l(F,{onClick:N=>ke(t.projectId),class:"copySvg",name:"ri:file-copy-2-fill",color:"#4fa5ff"},null,8,["onClick"])])])]),_:1})):f("",!0),o(d).includes("projectIdentificationOrClientName")?(a(),c(y,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"center",label:"名称/标识"},{default:e(({row:t})=>[o(d).includes("projectIdentification")?(a(),k("p",yt," 名称："+_(t.projectIdentification),1)):f("",!0),o(d).includes("projectIdClientName")?(a(),k("p",bt,[s("标："),b("span",gt,_(t.clientName),1)])):f("",!0)]),_:1})):f("",!0),o(d).includes("withoutUrl")?(a(),c(y,{key:2,prop:"withoutUrl",align:"center",label:"URL"},{default:e(({row:t})=>[l(te,{class:"box-item",effect:"dark",content:t.withoutUrl,placement:"top"},{default:e(()=>[l(R,{link:"",type:"primary",onClick:N=>be(t.withoutUrl)},{default:e(()=>[s("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):f("",!0),o(d).includes("participation")?(a(),c(y,{key:3,"show-overflow-tooltip":"",width:"180",align:"center",label:"参数"},{default:e(({row:t})=>[b("p",ht,[l(g,{class:"mx-1 text",style:{color:"#FB6868"},type:"danger"},{default:e(()=>[s("参与："+_(t.participation||0),1)]),_:2},1024),l(g,{class:"mx-1 text",style:{color:"#03C239"},type:"success"},{default:e(()=>[s("完成："+_(t.complete||0),1)]),_:2},1024)]),b("p",kt,[l(g,{class:"mx-1 text",style:{color:"#FFAC54"},type:"warning"},{default:e(()=>[s("配额："+_(t.num||0),1)]),_:2},1024),l(g,{class:"mx-1 text",style:{color:"#AAAAAA"},type:"info"},{default:e(()=>[s("限量："+_(t.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):f("",!0),o(d).includes("doMoneyPrice")?(a(),c(y,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[o(Z)===3?(a(),c(g,{key:0,class:"mx-1"},{default:e(()=>[s("暂无数据")]),_:1})):(a(),c(g,{key:1,class:"mx-1"},{default:e(()=>[l(g,{style:{color:"#FD8989"}},{default:e(()=>[l(Ee)]),_:1}),l(g,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:e(()=>[s(_(t.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):f("",!0),o(d).includes("memberPrice")?(a(),c(y,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),c(H,{key:0,size:"small",plain:"",type:"primary",onClick:N=>me(t)},{default:e(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(a(),c(g,{key:1},{default:e(()=>[s(" - ")]),_:1}))]),_:1})):f("",!0),o(d).includes("countryNameList")?(a(),c(y,{key:6,"show-overflow-tooltip":"",align:"center",label:"国家"},{default:e(({row:t})=>[t.countryNameList?(a(),k(G,{key:0},[t.countryNameList.length===o(q).country.length?(a(),c(H,{key:0,type:"primary"},{default:e(()=>[l(j,{type:"primary"},{default:e(()=>[s("全球")]),_:1})]),_:1})):o(P)(t.countryNameList).length>4?(a(),c(te,{key:1,class:"box-item",effect:"dark",content:o(P)(t.countryNameList).join(","),placement:"top"},{default:e(()=>[l(H,{type:"primary"},{default:e(()=>[l(j,{type:"primary"},{default:e(()=>[s(_(o(P)(t.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(a(),c(j,{key:2,type:"primary"},{default:e(()=>[s(" x"+_(o(P)(t.countryNameList).length),1)]),_:2},1024))],64)):f("",!0)]),_:1})):f("",!0),o(d).includes("ir")?(a(),c(y,{key:7,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[l(g,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:e(()=>[s(_(t.ir?t.ir:"-")+" / "+_(t.nir?t.nir:"-"),1)]),_:2},1024)]),_:1})):f("",!0),o(d).includes("memberStatus")?(a(),c(y,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),c(j,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:e(()=>[s(" 会员组 ")]),_:1})):(a(),c(j,{key:1,effect:"plain",type:"info"},{default:e(()=>[s(" 未分配 ")]),_:1}))]),_:1})):f("",!0),o(d).includes("createTime")?(a(),c(y,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{header:e(()=>[vt]),default:e(({row:t})=>[l(j,{effect:"plain",type:"info"},{default:e(()=>[s(_(o(ae)(t.createTime)),1)]),_:2},1024)]),_:1})):f("",!0),l(y,{align:"center",fixed:"right",label:"操作",width:"200"},{default:e(({row:t})=>[l(Be,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?f("",!0):(a(),c(R,{key:0,type:"primary",plain:"",size:"small",onClick:N=>fe(t)},{default:e(()=>[s(" 分配 ")]),_:2},1032,["onClick"])),l(R,{size:"small",plain:"",type:"warning",onClick:N=>de(t)},{default:e(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Re,o(V)]]),l(Me,{"current-page":o(I).page,total:o(I).total,"page-size":o(I).size,"page-sizes":o(I).sizes,layout:o(I).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:_e,onCurrentChange:h},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(ot,{ref_key:"CheckEditRef",ref:pe},null,512),l(nt,{ref_key:"detailRef",ref:J},null,512),l(at,{ref_key:"checkMembershipPriceRef",ref:W},null,512),l(rt,{ref_key:"addAllocationEditRef",ref:ee,onFetchData:w},null,512)],2)}}}),Ht=et(Ct,[["__scopeId","data-v-a830de12"]]);export{Ht as default};
