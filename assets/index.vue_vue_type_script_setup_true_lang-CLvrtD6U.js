
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as I}from"./financial_pm_log-Ckb_GKt7.js";import{d as M,r as n,a as s,p as O,q as j,o as f,b as m,f as l,w as t,g as b,H,F as T,t as w,E as x}from"./index-DAXVbWbf.js";const G=M({__name:"index",emits:["fetch-data"],setup(J,{expose:C,emit:D}){const h=D,i=n(!1),u=n(!1),c=n(),_=n(""),p=n(),y=n(),E=[{label:"加款",value:1},{label:"减款",value:2}],L=[{label:"待审金额",value:2},{label:"可用余额",value:1}],o=n({id:null,operationType:null,balanceType:null,balance:null}),U=n({balance:[{required:!0,message:"请输入金额",trigger:"blur"}]});async function N(r){try{i.value=!0,u.value=!0,r?(_.value="编辑",p.value=JSON.parse(r),y.value=p.value.id,o.value.id=p.value.id):_.value="新增",u.value=!1}catch{}finally{u.value=!1}}function v(){Object.assign(o.value,{id:null,operationType:null,balanceType:null,balance:null}),i.value=!1}async function R(){c.value&&c.value.validate(async r=>{if(r)try{u.value=!0,(await I.updateDepartment(o.value)).status===1?(u.value=!1,h("fetch-data"),x.success({message:"操作成功",center:!0}),v()):x.warning({message:"出现错误请联系管理人员",center:!0})}catch{}finally{u.value=!1}})}return C({showEdit:N}),(r,a)=>{const d=s("el-form-item"),g=s("el-option"),V=s("el-select"),S=s("el-input"),q=s("el-form"),k=s("el-button"),B=s("el-dialog"),F=O("loading");return j((f(),m("div",null,[l(B,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value=e),title:"加减款","append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"35%",onClose:v},{footer:t(()=>[l(k,{onClick:v},{default:t(()=>[b(" 取消 ")]),_:1}),l(k,{type:"primary",onClick:R},{default:t(()=>[b(" 确定 ")]),_:1})]),default:t(()=>[l(q,{model:o.value,rules:U.value,ref_key:"formRef",ref:c,"label-width":"58px",inline:!1},{default:t(()=>[l(d,{label:"ID"},{default:t(()=>[b(H(y.value),1)]),_:1}),l(d,{label:"加减款"},{default:t(()=>[l(V,{modelValue:o.value.operationType,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.operationType=e),"value-key":"",placeholder:"请选择加减款",clearable:"",filterable:""},{default:t(()=>[(f(),m(T,null,w(E,e=>l(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"类型"},{default:t(()=>[l(V,{modelValue:o.value.balanceType,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.balanceType=e),"value-key":"",placeholder:"请选择类型",clearable:"",filterable:""},{default:t(()=>[(f(),m(T,null,w(L,e=>l(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"金额",prop:"balance"},{default:t(()=>[l(S,{modelValue:o.value.balance,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.balance=e),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])),[[F,u.value]])}}});export{G as _};
