
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ee,aO as te,r as i,a5 as ae,k as ne,a as _,p as oe,o as s,b as I,f as a,w as n,g as c,i as t,I as b,q as le,e as f,j as p,H as R,S as ie,aP as se,E as re,aQ as ce,aR as pe,ao as ue,R as de}from"./index-DXBclCKb.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-YHfiiowZ.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-D7dBPfeP.js";import _e from"./index-BUT00hK7.js";import{_ as be}from"./index.vue_vue_type_script_setup_true_lang-GjnVoybu.js";import{c as x}from"./user_cooperation-Cq79WamV.js";const ge={key:0},ve={key:1},he=ee({name:"cooperation",__name:"index",setup(ye){const{pagination:m,getParams:P,onSizeChange:D,onCurrentChange:$}=te(),g=i(!1),B=i([]),S=i(),T=i(),H=i(),v=i(!0),h=i(!1),y=i(!1),k=i("default"),r=i([]),w=i([{label:"租户id",checked:!0,sortable:!0,prop:"beInvitationTenantId"},{label:"租户名称",checked:!0,sortable:!0,prop:"beInvitationTenantName"},{label:"状态",checked:!0,sortable:!0,prop:"bindStatus"},{label:"价格比例",checked:!0,sortable:!0,prop:"priceRatio"},{label:"待审金额",checked:!0,sortable:!0,prop:"pendBalance"},{label:"可用金额",checked:!0,sortable:!0,prop:"availableBalance"}]);function L(){S.value.showEdit()}function N(l){se.prompt("是否确认进行解约?","终止合作",{confirmButtonText:"确认",cancelButtonText:"取消",inputPlaceholder:"说明",inputPattern:/^.{0,500}$/,inputErrorMessage:"不能超过500个字符",type:"warning"}).then(async o=>{const{data:{flag:u}}=await x.updateRescindTenant({beInvitationTenantId:l.beInvitationTenantId,remark:o.value});u&&re({type:"success",message:"已终止合作"}),z()}).catch(()=>{})}function A(l){T.value.showEdit(l)}const U=ae({});function F(l){D(l).then(()=>z())}function M(l=1){$(l).then(()=>z())}function C(){m.value.page=1,z()}async function z(){try{g.value=!0;const l={...P(),...U},{data:o}=await x.list(l);B.value=o.tenantBindInfoList,m.value.total=Number(o.total),g.value=!1}catch{}finally{g.value=!1}}function q(l){H.value=l}return ne(()=>{w.value.forEach(l=>{l.checked&&r.value.push(l.prop)}),C()}),(l,o)=>{const u=_("el-button"),V=me,Q=ce,j=pe,O=_("el-row"),d=_("el-table-column"),E=fe,G=_("ElSpace"),J=_("el-empty"),K=_("el-table"),W=_("ElPagination"),X=ue,Y=oe("loading");return s(),I("div",{class:ie({"absolute-container":t(y)})},[a(X,null,{default:n(()=>[a(O,null,{default:n(()=>[a(V,null,{default:n(()=>[a(u,{type:"primary",size:"default",onClick:L},{default:n(()=>[c(" 邀约公司 ")]),_:1})]),_:1}),a(j,null,{default:n(()=>[a(u,{size:"default"},{default:n(()=>[c(" 导出 ")]),_:1}),a(Q,{border:t(v),"onUpdate:border":o[0]||(o[0]=e=>b(v)?v.value=e:null),tableAutoHeight:t(y),"onUpdate:tableAutoHeight":o[1]||(o[1]=e=>b(y)?y.value=e:null),checkList:t(r),"onUpdate:checkList":o[2]||(o[2]=e=>b(r)?r.value=e:null),columns:t(w),"onUpdate:columns":o[3]||(o[3]=e=>b(w)?w.value=e:null),"line-height":t(k),"onUpdate:lineHeight":o[4]||(o[4]=e=>b(k)?k.value=e:null),stripe:t(h),"onUpdate:stripe":o[5]||(o[5]=e=>b(h)?h.value=e:null),style:{"margin-left":"12px"},onQueryData:C},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),le((s(),f(K,{border:t(v),data:t(B),size:t(k),stripe:t(h),onSelectionChange:q},{empty:n(()=>[a(J,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[a(d,{align:"center",type:"selection"}),t(r).includes("beInvitationTenantId")?(s(),f(d,{key:0,align:"center",prop:"beInvitationTenantId",width:"180","show-overflow-tooltip":"",label:"租户id"})):p("",!0),t(r).includes("beInvitationTenantName")?(s(),f(d,{key:1,align:"center",prop:"beInvitationTenantName","show-overflow-tooltip":"",label:"租户名称"})):p("",!0),t(r).includes("bindStatus")?(s(),f(d,{key:2,align:"center",prop:"bindStatus","show-overflow-tooltip":"",label:"状态"},{default:n(({row:e})=>[e.bindStatus===2?(s(),I("span",ge," 合作 ")):p("",!0),e.bindStatus===4?(s(),I("span",ve," 解约 ")):p("",!0)]),_:1})):p("",!0),t(r).includes("priceRatio")?(s(),f(d,{key:3,align:"center",prop:"priceRatio","show-overflow-tooltip":"",label:"价格比例"},{default:n(({row:e})=>[c(R(e.priceRatio)+" % ",1)]),_:1})):p("",!0),t(r).includes("pendBalance")?(s(),f(d,{key:4,align:"center",prop:"pendBalance","show-overflow-tooltip":"",label:"待审金额"},{default:n(({row:e})=>[a(E),c(R(e.pendBalance||0),1)]),_:1})):p("",!0),t(r).includes("availableBalance")?(s(),f(d,{key:5,align:"center",prop:"availableBalance","show-overflow-tooltip":"",label:"可用金额"},{default:n(({row:e})=>[a(E),c(R(e.availableBalance||0),1)]),_:1})):p("",!0),a(d,{align:"center",fixed:"right",prop:"i",label:"操作","show-overflow-tooltip":"",width:"350"},{default:n(({row:e})=>[a(G,null,{default:n(()=>[e.bindStatus===2?(s(),f(u,{key:0,type:"primary",plain:"",size:"small",onClick:Z=>N(e)},{default:n(()=>[c(" 终止合作 ")]),_:2},1032,["onClick"])):p("",!0),a(u,{size:"small",plain:"",type:"primary",onClick:Z=>A(e)},{default:n(()=>[c(" 价格比例 ")]),_:2},1032,["onClick"]),a(u,{type:"primary",plain:"",size:"small"},{default:n(()=>[c(" 财务日志 ")]),_:1}),a(u,{type:"primary",plain:"",size:"small"},{default:n(()=>[c(" 加减款 ")]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Y,t(g)]]),a(W,{"current-page":t(m).page,total:t(m).total,"page-size":t(m).size,"page-sizes":t(m).sizes,layout:t(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:F,onCurrentChange:M},null,8,["current-page","total","page-size","page-sizes","layout"]),a(_e,{ref_key:"editRef",ref:S,onFetchData:C},null,512),a(be,{ref_key:"proportionRef",ref:T,onFetchData:C},null,512)]),_:1})],2)}}}),Be=de(he,[["__scopeId","data-v-b9c80519"]]);export{Be as default};
