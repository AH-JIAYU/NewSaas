
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ne,aH as we,r as m,a4 as je,c as Le,G as Ve,a as s,al as Se,o as n,b as h,f as e,w as o,i as l,am as I,F as E,n as P,e as u,g as d,I as f,p as v,j as g,R as ze,N as Ee,aJ as Pe,aK as Be,s as Re,aF as Me,aG as Ue,l as De,aA as B,_ as $e}from"./index-Dd_XLnr_.js";import{_ as xe}from"./index.vue_vue_type_style_index_0_lang-CvCQimKY.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-Dc2r1arr.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-BJFsRjwJ.js";import{c as Fe,a as Ge}from"./index-DnGnRQhW.js";import Ae from"./index-BpD62hR4.js";import{u as He}from"./otherFunctions_basicDictionary-D1oATtS3.js";import{u as Qe}from"./user_customer-BtIG2D6R.js";import"./apiLoading-ayvD9sB-.js";import"./projectManagement-bnUCHTPs.js";import"./survey_vipGroup-CsR5yl2s.js";import"./survey_vipGroup-BUDvYCrW.js";import"./basicDictionary-D2OebO-u.js";import"./user_customer-JLeA3LoV.js";const qe=C=>(Me("data-v-7f622b72"),C=C(),Ue(),C),Je=qe(()=>De("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ke=Ne({name:"SurveyMyProjeckList",__name:"list",setup(C){const J=He(),K=Qe(),{pagination:y,getParams:We,onSizeChange:W,onCurrentChange:X,onSortChange:Xe}=we(),O=m([]),F=m([]),Y=m(""),R=m(!0),Z=m(),G=m(),N=m(!0),p=m([]),w=m(!1),j=m("default"),L=m(!1),V=m([{prop:"projectId",label:"项目Id",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"项目标识",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),r=je({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),A=m([]),H=m();function ee(c){console.log("详情")}function te(c){G.value.showEdit(c)}function le(c){console.log("测查")}function oe(c){console.log("分配"),H.value.showEdit(c)}function ae(c){W(c)}function M(c=1){X(c)}function ne(){Object.assign(r,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:0,time:[],beginTime:"",endTime:""}),U()}const re=Le(()=>A.value.slice((y.value.page-1)*y.value.size,y.value.page*y.value.size));async function U(){R.value=!0;const c={...r};r.time&&r.time.length&&(c.beginTime=r.time[0]||"",c.endTime=r.time[1]||"");const a=await Ge.list(c);A.value=a.data.getMemberProjectListInfoList,y.value.total=a.data.getMemberProjectListInfoList.length,R.value=!1}return Ve(async()=>{V.value.forEach(c=>{c.checked&&p.value.push(c.prop)}),O.value=await J.getCountry(),F.value=await K.getCustomerList(),U()}),(c,a)=>{const D=s("el-input"),k=s("el-form-item"),ie=s("ElOption"),$=s("el-select"),S=s("el-option"),se=s("el-date-picker"),Q=Ee,x=s("ElButton"),ce=s("ElFormItem"),ue=s("el-form"),pe=Te,me=s("ElDivider"),de=xe,z=s("el-button"),fe=Pe,_e=Be,be=s("el-row"),_=s("el-table-column"),T=s("el-link"),q=s("el-tooltip"),ge=s("el-tag"),ye=s("ElSpace"),ke=s("el-empty"),he=s("el-table"),ve=s("ElPagination"),Ie=Re,Ce=Se("loading");return n(),h("div",{class:ze({"absolute-container":l(w)})},[e(Ie,null,{default:o(()=>[e(pe,{"show-toggle":!1},{default:o(({fold:t,toggle:b})=>[e(ue,{model:l(r).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(k,{label:""},{default:o(()=>[e(D,{modelValue:l(r).projectId,"onUpdate:modelValue":a[0]||(a[0]=i=>l(r).projectId=i),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(k,{label:""},{default:o(()=>[e(D,{clearable:"",modelValue:l(r).projectName,"onUpdate:modelValue":a[1]||(a[1]=i=>l(r).projectName=i),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(k,{label:""},{default:o(()=>[e(D,{modelValue:l(r).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=i=>l(r).projectIdentification=i),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),I(e(k,{label:""},{default:o(()=>[e($,{placeholder:"国家地区",modelValue:l(r).countryId,"onUpdate:modelValue":a[3]||(a[3]=i=>l(r).countryId=i),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:o(()=>[(n(!0),h(E,null,P(l(O),i=>(n(),u(ie,{label:i.chineseName,value:i.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),I(e(k,{label:""},{default:o(()=>[e($,{placeholder:"客户简称",modelValue:l(r).clientId,"onUpdate:modelValue":a[4]||(a[4]=i=>l(r).clientId=i)},{default:o(()=>[(n(!0),h(E,null,P(l(F),i=>(n(),u(S,{key:i.tenantCustomerId,value:i.tenantCustomerId,label:i.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),I(e(k,{label:""},{default:o(()=>[e($,{placeholder:"B2B/B2C",modelValue:l(r).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=i=>l(r).b2bOrB2cStatus=i)},{default:o(()=>[e(S,{label:"全部",value:""}),e(S,{label:"B2B",value:"1"}),e(S,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!t]]),I(e(k,null,{default:o(()=>[e(se,{modelValue:l(r).time,"onUpdate:modelValue":a[6]||(a[6]=i=>l(r).time=i),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[B,!t]]),e(ce,null,{default:o(()=>[e(x,{type:"primary",onClick:a[7]||(a[7]=i=>M())},{icon:o(()=>[e(Q,{name:"i-ep:search"})]),default:o(()=>[d(" 筛选 ")]),_:1}),e(x,{onClick:ne},{icon:o(()=>[Je]),default:o(()=>[d(" 重置 ")]),_:1}),e(x,{link:"",onClick:b},{icon:o(()=>[e(Q,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[d(" "+f(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(me,{"border-style":"dashed"}),e(be,{gutter:24},{default:o(()=>[e(de),e(_e,null,{default:o(()=>[e(z,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:o(()=>[d(" 导出 ")]),_:1}),e(fe,{border:l(N),"onUpdate:border":a[9]||(a[9]=t=>v(N)?N.value=t:null),tableAutoHeight:l(w),"onUpdate:tableAutoHeight":a[10]||(a[10]=t=>v(w)?w.value=t:null),checkList:l(p),"onUpdate:checkList":a[11]||(a[11]=t=>v(p)?p.value=t:null),columns:l(V),"onUpdate:columns":a[12]||(a[12]=t=>v(V)?V.value=t:null),"line-height":l(j),"onUpdate:lineHeight":a[13]||(a[13]=t=>v(j)?j.value=t:null),stripe:l(L),"onUpdate:stripe":a[14]||(a[14]=t=>v(L)?L.value=t:null),style:{"margin-left":"12px"},onQueryData:M},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((n(),u(he,{ref_key:"tableSortRef",ref:Y,style:{"margin-top":"10px"},"row-key":"id",data:l(re),border:l(N),size:l(j),stripe:l(L)},{empty:o(()=>[e(ke,{description:"暂无数据"})]),default:o(()=>[e(_,{type:"selection"}),l(p).includes("projectId")?(n(),u(_,{key:0,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):g("",!0),l(p).includes("projectName")?(n(),u(_,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):g("",!0),l(p).includes("projectIdentificationOrClientName")?(n(),u(_,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",align:"center",label:"客户简称/标识"})):g("",!0),l(p).includes("participation")?(n(),u(_,{key:3,"show-overflow-tooltip":"",align:"center",label:"参与/完成/配额/限量"},{default:o(({row:t})=>[d(f(t.participation)+"/ "+f(t.complete)+"/ "+f(t.num)+"/ "+f(t.limitedQuantity),1)]),_:1})):g("",!0),l(p).includes("doMoneyPrice")?(n(),u(_,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:o(({row:t})=>[d(" $ "+f(t.doMoneyPrice)+" ￥"+f(t.memberPrice),1)]),_:1})):g("",!0),l(p).includes("memberPrice")?(n(),u(_,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:o(({row:t})=>[e(T,{size:"small",plain:"",type:"primary",onClick:b=>te(t)},{default:o(()=>[d(" 会员价 ")]),_:2},1032,["onClick"])]),_:1})):g("",!0),l(p).includes("ir")?(n(),u(_,{key:6,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:o(({row:t})=>[d(f(t.ir)+"/ "+f(t.nir),1)]),_:1})):g("",!0),l(p).includes("countryNameList")?(n(),u(_,{key:7,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:o(({row:t})=>[t.countryNameList.length>4?(n(),u(q,{key:0,class:"box-item",effect:"dark",content:t.countryNameList.join(","),placement:"top"},{default:o(()=>[e(T,{type:"primary"},{default:o(()=>[d(f(t.countryNameList.length),1)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),h(E,{key:1},P(t.countryNameList,b=>(n(),u(ge,{key:b,type:"primary"},{default:o(()=>[d(f(b),1)]),_:2},1024))),128))]),_:1})):g("",!0),l(p).includes("memberGroupName")?(n(),u(_,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:o(({row:t})=>[e(q,{class:"box-item",effect:"dark",placement:"top"},{content:o(()=>[(n(!0),h(E,null,P(t.getMemberGroupNameInfoList,b=>(n(),h("div",null,f(b.memberGroupName)+"-"+f(b.memberGroupId),1))),256))]),default:o(()=>[e(T,{type:"primary"},{default:o(()=>[d(f(t.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)]),_:1})):g("",!0),l(p).includes("createTime")?(n(),u(_,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"})):g("",!0),e(_,{align:"center",label:"操作",width:"200"},{default:o(({row:t})=>[e(ye,null,{default:o(()=>[t.getMemberGroupNameInfoList.length?g("",!0):(n(),u(z,{key:0,type:"primary",plain:"",size:"small",onClick:b=>oe(t)},{default:o(()=>[d(" 分配 ")]),_:2},1032,["onClick"])),e(z,{type:"primary",plain:"",size:"small",onClick:b=>le(t)},{default:o(()=>[d(" 测查 ")]),_:2},1032,["onClick"]),e(z,{size:"small",plain:"",type:"primary",onClick:b=>ee(t)},{default:o(()=>[d(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ce,l(R)]]),e(ve,{"current-page":l(y).page,total:l(y).total,"page-size":l(y).size,"page-sizes":l(y).sizes,layout:l(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ae,onCurrentChange:M},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Oe,{ref_key:"CheckEditRef",ref:Z},null,512),e(Fe,{ref_key:"checkMembershipPriceRef",ref:G},null,512),e(Ae,{ref_key:"addAllocationEditRef",ref:H,onFetchData:U},null,512)],2)}}}),mt=$e(Ke,[["__scopeId","data-v-7f622b72"]]);export{mt as default};
