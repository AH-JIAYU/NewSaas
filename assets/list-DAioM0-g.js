
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ce,r as s,aK as pe,a5 as de,k as me,a as n,p as fe,q as B,o as p,b as F,f as e,w as t,F as _e,t as ge,g as u,H as x,e as _,j as h,i as g,S as ve,N as be,aM as he,aN as ke,ap as ye,aG as Ce,aH as we,s as Se,R as ze}from"./index-BSaSDwJk.js";import{_ as Ee}from"./index.vue_vue_type_style_index_0_lang-BHTGbFR_.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-UAHeDWQ1.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-d8APZpSG.js";import{u as Ie}from"./user_customer-Boim8i4r.js";import{a as xe}from"./position_manage-BujE0Xfl.js";import"./user_customer-CAB0rGxF.js";const Le=v=>(Ce("data-v-61b97bf3"),v=v(),we(),v),Ue=Le(()=>Se("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Re=ce({name:"position_manage",__name:"list",setup(v){const N=Ie(),P=s([]),{pagination:d,onSizeChange:A,onCurrentChange:O,onSortChange:He}=pe(),M=s(""),L=s([]),b=s(!0),k=s(),y=s(!1),c=s([]),C=s(!0);s(!1);const w=s("default"),S=s(!1),j=s([]),q=[{lable:"启用",value:1},{lable:"禁用",value:2}],z=s([{label:"职位ID",prop:"id",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"name",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"count",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),i=de({page:1,limit:10,id:null,name:"",active:null});function T(){k.value.showEdit()}function G(o){k.value.showEdit(JSON.stringify(o))}function J(o){j.value=o}function K(){Object.assign(i,{page:1,limit:10,id:null,name:"",active:null}),f()}function Q(o){A(o).then(()=>{i.limit=o,f()})}function E(o=1){O(o).then(()=>{i.page=o,f()})}async function f(){try{b.value=!0,P.value=await N.getCustomerList();const{data:o}=await xe.list(i);L.value=o.data,d.value.total=parseInt(o.total)||0,b.value=!1}catch{}finally{b.value=!1}}return me(()=>{z.value.forEach(o=>{o.checked&&c.value.push(o.prop)}),f()}),(o,l)=>{const U=n("el-input"),V=n("el-form-item"),W=n("ElOption"),X=n("el-select"),R=be,D=n("ElButton"),Y=n("ElFormItem"),Z=n("el-form"),ee=Ve,te=n("ElDivider"),I=n("el-button"),le=Ee,ae=he,oe=ke,ne=n("el-row"),m=n("el-table-column"),se=n("el-empty"),ie=n("el-table"),re=n("ElPagination"),ue=ye,H=fe("loading");return B((p(),F("div",{class:ve({"absolute-container":y.value})},[e(ue,null,{default:t(()=>[e(ee,{"show-toggle":!1},{default:t(({fold:a,toggle:$})=>[e(Z,{model:i.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(V,{label:""},{default:t(()=>[e(U,{modelValue:i.id,"onUpdate:modelValue":l[0]||(l[0]=r=>i.id=r),placeholder:"职位ID",clearable:""},null,8,["modelValue"])]),_:1}),e(V,{label:""},{default:t(()=>[e(U,{modelValue:i.name,"onUpdate:modelValue":l[1]||(l[1]=r=>i.name=r),placeholder:"职位名称",clearable:""},null,8,["modelValue"])]),_:1}),e(V,{label:""},{default:t(()=>[e(X,{modelValue:i.active,"onUpdate:modelValue":l[2]||(l[2]=r=>i.active=r),placeholder:"状态",clearable:"",filterable:""},{default:t(()=>[(p(),F(_e,null,ge(q,r=>e(W,{label:r.lable,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(Y,null,{default:t(()=>[e(D,{type:"primary",onClick:l[3]||(l[3]=r=>E())},{icon:t(()=>[e(R,{name:"i-ep:search"})]),default:t(()=>[u(" 筛选 ")]),_:1}),e(D,{onClick:K},{icon:t(()=>[Ue]),default:t(()=>[u(" 重置 ")]),_:1}),e(D,{disabled:"",link:"",onClick:$},{icon:t(()=>[e(R,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[u(" "+x(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,{gutter:24},{default:t(()=>[e(le,null,{default:t(()=>[e(I,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:T},{default:t(()=>[u(" 新增职位 ")]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(I,{size:"default",onClick:l[4]||(l[4]=()=>{})},{default:t(()=>[u(" 导出 ")]),_:1}),e(ae,{border:C.value,"onUpdate:border":l[5]||(l[5]=a=>C.value=a),tableAutoHeight:y.value,"onUpdate:tableAutoHeight":l[6]||(l[6]=a=>y.value=a),checkList:c.value,"onUpdate:checkList":l[7]||(l[7]=a=>c.value=a),columns:z.value,"onUpdate:columns":l[8]||(l[8]=a=>z.value=a),"line-height":w.value,"onUpdate:lineHeight":l[9]||(l[9]=a=>w.value=a),stripe:S.value,"onUpdate:stripe":l[10]||(l[10]=a=>S.value=a),style:{"margin-left":"12px"},onQueryData:E},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),B((p(),_(ie,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:C.value,size:w.value,stripe:S.value,onSelectionChange:J},{empty:t(()=>[e(se,{description:"暂无数据"})]),default:t(()=>[e(m,{align:"center",type:"selection"}),c.value.includes("id")?(p(),_(m,{key:0,prop:"id","show-overflow-tooltip":"",align:"center",label:"职位ID"})):h("",!0),c.value.includes("name")?(p(),_(m,{key:1,prop:"name","show-overflow-tooltip":"",align:"center",label:"职位名称"})):h("",!0),c.value.includes("count")?(p(),_(m,{key:2,prop:"count","show-overflow-tooltip":"",align:"center",label:"账户数"},{default:t(({row:a})=>[u(x(a.count?a.count:"-"),1)]),_:1})):h("",!0),c.value.includes("remark")?(p(),_(m,{key:3,prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"},{default:t(({row:a})=>[u(x(a.remark?a.remark:"-"),1)]),_:1})):h("",!0),e(m,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e(I,{size:"small",plain:"",type:"primary",onClick:$=>G(a)},{default:t(()=>[u(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[H,!1]]),e(re,{"current-page":g(d).page,total:g(d).total,"page-size":g(d).size,"page-sizes":g(d).sizes,layout:g(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:E,onSizeChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"]),e(De,{onSuccess:f,ref_key:"editRef",ref:k},null,512)]),_:1})],2)),[[H,b.value]])}}}),Me=ze(Re,[["__scopeId","data-v-61b97bf3"]]);export{Me as default};
