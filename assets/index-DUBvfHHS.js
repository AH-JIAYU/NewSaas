
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ue}from"./index-lbcbVlYc.js";import{a as O}from"./user_customer-D1u3zzAp.js";import se from"./index-DdoxDlwx.js";import{d as ie,r as h,ab as de,Z as K,b8 as re,$ as ce,aE as me,a as v,o,b as C,f as e,w as a,F as k,t as q,e as i,y as c,g as y,j as I,z as p,i as d,b9 as pe,p as D,aH as fe,aI as ve,L as Ce}from"./index-CxHAne3j.js";import{a as ge}from"./position_manage-Ut30hWPw.js";import{u as _e}from"./configuration_siteSetting-D0H2mo0n.js";import"./index-DcL-z_XW.js";import"./department-ClvjNPku.js";import"./configuration_role-DHfRpwRR.js";import"./tenant_role-Dzfq4PQb.js";import"./configuration_manager-YMzQCey8.js";import"./configuration_site_setting-DtK6yhyu.js";const L=$=>(fe("data-v-dfad0854"),$=$(),ve(),$),be=L(()=>c("div",{class:"card-header"},[c("span",null,"基本信息")],-1)),ye=L(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Ie={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},he=L(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Ve=L(()=>c("div",{class:"card-header"},[c("span",null,"权限信息")],-1)),ke=L(()=>c("div",{class:"card-header"},[c("span",null,"重定向配置")],-1)),Le={key:0},$e={key:0},xe={key:0},Ue={key:0},Ee={class:"card-header"},Se=L(()=>c("span",null,"服务端回调配置",-1)),we={key:0},Ne={key:0},Te={key:0},qe={key:0},Ae=ie({__name:"index",props:{leftTab:Object,tabIndex:Number},setup($){const Z=_e(),G=$,g=h(),b=h("https://saas-api.surveysaas.com/api"),E=h([]),J=de("validateTopTabs"),X=K({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),z=h("all"),P=h([]),Y=K({page:1,limit:10,id:null,name:"",active:null}),B=K({page:1,limit:10,id:"",userName:"",active:null,departmentId:null,positionId:null}),F=h("basicSettings"),A=h(!1),S=h([]),x=h(!1),ee=_=>{if(_)t.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const l=t.value.tenantCustomerConfigInfoList.findIndex(f=>f.callbackWay===1);l!==-1&&t.value.tenantCustomerConfigInfoList.splice(l,1)}},j=async(_,l)=>{if(_){const f=S.value.find(s=>s.id===_),u=await O.generateKey({type:f.name});t.value.tenantCustomerConfigInfoList[l].secretKey=u.data}},R=async()=>{const{data:_}=await D.getTenantStaffList(),l=await ge.list(Y);l.data&&(P.value=l.data.data),_&&(E.value=_)},te=async _=>{if(_!=="all"){B.positionId=_;const{data:l}=await D.list(B);l&&(E.value=l.data)}else{const{data:l}=await D.getTenantStaffList();l&&(E.value=l)}};re(async()=>{await R(),A.value=t.value.tenantCustomerConfigInfoList.length===2;const _=await O.getTenantSecretKeyConfigList();S.value=_.data;const l=await Z.getSiteConfig();g.value=`${l.httpsStatus===1?"http":"https"}://${l.topLevelDomainName??l.personalizedDomainName}`});const M=h(null),t=h(G.leftTab);ce(()=>{J(M.value)});const r=me.local.get("anotherName");return(_,l)=>{const f=v("el-input"),u=v("el-form-item"),s=v("el-col"),Q=v("el-radio-button"),ae=v("el-radio-group"),V=v("el-option"),W=v("el-button"),w=v("el-select"),N=v("el-row"),T=v("el-card"),U=v("el-switch"),le=v("el-input-number"),H=v("el-tab-pane"),m=ue,ne=v("el-checkbox"),oe=v("el-tabs");return o(),C("div",null,[e(d(pe),{ref_key:"formRef",ref:M,rules:d(X),model:t.value,"label-width":"100px"},{default:a(()=>[e(oe,{modelValue:F.value,"onUpdate:modelValue":l[27]||(l[27]=n=>F.value=n)},{default:a(()=>[e(H,{label:"基础设置",name:"basicSettings"},{default:a(()=>[e(T,{class:"box-card"},{header:a(()=>[be]),default:a(()=>[e(N,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(u,{label:"客户名称",prop:"customerAccord"},{default:a(()=>[e(f,{modelValue:t.value.customerAccord,"onUpdate:modelValue":l[0]||(l[0]=n=>t.value.customerAccord=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"客户简称",prop:"customerShortName"},{default:a(()=>[e(f,{modelValue:t.value.customerShortName,"onUpdate:modelValue":l[1]||(l[1]=n=>t.value.customerShortName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"公司名称",prop:"companyName"},{default:a(()=>[e(f,{modelValue:t.value.companyName,"onUpdate:modelValue":l[2]||(l[2]=n=>t.value.companyName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"客户姓名",prop:"customerName"},{default:a(()=>[e(f,{modelValue:t.value.customerName,"onUpdate:modelValue":l[3]||(l[3]=n=>t.value.customerName=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"手机号码",prop:"customerPhone"},{default:a(()=>[e(f,{modelValue:t.value.customerPhone,"onUpdate:modelValue":l[4]||(l[4]=n=>t.value.customerPhone=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"电子邮箱",prop:"emailAddress"},{default:a(()=>[e(f,{modelValue:t.value.emailAddress,"onUpdate:modelValue":l[5]||(l[5]=n=>t.value.emailAddress=n),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"负责人",prop:"chargeId"},{default:a(()=>[e(w,{modelValue:t.value.chargeId,"onUpdate:modelValue":l[9]||(l[9]=n=>t.value.chargeId=n),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{header:a(()=>[e(ae,{modelValue:z.value,"onUpdate:modelValue":l[6]||(l[6]=n=>z.value=n),size:"large",style:{"max-width":"27.875rem"},onChange:te},{default:a(()=>[e(Q,{label:"全部",value:"all"}),(o(!0),C(k,null,q(P.value,n=>(o(),i(Q,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),empty:a(()=>[c("div",Ie,[y(" 暂无数据 "),e(W,{type:"primary",link:"",onClick:l[8]||(l[8]=n=>x.value=!0),size:"small"},{default:a(()=>[y(" 快捷新增 "),he]),_:1})])]),default:a(()=>[(o(!0),C(k,null,q(E.value,n=>(o(),i(V,{key:n.id,label:n.userName,value:n.id},null,8,["label","value"]))),128)),e(W,{class:"buttonClass",onClick:l[7]||(l[7]=n=>x.value=!0),size:"small"},{default:a(()=>[y(" 快捷新增 "),ye]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(u,{label:"结算周期",prop:"settlementCycle"},{default:a(()=>[e(w,{modelValue:t.value.settlementCycle,"onUpdate:modelValue":l[10]||(l[10]=n=>t.value.settlementCycle=n)},{default:a(()=>[e(V,{label:"net 30",value:30}),e(V,{label:"net 60",value:60}),e(V,{label:"net 90",value:90}),e(V,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"box-card"},{header:a(()=>[Ve]),default:a(()=>[e(N,{gutter:24},{default:a(()=>[e(s,{span:4},{default:a(()=>[e(u,{label:"客户状态"},{default:a(()=>[e(U,{modelValue:t.value.customerStatus,"onUpdate:modelValue":l[11]||(l[11]=n=>t.value.customerStatus=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:a(()=>[e(u,{label:"前置问卷"},{default:a(()=>[e(U,{modelValue:t.value.antecedentQuestionnaire,"onUpdate:modelValue":l[12]||(l[12]=n=>t.value.antecedentQuestionnaire=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:16},{default:a(()=>[e(u,{label:"风险控制"},{default:a(()=>[e(U,{modelValue:t.value.riskControl,"onUpdate:modelValue":l[13]||(l[13]=n=>t.value.riskControl=n),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.riskControl===2?(o(),i(s,{key:0,span:12},{default:a(()=>[e(u,{label:"营业限额/月"},{default:a(()=>[e(le,{modelValue:t.value.turnover,"onUpdate:modelValue":l[14]||(l[14]=n=>t.value.turnover=n),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):I("",!0),t.value.riskControl===2?(o(),i(s,{key:1,span:12},{default:a(()=>[e(u,{label:"审核率Min值"},{default:a(()=>[e(f,{modelValue:t.value.rateAudit,"onUpdate:modelValue":l[15]||(l[15]=n=>t.value.rateAudit=n),"controls-position":"right",min:1,type:"number"},{append:a(()=>[y(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1}),e(H,{label:"端口设置",name:"portSettings"},{default:a(()=>[e(T,{class:"box-card"},{header:a(()=>[ke]),default:a(()=>[e(N,{gutter:24},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(u,{label:"加密"},{default:a(()=>[e(U,{modelValue:t.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":l[16]||(l[16]=n=>t.value.tenantCustomerConfigInfoList[0].isEncryption=n),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),C(k,{key:0},[e(s,{span:24},{default:a(()=>[e(u,{label:"加密方式"},{default:a(()=>[e(w,{onChange:l[17]||(l[17]=n=>j(n,0)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":l[18]||(l[18]=n=>t.value.tenantCustomerConfigInfoList[0].encryptionId=n)},{default:a(()=>[(o(!0),C(k,null,q(S.value,n=>(o(),i(V,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"密钥"},{default:a(()=>[e(f,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":l[19]||(l[19]=n=>t.value.tenantCustomerConfigInfoList[0].secretKey=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(o(),i(s,{key:1,span:24},{default:a(()=>[e(u,{label:"IP白名单"},{default:a(()=>[e(f,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":l[20]||(l[20]=n=>t.value.tenantCustomerConfigInfoList[0].whitelistIp=n)},null,8,["modelValue"])]),_:1})]),_:1})),e(s,{span:24},{default:a(()=>[e(u,{label:"成功重定向"},{default:a(()=>[y(p(g.value)+" ",1),c("span",null,p(`/redirect?tid=${d(r)}&status=c&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),C("span",Le,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${g.value}/redirect?tid=${d(r)}&status=c&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${g.value}/redirect?tid=${d(r)}&status=c&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"配额满重定向"},{default:a(()=>[y(p(g.value)+" ",1),c("span",null,p(`/redirect?tid=${d(r)}&status=q&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),C("span",$e,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${g.value}/redirect?tid=${d(r)}&status=q&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${g.value}/redirect?tid=${d(r)}&status=q&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"被甄别重定向"},{default:a(()=>[y(p(g.value)+" ",1),c("span",null,p(`/redirect?tid=${d(r)}&status=s&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),C("span",xe,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${g.value}/redirect?tid=${d(r)}&status=s&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${g.value}/redirect?tid=${d(r)}&status=s&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"安全重定向"},{default:a(()=>[y(p(g.value)+" ",1),c("span",null,p(`/redirect?tid=${d(r)}&status=t&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),C("span",Ue,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${g.value}/redirect?tid=${d(r)}&status=t&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${g.value}/redirect?tid=${d(r)}&status=t&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"box-card"},{header:a(()=>[c("div",Ee,[e(ne,{modelValue:A.value,"onUpdate:modelValue":l[21]||(l[21]=n=>A.value=n),size:"large",onChange:ee},{default:a(()=>[Se]),_:1},8,["modelValue"])])]),default:a(()=>[t.value.tenantCustomerConfigInfoList.length===2?(o(),i(N,{key:0,gutter:24},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(u,{label:"加密"},{default:a(()=>[e(U,{modelValue:t.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":l[22]||(l[22]=n=>t.value.tenantCustomerConfigInfoList[1].isEncryption=n),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),C(k,{key:0},[e(s,{span:24},{default:a(()=>[e(u,{label:"加密方式"},{default:a(()=>[e(w,{onChange:l[23]||(l[23]=n=>j(n,1)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":l[24]||(l[24]=n=>t.value.tenantCustomerConfigInfoList[1].encryptionId=n)},{default:a(()=>[(o(!0),C(k,null,q(S.value,n=>(o(),i(V,{label:n.name,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"密钥"},{default:a(()=>[e(f,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":l[25]||(l[25]=n=>t.value.tenantCustomerConfigInfoList[1].secretKey=n)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(o(),i(s,{key:1,span:24},{default:a(()=>[e(u,{label:"IP白名单"},{default:a(()=>[e(f,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":l[26]||(l[26]=n=>t.value.tenantCustomerConfigInfoList[1].whitelistIp=n)},null,8,["modelValue"])]),_:1})]),_:1})),e(s,{span:24},{default:a(()=>[e(u,{label:"成功回调"},{default:a(()=>[y(p(b.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${d(r)}&status=c&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),C("span",we," &hash=[hash] ")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=c&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=c&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"配额满回调"},{default:a(()=>[y(p(b.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${d(r)}&status=q&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),C("span",Ne,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=q&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=q&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"被甄别回调"},{default:a(()=>[y(p(b.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${d(r)}&status=s&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),C("span",Te,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=s&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=s&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(u,{label:"安全终止回调"},{default:a(()=>[y(p(b.value)+" ",1),c("span",null,p(`/callback/serviceCallback?tid=${d(r)}&status=t&uid=[uid]`),1),t.value.tenantCustomerConfigInfoList[1].encryptionId&&t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(o(),C("span",qe,"&hash=[hash]")):I("",!0),t.value.tenantCustomerConfigInfoList[0].encryptionId&&t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(o(),i(m,{key:1,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=t&uid=[uid]&hash=[hash]`},null,8,["content"])):(o(),i(m,{key:2,content:`${b.value}/callback/serviceCallback?tid=${d(r)}&status=t&uid=[uid]`},null,8,["content"]))]),_:1})]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"]),x.value?(o(),i(se,{key:0,modelValue:x.value,"onUpdate:modelValue":l[28]||(l[28]=n=>x.value=n),onSuccess:R},null,8,["modelValue"])):I("",!0)])}}}),Oe=Ce(Ae,[["__scopeId","data-v-dfad0854"]]);export{Oe as default};
