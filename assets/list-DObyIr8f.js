
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k,d as N,r as v,l as E,E as g,a as n,al as S,am as h,o as q,b as A,f as e,w as a,g as m,ak as D,P as T}from"./index-BP3NysZD.js";import{C as $}from"./clipboard-CeNRMykX.js";const U={list:()=>k.post("member-config/get/getMemberConfig"),create:c=>k.post("member-config/insert/insertMemberConfig",c),edit:c=>k.post("member-config/update/updateMemberConfig",c)},B=N({name:"SurveySettingList",__name:"list",setup(c){const W=v("基本设置"),d=v(!1),p=v(),l=v({webName:"",keyWords:"",memberURL:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,priceProportion:null,taxPointsProportion:null,minimumAmount:null,fixedPrice:null}),M=v({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],memberURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}],phone:[{required:!1,trigger:"blur",message:"请输入手机号"}],email:[{required:!1,trigger:"blur",message:"请输入邮箱"}]});E(()=>{y()});async function y(){d.value=!0;const{data:s}=await U.list();l.value=s||l.value,d.value=!1}const w=new $(".copy");w.on("success",function(s){g.success({message:"复制成功",center:!0}),s.clearSelection(),w.destroy()}),w.on("error",function(){g.error({message:"复制失败",center:!0})});function C(){l.value.id?p.value&&p.value.validate(s=>{if(s){let{id:t,keyWords:b,registerExamineOffOrOn:r,registerOffOrOn:_,memberURL:x,webName:u,priceProportion:P,taxPointsProportion:i,minimumAmount:f,fixedPrice:V}=l.value;const O={id:t,keyWords:b,registerExamineOffOrOn:r,registerOffOrOn:_,memberURL:x,webName:u,priceProportion:P,taxPointsProportion:i,minimumAmount:f,fixedPrice:V};d.value=!0,U.edit(O).then(()=>{d.value=!1,y(),g.success({message:"修改成功",center:!0})})}}):p.value&&p.value.validate(s=>{s&&(d.value=!0,U.create(l.value).then(()=>{d.value=!1,y(),g.success({message:"新增成功",center:!0})}))})}return(s,t)=>{const b=n("el-switch"),r=n("el-form-item"),_=n("el-col"),x=n("el-row"),u=n("el-input"),P=n("el-text"),i=n("el-button"),f=n("el-tab-pane"),V=n("el-form"),O=n("el-tabs"),R=D,L=S("loading");return h((q(),A("div",null,[e(R,null,{default:a(()=>[e(O,{modelValue:W.value,"onUpdate:modelValue":t[13]||(t[13]=o=>W.value=o)},{default:a(()=>[e(V,{ref_key:"formRef",ref:p,model:l.value,rules:M.value,"label-position":"right","label-width":"140px",style:{width:"500px"}},{default:a(()=>[e(f,{label:"基本设置",name:"基本设置"},{default:a(()=>[e(x,{gutter:20},{default:a(()=>[e(_,{span:7},{default:a(()=>[e(r,{label:"注册开关"},{default:a(()=>[e(b,{modelValue:l.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:6},{default:a(()=>[e(r,{label:"注册审核"},{default:a(()=>[e(b,{modelValue:l.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{prop:"webName",label:"网站名称"},{default:a(()=>[e(u,{modelValue:l.value.webName,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.webName=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{label:"keyWords"},{default:a(()=>[e(u,{modelValue:l.value.keyWords,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.keyWords=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{style:{width:"34rem"},label:"会员网址",prop:"memberURL"},{default:a(()=>[e(u,{modelValue:l.value.memberURL,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.memberURL=o),style:{width:"8rem"}},null,8,["modelValue"]),e(P,{class:"mx-1"},{default:a(()=>[m(".front-saas-web.surveyssaas.com")]),_:1}),e(i,{class:"copy","data-clipboard-text":`${l.value.memberURL}.front-saas-web.surveyssaas.com`,type:"primary",link:""},{default:a(()=>[m("复制")]),_:1},8,["data-clipboard-text"])]),_:1}),e(r,null,{default:a(()=>[e(i,{type:"primary",onClick:C},{default:a(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1}),e(f,{label:"高级设置",name:"高级设置"},{default:a(()=>[e(r,{label:"默认会员价格比例",prop:"confirmPassword"},{default:a(()=>[e(u,{modelValue:l.value.priceProportion,"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.priceProportion=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:a(()=>[m("%")]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"最低结算金额",prop:"confirmPassword"},{default:a(()=>[e(u,{modelValue:l.value.minimumAmount,"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.minimumAmount=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"会员税点",prop:"confirmPassword"},{default:a(()=>[e(u,{modelValue:l.value.taxPointsProportion,"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.taxPointsProportion=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:a(()=>[m("%")]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"调查限价",prop:"confirmPassword"},{default:a(()=>[e(u,{modelValue:l.value.fixedPrice,"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.fixedPrice=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(i,{type:"primary",onClick:C},{default:a(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),e(V,{"label-width":"130px"},{default:a(()=>[e(f,{label:"联系我们",name:"联系我们"},{default:a(()=>[e(r,{label:"电子邮箱",prop:"originalPassword"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"手机号码",prop:"newPassword"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"QQ号码",prop:"confirmPassword"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"公司地址",prop:"confirmPassword"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[12]||(t[12]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(i,{type:"primary"},{default:a(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])),[[L,d.value]])}}}),J=T(B,[["__scopeId","data-v-6d08fc82"]]);export{J as default};
