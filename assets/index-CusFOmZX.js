
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as J}from"./group_team-Br2iv4qn.js";import{a as U}from"./department-bJrfPsVp.js";import{u as A}from"./department-DVn2A1qh.js";import{u as G}from"./configuration_manager-DWS9NVt8.js";import{u as K}from"./position_manage-Djv09ULo.js";import{d as Q,aP as W,r as o,k as X,a as p,p as Y,q as Z,o as l,b as _,f as n,w as e,s as V,g as d,e as s,H as i,F as w,t as h,j as I,aL as ee,aM as te,R as ae}from"./index-DZV01Nt9.js";import"./position_manage-D-QhGPjs.js";const le=v=>(ee("data-v-4d959db2"),v=v(),te(),v),oe=le(()=>V("div",{class:"card-header"},[V("span",null,"组成员")],-1)),ne={style:{flex:"auto"}},se=Q({name:"Edit",__name:"index",emits:["success"],setup(v,{expose:M,emit:re}){W();const T=o(),k=K(),C=o(),P=A(),f=o(),R=G(),x=o([]),E=o(""),j=o(),F=o(!1),b=o(!1),S=o([]),O=o([]),D=o(),L=o({groupId:null,userInfo:[],menuId:[]});async function $(B){E.value="详情";const c=JSON.parse(B);L.value.groupId=c.id,D.value=c.departmentId;const u={page:1,limit:10,groupId:c.id},a=await J.list(u);a!=null&&a.data.data&&a.data.data.forEach(m=>{var g,y;(y=(g=L.value)==null?void 0:g.menuId)==null||y.push(m.id),S.value.push(m)});const N=await U.createEvery();f.value=N.data.result,f.value=f.value.filter(m=>m.id===D.value),b.value=!0}X(async()=>{C.value=await(k==null?void 0:k.getPositionManage())||[],f.value=await P.getDepartment(),x.value=await R.getStaff(),j.value=new Date});const q=()=>{Object.assign(L.value,{groupId:null,userInfo:[],menuId:[]}),O.value=[],S.value=[]};return M({showEdit:$}),(B,c)=>{const u=p("el-table-column"),a=p("el-text"),N=p("el-empty"),m=p("el-table"),g=p("el-card"),y=p("el-button"),z=p("el-drawer"),H=Y("loading");return Z((l(),_("div",null,[n(z,{modelValue:b.value,"onUpdate:modelValue":c[1]||(c[1]=t=>b.value=t),title:E.value,onClose:q,size:"60%"},{footer:e(()=>[V("div",ne,[n(y,{type:"",onClick:c[0]||(c[0]=t=>b.value=!1)},{default:e(()=>[d(" 取消 ")]),_:1})])]),default:e(()=>[n(g,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[n(m,{ref_key:"tableRef",ref:T,data:S.value,border:""},{empty:e(()=>[n(N,{description:"暂无数据"})]),default:e(()=>[n(u,{align:"center",type:"index",label:"序号",width:"80"}),n(u,{align:"center","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"},{default:e(({row:t})=>[t.memberId?(l(),s(a,{key:0},{default:e(()=>[d(i(t.memberId),1)]),_:2},1024)):(l(),s(a,{key:1},{default:e(()=>[d(i(t.id),1)]),_:2},1024))]),_:1}),n(u,{align:"center","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},h(x.value,r=>(l(),s(a,null,{default:e(()=>[t.id===r.id?(l(),s(a,{key:0},{default:e(()=>[d(i(r.name),1)]),_:2},1024)):I("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[d(i(t.userName?t.userName:"-"),1)]),_:2},1024))]),_:1}),n(u,{align:"center","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},h(x.value,r=>(l(),s(a,null,{default:e(()=>[t.id===r.id?(l(),s(a,{key:0},{default:e(()=>[d(i(r.name),1)]),_:2},1024)):I("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[d(i(t.name),1)]),_:2},1024))]),_:1}),n(u,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"职位"},{default:e(({row:t})=>[(l(!0),_(w,null,h(C.value,r=>(l(),s(a,null,{default:e(()=>[t.positionId===r.id?(l(),s(a,{key:0},{default:e(()=>[d(i(r.name),1)]),_:2},1024)):I("",!0)]),_:2},1024))),256))]),_:1}),n(u,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:e(({row:t})=>[(l(!0),_(w,null,h(f.value,r=>(l(),s(a,null,{default:e(()=>[D.value===r.id?(l(),s(a,{key:0},{default:e(()=>[d(i(r.name),1)]),_:2},1024)):I("",!0)]),_:2},1024))),256))]),_:1}),n(u,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:e(({row:t})=>[d(i(t.commission?t.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])])),[[H,F.value]])}}}),_e=ae(se,[["__scopeId","data-v-4d959db2"]]);export{_e as default};
