
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ad as z,d as se,aN as ie,ae as ue,r as p,E as t,M as pe,o as de,a2 as f,al as be,a as d,i as me,f as i,w as o,h as e,g as u,t as r,k as y,a3 as ke,c as m,aM as he,j as h,b as T,A as fe,aO as ge,aP as _e,aQ as ve,ao as ye,aH as Ie,aI as Se,y as Ce}from"./index-7OqlQ5Tf.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-CmE--7vK.js";import{_ as je}from"./index-Ka96vgvG.js";import"./index.vue_vue_type_script_setup_true_lang-ooX-pFZe.js";import"./sortable.esm-C0-Qcoum.js";const A={list:b=>z.post("callback/getCustomerCallbackRecordList",b),getCustomerList:b=>z.post("tenantCustomer/getTenantCustomerAccordList",b),getCustomerCooperation:b=>z.post("tenantSupplier/getCustomerCooperation",b)},V=b=>(Ie("data-v-4982e4a7"),b=b(),Se(),b),Ue=V(()=>T("br",null,null,-1)),we=V(()=>T("br",null,null,-1)),xe=V(()=>T("br",null,null,-1)),De=se({name:"callback",__name:"index",setup(b){const{pagination:g,getParams:O,onSizeChange:B,onCurrentChange:F}=ie(),{t:l}=ue(),{format:M}=ge(),S=p(!1),P=p([]),$=p(""),s=p([]),C=p(!1),N=p(!1),j=p("default"),U=p(!1),H=p(),q=p("formSearch-callback"),w=p([{prop:"projectQuestionnaireClickId",label:t(()=>l("callback.clickID")),sortable:!0,checked:!0},{label:t(()=>l("callback.vipType")),prop:"surveySource",sortable:!0,checked:!0},{label:t(()=>l("callback.clientID")),prop:"clientId",sortable:!0,checked:!0},{prop:"customerShortName",label:t(()=>l("callback.customerAbbreviation")),sortable:!0,checked:!0},{prop:"memberChildId",label:t(()=>l("callback.vipSubVipId")),sortable:!0,checked:!0},{prop:"projectId",label:t(()=>l("callback.projectID")),sortable:!0,checked:!0},{prop:"projectName",label:t(()=>l("callback.projectName")),sortable:!0,checked:!0},{prop:"callbackUrl",label:t(()=>l("callback.callbackUrl")),sortable:!0,checked:!0},{prop:"subordinateUrl",label:t(()=>l("callback.subordinateUrl")),sortable:!0,checked:!0},{prop:"sourceUrl",label:t(()=>l("callback.source")),sortable:!0,checked:!0},{prop:"callbackTime",label:t(()=>l("callback.callbackTime")),sortable:!0,checked:!0},{prop:"callbackStatus",label:t(()=>l("callback.callbackStatus")),sortable:!0,checked:!0}]),E=[{label:t(()=>l("callback.internalVip")),value:1},{label:t(()=>l("callback.externalVip")),value:2}],x=[{label:l("callback.all"),value:0,type:"info"},{label:l("callback.success"),value:1,type:"success"},{label:l("callback.idWrong"),value:2,type:"warning"},{label:l("callback.hashWrong"),value:3,type:"danger"}],L=[],_=pe({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",clientId:"",callbackStatus:0});function W(c){B(c).then(()=>I())}function Q(c=1){F(c).then(()=>I())}function G(){g.value.page=1,I()}async function I(){try{S.value=!0;const c={...O(),..._};_.time&&_.time.length&&(c.beginTime=_.time[0]||"",c.endTime=_.time[1]||""),delete c.time;const n=await A.list(c),v=await A.getCustomerCooperation({});console.log("ress",v),v.data&&v.data.getCustomerInfoLists&&(L.length=0,v.data.getCustomerInfoLists.forEach(D=>{L.push({label:D.customerName,value:D.customerName})})),P.value=n.data.customerCallbackRecordInfoList,g.value.total=n.data.total,S.value=!1}catch{}finally{S.value=!1}}function J(){Object.assign(_,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0,clientId:""}),I()}function K(c){$.value=c}de(async()=>{w.value.forEach(c=>{c.checked&&s.value.push(c.prop)}),I(),H.value=[{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:t(()=>l("callback.clickID"))},{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:t(()=>l("callback.supplierID"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:t(()=>l("callback.projectID"))},{index:3,show:!0,type:"select",modelName:"customerName",placeholder:t(()=>l("callback.clientID")),option:"clientId",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:t(()=>l("callback.vipType")),option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:t(()=>l("callback.projectName"))},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:t(()=>l("callback.vipSubVipId"))},{index:7,show:!0,type:"select",modelName:"callbackStatus",placeholder:t(()=>l("callback.callbackStatus")),option:"callbackStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:t(()=>l("callback.startDate")),endPlaceHolder:t(()=>l("callback.endDate"))}]});const X={surveySource:()=>E,callbackStatus:()=>x,clientId:()=>L};return(c,n)=>{const v=je,D=f("ElDivider"),Y=Ne,Z=f("el-button"),ee=_e,le=ve,ae=f("el-row"),k=f("el-table-column"),R=f("el-tag"),te=f("el-empty"),oe=f("el-table"),ce=f("ElPagination"),ne=ye,re=be("loading");return d(),me("div",{class:fe({"absolute-container":e(U)})},[i(ne,null,{default:o(()=>[i(v,{formSearchList:e(H),formSearchName:e(q),onCurrentChange:Q,onOnReset:J,model:e(_),formOption:X},null,8,["formSearchList","formSearchName","model"]),i(D,{"border-style":"dashed"}),i(ae,null,{default:o(()=>[i(Y),i(le,null,{default:o(()=>[i(Z,{size:"default"},{default:o(()=>[u(r(e(l)("callback.export")),1)]),_:1}),i(ee,{border:e(C),"onUpdate:border":n[0]||(n[0]=a=>y(C)?C.value=a:null),tableAutoHeight:e(U),"onUpdate:tableAutoHeight":n[1]||(n[1]=a=>y(U)?U.value=a:null),checkList:e(s),"onUpdate:checkList":n[2]||(n[2]=a=>y(s)?s.value=a:null),columns:e(w),"onUpdate:columns":n[3]||(n[3]=a=>y(w)?w.value=a:null),"line-height":e(j),"onUpdate:lineHeight":n[4]||(n[4]=a=>y(j)?j.value=a:null),stripe:e(N),"onUpdate:stripe":n[5]||(n[5]=a=>y(N)?N.value=a:null),style:{"margin-left":"12px"},onQueryData:G},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ke((d(),m(oe,{border:e(C),data:e(P),size:e(j),stripe:e(N),onSelectionChange:K},{empty:o(()=>[i(te,{image:e(he),"image-size":300},null,8,["image"])]),default:o(()=>[e(s).includes("projectQuestionnaireClickId")?(d(),m(k,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:e(l)("callback.clickID")},{default:o(({row:a})=>[u(r(a.projectQuestionnaireClickId?a.projectQuestionnaireClickId:"-"),1)]),_:1},8,["label"])):h("",!0),i(k,{label:e(l)("callback.project"),width:"300",align:"center"},{default:o(({row:a})=>[u(r(a.customerShortName)+" ",1),Ue,u(" "+r(a.projectName)+" ",1),we,u(" "+r(a.projectId),1)]),_:1},8,["label"]),e(s).includes("memberChildId")?(d(),m(k,{key:1,align:"center","show-overflow-tooltip":"",label:e(l)("callback.vipSubVipId")},{default:o(({row:a})=>[T("p",null,r(E[a.surveySource-1].label),1),u(" "+r(a.memberChildId)+" ",1),xe,u(" "+r(a.randomIdentityId),1)]),_:1},8,["label"])):h("",!0),e(s).includes("clientId")?(d(),m(k,{key:2,align:"center","show-overflow-tooltip":"",label:e(l)("callback.clientID")},{default:o(({row:a})=>[u(r(a.clientId),1)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackUrl")?(d(),m(k,{key:3,align:"left",prop:"callbackUrl",label:e(l)("callback.callbackUrl")},null,8,["label"])):h("",!0),e(s).includes("subordinateUrl")?(d(),m(k,{key:4,align:"left",prop:"subordinateUrl",label:e(l)("callback.subordinateUrl")},{default:o(({row:a})=>[u(r(a.subordinateUrl?a.subordinateUrl:"-"),1)]),_:1},8,["label"])):h("",!0),e(s).includes("sourceUrl")?(d(),m(k,{key:5,align:"left",prop:"sourceUrl",label:e(l)("callback.source")},{default:o(({row:a})=>[u(r(a.sourceUrl?a.sourceUrl:"-"),1)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackTime")?(d(),m(k,{key:6,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:e(l)("callback.callbackTime")},{default:o(({row:a})=>[i(R,{effect:"plain",type:"info"},{default:o(()=>[u(r(e(M)(a.callbackTime)),1)]),_:2},1024)]),_:1},8,["label"])):h("",!0),e(s).includes("callbackStatus")?(d(),m(k,{key:7,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:e(l)("callback.callbackStatus")},{default:o(({row:a})=>[a.callbackStatus&&x[a.callbackStatus]?(d(),m(R,{key:0,type:x[a.callbackStatus].type},{default:o(()=>[u(r(x[a.callbackStatus].label),1)]),_:2},1032,["type"])):h("",!0)]),_:1},8,["label"])):h("",!0)]),_:1},8,["border","data","size","stripe"])),[[re,e(S)]]),i(ce,{"current-page":e(g).page,total:e(g).total,"page-size":e(g).size,"page-sizes":e(g).sizes,layout:e(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=Ce(De,[["__scopeId","data-v-4982e4a7"]]);export{He as default};
