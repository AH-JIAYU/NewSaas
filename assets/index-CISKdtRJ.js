
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as y,d as h,N as w,o as j,a3 as m,b as I,j as C,g as p,w as c,f as a,h as u,i,c as k,k as D,ak as E,bp as x,_ as A,aH as N,aI as V,z as B}from"./index-CZbucr5m.js";/* empty css                      */const L={list:s=>y.post("callback/getProjectSurveyScreenList",s),childList:s=>y.post("callback/getProjectScreenMemberChildList",s),getDetail:s=>y.post("callback/getProjectSurveyScreenDetailList",s)},O=s=>(N("data-v-fc372c65"),s=s(),V(),s),P={class:"heade"},z={class:"title"},J=O(()=>a("div",{class:"tooltip"},[a("div",null,[a("div",{class:"label"},[a("span",{class:"red"},"红色")]),u(" : 正确答案 ")]),a("div",null,[a("div",{class:"label"},[a("span",{class:"spot"})]),u(" : 所选答案 ")])],-1)),M=h({__name:"index",setup(s,{expose:S}){const o=w({visible:!1,survey:null}),g=v=>{let e=[];return v.forEach(n=>{if(n.projectCorrectAnswerId.includes(",")){const d=n.projectCorrectAnswerId.split(",").map(r=>r.trim());e=e.concat(d)}else e.push(n.projectCorrectAnswerId.trim())}),e},b=async v=>{const e=await L.getDetail({id:v.id}),n=E(JSON.parse(e.data.projectJson));n.pages.forEach(r=>{r.elements.forEach(t=>{t.readOnly=!0;const f=e.data.projectSurveyScreenDetailInfoList.find(l=>l.projectProblemId===t.surveyId);if(f&&t.type==="radiogroup"){const l=t.choices.filter(_=>f.projectAnswerId.includes(_.surveyId));t.defaultValue=l.map(_=>_.value)}})}),o.survey=new x.Model(JSON.stringify(n)),o.survey.showNavigationButtons=!1;const d=g(e.data.projectSurveyScreenDetailInfoList);o.survey.onUpdateChoiceItemCss.add(function(r,t){d.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),o.visible=!0};return j(async()=>{}),S({showEdit:b}),(v,e)=>{const n=A,d=m("el-tooltip"),r=m("SurveyComponent"),t=m("ElButton"),f=m("ElDrawer");return I(),C("div",null,[p(f,{modelValue:i(o).visible,"onUpdate:modelValue":e[2]||(e[2]=l=>i(o).visible=l),title:"",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{header:c(()=>[a("div",P,[a("div",z,[u(" 查看 "),p(d,{class:"tooltips",content:"",placement:"top",effect:"light"},{content:c(()=>[J]),default:c(()=>[p(n,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])])]),footer:c(()=>[p(t,{size:"large",onClick:e[0]||(e[0]=l=>i(o).visible=!1)},{default:c(()=>[u(" 取消 ")]),_:1}),p(t,{type:"primary",size:"large",onClick:e[1]||(e[1]=l=>i(o).visible=!1)},{default:c(()=>[u(" 确定 ")]),_:1})]),default:c(()=>[i(o).survey?(I(),k(r,{key:0,model:i(o).survey,style:{width:"100%"}},null,8,["model"])):D("",!0)]),_:1},8,["modelValue"])])}}}),$=B(M,[["__scopeId","data-v-fc372c65"]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{L as a,T as i,$ as q};
