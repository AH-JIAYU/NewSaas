
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as B,T as M}from"./index-CMcwCp_2.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-uELPNAkp.js";import{d as S,r as n,a1 as z,a2 as P,a as v,o as u,b as T,f as m,w as p,g as y,e as f,F as U,n as $,D as g,G as E,Q as F,j as h,an as j,P as G}from"./index-CWfNE84P.js";import"./index-CpF7Xi-T.js";import"./zh_Hans-B39mJ-rS.js";import"./apiLoading-Co-fM2aJ.js";import"./file-e3tl1ejx.js";import"./projectManagement-DcLCsOK4.js";import"./otherFunctions_basicDictionary-BT9S_2Dy.js";import"./basicDictionary-cR0OZGe9.js";import"./user_customer-B_E8YCrv.js";import"./user_customer-CUBCwvUV.js";const Q={style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},q=S({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(x,{expose:I,emit:k}){const L=B(),r=x,R=k,V=n(),e=n(r.leftTabsData),A=n(r.validateTopTabs),b=n(),_=n(0),t=n(0);function C(){const{projectId:o,parentId:a,...l}=j(e.value[0]);e.value[t.value].projectId&&(l.projectId=e.value[t.value].projectId,l.parentId=e.value[t.value].parentId),b.value[t.value].getUpLoad(l.descriptionUrl),e.value.splice(t.value,1,l)}function D(){t.value=++_.value;const{projectId:o,...a}=j(L.initialTopTabsData);e.value.push(a)}function w(o){e.value.splice(o,1),A.value.splice(o,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),_.value=Math.max(0,e.value.length-1))}return z(()=>t.value,(o,a)=>{r.validateAll.reduce((d,c,s)=>(c==="rejected"&&d.push(s),d),[]).includes(a)&&R("validate")}),e.value.forEach((o,a)=>{const l=n(null);P(`formRef${a}`,l)}),I({activeLeftTab:t}),(o,a)=>{const l=v("el-button"),d=v("el-tab-pane"),c=v("el-tabs");return u(),T("div",null,[m(l,{class:"button",disabled:e.value.length>29||r.title==="编辑"&&e.value[0].parentId!=="0",onClick:a[0]||(a[0]=s=>D())},{default:p(()=>[y(" 新增 ")]),_:1},8,["disabled"]),e.value.length?(u(),f(c,{key:0,modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=s=>t.value=s),"tab-position":"left",onTabRemove:w},{default:p(()=>[(u(!0),T(U,null,$(e.value,(s,i)=>(u(),f(d,{key:i,style:{position:"relative"},closable:e.value.length!==1,name:i},{label:p(()=>[g("div",{class:F(r.validateAll[i]&&r.validateAll[i]==="rejected"?"validateRejected":"")},E(s.name||"项目名称"),3)]),default:p(()=>[g("div",Q,[t.value>0?(u(),f(l,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:C},{default:p(()=>[y(" 同步数据 ")]),_:1})):h("",!0)]),m(M,{ref_for:!0,ref_key:"topTabsRef",ref:b,"left-tab":s,"tab-index":i},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),m(N,{ref_key:"settingsRef",ref:V},null,512)]),_:1},8,["modelValue"])):h("",!0)])}}}),oe=G(q,[["__scopeId","data-v-552ded25"]]);export{oe as default};
