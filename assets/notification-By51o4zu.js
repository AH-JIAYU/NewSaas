
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as U,aK as z,r as v,H as P,c as L,n as F,a as b,o as d,b as c,f as u,w as _,y as o,i as e,N as f,z as l,ah as N,F as S,t as $,j as p,e as m,aL as D,s as j,aq as K,a4 as q,ap as O,L as G,ao as x}from"./index-BrM9WDxg.js";import J from"./notification-news-15cFPMa4.js";import Q from"./notification-cooperation-Cgnf9V_3.js";const W={class:"absolute-container"},X={class:"flex-c"},Y={class:"left"},Z={class:"buttons"},ee=["onClick"],te={class:"info"},se={class:"time"},ae={key:0,class:"new"},oe={class:"auditType"},ne={class:"time"},ie={class:"data"},de={class:"buttons"},le=["onClick"],ce={class:"info"},re={class:"time"},ue={key:0,class:"new"},_e={class:"auditType"},fe={class:"time"},pe={class:"data"},ye={key:0,class:"right"},E=U({name:"PersonalNotification",__name:"notification",setup(me){const i=z(),g=v(),h=v(),r=P(),t=v({tabs:"",selectId:"",ReadAlready:1});function k(s){t.value.selectId=s.id,q(()=>{var n;(n=h.value)==null||n.showEdit(s)})}function w(s){t.value.selectId=s.id,q(()=>{g.value.showEdit(s)})}const V=async()=>{t.value.selectId="",t.value.ReadAlready=1,t.value.tabs==="news"?await i.getUnreadMessage():t.value.tabs==="cooperation"&&await i.getUnreadTodo()};async function R(){t.value.selectId=""}const y=async s=>{t.value.ReadAlready=s,t.value.tabs==="news"?await i.getUnreadMessage():t.value.tabs==="cooperation"&&await i.getUnreadTodo()},C=L(()=>i.messageList.filter(s=>s.isReadAlready===t.value.ReadAlready)),I=L(()=>t.value.ReadAlready===1?i.todoList.filter(s=>s.auditStatus===1):i.todoList.filter(s=>s.auditStatus!==1));return F(()=>{if(i.isItConnected(),t.value.tabs=r.query.type==2?"cooperation":"news",r.query.id){if(Number(r.query.type)===1){const s=i.messageList.find(n=>n.id===r.query.id);s&&k(s)}else if(Number(r.query.type)===2){const s=i.todoList.find(n=>n.id===r.query.id);s&&w(s)}}}),(s,n)=>{const T=b("el-empty"),A=b("el-tab-pane"),B=b("el-tabs"),H=O;return d(),c("div",W,[u(H,null,{default:_(()=>[o("div",X,[o("div",Y,[u(B,{modelValue:e(t).tabs,"onUpdate:modelValue":n[4]||(n[4]=a=>e(t).tabs=a),onTabChange:V},{default:_(()=>[u(A,{label:"消息",name:"news"},{default:_(()=>[o("div",Z,[o("button",{class:f(e(t).ReadAlready===1?"unread":""),onClick:n[0]||(n[0]=a=>y(1))}," 未读"+l(e(i).message<100?`(${e(i).message})`:"99+"),3),o("button",{class:f(e(t).ReadAlready===2?"read":""),read:"",onClick:n[1]||(n[1]=a=>y(2))}," 已读 ",2)]),u(e(N),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[e(C).length?(d(!0),c(S,{key:0},$(e(C),a=>(d(),c("div",{class:f({item:"item",select:a.id===e(t).selectId}),onClick:M=>k(a)},[o("div",te,[o("div",se,[a.isReadAlready===1?(d(),c("span",ae)):p("",!0),o("span",oe,l(e(i).auditTypeList[a.auditType-1]||""),1),o("span",ne,l(a.createTime),1)]),o("div",ie,l(a.messageContent),1)])],10,ee))),256)):(d(),m(T,{key:1,image:e(D),"image-size":300},null,8,["image"]))]),_:1})]),_:1}),u(A,{label:"代办",name:"cooperation"},{default:_(()=>[o("div",de,[o("button",{class:f(e(t).ReadAlready===1?"unread":""),onClick:n[2]||(n[2]=a=>y(1))}," 待办"+l(e(i).todo<100?`(${e(i).todo})`:"99+"),3),o("button",{class:f(e(t).ReadAlready===2?"read":""),read:"",onClick:n[3]||(n[3]=a=>y(2))}," 已办 ",2)]),u(e(N),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[e(I).length?(d(!0),c(S,{key:0},$(e(I),a=>(d(),c("div",{class:f({item:"item",select:a.id===e(t).selectId}),onClick:M=>w(a)},[o("div",ce,[o("div",re,[a.isReadAlready===1?(d(),c("span",ue)):p("",!0),o("span",_e,l(e(i).auditTypeList[a.auditType-1]||""),1),o("span",fe,l(a.createTime),1)]),o("div",pe," 您好，我是"+l(a.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(a.phoneOrEmail)+"。 ",1)])],10,le))),256)):(d(),m(T,{key:1,image:e(D),"image-size":300},null,8,["image"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(t).selectId?j((d(),c("div",ye,[e(t).tabs==="news"?(d(),m(J,{key:0,ref_key:"newsRef",ref:h,onDelSelectId:R},null,512)):p("",!0),e(t).tabs==="cooperation"?(d(),m(Q,{key:1,ref_key:"cooperationRef",ref:g,onDelSelectId:R},null,512)):p("",!0)],512)),[[K,e(t).selectId]]):p("",!0)])]),_:1})])}}});typeof x=="function"&&x(E);const he=G(E,[["__scopeId","data-v-2fe1f7d4"]]);export{he as default};
