
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ue,aM as pe,r as m,a3 as ce,n as de,a as v,q as me,o as n,b as fe,f as a,w as t,e as s,j as c,g as l,s as ee,i as f,aL as te,y as d,z as u,N as L,b8 as _e,b9 as ge,ap as ve,L as be}from"./index-rEB4CdRn.js";import{_ as ye}from"./index-Cfsqb0U4.js";import{_ as he}from"./index.vue_vue_type_style_index_0_lang-CHgrom9U.js";import{_ as je}from"./index-DXZ6UwBk.js";import{u as ke,o as Ie,a as ae}from"./index-Ba6a111H.js";import"./index-Dn3pIAmZ.js";import"./index.vue_vue_type_script_setup_true_lang-kMUPohPM.js";import"./sortable.esm-C0-Qcoum.js";const we={class:"tableBig"},Ce={class:"tableBig"},Se={class:"copyId tableSmall"},Ne={class:"id oneLine projectId"},Le={class:"tableBig oneLine"},ze={class:"copyId tableSmall"},De={class:"id oneLine projectId"},xe={class:"tableBig"},Ue={class:"tableBig"},Be={class:"copyId tableSmall"},He={class:"id oneLine projectId"},Ae={class:"tableBig"},Re={class:"copyId tableSmall"},Pe={class:"id oneLine projectId"},Ve=ue({name:"outsource",__name:"list",setup(Ee){const B=ke(),{pagination:_,getParams:oe,onSizeChange:le,onCurrentChange:ne}=pe(),H=m(""),C=m(!0),y=m(!1),A=m(),S=m(!1),i=m([]),U=m(),R=m("formSearch-outsource"),h=m("default"),j=m(!1),N=m([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),b=ce({projectId:"",tenantId:"",tenantName:"",projectStatus:"",type:2}),z=m([]);function P(r){A.value.showEdit(r,b.type===2?1:0)}function V(r){le(r).then(()=>I())}function k(r=1){ne(r).then(()=>I())}function E(){Object.assign(b,{tenantId:"",tenantName:"",projectStatus:"",type:2}),I()}async function I(){try{C.value=!0;const r={...oe(),...b};if(b.type===1){const o=await ae.list(r);z.value=o.data.projectAllocationInfoList,_.value.total=o.data.total}else{const o=await ae.meList(r);z.value=o.data.projectMeAllocationInfoList,_.value.total=o.data.total}C.value=!1}catch{}finally{C.value=!1}}de(()=>{N.value.forEach(r=>{r.checked&&i.value.push(r.prop)}),I(),U.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"tenantId",placeholder:"租户ID"},{index:3,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:4,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const M={projectStatus:()=>B.projectStatusList.map((r,o)=>({label:r,value:o+1}))},w=m();function O(r){r?w.value=r.projectId:w.value=""}return(r,o)=>{const F=je,$=v("ElDivider"),Q=he,D=v("el-button"),T=_e,q=ge,G=v("el-row"),p=v("el-table-column"),g=v("el-text"),x=ye,J=v("el-tooltip"),K=v("el-empty"),W=v("el-table"),X=v("ElPagination"),Y=v("el-tab-pane"),se=v("el-tabs"),re=ve,Z=me("loading");return n(),fe("div",{class:L({"absolute-container":S.value})},[a(re,null,{default:t(()=>[a(se,{modelValue:b.type,"onUpdate:modelValue":o[14]||(o[14]=e=>b.type=e),onTabChange:I},{default:t(()=>[a(Y,{label:"外包项目",name:2},{default:t(()=>[b.type===2?(n(),s(F,{key:0,formSearchList:U.value,formSearchName:R.value,onCurrentChange:k,onOnReset:E,model:b,formOption:M},null,8,["formSearchList","formSearchName","model"])):c("",!0),a($,{"border-style":"dashed"}),a(G,{gutter:24},{default:t(()=>[a(Q),a(q,null,{default:t(()=>[a(D,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:t(()=>[l(" 导出 ")]),_:1}),a(T,{border:y.value,"onUpdate:border":o[1]||(o[1]=e=>y.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>S.value=e),checkList:i.value,"onUpdate:checkList":o[3]||(o[3]=e=>i.value=e),columns:N.value,"onUpdate:columns":o[4]||(o[4]=e=>N.value=e),"line-height":h.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>h.value=e),stripe:j.value,"onUpdate:stripe":o[6]||(o[6]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ee((n(),s(W,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:z.value,border:y.value,size:h.value,stripe:j.value,"highlight-current-row":"",onCurrentChange:O},{empty:t(()=>[a(K,{image:f(te),"image-size":300},null,8,["image"])]),default:t(()=>[a(p,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(p,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",width:"140",label:"状态"},{default:t(({row:e})=>[d("span",we,[e.projectStatus===1?(n(),s(g,{key:0,type:"primary"},{default:t(()=>[l(" 进行中(在线)")]),_:1})):e.projectStatus===2?(n(),s(g,{key:1,type:"warning"},{default:t(()=>[l(" 已完成(审核通过)")]),_:1})):e.projectStatus===3?(n(),s(g,{key:2,type:"info"},{default:t(()=>[l(" 离线")]),_:1})):c("",!0)])]),_:1})):c("",!0),i.value.includes("tenantName")?(n(),s(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",Ce,u(e.tenantName),1)]),_:1})):c("",!0),i.value.includes("tenantId")?(n(),s(p,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",width:"280",label:"租户ID"},{default:t(({row:e})=>[d("div",Se,[d("div",Ne,u(e.tenantId),1),a(x,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===w.value})},null,8,["content","class"])])]),_:1})):c("",!0),i.value.includes("projectName")?(n(),s(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Le,u(e.projectName),1)]),_:1})):c("",!0),i.value.includes("projectId")?(n(),s(p,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[d("div",ze,[d("div",De,[a(J,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[l(u(e.projectId),1)]),_:2},1032,["content"])]),a(x,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===w.value})},null,8,["content","class"])])]),_:1})):c("",!0),i.value.includes("participationNumber")?(n(),s(p,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[l("参与: "+u(e.participationNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[l("完成: "+u(e.doneNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[l("配额: "+u(e.num||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[l("限量: "+u(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(p,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(D,{type:"primary",plain:"",size:"small",onClick:ie=>P(e)},{default:t(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Z,C.value]]),a(X,{"current-page":f(_).page,total:f(_).total,"page-size":f(_).size,"page-sizes":f(_).sizes,layout:f(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(Y,{label:"接收项目",name:1},{default:t(()=>[b.type===1?(n(),s(F,{key:0,formSearchList:U.value,formSearchName:R.value,onCurrentChange:k,onOnReset:E,model:b,formOption:M},null,8,["formSearchList","formSearchName","model"])):c("",!0),a($,{"border-style":"dashed"}),a(G,{gutter:24},{default:t(()=>[a(Q),a(q,null,{default:t(()=>[a(D,{size:"default",onClick:o[7]||(o[7]=()=>{})},{default:t(()=>[l(" 导出 ")]),_:1}),a(T,{border:y.value,"onUpdate:border":o[8]||(o[8]=e=>y.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":o[9]||(o[9]=e=>S.value=e),checkList:i.value,"onUpdate:checkList":o[10]||(o[10]=e=>i.value=e),columns:N.value,"onUpdate:columns":o[11]||(o[11]=e=>N.value=e),"line-height":h.value,"onUpdate:lineHeight":o[12]||(o[12]=e=>h.value=e),stripe:j.value,"onUpdate:stripe":o[13]||(o[13]=e=>j.value=e),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ee((n(),s(W,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:z.value,border:y.value,size:h.value,"highlight-current-row":"",stripe:j.value,onCurrentChange:O},{empty:t(()=>[a(K,{image:f(te),"image-size":300},null,8,["image"])]),default:t(()=>[a(p,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(p,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态",width:"140"},{default:t(({row:e})=>[d("span",xe,u(f(B).projectStatusList[e.projectStatus-1]),1)]),_:1})):c("",!0),i.value.includes("tenantName")?(n(),s(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[d("div",Ue,u(e.tenantName),1)]),_:1})):c("",!0),i.value.includes("tenantId")?(n(),s(p,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID",width:"280"},{default:t(({row:e})=>[d("div",Be,[d("div",He,u(e.tenantId),1),a(x,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===w.value})},null,8,["content","class"])])]),_:1})):c("",!0),i.value.includes("projectName")?(n(),s(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[d("div",Ae,u(e.projectName),1)]),_:1})):c("",!0),i.value.includes("projectId")?(n(),s(p,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[d("div",Re,[d("div",Pe,[a(J,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[l(u(e.projectId),1)]),_:2},1032,["content"])]),a(x,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===w.value})},null,8,["content","class"])])]),_:1})):c("",!0),i.value.includes("participationNumber")?(n(),s(p,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[l("参与: "+u(e.participationNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[l("完成: "+u(e.doneNumber||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[l("配额: "+u(e.num||0),1)]),_:2},1024),l("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[l("限量: "+u(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):c("",!0),a(p,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(D,{type:"primary",plain:"",size:"small",onClick:ie=>P(e)},{default:t(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Z,C.value]]),a(X,{"current-page":f(_).page,total:f(_).total,"page-size":f(_).size,"page-sizes":f(_).sizes,layout:f(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:k},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),a(Ie,{ref_key:"editRef",ref:A,onFetchData:I},null,512)]),_:1})],2)}}}),Je=be(Ve,[["__scopeId","data-v-15318f04"]]);export{Je as default};
