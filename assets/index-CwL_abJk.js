
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as y,d as b,$ as j,n as h,a as f,o as g,b as C,f as p,w as r,v as n,g as u,i,e as E,j as k,ap as D,E as x,br as A,_ as V,aI as B,aJ as L,M as N}from"./index-fxjDEbzK.js";/* empty css                      */const J={list:s=>y.post("callback/getProjectSurveyScreenList",s),childList:s=>y.post("callback/getProjectScreenMemberChildList",s),getDetail:s=>y.post("callback/getProjectSurveyScreenDetailList",s)},M=s=>(B("data-v-e442ce23"),s=s(),L(),s),O={class:"heade"},P={class:"title"},$=M(()=>n("div",{class:"tooltip"},[n("div",null,[n("div",{class:"label"},[n("span",{class:"red"},"红色")]),u(" : 正确答案 ")]),n("div",null,[n("div",{class:"label"},[n("span",{class:"spot"})]),u(" : 所选答案 ")])],-1)),z=b({__name:"index",setup(s,{expose:I}){const o=j({visible:!1,survey:null}),S=v=>{let e=[];return v.forEach(a=>{if(a.projectCorrectAnswerId.includes(",")){const d=a.projectCorrectAnswerId.split(",").map(c=>c.trim());e=e.concat(d)}else e.push(a.projectCorrectAnswerId.trim())}),e},w=async v=>{const e=await J.getDetail({id:v.id}),a=D(JSON.parse(e.data.projectJson));if(console.log(a,"projectJson"),!a)x.warning({message:"无详情数据",center:!0});else{a.pages.forEach(c=>{c.elements.forEach(t=>{t.readOnly=!0;const m=e.data.projectSurveyScreenDetailInfoList.find(l=>l.projectProblemId===t.surveyId);if(m&&t.type==="radiogroup"){const l=t.choices.filter(_=>m.projectAnswerId.includes(_.surveyId));t.defaultValue=l.map(_=>_.value)}})}),o.survey=new A.Model(JSON.stringify(a)),o.survey.showNavigationButtons=!1;const d=S(e.data.projectSurveyScreenDetailInfoList);o.survey.onUpdateChoiceItemCss.add(function(c,t){d.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),o.visible=!0}};return h(async()=>{}),I({showEdit:w}),(v,e)=>{const a=V,d=f("el-tooltip"),c=f("SurveyComponent"),t=f("ElButton"),m=f("ElDrawer");return g(),C("div",null,[p(m,{modelValue:i(o).visible,"onUpdate:modelValue":e[2]||(e[2]=l=>i(o).visible=l),title:"",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{header:r(()=>[n("div",O,[n("div",P,[u(" 查看 "),p(d,{class:"tooltips",content:"",placement:"top",effect:"light"},{content:r(()=>[$]),default:r(()=>[p(a,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])])]),footer:r(()=>[p(t,{size:"large",onClick:e[0]||(e[0]=l=>i(o).visible=!1)},{default:r(()=>[u(" 取消 ")]),_:1}),p(t,{type:"primary",size:"large",onClick:e[1]||(e[1]=l=>i(o).visible=!1)},{default:r(()=>[u(" 确定 ")]),_:1})]),default:r(()=>[i(o).survey?(g(),E(c,{key:0,model:i(o).survey,style:{width:"100%"}},null,8,["model"])):k("",!0)]),_:1},8,["modelValue"])])}}}),q=N(z,[["__scopeId","data-v-e442ce23"]]),U=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{J as a,U as i,q};
