
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as me,d as fe,aK as be,r as m,k as _e,a as i,p as ge,o as s,b as P,f as l,w as o,i as t,az as z,F as ve,t as ye,q as B,g as f,H as h,I,e as d,j as b,S as he,bb as Ie,N as ke,aM as we,aN as Se,ap as Ce,aG as De,aH as Ve,s as je,aq as x,R as Te}from"./index-D8dYCUsd.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-Drv89al4.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-C7jQC05A.js";const Ne={list:v=>me.post("callback/getProjectTerminationScreenDetail",v)},$e=v=>(De("data-v-5af3ff85"),v=v(),Ve(),v),xe=$e(()=>je("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=fe({name:"termination",__name:"index",setup(v){const{getParams:F,pagination:g,onSizeChange:H,onCurrentChange:L}=be(),{format:K}=Ie(),w=m(!1),E=m([]),R=m(""),p=m([]),S=m(!0),C=m(!1),D=m("default"),V=m(!1),j=m([{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),U=[{label:"内部",value:1},{label:"外部",value:2}],r=m({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function q(){g.value.page=1,k()}function A(u){H(u).then(()=>k())}function _(u=1){L(u).then(()=>k())}async function k(){try{w.value=!0;const u={...F(),...r.value};r.value.time&&r.value.time.length&&(u.beginTime=r.value.time[0]||"",u.endTime=r.value.time[1]||"");const e=await Ne.list(u);E.value=e.data.projectTerminationScreenDetailInfoList,g.value.total=e.data.total,w.value=!1}catch{}finally{w.value=!1}}function Y(){Object.assign(r.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),k()}function G(u){R.value=u}return _e(()=>{j.value.forEach(u=>{u.checked&&p.value.push(u.prop)}),k()}),(u,e)=>{const T=i("el-input"),y=i("el-form-item"),O=i("el-option"),Q=i("el-select"),J=i("el-date-picker"),M=ke,N=i("ElButton"),W=i("ElFormItem"),X=i("ElForm"),Z=Be,ee=i("ElDivider"),te=ze,le=i("el-button"),oe=we,ne=Se,ae=i("el-row"),c=i("el-table-column"),$=i("el-text"),re=i("el-tag"),ie=i("el-empty"),se=i("el-table"),ue=i("ElPagination"),pe=Ce,de=ge("loading");return s(),P("div",{class:he({"absolute-container":t(V)})},[l(pe,null,{default:o(()=>[l(Z,{"show-toggle":!1},{default:o(({fold:n,toggle:ce})=>[l(X,{model:t(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[l(y,{label:""},{default:o(()=>[l(T,{modelValue:t(r).tenantSupplierId,"onUpdate:modelValue":e[0]||(e[0]=a=>t(r).tenantSupplierId=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:e[1]||(e[1]=z(a=>_(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:o(()=>[l(T,{modelValue:t(r).projectId,"onUpdate:modelValue":e[2]||(e[2]=a=>t(r).projectId=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:e[3]||(e[3]=z(a=>_(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:o(()=>[l(Q,{modelValue:t(r).surveySource,"onUpdate:modelValue":e[4]||(e[4]=a=>t(r).surveySource=a),"value-key":"",placeholder:"会员类型",clearable:"",filterable:"",onChange:e[5]||(e[5]=a=>_())},{default:o(()=>[(s(),P(ve,null,ye(U,a=>l(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),B(l(y,{label:""},{default:o(()=>[l(T,{modelValue:t(r).projectName,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).projectName=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:e[7]||(e[7]=z(a=>_(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[x,!n]]),B(l(y,{label:""},{default:o(()=>[l(T,{modelValue:t(r).ipBelong,"onUpdate:modelValue":e[8]||(e[8]=a=>t(r).ipBelong=a),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP/所属国",onKeydown:e[9]||(e[9]=z(a=>_(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[x,!n]]),B(l(y,{label:""},{default:o(()=>[l(J,{modelValue:t(r).time,"onUpdate:modelValue":e[10]||(e[10]=a=>t(r).time=a),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",onChange:e[11]||(e[11]=a=>_())},null,8,["modelValue"])]),_:2},1536),[[x,!n]]),l(W,null,{default:o(()=>[l(N,{type:"primary",onClick:e[12]||(e[12]=a=>_())},{icon:o(()=>[l(M,{name:"i-ep:search"})]),default:o(()=>[f(" 筛选 ")]),_:1}),l(N,{onClick:Y},{icon:o(()=>[xe]),default:o(()=>[f(" 重置 ")]),_:1}),l(N,{link:"",onClick:ce},{icon:o(()=>[l(M,{name:n?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[f(" "+h(n?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(ee,{"border-style":"dashed"}),l(ae,null,{default:o(()=>[l(te),l(ne,null,{default:o(()=>[l(le,{size:"default"},{default:o(()=>[f(" 导出 ")]),_:1}),l(oe,{border:t(S),"onUpdate:border":e[13]||(e[13]=n=>I(S)?S.value=n:null),tableAutoHeight:t(V),"onUpdate:tableAutoHeight":e[14]||(e[14]=n=>I(V)?V.value=n:null),checkList:t(p),"onUpdate:checkList":e[15]||(e[15]=n=>I(p)?p.value=n:null),columns:t(j),"onUpdate:columns":e[16]||(e[16]=n=>I(j)?j.value=n:null),"line-height":t(D),"onUpdate:lineHeight":e[17]||(e[17]=n=>I(D)?D.value=n:null),stripe:t(C),"onUpdate:stripe":e[18]||(e[18]=n=>I(C)?C.value=n:null),style:{"margin-left":"12px"},onQueryData:q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),B((s(),d(se,{border:t(S),data:t(E),size:t(D),stripe:t(C),onSelectionChange:G},{empty:o(()=>[l(ie,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[l(c,{align:"center",type:"selection"}),t(p).includes("surveySource")?(s(),d(c,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",width:"100",label:"会员类型"},{default:o(({row:n})=>[f(h(U[n.surveySource-1].label),1)]),_:1})):b("",!0),t(p).includes("memberChildId")?(s(),d(c,{key:1,align:"center",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:n})=>[n.peopleType===1?(s(),d($,{key:0},{default:o(()=>[f(h(n.memberChildId),1)]),_:2},1024)):b("",!0)]),_:1})):b("",!0),t(p).includes("supplierMemberChildId")?(s(),d(c,{key:2,align:"center",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:o(({row:n})=>[n.peopleType!==1?(s(),d($,{key:0},{default:o(()=>[f(h(n.memberChildId),1)]),_:2},1024)):(s(),d($,{key:1},{default:o(()=>[f(" - ")]),_:1}))]),_:1})):b("",!0),t(p).includes("tenantSupplierId")?(s(),d(c,{key:3,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:n})=>[f(h(n.tenantSupplierId?n.tenantSupplierId:"-"),1)]),_:1})):b("",!0),t(p).includes("projectId")?(s(),d(c,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):b("",!0),t(p).includes("projectName")?(s(),d(c,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):b("",!0),t(p).includes("ipBelong")?(s(),d(c,{key:6,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):b("",!0),t(p).includes("notes")?(s(),d(c,{key:7,align:"center",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"})):b("",!0),t(p).includes("terminationTime")?(s(),d(c,{key:8,align:"center",prop:"terminationTime","show-overflow-tooltip":"",label:"终止时间"},{default:o(({row:n})=>[l(re,{effect:"plain",type:"info"},{default:o(()=>[f(h(t(K)(n.terminationTime)),1)]),_:2},1024)]),_:1})):b("",!0)]),_:1},8,["border","data","size","stripe"])),[[de,t(w)]]),l(ue,{"current-page":t(g).page,total:t(g).total,"page-size":t(g).size,"page-sizes":t(g).sizes,layout:t(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Fe=Te(Ee,[["__scopeId","data-v-5af3ff85"]]);export{Fe as default};
