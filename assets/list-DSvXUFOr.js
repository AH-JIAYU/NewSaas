
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as fe,d as ve,aK as ye,r as f,a1 as $,n as ge,a as u,an as Ie,o as s,b as U,f as l,w as o,i as e,ak as h,F as H,p as A,e as c,g as p,B as m,C as k,j as d,O as he,J as ke,aM as Se,aN as we,aj as Ce,aH as Ne,aI as Ve,A as Le,al as C,N as je}from"./index-ZCXpFWW9.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-WdbbWnHZ.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-DThlzoRm.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-C01pGGqC.js";import{u as Ue}from"./user_customer-D8qXgHfs.js";import"./user_customer-Ck4cb0z4.js";const De={list:g=>fe.post("callback/getMemberSurveyRecord",g)},Be=g=>(Ne("data-v-12843e19"),g=g(),Ve(),g),Pe=Be(()=>Le("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Me=ve({name:"RecordSurveyIndex",__name:"list",setup(g){const G=Ue(),{getParams:q,pagination:I,onSizeChange:O,onCurrentChange:J}=ye(),z=f(!1),D=f([]),K=f(""),i=f([]),N=f(!0),V=f(!1),L=f("default"),j=f(!1),Q=f(),T=f([{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),r=$({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),v=$({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function W(){r.pageNo=1,S()}function X(b){O(b).then(()=>S())}function B(b=1){J(b).then(()=>S())}async function S(){z.value=!0;const b={...q(),...r},{data:a}=await De.list(b);D.value=a.memberSurveyRecordInfoList,Q.value=a.currencyType,I.value.total=a.total,z.value=!1}function Y(b){K.value=b}function Z(){Object.assign(r,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),S()}return ge(async()=>{v.customerList=await G.getCustomerList(),T.value.forEach(b=>{b.checked&&i.value.push(b.prop)}),S()}),(b,a)=>{const w=u("el-input"),y=u("el-form-item"),P=u("el-option"),M=u("el-select"),F=ke,E=u("ElButton"),ee=u("ElFormItem"),te=u("ElForm"),le=Ee,oe=u("ElDivider"),ae=ze,ne=u("el-button"),re=Se,se=we,ie=u("el-row"),_=u("el-table-column"),R=Te,x=u("ElTableColumn"),ue=u("el-empty"),ce=u("el-table"),pe=u("ElPagination"),me=Ce,de=Ie("loading");return s(),U("div",{class:he({"absolute-container":e(j)})},[l(me,null,{default:o(()=>[l(le,{"show-toggle":!1},{default:o(({fold:t,toggle:be})=>[l(te,{model:e(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[l(y,{label:""},{default:o(()=>[l(w,{modelValue:e(r).memberId,"onUpdate:modelValue":a[0]||(a[0]=n=>e(r).memberId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),h(l(y,{label:""},{default:o(()=>[l(w,{modelValue:e(r).randomIdentityId,"onUpdate:modelValue":a[1]||(a[1]=n=>e(r).randomIdentityId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),l(y,{label:""},{default:o(()=>[l(w,{modelValue:e(r).projectId,"onUpdate:modelValue":a[2]||(a[2]=n=>e(r).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),h(l(y,{label:""},{default:o(()=>[l(w,{modelValue:e(r).name,"onUpdate:modelValue":a[3]||(a[3]=n=>e(r).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),h(l(y,{label:""},{default:o(()=>[l(M,{modelValue:e(r).projectName,"onUpdate:modelValue":a[4]||(a[4]=n=>e(r).projectName=n),clearable:"",placeholder:"客户简称"},{default:o(()=>[(s(!0),U(H,null,A(e(v).customerList,n=>(s(),c(P,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!t]]),h(l(y,{label:""},{default:o(()=>[l(w,{modelValue:e(r).ip,"onUpdate:modelValue":a[5]||(a[5]=n=>e(r).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[C,!t]]),h(l(y,{label:""},{default:o(()=>[l(M,{modelValue:e(r).surveyStatus,"onUpdate:modelValue":a[6]||(a[6]=n=>e(r).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:o(()=>[(s(!0),U(H,null,A(e(v).surveyStatusList,(n,_e)=>(s(),c(P,{label:n,value:_e+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!t]]),l(ee,null,{default:o(()=>[l(E,{type:"primary",onClick:a[7]||(a[7]=n=>B())},{icon:o(()=>[l(F,{name:"i-ep:search"})]),default:o(()=>[p(" 筛选 ")]),_:1}),l(E,{onClick:Z},{icon:o(()=>[Pe]),default:o(()=>[p(" 重置 ")]),_:1}),l(E,{link:"",onClick:be},{icon:o(()=>[l(F,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[p(" "+m(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(oe,{"border-style":"dashed"}),l(ie,null,{default:o(()=>[l(ae),l(se,null,{default:o(()=>[l(ne,{size:"default"},{default:o(()=>[p(" 导出 ")]),_:1}),l(re,{border:e(N),"onUpdate:border":a[8]||(a[8]=t=>k(N)?N.value=t:null),tableAutoHeight:e(j),"onUpdate:tableAutoHeight":a[9]||(a[9]=t=>k(j)?j.value=t:null),checkList:e(i),"onUpdate:checkList":a[10]||(a[10]=t=>k(i)?i.value=t:null),columns:e(T),"onUpdate:columns":a[11]||(a[11]=t=>k(T)?T.value=t:null),"line-height":e(L),"onUpdate:lineHeight":a[12]||(a[12]=t=>k(L)?L.value=t:null),stripe:e(V),"onUpdate:stripe":a[13]||(a[13]=t=>k(V)?V.value=t:null),style:{"margin-left":"12px"},onQueryData:W},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),h((s(),c(ce,{border:e(N),data:e(D),size:e(L),stripe:e(V),onSelectionChange:Y},{empty:o(()=>[l(ue,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[l(_,{align:"center",type:"selection"}),e(i).includes("memberId")?(s(),c(_,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"})):d("",!0),e(i).includes("randomIdentityId")?(s(),c(_,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:o(({row:t})=>[p(m(t.randomIdentityId?t.randomIdentityId:"-"),1)]),_:1})):d("",!0),e(i).includes("memberName")?(s(),c(_,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"},{default:o(({row:t})=>[p(m(t.memberName?t.memberName:"-"),1)]),_:1})):d("",!0),e(i).includes("projectId")?(s(),c(_,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):d("",!0),e(i).includes("projectName")?(s(),c(_,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:t})=>[p(m(t.projectName?t.projectName:"-"),1)]),_:1})):d("",!0),e(i).includes("projectName")?(s(),c(_,{key:5,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"},{default:o(({row:t})=>[p(m(t.customerShortName?t.customerShortName:"-"),1)]),_:1})):d("",!0),e(i).includes("allocationType")?(s(),c(_,{key:6,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:o(({row:t})=>[p(m(e(v).allocationTypeList[t.allocationType-1]),1)]),_:1})):d("",!0),e(i).includes("price")?(s(),c(_,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"原价/会员价"},{default:o(({row:t})=>[p(m(t.doMoneyPrice||0),1),l(R),p(" / "+m(t.memberPrice||0),1),l(R)]),_:1})):d("",!0),e(i).includes("ipBelong")?(s(),c(_,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):d("",!0),e(i).includes("surveyTime")?(s(),c(_,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:o(({row:t})=>[p(m(t.surveyTime?t.surveyTime+"min":0)+"/ "+m(t.projectTime?t.projectTime+"min":0),1)]),_:1})):d("",!0),e(i).includes("surveyStatus")?(s(),c(x,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:o(({row:t})=>[p(m(e(v).surveyStatusList[t.surveyStatus-1]),1)]),_:1})):d("",!0),e(i).includes("viceStatus")?(s(),c(x,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:o(({row:t})=>[p(m(e(v).viceStatusList[t.viceStatus-1]?e(v).viceStatusList[t.viceStatus-1]:"-"),1)]),_:1})):d("",!0)]),_:1},8,["border","data","size","stripe"])),[[de,e(z)]]),l(pe,{"current-page":e(I).page,total:e(I).total,"page-size":e(I).size,"page-sizes":e(I).sizes,layout:e(I).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:B},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ge=je(Me,[["__scopeId","data-v-12843e19"]]);export{Ge as default};
