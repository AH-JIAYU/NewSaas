
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ae,d as oe,aN as ne,r as s,Z as re,n as se,a as m,q as ce,o as u,b as ie,f as n,w as o,i as t,g as c,A as g,s as ue,e as p,aM as pe,z as i,j as b,y as D,N as de,be as me,ba as be,bb as he,an as fe,aH as _e,aI as ge,L as ke}from"./index-CMQCj95f.js";import{_ as ye}from"./index.vue_vue_type_style_index_0_lang-DidA5iXK.js";import{_ as ve}from"./index-BuYX8UyM.js";import"./index.vue_vue_type_script_setup_true_lang-DBBg_HHf.js";import"./sortable.esm-C0-Qcoum.js";const Se={list:_=>ae.post("callback/getCustomerCallbackRecordList",_)},L=_=>(_e("data-v-eb48655d"),_=_(),ge(),_),Ie=L(()=>D("br",null,null,-1)),Ce=L(()=>D("br",null,null,-1)),Ue=L(()=>D("br",null,null,-1)),Ne=oe({name:"callback",__name:"index",setup(_){const{pagination:h,getParams:T,onSizeChange:H,onCurrentChange:P}=ne(),{format:Q}=me(),y=s(!1),j=s([]),E=s(""),r=s([]),v=s(!1),S=s(!1),I=s("default"),C=s(!1),w=s(),V=s("formSearch-callback"),U=s([{prop:"projectQuestionnaireClickId",label:"点击ID",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID/会员ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调URL",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级URL",sortable:!0,checked:!0},{prop:"sourceUrl",label:"客户URL来源",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0},{prop:"callbackStatus",label:"回调状态",sortable:!0,checked:!0}]),x=[{label:"内部会员",value:1},{label:"外部会员",value:2}],N=[{label:"全部",value:0,type:"info"},{label:"成功",value:1,type:"success"},{label:"回调id不对",value:2,type:"warning"},{label:"加密hash不对",value:3,type:"danger"}],f=re({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0});function A(l){H(l).then(()=>k())}function z(l=1){P(l).then(()=>k())}function B(){h.value.page=1,k()}async function k(){try{y.value=!0;const l={...T(),...f};f.time&&f.time.length&&(l.beginTime=f.time[0]||"",l.endTime=f.time[1]||""),delete l.time;const a=await Se.list(l);j.value=a.data.customerCallbackRecordInfoList,h.value.total=a.data.total,y.value=!1}catch{}finally{y.value=!1}}function F(){Object.assign(f,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0}),k()}function $(l){E.value=l}se(async()=>{U.value.forEach(l=>{l.checked&&r.value.push(l.prop)}),k(),w.value=[{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:"点击ID"},{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID/会员ID"},{index:7,show:!0,type:"select",modelName:"callbackStatus",placeholder:"回调状态",option:"callbackStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"开始日期",endPlaceHolder:"结束日期"}]});const q={surveySource:()=>x,callbackStatus:()=>N};return(l,a)=>{const M=ve,O=m("ElDivider"),Z=ye,G=m("el-button"),J=be,K=he,W=m("el-row"),d=m("el-table-column"),R=m("el-tag"),X=m("el-empty"),Y=m("el-table"),ee=m("ElPagination"),te=fe,le=ce("loading");return u(),ie("div",{class:de({"absolute-container":t(C)})},[n(te,null,{default:o(()=>[n(M,{formSearchList:t(w),formSearchName:t(V),onCurrentChange:z,onOnReset:F,model:t(f),formOption:q},null,8,["formSearchList","formSearchName","model"]),n(O,{"border-style":"dashed"}),n(W,null,{default:o(()=>[n(Z),n(K,null,{default:o(()=>[n(G,{size:"default"},{default:o(()=>[c(" 导出 ")]),_:1}),n(J,{border:t(v),"onUpdate:border":a[0]||(a[0]=e=>g(v)?v.value=e:null),tableAutoHeight:t(C),"onUpdate:tableAutoHeight":a[1]||(a[1]=e=>g(C)?C.value=e:null),checkList:t(r),"onUpdate:checkList":a[2]||(a[2]=e=>g(r)?r.value=e:null),columns:t(U),"onUpdate:columns":a[3]||(a[3]=e=>g(U)?U.value=e:null),"line-height":t(I),"onUpdate:lineHeight":a[4]||(a[4]=e=>g(I)?I.value=e:null),stripe:t(S),"onUpdate:stripe":a[5]||(a[5]=e=>g(S)?S.value=e:null),style:{"margin-left":"12px"},onQueryData:B},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ue((u(),p(Y,{border:t(v),data:t(j),size:t(I),stripe:t(S),onSelectionChange:$},{empty:o(()=>[n(X,{image:t(pe),"image-size":300},null,8,["image"])]),default:o(()=>[t(r).includes("projectQuestionnaireClickId")?(u(),p(d,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:"点击ID"},{default:o(({row:e})=>[c(i(e.projectQuestionnaireClickId?e.projectQuestionnaireClickId:"-"),1)]),_:1})):b("",!0),n(d,{label:"项目",width:"300",align:"center"},{default:o(({row:e})=>[c(i(e.customerShortName)+" ",1),Ie,c(" "+i(e.projectName)+" ",1),Ce,c(" "+i(e.projectId),1)]),_:1}),t(r).includes("memberChildId")?(u(),p(d,{key:1,align:"center","show-overflow-tooltip":"",label:"子会员ID/会员ID"},{default:o(({row:e})=>[D("p",null,i(x[e.surveySource-1].label),1),c(" "+i(e.memberChildId)+" ",1),Ue,c(" "+i(e.randomIdentityId),1)]),_:1})):b("",!0),t(r).includes("callbackUrl")?(u(),p(d,{key:2,align:"left",prop:"callbackUrl",label:"回调URL"})):b("",!0),t(r).includes("subordinateUrl")?(u(),p(d,{key:3,align:"left",prop:"subordinateUrl",label:"下级URL"},{default:o(({row:e})=>[c(i(e.subordinateUrl?e.subordinateUrl:"-"),1)]),_:1})):b("",!0),t(r).includes("sourceUrl")?(u(),p(d,{key:4,align:"left",prop:"sourceUrl",label:"客户URL来源"},{default:o(({row:e})=>[c(i(e.sourceUrl?e.sourceUrl:"-"),1)]),_:1})):b("",!0),t(r).includes("callbackTime")?(u(),p(d,{key:5,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"},{default:o(({row:e})=>[n(R,{effect:"plain",type:"info"},{default:o(()=>[c(i(t(Q)(e.callbackTime)),1)]),_:2},1024)]),_:1})):b("",!0),t(r).includes("callbackStatus")?(u(),p(d,{key:6,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:"回调状态"},{default:o(({row:e})=>[e.callbackStatus&&N[e.callbackStatus]?(u(),p(R,{key:0,type:N[e.callbackStatus].type},{default:o(()=>[c(i(N[e.callbackStatus].label),1)]),_:2},1032,["type"])):b("",!0)]),_:1})):b("",!0)]),_:1},8,["border","data","size","stripe"])),[[le,t(y)]]),n(ee,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),ze=ke(Ne,[["__scopeId","data-v-eb48655d"]]);export{ze as default};
