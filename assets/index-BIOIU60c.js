
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as G,r as _,o as J,a2 as n,a as i,c as p,w as e,b as c,f as a,g as s,i as I,t as u,O as K,N as Q,aj as W,aH as X,aI as Y,y as Z}from"./index-BitsiCFM.js";import{a as $}from"./department-QoXVCrLe.js";import{u as ee}from"./tenant_role-CtU4AD-a.js";import{u as ae}from"./configuration_manager-CbEuCtil.js";import{u as te}from"./position_manage-hIl9LYOK.js";import"./configuration_role-Dg7w3Rtg.js";import"./position_manage-DvikNTPM.js";const C=b=>(X("data-v-461fee6b"),b=b(),Y(),b),le=C(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"},"基本信息")],-1)),oe={key:1,class:"avatar"},se={style:{"font-size":"14px"}},ne=C(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"},"角色信息")],-1)),ue=C(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"}," 部门信息 ")],-1)),de={class:"flex-c"},ce=G({__name:"index",emits:["fetch-data"],setup(b,{expose:T,emit:L}){const z=ae(),D=_([]),M=te(),B=_(),P=ee(),N=_(),x=_(),j={children:"children",label:"name"},g=_([]),h=_({}),E=L,y=_(!1),t=_();async function R(m){h.value=m,h.value.roleList=[h.value.role];const f={id:m.id},{status:o,data:k}=await W.list(f);k&&o===1&&(t.value=k.data[0]),g.value&&g.value.push(t.value.organizationalStructureId),y.value=!0}function V(){E("fetch-data"),g.value=[],y.value=!1}return J(async()=>{B.value=await M.getPositionManage(),D.value=await z.getStaff(),N.value=await P.getRole();const m=await $.list({name:""});m.data&&(x.value=m.data,x.value.forEach(f=>{f.disabled=!0}))}),T({showEdit:R}),(m,f)=>{const o=n("el-col"),k=n("el-avatar"),w=n("el-row"),r=n("el-text"),d=n("el-form-item"),S=n("el-card"),U=n("el-checkbox"),F=n("el-checkbox-group"),H=n("el-tree"),O=n("el-form"),q=n("el-button"),A=n("el-drawer");return i(),p(A,{modelValue:y.value,"onUpdate:modelValue":f[1]||(f[1]=l=>y.value=l),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:V},{footer:e(()=>[c("div",de,[a(q,{type:"primary",onClick:V},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(O,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(S,{class:"box-card"},{header:e(()=>[le]),default:e(()=>[a(w,{gutter:20},{default:e(()=>[a(o,{span:1}),a(o,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[t.value.avatar?(i(),p(k,{key:0,size:50,src:t.value.avatar},null,8,["src"])):(i(),I("div",oe,u(t.value.name),1))]),_:1}),a(o,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[c("p",null,u(t.value.userName),1),c("p",se,[s(" 账号:"),c("span",null,u(t.value.userName),1)])]),_:1})]),_:1}),a(w,{gutter:24},{default:e(()=>[a(o,{span:6},{default:e(()=>[a(d,{label:"员工ID:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.id?t.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"姓名:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.name?t.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"手机号:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.phoneNumber?t.value.phoneNumber:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"邮箱:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.email?t.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"部门:"},{default:e(()=>[s(u(t.value.organizationalStructureName?t.value.organizationalStructureName:"-"),1)]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"职位:"},{default:e(()=>[a(r,null,{default:e(()=>[s(u(t.value.positionName?t.value.positionName:"-"),1)]),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"帐号状态:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(o,{span:6},{default:e(()=>[a(d,{label:"创建时间:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var l;return[s(u((l=t.value)!=null&&l.createTime?t.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(S,{class:"box-card"},{header:e(()=>[ne]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(d,{label:"分配角色:"},{default:e(()=>{var l;return[(l=N.value)!=null&&l.length?(i(),p(F,{key:0,style:{"margin-left":"1.5rem"},modelValue:h.value.roleList,"onUpdate:modelValue":f[0]||(f[0]=v=>h.value.roleList=v)},{default:e(()=>[(i(!0),I(Q,null,K(N.value,v=>(i(),p(U,{key:v.id,label:v.roleName,value:v.roleName,disabled:""},{default:e(()=>[s(u(v.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(i(),p(r,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(S,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(d,{label:"分配部门:"},{default:e(()=>[x.value.length>0?(i(),p(H,{key:0,style:{"max-width":"600px"},ref:"treeRef",disabled:!0,data:x.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":g.value,"default-expand-all":"",props:j,onCheckChange:m.handleNodeClick},null,8,["data","default-checked-keys","onCheckChange"])):(i(),p(r,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),he=Z(ce,[["__scopeId","data-v-461fee6b"]]);export{he as default};
