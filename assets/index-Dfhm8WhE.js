
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ne}from"./index-CpiExt9J.js";import{d as re,r as j,l as ie,c as z,n as ce,a as y,o as l,b as c,f as s,aI as ue,i as t,w as e,bm as w,bn as P,N as v,y as r,z as i,g as d,e as h,j as S,F as A,t as O,A as de,E as K,aG as fe,aH as me,L as pe}from"./index-4-pQw2v5.js";import{v as _e}from"./index-BAh-NM6L.js";import{g as ye,a as ge}from"./zh_Hans-BgwP5DhZ.js";import{f as ve}from"./file-BT1Nd98I.js";import{o as he}from"./apiLoading-DWL6hlkI.js";import{a as V}from"./projectManagement-B4A76KN4.js";import{_ as Se}from"./index.vue_vue_type_script_setup_true_lang-cvospoHT.js";import{D as ke}from"./download-C8PHVIy1.js";import{u as be}from"./user_customer-MhR-zV27.js";import"./index-DTrqtGE7.js";import"./user_customer-BuS8vBLk.js";const je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMpJREFUOE/NkrFpw1AYhO9kPVuV8ABpMoFXUJFBXLgz6NkIQ0YIBJE8QcqABkmhFTSBmwwQVMmSeOdKRYIIwpWvPPj+/w6OuFG8kcOdgJ21b77vP1bGLDpptyqK099Kk1F7azMvPYFsKVXLonD/guftNnqI4wxkJOAZ0iDyPQB+wrrOWVXDeODXRyVJOGw2mQfWlA4gQwIvkNrvpskfy7KdBEezS1MrMoEUBeSXcS6f1fGSpq/w/lPeD4Ex+6Vzx1ngnFHcyQDmRL0C0uVHD8d5KiAAAAAASUVORK5CYII=",k=C=>(fe("data-v-599f97f0"),C=C(),me(),C),xe={style:{"margin-left":"25.5%"}},Ie=k(()=>r("span",{style:{"margin-left":"19.5%"}},"操作员",-1)),Le=k(()=>r("span",{style:{"margin-left":"12.5%"}},"操作员",-1)),we=k(()=>r("span",{style:{"margin-left":"8.5%"}},"操作员",-1)),Ae=k(()=>r("span",{style:{"margin-left":"28.5%"}},"操作员",-1)),Ce={class:"card-header"},Ne={class:"leftTitle"},Te={class:"m-4 spanStatus"},De={class:"rightStatus"},Pe={class:"copyId"},Oe=k(()=>r("div",{class:"card-header"},[r("span",null,"其他设置")],-1)),Qe={key:0,class:"open"},Ve={key:1,class:"close"},Ue={key:0,class:"open"},Be={key:1,class:"close"},Fe={key:0,class:"open"},Ee={key:1,class:"close"},Re={key:0,class:"open"},Me={key:1,class:"close"},ze={key:0,class:"open"},Ke={key:1,class:"close"},Xe={class:"peizjo-header"},qe=k(()=>r("span",null,"配置信息",-1)),Ge={key:0,style:{"margin-left":"50px"}},Je={key:1,style:{"margin-left":"30px"}},Ye={class:"quotaInfoDiv"},$e=["src"],He={class:"tableBig"},We={key:0,class:"answer"},Ze=k(()=>r("div",{class:"card-header"},[r("span",null,"安全信息")],-1)),et={key:0,class:"open"},tt={key:1,class:"close"},at=k(()=>r("div",{class:"card-header"},[r("span",null,"描述配额")],-1)),st={class:"radius p-2 flex gap-2"},ot=k(()=>r("div",{class:"card-header"},[r("span",null,"操作日志")],-1)),lt=re({name:"ProjectDetails",__name:"index",setup(C,{expose:X}){const q=be(),U=j([]),B=ie();j("# Fantastic-admin");const F=j(),Q=j(1),a=j({form:{},imgUrl:[],isOnline:"",allocationStatus:"",projectType:1,srcList:[],countryList:[]}),N=j();ye({locale:ge});const G=["新增","编辑","分配","调度"];function J(m){F.value.showEdit(m)}const I=j(!1);async function Y(m,p){a.value.projectType=p,a.value.isOnline=m.isOnline,a.value.allocationStatus=m.allocationStatus;const _=await he(V.detail({projectId:m.projectId}));a.value.form=_.data,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((g,o)=>(g.find(u=>u.settlementStatus===o.settlementStatus)||g.push(o),g),[]),N.value=a.value.form.descriptionUrl.split(","),N.value.length&&N.value.forEach(async g=>{if(g){const o=await ve.detail({fileName:g});a.value.imgUrl.push(o.data.fileUrl),a.value.srcList.push(o.data.fileUrl)}}),$(),I.value=!0}const $=async()=>{if(a.value.form.projectQuotaInfoList.length){const m=await V.getProjectCountryList({countryIdList:a.value.form.countryIdList}),p={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},_=await V.getProjectCategoryList(p),g=E(m.data.getProjectCountryListInfoList,"countryId",p.countryId),o=E(_.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=g.countryName,a.value.form.projectProblemCategoryName=o.projectProblemCategoryName}},E=(m,p,_)=>m.find(g=>g[p]===_),T=z(()=>m=>a.value.countryList.filter(_=>m.includes(_.id)).map(_=>_.chineseName));async function H(m){try{await navigator.clipboard.writeText(m),K.success({message:"已复制文本",center:!0})}catch{K.warning({message:"复制失败,请重试",center:!0})}}async function W(m,p){await ke(a.value.imgUrl[p],m)}function R(){a.value.srcList=[],I.value=!1}const Z=z(()=>U.value.find(m=>m.tenantCustomerId===a.value.form.clientId));return ce(async()=>{a.value.countryList=await B.getCountry(),U.value=await q.getCustomerList()}),X({showEdit:Y}),(m,p)=>{const _=y("el-step"),g=y("el-steps"),o=y("el-col"),b=y("el-row"),u=y("el-text"),ee=ne,f=y("el-form-item"),te=y("el-link"),D=y("el-button"),x=y("el-card"),ae=y("el-image"),L=y("el-table-column"),se=y("el-table"),oe=y("ElForm"),le=y("el-drawer");return l(),c("div",null,[s(le,{modelValue:t(I),"onUpdate:modelValue":p[1]||(p[1]=n=>de(I)?I.value=n:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",onClose:R,size:"55%",title:"项目详情"},ue({footer:e(()=>[s(D,{type:"primary",onClick:R},{default:e(()=>[d(" 取消 ")]),_:1})]),default:e(()=>[s(oe,null,{default:e(()=>[s(x,{class:"box-card"},{header:e(()=>[r("div",Ce,[r("div",Ne,[d(" 基本信息 "),r("span",Te,i(t(a).allocationStatus===1?"未分配":"已分配"),1)]),r("div",De,[r("span",{class:v(t(a).isOnline===1?"isOnlineSpanTrue":"isOnlineSpanFalse")},null,2),r("div",{class:v(t(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},i(t(a).isOnline===1?"在线":"离线"),3)])])]),default:e(()=>[s(b,{gutter:10},{default:e(()=>[s(o,{span:8},{default:e(()=>[s(f,{label:"项目ID :"},{default:e(()=>[r("div",Pe,[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.projectId?t(a).form.projectId:"-"),1)]),_:1}),s(ee,{class:"copy",content:t(a).form.projectId},null,8,["content"])])]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"项目名称 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.name?t(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"项目标识 :",prop:"client_pid"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.projectIdentification?t(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),t(a).projectType===1?(l(),h(o,{key:0,span:8},{default:e(()=>[s(f,{label:"所属客户 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>{var n;return[d(i((n=t(Z))==null?void 0:n.customerAccord),1)]}),_:1})]),_:1})]),_:1})):S("",!0),s(o,{span:8},{default:e(()=>[s(f,{label:"所属区域 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(T)(t(a).form.countryIdList).length>4?(l(),h(te,{key:0,type:"primary"},{default:e(()=>[d(i(t(T)(t(a).form.countryIdList).length===t(B).country.length?"全球":t(T)(t(a).form.countryIdList).length),1)]),_:1})):(l(!0),c(A,{key:1},O(t(T)(t(a).form.countryIdList),n=>(l(),c("span",{key:n},i(n)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),t(a).projectType===1?(l(),h(o,{key:1,span:8},{default:e(()=>[s(f,{label:"项目价 :"},{default:e(()=>[t(a).form.currencyType===1?(l(),h(u,{key:0,class:"mx-1"},{default:e(()=>[d(i(t(a).form.doMoneyPrice?t(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):S("",!0),t(a).form.currencyType===2?(l(),h(u,{key:1,class:"mx-1"},{default:e(()=>[d(i(t(a).form.doMoneyPrice?t(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):S("",!0)]),_:1})]),_:1})):S("",!0),s(o,{span:8},{default:e(()=>[s(f,{label:"配额 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.num?t(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"最小时长 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.minimumDuration?t(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"IR/NIR :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.ir?t(a).form.ir+"%":t(a).form.ir)+" / "+i(t(a).form.nir?t(a).form.nir+"%":t(a).form.nir),1)]),_:1})]),_:1})]),_:1}),s(o,{span:12},{default:e(()=>[s(f,{label:"URL :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.uidUrl?t(a).form.uidUrl:"-")+" ",1),s(D,{type:"primary",style:{"margin-left":"auto"},onClick:p[0]||(p[0]=n=>H(t(a).form.uidUrl)),link:""},{default:e(()=>[d(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(x,{class:"box-card"},{header:e(()=>[Oe]),default:e(()=>[s(b,{gutter:10},{default:e(()=>[s(o,{span:8},{default:e(()=>[s(f,{label:"置顶 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.isPinned===1?(l(),c("div",Qe,"开启")):(l(),c("div",Ve,"关闭"))]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"在线 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.isOnline===1?(l(),c("div",Ue,"开启")):(l(),c("div",Be,"关闭"))]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"资料 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.isProfile===2?(l(),c("div",Fe,"开启")):(l(),c("div",Ee,"关闭"))]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"B2B :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.isPinned===1?(l(),c("div",Re,i(t(a).form.projectType.join(",")),1)):(l(),c("div",Me,"关闭"))]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"定时发布 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.isTimeReleases===2?(l(),c("div",ze," 开 ")):(l(),c("div",Ke,"关闭"))]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"备注 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).formNaNpxark?t(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(a).projectType===1?(l(),h(x,{key:0,class:"box-card"},{header:e(()=>[r("div",Xe,[qe,t(a).form.countryName?(l(),c("span",Ge,"区域："+i(t(a).form.countryName),1)):S("",!0),t(a).form.projectProblemCategoryName?(l(),c("span",Je,"问卷："+i(t(a).form.projectProblemCategoryName),1)):S("",!0)])]),default:e(()=>[s(b,{gutter:10,class:v(t(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:e(()=>[s(o,{span:8}),s(o,{span:8}),(l(!0),c(A,null,O(t(a).form.projectQuotaInfoList,n=>(l(),h(o,{span:24,class:v({isNone:!t(a).form.projectQuotaInfoList.length}),gutter:10},{default:e(()=>[r("div",Ye,[r("div",{class:v({bottom:!n.answerValueList})},[r("img",{src:t(je)},null,8,$e),r("span",He,i(n.keyValue),1)],2),n.answerValueList&&n.answerValueList[0]!=="null"?(l(),c("div",We,i(n.answerValueList.join(", ")),1)):S("",!0)])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1})):S("",!0),s(x,{class:"box-card"},{header:e(()=>[Ze]),default:e(()=>[s(b,{gutter:20},{default:e(()=>[s(o,{span:8},{default:e(()=>[s(f,{label:"小时准入量 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.preNum?t(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"小时完成量 :"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[d(i(t(a).form.limitedQuantity?t(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),s(o,{span:8},{default:e(()=>[s(f,{label:"重复参与:"},{default:e(()=>[s(u,{class:"mx-1"},{default:e(()=>[t(a).form.ipDifferenceDetection===1?(l(),c("div",et," 开 ")):(l(),c("div",tt,"关"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(a).form.descriptionUrl?(l(),h(x,{key:1,class:"box-card"},{header:e(()=>[at]),default:e(()=>[t(a).form.descriptionUrl?(l(),c(A,{key:0},[(l(!0),c(A,null,O(t(a).srcList,n=>(l(),c("div",{key:n,class:"demo-image__preview"},[s(ae,{style:{width:"6.25rem",height:"6.25rem"},src:n,"preview-src-list":n,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]))),128)),(l(!0),c(A,null,O(t(N),(n,M)=>(l(),c("p",{key:n},[s(D,{style:{padding:"0"},type:"primary",text:"",onClick:nt=>W(n,M)},{default:e(()=>[d(i(n)+" 下载 ",1)]),_:2},1032,["onClick"])]))),128))],64)):S("",!0),s(b,{class:v({isNone:!t(a).form.descriptionUrl}),gutter:20},{default:e(()=>[s(o,{span:24},{default:e(()=>[r("div",st,[s(t(_e),{value:t(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):S("",!0),t(a).projectType===1?(l(),h(x,{key:2,class:"box-card"},{header:e(()=>[ot]),default:e(()=>[s(se,{data:t(a).form.projectOperationInfoList,style:{width:"100%"}},{default:e(()=>[s(L,{align:"left",type:"index",width:"80",label:"序号"}),s(L,{align:"left",prop:"operationTime",label:"操作时间"}),s(L,{align:"left",prop:"operationName",label:"操作人"}),s(L,{align:"left",prop:"operationType",label:"操作事项"},{default:e(({row:n})=>[d(i(G[n.operationType-1]),1)]),_:1}),s(L,{align:"left",label:"详情"},{default:e(({row:n})=>[n.operationType!==1?(l(),h(D,{key:0,type:"primary",link:"",onClick:M=>J(n)},{default:e(()=>[d(" 详情 ")]),_:2},1032,["onClick"])):(l(),h(u,{key:1},{default:e(()=>[d("-")]),_:1}))]),_:1})]),_:1},8,["data"])]),_:1})):S("",!0)]),_:1})]),_:2},[t(a).form.projectSettlementStatusSet&&t(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:e(()=>[s(b,{gutter:20},{default:e(()=>[s(o,{span:24},{default:e(()=>[s(g,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:t(a).form.projectSettlementStatusSet[0].settlementStatus},{default:e(()=>[s(_,{title:"待审核",description:"2021-09-09 11:11:11",icon:t(w)},null,8,["icon"]),s(_,{title:"已审核",description:t(a).form.projectSettlementStatusSet[0].operationTime,icon:t(a).form.projectSettlementStatusSet[0].settlementStatus>=2?t(w):t(P)},null,8,["description","icon"]),s(_,{title:"已开票",description:"2021-09-09 11:11:11",icon:t(Q)>=3?t(w):t(P)},null,8,["icon"]),s(_,{title:"已结算",description:"2021-09-09 11:11:11",icon:t(Q)>=4?t(w):t(P)},null,8,["icon"]),s(_,{title:"已冻结",description:"2021-09-09 11:11:11",icon:t(Q)>=5?t(w):t(P)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),s(b,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:e(()=>[s(o,{span:1}),s(o,{class:v({colorgreen:t(a).form.projectSettlementStatusSet[0].settlementStatus>=1}),span:5},{default:e(()=>[r("span",xe,i(t(a).form.projectSettlementStatusSet[0].operationName),1)]),_:1},8,["class"]),s(o,{class:v({colorgreen:t(a).form.projectSettlementStatusSet[0].settlementStatus>=2}),span:5},{default:e(()=>[Ie]),_:1},8,["class"]),s(o,{class:v({colorgreen:t(a).form.projectSettlementStatusSet[0].settlementStatus>=3}),span:5},{default:e(()=>[Le]),_:1},8,["class"]),s(o,{class:v({colorgreen:t(a).form.projectSettlementStatusSet[0].settlementStatus>=4}),span:4},{default:e(()=>[we]),_:1},8,["class"]),s(o,{class:v({colorgreen:t(a).form.projectSettlementStatusSet[0].settlementStatus>=5}),span:4},{default:e(()=>[Ae]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),s(Se,{ref_key:"logDetailsRef",ref:F},null,512)])}}}),ht=pe(lt,[["__scopeId","data-v-599f97f0"]]);export{ht as default};
