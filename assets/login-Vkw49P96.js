
/**
 * ç”± Fantastic-admin æä¾›æŠ€æœ¯æ”¯æŒ
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-F1sB6VwN.js";import{k as Y,d as xe,s as Ve,Y as ke,Z as Ce,r as u,b5 as E,aM as Ee,b as H,f as o,w as a,l as i,ak as M,aK as Z,i as e,t as Ue,a as g,az as Re,aA as Te,L as Fe,o as w,E as Ie,aB as Se,g as m,D as V,e as U,ax as J,j as R,aw as D,F as qe,n as Ae,ai as G,K as Le,_ as Pe,p as Q}from"./index-C5nmrkzE.js";import Ne from"./index-C259L5fH.js";const I={sendCode:v=>Y.post("user/sendCode",v),register:v=>Y.post("user/register",v)},T=v=>(Re("data-v-893eb8c3"),v=v(),Te(),v),$e=T(()=>i("div",{class:"bg-banner"},null,-1)),ze={id:"login-box"},Be=T(()=>i("div",{class:"login-banner"},[i("h1",{style:{"font-size":"50px","font-weight":"normal"}},"æ¬¢è¿Ž !"),i("h3",{h1:"",style:{"font-size":"30px","font-weight":"normal"}}," æ¥åˆ°ç§Ÿæˆ·ç³»ç»Ÿ ! ðŸ‘‹ðŸ» ")],-1)),Ke={class:"title-container"},Me={class:"fx-c"},Ze={class:"flex-bar",style:{margin:"0",width:"100%"}},De={class:"flex-bar"},Ge={class:"sub-link"},Oe=T(()=>i("span",{class:"text"},"è¿˜ä¸æ˜¯ä¼šå‘˜?",-1)),je={class:"flex-bar",style:{margin:"0"}},Ye={class:"sub-link"},He=T(()=>i("span",{class:"text"},"å·²ç»æœ‰å¸å·?",-1)),Je=T(()=>i("div",{class:"title-container"},[i("h3",{class:"title"},"å¿˜è®°å¯†ç äº†? ðŸ”’")],-1)),Qe={class:"sub-link"},W=xe({name:"Login",__name:"login",setup(v){var O;const X=Ue(),ee=Fe(),le=Ve(),oe=ke(),{t:f}=Ce();new URL(""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,import.meta.url).href,new URL(""+new URL("logo-CLz_KCqM.png",import.meta.url).href,import.meta.url).href;const y=u("login"),x=u(!1),ae=u(((O=X.query.redirect)==null?void 0:O.toString())??le.settings.home.fullPath),k=u(),_=u("code"),S=u("èŽ·å–éªŒè¯ç "),q=u(!1),d=u({account:E.local.get("login_account")||"",remember:E.local.has("login_account")}),te=u({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}],agreeToTheAgreement:[{validator:(n,l)=>l===!0,message:"è¯·é˜…è¯»å¹¶å‹¾é€‰åè®®",trigger:"change"}]});async function re(){k.value.validateField("account",async n=>{if(n){let l;d.value.account.includes("@")?l={email:d.value.account,type:"login_email"}:l={phone:d.value.account,type:"login_phone_number"};const{status:s}=await I.sendCode(l);s===1&&G.success({message:"å·²å‘é€"})}}),ne()}const ne=()=>{q.value=!0;let n=60;b.value=setInterval(()=>{n>0?(n--,S.value=`è¯·åœ¨${n}såŽé‡æ–°èŽ·å–`):(clearInterval(b.value),S.value="èŽ·å–éªŒè¯ç ",b.value=null,q.value=!1)},1e3)};function A(){k.value&&k.value.validate(n=>{if(n){let l={...d.value};_.value==="password"?l.type=1:d.value.account.includes("@")?l.type=3:l.type=2,x.value=!0,oe.login(l).then(()=>{x.value=!1,d.value.remember?E.local.set("login_account",d.value.account):E.local.remove("login_account"),ee.push(ae.value)}).catch(()=>{x.value=!1})}})}const b=u(null),L=u("èŽ·å–éªŒè¯ç "),P=u(!1),N=u(),r=u({account:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone"}),se=(n,l,s)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(r.value.phoneNumber)?s():s(new Error("è¯·è¾“å…¥åˆæ³•æ‰‹æœºå·"))},ie=(n,l,s)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r.value.email)?s():s(new Error("è¯·è¾“å…¥åˆæ³•é‚®ç®±"))},de=[{value:"phone",label:"ä¸­å›½"},{value:"email",label:"ç¾Žå›½"}],ue=u({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],email:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥é‚®ç®±"},{validator:ie,trigger:"blur"}],phoneNumber:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·ç "},{validator:se,trigger:"blur"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}],agreeToTheAgreement:[{validator:(n,l)=>l===!0,message:"è¯·é˜…è¯»å¹¶å‹¾é€‰åè®®",trigger:"change"}]}),pe=async()=>{const n={type:"register_phone_number",email:r.value.email,phone:r.value.phoneNumber};r.value.type==="phone"?await I.sendCode(n):(n.type="register_email",await I.sendCode(n)),me()},me=()=>{P.value=!0;let n=60;b.value=setInterval(()=>{n>0?(n--,L.value=`è¯·åœ¨${n}såŽé‡æ–°èŽ·å–`):(clearInterval(b.value),L.value="èŽ·å–éªŒè¯ç ",b.value=null,P.value=!1)},1e3)};async function ce(){N.value&&N.value.validate(async n=>{if(n){const{status:l}=await I.register(r.value);l===1&&G.success({message:"æ³¨å†ŒæˆåŠŸ"})}})}const $=u(),h=u({account:E.local.get("login_account"),code:"",newPassword:""}),ge=u({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],newPassword:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]});function fe(){G({message:"é‡ç½®å¯†ç ä»…æä¾›ç•Œé¢æ¼”ç¤ºï¼Œæ— å®žé™…åŠŸèƒ½ï¼Œéœ€å¼€å‘è€…è‡ªè¡Œæ‰©å±•",type:"info"}),$.value&&$.value.validate(n=>{})}Ee(()=>{clearInterval(b.value),b.value=null});const ve=()=>{k.value.resetFields()};return(n,l)=>{const s=Le,z=we,j=g("el-radio-button"),_e=g("el-radio-group"),be=g("el-button"),c=g("ElInput"),p=g("ElFormItem"),B=g("ElCheckbox"),F=g("ElLink"),C=g("ElButton"),K=g("ElForm"),ye=g("ElOption"),he=g("ElSelect");return w(),H("div",null,[$e,o(z,{placement:"bottom-end",class:"i18n-selector"},{default:a(()=>[o(s,{name:"i-ri:translate"})]),_:1}),i("div",ze,[Be,M(o(K,{ref_key:"loginFormRef",ref:k,model:e(d),rules:e(te),class:"login-form"},{default:a(()=>[i("div",Ke,[i("div",Me,[o(_e,{modelValue:e(_),"onUpdate:modelValue":l[0]||(l[0]=t=>Ie(_)?_.value=t:null),size:"large",onChange:ve},{default:a(()=>[o(j,{label:"éªŒè¯ç ç™»å½•",value:"code"}),o(j,{label:"å¯†ç ç™»å½•",value:"password"})]),_:1},8,["modelValue"])])]),i("div",null,[o(p,{prop:"account"},{default:a(()=>[o(c,{modelValue:e(d).account,"onUpdate:modelValue":l[1]||(l[1]=t=>e(d).account=t),placeholder:e(f)("app.account"),type:"text",tabindex:"1"},Se({prefix:a(()=>[o(s,{name:"i-ri:user-3-fill"})]),_:2},[e(_)==="code"?{name:"append",fn:a(()=>[o(be,{type:"primary",disabled:e(q),onClick:re},{default:a(()=>[m(V(e(S)),1)]),_:1},8,["disabled"])]),key:"0"}:void 0]),1032,["modelValue","placeholder"])]),_:1}),e(_)==="password"?(w(),U(p,{key:0,prop:"password"},{default:a(()=>[o(c,{modelValue:e(d).password,"onUpdate:modelValue":l[2]||(l[2]=t=>e(d).password=t),type:"password",placeholder:e(f)("app.password"),tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:J(A,["enter"])},{prefix:a(()=>[o(s,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})):R("",!0),e(_)==="code"?(w(),U(p,{key:1,prop:"code"},{default:a(()=>[o(c,{modelValue:e(d).code,"onUpdate:modelValue":l[3]||(l[3]=t=>e(d).code=t),type:"text",placeholder:e(f)("app.captcha"),tabindex:"2",onKeyup:J(A,["enter"])},{prefix:a(()=>[o(s,{name:"i-ep:message"})]),_:1},8,["modelValue","placeholder"])]),_:1})):R("",!0),o(p,{prop:"agreeToTheAgreement"},{default:a(()=>[i("div",Ze,[o(B,{modelValue:e(d).agreeToTheAgreement,"onUpdate:modelValue":l[4]||(l[4]=t=>e(d).agreeToTheAgreement=t)},{default:a(()=>[m("æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxxåè®®ã€‹ ")]),_:1},8,["modelValue"]),e(_)==="password"?(w(),U(F,{key:0,type:"primary",underline:!1,onClick:l[5]||(l[5]=t=>y.value="reset")},{default:a(()=>[m(" å¿˜è®°å¯†ç äº†? ")]),_:1})):R("",!0)])]),_:1})]),i("div",De,[o(B,{modelValue:e(d).remember,"onUpdate:modelValue":l[6]||(l[6]=t=>e(d).remember=t)},{default:a(()=>[m(" ä¿æŒç™»å½• ")]),_:1},8,["modelValue"])]),o(C,{loading:e(x),type:"primary",size:"large",style:{width:"100%"},onClick:D(A,["prevent"])},{default:a(()=>[m(V(e(f)("app.login")),1)]),_:1},8,["loading"]),i("div",Ge,[Oe,o(F,{type:"primary",underline:!1,onClick:l[7]||(l[7]=t=>y.value="register")},{default:a(()=>[m(" ç«‹å³æ³¨å†Œ ")]),_:1})])]),_:1},8,["model","rules"]),[[Z,e(y)==="login"]]),M(o(K,{ref_key:"registerFormRef",ref:N,model:e(r),rules:e(ue),class:"login-form","auto-complete":"on"},{default:a(()=>[i("div",null,[o(p,{prop:"account"},{default:a(()=>[o(c,{modelValue:e(r).account,"onUpdate:modelValue":l[8]||(l[8]=t=>e(r).account=t),placeholder:"ç”¨æˆ·å",tabindex:"1"},{prefix:a(()=>[o(s,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"type"},{default:a(()=>[o(he,{modelValue:e(r).type,"onUpdate:modelValue":l[9]||(l[9]=t=>e(r).type=t),placeholder:"æ³¨å†Œæ–¹å¼",tabindex:"2"},{prefix:a(()=>[o(s,{name:"i-mdi:format-list-bulleted-type"})]),default:a(()=>[(w(),H(qe,null,Ae(de,t=>o(ye,{label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(r).type==="phone"?(w(),U(p,{key:0,prop:"phoneNumber"},{default:a(()=>[o(c,{modelValue:e(r).phoneNumber,"onUpdate:modelValue":l[10]||(l[10]=t=>e(r).phoneNumber=t),placeholder:"æ‰‹æœºå·",tabindex:"3"},{prefix:a(()=>[o(s,{name:"i-ant-design:phone-outlined"})]),_:1},8,["modelValue"])]),_:1})):R("",!0),e(r).type==="email"?(w(),U(p,{key:1,prop:"email"},{default:a(()=>[o(c,{modelValue:e(r).email,"onUpdate:modelValue":l[11]||(l[11]=t=>e(r).email=t),placeholder:"é‚®ç®±",tabindex:"3"},{prefix:a(()=>[o(s,{name:"i-mdi:email"})]),_:1},8,["modelValue"])]),_:1})):R("",!0),o(p,{prop:"code"},{default:a(()=>[o(c,{modelValue:e(r).code,"onUpdate:modelValue":l[12]||(l[12]=t=>e(r).code=t),placeholder:"éªŒè¯ç ",tabindex:"2"},{prefix:a(()=>[o(s,{name:"i-ic:baseline-verified-user"})]),append:a(()=>[o(C,{disabled:e(P),onClick:pe},{default:a(()=>[m(V(e(L)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"password"},{default:a(()=>[o(c,{modelValue:e(r).password,"onUpdate:modelValue":l[13]||(l[13]=t=>e(r).password=t),type:"password",placeholder:"å¯†ç ",tabindex:"3","show-password":""},{prefix:a(()=>[o(s,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"agreeToTheAgreement"},{default:a(()=>[i("div",je,[o(B,{modelValue:e(r).agreeToTheAgreement,"onUpdate:modelValue":l[14]||(l[14]=t=>e(r).agreeToTheAgreement=t)},{default:a(()=>[m(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxxåè®®ã€‹ ")]),_:1},8,["modelValue"])])]),_:1})]),o(C,{loading:e(x),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:D(ce,["prevent"])},{default:a(()=>[m(" æ³¨å†Œ ")]),_:1},8,["loading"]),i("div",Ye,[He,o(F,{type:"primary",underline:!1,onClick:l[15]||(l[15]=t=>y.value="login")},{default:a(()=>[m(" åŽ»ç™»å½• ")]),_:1})])]),_:1},8,["model","rules"]),[[Z,e(y)==="register"]]),M(o(K,{ref_key:"resetFormRef",ref:$,model:e(h),rules:e(ge),class:"login-form"},{default:a(()=>[Je,i("div",null,[o(p,{prop:"account"},{default:a(()=>[o(c,{modelValue:e(h).account,"onUpdate:modelValue":l[16]||(l[16]=t=>e(h).account=t),placeholder:e(f)("app.account"),type:"text",tabindex:"1"},{prefix:a(()=>[o(s,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(p,{prop:"code"},{default:a(()=>[o(c,{modelValue:e(h).code,"onUpdate:modelValue":l[17]||(l[17]=t=>e(h).code=t),placeholder:e(f)("app.code"),type:"text",tabindex:"2"},{prefix:a(()=>[o(s,{name:"i-ic:baseline-verified-user"})]),append:a(()=>[o(C,null,{default:a(()=>[m(V(e(f)("app.sendCaptcha")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(p,{prop:"newPassword"},{default:a(()=>[o(c,{modelValue:e(h).newPassword,"onUpdate:modelValue":l[18]||(l[18]=t=>e(h).newPassword=t),type:"password",placeholder:e(f)("app.newPassword"),tabindex:"3","show-password":""},{prefix:a(()=>[o(s,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),o(C,{loading:e(x),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:D(fe,["prevent"])},{default:a(()=>[m(V(e(f)("app.check")),1)]),_:1},8,["loading"]),i("div",Qe,[o(F,{type:"primary",underline:!1,onClick:l[19]||(l[19]=t=>y.value="login")},{default:a(()=>[m(V(e(f)("app.goLogin")),1)]),_:1})])]),_:1},8,["model","rules"]),[[Z,e(y)==="reset"]])]),o(Ne)])}}});typeof Q=="function"&&Q(W);const ll=Pe(W,[["__scopeId","data-v-893eb8c3"]]);export{ll as default};
