
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as A}from"./department-COKdoWGM.js";import{u as O}from"./department-s7vcJD-l.js";import{u as Q}from"./configuration_manager-CK0mFH2L.js";import{u as W}from"./position_manage-Dv40I86x.js";import{u as X}from"./group_manage-DS0FWnUA.js";import{d as Y,r as f,k as Z,a as i,o as r,e as m,w as e,f as a,g as n,H as u,b as w,t as h,j as x,F as y,E as $,aJ as ee,aK as ae,s as k,R as te}from"./index-BzjzRFt1.js";import"./position_manage-CVU3ztVF.js";import"./group_manage-sj515o3S.js";const E=v=>(ee("data-v-54e5bd56"),v=v(),ae(),v),le=E(()=>k("div",{class:"card-header"},[k("div",{class:"leftTitle"},"基本信息")],-1)),oe=E(()=>k("div",{class:"card-header"},[k("span",null,"员工")],-1)),se=Y({__name:"index",emits:["fetch-data"],setup(v,{expose:F,emit:j}){const I=O(),D=f(),z=Q(),T=f([]),S=W(),V=f(),N=X(),L=f(),M=[{label:"完成计提",value:1},{label:"审核计提",value:2},{label:"收款计提",value:3}],G=j,b=f(!1),o=f();async function H(C){const g={id:C.id},{data:s,status:d}=await A.detail(g);o.value=s,d===1&&$.success({message:"查询成功",center:!0}),b.value=!0}function J(){G("fetch-data"),o.value={},b.value=!1}return Z(async()=>{D.value=await(I==null?void 0:I.getDepartment()),T.value=await z.getStaff(),V.value=await(S==null?void 0:S.getPositionManage())||[],L.value=await(N==null?void 0:N.getGroupManage())||[]}),F({showEdit:H}),(C,g)=>{const s=i("el-text"),d=i("el-form-item"),p=i("el-col"),K=i("el-row"),B=i("el-card"),_=i("el-table-column"),P=i("el-empty"),R=i("el-table"),U=i("el-form"),q=i("el-drawer");return r(),m(q,{modelValue:b.value,"onUpdate:modelValue":g[0]||(g[0]=t=>b.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:J},{default:e(()=>[a(U,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(B,{class:"box-card"},{header:e(()=>[le]),default:e(()=>[a(K,{gutter:24},{default:e(()=>[a(p,{span:6},{default:e(()=>[a(d,{label:"部门ID:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.id?o.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"部门名称:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.name?o.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"部门主管:"},{default:e(()=>[(r(!0),w(y,null,h(T.value,t=>(r(),m(s,{key:t.id},{default:e(()=>{var l;return[t.id===((l=o.value)==null?void 0:l.director)?(r(),m(s,{key:0},{default:e(()=>[n(u(t.name),1)]),_:2},1024)):x("",!0)]}),_:2},1024))),128))]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"员工数:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.count?o.value.count:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"状态:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u(((t=o.value)==null?void 0:t.commissionStatus)===1?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"创建时间:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.createTime?o.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"部门提成:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.commission?o.value.commission:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"提成发放规则:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t,l;return[n(u(M[((t=o.value)==null?void 0:t.commissionType)-1]?M[((l=o.value)==null?void 0:l.commissionType)-1].label:"-"),1)]}),_:1})]),_:1})]),_:1}),a(p,{span:6},{default:e(()=>[a(d,{label:"备注:"},{default:e(()=>[a(s,{class:"mx-1"},{default:e(()=>{var t;return[n(u((t=o.value)!=null&&t.remark?o.value.remark:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(B,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>{var t;return[a(R,{data:(t=o.value)==null?void 0:t.result,border:""},{empty:e(()=>[a(P,{description:"暂无数据"})]),default:e(()=>[a(_,{align:"center",type:"index",label:"序号",width:"80"}),a(_,{align:"center","show-overflow-tooltip":"",prop:"id",label:"员工ID"}),a(_,{align:"center","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:e(({row:l})=>[n(u(l.userName?l.userName:"-"),1)]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:e(({row:l})=>[n(u(l.name?l.name:"-"),1)]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"phoneNumber",label:"电话号码"},{default:e(({row:l})=>[n(u(l.phoneNumber?l.phoneNumber:"-"),1)]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"email",label:"电子邮箱"},{default:e(({row:l})=>[n(u(l.email?l.email:"-"),1)]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"departmentId",label:"部门"},{default:e(({row:l})=>[(r(!0),w(y,null,h(D.value,c=>(r(),m(s,{key:c.id},{default:e(()=>[c.id===l.departmentId?(r(),m(s,{key:0},{default:e(()=>[n(u(c.name),1)]),_:2},1024)):x("",!0)]),_:2},1024))),128))]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"personId",label:"职位"},{default:e(({row:l})=>[(r(!0),w(y,null,h(V.value,c=>(r(),m(s,null,{default:e(()=>[l.positionId===c.id?(r(),m(s,{key:0},{default:e(()=>[n(u(c.name?c.name:"-"),1)]),_:2},1024)):x("",!0)]),_:2},1024))),256))]),_:1}),a(_,{align:"center","show-overflow-tooltip":"",prop:"groupId",label:"小组"},{default:e(({row:l})=>[(r(!0),w(y,null,h(L.value,c=>(r(),m(s,null,{default:e(()=>[l.groupId===c.id?(r(),m(s,{key:0},{default:e(()=>[n(u(c.name?c.name:"-"),1)]),_:2},1024)):x("",!0)]),_:2},1024))),256))]),_:1})]),_:1},8,["data"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),me=te(se,[["__scopeId","data-v-54e5bd56"]]);export{me as default};
