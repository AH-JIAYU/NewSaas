
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as y,d as w,Z as h,n as j,a as m,o as I,b as C,f as p,w as r,y as a,g as u,i,e as k,j as D,ap as E,bp as x,_ as A,aH as L,aI as V,L as B}from"./index-Cj8IEiBM.js";/* empty css                      */const N={list:s=>y.post("callback/getProjectSurveyScreenList",s),childList:s=>y.post("callback/getProjectScreenMemberChildList",s),getDetail:s=>y.post("callback/getProjectSurveyScreenDetailList",s)},O=s=>(L("data-v-fc372c65"),s=s(),V(),s),P={class:"heade"},z={class:"title"},J=O(()=>a("div",{class:"tooltip"},[a("div",null,[a("div",{class:"label"},[a("span",{class:"red"},"红色")]),u(" : 正确答案 ")]),a("div",null,[a("div",{class:"label"},[a("span",{class:"spot"})]),u(" : 所选答案 ")])],-1)),M=w({__name:"index",setup(s,{expose:S}){const o=h({visible:!1,survey:null}),g=v=>{let e=[];return v.forEach(n=>{if(n.projectCorrectAnswerId.includes(",")){const d=n.projectCorrectAnswerId.split(",").map(c=>c.trim());e=e.concat(d)}else e.push(n.projectCorrectAnswerId.trim())}),e},b=async v=>{const e=await N.getDetail({id:v.id}),n=E(JSON.parse(e.data.projectJson));n.pages.forEach(c=>{c.elements.forEach(t=>{t.readOnly=!0;const f=e.data.projectSurveyScreenDetailInfoList.find(l=>l.projectProblemId===t.surveyId);if(f&&t.type==="radiogroup"){const l=t.choices.filter(_=>f.projectAnswerId.includes(_.surveyId));t.defaultValue=l.map(_=>_.value)}})}),o.survey=new x.Model(JSON.stringify(n)),o.survey.showNavigationButtons=!1;const d=g(e.data.projectSurveyScreenDetailInfoList);o.survey.onUpdateChoiceItemCss.add(function(c,t){d.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),o.visible=!0};return j(async()=>{}),S({showEdit:b}),(v,e)=>{const n=A,d=m("el-tooltip"),c=m("SurveyComponent"),t=m("ElButton"),f=m("ElDrawer");return I(),C("div",null,[p(f,{modelValue:i(o).visible,"onUpdate:modelValue":e[2]||(e[2]=l=>i(o).visible=l),title:"",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{header:r(()=>[a("div",P,[a("div",z,[u(" 查看 "),p(d,{class:"tooltips",content:"",placement:"top",effect:"light"},{content:r(()=>[J]),default:r(()=>[p(n,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])])]),footer:r(()=>[p(t,{size:"large",onClick:e[0]||(e[0]=l=>i(o).visible=!1)},{default:r(()=>[u(" 取消 ")]),_:1}),p(t,{type:"primary",size:"large",onClick:e[1]||(e[1]=l=>i(o).visible=!1)},{default:r(()=>[u(" 确定 ")]),_:1})]),default:r(()=>[i(o).survey?(I(),k(c,{key:0,model:i(o).survey,style:{width:"100%"}},null,8,["model"])):D("",!0)]),_:1},8,["modelValue"])])}}}),$=B(M,[["__scopeId","data-v-fc372c65"]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{N as a,T as i,$ as q};
