
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as k}from"./department-DrQv5Etz.js";import{d as $,aL as q,r as i,k as z,a as s,l as F,n as G,o as j,b as J,f as e,w as l,p as u,g as m,E as I,t as K,aH as O,aI as Q,N as W}from"./index-BdHtZquS.js";const D=p=>(O("data-v-a2825fba"),p=p(),Q(),p),X=D(()=>u("div",{class:"card-header"},[u("span",null,"组长")],-1)),Y=D(()=>u("div",{class:"card-header"},[u("span",null,"组员")],-1)),Z={style:{flex:"auto"}},ee=$({name:"Edit",__name:"index",emits:["success"],setup(p,{expose:C,emit:A}){q();const b=A,_=i(""),B=i(),N=i(!1);i([]);const v=i(),r=i(!1),h=[{lable:"未收款",value:1},{lable:"部分收款",value:2},{lable:"已完结",value:3},{lable:"坏账",value:4}];i({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],search:{chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}}),i({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1});const o=i({id:null,tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""}),E={children:"children",label:"label"},S=[{id:1,label:"Level one 1",children:[{id:4,label:"Level two 1-1",children:[{id:9,label:"Level three 1-1-1"},{id:10,label:"Level three 1-1-2"}]}]},{id:2,label:"Level one 2",children:[{id:5,label:"Level two 2-1"},{id:6,label:"Level two 2-2"}]},{id:3,label:"Level one 3",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]}];i({invoiceCode:[{required:!0,trigger:"blur",message:"请输入姓名"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});async function w(n){console.log("row",n)}function M(){return new Promise(n=>{o.value.id?v.value&&v.value.validate(a=>{if(a){const t=K(o.value);k.edit(t).then(()=>{I.success({message:"编辑成功",center:!0}),b("success"),r.value=!1,n()})}}):v.value&&v.value.validate(a=>{a&&(delete o.value.id,k.create(o.value).then(()=>{I.success({message:"新增成功",center:!0}),b("success"),r.value=!1,n()}))})})}async function P(n){_.value=n!=null&&n.id?"编辑":"新增",o.value=n,r.value=!0}return z(async()=>{B.value=new Date}),C({showEdit:P}),(n,a)=>{const t=s("el-table-column"),f=s("el-input"),g=s("el-empty"),x=s("el-table"),y=s("el-card"),T=s("el-tree"),V=s("el-col"),U=s("el-row"),L=s("el-button"),H=s("el-drawer"),R=F("loading");return G((j(),J("div",null,[e(H,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=d=>r.value=d),title:_.value,size:"60%"},{footer:l(()=>[u("div",Z,[e(L,{type:"",onClick:a[3]||(a[3]=d=>r.value=!1)},{default:l(()=>[m(" 取消 ")]),_:1}),e(L,{type:"primary",onClick:M},{default:l(()=>[m(" 确定 ")]),_:1})])]),default:l(()=>[e(y,{class:"box-card"},{header:l(()=>[X]),default:l(()=>[e(x,{data:h,border:""},{empty:l(()=>[e(g,{description:"暂无数据"})]),default:l(()=>[e(t,{align:"center",type:"index",label:"序号",width:"80"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"员工ID"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(t,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"组内提成比例"},{default:l(({row:d})=>[e(f,{modelValue:o.value.invoiceAmount,"onUpdate:modelValue":a[0]||(a[0]=c=>o.value.invoiceAmount=c),modelModifiers:{number:!0},placeholder:"请输入提成比例",clearable:"",onBlur:c=>w(d)},{append:l(()=>[m("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1})]),_:1}),e(y,{class:"box-card"},{header:l(()=>[Y]),default:l(()=>[e(U,{gutter:20},{default:l(()=>[e(V,{class:"leftData",span:8},{default:l(()=>[e(f,{modelValue:o.value.invoiceAmount,"onUpdate:modelValue":a[1]||(a[1]=d=>o.value.invoiceAmount=d),placeholder:"可输入关键字查找",clearable:""},null,8,["modelValue"]),e(T,{style:{"max-width":"600px","margin-top":"20px",height:"90%"},data:S,"show-checkbox":"","node-key":"id","default-expanded-keys":[2,3],"default-checked-keys":[5],props:E})]),_:1}),e(V,{span:16},{default:l(()=>[e(x,{data:h,border:""},{empty:l(()=>[e(g,{description:"暂无数据"})]),default:l(()=>[e(t,{align:"center",type:"index",label:"序号",width:"80"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"员工ID"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"用户名"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"姓名"}),e(t,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"}),e(t,{align:"center",width:"190",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:l(({row:d})=>[e(f,{modelValue:o.value.invoiceAmount,"onUpdate:modelValue":a[2]||(a[2]=c=>o.value.invoiceAmount=c),modelModifiers:{number:!0},placeholder:"提成比例",clearable:"",onBlur:c=>w(d)},{append:l(()=>[m("%")]),_:2},1032,["modelValue","onBlur"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])),[[R,N.value]])}}}),te=W(ee,[["__scopeId","data-v-a2825fba"]]);export{te as default};
