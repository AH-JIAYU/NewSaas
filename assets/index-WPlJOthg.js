
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ze,r as f,aK as $e,a5 as Pe,k as Te,a as p,p as Ne,o as i,b as K,f as l,w as a,i as n,az as I,q as E,g as c,H as h,I as w,e as d,j as b,F as De,t as Be,S as Re,bb as Me,E as Z,N as Fe,aM as He,aN as Ke,ba as qe,ap as Oe,aG as Ye,aH as je,s as L,aq as B,R as Ge}from"./index-CMDhw7rD.js";import{_ as Je}from"./index.vue_vue_type_style_index_0_lang-1bcBnZl6.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-B4yvYcdZ.js";import{_ as We}from"./index.vue_vue_type_script_setup_true_lang-xLi4rdng.js";import Xe from"./index-2eBicc6A.js";import{_ as Ze}from"./index.vue_vue_type_script_setup_true_lang-B3V0uAIR.js";import{u as et}from"./index-DJMx_TS5.js";import{s as tt}from"./apiLoading-C5-DvX73.js";import{a as R}from"./user_supplier-DIc-ulPP.js";import{U as lt}from"./user_supplier-Bwviugry.js";import"./index.vue_vue_type_script_setup_true_lang-C4wgH2Ne.js";import"./index.vue_vue_type_script_setup_true_lang-DTQQnYm_.js";import"./user_customer-DqKbwC-6.js";import"./user_customer-BfKpQ1WC.js";import"./stagedData-9r8ifjk7.js";import"./index.vue_vue_type_script_setup_true_lang-BhxvNatS.js";const x=A=>(Ye("data-v-a81fa320"),A=A(),je(),A),at=x(()=>L("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),nt=["value"],ot=x(()=>L("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),it=x(()=>L("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),st=x(()=>L("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),rt=x(()=>L("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),ut=ze({name:"supplier",__name:"index",setup(A){const ee=lt(),{format:te}=Me(),le=et(),q=f([]),{pagination:k,getParams:ae,onSizeChange:ne,onCurrentChange:oe}=$e(),U=f(!1),O=f([]),ie=f(),M=f(),Y=f(),j=f(),z=f(!0),$=f(!1),P=f("default"),m=f([]),T=f(!1),N=f([{label:"供应商ID",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"国家",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"可用余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"b2bStatus"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),s=Pe({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function se(){M.value.showEdit()}function re(o){M.value.showEdit(o)}function ue(o){Y.value.showEdit(o)}async function pe(o){const{data:t}=await R.detail({tenantSupplierId:o.tenantSupplierId});if(t.remark!==o.remark){t.countryType=t.subordinateCountryId==="343"?1:2,t.remark=o.remark;const{status:v}=await R.edit(t);v===1&&Z.success({message:"更新备注",center:!0}),D()}}async function G(o,t){const v={status:o,tenantSupplierId:t},{status:y}=await tt(R.changestatus(v));y===1&&Z.success({message:"修改成功"}),D(),ee.TenantSupplierList=null}function D(){k.value.page=1,S()}function de(){Object.assign(s,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),S()}function ce(o){j.value.showEdit(JSON.stringify(o))}function me(o){ne(o).then(()=>S())}function g(o=1){oe(o).then(()=>S())}async function S(){try{U.value=!0;const o={...ae(),...s};s.time&&s.time.length&&(o.beginTime=s.time[0]||"",o.endTime=s.time[1]||"");const{data:t}=await R.list(o);O.value=t.getTenantSupplierInfoList,k.value.total=t.total,U.value=!1}catch{}finally{U.value=!1}}function fe(o){ie.value=o}return Te(async()=>{N.value.forEach(o=>{o.checked&&m.value.push(o.prop)}),q.value=await le.getLevelNameList(),D()}),(o,t)=>{const v=p("el-input"),y=p("el-form-item"),F=p("el-option"),_e=p("el-select"),be=p("el-date-picker"),J=Fe,H=p("ElButton"),ve=p("ElFormItem"),ge=p("ElForm"),ye=Qe,he=p("ElDivider"),V=p("el-button"),ke=Je,Se=He,Ce=Ke,we=p("el-row"),_=p("el-table-column"),Q=p("el-tag"),W=qe,C=p("el-text"),X=p("ElSwitch"),Ve=p("ElTableColumn"),Ie=p("ElSpace"),Ee=p("el-empty"),Le=p("el-table"),xe=p("ElPagination"),Ae=Oe,Ue=Ne("loading");return i(),K("div",{class:Re({"absolute-container":n(T)})},[l(Ae,null,{default:a(()=>[l(ye,{"show-toggle":!1},{default:a(({fold:e,toggle:u})=>[l(ge,{model:n(s),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(y,{label:""},{default:a(()=>[l(v,{modelValue:n(s).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=r=>n(s).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:t[1]||(t[1]=I(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:a(()=>[l(v,{modelValue:n(s).supplierAccord,"onUpdate:modelValue":t[2]||(t[2]=r=>n(s).supplierAccord=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称",onKeydown:t[3]||(t[3]=I(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),l(y,{label:""},{default:a(()=>[l(v,{modelValue:n(s).supplierPhone,"onUpdate:modelValue":t[4]||(t[4]=r=>n(s).supplierPhone=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码",onKeydown:t[5]||(t[5]=I(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),E(l(y,{label:""},{default:a(()=>[l(v,{modelValue:n(s).accountName,"onUpdate:modelValue":t[6]||(t[6]=r=>n(s).accountName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称",onKeydown:t[7]||(t[7]=I(r=>g(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[B,!e]]),E(l(y,{label:""},{default:a(()=>[l(v,{modelValue:n(s).emailAddress,"onUpdate:modelValue":t[8]||(t[8]=r=>n(s).emailAddress=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱",onKeydown:t[9]||(t[9]=I(r=>g(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[B,!e]]),E(l(y,{label:""},{default:a(()=>[l(_e,{modelValue:n(s).supplierStatus,"onUpdate:modelValue":t[10]||(t[10]=r=>n(s).supplierStatus=r),clearable:"",placeholder:"供应商状态",onChange:t[11]||(t[11]=r=>g())},{default:a(()=>[l(F,{label:"开启",value:2}),l(F,{label:"关闭",value:1}),l(F,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!e]]),E(l(y,{label:""},{default:a(()=>[l(be,{modelValue:n(s).time,"onUpdate:modelValue":t[12]||(t[12]=r=>n(s).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true",onChange:t[13]||(t[13]=r=>g())},null,8,["modelValue"])]),_:2},1536),[[B,!e]]),l(ve,null,{default:a(()=>[l(H,{type:"primary",onClick:t[14]||(t[14]=r=>g())},{icon:a(()=>[l(J,{name:"i-ep:search"})]),default:a(()=>[c(" 筛选 ")]),_:1}),l(H,{onClick:de},{icon:a(()=>[at]),default:a(()=>[c(" 重置 ")]),_:1}),l(H,{link:"",onClick:u},{icon:a(()=>[l(J,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[c(" "+h(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(he,{"border-style":"dashed"}),l(we,null,{default:a(()=>[l(ke,null,{default:a(()=>[l(V,{type:"primary",size:"default",onClick:se},{default:a(()=>[c(" 新增 ")]),_:1})]),_:1}),l(Ce,null,{default:a(()=>[l(V,{size:"default"},{default:a(()=>[c(" 导出 ")]),_:1}),l(Se,{border:n(z),"onUpdate:border":t[15]||(t[15]=e=>w(z)?z.value=e:null),tableAutoHeight:n(T),"onUpdate:tableAutoHeight":t[16]||(t[16]=e=>w(T)?T.value=e:null),checkList:n(m),"onUpdate:checkList":t[17]||(t[17]=e=>w(m)?m.value=e:null),columns:n(N),"onUpdate:columns":t[18]||(t[18]=e=>w(N)?N.value=e:null),"line-height":n(P),"onUpdate:lineHeight":t[19]||(t[19]=e=>w(P)?P.value=e:null),stripe:n($),"onUpdate:stripe":t[20]||(t[20]=e=>w($)?$.value=e:null),style:{"margin-left":"12px"},onQueryData:D},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),E((i(),d(Le,{border:n(z),data:n(O),size:n(P),stripe:n($),onSelectionChange:fe},{empty:a(()=>[l(Ee,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(_,{align:"center",type:"selection"}),n(m).includes("tenantSupplierId")?(i(),d(_,{key:0,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"})):b("",!0),n(m).includes("supplierAccord")?(i(),d(_,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:a(({row:e})=>[c(h(e.supplierAccord),1)]),_:1})):b("",!0),n(m).includes("countryAffiliationName")?(i(),d(_,{key:2,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"},{default:a(({row:e})=>[l(Q,{type:"primary"},{default:a(()=>[c(h(e.countryAffiliationName),1)]),_:2},1024)]),_:1})):b("",!0),n(m).includes("balanceHumanLife")?(i(),d(_,{key:3,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:a(({row:e})=>[l(W),c(h(e.balanceHumanLife||0),1)]),_:1})):b("",!0),n(m).includes("amountPendingTrial")?(i(),d(_,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:a(({row:e})=>[l(W),c(h(e.amountPendingTrial||0),1)]),_:1})):b("",!0),n(m).includes("supplierLevelId")?(i(),d(_,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:a(({row:e})=>[(i(!0),K(De,null,Be(n(q),u=>(i(),K("div",{key:u.tenantSupplierLevelId,value:u.levelNameOrAdditionRatio},[u.tenantSupplierLevelId===e.supplierLevelId?(i(),d(C,{key:0,class:"mx-1"},{default:a(()=>[c(h(u.levelNameOrAdditionRatio),1)]),_:2},1024)):(i(),d(C,{key:1,class:"mx-1"},{default:a(()=>[c("-")]),_:1}))],8,nt))),128))]),_:1})):b("",!0),n(m).includes("b2bStatus")?(i(),d(_,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:a(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(i(),d(C,{key:0,class:"mx-1"},{default:a(()=>[ot]),_:1})):(i(),d(C,{key:1,class:"mx-1"},{default:a(()=>[it]),_:1})),c(" | "),e.b2cStatus&&e.b2cStatus===2?(i(),d(C,{key:2,class:"mx-1"},{default:a(()=>[st]),_:1})):(i(),d(C,{key:3,class:"mx-1"},{default:a(()=>[rt]),_:1}))]),_:1})):b("",!0),n(m).includes("settlementCycle")?(i(),d(_,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:a(({row:e})=>[c(h(e.settlementCycle?e.settlementCycle+"天":"-"),1)]),_:1})):b("",!0),n(m).includes("supplierStatus")?(i(),d(Ve,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:a(({row:e})=>[e.supplierStatus===3?(i(),d(X,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":u=>e.supplierStatus=u,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:u=>G(u,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(i(),d(X,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":u=>e.supplierStatus=u,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:u=>G(u,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):b("",!0),n(m).includes("createTime")?(i(),d(_,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:a(({row:e})=>[l(Q,{effect:"plain",type:"info"},{default:a(()=>[c(h(n(te)(e.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),n(m).includes("remark")?(i(),d(_,{key:10,align:"center",prop:"remark",width:"180",label:"备注"},{default:a(({row:e})=>[l(v,{modelValue:e.remark,"onUpdate:modelValue":u=>e.remark=u,onBlur:u=>pe(e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):b("",!0),l(_,{align:"center",prop:"i",label:"操作",fixed:"right",width:"250"},{default:a(({row:e})=>[l(Ie,null,{default:a(()=>[l(V,{size:"small",plain:"",type:"primary",onClick:u=>ce(e)},{default:a(()=>[c(" 加减款 ")]),_:2},1032,["onClick"]),l(V,{size:"small",plain:"",type:"primary",onClick:u=>re(e)},{default:a(()=>[c(" 编辑 ")]),_:2},1032,["onClick"]),l(V,{size:"small",plain:"",type:"primary",onClick:u=>ue(e)},{default:a(()=>[c(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ue,n(U)]]),l(xe,{"current-page":n(k).page,total:n(k).total,"page-size":n(k).size,"page-sizes":n(k).sizes,layout:n(k).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:me,onCurrentChange:g},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(We,{ref_key:"editRef",ref:M,onFetchData:S},null,512),l(Xe,{ref_key:"checkRef",ref:Y,onFetchData:S},null,512),l(Ze,{ref_key:"plusMinusPaymentsRef",ref:j,onFetchData:S},null,512)],2)}}}),It=Ge(ut,[["__scopeId","data-v-a81fa320"]]);export{It as default};
