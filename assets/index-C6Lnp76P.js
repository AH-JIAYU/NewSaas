
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ag as Ye,am as ve,r as V,d as Ge,A as Je,a5 as Ke,a3 as Ze,k as We,n as ge,a as c,o as p,e as b,w as a,f as t,i as n,s as d,g as _,b as D,t as E,H as Y,q as te,aq as ae,F as N,j as Q,I as oe,bm as Xe,E as G,an as le,N as et,aG as tt,aH as at,R as ot}from"./index-Ul7JPfYN.js";import{e as lt}from"./index-BWyTwl2r.js";import{g as nt,a as it}from"./zh_Hans-BOg_8KCD.js";import{z as rt}from"./zh_Hans-B39mJ-rS.js";import{f as ye}from"./file-BvPZgu2D.js";import{a as ne}from"./projectManagement-Cd9beXg-.js";import{u as be}from"./user_customer-DxUhHGF4.js";import{_ as st}from"./index.vue_vue_type_script_setup_true_lang-Cahbtf8F.js";const ut=Ye("projectManagementList",()=>{const U=ve(),J=be(),k=V([]),K={name:"",projectIdentification:"",clientId:null,countryIdList:[],doMoneyPrice:null,num:null,minimumDuration:null,ir:null,uidUrl:"",mutualExclusion:2,mutualExclusionId:"",remark:"",isPinned:2,isOnline:1,isProfile:2,isB2b:1,projectType:[],projectRemark:"",isTimeReleases:1,releaseTime:"",descriptionUrl:[],richText:"",projectQuotaInfoList:[],timeDifferenceDetection:2,ipDifferenceDetection:2,ipConsistency:2,limitedQuantity:null,preNum:null,data:{configurationInformation:{initialProblem:{countryId:null,projectProblemCategoryId:null,projectQuotaQuestionType:null,projectProblemId:null,keyValue:"",questionType:null,answerValueList:[],projectAnswerIdList:[]},configurationCountryList:null,projectCategoryList:null,ProjectProblemInfoList:[]}}},x={name:{val:"项目名称"},projectIdentification:{val:"项目标识"},clientId:{val:"所属客户"},countryIdList:{val:"所属国家"},doMoneyPrice:{val:"原价"},num:{val:"配额"},minimumDuration:{val:"最小时长"},ir:{val:"ir"},uidUrl:{val:"url"},mutualExclusion:{val:"填写互斥ID",type:"switch",1:"开启",2:"关闭"},mutualExclusionId:{val:"互斥id"},remark:{val:"备注"},isPinned:{val:"置顶",type:"switch",1:"开启",2:"关闭"},isOnline:{type:"switch",val:"在线",1:"开启",2:"关闭"},isProfile:{val:"前置问卷",type:"switch",1:"开启",2:"关闭"},isB2b:{val:"b2b",type:"switch",2:"开启",1:"关闭"},projectType:{val:"项目类型"},isTimeReleases:{val:"定时发布",type:"switch",2:"开启",1:"关闭"},releaseTime:{val:"发布时间"},limitedQuantity:{val:"小时完成量"},preNum:{val:"小时准入量"},ipDifferenceDetection:{val:"允许重复参与",type:"switch",1:"开启",2:"关闭"}},R={countryId:null,projectProblemCategoryId:null,projectQuotaQuestionType:null,projectProblemId:null,keyValue:"",questionType:null,answerValueList:[],projectAnswerIdList:[]},e={1:"自动分配",2:"供应商",3:"会员组"},Z=async(w,C)=>{const h=w.reduce((m,T)=>(m[T.projectId]=T,m),{});return await C.forEach(async m=>{const T=h[m.projectId];if(T){const y=[];for(const g in m)if(x.hasOwnProperty(g)){let v=m[g],j=T[g];if(JSON.stringify(v)!==JSON.stringify(j)){Array.isArray(v)&&!v.length&&(v=v.toString()),Array.isArray(j)&&!j.length&&(j=j.toString()),(g==="clientId"||g==="countryIdList")&&(j=await S(g,j),v=await S(g,v));const F=x[g].val||g;x[g].type==="switch"?y.push(`${F}「${x[g][j]}」更改为「${x[g][v]}」`):y.push(`${F}「${j||"null"}」更改为「${v||"null"}」`)}}y.length>0&&(m.projectLogList=y)}}),C},S=async(w,C)=>{let h;if(w==="clientId")h=(await J.getCustomerList()).find(y=>y.tenantCustomerId===C).customerAccord;else if(w==="countryIdList"){const T=(await U.getCountry()).reduce((y,g)=>(y[g.id]=g.chineseName,y),{});h=C.map(y=>T[y]).filter(y=>y!==void 0)}return h};return{initialTopTabsData:K,initialProblem:R,allocationTypeList:e,dataBeforeEditing:k,compareProjectData:Z}}),dt=ut,L=U=>(tt("data-v-3b65f16e"),U=U(),at(),U),ct=L(()=>d("div",{class:"card-header"},[d("span",null,"基本信息")],-1)),mt={style:{float:"left"}},pt={style:{float:"right",color:"red","font-size":"13px"}},ft={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},gt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},yt=L(()=>d("span",null,"描述配额",-1)),vt={key:0},bt=L(()=>d("div",{class:"el-upload__text"},"上传",-1)),_t=L(()=>d("div",{class:"el-upload__tip"}," 支持上传JPG/JPEG/PNG图片，小于10MB ",-1)),It=["src"],Lt=L(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),jt=L(()=>d("div",{class:"card-header"},"配置信息",-1)),ht=L(()=>d("div",{class:"card-header"},"安全信息",-1)),Pt=L(()=>d("div",null,[_("小时"),d("span",{class:"red"},"准入"),_("量")],-1)),Vt=L(()=>d("div",null,[_("小时"),d("span",{class:"blue"},"完成"),_("量")],-1)),wt=L(()=>d("div",{class:"hui"},"举例",-1)),Tt=L(()=>d("div",{class:"hui"}," 小时准入量【5】：10:00~11:00时间区间只能5人参与该项目 ",-1)),Ct=L(()=>d("div",{class:"hui"}," 小时完成量【5】：10:00~11:00时间区间只能5人完成该项目 ",-1)),Ut=L(()=>d("div",{class:"hui"}," 允许重复参与：开启后，小明同学做调查可以对该项目一直重复做，直到项目配额满 ",-1)),xt="例：https://www.xxxx.com/8994343?uid=[uid]",St=Ge({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},setup(U,{expose:J}){const k=ve(),K=be(),x=dt(),R=U,e=V(R.leftTab),Z=Je("validateTopTabs"),S=V("basicSettings"),w=V(),C=V(),h=V(!R.tabIndex);let m=V({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(i,o){const r=await k.getB2BTypeItemChildren(i.data.id)||[];o(r)}}}});const g=Ke({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属国家",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(i,o,r)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e.value.uidUrl)||r(new Error("请输入合法网址")),e.value.uidUrl.includes("[uid]")||r(new Error("格式不正确,请查看例子")),r()},trigger:"blur"}],releaseTime:[{validator:(i,o,r)=>{new Date(e.value.releaseTime).getTime()<Date.now()&&r(new Error("发布时间早于当前时间")),r()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入原价",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"}],ir:[{required:!0,message:"请输入配额",trigger:"blur"}]}),v=i=>{i.key==="."&&i.preventDefault()},j=i=>i.getTime()<Date.now()-864e5;function F(){if(new Date(e.value.releaseTime)*1e3/1e3<Date.now()){const r=new Date,s=r.getFullYear(),u=o(r.getMonth()+1),f=o(r.getDate()),I=o(r.getHours()),A=o(r.getMinutes()),M=o(r.getSeconds());e.value.releaseTime=`${s}-${u}-${f} ${I}:${A}:${M}`}function o(r){return(r<10?"0":"")+r}}const _e=i=>{const o=m.value.basicSettings.customerList.find(r=>r.tenantCustomerId===i);e.value.isProfile=o.antecedentQuestionnaire===2?1:2},Ie=()=>{e.value.countryIdList=[],m.value.checked&&m.value.basicSettings.countryList.map(i=>{e.value.countryIdList.push(i.id)})},Le=[nt({locale:it})];function je(i){e.value.richText=i}function he(){h.value=!h.value}const ie=V(""),O=V(!1),q=V([]),Pe=async(i,o)=>{e.value.descriptionUrl=o.map(s=>s.name);const{status:r}=await ye.delete({fileName:i.name});r===1&&G.success({message:"删除成功",center:!0})},Ve=(i,o)=>{e.value.descriptionUrl.push(i.data.qiNiuUrl)},we=async(i,o)=>{G.warning({message:"只能上传一个,删除原文件后重新上传",center:!0})},Te=i=>{ie.value=i.url,O.value=!0},Ce=async i=>{i.length&&i.forEach(async o=>{if(o){const r=await ye.detail({fileName:o});q.value.push({name:o,url:r.data.fileUrl})}})},Ue=i=>{e.value.isOnline=i===2?2:1},xe=i=>{i===2&&(e.value.projectQuotaInfoList=[])},Se=()=>{e.value.data.configurationInformation.configurationCountryList=null,m.value.checked=e.value.countryIdList.length===k.country.length},De=()=>{e.value.data.configurationInformation.projectCategoryList=null,re()},re=i=>{e.value.data.configurationInformation.initialProblem.projectProblemId=null,e.value.data.configurationInformation.ProjectProblemInfoList=null,i||(e.value.projectQuotaInfoList=[])},se=async(i,o)=>{i==="configurationInformation"&&!e.value.data.configurationInformation.configurationCountryList&&w.value.validateField(["countryIdList"],async r=>{if(r){re(o||!1);const s=await ne.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=s.data.getProjectCountryListInfoList,s.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=s.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=le(x.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=le(s.data.projectQuotaQuestionType)}else S.value="basicSettings",ge(()=>{setTimeout(()=>{w.value.scrollToField("countryIdList")}),G.warning({message:"请先选择所属国家",center:!0})})})},ue=async()=>{if(e.value.data.configurationInformation.initialProblem.countryId){if(!e.value.data.configurationInformation.projectCategoryList){const i={countryId:e.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},o=await ne.getProjectCategoryList(i);e.value.data.configurationInformation.projectCategoryList=o.data.getProjectCategoryInfoList.filter(r=>r.status===1)}}else G.warning({message:"请先选择配置信息下的国家",center:!0})},de=async(i,o)=>{i&&setTimeout(async()=>{const{projectProblemCategoryName:r,...s}=e.value.data.configurationInformation.projectCategoryList.find(f=>f.projectProblemCategoryId===i),u=await ne.getProjectProblemList(s);if(e.value.data.configurationInformation.ProjectProblemInfoList=u.data.getProjectProblemInfoList.map(f=>({...f,getProjectAnswerInfoList:f.getProjectAnswerInfoList.sort((I,A)=>I.answerValue.replace(/^[a-zA-Z]+/,"")-A.answerValue.replace(/^[a-zA-Z]+/,""))})),!o){e.value.projectQuotaInfoList=[];for(let f=0;f<e.value.data.configurationInformation.ProjectProblemInfoList.length;f++){const I=le(e.value.data.configurationInformation.initialProblem);I.projectProblemId=e.value.data.configurationInformation.ProjectProblemInfoList[f].id,I.keyValue=e.value.data.configurationInformation.ProjectProblemInfoList[f].question,I.questionType=e.value.data.configurationInformation.ProjectProblemInfoList[f].questionType,I.projectProblemCategoryId=i,e.value.projectQuotaInfoList.push(I)}}})},Qe=(i,o)=>{let r=e.value.projectQuotaInfoList[o].projectAnswerIdList;const u=e.value.data.configurationInformation.ProjectProblemInfoList[o].getProjectAnswerInfoList.filter(f=>r.includes(f.id));e.value.projectQuotaInfoList[o].answerValueList=u.map(f=>f.anotherName)},ce=async()=>{m.value.basicSettings.customerList=await K.getCustomerList()},ke=()=>{C.value.showEdit()},Ae=async()=>{await ce(),m.value.basicSettings.countryList=await k.getCountry(),m.value.basicSettings.B2BTypeList=await k.getB2BType()},Be=async()=>{e.value.projectQuotaInfoList.length&&(e.value.data.configurationInformation.initialProblem.countryId=e.value.projectQuotaInfoList[0].countryId,e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=e.value.projectQuotaInfoList[0].projectQuotaQuestionType,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId=e.value.projectQuotaInfoList[0].projectProblemCategoryId,await se("configurationInformation",!0),await ue(),setTimeout(async()=>{await de(e.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},me=(i,o)=>({get(){return e.value.projectQuotaInfoList[o].id===i?e.value.projectQuotaInfoList[o].projectAnswerIdList:e.value.projectQuotaInfoList.find(s=>s.projectProblemId===i).projectAnswerIdList},set(r){if(e.value.projectQuotaInfoList[o].id===i)e.value.projectQuotaInfoList[o].projectAnswerIdList=r;else{const s=e.value.projectQuotaInfoList.find(u=>u.projectProblemId===i);s.projectAnswerIdList=r}}});return Ze(()=>R.leftTab,(i,o)=>{e.value=i},{deep:!0}),We(async()=>{q.value=[],await Ae(),await Be()}),J({getUpLoad:Ce}),ge(()=>{Z(w.value)}),(i,o)=>{const r=c("el-input"),s=c("el-form-item"),u=c("el-col"),f=c("el-option"),I=et,A=c("el-button"),M=c("el-select"),W=c("el-checkbox"),pe=c("ElOption"),Ee=c("ElSelect"),P=c("el-row"),H=c("el-input-number"),fe=c("el-tooltip"),Ne=c("el-text"),$=c("el-card"),Re=c("el-icon"),qe=c("el-upload"),Me=c("el-dialog"),B=c("el-switch"),$e=c("el-cascader"),ze=c("el-date-picker"),X=c("el-tab-pane"),Fe=c("el-checkbox-group"),Oe=c("el-tabs"),He=c("ElForm");return p(),b(He,{"label-width":"100px",rules:n(g),ref_key:"formRef",ref:w,model:n(e)},{default:a(()=>[t(Oe,{modelValue:n(S),"onUpdate:modelValue":o[27]||(o[27]=l=>oe(S)?S.value=l:null),onTabChange:se},{default:a(()=>[t(X,{label:"基础设置",name:"basicSettings"},{default:a(()=>[t($,{"body-style":""},{header:a(()=>[ct]),default:a(()=>[t(P,{gutter:20},{default:a(()=>[t(u,{span:6},{default:a(()=>[t(s,{label:"项目名称",prop:"name"},{default:a(()=>[t(r,{modelValue:n(e).name,"onUpdate:modelValue":o[0]||(o[0]=l=>n(e).name=l),clearable:"",maxlength:50},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"项目标识",prop:"projectIdentification"},{default:a(()=>[t(r,{clearable:"",modelValue:n(e).projectIdentification,"onUpdate:modelValue":o[1]||(o[1]=l=>n(e).projectIdentification=l),maxlength:100},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"所属客户",prop:"clientId"},{default:a(()=>[t(M,{placeholder:"Select",modelValue:n(e).clientId,"onUpdate:modelValue":o[2]||(o[2]=l=>n(e).clientId=l),clearable:"",onChange:_e},{empty:a(()=>[d("div",ft,[_(" 暂无数据 "),t(A,{type:"primary",link:"",size:"small",onClick:ke},{default:a(()=>[_(" 快捷新增 "),t(I,{name:"ant-design:plus-outlined"})]),_:1})])]),default:a(()=>[(p(!0),D(N,null,E(n(m).basicSettings.customerList,l=>(p(),b(f,{key:l.tenantCustomerId,value:l.tenantCustomerId,label:l.customerAccord,disabled:l.isReveal===1},{default:a(()=>[d("span",mt,Y(l.customerAccord),1),te(d("span",pt,[te(d("span",null," 营业额超限 ",512),[[ae,l.turnover<l.practiceTurover]]),te(d("span",null," 审核率不合格 ",512),[[ae,l.rateAudit>l.practiceRateAudit]])],512),[[ae,l.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"所属国家",prop:"countryIdList"},{default:a(()=>[t(Ee,{modelValue:n(e).countryIdList,"onUpdate:modelValue":o[4]||(o[4]=l=>n(e).countryIdList=l),placeholder:"国家",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:Se},{header:a(()=>[t(W,{modelValue:n(m).checked,"onUpdate:modelValue":o[3]||(o[3]=l=>n(m).checked=l),onChange:Ie,style:{display:"flex",height:"unset"}},{default:a(()=>[_("全球")]),_:1},8,["modelValue"])]),default:a(()=>[(p(!0),D(N,null,E(n(m).basicSettings.countryList,l=>(p(),b(pe,{label:l.chineseName,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,{gutter:20},{default:a(()=>[t(u,{span:6},{default:a(()=>[t(s,{label:"原价",prop:"doMoneyPrice"},{default:a(()=>[t(H,{style:{height:"2rem"},modelValue:n(e).doMoneyPrice,"onUpdate:modelValue":o[5]||(o[5]=l=>n(e).doMoneyPrice=l),min:1,precision:1,step:.1,"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"配额",prop:"num"},{default:a(()=>[t(H,{style:{height:"2rem"},modelValue:n(e).num,"onUpdate:modelValue":o[6]||(o[6]=l=>n(e).num=l),step:1,"step-strictly":"",min:1,max:100,"controls-position":"right",size:"large",onKeydown:v},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{style:{position:"relative"},span:6},{default:a(()=>[t(s,{prop:"minimumDuration"},{label:a(()=>[d("div",null,[_(" 最小分长"),t(fe,{class:"tooltips",content:"这份问卷需要做到多少分钟",placement:"top"},{default:a(()=>[t(I,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:a(()=>[t(r,{style:{height:"2rem",width:"100%"},modelValue:n(e).minimumDuration,"onUpdate:modelValue":o[7]||(o[7]=l=>n(e).minimumDuration=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:v},{append:a(()=>[_(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"IR",prop:"ir"},{default:a(()=>[t(r,{modelValue:n(e).ir,"onUpdate:modelValue":o[8]||(o[8]=l=>n(e).ir=l),modelModifiers:{number:!0},min:1,max:100,step:"0.01",oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;value=Number(value).toFixed(1)"},{append:a(()=>[_(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,{gutter:20},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(s,{prop:"uidUrl"},{label:a(()=>[d("div",null,[_(" URL"),t(fe,{class:"tooltips",content:"仅支持URL后缀为[uid]的链接。",placement:"top"},{default:a(()=>[t(I,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:a(()=>[t(r,{clearable:"",modelValue:n(e).uidUrl,"onUpdate:modelValue":o[9]||(o[9]=l=>n(e).uidUrl=l)},null,8,["modelValue"]),t(Ne,{class:"mx-1"},{default:a(()=>[_(Y(xt))]),_:1})]),_:1})]),_:1}),t(u,{span:3},{default:a(()=>[t(s,{label:"填写互斥ID"},{default:a(()=>[t(W,{modelValue:n(e).mutualExclusion,"onUpdate:modelValue":o[10]||(o[10]=l=>n(e).mutualExclusion=l),style:{top:"-4px"},size:"large","true-value":1,"false-value":2},null,8,["modelValue"])]),_:1})]),_:1}),n(e).mutualExclusion===1?(p(),b(u,{key:0,span:12},{default:a(()=>[t(s,{label:"互斥ID"},{default:a(()=>[t(r,{clearable:"",modelValue:n(e).mutualExclusionId,"onUpdate:modelValue":o[11]||(o[11]=l=>n(e).mutualExclusionId=l)},null,8,["modelValue"])]),_:1})]),_:1})):Q("",!0)]),_:1})]),_:1}),t($,null,{header:a(()=>[d("div",gt,[yt,t(A,{type:"primary",link:"",size:"default",onClick:he},{default:a(()=>[_(Y(n(h)?"收起":"展开"),1)]),_:1})])]),default:a(()=>[n(h)?(p(),D("div",vt,[t(s,{label:"上传图片"},{default:a(()=>[t(qe,{"file-list":n(q),"onUpdate:fileList":o[12]||(o[12]=l=>oe(q)?q.value=l:null),action:"http://47.96.98.102:9100/project/uploadQiniu","list-type":"picture-card",drag:!0,limit:10,"on-preview":Te,"on-remove":Pe,"on-success":Ve,"on-exceed":we},{tip:a(()=>[_t]),default:a(()=>[t(Re,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:a(()=>[t(n(Xe))]),_:1}),bt]),_:1},8,["file-list"]),t(Me,{modelValue:n(O),"onUpdate:modelValue":o[13]||(o[13]=l=>oe(O)?O.value=l:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:a(()=>[d("img",{"w-full":"",src:n(ie),alt:"Preview Image"},null,8,It)]),_:1},8,["modelValue"])]),_:1}),t(P,{gutter:20},{default:a(()=>[t(u,{span:24},{default:a(()=>[t(s,{label:"项目描述"},{default:a(()=>[t(n(lt),{class:"editor",value:n(e).richText,plugins:Le,locale:n(rt),onChange:je},null,8,["value","locale"])]),_:1})]),_:1})]),_:1})])):Q("",!0)]),_:1}),t($,null,{header:a(()=>[Lt]),default:a(()=>[t(P,{gutter:20},{default:a(()=>[t(u,{span:3},{default:a(()=>[t(s,{label:"置顶"},{default:a(()=>[t(B,{"active-value":1,"inactive-value":2,modelValue:n(e).isPinned,"onUpdate:modelValue":o[14]||(o[14]=l=>n(e).isPinned=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:3},{default:a(()=>[t(s,{label:"在线"},{default:a(()=>[t(B,{"active-value":1,"inactive-value":2,disabled:n(e).isTimeReleases===2,modelValue:n(e).isOnline,"onUpdate:modelValue":o[15]||(o[15]=l=>n(e).isOnline=l)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),t(u,{span:4},{default:a(()=>[t(s,{label:"B2B"},{default:a(()=>[t(B,{"active-value":2,"inactive-value":1,modelValue:n(e).isB2b,"onUpdate:modelValue":o[16]||(o[16]=l=>n(e).isB2b=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:4},{default:a(()=>[t(s,{label:"前置问卷"},{default:a(()=>[t(B,{"active-value":1,"inactive-value":2,modelValue:n(e).isProfile,"onUpdate:modelValue":o[17]||(o[17]=l=>n(e).isProfile=l),onChange:xe},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:3},{default:a(()=>[t(s,{label:"定时发布"},{default:a(()=>[t(B,{"active-value":2,"inactive-value":1,modelValue:n(e).isTimeReleases,"onUpdate:modelValue":o[18]||(o[18]=l=>n(e).isTimeReleases=l),onChange:Ue},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,{gutter:20},{default:a(()=>[n(e).isB2b===2?(p(),b(u,{key:0,span:6},{default:a(()=>[t(s,{label:"项目类型"},{default:a(()=>[t($e,{"show-all-levels":!1,modelValue:n(e).projectType,"onUpdate:modelValue":o[19]||(o[19]=l=>n(e).projectType=l),props:n(m).basicSettings.B2BTypeProps,options:n(m).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):Q("",!0),n(e).isTimeReleases===2?(p(),b(u,{key:1,span:6},{default:a(()=>[t(s,{label:"发布时间",prop:"releaseTime"},{default:a(()=>[t(ze,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n(e).releaseTime,"onUpdate:modelValue":o[20]||(o[20]=l=>n(e).releaseTime=l),placeholder:"请选择时间",disabledDate:j,onChange:F},null,8,["modelValue"])]),_:1})]),_:1})):Q("",!0)]),_:1}),t(P,null,{default:a(()=>[t(u,{span:15},{default:a(()=>[t(s,{label:"备注"},{default:a(()=>[t(r,{maxlength:"200","show-word-limit":"",style:{width:"29rem"},type:"textarea",rows:5,modelValue:n(e).remark,"onUpdate:modelValue":o[21]||(o[21]=l=>n(e).remark=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(e).isProfile===1?(p(),b(X,{key:0,label:"配置信息",name:"configurationInformation"},{default:a(()=>[n(e).data?(p(),b($,{key:0},{header:a(()=>[jt]),default:a(()=>[t(P,{gutter:20},{default:a(()=>[t(u,{span:6},{default:a(()=>[t(s,{label:"选择国家"},{default:a(()=>[t(M,{modelValue:n(e).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":o[22]||(o[22]=l=>n(e).data.configurationInformation.initialProblem.countryId=l),filterable:"",clearable:"",placeholder:"Select",onChange:De},{default:a(()=>[(p(!0),D(N,null,E(n(e).data.configurationInformation.configurationCountryList,l=>(p(),b(pe,{label:l.countryName,value:l.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(s,{label:"问卷名称"},{default:a(()=>[t(M,{modelValue:n(e).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":o[23]||(o[23]=l=>n(e).data.configurationInformation.initialProblem.projectProblemCategoryId=l),clearable:"",placeholder:"Select",onFocus:ue,onChange:de},{default:a(()=>[(p(!0),D(N,null,E(n(e).data.configurationInformation.projectCategoryList,l=>(p(),b(f,{key:l.projectProblemCategoryId,label:l.projectProblemCategoryName,value:l.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(e).data.configurationInformation.ProjectProblemInfoList&&n(e).data.configurationInformation.ProjectProblemInfoList.length&&n(e).projectQuotaInfoList.length?(p(!0),D(N,{key:0},E(n(e).data.configurationInformation.ProjectProblemInfoList,(l,ee)=>(p(),b(P,{class:"allocation",gutter:20},{default:a(()=>[t(u,{span:20},{default:a(()=>[_(" 问题："+Y(l.question),1)]),_:2},1024),t(u,{span:20},{default:a(()=>[t(s,null,{default:a(()=>[l.questionType===1?(p(),b(r,{key:0,disabled:"",placeholder:"输入框无法设置"})):(p(),b(Fe,{key:1,modelValue:me(l.id,ee).get(),"onUpdate:modelValue":z=>me(l.id,ee).set(z),onChange:z=>Qe(3,ee)},{default:a(()=>[(p(!0),D(N,null,E(l.getProjectAnswerInfoList,z=>(p(),b(W,{label:z.anotherName,value:z.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):Q("",!0)]),_:1})):Q("",!0)]),_:1})):Q("",!0),t(X,{label:"安全信息",name:"securityInformation"},{default:a(()=>[t($,null,{header:a(()=>[ht]),default:a(()=>[t(P,{gutter:20},{default:a(()=>[t(u,{span:6},{default:a(()=>[t(s,null,{label:a(()=>[Pt]),default:a(()=>[t(H,{style:{height:"2rem"},modelValue:n(e).preNum,"onUpdate:modelValue":o[24]||(o[24]=l=>n(e).preNum=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:v},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:1}),t(u,{span:6},{default:a(()=>[t(s,null,{label:a(()=>[Vt]),default:a(()=>[t(H,{style:{height:"2rem"},modelValue:n(e).limitedQuantity,"onUpdate:modelValue":o[25]||(o[25]=l=>n(e).limitedQuantity=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:v},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{span:1}),t(u,{span:4},{default:a(()=>[t(s,{label:"允许重复参与"},{default:a(()=>[t(B,{modelValue:n(e).ipDifferenceDetection,"onUpdate:modelValue":o[26]||(o[26]=l=>n(e).ipDifferenceDetection=l),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),wt,Tt,Ct,Ut]),_:1})]),_:1},8,["modelValue"]),t(st,{ref_key:"editRef",ref:C,onFetchData:ce},null,512)]),_:1},8,["rules","model"])}}}),Dt=ot(St,[["__scopeId","data-v-3b65f16e"]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"}));export{Dt as T,Mt as i,dt as u};
