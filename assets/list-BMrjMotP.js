
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,r as n,aK as fe,a1 as ve,l as ge,a as s,n as be,p as H,o as p,b as F,f as e,w as t,a2 as he,a3 as Ce,g as u,C as N,e as f,j as h,i as v,O as ke,aL as ye,E as Se,J as we,aM as De,aN as Ee,am as ze,aH as Ie,aI as xe,q as Ve,N as Le}from"./index-CHTO5iG0.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-BgmpPkp6.js";import{_ as $e}from"./index.vue_vue_type_style_index_0_lang-DlHRF-3h.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-Dg_mIBWY.js";import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-3H-S0AKf.js";import{u as Be}from"./user_customer-BANyLBfL.js";import{a as P}from"./finance_invoice-CCjSshbC.js";import"./user_customer-y1Fw9TWI.js";const Re=g=>(Ie("data-v-42653c74"),g=g(),xe(),g),He=Re(()=>Ve("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=_e({name:"position_manage",__name:"list",setup(g){const M=Be(),C=n([]),{pagination:m,onSizeChange:O,onCurrentChange:T,onSortChange:Pe}=fe(),j=n(""),$=n([]),k=n(!0),y=n(),S=n(!1),c=n([]),w=n(!0);n(!1);const D=n("default"),E=n(!1),q=n([]),J=[{lable:"未收款",value:1},{lable:"部分收款",value:2},{lable:"已完结",value:3},{lable:"坏账",value:4}],K=n(null);n([]);const z=n([{label:"职位ID",prop:"tenantCustomerShortName",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"invoiceCode",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"invoiceAmount",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),i=ve({page:1,limit:10,tenantCustomerId:"",invoiceStatus:null,invoiceDateStart:"",invoiceDateEnd:"",paymentDateStart:"",paymentDateEnd:""});function Q(){y.value.showEdit("",C.value)}function G(l){y.value.showEdit(JSON.stringify(l),C.value)}function W(l){ye.confirm(`确认删除「${l.tenantCustomerShortName}」这条数据吗？`,"确认信息").then(()=>{P.delete({id:l.id}).then(()=>{d(),Se.success({message:"删除成功",center:!0})})}).catch(()=>{})}function X(l){q.value=l}function Y(){Object.assign(i,{page:1,limit:10,tenantCustomerId:"",invoiceStatus:null,invoiceDateStart:"",invoiceDateEnd:"",paymentDateStart:"",paymentDateEnd:""}),K.value=null,d()}function Z(l){O(l).then(()=>d())}function I(l=1){T(l).then(()=>d())}async function d(){k.value=!0,C.value=await M.getCustomerList();const{data:l}=await P.list(i);$.value=l.data,m.value.total=parseInt(l.total)||0,k.value=!1}return ge(()=>{z.value.forEach(l=>{l.checked&&c.value.push(l.prop)}),d()}),(l,a)=>{const U=s("el-input"),x=s("el-form-item"),ee=s("ElOption"),te=s("el-select"),A=we,V=s("ElButton"),ae=s("ElFormItem"),oe=s("el-form"),le=Ue,ne=s("ElDivider"),b=s("el-button"),se=$e,ie=De,re=Ee,ue=s("el-row"),_=s("el-table-column"),B=Ne,ce=s("el-empty"),pe=s("el-table"),me=s("ElPagination"),de=ze,R=be("loading");return H((p(),F("div",{class:ke({"absolute-container":S.value})},[e(de,null,{default:t(()=>[e(le,{"show-toggle":!1},{default:t(({fold:o,toggle:L})=>[e(oe,{model:i.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(x,{label:""},{default:t(()=>[e(U,{modelValue:i.invoiceStatus,"onUpdate:modelValue":a[0]||(a[0]=r=>i.invoiceStatus=r),placeholder:"职位ID",clearable:""},null,8,["modelValue"])]),_:1}),e(x,{label:""},{default:t(()=>[e(U,{modelValue:i.invoiceStatus,"onUpdate:modelValue":a[1]||(a[1]=r=>i.invoiceStatus=r),placeholder:"职位名称",clearable:""},null,8,["modelValue"])]),_:1}),e(x,{label:""},{default:t(()=>[e(te,{modelValue:i.invoiceStatus,"onUpdate:modelValue":a[2]||(a[2]=r=>i.invoiceStatus=r),placeholder:"状态",clearable:"",filterable:""},{default:t(()=>[(p(),F(he,null,Ce(J,r=>e(ee,{label:r.lable,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(ae,null,{default:t(()=>[e(V,{type:"primary",onClick:a[3]||(a[3]=r=>I())},{icon:t(()=>[e(A,{name:"i-ep:search"})]),default:t(()=>[u(" 筛选 ")]),_:1}),e(V,{onClick:Y},{icon:t(()=>[He]),default:t(()=>[u(" 重置 ")]),_:1}),e(V,{disabled:"",link:"",onClick:L},{icon:t(()=>[e(A,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[u(" "+N(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(ne,{"border-style":"dashed"}),e(ue,{gutter:24},{default:t(()=>[e(se,null,{default:t(()=>[e(b,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:Q},{default:t(()=>[u(" 新增职位 ")]),_:1})]),_:1}),e(re,null,{default:t(()=>[e(b,{size:"default",onClick:a[4]||(a[4]=()=>{})},{default:t(()=>[u(" 导出 ")]),_:1}),e(ie,{border:w.value,"onUpdate:border":a[5]||(a[5]=o=>w.value=o),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":a[6]||(a[6]=o=>S.value=o),checkList:c.value,"onUpdate:checkList":a[7]||(a[7]=o=>c.value=o),columns:z.value,"onUpdate:columns":a[8]||(a[8]=o=>z.value=o),"line-height":D.value,"onUpdate:lineHeight":a[9]||(a[9]=o=>D.value=o),stripe:E.value,"onUpdate:stripe":a[10]||(a[10]=o=>E.value=o),style:{"margin-left":"12px"},onQueryData:I},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),H((p(),f(pe,{ref_key:"tableSortRef",ref:j,style:{"margin-top":"10px"},"row-key":"id",data:$.value,border:w.value,size:D.value,stripe:E.value,onSelectionChange:X},{empty:t(()=>[e(ce,{description:"暂无数据"})]),default:t(()=>[e(_,{align:"center",type:"selection"}),c.value.includes("tenantCustomerShortName")?(p(),f(_,{key:0,prop:"tenantCustomerShortName","show-overflow-tooltip":"",align:"center",label:"职位ID"})):h("",!0),c.value.includes("invoiceCode")?(p(),f(_,{key:1,prop:"invoiceCode","show-overflow-tooltip":"",align:"center",label:"职位名称"})):h("",!0),c.value.includes("invoiceAmount")?(p(),f(_,{key:2,prop:"invoiceAmount","show-overflow-tooltip":"",align:"center",label:"账户数"},{default:t(({row:o})=>[e(B),u(N(o.invoiceAmount||0),1)]),_:1})):h("",!0),c.value.includes("remark")?(p(),f(_,{key:3,prop:"invoiceTax","show-overflow-tooltip":"",align:"center",label:"备注"},{default:t(({row:o})=>[e(B),u(N(o.invoiceTax||0),1)]),_:1})):h("",!0),e(_,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:o})=>[e(b,{size:"small",plain:"",type:"primary",onClick:L=>G(o)},{default:t(()=>[u(" 编辑 ")]),_:2},1032,["onClick"]),e(b,{size:"small",plain:"",type:"danger",onClick:L=>W(o)},{default:t(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[R,!1]]),e(me,{"current-page":v(m).page,total:v(m).total,"page-size":v(m).size,"page-sizes":v(m).sizes,layout:v(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:I,onSizeChange:Z},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ae,{onSuccess:d,ref_key:"editRef",ref:y},null,512)]),_:1})],2)),[[R,k.value]])}}}),Ge=Le(Fe,[["__scopeId","data-v-42653c74"]]);export{Ge as default};
