
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{aB as OK,W as PV,d as iq,bC as DK,r as qh,n as cq,B as RK,bn as MK,bD as NK,aU as iK,$ as LV,o as Uc,e as qu,i as ro,A as U7,L as pK,aC as BK,l as IK,ab as cK,Z as lK,a as pd,w as Yn,f as uo,y as Rc,g as vu,j as Gh,b as oD,t as wB,z as sD,s as sq,aG as rq,F as CB,bE as FK,E as H7,ao as z7,_ as PK,aH as LK,aI as $K}from"./index-BBiokp72.js";import{u as HK}from"./user_customer-BaqJGW_j.js";import{a as zK}from"./user_customer-DiQI2nJ2.js";import{f as uK}from"./file-tdgdfBNG.js";import{g as VK,a as UK}from"./zh_Hans-CrfEz-Jr.js";import"./index-iJRjh0Y-.js";import{a as V7}from"./projectManagement-BEytX_7s.js";import{u as WK}from"./projectManagement_list-BIiJeU--.js";import jK from"./index-DX9XX5iJ.js";import{a as ZK}from"./configuration_site_setting-BN7o4FM3.js";import{_ as GK}from"./index.vue_vue_type_script_setup_true_lang-Bv7CXao8.js";import"./index.vue_vue_type_script_setup_true_lang-BtRTe_8s.js";import"./index-3F-zYMZn.js";import"./index-Ce6E2ZvJ.js";import"./index-DPOxwKSn.js";import"./clipboard-38wp1nFk.js";import"./index-CvMyd2Ya.js";import"./department-Cw8dM6Mb.js";import"./position_manage-CHjUdjjm.js";import"./configuration_role-CjGI7cPy.js";import"./tenant_role-BO08-OuI.js";import"./configuration_manager-ColBkGdk.js";import"./configuration_siteSetting-BT26HMKS.js";import"./apiLoading-DFS0t4Mv.js";import"./stagedData-CrUhLsh6.js";import"./otherFunctions_screenLibrary-CtG8im9B.js";var hK={exports:{}};(function($n){(function(){var Xo=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},mo=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},vo=function(e,n){var s=Array.prototype.slice.call(e);return s.sort(n)},ko=function(e,n){return wn(function(s,a){return e.eq(n(s),n(a))})},wn=function(e){return{eq:e}},no=wn(function(e,n){return e===n}),Tt=no,Fn=function(e){return wn(function(n,s){if(n.length!==s.length)return!1;for(var a=n.length,l=0;l<a;l++)if(!e.eq(n[l],s[l]))return!1;return!0})},To=function(e,n){return ko(Fn(e),function(s){return vo(s,n)})},ss=function(e){return wn(function(n,s){var a=Object.keys(n),l=Object.keys(s);if(!To(Tt).eq(a,l))return!1;for(var f=a.length,v=0;v<f;v++){var k=a[v];if(!e.eq(n[k],s[k]))return!1}return!0})},st=wn(function(e,n){if(e===n)return!0;var s=Xo(e),a=Xo(n);return s!==a?!1:mo(s)?e===n:s==="array"?Fn(st).eq(e,n):s==="object"?ss(st).eq(e,n):!1});const es=Object.getPrototypeOf,Vn=(e,n,s)=>{var a;return s(e,n.prototype)?!0:((a=e.constructor)===null||a===void 0?void 0:a.name)===n.name},kn=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Vn(e,String,(s,a)=>a.isPrototypeOf(s))?"string":n},zn=e=>n=>kn(n)===e,Vt=e=>n=>typeof n===e,Ue=e=>n=>e===n,at=(e,n)=>ve(e)&&Vn(e,n,(s,a)=>es(s)===a),ue=zn("string"),ve=zn("object"),In=e=>at(e,Object),qt=zn("array"),re=Ue(null),rn=Vt("boolean"),oo=Ue(void 0),qn=e=>e==null,Qe=e=>!qn(e),Be=Vt("function"),z=Vt("number"),$t=(e,n)=>{if(qt(e)){for(let s=0,a=e.length;s<a;++s)if(!n(e[s]))return!1;return!0}return!1},Kt=()=>{},B=(e,n)=>(...s)=>e(n.apply(null,s)),Jt=(e,n)=>s=>e(n(s)),Le=e=>()=>e,Qt=e=>e,mn=(e,n)=>e===n;function Se(e,...n){return(...s)=>{const a=n.concat(s);return e.apply(null,a)}}const Oe=e=>n=>!e(n),ft=e=>()=>{throw new Error(e)},tt=e=>e(),Bt=e=>{e()},$e=Le(!1),pt=Le(!0);class Y{constructor(n,s){this.tag=n,this.value=s}static some(n){return new Y(!0,n)}static none(){return Y.singletonNone}fold(n,s){return this.tag?s(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?Y.some(n(this.value)):Y.none()}bind(n){return this.tag?n(this.value):Y.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:Y.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Qe(n)?Y.some(n):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const Jo=Array.prototype.slice,Et=Array.prototype.indexOf,Mt=Array.prototype.push,Pn=(e,n)=>Et.call(e,n),Nt=(e,n)=>{const s=Pn(e,n);return s===-1?Y.none():Y.some(s)},ce=(e,n)=>Pn(e,n)>-1,De=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const l=e[s];if(n(l,s))return!0}return!1},Ne=(e,n)=>{const s=e.length,a=new Array(s);for(let l=0;l<s;l++){const f=e[l];a[l]=n(f,l)}return a},oe=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const l=e[s];n(l,s)}},ct=(e,n)=>{for(let s=e.length-1;s>=0;s--){const a=e[s];n(a,s)}},At=(e,n)=>{const s=[],a=[];for(let l=0,f=e.length;l<f;l++){const v=e[l];(n(v,l)?s:a).push(v)}return{pass:s,fail:a}},dt=(e,n)=>{const s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];n(f,a)&&s.push(f)}return s},An=(e,n,s)=>(ct(e,(a,l)=>{s=n(s,a,l)}),s),it=(e,n,s)=>(oe(e,(a,l)=>{s=n(s,a,l)}),s),Dt=(e,n,s)=>{for(let a=0,l=e.length;a<l;a++){const f=e[a];if(n(f,a))return Y.some(f);if(s(f,a))break}return Y.none()},hn=(e,n)=>Dt(e,n,$e),Hn=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const l=e[s];if(n(l,s))return Y.some(s)}return Y.none()},ut=e=>{const n=[];for(let s=0,a=e.length;s<a;++s){if(!qt(e[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+e);Mt.apply(n,e[s])}return n},ot=(e,n)=>ut(Ne(e,n)),rt=(e,n)=>{for(let s=0,a=e.length;s<a;++s){const l=e[s];if(n(l,s)!==!0)return!1}return!0},nn=e=>{const n=Jo.call(e,0);return n.reverse(),n},Zo=(e,n)=>dt(e,s=>!ce(n,s)),Co=(e,n)=>{const s={};for(let a=0,l=e.length;a<l;a++){const f=e[a];s[String(f)]=n(f,a)}return s},Mn=(e,n)=>{const s=Jo.call(e,0);return s.sort(n),s},No=(e,n)=>n>=0&&n<e.length?Y.some(e[n]):Y.none(),Gt=e=>No(e,0),yo=e=>No(e,e.length-1),gr=Be(Array.from)?Array.from:e=>Jo.call(e),Us=(e,n)=>{for(let s=0;s<e.length;s++){const a=n(e[s],s);if(a.isSome())return a}return Y.none()},ma=(e,n)=>{const s=[],a=Be(n)?l=>De(s,f=>n(f,l)):l=>ce(s,l);for(let l=0,f=e.length;l<f;l++){const v=e[l];a(v)||s.push(v)}return s},ns=Object.keys,Pa=Object.hasOwnProperty,vn=(e,n)=>{const s=ns(e);for(let a=0,l=s.length;a<l;a++){const f=s[a],v=e[f];n(v,f)}},Ls=(e,n)=>Ba(e,(s,a)=>({k:a,v:n(s,a)})),Ba=(e,n)=>{const s={};return vn(e,(a,l)=>{const f=n(a,l);s[f.k]=f.v}),s},Dr=e=>(n,s)=>{e[s]=n},Gi=(e,n,s,a)=>{vn(e,(l,f)=>{(n(l,f)?s:a)(l,f)})},hi=(e,n)=>{const s={},a={};return Gi(e,n,Dr(s),Dr(a)),{t:s,f:a}},Er=(e,n)=>{const s={};return Gi(e,n,Dr(s),Kt),s},bi=(e,n)=>{const s=[];return vn(e,(a,l)=>{s.push(n(a,l))}),s},Bi=e=>bi(e,Qt),kr=(e,n)=>Lo(e,n)?Y.from(e[n]):Y.none(),Lo=(e,n)=>Pa.call(e,n),Aa=(e,n)=>Lo(e,n)&&e[n]!==void 0&&e[n]!==null,vi=(e,n,s=st)=>ss(s).eq(e,n),nu=e=>{const n={};return oe(e,s=>{n[s]={}}),ns(n)},yt=e=>e.length!==void 0,Xr=Array.isArray,Oa=e=>{if(Xr(e))return e;{const n=[];for(let s=0,a=e.length;s<a;s++)n[s]=e[s];return n}},Ia=(e,n,s)=>{if(!e)return!1;if(s=s||e,yt(e)){for(let a=0,l=e.length;a<l;a++)if(n.call(s,e[a],a,e)===!1)return!1}else for(const a in e)if(Lo(e,a)&&n.call(s,e[a],a,e)===!1)return!1;return!0},Mc=(e,n)=>{const s=[];return Ia(e,(a,l)=>{s.push(n(a,l,e))}),s},ac=(e,n)=>{const s=[];return Ia(e,(a,l)=>{(!n||n(a,l,e))&&s.push(a)}),s},Ga=(e,n)=>{if(e){for(let s=0,a=e.length;s<a;s++)if(e[s]===n)return s}return-1},Ve=(e,n,s,a)=>{let l=oo(s)?e[0]:s;for(let f=0;f<e.length;f++)l=n.call(a,l,e[f],f);return l},Pe=(e,n,s)=>{for(let a=0,l=e.length;a<l;a++)if(n.call(s,e[a],a,e))return a;return-1},Rt=e=>e[e.length-1],Ht=e=>{let n=!1,s;return(...a)=>(n||(n=!0,s=e.apply(null,a)),s)},Qo=(e,n,s,a)=>{const l=e.isiOS()&&/ipad/i.test(s)===!0,f=e.isiOS()&&!l,v=e.isiOS()||e.isAndroid(),k=v||a("(pointer:coarse)"),O=l||!f&&v&&a("(min-device-width:768px)"),F=f||v&&!O,Z=n.isSafari()&&e.isiOS()&&/safari/i.test(s)===!1,K=!F&&!O&&!Z;return{isiPad:Le(l),isiPhone:Le(f),isTablet:Le(O),isPhone:Le(F),isTouch:Le(k),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Le(Z),isDesktop:Le(K)}},vs=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s];if(a.test(n))return a}},Fs=(e,n)=>{const s=vs(e,n);if(!s)return{major:0,minor:0};const a=l=>Number(n.replace(s,"$"+l));return xt(a(1),a(2))},ka=(e,n)=>{const s=String(n).toLowerCase();return e.length===0?fn():Fs(e,s)},fn=()=>xt(0,0),xt=(e,n)=>({major:e,minor:n}),We={nu:xt,detect:ka,unknown:fn},Ge=(e,n)=>Us(n.brands,s=>{const a=s.brand.toLowerCase();return hn(e,l=>{var f;return a===((f=l.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(l=>({current:l.name,version:We.nu(parseInt(s.version,10),0)}))}),pn=(e,n)=>{const s=String(n).toLowerCase();return hn(e,a=>a.search(s))},Tn=(e,n)=>pn(e,n).map(s=>{const a=We.detect(s.versionRegexes,n);return{current:s.name,version:a}}),Xn=(e,n)=>pn(e,n).map(s=>{const a=We.detect(s.versionRegexes,n);return{current:s.name,version:a}}),xo=(e,n)=>e.substring(n),Eo=(e,n,s)=>n===""||e.length>=n.length&&e.substr(s,s+n.length)===n,Bo=(e,n)=>cs(e,n)?xo(e,n.length):e,Vo=(e,n,s=0,a)=>{const l=e.indexOf(n,s);return l!==-1?oo(a)?!0:l+n.length<=a:!1},cs=(e,n)=>Eo(e,n,0),hr=(e,n)=>Eo(e,n,e.length-n.length),Va=e=>n=>n.replace(e,""),Ur=Va(/^\s+|\s+$/g),Al=Va(/^\s+/g),La=Va(/\s+$/g),Bs=e=>e.length>0,er=e=>!Bs(e),ar=(e,n)=>n<=0?"":new Array(n+1).join(e),Ua=(e,n=10)=>{const s=parseInt(e,n);return isNaN(s)?Y.none():Y.some(s)},Ti=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wc=e=>n=>Vo(n,e),Ta=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Vo(e,"edge/")&&Vo(e,"chrome")&&Vo(e,"safari")&&Vo(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ti],search:e=>Vo(e,"chrome")&&!Vo(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Vo(e,"msie")||Vo(e,"trident")},{name:"Opera",versionRegexes:[Ti,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wc("firefox")},{name:"Safari",versionRegexes:[Ti,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Vo(e,"safari")||Vo(e,"mobile/"))&&Vo(e,"applewebkit")}],ws=[{name:"Windows",search:Wc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Vo(e,"iphone")||Vo(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Wc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wc("linux"),versionRegexes:[]},{name:"Solaris",search:Wc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Wc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yu={browsers:Le(Ta),oses:Le(ws)},Ei="Edge",Es="Chromium",xu="IE",Xs="Opera",hd="Firefox",Vl="Safari",fs=()=>li({current:void 0,version:We.unknown()}),li=e=>{const n=e.current,s=e.version,a=l=>()=>n===l;return{current:n,version:s,isEdge:a(Ei),isChromium:a(Es),isIE:a(xu),isOpera:a(Xs),isFirefox:a(hd),isSafari:a(Vl)}},Ld={unknown:fs,nu:li,edge:Le(Ei),chromium:Le(Es),ie:Le(xu),opera:Le(Xs),firefox:Le(hd),safari:Le(Vl)},Wa="Windows",Dm="iOS",ui="Android",kg="Linux",qi="macOS",or="Solaris",wu="FreeBSD",Rm="ChromeOS",Ku=()=>oi({current:void 0,version:We.unknown()}),oi=e=>{const n=e.current,s=e.version,a=l=>()=>n===l;return{current:n,version:s,isWindows:a(Wa),isiOS:a(Dm),isAndroid:a(ui),isMacOS:a(qi),isLinux:a(kg),isSolaris:a(or),isFreeBSD:a(wu),isChromeOS:a(Rm)}},qa={unknown:Ku,nu:oi,windows:Le(Wa),ios:Le(Dm),android:Le(ui),linux:Le(kg),macos:Le(qi),solaris:Le(or),freebsd:Le(wu),chromeos:Le(Rm)},Wr={detect:(e,n,s)=>{const a=yu.browsers(),l=yu.oses(),f=n.bind(O=>Ge(a,O)).orThunk(()=>Tn(a,e)).fold(Ld.unknown,Ld.nu),v=Xn(l,e).fold(qa.unknown,qa.nu),k=Qo(v,f,e,s);return{browser:f,os:v,deviceType:k}}},bd=e=>window.matchMedia(e).matches;let ol=Ht(()=>Wr.detect(window.navigator.userAgent,Y.from(window.navigator.userAgentData),bd));const le=()=>ol(),He=window.navigator.userAgent,Je=le(),Pt=Je.browser,Nn=Je.os,ho=Je.deviceType,Kn=He.indexOf("Windows Phone")!==-1,ms={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Pt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Pt.isIE(),windowsPhone:Kn,browser:{current:Pt.current,version:Pt.version,isChromium:Pt.isChromium,isEdge:Pt.isEdge,isFirefox:Pt.isFirefox,isIE:Pt.isIE,isOpera:Pt.isOpera,isSafari:Pt.isSafari},os:{current:Nn.current,version:Nn.version,isAndroid:Nn.isAndroid,isChromeOS:Nn.isChromeOS,isFreeBSD:Nn.isFreeBSD,isiOS:Nn.isiOS,isLinux:Nn.isLinux,isMacOS:Nn.isMacOS,isSolaris:Nn.isSolaris,isWindows:Nn.isWindows},deviceType:{isDesktop:ho.isDesktop,isiPad:ho.isiPad,isiPhone:ho.isiPhone,isPhone:ho.isPhone,isTablet:ho.isTablet,isTouch:ho.isTouch,isWebView:ho.isWebView}},Ds=/^\s*|\s*$/g,br=e=>qn(e)?"":(""+e).replace(Ds,""),X=(e,n)=>n?n==="array"&&Xr(e)?!0:typeof e===n:e!==void 0,fe=(e,n,s={})=>{const a=ue(e)?e.split(n||","):e||[];let l=a.length;for(;l--;)s[a[l]]={};return s},Ze=Lo,St=(e,...n)=>{for(let s=0;s<n.length;s++){const a=n[s];for(const l in a)if(Lo(a,l)){const f=a[l];f!==void 0&&(e[l]=f)}}return e},Oo=function(e,n,s,a){a=a||this,e&&(s&&(e=e[s]),Ia(e,(l,f)=>n.call(a,l,f,s)===!1?!1:(Oo(l,n,s,a),!0)))},bn={trim:br,isArray:Xr,is:X,toArray:Oa,makeMap:fe,each:Ia,map:Mc,grep:ac,inArray:Ga,hasOwn:Ze,extend:St,walk:Oo,resolve:(e,n=window)=>{const s=e.split(".");for(let a=0,l=s.length;a<l&&(n=n[s[a]],!!n);a++);return n},explode:(e,n)=>qt(e)?e:e===""?[]:Mc(e.split(n||","),br),_addCacheSuffix:e=>{const n=ms.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},fl=(e,n,s=mn)=>e.exists(a=>s(a,n)),ba=(e,n,s=mn)=>Ii(e,n,s).getOr(e.isNone()&&n.isNone()),$d=e=>{const n=[],s=a=>{n.push(a)};for(let a=0;a<e.length;a++)e[a].each(s);return n},Ii=(e,n,s)=>e.isSome()&&n.isSome()?Y.some(s(e.getOrDie(),n.getOrDie())):Y.none(),cr=(e,n,s,a)=>e.isSome()&&n.isSome()&&s.isSome()?Y.some(a(e.getOrDie(),n.getOrDie(),s.getOrDie())):Y.none(),ou=(e,n)=>e?Y.some(n):Y.none(),Nc=typeof window<"u"?window:Function("return this;")(),Ul=(e,n)=>{let s=n??Nc;for(let a=0;a<e.length&&s!==void 0&&s!==null;++a)s=s[e[a]];return s},uc=(e,n)=>{const s=e.split(".");return Ul(s,n)},Mm=(e,n)=>uc(e,n),Xp=(e,n)=>{const s=Mm(e,n);if(s==null)throw new Error(e+" not available on this browser");return s},Qb=Object.getPrototypeOf,Ka=e=>Xp("HTMLElement",e),Nm=e=>{const n=uc("ownerDocument.defaultView",e);return ve(e)&&(Ka(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Qb(e).constructor.name))},Ec=8,sl=9,ic=11,Bm=1,we=3,_e=e=>e.dom.nodeName.toLowerCase(),wt=e=>e.dom.nodeType,un=e=>n=>wt(n)===e,Ko=e=>wt(e)===Ec||_e(e)==="#comment",Ks=e=>nr(e)&&Nm(e.dom),nr=un(Bm),Da=un(we),si=un(sl),Fi=un(ic),Ol=e=>n=>nr(n)&&_e(n)===e,di=(e,n,s)=>{if(ue(s)||rn(s)||z(s))e.setAttribute(n,s+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",s,":: Element ",e),new Error("Attribute value was not simple")},Pi=(e,n,s)=>{di(e.dom,n,s)},dc=(e,n)=>{const s=e.dom;vn(n,(a,l)=>{di(s,l,a)})},pl=(e,n)=>{const s=e.dom.getAttribute(n);return s===null?void 0:s},Yi=(e,n)=>Y.from(pl(e,n)),Bc=(e,n)=>{const s=e.dom;return s&&s.hasAttribute?s.hasAttribute(n):!1},tr=(e,n)=>{e.dom.removeAttribute(n)},_i=e=>{const n=e.dom.attributes;return n==null||n.length===0},Im=e=>it(e.dom.attributes,(n,s)=>(n[s.name]=s.value,n),{}),Fm=(e,n)=>{const s=pl(e,n);return s===void 0||s===""?[]:s.split(" ")},Ic=(e,n,s)=>{const l=Fm(e,n).concat([s]);return Pi(e,n,l.join(" ")),!0},Go=(e,n,s)=>{const a=dt(Fm(e,n),l=>l!==s);return a.length>0?Pi(e,n,a.join(" ")):tr(e,n),!1},og=e=>e.dom.classList!==void 0,Hd=e=>Fm(e,"class"),Br=(e,n)=>Ic(e,"class",n),su=(e,n)=>Go(e,"class",n),xv=(e,n)=>ce(Hd(e),n)?su(e,n):Br(e,n),Pm=(e,n)=>{og(e)?e.dom.classList.add(n):Br(e,n)},vr=e=>{(og(e)?e.dom.classList:Hd(e)).length===0&&tr(e,"class")},Wl=(e,n)=>{og(e)?e.dom.classList.remove(n):su(e,n),vr(e)},Jp=(e,n)=>{const s=og(e)?e.dom.classList.toggle(n):xv(e,n);return vr(e),s},Qp=(e,n)=>og(e)&&e.dom.classList.contains(n),cf=(e,n)=>{const a=(n||document).createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return lf(a.childNodes[0])},Lm=(e,n)=>{const a=(n||document).createElement(e);return lf(a)},sg=(e,n)=>{const a=(n||document).createTextNode(e);return lf(a)},lf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},je={fromHtml:cf,fromTag:Lm,fromText:sg,fromDom:lf,fromPoint:(e,n,s)=>Y.from(e.dom.elementFromPoint(n,s)).map(lf)},uf=(e,n)=>{const s=[],a=f=>(s.push(f),n(f));let l=n(e);do l=l.bind(a);while(l.isSome());return s},ga=(e,n)=>{const s=e.dom;if(s.nodeType!==Bm)return!1;{const a=s;if(a.matches!==void 0)return a.matches(n);if(a.msMatchesSelector!==void 0)return a.msMatchesSelector(n);if(a.webkitMatchesSelector!==void 0)return a.webkitMatchesSelector(n);if(a.mozMatchesSelector!==void 0)return a.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Tx=e=>e.nodeType!==Bm&&e.nodeType!==sl&&e.nodeType!==ic||e.childElementCount===0,Yh=(e,n)=>{const s=n===void 0?document:n.dom;return Tx(s)?[]:Ne(s.querySelectorAll(e),je.fromDom)},$m=(e,n)=>{const s=n===void 0?document:n.dom;return Tx(s)?Y.none():Y.from(s.querySelector(e)).map(je.fromDom)},Lr=(e,n)=>e.dom===n.dom,Xi=(e,n)=>{const s=e.dom,a=n.dom;return s===a?!1:s.contains(a)},hl=e=>je.fromDom(e.dom.ownerDocument),zd=e=>si(e)?e:hl(e),df=e=>je.fromDom(zd(e).dom.documentElement),mf=e=>je.fromDom(zd(e).dom.defaultView),jl=e=>Y.from(e.dom.parentNode).map(je.fromDom),Xh=e=>Y.from(e.dom.parentElement).map(je.fromDom),eh=(e,n)=>{const s=Be(n)?n:$e;let a=e.dom;const l=[];for(;a.parentNode!==null&&a.parentNode!==void 0;){const f=a.parentNode,v=je.fromDom(f);if(l.push(v),s(v)===!0)break;a=f}return l},Tg=e=>{const n=s=>dt(s,a=>!Lr(e,a));return jl(e).map(Rl).map(n).getOr([])},rl=e=>Y.from(e.dom.previousSibling).map(je.fromDom),ps=e=>Y.from(e.dom.nextSibling).map(je.fromDom),Dl=e=>nn(uf(e,rl)),gf=e=>uf(e,ps),Rl=e=>Ne(e.dom.childNodes,je.fromDom),om=(e,n)=>{const s=e.dom.childNodes;return Y.from(s[n]).map(je.fromDom)},al=e=>om(e,0),bl=e=>om(e,e.dom.childNodes.length-1),Hm=e=>e.dom.childNodes.length,Fc=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return je.fromDom(n)},ff=e=>Fi(e)&&Qe(e.dom.host),Vd=e=>je.fromDom(e.dom.getRootNode()),pf=e=>ff(e)?e:Fc(zd(e)),$0=e=>ff(e)?e:je.fromDom(zd(e).dom.body),Eg=e=>{const n=Vd(e);return ff(n)?Y.some(n):Y.none()},th=e=>je.fromDom(e.dom.host),wv=e=>{if(Qe(e.target)){const n=je.fromDom(e.target);if(nr(n)&&Ai(n)&&e.composed&&e.composedPath){const s=e.composedPath();if(s)return Gt(s)}}return Y.from(e.target)},Ai=e=>Qe(e.dom.shadowRoot),Zl=e=>{const n=Da(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const s=n.ownerDocument;return Eg(je.fromDom(n)).fold(()=>s.body.contains(n),Jt(Zl,th))};var Ml=(e,n,s,a,l)=>e(s,a)?Y.some(s):Be(l)&&l(s)?Y.none():n(s,a,l);const Yu=(e,n,s)=>{let a=e.dom;const l=Be(s)?s:$e;for(;a.parentNode;){a=a.parentNode;const f=je.fromDom(a);if(n(f))return Y.some(f);if(l(f))break}return Y.none()},oa=(e,n,s)=>Ml((l,f)=>f(l),Yu,e,n,s),jc=(e,n)=>{const s=e.dom;return s.parentNode?Ya(je.fromDom(s.parentNode),a=>!Lr(e,a)&&n(a)):Y.none()},Ya=(e,n)=>{const s=l=>n(je.fromDom(l));return hn(e.dom.childNodes,s).map(je.fromDom)},vl=(e,n)=>{const s=a=>{for(let l=0;l<a.childNodes.length;l++){const f=je.fromDom(a.childNodes[l]);if(n(f))return Y.some(f);const v=s(a.childNodes[l]);if(v.isSome())return v}return Y.none()};return s(e.dom)},hf=(e,n,s)=>Yu(e,a=>ga(a,n),s),Yt=(e,n)=>$m(n,e),wo=(e,n,s)=>Ml((l,f)=>ga(l,f),hf,e,n,s),yc=e=>wo(e,"[contenteditable]"),Gl=(e,n=!1)=>Zl(e)?e.dom.isContentEditable:yc(e).fold(Le(n),s=>mc(s)==="true"),mc=e=>e.dom.contentEditable,Ir=(e,n)=>{e.dom.contentEditable=n?"true":"false"},bf=e=>e.style!==void 0&&Be(e.style.getPropertyValue),ql=(e,n,s)=>{if(!ue(s))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",s,":: Element ",e),new Error("CSS value must be a string: "+s);bf(e)&&e.style.setProperty(n,s)},Fr=(e,n)=>{bf(e)&&e.style.removeProperty(n)},sm=(e,n,s)=>{const a=e.dom;ql(a,n,s)},Ws=(e,n)=>{const s=e.dom;vn(n,(a,l)=>{ql(s,l,a)})},_r=(e,n)=>{const s=e.dom,l=window.getComputedStyle(s).getPropertyValue(n);return l===""&&!Zl(e)?_g(s,n):l},_g=(e,n)=>bf(e)?e.style.getPropertyValue(n):"",il=(e,n)=>{const s=e.dom,a=_g(s,n);return Y.from(a).filter(l=>l.length>0)},Cu=e=>{const n={},s=e.dom;if(bf(s))for(let a=0;a<s.style.length;a++){const l=s.style.item(a);n[l]=s.style[l]}return n},gc=(e,n)=>{const s=e.dom;Fr(s,n),fl(Yi(e,"style").map(Ur),"")&&tr(e,"style")},ht=e=>e.dom.offsetWidth,Ji=(e,n)=>{jl(e).each(a=>{a.dom.insertBefore(n.dom,e.dom)})},Xu=(e,n)=>{ps(e).fold(()=>{jl(e).each(l=>{va(l,n)})},a=>{Ji(a,n)})},yi=(e,n)=>{al(e).fold(()=>{va(e,n)},a=>{e.dom.insertBefore(n.dom,a.dom)})},va=(e,n)=>{e.dom.appendChild(n.dom)},cl=(e,n)=>{Ji(e,n),va(n,e)},sr=(e,n)=>{oe(n,(s,a)=>{const l=a===0?e:n[a-1];Xu(l,s)})},vd=(e,n)=>{oe(n,s=>{va(e,s)})},rm=e=>{e.dom.textContent="",oe(Rl(e),n=>{Zr(n)})},Zr=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Su=e=>{const n=Rl(e);n.length>0&&sr(e,n),Zr(e)},zm=(e,n)=>{const a=(n||document).createElement("div");return a.innerHTML=e,Rl(je.fromDom(a))},Ag=e=>Ne(e,je.fromDom),mi=e=>e.dom.innerHTML,am=(e,n)=>{const a=hl(e).dom,l=je.fromDom(a.createDocumentFragment()),f=zm(n,a);vd(l,f),rm(e),va(e,l)},yd=e=>{const n=je.fromTag("div"),s=je.fromDom(e.dom.cloneNode(!0));return va(n,s),mi(n)},yr=(e,n,s,a,l,f,v)=>({target:e,x:n,y:s,stop:a,prevent:l,kill:f,raw:v}),im=e=>{const n=je.fromDom(wv(e).getOr(e.target)),s=()=>e.stopPropagation(),a=()=>e.preventDefault(),l=B(a,s);return yr(n,e.clientX,e.clientY,s,a,l,e)},Zc=(e,n)=>s=>{e(s)&&n(im(s))},I=(e,n,s,a,l)=>{const f=Zc(s,a);return e.dom.addEventListener(n,f,l),{unbind:Se(ne,e,n,f,l)}},j=(e,n,s,a)=>I(e,n,s,a,!1),ne=(e,n,s,a)=>{e.dom.removeEventListener(n,s,a)},ze=(e,n)=>({left:e,top:n,translate:(a,l)=>ze(e+a,n+l)}),qe=ze,Sn=e=>{const n=e.getBoundingClientRect();return qe(n.left,n.top)},as=(e,n)=>e!==void 0?e:n!==void 0?n:0,Ys=e=>{const n=e.dom.ownerDocument,s=n.body,a=n.defaultView,l=n.documentElement;if(s===e.dom)return qe(s.offsetLeft,s.offsetTop);const f=as(a==null?void 0:a.pageYOffset,l.scrollTop),v=as(a==null?void 0:a.pageXOffset,l.scrollLeft),k=as(l.clientTop,s.clientTop),O=as(l.clientLeft,s.clientLeft);return Os(e).translate(v-O,f-k)},Os=e=>{const n=e.dom,a=n.ownerDocument.body;return a===n?qe(a.offsetLeft,a.offsetTop):Zl(e)?Sn(n):qe(0,0)},_o=e=>{const n=e!==void 0?e.dom:document,s=n.body.scrollLeft||n.documentElement.scrollLeft,a=n.body.scrollTop||n.documentElement.scrollTop;return qe(s,a)},Oi=(e,n,s)=>{const l=(s!==void 0?s.dom:document).defaultView;l&&l.scrollTo(e,n)},Xa=(e,n)=>{le().browser.isSafari()&&Be(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Bu=e=>{const n=e===void 0?window:e;return le().browser.isFirefox()?Y.none():Y.from(n.visualViewport)},Iu=(e,n,s,a)=>({x:e,y:n,width:s,height:a,right:e+s,bottom:n+a}),nh=e=>{const n=e===void 0?window:e,s=n.document,a=_o(je.fromDom(s));return Bu(n).fold(()=>{const l=n.document.documentElement,f=l.clientWidth,v=l.clientHeight;return Iu(a.left,a.top,f,v)},l=>Iu(Math.max(l.pageLeft,a.left),Math.max(l.pageTop,a.top),l.width,l.height))},cm=(e,n)=>dt(Rl(e),n),H0=(e,n)=>{let s=[];return oe(Rl(e),a=>{n(a)&&(s=s.concat([a])),s=s.concat(H0(a,n))}),s},ll=(e,n)=>Yh(n,e),z0=(e,n,s)=>Yu(e,n,s).isSome(),NC=(e,n)=>jc(e,n).isSome(),xc=(e,n)=>vl(e,n).isSome();class ru{constructor(n,s){this.node=n,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,s,a,l){if(n){if(!l&&n[s])return n[s];if(n!==this.rootNode){let f=n[a];if(f)return f;for(let v=n.parentNode;v&&v!==this.rootNode;v=v.parentNode)if(f=v[a],f)return f}}}findPreviousNode(n,s){if(n){const a=n.previousSibling;if(this.rootNode&&a===this.rootNode)return;if(a){if(!s){for(let f=a.lastChild;f;f=f.lastChild)if(!f.lastChild)return f}return a}const l=n.parentNode;if(l&&l!==this.rootNode)return l}}}const Og="\uFEFF",wc=" ",Cv=e=>e===Og,Pc=e=>e.replace(/\uFEFF/g,""),os=/^[ \t\r\n]*$/,Ju=e=>os.test(e),Dg=e=>{for(const n of e)if(!Cv(n))return!1;return!0},e1=e=>" \f	\v".indexOf(e)!==-1,Sv=e=>e===`
`||e==="\r",t1=(e,n)=>n<e.length&&n>=0?Sv(e[n]):!1,Ud=(e,n=4,s=!0,a=!0)=>{const l=ar(" ",n),f=e.replace(/\t/g,l);return it(f,(k,O)=>e1(O)||O===wc?k.pcIsSpace||k.str===""&&s||k.str.length===f.length-1&&a||t1(f,k.str.length+1)?{pcIsSpace:!1,str:k.str+wc}:{pcIsSpace:!0,str:k.str+" "}:{pcIsSpace:Sv(O),str:k.str+O},{pcIsSpace:!1,str:""}).str},vf=e=>n=>!!n&&n.nodeType===e,oh=e=>!!e&&!Object.getPrototypeOf(e),so=vf(1),Qu=e=>so(e)&&Ks(je.fromDom(e)),Vm=e=>so(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",xd=e=>{const n=e.toLowerCase();return s=>Qe(s)&&s.nodeName.toLowerCase()===n},Fu=e=>{const n=e.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const a=s.nodeName.toLowerCase();return ce(n,a)}return!1}},n1=(e,n)=>{const s=n.toLowerCase().split(" ");return a=>{if(so(a)){const l=a.ownerDocument.defaultView;if(l)for(let f=0;f<s.length;f++){const v=l.getComputedStyle(a,null);if((v?v.getPropertyValue(e):null)===s[f])return!0}}return!1}},Rg=e=>n=>so(n)&&n.hasAttribute(e),ap=e=>so(e)&&e.hasAttribute("data-mce-bogus"),o1=e=>so(e)&&e.getAttribute("data-mce-bogus")==="all",rg=e=>so(e)&&e.tagName==="TABLE",Ex=e=>n=>!!(Qu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Li=Fu(["textarea","input"]),_n=vf(3),$s=vf(4),Uo=vf(7),fc=vf(8),sh=vf(9),Gc=vf(11),aa=xd("br"),Ja=xd("img"),dn=Ex("true"),ia=Ex("false"),tn=Fu(["td","th"]),qc=Fu(["td","th","caption"]),Kc=Fu(["video","audio","object","embed"]),ed=xd("li"),kv=xd("details"),lm=xd("summary"),_x={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},au=(e,n,s)=>{const a=je.fromDom(n),l=je.fromDom(e),f=s.getWhitespaceElements();return z0(l,k=>Lo(f,_e(k)),Se(Lr,a))},Cs=e=>so(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),ku=(e,n)=>so(e)&&Lo(n.getNonEmptyElements(),e.nodeName),s1=Rg("data-mce-bookmark"),ri=e=>Xh(je.fromDom(e)).exists(n=>!Gl(n)),Jh=(e,n,s)=>Ju(e.data)&&!au(e,n,s),Mg=(e,n,s,a)=>_n(e)&&!Jh(e,n,s)&&(!a.includeZwsp||!Dg(e.data)),um=(e,n,s,a)=>Be(a.isContent)&&a.isContent(n)||ku(n,e)||s1(n)||Cs(n)||Mg(n,s,e,a)||ia(n)||dn(n)&&ri(n),Yc=(e,n,s)=>{const a={..._x,...s};if(a.checkRootAsContent&&um(e,n,n,a))return!1;let l=n.firstChild,f=0;if(!l)return!0;const v=new ru(l,n);do{if(a.skipBogus&&so(l)){const k=l.getAttribute("data-mce-bogus");if(k){l=v.next(k==="all");continue}}if(fc(l)){l=v.next(!0);continue}if(aa(l)){f++,l=v.next();continue}if(um(e,l,n,a))return!1;l=v.next()}while(l);return f<=1},yl=(e,n,s)=>Yc(e,n.dom,{checkRootAsContent:!0,...s}),Ct=(e,n,s)=>um(e,n,n,{includeZwsp:_x.includeZwsp,...s}),fa=e=>{let n=e;return{get:()=>n,set:l=>{n=l}}},wd=e=>{const n=fa(Y.none()),s=()=>n.get().each(e);return{clear:()=>{s(),n.set(Y.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:k=>{s(),n.set(Y.some(k))}}},gn=e=>{const n=fa(Y.none()),s=()=>n.get().each(k=>clearInterval(k));return{clear:()=>{s(),n.set(Y.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:k=>{s(),n.set(Y.some(setInterval(k,e)))}}},Kl=()=>{const e=wd(Kt);return{...e,on:s=>e.get().each(s)}},Ra=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Ea=e=>Ra(e)!=="html",V0=e=>Ea(e.nodeName),D=e=>Ra(e.nodeName),H=["svg","math"],te=()=>{const e=Kl(),n=()=>e.get().map(D).getOr("html");return{track:l=>(V0(l)?e.set(l):e.get().exists(f=>!f.contains(l))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},ye="data-mce-block",et=e=>dt(ns(e),n=>!/[A-Z]/.test(n)),an=e=>Ne(et(e),n=>{const s=CSS.escape(n);return`${s}:`+Ne(H,a=>`not(${a} ${s})`).join(":")}).join(","),xn=(e,n)=>Qe(n.querySelector(e))?(n.setAttribute(ye,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(ye),!1),Fo=(e,n)=>{const s=an(e.getTransparentElements()),a=an(e.getBlockElements());return dt(n.querySelectorAll(s),l=>xn(a,l))},$o=(e,n,s)=>{var a;const l=s?"lastChild":"firstChild";for(let f=n[l];f;f=f[l])if(Yc(e,f,{checkRootAsContent:!0})){(a=f.parentNode)===null||a===void 0||a.removeChild(f);return}},Ss=(e,n,s)=>{const a=document.createRange(),l=n.parentNode;if(l){a.setStartBefore(n),a.setEndBefore(s);const f=a.extractContents();$o(e,f,!0),a.setStartAfter(s),a.setEndAfter(n);const v=a.extractContents();$o(e,v,!1),Yc(e,f,{checkRootAsContent:!0})||l.insertBefore(f,n),Yc(e,s,{checkRootAsContent:!0})||l.insertBefore(s,n),Yc(e,v,{checkRootAsContent:!0})||l.insertBefore(v,n),l.removeChild(n)}},ua=(e,n,s)=>{const a=e.getBlockElements(),l=je.fromDom(n),f=k=>_e(k)in a,v=k=>Lr(k,l);oe(Ag(s),k=>{Yu(k,f,v).each(O=>{const F=cm(k,Z=>f(Z)&&!e.isValidChild(_e(O),_e(Z)));if(F.length>0){const Z=Xh(O);oe(F,K=>{Yu(K,f,v).each(J=>{Ss(e,J.dom,K.dom)})}),Z.each(K=>Fo(e,K.dom))}})})},Pr=(e,n,s)=>{oe([...s,...yf(e,n)?[n]:[]],a=>oe(ll(je.fromDom(a),a.nodeName.toLowerCase()),l=>{ig(e,l.dom)&&Su(l)}))},gi=(e,n)=>{const s=Fo(e,n);ua(e,n,s),Pr(e,n,s)},Lc=(e,n)=>{if(r1(e,n)){const s=an(e.getBlockElements());xn(s,n)}},ag=(e,n,s)=>{const a=f=>Lr(f,je.fromDom(n)),l=eh(je.fromDom(s),a);No(l,l.length-2).filter(nr).fold(()=>gi(e,n),f=>gi(e,f.dom))},iu=e=>e.hasAttribute(ye),Um=(e,n)=>Lo(e.getTransparentElements(),n),r1=(e,n)=>so(n)&&Um(e,n.nodeName),yf=(e,n)=>r1(e,n)&&iu(n),ig=(e,n)=>r1(e,n)&&!iu(n),ip=(e,n)=>n.type===1&&Um(e,n.name)&&ue(n.attr(ye)),a1=le().browser,Qh=e=>hn(e,nr),i1=e=>a1.isFirefox()&&_e(e)==="table"?Qh(Rl(e)).filter(n=>_e(n)==="caption").bind(n=>Qh(gf(n)).map(s=>{const a=s.dom.offsetTop,l=n.dom.offsetTop,f=n.dom.offsetHeight;return a<=l?-f:0})).getOr(0):0,Xc=(e,n)=>e.children&&ce(e.children,n),cg=(e,n,s)=>{let a=0,l=0;const f=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&_r(je.fromDom(e),"position")==="static"){const k=n.getBoundingClientRect();return a=k.left+(f.documentElement.scrollLeft||e.scrollLeft)-f.documentElement.clientLeft,l=k.top+(f.documentElement.scrollTop||e.scrollTop)-f.documentElement.clientTop,{x:a,y:l}}let v=n;for(;v&&v!==s&&v.nodeType&&!Xc(v,s);){const k=v;a+=k.offsetLeft||0,l+=k.offsetTop||0,v=k.offsetParent}for(v=n.parentNode;v&&v!==s&&v.nodeType&&!Xc(v,s);)a-=v.scrollLeft||0,l-=v.scrollTop||0,v=v.parentNode;l+=i1(je.fromDom(n))}return{x:a,y:l}},$r=(e,n={})=>{let s=0;const a={},l=je.fromDom(e),f=zd(l),v=Xe=>{n.referrerPolicy=Xe},k=Xe=>{n.contentCssCors=Xe},O=Xe=>{va(pf(l),Xe)},F=Xe=>{const gt=pf(l);Yt(gt,"#"+Xe).each(Zr)},Z=Xe=>kr(a,Xe).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0})),K=Xe=>new Promise((gt,bt)=>{let Ot;const yn=bn._addCacheSuffix(Xe),Un=Z(yn);a[yn]=Un,Un.count++;const So=(Io,gs)=>{oe(Io,Bt),Un.status=gs,Un.passed=[],Un.failed=[],Ot&&(Ot.onload=null,Ot.onerror=null,Ot=null)},sn=()=>So(Un.passed,2),Ut=()=>So(Un.failed,3);if(gt&&Un.passed.push(gt),bt&&Un.failed.push(bt),Un.status===1)return;if(Un.status===2){sn();return}if(Un.status===3){Ut();return}Un.status=1;const En=je.fromTag("link",f.dom);dc(En,{rel:"stylesheet",type:"text/css",id:Un.id}),n.contentCssCors&&Pi(En,"crossOrigin","anonymous"),n.referrerPolicy&&Pi(En,"referrerpolicy",n.referrerPolicy),Ot=En.dom,Ot.onload=sn,Ot.onerror=Ut,O(En),Pi(En,"href",yn)}),J=(Xe,gt)=>{const bt=Z(Xe);a[Xe]=bt,bt.count++;const Ot=je.fromTag("style",f.dom);dc(Ot,{rel:"stylesheet",type:"text/css",id:bt.id,"data-mce-key":Xe}),Ot.dom.innerHTML=gt,O(Ot)},de=Xe=>Promise.allSettled(Ne(Xe,bt=>K(bt).then(Le(bt)))).then(bt=>{const Ot=At(bt,yn=>yn.status==="fulfilled");return Ot.fail.length>0?Promise.reject(Ne(Ot.fail,yn=>yn.reason)):Ne(Ot.pass,yn=>yn.value)}),Te=Xe=>{const gt=bn._addCacheSuffix(Xe);kr(a,gt).each(bt=>{--bt.count===0&&(delete a[gt],F(bt.id))})};return{load:K,loadRawCss:J,loadAll:de,unload:Te,unloadRawCss:Xe=>{kr(a,Xe).each(gt=>{--gt.count===0&&(delete a[Xe],F(gt.id))})},unloadAll:Xe=>{oe(Xe,gt=>{Te(gt)})},_setReferrerPolicy:v,_setContentCssCors:k}},Pu=(()=>{const e=new WeakMap;return{forElement:(s,a)=>{const f=Vd(s).dom;return Y.from(e.get(f)).getOrThunk(()=>{const v=$r(f,a);return e.set(f,v),v})}}})(),_c=e=>e.nodeName.toLowerCase()==="span",eb=(e,n)=>Qe(e)&&(Ct(n,e)||n.isInline(e.nodeName.toLowerCase())),Tv=(e,n,s)=>{const a=new ru(e,n).prev(!1),l=new ru(e,n).next(!1),f=oo(a)||eb(a,s),v=oo(l)||eb(l,s);return f&&v},xf=e=>_c(e)&&e.getAttribute("data-mce-type")==="bookmark",td=(e,n,s)=>_n(e)&&e.data.length>0&&Tv(e,n,s),wf=e=>so(e)?e.childNodes.length>0:!1,Bk=e=>Gc(e)||sh(e),nd=(e,n,s,a)=>{var l;const f=a||n;if(so(n)&&xf(n))return n;const v=n.childNodes;for(let k=v.length-1;k>=0;k--)nd(e,v[k],s,f);if(so(n)){const k=n.childNodes;k.length===1&&xf(k[0])&&((l=n.parentNode)===null||l===void 0||l.insertBefore(k[0],n))}return!Bk(n)&&!Ct(s,n)&&!wf(n)&&!td(n,f,s)&&e.remove(n),n},sA=bn.makeMap,lg=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tb=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ev=/[<>&\"\']/g,Ik=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,cp={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},c1={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},nb={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Qi=e=>{const n=je.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Ax=(e,n)=>{const s={};if(e){const a=e.split(",");n=n||10;for(let l=0;l<a.length;l+=2){const f=String.fromCharCode(parseInt(a[l],n));if(!c1[f]){const v="&"+a[l+1]+";";s[f]=v,s[v]=f}}return s}else return},lp=Ax("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rh=(e,n)=>e.replace(n?lg:tb,s=>c1[s]||s),U0=e=>(""+e).replace(Ev,n=>c1[n]||n),ug=(e,n)=>e.replace(n?lg:tb,s=>s.length>1?"&#"+((s.charCodeAt(0)-55296)*1024+(s.charCodeAt(1)-56320)+65536)+";":c1[s]||"&#"+s.charCodeAt(0)+";"),cu=(e,n,s)=>{const a=s||lp;return e.replace(n?lg:tb,l=>c1[l]||a[l]||l)},ah={encodeRaw:rh,encodeAllRaw:U0,encodeNumeric:ug,encodeNamed:cu,getEncodeFunc:(e,n)=>{const s=Ax(n)||lp,a=(v,k)=>v.replace(k?lg:tb,O=>c1[O]!==void 0?c1[O]:s[O]!==void 0?s[O]:O.length>1?"&#"+((O.charCodeAt(0)-55296)*1024+(O.charCodeAt(1)-56320)+65536)+";":"&#"+O.charCodeAt(0)+";"),l=(v,k)=>cu(v,k,s),f=sA(e.replace(/\+/g,","));return f.named&&f.numeric?a:f.named?n?l:cu:f.numeric?ug:rh},decode:e=>e.replace(Ik,(n,s)=>s?(s.charAt(0).toLowerCase()==="x"?s=parseInt(s.substr(1),16):s=parseInt(s,10),s>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(s&1023))):cp[s]||String.fromCharCode(s)):nb[n]||lp[n]||Qi(n))},$c=(e,n)=>(e=bn.trim(e),e?e.split(n||" "):[]),_v=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Hr=e=>ve(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",dm=e=>{const n=s=>qt(s)?Ne(s,n):Hr(s)?new RegExp(s.source,s.flags):ve(s)?Ls(s,n):s;return n(e)},up=e=>{const n=/^(~)?(.+)$/;return ot($c(e,","),s=>{const a=n.exec(s);if(a){const f=a[1]==="~"?"span":"div",v=a[2];return[{cloneName:f,name:v}]}else return[]})},Av=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),$a=e=>{let n,s;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",s+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(s=[s,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const a=[n,s].join(" ");return{blockContent:n,phrasingContent:s,flowContent:a}},od=e=>{const{blockContent:n,phrasingContent:s,flowContent:a}=$a(e),l=f=>Object.freeze(f.split(" "));return Object.freeze({blockContent:l(n),phrasingContent:l(s),flowContent:l(a)})},Wd={html4:Ht(()=>od("html4")),html5:Ht(()=>od("html5")),"html5-strict":Ht(()=>od("html5-strict"))},dp=(e,n)=>{const{blockContent:s,phrasingContent:a,flowContent:l}=Wd[e]();return n==="blocks"?Y.some(s):n==="phrasing"?Y.some(a):n==="flow"?Y.some(l):Y.none()},ec=e=>{const n=Av(e),{phrasingContent:s,flowContent:a}=$a(e),l={},f=(O,F,Z)=>{l[O]={attributes:Co(F,Le({})),attributesOrder:F,children:Co(Z,Le({}))}},v=(O,F="",Z="")=>{const K=$c(Z),J=$c(O);let de=J.length;const Te=[...n,...$c(F)];for(;de--;)f(J[de],Te.slice(),K)},k=(O,F)=>{const Z=$c(O),K=$c(F);let J=Z.length;for(;J--;){const de=l[Z[J]];for(let Te=0,be=K.length;Te<be;Te++)de.attributes[K[Te]]={},de.attributesOrder.push(K[Te])}};return e!=="html5-strict"&&(oe($c("acronym applet basefont big font strike tt"),Z=>{v(Z,"",s)}),oe($c("center dir isindex noframes"),Z=>{v(Z,"",a)})),v("html","manifest","head body"),v("head","","base command link meta noscript script style title"),v("title hr noscript br"),v("base","href target"),v("link","href rel media hreflang type sizes hreflang"),v("meta","name http-equiv content charset"),v("style","media type scoped"),v("script","src async defer type charset"),v("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),v("dd div","",a),v("address dt caption","",e==="html4"?s:a),v("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),v("blockquote","cite",a),v("ol","reversed start type","li"),v("ul","","li"),v("li","value",a),v("dl","","dt dd"),v("a","href target rel media hreflang type",e==="html4"?s:a),v("q","cite",s),v("ins del","cite datetime",a),v("img","src sizes srcset alt usemap ismap width height"),v("iframe","src name width height",a),v("embed","src type width height"),v("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),v("param","name value"),v("map","name",[a,"area"].join(" ")),v("area","alt coords shape href target rel media hreflang type"),v("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),v("colgroup","span","col"),v("col","span"),v("tbody thead tfoot","","tr"),v("tr","","td th"),v("td","colspan rowspan headers",a),v("th","colspan rowspan headers scope abbr",a),v("form","accept-charset action autocomplete enctype method name novalidate target",a),v("fieldset","disabled form name",[a,"legend"].join(" ")),v("label","form for",s),v("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),v("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?a:s),v("select","disabled form multiple name required size","option optgroup"),v("optgroup","disabled label","option"),v("option","disabled label selected value"),v("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),v("menu","type label",[a,"li"].join(" ")),v("noscript","",a),e!=="html4"&&(v("wbr"),v("ruby","",[s,"rt rp"].join(" ")),v("figcaption","",a),v("mark rt rp bdi","",s),v("summary","",[s,"h1 h2 h3 h4 h5 h6"].join(" ")),v("canvas","width height",a),v("data","value",s),v("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),v("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),v("picture","","img source"),v("source","src srcset type media sizes"),v("track","kind src srclang label default"),v("datalist","",[s,"option"].join(" ")),v("article section nav aside main header footer","",a),v("hgroup","","h1 h2 h3 h4 h5 h6"),v("figure","",[a,"figcaption"].join(" ")),v("time","datetime",s),v("dialog","open",a),v("command","type label icon disabled checked radiogroup command"),v("output","for form name",s),v("progress","value max",s),v("meter","value min max low high optimum",s),v("details","open",[a,"summary"].join(" ")),v("keygen","autofocus challenge disabled form keytype name"),f("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(k("script","language xml:space"),k("style","xml:space"),k("object","declare classid code codebase codetype archive standby align border hspace vspace"),k("embed","align name hspace vspace"),k("param","valuetype type"),k("a","charset name rev shape coords"),k("br","clear"),k("applet","codebase archive code object alt name width height align hspace vspace"),k("img","name longdesc align border hspace vspace"),k("iframe","longdesc frameborder marginwidth marginheight scrolling align"),k("font basefont","size color face"),k("input","usemap align"),k("select"),k("textarea"),k("h1 h2 h3 h4 h5 h6 div p legend caption","align"),k("ul","type compact"),k("li","type"),k("ol dl menu dir","compact"),k("pre","width xml:space"),k("hr","align noshade size width"),k("isindex","prompt"),k("table","summary width frame rules cellspacing cellpadding align bgcolor"),k("col","width align char charoff valign"),k("colgroup","width align char charoff valign"),k("thead","align char charoff valign"),k("tr","align char charoff valign bgcolor"),k("th","axis align char charoff valign nowrap bgcolor width height"),k("form","accept"),k("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),k("tfoot","align char charoff valign"),k("tbody","align char charoff valign"),k("area","nohref"),k("body","background bgcolor text link vlink alink")),e!=="html4"&&(k("input button select textarea","autofocus"),k("input textarea","placeholder"),k("a","download"),k("link script img","crossorigin"),k("img","loading"),k("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&oe([l.video,l.audio],O=>{delete O.children.audio,delete O.children.video}),oe($c("a form meter progress dfn"),O=>{l[O]&&delete l[O].children[O]}),delete l.caption.children.table,delete l.script,l},Dx=e=>e==="-"?"remove":"add",W0=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return Y.from(n.exec(e)).map(s=>({preset:s[1]==="@",name:s[2]}))},Ov=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ot($c(e,","),s=>{const a=n.exec(s);if(a){const l=a[1],f=l?Dx(l):"replace",v=a[2],k=ot($c(a[3],"|"),O=>W0(O).toArray());return[{operation:f,name:v,validChildren:k}]}else return[]})},Ng=(e,n)=>{const s=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,a=/[*?+]/,{attributes:l,attributesOrder:f}=n;return oe($c(e,"|"),v=>{const k=s.exec(v);if(k){const O={},F=k[1],Z=k[2].replace(/[\\:]:/g,":"),K=k[3],J=k[4];if(F==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(Z),O.required=!0),F==="-"){delete l[Z],f.splice(bn.inArray(f,Z),1);return}if(K&&(K==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:Z,value:J}),O.defaultValue=J):K==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:Z,value:J}),O.forcedValue=J):K==="<"&&(O.validValues=bn.makeMap(J,"?"))),a.test(Z)){const de=O;n.attributePatterns=n.attributePatterns||[],de.pattern=_v(Z),n.attributePatterns.push(de)}else l[Z]||f.push(Z),l[Z]=O}})},Fk=(e,n)=>{vn(e.attributes,(s,a)=>{n.attributes[a]=s}),n.attributesOrder.push(...e.attributesOrder)},Do=(e,n)=>{const s=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ot($c(n,","),a=>{const l=s.exec(a);if(l){const f=l[1],v=l[2],k=l[3],O=l[4],F=l[5],Z={attributes:{},attributesOrder:[]};if(e.each(K=>Fk(K,Z)),f==="#"?Z.paddEmpty=!0:f==="-"&&(Z.removeEmpty=!0),O==="!"&&(Z.removeEmptyAttrs=!0),F&&Ng(F,Z),k&&(Z.outputName=v),v==="@")if(e.isNone())e=Y.some(Z);else return[];return[k?{name:v,element:Z,aliasName:k}:{name:v,element:Z}]}else return[]})},l1={},xr=bn.makeMap,qo=bn.each,ob=bn.extend,j0=bn.explode,sb=(e,n={})=>{const s=xr(e," ",xr(e.toUpperCase()," "));return ob(s,n)},Dv=e=>sb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),IC=(e,n)=>{if(e){const s={};return ue(e)&&(e={"*":e}),qo(e,(a,l)=>{s[l]=s[l.toUpperCase()]=n==="map"?xr(a,/[, ]/):j0(a,/[, ]/)}),s}else return},ya=(e={})=>{var n;const s={},a={};let l=[];const f={},v={},k=(is,la,_l)=>{const Mu=e[is];if(Mu)return xr(Mu,/[, ]/,xr(Mu.toUpperCase(),/[, ]/));{let fd=l1[is];return fd||(fd=sb(la,_l),l1[is]=fd),fd}},O=(n=e.schema)!==null&&n!==void 0?n:"html5",F=ec(O);e.verify_html===!1&&(e.valid_elements="*[*]");const Z=IC(e.valid_styles),K=IC(e.invalid_styles,"map"),J=IC(e.valid_classes,"map"),de=k("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Te=k("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),be=k("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Me=k("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Xe="td th iframe video audio object script code",gt=k("non_empty_elements",Xe+" pre svg textarea summary",be),bt=k("move_caret_before_on_enter_elements",Xe+" table",be),Ot="h1 h2 h3 h4 h5 h6",yn=k("text_block_elements",Ot+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Un=k("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",yn),So=k("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),sn=k("transparent_elements","a ins del canvas map"),Ut=k("wrap_block_elements","pre "+Ot);qo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),is=>{v[is]=new RegExp("</"+is+"[^>]*>","gi")});const En=is=>{const la=Y.from(s["@"]),_l=/[*?+]/;oe(Do(la,is??""),({name:Mu,element:fd,aliasName:Nu})=>{if(Nu&&(s[Nu]=fd),_l.test(Mu)){const tl=fd;tl.pattern=_v(Mu),l.push(tl)}else s[Mu]=fd})},Io=is=>{l=[],oe(ns(s),la=>{delete s[la]}),En(is)},gs=(is,la)=>{var _l,Mu;delete l1.text_block_elements,delete l1.block_elements;const fd=la.extends?!Zp(la.extends):!1,Nu=la.extends;if(a[is]=Nu?a[Nu]:{},f[is]=Nu??is,gt[is.toUpperCase()]={},gt[is]={},fd||(Un[is.toUpperCase()]={},Un[is]={}),Nu&&!s[is]&&s[Nu]){const tl=dm(s[Nu]);delete tl.removeEmptyAttrs,delete tl.removeEmpty,s[is]=tl}else s[is]={attributesOrder:[],attributes:{}};if(qt(la.attributes)){const tl=wg=>{nl.attributesOrder.push(wg),nl.attributes[wg]={}},nl=(_l=s[is])!==null&&_l!==void 0?_l:{};delete nl.attributesDefault,delete nl.attributesForced,delete nl.attributePatterns,delete nl.attributesRequired,nl.attributesOrder=[],nl.attributes={},oe(la.attributes,wg=>{const Yb=Av(O);W0(wg).each(({preset:P0,name:hv})=>{P0?hv==="global"&&oe(Yb,tl):tl(hv)})}),s[is]=nl}if(rn(la.padEmpty)){const tl=(Mu=s[is])!==null&&Mu!==void 0?Mu:{};tl.paddEmpty=la.padEmpty,s[is]=tl}if(qt(la.children)){const tl={},nl=Yb=>{tl[Yb]={}},wg=Yb=>{dp(O,Yb).each(P0=>{oe(P0,nl)})};oe(la.children,Yb=>{W0(Yb).each(({preset:P0,name:hv})=>{P0?wg(hv):nl(hv)})}),a[is]=tl}Nu&&vn(a,(tl,nl)=>{tl[Nu]&&(a[nl]=tl=ob({},a[nl]),tl[is]=tl[Nu])})},Gs=is=>{oe(up(is??""),({name:la,cloneName:_l})=>{gs(la,{extends:_l})})},Tr=is=>{ve(is)?vn(is,(la,_l)=>gs(_l,la)):ue(is)&&Gs(is)},za=is=>{oe(Ov(is??""),({operation:la,name:_l,validChildren:Mu})=>{const fd=la==="replace"?{"#comment":{}}:a[_l],Nu=nl=>{la==="remove"?delete fd[nl]:fd[nl]={}},tl=nl=>{dp(O,nl).each(wg=>{oe(wg,Nu)})};oe(Mu,({preset:nl,name:wg})=>{nl?tl(wg):Nu(wg)}),a[_l]=fd})},ci=is=>{const la=s[is];if(la)return la;let _l=l.length;for(;_l--;){const Mu=l[_l];if(Mu.pattern.test(is))return Mu}},El=()=>{e.valid_elements?(Io(e.valid_elements),qo(F,(is,la)=>{a[la]=is.children})):(qo(F,(is,la)=>{s[la]={attributes:is.attributes,attributesOrder:is.attributesOrder},a[la]=is.children}),qo($c("strong/b em/i"),is=>{const la=$c(is,"/");s[la[1]].outputName=la[0]}),qo(So,(is,la)=>{s[la]&&(e.padd_empty_block_inline_children&&(s[la].paddInEmptyBlock=!0),s[la].removeEmpty=!0)}),qo($c("ol ul blockquote a table tbody"),is=>{s[is]&&(s[is].removeEmpty=!0)}),qo($c("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),is=>{s[is]&&(s[is].paddEmpty=!0)}),qo($c("span"),is=>{s[is].removeEmptyAttrs=!0})),delete s.svg,Tr(e.custom_elements),za(e.valid_children),En(e.extended_valid_elements),za("+ol[ul|ol],+ul[ul|ol]"),qo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(is,la)=>{s[la]&&(s[la].parentsRequired=$c(is))}),e.invalid_elements&&qo(j0(e.invalid_elements),is=>{s[is]&&delete s[is]}),ci("span")||En("span[!data-mce-type|*]")},tm=Le(Z),gd=Le(K),to=Le(J),us=Le(Me),pa=Le(Un),bo=Le(yn),Is=Le(So),Ps=Le(Object.seal(be)),po=Le(Te),Or=Le(gt),Vr=Le(bt),Ru=Le(de),Za=Le(sn),_m=Le(Ut),tp=Le(Object.seal(v)),F0=(is,la)=>{const _l=a[is.toLowerCase()];return!!(_l&&_l[la.toLowerCase()])},ng=(is,la)=>{const _l=ci(is);if(_l)if(la){if(_l.attributes[la])return!0;const Mu=_l.attributePatterns;if(Mu){let fd=Mu.length;for(;fd--;)if(Mu[fd].pattern.test(la))return!0}}else return!0;return!1},Zp=is=>Lo(pa(),is),Gp=is=>!cs(is,"#")&&ng(is)&&!Zp(is),nm=is=>Lo(_m(),is)||Gp(is),qp=Le(f);return El(),{type:O,children:a,elements:s,getValidStyles:tm,getValidClasses:to,getBlockElements:pa,getInvalidStyles:gd,getVoidElements:Ps,getTextBlockElements:bo,getTextInlineElements:Is,getBoolAttrs:us,getElementRule:ci,getSelfClosingElements:po,getNonEmptyElements:Or,getMoveCaretBeforeOnEnterElements:Vr,getWhitespaceElements:Ru,getTransparentElements:Za,getSpecialElements:tp,isValidChild:F0,isValid:ng,isBlock:Zp,isInline:Gp,isWrapper:nm,getCustomElements:qp,addValidElements:En,setValidElements:Io,addCustomElements:Tr,addValidChildren:za}},Pk=e=>({value:FC(e)}),FC=e=>Bo(e,"#").toUpperCase(),PC=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},on=e=>{const n=PC(e.red)+PC(e.green)+PC(e.blue);return Pk(n)},Rv=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Z0=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,G0=(e,n,s,a)=>({red:e,green:n,blue:s,alpha:a}),Rx=(e,n,s,a)=>{const l=parseInt(e,10),f=parseInt(n,10),v=parseInt(s,10),k=parseFloat(a);return G0(l,f,v,k)},q0=e=>Rv.test(e)?"rgb":Z0.test(e)?"rgba":"other",LC=e=>{const n=Rv.exec(e);if(n!==null)return Y.some(Rx(n[1],n[2],n[3],"1"));const s=Z0.exec(e);return s!==null?Y.some(Rx(s[1],s[2],s[3],s[4])):Y.none()},Mv=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,mp=e=>LC(e).map(on).map(n=>"#"+n.value).getOr(e),u1=(e={},n)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,f={};let v,k;const O=Og;n&&(v=n.getValidStyles(),k=n.getInvalidStyles());const F=(`\\" \\' \\; \\: ; : `+O).split(" ");for(let K=0;K<F.length;K++)f[F[K]]=O+K,f[O+K]=F[K];const Z={parse:K=>{const J={};let de=!1;const Te=e.url_converter,be=e.url_converter_scope||Z,Me=(sn,Ut,En)=>{const Io=J[sn+"-top"+Ut];if(!Io)return;const gs=J[sn+"-right"+Ut];if(!gs)return;const Gs=J[sn+"-bottom"+Ut];if(!Gs)return;const Tr=J[sn+"-left"+Ut];if(!Tr)return;const za=[Io,gs,Gs,Tr];let ci=za.length-1;for(;ci--&&za[ci]===za[ci+1];);ci>-1&&En||(J[sn+Ut]=ci===-1?za[0]:za.join(" "),delete J[sn+"-top"+Ut],delete J[sn+"-right"+Ut],delete J[sn+"-bottom"+Ut],delete J[sn+"-left"+Ut])},Xe=sn=>{const Ut=J[sn];if(!Ut)return;const En=Ut.indexOf(",")>-1?[Ut]:Ut.split(" ");let Io=En.length;for(;Io--;)if(En[Io]!==En[0])return!1;return J[sn]=En[0],!0},gt=(sn,Ut,En,Io)=>{Xe(Ut)&&Xe(En)&&Xe(Io)&&(J[sn]=J[Ut]+" "+J[En]+" "+J[Io],delete J[Ut],delete J[En],delete J[Io])},bt=sn=>(de=!0,f[sn]),Ot=(sn,Ut)=>(de&&(sn=sn.replace(/\uFEFF[0-9]/g,En=>f[En])),Ut||(sn=sn.replace(/\\([\'\";:])/g,"$1")),sn),yn=sn=>String.fromCharCode(parseInt(sn.slice(1),16)),Un=sn=>sn.replace(/\\[0-9a-f]+/gi,yn),So=(sn,Ut,En,Io,gs,Gs)=>{if(gs=gs||Gs,gs)return gs=Ot(gs),"'"+gs.replace(/\'/g,"\\'")+"'";if(Ut=Ot(Ut||En||Io||""),!e.allow_script_urls){const Tr=Ut.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Tr)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Tr))return""}return Te&&(Ut=Te.call(be,Ut,"style")),"url('"+Ut.replace(/\'/g,"\\'")+"')"};if(K){K=K.replace(/[\u0000-\u001F]/g,""),K=K.replace(/\\[\"\';:\uFEFF]/g,bt).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ut=>Ut.replace(/[;:]/g,bt));let sn;for(;sn=a.exec(K);){a.lastIndex=sn.index+sn[0].length;let Ut=sn[1].replace(l,"").toLowerCase(),En=sn[2].replace(l,"");if(Ut&&En){if(Ut=Un(Ut),En=Un(En),Ut.indexOf(O)!==-1||Ut.indexOf('"')!==-1||!e.allow_script_urls&&(Ut==="behavior"||/expression\s*\(|\/\*|\*\//.test(En)))continue;Ut==="font-weight"&&En==="700"?En="bold":(Ut==="color"||Ut==="background-color")&&(En=En.toLowerCase()),q0(En)==="rgb"&&LC(En).each(Io=>{En=mp(Mv(Io)).toLowerCase()}),En=En.replace(s,So),J[Ut]=de?Ot(En,!0):En}}Me("border","",!0),Me("border","-width"),Me("border","-color"),Me("border","-style"),Me("padding",""),Me("margin",""),gt("border","border-width","border-style","border-color"),J.border==="medium none"&&delete J.border,J["border-image"]==="none"&&delete J["border-image"]}return J},serialize:(K,J)=>{let de="";const Te=(Me,Xe)=>{const gt=Xe[Me];if(gt)for(let bt=0,Ot=gt.length;bt<Ot;bt++){const yn=gt[bt],Un=K[yn];Un&&(de+=(de.length>0?" ":"")+yn+": "+Un+";")}},be=(Me,Xe)=>{if(!k||!Xe)return!0;let gt=k["*"];return gt&&gt[Me]?!1:(gt=k[Xe],!(gt&&gt[Me]))};return J&&v?(Te("*",v),Te(J,v)):vn(K,(Me,Xe)=>{Me&&be(Xe,J)&&(de+=(de.length>0?" ":"")+Xe+": "+Me+";")}),de}};return Z},$i={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Cd=e=>e instanceof Event||Be(e.initEvent),d1=e=>e.isDefaultPrevented===pt||e.isDefaultPrevented===$e,gp=e=>qn(e.preventDefault)||Cd(e),Mx=(e,n)=>{const s=n??{};for(const a in e)Lo($i,a)||(s[a]=e[a]);return Qe(e.composedPath)&&(s.composedPath=()=>e.composedPath()),Qe(e.getModifierState)&&(s.getModifierState=a=>e.getModifierState(a)),Qe(e.getTargetRanges)&&(s.getTargetRanges=()=>e.getTargetRanges()),s},K0=(e,n,s,a)=>{var l;const f=Mx(n,a);return f.type=e,qn(f.target)&&(f.target=(l=f.srcElement)!==null&&l!==void 0?l:s),gp(n)&&(f.preventDefault=()=>{f.defaultPrevented=!0,f.isDefaultPrevented=pt,Be(n.preventDefault)&&n.preventDefault()},f.stopPropagation=()=>{f.cancelBubble=!0,f.isPropagationStopped=pt,Be(n.stopPropagation)&&n.stopPropagation()},f.stopImmediatePropagation=()=>{f.isImmediatePropagationStopped=pt,f.stopPropagation()},d1(f)||(f.isDefaultPrevented=f.defaultPrevented===!0?pt:$e,f.isPropagationStopped=f.cancelBubble===!0?pt:$e,f.isImmediatePropagationStopped=$e)),f},Y0="mce-data-",$C=/^(?:mouse|contextmenu)|click/,mm=(e,n,s,a)=>{e.addEventListener(n,s,a||!1)},HC=(e,n,s,a)=>{e.removeEventListener(n,s,a||!1)},tc=e=>Qe(e)&&$C.test(e.type),m1=(e,n)=>{const s=K0(e.type,e,document,n);if(tc(e)&&oo(e.pageX)&&!oo(e.clientX)){const a=s.target.ownerDocument||document,l=a.documentElement,f=a.body,v=s;v.pageX=e.clientX+(l&&l.scrollLeft||f&&f.scrollLeft||0)-(l&&l.clientLeft||f&&f.clientLeft||0),v.pageY=e.clientY+(l&&l.scrollTop||f&&f.scrollTop||0)-(l&&l.clientTop||f&&f.clientTop||0)}return s},rD=(e,n,s)=>{const a=e.document,l={type:"ready"};if(s.domLoaded){n(l);return}const f=()=>a.readyState==="complete"||a.readyState==="interactive"&&a.body,v=()=>{HC(e,"DOMContentLoaded",v),HC(e,"load",v),s.domLoaded||(s.domLoaded=!0,n(l)),e=null};f()?v():mm(e,"DOMContentLoaded",v),s.domLoaded||mm(e,"load",v)};class ih{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Y0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,s,a,l){const f=this;let v;const k=window,O=J=>{f.executeHandlers(m1(J||k.event),F)};if(!n||_n(n)||fc(n))return a;let F;n[f.expando]?F=n[f.expando]:(F=f.count++,n[f.expando]=F,f.events[F]={}),l=l||n;const Z=s.split(" ");let K=Z.length;for(;K--;){let J=Z[K],de=O,Te=!1,be=!1;if(J==="DOMContentLoaded"&&(J="ready"),f.domLoaded&&J==="ready"&&n.readyState==="complete"){a.call(l,m1({type:J}));continue}!f.hasFocusIn&&(J==="focusin"||J==="focusout")&&(Te=!0,be=J==="focusin"?"focus":"blur",de=Me=>{const Xe=m1(Me||k.event);Xe.type=Xe.type==="focus"?"focusin":"focusout",f.executeHandlers(Xe,F)}),v=f.events[F][J],v?J==="ready"&&f.domLoaded?a(m1({type:J})):v.push({func:a,scope:l}):(f.events[F][J]=v=[{func:a,scope:l}],v.fakeName=be,v.capture=Te,v.nativeHandler=de,J==="ready"?rD(n,de,f):mm(n,be||J,de,Te))}return n=v=null,a}unbind(n,s,a){if(!n||_n(n)||fc(n))return this;const l=n[this.expando];if(l){let f=this.events[l];if(s){const v=s.split(" ");let k=v.length;for(;k--;){const O=v[k],F=f[O];if(F){if(a){let Z=F.length;for(;Z--;)if(F[Z].func===a){const K=F.nativeHandler,J=F.fakeName,de=F.capture,Te=F.slice(0,Z).concat(F.slice(Z+1));Te.nativeHandler=K,Te.fakeName=J,Te.capture=de,f[O]=Te}}(!a||F.length===0)&&(delete f[O],HC(n,F.fakeName||O,F.nativeHandler,F.capture))}}}else vn(f,(v,k)=>{HC(n,v.fakeName||k,v.nativeHandler,v.capture)}),f={};for(const v in f)if(Lo(f,v))return this;delete this.events[l];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,s,a){return this.dispatch(n,s,a)}dispatch(n,s,a){if(!n||_n(n)||fc(n))return this;const l=m1({type:s,target:n},a);do{const f=n[this.expando];f&&this.executeHandlers(l,f),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!l.isPropagationStopped());return this}clean(n){if(!n||_n(n)||fc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const s=n.getElementsByTagName("*");let a=s.length;for(;a--;)n=s[a],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,s){const a=this.events[s],l=a&&a[n.type];if(l)for(let f=0,v=l.length;f<v;f++){const k=l[f];if(k&&k.func.call(k.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}ih.Event=new ih;const Tu=bn.each,Wm=bn.grep,Nx="data-mce-style",Cf=bn.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),lu=(e,n,s)=>{qn(s)||s===""?tr(e,n):Pi(e,n,s)},Ln=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Nv=(e,n)=>{let s=0;if(e)for(let a=e.nodeType,l=e.previousSibling;l;l=l.previousSibling){const f=l.nodeType;n&&_n(l)&&(f===a||!l.data.length)||(s++,a=f)}return s},xl=(e,n)=>{const s=pl(n,"style"),a=e.serialize(e.parse(s),_e(n));lu(n,Nx,a)},rb=(e,n)=>z(e)?Lo(Cf,n)?e+"":e+"px":e,Bx=(e,n,s)=>{const a=Ln(n);qn(s)||s===""?gc(e,a):sm(e,a,rb(s,a))},Lk=(e,n,s)=>{const a=n.keep_values,l={set:(v,k,O)=>{const F=je.fromDom(v);Be(n.url_converter)&&Qe(k)&&(k=n.url_converter.call(n.url_converter_scope||s(),String(k),O,v));const Z="data-mce-"+O;lu(F,Z,k),lu(F,O,k)},get:(v,k)=>{const O=je.fromDom(v);return pl(O,"data-mce-"+k)||pl(O,k)}},f={style:{set:(v,k)=>{const O=je.fromDom(v);a&&lu(O,Nx,k),tr(O,"style"),ue(k)&&Ws(O,e.parse(k))},get:v=>{const k=je.fromDom(v),O=pl(k,Nx)||pl(k,"style");return e.serialize(e.parse(O),_e(k))}}};return a&&(f.href=f.src=l),f},qs=(e,n={})=>{const s={},a=window,l={};let f=0;const v=!0,k=!0,O=Pu.forElement(je.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),F=[],Z=n.schema?n.schema:ya({}),K=u1({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),J=n.ownEvents?new ih:ih.Event,de=Z.getBlockElements(),Te=It=>ue(It)?Lo(de,It):so(It)&&(Lo(de,It.nodeName)||yf(Z,It)),be=It=>It&&e&&ue(It)?e.getElementById(It):It,Me=It=>{const Lt=be(It);return Qe(Lt)?je.fromDom(Lt):null},Xe=(It,Lt,Jn="")=>{let Wn;const Ns=Me(It);if(Qe(Ns)&&nr(Ns)){const ha=tD[Lt];ha&&ha.get?Wn=ha.get(Ns.dom,Lt):Wn=pl(Ns,Lt)}return Qe(Wn)?Wn:Jn},gt=It=>{const Lt=be(It);return qn(Lt)?[]:Lt.attributes},bt=(It,Lt,Jn)=>{us(It,Wn=>{if(so(Wn)){const Ns=je.fromDom(Wn),ha=Jn===""?null:Jn,gl=pl(Ns,Lt),L0=tD[Lt];L0&&L0.set?L0.set(Ns.dom,ha,Lt):lu(Ns,Lt,ha),gl!==ha&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ns.dom,attrName:Lt,attrValue:ha})}})},Ot=(It,Lt)=>It.cloneNode(Lt),yn=()=>n.root_element||e.body,Un=It=>{const Lt=nh(It);return{x:Lt.x,y:Lt.y,w:Lt.width,h:Lt.height}},So=(It,Lt)=>cg(e.body,be(It),Lt),sn=(It,Lt,Jn)=>{us(It,Wn=>{const Ns=je.fromDom(Wn);Bx(Ns,Lt,Jn),n.update_styles&&xl(K,Ns)})},Ut=(It,Lt)=>{us(It,Jn=>{const Wn=je.fromDom(Jn);vn(Lt,(Ns,ha)=>{Bx(Wn,ha,Ns)}),n.update_styles&&xl(K,Wn)})},En=(It,Lt,Jn)=>{const Wn=be(It);if(!(qn(Wn)||!Qu(Wn)&&!Vm(Wn)))return Jn?_r(je.fromDom(Wn),Ln(Lt)):(Lt=Lt.replace(/-(\D)/g,(Ns,ha)=>ha.toUpperCase()),Lt==="float"&&(Lt="cssFloat"),Wn.style?Wn.style[Lt]:void 0)},Io=It=>{const Lt=be(It);if(!Lt)return{w:0,h:0};let Jn=En(Lt,"width"),Wn=En(Lt,"height");return(!Jn||Jn.indexOf("px")===-1)&&(Jn="0"),(!Wn||Wn.indexOf("px")===-1)&&(Wn="0"),{w:parseInt(Jn,10)||Lt.offsetWidth||Lt.clientWidth,h:parseInt(Wn,10)||Lt.offsetHeight||Lt.clientHeight}},gs=It=>{const Lt=be(It),Jn=So(Lt),Wn=Io(Lt);return{x:Jn.x,y:Jn.y,w:Wn.w,h:Wn.h}},Gs=(It,Lt)=>{if(!It)return!1;const Jn=qt(It)?It:[It];return De(Jn,Wn=>ga(je.fromDom(Wn),Lt))},Tr=(It,Lt,Jn,Wn)=>{const Ns=[];let ha=be(It);Wn=Wn===void 0;const gl=Jn||(yn().nodeName!=="BODY"?yn().parentNode:null);if(ue(Lt))if(Lt==="*")Lt=so;else{const L0=Lt;Lt=Jb=>Gs(Jb,L0)}for(;ha&&!(ha===gl||qn(ha.nodeType)||sh(ha)||Gc(ha));){if(!Lt||Lt(ha))if(Wn)Ns.push(ha);else return[ha];ha=ha.parentNode}return Wn?Ns:null},za=(It,Lt,Jn)=>{const Wn=Tr(It,Lt,Jn,!1);return Wn&&Wn.length>0?Wn[0]:null},ci=(It,Lt,Jn)=>{let Wn=Lt;if(It){ue(Lt)&&(Wn=Ns=>Gs(Ns,Lt));for(let Ns=It[Jn];Ns;Ns=Ns[Jn])if(Be(Wn)&&Wn(Ns))return Ns}return null},El=(It,Lt)=>ci(It,Lt,"nextSibling"),tm=(It,Lt)=>ci(It,Lt,"previousSibling"),gd=It=>Be(It.querySelectorAll),to=(It,Lt)=>{var Jn,Wn;const Ns=(Wn=(Jn=be(Lt))!==null&&Jn!==void 0?Jn:n.root_element)!==null&&Wn!==void 0?Wn:e;return gd(Ns)?gr(Ns.querySelectorAll(It)):[]},us=function(It,Lt,Jn){const Wn=Jn??this;if(qt(It)){const Ns=[];return Tu(It,(ha,gl)=>{const L0=be(ha);L0&&Ns.push(Lt.call(Wn,L0,gl))}),Ns}else{const Ns=be(It);return Ns?Lt.call(Wn,Ns):!1}},pa=(It,Lt)=>{us(It,Jn=>{vn(Lt,(Wn,Ns)=>{bt(Jn,Ns,Wn)})})},bo=(It,Lt)=>{us(It,Jn=>{const Wn=je.fromDom(Jn);am(Wn,Lt)})},Is=(It,Lt,Jn,Wn,Ns)=>us(It,ha=>{const gl=ue(Lt)?e.createElement(Lt):Lt;return Qe(Jn)&&pa(gl,Jn),Wn&&(!ue(Wn)&&Wn.nodeType?gl.appendChild(Wn):ue(Wn)&&bo(gl,Wn)),Ns?gl:ha.appendChild(gl)}),Ps=(It,Lt,Jn)=>Is(e.createElement(It),It,Lt,Jn,!0),po=ah.decode,Or=ah.encodeAllRaw,Vr=(It,Lt,Jn="")=>{let Wn="<"+It;for(const Ns in Lt)Aa(Lt,Ns)&&(Wn+=" "+Ns+'="'+Or(Lt[Ns])+'"');return er(Jn)&&Lo(Z.getVoidElements(),It)?Wn+" />":Wn+">"+Jn+"</"+It+">"},Ru=It=>{const Lt=e.createElement("div"),Jn=e.createDocumentFragment();Jn.appendChild(Lt),It&&(Lt.innerHTML=It);let Wn;for(;Wn=Lt.firstChild;)Jn.appendChild(Wn);return Jn.removeChild(Lt),Jn},Za=(It,Lt)=>us(It,Jn=>{const Wn=je.fromDom(Jn);return Lt&&oe(Rl(Wn),Ns=>{Da(Ns)&&Ns.dom.length===0?Zr(Ns):Ji(Wn,Ns)}),Zr(Wn),Wn.dom}),_m=It=>us(It,Lt=>{const Jn=Lt.attributes;for(let Wn=Jn.length-1;Wn>=0;Wn--)Lt.removeAttributeNode(Jn.item(Wn))}),tp=It=>K.parse(It),F0=(It,Lt)=>K.serialize(It,Lt),ng=It=>{if(Kp!==qs.DOM&&e===document){if(s[It])return;s[It]=!0}let Lt=e.getElementById("mceDefaultStyles");if(!Lt){Lt=e.createElement("style"),Lt.id="mceDefaultStyles",Lt.type="text/css";const Jn=e.head;Jn.firstChild?Jn.insertBefore(Lt,Jn.firstChild):Jn.appendChild(Lt)}Lt.styleSheet?Lt.styleSheet.cssText+=It:Lt.appendChild(e.createTextNode(It))},Zp=It=>{It||(It=""),oe(It.split(","),Lt=>{l[Lt]=!0,O.load(Lt).catch(Kt)})},Gp=(It,Lt,Jn)=>{us(It,Wn=>{if(so(Wn)){const Ns=je.fromDom(Wn),ha=Lt.split(" ");oe(ha,gl=>{Qe(Jn)?(Jn?Pm:Wl)(Ns,gl):Jp(Ns,gl)})}})},nm=(It,Lt)=>{Gp(It,Lt,!0)},qp=(It,Lt)=>{Gp(It,Lt,!1)},is=(It,Lt)=>{const Jn=Me(It),Wn=Lt.split(" ");return Qe(Jn)&&rt(Wn,Ns=>Qp(Jn,Ns))},la=It=>{us(It,Lt=>gc(je.fromDom(Lt),"display"))},_l=It=>{us(It,Lt=>sm(je.fromDom(Lt),"display","none"))},Mu=It=>{const Lt=Me(It);return Qe(Lt)&&fl(il(Lt,"display"),"none")},fd=It=>(It||"mce_")+f++,Nu=It=>{const Lt=Me(It);return Qe(Lt)?so(Lt.dom)?Lt.dom.outerHTML:yd(Lt):""},tl=(It,Lt)=>{us(It,Jn=>{so(Jn)&&(Jn.outerHTML=Lt)})},nl=(It,Lt)=>{const Jn=be(Lt);return us(It,Wn=>{const Ns=Jn==null?void 0:Jn.parentNode,ha=Jn==null?void 0:Jn.nextSibling;return Ns&&(ha?Ns.insertBefore(Wn,ha):Ns.appendChild(Wn)),Wn})},wg=(It,Lt,Jn)=>us(Lt,Wn=>{var Ns;const ha=qt(Lt)?It.cloneNode(!0):It;return Jn&&Tu(Wm(Wn.childNodes),gl=>{ha.appendChild(gl)}),(Ns=Wn.parentNode)===null||Ns===void 0||Ns.replaceChild(ha,Wn),Wn}),Yb=(It,Lt)=>{if(It.nodeName!==Lt.toUpperCase()){const Jn=Ps(Lt);return Tu(gt(It),Wn=>{bt(Jn,Wn.nodeName,Xe(It,Wn.nodeName))}),wg(Jn,It,!0),Jn}else return It},P0=(It,Lt)=>{let Jn=It;for(;Jn;){let Wn=Lt;for(;Wn&&Jn!==Wn;)Wn=Wn.parentNode;if(Jn===Wn)break;Jn=Jn.parentNode}return!Jn&&It.ownerDocument?It.ownerDocument.documentElement:Jn},hv=(It,Lt,Jn)=>In(Lt)?Yc(Z,It,{...Jn,isContent:Ns=>{const ha=Ns.nodeName.toLowerCase();return!!Lt[ha]}}):Yc(Z,It,Jn),J_=()=>e.createRange(),Q_=(It,Lt,Jn)=>{let Wn=J_(),Ns,ha;if(It&&Lt&&It.parentNode&&Lt.parentNode){const gl=It.parentNode;return Wn.setStart(gl,Nv(It)),Wn.setEnd(Lt.parentNode,Nv(Lt)),Ns=Wn.extractContents(),Wn=J_(),Wn.setStart(Lt.parentNode,Nv(Lt)+1),Wn.setEnd(gl,Nv(It)+1),ha=Wn.extractContents(),gl.insertBefore(nd(Kp,Ns,Z),It),Jn?gl.insertBefore(Jn,It):gl.insertBefore(Lt,It),gl.insertBefore(nd(Kp,ha,Z),It),Za(It),Jn||Lt}else return},RC=(It,Lt,Jn,Wn)=>{if(qt(It)){let Ns=It.length;const ha=[];for(;Ns--;)ha[Ns]=RC(It[Ns],Lt,Jn,Wn);return ha}else return n.collect&&(It===e||It===a)&&F.push([It,Lt,Jn,Wn]),J.bind(It,Lt,Jn,Wn||Kp)},Xb=(It,Lt,Jn)=>{if(qt(It)){let Wn=It.length;const Ns=[];for(;Wn--;)Ns[Wn]=Xb(It[Wn],Lt,Jn);return Ns}else{if(F.length>0&&(It===e||It===a)){let Wn=F.length;for(;Wn--;){const[Ns,ha,gl]=F[Wn];It===Ns&&(!Lt||Lt===ha)&&(!Jn||Jn===gl)&&J.unbind(Ns,ha,gl)}}return J.unbind(It,Lt,Jn)}},MC=(It,Lt,Jn)=>J.dispatch(It,Lt,Jn),Q4=(It,Lt,Jn)=>J.dispatch(It,Lt,Jn),eD=It=>{if(It&&Qu(It)){const Lt=It.getAttribute("data-mce-contenteditable");return Lt&&Lt!=="inherit"?Lt:It.contentEditable!=="inherit"?It.contentEditable:null}else return null},Kp={doc:e,settings:n,win:a,files:l,stdMode:v,boxModel:k,styleSheetLoader:O,boundEvents:F,styles:K,schema:Z,events:J,isBlock:Te,root:null,clone:Ot,getRoot:yn,getViewPort:Un,getRect:gs,getSize:Io,getParent:za,getParents:Tr,get:be,getNext:El,getPrev:tm,select:to,is:Gs,add:Is,create:Ps,createHTML:Vr,createFragment:Ru,remove:Za,setStyle:sn,getStyle:En,setStyles:Ut,removeAllAttribs:_m,setAttrib:bt,setAttribs:pa,getAttrib:Xe,getPos:So,parseStyle:tp,serializeStyle:F0,addStyle:ng,loadCSS:Zp,addClass:nm,removeClass:qp,hasClass:is,toggleClass:Gp,show:la,hide:_l,isHidden:Mu,uniqueId:fd,setHTML:bo,getOuterHTML:Nu,setOuterHTML:tl,decode:po,encode:Or,insertAfter:nl,replace:wg,rename:Yb,findCommonAncestor:P0,run:us,getAttribs:gt,isEmpty:hv,createRng:J_,nodeIndex:Nv,split:Q_,bind:RC,unbind:Xb,fire:Q4,dispatch:MC,getContentEditable:eD,getContentEditableParent:It=>{const Lt=yn();let Jn=null;for(let Wn=It;Wn&&Wn!==Lt&&(Jn=eD(Wn),Jn===null);Wn=Wn.parentNode);return Jn},isEditable:It=>{if(Qe(It)){const Lt=so(It)?It:It.parentElement;return Qe(Lt)&&Qu(Lt)&&Gl(je.fromDom(Lt))}else return!1},destroy:()=>{if(F.length>0){let It=F.length;for(;It--;){const[Lt,Jn,Wn]=F[It];J.unbind(Lt,Jn,Wn)}}vn(l,(It,Lt)=>{O.unload(Lt),delete l[Lt]})},isChildOf:(It,Lt)=>It===Lt||Lt.contains(It),dumpRng:It=>"startContainer: "+It.startContainer.nodeName+", startOffset: "+It.startOffset+", endContainer: "+It.endContainer.nodeName+", endOffset: "+It.endOffset},tD=Lk(K,n,Le(Kp));return Kp};qs.DOM=qs(document),qs.nodeIndex=Nv;const gm=qs.DOM,g1=0,Bv=1,Sf=2,uu=3;class Sd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((s,a)=>{const l=gm;let f;const v=()=>{l.remove(F),f&&(f.onerror=f.onload=f=null)},k=()=>{v(),s()},O=()=>{v(),a("Failed to load script: "+n)},F=l.uniqueId();f=document.createElement("script"),f.id=F,f.type="text/javascript",f.src=bn._addCacheSuffix(n),this.settings.referrerPolicy&&l.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=k,f.onerror=O,(document.getElementsByTagName("head")[0]||document.body).appendChild(f)})}isDone(n){return this.states[n]===Sf}markDone(n){this.states[n]=Sf}add(n){const s=this;return s.queue.push(n),s.states[n]===void 0&&(s.states[n]=g1),new Promise((l,f)=>{s.scriptLoadedCallbacks[n]||(s.scriptLoadedCallbacks[n]=[]),s.scriptLoadedCallbacks[n].push({resolve:l,reject:f})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const s=this,a=(O,F)=>{kr(s.scriptLoadedCallbacks,F).each(Z=>{oe(Z,K=>K[O](F))}),delete s.scriptLoadedCallbacks[F]},l=O=>{const F=dt(O,Z=>Z.status==="rejected");return F.length>0?Promise.reject(ot(F,({reason:Z})=>qt(Z)?Z:[Z])):Promise.resolve()},f=O=>Promise.allSettled(Ne(O,F=>s.states[F]===Sf?(a("resolve",F),Promise.resolve()):s.states[F]===uu?(a("reject",F),Promise.reject(F)):(s.states[F]=Bv,s.loadScript(F).then(()=>{s.states[F]=Sf,a("resolve",F);const Z=s.queue;return Z.length>0?(s.queue=[],f(Z).then(l)):Promise.resolve()},()=>(s.states[F]=uu,a("reject",F),Promise.reject(F)))))),v=O=>(s.loading=!0,f(O).then(F=>{s.loading=!1;const Z=s.queueLoadedCallbacks.shift();return Y.from(Z).each(Bt),l(F)})),k=nu(n);return s.loading?new Promise((O,F)=>{s.queueLoadedCallbacks.push(()=>{v(k).then(O,F)})}):v(k)}}Sd.ScriptLoader=new Sd;const zC=(e,n)=>{const s=e.indexOf(n);return s!==-1&&e.indexOf(n,s+1)>s},Cc=e=>ve(e)&&Lo(e,"raw"),Bg=e=>qt(e)&&e.length>1,Hi={},VC=fa("en"),kd=()=>kr(Hi,VC.get()),Ig={getData:()=>Ls(Hi,e=>({...e})),setCode:e=>{e&&VC.set(e)},getCode:()=>VC.get(),add:(e,n)=>{let s=Hi[e];s||(Hi[e]=s={});const a=Ne(ns(n),l=>l.toLowerCase());vn(n,(l,f)=>{const v=f.toLowerCase();v!==f&&zC(a,v)?(Lo(n,v)||(s[v]=l),s[f]=l):s[v]=l})},translate:e=>{const n=kd().getOr({}),s=v=>Be(v)?Object.prototype.toString.call(v):a(v)?"":""+v,a=v=>v===""||v===null||v===void 0,l=v=>{const k=s(v);return Lo(n,k)?s(n[k]):kr(n,k.toLowerCase()).map(s).getOr(k)},f=v=>v.replace(/{context:\w+}$/,"");if(a(e))return"";if(Cc(e))return s(e.raw);if(Bg(e)){const v=e.slice(1),k=l(e[0]).replace(/\{([0-9]+)\}/g,(O,F)=>Lo(v,F)?s(v[F]):O);return f(k)}return f(l(e))},isRtl:()=>kd().bind(e=>kr(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Lo(Hi,e)},Lu=()=>{const e=[],n={},s={},a=[],l=(be,Me)=>{const Xe=dt(a,gt=>gt.name===be&&gt.state===Me);oe(Xe,gt=>gt.resolve())},f=be=>Lo(n,be),v=be=>Lo(s,be),k=be=>{if(s[be])return s[be].instance},O=(be,Me)=>{const Xe=Ig.getCode(),gt=","+(Me||"")+",";!Xe||Me&&gt.indexOf(","+Xe+",")===-1||Sd.ScriptLoader.add(n[be]+"/langs/"+Xe+".js")},F=(be,Me)=>{Lu.languageLoad!==!1&&(f(be)?O(be,Me):Te(be,"loaded").then(()=>O(be,Me)))},Z=(be,Me)=>(e.push(Me),s[be]={instance:Me},l(be,"added"),Me),K=be=>{delete n[be],delete s[be]},J=(be,Me)=>ue(Me)?ue(be)?{prefix:"",resource:Me,suffix:""}:{prefix:be.prefix,resource:Me,suffix:be.suffix}:Me,de=(be,Me)=>{if(n[be])return Promise.resolve();let Xe=ue(Me)?Me:Me.prefix+Me.resource+Me.suffix;Xe.indexOf("/")!==0&&Xe.indexOf("://")===-1&&(Xe=Lu.baseURL+"/"+Xe),n[be]=Xe.substring(0,Xe.lastIndexOf("/"));const gt=()=>(l(be,"loaded"),Promise.resolve());return s[be]?gt():Sd.ScriptLoader.add(Xe).then(gt)},Te=(be,Me="added")=>Me==="added"&&v(be)||Me==="loaded"&&f(be)?Promise.resolve():new Promise(Xe=>{a.push({name:be,state:Me,resolve:Xe})});return{items:e,urls:n,lookup:s,get:k,requireLangPack:F,add:Z,remove:K,createUrl:J,load:de,waitFor:Te}};Lu.languageLoad=!0,Lu.baseURL="",Lu.PluginManager=Lu(),Lu.ThemeManager=Lu(),Lu.ModelManager=Lu();const Fv=(e,n)=>{let s=null;return{cancel:()=>{re(s)||(clearTimeout(s),s=null)},throttle:(...f)=>{re(s)&&(s=setTimeout(()=>{s=null,e.apply(null,f)},n))}}},Sc=(e,n)=>{let s=null;const a=()=>{re(s)||(clearTimeout(s),s=null)};return{cancel:a,throttle:(...f)=>{a(),s=setTimeout(()=>{s=null,e.apply(null,f)},n)}}},wl=(e,n,s)=>hf(e,n,s).isSome(),Cl=Le("mce-annotation"),Ac=Le("data-mce-annotation"),Hc=Le("data-mce-annotation-uid"),kc=Le("data-mce-annotation-active"),fp=Le("data-mce-annotation-classes"),Ef=Le("data-mce-annotation-attrs"),p1=e=>n=>Lr(n,e),X0=(e,n)=>{const s=e.selection.getRng(),a=je.fromDom(s.startContainer),l=je.fromDom(e.getBody()),f=n.fold(()=>"."+Cl(),O=>`[${Ac()}="${O}"]`),v=om(a,s.startOffset).getOr(a);return wo(v,f,p1(l)).bind(O=>Yi(O,`${Hc()}`).bind(F=>Yi(O,`${Ac()}`).map(Z=>{const K=J0(e,F);return{uid:F,name:Z,elements:K}})))},aA=e=>nr(e)&&Qp(e,Cl()),UC=(e,n)=>Bc(e,"data-mce-bogus")||wl(e,'[data-mce-bogus="all"]',p1(n)),J0=(e,n)=>{const s=je.fromDom(e.getBody()),a=ll(s,`[${Hc()}="${n}"]`);return dt(a,l=>!UC(l,s))},Q0=(e,n)=>{const s=je.fromDom(e.getBody()),a=ll(s,`[${Ac()}="${n}"]`),l={};return oe(a,f=>{if(!UC(f,s)){const v=pl(f,Hc()),k=kr(l,v).getOr([]);l[v]=k.concat([f])}}),l},iA=(e,n)=>{const s=fa({}),a=()=>({listeners:[],previous:Kl()}),l=(K,J)=>{f(K,de=>(J(de),de))},f=(K,J)=>{const de=s.get(),Te=kr(de,K).getOrThunk(a),be=J(Te);de[K]=be,s.set(de)},v=(K,J,de)=>{l(K,Te=>{oe(Te.listeners,be=>be(!0,K,{uid:J,nodes:Ne(de,Me=>Me.dom)}))})},k=K=>{l(K,J=>{oe(J.listeners,de=>de(!1,K))})},O=(K,J)=>{oe(J0(e,K),de=>{J?Pi(de,kc(),"true"):tr(de,kc())})},F=Sc(()=>{const K=Mn(n.getNames());oe(K,J=>{f(J,de=>{const Te=de.previous.get();return X0(e,Y.some(J)).fold(()=>{Te.each(be=>{k(J),de.previous.clear(),O(be,!1)})},({uid:be,name:Me,elements:Xe})=>{fl(Te,be)||(Te.each(gt=>O(gt,!1)),v(Me,be,Xe),de.previous.set(be),O(be,!0))}),{previous:de.previous,listeners:de.listeners}})})},30);return e.on("remove",()=>{F.cancel()}),e.on("NodeChange",()=>{F.throttle()}),{addListener:(K,J)=>{f(K,de=>({previous:de.previous,listeners:de.listeners.concat([J])}))}}},Hk=(e,n)=>{const s=Ac(),a=f=>Y.from(f.attr(s)).bind(n.lookup),l=f=>{var v,k;f.attr(Hc(),null),f.attr(Ac(),null),f.attr(kc(),null);const O=Y.from(f.attr(Ef())).map(J=>J.split(",")).getOr([]),F=Y.from(f.attr(fp())).map(J=>J.split(",")).getOr([]);oe(O,J=>f.attr(J,null));const Z=(k=(v=f.attr("class"))===null||v===void 0?void 0:v.split(" "))!==null&&k!==void 0?k:[],K=Zo(Z,[Cl()].concat(F));f.attr("class",K.length>0?K.join(" "):null),f.attr(fp(),null),f.attr(Ef(),null)};e.serializer.addTempAttr(kc()),e.serializer.addAttributeFilter(s,f=>{for(const v of f)a(v).each(k=>{k.persistent===!1&&(v.name==="span"?v.unwrap():l(v))})})},Td=()=>{const e={};return{register:(l,f)=>{e[l]={name:l,settings:f}},lookup:l=>kr(e,l).map(f=>f.settings),getNames:()=>ns(e)}},cA=(e,n,s)=>Math.min(Math.max(e,n),s),sd=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ey=0;const ab=e=>{const s=new Date().getTime(),a=Math.floor(sd()*1e9);return ey++,e+"_"+a+ey+String(s)},h1=(e,n)=>{oe(n,s=>{Pm(e,s)})},du=(e,n)=>{oe(n,s=>{Wl(e,s)})},b1=(e,n)=>je.fromDom(e.dom.cloneNode(n)),pp=e=>b1(e,!1),Ix=e=>b1(e,!0),zk=(e,n)=>{const s=je.fromTag(n),a=Im(e);return dc(s,a),s},WC=(e,n)=>{const s=zk(e,n);Xu(e,s);const a=Rl(e);return vd(s,a),Zr(e),s},lA=(e,n,s=$e)=>{const a=new ru(e,n),l=f=>{let v;do v=a[f]();while(v&&!_n(v)&&!s(v));return Y.from(v).filter(_n)};return{current:()=>Y.from(a.current()).filter(_n),next:()=>l("next"),prev:()=>l("prev"),prev2:()=>l("prev2")}},v1=(e,n)=>{const s=n||(v=>e.isBlock(v)||aa(v)||ia(v)),a=(v,k,O,F)=>{if(_n(v)){const Z=F(v,k,v.data);if(Z!==-1)return Y.some({container:v,offset:Z})}return O().bind(Z=>a(Z.container,Z.offset,O,F))};return{backwards:(v,k,O,F)=>{const Z=lA(v,F??e.getRoot(),s);return a(v,k,()=>Z.prev().map(K=>({container:K,offset:K.length})),O).getOrNull()},forwards:(v,k,O,F)=>{const Z=lA(v,F??e.getRoot(),s);return a(v,k,()=>Z.next().map(K=>({container:K,offset:0})),O).getOrNull()}}},ty=((e,n)=>{const s=f=>{if(!e(f))throw new Error("Can only get "+n+" value of a "+n+" node");return a(f).getOr("")},a=f=>e(f)?Y.from(f.dom.nodeValue):Y.none();return{get:s,getOption:a,set:(f,v)=>{if(!e(f))throw new Error("Can only set raw "+n+" value of a "+n+" node");f.dom.nodeValue=v}}})(Da,"text"),y1=e=>ty.get(e),Pv=e=>ty.getOption(e),Fx=(e,n)=>ty.set(e,n),jC=["td","th"],Vk=["thead","tbody","tfoot"],Ed=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Eu=["li","dd","dt"],uA=["ul","ol","dl"],Uk=["pre","script","textarea","style"],ib=e=>{let n;return s=>(n=n||Co(e,pt),Lo(n,_e(s)))},iD=e=>_e(e)==="table",_u=e=>nr(e)&&_e(e)==="br",Fg=ib(Ed),x1=ib(uA),cb=ib(Eu),cD=ib(Vk),Px=ib(jC),jm=ib(Uk),_f=e=>{const n=[];let s=e.dom;for(;s;)n.push(je.fromDom(s)),s=s.lastChild;return n},Lx=e=>{const n=ll(e,"br"),s=dt(_f(e).slice(-1),_u);n.length===s.length&&oe(s,Zr)},Pg=()=>{const e=je.fromTag("br");return Pi(e,"data-mce-bogus","1"),e},ch=e=>{rm(e),va(e,Pg())},lh=(e,n)=>{bl(e).each(s=>{rl(s).each(a=>{n.isBlock(_e(e))&&_u(s)&&n.isBlock(_e(a))&&Zr(s)})})},Sl=Og,Wk=Cv,Nl=Pc,ZC=e=>e.insertContent(Sl,{preserve_zwsp:!0}),GC=so,Lv=_n,uh=e=>(Lv(e)&&(e=e.parentNode),GC(e)&&e.hasAttribute("data-mce-caret")),dh=e=>Lv(e)&&Wk(e.data),Lg=e=>uh(e)||dh(e),jk=e=>e.firstChild!==e.lastChild||!aa(e.firstChild),ny=(e,n)=>{var s;const l=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Sl),f=e.parentNode;if(n){const v=e.previousSibling;if(Lv(v)){if(Lg(v))return v;if(rd(v))return v.splitText(v.data.length-1)}f==null||f.insertBefore(l,e)}else{const v=e.nextSibling;if(Lv(v)){if(Lg(v))return v;if(Ar(v))return v.splitText(1),v}e.nextSibling?f==null||f.insertBefore(l,e.nextSibling):f==null||f.appendChild(l)}return l},oy=e=>{const n=e.container();return _n(n)?n.data.charAt(e.offset())===Sl||e.isAtStart()&&dh(n.previousSibling):!1},lb=e=>{const n=e.container();return _n(n)?n.data.charAt(e.offset()-1)===Sl||e.isAtEnd()&&dh(n.nextSibling):!1},$x=(e,n,s)=>{var a;const f=((a=n.ownerDocument)!==null&&a!==void 0?a:document).createElement(e);f.setAttribute("data-mce-caret",s?"before":"after"),f.setAttribute("data-mce-bogus","all"),f.appendChild(Pg().dom);const v=n.parentNode;return s?v==null||v.insertBefore(f,n):n.nextSibling?v==null||v.insertBefore(f,n.nextSibling):v==null||v.appendChild(f),f},Ar=e=>Lv(e)&&e.data[0]===Sl,rd=e=>Lv(e)&&e.data[e.data.length-1]===Sl,w1=e=>{var n;const s=e.getElementsByTagName("br"),a=s[s.length-1];ap(a)&&((n=a.parentNode)===null||n===void 0||n.removeChild(a))},ub=e=>e&&e.hasAttribute("data-mce-caret")?(w1(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,xi=e=>uh(e.startContainer),C1=Math.round,hp=e=>e?{left:C1(e.left),top:C1(e.top),bottom:C1(e.bottom),right:C1(e.right),width:C1(e.width),height:C1(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},$v=(e,n)=>(e=hp(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),lD=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Zk=(e,n,s)=>e>=0&&e<=Math.min(n.height,s.height)/2,wi=(e,n)=>{const s=Math.min(n.height/2,e.height/2);return e.bottom-s<n.top?!0:e.top>n.bottom?!1:Zk(n.top-e.bottom,e,n)},db=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Zk(n.bottom-e.top,e,n),Gk=(e,n,s)=>n>=e.left&&n<=e.right&&s>=e.top&&s<=e.bottom,dA=e=>it(e,(n,s)=>n.fold(()=>Y.some(s),a=>{const l=Math.min(s.left,a.left),f=Math.min(s.top,a.top),v=Math.max(s.right,a.right),k=Math.max(s.bottom,a.bottom);return Y.some({top:f,right:v,bottom:k,left:l,width:v-l,height:k-f})}),Y.none()),S1=(e,n,s)=>{const a=Math.max(Math.min(n,e.left+e.width),e.left),l=Math.max(Math.min(s,e.top+e.height),e.top);return Math.sqrt((n-a)*(n-a)+(s-l)*(s-l))},Oc=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Hx=e=>{const n=e.startContainer,s=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===s+1?n.childNodes[s]:null},mb=(e,n)=>{if(so(e)&&e.hasChildNodes()){const s=e.childNodes,a=cA(n,0,s.length-1);return s[a]}else return e},Ao=(e,n)=>{if(!(n<0&&so(e)&&e.hasChildNodes()))return mb(e,n)},qk=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),sy=e=>ue(e)&&e.charCodeAt(0)>=768&&qk.test(e),mA=(...e)=>n=>{for(let s=0;s<e.length;s++)if(e[s](n))return!0;return!1},zx=(...e)=>n=>{for(let s=0;s<e.length;s++)if(!e[s](n))return!1;return!0},Kk=dn,qC=ia,Hv=aa,$g=_n,uD=Fu(["script","style","textarea"]),bp=Fu(["img","input","textarea","hr","iframe","video","audio","object","embed"]),gA=Fu(["table"]),Vx=Lg,Hg=e=>Vx(e)?!1:$g(e)?!uD(e.parentNode):bp(e)||Hv(e)||gA(e)||Ux(e),fA=e=>so(e)&&e.getAttribute("unselectable")==="true",Ux=e=>!fA(e)&&qC(e),Wx=(e,n)=>{for(let s=e.parentNode;s&&s!==n;s=s.parentNode){if(Ux(s))return!1;if(Kk(s))return!0}return!0},pA=e=>Ux(e)?!it(gr(e.getElementsByTagName("*")),(n,s)=>n||Kk(s),!1):!1,dD=e=>bp(e)||pA(e),KC=(e,n)=>Hg(e)&&Wx(e,n),YC=so,hA=Hg,bA=n1("display","block table"),vA=n1("float","left right"),mh=zx(YC,hA,Oe(vA)),$u=Oe(n1("white-space","pre pre-line pre-wrap")),gh=_n,k1=aa,ry=qs.nodeIndex,jx=Ao,Zx=e=>e?e.createRange():qs.DOM.createRng(),Gx=e=>ue(e)&&/[\r\n\t ]/.test(e),zv=e=>!!e.setStart&&!!e.setEnd,_d=e=>{const n=e.startContainer,s=e.startOffset;if(Gx(e.toString())&&$u(n.parentNode)&&_n(n)){const a=n.data;if(Gx(a[s-1])||Gx(a[s+1]))return!0}return!1},yA=e=>{const n=e.ownerDocument,s=Zx(n),a=n.createTextNode(wc),l=e.parentNode;l.insertBefore(a,e),s.setStart(a,0),s.setEnd(a,1);const f=hp(s.getBoundingClientRect());return l.removeChild(a),f},Zm=e=>{const n=e.startContainer,s=e.endContainer,a=e.startOffset,l=e.endOffset;if(n===s&&_n(s)&&a===0&&l===1){const f=e.cloneRange();return f.setEndAfter(s),fh(f)}else return null},Yk=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,fh=e=>{var n;let s;const a=e.getClientRects();return a.length>0?s=hp(a[0]):s=hp(e.getBoundingClientRect()),!zv(e)&&k1(e)&&Yk(s)?yA(e):Yk(s)&&zv(e)&&(n=Zm(e))!==null&&n!==void 0?n:s},Af=(e,n)=>{const s=$v(e,n);return s.width=1,s.right=s.left+1,s},XC=e=>{const n=[],s=v=>{v.height!==0&&(n.length>0&&lD(v,n[n.length-1])||n.push(v))},a=(v,k)=>{const O=Zx(v.ownerDocument);if(k<v.data.length){if(sy(v.data[k]))return;if(sy(v.data[k-1])&&(O.setStart(v,k),O.setEnd(v,k+1),!_d(O))){s(Af(fh(O),!1));return}}k>0&&(O.setStart(v,k-1),O.setEnd(v,k),_d(O)||s(Af(fh(O),!1))),k<v.data.length&&(O.setStart(v,k),O.setEnd(v,k+1),_d(O)||s(Af(fh(O),!0)))},l=e.container(),f=e.offset();if(gh(l))return a(l,f),n;if(YC(l))if(e.isAtEnd()){const v=jx(l,f);gh(v)&&a(v,v.data.length),mh(v)&&!k1(v)&&s(Af(fh(v),!1))}else{const v=jx(l,f);if(gh(v)&&a(v,0),mh(v)&&e.isAtEnd())return s(Af(fh(v),!1)),n;const k=jx(e.container(),e.offset()-1);mh(k)&&!k1(k)&&(bA(k)||bA(v)||!mh(v))&&s(Af(fh(k),!1)),mh(v)&&s(Af(fh(v),!0))}return n},Xt=(e,n,s)=>{const a=()=>(gh(e),n===0),l=()=>gh(e)?n>=e.data.length:n>=e.childNodes.length,f=()=>{const Z=Zx(e.ownerDocument);return Z.setStart(e,n),Z.setEnd(e,n),Z},v=()=>(s||(s=XC(Xt(e,n))),s),k=()=>v().length>0,O=Z=>Z&&e===Z.container()&&n===Z.offset(),F=Z=>jx(e,Z?n-1:n);return{container:Le(e),offset:Le(n),toRange:f,getClientRects:v,isVisible:k,isAtStart:a,isAtEnd:l,isEqual:O,getNode:F}};Xt.fromRangeStart=e=>Xt(e.startContainer,e.startOffset),Xt.fromRangeEnd=e=>Xt(e.endContainer,e.endOffset),Xt.after=e=>Xt(e.parentNode,ry(e)+1),Xt.before=e=>Xt(e.parentNode,ry(e)),Xt.isAbove=(e,n)=>Ii(Gt(n.getClientRects()),yo(e.getClientRects()),wi).getOr(!1),Xt.isBelow=(e,n)=>Ii(yo(n.getClientRects()),Gt(e.getClientRects()),db).getOr(!1),Xt.isAtStart=e=>e?e.isAtStart():!1,Xt.isAtEnd=e=>e?e.isAtEnd():!1,Xt.isTextPosition=e=>e?_n(e.container()):!1,Xt.isElementPosition=e=>!Xt.isTextPosition(e);const zg=(e,n)=>{_n(n)&&n.data.length===0&&e.remove(n)},T1=(e,n,s)=>{n.insertNode(s),zg(e,s.previousSibling),zg(e,s.nextSibling)},Xk=(e,n,s)=>{const a=Y.from(s.firstChild),l=Y.from(s.lastChild);n.insertNode(s),a.each(f=>zg(e,f.previousSibling)),l.each(f=>zg(e,f.nextSibling))},ay=(e,n,s)=>{Gc(s)?Xk(e,n,s):T1(e,n,s)},fm=_n,JC=ap,xA=qs.nodeIndex,jd=e=>{const n=e.parentNode;return JC(n)?jd(n):n},Vv=e=>e?Ve(e.childNodes,(n,s)=>(JC(s)&&s.nodeName!=="BR"?n=n.concat(Vv(s)):n.push(s),n),[]):[],mD=(e,n)=>{let s=e;for(;(s=s.previousSibling)&&fm(s);)n+=s.data.length;return n},Jr=e=>n=>e===n,E1=e=>{let n,s;n=Vv(jd(e)),s=Pe(n,Jr(e),e),n=n.slice(0,s+1);const a=Ve(n,(l,f,v)=>(fm(f)&&fm(n[v-1])&&l++,l),0);return n=ac(n,Fu([e.nodeName])),s=Pe(n,Jr(e),e),s-a},Uv=e=>(fm(e)?"text()":e.nodeName.toLowerCase())+"["+E1(e)+"]",Jk=(e,n,s)=>{const a=[];for(let l=n.parentNode;l&&l!==e;l=l.parentNode)a.push(l);return a},wA=(e,n)=>{let s=[],a=n.container(),l=n.offset(),f;if(fm(a))f=mD(a,l);else{const k=a.childNodes;l>=k.length?(f="after",l=k.length-1):f="before",a=k[l]}s.push(Uv(a));let v=Jk(e,a);return v=ac(v,Oe(ap)),s=s.concat(Mc(v,k=>Uv(k))),s.reverse().join("/")+","+f},Qk=(e,n,s)=>{let a=Vv(e);return a=ac(a,(l,f)=>!fm(l)||!fm(a[f-1])),a=ac(a,Fu([n])),a[s]},gD=(e,n)=>{let s=e,a=0;for(;fm(s);){const l=s.data.length;if(n>=a&&n<=a+l){e=s,n=n-a;break}if(!fm(s.nextSibling)){e=s,n=l;break}a+=l,s=s.nextSibling}return fm(e)&&n>e.data.length&&(n=e.data.length),Xt(e,n)},iy=(e,n)=>{if(!n)return null;const s=n.split(","),a=s[0].split("/"),l=s.length>1?s[1]:"before",f=Ve(a,(v,k)=>{const O=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(k);return O?(O[1]==="text()"&&(O[1]="#text"),Qk(v,O[1],parseInt(O[2],10))):null},e);if(!f)return null;if(!fm(f)&&f.parentNode){let v;return l==="after"?v=xA(f)+1:v=xA(f),Xt(f.parentNode,v)}return gD(f,parseInt(l,10))},cy=ia,CA=(e,n,s)=>{let a=e(n.data.slice(0,s)).length;for(let l=n.previousSibling;l&&_n(l);l=l.previousSibling)a+=e(l.data).length;return a},SA=(e,n,s,a,l)=>{const f=l?a.startContainer:a.endContainer;let v=l?a.startOffset:a.endOffset;const k=[],O=e.getRoot();if(_n(f))k.push(s?CA(n,f,v):v);else{let F=0;const Z=f.childNodes;v>=Z.length&&Z.length&&(F=1,v=Math.max(0,Z.length-1)),k.push(e.nodeIndex(Z[v],s)+F)}for(let F=f;F&&F!==O;F=F.parentNode)k.push(e.nodeIndex(F,s));return k},fD=(e,n,s,a)=>{const l=n.dom,f=SA(l,e,s,a,!0),v=n.isForward(),k=xi(a)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:f,forward:v,...k};{const O=SA(l,e,s,a,!1);return{start:f,end:O,forward:v,...k}}},Di=(e,n,s)=>{let a=0;return bn.each(e.select(n),l=>{if(l.getAttribute("data-mce-bogus")!=="all"){if(l===s)return!1;a++;return}}),a},QC=(e,n)=>{let s=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;if(so(s)&&s.nodeName==="TR"){const l=s.childNodes;s=l[Math.min(n?a:a-1,l.length-1)],s&&(a=n?0:s.childNodes.length,n?e.setStart(s,a):e.setEnd(s,a))}},kA=e=>(QC(e,!0),QC(e,!1),e),eT=(e,n)=>{if(so(e)&&(e=mb(e,n),cy(e)))return e;if(Lg(e)){_n(e)&&uh(e)&&(e=e.parentNode);let s=e.previousSibling;if(cy(s)||(s=e.nextSibling,cy(s)))return s}},ly=e=>eT(e.startContainer,e.startOffset)||eT(e.endContainer,e.endOffset),Hu=(e,n,s)=>{const a=s.getNode(),l=s.getRng();if(a.nodeName==="IMG"||cy(a)){const v=a.nodeName;return{name:v,index:Di(s.dom,v,a)}}const f=ly(l);if(f){const v=f.tagName;return{name:v,index:Di(s.dom,v,f)}}return fD(e,s,n,l)},dg=e=>{const n=e.getRng();return{start:wA(e.dom.getRoot(),Xt.fromRangeStart(n)),end:wA(e.dom.getRoot(),Xt.fromRangeEnd(n)),forward:e.isForward()}},TA=e=>({rng:e.getRng(),forward:e.isForward()}),go=(e,n,s)=>{const a={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return s?e.create("span",a,"&#xFEFF;"):e.create("span",a)},Bl=(e,n)=>{const s=e.dom;let a=e.getRng();const l=s.uniqueId(),f=e.isCollapsed(),v=e.getNode(),k=v.nodeName,O=e.isForward();if(k==="IMG")return{name:k,index:Di(s,k,v)};const F=kA(a.cloneRange());if(!f){F.collapse(!1);const K=go(s,l+"_end",n);ay(s,F,K)}a=kA(a),a.collapse(!0);const Z=go(s,l+"_start",n);return ay(s,a,Z),e.moveToBookmark({id:l,keep:!0,forward:O}),{id:l,forward:O}},tT=(e,n,s=!1)=>n===2?Hu(Nl,s,e):n===3?dg(e):n?TA(e):Bl(e,!1),Il=Se(Hu,Qt,!0),gb=e=>{const n=f=>f(e),s=Le(e),a=()=>l,l={tag:!0,inner:e,fold:(f,v)=>v(e),isValue:pt,isError:$e,map:f=>zc.value(f(e)),mapError:a,bind:n,exists:n,forall:n,getOr:s,or:a,getOrThunk:s,orThunk:a,getOrDie:s,each:f=>{f(e)},toOptional:()=>Y.some(e)};return l},ph=e=>{const n=()=>s,s={tag:!1,inner:e,fold:(a,l)=>a(e),isValue:$e,isError:pt,map:n,mapError:a=>zc.error(a(e)),bind:n,exists:$e,forall:pt,getOr:Qt,or:Qt,getOrThunk:tt,orThunk:tt,getOrDie:ft(String(e)),each:Kt,toOptional:Y.none};return s},zc={value:gb,error:ph,fromOption:(e,n)=>e.fold(()=>ph(n),gb)},mg={generate:e=>{if(!qt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],s={};return oe(e,(a,l)=>{const f=ns(a);if(f.length!==1)throw new Error("one and only one name per case");const v=f[0],k=a[v];if(s[v]!==void 0)throw new Error("duplicate key detected:"+v);if(v==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qt(k))throw new Error("case arguments must be an array");n.push(v),s[v]=(...O)=>{const F=O.length;if(F!==k.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+k.length+" ("+k+"), got "+F);return{fold:(...K)=>{if(K.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+K.length);return K[l].apply(null,O)},match:K=>{const J=ns(K);if(n.length!==J.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+J.join(","));if(!rt(n,Te=>ce(J,Te)))throw new Error("Not all branches were specified when using match. Specified: "+J.join(", ")+`
Required: `+n.join(", "));return K[v].apply(null,O)},log:K=>{console.log(K,{constructors:n,constructor:v,params:O})}}}}),s}};mg.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const zi=e=>{const n=[],s=[];return oe(e,a=>{a.fold(l=>{n.push(l)},l=>{s.push(l)})}),{errors:n,values:s}},vp=e=>e.type==="inline-command"||e.type==="inline-format",_1=e=>e.type==="block-command"||e.type==="block-format",Wv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,qx=e=>{var n;const s=l=>zc.error({message:l,pattern:e}),a=(l,f,v)=>{if(e.format!==void 0){let k;if(qt(e.format)){if(!rt(e.format,ue))return s(l+" pattern has non-string items in the `format` array");k=e.format}else if(ue(e.format))k=[e.format];else return s(l+" pattern has non-string `format` parameter");return zc.value(f(k))}else return e.cmd!==void 0?ue(e.cmd)?zc.value(v(e.cmd,e.value)):s(l+" pattern has non-string `cmd` parameter"):s(l+" pattern is missing both `format` and `cmd` parameters")};if(!ve(e))return s("Raw pattern is not an object");if(!ue(e.start))return s("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ue(e.end))return s("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return s("Inline pattern has empty `start` and `end` parameters");let l=e.start,f=e.end;return f.length===0&&(f=l,l=""),a("Inline",v=>({type:"inline-format",start:l,end:f,format:v}),(v,k)=>({type:"inline-command",start:l,end:f,cmd:v,value:k}))}else{if(e.replacement!==void 0)return ue(e.replacement)?e.start.length===0?s("Replacement pattern has empty `start` parameter"):zc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):s("Replacement pattern has non-string `replacement` parameter");{const l=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?s("Block pattern has empty `start` parameter"):a("Block",f=>({type:"block-format",start:e.start,format:f[0],trigger:l}),(f,v)=>({type:"block-command",start:e.start,cmd:f,value:v,trigger:l}))}}},e2=e=>dt(e,_1),yp=e=>dt(e,vp),mu=(e,n)=>({inlinePatterns:yp(e),blockPatterns:e2(e),dynamicPatternsLookup:n}),hh=(e,n)=>({...e,blockPatterns:dt(e.blockPatterns,s=>Wv(s,n))}),Kx=e=>{const n=zi(Ne(e,qx));return oe(n.errors,s=>console.error(s.message,s.pattern)),n.values},t2=e=>n=>{const s=e(n);return Kx(s)},pD=(e,n)=>e.dispatch("PreProcess",n),n2=(e,n)=>e.dispatch("PostProcess",n),oT=e=>{e.dispatch("remove")},sT=e=>{e.dispatch("detach")},o2=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},rT=(e,n,s,a,l)=>{e.dispatch("ObjectResizeStart",{target:n,width:s,height:a,origin:l})},Yx=(e,n,s,a,l)=>{e.dispatch("ObjectResized",{target:n,width:s,height:a,origin:l})},zu=e=>{e.dispatch("PreInit")},Vg=e=>{e.dispatch("PostRender")},Ug=e=>{e.dispatch("Init")},Xl=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},s2=(e,n,s)=>{e.dispatch(n,s)},fb=(e,n,s,a)=>{e.dispatch("FormatApply",{format:n,node:s,vars:a})},Xx=(e,n,s,a)=>{e.dispatch("FormatRemove",{format:n,node:s,vars:a})},r2=(e,n)=>e.dispatch("BeforeSetContent",n),aT=(e,n)=>e.dispatch("SetContent",n),uy=(e,n)=>e.dispatch("BeforeGetContent",n),dy=(e,n)=>e.dispatch("GetContent",n),pb=(e,n)=>{e.dispatch("AutocompleterStart",n)},iT=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Jx=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},lr=e=>{e.dispatch("AutocompleterEnd")},pc=(e,n,s)=>e.dispatch("PastePreProcess",{content:n,internal:s}),Fl=(e,n,s)=>e.dispatch("PastePostProcess",{node:n,internal:s}),Fa=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Jl=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Jc=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),my=le().deviceType,gy=my.isTouch(),cT=qs.DOM,lT=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return it(n,(s,a)=>{const l=a.split("="),f=l[0],v=l.length>1?l[1]:f;return s[Ur(f)]=Ur(v),s},{})},Qx=e=>at(e,RegExp),Ro=e=>n=>n.options.get(e),fy=e=>ue(e)||ve(e),A1=(e,n="")=>s=>{const a=ue(s);if(a)if(s.indexOf("=")!==-1){const l=lT(s);return{value:kr(l,e.id).getOr(n),valid:a}}else return{value:s,valid:a};else return{valid:!1,message:"Must be a string."}},Gm=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:A1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:A1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:s=>{const a=ue(s)&&Bs(s);return a?{value:s,valid:a}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:s=>{const a=ce(["block","linebreak","invert","default"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:s=>rn(s)?{valid:!0,value:s}:ue(s)?{valid:!0,value:s}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:s=>{const a=s===!1||ue(s)||$t(s,ue);return a?ue(s)?{value:Ne(s.split(","),Ur),valid:a}:qt(s)?{value:s,valid:a}:s===!1?{value:[],valid:a}:{value:s,valid:a}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:by(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:s=>{const a=ue(s)||$t(s,ue);return a?{value:qt(s)?s:Ne(s.split(","),Ur),valid:a}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:s=>{const a=rn(s)||ue(s);return a?s===!1||my.isiPhone()||my.isiPad()?{value:"",valid:a}:{value:s===!0?"table,img,figure.image,div,video,iframe":s,valid:a}:{valid:!1,message:"Must be boolean or a string"}},default:!gy}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:s=>s===!1||ue(s)||Be(s),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:s=>{const a=s===!1||ue(s);return a?{value:s===!1?"":s,valid:a}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:s=>rn(s)?(e.initialized&&N1(e)!==s&&Promise.resolve().then(()=>{Jc(e,s)}),{valid:!0,value:s}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:s=>{const a=$t(s,ue);return a?{value:s,valid:a}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:fy}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:fy}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:fy}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:fy}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:s=>ue(s)||s===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:s=>$t(s,ve)||s===!1?{value:Kx(s===!1?[]:s),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:s=>Be(s)?{value:t2(s),valid:!0}:{valid:!1,message:"Must be a single function"},default:s=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:s=>$t(s,Qx)?{value:s,valid:!0}:Qx(s)?{value:[s],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:s=>{const a=ce(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:s=>{const a=ce(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ig.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:cT.getAttrib(e.getElement(),"placeholder")})})},pm=Ro("iframe_attrs"),Of=Ro("doctype"),_A=Ro("document_base_url"),qm=Ro("body_id"),Qr=Ro("body_class"),AA=Ro("content_security_policy"),Zd=Ro("br_in_pre"),Pl=Ro("forced_root_block"),bh=Ro("forced_root_block_attrs"),hb=Ro("newline_behavior"),Ad=Ro("br_newline_selector"),uT=Ro("no_newline_selector"),ew=Ro("keep_styles"),a2=Ro("end_container_on_empty_block"),i2=Ro("automatic_uploads"),c2=Ro("images_reuse_filename"),dT=Ro("images_replace_blob_uris"),l2=Ro("icons"),hs=Ro("icons_url"),mT=Ro("images_upload_url"),bb=Ro("images_upload_base_path"),jv=Ro("images_upload_credentials"),u2=Ro("images_upload_handler"),d2=Ro("content_css_cors"),tw=Ro("referrer_policy"),m2=Ro("language"),hD=Ro("language_url"),nw=Ro("indent_use_margin"),xa=Ro("indentation"),bD=Ro("content_css"),vb=Ro("content_style"),Df=Ro("font_css"),g2=Ro("directionality"),hm=Ro("inline_boundaries_selector"),Au=Ro("object_resizing"),Zv=Ro("resize_img_proportional"),ow=Ro("placeholder"),O1=Ro("event_root"),f2=Ro("service_message"),py=Ro("theme"),vD=Ro("theme_url"),hy=Ro("model"),Gr=Ro("model_url"),Gd=Ro("inline_boundaries"),yb=Ro("formats"),OA=Ro("preview_styles"),Gv=Ro("format_empty_lines"),sa=Ro("format_noneditable_selector"),gT=Ro("custom_ui_selector"),by=Ro("inline"),yD=Ro("hidden_input"),D1=Ro("submit_patch"),R1=Ro("add_form_submit_trigger"),fT=Ro("add_unload_trigger"),p2=Ro("custom_undo_redo_levels"),vy=Ro("disable_nodechange"),qv=Ro("readonly"),yy=Ro("editable_root"),h2=Ro("content_css_cors"),sw=Ro("plugins"),Rf=Ro("external_plugins"),rw=Ro("block_unsupported_drop"),b2=Ro("visual"),v2=Ro("visual_table_class"),Vu=Ro("visual_anchor_class"),xp=Ro("iframe_aria_text"),vh=Ro("setup"),DA=Ro("init_instance_callback"),xb=Ro("urlconverter_callback"),aw=Ro("auto_focus"),y2=Ro("browser_spellcheck"),RA=Ro("protect"),pT=Ro("paste_block_drop"),Kv=Ro("paste_data_images"),hT=Ro("paste_preprocess"),MA=Ro("paste_postprocess"),xy=Ro("newdocument_content"),bT=Ro("paste_webkit_styles"),xD=Ro("paste_remove_styles_if_webkit"),iw=Ro("paste_merge_formats"),vT=Ro("smart_paste"),x2=Ro("paste_as_text"),wD=Ro("paste_tab_spaces"),wy=Ro("allow_html_data_urls"),NA=Ro("text_patterns"),yT=Ro("text_patterns_lookup"),xT=Ro("noneditable_class"),w2=Ro("editable_class"),BA=Ro("noneditable_regexp"),wT=Ro("preserve_cdata"),CT=Ro("highlight_on_focus"),Yv=Ro("xss_sanitization"),Cy=Ro("init_content_sync"),Sy=e=>e.options.isSet("text_patterns_lookup"),ky=e=>bn.explode(e.options.get("font_size_style_values")),IA=e=>bn.explode(e.options.get("font_size_classes")),ST=e=>e.options.get("encoding")==="xml",CD=e=>bn.explode(e.options.get("images_file_types")),kB=Ro("table_tab_navigation"),M1=Ro("details_initial_state"),C2=Ro("details_serialized_state"),kT=Ro("sandbox_iframes"),S2=e=>e.options.get("sandbox_iframes_exclusions"),TT=Ro("convert_unsafe_embeds"),SD=Ro("license_key"),kD=Ro("api_key"),N1=Ro("disabled"),Xv=so,Ty=_n,ET=e=>{const n=e.parentNode;n&&n.removeChild(e)},k2=e=>{const n=Nl(e);return{count:e.length-n.length,text:n}},_T=e=>{let n;for(;(n=e.data.lastIndexOf(Sl))!==-1;)e.deleteData(n,1)},AT=(e,n)=>(Jv(e),n),TD=(e,n)=>{const s=k2(e.data.substr(0,n.offset())),a=k2(e.data.substr(n.offset()));return(s.text+a.text).length>0?(_T(e),Xt(e,n.offset()-s.count)):n},T2=(e,n)=>{const s=n.container(),a=Nt(gr(s.childNodes),e).map(l=>l<n.offset()?Xt(s,n.offset()-1):n).getOr(n);return Jv(e),a},Ey=(e,n)=>Ty(e)&&n.container()===e?TD(e,n):AT(e,n),FA=(e,n)=>n.container()===e.parentNode?T2(e,n):AT(e,n),ED=(e,n)=>Xt.isTextPosition(n)?Ey(e,n):FA(e,n),Jv=e=>{Xv(e)&&Lg(e)&&(jk(e)?e.removeAttribute("data-mce-caret"):ET(e)),Ty(e)&&(_T(e),e.data.length===0&&ET(e))},_y=ia,PA=Kc,LA=tn,qd="*[contentEditable=false],video,audio,embed,object",E2=(e,n,s)=>{const a=$v(n.getBoundingClientRect(),s);let l,f;if(e.tagName==="BODY"){const k=e.ownerDocument.documentElement;l=e.scrollLeft||k.scrollLeft,f=e.scrollTop||k.scrollTop}else{const k=e.getBoundingClientRect();l=e.scrollLeft-k.left,f=e.scrollTop-k.top}a.left+=l,a.right+=l,a.top+=f,a.bottom+=f,a.width=1;let v=n.offsetWidth-n.clientWidth;return v>0&&(s&&(v*=-1),a.left+=v,a.right+=v),a},OT=e=>{var n,s;const a=ll(je.fromDom(e),qd);for(let l=0;l<a.length;l++){const f=a[l].dom;let v=f.previousSibling;if(rd(v)){const k=v.data;k.length===1?(n=v.parentNode)===null||n===void 0||n.removeChild(v):v.deleteData(k.length-1,1)}v=f.nextSibling,Ar(v)&&(v.data.length===1?(s=v.parentNode)===null||s===void 0||s.removeChild(v):v.deleteData(0,1))}},_D=(e,n,s,a)=>{const l=Kl();let f,v;const k=Pl(e),O=e.dom,F=(be,Me)=>{let Xe;if(Z(),LA(Me))return null;if(s(Me)){const gt=$x(k,Me,be),bt=E2(n,Me,be);O.setStyle(gt,"top",bt.top),O.setStyle(gt,"caret-color","transparent"),v=gt;const Ot=O.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});O.setStyles(Ot,{...bt}),O.add(n,Ot),l.set({caret:Ot,element:Me,before:be}),be&&O.addClass(Ot,"mce-visual-caret-before"),K(),Xe=Me.ownerDocument.createRange(),Xe.setStart(gt,0),Xe.setEnd(gt,0)}else return v=ny(Me,be),Xe=Me.ownerDocument.createRange(),cw(v.nextSibling)?(Xe.setStart(v,0),Xe.setEnd(v,0)):(Xe.setStart(v,1),Xe.setEnd(v,1)),Xe;return Xe},Z=()=>{OT(n),v&&(Jv(v),v=null),l.on(be=>{O.remove(be.caret),l.clear()}),f&&(clearInterval(f),f=void 0)},K=()=>{f=setInterval(()=>{l.on(be=>{a()?O.toggleClass(be.caret,"mce-visual-caret-hidden"):O.addClass(be.caret,"mce-visual-caret-hidden")})},500)};return{show:F,hide:Z,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{l.on(be=>{const Me=E2(n,be.element,be.before);O.setStyles(be.caret,{...Me})})},destroy:()=>clearInterval(f)}},DT=()=>ms.browser.isFirefox(),cw=e=>_y(e)||PA(e),lw=e=>(cw(e)||rg(e)&&DT())&&Xh(je.fromDom(e)).exists(Gl),$A=dn,Ay=ia,RT=Kc,ts=n1("display","block table table-cell table-row table-caption list-item"),MT=Lg,Oy=uh,AD=so,Qv=_n,_2=Hg,wp=e=>e>0,wb=e=>e<0,yh=(e,n)=>{let s;for(;s=e(n);)if(!Oy(s))return s;return null},_s=(e,n,s,a,l)=>{const f=new ru(e,a),v=Ay(e)||Oy(e);let k;if(wb(n)){if(v&&(k=yh(f.prev.bind(f),!0),s(k)))return k;for(;k=yh(f.prev.bind(f),l);)if(s(k))return k}if(wp(n)){if(v&&(k=yh(f.next.bind(f),!0),s(k)))return k;for(;k=yh(f.next.bind(f),l);)if(s(k))return k}return null},Ts=(e,n)=>{const s=l=>$A(l.dom),a=l=>l.dom===n;return Yu(je.fromDom(e),s,a).map(l=>l.dom).getOr(n)},xh=(e,n)=>{for(;e&&e!==n;){if(ts(e))return e;e=e.parentNode}return null},Mf=(e,n,s)=>xh(e.container(),s)===xh(n.container(),s),A2=(e,n)=>{if(!n)return Y.none();const s=n.container(),a=n.offset();return AD(s)?Y.from(s.childNodes[a+e]):Y.none()},HA=(e,n)=>{var s;const l=((s=n.ownerDocument)!==null&&s!==void 0?s:document).createRange();return e?(l.setStartBefore(n),l.setEndBefore(n)):(l.setStartAfter(n),l.setEndAfter(n)),l},Rs=(e,n,s)=>xh(n,e)===xh(s,e),e0=(e,n,s)=>{const a=e?"previousSibling":"nextSibling";let l=s;for(;l&&l!==n;){let f=l[a];if(f&&MT(f)&&(f=f[a]),Ay(f)||RT(f)){if(Rs(n,f,l))return f;break}if(_2(f))break;l=l.parentNode}return null},t0=Se(HA,!0),n0=Se(HA,!1),Dy=(e,n,s)=>{let a;const l=Se(e0,!0,n),f=Se(e0,!1,n),v=s.startContainer,k=s.startOffset;if(uh(v)){const O=Qv(v)?v.parentNode:v,F=O.getAttribute("data-mce-caret");if(F==="before"&&(a=O.nextSibling,lw(a)))return t0(a);if(F==="after"&&(a=O.previousSibling,lw(a)))return n0(a)}if(!s.collapsed)return s;if(_n(v)){if(MT(v)){if(e===1){if(a=f(v),a)return t0(a);if(a=l(v),a)return n0(a)}if(e===-1){if(a=l(v),a)return n0(a);if(a=f(v),a)return t0(a)}return s}if(rd(v)&&k>=v.data.length-1)return e===1&&(a=f(v),a)?t0(a):s;if(Ar(v)&&k<=1)return e===-1&&(a=l(v),a)?n0(a):s;if(k===v.data.length)return a=f(v),a?t0(a):s;if(k===0)return a=l(v),a?n0(a):s}return s},zA=(e,n)=>A2(e?0:-1,n).filter(Ay),o0=(e,n,s)=>{const a=Dy(e,n,s);return e===-1?Xt.fromRangeStart(a):Xt.fromRangeEnd(a)},Ry=e=>Y.from(e.getNode()).map(je.fromDom),ur=e=>Y.from(e.getNode(!0)).map(je.fromDom),O2=(e,n)=>{let s=n;for(;s=e(s);)if(s.isVisible())return s;return s},Cb=(e,n)=>{const s=Mf(e,n);return!s&&aa(e.getNode())?!0:s};var Ql;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ql||(Ql={}));const NT=ia,Cp=_n,BT=so,uw=aa,s0=Hg,VA=dD,D2=KC,TB=(e,n)=>{const s=[];let a=e;for(;a&&a!==n;)s.push(a),a=a.parentNode;return s},IT=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,gu=(e,n)=>{if(wp(e)){if(s0(n.previousSibling)&&!Cp(n.previousSibling))return Xt.before(n);if(Cp(n))return Xt(n,0)}if(wb(e)){if(s0(n.nextSibling)&&!Cp(n.nextSibling))return Xt.after(n);if(Cp(n))return Xt(n,n.data.length)}return wb(e)?uw(n)?Xt.before(n):Xt.after(n):Xt.before(n)},dw=(e,n)=>{const s=n.nextSibling;return s&&s0(s)?Cp(s)?Xt(s,0):Xt.before(s):Nf(Ql.Forwards,Xt.after(n),e)},Nf=(e,n,s)=>{let a,l,f,v;if(!BT(s)||!n)return null;if(n.isEqual(Xt.after(s))&&s.lastChild){if(v=Xt.after(s.lastChild),wb(e)&&s0(s.lastChild)&&BT(s.lastChild))return uw(s.lastChild)?Xt.before(s.lastChild):v}else v=n;const k=v.container();let O=v.offset();if(Cp(k)){if(wb(e)&&O>0)return Xt(k,--O);if(wp(e)&&O<k.length)return Xt(k,++O);a=k}else{if(wb(e)&&O>0&&(l=IT(k,O-1),s0(l)))return!VA(l)&&(f=_s(l,e,D2,l),f)?Cp(f)?Xt(f,f.data.length):Xt.after(f):Cp(l)?Xt(l,l.data.length):Xt.before(l);if(wp(e)&&O<k.childNodes.length&&(l=IT(k,O),s0(l)))return uw(l)?dw(s,l):!VA(l)&&(f=_s(l,e,D2,l),f)?Cp(f)?Xt(f,0):Xt.before(f):Cp(l)?Xt(l,0):Xt.after(l);a=l||v.getNode()}if(a&&(wp(e)&&v.isAtEnd()||wb(e)&&v.isAtStart())&&(a=_s(a,e,pt,s,!0),D2(a,s)))return gu(e,a);l=a&&_s(a,e,D2,s);const F=Rt(dt(TB(k,s),NT));return F&&(!l||!F.contains(l))?(wp(e)?v=Xt.after(F):v=Xt.before(F),v):l?gu(e,l):null},Km=e=>({next:n=>Nf(Ql.Forwards,n,e),prev:n=>Nf(Ql.Backwards,n,e)}),UA=(e,n,s)=>{const a=e?Xt.before(s):Xt.after(s);return ad(e,n,a)},FT=e=>aa(e)?Xt.before(e):Xt.after(e),R2=e=>Xt.isTextPosition(e)?e.offset()===0:Hg(e.getNode()),M2=e=>{if(Xt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Hg(e.getNode(!0))},Wg=(e,n)=>!Xt.isTextPosition(e)&&!Xt.isTextPosition(n)&&e.getNode()===n.getNode(!0),N2=e=>!Xt.isTextPosition(e)&&aa(e.getNode()),Sp=(e,n,s)=>e?!Wg(n,s)&&!N2(n)&&M2(n)&&R2(s):!Wg(s,n)&&R2(n)&&M2(s),ad=(e,n,s)=>{const a=Km(n);return Y.from(e?a.next(s):a.prev(s))},r0=(e,n,s)=>ad(e,n,s).bind(a=>Mf(s,a,n)&&Sp(e,s,a)?ad(e,n,a):Y.some(a)),kp=(e,n,s,a)=>r0(e,n,s).bind(l=>a(l)?kp(e,n,l,a):Y.some(l)),B1=(e,n)=>{const s=e?n.firstChild:n.lastChild;return _n(s)?Y.some(Xt(s,e?0:s.data.length)):s?Hg(s)?Y.some(e?Xt.before(s):FT(s)):UA(e,n,s):Y.none()},Vi=Se(ad,!0),Ou=Se(ad,!1),kl=Se(B1,!0),Ma=Se(B1,!1),bm="_mce_caret",Od=e=>so(e)&&e.id===bm,wh=(e,n)=>{let s=n;for(;s&&s!==e;){if(Od(s))return s;s=s.parentNode}return null},mw=e=>ue(e.start),WA=e=>Lo(e,"rng"),Bf=e=>Lo(e,"id"),Ha=e=>Lo(e,"name"),My=e=>bn.isArray(e.start),gw=e=>!Ha(e)&&rn(e.forward)?e.forward:!0,PT=(e,n)=>(so(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),I1=(e,n)=>{const s=Y.from(iy(e.getRoot(),n.start)),a=Y.from(iy(e.getRoot(),n.end));return Ii(s,a,(l,f)=>{const v=e.createRng();return v.setStart(l.container(),l.offset()),v.setEnd(f.container(),f.offset()),{range:v,forward:gw(n)}})},LT=(e,n)=>{var s;const l=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Sl);e.appendChild(l),n.setStart(l,0),n.setEnd(l,0)},B2=e=>!e.hasChildNodes(),$T=(e,n)=>Ma(e).fold($e,s=>(n.setStart(s.container(),s.offset()),n.setEnd(s.container(),s.offset()),!0)),HT=(e,n,s)=>B2(n)&&wh(e,n)?(LT(n,s),!0):!1,F1=(e,n,s,a)=>{const l=s[n?"start":"end"],f=e.getRoot();if(l){let v=f,k=l[0];for(let O=l.length-1;v&&O>=1;O--){const F=v.childNodes;if(HT(f,v,a))return!0;if(l[O]>F.length-1)return HT(f,v,a)?!0:$T(v,a);v=F[l[O]]}_n(v)&&(k=Math.min(l[0],v.data.length)),so(v)&&(k=Math.min(l[0],v.childNodes.length)),n?a.setStart(v,k):a.setEnd(v,k)}return!0},Ny=e=>_n(e)&&e.data.length>0,I2=(e,n,s)=>{const a=e.get(s.id+"_"+n),l=a==null?void 0:a.parentNode,f=s.keep;if(a&&l){let v,k;if(n==="start"?f?a.hasChildNodes()?(v=a.firstChild,k=1):Ny(a.nextSibling)?(v=a.nextSibling,k=0):Ny(a.previousSibling)?(v=a.previousSibling,k=a.previousSibling.data.length):(v=l,k=e.nodeIndex(a)+1):(v=l,k=e.nodeIndex(a)):f?a.hasChildNodes()?(v=a.firstChild,k=1):Ny(a.previousSibling)?(v=a.previousSibling,k=a.previousSibling.data.length):(v=l,k=e.nodeIndex(a)):(v=l,k=e.nodeIndex(a)),!f){const O=a.previousSibling,F=a.nextSibling;bn.each(bn.grep(a.childNodes),K=>{_n(K)&&(K.data=K.data.replace(/\uFEFF/g,""))});let Z;for(;Z=e.get(s.id+"_"+n);)e.remove(Z,!0);if(_n(F)&&_n(O)&&!ms.browser.isOpera()){const K=O.data.length;O.appendData(F.data),e.remove(F),v=O,k=K}}return Y.some(Xt(v,k))}else return Y.none()},jA=(e,n)=>{const s=e.createRng();return F1(e,!0,n,s)&&F1(e,!1,n,s)?Y.some({range:s,forward:gw(n)}):Y.none()},qr=(e,n)=>{const s=I2(e,"start",n),a=I2(e,"end",n);return Ii(s,a.or(s),(l,f)=>{const v=e.createRng();return v.setStart(PT(e,l.container()),l.offset()),v.setEnd(PT(e,f.container()),f.offset()),{range:v,forward:gw(n)}})},Ch=(e,n)=>Y.from(e.select(n.name)[n.index]).map(s=>{const a=e.createRng();return a.selectNode(s),{range:a,forward:!0}}),P1=(e,n)=>{const s=e.dom;if(n){if(My(n))return jA(s,n);if(mw(n))return I1(s,n);if(Bf(n))return qr(s,n);if(Ha(n))return Ch(s,n);if(WA(n))return Y.some({range:n.rng,forward:gw(n)})}return Y.none()},Sb=(e,n,s)=>tT(e,n,s),ZA=(e,n)=>{P1(e,n).each(({range:s,forward:a})=>{e.setRng(s,a)})},Dd=e=>so(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",a0=(e=>n=>e===n)(wc),Sh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,fw=e=>!Sh(e)&&!a0(e)&&!Cv(e),zT=e=>{const n=[];if(e)for(let s=0;s<e.rangeCount;s++)n.push(e.getRangeAt(s));return n},pw=e=>ot(e,n=>{const s=Hx(n);return s?[je.fromDom(s)]:[]}),By=e=>zT(e).length>1,GA=e=>dt(pw(e),Px),qA=e=>ll(e,"td[data-mce-selected],th[data-mce-selected]"),hw=(e,n)=>{const s=qA(n);return s.length>0?s:GA(e)},L1=e=>hw(zT(e.selection.getSel()),je.fromDom(e.getBody())),Iy=(e,n)=>hf(e,"table",n),bw=e=>{const n=e.startContainer,s=e.startOffset;return _n(n)?s===0?Y.some(je.fromDom(n)):Y.none():Y.from(n.childNodes[s]).map(je.fromDom)},OD=e=>{const n=e.endContainer,s=e.endOffset;return _n(n)?s===n.data.length?Y.some(je.fromDom(n)):Y.none():Y.from(n.childNodes[s-1]).map(je.fromDom)},VT=e=>al(e).fold(Le([e]),n=>[e].concat(VT(n))),$1=e=>bl(e).fold(Le([e]),n=>_e(n)==="br"?rl(n).map(s=>[e].concat($1(s))).getOr([]):[e].concat($1(n))),vw=(e,n)=>Ii(bw(n),OD(n),(s,a)=>{const l=hn(VT(e),Se(Lr,s)),f=hn($1(e),Se(Lr,a));return l.isSome()&&f.isSome()}).getOr(!1),F2=(e,n,s,a)=>{const l=s,f=new ru(s,l),v=Er(e.schema.getMoveCaretBeforeOnEnterElements(),(O,F)=>!ce(["td","th","table"],F.toLowerCase()));let k=s;do{if(_n(k)&&bn.trim(k.data).length!==0){a?n.setStart(k,0):n.setEnd(k,k.data.length);return}if(v[k.nodeName]){a?n.setStartBefore(k):k.nodeName==="BR"?n.setEndBefore(k):n.setEndAfter(k);return}}while(k=a?f.next():f.prev());l.nodeName==="BODY"&&(a?n.setStart(l,0):n.setEnd(l,l.childNodes.length))},yw=e=>{const n=e.selection.getSel();return Qe(n)&&n.rangeCount>0},If=(e,n)=>{const s=L1(e);s.length>0?oe(s,a=>{const l=a.dom,f=e.dom.createRng();f.setStartBefore(l),f.setEndAfter(l),n(f,!0)}):n(e.selection.getRng(),!1)},UT=(e,n,s)=>{const a=Bl(e,n);s(a),e.moveToBookmark(a)},Fy=e=>z(e==null?void 0:e.nodeType),Py=e=>so(e)&&!Dd(e)&&!Od(e)&&!ap(e),KA=(e,n)=>{if(Py(n)&&!/^(TD|TH)$/.test(n.nodeName)){const s=e.getAttrib(n,"data-mce-selected"),a=parseInt(s,10);return!isNaN(a)&&a>0}else return!1},P2=(e,n,s)=>{const{selection:a,dom:l}=e,f=a.getNode(),v=ia(f);UT(a,!0,()=>{n()}),v&&ia(f)&&l.isChildOf(f,e.getBody())?e.selection.select(f):s(a.getStart())&&L2(l,a)},L2=(e,n)=>{var s,a;const l=n.getRng(),{startContainer:f,startOffset:v}=l,k=n.getNode();if(!KA(e,k)&&so(f)){const O=f.childNodes,F=e.getRoot();let Z;if(v<O.length){const K=O[v];Z=new ru(K,(s=e.getParent(K,e.isBlock))!==null&&s!==void 0?s:F)}else{const K=O[O.length-1];Z=new ru(K,(a=e.getParent(K,e.isBlock))!==null&&a!==void 0?a:F),Z.next(!0)}for(let K=Z.current();K;K=Z.next()){if(e.getContentEditable(K)==="false")return;if(_n(K)&&!xw(K)){l.setStart(K,0),n.setRng(l);return}}}},YA=(e,n,s)=>{if(e){const a=n?"nextSibling":"previousSibling";for(e=e[a];e;e=e[a])if(so(e)||!xw(e))return e}},WT=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||yf(e,n),kb=(e,n,s)=>e.schema.isValidChild(n,s),xw=(e,n=!1)=>{if(Qe(e)&&_n(e)){const s=n?e.data.replace(/ /g," "):e.data;return Ju(s)}else return!1},ao=e=>Qe(e)&&_n(e)&&e.length===0,Ll=(e,n)=>{const s="[data-mce-cef-wrappable]",a=sa(e),l=er(a)?s:`${s},${a}`;return ga(je.fromDom(n),l)},Ly=(e,n)=>{const s=e.dom;return Py(n)&&s.getContentEditable(n)==="false"&&Ll(e,n)&&s.select('[contenteditable="true"]',n).length===0},nc=(e,n)=>Be(e)?e(n):(Qe(n)&&(e=e.replace(/%(\w+)/g,(s,a)=>n[a]||s)),e),vm=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),$y=(e,n)=>{if(qn(e))return null;{let s=String(e);return(n==="color"||n==="backgroundColor")&&(s=mp(s)),n==="fontWeight"&&e===700&&(s="bold"),n==="fontFamily"&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},Ff=(e,n,s)=>{const a=e.getStyle(n,s);return $y(a,s)},Tp=(e,n)=>{let s;return e.getParent(n,a=>so(a)?(s=e.getStyle(a,"text-decoration"),!!s&&s!=="none"):!1),s},Hy=(e,n,s)=>e.getParents(n,s,e.getRoot()),jT=(e,n,s)=>{const a=e.formatter.get(n);return Qe(a)&&De(a,s)},XA=(e,n)=>jT(e,n,a=>{const l=f=>Be(f)||f.length>1&&f.charAt(0)==="%";return De(["styles","attributes"],f=>kr(a,f).exists(v=>{const k=qt(v)?v:Bi(v);return De(k,l)}))}),JA=(e,n,s)=>{const a=["inline","block","selector","attributes","styles","classes"],l=f=>Er(f,(v,k)=>De(a,O=>O===k));return jT(e,n,f=>{const v=l(f);return jT(e,s,k=>{const O=l(k);return vi(v,O)})})},Ep=e=>Aa(e,"block"),QA=e=>Ep(e)&&e.wrapper===!0,gg=e=>Ep(e)&&e.wrapper!==!0,eu=e=>Aa(e,"selector"),wa=e=>Aa(e,"inline"),Pf=e=>eu(e)&&wa(e)&&fl(kr(e,"mixed"),!0),ir=e=>eu(e)&&e.expand!==!1&&!wa(e),Tb=e=>{const n=[];let s=e;for(;s;){if(_n(s)&&s.data!==Sl||s.childNodes.length>1)return[];so(s)&&n.push(s),s=s.firstChild}return n},ww=e=>Tb(e).length>0,Na=e=>Od(e.dom)&&ww(e.dom),i0=Dd,Eb=Hy,_b=xw,Cw=WT,Sw=e=>aa(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,ZT=(e,n)=>{let s=n;for(;s;){if(so(s)&&e.getContentEditable(s))return e.getContentEditable(s)==="false"?s:n;s=s.parentNode}return n},eO=(e,n,s,a)=>{const l=n.data;if(e){for(let f=s;f>0;f--)if(a(l.charAt(f-1)))return f}else for(let f=s;f<l.length;f++)if(a(l.charAt(f)))return f;return-1},tO=(e,n,s)=>eO(e,n,s,a=>a0(a)||Sh(a)),$2=(e,n,s)=>eO(e,n,s,fw),nO=(e,n,s,a,l,f)=>{let v;const k=e.getParent(s,e.isBlock)||n,O=(Z,K,J)=>{const de=v1(e),Te=l?de.backwards:de.forwards;return Y.from(Te(Z,K,(be,Me)=>i0(be.parentNode)?-1:(v=be,J(l,be,Me)),k))};return O(s,a,tO).bind(Z=>f?O(Z.container,Z.offset+(l?-1:0),$2):Y.some(Z)).orThunk(()=>v?Y.some({container:v,offset:l?0:v.length}):Y.none())},Ri=(e,n,s,a,l)=>{const f=a[l];_n(a)&&er(a.data)&&f&&(a=f);const v=Eb(e,a);for(let k=0;k<v.length;k++)for(let O=0;O<n.length;O++){const F=n[O];if(!(Qe(F.collapsed)&&F.collapsed!==s.collapsed)&&eu(F)&&e.is(v[k],F.selector))return v[k]}return a},Du=(e,n,s,a)=>{var l;let f=s;const v=e.getRoot(),k=n[0];if(Ep(k)&&(f=k.wrapper?null:e.getParent(s,k.block,v)),!f){const O=(l=e.getParent(s,"LI,TD,TH,SUMMARY"))!==null&&l!==void 0?l:v;f=e.getParent(_n(s)?s.parentNode:s,F=>F!==v&&Cw(e.schema,F),O)}if(f&&Ep(k)&&k.wrapper&&(f=Eb(e,f,"ul,ol").reverse()[0]||f),!f)for(f=s;f&&f[a]&&!e.isBlock(f[a])&&(f=f[a],!vm(f,"br")););return f||s},fg=(e,n,s,a)=>{const l=s.parentNode;return Qe(s[a])?!1:l===n||qn(l)||e.isBlock(l)?!0:fg(e,n,l,a)},ym=(e,n,s,a,l)=>{let f=s;const v=l?"previousSibling":"nextSibling",k=e.getRoot();if(_n(s)&&!_b(s)&&(l?a>0:a<s.data.length))return s;for(;f;){if(!n[0].block_expand&&e.isBlock(f))return f;for(let O=f[v];O;O=O[v]){const F=_n(O)&&!fg(e,k,O,v);if(!i0(O)&&!Sw(O)&&!_b(O,F))return f}if(f===k||f.parentNode===k){s=f;break}f=f.parentNode}return s},kw=e=>i0(e.parentNode)||i0(e),Ab=(e,n,s,a=!1)=>{let{startContainer:l,startOffset:f,endContainer:v,endOffset:k}=n;const O=s[0];return so(l)&&l.hasChildNodes()&&(l=mb(l,f),_n(l)&&(f=0)),so(v)&&v.hasChildNodes()&&(v=mb(v,n.collapsed?k:k-1),_n(v)&&(k=v.data.length)),l=ZT(e,l),v=ZT(e,v),kw(l)&&(l=i0(l)?l:l.parentNode,n.collapsed?l=l.previousSibling||l:l=l.nextSibling||l,_n(l)&&(f=n.collapsed?l.length:0)),kw(v)&&(v=i0(v)?v:v.parentNode,n.collapsed?v=v.nextSibling||v:v=v.previousSibling||v,_n(v)&&(k=n.collapsed?0:v.length)),n.collapsed&&(nO(e,e.getRoot(),l,f,!0,a).each(({container:K,offset:J})=>{l=K,f=J}),nO(e,e.getRoot(),v,k,!1,a).each(({container:K,offset:J})=>{v=K,k=J})),(wa(O)||O.block_expand)&&((!wa(O)||!_n(l)||f===0)&&(l=ym(e,s,l,f,!0)),(!wa(O)||!_n(v)||k===v.data.length)&&(v=ym(e,s,v,k,!1))),ir(O)&&(l=Ri(e,s,n,l,"previousSibling"),v=Ri(e,s,n,v,"nextSibling")),(Ep(O)||eu(O))&&(l=Du(e,s,l,"previousSibling"),v=Du(e,s,v,"nextSibling"),Ep(O)&&(e.isBlock(l)||(l=ym(e,s,l,f,!0),_n(l)&&(f=0)),e.isBlock(v)||(v=ym(e,s,v,k,!1),_n(v)&&(k=v.data.length)))),so(l)&&l.parentNode&&(f=e.nodeIndex(l),l=l.parentNode),so(v)&&v.parentNode&&(k=e.nodeIndex(v)+1,v=v.parentNode),{startContainer:l,startOffset:f,endContainer:v,endOffset:k}},Uu=(e,n,s)=>{var a;const l=n.startOffset,f=mb(n.startContainer,l),v=n.endOffset,k=mb(n.endContainer,v-1),O=Me=>{const Xe=Me[0];_n(Xe)&&Xe===f&&l>=Xe.data.length&&Me.splice(0,1);const gt=Me[Me.length-1];return v===0&&Me.length>0&&gt===k&&_n(gt)&&Me.splice(Me.length-1,1),Me},F=(Me,Xe,gt)=>{const bt=[];for(;Me&&Me!==gt;Me=Me[Xe])bt.push(Me);return bt},Z=(Me,Xe)=>e.getParent(Me,gt=>gt.parentNode===Xe,Xe),K=(Me,Xe,gt)=>{const bt=gt?"nextSibling":"previousSibling";for(let Ot=Me,yn=Ot.parentNode;Ot&&Ot!==Xe;Ot=yn){yn=Ot.parentNode;const Un=F(Ot===Me?Ot:Ot[bt],bt);Un.length&&(gt||Un.reverse(),s(O(Un)))}};if(f===k)return s(O([f]));const J=(a=e.findCommonAncestor(f,k))!==null&&a!==void 0?a:e.getRoot();if(e.isChildOf(f,k))return K(f,J,!0);if(e.isChildOf(k,f))return K(k,J);const de=Z(f,J)||f,Te=Z(k,J)||k;K(f,de,!0);const be=F(de===f?de:de.nextSibling,"nextSibling",Te===k?Te.nextSibling:Te);be.length&&s(O(be)),K(k,Te)},jg=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],GT=e=>Da(e)&&y1(e)===Sl,Tw=(e,n,s,a)=>jl(n).fold(()=>"skipping",l=>a==="br"||GT(n)?"valid":aA(n)?"existing":Od(n.dom)?"caret":De(jg,f=>ga(n,f))?"valid-block":!kb(e,s,a)||!kb(e,_e(l),s)?"invalid-child":"valid"),oO=(e,n)=>{const s=Ab(e.dom,n,[{inline:"span"}]);n.setStart(s.startContainer,s.startOffset),n.setEnd(s.endContainer,s.endOffset),e.selection.setRng(n)},zy=(e,n,s,a,l,f)=>{const{uid:v=n,...k}=s;Pm(e,Cl()),Pi(e,`${Hc()}`,v),Pi(e,`${Ac()}`,a);const{attributes:O={},classes:F=[]}=l(v,k);if(dc(e,O),h1(e,F),f){F.length>0&&Pi(e,`${fp()}`,F.join(","));const Z=ns(O);Z.length>0&&Pi(e,`${Ef()}`,Z.join(","))}},sO=e=>{Wl(e,Cl()),tr(e,`${Hc()}`),tr(e,`${Ac()}`),tr(e,`${kc()}`);const n=Yi(e,`${Ef()}`).map(a=>a.split(",")).getOr([]),s=Yi(e,`${fp()}`).map(a=>a.split(",")).getOr([]);oe(n,a=>tr(e,a)),du(e,s),tr(e,`${fp()}`),tr(e,`${Ef()}`)},Vy=(e,n,s,a,l)=>{const f=je.fromTag("span",e);return zy(f,n,s,a,l,!1),f},Uy=(e,n,s,a,l,f)=>{const v=[],k=Vy(e.getDoc(),s,f,a,l),O=Kl(),F=()=>{O.clear()},Z=()=>O.get().getOrThunk(()=>{const Te=pp(k);return v.push(Te),O.set(Te),Te}),K=Te=>{oe(Te,J)},J=Te=>{switch(Tw(e,Te,"span",_e(Te))){case"invalid-child":{F();const Me=Rl(Te);K(Me),F();break}case"valid-block":{F(),zy(Te,s,f,a,l,!0);break}case"valid":{const Me=Z();cl(Te,Me);break}}},de=Te=>{const be=Ne(Te,je.fromDom);K(be)};return Uu(e.dom,n,Te=>{F(),de(Te)}),v},Ew=(e,n,s,a)=>{e.undoManager.transact(()=>{const l=e.selection,f=l.getRng(),v=L1(e).length>0,k=ab("mce-annotation");if(f.collapsed&&!v&&oO(e,f),l.getRng().collapsed&&!v){const O=Vy(e.getDoc(),k,a,n,s.decorate);am(O,wc),l.getRng().insertNode(O.dom),l.select(O.dom)}else UT(l,!1,()=>{If(e,O=>{Uy(e,O,k,n,s.decorate,a)})})})},ii=e=>{const n=Td();Hk(e,n);const s=iA(e,n),a=Ol("span"),l=f=>{oe(f,v=>{a(v)?Su(v):sO(v)})};return{register:(f,v)=>{n.register(f,v)},annotate:(f,v)=>{n.lookup(f).each(k=>{Ew(e,f,k,v)})},annotationChanged:(f,v)=>{s.addListener(f,v)},remove:f=>{X0(e,Y.some(f)).each(({elements:v})=>{const k=e.selection.getBookmark();l(v),e.selection.moveToBookmark(k)})},removeAll:f=>{const v=e.selection.getBookmark();vn(Q0(e,f),(k,O)=>{l(k)}),e.selection.moveToBookmark(v)},getAll:f=>{const v=Q0(e,f);return Ls(v,k=>Ne(k,O=>O.dom))}}},id=e=>({getBookmark:Se(Sb,e),moveToBookmark:Se(ZA,e)});id.isBookmarkNode=Dd;const qT=(e,n,s)=>s.collapsed?!1:De(s.getClientRects(),a=>Gk(a,e,n)),KT=()=>je.fromDom(document),Zg=(e,n=!1)=>e.dom.focus({preventScroll:n}),Rd=e=>{const n=Vd(e).dom;return e.dom===n.activeElement},kh=(e=KT())=>Y.from(e.dom.activeElement).map(je.fromDom),_w=e=>kh(Vd(e)).filter(n=>e.dom.contains(n.dom)),Qa={create:(e,n,s,a)=>({start:e,soffset:n,finish:s,foffset:a})},H2=mg.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),c0=(e,n,s,a)=>e.fold(n,s,a),Ob=e=>e.fold(Qt,Qt,Qt),YT=H2.before,z2=H2.on,XT=H2.after,Db={before:YT,on:z2,after:XT,cata:c0,getStart:Ob},H1=mg.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ym=e=>H1.exact(e.start,e.soffset,e.finish,e.foffset),cd=e=>e.match({domRange:n=>je.fromDom(n.startContainer),relative:(n,s)=>Db.getStart(n),exact:(n,s,a,l)=>n}),l0=H1.domRange,rO=H1.relative,aO=H1.exact,V2=e=>{const n=cd(e);return mf(n)},Kr=Qa.create,Aw={domRange:l0,relative:rO,exact:aO,exactFromRange:Ym,getWin:V2,range:Kr},JT=(e,n)=>{const s=Da(n)?y1(n).length:Rl(n).length+1;return e>s?s:e<0?0:e},iO=e=>Aw.range(e.start,JT(e.soffset,e.start),e.finish,JT(e.foffset,e.finish)),DD=(e,n)=>!oh(n.dom)&&(Xi(e,n)||Lr(e,n)),cO=e=>n=>DD(e,n.start)&&DD(e,n.finish),lO=e=>e.inline||ms.browser.isFirefox(),RD=e=>Aw.range(je.fromDom(e.startContainer),e.startOffset,je.fromDom(e.endContainer),e.endOffset),uO=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?Y.none():Y.from(n.getRangeAt(0))).map(RD)},MD=e=>{const n=mf(e);return uO(n.dom).filter(cO(e))},Ow=(e,n)=>Y.from(n).filter(cO(e)).map(iO),Dw=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),Y.some(n)}catch{return Y.none()}},Rw=e=>{const n=lO(e)?MD(je.fromDom(e.getBody())):Y.none();e.bookmark=n.isSome()?n:e.bookmark},QT=e=>(e.bookmark?e.bookmark:Y.none()).bind(s=>Ow(je.fromDom(e.getBody()),s)).bind(Dw),qg=e=>{QT(e).each(n=>e.selection.setRng(n))},dO={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},eE=(e,n)=>(z(n)||(n=0),setTimeout(e,n)),tE=(e,n)=>(z(n)||(n=0),setInterval(e,n)),Wo={setEditorTimeout:(e,n,s)=>eE(()=>{e.removed||n()},s),setEditorInterval:(e,n,s)=>{const a=tE(()=>{e.removed?clearInterval(a):n()},s);return a}},m=e=>e.type==="nodechange"&&e.selectionChange,h=(e,n)=>{const s=()=>{n.throttle()};qs.DOM.bind(document,"mouseup",s),e.on("remove",()=>{qs.DOM.unbind(document,"mouseup",s)})},C=(e,n)=>{e.on("mouseup touchend",s=>{n.throttle()})},_=(e,n)=>{C(e,n),e.on("keyup NodeChange AfterSetSelectionRange",s=>{m(s)||Rw(e)})},L=e=>{const n=Fv(()=>{Rw(e)},0);e.on("init",()=>{e.inline&&h(e,n),_(e,n)}),e.on("remove",()=>{n.cancel()})};let U;const ee=qs.DOM,me=e=>so(e)&&dO.isEditorUIElement(e),Ee=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ke=(e,n)=>{const s=gT(e);return ee.getParent(n,l=>me(l)||(s?e.dom.is(l,s):!1))!==null},kt=e=>{try{const n=Vd(je.fromDom(e.getElement()));return kh(n).fold(()=>document.body,s=>s.dom)}catch{return document.body}},Bn=(e,n)=>{const s=n.editor;L(s);const a=(l,f)=>{if(CT(l)&&l.inline!==!0){const v=je.fromDom(l.getContainer());f(v,"tox-edit-focus")}};s.on("focusin",()=>{const l=e.focusedEditor;Ee(kt(s))&&a(s,Pm),l!==s&&(l&&l.dispatch("blur",{focusedEditor:s}),e.setActive(s),e.focusedEditor=s,s.dispatch("focus",{blurredEditor:l}),s.focus(!0))}),s.on("focusout",()=>{Wo.setEditorTimeout(s,()=>{const l=e.focusedEditor;(!Ee(kt(s))||l!==s)&&a(s,Wl),!Ke(s,kt(s))&&l===s&&(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),U||(U=l=>{const f=e.activeEditor;f&&wv(l).each(v=>{const k=v;k.ownerDocument===document&&k!==document.body&&!Ke(f,k)&&e.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},ee.bind(document,"focusin",U))},co=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&U&&(ee.unbind(document,"focusin",U),U=null)},Qn=e=>{e.on("AddEditor",Se(Bn,e)),e.on("RemoveEditor",Se(co,e))},jn=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="true"),Ho=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="false")!==null,On=e=>e.collapsed?Y.from(mb(e.startContainer,e.startOffset)).map(je.fromDom):Y.none(),ds=(e,n)=>On(n).bind(s=>cD(s)?Y.some(s):Xi(e,s)?Y.none():Y.some(e)),rr=(e,n)=>{ds(je.fromDom(e.getBody()),n).bind(s=>kl(s.dom)).fold(()=>{e.selection.normalize()},s=>e.selection.setRng(s.toRange()))},Cn=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},_a=e=>Rd(e)||_w(e).isSome(),ea=e=>Qe(e.iframeElement)&&Rd(je.fromDom(e.iframeElement)),zr=e=>{const n=e.getBody();return n&&_a(je.fromDom(n))},Ui=e=>{const n=Vd(je.fromDom(e.getElement()));return kh(n).filter(s=>!Ee(s.dom)&&Ke(e,s.dom)).isSome()},hc=e=>e.inline?zr(e):ea(e),Lf=e=>hc(e)||Ui(e),Xm=e=>{const n=e.selection,s=e.getBody();let a=n.getRng();e.quirks.refreshContentEditable();const l=v=>{QT(v).each(k=>{v.selection.setRng(k),a=k})};!hc(e)&&e.hasEditableRoot()&&l(e);const f=jn(e,n.getNode());if(f&&e.dom.isChildOf(f,s)){Ho(e,f)||Cn(s),Cn(f),e.hasEditableRoot()||l(e),rr(e,a),Kg(e);return}e.inline||(ms.browser.isOpera()||Cn(s),e.getWin().focus()),(ms.browser.isFirefox()||e.inline)&&(Cn(s),rr(e,a)),Kg(e)},Kg=e=>e.editorManager.setActive(e),Ca=(e,n)=>{e.removed||(n?Kg(e):Xm(e))},eo={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||eo.metaKeyPressed(e),metaKeyPressed:e=>ms.os.isMacOS()||ms.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},$l="data-mce-selected",ld="table,img,figure.image,hr,video,span.mce-preview-object,details",Jm=Math.abs,fr=Math.round,Tc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},$f=e=>e.type==="longpress"||e.type.indexOf("touch")===0,u0=(e,n)=>{const s=n.dom,a=n.getDoc(),l=document,f=n.getBody();let v,k,O,F,Z,K,J,de,Te,be,Me,Xe,gt,bt,Ot,yn,Un;const So=po=>Qe(po)&&(Ja(po)||s.is(po,"figure.image")),sn=po=>Kc(po)||s.hasClass(po,"mce-preview-object"),Ut=(po,Or)=>{if($f(po)){const Vr=po.touches[0];return So(po.target)&&!qT(Vr.clientX,Vr.clientY,Or)}else return So(po.target)&&!qT(po.clientX,po.clientY,Or)},En=po=>{const Or=po.target;Ut(po,n.selection.getRng())&&!po.isDefaultPrevented()&&n.selection.select(Or)},Io=po=>s.hasClass(po,"mce-preview-object")&&Qe(po.firstElementChild)?[po,po.firstElementChild]:s.is(po,"figure.image")?[po.querySelector("img")]:[po],gs=po=>{const Or=Au(n);return!Or||n.mode.isReadOnly()||po.getAttribute("data-mce-resize")==="false"||po===n.getBody()?!1:s.hasClass(po,"mce-preview-object")&&Qe(po.firstElementChild)?ga(je.fromDom(po.firstElementChild),Or):ga(je.fromDom(po),Or)},Gs=(po,Or)=>{if(sn(Or))return po.create("img",{src:ms.transparentSrc});if(rg(Or)){const Ru=cs(F.name,"n")?Gt:yo,Za=Or.cloneNode(!0);return Ru(po.select("tr",Za)).each(_m=>{const tp=po.select("td,th",_m);po.setStyle(_m,"height",null),oe(tp,F0=>po.setStyle(F0,"height",null))}),Za}else return Or.cloneNode(!0)},Tr=(po,Or,Vr)=>{if(Qe(Vr)){const Ru=Io(po);oe(Ru,Za=>{Za.style[Or]||!n.schema.isValid(Za.nodeName.toLowerCase(),Or)?s.setStyle(Za,Or,Vr):s.setAttrib(Za,Or,""+Vr)})}},za=(po,Or,Vr)=>{Tr(po,"width",Or),Tr(po,"height",Vr)},ci=po=>{let Or,Vr,Ru,Za,_m;Or=po.screenX-K,Vr=po.screenY-J,bt=Or*F[2]+be,Ot=Vr*F[3]+Me,bt=bt<5?5:bt,Ot=Ot<5?5:Ot,(So(v)||sn(v))&&Zv(n)!==!1?Ru=!eo.modifierPressed(po):Ru=eo.modifierPressed(po),Ru&&(Jm(Or)>Jm(Vr)?(Ot=fr(bt*Xe),bt=fr(Ot/Xe)):(bt=fr(Ot/Xe),Ot=fr(bt*Xe))),za(k,bt,Ot),Za=F.startPos.x+Or,_m=F.startPos.y+Vr,Za=Za>0?Za:0,_m=_m>0?_m:0,s.setStyles(O,{left:Za,top:_m,display:"block"}),O.innerHTML=bt+" &times; "+Ot,F[2]<0&&k.clientWidth<=bt&&s.setStyle(k,"left",de+(be-bt)),F[3]<0&&k.clientHeight<=Ot&&s.setStyle(k,"top",Te+(Me-Ot)),Or=f.scrollWidth-yn,Vr=f.scrollHeight-Un,Or+Vr!==0&&s.setStyles(O,{left:Za-Or,top:_m-Vr}),gt||(rT(n,v,be,Me,"corner-"+F.name),gt=!0)},El=()=>{const po=gt;gt=!1,po&&(Tr(v,"width",bt),Tr(v,"height",Ot)),s.unbind(a,"mousemove",ci),s.unbind(a,"mouseup",El),l!==a&&(s.unbind(l,"mousemove",ci),s.unbind(l,"mouseup",El)),s.remove(k),s.remove(O),s.remove(Z),tm(v),po&&(Yx(n,v,bt,Ot,"corner-"+F.name),s.setAttrib(v,"style",s.getAttrib(v,"style"))),n.nodeChanged()},tm=po=>{bo();const Or=s.getPos(po,f),Vr=Or.x,Ru=Or.y,Za=po.getBoundingClientRect(),_m=Za.width||Za.right-Za.left,tp=Za.height||Za.bottom-Za.top;v!==po&&(to(),v=po,bt=Ot=0);const F0=n.dispatch("ObjectSelected",{target:po});gs(po)&&!F0.isDefaultPrevented()?vn(Tc,(ng,Zp)=>{const Gp=qp=>{const is=Io(v)[0];K=qp.screenX,J=qp.screenY,be=is.clientWidth,Me=is.clientHeight,Xe=Me/be,F=ng,F.name=Zp,F.startPos={x:_m*ng[0]+Vr,y:tp*ng[1]+Ru},yn=f.scrollWidth,Un=f.scrollHeight,Z=s.add(f,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(Z,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),k=Gs(s,v),s.addClass(k,"mce-clonedresizable"),s.setAttrib(k,"data-mce-bogus","all"),k.contentEditable="false",s.setStyles(k,{left:Vr,top:Ru,margin:0}),za(k,_m,tp),k.removeAttribute($l),f.appendChild(k),s.bind(a,"mousemove",ci),s.bind(a,"mouseup",El),l!==a&&(s.bind(l,"mousemove",ci),s.bind(l,"mouseup",El)),O=s.add(f,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},be+" &times; "+Me)};let nm=s.get("mceResizeHandle"+Zp);nm&&s.remove(nm),nm=s.add(f,"div",{id:"mceResizeHandle"+Zp,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Zp+"-resize; margin:0; padding:0"}),s.bind(nm,"mousedown",qp=>{qp.stopImmediatePropagation(),qp.preventDefault(),Gp(qp)}),ng.elm=nm,s.setStyles(nm,{left:_m*ng[0]+Vr-nm.offsetWidth/2,top:tp*ng[1]+Ru-nm.offsetHeight/2})}):to(!1)},gd=Fv(tm,0),to=(po=!0)=>{gd.cancel(),bo(),v&&po&&v.removeAttribute($l),vn(Tc,(Or,Vr)=>{const Ru=s.get("mceResizeHandle"+Vr);Ru&&(s.unbind(Ru),s.remove(Ru))})},us=(po,Or)=>s.isChildOf(po,Or),pa=po=>{if(gt||n.removed||n.composing)return;const Or=po.type==="mousedown"?po.target:e.getNode(),Vr=wo(je.fromDom(Or),ld).map(Za=>Za.dom).filter(Za=>s.isEditable(Za.parentElement)||Za.nodeName==="IMG"&&s.isEditable(Za)).getOrUndefined(),Ru=Qe(Vr)?s.getAttrib(Vr,$l,"1"):"1";if(oe(s.select(`img[${$l}],hr[${$l}]`),Za=>{Za.removeAttribute($l)}),Qe(Vr)&&us(Vr,f)&&Lf(n)){Is();const Za=e.getStart(!0);if(us(Za,Vr)&&us(e.getEnd(!0),Vr)){s.setAttrib(Vr,$l,Ru),gd.throttle(Vr);return}}to()},bo=()=>{vn(Tc,po=>{po.elm&&(s.unbind(po.elm),delete po.elm)})},Is=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Is(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",pa),n.on("keyup compositionend",po=>{v&&v.nodeName==="TABLE"&&pa(po)}),n.on("hide blur",to),n.on("contextmenu longpress",En,!0)}),n.on("remove",bo),{isResizable:gs,showResizeRect:tm,hideResizeRect:to,updateResizeRect:pa,destroy:()=>{gd.cancel(),v=k=Z=null}}},Qm=(e,n)=>{n.fold(s=>{e.setStartBefore(s.dom)},(s,a)=>{e.setStart(s.dom,a)},s=>{e.setStartAfter(s.dom)})},Js=(e,n)=>{n.fold(s=>{e.setEndBefore(s.dom)},(s,a)=>{e.setEnd(s.dom,a)},s=>{e.setEndAfter(s.dom)})},Mw=(e,n,s)=>{const a=e.document.createRange();return Qm(a,n),Js(a,s),a},Nw=(e,n,s,a,l)=>{const f=e.document.createRange();return f.setStart(n.dom,s),f.setEnd(a.dom,l),f},Rb=mg.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),nE=(e,n,s)=>n(je.fromDom(s.startContainer),s.startOffset,je.fromDom(s.endContainer),s.endOffset),Mb=(e,n)=>n.match({domRange:s=>({ltr:Le(s),rtl:Y.none}),relative:(s,a)=>({ltr:Ht(()=>Mw(e,s,a)),rtl:Ht(()=>Y.some(Mw(e,a,s)))}),exact:(s,a,l,f)=>({ltr:Ht(()=>Nw(e,s,a,l,f)),rtl:Ht(()=>Y.some(Nw(e,l,f,s,a)))})}),Th=(e,n)=>{const s=n.ltr();return s.collapsed?n.rtl().filter(l=>l.collapsed===!1).map(l=>Rb.rtl(je.fromDom(l.endContainer),l.endOffset,je.fromDom(l.startContainer),l.startOffset)).getOrThunk(()=>nE(e,Rb.ltr,s)):nE(e,Rb.ltr,s)},Bw=(e,n)=>{const s=Mb(e,n);return Th(e,s)};Rb.ltr,Rb.rtl;const Yg=(e,n,s)=>{var a;return Y.from((a=e.caretPositionFromPoint)===null||a===void 0?void 0:a.call(e,n,s)).bind(l=>{if(l.offsetNode===null)return Y.none();const f=e.createRange();return f.setStart(l.offsetNode,l.offset),f.collapse(),Y.some(f)})},j6=(e,n,s)=>{var a;return Y.from((a=e.caretRangeFromPoint)===null||a===void 0?void 0:a.call(e,n,s))},ND=(e,n,s)=>e.caretPositionFromPoint?Yg(e,n,s):e.caretRangeFromPoint?j6(e,n,s):Y.none(),Dc=(e,n,s)=>{const a=e.document;return ND(a,n,s).map(l=>Qa.create(je.fromDom(l.startContainer),l.startOffset,je.fromDom(l.endContainer),l.endOffset))},Nb=(e,n)=>{const s=_e(e);return s==="input"?Db.after(e):ce(["br","img"],s)?n===0?Db.before(e):Db.after(e):Db.on(e,n)},BD=(e,n)=>{const s=e.fold(Db.before,Nb,Db.after),a=n.fold(Db.before,Nb,Db.after);return Aw.relative(s,a)},Bb=(e,n,s,a)=>{const l=Nb(e,n),f=Nb(s,a);return Aw.relative(l,f)},_B=e=>e.match({domRange:n=>{const s=je.fromDom(n.startContainer),a=je.fromDom(n.endContainer);return Bb(s,n.startOffset,a,n.endOffset)},relative:BD,exact:Bb}),mO=(e,n)=>{const a=document.createDocumentFragment();return oe(e,l=>{a.appendChild(l.dom)}),je.fromDom(a)},oE=e=>{const n=Aw.getWin(e).dom,s=(l,f,v,k)=>Nw(n,l,f,v,k),a=_B(e);return Bw(n,a).match({ltr:s,rtl:s})},AB=(e,n,s)=>Dc(e,n,s),Z6=(e,n,s)=>{const a=mf(je.fromDom(s));return AB(a.dom,e,n).map(l=>{const f=s.createRange();return f.setStart(l.start.dom,l.soffset),f.setEnd(l.finish.dom,l.foffset),f}).getOrUndefined()},Wy=(e,n)=>Qe(e)&&Qe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,OB=(e,n,s)=>{let a=e;for(;a&&a!==n;){if(s(a))return a;a=a.parentNode}return null},z1=(e,n,s)=>OB(e,n,s)!==null,ID=(e,n,s)=>z1(e,n,a=>a.nodeName===s),V1=(e,n)=>Lg(e)&&!z1(e,n,Od),FD=(e,n,s)=>{const a=n.parentNode;if(a){const l=new ru(n,e.getParent(a,e.isBlock)||e.getRoot());let f;for(;f=l[s?"prev":"next"]();)if(aa(f))return!0}return!1},Hf=(e,n)=>{var s;return((s=e.previousSibling)===null||s===void 0?void 0:s.nodeName)===n},U2=(e,n)=>{let s=n;for(;s&&s!==e;){if(ia(s))return!0;s=s.parentNode}return!1},jy=(e,n,s,a,l)=>{const f=e.getRoot(),v=e.schema.getNonEmptyElements(),k=l.parentNode;let O,F;if(!k)return Y.none();const Z=e.getParent(k,e.isBlock)||f;if(a&&aa(l)&&n&&e.isEmpty(Z))return Y.some(Xt(k,e.nodeIndex(l)));const K=new ru(l,Z);for(;F=K[a?"prev":"next"]();){if(e.getContentEditableParent(F)==="false"||V1(F,f))return Y.none();if(_n(F)&&F.data.length>0)return ID(F,f,"A")?Y.none():Y.some(Xt(F,a?F.data.length:0));if(e.isBlock(F)||v[F.nodeName.toLowerCase()])return Y.none();O=F}return fc(O)?Y.none():s&&O?Y.some(Xt(O,0)):Y.none()},gO=(e,n,s,a)=>{const l=e.getRoot();let f,v=!1,k=s?a.startContainer:a.endContainer,O=s?a.startOffset:a.endOffset;const F=so(k)&&O===k.childNodes.length,Z=e.schema.getNonEmptyElements();let K=s;if(Lg(k))return Y.none();if(so(k)&&O>k.childNodes.length-1&&(K=!1),sh(k)&&(k=l,O=0),k===l){if(K&&(f=k.childNodes[O>0?O-1:0],f&&(Lg(f)||Z[f.nodeName]||rg(f))))return Y.none();if(k.hasChildNodes()){if(O=Math.min(!K&&O>0?O-1:O,k.childNodes.length-1),k=k.childNodes[O],O=_n(k)&&F?k.data.length:0,!n&&k===l.lastChild&&rg(k)||U2(l,k)||Lg(k)||kv(k))return Y.none();if(k.hasChildNodes()&&!rg(k)){f=k;const J=new ru(k,l);do{if(ia(f)||Lg(f)){v=!1;break}if(_n(f)&&f.data.length>0){O=K?0:f.data.length,k=f,v=!0;break}if(Z[f.nodeName.toLowerCase()]&&!qc(f)){O=e.nodeIndex(f),k=f.parentNode,K||O++,v=!0;break}}while(f=K?J.next():J.prev())}}}return n&&(_n(k)&&O===0&&jy(e,F,n,!0,k).each(J=>{k=J.container(),O=J.offset(),v=!0}),so(k)&&(f=k.childNodes[O],f||(f=k.childNodes[O-1]),f&&aa(f)&&!Hf(f,"A")&&!FD(e,f,!1)&&!FD(e,f,!0)&&jy(e,F,n,!0,f).each(J=>{k=J.container(),O=J.offset(),v=!0}))),K&&!n&&_n(k)&&O===k.data.length&&jy(e,F,n,!1,k).each(J=>{k=J.container(),O=J.offset(),v=!0}),v&&k?Y.some(Xt(k,O)):Y.none()},sE=(e,n)=>{const s=n.collapsed,a=n.cloneRange(),l=Xt.fromRangeStart(n);return gO(e,s,!0,a).each(f=>{(!s||!Xt.isAbove(l,f))&&a.setStart(f.container(),f.offset())}),s||gO(e,s,!1,a).each(f=>{a.setEnd(f.container(),f.offset())}),s&&a.collapse(!0),Wy(n,a)?Y.none():Y.some(a)},Iw=(e,n)=>e.splitText(n),rE=e=>{let n=e.startContainer,s=e.startOffset,a=e.endContainer,l=e.endOffset;if(n===a&&_n(n)){if(s>0&&s<n.data.length)if(a=Iw(n,s),n=a.previousSibling,l>s){l=l-s;const f=Iw(a,l).previousSibling;n=a=f,l=f.data.length,s=0}else l=0}else if(_n(n)&&s>0&&s<n.data.length&&(n=Iw(n,s),s=0),_n(a)&&l>0&&l<a.data.length){const f=Iw(a,l).previousSibling;a=f,l=f.data.length}return{startContainer:n,startOffset:s,endContainer:a,endOffset:l}},Kd=e=>({walk:(f,v)=>Uu(e,f,v),split:rE,expand:(f,v={type:"word"})=>{if(v.type==="word"){const k=Ab(e,f,[{inline:"span"}]),O=e.createRng();return O.setStart(k.startContainer,k.startOffset),O.setEnd(k.endContainer,k.endOffset),O}return f},normalize:f=>sE(e,f).fold($e,v=>(f.setStart(v.startContainer,v.startOffset),f.setEnd(v.endContainer,v.endOffset),!0))});Kd.compareRanges=Wy,Kd.getCaretRangeFromPoint=Z6,Kd.getSelectedNode=Hx,Kd.getNode=mb;const PD=((e,n)=>{const s=(k,O)=>{if(!z(O)&&!O.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+O);const F=k.dom;bf(F)&&(F.style[e]=O+"px")},a=k=>{const O=n(k);if(O<=0||O===null){const F=_r(k,e);return parseFloat(F)||0}return O},l=a,f=(k,O)=>it(O,(F,Z)=>{const K=_r(k,Z),J=K===void 0?0:parseInt(K,10);return isNaN(J)?F:F+J},0);return{set:s,get:a,getOuter:l,aggregate:f,max:(k,O,F)=>{const Z=f(k,F);return O>Z?O-Z:0}}})("height",e=>{const n=e.dom;return Zl(e)?n.getBoundingClientRect().height:n.offsetHeight}),pO=e=>PD.get(e),hO=(e,n)=>e.view(n).fold(Le([]),a=>{const l=e.owner(a),f=hO(e,l);return[a].concat(f)}),W2=(e,n)=>{const s=n.owner(e);return hO(n,s)};var q6=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?Y.none():Y.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(je.fromDom)},owner:e=>zd(e)});const aE=e=>{const n=KT(),s=_o(n),a=W2(e,q6),l=Os(e),f=An(a,(v,k)=>{const O=Os(k);return{left:v.left+O.left,top:v.top+O.top}},{left:0,top:0});return qe(f.left+l.left+s.left,f.top+l.top+s.top)},LD=e=>_e(e)==="textarea",RB=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),j2=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},MB=(e,n)=>{const s=Rl(e);if(s.length===0||LD(e))return{element:e,offset:n};if(n<s.length&&!LD(s[n]))return{element:s[n],offset:0};{const a=s[s.length-1];return LD(a)?{element:e,offset:n}:_e(a)==="img"?{element:a,offset:1}:Da(a)?{element:a,offset:y1(a).length}:{element:a,offset:Rl(a).length}}},$D=(e,n)=>{const s=Ys(e),a=pO(e);return{element:e,bottom:s.top+a,height:a,pos:s,cleanup:n}},iE=(e,n)=>{const s=MB(e,n),a=je.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Sl+"</span>");return Ji(s.element,a),$D(a,()=>Zr(a))},NB=e=>$D(je.fromDom(e),Kt),BB=(e,n,s,a)=>{Y6(e,(l,f)=>K6(e,n,s,a),s)},IB=(e,n,s,a,l)=>{const f={elm:a.element.dom,alignToTop:l};if(RB(e,f))return;const v=_o(n).top;s(e,n,v,a,l),j2(e,f)},K6=(e,n,s,a)=>{const l=je.fromDom(e.getBody()),f=je.fromDom(e.getDoc());ht(l);const v=iE(je.fromDom(s.startContainer),s.startOffset);IB(e,f,n,v,a),v.cleanup()},bO=(e,n,s,a)=>{const l=je.fromDom(e.getDoc());IB(e,l,s,NB(n),a)},Y6=(e,n,s)=>{const a=s.startContainer,l=s.startOffset,f=s.endContainer,v=s.endOffset;n(je.fromDom(a),je.fromDom(f));const k=e.dom.createRng();k.setStart(a,l),k.setEnd(f,v),e.selection.setRng(s)},vO=(e,n,s,a,l)=>{const f=n.pos;if(a)Oi(f.left,f.top,l);else{const v=f.top-s+n.height;Oi(-e.getBody().getBoundingClientRect().left,v,l)}},HD=(e,n,s,a,l,f)=>{const v=a+s,k=l.pos.top,O=l.bottom,F=O-k>=a;k<s?vO(e,l,a,f!==!1,n):k>v?vO(e,l,a,F?f!==!1:f===!0,n):O>v&&!F&&vO(e,l,a,f===!0,n)},cE=(e,n,s,a,l)=>{const f=mf(n).dom.innerHeight;HD(e,n,s,f,a,l)},FB=(e,n,s,a,l)=>{const f=mf(n).dom.innerHeight;HD(e,n,s,f,a,l);const v=aE(a.element),k=nh(window);v.top<k.y?Xa(a.element,l!==!1):v.top>k.bottom&&Xa(a.element,l===!0)},X6=(e,n,s)=>BB(e,cE,n,s),zD=(e,n,s)=>bO(e,n,cE,s),J6=(e,n,s)=>BB(e,FB,n,s),PB=(e,n,s)=>bO(e,n,FB,s),LB=(e,n,s)=>{(e.inline?zD:PB)(e,n,s)},Fw=(e,n,s)=>{(e.inline?X6:J6)(e,n,s)},$B=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),Pw=(e,n,s,a,l)=>{const f=s?n.startContainer:n.endContainer,v=s?n.startOffset:n.endOffset;return Y.from(f).map(je.fromDom).map(k=>!a||!n.collapsed?om(k,l(k,v)).getOr(k):k).bind(k=>nr(k)?Y.some(k):jl(k).filter(nr)).map(k=>k.dom).getOr(e)},HB=(e,n,s=!1)=>Pw(e,n,!0,s,(a,l)=>Math.min(Hm(a),l)),zB=(e,n,s=!1)=>Pw(e,n,!1,s,(a,l)=>l>0?l-1:l),Z2=(e,n)=>{const s=e;for(;e&&_n(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||s},VB=(e,n)=>{if(!n)return e;let s=n.startContainer,a=n.endContainer;const l=n.startOffset,f=n.endOffset;let v=n.commonAncestorContainer;n.collapsed||(s===a&&f-l<2&&s.hasChildNodes()&&(v=s.childNodes[l]),_n(s)&&_n(a)&&(s.length===l?s=Z2(s.nextSibling,!0):s=s.parentNode,f===0?a=Z2(a.previousSibling,!1):a=a.parentNode,s&&s===a&&(v=s)));const k=_n(v)?v.parentNode:v;return Qu(k)?k:e},UB=(e,n,s,a)=>{const l=[],f=e.getRoot(),v=e.getParent(s||HB(f,n,n.collapsed),e.isBlock),k=e.getParent(a||zB(f,n,n.collapsed),e.isBlock);if(v&&v!==f&&l.push(v),v&&k&&v!==k){let O;const F=new ru(v,f);for(;(O=F.next())&&O!==k;)e.isBlock(O)&&l.push(O)}return k&&v!==k&&k!==f&&l.push(k),l},WB=(e,n,s)=>Y.from(n).bind(a=>Y.from(a.parentNode).map(l=>{const f=e.nodeIndex(a),v=e.createRng();return v.setStart(l,f),v.setEnd(l,f+1),s&&(F2(e,v,a,!0),F2(e,v,a,!1)),v})),yO=(e,n)=>Ne(n,s=>{const a=e.dispatch("GetSelectionRange",{range:s});return a.range!==s?a.range:s}),Q6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},xO=(e,n,s)=>{const a=s?"lastChild":"firstChild",l=s?"prev":"next";if(e[a])return e[a];if(e!==n){let f=e[l];if(f)return f;for(let v=e.parent;v&&v!==n;v=v.parent)if(f=v[l],f)return f}},VD=e=>{var n;const s=(n=e.value)!==null&&n!==void 0?n:"";if(!Ju(s))return!1;const a=e.parent;return!(a&&(a.name!=="span"||a.attr("style"))&&/^[ ]+$/.test(s))},G2=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class xm{static create(n,s){const a=new xm(n,Q6[n]||1);return s&&vn(s,(l,f)=>{a.attr(f,l)}),a}constructor(n,s){this.name=n,this.type=s,s===1&&(this.attributes=[],this.attributes.map={})}replace(n){const s=this;return n.parent&&n.remove(),s.insert(n,s),s.remove(),s}attr(n,s){const a=this;if(!ue(n))return Qe(n)&&vn(n,(f,v)=>{a.attr(v,f)}),a;const l=a.attributes;if(l){if(s!==void 0){if(s===null){if(n in l.map){delete l.map[n];let f=l.length;for(;f--;)if(l[f].name===n)return l.splice(f,1),a}return a}if(n in l.map){let f=l.length;for(;f--;)if(l[f].name===n){l[f].value=s;break}}else l.push({name:n,value:s});return l.map[n]=s,a}return l.map[n]}}clone(){const n=this,s=new xm(n.name,n.type),a=n.attributes;if(a){const l=[];l.map={};for(let f=0,v=a.length;f<v;f++){const k=a[f];k.name!=="id"&&(l[l.length]={name:k.name,value:k.value},l.map[k.name]=k.value)}s.attributes=l}return s.value=n.value,s}wrap(n){const s=this;return s.parent&&(s.parent.insert(n,s),n.append(s)),s}unwrap(){const n=this;for(let s=n.firstChild;s;){const a=s.next;n.insert(s,n,!0),s=a}n.remove()}remove(){const n=this,s=n.parent,a=n.next,l=n.prev;return s&&(s.firstChild===n?(s.firstChild=a,a&&(a.prev=null)):l&&(l.next=a),s.lastChild===n?(s.lastChild=l,l&&(l.next=null)):a&&(a.prev=l),n.parent=n.next=n.prev=null),n}append(n){const s=this;n.parent&&n.remove();const a=s.lastChild;return a?(a.next=n,n.prev=a,s.lastChild=n):s.lastChild=s.firstChild=n,n.parent=s,n}insert(n,s,a){n.parent&&n.remove();const l=s.parent||this;return a?(s===l.firstChild?l.firstChild=n:s.prev&&(s.prev.next=n),n.prev=s.prev,n.next=s,s.prev=n):(s===l.lastChild?l.lastChild=n:s.next&&(s.next.prev=n),n.next=s.next,n.prev=s,s.next=n),n.parent=l,n}getAll(n){const s=this,a=[];for(let l=s.firstChild;l;l=xO(l,s))l.name===n&&a.push(l);return a}children(){const n=this,s=[];for(let a=n.firstChild;a;a=a.next)s.push(a);return s}empty(){const n=this;if(n.firstChild){const s=[];for(let l=n.firstChild;l;l=xO(l,n))s.push(l);let a=s.length;for(;a--;){const l=s[a];l.parent=l.firstChild=l.lastChild=l.next=l.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,s={},a){var l;const f=this;let v=f.firstChild;if(G2(f))return!1;if(v)do{if(v.type===1){if(v.attr("data-mce-bogus"))continue;if(n[v.name]||G2(v))return!1}if(v.type===8||v.type===3&&!VD(v)||v.type===3&&v.parent&&s[v.parent.name]&&Ju((l=v.value)!==null&&l!==void 0?l:"")||a&&a(v))return!1}while(v=xO(v,f));return!0}walk(n){return xO(this,null,n)}}const lE=bn.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),UD=e=>ue(e.nodeValue)&&e.nodeValue.includes(Sl),uE=e=>`${e.length===0?"":`${Ne(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,wO=(e,n)=>n.querySelectorAll(uE(e)),Eh=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>UD(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),_h=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(UD(n)){const s=n.parentNode;return s&&Lo(lE,s.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),jB=e=>Eh(e).nextNode()!==null,Zy=e=>_h(e).nextNode()!==null,WD=(e,n)=>n.querySelector(uE(e))!==null,ZB=(e,n)=>{oe(wO(e,n),s=>{const a=je.fromDom(s);pl(a,"data-mce-bogus")==="all"?Zr(a):oe(e,l=>{Bc(a,l)&&tr(a,l)})})},q2=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},GB=B(q2,Eh),Tl=B(q2,_h),qB=(e,n)=>{const s=[{condition:Se(WD,n),action:Se(ZB,n)},{condition:jB,action:GB},{condition:Zy,action:Tl}];let a=e,l=!1;return oe(s,({condition:f,action:v})=>{f(a)&&(l||(a=e.cloneNode(!0),l=!0),v(a))}),a},KB=e=>{const n=ll(e,"[data-mce-bogus]");oe(n,s=>{pl(s,"data-mce-bogus")==="all"?Zr(s):_u(s)?(Ji(s,je.fromText(Og)),Zr(s)):Su(s)})},Lw=e=>{const n=ll(e,"input");oe(n,s=>{tr(s,"name")})},$w=(e,n)=>{const s=Pl(e),a=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${s}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(a,"")},K2=(e,n)=>{const s=e.getDoc(),a=Vd(je.fromDom(e.getBody())),l=je.fromTag("div",s);Pi(l,"data-mce-bogus","all"),Ws(l,{position:"fixed",left:"-9999999px",top:"0"}),am(l,n.innerHTML),KB(l),Lw(l);const f=$0(a);va(f,l);const v=Nl(l.dom.innerText);return Zr(l),v},CO=(e,n,s)=>{let a;return n.format==="raw"?a=bn.trim(Nl(qB(s,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?a=K2(e,s):n.format==="tree"?a=e.serializer.serialize(s,n):a=$w(e,e.serializer.serialize(s,n)),n.format!=="text"&&!jm(je.fromDom(s))&&ue(a)?bn.trim(a):a},SO=(e,n)=>Y.from(e.getBody()).fold(Le(n.format==="tree"?new xm("body",11):""),s=>CO(e,n,s)),jD=bn.makeMap,ZD=e=>{const n=[];e=e||{};const s=e.indent,a=jD(e.indent_before||""),l=jD(e.indent_after||""),f=ah.getEncodeFunc(e.entity_encoding||"raw",e.entities),v=e.element_format!=="xhtml";return{start:(k,O,F)=>{if(s&&a[k]&&n.length>0){const Z=n[n.length-1];Z.length>0&&Z!==`
`&&n.push(`
`)}if(n.push("<",k),O)for(let Z=0,K=O.length;Z<K;Z++){const J=O[Z];n.push(" ",J.name,'="',f(J.value,!0),'"')}if(!F||v?n[n.length]=">":n[n.length]=" />",F&&s&&l[k]&&n.length>0){const Z=n[n.length-1];Z.length>0&&Z!==`
`&&n.push(`
`)}},end:k=>{let O;n.push("</",k,">"),s&&l[k]&&n.length>0&&(O=n[n.length-1],O.length>0&&O!==`
`&&n.push(`
`))},text:(k,O)=>{k.length>0&&(n[n.length]=O?k:f(k))},cdata:k=>{n.push("<![CDATA[",k,"]]>")},comment:k=>{n.push("<!--",k,"-->")},pi:(k,O)=>{O?n.push("<?",k," ",f(O),"?>"):n.push("<?",k,"?>"),s&&n.push(`
`)},doctype:k=>{n.push("<!DOCTYPE",k,">",s?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Gy=(e={},n=ya())=>{const s=ZD(e);return e.validate="validate"in e?e.validate:!0,{serialize:l=>{const f=e.validate,v={3:O=>{var F;s.text((F=O.value)!==null&&F!==void 0?F:"",O.raw)},8:O=>{var F;s.comment((F=O.value)!==null&&F!==void 0?F:"")},7:O=>{s.pi(O.name,O.value)},10:O=>{var F;s.doctype((F=O.value)!==null&&F!==void 0?F:"")},4:O=>{var F;s.cdata((F=O.value)!==null&&F!==void 0?F:"")},11:O=>{let F=O;if(F=F.firstChild)do k(F);while(F=F.next)}};s.reset();const k=O=>{var F;const Z=v[O.type];if(Z)Z(O);else{const K=O.name,J=K in n.getVoidElements();let de=O.attributes;if(f&&de&&de.length>1){const Te=[];Te.map={};const be=n.getElementRule(O.name);if(be){for(let Me=0,Xe=be.attributesOrder.length;Me<Xe;Me++){const gt=be.attributesOrder[Me];if(gt in de.map){const bt=de.map[gt];Te.map[gt]=bt,Te.push({name:gt,value:bt})}}for(let Me=0,Xe=de.length;Me<Xe;Me++){const gt=de[Me].name;if(!(gt in Te.map)){const bt=de.map[gt];Te.map[gt]=bt,Te.push({name:gt,value:bt})}}de=Te}}if(s.start(K,de,J),Ea(K))ue(O.value)&&s.text(O.value,!0),s.end(K);else if(!J){let Te=O.firstChild;if(Te){(K==="pre"||K==="textarea")&&Te.type===3&&((F=Te.value)===null||F===void 0?void 0:F[0])===`
`&&s.text(`
`,!0);do k(Te);while(Te=Te.next)}s.end(K)}}};return l.type===1&&!e.inner?k(l):l.type===3?v[3](l):v[11](l),s.getContent()}}},YB=new Set;oe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{YB.add(n)});const GD=new Set;oe(["background-color"],n=>{GD.add(n)});const qD=["font","text-decoration","text-emphasis"],dE=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Hw=(e,n)=>ns(dE(e,n)),XB=e=>YB.has(e),JB=e=>GD.has(e),KD=(e,n)=>De(Hw(e,n),s=>XB(s)),QB=(e,n)=>KD(e,n)&&De(Hw(e,n),s=>JB(s)),eI=e=>dt(e,n=>De(qD,s=>cs(n,s))),tI=(e,n,s)=>{const a=Hw(e,n),l=Hw(e,s),f=v=>{var k,O;const F=(k=e.getStyle(n,v))!==null&&k!==void 0?k:"",Z=(O=e.getStyle(s,v))!==null&&O!==void 0?O:"";return Bs(F)&&Bs(Z)&&F!==Z};return De(a,v=>{const k=O=>De(O,F=>F===v);if(!k(l)&&k(qD)){const O=eI(l);return De(O,f)}else return f(v)})},YD=(e,n,s)=>Y.from(s.container()).filter(_n).exists(a=>{const l=e?0:-1;return n(a.data.charAt(s.offset()+l))}),kO=Se(YD,!0,Sh),mE=Se(YD,!1,Sh),gE=e=>{const n=e.container();return _n(n)&&(n.data.length===0||Wk(n.data)&&id.isBookmarkNode(n.parentNode))},d0=(e,n)=>s=>A2(e?0:-1,s).filter(n).isSome(),rs=e=>Ja(e)&&_r(je.fromDom(e),"display")==="block",Y2=e=>ia(e)&&!o1(e),nI=d0(!0,rs),e8=d0(!1,rs),_p=d0(!0,Kc),zw=d0(!1,Kc),XD=d0(!0,rg),Vw=d0(!1,rg),m0=d0(!0,Y2),U1=d0(!1,Y2),fE=e=>e.slice(0,-1),JD=(e,n,s)=>Xi(n,e)?fE(eh(e,a=>s(a)||Lr(a,n))):[],QD=(e,n)=>JD(e,n,$e),W1=(e,n)=>[e].concat(QD(e,n)),Hs=(e,n,s)=>kp(e,n,s,gE),oI=e=>n=>e.isBlock(_e(n)),zs=(e,n,s)=>hn(W1(je.fromDom(n.container()),e),oI(s)),Md=(e,n,s,a)=>Hs(e,n.dom,s).forall(l=>zs(n,s,a).fold(()=>!Mf(l,s,n.dom),f=>!Mf(l,s,n.dom)&&Xi(f,je.fromDom(l.container())))),TO=(e,n,s,a)=>zs(n,s,a).fold(()=>Hs(e,n.dom,s).forall(l=>!Mf(l,s,n.dom)),l=>Hs(e,l.dom,s).isNone()),qy=Se(TO,!1),eR=Se(TO,!0),zf=Se(Md,!1),X2=Se(Md,!0),sI=e=>Ry(e).exists(_u),pE=(e,n,s,a)=>{const l=dt(W1(je.fromDom(s.container()),n),v=>a.isBlock(_e(v))),f=Gt(l).getOr(n);return ad(e,f.dom,s).filter(sI)},Ms=(e,n,s)=>Ry(n).exists(_u)||pE(!0,e,n,s).isSome(),Ky=(e,n,s)=>ur(n).exists(_u)||pE(!1,e,n,s).isSome(),EO=Se(pE,!1),rI=Se(pE,!0),Yy=e=>Xt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),hE=(e,n,s)=>{const a=dt(W1(je.fromDom(n.container()),e),l=>s.isBlock(_e(l)));return Gt(a).getOr(e)},tR=(e,n,s)=>Yy(n)?mE(n):mE(n)||Ou(hE(e,n,s).dom,n).exists(mE),Ah=(e,n,s)=>Yy(n)?kO(n):kO(n)||Vi(hE(e,n,s).dom,n).exists(kO),nR=e=>ce(["pre","pre-wrap"],e),Uw=e=>Ry(e).bind(n=>oa(n,nr)).exists(n=>nR(_r(n,"white-space"))),oR=(e,n)=>Ou(e.dom,n).isNone(),t8=(e,n)=>Vi(e.dom,n).isNone(),n8=(e,n,s)=>oR(e,n)||t8(e,n)||qy(e,n,s)||eR(e,n,s)||Ky(e,n,s)||Ms(e,n,s),aI=e=>Qe(e)&&ia(e)&&ts(e),iI=(e,n)=>s=>aI(new ru(s,e)[n]()),o8=(e,n)=>{const s=Vi(e.dom,n).getOr(n),a=iI(e.dom,"next");return n.isAtEnd()&&(a(n.container())||a(s.container()))},cI=(e,n)=>{const s=Ou(e.dom,n).getOr(n),a=iI(e.dom,"prev");return n.isAtStart()&&(a(n.container())||a(s.container()))},_O=(e,n,s)=>Uw(n)?!1:n8(e,n,s)||tR(e,n,s)||Ah(e,n,s),Ww=(e,n,s)=>Uw(n)?!1:qy(e,n,s)||zf(e,n,s)||Ky(e,n,s)||tR(e,n,s)||cI(e,n),dr=e=>{const n=e.container(),s=e.offset();return _n(n)&&s<n.data.length?Xt(n,s+1):e},jw=(e,n,s)=>Uw(n)?!1:eR(e,n,s)||X2(e,n,s)||Ms(e,n,s)||Ah(e,n,s)||o8(e,n),Xy=(e,n,s)=>Ww(e,n,s)||jw(e,dr(n),s),AO=(e,n)=>a0(e.charAt(n)),OO=(e,n)=>Sh(e.charAt(n)),DO=e=>{const n=e.container();return _n(n)&&Vo(n.data,wc)},sR=e=>{const n=e.split("");return Ne(n,(s,a)=>a0(s)&&a>0&&a<n.length-1&&fw(n[a-1])&&fw(n[a+1])?" ":s).join("")},RO=(e,n,s,a)=>{const l=n.data,f=Xt(n,0);return!s&&AO(l,0)&&!Xy(e,f,a)?(n.data=" "+l.slice(1),!0):s&&OO(l,0)&&Ww(e,f,a)?(n.data=wc+l.slice(1),!0):!1},lI=e=>{const n=e.data,s=sR(n);return s!==n?(e.data=s,!0):!1},bE=(e,n,s,a)=>{const l=n.data,f=Xt(n,l.length-1);return!s&&AO(l,l.length-1)&&!Xy(e,f,a)?(n.data=l.slice(0,-1)+" ",!0):s&&OO(l,l.length-1)&&jw(e,f,a)?(n.data=l.slice(0,-1)+wc,!0):!1},s8=(e,n,s)=>{const a=n.container();if(!_n(a))return Y.none();if(DO(n)){const l=RO(e,a,!1,s)||lI(a)||bE(e,a,!1,s);return ou(l,n)}else if(Xy(e,n,s)){const l=RO(e,a,!0,s)||bE(e,a,!0,s);return ou(l,n)}else return Y.none()},MO=e=>{const n=je.fromDom(e.getBody());e.selection.isCollapsed()&&s8(n,Xt.fromRangeStart(e.selection.getRng()),e.schema).each(s=>{e.selection.setRng(s.toRange())})},rR=(e,n,s,a)=>{if(s===0)return;const l=je.fromDom(e),f=Yu(l,F=>a.isBlock(_e(F))).getOr(l),v=e.data.slice(n,n+s),k=n+s>=e.data.length&&jw(f,Xt(e,e.data.length),a),O=n===0&&Ww(f,Xt(e,0),a);e.replaceData(n,s,Ud(v,4,O,k))},vE=(e,n,s)=>{const a=e.data.slice(n),l=a.length-Al(a).length;rR(e,n,l,s)},aR=(e,n,s)=>{const a=e.data.slice(0,n),l=a.length-La(a).length;rR(e,n-l,l,s)},iR=(e,n,s,a,l=!0)=>{const f=La(e.data).length,v=l?e:n,k=l?n:e;return l?v.appendData(k.data):v.insertData(0,k.data),Zr(je.fromDom(k)),a&&vE(v,f,s),v},uI=(e,n)=>{const s=e.container(),a=e.offset();return!Xt.isTextPosition(e)&&s===n.parentNode&&a>Xt.before(n).offset()},r8=(e,n)=>uI(n,e)?Xt(n.container(),n.offset()-1):n,NO=e=>_n(e)?Xt(e,0):Xt.before(e),cR=e=>_n(e)?Xt(e,e.data.length):Xt.after(e),dI=e=>Hg(e.previousSibling)?Y.some(cR(e.previousSibling)):e.previousSibling?Ma(e.previousSibling):Y.none(),mI=e=>Hg(e.nextSibling)?Y.some(NO(e.nextSibling)):e.nextSibling?kl(e.nextSibling):Y.none(),Qc=(e,n)=>Y.from(n.previousSibling?n.previousSibling:n.parentNode).bind(s=>Ou(e,Xt.before(s))).orThunk(()=>Vi(e,Xt.after(n))),lR=(e,n)=>Vi(e,Xt.after(n)).orThunk(()=>Ou(e,Xt.before(n))),a8=(e,n)=>dI(n).orThunk(()=>mI(n)).orThunk(()=>Qc(e,n)),i8=(e,n)=>mI(n).orThunk(()=>dI(n)).orThunk(()=>lR(e,n)),J2=(e,n,s)=>e?i8(n,s):a8(n,s),Jy=(e,n,s)=>J2(e,n,s).map(Se(r8,s)),Ib=(e,n,s)=>{s.fold(()=>{e.focus()},a=>{e.selection.setRng(a.toRange(),n)})},gI=e=>n=>n.dom===e,fI=(e,n)=>n&&Lo(e.schema.getBlockElements(),_e(n)),Qy=(e,n,s)=>{if(yl(e,n)){const a=je.fromHtml('<br data-mce-bogus="1">');return s?oe(Rl(n),l=>{Na(l)||Zr(l)}):rm(n),va(n,a),Y.some(Xt.before(a.dom))}else return Y.none()},BO=(e,n,s,a)=>{const l=rl(e).filter(Da),f=ps(e).filter(Da);return Zr(e),cr(l,f,n,(v,k,O)=>{const F=v.dom,Z=k.dom,K=F.data.length;return iR(F,Z,s,a),O.container()===Z?Xt(F,K):O}).orThunk(()=>(a&&(l.each(v=>aR(v.dom,v.dom.length,s)),f.each(v=>vE(v.dom,0,s))),n))},pI=(e,n)=>Lo(e.schema.getTextInlineElements(),_e(n)),g0=(e,n,s,a=!0,l=!1)=>{const f=Jy(n,e.getBody(),s.dom),v=Yu(s,Se(fI,e),gI(e.getBody())),k=BO(s,f,e.schema,pI(e,s));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):v.bind(O=>Qy(e.schema,O,l)).fold(()=>{a&&Ib(e,n,k)},O=>{a&&Ib(e,n,Y.some(O))})},hI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,uR=e=>hI.test(e),j1=(e,n)=>ga(je.fromDom(n),hm(e))&&!yf(e.schema,n)&&e.dom.isEditable(n),IO=e=>{var n;return qs.DOM.getStyle(e,"direction",!0)==="rtl"||uR((n=e.textContent)!==null&&n!==void 0?n:"")},FO=(e,n,s)=>dt(qs.DOM.getParents(s.container(),"*",n),e),fu=(e,n,s)=>{const a=FO(e,n,s);return Y.from(a[a.length-1])},c8=(e,n,s)=>{const a=xh(n,e),l=xh(s,e);return Qe(a)&&a===l},Vf=e=>oy(e)||lb(e),Uf=(e,n)=>{const s=n.container(),a=n.offset();return e?dh(s)?_n(s.nextSibling)?Xt(s.nextSibling,0):Xt.after(s):oy(n)?Xt(s,a+1):n:dh(s)?_n(s.previousSibling)?Xt(s.previousSibling,s.previousSibling.data.length):Xt.before(s):lb(n)?Xt(s,a-1):n},bI=Se(Uf,!0),vI=Se(Uf,!1),Fb=(e,n)=>{const s=a=>a.stopImmediatePropagation();e.on("beforeinput input",s,!0),e.getDoc().execCommand(n),e.off("beforeinput input",s)},l8=e=>{e.execCommand("delete")},PO=e=>Fb(e,"Delete"),cc=e=>Fb(e,"ForwardDelete"),Q2=e=>n=>fl(jl(n),e,Lr),yE=e=>Fg(e)||cb(e),LO=(e,n)=>Xi(e,n)?oa(n,yE,Q2(e)):Y.none(),Oh=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},Xg=(e,n,s)=>Ii(kl(s),Ma(s),(a,l)=>{const f=Uf(!0,a),v=Uf(!1,l),k=Uf(!1,n);return e?Vi(s,k).exists(O=>O.isEqual(v)&&n.isEqual(f)):Ou(s,k).exists(O=>O.isEqual(f)&&n.isEqual(v))}).getOr(!0),Zw=e=>(Ko(e)?rl(e):bl(e)).bind(Zw).orThunk(()=>Y.some(e)),ei=(e,n,s,a=!0)=>{var l;n.deleteContents();const f=Zw(s).getOr(s),v=je.fromDom((l=e.dom.getParent(f.dom,e.dom.isBlock))!==null&&l!==void 0?l:s.dom);if(v.dom===e.getBody()?Oh(e,a):yl(e.schema,v,{checkRootAsContent:!1})&&(ch(v),a&&e.selection.setCursorLocation(v.dom,0)),!Lr(s,v)){const k=fl(jl(v),s)?[]:Tg(v);oe(k.concat(Rl(s)),O=>{!Lr(O,v)&&!Xi(O,v)&&yl(e.schema,O)&&Zr(O)})}},eS=e=>n=>Lr(e,n),ex=e=>ll(e,"td,th"),$O=(e,n)=>Iy(je.fromDom(e),n),xE=e=>Ii(e.startTable,e.endTable,(n,s)=>{const a=xc(n,f=>Lr(f,s)),l=xc(s,f=>Lr(f,n));return!a&&!l?e:{...e,startTable:a?Y.none():e.startTable,endTable:l?Y.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),HO=e=>xE(e),dR=(e,n)=>{const s=$O(e.startContainer,n),a=$O(e.endContainer,n),l=s.isSome(),f=a.isSome(),v=Ii(s,a,Lr).getOr(!1);return HO({startTable:s,endTable:a,isStartInTable:l,isEndInTable:f,isSameTable:v,isMultiTable:!v&&l&&f})},Jg=(e,n)=>({start:e,end:n}),wE=(e,n,s)=>({rng:e,table:n,cells:s}),tx=mg.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),tS=(e,n)=>wo(je.fromDom(e),"td,th",n),Yr=e=>!Lr(e.start,e.end),mR=(e,n)=>Iy(e.start,n).bind(s=>Iy(e.end,n).bind(a=>ou(Lr(s,a),s))),nS=(e,n)=>!Yr(e)&&mR(e,n).exists(s=>{const a=s.dom.rows;return a.length===1&&a[0].cells.length===1}),yI=(e,n)=>{const s=tS(e.startContainer,n),a=tS(e.endContainer,n);return Ii(s,a,Jg)},gR=e=>n=>Iy(n,e).bind(s=>yo(ex(s)).map(a=>Jg(n,a))),Ap=e=>n=>Iy(n,e).bind(s=>Gt(ex(s)).map(a=>Jg(a,n))),Yd=e=>n=>mR(n,e).map(s=>wE(n,s,ex(s))),CE=(e,n,s,a)=>{if(s.collapsed||!e.forall(Yr))return Y.none();if(n.isSameTable){const l=e.bind(Yd(a));return Y.some({start:l,end:l})}else{const l=tS(s.startContainer,a),f=tS(s.endContainer,a),v=l.bind(gR(a)).bind(Yd(a)),k=f.bind(Ap(a)).bind(Yd(a));return Y.some({start:v,end:k})}},oS=(e,n)=>Hn(e,s=>Lr(s,n)),Z1=e=>Ii(oS(e.cells,e.rng.start),oS(e.cells,e.rng.end),(n,s)=>e.cells.slice(n,s+1)),Pb=(e,n,s)=>e.exists(a=>nS(a,s)&&vw(a.start,n)),Gw=(e,n)=>{const{startTable:s,endTable:a}=n,l=e.cloneRange();return s.each(f=>l.setStartAfter(f.dom)),a.each(f=>l.setEndBefore(f.dom)),l},zO=(e,n,s,a)=>CE(e,n,s,a).bind(({start:l,end:f})=>l.or(f)).bind(l=>{const{isSameTable:f}=n,v=Z1(l).getOr([]);if(f&&l.cells.length===v.length)return Y.some(tx.fullTable(l.table));if(v.length>0){if(f)return Y.some(tx.partialTable(v,Y.none()));{const k=Gw(s,n);return Y.some(tx.partialTable(v,Y.some({...n,rng:k})))}}else return Y.none()}),sS=(e,n,s,a)=>CE(e,n,s,a).bind(({start:l,end:f})=>{const v=l.bind(Z1).getOr([]),k=f.bind(Z1).getOr([]);if(v.length>0&&k.length>0){const O=Gw(s,n);return Y.some(tx.multiTable(v,k,O))}else return Y.none()}),fR=(e,n)=>{const s=eS(e),a=yI(n,s),l=dR(n,s);return Pb(a,n,s)?a.map(f=>tx.singleCellTable(n,f.start)):l.isMultiTable?sS(a,l,n,s):zO(a,l,n,s)},VO=e=>oe(e,n=>{tr(n,"contenteditable"),ch(n)}),xI=(e,n)=>Y.from(e.dom.getParent(n,e.dom.isBlock)).map(je.fromDom),wI=(e,n,s)=>{s.each(a=>{n?Zr(a):(ch(a),e.selection.setCursorLocation(a.dom,0))})},SE=(e,n,s,a)=>{const l=s.cloneRange();a?(l.setStart(s.startContainer,s.startOffset),l.setEndAfter(n.dom.lastChild)):(l.setStartBefore(n.dom.firstChild),l.setEnd(s.endContainer,s.endOffset)),rS(e,l,n,!1).each(f=>f())},UO=e=>{const n=L1(e),s=je.fromDom(e.selection.getNode());tn(s.dom)&&yl(e.schema,s)?e.selection.setCursorLocation(s.dom,0):e.selection.collapse(!0),n.length>1&&De(n,a=>Lr(a,s))&&Pi(s,"data-mce-selected","1")},WO=(e,n,s)=>Y.some(()=>{const a=e.selection.getRng(),l=s.bind(({rng:f,isStartInTable:v})=>{const k=xI(e,v?f.endContainer:f.startContainer);f.deleteContents(),wI(e,v,k.filter(Se(yl,e.schema)));const O=v?n[0]:n[n.length-1];return SE(e,O,a,v),yl(e.schema,O)?Y.none():Y.some(v?n.slice(1):n.slice(0,-1))}).getOr(n);VO(l),UO(e)}),pR=(e,n,s,a)=>Y.some(()=>{const l=e.selection.getRng(),f=n[0],v=s[s.length-1];SE(e,f,l,!0),SE(e,v,l,!1);const k=yl(e.schema,f)?n:n.slice(1),O=yl(e.schema,v)?s:s.slice(0,-1);VO(k.concat(O)),a.deleteContents(),UO(e)}),rS=(e,n,s,a=!0)=>Y.some(()=>{ei(e,n,s,a)}),CI=(e,n)=>Y.some(()=>g0(e,!1,n)),hR=(e,n,s)=>fR(n,s).bind(a=>a.fold(Se(rS,e),Se(CI,e),Se(WO,e),Se(pR,e))),SI=(e,n)=>TE(e,n),Lb=(e,n,s,a)=>kE(n,a).fold(()=>hR(e,n,s),l=>SI(e,l)),aS=(e,n,s)=>{const a=je.fromDom(e.getBody()),l=e.selection.getRng();return s.length!==0?WO(e,s,Y.none()):Lb(e,a,l,n)},jO=(e,n)=>hn(W1(n,e),Px),kE=(e,n)=>hn(W1(n,e),Ol("caption")),bR=(e,n,s,a,l)=>r0(s,e.getBody(),l).bind(f=>jO(n,je.fromDom(f.getNode())).bind(v=>Lr(v,a)?Y.none():Y.some(Kt))),TE=(e,n)=>Y.some(()=>{ch(n),e.selection.setCursorLocation(n.dom,0)}),G1=(e,n,s,a)=>kl(e.dom).bind(l=>Ma(e.dom).map(f=>n?s.isEqual(l)&&a.isEqual(f):s.isEqual(f)&&a.isEqual(l))).getOr(!0),ZO=(e,n)=>TE(e,n),kI=(e,n,s)=>kE(e,je.fromDom(s.getNode())).fold(()=>Y.some(Kt),a=>ou(!Lr(a,n),Kt)),u8=(e,n,s,a,l)=>r0(s,e.getBody(),l).fold(()=>Y.some(Kt),f=>G1(a,s,l,f)?ZO(e,a):kI(n,a,f)),TI=(e,n,s,a)=>{const l=Xt.fromRangeStart(e.selection.getRng());return jO(s,a).bind(f=>yl(e.schema,f,{checkRootAsContent:!1})?TE(e,f):bR(e,s,n,f,l))},GO=(e,n,s,a)=>{const l=Xt.fromRangeStart(e.selection.getRng());return yl(e.schema,a)?TE(e,a):u8(e,s,n,a,l)},qO=(e,n)=>e?XD(n):Vw(n),EE=(e,n)=>{const s=Xt.fromRangeStart(e.selection.getRng());return qO(n,s)||ad(n,e.getBody(),s).exists(a=>qO(n,a))},vR=(e,n,s)=>{const a=je.fromDom(e.getBody());return kE(a,s).fold(()=>TI(e,n,a,s).orThunk(()=>ou(EE(e,n),Kt)),l=>GO(e,n,a,l))},KO=(e,n)=>{const s=je.fromDom(e.selection.getStart(!0)),a=L1(e);return e.selection.isCollapsed()&&a.length===0?vR(e,n,s):aS(e,s,a)},Qg=(e,n)=>{let s=n;for(;s&&s!==e;){if(dn(s)||ia(s))return s;s=s.parentNode}return null},yR=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],qw=bn.each,q1=e=>{const n=e.dom,s=new Set(e.serializer.getTempAttrs()),a=(f,v)=>{if(f.nodeName!==v.nodeName||f.nodeType!==v.nodeType)return!1;const k=F=>{const Z={};return qw(n.getAttribs(F),K=>{const J=K.nodeName.toLowerCase();J!=="style"&&!l(J)&&(Z[J]=n.getAttrib(F,J))}),Z},O=(F,Z)=>{for(const K in F)if(Lo(F,K)){const J=Z[K];if(oo(J)||F[K]!==J)return!1;delete Z[K]}for(const K in Z)if(Lo(Z,K))return!1;return!0};return so(f)&&so(v)&&(!O(k(f),k(v))||!O(n.parseStyle(n.getAttrib(f,"style")),n.parseStyle(n.getAttrib(v,"style"))))?!1:!Dd(f)&&!Dd(v)},l=f=>De(yR,v=>cs(f,v))||s.has(f);return{compare:a,isAttributeInternal:l}},ef=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),nx=e=>e.name==="summary",YO=(e,n)=>{let s=e;for(;s=s.walk();)n(s)},_E=(e,n,s,a)=>{const l=s.name;for(let f=0,v=e.length;f<v;f++){const k=e[f];if(k.name===l){const O=a.nodes[l];O?O.nodes.push(s):a.nodes[l]={filter:k,nodes:[s]}}}if(s.attributes)for(let f=0,v=n.length;f<v;f++){const k=n[f],O=k.name;if(O in s.attributes.map){const F=a.attributes[O];F?F.nodes.push(s):a.attributes[O]={filter:k,nodes:[s]}}}},ox=(e,n,s)=>{const a={nodes:{},attributes:{}};return s.firstChild&&YO(s,l=>{_E(e,n,l,a)}),a},f0=(e,n)=>{const s=(a,l)=>{vn(a,f=>{const v=gr(f.nodes);oe(f.filter.callbacks,k=>{for(let O=v.length-1;O>=0;O--){const F=v[O];(!(l?F.attr(f.filter.name)!==void 0:F.name===f.filter.name)||qn(F.parent))&&v.splice(O,1)}v.length>0&&k(v,f.filter.name,n)})})};s(e.nodes,!1),s(e.attributes,!0)},iS=(e,n,s,a={})=>{const l=ox(e,n,s);f0(l,a)},cS=(e,n,s,a)=>{if((e.pad_empty_with_br||n.insert)&&s(a)){const f=new xm("br",1);n.insert&&f.attr("data-mce-bogus","1"),a.empty().append(f)}else a.empty().append(new xm("#text",3)).value=wc},p0=e=>{var n;return K1(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===wc},K1=(e,n)=>{const s=e==null?void 0:e.firstChild;return Qe(s)&&s===e.lastChild&&s.name===n},EI=(e,n)=>{const s=e.getElementRule(n.name);return(s==null?void 0:s.paddEmpty)===!0},Hl=(e,n,s,a)=>a.isEmpty(n,s,l=>EI(e,l)),_I=(e,n)=>Qe(e)&&(n(e)||e.name==="br"),lS=e=>{let n;for(let s=e;s;s=s.parent){const a=s.attr("contenteditable");if(a==="false")break;a==="true"&&(n=s)}return Y.from(n)},Dh=(e,n,s=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const a=e.children();for(const l of a)s&&!n.isValidChild(s.name,l.name)&&Dh(l,n,s);e.unwrap()}},da=(e,n,s,a=Kt)=>{const l=n.getTextBlockElements(),f=n.getNonEmptyElements(),v=n.getWhitespaceElements(),k=bn.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),O=new Set,F=Z=>Z!==s&&!k[Z.name];for(let Z=0;Z<e.length;Z++){const K=e[Z];let J,de,Te;if(!K.parent||O.has(K))continue;if(l[K.name]&&K.parent.name==="li"){let Me=K.next;for(;Me&&l[Me.name];){Me.name="li",O.add(Me),K.parent.insert(Me,K.parent);Me=Me.next}K.unwrap();continue}const be=[K];for(J=K.parent;J&&!n.isValidChild(J.name,K.name)&&F(J);J=J.parent)be.push(J);if(J&&be.length>1)if(uS(n,K,J))Dh(K,n);else{be.reverse(),de=be[0].clone(),a(de);let Me=de;for(let Xe=0;Xe<be.length-1;Xe++){n.isValidChild(Me.name,be[Xe].name)&&Xe>0?(Te=be[Xe].clone(),a(Te),Me.append(Te)):Te=Me;for(let gt=be[Xe].firstChild;gt&&gt!==be[Xe+1];){const bt=gt.next;Te.append(gt),gt=bt}Me=Te}Hl(n,f,v,de)?J.insert(K,be[0],!0):(J.insert(de,be[0],!0),J.insert(K,de)),J=be[0],(Hl(n,f,v,J)||K1(J,"br"))&&J.empty().remove()}else if(K.parent){if(K.name==="li"){let Me=K.prev;if(Me&&(Me.name==="ul"||Me.name==="ol")){Me.append(K);continue}if(Me=K.next,Me&&(Me.name==="ul"||Me.name==="ol")&&Me.firstChild){Me.insert(K,Me.firstChild,!0);continue}const Xe=new xm("ul",1);a(Xe),K.wrap(Xe);continue}if(n.isValidChild(K.parent.name,"div")&&n.isValidChild("div",K.name)){const Me=new xm("div",1);a(Me),K.wrap(Me)}else Dh(K,n)}}},d8=(e,n)=>{let s=e;for(;s;){if(s.name===n)return!0;s=s.parent}return!1},uS=(e,n,s=n.parent)=>s?e.children[n.name]&&!e.isValidChild(s.name,n.name)||n.name==="a"&&d8(s,"a")?!0:nx(s)&&ef(n)?!((s==null?void 0:s.firstChild)===n&&(s==null?void 0:s.lastChild)===n):!1:!1,AI=(e,n,s,a)=>{const l=document.createRange();return l.setStart(e,n),l.setEnd(s,a),l},Wi=e=>{const n=Xt.fromRangeStart(e),s=Xt.fromRangeEnd(e),a=e.commonAncestorContainer;return ad(!1,a,s).map(l=>!Mf(n,s,a)&&Mf(n,l,a)?AI(n.container(),n.offset(),l.container(),l.offset()):e).getOr(e)},AE=e=>e.collapsed?e:Wi(e),dS=e=>Qe(e.firstChild)&&e.firstChild===e.lastChild,Op=e=>e.name==="br"||e.value===wc,Rh=(e,n)=>e.getBlockElements()[n.name]&&dS(n)&&Op(n.firstChild),pg=(e,n)=>{const s=e.getNonEmptyElements();return Qe(n)&&(n.isEmpty(s)||Rh(e,n))},XO=(e,n)=>{let s=n.firstChild,a=n.lastChild;return s&&s.name==="meta"&&(s=s.next),a&&a.attr("id")==="mce_marker"&&(a=a.prev),pg(e,a)&&(a=a==null?void 0:a.prev),!s||s!==a?!1:s.name==="ul"||s.name==="ol"},OI=e=>{var n,s;const a=e.firstChild,l=e.lastChild;return a&&a.nodeName==="META"&&((n=a.parentNode)===null||n===void 0||n.removeChild(a)),l&&l.id==="mce_marker"&&((s=l.parentNode)===null||s===void 0||s.removeChild(l)),e},m8=(e,n,s)=>{const a=n.serialize(s),l=e.createFragment(a);return OI(l)},g8=e=>{var n;return dt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],s=>s.nodeName==="LI")},f8=e=>e.data===wc||aa(e),xR=e=>Qe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&f8(e.firstChild),p8=e=>!e.firstChild||xR(e),DI=e=>e.length>0&&p8(e[e.length-1])?e.slice(0,-1):e,OE=(e,n)=>{const s=e.getParent(n,e.isBlock);return s&&s.nodeName==="LI"?s:null},h0=(e,n)=>!!OE(e,n),Mh=(e,n)=>{const s=n.cloneRange(),a=n.cloneRange();return s.setStartBefore(e),a.setEndAfter(e),[s.cloneContents(),a.cloneContents()]},lc=(e,n)=>{const s=Xt.before(e),l=Km(n).next(s);return l?l.toRange():null},JO=(e,n)=>{const s=Xt.after(e),l=Km(n).prev(s);return l?l.toRange():null},DE=(e,n,s,a)=>{const l=Mh(e,a),f=e.parentNode;return f&&(f.insertBefore(l[0],e),bn.each(n,v=>{f.insertBefore(v,e)}),f.insertBefore(l[1],e),f.removeChild(e)),JO(n[n.length-1],s)},RI=(e,n,s)=>{const a=e.parentNode;return a&&bn.each(n,l=>{a.insertBefore(l,e)}),lc(e,s)},MI=(e,n,s,a)=>(a.insertAfter(n.reverse(),e),JO(n[0],s)),NI=(e,n,s,a)=>{const l=m8(n,e,a),f=OE(n,s.startContainer),v=DI(g8(l.firstChild)),k=1,O=2,F=n.getRoot(),Z=K=>{const J=Xt.fromRangeStart(s),de=Km(n.getRoot()),Te=K===k?de.prev(J):de.next(J),be=Te==null?void 0:Te.getNode();return be?OE(n,be)!==f:!0};return f?Z(k)?RI(f,v,F):Z(O)?MI(f,v,F,n):DE(f,v,F,s):null},hg=["pre"],Dp=(e,n,s,a)=>{var l;const f=n.firstChild,v=n.lastChild,k=v.attr("data-mce-type")==="bookmark"?v.prev:v,O=f===k,F=ce(hg,f.name);if(O&&F){const Z=f.attr("contenteditable")!=="false",K=((l=e.getParent(s,e.isBlock))===null||l===void 0?void 0:l.nodeName.toLowerCase())===f.name,J=Y.from(Qg(a,s)).forall(dn);return Z&&K&&J}else return!1},RE=tn,mS=(e,n,s)=>{if(Qe(s)){const a=e.getParent(n.endContainer,RE);return s===a&&vw(je.fromDom(s),n)}else return!1},ME=(e,n,s)=>{var a;if(s.getAttribute("data-mce-bogus")==="all")(a=s.parentNode)===null||a===void 0||a.insertBefore(e.dom.createFragment(n),s);else{const l=s.firstChild,f=s.lastChild;!l||l===f&&l.nodeName==="BR"?e.dom.setHTML(s,n):e.selection.setContent(n,{no_events:!0})}},NE=(e,n,s)=>{Y.from(e.getParent(n,"td,th")).map(je.fromDom).each(a=>lh(a,s))},QO=(e,n)=>{const s=e.schema.getTextInlineElements(),a=e.dom;if(n){const l=e.getBody(),f=q1(e),v="*[data-mce-fragment]",k=a.select(v);bn.each(k,O=>{const F=J=>Qe(s[J.nodeName.toLowerCase()]),Z=J=>J.childNodes.length===1;if((J=>!(KD(a,J)||QB(a,J)))(O)&&F(O)&&Z(O)){const J=Hw(a,O),de=(Xe,gt)=>rt(Xe,bt=>ce(gt,bt)),Te=Xe=>Z(O)&&a.is(Xe,v)&&F(Xe)&&(Xe.nodeName===O.nodeName&&de(J,Hw(a,Xe))||Te(Xe.children[0])),be=Xe=>Qe(Xe)&&Xe!==l&&(f.compare(O,Xe)||be(Xe.parentElement)),Me=Xe=>Qe(Xe)&&Xe!==l&&a.is(Xe,v)&&(tI(a,O,Xe)||Me(Xe.parentElement));(Te(O.children[0])||be(O.parentElement)&&!Me(O.parentElement))&&a.remove(O,!0)}})}},BE=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},e3=e=>{bn.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},wR=e=>!!e.getAttribute("data-mce-fragment"),BI=(e,n)=>Qe(n)&&!e.schema.getVoidElements()[n.nodeName],IE=(e,n)=>{var s,a,l;let f;const v=e.dom,k=e.selection;if(!n)return;k.scrollIntoView(n);const O=Qg(e.getBody(),n);if(O&&v.getContentEditable(O)==="false"){v.remove(n),k.select(O);return}let F=v.createRng();const Z=n.previousSibling;if(_n(Z)){F.setStart(Z,(a=(s=Z.nodeValue)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0);const de=n.nextSibling;_n(de)&&(Z.appendData(de.data),(l=de.parentNode)===null||l===void 0||l.removeChild(de))}else F.setStartBefore(n),F.setEndBefore(n);const K=de=>{let Te=Xt.fromRangeStart(de);return Te=Km(e.getBody()).next(Te),Te==null?void 0:Te.toRange()},J=v.getParent(n,v.isBlock);if(v.remove(n),J&&v.isEmpty(J)){const de=RE(J);rm(je.fromDom(J)),F.setStart(J,0),F.setEnd(J,0),!de&&!wR(J)&&(f=K(F))?(F=f,v.remove(J)):v.add(J,v.create("br",de?{}:{"data-mce-bogus":"1"}))}k.setRng(F)},h8=e=>{const n=e.dom,s=AE(e.selection.getRng());e.selection.setRng(s);const a=n.getParent(s.startContainer,RE);mS(n,s,a)?rS(e,s,je.fromDom(a)):s.startContainer===s.endContainer&&s.endOffset-s.startOffset===1&&_n(s.startContainer.childNodes[s.startOffset])?s.deleteContents():e.getDoc().execCommand("Delete",!1)},t3=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return Y.some(n);return Y.none()},Rp=(e,n,s)=>{var a;return De(s.children(),ef)&&((a=e.getParent(n,e.isBlock))===null||a===void 0?void 0:a.nodeName)==="SUMMARY"},bg=(e,n,s)=>{var a,l;const f=e.selection,v=e.dom,k=e.parser,O=s.merge,F=Gy({validate:!0},e.schema),Z='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';s.preserve_zwsp||(n=Nl(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,Z);let K=f.getRng();const J=K.startContainer,de=e.getBody();J===de&&f.isCollapsed()&&v.isBlock(de.firstChild)&&BI(e,de.firstChild)&&v.isEmpty(de.firstChild)&&(K=v.createRng(),K.setStart(de.firstChild,0),K.setEnd(de.firstChild,0),f.setRng(K)),f.isCollapsed()||h8(e);const Te=f.getNode(),be={context:Te.nodeName.toLowerCase(),data:s.data,insert:!0},Me=k.parse(n,be);if(s.paste===!0&&XO(e.schema,Me)&&h0(v,Te))return K=NI(F,v,f.getRng(),Me),K&&f.setRng(K),n;s.paste===!0&&Dp(v,Me,Te,e.getBody())&&((a=Me.firstChild)===null||a===void 0||a.unwrap()),BE(Me);let Xe=Me.lastChild;if(Xe&&Xe.attr("id")==="mce_marker"){const gt=Xe;for(Xe=Xe.prev;Xe&&Xe.name!=="table";Xe=Xe.walk(!0))if(Xe.type===3||!v.isBlock(Xe.name)){Xe.parent&&e.schema.isValidChild(Xe.parent.name,"span")&&Xe.parent.insert(gt,Xe,Xe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(Te),!be.invalid&&!Rp(v,Te,Me))n=F.serialize(Me),ME(e,n,Te);else{e.selection.setContent(Z);let gt=f.getNode(),bt;const Ot=e.getBody();for(sh(gt)?gt=bt=Ot:bt=gt;bt&&bt!==Ot;)gt=bt,bt=bt.parentNode;n=gt===Ot?Ot.innerHTML:v.getOuterHTML(gt);const yn=k.parse(n),Un=t3(yn),So=Un.bind(lS).getOr(yn);Un.each(Io=>Io.replace(Me));const sn=Me.children(),Ut=(l=Me.parent)!==null&&l!==void 0?l:yn;Me.unwrap();const En=dt(sn,Io=>uS(e.schema,Io,Ut));da(En,e.schema,So),iS(k.getNodeFilters(),k.getAttributeFilters(),yn),n=F.serialize(yn),gt===Ot?v.setHTML(Ot,n):v.setOuterHTML(gt,n)}return QO(e,O),IE(e,v.get("mce_marker")),e3(e.getBody()),NE(v,f.getStart(),e.schema),ag(e.schema,e.getBody(),f.getStart()),n},Y1=e=>e instanceof xm,Mp=e=>{hc(e)&&kl(e.getBody()).each(n=>{const s=n.getNode(),a=rg(s)?kl(s).getOr(n):n;e.selection.setRng(a.toRange())})},CR=(e,n,s)=>{e.dom.setHTML(e.getBody(),n),s!==!0&&Mp(e)},Mi=(e,n,s,a)=>{if(s=Nl(s),s.length===0||/^\s+$/.test(s)){const l='<br data-mce-bogus="1">';n.nodeName==="TABLE"?s="<tr><td>"+l+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+l+"</li>");const f=Pl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),f.toLowerCase())?(s=l,s=e.dom.createHTML(f,bh(e),s)):s||(s=l),CR(e,s,a.no_selection),{content:s,html:s}}else{a.format!=="raw"&&(s=Gy({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const l=jm(je.fromDom(n))?s:bn.trim(s);return CR(e,l,a.no_selection),{content:l,html:l}}},b8=(e,n,s,a)=>{iS(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const l=Gy({validate:!1},e.schema).serialize(s),f=Nl(jm(je.fromDom(n))?l:bn.trim(l));return CR(e,f,a.no_selection),{content:s,html:f}},Kw=(e,n,s)=>Y.from(e.getBody()).map(a=>Y1(n)?b8(e,a,n,s):Mi(e,a,n,s)).getOr({content:n,html:Y1(s.content)?"":s.content}),gS=e=>Be(e)?e:$e,FE=(e,n,s)=>{let a=e.dom;const l=gS(s);for(;a.parentNode;){a=a.parentNode;const f=je.fromDom(a),v=n(f);if(v.isSome())return v;if(l(f))break}return Y.none()},sx=(e,n,s)=>{const a=n(e),l=gS(s);return a.orThunk(()=>l(e)?Y.none():FE(e,n,l))},rx=vm,II=(e,n,s)=>{const a=e.formatter.get(s);if(a)for(let l=0;l<a.length;l++){const f=a[l];if(eu(f)&&f.inherit===!1&&e.dom.is(n,f.selector))return!0}return!1},PE=(e,n,s,a,l)=>{const f=e.dom.getRoot();if(n===f)return!1;const v=e.dom.getParent(n,k=>II(e,k,s)?!0:k.parentNode===f||!!$b(e,k,s,a,!0));return!!$b(e,v,s,a,l)},n3=(e,n,s)=>wa(s)&&rx(n,s.inline)||Ep(s)&&rx(n,s.block)?!0:eu(s)?so(n)&&e.is(n,s.selector):!1,SR=(e,n,s,a,l,f)=>{const v=s[a],k=a==="attributes";if(Be(s.onmatch))return s.onmatch(n,s,a);if(v){if(yt(v)){for(let O=0;O<v.length;O++)if(k?e.getAttrib(n,v[O]):Ff(e,n,v[O]))return!0}else for(const O in v)if(Lo(v,O)){const F=k?e.getAttrib(n,O):Ff(e,n,O),Z=nc(v[O],f),K=qn(F)||er(F);if(K&&qn(Z))continue;if(l&&K&&!s.exact||(!l||s.exact)&&!rx(F,$y(Z,O)))return!1}}return!0},$b=(e,n,s,a,l)=>{const f=e.formatter.get(s),v=e.dom;if(f&&so(n))for(let k=0;k<f.length;k++){const O=f[k];if(n3(e.dom,n,O)&&SR(v,n,O,"attributes",l,a)&&SR(v,n,O,"styles",l,a)){const F=O.classes;if(F){for(let Z=0;Z<F.length;Z++)if(!e.dom.hasClass(n,nc(F[Z],a)))return}return O}}},LE=(e,n,s,a,l)=>{if(a)return PE(e,a,n,s,l);if(a=e.selection.getNode(),PE(e,a,n,s,l))return!0;const f=e.selection.getStart();return!!(f!==a&&PE(e,f,n,s,l))},Np=(e,n,s)=>{const a=[],l={},f=e.selection.getStart();return e.dom.getParent(f,v=>{for(let k=0;k<n.length;k++){const O=n[k];!l[O]&&$b(e,v,O,s)&&(l[O]=!0,a.push(O))}},e.dom.getRoot()),a},fS=(e,n)=>{const s=l=>Lr(l,je.fromDom(e.getBody())),a=(l,f)=>$b(e,l.dom,f)?Y.some(f):Y.none();return Y.from(e.selection.getStart(!0)).bind(l=>sx(je.fromDom(l),f=>Us(n,v=>a(f,v)),s)).getOrNull()},FI=(e,n)=>{const s=e.formatter.get(n),a=e.dom;if(s&&e.selection.isEditable()){const l=e.selection.getStart(),f=Hy(a,l);for(let v=s.length-1;v>=0;v--){const k=s[v];if(!eu(k))return!0;for(let O=f.length-1;O>=0;O--)if(a.is(f[O],k.selector))return!0}}return!1},PI=(e,n,s)=>it(s,(a,l)=>{const f=XA(e,l);return e.formatter.matchNode(n,l,{},f)?a.concat([l]):a},[]),pS=Sl,v8=(e,n)=>e.importNode(n,!0),kR=e=>{if(e){const n=new ru(e,e);for(let s=n.current();s;s=n.next())if(_n(s))return s}return null},o3=e=>{const n=je.fromTag("span");return dc(n,{id:bm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&va(n,je.fromText(pS)),n},hS=e=>{const n=kR(e);return n&&n.data.charAt(0)===pS&&n.deleteData(0,1),n},s3=(e,n,s)=>{const a=e.dom,l=e.selection;if(ww(n))g0(e,!1,je.fromDom(n),s,!0);else{const f=l.getRng(),v=a.getParent(n,a.isBlock),k=f.startContainer,O=f.startOffset,F=f.endContainer,Z=f.endOffset,K=hS(n);a.remove(n,!0),k===K&&O>0&&f.setStart(K,O-1),F===K&&Z>0&&f.setEnd(K,Z-1),v&&a.isEmpty(v)&&ch(je.fromDom(v)),l.setRng(f)}},$E=(e,n,s)=>{const a=e.dom,l=e.selection;if(n)s3(e,n,s);else if(n=wh(e.getBody(),l.getStart()),!n)for(;n=a.get(bm);)s3(e,n,s)},LI=(e,n,s)=>{var a,l;const f=e.dom,v=f.getParent(s,Se(WT,e.schema));v&&f.isEmpty(v)?(a=s.parentNode)===null||a===void 0||a.replaceChild(n,s):(Lx(je.fromDom(s)),f.isEmpty(s)?(l=s.parentNode)===null||l===void 0||l.replaceChild(n,s):f.insertAfter(n,s))},HE=(e,n)=>(e.appendChild(n),n),bS=(e,n)=>{var s;const a=An(e,(f,v)=>HE(f,v.cloneNode(!1)),n),l=(s=a.ownerDocument)!==null&&s!==void 0?s:document;return HE(a,l.createTextNode(pS))},y8=(e,n,s,a,l,f)=>{const v=e.formatter,k=e.dom,O=dt(ns(v.get()),K=>K!==a&&!Vo(K,"removeformat")),F=PI(e,s,O);if(dt(F,K=>!JA(e,K,a)).length>0){const K=s.cloneNode(!1);return k.add(n,K),v.remove(a,l,K,f),k.remove(K),Y.some(K)}else return Y.none()},$I=e=>Fx(e,y1(e).replace(new RegExp(`${wc}$`)," ")),X1=(e,n)=>{const s=()=>{n!==null&&!e.dom.isEmpty(n)&&rl(je.fromDom(n)).each(a=>{Da(a)?$I(a):vl(a,l=>Da(l)).each(l=>{Da(l)&&$I(l)})})};e.once("input",a=>{a.data&&!Sh(a.data)&&(a.isComposing?e.once("compositionend",()=>{s()}):s())})},TR=(e,n,s)=>{let a;const l=e.selection,f=e.formatter.get(n);if(!f)return;const v=l.getRng();let k=v.startOffset;const F=v.startContainer.nodeValue;a=wh(e.getBody(),l.getStart());const Z=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(F&&k>0&&k<F.length&&Z.test(F.charAt(k))&&Z.test(F.charAt(k-1))){const K=l.getBookmark();v.collapse(!0);let J=Ab(e.dom,v,f);J=rE(J),e.formatter.apply(n,s,J),l.moveToBookmark(K)}else{let K=a?kR(a):null;(!a||(K==null?void 0:K.data)!==pS)&&(a=v8(e.getDoc(),o3(!0).dom),K=a.firstChild,v.insertNode(a),k=1,X1(e,a)),e.formatter.apply(n,s,a),l.setCursorLocation(K,k)}},HI=(e,n,s,a)=>{const l=e.dom,f=e.selection;let v=!1;const k=e.formatter.get(n);if(!k)return;const O=f.getRng(),F=O.startContainer,Z=O.startOffset;let K=F;_n(F)&&(Z!==F.data.length&&(v=!0),K=K.parentNode);const J=[];let de;for(;K;){if($b(e,K,n,s,a)){de=K;break}K.nextSibling&&(v=!0),J.push(K),K=K.parentNode}if(de)if(v){const Te=f.getBookmark();O.collapse(!0);let be=Ab(l,O,k,!0);be=rE(be),e.formatter.remove(n,s,be,a),f.moveToBookmark(Te)}else{const Te=wh(e.getBody(),de),be=Qe(Te)?l.getParents(de.parentNode,pt,Te):[],Me=o3(!1).dom;LI(e,Me,Te??de);const Xe=y8(e,Me,de,n,s,a),gt=bS([...J,...Xe.toArray(),...be],Me);Te&&s3(e,Te,Qe(Te)),f.setCursorLocation(gt,1),X1(e,Me),l.isEmpty(de)&&l.remove(de)}},Bp=(e,n,s)=>{const a=e.selection,l=e.getBody();$E(e,null,s),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===pS&&$E(e,wh(l,a.getStart()),!0),(n===37||n===39)&&$E(e,wh(l,a.getStart()),!0)},Yw=e=>_n(e)&&hr(e.data,wc),ER=e=>{e.on("mouseup keydown",n=>{Bp(e,n.keyCode,Yw(e.selection.getRng().endContainer))})},Xw=e=>{const n=o3(!1),s=bS(e,n.dom);return{caretContainer:n,caretPosition:Xt(s,0)}},r3=(e,n)=>{const{caretContainer:s,caretPosition:a}=Xw(n);return Ji(je.fromDom(e),s),Zr(je.fromDom(e)),a},zI=(e,n)=>{const{caretContainer:s,caretPosition:a}=Xw(n);return e.insertNode(s.dom),a},a3=(e,n)=>{if(Od(n.dom))return!1;const s=e.schema.getTextInlineElements();return Lo(s,_e(n))&&!Od(n.dom)&&!ap(n.dom)},Ip={},i3=Fu(["pre"]),VI=(e,n)=>{Ip[e]||(Ip[e]=[]),Ip[e].push(n)},c3=(e,n)=>{Lo(Ip,e)&&oe(Ip[e],s=>{s(n)})};VI("pre",e=>{const n=e.selection.getRng(),s=l=>f=>{const v=f.previousSibling;return i3(v)&&ce(l,v)},a=(l,f)=>{const v=je.fromDom(f),k=zd(v).dom;Zr(v),vd(je.fromDom(l),[je.fromTag("br",k),je.fromTag("br",k),...Rl(v)])};if(!n.collapsed){const l=e.selection.getSelectedBlocks(),f=dt(dt(l,i3),s(l));oe(f,v=>{a(v.previousSibling,v)})}});const vg=["fontWeight","fontStyle","color","fontSize","fontFamily"],_R=e=>ve(e.styles)&&De(ns(e.styles),n=>ce(vg,n)),UI=e=>hn(e,n=>wa(n)&&n.inline==="span"&&_R(n)),WI=(e,n)=>{const s=e.get(n);return qt(s)?UI(s):Y.none()},zE=(e,n)=>Ou(n,Xt.fromRangeStart(e)).isNone(),jI=(e,n)=>Vi(n,Xt.fromRangeEnd(e)).exists(s=>!aa(s.getNode())||Vi(n,s).isSome())===!1,VE=e=>n=>ed(n)&&e.isEditable(n),l3=e=>{const n=e.getSelectedBlocks(),s=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return zE(s,n[0])&&jI(s,n[0])?n:[];{const a=Gt(n).filter(v=>zE(s,v)).toArray(),l=yo(n).filter(v=>jI(s,v)).toArray(),f=n.slice(1,-1);return a.concat(f).concat(l)}},u3=e=>dt(l3(e),VE(e.dom)),Fp=e=>dt(e.getSelectedBlocks(),VE(e.dom)),vS=bn.each,Jw=e=>so(e)&&!Dd(e)&&!Od(e)&&!ap(e),Qw=(e,n)=>{for(let s=e;s;s=s[n]){if(_n(s)&&Bs(s.data))return e;if(so(s)&&!Dd(s))return s}return e},d3=(e,n,s)=>{const a=q1(e),l=Qu(n)&&e.dom.isEditable(n),f=Qu(s)&&e.dom.isEditable(s);if(l&&f){const v=Qw(n,"previousSibling"),k=Qw(s,"nextSibling");if(a.compare(v,k)){for(let O=v.nextSibling;O&&O!==k;){const F=O;O=O.nextSibling,v.appendChild(F)}return e.dom.remove(k),bn.each(bn.grep(k.childNodes),O=>{v.appendChild(O)}),v}}return s},eC=(e,n,s,a)=>{var l;if(a&&n.merge_siblings!==!1){const f=(l=d3(e,YA(a),a))!==null&&l!==void 0?l:a;d3(e,f,YA(f,!0))}},x8=(e,n,s)=>{if(n.clear_child_styles){const a=n.links?"*:not(a)":"*";vS(e.select(a,s),l=>{Jw(l)&&e.isEditable(l)&&vS(n.styles,(f,v)=>{e.setStyle(l,v,"")})})}},UE=(e,n,s)=>{vS(e.childNodes,a=>{Jw(a)&&(n(a)&&s(a),a.hasChildNodes()&&UE(a,n,s))})},AR=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},ZI=(e,n)=>s=>!!(s&&Ff(e,s,n)),m3=(e,n,s)=>a=>{e.setStyle(a,n,s),a.getAttribute("style")===""&&a.removeAttribute("style"),AR(e,a)},ax=mg.generate([{keep:[]},{rename:["name"]},{removed:[]}]),tC=/^(src|href|style)$/,WE=bn.each,Hb=vm,OR=e=>/^(TR|TH|TD)$/.test(e.nodeName),g3=(e,n,s)=>e.isChildOf(n,s)&&n!==s&&!e.isBlock(s),DR=(e,n,s)=>{let a=n[s?"startContainer":"endContainer"],l=n[s?"startOffset":"endOffset"];if(so(a)){const f=a.childNodes.length-1;!s&&l&&l--,a=a.childNodes[l>f?f:l]}return _n(a)&&s&&l>=a.data.length&&(a=new ru(a,e.getBody()).next()||a),_n(a)&&!s&&l===0&&(a=new ru(a,e.getBody()).prev()||a),a},f3=(e,n)=>{const s=n?"firstChild":"lastChild",a=e[s];return OR(e)&&a?e.nodeName==="TR"&&a[s]||a:e},J1=(e,n,s,a)=>{var l;const f=e.create(s,a);return(l=n.parentNode)===null||l===void 0||l.insertBefore(f,n),f.appendChild(n),f},RR=(e,n,s,a,l)=>{const f=je.fromDom(n),v=je.fromDom(e.create(a,l)),k=s?gf(f):Dl(f);return vd(v,k),s?(Ji(f,v),yi(v,f)):(Xu(f,v),va(v,f)),v.dom},Wf=(e,n)=>n.links&&e.nodeName==="A",ix=(e,n,s)=>{const a=n.parentNode;let l;const f=e.dom,v=Pl(e);Ep(s)&&a===f.getRoot()&&(!s.list_block||!Hb(n,s.list_block))&&oe(gr(n.childNodes),k=>{kb(e,v,k.nodeName.toLowerCase())?l?l.appendChild(k):(l=J1(f,k,v),f.setAttribs(l,bh(e))):l=null}),!(Pf(s)&&!Hb(s.inline,n))&&f.remove(n,!0)},yS=(e,n,s)=>z(e)?{name:n,value:null}:{name:e,value:nc(n,s)},b0=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},GI=(e,n,s,a,l)=>{let f=!1;WE(s.styles,(v,k)=>{const{name:O,value:F}=yS(k,v,a),Z=$y(F,O);(s.remove_similar||re(F)||!so(l)||Hb(Ff(e,l,O),Z))&&e.setStyle(n,O,""),f=!0}),f&&b0(e,n)},qI=(e,n,s)=>{n==="removeformat"?oe(Fp(e.selection),a=>{oe(vg,l=>e.dom.setStyle(a,l,"")),b0(e.dom,a)}):WI(e.formatter,n).each(a=>{oe(Fp(e.selection),l=>GI(e.dom,l,a,s,null))})},Q1=(e,n,s,a,l)=>{const f=e.dom,v=q1(e),k=e.schema;if(wa(n)&&Um(k,n.inline)&&yf(k,a)&&a.parentElement===e.getBody())return ix(e,a,n),ax.removed();if(!n.ceFalseOverride&&a&&f.getContentEditableParent(a)==="false"||a&&!n3(f,a,n)&&!Wf(a,n))return ax.keep();const O=a,F=n.preserve_attributes;if(wa(n)&&n.remove==="all"&&qt(F)){const Z=dt(f.getAttribs(O),K=>ce(F,K.name.toLowerCase()));if(f.removeAllAttribs(O),oe(Z,K=>f.setAttrib(O,K.name,K.value)),Z.length>0)return ax.rename("span")}if(n.remove!=="all"){GI(f,O,n,s,l),WE(n.attributes,(K,J)=>{const{name:de,value:Te}=yS(J,K,s);if(n.remove_similar||re(Te)||!so(l)||Hb(f.getAttrib(l,de),Te)){if(de==="class"){const be=f.getAttrib(O,de);if(be){let Me="";if(oe(be.split(/\s+/),Xe=>{/mce\-\w+/.test(Xe)&&(Me+=(Me?" ":"")+Xe)}),Me){f.setAttrib(O,de,Me);return}}}if(tC.test(de)&&O.removeAttribute("data-mce-"+de),de==="style"&&Fu(["li"])(O)&&f.getStyle(O,"list-style-type")==="none"){O.removeAttribute(de),f.setStyle(O,"list-style-type","none");return}de==="class"&&O.removeAttribute("className"),O.removeAttribute(de)}}),WE(n.classes,K=>{K=nc(K,s),(!so(l)||f.hasClass(l,K))&&f.removeClass(O,K)});const Z=f.getAttribs(O);for(let K=0;K<Z.length;K++){const J=Z[K].nodeName;if(!v.isAttributeInternal(J))return ax.keep()}}return n.remove!=="none"?(ix(e,O,n),ax.removed()):ax.keep()},jE=(e,n,s,a,l)=>{let f;return n.parentNode&&oe(Hy(e.dom,n.parentNode).reverse(),v=>{if(!f&&so(v)&&v.id!=="_start"&&v.id!=="_end"){const k=$b(e,v,s,a,l);k&&k.split!==!1&&(f=v)}}),f},MR=(e,n,s,a)=>Q1(e,n,s,a,a).fold(Le(a),l=>(e.dom.createFragment().appendChild(a),e.dom.rename(a,l)),Le(null)),KI=(e,n,s,a,l,f,v,k)=>{var O,F;let Z,K;const J=e.dom;if(s){const de=s.parentNode;for(let Te=a.parentNode;Te&&Te!==de;Te=Te.parentNode){let be=J.clone(Te,!1);for(let Me=0;Me<n.length&&(be=MR(e,n[Me],k,be),be!==null);Me++);be&&(Z&&be.appendChild(Z),K||(K=be),Z=be)}(!v.mixed||!J.isBlock(s))&&(a=(O=J.split(s,a))!==null&&O!==void 0?O:a),Z&&K&&((F=l.parentNode)===null||F===void 0||F.insertBefore(Z,l),K.appendChild(l),wa(v)&&eC(e,v,k,Z))}return a},p3=(e,n,s,a,l)=>{const f=e.formatter.get(n),v=f[0],k=e.dom,O=e.selection,F=be=>{const Me=jE(e,be,n,s,l);return KI(e,f,Me,be,be,!0,v,s)},Z=be=>Dd(be)&&so(be)&&(be.id==="_start"||be.id==="_end"),K=be=>De(f,Me=>Nh(e,Me,s,be,be)),J=be=>{const Me=gr(be.childNodes),gt=K(be)||De(f,yn=>n3(k,be,yn)),bt=be.parentNode;if(!gt&&Qe(bt)&&ir(v)&&K(bt),v.deep&&Me.length)for(let yn=0;yn<Me.length;yn++)J(Me[yn]);oe(["underline","line-through","overline"],yn=>{so(be)&&e.dom.getStyle(be,"text-decoration")===yn&&be.parentNode&&Tp(k,be.parentNode)===yn&&Nh(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:yn}},void 0,be)})},de=be=>{const Me=k.get(be?"_start":"_end");if(Me){let Xe=Me[be?"firstChild":"lastChild"];return Z(Xe)&&(Xe=Xe[be?"firstChild":"lastChild"]),_n(Xe)&&Xe.data.length===0&&(Xe=be?Me.previousSibling||Me.nextSibling:Me.nextSibling||Me.previousSibling),k.remove(Me,!0),Xe}else return null},Te=be=>{let Me,Xe,gt=Ab(k,be,f,be.collapsed);if(v.split){if(gt=rE(gt),Me=DR(e,gt,!0),Xe=DR(e,gt),Me!==Xe){if(Me=f3(Me,!0),Xe=f3(Xe,!1),g3(k,Me,Xe)){const Ot=Y.from(Me.firstChild).getOr(Me);F(RR(k,Ot,!0,"span",{id:"_start","data-mce-type":"bookmark"})),de(!0);return}if(g3(k,Xe,Me)){const Ot=Y.from(Xe.lastChild).getOr(Xe);F(RR(k,Ot,!1,"span",{id:"_end","data-mce-type":"bookmark"})),de(!1);return}Me=J1(k,Me,"span",{id:"_start","data-mce-type":"bookmark"}),Xe=J1(k,Xe,"span",{id:"_end","data-mce-type":"bookmark"});const bt=k.createRng();bt.setStartAfter(Me),bt.setEndBefore(Xe),Uu(k,bt,Ot=>{oe(Ot,yn=>{!Dd(yn)&&!Dd(yn.parentNode)&&F(yn)})}),F(Me),F(Xe),Me=de(!0),Xe=de()}else Me=Xe=F(Me);gt.startContainer=Me.parentNode?Me.parentNode:Me,gt.startOffset=k.nodeIndex(Me),gt.endContainer=Xe.parentNode?Xe.parentNode:Xe,gt.endOffset=k.nodeIndex(Xe)+1}Uu(k,gt,bt=>{oe(bt,J)})};if(a){if(Fy(a)){const be=k.createRng();be.setStartBefore(a),be.setEndAfter(a),Te(be)}else Te(a);Xx(e,n,a,s);return}!O.isCollapsed()||!wa(v)||L1(e).length?(P2(e,()=>If(e,Te),be=>wa(v)&&LE(e,n,s,be)),e.nodeChanged()):HI(e,n,s,l),qI(e,n,s),Xx(e,n,a,s)},YI=(e,n,s,a,l)=>{(a||e.selection.isEditable())&&p3(e,n,s,a,l)},Nh=(e,n,s,a,l)=>Q1(e,n,s,a,l).fold($e,f=>(e.dom.rename(a,f),!0),pt),h3=bn.each,XI=(e,n,s,a)=>{const l=f=>{if(Qu(f)&&so(f.parentNode)&&e.isEditable(f)){const v=Tp(e,f.parentNode);e.getStyle(f,"color")&&v?e.setStyle(f,"text-decoration",v):e.getStyle(f,"text-decoration")===v&&e.setStyle(f,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(bn.walk(a,l,"childNodes"),l(a))},tf=(e,n,s,a)=>{if(n.styles&&n.styles.backgroundColor){const l=ZI(e,"fontSize");UE(a,f=>l(f)&&e.isEditable(f),m3(e,"backgroundColor",nc(n.styles.backgroundColor,s)))}},xS=(e,n,s,a)=>{if(wa(n)&&(n.inline==="sub"||n.inline==="sup")){const l=ZI(e,"fontSize");UE(a,v=>l(v)&&e.isEditable(v),m3(e,"fontSize",""));const f=dt(e.select(n.inline==="sup"?"sub":"sup",a),e.isEditable);e.remove(f,!0)}},NR=(e,n,s,a)=>{h3(n,l=>{wa(l)&&h3(e.dom.select(l.inline,a),f=>{Jw(f)&&Nh(e,l,s,f,l.exact?f:null)}),x8(e.dom,l,a)})},BR=(e,n,s,a,l)=>{const f=l.parentNode;$b(e,f,s,a)&&Nh(e,n,a,l)||n.merge_with_parents&&f&&e.dom.getParent(f,v=>$b(e,v,s,a)?(Nh(e,n,a,l),!0):!1)},wS=bn.each,JI=(e,n,s,a)=>{if(Gv(e)&&wa(n)&&s.parentNode){const l=Dv(e.schema),f=NC(je.fromDom(s),v=>Od(v.dom));return Aa(l,a)&&Yc(e.schema,s.parentNode,{skipBogus:!1,includeZwsp:!0})&&!f}else return!1},CS=(e,n,s,a)=>{if(wS(s.styles,(l,f)=>{e.setStyle(n,f,nc(l,a))}),s.styles){const l=e.getAttrib(n,"style");l&&e.setAttrib(n,"data-mce-style",l)}},Bh=(e,n,s,a)=>{const l=e.formatter.get(n),f=l[0],v=!a&&e.selection.isCollapsed(),k=e.dom,O=e.selection,F=(Te,be=f)=>{Be(be.onformat)&&be.onformat(Te,be,s,a),CS(k,Te,be,s),wS(be.attributes,(Me,Xe)=>{k.setAttrib(Te,Xe,nc(Me,s))}),wS(be.classes,Me=>{const Xe=nc(Me,s);k.hasClass(Te,Xe)||k.addClass(Te,Xe)})},Z=(Te,be)=>{let Me=!1;return wS(Te,Xe=>eu(Xe)?k.getContentEditable(be)==="false"&&!Xe.ceFalseOverride||Qe(Xe.collapsed)&&Xe.collapsed!==v?!0:k.is(be,Xe.selector)&&!Od(be)?(F(be,Xe),Me=!0,!1):!0:!1),Me},K=Te=>{if(ue(Te)){const be=k.create(Te);return F(be),be}else return null},J=(Te,be,Me)=>{const Xe=[];let gt=!0;const bt=f.inline||f.block,Ot=K(bt),yn=sn=>QA(f)&&$b(e,sn,n,s),Un=(sn,Ut,En)=>{const Io=gg(f)&&WT(e.schema,sn)&&kb(e,Ut,bt);return En&&Io},So=(sn,Ut,En,Io)=>{const gs=sn.nodeName.toLowerCase(),Gs=kb(e,bt,gs)&&kb(e,Ut,bt),Tr=!Me&&_n(sn)&&Wk(sn.data),za=Od(sn),ci=!wa(f)||!Te.isBlock(sn);return(En||Io)&&Gs&&!Tr&&!za&&ci};Uu(Te,be,sn=>{let Ut;const En=Io=>{let gs=!1,Gs=gt,Tr=!1;const za=Io.parentNode,ci=za.nodeName.toLowerCase(),El=Te.getContentEditable(Io);Qe(El)&&(Gs=gt,gt=El==="true",gs=!0,Tr=Ly(e,Io));const tm=gt&&!gs;if(aa(Io)&&!JI(e,f,Io,ci)){Ut=null,Ep(f)&&Te.remove(Io);return}if(yn(Io)){Ut=null;return}if(Un(Io,ci,tm)){const gd=Te.rename(Io,bt);F(gd),Xe.push(gd),Ut=null;return}if(eu(f)){let gd=Z(l,Io);if(!gd&&Qe(za)&&ir(f)&&(gd=Z(l,za)),!wa(f)||gd){Ut=null;return}}Qe(Ot)&&So(Io,ci,tm,Tr)?(Ut||(Ut=Te.clone(Ot,!1),za.insertBefore(Ut,Io),Xe.push(Ut)),Tr&&gs&&(gt=Gs),Ut.appendChild(Io)):(Ut=null,oe(gr(Io.childNodes),En),gs&&(gt=Gs),Ut=null)};oe(sn,En)}),f.links===!0&&oe(Xe,sn=>{const Ut=En=>{En.nodeName==="A"&&F(En,f),oe(gr(En.childNodes),Ut)};Ut(sn)}),oe(Xe,sn=>{const Ut=gs=>{let Gs=0;return oe(gs.childNodes,Tr=>{!ao(Tr)&&!Dd(Tr)&&Gs++}),Gs},En=gs=>hn(gs.childNodes,Py).filter(Tr=>Te.getContentEditable(Tr)!=="false"&&n3(Te,Tr,f)).map(Tr=>{const za=Te.clone(Tr,!1);return F(za),Te.replace(za,gs,!0),Te.remove(Tr,!0),za}).getOr(gs),Io=Ut(sn);if((Xe.length>1||!Te.isBlock(sn))&&Io===0){Te.remove(sn,!0);return}(wa(f)||Ep(f)&&f.wrapper)&&(!f.exact&&Io===1&&(sn=En(sn)),NR(e,l,s,sn),BR(e,f,n,s,sn),tf(Te,f,s,sn),XI(Te,f,s,sn),xS(Te,f,s,sn),eC(e,f,s,sn))})},de=Fy(a)?a:O.getNode();if(k.getContentEditable(de)==="false"&&!Ly(e,de)){a=de,Z(l,a),fb(e,n,a,s);return}if(f){if(a)if(Fy(a)){if(!Z(l,a)){const Te=k.createRng();Te.setStartBefore(a),Te.setEndAfter(a),J(k,Ab(k,Te,l),!0)}}else J(k,a,!0);else!v||!wa(f)||L1(e).length?(O.setRng(AE(O.getRng())),P2(e,()=>{If(e,(Te,be)=>{const Me=be?Te:Ab(k,Te,l);J(k,Me,!1)})},pt),e.nodeChanged()):TR(e,n,s),WI(e.formatter,n).each(Te=>{oe(u3(e.selection),be=>CS(k,be,Te,s))});c3(n,e)}fb(e,n,a,s)},v0=(e,n,s,a)=>{(a||e.selection.isEditable())&&Bh(e,n,s,a)},nC=e=>Lo(e,"vars"),IR=(e,n)=>{e.set({}),n.on("NodeChange",s=>{x3(n,s.element,e.get())}),n.on("FormatApply FormatRemove",s=>{const a=Y.from(s.node).map(l=>Fy(l)?l:l.startContainer).bind(l=>so(l)?Y.some(l):Y.from(l.parentElement)).getOrThunk(()=>b3(n));x3(n,a,e.get())})},b3=e=>e.selection.getStart(),v3=(e,n,s,a,l)=>Dt(n,k=>{const O=e.formatter.matchNode(k,s,l??{},a);return!oo(O)},k=>II(e,k,s)?!0:a?!1:Qe(e.formatter.matchNode(k,s,l,!0))),y3=(e,n)=>{const s=n??b3(e);return dt(Hy(e.dom,s),a=>so(a)&&!ap(a))},x3=(e,n,s)=>{const a=y3(e,n);vn(s,(l,f)=>{const v=k=>{const O=v3(e,a,f,k.similar,nC(k)?k.vars:void 0),F=O.isSome();if(k.state.get()!==F){k.state.set(F);const Z=O.getOr(n);nC(k)?k.callback(F,{node:Z,format:f,parents:a}):oe(k.callbacks,K=>K(F,{node:Z,format:f,parents:a}))}};oe([l.withSimilar,l.withoutSimilar],v),oe(l.withVars,v)})},QI=(e,n,s,a,l,f)=>{const v=n.get();oe(s.split(","),k=>{const O=kr(v,k).getOrThunk(()=>{const Z={withSimilar:{state:fa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:fa(!1),similar:!1,callbacks:[]},withVars:[]};return v[k]=Z,Z}),F=()=>{const Z=y3(e);return v3(e,Z,k,l,f).isSome()};if(oo(f)){const Z=l?O.withSimilar:O.withoutSimilar;Z.callbacks.push(a),Z.callbacks.length===1&&Z.state.set(F())}else O.withVars.push({state:fa(F()),similar:l,vars:f,callback:a})}),n.set(v)},eF=(e,n,s)=>{const a=e.get();oe(n.split(","),l=>kr(a,l).each(f=>{a[l]={withSimilar:{...f.withSimilar,callbacks:dt(f.withSimilar.callbacks,v=>v!==s)},withoutSimilar:{...f.withoutSimilar,callbacks:dt(f.withoutSimilar.callbacks,v=>v!==s)},withVars:dt(f.withVars,v=>v.callback!==s)}})),e.set(a)},tF=(e,n,s,a,l,f)=>(QI(e,n,s,a,l,f),{unbind:()=>eF(n,s,a)}),w3=(e,n,s,a)=>{const l=e.formatter.get(n);l&&(LE(e,n,s,a)&&(!("toggle"in l[0])||l[0].toggle)?YI(e,n,s,a):v0(e,n,s,a))},ev=bn.explode,nF=()=>{const e={};return{addFilter:(l,f)=>{oe(ev(l),v=>{Lo(e,v)||(e[v]={name:v,callbacks:[]}),e[v].callbacks.push(f)})},getFilters:()=>Bi(e),removeFilter:(l,f)=>{oe(ev(l),v=>{if(Lo(e,v))if(Qe(f)){const k=e[v],O=dt(k.callbacks,F=>F!==f);O.length>0?k.callbacks=O:delete e[v]}else delete e[v]})}}},wm=(e,n)=>{oe(n,s=>{e.attr(s,null)})},ul=(e,n,s)=>{e.addNodeFilter("font",a=>{oe(a,l=>{const f=n.parse(l.attr("style")),v=l.attr("color"),k=l.attr("face"),O=l.attr("size");v&&(f.color=v),k&&(f["font-family"]=k),O&&Ua(O).each(F=>{f["font-size"]=s[F-1]}),l.name="span",l.attr("style",n.serialize(f)),wm(l,["color","face","size"])})})},oC=(e,n,s)=>{e.addNodeFilter("strike",a=>{const l=n.type!=="html4";oe(a,f=>{if(l)f.name="s";else{const v=s.parse(f.attr("style"));v["text-decoration"]="line-through",f.name="span",f.attr("style",s.serialize(v))}})})},FR=(e,n,s)=>{var a;const l=u1();n.convert_fonts_to_spans&&ul(e,l,bn.explode((a=n.font_size_legacy_values)!==null&&a!==void 0?a:"")),oC(e,s,l)},tv=(e,n,s)=>{n.inline_styles&&FR(e,n,s)},PR=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),LR=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},sC=e=>{try{return decodeURIComponent(e)}catch{return e}},C3=e=>{const[n,...s]=e.split(","),a=s.join(","),l=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(l){const f=l[2]===";base64",v=sC(a),k=f?LR(v):v;return Y.some({type:l[1],data:k,base64Encoded:f})}else return Y.none()},$R=(e,n,s=!0)=>{let a=n;if(s)try{a=atob(n)}catch{return Y.none()}const l=new Uint8Array(a.length);for(let f=0;f<l.length;f++)l[f]=a.charCodeAt(f);return Y.some(new Blob([l],{type:e}))},SS=e=>new Promise((n,s)=>{C3(e).bind(({type:a,data:l,base64Encoded:f})=>$R(a,l,f)).fold(()=>s("Invalid data URI"),n)}),w8=e=>cs(e,"blob:")?PR(e):cs(e,"data:")?SS(e):Promise.reject("Unknown URI format"),cx=e=>new Promise((n,s)=>{const a=new FileReader;a.onloadend=()=>{n(a.result)},a.onerror=()=>{var l;s((l=a.error)===null||l===void 0?void 0:l.message)},a.readAsDataURL(e)});let HR=0;const lx=e=>"blobid"+HR++,oF=(e,n,s)=>C3(e).bind(({data:a,type:l,base64Encoded:f})=>{if(n&&!f)return Y.none();{const v=f?a:btoa(a);return s(v,l)}}),nf=(e,n,s)=>{const a=e.create(lx(),n,s);return e.add(a),a},kS=(e,n,s=!1)=>oF(n,s,(a,l)=>Y.from(e.getByData(a,l)).orThunk(()=>$R(l,a).map(f=>nf(e,f,a)))),zR=(e,n)=>{const s=()=>Promise.reject("Invalid data URI");if(cs(n,"blob:")){const a=e.getByUri(n);return Qe(a)?Promise.resolve(a):w8(n).then(l=>cx(l).then(f=>oF(f,!1,v=>Y.some(nf(e,l,v))).getOrThunk(s)))}else return cs(n,"data:")?kS(e,n).fold(s,a=>Promise.resolve(a)):Promise.reject("Unknown image data format")},ZE=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,S3=e=>Y.from(e.match(ZE)).bind(n=>No(n,1)).map(n=>cs(n,"www.")?n.substring(4):n),TS=(e,n)=>{Y.from(e.attr("src")).bind(S3).forall(s=>!ce(n,s))&&e.attr("sandbox","")},k3=(e,n)=>cs(e,`${n}/`),jf=e=>oo(e)?"iframe":k3(e,"image")?"img":k3(e,"video")?"video":k3(e,"audio")?"audio":"iframe",T3=({type:e,src:n,width:s,height:a}={},l,f)=>{const v=jf(e),k=new xm(v,1);return k.attr(v==="audio"?{src:n}:{src:n,width:s,height:a}),(v==="audio"||v==="video")&&k.attr("controls",""),v==="iframe"&&l&&TS(k,f),k},sF=e=>Qe(e.attr("data-mce-bogus")),VR=e=>e.attr("src")===ms.transparentSrc||Qe(e.attr("data-mce-placeholder")),y0=(e,n)=>{const{blob_cache:s}=n;if(s){const a=l=>{const f=l.attr("src");VR(l)||sF(l)||qn(f)||kS(s,f,!0).each(v=>{l.attr("src",v.blobUri())})};e.addAttributeFilter("src",l=>oe(l,a))}},ES=(e,n)=>{var s,a;const l=e.schema;e.addAttributeFilter("href",O=>{let F=O.length;const Z=J=>J.split(" ").filter(Te=>Te.length>0).concat(["noopener"]).sort().join(" "),K=J=>{const de=J?bn.trim(J):"";return/\b(noopener)\b/g.test(de)?de:Z(de)};if(!n.allow_unsafe_link_target)for(;F--;){const J=O[F];J.name==="a"&&J.attr("target")==="_blank"&&J.attr("rel",K(J.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",O=>{let F=O.length,Z,K,J,de;for(;F--;)if(de=O[F],de.name==="a"&&de.firstChild&&!de.attr("href"))for(J=de.parent,Z=de.lastChild;Z&&J;)K=Z.prev,J.insert(Z,de),Z=K}),n.fix_list_elements&&e.addNodeFilter("ul,ol",O=>{let F=O.length,Z,K;for(;F--;)if(Z=O[F],K=Z.parent,K&&(K.name==="ul"||K.name==="ol"))if(Z.prev&&Z.prev.name==="li")Z.prev.append(Z);else{const J=new xm("li",1);J.attr("style","list-style-type: none"),Z.wrap(J)}});const f=l.getValidClasses();n.validate&&f&&e.addAttributeFilter("class",O=>{var F;let Z=O.length;for(;Z--;){const K=O[Z],J=(F=K.attr("class"))!==null&&F!==void 0?F:"",de=bn.explode(J," ");let Te="";for(let be=0;be<de.length;be++){const Me=de[be];let Xe=!1,gt=f["*"];gt&&gt[Me]&&(Xe=!0),gt=f[K.name],!Xe&&gt&&gt[Me]&&(Xe=!0),Xe&&(Te&&(Te+=" "),Te+=Me)}Te.length||(Te=null),K.attr("class",Te)}}),y0(e,n);const v=(s=n.sandbox_iframes)!==null&&s!==void 0?s:!1,k=ma((a=n.sandbox_iframes_exclusions)!==null&&a!==void 0?a:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",O=>oe(O,F=>{F.replace(T3({type:F.attr("type"),src:F.name==="object"?F.attr("data"):F.attr("src"),width:F.attr("width"),height:F.attr("height")},v,k))})),v&&e.addNodeFilter("iframe",O=>oe(O,F=>TS(F,k)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:rC,setPrototypeOf:rF,isFrozen:E3,getPrototypeOf:aF,getOwnPropertyDescriptor:iF}=Object;let{freeze:yg,seal:of,create:_S}=Object,{apply:UR,construct:AS}=typeof Reflect<"u"&&Reflect;yg||(yg=function(n){return n}),of||(of=function(n){return n}),UR||(UR=function(n,s,a){return n.apply(s,a)}),AS||(AS=function(n,s){return new n(...s)});const aC=Zf(Array.prototype.forEach),cF=Zf(Array.prototype.pop),OS=Zf(Array.prototype.push),iC=Zf(String.prototype.toLowerCase),WR=Zf(String.prototype.toString),_3=Zf(String.prototype.match),DS=Zf(String.prototype.replace),C8=Zf(String.prototype.indexOf),S8=Zf(String.prototype.trim),ji=Zf(Object.prototype.hasOwnProperty),sf=Zf(RegExp.prototype.test),GE=jR(TypeError);function Zf(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return UR(e,n,a)}}function jR(e){return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return AS(e,s)}}function Ci(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iC;rF&&rF(e,null);let a=n.length;for(;a--;){let l=n[a];if(typeof l=="string"){const f=s(l);f!==l&&(E3(n)||(n[a]=f),l=f)}e[l]=!0}return e}function ux(e){for(let n=0;n<e.length;n++)ji(e,n)||(e[n]=null);return e}function x0(e){const n=_S(null);for(const[s,a]of rC(e))ji(e,s)&&(Array.isArray(a)?n[s]=ux(a):a&&typeof a=="object"&&a.constructor===Object?n[s]=x0(a):n[s]=a);return n}function RS(e,n){for(;e!==null;){const a=iF(e,n);if(a){if(a.get)return Zf(a.get);if(typeof a.value=="function")return Zf(a.value)}e=aF(e)}function s(){return null}return s}const A3=yg(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qE=yg(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),KE=yg(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lF=yg(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),MS=yg(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),YE=yg(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NS=yg(["#text"]),zb=yg(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gf=yg(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BS=yg(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),XE=yg(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uF=of(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dF=of(/<%[\w\W]*|[\w\W]*%>/gm),mF=of(/\${[\w\W]*}/gm),k8=of(/^data-[\-\w.\u00B7-\uFFFF]/),T8=of(/^aria-[\-\w]+$/),IS=of(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),E8=of(/^(?:\w+script|data):/i),_8=of(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gF=of(/^html$/i),A8=of(/^[a-z][.\w]*(-[.\w]+)+$/i);var fF=Object.freeze({__proto__:null,MUSTACHE_EXPR:uF,ERB_EXPR:dF,TMPLIT_EXPR:mF,DATA_ATTR:k8,ARIA_ATTR:T8,IS_ALLOWED_URI:IS,IS_SCRIPT_OR_DATA:E8,ATTR_WHITESPACE:_8,DOCTYPE_NAME:gF,CUSTOM_ELEMENT:A8});const JE={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},ZR=function(){return typeof window>"u"?null:window},pF=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let a=null;const l="data-tt-policy-suffix";s&&s.hasAttribute(l)&&(a=s.getAttribute(l));const f="dompurify"+(a?"#"+a:"");try{return n.createPolicy(f,{createHTML(v){return v},createScriptURL(v){return v}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}};function O8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZR();const n=Rr=>O8(Rr);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==JE.document)return n.isSupported=!1,n;let{document:s}=e;const a=s,l=a.currentScript,{DocumentFragment:f,HTMLTemplateElement:v,Node:k,Element:O,NodeFilter:F,NamedNodeMap:Z=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:K,DOMParser:J,trustedTypes:de}=e,Te=O.prototype,be=RS(Te,"cloneNode"),Me=RS(Te,"remove"),Xe=RS(Te,"nextSibling"),gt=RS(Te,"childNodes"),bt=RS(Te,"parentNode");if(typeof v=="function"){const Rr=s.createElement("template");Rr.content&&Rr.content.ownerDocument&&(s=Rr.content.ownerDocument)}let Ot,yn="";const{implementation:Un,createNodeIterator:So,createDocumentFragment:sn,getElementsByTagName:Ut}=s,{importNode:En}=a;let Io={};n.isSupported=typeof rC=="function"&&typeof bt=="function"&&Un&&Un.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:gs,ERB_EXPR:Gs,TMPLIT_EXPR:Tr,DATA_ATTR:za,ARIA_ATTR:ci,IS_SCRIPT_OR_DATA:El,ATTR_WHITESPACE:tm,CUSTOM_ELEMENT:gd}=fF;let{IS_ALLOWED_URI:to}=fF,us=null;const pa=Ci({},[...A3,...qE,...KE,...MS,...NS]);let bo=null;const Is=Ci({},[...zb,...Gf,...BS,...XE]);let Ps=Object.seal(_S(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),po=null,Or=null,Vr=!0,Ru=!0,Za=!1,_m=!0,tp=!1,F0=!0,ng=!1,Zp=!1,Gp=!1,nm=!1,qp=!1,is=!1,la=!0,_l=!1;const Mu="user-content-";let fd=!0,Nu=!1,tl={},nl=null;const wg=Ci({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Yb=null;const P0=Ci({},["audio","video","img","source","image","track"]);let hv=null;const J_=Ci({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q_="http://www.w3.org/1998/Math/MathML",RC="http://www.w3.org/2000/svg",Xb="http://www.w3.org/1999/xhtml";let MC=Xb,Q4=!1,eD=null;const kV=Ci({},[Q_,RC,Xb],WR);let eA=null;const D7=["application/xhtml+xml","text/html"],R7="text/html";let Am=null,Kp=null;const tD=s.createElement("form"),It=function(Wt){return Wt instanceof RegExp||Wt instanceof Function},Lt=function(){let Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Kp&&Kp===Wt)){if((!Wt||typeof Wt!="object")&&(Wt={}),Wt=x0(Wt),eA=D7.indexOf(Wt.PARSER_MEDIA_TYPE)===-1?R7:Wt.PARSER_MEDIA_TYPE,Am=eA==="application/xhtml+xml"?WR:iC,us=ji(Wt,"ALLOWED_TAGS")?Ci({},Wt.ALLOWED_TAGS,Am):pa,bo=ji(Wt,"ALLOWED_ATTR")?Ci({},Wt.ALLOWED_ATTR,Am):Is,eD=ji(Wt,"ALLOWED_NAMESPACES")?Ci({},Wt.ALLOWED_NAMESPACES,WR):kV,hv=ji(Wt,"ADD_URI_SAFE_ATTR")?Ci(x0(J_),Wt.ADD_URI_SAFE_ATTR,Am):J_,Yb=ji(Wt,"ADD_DATA_URI_TAGS")?Ci(x0(P0),Wt.ADD_DATA_URI_TAGS,Am):P0,nl=ji(Wt,"FORBID_CONTENTS")?Ci({},Wt.FORBID_CONTENTS,Am):wg,po=ji(Wt,"FORBID_TAGS")?Ci({},Wt.FORBID_TAGS,Am):{},Or=ji(Wt,"FORBID_ATTR")?Ci({},Wt.FORBID_ATTR,Am):{},tl=ji(Wt,"USE_PROFILES")?Wt.USE_PROFILES:!1,Vr=Wt.ALLOW_ARIA_ATTR!==!1,Ru=Wt.ALLOW_DATA_ATTR!==!1,Za=Wt.ALLOW_UNKNOWN_PROTOCOLS||!1,_m=Wt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,tp=Wt.SAFE_FOR_TEMPLATES||!1,F0=Wt.SAFE_FOR_XML!==!1,ng=Wt.WHOLE_DOCUMENT||!1,nm=Wt.RETURN_DOM||!1,qp=Wt.RETURN_DOM_FRAGMENT||!1,is=Wt.RETURN_TRUSTED_TYPE||!1,Gp=Wt.FORCE_BODY||!1,la=Wt.SANITIZE_DOM!==!1,_l=Wt.SANITIZE_NAMED_PROPS||!1,fd=Wt.KEEP_CONTENT!==!1,Nu=Wt.IN_PLACE||!1,to=Wt.ALLOWED_URI_REGEXP||IS,MC=Wt.NAMESPACE||Xb,Ps=Wt.CUSTOM_ELEMENT_HANDLING||{},Wt.CUSTOM_ELEMENT_HANDLING&&It(Wt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ps.tagNameCheck=Wt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Wt.CUSTOM_ELEMENT_HANDLING&&It(Wt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ps.attributeNameCheck=Wt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Wt.CUSTOM_ELEMENT_HANDLING&&typeof Wt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ps.allowCustomizedBuiltInElements=Wt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tp&&(Ru=!1),qp&&(nm=!0),tl&&(us=Ci({},NS),bo=[],tl.html===!0&&(Ci(us,A3),Ci(bo,zb)),tl.svg===!0&&(Ci(us,qE),Ci(bo,Gf),Ci(bo,XE)),tl.svgFilters===!0&&(Ci(us,KE),Ci(bo,Gf),Ci(bo,XE)),tl.mathMl===!0&&(Ci(us,MS),Ci(bo,BS),Ci(bo,XE))),Wt.ADD_TAGS&&(us===pa&&(us=x0(us)),Ci(us,Wt.ADD_TAGS,Am)),Wt.ADD_ATTR&&(bo===Is&&(bo=x0(bo)),Ci(bo,Wt.ADD_ATTR,Am)),Wt.ADD_URI_SAFE_ATTR&&Ci(hv,Wt.ADD_URI_SAFE_ATTR,Am),Wt.FORBID_CONTENTS&&(nl===wg&&(nl=x0(nl)),Ci(nl,Wt.FORBID_CONTENTS,Am)),fd&&(us["#text"]=!0),ng&&Ci(us,["html","head","body"]),us.table&&(Ci(us,["tbody"]),delete po.tbody),Wt.TRUSTED_TYPES_POLICY){if(typeof Wt.TRUSTED_TYPES_POLICY.createHTML!="function")throw GE('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Wt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw GE('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ot=Wt.TRUSTED_TYPES_POLICY,yn=Ot.createHTML("")}else Ot===void 0&&(Ot=pF(de,l)),Ot!==null&&typeof yn=="string"&&(yn=Ot.createHTML(""));yg&&yg(Wt),Kp=Wt}},Jn=Ci({},["mi","mo","mn","ms","mtext"]),Wn=Ci({},["annotation-xml"]),Ns=Ci({},["title","style","font","a","script"]),ha=Ci({},[...qE,...KE,...lF]),gl=Ci({},[...MS,...YE]),L0=function(Wt){let xs=bt(Wt);(!xs||!xs.tagName)&&(xs={namespaceURI:MC,tagName:"template"});const Sr=iC(Wt.tagName),bu=iC(xs.tagName);return eD[Wt.namespaceURI]?Wt.namespaceURI===RC?xs.namespaceURI===Xb?Sr==="svg":xs.namespaceURI===Q_?Sr==="svg"&&(bu==="annotation-xml"||Jn[bu]):!!ha[Sr]:Wt.namespaceURI===Q_?xs.namespaceURI===Xb?Sr==="math":xs.namespaceURI===RC?Sr==="math"&&Wn[bu]:!!gl[Sr]:Wt.namespaceURI===Xb?xs.namespaceURI===RC&&!Wn[bu]||xs.namespaceURI===Q_&&!Jn[bu]?!1:!gl[Sr]&&(Ns[Sr]||!ha[Sr]):!!(eA==="application/xhtml+xml"&&eD[Wt.namespaceURI]):!1},Jb=function(Wt){OS(n.removed,{element:Wt});try{bt(Wt).removeChild(Wt)}catch{Me(Wt)}},vB=function(Wt,xs){try{OS(n.removed,{attribute:xs.getAttributeNode(Wt),from:xs})}catch{OS(n.removed,{attribute:null,from:xs})}if(xs.removeAttribute(Wt),Wt==="is"&&!bo[Wt])if(nm||qp)try{Jb(xs)}catch{}else try{xs.setAttribute(Wt,"")}catch{}},TV=function(Wt){let xs=null,Sr=null;if(Gp)Wt="<remove></remove>"+Wt;else{const Cg=_3(Wt,/^[\r\n\t ]+/);Sr=Cg&&Cg[0]}eA==="application/xhtml+xml"&&MC===Xb&&(Wt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Wt+"</body></html>");const bu=Ot?Ot.createHTML(Wt):Wt;if(MC===Xb)try{xs=new J().parseFromString(bu,eA)}catch{}if(!xs||!xs.documentElement){xs=Un.createDocument(MC,"template",null);try{xs.documentElement.innerHTML=Q4?yn:bu}catch{}}const np=xs.body||xs.documentElement;return Wt&&Sr&&np.insertBefore(s.createTextNode(Sr),np.childNodes[0]||null),MC===Xb?Ut.call(xs,ng?"html":"body")[0]:ng?xs.documentElement:np},EV=function(Wt){return So.call(Wt.ownerDocument||Wt,Wt,F.SHOW_ELEMENT|F.SHOW_COMMENT|F.SHOW_TEXT|F.SHOW_PROCESSING_INSTRUCTION|F.SHOW_CDATA_SECTION,null)},M7=function(Wt){return Wt instanceof K&&(typeof Wt.nodeName!="string"||typeof Wt.textContent!="string"||typeof Wt.removeChild!="function"||!(Wt.attributes instanceof Z)||typeof Wt.removeAttribute!="function"||typeof Wt.setAttribute!="function"||typeof Wt.namespaceURI!="string"||typeof Wt.insertBefore!="function"||typeof Wt.hasChildNodes!="function")},_V=function(Wt){return typeof k=="function"&&Wt instanceof k},Cx=function(Wt,xs,Sr){Io[Wt]&&aC(Io[Wt],bu=>{bu.call(n,xs,Sr,Kp)})},yB=function(Wt){let xs=null;if(Cx("beforeSanitizeElements",Wt,null),M7(Wt))return Jb(Wt),!0;const Sr=Am(Wt.nodeName);if(Cx("uponSanitizeElement",Wt,{tagName:Sr,allowedTags:us}),Wt.hasChildNodes()&&!_V(Wt.firstElementChild)&&sf(/<[/\w]/g,Wt.innerHTML)&&sf(/<[/\w]/g,Wt.textContent)||Wt.nodeType===JE.progressingInstruction||F0&&Wt.nodeType===JE.comment&&sf(/<[/\w]/g,Wt.data))return Jb(Wt),!0;if(!us[Sr]||po[Sr]){if(!po[Sr]&&N7(Sr)&&(Ps.tagNameCheck instanceof RegExp&&sf(Ps.tagNameCheck,Sr)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Sr)))return!1;if(fd&&!nl[Sr]){const bu=bt(Wt)||Wt.parentNode,np=gt(Wt)||Wt.childNodes;if(np&&bu){const Cg=np.length;for(let Vh=Cg-1;Vh>=0;--Vh){const Sx=be(np[Vh],!0);Sx.__removalCount=(Wt.__removalCount||0)+1,bu.insertBefore(Sx,Xe(Wt))}}}return Jb(Wt),!0}return Wt instanceof O&&!L0(Wt)||(Sr==="noscript"||Sr==="noembed"||Sr==="noframes")&&sf(/<\/no(script|embed|frames)/i,Wt.innerHTML)?(Jb(Wt),!0):(tp&&Wt.nodeType===JE.text&&(xs=Wt.textContent,aC([gs,Gs,Tr],bu=>{xs=DS(xs,bu," ")}),Wt.textContent!==xs&&(OS(n.removed,{element:Wt.cloneNode()}),Wt.textContent=xs)),Cx("afterSanitizeElements",Wt,null),!1)},AV=function(Wt,xs,Sr){if(la&&(xs==="id"||xs==="name")&&(Sr in s||Sr in tD))return!1;if(!(Ru&&!Or[xs]&&sf(za,xs))){if(!(Vr&&sf(ci,xs))){if(!bo[xs]||Or[xs]){if(!(N7(Wt)&&(Ps.tagNameCheck instanceof RegExp&&sf(Ps.tagNameCheck,Wt)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Wt))&&(Ps.attributeNameCheck instanceof RegExp&&sf(Ps.attributeNameCheck,xs)||Ps.attributeNameCheck instanceof Function&&Ps.attributeNameCheck(xs))||xs==="is"&&Ps.allowCustomizedBuiltInElements&&(Ps.tagNameCheck instanceof RegExp&&sf(Ps.tagNameCheck,Sr)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Sr))))return!1}else if(!hv[xs]){if(!sf(to,DS(Sr,tm,""))){if(!((xs==="src"||xs==="xlink:href"||xs==="href")&&Wt!=="script"&&C8(Sr,"data:")===0&&Yb[Wt])){if(!(Za&&!sf(El,DS(Sr,tm,"")))){if(Sr)return!1}}}}}}return!0},N7=function(Wt){return Wt!=="annotation-xml"&&_3(Wt,gd)},OV=function(Wt){Cx("beforeSanitizeAttributes",Wt,null);const{attributes:xs}=Wt;if(!xs)return;const Sr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo};let bu=xs.length;for(;bu--;){const np=xs[bu],{name:Cg,namespaceURI:Vh,value:Sx}=np,nD=Am(Cg);let Sg=Cg==="value"?Sx:S8(Sx);const XG=Sg;if(Sr.attrName=nD,Sr.attrValue=Sg,Sr.keepAttr=!0,Sr.forceKeepAttr=void 0,Cx("uponSanitizeAttribute",Wt,Sr),Sg=Sr.attrValue,Sr.forceKeepAttr)continue;if(!Sr.keepAttr){vB(Cg,Wt);continue}if(!_m&&sf(/\/>/i,Sg)){vB(Cg,Wt);continue}tp&&aC([gs,Gs,Tr],MV=>{Sg=DS(Sg,MV," ")});const RV=Am(Wt.nodeName);if(!AV(RV,nD,Sg)){vB(Cg,Wt);continue}if(_l&&(nD==="id"||nD==="name")&&(vB(Cg,Wt),Sg=Mu+Sg),F0&&sf(/((--!?|])>)|<\/(style|title)/i,Sg)){vB(Cg,Wt);continue}if(Ot&&typeof de=="object"&&typeof de.getAttributeType=="function"&&!Vh)switch(de.getAttributeType(RV,nD)){case"TrustedHTML":{Sg=Ot.createHTML(Sg);break}case"TrustedScriptURL":{Sg=Ot.createScriptURL(Sg);break}}if(Sg!==XG)try{Vh?Wt.setAttributeNS(Vh,Cg,Sg):Wt.setAttribute(Cg,Sg),M7(Wt)?Jb(Wt):cF(n.removed)}catch{}}Cx("afterSanitizeAttributes",Wt,null)},DV=function Rr(Wt){let xs=null;const Sr=EV(Wt);for(Cx("beforeSanitizeShadowDOM",Wt,null);xs=Sr.nextNode();)Cx("uponSanitizeShadowNode",xs,null),!yB(xs)&&(xs.content instanceof f&&Rr(xs.content),OV(xs));Cx("afterSanitizeShadowDOM",Wt,null)};return n.sanitize=function(Rr){let Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xs=null,Sr=null,bu=null,np=null;if(Q4=!Rr,Q4&&(Rr="<!-->"),typeof Rr!="string"&&!_V(Rr))if(typeof Rr.toString=="function"){if(Rr=Rr.toString(),typeof Rr!="string")throw GE("dirty is not a string, aborting")}else throw GE("toString is not a function");if(!n.isSupported)return Rr;if(Zp||Lt(Wt),n.removed=[],typeof Rr=="string"&&(Nu=!1),Nu){if(Rr.nodeName){const Sx=Am(Rr.nodeName);if(!us[Sx]||po[Sx])throw GE("root node is forbidden and cannot be sanitized in-place")}}else if(Rr instanceof k)xs=TV("<!---->"),Sr=xs.ownerDocument.importNode(Rr,!0),Sr.nodeType===JE.element&&Sr.nodeName==="BODY"||Sr.nodeName==="HTML"?xs=Sr:xs.appendChild(Sr);else{if(!nm&&!tp&&!ng&&Rr.indexOf("<")===-1)return Ot&&is?Ot.createHTML(Rr):Rr;if(xs=TV(Rr),!xs)return nm?null:is?yn:""}xs&&Gp&&Jb(xs.firstChild);const Cg=EV(Nu?Rr:xs);for(;bu=Cg.nextNode();)yB(bu)||(bu.content instanceof f&&DV(bu.content),OV(bu));if(Nu)return Rr;if(nm){if(qp)for(np=sn.call(xs.ownerDocument);xs.firstChild;)np.appendChild(xs.firstChild);else np=xs;return(bo.shadowroot||bo.shadowrootmode)&&(np=En.call(a,np,!0)),np}let Vh=ng?xs.outerHTML:xs.innerHTML;return ng&&us["!doctype"]&&xs.ownerDocument&&xs.ownerDocument.doctype&&xs.ownerDocument.doctype.name&&sf(gF,xs.ownerDocument.doctype.name)&&(Vh="<!DOCTYPE "+xs.ownerDocument.doctype.name+`>
`+Vh),tp&&aC([gs,Gs,Tr],Sx=>{Vh=DS(Vh,Sx," ")}),Ot&&is?Ot.createHTML(Vh):Vh},n.setConfig=function(){let Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt(Rr),Zp=!0},n.clearConfig=function(){Kp=null,Zp=!1},n.isValidAttribute=function(Rr,Wt,xs){Kp||Lt({});const Sr=Am(Rr),bu=Am(Wt);return AV(Sr,bu,xs)},n.addHook=function(Rr,Wt){typeof Wt=="function"&&(Io[Rr]=Io[Rr]||[],OS(Io[Rr],Wt))},n.removeHook=function(Rr){if(Io[Rr])return cF(Io[Rr])},n.removeHooks=function(Rr){Io[Rr]&&(Io[Rr]=[])},n.removeAllHooks=function(){Io={}},n}var cC=O8();const hF=bn.each,D8=bn.trim,R8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],M8={ftp:21,http:80,https:443,mailto:25},N8=["img","video"],qf=(e,n)=>Qe(e)?!e:Qe(n)?!ce(N8,n):!0,QE=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Pp=(e,n,s)=>{const a=QE(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(a)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(a)?qf(e.allow_svg_data_urls,s)&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)};class Wu{static parseDataUri(n){let s;const a=decodeURIComponent(n).split(","),l=/data:([^;]+)/.exec(a[0]);return l&&(s=l[1]),{type:s,data:a[1]}}static isDomSafe(n,s,a={}){if(a.allow_script_urls)return!0;{const l=ah.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Pp(a,l,s)}}static getDocumentBaseUrl(n){var s;let a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=(s=n.href)!==null&&s!==void 0?s:"":a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a}constructor(n,s={}){this.path="",this.directory="",n=D8(n),this.settings=s;const a=s.base_uri,l=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){l.source=n;return}const f=n.indexOf("//")===0;if(n.indexOf("/")===0&&!f&&(n=(a&&a.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const k=a?a.path:new Wu(document.location.href).directory;if((a==null?void 0:a.protocol)==="")n="//mce_host"+l.toAbsPath(k,n);else{const O=/([^#?]*)([#?]?.*)/.exec(n);O&&(n=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(k,O[1])+O[2])}}n=n.replace(/@@/g,"(mce_at)");const v=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);v&&hF(R8,(k,O)=>{let F=v[O];F&&(F=F.replace(/\(mce_at\)/g,"@@")),l[k]=F}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),!l.port&&l.host==="mce_host"&&(l.port=a.port),(!l.host||l.host==="mce_host")&&(l.host=a.host),l.source=""),f&&(l.protocol="")}setPath(n){const s=/^(.*?)\/?(\w+)?$/.exec(n);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const s=new Wu(n,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const a=this.getURI(),l=s.getURI();if(a===l||a.charAt(a.length-1)==="/"&&a.substr(0,a.length-1)===l)return a;let f=this.toRelPath(this.path,s.path);return s.query&&(f+="?"+s.query),s.anchor&&(f+="#"+s.anchor),f}toAbsolute(n,s){const a=new Wu(n,{base_uri:this});return a.getURI(s&&this.isSameOrigin(a))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const s=this.protocol?M8[this.protocol]:null;if(s&&(this.port||s)==(n.port||s))return!0}return!1}toRelPath(n,s){let a=0,l="",f,v;const k=n.substring(0,n.lastIndexOf("/")).split("/"),O=s.split("/");if(k.length>=O.length){for(f=0,v=k.length;f<v;f++)if(f>=O.length||k[f]!==O[f]){a=f+1;break}}if(k.length<O.length){for(f=0,v=O.length;f<v;f++)if(f>=k.length||k[f]!==O[f]){a=f+1;break}}if(a===1)return s;for(f=0,v=k.length-(a-1);f<v;f++)l+="../";for(f=a-1,v=O.length;f<v;f++)f!==a-1?l+="/"+O[f]:l+=O[f];return l}toAbsPath(n,s){let a=0;const l=/\/$/.test(s)?"/":"",f=n.split("/"),v=s.split("/"),k=[];hF(f,K=>{K&&k.push(K)});const O=[];for(let K=v.length-1;K>=0;K--)if(!(v[K].length===0||v[K]===".")){if(v[K]===".."){a++;continue}if(a>0){a--;continue}O.push(v[K])}const F=k.length-a;let Z;return F<=0?Z=nn(O).join("/"):Z=k.slice(0,F).join("/")+"/"+nn(O).join("/"),Z.indexOf("/")!==0&&(Z="/"+Z),l&&Z.lastIndexOf("/")!==Z.length-1&&(Z+=l),Z}getURI(n=!1){let s;return(!this.source||n)&&(s="",n||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const bF=bn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),dx="data-mce-type";let vF=0;const GR=(e,n,s,a,l)=>{var f,v,k,O;const F=n.validate,Z=s.getSpecialElements();e.nodeType===Ec&&!n.allow_conditional_comments&&/^\[if/i.test((f=e.nodeValue)!==null&&f!==void 0?f:"")&&(e.nodeValue=" "+e.nodeValue);const K=(v=l==null?void 0:l.tagName)!==null&&v!==void 0?v:e.nodeName.toLowerCase();if(a!=="html"&&s.isValid(a)){Qe(l)&&(l.allowedTags[K]=!0);return}if(e.nodeType!==Bm||K==="body")return;const J=je.fromDom(e),de=Bc(J,dx),Te=pl(J,"data-mce-bogus");if(!de&&ue(Te)){Te==="all"?Zr(J):Su(J);return}const be=s.getElementRule(K);if(F&&!be){Lo(Z,K)?Zr(J):Su(J);return}else Qe(l)&&(l.allowedTags[K]=!0);if(F&&be&&!de){if(oe((k=be.attributesForced)!==null&&k!==void 0?k:[],Me=>{Pi(J,Me.name,Me.value==="{$uid}"?`mce_${vF++}`:Me.value)}),oe((O=be.attributesDefault)!==null&&O!==void 0?O:[],Me=>{Bc(J,Me.name)||Pi(J,Me.name,Me.value==="{$uid}"?`mce_${vF++}`:Me.value)}),be.attributesRequired&&!De(be.attributesRequired,Me=>Bc(J,Me))){Su(J);return}if(be.removeEmptyAttrs&&_i(J)){Su(J);return}be.outputName&&be.outputName!==K&&WC(J,be.outputName)}},B8=(e,n,s,a,l)=>{const f=e.tagName.toLowerCase(),{attrName:v,attrValue:k}=l;l.keepAttr=qR(n,s,a,f,v,k),l.keepAttr?(l.allowedAttributes[v]=!0,O3(v,s)&&(l.attrValue=v),n.allow_svg_data_urls&&cs(k,"data:image/svg+xml")&&(l.forceKeepAttr=!0)):FS(e,v)&&(l.forceKeepAttr=!0)},qR=(e,n,s,a,l,f)=>s!=="html"&&!Ea(a)?!0:!(l in bF&&Pp(e,f,a))&&(!e.validate||n.isValid(a,l)||cs(l,"data-")||cs(l,"aria-")),FS=(e,n)=>e.hasAttribute(dx)&&(n==="id"||n==="class"||n==="style"),O3=(e,n)=>e in n.getBoolAttrs(),dl=(e,n,s,a)=>{const{attributes:l}=e;for(let f=l.length-1;f>=0;f--){const v=l[f],k=v.name,O=v.value;!qR(n,s,a,e.tagName.toLowerCase(),k,O)&&!FS(e,k)?e.removeAttribute(k):O3(k,s)&&e.setAttribute(k,k)}},I8=(e,n,s)=>{const a=cC();return a.addHook("uponSanitizeElement",(l,f)=>{GR(l,e,n,s.track(l),f)}),a.addHook("uponSanitizeAttribute",(l,f)=>{B8(l,e,n,s.current(),f)}),a},F8=(e,n)=>{const a={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return a.PARSER_MEDIA_TYPE=n,e.allow_script_urls?a.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(a.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),a},PS=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};cC().sanitize(e,s)},LS=(e,n)=>{const s={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},a=cC();a.addHook("uponSanitizeElement",(l,f)=>{var v;const k=(v=f.tagName)!==null&&v!==void 0?v:l.nodeName.toLowerCase(),O=n.allow_mathml_annotation_encodings;if(k==="annotation"&&qt(O)&&O.length>0){const F=l.getAttribute("encoding");ue(F)&&ce(O,F)&&(f.allowedTags[k]=!0)}}),a.sanitize(e,s)},$S=e=>n=>{const s=D(n);if(s==="svg")PS(n);else if(s==="math")LS(n,e);else throw new Error("Not a namespace element")},HS=(e,n)=>{const s=te();if(e.sanitize){const a=I8(e,n,s);return{sanitizeHtmlElement:(f,v)=>{a.sanitize(f,F8(e,v)),a.removed=[],s.reset()},sanitizeNamespaceElement:$S(e)}}else return{sanitizeHtmlElement:(f,v)=>{const k=document.createNodeIterator(f,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let O;for(;O=k.nextNode();){const F=s.track(O);GR(O,e,n,F),so(O)&&dl(O,e,n,F)}s.reset()},sanitizeNamespaceElement:Kt}},e_=bn.makeMap,D3=bn.extend,R3=(e,n,s,a)=>{const l=e.name,f=l in s&&l!=="title"&&l!=="textarea"&&l!=="noscript",v=n.childNodes;for(let k=0,O=v.length;k<O;k++){const F=v[k],Z=new xm(F.nodeName.toLowerCase(),F.nodeType);if(so(F)){const K=F.attributes;for(let J=0,de=K.length;J<de;J++){const Te=K[J];Z.attr(Te.name,Te.value)}Ea(Z.name)&&(a(F),Z.value=F.innerHTML)}else _n(F)?(Z.value=F.data,f&&(Z.raw=!0)):(fc(F)||$s(F)||Uo(F))&&(Z.value=F.data);Ea(Z.name)||R3(Z,F,s,a),e.append(Z)}},P8=(e,n,s)=>{const a=[];for(let l=e,f=l;l;f=l,l=l.walk()){const v=l;oe(n,k=>k(v)),qn(v.parent)&&v!==e?l=f:a.push(v)}for(let l=a.length-1;l>=0;l--){const f=a[l];oe(s,v=>v(f))}},L8=(e,n,s,a)=>{const l=s.validate,f=n.getNonEmptyElements(),v=n.getWhitespaceElements(),k=D3(e_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),O=Dv(n),F=/[ \t\r\n]+/g,Z=/^[ \t\r\n]+/,K=/[ \t\r\n]+$/,J=gt=>{let bt=gt.parent;for(;Qe(bt);){if(bt.name in v)return!0;bt=bt.parent}return!1},de=gt=>{let bt=gt;for(;Qe(bt);){if(bt.name in O)return Hl(n,f,v,bt);bt=bt.parent}return!1},Te=gt=>gt.name in k||ip(n,gt)||Ea(gt.name)&&gt.parent===e,be=(gt,bt)=>{const Ot=bt?gt.prev:gt.next;return Qe(Ot)||qn(gt.parent)?!1:Te(gt.parent)&&(gt.parent!==e||a.isRootContent===!0)};return[gt=>{var bt;if(gt.type===3&&!J(gt)){let Ot=(bt=gt.value)!==null&&bt!==void 0?bt:"";Ot=Ot.replace(F," "),(_I(gt.prev,Te)||be(gt,!0))&&(Ot=Ot.replace(Z,"")),Ot.length===0||Ot===" "&&gt.prev&&gt.prev.type===Ec&&gt.next&&gt.next.type===Ec?gt.remove():gt.value=Ot}},gt=>{var bt;if(gt.type===1){const Ot=n.getElementRule(gt.name);if(l&&Ot){const yn=Hl(n,f,v,gt);Ot.paddInEmptyBlock&&yn&&de(gt)?cS(s,a,Te,gt):Ot.removeEmpty&&yn?Te(gt)?gt.remove():gt.unwrap():Ot.paddEmpty&&(yn||p0(gt))&&cS(s,a,Te,gt)}}else if(gt.type===3&&!J(gt)){let Ot=(bt=gt.value)!==null&&bt!==void 0?bt:"";(gt.next&&Te(gt.next)||be(gt,!1))&&(Ot=Ot.replace(K,"")),Ot.length===0?gt.remove():gt.value=Ot}}]},KR=(e,n)=>{var s;const a=(s=n.forced_root_block)!==null&&s!==void 0?s:e.forced_root_block;return a===!1?"":a===!0?"p":a},zS=(e={},n=ya())=>{const s=nF(),a=nF(),l={validate:!0,root_name:"body",sanitize:!0,...e},f=new DOMParser,v=HS(l,n),k=(bt,Ot,yn="html")=>{const Un=yn==="xhtml"?"application/xhtml+xml":"text/html",So=Lo(n.getSpecialElements(),Ot.toLowerCase()),sn=So?`<${Ot}>${bt}</${Ot}>`:bt,Ut=()=>yn==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${sn}</body></html>`:/^[\s]*<head/i.test(bt)||/^[\s]*<html/i.test(bt)||/^[\s]*<!DOCTYPE/i.test(bt)?`<html>${sn}</html>`:`<body>${sn}</body>`,En=f.parseFromString(Ut(),Un).body;return v.sanitizeHtmlElement(En,Un),So?En.firstChild:En},O=s.addFilter,F=s.getFilters,Z=s.removeFilter,K=a.addFilter,J=a.getFilters,de=a.removeFilter,Te=(bt,Ot)=>{uS(n,bt)&&Ot.push(bt)},be=(bt,Ot)=>{const yn=ue(Ot.attr(dx)),Un=Ot.type===1&&!Lo(bt,Ot.name)&&!ip(n,Ot)&&!Ea(Ot.name);return Ot.type===3||Un&&!yn},Me=(bt,Ot)=>{const yn=D3(e_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Un=/^[ \t\r\n]+/,So=/[ \t\r\n]+$/;let sn=bt.firstChild,Ut=null;const En=Io=>{var gs,Gs;Io&&(sn=Io.firstChild,sn&&sn.type===3&&(sn.value=(gs=sn.value)===null||gs===void 0?void 0:gs.replace(Un,"")),sn=Io.lastChild,sn&&sn.type===3&&(sn.value=(Gs=sn.value)===null||Gs===void 0?void 0:Gs.replace(So,"")))};if(n.isValidChild(bt.name,Ot.toLowerCase())){for(;sn;){const Io=sn.next;be(yn,sn)?(Ut||(Ut=new xm(Ot,1),Ut.attr(l.forced_root_block_attrs),bt.insert(Ut,sn)),Ut.append(sn)):(En(Ut),Ut=null),sn=Io}En(Ut)}},gt={schema:n,addAttributeFilter:K,getAttributeFilters:J,removeAttributeFilter:de,addNodeFilter:O,getNodeFilters:F,removeNodeFilter:Z,parse:(bt,Ot={})=>{var yn;const Un=l.validate,So=(yn=Ot.context)!==null&&yn!==void 0?yn:l.root_name,sn=k(bt,So,Ot.format);gi(n,sn);const Ut=new xm(So,11);R3(Ut,sn,n.getSpecialElements(),v.sanitizeNamespaceElement),sn.innerHTML="";const[En,Io]=L8(Ut,n,l,Ot),gs=[],Gs=Un?El=>Te(El,gs):Kt,Tr={nodes:{},attributes:{}},za=El=>_E(F(),J(),El,Tr);if(P8(Ut,[En,za],[Io,Gs]),gs.reverse(),Un&&gs.length>0)if(Ot.context){const{pass:El,fail:tm}=At(gs,gd=>gd.parent===Ut);da(tm,n,Ut,za),Ot.invalid=El.length>0}else da(gs,n,Ut,za);const ci=KR(l,Ot);return ci&&(Ut.name==="body"||Ot.isRootContent)&&Me(Ut,ci),Ot.invalid||f0(Tr,Ot),Ut}};return ES(gt,l),tv(gt,l,n),gt},YR=e=>Y1(e)?Gy({validate:!1}).serialize(e):e,XR=(e,n,s)=>{const a=YR(e),l=n(a);if(l.isDefaultPrevented())return l;if(Y1(e))if(l.content!==a){const f=zS({validate:!1,forced_root_block:!1,...s}).parse(l.content,{context:e.name});return{...l,content:f}}else return{...l,content:e};else return l},yF=e=>({sanitize:Yv(e),sandbox_iframes:kT(e),sandbox_iframes_exclusions:S2(e)}),pu=(e,n)=>{if(n.no_events)return zc.value(n);{const s=uy(e,n);return s.isDefaultPrevented()?zc.error(dy(e,{content:"",...s}).content):zc.value(s)}},Ih=(e,n,s)=>s.no_events?n:XR(n,l=>dy(e,{...s,content:l}),yF(e)).content,JR=(e,n)=>{if(n.no_events)return zc.value(n);{const s=XR(n.content,a=>r2(e,{...n,content:a}),yF(e));return s.isDefaultPrevented()?(aT(e,s),zc.error(void 0)):zc.value(s)}},lC=(e,n,s)=>{s.no_events||aT(e,{...s,content:n})},M3=(e,n,s)=>({element:e,width:n,rows:s}),QR=(e,n)=>({element:e,cells:n}),uC=(e,n)=>({x:e,y:n}),xF=(e,n)=>Yi(e,n).bind(Ua).getOr(1),Fh=(e,n,s,a,l)=>{const f=xF(l,"rowspan"),v=xF(l,"colspan"),k=e.rows;for(let O=s;O<s+f;O++){k[O]||(k[O]=QR(Ix(a),[]));for(let F=n;F<n+v;F++){const Z=k[O].cells;Z[F]=O===s&&F===n?l:pp(l)}}},$8=(e,n,s)=>{const a=e.rows;return!!(a[s]?a[s].cells:[])[n]},H8=(e,n,s)=>{for(;$8(e,n,s);)n++;return n},N3=e=>it(e,(n,s)=>s.cells.length>n?s.cells.length:n,0),B3=(e,n)=>{const s=e.rows;for(let a=0;a<s.length;a++){const l=s[a].cells;for(let f=0;f<l.length;f++)if(Lr(l[f],n))return Y.some(uC(f,a))}return Y.none()},eM=(e,n,s,a,l)=>{const f=[],v=e.rows;for(let k=s;k<=l;k++){const O=v[k].cells,F=n<a?O.slice(n,a+1):O.slice(a,n+1);f.push(QR(v[k].element,F))}return f},I3=(e,n,s)=>{const a=n.x,l=n.y,f=s.x,v=s.y,k=l<v?eM(e,a,l,f,v):eM(e,a,v,f,l);return M3(e.element,N3(k),k)},Vb=(e,n)=>{const s=pp(e.element),a=je.fromTag("tbody");return vd(a,n),va(s,a),s},tM=e=>Ne(e.rows,n=>{const s=Ne(n.cells,l=>{const f=Ix(l);return tr(f,"colspan"),tr(f,"rowspan"),f}),a=pp(n.element);return vd(a,s),a}),wF=e=>{const n=M3(pp(e),0,[]);return oe(ll(e,"tr"),(s,a)=>{oe(ll(s,"td,th"),(l,f)=>{Fh(n,H8(n,f,a),a,s,l)})}),M3(n.element,N3(n.rows),n.rows)},F3=e=>Vb(e,tM(e)),nM=(e,n,s)=>B3(e,n).bind(a=>B3(e,s).map(l=>I3(e,a,l))),P3=e=>hn(e,n=>_e(n)==="ul"||_e(n)==="ol"),VS=(e,n)=>hn(e,s=>_e(s)==="li"&&vw(s,n)).fold(Le([]),s=>P3(e).map(a=>{const l=je.fromTag(_e(a)),f=Er(Cu(a),(v,k)=>cs(k,"list-style"));return Ws(l,f),[je.fromTag("li"),l]}).getOr([])),oM=(e,n)=>{const s=it(n,(a,l)=>(va(l,a),l),e);return n.length>0?mO([s]):s},CF=e=>cb(e)?jl(e).filter(x1).fold(Le([]),n=>[e,n]):x1(e)?[e]:[],L3=(e,n,s)=>{const a=je.fromDom(n.commonAncestorContainer),l=W1(a,e),f=dt(l,O=>s.isWrapper(_e(O))),v=VS(l,n),k=f.concat(v.length?v:CF(a));return Ne(k,pp)},SF=()=>mO([]),kF=(e,n,s)=>oM(je.fromDom(n.cloneContents()),L3(e,n,s)),mx=(e,n)=>hf(n,"table",Se(Lr,e)),sM=(e,n)=>mx(e,n[0]).bind(s=>{const a=n[0],l=n[n.length-1],f=wF(s);return nM(f,a,l).map(v=>mO([F3(v)]))}).getOrThunk(SF),$3=(e,n,s)=>n.length>0&&n[0].collapsed?SF():kF(e,n[0],s),US=(e,n,s)=>{const a=hw(n,e);return a.length>0?sM(e,a):$3(e,n,s)},t_=(e,n)=>n>=0&&n<e.length&&Sh(e.charAt(n)),n_=e=>Nl(e.innerText),TF=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),Nd=e=>Y.from(e.selection.getRng()).map(n=>{var s;const a=Y.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),l=e.getBody(),f=TF(a),v=je.fromDom(n.cloneContents());KB(v),Lw(v);const k=e.dom.add(l,f,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),O=n_(k),F=Nl((s=k.textContent)!==null&&s!==void 0?s:"");if(e.dom.remove(k),t_(F,0)||t_(F,F.length-1)){const Z=a.getOr(l),K=n_(Z),J=K.indexOf(O);if(J===-1)return O;{const de=t_(K,J-1),Te=t_(K,J+O.length);return(de?" ":"")+O+(Te?" ":"")}}else return O}).getOr(""),z8=(e,n)=>{const s=e.selection.getRng(),a=e.dom.create("body"),l=e.selection.getSel(),f=yO(e,zT(l)),v=n.contextual?US(je.fromDom(e.getBody()),f,e.schema).dom:s.cloneContents();return v&&a.appendChild(v),e.selection.serializer.serialize(a,n)},V8=(e,n)=>{if(n.format==="text")return Nd(e);{const s=z8(e,n);return n.format==="tree"?s:e.selection.isCollapsed()?"":s}},U8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),rM=(e,n,s={})=>{const a=U8(s,n);return pu(e,a).fold(Qt,l=>{const f=V8(e,l);return Ih(e,f,l)})},WS=0,aM=1,H3=2,iM=(e,n)=>{const s=e.length+n.length+2,a=new Array(s),l=new Array(s),f=(Z,K,J)=>({start:Z,end:K,diag:J}),v=(Z,K,J,de,Te)=>{const be=O(Z,K,J,de);if(be===null||be.start===K&&be.diag===K-de||be.end===Z&&be.diag===Z-J){let Me=Z,Xe=J;for(;Me<K||Xe<de;)Me<K&&Xe<de&&e[Me]===n[Xe]?(Te.push([WS,e[Me]]),++Me,++Xe):K-Z>de-J?(Te.push([H3,e[Me]]),++Me):(Te.push([aM,n[Xe]]),++Xe)}else{v(Z,be.start,J,be.start-be.diag,Te);for(let Me=be.start;Me<be.end;++Me)Te.push([WS,e[Me]]);v(be.end,K,be.end-be.diag,de,Te)}},k=(Z,K,J,de)=>{let Te=Z;for(;Te-K<de&&Te<J&&e[Te]===n[Te-K];)++Te;return f(Z,Te,K)},O=(Z,K,J,de)=>{const Te=K-Z,be=de-J;if(Te===0||be===0)return null;const Me=Te-be,Xe=be+Te,gt=(Xe%2===0?Xe:Xe+1)/2;a[1+gt]=Z,l[1+gt]=K+1;let bt,Ot,yn,Un,So;for(bt=0;bt<=gt;++bt){for(Ot=-bt;Ot<=bt;Ot+=2){for(yn=Ot+gt,Ot===-bt||Ot!==bt&&a[yn-1]<a[yn+1]?a[yn]=a[yn+1]:a[yn]=a[yn-1]+1,Un=a[yn],So=Un-Z+J-Ot;Un<K&&So<de&&e[Un]===n[So];)a[yn]=++Un,++So;if(Me%2!==0&&Me-bt<=Ot&&Ot<=Me+bt&&l[yn-Me]<=a[yn])return k(l[yn-Me],Ot+Z-J,K,de)}for(Ot=Me-bt;Ot<=Me+bt;Ot+=2){for(yn=Ot+gt-Me,Ot===Me-bt||Ot!==Me+bt&&l[yn+1]<=l[yn-1]?l[yn]=l[yn+1]-1:l[yn]=l[yn-1],Un=l[yn]-1,So=Un-Z+J-Ot;Un>=Z&&So>=J&&e[Un]===n[So];)l[yn]=Un--,So--;if(Me%2===0&&-bt<=Ot&&Ot<=bt&&l[yn]<=a[yn+Me])return k(l[yn],Ot+Z-J,K,de)}}return null},F=[];return v(0,e.length,0,n.length,F),F},EF=e=>so(e)?e.outerHTML:_n(e)?ah.encodeRaw(e.data,!1):fc(e)?"<!--"+e.data+"-->":"",W8=e=>{let n;const s=document.createElement("div"),a=document.createDocumentFragment();for(e&&(s.innerHTML=e);n=s.firstChild;)a.appendChild(n);return a},Ub=(e,n,s)=>{const a=W8(n);if(e.hasChildNodes()&&s<e.childNodes.length){const l=e.childNodes[s];e.insertBefore(a,l)}else e.appendChild(a)},_F=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const s=e.childNodes[n];e.removeChild(s)}},j8=(e,n)=>{let s=0;oe(e,a=>{a[0]===WS?s++:a[0]===aM?(Ub(n,a[1],s),s++):a[0]===H3&&_F(n,s)})},cM=(e,n)=>dt(Ne(gr(e.childNodes),B(Nl,EF)),s=>s.length>0),AF=(e,n)=>{const s=Ne(gr(n.childNodes),EF);return j8(iM(s,e),n),n},z3=Ht(()=>document.implementation.createHTMLDocument("undo")),OF=e=>e.querySelector("iframe")!==null,lM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),DF=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),dC=e=>{const n=e.serializer.getTempAttrs(),s=qB(e.getBody(),n);return OF(s)?lM(cM(s)):DF(Nl(s.innerHTML))},Bd=(e,n,s)=>{const a=s?n.beforeBookmark:n.bookmark;n.type==="fragmented"?AF(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Qe(a)&&My(a)?!a.isFakeCaret:!0}),a&&(e.selection.moveToBookmark(a),e.selection.scrollIntoView())},o_=e=>e.type==="fragmented"?e.fragments.join(""):e.content,s_=e=>{const n=je.fromTag("body",z3());return am(n,o_(e)),oe(ll(n,"*[data-mce-bogus]"),Su),mi(n)},mC=(e,n)=>o_(e)===o_(n),r_=(e,n)=>s_(e)===s_(n),Xd=(e,n)=>!e||!n?!1:mC(e,n)?!0:r_(e,n),Wb=e=>e.get()===0,jS=(e,n,s)=>{Wb(s)&&(e.typing=n)},w0=(e,n)=>{e.typing&&(jS(e,!1,n),e.add())},RF=e=>{e.typing&&(e.typing=!1,e.add())},Z8=(e,n,s)=>{Wb(n)&&s.set(Il(e.selection))},a_=(e,n,s,a,l,f,v)=>{const k=dC(e),O=bn.extend(f||{},k);if(!Wb(a)||e.removed)return null;const F=n.data[s.get()];if(e.dispatch("BeforeAddUndo",{level:O,lastLevel:F,originalEvent:v}).isDefaultPrevented()||F&&Xd(F,O))return null;n.data[s.get()]&&l.get().each(J=>{n.data[s.get()].beforeBookmark=J});const Z=p2(e);if(Z&&n.data.length>Z){for(let J=0;J<n.data.length-1;J++)n.data[J]=n.data[J+1];n.data.length--,s.set(n.data.length)}O.bookmark=Il(e.selection),s.get()<n.data.length-1&&(n.data.length=s.get()+1),n.data.push(O),s.set(n.data.length-1);const K={level:O,lastLevel:F,originalEvent:v};return s.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",K),e.dispatch("change",K)):e.dispatch("AddUndo",K),O},ZS=(e,n,s)=>{n.data=[],s.set(0),n.typing=!1,e.dispatch("ClearUndos")},V3=(e,n,s,a,l)=>{if(n.transact(a)){const f=n.data[s.get()].bookmark,v=n.data[s.get()-1];Bd(e,v,!0),n.transact(l)&&(n.data[s.get()-1].beforeBookmark=f)}},MF=(e,n,s)=>{let a;return n.get()<s.length-1&&(n.set(n.get()+1),a=s[n.get()],Bd(e,a,!1),e.setDirty(!0),e.dispatch("Redo",{level:a})),a},NF=(e,n,s,a)=>{let l;return n.typing&&(n.add(),n.typing=!1,jS(n,!1,s)),a.get()>0&&(a.set(a.get()-1),l=n.data[a.get()],Bd(e,l,!0),e.setDirty(!0),e.dispatch("Undo",{level:l})),l},G8=e=>{e.clear(),e.add()},i_=(e,n,s)=>s.get()>0||n.typing&&n.data[0]&&!Xd(dC(e),n.data[0]),c_=(e,n)=>n.get()<e.data.length-1&&!e.typing,uM=(e,n,s)=>(w0(e,n),e.beforeChange(),e.ignore(s),e.add()),BF=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},l_=(e,n)=>{const s=e.dom,a=Qe(n)?n:e.getBody();oe(s.select("table,a",a),l=>{switch(l.nodeName){case"TABLE":const f=v2(e),v=s.getAttrib(l,"border");(!v||v==="0")&&e.hasVisual?s.addClass(l,f):s.removeClass(l,f);break;case"A":if(!s.getAttrib(l,"href")){const k=s.getAttrib(l,"name")||l.id,O=Vu(e);k&&e.hasVisual?s.addClass(l,O):s.removeClass(l,O)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Lp=e=>({init:{bindEvents:Kt},undoManager:{beforeChange:(n,s)=>Z8(e,n,s),add:(n,s,a,l,f,v)=>a_(e,n,s,a,l,f,v),undo:(n,s,a)=>NF(e,n,s,a),redo:(n,s)=>MF(e,n,s),clear:(n,s)=>ZS(e,n,s),reset:n=>G8(n),hasUndo:(n,s)=>i_(e,n,s),hasRedo:(n,s)=>c_(n,s),transact:(n,s,a)=>uM(n,s,a),ignore:(n,s)=>BF(n,s),extra:(n,s,a,l)=>V3(e,n,s,a,l)},formatter:{match:(n,s,a,l)=>LE(e,n,s,a,l),matchAll:(n,s)=>Np(e,n,s),matchNode:(n,s,a,l)=>$b(e,n,s,a,l),canApply:n=>FI(e,n),closest:n=>fS(e,n),apply:(n,s,a)=>v0(e,n,s,a),remove:(n,s,a,l)=>YI(e,n,s,a,l),toggle:(n,s,a)=>w3(e,n,s,a),formatChanged:(n,s,a,l,f)=>tF(e,n,s,a,l,f)},editor:{getContent:n=>SO(e,n),setContent:(n,s)=>Kw(e,n,s),insertContent:(n,s)=>bg(e,n,s),addVisual:n=>l_(e,n)},selection:{getContent:(n,s)=>rM(e,n,s)},autocompleter:{addDecoration:Kt,removeDecoration:Kt},raw:{getModel:()=>Y.none()}}),U3=e=>{const n=F=>ve(F)?F:{},{init:s,undoManager:a,formatter:l,editor:f,selection:v,autocompleter:k,raw:O}=e;return{init:{bindEvents:s.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(F,Z,K)=>a.transact(K),ignore:(F,Z)=>a.ignore(Z),extra:(F,Z,K,J)=>a.extra(K,J)},formatter:{match:(F,Z,K,J)=>l.match(F,n(Z),J),matchAll:l.matchAll,matchNode:l.matchNode,canApply:F=>l.canApply(F),closest:F=>l.closest(F),apply:(F,Z,K)=>l.apply(F,n(Z)),remove:(F,Z,K,J)=>l.remove(F,n(Z)),toggle:(F,Z,K)=>l.toggle(F,n(Z)),formatChanged:(F,Z,K,J,de)=>l.formatChanged(Z,K,J,de)},editor:{getContent:F=>f.getContent(F),setContent:(F,Z)=>({content:f.setContent(F,Z),html:""}),insertContent:(F,Z)=>(f.insertContent(F),""),addVisual:f.addVisual},selection:{getContent:(F,Z)=>v.getContent(Z)},autocompleter:{addDecoration:k.addDecoration,removeDecoration:k.removeDecoration},raw:{getModel:()=>Y.some(O.getRawModel())}}},q8=()=>{const e=Le(null),n=Le("");return{init:{bindEvents:Kt},undoManager:{beforeChange:Kt,add:e,undo:e,redo:e,clear:Kt,reset:Kt,hasUndo:$e,hasRedo:$e,transact:e,ignore:Kt,extra:Kt},formatter:{match:$e,matchAll:Le([]),matchNode:Le(void 0),canApply:$e,closest:n,apply:Kt,remove:Kt,toggle:Kt,formatChanged:Le({unbind:Kt})},editor:{getContent:n,setContent:Le({content:"",html:""}),insertContent:Le(""),addVisual:Kt},selection:{getContent:n},autocompleter:{addDecoration:Kt,removeDecoration:Kt},raw:{getModel:Le(Y.none())}}},$p=e=>Lo(e.plugins,"rtc"),u_=e=>kr(e.plugins,"rtc").bind(n=>Y.from(n.setup)),dM=e=>{const n=e;return u_(e).fold(()=>(n.rtcInstance=Lp(e),Y.none()),s=>(n.rtcInstance=q8(),Y.some(()=>s().then(a=>(n.rtcInstance=U3(a),a.rtc.isRemote)))))},d_=e=>e.rtcInstance?e.rtcInstance:Lp(e),hu=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},K8=(e,n,s)=>{hu(e).undoManager.beforeChange(n,s)},Y8=(e,n,s,a,l,f,v)=>hu(e).undoManager.add(n,s,a,l,f,v),IF=(e,n,s,a)=>hu(e).undoManager.undo(n,s,a),FF=(e,n,s)=>hu(e).undoManager.redo(n,s),X8=(e,n,s)=>{hu(e).undoManager.clear(n,s)},PF=(e,n)=>{hu(e).undoManager.reset(n)},GS=(e,n,s)=>hu(e).undoManager.hasUndo(n,s),J8=(e,n,s)=>hu(e).undoManager.hasRedo(n,s),Q8=(e,n,s,a)=>hu(e).undoManager.transact(n,s,a),mM=(e,n,s)=>{hu(e).undoManager.ignore(n,s)},W3=(e,n,s,a,l)=>{hu(e).undoManager.extra(n,s,a,l)},qS=(e,n,s,a,l)=>hu(e).formatter.match(n,s,a,l),LF=(e,n,s)=>hu(e).formatter.matchAll(n,s),gM=(e,n,s,a,l)=>hu(e).formatter.matchNode(n,s,a,l),$F=(e,n)=>hu(e).formatter.canApply(n),HF=(e,n)=>hu(e).formatter.closest(n),fM=(e,n,s,a)=>{hu(e).formatter.apply(n,s,a)},zF=(e,n,s,a,l)=>{hu(e).formatter.remove(n,s,a,l)},VF=(e,n,s,a)=>{hu(e).formatter.toggle(n,s,a)},UF=(e,n,s,a,l,f)=>hu(e).formatter.formatChanged(n,s,a,l,f),eL=(e,n)=>d_(e).editor.getContent(n),pM=(e,n,s)=>d_(e).editor.setContent(n,s),Ni=(e,n,s)=>d_(e).editor.insertContent(n,s),m_=(e,n,s)=>hu(e).selection.getContent(n,s),hM=(e,n)=>hu(e).editor.addVisual(n),bM=e=>hu(e).init.bindEvents(),WF=(e,n={})=>{const s=n.format?n.format:"html";return m_(e,s,n)},KS=e=>e.dom.length===0?(Zr(e),Y.none()):Y.some(e),jF=(e,n)=>e.filter(s=>id.isBookmarkNode(s.dom)).bind(n?ps:rl),vM=(e,n,s,a,l)=>{const f=e.dom,v=n.dom,k=a?f.length:v.length;a?(iR(f,v,l,!1,!a),s.setStart(v,k)):(iR(v,f,l,!1,!a),s.setEnd(v,k))},tL=(e,n,s)=>{jl(e).each(a=>{const l=e.dom;n&&Ww(a,Xt(l,0),s)?vE(l,0,s):!n&&jw(a,Xt(l,l.length),s)&&aR(l,l.length,s)})},ZF=(e,n,s,a,l)=>{e.bind(f=>((a?aR:vE)(f.dom,a?f.dom.length:0,l),n.filter(Da).map(k=>vM(f,k,s,a,l)))).orThunk(()=>jF(n,a).or(n).filter(Da).map(v=>tL(v,a,l)))},GF=(e,n,s)=>{const a=Y.from(n.firstChild).map(je.fromDom),l=Y.from(n.lastChild).map(je.fromDom);e.deleteContents(),e.insertNode(n);const f=a.bind(rl).filter(Da).bind(KS),v=l.bind(ps).filter(Da).bind(KS);ZF(f,a,e,!0,s),ZF(v,l,e,!1,s),e.collapse(!1)},nL=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),qF=(e,n)=>{if(n.format!=="raw"){const s=e.selection.getRng(),a=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),l=a?{context:a.nodeName.toLowerCase()}:{},f=e.parser.parse(n.content,{forced_root_block:!1,...l,...n});return Gy({validate:!1},e.schema).serialize(f)}else return n.content},g_=(e,n,s={})=>{const a=nL(s,n);JR(e,a).each(l=>{const f=qF(e,l),v=e.selection.getRng();GF(v,v.createContextualFragment(f),e.schema),e.selection.setRng(v),Fw(e,v),lC(e,f,l)})},KF=(e,n,s)=>{if(Lo(e,n)){const a=dt(e[n],l=>l!==s);a.length===0?delete e[n]:e[n]=a}};var YS=(e,n)=>{let s,a;const l=(k,O)=>hn(O,F=>e.is(F,k)),f=k=>e.getParents(k,void 0,e.getRoot()),v=()=>{s={},a={},n.on("NodeChange",k=>{const O=k.element,F=f(O),Z={};vn(s,(K,J)=>{l(J,F).each(de=>{a[J]||(oe(K,Te=>{Te(!0,{node:de,selector:J,parents:F})}),a[J]=K),Z[J]=K})}),vn(a,(K,J)=>{Z[J]||(delete a[J],oe(K,de=>{de(!1,{node:O,selector:J,parents:F})}))})})};return{selectorChangedWithUnbind:(k,O)=>(s||v(),s[k]||(s[k]=[]),s[k].push(O),l(k,f(n.selection.getStart())).each(()=>{a[k]=s[k]}),{unbind:()=>{KF(s,k,O),KF(a,k,O)}})}};const XS=e=>!!(e&&e.ownerDocument)&&Xi(je.fromDom(e.ownerDocument),je.fromDom(e)),JS=e=>e?XS(e.startContainer)&&XS(e.endContainer):!1,j3=(e,n,s,a)=>{let l,f;const{selectorChangedWithUnbind:v}=YS(e,a),k=(to,us)=>{const pa=e.createRng();Qe(to)&&Qe(us)?(pa.setStart(to,us),pa.setEnd(to,us),Ot(pa),Xe(!1)):(F2(e,pa,a.getBody(),!0),Ot(pa))},O=to=>WF(a,to),F=(to,us)=>g_(a,to,us),Z=to=>HB(a.getBody(),bt(),to),K=to=>zB(a.getBody(),bt(),to),J=(to,us)=>tm.getBookmark(to,us),de=to=>tm.moveToBookmark(to),Te=(to,us)=>(WB(e,to,us).each(Ot),to),be=()=>{const to=bt(),us=gt();return!to||to.item?!1:to.compareEndPoints?to.compareEndPoints("StartToEnd",to)===0:!us||to.collapsed},Me=()=>{if(a.mode.isReadOnly())return!1;const to=bt(),us=a.getBody().querySelectorAll('[data-mce-selected="1"]');return us.length>0?rt(us,pa=>e.isEditable(pa.parentElement)):$B(e,to)},Xe=to=>{const us=bt();us.collapse(!!to),Ot(us)},gt=()=>n.getSelection?n.getSelection():n.document.selection,bt=()=>{let to;const us=(bo,Is,Ps)=>{try{return Is.compareBoundaryPoints(bo,Ps)}catch{return-1}},pa=n.document;if(Qe(a.bookmark)&&!hc(a)){const bo=QT(a);if(bo.isSome())return bo.map(Is=>yO(a,[Is])[0]).getOr(pa.createRange())}try{const bo=gt();bo&&!oh(bo.anchorNode)&&(bo.rangeCount>0?to=bo.getRangeAt(0):to=pa.createRange(),to=yO(a,[to])[0])}catch{}if(to||(to=pa.createRange()),sh(to.startContainer)&&to.collapsed){const bo=e.getRoot();to.setStart(bo,0),to.setEnd(bo,0)}return l&&f&&(us(to.START_TO_START,to,l)===0&&us(to.END_TO_END,to,l)===0?to=f:(l=null,f=null)),to},Ot=(to,us)=>{if(!JS(to))return;const pa=gt();if(to=a.dispatch("SetSelectionRange",{range:to,forward:us}).range,pa){f=to;try{pa.removeAllRanges(),pa.addRange(to)}catch{}us===!1&&pa.extend&&(pa.collapse(to.endContainer,to.endOffset),pa.extend(to.startContainer,to.startOffset)),l=pa.rangeCount>0?pa.getRangeAt(0):null}if(!to.collapsed&&to.startContainer===to.endContainer&&(pa!=null&&pa.setBaseAndExtent)&&to.endOffset-to.startOffset<2&&to.startContainer.hasChildNodes()){const Is=to.startContainer.childNodes[to.startOffset];Is&&Is.nodeName==="IMG"&&(pa.setBaseAndExtent(to.startContainer,to.startOffset,to.endContainer,to.endOffset),(pa.anchorNode!==to.startContainer||pa.focusNode!==to.endContainer)&&pa.setBaseAndExtent(Is,0,Is,1))}a.dispatch("AfterSetSelectionRange",{range:to,forward:us})},yn=to=>(F(e.getOuterHTML(to)),to),Un=()=>VB(a.getBody(),bt()),So=(to,us)=>UB(e,bt(),to,us),sn=()=>{const to=gt(),us=to==null?void 0:to.anchorNode,pa=to==null?void 0:to.focusNode;if(!to||!us||!pa||oh(us)||oh(pa))return!0;const bo=e.createRng(),Is=e.createRng();try{bo.setStart(us,to.anchorOffset),bo.collapse(!0),Is.setStart(pa,to.focusOffset),Is.collapse(!0)}catch{return!0}return bo.compareBoundaryPoints(bo.START_TO_START,Is)<=0},El={dom:e,win:n,serializer:s,editor:a,expand:(to={type:"word"})=>Ot(Kd(e).expand(bt(),to)),collapse:Xe,setCursorLocation:k,getContent:O,setContent:F,getBookmark:J,moveToBookmark:de,select:Te,isCollapsed:be,isEditable:Me,isForward:sn,setNode:yn,getNode:Un,getSel:gt,setRng:Ot,getRng:bt,getStart:Z,getEnd:K,getSelectedBlocks:So,normalize:()=>{const to=bt(),us=gt();if(!By(us)&&yw(a)){const pa=sE(e,to);return pa.each(bo=>{Ot(bo,sn())}),pa.getOr(to)}return to},selectorChanged:(to,us)=>(v(to,us),El),selectorChangedWithUnbind:v,getScrollContainer:()=>{let to,us=e.getRoot();for(;us&&us.nodeName!=="BODY";){if(us.scrollHeight>us.clientHeight){to=us;break}us=us.parentNode}return to},scrollIntoView:(to,us)=>{Qe(to)?LB(a,to,us):Fw(a,bt(),us)},placeCaretAt:(to,us)=>Ot(Z6(to,us,a.getDoc())),getBoundingClientRect:()=>{const to=bt();return to.collapsed?Xt.fromRangeStart(to).getClientRects()[0]:to.getBoundingClientRect()},destroy:()=>{n=l=f=null,gd.destroy()}},tm=id(El),gd=u0(El,a);return El.bookmarkManager=tm,El.controlSelection=gd,El},YF=(e,n,s)=>{n.addNodeFilter("br",(a,l,f)=>{const v=bn.extend({},s.getBlockElements()),k=s.getNonEmptyElements(),O=s.getWhitespaceElements();v.body=1;const F=Z=>Z.name in v||ip(s,Z);for(let Z=0,K=a.length;Z<K;Z++){let J=a[Z],de=J.parent;if(de&&F(de)&&J===de.lastChild){let Te=J.prev;for(;Te;){const be=Te.name;if(be!=="span"||Te.attr("data-mce-type")!=="bookmark"){be==="br"&&(J=null);break}Te=Te.prev}if(J&&(J.remove(),Hl(s,k,O,de))){const be=s.getElementRule(de.name);be&&(be.removeEmpty?de.remove():be.paddEmpty&&cS(e,f,F,de))}}else{let Te=J;for(;de&&de.firstChild===Te&&de.lastChild===Te&&(Te=de,!v[de.name]);)de=de.parent;if(Te===de){const be=new xm("#text",3);be.value=wc,J.replace(be)}}}})},XF=(e,n,s)=>{e.addAttributeFilter("data-mce-tabindex",(a,l)=>{let f=a.length;for(;f--;){const v=a[f];v.attr("tabindex",v.attr("data-mce-tabindex")),v.attr(l,null)}}),e.addAttributeFilter("src,href,style",(a,l)=>{const f="data-mce-"+l,v=n.url_converter,k=n.url_converter_scope;let O=a.length;for(;O--;){const F=a[O];let Z=F.attr(f);Z!==void 0?(F.attr(l,Z.length>0?Z:null),F.attr(f,null)):(Z=F.attr(l),l==="style"?Z=s.serializeStyle(s.parseStyle(Z),F.name):v&&(Z=v.call(k,Z,l,F.name)),F.attr(l,Z.length>0?Z:null))}}),e.addAttributeFilter("class",a=>{let l=a.length;for(;l--;){const f=a[l];let v=f.attr("class");v&&(v=v.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",v.length>0?v:null))}}),e.addAttributeFilter("data-mce-type",(a,l,f)=>{let v=a.length;for(;v--;){const k=a[v];k.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(Y.from(k.firstChild).exists(F=>{var Z;return!Wk((Z=F.value)!==null&&Z!==void 0?Z:"")})?k.unwrap():k.remove())}}),e.addNodeFilter("script,style",(a,l)=>{var f;const v=O=>O.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let k=a.length;for(;k--;){const O=a[k],F=O.firstChild,Z=(f=F==null?void 0:F.value)!==null&&f!==void 0?f:"";if(l==="script"){const K=O.attr("type");K&&O.attr("type",K==="mce-no/type"?null:K.replace(/^mce\-/,"")),n.element_format==="xhtml"&&F&&Z.length>0&&(F.value=`// <![CDATA[
`+v(Z)+`
// ]]>`)}else n.element_format==="xhtml"&&F&&Z.length>0&&(F.value=`<!--
`+v(Z)+`
-->`)}}),e.addNodeFilter("#comment",a=>{let l=a.length;for(;l--;){const f=a[l],v=f.value;n.preserve_cdata&&(v==null?void 0:v.indexOf("[CDATA["))===0?(f.name="#cdata",f.type=4,f.value=s.decode(v.replace(/^\[CDATA\[|\]\]$/g,""))):(v==null?void 0:v.indexOf("mce:protected "))===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(v).substr(14))}}),e.addNodeFilter("xml:namespace,input",(a,l)=>{let f=a.length;for(;f--;){const v=a[f];v.type===7?v.remove():v.type===1&&l==="input"&&!v.attr("type")&&v.attr("type","text")}}),e.addAttributeFilter("data-mce-type",a=>{oe(a,l=>{l.attr("data-mce-type")==="format-caret"&&(l.isEmpty(e.schema.getNonEmptyElements())?l.remove():l.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(a,l)=>{let f=a.length;for(;f--;)a[f].attr(l,null)}),n.remove_trailing_brs&&YF(n,e,e.schema)},Z3=e=>{const n=a=>(a==null?void 0:a.name)==="br",s=e.lastChild;if(n(s)){const a=s.prev;n(a)&&(s.remove(),a.remove())}},JF=(e,n,s)=>{let a;const l=e.dom;let f=n.cloneNode(!0);const v=document.implementation;if(v.createHTMLDocument){const k=v.createHTMLDocument("");bn.each(f.nodeName==="BODY"?f.childNodes:[f],O=>{k.body.appendChild(k.importNode(O,!0))}),f.nodeName!=="BODY"?f=k.body.firstChild:f=k.body,a=l.doc,l.doc=k}return pD(e,{...s,node:f}),a&&(l.doc=a),f},QF=(e,n)=>Qe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,e5=(e,n,s)=>QF(e,s)?JF(e,n,s):n,yM=(e,n,s)=>{bn.inArray(n,s)===-1&&(e.addAttributeFilter(s,(a,l)=>{let f=a.length;for(;f--;)a[f].attr(l,null)}),n.push(s))},t5=(e,n,s)=>!n.no_events&&e?n2(e,{...n,content:s}).content:s,oL=(e,n,s)=>{const a=Nl(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||jm(je.fromDom(n))?a:bn.trim(a)},n5=(e,n,s)=>{const a=s.selection?{forced_root_block:!1,...s}:s,l=e.parse(n,a);return Z3(l),l},sL=(e,n,s)=>Gy(e,n).serialize(s),o5=(e,n,s,a,l)=>{const f=sL(n,s,a);return t5(e,l,f)},rL=(e,n)=>{const s=["data-mce-selected"],a={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},l=n&&n.dom?n.dom:qs.DOM,f=n&&n.schema?n.schema:ya(a),v=zS(a,f);XF(v,a,l);const k=(O,F={})=>{const Z={format:"html",...F},K=e5(n,O,Z),J=oL(l,K,Z),de=n5(v,J,Z);return Z.format==="tree"?de:o5(n,a,f,de,Z)};return{schema:f,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:k,addRules:f.addValidElements,setRules:f.setValidElements,addTempAttr:Se(yM,v,s),getTempAttrs:Le(s),getNodeFilters:v.getNodeFilters,getAttributeFilters:v.getAttributeFilters,removeNodeFilter:v.removeNodeFilter,removeAttributeFilter:v.removeAttributeFilter}},xM=(e,n)=>{const s=rL(e,n);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},el="html",wM=(e,n)=>({...e,format:n,get:!0,getInner:!0}),CM=(e,n={})=>{const s=n.format?n.format:el,a=wM(n,s);return pu(e,a).fold(Qt,l=>{const f=eL(e,l);return Ih(e,f,l)})},s5="html",r5=(e,n)=>({format:s5,...e,set:!0,content:n}),C0=(e,n,s={})=>{const a=r5(s,n);return JR(e,a).map(l=>{const f=pM(e,l.content,l);return lC(e,f.html,l),f.content}).getOr(n)},W7="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),j7=[],Id="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),SM=[],G3=(e,n)=>{const s=dt(n,a=>Lo(e,a));return Mn(s)},kM=e=>{const n=G3(e,W7),s=e.forced_root_block;return(s===!1||s==="")&&n.push("forced_root_block (false only)"),Mn(n)},a5=e=>G3(e,j7),i5=(e,n)=>{const s=bn.makeMap(e.plugins," "),l=dt(n,f=>Lo(s,f));return Mn(l)},q3=e=>i5(e,Id),aL=e=>i5(e,SM.map(n=>n.name)),TM=(e,n)=>{const s=kM(e),a=q3(n),l=a.length>0,f=s.length>0,v=n.theme==="mobile";if(l||f||v){const k=`
- `,O=v?`

Themes:${k}mobile`:"",F=l?`

Plugins:${k}${a.join(k)}`:"",Z=f?`

Options:${k}${s.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+O+F+Z)}},K3=e=>hn(SM,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),EM=(e,n)=>{const s=a5(e),a=aL(n),l=a.length>0,f=s.length>0;if(l||f){const v=`
- `,k=l?`

Plugins:${v}${a.map(K3).join(v)}`:"",O=f?`

Options:${v}${s.join(v)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+k+O)}},c5=(e,n)=>{TM(e,n),EM(e,n)},gC=qs.DOM,_M=e=>{gC.setStyle(e.id,"display",e.orgDisplay)},gx=e=>Y.from(e).each(n=>n.destroy()),l5=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const s=e.selection;if(s){const a=s.dom;n.selection=s.win=s.dom=a.doc=null}},u5=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),gC.unbind(n,"submit reset",e.formEventDelegate))},d5=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:s}=e,a=e.getBody(),l=e.getElement();a&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Qe(l==null?void 0:l.nextSibling)&&gC.remove(l.nextSibling),oT(e),e.editorManager.remove(e),!e.inline&&a&&_M(e),sT(e),gC.remove(e.getContainer()),gx(n),gx(s),e.destroy()}},Kf=(e,n)=>{const{selection:s,dom:a}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),gx(s),gx(a)),u5(e),l5(e),e.destroyed=!0}},fx=(()=>{const e={};return{add:(l,f)=>{e[l]=f},get:l=>e[l]?e[l]:{icons:{}},has:l=>Lo(e,l)}})(),QS=Lu.ModelManager,AM=(e,n)=>n.dom[e],f_=(e,n)=>parseInt(_r(n,e),10),OM=Se(AM,"clientWidth"),m5=Se(AM,"clientHeight"),iL=Se(f_,"margin-top"),cL=Se(f_,"margin-left"),p_=e=>e.dom.getBoundingClientRect(),DM=(e,n,s)=>{const a=OM(e),l=m5(e);return n>=0&&s>=0&&n<=a&&s<=l},Y3=(e,n,s,a)=>{const l=p_(n),f=e?l.left+n.dom.clientLeft+cL(n):0,v=e?l.top+n.dom.clientTop+iL(n):0,k=s-f,O=a-v;return{x:k,y:O}},RM=(e,n,s)=>{const a=je.fromDom(e.getBody()),l=e.inline?a:df(a),f=Y3(e.inline,l,n,s);return DM(l,f.x,f.y)},h_=e=>Y.from(e).map(je.fromDom),g5=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return h_(n).map(Zl).getOr(!1)};var lL=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const f5=e=>{const n=[],s=()=>{const J=e.theme;return J&&J.getNotificationManagerImpl?J.getNotificationManagerImpl():lL()},a=()=>Y.from(n[0]),l=(J,de)=>J.type===de.type&&J.text===de.text&&!J.progressBar&&!J.timeout&&!de.progressBar&&!de.timeout,f=()=>{a().each(J=>{J.reposition()})},v=J=>{n.push(J)},k=J=>{Hn(n,de=>de===J).each(de=>{n.splice(de,1)})},O=(J,de=!0)=>e.removed||!g5(e)?{}:(de&&e.dispatch("BeforeOpenNotification",{notification:J}),hn(n,Te=>l(s().getArgs(Te),J)).getOrThunk(()=>{e.editorManager.setActive(e);const Te=s().open(J,()=>{k(Te)},()=>Lf(e));return v(Te),f(),e.dispatch("OpenNotification",{notification:{...Te}}),Te})),F=()=>{a().each(J=>{s().close(J),k(J),f()})},Z=Le(n);return(J=>{J.on("SkinLoaded",()=>{const de=f2(J);de&&O({text:de,type:"warning",timeout:0},!1),f()}),J.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(f)}),J.on("remove",()=>{oe(n.slice(),de=>{s().close(de)})}),J.on("keydown",de=>{var Te;const be=((Te=de.key)===null||Te===void 0?void 0:Te.toLowerCase())==="f12"||de.keyCode===123;de.altKey&&be&&(de.preventDefault(),a().map(Me=>je.fromDom(Me.getEl())).each(Me=>Zg(Me)))})})(e),{open:O,close:F,getNotifications:Z}},ek=Lu.PluginManager,Ph=Lu.ThemeManager;var X3=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const J3=e=>{let n=[];const s=()=>{const be=e.theme;return be&&be.getWindowManagerImpl?be.getWindowManagerImpl():X3()},a=(be,Me)=>(...Xe)=>Me?Me.apply(be,Xe):void 0,l=be=>{e.dispatch("OpenWindow",{dialog:be})},f=be=>{e.dispatch("CloseWindow",{dialog:be})},v=be=>{n.push(be),l(be)},k=be=>{f(be),n=dt(n,Me=>Me!==be),n.length===0&&e.focus()},O=()=>Y.from(n[n.length-1]),F=be=>{e.editorManager.setActive(e),Rw(e),e.ui.show();const Me=be();return v(Me),Me},Z=(be,Me)=>F(()=>s().open(be,Me,k)),K=be=>F(()=>s().openUrl(be,k)),J=(be,Me,Xe)=>{const gt=s();gt.alert(be,a(Xe||gt,Me))},de=(be,Me,Xe)=>{const gt=s();gt.confirm(be,a(Xe||gt,Me))},Te=()=>{O().each(be=>{s().close(be),k(be)})};return e.on("remove",()=>{oe(n,be=>{s().close(be)})}),{open:Z,openUrl:K,alert:J,confirm:de,close:Te}},MM=(e,n)=>{e.notificationManager.open({type:"error",text:n})},fC=(e,n)=>{e._skinLoaded?MM(e,n):e.on("SkinLoaded",()=>{MM(e,n)})},NM=(e,n)=>{fC(e,Ig.translate(["Failed to upload image: {0}",n]))},pC=(e,n,s)=>{s2(e,n,{message:s}),console.error(s)},Hp=(e,n,s)=>s?`Failed to load ${e}: ${s} from url ${n}`:`Failed to load ${e} url: ${n}`,p5=(e,n,s)=>{pC(e,"PluginLoadError",Hp("plugin",n,s))},BM=(e,n,s)=>{pC(e,"IconsLoadError",Hp("icons",n,s))},uL=(e,n,s)=>{pC(e,"LanguageLoadError",Hp("language",n,s))},h5=(e,n,s)=>{pC(e,"ThemeLoadError",Hp("theme",n,s))},b_=(e,n,s)=>{pC(e,"ModelLoadError",Hp("model",n,s))},b5=(e,n,s)=>{const a=Ig.translate(["Failed to initialize plugin: {0}",n]);s2(e,"PluginLoadError",{message:a}),hC(a,s),fC(e,a)},hC=(e,...n)=>{const s=window.console;s&&(s.error?s.error(e,...n):s.log(e,...n))},dL=e=>{Y.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},Q3=(e,n,s)=>{try{e.getDoc().execCommand(n,!1,String(s))}catch{}},IM=(e,n)=>{Q3(e,"StyleWithCSS",n),Q3(e,"enableInlineTableEditing",n),Q3(e,"enableObjectResizing",n)},FM=e=>{e.selection.setRng(e.selection.getRng())},PM=(e,n,s)=>{Qp(e,n)&&!s?Wl(e,n):s&&Pm(e,n)},LM=e=>{const n=je.fromDom(e.getBody());PM(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),dL(e)},$M=e=>{const n=je.fromDom(e.getBody());PM(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Ir(n,!0),IM(e,!1),Lf(e)&&e.focus(),FM(e),e.nodeChanged()},S0=e=>N1(e),tk="data-mce-contenteditable",zp=e=>{oe(ll(e,'*[contenteditable="true"]'),n=>{Pi(n,tk,"true"),Ir(n,!1)})},HM=e=>{oe(ll(e,`*[${tk}="true"]`),n=>{tr(n,tk),Ir(n,!0)})},e4=(e,n)=>{const s=je.fromDom(e.getBody());n?(LM(e),Ir(s,!1),zp(s)):(HM(s),$M(e))},mL=e=>{e.serializer?zM(e):e.on("PreInit",()=>{zM(e)})},zM=e=>{e.parser.addAttributeFilter("contenteditable",n=>{S0(e)&&oe(n,s=>{s.attr(tk,s.attr("contenteditable")),s.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(tk,n=>{S0(e)&&oe(n,s=>{s.attr("contenteditable",s.attr(tk))})}),e.serializer.addTempAttr(tk)},gL=e=>e.type==="click",ra=["copy"],v5=e=>ce(ra,e.type),bC=(e,n)=>wo(n,"a",a=>Lr(a,je.fromDom(e.getBody()))).bind(a=>Yi(a,"href")),fL=(e,n)=>{if(gL(n)&&!eo.metaKeyPressed(n)){const s=je.fromDom(n.target);bC(e,s).each(a=>{if(n.preventDefault(),/^#/.test(a)){const l=e.dom.select(`${a},[name="${Bo(a,"#")}"]`);l.length&&e.selection.scrollIntoView(l[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else v5(n)&&e.dispatch(n.type,n)},t4=e=>{e.on("ShowCaret ObjectSelected",n=>{S0(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||e4(e,n.state)})},pL=e=>{mL(e),t4(e)},y5=e=>/^[a-z0-9\-]+$/i.test(e),nv=e=>"content/"+e+"/content.css",eg=e=>tinymce.Resource.has(nv(e)),VM=e=>ov(e,bD(e)),v_=e=>ov(e,Df(e)),ov=(e,n)=>{const s=e.editorManager.baseURL+"/skins/content",l=`content${e.editorManager.suffix}.css`;return Ne(n,f=>eg(f)?f:y5(f)&&!e.inline?`${s}/${f}/${l}`:e.documentBaseURI.toAbsolute(f))},Yf=e=>{e.contentCSS=e.contentCSS.concat(VM(e),v_(e))},nk=e=>e?gr(e.getElementsByTagName("img")):[],UM=(e,n)=>{const s={};return{findAll:(l,f=pt)=>{const v=dt(nk(l),O=>{const F=O.src;return O.hasAttribute("data-mce-bogus")||O.hasAttribute("data-mce-placeholder")||!F||F===ms.transparentSrc?!1:cs(F,"blob:")?!e.isUploaded(F)&&f(O):cs(F,"data:")?f(O):!1}),k=Ne(v,O=>{const F=O.src;if(Lo(s,F))return s[F].then(Z=>ue(Z)?Z:{image:O,blobInfo:Z.blobInfo});{const Z=zR(n,F).then(K=>(delete s[F],{image:O,blobInfo:K})).catch(K=>(delete s[F],K));return s[F]=Z,Z}});return Promise.all(k)}}},y_=()=>{let s={};const a=(J,de)=>({status:J,resultUri:de}),l=J=>J in s;return{hasBlobUri:l,getResultUri:J=>{const de=s[J];return de?de.resultUri:null},isPending:J=>l(J)?s[J].status===1:!1,isUploaded:J=>l(J)?s[J].status===2:!1,markPending:J=>{s[J]=a(1,null)},markUploaded:(J,de)=>{s[J]=a(2,de)},removeFailed:J=>{delete s[J]},destroy:()=>{s={}}}};let WM=0;const x5=()=>{const e=()=>Math.round(sd()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},hL=e=>e+WM+++x5(),bL=()=>{let e=[];const n=K=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[K.toLowerCase()]||"dat",s=(K,J,de,Te,be)=>{if(ue(K))return a({id:K,name:Te,filename:be,blob:J,base64:de});if(ve(K))return a(K);throw new Error("Unknown input type")},a=K=>{if(!K.blob||!K.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const J=K.id||hL("blobid"),de=K.name||J,Te=K.blob;return{id:Le(J),name:Le(de),filename:Le(K.filename||de+"."+n(Te.type)),blob:Le(Te),base64:Le(K.base64),blobUri:Le(K.blobUri||URL.createObjectURL(Te)),uri:Le(K.uri)}},l=K=>{v(K.id())||e.push(K)},f=K=>hn(e,K).getOrUndefined(),v=K=>f(J=>J.id()===K);return{create:s,add:l,get:v,getByUri:K=>f(J=>J.blobUri()===K),getByData:(K,J)=>f(de=>de.base64()===K&&de.blob().type===J),findFirst:f,removeByUri:K=>{e=dt(e,J=>J.blobUri()===K?(URL.revokeObjectURL(J.blobUri()),!1):!0)},destroy:()=>{oe(e,K=>{URL.revokeObjectURL(K.blobUri())}),e=[]}}},w5=(e,n)=>{const s={},a=(be,Me)=>be?be.replace(/\/$/,"")+"/"+Me.replace(/^\//,""):Me,l=(be,Me)=>new Promise((Xe,gt)=>{const bt=new XMLHttpRequest;bt.open("POST",n.url),bt.withCredentials=n.credentials,bt.upload.onprogress=yn=>{Me(yn.loaded/yn.total*100)},bt.onerror=()=>{gt("Image upload failed due to a XHR Transport error. Code: "+bt.status)},bt.onload=()=>{if(bt.status<200||bt.status>=300){gt("HTTP Error: "+bt.status);return}const yn=JSON.parse(bt.responseText);if(!yn||!ue(yn.location)){gt("Invalid JSON: "+bt.responseText);return}Xe(a(n.basePath,yn.location))};const Ot=new FormData;Ot.append("file",be.blob(),be.filename()),bt.send(Ot)}),f=Be(n.handler)?n.handler:l,v=()=>new Promise(be=>{be([])}),k=(be,Me)=>({url:Me,blobInfo:be,status:!0}),O=(be,Me)=>({url:"",blobInfo:be,status:!1,error:Me}),F=(be,Me)=>{bn.each(s[be],Xe=>{Xe(Me)}),delete s[be]},Z=(be,Me,Xe)=>(e.markPending(be.blobUri()),new Promise(gt=>{let bt,Ot;try{const yn=()=>{bt&&(bt.close(),Ot=Kt)},Un=sn=>{yn(),e.markUploaded(be.blobUri(),sn),F(be.blobUri(),k(be,sn)),gt(k(be,sn))},So=sn=>{yn(),e.removeFailed(be.blobUri()),F(be.blobUri(),O(be,sn)),gt(O(be,sn))};Ot=sn=>{sn<0||sn>100||Y.from(bt).orThunk(()=>Y.from(Xe).map(tt)).each(Ut=>{bt=Ut,Ut.progressBar.value(sn)})},Me(be,Ot).then(Un,sn=>{So(ue(sn)?{message:sn}:sn)})}catch(yn){gt(O(be,yn))}})),K=be=>be===l,J=be=>{const Me=be.blobUri();return new Promise(Xe=>{s[Me]=s[Me]||[],s[Me].push(Xe)})},de=(be,Me)=>(be=bn.grep(be,Xe=>!e.isUploaded(Xe.blobUri())),Promise.all(bn.map(be,Xe=>e.isPending(Xe.blobUri())?J(Xe):Z(Xe,f,Me))));return{upload:(be,Me)=>!n.url&&K(f)?v():de(be,Me)}},n4=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),x_=(e,n)=>w5(n,{url:mT(e),basePath:bb(e),credentials:jv(e),handler:u2(e)}),jM=e=>{const n=y_(),s=x_(e,n);return{upload:(a,l=!0)=>s.upload(a,l?n4(e):void 0)}},o4=(e,n)=>e.dom.isEmpty(n.dom)&&Qe(e.schema.getTextBlockElements()[_e(n)]),vL=e=>n=>{o4(e,n)&&va(n,je.fromHtml('<br data-mce-bogus="1" />'))},C5=e=>{const n=bL();let s,a;const l=y_(),f=[],v=bt=>Ot=>e.selection?bt(Ot):[],k=bt=>bt+(bt.indexOf("?")===-1?"?":"&")+new Date().getTime(),O=(bt,Ot,yn)=>{let Un=0;do Un=bt.indexOf(Ot,Un),Un!==-1&&(bt=bt.substring(0,Un)+yn+bt.substr(Un+Ot.length),Un+=yn.length-Ot.length+1);while(Un!==-1);return bt},F=(bt,Ot,yn)=>{const Un=`src="${yn}"${yn===ms.transparentSrc?' data-mce-placeholder="1"':""}`;return bt=O(bt,`src="${Ot}"`,Un),bt=O(bt,'data-mce-src="'+Ot+'"','data-mce-src="'+yn+'"'),bt},Z=(bt,Ot)=>{oe(e.undoManager.data,yn=>{yn.type==="fragmented"?yn.fragments=Ne(yn.fragments,Un=>F(Un,bt,Ot)):yn.content=F(yn.content,bt,Ot)})},K=(bt,Ot)=>{const yn=e.convertURL(Ot,"src");Z(bt.src,Ot),dc(je.fromDom(bt),{src:c2(e)?k(Ot):Ot,"data-mce-src":yn})},J=()=>(s||(s=x_(e,l)),Me().then(v(bt=>{const Ot=Ne(bt,yn=>yn.blobInfo);return s.upload(Ot,n4(e)).then(v(yn=>{const Un=[];let So=!1;const sn=Ne(yn,(Ut,En)=>{const{blobInfo:Io,image:gs}=bt[En];let Gs=!1;return Ut.status&&dT(e)?(Ut.url&&!Vo(gs.src,Ut.url)&&(So=!0),n.removeByUri(gs.src),$p(e)||K(gs,Ut.url)):Ut.error&&(Ut.error.remove&&(Z(gs.src,ms.transparentSrc),Un.push(gs),Gs=!0),NM(e,Ut.error.message)),{element:gs,status:Ut.status,uploadUri:Ut.url,blobInfo:Io,removed:Gs}});return Un.length>0&&!$p(e)?e.undoManager.transact(()=>{oe(Ag(Un),Ut=>{const En=jl(Ut);Zr(Ut),En.each(vL(e)),n.removeByUri(Ut.dom.src)})}):So&&e.undoManager.dispatchChange(),sn}))}))),de=()=>i2(e)?J():Promise.resolve([]),Te=bt=>rt(f,Ot=>Ot(bt)),be=bt=>{f.push(bt)},Me=()=>(a||(a=UM(l,n)),a.findAll(e.getBody(),Te).then(v(bt=>{const Ot=dt(bt,yn=>ue(yn)?(fC(e,yn),!1):yn.uriType!=="blob");return $p(e)||oe(Ot,yn=>{Z(yn.image.src,yn.blobInfo.blobUri()),yn.image.src=yn.blobInfo.blobUri(),yn.image.removeAttribute("data-mce-src")}),Ot}))),Xe=()=>{n.destroy(),l.destroy(),a=s=null},gt=bt=>bt.replace(/src="(blob:[^"]+)"/g,(Ot,yn)=>{const Un=l.getResultUri(yn);if(Un)return'src="'+Un+'"';let So=n.getByUri(yn);return So||(So=it(e.editorManager.get(),(sn,Ut)=>sn||Ut.editorUpload&&Ut.editorUpload.blobCache.getByUri(yn),void 0)),So?'src="data:'+So.blob().type+";base64,"+So.base64()+'"':Ot});return e.on("SetContent",()=>{i2(e)?de():Me()}),e.on("RawSaveContent",bt=>{bt.content=gt(bt.content)}),e.on("GetContent",bt=>{bt.source_view||bt.format==="raw"||bt.format==="tree"||(bt.content=gt(bt.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",bt=>{oe(bt,Ot=>{const yn=Ot.attr("src");if(!yn||n.getByUri(yn))return;const Un=l.getResultUri(yn);Un&&Ot.attr("src",Un)})})}),{blobCache:n,addFilter:be,uploadImages:J,uploadImagesAuto:de,scanForImages:Me,destroy:Xe}},G7=e=>{const n=e.dom,s=e.schema.type,a={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:l=>{n.setStyle(l,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:l=>{n.setStyle(l,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const l={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},v={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[v,l,f]:[l,v,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(l,f,v)=>so(l)&&l.hasAttribute("href"),onformat:(l,f,v)=>{bn.each(v,(k,O)=>{n.setAttrib(l,O,k)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":l=>{var f;return(f=l==null?void 0:l.customValue)!==null&&f!==void 0?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return bn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),l=>{a[l]={block:l,remove:"all"}}),a},s4={remove_similar:!0,inherit:!1},k0={selector:"td,th",...s4},Vp={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...k0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...k0},tablecellbordercolor:{styles:{borderColor:"%value"},...k0},tablecellclass:{classes:["%value"],...k0},tableclass:{selector:"table",classes:["%value"],...s4},tablecellborderstyle:{styles:{borderStyle:"%value"},...k0},tablecellborderwidth:{styles:{borderWidth:"%value"},...k0}},px=Le(Vp),ZM=e=>{const n={},s=v=>Qe(v)?n[v]:n,a=v=>Lo(n,v),l=(v,k)=>{v&&(ue(v)?(qt(k)||(k=[k]),oe(k,O=>{oo(O.deep)&&(O.deep=!eu(O)),oo(O.split)&&(O.split=!eu(O)||wa(O)),oo(O.remove)&&eu(O)&&!wa(O)&&(O.remove="none"),eu(O)&&wa(O)&&(O.mixed=!0,O.block_expand=!0),ue(O.classes)&&(O.classes=O.classes.split(/\s+/))}),n[v]=k):vn(v,(O,F)=>{l(F,O)}))},f=v=>(v&&n[v]&&delete n[v],n);return l(G7(e)),l(px()),l(yb(e)),{get:s,has:a,register:l,unregister:f}},T0=bn.each,Cm=qs.DOM,r4=e=>Qe(e)&&ve(e),w_=(e,n)=>{const s=n&&n.schema||ya({}),a=(O,F)=>{F.classes.length>0&&Cm.addClass(O,F.classes.join(" ")),Cm.setAttribs(O,F.attrs)},l=O=>{const F=ue(O)?{name:O,classes:[],attrs:{}}:O,Z=Cm.create(F.name);return a(Z,F),Z},f=(O,F)=>{const Z=s.getElementRule(O.nodeName.toLowerCase()),K=Z==null?void 0:Z.parentsRequired;return K&&K.length?F&&ce(K,F)?F:K[0]:!1},v=(O,F,Z)=>{let K;const J=F[0],de=r4(J)?J.name:void 0,Te=f(O,de);if(Te)de===Te?(K=J,F=F.slice(1)):K=Te;else if(J)K=J,F=F.slice(1);else if(!Z)return O;const be=K?l(K):Cm.create("div");be.appendChild(O),Z&&bn.each(Z,Xe=>{const gt=l(Xe);be.insertBefore(gt,O)});const Me=r4(K)?K.siblings:void 0;return v(be,F,Me)},k=Cm.create("div");if(e.length>0){const O=e[0],F=l(O),Z=r4(O)?O.siblings:void 0;k.appendChild(v(F,e.slice(1),Z))}return k},C_=e=>{e=bn.trim(e);let n="div";const s={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(a,l,f,v,k)=>{switch(l){case"#":s.attrs.id=f;break;case".":s.classes.push(f);break;case":":bn.inArray("checked disabled enabled read-only required".split(" "),f)!==-1&&(s.attrs[f]=f);break}if(v==="["){const O=k.match(/([\w\-]+)(?:\=\"([^\"]+))?/);O&&(s.attrs[O[1]]=O[2])}return""})),s.name=n||"div",s},E0=e=>ue(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),bn.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const s=bn.map(n.split(/(?:~\+|~|\+)/),C_),a=s.pop();return s.length&&(a.siblings=s),a}).reverse()):[],vC=(e,n)=>{let s="",a=OA(e);if(a==="")return"";const l=J=>ue(J)?J.replace(/%(\w+)/g,""):"",f=(J,de)=>Cm.getStyle(de??e.getBody(),J,!0);if(ue(n)){const J=e.formatter.get(n);if(!J)return"";n=J[0]}if("preview"in n){const J=n.preview;if(J===!1)return"";a=J||a}let v=n.block||n.inline||"span",k;const O=E0(n.selector);O.length>0?(O[0].name||(O[0].name=v),v=n.selector,k=w_(O,e)):k=w_([v],e);const F=Cm.select(v,k)[0]||k.firstChild;T0(n.styles,(J,de)=>{const Te=l(J);Te&&Cm.setStyle(F,de,Te)}),T0(n.attributes,(J,de)=>{const Te=l(J);Te&&Cm.setAttrib(F,de,Te)}),T0(n.classes,J=>{const de=l(J);Cm.hasClass(F,de)||Cm.addClass(F,de)}),e.dispatch("PreviewFormats"),Cm.setStyles(k,{position:"absolute",left:-65535}),e.getBody().appendChild(k);const Z=f("fontSize"),K=/px$/.test(Z)?parseInt(Z,10):0;return T0(a.split(" "),J=>{let de=f(J,F);if(!(J==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(de)&&(de=f(J),mp(de).toLowerCase()==="#ffffff"))&&!(J==="color"&&mp(de).toLowerCase()==="#000000")){if(J==="font-size"&&/em|%$/.test(de)){if(K===0)return;de=parseFloat(de)/(/%$/.test(de)?100:1)*K+"px"}J==="border"&&de&&(s+="padding:0 2px;"),s+=J+":"+de+";"}}),e.dispatch("AfterPreviewFormats"),Cm.remove(k),s},S5=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},_0=e=>{const n=ZM(e),s=fa({});return S5(e),ER(e),$p(e)||IR(s,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(a,l,f)=>{fM(e,a,l,f)},remove:(a,l,f,v)=>{zF(e,a,l,f,v)},toggle:(a,l,f)=>{VF(e,a,l,f)},match:(a,l,f,v)=>qS(e,a,l,f,v),closest:a=>HF(e,a),matchAll:(a,l)=>LF(e,a,l),matchNode:(a,l,f,v)=>gM(e,a,l,f,v),canApply:a=>$F(e,a),formatChanged:(a,l,f,v)=>UF(e,s,a,l,f,v),getCssText:Se(vC,e)}},GM=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},yL=(e,n,s)=>{const a=fa(!1),l=O=>{jS(n,!1,s),n.add({},O)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",O=>{const F=O.command;GM(F)||(w0(n,s),n.beforeChange())}),e.on("ExecCommand",O=>{const F=O.command;GM(F)||l(O)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",l),e.on("dragend",l),e.on("keyup",O=>{const F=O.keyCode;if(O.isDefaultPrevented())return;const Z=ms.os.isMacOS()&&O.key==="Meta";(F>=33&&F<=36||F>=37&&F<=40||F===45||O.ctrlKey||Z)&&(l(),e.nodeChanged()),(F===46||F===8)&&e.nodeChanged(),a.get()&&n.typing&&!Xd(dC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),a.set(!1),e.nodeChanged())}),e.on("keydown",O=>{const F=O.keyCode;if(O.isDefaultPrevented())return;if(F>=33&&F<=36||F>=37&&F<=40||F===45){n.typing&&l(O);return}const Z=O.ctrlKey&&!O.altKey||O.metaKey;if((F<16||F>20)&&F!==224&&F!==91&&!n.typing&&!Z){n.beforeChange(),jS(n,!0,s),n.add({},O),a.set(!0);return}(ms.os.isMacOS()?O.metaKey:O.ctrlKey&&!O.altKey)&&n.beforeChange()}),e.on("mousedown",O=>{n.typing&&l(O)});const f=O=>O.inputType==="insertReplacementText",v=O=>O.inputType==="insertText"&&O.data===null,k=O=>O.inputType==="insertFromPaste"||O.inputType==="insertFromDrop";e.on("input",O=>{O.inputType&&(f(O)||v(O)||k(O))&&l(O)}),e.on("AddUndo Undo Redo ClearUndos",O=>{O.isDefaultPrevented()||e.nodeChanged()})},xL=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},k5=e=>{const n=Kl(),s=fa(0),a=fa(0),l={data:[],typing:!1,beforeChange:()=>{K8(e,s,n)},add:(f,v)=>Y8(e,l,a,s,n,f,v),dispatchChange:()=>{e.setDirty(!0);const f=dC(e);f.bookmark=Il(e.selection),e.dispatch("change",{level:f,lastLevel:No(l.data,a.get()).getOrUndefined()})},undo:()=>IF(e,l,s,a),redo:()=>FF(e,a,l.data),clear:()=>{X8(e,l,a)},reset:()=>{PF(e,l)},hasUndo:()=>GS(e,l,a),hasRedo:()=>J8(e,l,a),transact:f=>Q8(e,l,s,f),ignore:f=>{mM(e,s,f)},extra:(f,v)=>{W3(e,l,a,f,v)}};return $p(e)||yL(e,l,s),xL(e),l},qM=[9,27,eo.HOME,eo.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,eo.DOWN,eo.UP,eo.LEFT,eo.RIGHT].concat(ms.browser.isFirefox()?[224]:[]),KM="data-mce-placeholder",T5=e=>e.type==="keydown"||e.type==="keyup",YM=e=>{const n=e.keyCode;return n===eo.BACKSPACE||n===eo.DELETE},wL=e=>{if(T5(e)){const n=e.keyCode;return!YM(e)&&(eo.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||ce(qM,n))}else return!1},ok=e=>T5(e)&&!(YM(e)||e.type==="keyup"&&e.keyCode===229),CL=(e,n,s)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const a=n.firstElementChild;return a?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:s===a.nodeName.toLowerCase():!0}else return!1},E5=e=>{var n;const s=e.dom,a=Pl(e),l=(n=ow(e))!==null&&n!==void 0?n:"",f=(v,k)=>{if(wL(v))return;const O=e.getBody(),F=ok(v)?!1:CL(s,O,a);(s.getAttrib(O,KM)!==""!==F||k)&&(s.setAttrib(O,KM,F?l:null),Xl(e,F),e.on(F?"keydown":"keyup",f),e.off(F?"keyup":"keydown",f))};Bs(l)&&e.on("init",v=>{f(v,!0),e.on("change SetContent ExecCommand",f),e.on("paste",k=>Wo.setEditorTimeout(e,()=>f(k)))})},_5=(e,n)=>({block:e,position:n}),sk=(e,n)=>({from:e,to:n}),S_=(e,n)=>{const s=je.fromDom(e),a=je.fromDom(n.container());return LO(s,a).map(l=>_5(l,n))},XM=e=>!(Xi(e.to.block,e.from.block)||Xi(e.from.block,e.to.block)),A5=e=>!Lr(e.from.block,e.to.block),O5=(e,n)=>oa(n,l=>Px(l)||dn(l.dom),l=>Lr(l,e)).filter(nr).getOr(e),D5=(e,n)=>{const s=je.fromDom(e);return Lr(O5(s,n.from.block),O5(s,n.to.block))},R5=e=>ia(e.from.block.dom)===!1&&ia(e.to.block.dom)===!1,yC=e=>{const n=s=>Fg(s)||iu(s.dom)||cb(s);return n(e.from.block)&&n(e.to.block)},xC=(e,n,s,a)=>aa(a.position.getNode())&&!yl(e,a.block)?B1(!1,a.block.dom).bind(l=>l.isEqual(a.position)?ad(s,n,l).bind(f=>S_(n,f)):Y.some(a)).getOr(a):a,a4=(e,n,s,a)=>{const l=S_(n,Xt.fromRangeStart(a)),f=l.bind(v=>ad(s,n,v.position).bind(k=>S_(n,k).map(O=>xC(e,n,s,O))));return Ii(l,f,sk).filter(v=>A5(v)&&D5(n,v)&&R5(v)&&yC(v)&&XM(v))},i4=(e,n,s,a)=>a.collapsed?a4(e,n,s,a):Y.none(),wC=(e,n)=>{const s=Rl(e);return Hn(s,a=>n.isBlock(_e(a))).fold(Le(s),a=>s.slice(0,a))},Xf=(e,n)=>{const s=wC(e,n);return oe(s,Zr),s},rk=(e,n,s)=>{const a=W1(s,n);return hn(a.reverse(),l=>yl(e,l)).each(Zr)},k_=(e,n)=>dt(Dl(n),s=>!yl(e,s)).length===0,JM=(e,n,s,a,l)=>{if(yl(a,s))return ch(s),kl(s.dom);k_(a,l)&&yl(a,n)&&Ji(l,je.fromTag("br"));const f=Ou(s.dom,Xt.before(l.dom));return oe(Xf(n,a),v=>{Ji(l,v)}),rk(a,e,n),f},QM=(e,n)=>e.isInline(_e(n)),eN=(e,n,s,a)=>{if(yl(a,s)){if(yl(a,n)){const v=An((k=>{const O=(F,Z)=>al(F).fold(()=>Z,K=>QM(a,K)?O(K,Z.concat(pp(K))):Z);return O(k,[])})(s),(k,O)=>(cl(k,O),O),Pg());rm(n),va(n,v)}return Zr(s),kl(n.dom)}const l=Ma(s.dom);return oe(Xf(n,a),f=>{va(s,f)}),rk(a,e,n),l},A0=(e,n)=>{const s=W1(n,e);return Y.from(s[s.length-1])},tN=(e,n)=>Xi(n,e)?A0(n,e):Y.none(),sv=(e,n)=>{B1(e,n.dom).bind(s=>Y.from(s.getNode())).map(je.fromDom).filter(_u).each(Zr)},nN=(e,n,s,a)=>(sv(!0,n),sv(!1,s),tN(n,s).fold(Se(eN,e,n,s,a),Se(JM,e,n,s,a))),c4=(e,n,s,a,l)=>n?nN(e,a,s,l):nN(e,s,a,l),l4=(e,n)=>{const s=je.fromDom(e.getBody());return i4(e.schema,s.dom,n,e.selection.getRng()).map(l=>()=>{c4(s,n,l.from.block,l.to.block,e.schema).each(f=>{e.selection.setRng(f.toRange())})})},u4=(e,n,s)=>{const a=n.getRng();return Ii(LO(e,je.fromDom(a.startContainer)),LO(e,je.fromDom(a.endContainer)),(l,f)=>Lr(l,f)?Y.none():Y.some(()=>{a.deleteContents(),c4(e,!0,l,f,s).each(v=>{n.setRng(v.toRange())})})).getOr(Y.none())},T_=(e,n)=>{const s=je.fromDom(n),a=Se(Lr,e);return Yu(s,Px,a).isSome()},M5=(e,n)=>T_(e,n.startContainer)||T_(e,n.endContainer),tu=(e,n)=>{const s=Ou(e.dom,Xt.fromRangeStart(n)).isNone(),a=Vi(e.dom,Xt.fromRangeEnd(n)).isNone();return!M5(e,n)&&s&&a},N5=e=>Y.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),O0=e=>{const n=je.fromDom(e.getBody()),s=e.selection.getRng();return tu(n,s)?N5(e):u4(n,e.selection,e.schema)},Lh=(e,n)=>e.selection.isCollapsed()?Y.none():O0(e),ud=(e,n,s,a,l)=>Y.from(n._selectionOverrides.showCaret(e,s,a,l)),oN=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},E_=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?Y.none():Y.some(oN(n)),SL=(e,n,s)=>{const a=Dy(1,e.getBody(),n),l=Xt.fromRangeStart(a),f=l.getNode();if(cw(f))return ud(1,e,f,!l.isAtEnd(),!1);const v=l.getNode(!0);if(cw(v))return ud(1,e,v,!1,!1);const k=Qg(e.dom.getRoot(),l.getNode());return cw(k)?ud(1,e,k,!1,s):Y.none()},sN=(e,n,s)=>n.collapsed?SL(e,n,s).getOr(n):n,kL=e=>m0(e)||_p(e),TL=e=>U1(e)||zw(e),EL=(e,n)=>{_n(n)&&n.data.length===0&&e.remove(n)},B5=(e,n,s,a,l,f)=>{ud(a,e,f.getNode(!l),l,!0).each(v=>{if(n.collapsed){const k=n.cloneRange();l?k.setEnd(v.startContainer,v.startOffset):k.setStart(v.endContainer,v.endOffset),k.deleteContents()}else n.deleteContents();e.selection.setRng(v)}),EL(e.dom,s)},ak=(e,n)=>{const s=e.selection.getRng();if(!_n(s.commonAncestorContainer))return Y.none();const a=n?Ql.Forwards:Ql.Backwards,l=Km(e.getBody()),f=Se(O2,n?l.next:l.prev),v=n?kL:TL,k=o0(a,e.getBody(),s),O=f(k),F=O&&Uf(n,O);if(!F||!Cb(k,F))return Y.none();if(v(F))return Y.some(()=>B5(e,s,k.getNode(),a,n,F));const Z=f(F);return Z&&v(Z)&&Cb(F,Z)?Y.some(()=>B5(e,s,k.getNode(),a,n,Z)):Y.none()},Up=(e,n)=>ak(e,n),rN=(e,n)=>{const s=e.getBody();return n?kl(s).filter(m0):Ma(s).filter(U1)},aN=e=>{const n=e.selection.getRng();return!n.collapsed&&(rN(e,!0).exists(s=>s.isEqual(Xt.fromRangeStart(n)))||rN(e,!1).exists(s=>s.isEqual(Xt.fromRangeEnd(n))))},iN=e=>Qe(e)&&(Px(je.fromDom(e))||cb(je.fromDom(e))),xg=mg.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),I5=(e,n)=>{const s=n.getNode(!e),a=e?"after":"before";return so(s)&&s.getAttribute("data-mce-caret")===a},_L=(e,n,s,a,l)=>{const f=v=>l.isInline(v.nodeName.toLowerCase())&&!Mf(s,a,e);return zA(!n,s).fold(()=>zA(n,a).fold($e,f),f)},F5=(e,n,s,a,l)=>{const f=l.getNode(!s);return LO(je.fromDom(n),je.fromDom(a.getNode())).map(v=>yl(e,v)?xg.remove(v.dom):xg.moveToElement(f)).orThunk(()=>Y.some(xg.moveToElement(f)))},cN=(e,n,s,a)=>ad(n,e,s).bind(l=>iN(l.getNode())||_L(e,n,s,l,a)?Y.none():n&&ia(l.getNode())||!n&&ia(l.getNode(!0))?F5(a,e,n,s,l):n&&U1(s)||!n&&m0(s)?Y.some(xg.moveToPosition(l)):Y.none()),P5=(e,n)=>qn(n)?Y.none():e&&ia(n.nextSibling)?Y.some(xg.moveToElement(n.nextSibling)):!e&&ia(n.previousSibling)?Y.some(xg.moveToElement(n.previousSibling)):Y.none(),lN=(e,n,s)=>s.fold(a=>Y.some(xg.remove(a)),a=>Y.some(xg.moveToElement(a)),a=>Mf(n,a,e)?Y.none():Y.some(xg.moveToPosition(a))),L5=(e,n,s,a)=>I5(n,s)?P5(n,s.getNode(!n)).orThunk(()=>cN(e,n,s,a)):cN(e,n,s,a).bind(l=>lN(e,s,l)),$5=(e,n,s,a)=>{const l=Dy(n?1:-1,e,s),f=Xt.fromRangeStart(l),v=je.fromDom(e);return!n&&U1(f)?Y.some(xg.remove(f.getNode(!0))):n&&m0(f)?Y.some(xg.remove(f.getNode())):!n&&m0(f)&&Ky(v,f,a)?EO(v,f,a).map(k=>xg.remove(k.getNode())):n&&U1(f)&&Ms(v,f,a)?rI(v,f,a).map(k=>xg.remove(k.getNode())):L5(e,n,f,a)},uN=(e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),g0(e,n,je.fromDom(s)),!0),AL=(e,n)=>s=>{const a=n?Xt.before(s):Xt.after(s);return e.selection.setRng(a.toRange()),!0},OL=e=>n=>(e.selection.setRng(n.toRange()),!0),jb=(e,n)=>Y.from(Qg(e.getBody(),n)),$h=(e,n)=>{const s=e.selection.getNode();return jb(e,s).filter(ia).fold(()=>$5(e.getBody(),n,e.selection.getRng(),e.schema).map(a=>()=>a.fold(uN(e,n),AL(e,n),OL(e))),()=>Y.some(Kt))},d4=e=>{oe(ll(e,".mce-offscreen-selection"),Zr)},H5=(e,n)=>{const s=e.selection.getNode();return ia(s)&&!tn(s)?jb(e,s.parentNode).filter(ia).fold(()=>Y.some(()=>{d4(je.fromDom(e.getBody())),g0(e,n,je.fromDom(e.selection.getNode())),Oh(e)}),()=>Y.some(Kt)):aN(e)?Y.some(()=>{ei(e,e.selection.getRng(),je.fromDom(e.getBody()))}):Y.none()},__=e=>{const n=e.dom,s=e.selection,a=Qg(e.getBody(),s.getNode());if(dn(a)&&n.isBlock(a)&&n.isEmpty(a)){const l=n.create("br",{"data-mce-bogus":"1"});n.setHTML(a,""),a.appendChild(l),s.setRng(Xt.before(l).toRange())}return!0},m4=(e,n)=>e.selection.isCollapsed()?$h(e,n):H5(e,n),dN=e=>e.hasOwnProperty("text"),mN=e=>e.hasOwnProperty("marker"),gN=(e,n)=>{const s=(f,v)=>{if(_n(f))return{text:f,offset:v};{const k=n(),O=f.childNodes;return v<O.length?(f.insertBefore(k,O[v]),{marker:k,before:!0}):(f.appendChild(k),{marker:k,before:!1})}},a=s(e.endContainer,e.endOffset);return{start:s(e.startContainer,e.startOffset),end:a}},fN=e=>{var n,s;const{start:a,end:l}=e,f=new window.Range;return dN(a)?f.setStart(a.text,a.offset):mN(a)&&(a.before?f.setStartBefore(a.marker):f.setStartAfter(a.marker),(n=a.marker.parentNode)===null||n===void 0||n.removeChild(a.marker)),dN(l)?f.setEnd(l.text,l.offset):mN(l)&&(l.before?f.setEndBefore(l.marker):f.setEndAfter(l.marker),(s=l.marker.parentNode)===null||s===void 0||s.removeChild(l.marker)),f},g4=(e,n)=>{var s;const a=e.dom,l=a.getParent(e.selection.getStart(),a.isBlock),f=a.getParent(e.selection.getEnd(),a.isBlock),v=e.getBody();if(((s=l==null?void 0:l.nodeName)===null||s===void 0?void 0:s.toLowerCase())==="div"&&l&&f&&l===v.firstChild&&f===v.lastChild&&!a.isEmpty(v)){const O=l.cloneNode(!1),F=()=>{if(n?cc(e):PO(e),v.firstChild!==l){const Z=gN(e.selection.getRng(),()=>document.createElement("span"));Array.from(v.childNodes).forEach(K=>O.appendChild(K)),v.appendChild(O),e.selection.setRng(fN(Z))}};return Y.some(F)}return Y.none()},f4=(e,n)=>{const s=Xt.fromRangeStart(e.selection.getRng());return ad(n,e.getBody(),s).filter(a=>n?nI(a):e8(a)).bind(a=>A2(n?0:-1,a)).map(a=>()=>e.selection.select(a))},A_=(e,n)=>e.selection.isCollapsed()?f4(e,n):Y.none(),ik=_n,z5=e=>ik(e)&&e.data[0]===Sl,V5=e=>ik(e)&&e.data[e.data.length-1]===Sl,U5=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Sl)},pN=e=>{var n;if(ik(e.previousSibling))return V5(e.previousSibling)||e.previousSibling.appendData(Sl),e.previousSibling;if(ik(e))return z5(e)||e.insertData(0,Sl),e;{const s=U5(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(s,e),s}},DL=e=>{var n,s;if(ik(e.nextSibling))return z5(e.nextSibling)||e.nextSibling.insertData(0,Sl),e.nextSibling;if(ik(e))return V5(e)||e.appendData(Sl),e;{const a=U5(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(a,e.nextSibling):(s=e.parentNode)===null||s===void 0||s.appendChild(a),a}},p4=(e,n)=>e?pN(n):DL(n),hN=Se(p4,!0),RL=Se(p4,!1),W5=(e,n)=>_n(e.container())?p4(n,e.container()):p4(n,e.getNode()),j5=(e,n)=>{const s=n.get();return s&&e.container()===s&&dh(s)},bN=(e,n)=>n.fold(s=>{Jv(e.get());const a=hN(s);return e.set(a),Y.some(Xt(a,a.length-1))},s=>kl(s).map(a=>{if(j5(a,e)){const l=e.get();return Xt(l,1)}else{Jv(e.get());const l=W5(a,!0);return e.set(l),Xt(l,1)}}),s=>Ma(s).map(a=>{if(j5(a,e)){const l=e.get();return Xt(l,l.length-1)}else{Jv(e.get());const l=W5(a,!1);return e.set(l),Xt(l,l.length-1)}}),s=>{Jv(e.get());const a=RL(s);return e.set(a),Y.some(Xt(a,1))}),Z5=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s].apply(null,n);if(a.isSome())return a}return Y.none()},Sm=mg.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),G5=(e,n)=>{const s=xh(n,e);return s||e},h4=(e,n,s)=>{const a=bI(s),l=G5(n,a.container());return fu(e,l,a).fold(()=>Vi(l,a).bind(Se(fu,e,l)).map(f=>Sm.before(f)),Y.none)},vN=(e,n)=>wh(e,n)===null,q5=(e,n,s)=>fu(e,n,s).filter(Se(vN,n)),ML=(e,n,s)=>{const a=vI(s);return q5(e,n,a).bind(l=>Ou(l,a).isNone()?Y.some(Sm.start(l)):Y.none())},NL=(e,n,s)=>{const a=bI(s);return q5(e,n,a).bind(l=>Vi(l,a).isNone()?Y.some(Sm.end(l)):Y.none())},BL=(e,n,s)=>{const a=vI(s),l=G5(n,a.container());return fu(e,l,a).fold(()=>Ou(l,a).bind(Se(fu,e,l)).map(f=>Sm.after(f)),Y.none)},yN=e=>!IO(b4(e)),Zb=(e,n,s)=>Z5([h4,ML,NL,BL],[e,n,s]).filter(yN),b4=e=>e.fold(Qt,Qt,Qt,Qt),v4=e=>e.fold(Le("before"),Le("start"),Le("end"),Le("after")),O_=e=>e.fold(Sm.before,Sm.before,Sm.after,Sm.after),xN=e=>e.fold(Sm.start,Sm.start,Sm.end,Sm.end),IL=(e,n)=>v4(e)===v4(n)&&b4(e)===b4(n),FL=(e,n,s,a,l,f)=>Ii(fu(n,s,a),fu(n,s,l),(v,k)=>v!==k&&c8(s,v,k)?Sm.after(e?v:k):f).getOr(f),PL=(e,n)=>e.fold(pt,s=>!IL(s,n)),LL=(e,n,s,a,l)=>{const f=Uf(e,l);return ad(e,s,f).map(Se(Uf,e)).fold(()=>a.map(O_),O=>Zb(n,s,O).map(Se(FL,e,n,s,f,O)).filter(Se(PL,a))).filter(yN)},$L=(e,n)=>e?n.fold(B(Y.some,Sm.start),Y.none,B(Y.some,Sm.after),Y.none):n.fold(Y.none,B(Y.some,Sm.before),Y.none,B(Y.some,Sm.end)),ck=(e,n,s,a)=>{const l=Uf(e,a),f=Zb(n,s,l);return Zb(n,s,l).bind(Se($L,e)).orThunk(()=>LL(e,n,s,f,a))},lk=e=>Be(e.selection.getSel().modify),K5=(e,n,s)=>{const a=e?1:-1;return n.setRng(Xt(s.container(),s.offset()+a).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},Y5=(e,n)=>{const s=n.selection.getRng(),a=e?Xt.fromRangeEnd(s):Xt.fromRangeStart(s);return lk(n)?e&&oy(a)?K5(!0,n.selection,a):!e&&lb(a)?K5(!1,n.selection,a):!1:!1};var Wp;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Wp||(Wp={}));const y4=(e,n)=>e===Ql.Backwards?nn(n):n,HL=(e,n,s)=>e===Ql.Forwards?n.next(s):n.prev(s),zL=(e,n,s,a)=>aa(a.getNode(n===Ql.Forwards))?Wp.Br:Mf(s,a)===!1?Wp.Block:Wp.Wrap,X5=(e,n,s,a)=>{const l=Km(s);let f=a;const v=[];for(;f;){const k=HL(n,l,f);if(!k)break;if(aa(k.getNode(!1)))return n===Ql.Forwards?{positions:y4(n,v).concat([k]),breakType:Wp.Br,breakAt:Y.some(k)}:{positions:y4(n,v),breakType:Wp.Br,breakAt:Y.some(k)};if(!k.isVisible()){f=k;continue}if(e(f,k)){const O=zL(s,n,f,k);return{positions:y4(n,v),breakType:O,breakAt:Y.some(k)}}v.push(k),f=k}return{positions:y4(n,v),breakType:Wp.Eol,breakAt:Y.none()}},J5=(e,n,s,a)=>n(s,a).breakAt.map(l=>{const f=n(s,l).positions;return e===Ql.Backwards?f.concat(l):[l].concat(f)}).getOr([]),wN=(e,n)=>it(e,(s,a)=>s.fold(()=>Y.some(a),l=>Ii(Gt(l.getClientRects()),Gt(a.getClientRects()),(f,v)=>{const k=Math.abs(n-f.left);return Math.abs(n-v.left)<=k?a:l}).or(s)),Y.none()),x4=(e,n)=>Gt(n.getClientRects()).bind(s=>wN(e,s.left)),CC=Se(X5,Xt.isAbove,-1),D_=Se(X5,Xt.isBelow,1),Q5=Se(J5,-1,CC),eP=Se(J5,1,D_),tP=(e,n)=>CC(e,n).breakAt.isNone(),Jd=(e,n)=>D_(e,n).breakAt.isNone(),CN=e=>kl(e).map(n=>[n].concat(D_(e,n).positions)).getOr([]),nP=e=>Ma(e).map(n=>CC(e,n).positions.concat(n)).getOr([]),oP=(e,n)=>x4(Q5(e,n),n),rf=(e,n)=>x4(eP(e,n),n),SN=ia,sP=(e,n)=>Math.abs(e.left-n),kN=(e,n)=>Math.abs(e.right-n),VL=e=>Aa(e,"node"),rP=(e,n)=>Ve(e,(s,a)=>{const l=Math.min(sP(s,n),kN(s,n)),f=Math.min(sP(a,n),kN(a,n));return f===l&&VL(a)&&SN(a.node)||f<l?a:s}),UL=e=>{const n=s=>Ne(s,a=>{const l=hp(a);return l.node=e,l});if(so(e))return n(e.getClientRects());if(_n(e)){const s=e.ownerDocument.createRange();return s.setStart(e,0),s.setEnd(e,e.data.length),n(s.getClientRects())}else return[]},hx=e=>ot(e,UL);var uk;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(uk||(uk={}));const aP=(e,n,s,a)=>{let l=a;for(;l=_s(l,e,KC,n);)if(s(l))return},TN=(e,n,s,a,l,f)=>{let v=0;const k=[],O=K=>{let J=hx([K]);e===-1&&(J=J.reverse());for(let de=0;de<J.length;de++){const Te=J[de];if(!s(Te,F)){if(k.length>0&&n(Te,Rt(k))&&v++,Te.line=v,l(Te))return!0;k.push(Te)}}return!1},F=Rt(f.getClientRects());if(!F)return k;const Z=f.getNode();return Z&&(O(Z),aP(e,a,O,Z)),k},EN=(e,n)=>n.line>e,WL=(e,n)=>n.line===e,dk=Se(TN,uk.Up,wi,db),iP=Se(TN,uk.Down,db,wi),R_=e=>Rt(e.getClientRects()),cP=(e,n,s,a)=>{const l=Km(n);let f,v,k,O;const F=[];let Z=0;e===1?(f=l.next,v=db,k=wi,O=Xt.after(a)):(f=l.prev,v=wi,k=db,O=Xt.before(a));const K=R_(O);do{if(!O.isVisible())continue;const J=R_(O);if(k(J,K))continue;F.length>0&&v(J,Rt(F))&&Z++;const de=hp(J);if(de.position=O,de.line=Z,s(de))return F;F.push(de)}while(O=f(O));return F},lP=e=>n=>EN(e,n),_N=e=>n=>WL(e,n),Fd=(e,n)=>{e.selection.setRng(n),Fw(e,e.selection.getRng())},w4=(e,n,s)=>Y.some(sN(e,n,s)),uP=(e,n,s,a,l,f)=>{const v=n===Ql.Forwards,k=Km(e.getBody()),O=Se(O2,v?k.next:k.prev),F=v?a:l;if(!s.collapsed){const Te=Hx(s);if(f(Te))return ud(n,e,Te,n===Ql.Backwards,!1);if(aN(e)){const be=s.cloneRange();return be.collapse(n===Ql.Backwards),Y.from(be)}}const Z=o0(n,e.getBody(),s);if(F(Z))return E_(e,Z.getNode(!v));let K=O(Z);const J=xi(s);if(K)K=Uf(v,K);else return J?Y.some(s):Y.none();if(F(K))return ud(n,e,K.getNode(!v),v,!1);const de=O(K);return de&&F(de)&&Cb(K,de)?ud(n,e,de.getNode(!v),v,!1):J?w4(e,K.toRange(),!1):Y.none()},D0=(e,n,s,a,l,f)=>{const v=o0(n,e.getBody(),s),k=Rt(v.getClientRects()),O=n===uk.Down,F=e.getBody();if(!k)return Y.none();if(aN(e)){const Me=O?Xt.fromRangeEnd(s):Xt.fromRangeStart(s);return(O?rf:oP)(F,Me).orThunk(()=>Y.from(Me)).map(gt=>gt.toRange())}const K=(O?iP:dk)(F,lP(1),v),J=dt(K,_N(1)),de=k.left,Te=rP(J,de);if(Te&&f(Te.node)){const Me=Math.abs(de-Te.left),Xe=Math.abs(de-Te.right);return ud(n,e,Te.node,Me<Xe,!1)}let be;if(a(v)?be=v.getNode():l(v)?be=v.getNode(!0):be=Hx(s),be){const Me=cP(n,F,lP(1),be);let Xe=rP(dt(Me,_N(1)),de);if(Xe||(Xe=Rt(dt(Me,_N(0))),Xe))return w4(e,Xe.position.toRange(),!1)}return J.length===0?M_(e,O).filter(O?l:a).map(Me=>sN(e,Me.toRange(),!1)):Y.none()},M_=(e,n)=>{const s=e.selection.getRng(),a=n?Xt.fromRangeEnd(s):Xt.fromRangeStart(s),l=Ts(a.container(),e.getBody());if(n){const f=D_(l,a);return yo(f.positions)}else{const f=CC(l,a);return Gt(f.positions)}},AN=(e,n,s)=>M_(e,n).filter(s).exists(a=>(e.selection.setRng(a.toRange()),!0)),bx=(e,n)=>{const s=e.dom.createRng();s.setStart(n.container(),n.offset()),s.setEnd(n.container(),n.offset()),e.selection.setRng(s)},ON=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},DN=(e,n,s)=>bN(n,s).map(a=>(bx(e,a),s)),RN=(e,n,s)=>{const a=Xt.fromRangeStart(e);if(e.collapsed)return a;{const l=Xt.fromRangeEnd(e);return s?Ou(n,l).getOr(l):Vi(n,a).getOr(a)}},dP=(e,n,s)=>{const a=e.getBody(),l=RN(e.selection.getRng(),a,s),f=Se(j1,e);return ck(s,f,a,l).bind(k=>DN(e,n,k))},MN=(e,n,s)=>{const a=Ne(ll(je.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),v=>v.dom),l=dt(a,e),f=dt(s,e);oe(Zo(l,f),Se(ON,!1)),oe(Zo(f,l),Se(ON,!0))},mP=(e,n)=>{const s=n.get();if(e.selection.isCollapsed()&&!e.composing&&s){const a=Xt.fromRangeStart(e.selection.getRng());Xt.isTextPosition(a)&&!Vf(a)&&(bx(e,ED(s,a)),n.set(null))}},rv=(e,n,s,a)=>{if(n.selection.isCollapsed()){const l=dt(a,e);oe(l,f=>{const v=Xt.fromRangeStart(n.selection.getRng());Zb(e,n.getBody(),v).bind(k=>DN(n,s,k))})}},N_=(e,n,s)=>Gd(e)?dP(e,n,s).isSome():!1,NN=(e,n,s)=>Gd(n)?Y5(e,n):!1,gP=e=>{const n=fa(null),s=Se(j1,e);return e.on("NodeChange",a=>{Gd(e)&&(MN(s,e.dom,a.parents),mP(e,n),rv(s,e,n,a.parents))}),n},BN=Se(NN,!0),IN=Se(NN,!1),SC=(e,n,s)=>{if(Gd(e)){const a=M_(e,n).getOrThunk(()=>{const l=e.selection.getRng();return n?Xt.fromRangeEnd(l):Xt.fromRangeStart(l)});return Zb(Se(j1,e),e.getBody(),a).exists(l=>{const f=O_(l);return bN(s,f).exists(v=>(bx(e,v),!0))})}else return!1},C4=(e,n)=>{const s=document.createRange();return s.setStart(e.container(),e.offset()),s.setEnd(n.container(),n.offset()),s},S4=e=>Ii(kl(e),Ma(e),(n,s)=>{const a=Uf(!0,n),l=Uf(!1,s);return Vi(e,a).forall(f=>f.isEqual(l))}).getOr(!0),B_=(e,n)=>s=>bN(n,s).map(a=>()=>bx(e,a)),I_=(e,n,s,a)=>{const l=e.getBody(),f=Se(j1,e);e.undoManager.ignore(()=>{e.selection.setRng(C4(s,a)),PO(e),Zb(f,l,Xt.fromRangeStart(e.selection.getRng())).map(xN).bind(B_(e,n)).each(Bt)}),e.nodeChanged()},FN=(e,n)=>{const s=xh(n,e);return s||e},PN=(e,n,s,a)=>{const l=FN(e.getBody(),a.container()),f=Se(j1,e),v=Zb(f,l,a);return v.bind(O=>s?O.fold(Le(Y.some(xN(O))),Y.none,Le(Y.some(O_(O))),Y.none):O.fold(Y.none,Le(Y.some(O_(O))),Y.none,Le(Y.some(xN(O))))).map(B_(e,n)).getOrThunk(()=>{const O=r0(s,l,a),F=O.bind(Z=>Zb(f,l,Z));return Ii(v,F,()=>fu(f,l,a).bind(Z=>S4(Z)?Y.some(()=>{g0(e,s,je.fromDom(Z))}):Y.none())).getOrThunk(()=>F.bind(()=>O.map(Z=>()=>{s?I_(e,n,a,Z):I_(e,n,Z,a)})))})},k4=(e,n,s)=>{if(e.selection.isCollapsed()&&Gd(e)){const a=Xt.fromRangeStart(e.selection.getRng());return PN(e,n,s,a)}return Y.none()},F_=e=>Hm(e)>1,mk=(e,n)=>{const s=je.fromDom(e.getBody()),a=je.fromDom(e.selection.getStart()),l=W1(a,s);return Hn(l,n).fold(Le(l),f=>l.slice(0,f))},LN=e=>Hm(e)===1,P_=e=>mk(e,n=>e.schema.isBlock(_e(n))||F_(n)),$N=e=>mk(e,n=>e.schema.isBlock(_e(n))),T4=(e,n)=>{const s=Se(a3,e);return ot(n,a=>s(a)?[a.dom]:[])},kC=e=>{const n=$N(e);return T4(e,n)},HN=(e,n,s,a)=>{const l=T4(n,a);if(l.length===0)g0(n,e,s);else{const f=r3(s.dom,l);n.selection.setRng(f.toRange())}},gk=(e,n)=>{const s=dt(P_(e),LN);return yo(s).bind(a=>{const l=Xt.fromRangeStart(e.selection.getRng());return Xg(n,l,a.dom)&&!Na(a)?Y.some(()=>HN(n,e,a,s)):Y.none()})},jL=(e,n)=>{const s=n.parentElement;return aa(n)&&!re(s)&&e.dom.isEmpty(s)},zN=e=>Na(je.fromDom(e)),VN=(e,n)=>{const s=e.selection.getStart(),a=jL(e,s)||zN(s)?r3(s,n):zI(e.selection.getRng(),n);e.selection.setRng(a.toRange())},ZL=(e,n)=>{const s=Zo(n,kC(e));s.length>0&&VN(e,s)},UN=e=>_n(e.startContainer),GL=e=>e.startOffset===0&&UN(e),o=(e,n)=>{const s=n.startContainer.parentElement;return!re(s)&&a3(e,je.fromDom(s))},c=e=>{const n=e.startContainer.parentNode,s=e.endContainer.parentNode;return!re(n)&&!re(s)&&n.isEqualNode(s)},u=e=>{const n=e.endContainer;return e.endOffset===(_n(n)?n.length:n.childNodes.length)},g=e=>c(e)&&u(e),b=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),y=e=>g(e)||b(e),S=e=>{const n=e.selection.getRng();return GL(n)&&o(e,n)&&y(n)},T=e=>{if(S(e)){const n=kC(e);return Y.some(()=>{PO(e),ZL(e,n)})}else return Y.none()},E=(e,n)=>e.selection.isCollapsed()?gk(e,n):T(e),M=(e,n)=>z0(e,s=>Od(s.dom),s=>n.isBlock(_e(s))),P=e=>M(je.fromDom(e.selection.getStart()),e.schema),N=e=>{const n=e.selection.getRng();return n.collapsed&&(UN(n)||e.dom.isEmpty(n.startContainer))&&!P(e)},V=e=>(N(e)&&VN(e,[]),!0),G=(e,n,s)=>Qe(s)?Y.some(()=>{e._selectionOverrides.hideFakeCaret(),g0(e,n,je.fromDom(s))}):Y.none(),Q=(e,n)=>{const s=n?_p:zw,a=n?Ql.Forwards:Ql.Backwards,l=o0(a,e.getBody(),e.selection.getRng());return s(l)?G(e,n,l.getNode(!n)):Y.from(Uf(n,l)).filter(f=>s(f)&&Cb(l,f)).bind(f=>G(e,n,f.getNode(!n)))},pe=(e,n)=>{const s=e.selection.getNode();return Kc(s)?G(e,n,s):Y.none()},he=(e,n)=>e.selection.isCollapsed()?Q(e,n):pe(e,n),xe=e=>oa(e,n=>dn(n.dom)||ia(n.dom)).exists(n=>dn(n.dom)),ie=e=>Ua(e??"").getOr(0),ae=(e,n)=>{const s=e||iD(n)?"margin":"padding",a=_r(n,"direction")==="rtl"?"-right":"-left";return s+a},Ce=(e,n,s,a,l,f)=>{const v=ae(s,je.fromDom(f)),k=ie(e.getStyle(f,v));if(n==="outdent"){const O=Math.max(0,k-a);e.setStyle(f,v,O?O+l:"")}else{const O=k+a+l;e.setStyle(f,v,O)}},ke=(e,n)=>rt(n,s=>{const a=ae(nw(e),s),l=il(s,a).map(ie).getOr(0);return e.dom.getContentEditable(s.dom)!=="false"&&l>0}),Re=e=>{const n=en(e);return!e.mode.isReadOnly()&&(n.length>1||ke(e,n))},Ye=e=>x1(e)||cb(e),vt=e=>jl(e).exists(Ye),en=e=>dt(Ag(e.selection.getSelectedBlocks()),n=>!Ye(n)&&!vt(n)&&xe(n)),jt=(e,n)=>{var s,a;if(e.mode.isReadOnly())return;const{dom:l}=e,f=xa(e),v=(a=(s=/[a-z%]+$/i.exec(f))===null||s===void 0?void 0:s[0])!==null&&a!==void 0?a:"px",k=ie(f),O=nw(e);oe(en(e),F=>{Ce(l,n,O,k,v,F.dom)})},cn=e=>jt(e,"indent"),Dn=e=>jt(e,"outdent"),fo=e=>{if(e.selection.isCollapsed()&&Re(e)){const n=e.dom,s=e.selection.getRng(),a=Xt.fromRangeStart(s),l=n.getParent(s.startContainer,n.isBlock);if(l!==null&&qy(je.fromDom(l),a,e.schema))return Y.some(()=>Dn(e))}return Y.none()},jo=(e,n,s)=>Us([fo,m4,Up,(a,l)=>k4(a,n,l),l4,KO,A_,he,Lh,E,g4],a=>a(e,s)).filter(a=>e.selection.isEditable()),ls=(e,n)=>{jo(e,n,!1).fold(()=>{e.selection.isEditable()&&(PO(e),Oh(e))},Bt)},As=(e,n)=>{jo(e,n,!0).fold(()=>{e.selection.isEditable()&&cc(e)},Bt)},pr=(e,n)=>{e.addCommand("delete",()=>{ls(e,n)}),e.addCommand("forwardDelete",()=>{As(e,n)})},fi=5,Zi=400,ca=e=>e.touches===void 0||e.touches.length!==1?Y.none():Y.some(e.touches[0]),ta=(e,n)=>{const s=Math.abs(e.clientX-n.x),a=Math.abs(e.clientY-n.y);return s>fi||a>fi},ys=e=>{const n=Kl(),s=fa(!1),a=Sc(l=>{e.dispatch("longpress",{...l,type:"longpress"}),s.set(!0)},Zi);e.on("touchstart",l=>{ca(l).each(f=>{a.cancel();const v={x:f.clientX,y:f.clientY,target:l.target};a.throttle(l),s.set(!1),n.set(v)})},!0),e.on("touchmove",l=>{a.cancel(),ca(l).each(f=>{n.on(v=>{ta(f,v)&&(n.clear(),s.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",l=>{a.cancel(),l.type!=="touchcancel"&&n.get().filter(f=>f.target.isEqualNode(l.target)).each(()=>{s.get()?l.preventDefault():e.dispatch("tap",{...l,type:"tap"})})},!0)},ti=(e,n)=>Lo(e,n.nodeName),ja=(e,n)=>_n(n)?!0:so(n)?!ti(e.getBlockElements(),n)&&!Dd(n)&&!yf(e,n)&&!V0(n):!1,dd=(e,n,s)=>De(QD(je.fromDom(s),je.fromDom(n)),a=>ti(e,a.dom)),pi=(e,n)=>{if(_n(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||ti(e,n.nextSibling)||V0(n.nextSibling)}return!1},ml=e=>e.dom.create(Pl(e),bh(e)),zl=e=>{const n=e.dom,s=e.selection,a=e.schema,l=a.getBlockElements(),f=s.getStart(),v=e.getBody();let k,O,F=null;const Z=Pl(e);if(!f||!so(f))return;const K=v.nodeName.toLowerCase();if(!a.isValidChild(K,Z.toLowerCase())||dd(l,v,f))return;if(v.firstChild===v.lastChild&&aa(v.firstChild)){k=ml(e),k.appendChild(Pg().dom),v.replaceChild(k,v.firstChild),e.selection.setCursorLocation(k,0),e.nodeChanged();return}let J=v.firstChild;for(;J;)if(so(J)&&Lc(a,J),ja(a,J)){if(pi(l,J)){O=J,J=J.nextSibling,n.remove(O);continue}if(!k){if(!F&&e.hasFocus()&&(F=gN(e.selection.getRng(),()=>document.createElement("span"))),!J.parentNode){J=null;break}k=ml(e),v.insertBefore(k,J)}O=J,J=J.nextSibling,k.appendChild(O)}else k=null,J=J.nextSibling;F&&(e.selection.setRng(fN(F)),e.nodeChanged())},R0=(e,n,s)=>{const a=je.fromDom(ml(e)),l=Pg();va(a,l),s(n,a);const f=document.createRange();return f.setStartBefore(l.dom),f.setEndBefore(l.dom),f},TC=e=>{e.on("NodeChange",()=>zl(e))},km=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,E4=(e,n,s)=>function(a){const l=arguments,f=l[l.length-2],v=f>0?n.charAt(f-1):"";if(v==='"')return a;if(v===">"){const k=n.lastIndexOf("<",f);if(k!==-1&&n.substring(k,f).indexOf('contenteditable="false"')!==-1)return a}return'<span class="'+s+'" data-mce-content="'+e.dom.encode(l[0])+'">'+e.dom.encode(typeof l[1]=="string"?l[1]:l[0])+"</span>"},av=(e,n,s)=>{let a=n.length,l=s.content;if(s.format!=="raw"){for(;a--;)l=l.replace(n[a],E4(e,l,xT(e)));s.content=l}},M0=(e,n)=>rt(e,s=>{const a=n.match(s);return a!==null&&a[0].length===n.length}),Hh=e=>{const n="contenteditable",s=" "+bn.trim(w2(e))+" ",a=" "+bn.trim(xT(e))+" ",l=km(s),f=km(a),v=BA(e);v.length>0&&e.on("BeforeSetContent",k=>{av(e,v,k)}),e.parser.addAttributeFilter("class",k=>{let O=k.length;for(;O--;){const F=k[O];l(F)?F.attr(n,"true"):f(F)&&F.attr(n,"false")}}),e.serializer.addAttributeFilter(n,k=>{let O=k.length;for(;O--;){const F=k[O];if(!l(F)&&!f(F))continue;const Z=F.attr("data-mce-content");v.length>0&&Z?M0(v,Z)?(F.name="#text",F.type=3,F.raw=!0,F.value=Z):F.remove():F.attr(n,null)}})},fk=e=>Yt(je.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),EC=(e,n)=>{n.hasAttribute("data-mce-caret")&&(ub(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},iv=(e,n)=>{const s=fk(e);if(s){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),EC(e,s);return}jk(s)&&(EC(e,s),e.undoManager.add())}},pk=e=>{e.on("keyup compositionstart",Se(iv,e))},_C=ia,L_=(e,n,s)=>uP(n,e,s,m0,U1,_C),hk=(e,n,s)=>D0(n,e,s,f=>m0(f)||XD(f),f=>U1(f)||Vw(f),_C),bk=e=>{const n=e.dom.create(Pl(e));return n.innerHTML='<br data-mce-bogus="1">',n},N0=(e,n,s)=>{const a=Km(e.getBody()),l=Se(O2,n===1?a.next:a.prev);if(s.collapsed){const f=e.dom.getParent(s.startContainer,"PRE");if(!f)return;if(!l(Xt.fromRangeStart(s))){const k=je.fromDom(bk(e));n===1?Xu(je.fromDom(f),k):Ji(je.fromDom(f),k),e.selection.select(k.dom,!0),e.selection.collapse()}}},jp=(e,n)=>{const s=n?Ql.Forwards:Ql.Backwards,a=e.selection.getRng();return L_(s,e,a).orThunk(()=>(N0(e,s,a),Y.none()))},wr=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return hk(s,e,a).orThunk(()=>(N0(e,s,a),Y.none()))},Jf=(e,n)=>{const s=n?e.getEnd(!0):e.getStart(!0);return IO(s)?!n:n},af=(e,n)=>jp(e,Jf(e.selection,n)).exists(s=>(Fd(e,s),!0)),$_=(e,n)=>wr(e,n).exists(s=>(Fd(e,s),!0)),vk=(e,n)=>AN(e,n,n?U1:m0),yk=(e,n)=>rN(e,!n).map(s=>{const a=s.toRange(),l=e.selection.getRng();return n?a.setStart(l.startContainer,l.startOffset):a.setEnd(l.endContainer,l.endOffset),a}).exists(s=>(Fd(e,s),!0)),_4=e=>ce(["figcaption"],_e(e)),H_=(e,n,s)=>{const a=Se(Lr,n);return oa(je.fromDom(e.container()),l=>s.isBlock(_e(l)),a).filter(_4)},cv=(e,n,s)=>n?Jd(e.dom,s):tP(e.dom,s),xk=(e,n)=>{const s=je.fromDom(e.getBody()),a=Xt.fromRangeStart(e.selection.getRng());return H_(a,s,e.schema).exists(()=>{if(cv(s,n,a)){const f=R0(e,s,n?va:yi);return e.selection.setRng(f),!0}else return!1})},A4=(e,n)=>e.selection.isCollapsed()?xk(e,n):!1,WN=(e,n,s)=>{const a=e.selection.getRng(),l=Xt.fromRangeStart(a);return e.getBody().firstChild===n&&tP(s,l)?(e.execCommand("InsertNewBlockBefore"),!0):!1},qL=(e,n)=>{const s=e.selection.getRng(),a=Xt.fromRangeStart(s);return e.getBody().lastChild===n&&Jd(n,a)?(e.execCommand("InsertNewBlockAfter"),!0):!1},z_=(e,n)=>n?Y.from(e.dom.getParent(e.selection.getNode(),"details")).map(s=>qL(e,s)).getOr(!1):Y.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(s=>Y.from(e.dom.getParent(s,"details")).map(a=>WN(e,a,s))).getOr(!1),fP=(e,n)=>z_(e,n),Pd={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},AC=e=>Ne(e,n=>({...Pd,...n})),q7=e=>Ne(e,n=>({...Pd,...n})),pP=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,hP=(e,n)=>ot(AC(e),s=>pP(s,n)?[s]:[]),bP=(e,n)=>ot(q7(e),s=>pP(s,n)?[s]:[]),js=(e,...n)=>()=>e.apply(null,n),O4=(e,n)=>hn(hP(e,n),s=>s.action()),jN=(e,n)=>Us(bP(e,n),s=>s.action()),ZN=(e,n)=>{const s=n?Ql.Forwards:Ql.Backwards,a=e.selection.getRng();return uP(e,s,a,_p,zw,Kc).exists(l=>(Fd(e,l),!0))},lv=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return D0(e,s,a,_p,zw,Kc).exists(l=>(Fd(e,l),!0))},wk=(e,n)=>AN(e,n,n?zw:_p),Tm=mg.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),uv={...Tm,none:e=>Tm.none(e)},yP=(e,n)=>Gb(e,n,pt),Gb=(e,n,s)=>ot(Rl(e),a=>ga(a,n)?s(a)?[a]:[]:Gb(a,n,s)),GN=(e,n,s=$e)=>{if(s(n))return Y.none();if(ce(e,_e(n)))return Y.some(n);const a=l=>ga(l,"table")||s(l);return hf(n,e.join(","),a)},qN=(e,n)=>GN(["td","th"],e,n),D4=e=>yP(e,"th,td"),R4=(e,n)=>wo(e,"table",n),KN=(e,n,s,a,l=pt)=>{const f=a===1;if(!f&&s<=0)return uv.first(e[0]);if(f&&s>=e.length-1)return uv.last(e[e.length-1]);{const v=s+a,k=e[v];return l(k)?uv.middle(n,k):KN(e,n,v,a,l)}},_t=(e,n)=>R4(e,n).bind(s=>{const a=D4(s);return Hn(a,f=>Lr(e,f)).map(f=>({index:f,all:a}))}),Cr=(e,n,s)=>_t(e,s).fold(()=>uv.none(e),l=>KN(l.all,e,l.index,1,n)),Zs=(e,n,s)=>_t(e,s).fold(()=>uv.none(),l=>KN(l.all,e,l.index,-1,n)),oc=e=>Pv(e).filter(n=>n.trim().length!==0||n.indexOf(wc)>-1).isSome(),bc=e=>Ks(e)&&pl(e,"contenteditable")==="false",Si=["img","br"],Qd=e=>oc(e)||ce(Si,_e(e))||bc(e),vx=e=>vl(e,Qd),dv=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Em=(e,n)=>ot(n,s=>{const a=dv(hp(s.getBoundingClientRect()),-1);return[{x:a.left,y:e(a),cell:s},{x:a.right,y:e(a),cell:s}]}),K7=(e,n,s)=>it(e,(a,l)=>a.fold(()=>Y.some(l),f=>{const v=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-s)),k=Math.sqrt(Math.abs(l.x-n)+Math.abs(l.y-s));return Y.some(k<v?l:f)}),Y.none()),YN=(e,n,s,a,l)=>{const f=ll(je.fromDom(s),"td,th,caption").map(k=>k.dom),v=dt(Em(e,f),k=>n(k,l));return K7(v,a,l).map(k=>k.cell)},xP=e=>e.bottom,$V=e=>e.top,KL=(e,n)=>e.y<n,wP=(e,n)=>e.y>n,Y7=Se(YN,xP,KL),X7=Se(YN,$V,wP),HV=(e,n)=>Gt(n.getClientRects()).bind(s=>Y7(e,s.left,s.top)).bind(s=>x4(nP(s),n)),zV=(e,n)=>yo(n.getClientRects()).bind(s=>X7(e,s.left,s.top)).bind(s=>x4(CN(s),n)),YL=(e,n,s)=>s.breakAt.exists(a=>e(n,a).breakAt.isSome()),VV=e=>e.breakType===Wp.Wrap&&e.positions.length===0,UV=e=>e.breakType===Wp.Br&&e.positions.length===1,J7=(e,n,s)=>{const a=e(n,s);return VV(a)||!aa(s.getNode())&&UV(a)?!YL(e,n,a):a.breakAt.isNone()},WV=Se(J7,CC),mv=Se(J7,D_),Q7=(e,n,s)=>{const a=Xt.fromRangeStart(n);return B1(!e,s).exists(l=>l.isEqual(a))},eH=(e,n,s,a)=>{const l=e.selection.getRng(),f=n?1:-1;return DT()&&Q7(n,l,s)?(ud(f,e,s,!n,!1).each(v=>{Fd(e,v)}),!0):!1},lq=(e,n,s)=>HV(n,s).orThunk(()=>Gt(s.getClientRects()).bind(a=>wN(Q5(e,Xt.before(n)),a.left))).getOr(Xt.before(n)),uq=(e,n,s)=>zV(n,s).orThunk(()=>Gt(s.getClientRects()).bind(a=>wN(eP(e,Xt.after(n)),a.left))).getOr(Xt.after(n)),jV=(e,n)=>{const s=n.getNode(e);return rg(s)?Y.some(s):Y.none()},dq=(e,n,s)=>{n.undoManager.transact(()=>{const a=e?Xu:Ji,l=R0(n,je.fromDom(s),a);Fd(n,l)})},tH=(e,n,s)=>{const a=jV(!!n,s),l=n===!1;a.fold(()=>Fd(e,s.toRange()),f=>B1(l,e.getBody()).filter(v=>v.isEqual(s)).fold(()=>Fd(e,s.toRange()),v=>dq(n,e,f)))},CP=(e,n,s,a)=>{const l=e.selection.getRng(),f=Xt.fromRangeStart(l),v=e.getBody();if(!n&&WV(a,f)){const k=lq(v,s,f);return tH(e,n,k),!0}else if(n&&mv(a,f)){const k=uq(v,s,f);return tH(e,n,k),!0}else return!1},nH=(e,n,s)=>Y.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(a=>Y.from(e.dom.getParent(a,"table")).map(l=>s(e,n,l,a))).getOr(!1),SP=(e,n)=>nH(e,n,eH),kP=(e,n)=>nH(e,n,CP),oH=e=>{const n=Aw.exact(e,0,e,0);return oE(n)},XL=(e,n,s)=>s.fold(Y.none,Y.none,(a,l)=>vx(l).map(f=>oH(f)),a=>e.mode.isReadOnly()?Y.none():(e.execCommand("mceTableInsertRowAfter"),sH(e,n,a))),sH=(e,n,s)=>XL(e,n,Cr(s,Gl)),ZV=(e,n,s)=>XL(e,n,Zs(s,Gl)),rH=(e,n)=>{const s=["table","li","dl"],a=je.fromDom(e.getBody()),l=k=>{const O=_e(k);return Lr(k,a)||ce(s,O)},f=e.selection.getRng(),v=je.fromDom(n?f.endContainer:f.startContainer);return qN(v,l).map(k=>(R4(k,l).each(Z=>{e.model.table.clearSelectedCells(Z.dom)}),e.selection.collapse(!n),(n?sH:ZV)(e,l,k).each(Z=>{e.selection.setRng(Z)}),!0)).getOr(!1)},GV=(e,n,s)=>{const a=ms.os.isMacOS()||ms.os.isiOS();O4([{keyCode:eo.RIGHT,action:js(af,e,!0)},{keyCode:eo.LEFT,action:js(af,e,!1)},{keyCode:eo.UP,action:js($_,e,!1)},{keyCode:eo.DOWN,action:js($_,e,!0)},...a?[{keyCode:eo.UP,action:js(yk,e,!1),metaKey:!0,shiftKey:!0},{keyCode:eo.DOWN,action:js(yk,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:eo.RIGHT,action:js(SP,e,!0)},{keyCode:eo.LEFT,action:js(SP,e,!1)},{keyCode:eo.UP,action:js(kP,e,!1)},{keyCode:eo.DOWN,action:js(kP,e,!0)},{keyCode:eo.UP,action:js(kP,e,!1)},{keyCode:eo.UP,action:js(fP,e,!1)},{keyCode:eo.DOWN,action:js(fP,e,!0)},{keyCode:eo.RIGHT,action:js(ZN,e,!0)},{keyCode:eo.LEFT,action:js(ZN,e,!1)},{keyCode:eo.UP,action:js(lv,e,!1)},{keyCode:eo.DOWN,action:js(lv,e,!0)},{keyCode:eo.RIGHT,action:js(N_,e,n,!0)},{keyCode:eo.LEFT,action:js(N_,e,n,!1)},{keyCode:eo.RIGHT,ctrlKey:!a,altKey:a,action:js(BN,e,n)},{keyCode:eo.LEFT,ctrlKey:!a,altKey:a,action:js(IN,e,n)},{keyCode:eo.UP,action:js(A4,e,!1)},{keyCode:eo.DOWN,action:js(A4,e,!0)}],s).each(l=>{s.preventDefault()})},TP=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||GV(e,n,s)})},B0=(e,n)=>({container:e,offset:n}),EP=qs.DOM,_P=e=>n=>e===n?-1:0,JL=e=>n=>e.isBlock(n)||ce(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",QL=(e,n,s)=>{if(_n(e)&&n>=0)return Y.some(B0(e,n));{const a=v1(EP);return Y.from(a.backwards(e,n,_P(e),s)).map(l=>B0(l.container,l.container.data.length))}},qV=(e,n,s)=>{if(_n(e)&&n>=e.length)return Y.some(B0(e,n));{const a=v1(EP);return Y.from(a.forwards(e,n,_P(e),s)).map(l=>B0(l.container,0))}},AP=(e,n,s)=>{if(!_n(e))return Y.none();const a=e.data;if(n>=0&&n<=a.length)return Y.some(B0(e,n));{const l=v1(EP);return Y.from(l.backwards(e,n,_P(e),s)).bind(f=>{const v=f.container.data;return AP(f.container,n+v.length,s)})}},aH=(e,n,s)=>{if(!_n(e))return Y.none();const a=e.data;if(n<=a.length)return Y.some(B0(e,n));{const l=v1(EP);return Y.from(l.forwards(e,n,_P(e),s)).bind(f=>aH(f.container,n-a.length,s))}},e$=(e,n,s,a,l)=>{const f=v1(e,JL(e));return Y.from(f.backwards(n,s,a,l))},KV=e=>e.collapsed&&_n(e.startContainer),YV=e=>Nl(e.toString().replace(/\u00A0/g," ")),iH=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,XV=(e,n)=>e.substring(n.length),t$=(e,n,s,a=!1)=>{let l;const f=s.charAt(0);for(l=n-1;l>=0;l--){const v=e.charAt(l);if(!a&&iH(v))return Y.none();if(f===v&&Vo(e,s,l,n))break}return Y.some(l)},n$=(e,n,s,a=!1)=>{if(!KV(n))return Y.none();const l={text:"",offset:0},f=(k,O,F)=>(l.text=F+l.text,l.offset+=O,t$(l.text,l.offset,s,a).getOr(O)),v=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return e$(e,n.startContainer,n.startOffset,f,v).bind(k=>{const O=n.cloneRange();if(O.setStart(k.container,k.offset),O.setEnd(n.endContainer,n.endOffset),O.collapsed)return Y.none();const F=YV(O);return F.lastIndexOf(s)!==0?Y.none():Y.some({text:XV(F,s),range:O,trigger:s})})},cH=e=>e.nodeType===we,JV=e=>e.nodeType===Bm,lH=e=>{if(cH(e))return B0(e,e.data.length);{const n=e.childNodes;return n.length>0?lH(n[n.length-1]):B0(e,n.length)}},uH=(e,n)=>{const s=e.childNodes;return s.length>0&&n<s.length?uH(s[n],0):s.length>0&&JV(e)&&s.length===n?lH(s[s.length-1]):B0(e,n)},QV=(e,n)=>{var s;const a=(s=e.getParent(n.container,e.isBlock))!==null&&s!==void 0?s:e.getRoot();return e$(e,n.container,n.offset,(l,f)=>f===0?-1:f,a).filter(l=>{const f=l.container.data.charAt(l.offset-1);return!iH(f)}).isSome()},eU=e=>n=>{const s=uH(n.startContainer,n.startOffset);return!QV(e,s)},tU=(e,n,s)=>Us(s.triggers,a=>n$(e,n,a)),ju=(e,n)=>{const s=n(),a=e.selection.getRng();return tU(e.dom,a,s).bind(l=>dH(e,n,l))},dH=(e,n,s,a={})=>{var l;const f=n(),k=(l=e.selection.getRng().startContainer.nodeValue)!==null&&l!==void 0?l:"",O=dt(f.lookupByTrigger(s.trigger),Z=>s.text.length>=Z.minChars&&Z.matches.getOrThunk(()=>eU(e.dom))(s.range,k,s.text));if(O.length===0)return Y.none();const F=Promise.all(Ne(O,Z=>Z.fetch(s.text,Z.maxResults,a).then(J=>({matchText:s.text,items:J,columns:Z.columns,onAction:Z.onAction,highlightOn:Z.highlightOn}))));return Y.some({lookupData:F,context:s})};var qb;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(qb||(qb={}));const o$=(e,n,s)=>e.stype===qb.Error?n(e.serror):s(e.svalue),mH=e=>{const n=[],s=[];return oe(e,a=>{o$(a,l=>s.push(l),l=>n.push(l))}),{values:n,errors:s}},s$=(e,n)=>e.stype===qb.Error?{stype:qb.Error,serror:n(e.serror)}:e,gH=(e,n)=>e.stype===qb.Value?{stype:qb.Value,svalue:n(e.svalue)}:e,Ck=(e,n)=>e.stype===qb.Value?n(e.svalue):e,r$=(e,n)=>e.stype===qb.Error?n(e.serror):e,a$=e=>({stype:qb.Value,svalue:e}),OP=e=>({stype:qb.Error,serror:e}),em={fromResult:e=>e.fold(OP,a$),toResult:e=>o$(e,zc.error,zc.value),svalue:a$,partition:mH,serror:OP,bind:Ck,bindError:r$,map:gH,mapError:s$,fold:o$},M4=e=>ve(e)&&ns(e).length>100?" removed due to size":JSON.stringify(e,null,2),DP=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Le("... (only showing first ten failures)")}]):e;return Ne(n,s=>"Failed path: ("+s.path.join(" > ")+`)
`+s.getErrorInfo())},Sk=(e,n)=>em.serror([{path:e,getErrorInfo:n}]),XN=(e,n,s)=>Sk(e,()=>'Could not find valid *required* value for "'+n+'" in '+M4(s)),gv=(e,n)=>Sk(e,()=>'Choice schema did not contain choice key: "'+n+'"'),JN=(e,n,s)=>Sk(e,()=>'The chosen schema: "'+s+'" did not exist in branches: '+M4(n)),hH=(e,n)=>Sk(e,Le(n)),bH=(e,n,s,a)=>kr(s,a).fold(()=>JN(e,s,a),f=>f.extract(e.concat(["branch: "+a]),n)),nU=(e,n)=>({extract:(l,f)=>kr(f,e).fold(()=>gv(l,e),k=>bH(l,f,n,k)),toString:()=>"chooseOn("+e+"). Possible values: "+ns(n)}),vH=(e,n)=>n,oU=(e,n)=>In(e)&&In(n)?kk(e,n):n,yH=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const s={};for(let a=0;a<n.length;a++){const l=n[a];for(const f in l)Lo(l,f)&&(s[f]=e(s[f],l[f]))}return s},kk=yH(oU),xH=yH(vH),i$=()=>({tag:"required",process:{}}),sU=e=>({tag:"defaultedThunk",process:e}),wH=e=>sU(Le(e)),rU=()=>({tag:"option",process:{}}),aU=(e,n)=>e.length>0?em.svalue(kk(n,xH.apply(void 0,e))):em.svalue(n),CH=e=>B(em.serror,ut)(e),SH={consolidateObj:(e,n)=>{const s=em.partition(e);return s.errors.length>0?CH(s.errors):aU(s.values,n)},consolidateArr:e=>{const n=em.partition(e);return n.errors.length>0?CH(n.errors):em.svalue(n.values)}},iU=(e,n,s,a)=>({tag:"field",key:e,newKey:n,presence:s,prop:a}),cU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),kH=(e,n,s)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return s(e.newKey,e.instantiator)}},c$=e=>{const n=(a,l)=>em.bindError(e(l),f=>hH(a,f)),s=Le("val");return{extract:n,toString:s}},TH=c$(em.svalue),EH=(e,n,s,a)=>kr(n,s).fold(()=>XN(e,s,n),a),l$=(e,n,s,a)=>{const l=kr(e,n).getOrThunk(()=>s(e));return a(l)},lU=(e,n,s)=>s(kr(e,n)),uU=(e,n,s,a)=>{const l=kr(e,n).map(f=>f===!0?s(e):f);return a(l)},dU=(e,n,s,a,l)=>{const f=k=>l.extract(n.concat([a]),k),v=k=>k.fold(()=>em.svalue(Y.none()),O=>{const F=l.extract(n.concat([a]),O);return em.map(F,Y.some)});switch(e.tag){case"required":return EH(n,s,a,f);case"defaultedThunk":return l$(s,a,e.process,f);case"option":return lU(s,a,v);case"defaultedOptionThunk":return uU(s,a,e.process,v);case"mergeWithThunk":return l$(s,a,Le({}),k=>{const O=kk(e.process(s),k);return f(O)})}},mU=(e,n,s)=>{const a={},l=[];for(const f of s)kH(f,(v,k,O,F)=>{const Z=dU(O,e,n,v,F);em.fold(Z,K=>{l.push(...K)},K=>{a[k]=K})},(v,k)=>{a[v]=k(n)});return l.length>0?em.serror(l):em.svalue(a)},QN=e=>({extract:(a,l)=>mU(a,l,e),toString:()=>`obj{
`+Ne(e,l=>kH(l,(f,v,k,O)=>f+" -> "+O.toString(),(f,v)=>"state("+f+")")).join(`
`)+"}"}),u$=e=>({extract:(a,l)=>{const f=Ne(l,(v,k)=>e.extract(a.concat(["["+k+"]"]),v));return SH.consolidateArr(f)},toString:()=>"array("+e.toString()+")"}),_H=(e,n)=>{const s=Qt;return{extract:(f,v)=>{const k=[];for(const O of e){const F=O.extract(f,v);if(F.stype===qb.Value)return{stype:qb.Value,svalue:s(F.svalue)};k.push(F)}return SH.consolidateArr(k)},toString:()=>"oneOf("+Ne(e,f=>f.toString()).join(", ")+")"}},gU=B(u$,QN),AH=e=>c$(n=>e(n).fold(em.serror,em.svalue)),OH=(e,n,s)=>{const a=n.extract([e],s);return em.mapError(a,l=>({input:s,errors:l}))},fU=(e,n,s)=>em.toResult(OH(e,n,s)),pU=e=>`Errors: 
`+DP(e.errors).join(`
`)+`

Input object: `+M4(e.input),d$=(e,n)=>nU(e,Ls(n,QN)),hU=Le(TH),eB=(e,n)=>c$(s=>{const a=typeof s;return e(s)?em.svalue(s):em.serror(`Expected type: ${n} but got: ${a}`)}),bU=eB(z,"number"),N4=eB(ue,"string"),DH=eB(rn,"boolean"),m$=eB(Be,"function"),B4=iU,g$=cU,RH=e=>AH(n=>ce(e,n)?zc.value(n):zc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),f$=(e,n)=>B4(e,e,i$(),n),MH=e=>f$(e,N4),RP=(e,n)=>B4(e,e,i$(),RH(n)),p$=e=>f$(e,m$),NH=(e,n)=>B4(e,e,i$(),u$(n)),h$=(e,n)=>B4(e,e,rU(),n),V_=e=>h$(e,N4),vU=e=>h$(e,m$),yU=(e,n)=>B4(e,e,wH(n),hU()),I4=(e,n,s)=>B4(e,e,wH(n),s),BH=(e,n)=>I4(e,n,bU),MP=(e,n)=>I4(e,n,N4),xU=(e,n,s)=>I4(e,n,RH(s)),b$=(e,n)=>I4(e,n,DH),fv=(e,n)=>I4(e,n,m$),IH=(e,n,s)=>I4(e,n,u$(s)),FH=MH("type"),wU=p$("fetch"),NP=p$("onAction"),PH=fv("onSetup",()=>Kt),CU=V_("text"),SU=V_("icon"),kU=V_("tooltip"),LH=V_("label"),TU=b$("active",!1),v$=b$("enabled",!0),$H=b$("primary",!1),EU=e=>yU("columns",e),tB=e=>MP("type",e),HH=QN([FH,MH("trigger"),BH("minChars",1),EU(1),BH("maxResults",10),vU("matches"),wU,NP,IH("highlightOn",[],N4)]),_U=e=>fU("Autocompleter",HH,e),y$=[v$,kU,SU,CU,PH,MP("context","mode:design")],zH=[TU].concat(y$),BP=[fv("predicate",$e),xU("scope","node",["node","editor"]),xU("position","selection",["node","selection","line"])],AU=y$.concat([tB("contextformbutton"),MP("align","end"),$H,NP,g$("original",Qt)]),md=zH.concat([tB("contextformbutton"),MP("align","end"),$H,NP,g$("original",Qt)]),yx=y$.concat([tB("contextformbutton")]),OU=zH.concat([tB("contextformtogglebutton")]),fq=d$("type",{contextformbutton:AU,contextformtogglebutton:md}),x$=[LH,NH("commands",fq),h$("launch",d$("type",{contextformbutton:yx,contextformtogglebutton:OU})),fv("onInput",Kt),fv("onSetup",Kt)],DU=[...BP,...x$,RP("type",["contextform"]),fv("initValue",Le("")),V_("placeholder")],RU=[...BP,...x$,RP("type",["contextsliderform"]),fv("initValue",Le(0)),fv("min",Le(0)),fv("max",Le(100))],MU=[...BP,...x$,RP("type",["contextsizeinputform"]),fv("initValue",Le({width:"",height:""}))];d$("type",{contextform:DU,contextsliderform:RU,contextsizeinputform:MU}),QN([tB("contexttoolbar"),f$("items",_H([N4,gU([V_("name"),V_("label"),NH("items",N4)])]))].concat(BP));const VH=e=>{const n=e.ui.registry.getAll().popups,s=Ls(n,v=>_U(v).fold(k=>{throw new Error(pU(k))},Qt)),a=nu(bi(s,v=>v.trigger)),l=Bi(s);return{dataset:s,triggers:a,lookupByTrigger:v=>dt(l,k=>k.trigger===v)}},F4=(e,n)=>{const s=Sc(n.load,50);e.on("input",a=>{a.inputType==="insertCompositionText"&&!e.composing||s.throttle()}),e.on("keydown",a=>{const l=a.which;l===8?s.throttle():l===27?(s.cancel(),n.cancelIfNecessary()):(l===38||l===40)&&s.cancel()},!0),e.on("remove",s.cancel)},pq=e=>{const n=Kl(),s=fa(!1),a=n.isSet,l=()=>{a()&&(lr(e),s.set(!1),n.clear())},f=K=>{a()||n.set({trigger:K.trigger,matchLength:K.text.length})},v=Ht(()=>VH(e)),k=K=>n.get().map(J=>n$(e.dom,e.selection.getRng(),J.trigger,!0).bind(de=>dH(e,v,de,K))).getOrThunk(()=>ju(e,v)),O=K=>{k(K).fold(l,J=>{f(J.context),J.lookupData.then(de=>{n.get().map(Te=>{const be=J.context;Te.trigger===be.trigger&&(n.set({...Te,matchLength:be.text.length}),s.get()?(Jx(e,{range:be.range}),iT(e,{lookupData:de})):(s.set(!0),Jx(e,{range:be.range}),pb(e,{lookupData:de})))})})})},F=(K,J)=>{const de=K.compareBoundaryPoints(window.Range.START_TO_START,J),Te=K.compareBoundaryPoints(window.Range.END_TO_END,J);return de>=0&&Te<=0},Z=()=>n.get().bind(({trigger:K})=>{const J=e.selection.getRng();return n$(e.dom,J,K,s.get()).filter(({range:de})=>F(J,de)).map(({range:de})=>de)});e.addCommand("mceAutocompleterReload",(K,J)=>{const de=ve(J)?J.fetchOptions:{};O(de)}),e.addCommand("mceAutocompleterClose",l),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{Z().each(K=>{Jx(e,{range:K})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>Z().isSome()),F4(e,{cancelIfNecessary:l,load:O})},NU=le().browser.isSafari(),pv=e=>ch(je.fromDom(e)),UH=(e,n)=>{var s;return e.startOffset===0&&e.endOffset===((s=n.textContent)===null||s===void 0?void 0:s.length)},IP=(e,n)=>Y.from(e.getParent(n.container(),"details")),w$=(e,n)=>IP(e,n).isSome(),BU=(e,n)=>{const s=Y.from(e.getParent(n.startContainer,"details")),a=Y.from(e.getParent(n.endContainer,"details"));if(s.isSome()||a.isSome()){const l=s.bind(f=>Y.from(e.select("summary",f)[0]));return Y.some({startSummary:l,startDetails:s,endDetails:a})}else return Y.none()},C$=(e,n)=>kl(n).exists(s=>s.isEqual(e)),xx=(e,n)=>Ma(n).exists(s=>aa(s.getNode())&&Ou(n,s).exists(a=>a.isEqual(e))||s.isEqual(e)),WH=(e,n)=>n.startSummary.exists(s=>C$(e,s)),jH=(e,n)=>n.startSummary.exists(s=>xx(e,s)),IU=(e,n)=>n.startDetails.exists(s=>Ou(s,e).forall(a=>n.startSummary.exists(l=>!l.contains(e.container())&&l.contains(a.container())))),FP=(e,n,s)=>s.startDetails.exists(a=>Vi(e,n).forall(l=>!a.contains(l.container()))),PP=(e,n)=>{const s=n.getNode();oo(s)||e.selection.setCursorLocation(s,n.offset())},S$=(e,n,s)=>{const a=e.dom.getParent(n.container(),"details");if(a&&!a.open){const l=e.dom.select("summary",a)[0];l&&(s?kl(l):Ma(l)).each(v=>PP(e,v))}else PP(e,n)},ZH=(e,n)=>{const s=O=>O.contains(e.startContainer),a=O=>O.contains(e.endContainer),l=n.startSummary.exists(s),f=n.startSummary.exists(a),v=n.startDetails.forall(O=>n.endDetails.forall(F=>O!==F));return(l||f)&&!(l&&f)||v},GH=(e,n,s)=>{const{dom:a,selection:l}=e,f=e.getBody();if(s==="character"){const v=Xt.fromRangeStart(l.getRng()),k=a.getParent(v.container(),a.isBlock),O=IP(a,v),F=k&&a.isEmpty(k),Z=re(k==null?void 0:k.previousSibling),K=re(k==null?void 0:k.nextSibling);return F&&(n?K:Z)&&r0(!n,f,v).exists(Te=>w$(a,Te)&&!ba(O,IP(a,Te)))?!0:r0(n,f,v).fold($e,J=>{const de=IP(a,J);if(w$(a,J)&&!ba(O,de)){if(n||S$(e,J,!1),k&&F){if(n&&Z)return!0;if(!n&&K)return!0;S$(e,J,n),e.dom.remove(k)}return!0}else return!1})}else return!1},FU=(e,n,s,a)=>{const f=e.selection.getRng(),v=Xt.fromRangeStart(f),k=e.getBody();return a==="selection"?ZH(f,n):s?jH(v,n)||FP(k,v,n):WH(v,n)||IU(v,n)},PU=(e,n,s)=>BU(e.dom,e.selection.getRng()).fold(()=>GH(e,n,s),a=>FU(e,a,n,s)||GH(e,n,s)),LU=(e,n,s)=>{const a=e.selection,l=a.getNode(),f=a.getRng(),v=Xt.fromRangeStart(f);return lm(l)?(s==="selection"&&UH(f,l)||Xg(n,v,l)?pv(l):e.undoManager.transact(()=>{const k=a.getSel();let{anchorNode:O,anchorOffset:F,focusNode:Z,focusOffset:K}=k??{};const J=()=>{Qe(O)&&Qe(F)&&Qe(Z)&&Qe(K)&&(k==null||k.setBaseAndExtent(O,F,Z,K))},de=()=>{O=k==null?void 0:k.anchorNode,F=k==null?void 0:k.anchorOffset,Z=k==null?void 0:k.focusNode,K=k==null?void 0:k.focusOffset},Te=(Me,Xe)=>{oe(Me.childNodes,gt=>{Fy(gt)&&Xe.appendChild(gt)})},be=e.dom.create("span",{"data-mce-bogus":"1"});Te(l,be),l.appendChild(be),J(),(s==="word"||s==="line")&&(k==null||k.modify("extend",n?"right":"left",s)),!a.isCollapsed()&&UH(a.getRng(),be)?pv(l):(e.execCommand(n?"ForwardDelete":"Delete"),de(),Te(be,l),J()),e.dom.remove(be)}),!0):!1},U_=(e,n,s)=>PU(e,n,s)||NU&&LU(e,n,s)?Y.some(Kt):Y.none(),k$=e=>(n,s,a={})=>{const l=n.getBody(),f={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:l,currentTarget:l,eventPhase:Event.AT_TARGET,originalTarget:l,explicitOriginalTarget:l,isTrusted:!1,srcElement:l,cancelable:!1,preventDefault:Kt,inputType:s},v=Mx(new InputEvent(e));return n.dispatch(e,{...v,...f,...a})},nB=k$("input"),LP=k$("beforeinput"),qH=le(),KH=qH.os,YH=KH.isMacOS()||KH.isiOS(),XH=qH.browser.isFirefox(),HU=(e,n,s)=>{const a=s.keyCode===eo.BACKSPACE?"deleteContentBackward":"deleteContentForward",l=e.selection.isCollapsed(),f=l?"character":"selection",v=k=>l?k?"word":"line":"selection";jN([{keyCode:eo.BACKSPACE,action:js(fo,e)},{keyCode:eo.BACKSPACE,action:js(m4,e,!1)},{keyCode:eo.DELETE,action:js(m4,e,!0)},{keyCode:eo.BACKSPACE,action:js(Up,e,!1)},{keyCode:eo.DELETE,action:js(Up,e,!0)},{keyCode:eo.BACKSPACE,action:js(k4,e,n,!1)},{keyCode:eo.DELETE,action:js(k4,e,n,!0)},{keyCode:eo.BACKSPACE,action:js(KO,e,!1)},{keyCode:eo.DELETE,action:js(KO,e,!0)},{keyCode:eo.BACKSPACE,action:js(U_,e,!1,f)},{keyCode:eo.DELETE,action:js(U_,e,!0,f)},...YH?[{keyCode:eo.BACKSPACE,altKey:!0,action:js(U_,e,!1,v(!0))},{keyCode:eo.DELETE,altKey:!0,action:js(U_,e,!0,v(!0))},{keyCode:eo.BACKSPACE,metaKey:!0,action:js(U_,e,!1,v(!1))}]:[{keyCode:eo.BACKSPACE,ctrlKey:!0,action:js(U_,e,!1,v(!0))},{keyCode:eo.DELETE,ctrlKey:!0,action:js(U_,e,!0,v(!0))}],{keyCode:eo.BACKSPACE,action:js(A_,e,!1)},{keyCode:eo.DELETE,action:js(A_,e,!0)},{keyCode:eo.BACKSPACE,action:js(he,e,!1)},{keyCode:eo.DELETE,action:js(he,e,!0)},{keyCode:eo.BACKSPACE,action:js(Lh,e,!1)},{keyCode:eo.DELETE,action:js(Lh,e,!0)},{keyCode:eo.BACKSPACE,action:js(l4,e,!1)},{keyCode:eo.DELETE,action:js(l4,e,!0)},{keyCode:eo.BACKSPACE,action:js(E,e,!1)},{keyCode:eo.DELETE,action:js(E,e,!0)},{keyCode:eo.BACKSPACE,action:js(g4,e,!1)},{keyCode:eo.DELETE,action:js(g4,e,!0)}],s).filter(k=>e.selection.isEditable()).each(k=>{s.preventDefault(),LP(e,a).isDefaultPrevented()||(k(),nB(e,a))})},zU=(e,n,s)=>O4([{keyCode:eo.BACKSPACE,action:js(__,e)},{keyCode:eo.DELETE,action:js(__,e)},...YH?[{keyCode:eo.BACKSPACE,altKey:!0,action:js(V,e)},{keyCode:eo.DELETE,altKey:!0,action:js(V,e)},...s?[{keyCode:XH?224:91,action:js(V,e)}]:[]]:[{keyCode:eo.BACKSPACE,ctrlKey:!0,action:js(V,e)},{keyCode:eo.DELETE,ctrlKey:!0,action:js(V,e)}]],n),bq=(e,n)=>{let s=!1;e.on("keydown",a=>{s=a.keyCode===eo.BACKSPACE,a.isDefaultPrevented()||HU(e,n,a)}),e.on("keyup",a=>{a.isDefaultPrevented()||zU(e,a,s),s=!1})},T$=e=>{for(;e;){if(so(e)||_n(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},P4=(e,n)=>{const s=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const f=T$(n.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&n.insertBefore(s.doc.createTextNode(wc),n.firstChild)}const l=s.createRng();if(n.normalize(),n.hasChildNodes()){const f=new ru(n,n);let v=n,k;for(;k=f.current();){if(_n(k)){l.setStart(k,0),l.setEnd(k,0);break}if(a[k.nodeName.toLowerCase()]){l.setStartBefore(k),l.setEndBefore(k);break}v=k,k=f.next()}k||(l.setStart(v,0),l.setEnd(v,0))}else aa(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(l.setStartBefore(n),l.setEndBefore(n)):(l.setStartAfter(n),l.setEndAfter(n)):(l.setStart(n,0),l.setEnd(n,0));e.selection.setRng(l),Fw(e,l)},oB=(e,n)=>{const s=e.getRoot();let a,l=n;for(;l!==s&&l&&e.getContentEditable(l)!=="false";){if(e.getContentEditable(l)==="true"){a=l;break}l=l.parentNode}return l!==s?a:s},E$=e=>Y.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),JH=e=>E$(e).fold(Le(""),n=>n.nodeName.toUpperCase()),VU=e=>E$(e).filter(n=>cb(je.fromDom(n))).isSome(),$P=e=>{e.innerHTML='<br data-mce-bogus="1">'},UU=(e,n,s)=>{const a=e.dom;Y.from(s.style).map(a.parseStyle).each(O=>{const Z={...Cu(je.fromDom(n)),...O};a.setStyles(n,Z)});const l=Y.from(s.class).map(O=>O.split(/\s+/)),f=Y.from(n.className).map(O=>dt(O.split(/\s+/),F=>F!==""));Ii(l,f,(O,F)=>{const Z=dt(F,J=>!ce(O,J)),K=[...O,...Z];a.setAttrib(n,"class",K.join(" "))});const v=["style","class"],k=Er(s,(O,F)=>!ce(v,F));a.setAttribs(n,k)},sB=(e,n)=>{if(Pl(e).toLowerCase()===n.tagName.toLowerCase()){const a=bh(e);UU(e,n,a)}},WU=(e,n,s,a,l=!0,f,v)=>{const k=e.dom,O=e.schema,F=Pl(e),Z=s?s.nodeName.toUpperCase():"";let K=n;const J=O.getTextInlineElements();let de;f||Z==="TABLE"||Z==="HR"?de=k.create(f||F,v||{}):de=s.cloneNode(!1);let Te=de;if(!l)k.setAttrib(de,"style",null),k.setAttrib(de,"class",null);else do if(J[K.nodeName]){if(Od(K)||Dd(K))continue;const be=K.cloneNode(!1);k.setAttrib(be,"id",""),de.hasChildNodes()?(be.appendChild(de.firstChild),de.appendChild(be)):(Te=be,de.appendChild(be))}while((K=K.parentNode)&&K!==a);return sB(e,de),$P(Te),de},tg=(e,n)=>e.dom.getParent(n,kv),jU=(e,n,s)=>{let a=n;for(;a&&a!==e&&re(a.nextSibling);){const l=a.parentElement;if(!l||!s(l))return kv(l);a=l}return!1},ZU=(e,n,s)=>!n&&s.nodeName.toLowerCase()===Pl(e)&&e.dom.isEmpty(s)&&jU(e.getBody(),s,a=>Lo(e.schema.getTextBlockElements(),a.nodeName.toLowerCase())),GU=(e,n,s)=>{var a,l,f;const v=n(Pl(e)),k=tg(e,s);k&&(e.dom.insertAfter(v,k),P4(e,v),((f=(l=(a=s.parentElement)===null||a===void 0?void 0:a.childNodes)===null||l===void 0?void 0:l.length)!==null&&f!==void 0?f:0)>1&&e.dom.remove(s))},qU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,KU=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},QH=(e,n)=>{const s=e==null?void 0:e.parentNode;return Qe(s)&&s.nodeName===n},ez=e=>Qe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),L4=e=>Qe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),YU=e=>ez(e)&&ez(e.parentNode),HP=e=>{const n=e.parentNode;return L4(n)?n:e},$4=(e,n,s)=>{let a=e[s?"firstChild":"lastChild"];for(;a&&!so(a);)a=a[s?"nextSibling":"previousSibling"];return a===n},zP=e=>it(bi(Cu(je.fromDom(e)),(n,s)=>`${s}: ${n};`),(n,s)=>n+s,""),XU=(e,n,s,a,l)=>{const f=e.dom,v=e.selection.getRng(),k=s.parentNode;if(s===e.getBody()||!k)return;YU(s)&&(l="LI");const O=L4(a)?zP(a):void 0;let F=L4(a)&&O?n(l,{style:zP(a)}):n(l);if($4(s,a,!0)&&$4(s,a,!1))if(QH(s,"LI")){const Z=HP(s);f.insertAfter(F,Z),KU(s)?f.remove(Z):f.remove(s)}else f.replace(F,s);else if($4(s,a,!0))QH(s,"LI")?(f.insertAfter(F,HP(s)),F.appendChild(f.doc.createTextNode(" ")),F.appendChild(s)):k.insertBefore(F,s),f.remove(a);else if($4(s,a,!1))f.insertAfter(F,HP(s)),f.remove(a);else{s=HP(s);const Z=v.cloneRange();Z.setStartAfter(a),Z.setEndAfter(s);const K=Z.extractContents();if(l==="LI"&&qU(K,"LI")){const J=dt(Ne(F.children,je.fromDom),Oe(Ol("br")));F=K.firstChild,f.insertAfter(K,s),oe(J,de=>yi(je.fromDom(F),de)),O&&F.setAttribute("style",O)}else f.insertAfter(K,s),f.insertAfter(F,s);f.remove(a)}P4(e,F)},vq=e=>{oe(H0(je.fromDom(e),Da),n=>{const s=n.dom;s.nodeValue=Nl(s.data)})},yq=(e,n)=>{const s=e.dom.getParent(n,"ol,ul,dl");return s!==null&&e.dom.getContentEditableParent(s)==="false"},xq=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),_$=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,JU=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,tz=(e,n)=>Qe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",QU=(e,n,s)=>{var a;const l=[];if(!s)return;let f=s;for(;f=f.firstChild;){if(e.isBlock(f))return;so(f)&&!n[f.nodeName.toLowerCase()]&&l.push(f)}let v=l.length;for(;v--;)f=l[v],(!f.hasChildNodes()||f.firstChild===f.lastChild&&((a=f.firstChild)===null||a===void 0?void 0:a.nodeValue)===""||xq(e,f))&&e.remove(f)},Kb=(e,n,s)=>_n(n)?e?s===1&&n.data.charAt(s-1)===Sl?0:s:s===n.data.length-1&&n.data.charAt(s)===Sl?n.data.length:s:s,eW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Kb(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Kb(!1,e.endContainer,e.endOffset)),n},nz=e=>{let n=e;do _n(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},tW=(e,n,s,a,l)=>{var f,v;const k=e.dom,O=(f=oB(k,a))!==null&&f!==void 0?f:k.getRoot();let F=k.getParent(a,k.isBlock);if(!F||!tz(k,F)){if(F=F||O,!F.hasChildNodes()){const de=k.create(n);return sB(e,de),F.appendChild(de),s.setStart(de,0),s.setEnd(de,0),de}let Z=a;for(;Z&&Z.parentNode!==F;)Z=Z.parentNode;let K;for(;Z&&!k.isBlock(Z);)K=Z,Z=Z.previousSibling;const J=(v=K==null?void 0:K.parentElement)===null||v===void 0?void 0:v.nodeName;if(K&&J&&e.schema.isValidChild(J,n.toLowerCase())){const de=K.parentNode,Te=k.create(n);for(sB(e,Te),de.insertBefore(Te,K),Z=K;Z&&!k.isBlock(Z);){const be=Z.nextSibling;Te.appendChild(Z),Z=be}s.setStart(a,l),s.setEnd(a,l)}}return a},nW=(e,n)=>{n.normalize();const s=n.lastChild;(!s||so(s)&&/^(left|right)$/gi.test(e.getStyle(s,"float",!0)))&&e.add(n,"br")},oW=(e,n)=>{const s=a2(e);return qn(n)?!1:ue(s)?ce(bn.explode(s),n.nodeName.toLowerCase()):s},oz={insert:(e,n)=>{let s,a,l,f,v=!1;const k=e.dom,O=e.schema,F=O.getNonEmptyElements(),Z=e.selection.getRng(),K=Pl(e),J=je.fromDom(Z.startContainer),de=om(J,Z.startOffset),Te=de.exists(En=>Ks(En)&&!Gl(En)),be=Z.collapsed&&Te,Me=(En,Io)=>WU(e,s,Un,yn,ew(e),En,Io),Xe=En=>{const Io=Kb(En,s,a);if(_n(s)&&(En?Io>0:Io<s.data.length))return!1;if((s.parentNode===Un||s===Un)&&v&&!En||En&&so(s)&&s===Un.firstChild)return!0;if(_$(s,"TABLE")||_$(s,"HR"))return JU(s,"BR")?!En:v&&!En||!v&&En;const gs=new ru(s,Un);_n(s)&&(En&&Io===0?gs.prev():!En&&Io===s.data.length&&gs.next());let Gs;for(;Gs=gs.current();){if(so(Gs)){if(!Gs.getAttribute("data-mce-bogus")){const Tr=Gs.nodeName.toLowerCase();if(F[Tr]&&Tr!=="br")return!1}}else if(_n(Gs)&&!Ju(Gs.data))return!1;En?gs.prev():gs.next()}return!0},gt=()=>{let En;return/^(H[1-6]|PRE|FIGURE)$/.test(l)&&So!=="HGROUP"?En=Me(K):En=Me(),oW(e,f)&&tz(k,f)&&k.isEmpty(Un,void 0,{includeZwsp:!0})?En=k.split(f,Un):k.insertAfter(En,Un),P4(e,En),En};sE(k,Z).each(En=>{Z.setStart(En.startContainer,En.startOffset),Z.setEnd(En.endContainer,En.endOffset)}),s=Z.startContainer,a=Z.startOffset;const bt=!!(n&&n.shiftKey),Ot=!!(n&&n.ctrlKey);so(s)&&s.hasChildNodes()&&!be&&(v=a>s.childNodes.length-1,s=s.childNodes[Math.min(a,s.childNodes.length-1)]||s,v&&_n(s)?a=s.data.length:a=0);const yn=oB(k,s);if(!yn||yq(e,s))return;bt||(s=tW(e,K,Z,s,a));let Un=k.getParent(s,k.isBlock)||k.getRoot();f=Qe(Un==null?void 0:Un.parentNode)?k.getParent(Un.parentNode,k.isBlock):null,l=Un?Un.nodeName.toUpperCase():"";const So=f?f.nodeName.toUpperCase():"";if(So==="LI"&&!Ot){const En=f;Un=En,f=En.parentNode,l=So}if(so(f)&&ZU(e,bt,Un))return GU(e,Me,Un);if(/^(LI|DT|DD)$/.test(l)&&so(f)&&k.isEmpty(Un)){XU(e,Me,f,Un,K);return}if(!be&&(Un===e.getBody()||!tz(k,Un)))return;const sn=Un.parentNode;let Ut;if(be)Ut=Me(K),de.fold(()=>{va(J,je.fromDom(Ut))},En=>{Ji(En,je.fromDom(Ut))}),e.selection.setCursorLocation(Ut,0);else if(uh(Un))Ut=ub(Un),k.isEmpty(Un)&&$P(Un),sB(e,Ut),P4(e,Ut);else if(Xe(!1))Ut=gt();else if(Xe(!0)&&sn){const En=Xt.fromRangeStart(Z),Io=Vw(En),gs=je.fromDom(Un),Tr=Ky(gs,En,e.schema)?EO(gs,En,e.schema).bind(ci=>Y.from(ci.getNode())):Y.none();Ut=sn.insertBefore(Me(),Un);const za=_$(Un,"HR")||Io?Ut:Tr.getOr(Un);P4(e,za)}else{const En=eW(Z).cloneRange();En.setEndAfter(Un);const Io=En.extractContents();vq(Io),nz(Io),Ut=Io.firstChild,k.insertAfter(Io,Un),QU(k,F,Ut),nW(k,Un),k.isEmpty(Un)&&$P(Un),Ut.normalize(),k.isEmpty(Ut)?(k.remove(Ut),gt()):(sB(e,Ut),P4(e,Ut))}k.setAttrib(Ut,"id",""),e.dispatch("NewBlock",{newBlock:Ut})},fakeEventName:"insertParagraph"},sW=(e,n,s)=>{const a=new ru(n,s);let l;const f=e.getNonEmptyElements();for(;l=a.next();)if(f[l.nodeName.toLowerCase()]||_n(l)&&l.length>0)return!0;return!1},VP=(e,n,s)=>{const a=e.dom.createRng();s?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),e.selection.setRng(a),Fw(e,a)},sz=(e,n)=>{const s=e.selection,a=e.dom,l=s.getRng();let f,v=!1;sE(a,l).each(de=>{l.setStart(de.startContainer,de.startOffset),l.setEnd(de.endContainer,de.endOffset)});let k=l.startOffset,O=l.startContainer;if(so(O)&&O.hasChildNodes()){const de=k>O.childNodes.length-1;O=O.childNodes[Math.min(k,O.childNodes.length-1)]||O,de&&_n(O)?k=O.data.length:k=0}let F=a.getParent(O,a.isBlock);const Z=F&&F.parentNode?a.getParent(F.parentNode,a.isBlock):null,K=Z?Z.nodeName.toUpperCase():"",J=!!(n&&n.ctrlKey);K==="LI"&&!J&&(F=Z),_n(O)&&k>=O.data.length&&(sW(e.schema,O,F||a.getRoot())||(f=a.create("br"),l.insertNode(f),l.setStartAfter(f),l.setEndAfter(f),v=!0)),f=a.create("br"),ay(a,l,f),VP(e,f,v),e.undoManager.add()},UP=(e,n)=>{const s=je.fromTag("br");Ji(je.fromDom(n),s),e.undoManager.add()},rW=(e,n)=>{iW(e.getBody(),n)||Xu(je.fromDom(n),je.fromTag("br"));const s=je.fromTag("br");Xu(je.fromDom(n),s),VP(e,s.dom,!1),e.undoManager.add()},aW=e=>aa(e.getNode()),iW=(e,n)=>aW(Xt.after(n))?!0:Vi(e,Xt.after(n)).map(s=>aa(s.getNode())).getOr(!1),rz=e=>e&&e.nodeName==="A"&&"href"in e,cW=e=>e.fold($e,rz,rz,$e),az=e=>{const n=Se(j1,e),s=Xt.fromRangeStart(e.selection.getRng());return Zb(n,e.getBody(),s).filter(cW)},lW=(e,n)=>{n.fold(Kt,Se(UP,e),Se(rW,e),Kt)},iz={insert:(e,n)=>{const s=az(e);s.isSome()?s.each(Se(lW,e)):sz(e,n)},fakeEventName:"insertLineBreak"},cz=(e,n)=>E$(e).filter(s=>n.length>0&&ga(je.fromDom(s),n)).isSome(),A$=e=>cz(e,Ad(e)),mW=e=>cz(e,uT(e)),zh=mg.generate([{br:[]},{block:[]},{none:[]}]),WP=(e,n)=>mW(e),lz=e=>(n,s)=>VU(n)===e,jP=(e,n)=>(s,a)=>JH(s)===e.toUpperCase()===n,O$=e=>{const n=oB(e.dom,e.selection.getStart());return qn(n)},H4=e=>jP("pre",e),gW=()=>jP("summary",!0),D$=e=>(n,s)=>Zd(n)===e,Tk=(e,n)=>A$(e),ZP=(e,n)=>n,fW=e=>{const n=Pl(e),s=oB(e.dom,e.selection.getStart());return Qe(s)&&e.schema.isValidChild(s.nodeName,n)},pW=e=>{const n=e.selection.getRng(),s=je.fromDom(n.startContainer),l=om(s,n.startOffset).map(f=>Ks(f)&&!Gl(f));return n.collapsed&&l.getOr(!0)},Qf=(e,n)=>(s,a)=>it(e,(f,v)=>f&&v(s,a),!0)?Y.some(n):Y.none(),uz=(e,n)=>Z5([Qf([WP],zh.none()),Qf([H4(!0),O$],zh.none()),Qf([gW()],zh.br()),Qf([H4(!0),D$(!1),ZP],zh.br()),Qf([H4(!0),D$(!1)],zh.block()),Qf([H4(!0),D$(!0),ZP],zh.block()),Qf([H4(!0),D$(!0)],zh.br()),Qf([lz(!0),ZP],zh.br()),Qf([lz(!0)],zh.block()),Qf([Tk],zh.br()),Qf([ZP],zh.br()),Qf([fW],zh.block()),Qf([pW],zh.block())],[e,!!(n&&n.shiftKey)]).getOr(zh.none()),rB=(e,n,s)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||l8(n),!(Qe(s)&&LP(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,s),Qe(s)&&nB(n,e.fakeEventName)))},dz=(e,n)=>{if(e.mode.isReadOnly())return;const s=()=>rB(iz,e,n),a=()=>rB(oz,e,n),l=uz(e,n);switch(hb(e)){case"linebreak":l.fold(s,s,Kt);break;case"block":l.fold(a,a,Kt);break;case"invert":l.fold(a,s,Kt);break;default:l.fold(s,a,Kt);break}},R$=le(),hW=R$.os.isiOS()&&R$.browser.isSafari(),mz=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),RF(e.undoManager),e.undoManager.transact(()=>{dz(e,n)}))},bW=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(_n(n)){const s=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,a=n.data.charAt(e.startOffset-1);return s.test(a)}else return!1},M$=e=>{let n=Y.none();const s=l=>{n=Y.some(l.selection.getBookmark()),l.undoManager.add()},a=(l,f)=>{l.undoManager.undo(),n.fold(Kt,v=>l.selection.moveToBookmark(v)),mz(l,f),n=Y.none()};e.on("keydown",l=>{l.keyCode===eo.ENTER&&(hW&&bW(e.selection.getRng())?s(e):mz(e,l))}),e.on("keyup",l=>{l.keyCode===eo.ENTER&&n.each(()=>a(e,l))})},N$=(e,n,s)=>{const a=ms.os.isMacOS()||ms.os.isiOS();O4([{keyCode:eo.END,action:js(vk,e,!0)},{keyCode:eo.HOME,action:js(vk,e,!1)},...a?[]:[{keyCode:eo.HOME,action:js(yk,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:eo.END,action:js(yk,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:eo.END,action:js(wk,e,!0)},{keyCode:eo.HOME,action:js(wk,e,!1)},{keyCode:eo.END,action:js(SC,e,!0,n)},{keyCode:eo.HOME,action:js(SC,e,!1,n)}],s).each(l=>{s.preventDefault()})},vW=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||N$(e,n,s)})},B$=e=>{e.on("input",n=>{n.isComposing||MO(e)})},gz=le(),GP=(e,n,s)=>{O4([{keyCode:eo.PAGE_UP,action:js(SC,e,!1,n)},{keyCode:eo.PAGE_DOWN,action:js(SC,e,!0,n)}],s)},I$=e=>e.stopImmediatePropagation(),F$=e=>e.keyCode===eo.PAGE_UP||e.keyCode===eo.PAGE_DOWN,fz=(e,n,s)=>{s&&!e.get()?n.on("NodeChange",I$,!0):!s&&e.get()&&n.off("NodeChange",I$),e.set(s)},yW=(e,n)=>{if(gz.os.isMacOS())return;const s=fa(!1);e.on("keydown",a=>{F$(a)&&fz(s,e,!0)}),e.on("keyup",a=>{a.isDefaultPrevented()||GP(e,n,a),F$(a)&&s.get()&&(fz(s,e,!1),e.nodeChanged())})},qP=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||De(n.getTargetRanges(),s=>!$B(e.dom,s)))&&n.preventDefault()})},P$=(e,n)=>{const s=n.container(),a=n.offset();return _n(s)?(s.insertData(a,e),Y.some(Xt(s,a+e.length))):Ry(n).map(l=>{const f=je.fromText(e);return n.isAtEnd()?Xu(l,f):Ji(l,f),Xt(f.dom,e.length)})},pz=Se(P$,wc),hz=Se(P$," "),bz=(e,n,s)=>_O(e,n,s)?pz(n):hz(n),xW=e=>n=>n.fold(s=>Ou(e.dom,Xt.before(s)),s=>kl(s),s=>Ma(s),s=>Vi(e.dom,Xt.after(s))),wW=(e,n,s)=>a=>_O(e,a,s)?pz(n):hz(n),vz=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},CW=(e,n)=>e.isEditable(e.getParent(n,"summary")),SW=e=>{const n=Xt.fromRangeStart(e.selection.getRng()),s=je.fromDom(e.getBody());if(e.selection.isCollapsed()){const a=Se(j1,e),l=Xt.fromRangeStart(e.selection.getRng());return Zb(a,e.getBody(),l).bind(xW(s)).map(f=>()=>wW(s,n,e.schema)(f).each(vz(e)))}else return Y.none()},yz=e=>{const n=()=>{const s=je.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const a=Xt.fromRangeStart(e.selection.getRng());bz(s,a,e.schema).each(vz(e))};return ou(ms.browser.isFirefox()&&e.selection.isEditable()&&CW(e.dom,e.selection.getRng().startContainer),n)},kW=(e,n)=>{jN([{keyCode:eo.SPACEBAR,action:js(SW,e)},{keyCode:eo.SPACEBAR,action:js(yz,e)}],n).each(s=>{n.preventDefault(),LP(e,"insertText",{data:" "}).isDefaultPrevented()||(s(),nB(e,"insertText",{data:" "}))})},xz=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||kW(e,n)})},TW=e=>kB(e)?[{keyCode:eo.TAB,action:js(rH,e,!0)},{keyCode:eo.TAB,shiftKey:!0,action:js(rH,e,!1)}]:[],EW=(e,n)=>{O4([...TW(e)],n).each(s=>{n.preventDefault()})},_W=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||EW(e,n)})},AW=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pq(e),$p(e))return fa(null);{const n=gP(e);return qP(e),pk(e),TP(e,n),bq(e,n),M$(e),xz(e),B$(e),_W(e),vW(e,n),yW(e,n),n}};class OW{constructor(n){this.lastPath=[],this.editor=n;let s;const a=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",l=>{const f=n.selection.getRng(),v={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};(l.type==="nodechange"||!Wy(v,s))&&n.dispatch("SelectionChange"),s=v}),n.on("contextmenu",()=>{Rw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const l=n.selection.getStart(!0);l&&yw(n)&&!a.isSameElementPath(l)&&n.dom.isChildOf(l,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",l=>{!l.isDefaultPrevented()&&yw(n)&&(n.selection.getNode().nodeName==="IMG"?Wo.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const s=this.editor,a=s.selection;let l;if(s.initialized&&a&&!vy(s)&&!N1(s)){const f=s.getBody();l=a.getStart(!0)||f,(l.ownerDocument!==s.getDoc()||!s.dom.isChildOf(l,f))&&(l=f);const v=[];s.dom.getParent(l,k=>k===f?!0:(v.push(k),!1)),s.dispatch("NodeChange",{...n,element:l,parents:v})}}isSameElementPath(n){let s;const a=this.editor,l=nn(a.dom.getParents(n,pt,a.getBody()));if(l.length===this.lastPath.length){for(s=l.length;s>=0&&l[s]===this.lastPath[s];s--);if(s===-1)return this.lastPath=l,!0}return this.lastPath=l,!1}}const W_=ab("image"),DW=e=>{const n=e;return Y.from(n[W_])},RW=(e,n)=>{const s=e;s[W_]=n},KP=ab("event"),MW=e=>{const n=e;return Y.from(n[KP])},YP=e=>n=>{const s=n;s[KP]=e},NW=(e,n)=>YP(n)(e),L$=YP(0),BW=YP(2),IW=YP(1),XP=(e=>n=>{const s=n;return Y.from(s[KP]).exists(a=>a===e)})(0),FW=()=>Object.freeze({length:0,item:e=>null}),$$=ab("mode"),PW=e=>{const n=e;return Y.from(n[$$])},JP=e=>n=>{const s=n;s[$$]=e},wz=(e,n)=>JP(n)(e),Cz=JP(0),H$=JP(2),LW=JP(1),Sz=e=>n=>{const s=n;return Y.from(s[$$]).exists(a=>a===e)},z4=Sz(0),kz=Sz(1),$W=(e,n)=>({...n,get length(){return n.length},add:(s,a)=>{if(z4(e))if(ue(s)){if(!oo(a))return n.add(s,a)}else return n.add(s);return null},remove:s=>{z4(e)&&n.remove(s)},clear:()=>{z4(e)&&n.clear()}}),HW=["none","copy","link","move"],sc=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],z$=()=>{const e=new window.DataTransfer;let n="move",s="all";const a={get dropEffect(){return n},set dropEffect(l){ce(HW,l)&&(n=l)},get effectAllowed(){return s},set effectAllowed(l){XP(a)&&ce(sc,l)&&(s=l)},get items(){return $W(a,e.items)},get files(){return kz(a)?FW():e.files},get types(){return e.types},setDragImage:(l,f,v)=>{z4(a)&&(RW(a,{image:l,x:f,y:v}),e.setDragImage(l,f,v))},getData:l=>kz(a)?"":e.getData(l),setData:(l,f)=>{z4(a)&&e.setData(l,f)},clearData:l=>{z4(a)&&e.clearData(l)}};return Cz(a),a},Tz=e=>{const n=z$(),s=PW(e);return H$(e),L$(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,DW(e).each(a=>n.setDragImage(a.image,a.x,a.y)),oe(e.types,a=>{a!=="Files"&&n.setData(a,e.getData(a))}),oe(e.files,a=>n.items.add(a)),MW(e).each(a=>{NW(n,a)}),s.each(a=>{wz(e,a),wz(n,a)}),n},zW=e=>{const n=e.getData("text/html");return n===""?Y.none():Y.some(n)},QP=(e,n)=>e.setData("text/html",n),V$="x-tinymce/html",e6=Le(V$),U$="<!-- "+V$+" -->",VW=e=>U$+e,Ez=e=>e.replace(U$,""),aB=e=>e.indexOf(U$)!==-1,UW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),WW=(e,n)=>{let s="<"+e;const a=bi(n,(l,f)=>f+'="'+ah.encodeAllRaw(l)+'"');return a.length&&(s+=" "+a.join(" ")),s+">"},W$=(e,n,s)=>{const a=e.split(/\n\n/),l=WW(n,s),f="</"+n+">",v=Ne(a,O=>O.split(/\n/).join("<br />")),k=O=>l+O+f;return v.length===1?v[0]:Ne(v,k).join("")},_z="%MCEPASTEBIN%",jW=(e,n)=>{const{dom:s,selection:a}=e,l=e.getBody();n.set(a.getRng());const f=s.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},_z);ms.browser.isFirefox()&&s.setStyle(f,"left",s.getStyle(l,"direction",!0)==="rtl"?65535:-65535),s.bind(f,"beforedeactivate focusin focusout",v=>{v.stopPropagation()}),f.focus(),a.select(f,!0)},ZW=(e,n)=>{const s=e.dom;if(j$(e)){let a;const l=n.get();for(;a=j$(e);)s.remove(a),s.unbind(a);l&&e.selection.setRng(l)}n.set(null)},j$=e=>e.dom.get("mcepastebin"),Az=e=>Qe(e)&&e.id==="mcepastebin",GW=e=>{const n=e.dom,s=(v,k)=>{v.appendChild(k),n.remove(k,!0)},[a,...l]=dt(e.getBody().childNodes,Az);oe(l,v=>{s(a,v)});const f=n.select("div[id=mcepastebin]",a);for(let v=f.length-1;v>=0;v--){const k=n.create("div");a.insertBefore(k,f[v]),s(k,f[v])}return a?a.innerHTML:""},Oz=e=>e===_z,V4=e=>{const n=fa(null);return{create:()=>jW(e,n),remove:()=>ZW(e,n),getEl:()=>j$(e),getHtml:()=>GW(e),getLastRng:n.get}},Dz=(e,n)=>(bn.each(n,s=>{at(s,RegExp)?e=e.replace(s,""):e=e.replace(s[0],s[1])}),e),U4=e=>{const n=ya(),s=zS({},n);let a="";const l=n.getVoidElements(),f=bn.makeMap("script noscript style textarea video audio iframe object"," "),v=n.getBlockElements(),k=O=>{const F=O.name,Z=O;if(F==="br"){a+=`
`;return}if(F!=="wbr"){if(l[F]&&(a+=" "),f[F]){a+=" ";return}if(O.type===3&&(a+=O.value),!(O.name in n.getVoidElements())){let K=O.firstChild;if(K)do k(K);while(K=K.next)}v[F]&&Z.next&&(a+=`
`,F==="p"&&(a+=`
`))}};return e=Dz(e,[/<!\[[^\]]+\]>/g]),k(s.parse(e)),a},W4=e=>(e=Dz(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(s,a,l)=>!a&&!l?" ":wc],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),qW=e=>{let n=0;return()=>e+n++},KW=e=>{const n=e.toLowerCase(),s={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return bn.hasOwn(s,n)?"image/"+s[n]:"image/"+n},j4=(e,n)=>{const s=zS({sanitize:Yv(e),sandbox_iframes:kT(e),sandbox_iframes_exclusions:S2(e),convert_unsafe_embeds:TT(e)},e.schema);s.addNodeFilter("meta",l=>{bn.each(l,f=>{f.remove()})});const a=s.parse(n,{forced_root_block:!1,isRootContent:!0});return Gy({validate:!0},e.schema).serialize(a)},Rz=(e,n)=>({content:e,cancelled:n}),Z$=(e,n,s)=>{const a=e.dom.create("div",{style:"display:none"},n),l=Fl(e,a,s);return Rz(l.node.innerHTML,l.isDefaultPrevented())},YW=(e,n,s)=>{const a=pc(e,n,s),l=j4(e,a.content);return e.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?Z$(e,l,s):Rz(l,a.isDefaultPrevented())},Mz=(e,n,s)=>YW(e,n,s),t6=(e,n)=>(e.insertContent(n,{merge:iw(e),paste:!0}),!0),iB=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Nz=(e,n)=>iB(n)&&De(CD(e),s=>hr(n.toLowerCase(),`.${s.toLowerCase()}`)),XW=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),JW=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),Bz=(e,n,s)=>!e.selection.isCollapsed()&&iB(n)?JW(e,n,s):!1,QW=(e,n,s)=>Nz(e,n)?XW(e,n,s):!1,Iz=(e,n)=>{bn.each([Bz,QW,t6],s=>!s(e,n,t6))},G$=(e,n,s)=>{s||!vT(e)?t6(e,n):Iz(e,n)},Fz=qW("mceclip"),ej=e=>{const n=z$();return QP(n,e),H$(n),n},Pz=(e,n,s,a,l)=>{const f=Mz(e,n,s);if(!f.cancelled){const v=f.content,k=()=>G$(e,v,a);l?LP(e,"insertFromPaste",{dataTransfer:ej(v)}).isDefaultPrevented()||(k(),nB(e,"insertFromPaste")):k()}},n6=(e,n,s,a)=>{const l=s||aB(n);Pz(e,Ez(n),l,!1,a)},o6=(e,n,s)=>{const a=e.dom.encode(n).replace(/\r\n/g,`
`),l=Ud(a,wD(e)),f=W$(l,Pl(e),bh(e));Pz(e,f,!1,!0,s)},s6=e=>{const n={};if(e&&e.types)for(let s=0;s<e.types.length;s++){const a=e.types[s];try{n[a]=e.getData(a)}catch{n[a]=""}}return n},Ek=(e,n)=>n in e&&e[n].length>0,q$=e=>Ek(e,"text/html")||Ek(e,"text/plain"),Lz=(e,n)=>{const s=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Qe(s)?e.dom.encode(s[1]):void 0},tj=(e,n,s,a)=>{const l=Fz(),f=c2(e)&&Qe(s.name),v=f?Lz(e,s.name):l,k=f?s.name:void 0,O=n.create(l,s,a,v,k);return n.add(O),O},$z=(e,n)=>{C3(n.uri).each(({data:s,type:a,base64Encoded:l})=>{const f=l?s:btoa(s),v=n.file,k=e.editorUpload.blobCache,O=k.getByData(f,a),F=O??tj(e,k,v,f);n6(e,`<img src="${F.blobUri()}">`,!1,!0)})},nj=e=>e.type==="paste",oj=e=>Promise.all(Ne(e,n=>cx(n).then(s=>({file:n,uri:s})))),sj=e=>{const n=CD(e);return s=>cs(s.type,"image/")&&De(n,a=>KW(a)===s.type)},rj=(e,n)=>{const s=n.items?ot(gr(n.items),l=>l.kind==="file"?[l.getAsFile()]:[]):[],a=n.files?gr(n.files):[];return dt(s.length>0?s:a,sj(e))},Hz=(e,n,s)=>{const a=nj(n)?n.clipboardData:n.dataTransfer;if(Kv(e)&&a){const l=rj(e,a);if(l.length>0)return n.preventDefault(),oj(l).then(f=>{s&&e.selection.setRng(s),oe(f,v=>{$z(e,v)})}),!0}return!1},r6=e=>{var n,s;return ms.os.isAndroid()&&((s=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||s===void 0?void 0:s.length)===0},aj=e=>eo.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,a6=(e,n,s,a,l)=>{let f=W4(s);const v=Ek(n,e6())||aB(s),k=!v&&UW(f),O=iB(f);(Oz(f)||!f.length||k&&!O)&&(a=!0),(a||O)&&(Ek(n,"text/plain")&&k?f=n["text/plain"]:f=U4(f)),!Oz(f)&&(a?o6(e,f,l):n6(e,f,v,l))},ij=(e,n,s)=>{let a;const l=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",f=>{aj(f)&&!f.isDefaultPrevented()&&(a=f.shiftKey&&f.keyCode===86)}),e.on("paste",f=>{if(f.isDefaultPrevented()||r6(f))return;const v=s.get()==="text"||a;a=!1;const k=s6(f.clipboardData);!q$(k)&&Hz(e,f,l())||(Ek(k,"text/html")?(f.preventDefault(),a6(e,k,k["text/html"],v,!0)):Ek(k,"text/plain")&&Ek(k,"text/uri-list")?(f.preventDefault(),a6(e,k,k["text/plain"],v,!0)):(n.create(),Wo.setEditorTimeout(e,()=>{const O=n.getHtml();n.remove(),a6(e,k,O,v,!1)},0)))})},cj=e=>{const n=l=>cs(l,"webkit-fake-url"),s=l=>cs(l,"data:"),a=l=>{var f;return((f=l.data)===null||f===void 0?void 0:f.paste)===!0};e.parser.addNodeFilter("img",(l,f,v)=>{if(!Kv(e)&&a(v))for(const k of l){const O=k.attr("src");ue(O)&&!k.attr("data-mce-object")&&O!==ms.transparentSrc&&(n(O)||!wy(e)&&s(O))&&k.remove()}})},zz=(e,n,s)=>{ij(e,n,s),cj(e)},Vz=(e,n)=>{n.get()==="text"?(n.set("html"),Fa(e,!1)):(n.set("text"),Fa(e,!0)),e.focus()},lj=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Vz(e,n)}),e.addCommand("mceInsertClipboardContent",(s,a)=>{a.html&&n6(e,a.html,a.internal,!1),a.text&&o6(e,a.text,!1)})},uj=(e,n,s)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",s),e.setData(e6(),n),!0}catch{return!1}else return!1},Uz=(e,n,s,a)=>{uj(e.clipboardData,n.html,n.text)?(e.preventDefault(),a()):s(n.html,a)},Wz=e=>(n,s)=>{const{dom:a,selection:l}=e,f=a.create("div",{contenteditable:"false","data-mce-bogus":"all"}),v=a.create("div",{contenteditable:"true"},n);a.setStyles(f,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),f.appendChild(v),a.add(e.getBody(),f);const k=l.getRng();v.focus();const O=a.createRng();O.selectNodeContents(v),l.setRng(O),Wo.setEditorTimeout(e,()=>{l.setRng(k),a.remove(f),s()},0)},jz=e=>({html:VW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Zz=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Gz=e=>!e.selection.isCollapsed()||Zz(e),dj=e=>n=>{!n.isDefaultPrevented()&&Gz(e)&&e.selection.isEditable()&&Uz(n,jz(e),Wz(e),()=>{if(ms.browser.isChromium()||ms.browser.isFirefox()){const s=e.selection.getRng();Wo.setEditorTimeout(e,()=>{e.selection.setRng(s),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},mj=e=>n=>{!n.isDefaultPrevented()&&Gz(e)&&Uz(n,jz(e),Wz(e),Kt)},gj=e=>{e.on("cut",dj(e)),e.on("copy",mj(e))},qz=(e,n)=>{var s,a;return Kd.getCaretRangeFromPoint((s=n.clientX)!==null&&s!==void 0?s:0,(a=n.clientY)!==null&&a!==void 0?a:0,e.getDoc())},fj=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},Kz=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},pj=e=>De(e.files,n=>/^image\//.test(n.type)),Yz=(e,n,s,a)=>{const l=e.getParent(s,v=>yf(n,v));if(!re(e.getParent(s,"summary")))return!0;if(l&&Lo(a,"text/html")){const v=new DOMParser().parseFromString(a["text/html"],"text/html").body;return!re(v.querySelector(l.nodeName.toLowerCase()))}else return!1},Xz=e=>{e.on("input",n=>{const s=a=>re(a.querySelector("summary"));if(n.inputType==="deleteByDrag"){const a=dt(e.dom.select("details"),s);oe(a,l=>{aa(l.firstChild)&&l.firstChild.remove();const f=e.dom.create("summary");f.appendChild(Pg().dom),l.prepend(f)})}})},hj=(e,n)=>{pT(e)&&e.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Kv(e)||e.on("drop",s=>{const a=s.dataTransfer;a&&pj(a)&&s.preventDefault()}),e.on("drop",s=>{if(s.isDefaultPrevented())return;const a=qz(e,s);if(qn(a))return;const l=s6(s.dataTransfer),f=Ek(l,e6());if((!q$(l)||fj(l))&&Hz(e,s,a))return;const v=l[e6()],k=v||l["text/html"]||l["text/plain"],O=Yz(e.dom,e.schema,a.startContainer,l),F=n.get();F&&!O||k&&(s.preventDefault(),Wo.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(v||F&&O)&&e.execCommand("Delete"),Kz(e,a);const Z=W4(k);l["text/html"]?n6(e,Z,f,!0):o6(e,Z,!0)})}))}),e.on("dragstart",s=>{n.set(!0)}),e.on("dragover dragend",s=>{Kv(e)&&!n.get()&&(s.preventDefault(),Kz(e,qz(e,s))),s.type==="dragend"&&n.set(!1)}),Xz(e)},bj=e=>{const n=l=>f=>{l(e,f)},s=hT(e);Be(s)&&e.on("PastePreProcess",n(s));const a=MA(e);Be(a)&&e.on("PastePostProcess",n(a))},vj=(e,n)=>{e.on("PastePreProcess",s=>{s.content=n(e,s.content,s.internal)})},yj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Jz=e=>bn.trim(e).replace(yj,mp).toLowerCase(),xj=(e,n,s)=>{const a=bT(e);if(s||a==="all"||!xD(e))return n;const l=a?a.split(/[, ]/):[];if(l&&a!=="none"){const f=e.dom,v=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(k,O,F,Z)=>{const K=f.parseStyle(f.decode(F)),J={};for(let Te=0;Te<l.length;Te++){const be=K[l[Te]];let Me=be,Xe=f.getStyle(v,l[Te],!0);/color/.test(l[Te])&&(Me=Jz(Me),Xe=Jz(Xe)),Xe!==Me&&(J[l[Te]]=be)}const de=f.serializeStyle(J,"span");return de?O+' style="'+de+'"'+Z:O+Z})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(f,v,k,O)=>v+' style="'+k+'"'+O),n},wj=e=>{(ms.browser.isChromium()||ms.browser.isSafari())&&vj(e,xj)},i6=e=>{const n=fa(!1),s=fa(x2(e)?"text":"html"),a=V4(e);wj(e),lj(e,s),bj(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>s.get()==="text"),e.on("PreInit",()=>{gj(e),hj(e,n),zz(e,a,s)})},Qz=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},Cj=e=>{e.parser.addNodeFilter("details",n=>{const s=M1(e);oe(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const s=C2(e);oe(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})})},e9=e=>{Qz(e),Cj(e)},t9=aa,c6=_n,Sj=e=>ia(e.dom),n9=e=>dn(e.dom),o9=e=>n=>Lr(je.fromDom(e),n),s9=(e,n,s)=>oa(je.fromDom(e),a=>n9(a)||s.isBlock(_e(a)),o9(n)).getOr(je.fromDom(n)).dom,r9=(e,n)=>oa(je.fromDom(e),Sj,o9(n)),K$=(e,n,s)=>{const a=new ru(e,n),l=s?a.next.bind(a):a.prev.bind(a);let f=e;for(let v=s?e:l();v&&!t9(v);v=l())Hg(v)&&(f=v);return f},kj=(e,n,s)=>{const l=Xt.fromRangeStart(e).getNode(),f=s9(l,n,s),v=K$(l,f,!1),k=K$(l,f,!0),O=document.createRange();return r9(v,f).fold(()=>{c6(v)?O.setStart(v,0):O.setStartBefore(v)},F=>O.setStartBefore(F.dom)),r9(k,f).fold(()=>{c6(k)?O.setEnd(k,k.data.length):O.setEndAfter(k)},F=>O.setEndAfter(F.dom)),O},Tj=e=>{const n=kj(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(AE(n))},Ej=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Tj(e))})};var wx;(function(e){e.Before="before",e.After="after"})(wx||(wx={}));const _j=(e,n)=>Math.abs(e.left-n),Aj=(e,n)=>Math.abs(e.right-n),a9=(e,n)=>e>=n.top&&e<=n.bottom,Oj=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Dj=(e,n)=>{const s=Oc(e,n)/Math.min(e.height,n.height);return Oj(e,n)&&s>.5},Rj=(e,n)=>{const s=dt(e,a=>a9(n,a));return dA(s).fold(()=>[[],e],a=>{const{pass:l,fail:f}=At(e,v=>Dj(v,a));return[l,f]})},Mj=(e,n)=>({node:e.node,position:_j(e,n)<Aj(e,n)?wx.Before:wx.After}),Nj=(e,n,s)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Z4=(e,n,s,a)=>{const l=K=>Hg(K.node)?Y.some(K):so(K.node)?Z4(gr(K.node.childNodes),n,s,!1):Y.none(),f=(K,J,de)=>l(J).filter(Te=>Math.abs(de(K,n,s)-de(Te,n,s))<2&&_n(Te.node)),v=(K,J)=>{const de=Mn(K,(Te,be)=>J(Te,n,s)-J(be,n,s));return Us(de,l).map(Te=>a&&!_n(Te.node)&&de.length>1?f(Te,de[1],J).getOr(Te):Te)},[k,O]=Rj(hx(e),s),{pass:F,fail:Z}=At(O,K=>K.top<s);return v(k,Nj).orThunk(()=>v(Z,S1)).orThunk(()=>v(F,S1))},i9=(e,n,s,a)=>{const l=(f,v)=>{const k=F=>so(F)&&F.classList.contains("mce-drag-container"),O=dt(f.dom.childNodes,Oe(k));return v.fold(()=>Z4(O,s,a,!0),F=>{const Z=dt(O,K=>K!==F.dom);return Z4(Z,s,a,!0)}).orThunk(()=>(Lr(f,e)?Y.none():Xh(f)).bind(Z=>l(Z,Y.some(f))))};return l(n,Y.none())},c9=(e,n,s)=>{const a=je.fromDom(e),l=zd(a),v=je.fromPoint(l,n,s).filter(k=>Xi(a,k)).getOr(a);return i9(a,v,n,s)},l9=(e,n,s)=>c9(e,n,s).filter(a=>lw(a.node)).map(a=>Mj(a,n)),u9=e=>{var n,s;const a=e.getBoundingClientRect(),l=e.ownerDocument,f=l.documentElement,v=l.defaultView;return{top:a.top+((n=v==null?void 0:v.scrollY)!==null&&n!==void 0?n:0)-f.clientTop,left:a.left+((s=v==null?void 0:v.scrollX)!==null&&s!==void 0?s:0)-f.clientLeft}},Bj=e=>e.inline?u9(e.getBody()):{left:0,top:0},Sq=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Ij=e=>{const n=e.getBody(),s=e.getDoc().documentElement,a={left:n.scrollLeft,top:n.scrollTop},l={left:n.scrollLeft||s.scrollLeft,top:n.scrollTop||s.scrollTop};return e.inline?a:l},d9=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const s=u9(e.getContentAreaContainer()),a=Ij(e);return{left:n.pageX-s.left+a.left,top:n.pageY-s.top+a.top}}return{left:n.pageX,top:n.pageY}},Y$=(e,n,s)=>({pageX:s.left-e.left+n.left,pageY:s.top-e.top+n.top}),l6=(e,n)=>Y$(Bj(e),Sq(e),d9(e,n)),m9=e=>({target:e,srcElement:e}),Fj=(e,n,s,a)=>({...n,dataTransfer:a,type:e,...m9(s)}),g9=(e,n,s)=>{const a=ft("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:a,initEvent:a,preventDefault:Kt,stopImmediatePropagation:Kt,stopPropagation:Kt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:a,initMouseEvent:a,getModifierState:a,dataTransfer:s,...m9(n)}},Pj=(e,n)=>{const s=Tz(e);return n==="dragstart"?(L$(s),Cz(s)):n==="drop"?(BW(s),H$(s)):(IW(s),LW(s)),s},X$=(e,n,s,a)=>{const l=Pj(s,e);return oo(a)?g9(e,n,l):Fj(e,a,n,l)},cB=32,Lj=100,u6=8,lB=16,f9=ia,kq=mA(f9,dn),$j=(e,n,s)=>f9(s)&&s!==n&&e.isEditable(s.parentElement),Hj=(e,n,s)=>qn(n)||n===s||e.dom.isChildOf(n,s)?!1:e.dom.isEditable(n),zj=(e,n,s,a)=>{const l=e.dom,f=n.cloneNode(!0);l.setStyles(f,{width:s,height:a}),l.setAttrib(f,"data-mce-selected",null);const v=l.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return l.setStyles(v,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:a}),l.setStyles(f,{margin:0,boxSizing:"border-box"}),v.appendChild(f),v},p9=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},d6=(e,n)=>s=>()=>{const a=e==="left"?s.scrollX:s.scrollY;s.scroll({[e]:a+n,behavior:"smooth"})},m6=d6("left",-cB),J$=d6("left",cB),Q$=d6("top",-cB),g6=d6("top",cB),e7=(e,n,s,a,l,f,v,k,O,F,Z,K)=>{let J=0,de=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+s>l&&(J=n.pageX+s-l),n.pageY+a>f&&(de=n.pageY+a-f),e.style.width=s-J+"px",e.style.height=a-de+"px";const Te=O.clientHeight,be=O.clientWidth,Me=v+O.getBoundingClientRect().top,Xe=k+O.getBoundingClientRect().left;Z.on(gt=>{gt.intervalId.clear(),gt.dragging&&K&&(v+u6>=Te?gt.intervalId.set(g6(F)):v-u6<=0?gt.intervalId.set(Q$(F)):k+u6>=be?gt.intervalId.set(J$(F)):k-u6<=0?gt.intervalId.set(m6(F)):Me+lB>=window.innerHeight?gt.intervalId.set(g6(window)):Me-lB<=0?gt.intervalId.set(Q$(window)):Xe+lB>=window.innerWidth?gt.intervalId.set(J$(window)):Xe-lB<=0&&gt.intervalId.set(m6(window)))})},f6=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Vj=(e,n)=>{const s=e.getParent(n.parentNode,e.isBlock);f6(n),s&&s!==e.getRoot()&&e.isEmpty(s)&&ch(je.fromDom(s))},OC=e=>e.button===0,h9=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Uj=(e,n)=>s=>{if(OC(s)){const a=hn(n.dom.getParents(s.target),kq).getOr(null);if(Qe(a)&&$j(n.dom,n.getBody(),a)){const l=n.dom.getPos(a),f=n.getBody(),v=n.getDoc().documentElement;e.set({element:a,dataTransfer:z$(),dragging:!1,screenX:s.screenX,screenY:s.screenY,maxX:(n.inline?f.scrollWidth:v.offsetWidth)-2,maxY:(n.inline?f.scrollHeight:v.offsetHeight)-2,relX:s.pageX-l.x,relY:s.pageY-l.y,width:a.offsetWidth,height:a.offsetHeight,ghost:zj(n,a,a.offsetWidth,a.offsetHeight),intervalId:gn(Lj)})}}},Wj=(e,n,s)=>{e._selectionOverrides.hideFakeCaret(),l9(e.getBody(),n,s).fold(()=>e.selection.placeCaretAt(n,s),a=>{const l=e._selectionOverrides.showCaret(1,a.node,a.position===wx.Before,!1);l?e.selection.setRng(l):e.selection.placeCaretAt(n,s)})},uB=(e,n,s,a,l)=>{n==="dragstart"&&QP(a,e.dom.getOuterHTML(s));const f=X$(n,s,a,l);return e.dispatch(n,f)},jj=(e,n)=>{const s=Fv((l,f)=>Wj(n,l,f),0);n.on("remove",s.cancel);const a=e;return l=>e.on(f=>{const v=Math.max(Math.abs(l.screenX-f.screenX),Math.abs(l.screenY-f.screenY));if(!f.dragging&&v>10){const k=uB(n,"dragstart",f.element,f.dataTransfer,l);if(Qe(k.dataTransfer)&&(f.dataTransfer=k.dataTransfer),k.isDefaultPrevented())return;f.dragging=!0,n.focus()}if(f.dragging){const k=l.currentTarget===n.getDoc().documentElement,O=h9(f,l6(n,l));p9(f.ghost,n.getBody()),e7(f.ghost,O,f.width,f.height,f.maxX,f.maxY,l.clientY,l.clientX,n.getContentAreaContainer(),n.getWin(),a,k),s.throttle(l.clientX,l.clientY)}})},b9=e=>{const n=e.getSel();if(Qe(n)){const a=n.getRangeAt(0).startContainer;return _n(a)?a.parentNode:a}else return null},Zj=(e,n)=>s=>{e.on(a=>{var l;if(a.intervalId.clear(),a.dragging){if(Hj(n,b9(n.selection),a.element)){const f=(l=n.getDoc().elementFromPoint(s.clientX,s.clientY))!==null&&l!==void 0?l:n.getBody();uB(n,"drop",f,a.dataTransfer,s).isDefaultPrevented()||n.undoManager.transact(()=>{Vj(n.dom,a.element),zW(a.dataTransfer).each(k=>n.insertContent(k)),n._selectionOverrides.hideFakeCaret()})}uB(n,"dragend",n.getBody(),a.dataTransfer,s)}}),v9(e)},t7=(e,n,s)=>{e.on(a=>{a.intervalId.clear(),a.dragging&&s.fold(()=>uB(n,"dragend",a.element,a.dataTransfer),l=>uB(n,"dragend",a.element,a.dataTransfer,l))}),v9(e)},Gj=(e,n)=>s=>t7(e,n,Y.some(s)),v9=e=>{e.on(n=>{n.intervalId.clear(),f6(n.ghost)}),e.clear()},n7=e=>{const n=Kl(),s=qs.DOM,a=document,l=Uj(n,e),f=jj(n,e),v=Zj(n,e),k=Gj(n,e);e.on("mousedown",l),e.on("mousemove",f),e.on("mouseup",v),s.bind(a,"mousemove",f),s.bind(a,"mouseup",k),e.on("remove",()=>{s.unbind(a,"mousemove",f),s.unbind(a,"mouseup",k)}),e.on("keydown",O=>{O.keyCode===eo.ESC&&t7(n,e,Y.none())})},y9=e=>{const n=l=>{if(!l.isDefaultPrevented()){const f=l.dataTransfer;f&&(ce(f.types,"Files")||f.files.length>0)&&(l.preventDefault(),l.type==="drop"&&fC(e,"Dropped file type is not supported"))}},s=l=>{Ke(e,l.target)&&n(l)},a=()=>{const l=qs.DOM,f=e.dom,v=document,k=e.inline?e.getBody():e.getDoc(),O=["drop","dragover"];oe(O,F=>{l.bind(v,F,s),f.bind(k,F,n)}),e.on("remove",()=>{oe(O,F=>{l.unbind(v,F,s),f.unbind(k,F,n)})})};e.on("init",()=>{Wo.setEditorTimeout(e,a,0)})},Tq=e=>{n7(e),rw(e)&&y9(e)},qj=e=>{const n=Fv(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const s=e.selection.getRng();if(s.collapsed){const a=sN(e,s,!1);e.selection.setRng(a)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},x9=e=>{e.on("init",()=>{e.on("focusin",n=>{const s=n.target;if(Kc(s)){const a=Qg(e.getBody(),s),l=ia(a)?a:s;e.selection.getNode()!==l&&E_(e,l).each(f=>e.selection.setRng(f))}})})},dB=ia,p6=(e,n)=>Qg(e.getBody(),n),Kj=e=>{const n=e.selection,s=e.dom,a=e.getBody(),l=_D(e,a,s.isBlock,()=>hc(e)),f="sel-"+s.uniqueId(),v="data-mce-selected";let k;const O=So=>Qe(So)&&s.hasClass(So,"mce-offscreen-selection"),F=So=>So!==a&&(dB(So)||Kc(So))&&s.isChildOf(So,a)&&s.isEditable(So.parentNode),Z=So=>{So&&n.setRng(So)},K=(So,sn,Ut,En=!0)=>e.dispatch("ShowCaret",{target:sn,direction:So,before:Ut}).isDefaultPrevented()?null:(En&&n.scrollIntoView(sn,So===-1),l.show(Ut,sn)),J=So=>{So.hasAttribute("data-mce-caret")&&(ub(So),n.scrollIntoView(So))},de=()=>{e.on("click",sn=>{s.isEditable(sn.target)||(sn.preventDefault(),e.focus())}),e.on("blur NewBlock",Ot),e.on("ResizeWindow FullscreenStateChanged",l.reposition),e.on("tap",sn=>{const Ut=sn.target,En=p6(e,Ut);dB(En)?(sn.preventDefault(),E_(e,En).each(bt)):F(Ut)&&E_(e,Ut).each(bt)},!0),e.on("mousedown",sn=>{const Ut=sn.target;if(Ut!==a&&Ut.nodeName!=="HTML"&&!s.isChildOf(Ut,a)||!RM(e,sn.clientX,sn.clientY))return;Ot(),Un();const En=p6(e,Ut);dB(En)?(sn.preventDefault(),E_(e,En).each(bt)):l9(a,sn.clientX,sn.clientY).each(Io=>{sn.preventDefault();const gs=K(1,Io.node,Io.position===wx.Before,!1);Z(gs),Qu(En)?En.focus():e.getBody().focus()})}),e.on("keypress",sn=>{eo.modifierPressed(sn)||dB(n.getNode())&&sn.preventDefault()}),e.on("GetSelectionRange",sn=>{let Ut=sn.range;if(k){if(!k.parentNode){k=null;return}Ut=Ut.cloneRange(),Ut.selectNode(k),sn.range=Ut}}),e.on("SetSelectionRange",sn=>{sn.range=Me(sn.range);const Ut=bt(sn.range,sn.forward);Ut&&(sn.range=Ut)});const So=sn=>so(sn)&&sn.id==="mcepastebin";e.on("AfterSetSelectionRange",sn=>{const Ut=sn.range,En=Ut.startContainer.parentElement;!be(Ut)&&!So(En)&&Un(),O(En)||Ot()}),Tq(e),qj(e),x9(e)},Te=So=>Lg(So)||Ar(So)||rd(So),be=So=>Te(So.startContainer)||Te(So.endContainer),Me=So=>{const sn=e.schema.getVoidElements(),Ut=s.createRng(),En=So.startContainer,Io=So.startOffset,gs=So.endContainer,Gs=So.endOffset;return Lo(sn,En.nodeName.toLowerCase())?Io===0?Ut.setStartBefore(En):Ut.setStartAfter(En):Ut.setStart(En,Io),Lo(sn,gs.nodeName.toLowerCase())?Gs===0?Ut.setEndBefore(gs):Ut.setEndAfter(gs):Ut.setEnd(gs,Gs),Ut},Xe=(So,sn)=>{const Ut=je.fromDom(e.getBody()),En=e.getDoc(),Io=Yt(Ut,"#"+f).getOrThunk(()=>{const Tr=je.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',En);return Pi(Tr,"id",f),va(Ut,Tr),Tr}),gs=s.createRng();rm(Io),vd(Io,[je.fromText(wc,En),je.fromDom(sn),je.fromText(wc,En)]),gs.setStart(Io.dom.firstChild,1),gs.setEnd(Io.dom.lastChild,0),Ws(Io,{top:s.getPos(So,e.getBody()).y+"px"}),Zg(Io);const Gs=n.getSel();return Gs&&(Gs.removeAllRanges(),Gs.addRange(gs)),gs},gt=So=>{const sn=So.cloneNode(!0),Ut=e.dispatch("ObjectSelected",{target:So,targetClone:sn});if(Ut.isDefaultPrevented())return null;const En=Xe(So,Ut.targetClone),Io=je.fromDom(So);return oe(ll(je.fromDom(e.getBody()),`*[${v}]`),gs=>{Lr(Io,gs)||tr(gs,v)}),s.getAttrib(So,v)||So.setAttribute(v,"1"),k=So,Un(),En},bt=(So,sn)=>{if(!So)return null;if(So.collapsed){if(!be(So)){const gs=sn?1:-1,Gs=o0(gs,a,So),Tr=Gs.getNode(!sn);if(Qe(Tr)){if(lw(Tr))return K(gs,Tr,sn?!Gs.isAtEnd():!1,!1);if(dh(Tr)&&ia(Tr.nextSibling)){const ci=s.createRng();return ci.setStart(Tr,0),ci.setEnd(Tr,0),ci}}const za=Gs.getNode(sn);if(Qe(za)){if(lw(za))return K(gs,za,sn?!1:!Gs.isAtEnd(),!1);if(dh(za)&&ia(za.previousSibling)){const ci=s.createRng();return ci.setStart(za,1),ci.setEnd(za,1),ci}}}return null}let Ut=So.startContainer,En=So.startOffset;const Io=So.endOffset;if(_n(Ut)&&En===0&&dB(Ut.parentNode)&&(Ut=Ut.parentNode,En=s.nodeIndex(Ut),Ut=Ut.parentNode),!so(Ut))return null;if(Io===En+1&&Ut===So.endContainer){const gs=Ut.childNodes[En];if(F(gs))return gt(gs)}return null},Ot=()=>{k&&k.removeAttribute(v),Yt(je.fromDom(e.getBody()),"#"+f).each(Zr),k=null},yn=()=>{l.destroy(),k=null},Un=()=>{l.hide()};return $p(e)||de(),{showCaret:K,showBlockCaretContainer:J,hideFakeCaret:Un,destroy:yn}},Yj=(e,n)=>{let s=n;for(let a=e.previousSibling;_n(a);a=a.previousSibling)s+=a.data.length;return s},w9=(e,n,s,a,l)=>{if(_n(s)&&(a<0||a>s.data.length))return[];const f=l&&_n(s)?[Yj(s,a)]:[a];let v=s;for(;v!==n&&v.parentNode;)f.push(e.nodeIndex(v,l)),v=v.parentNode;return v===n?f.reverse():[]},h6=(e,n,s,a,l,f,v=!1)=>{const k=w9(e,n,s,a,v),O=w9(e,n,l,f,v);return{start:k,end:O}},mB=(e,n)=>{const s=n.slice(),a=s.pop();return z(a)?it(s,(f,v)=>f.bind(k=>Y.from(k.childNodes[v])),Y.some(e)).bind(f=>_n(f)&&(a<0||a>f.data.length)?Y.none():Y.some({node:f,offset:a})):Y.none()},o7=(e,n)=>mB(e,n.start).bind(({node:s,offset:a})=>mB(e,n.end).map(({node:l,offset:f})=>{const v=document.createRange();return v.setStart(s,a),v.setEnd(l,f),v})),C9=(e,n,s,a=!1)=>h6(e,n,s.startContainer,s.startOffset,s.endContainer,s.endOffset,a),G4=(e,n,s)=>{if(n&&e.isEmpty(n)&&!s(n)){const a=n.parentNode;e.remove(n,_n(n.firstChild)&&Ju(n.firstChild.data)),G4(e,a,s)}},b6=(e,n,s,a=!0)=>{const l=n.startContainer.parentNode,f=n.endContainer.parentNode;n.deleteContents(),a&&!s(n.startContainer)&&(_n(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),_n(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),G4(e,l,s),l!==f&&G4(e,f,s))},gB=(e,n)=>Y.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),s7=(e,n,s)=>{const a=e.dynamicPatternsLookup({text:s,block:n});return{...e,blockPatterns:e2(a).concat(e.blockPatterns),inlinePatterns:yp(a).concat(e.inlinePatterns)}},r7=(e,n,s,a)=>{const l=e.createRng();return l.setStart(n,0),l.setEnd(s,a),l.toString()},S9=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),q4=(e,n)=>{const s=e.createRng();return s.setStartAfter(n.start),s.setEndBefore(n.end),s},k9=(e,n,s)=>{const a=o7(e.getRoot(),s).getOrDie("Unable to resolve path range"),l=a.startContainer,f=a.endContainer,v=a.endOffset===0?f:f.splitText(a.endOffset),k=a.startOffset===0?l:l.splitText(a.startOffset),O=k.parentNode,F=v.parentNode;return{prefix:n,end:F.insertBefore(S9(e,n+"-end"),v),start:O.insertBefore(S9(e,n+"-start"),k)}},T9=(e,n,s)=>{G4(e,e.get(n.prefix+"-end"),s),G4(e,e.get(n.prefix+"-start"),s)},a7=e=>e.start.length===0,Xj=e=>(n,s)=>{const l=n.data.substring(0,s),f=l.lastIndexOf(e.charAt(e.length-1)),v=l.lastIndexOf(e);return v!==-1?v+e.length:f!==-1?f+1:-1},E9=(e,n,s,a)=>{const l=n.start;return e$(e,a.container,a.offset,Xj(l),s).bind(v=>{var k,O;const F=(O=(k=s.textContent)===null||k===void 0?void 0:k.indexOf(l))!==null&&O!==void 0?O:-1;if(F!==-1&&v.offset>=F+l.length){const K=e.createRng();return K.setStart(v.container,v.offset-l.length),K.setEnd(v.container,v.offset),Y.some(K)}else{const K=v.offset-l.length;return AP(v.container,K,s).map(J=>{const de=e.createRng();return de.setStart(J.container,J.offset),de.setEnd(v.container,v.offset),de}).filter(J=>J.toString()===l).orThunk(()=>E9(e,n,s,B0(v.container,0)))}})},Jj=(e,n,s,a,l,f=!1)=>{if(n.start.length===0&&!f){const v=e.createRng();return v.setStart(s,a),v.setEnd(s,a),Y.some(v)}return QL(s,a,l).bind(v=>E9(e,n,l,v).bind(O=>{var F;if(f){if(O.endContainer===v.container&&O.endOffset===v.offset)return Y.none();if(v.offset===0&&((F=O.endContainer.textContent)===null||F===void 0?void 0:F.length)===O.endOffset)return Y.none()}return Y.some(O)}))},i7=(e,n,s,a)=>{const l=e.dom,f=l.getRoot(),v=s.pattern,k=s.position.container,O=s.position.offset;return AP(k,O-s.pattern.end.length,n).bind(F=>{const Z=h6(l,f,F.container,F.offset,k,O,a);if(a7(v))return Y.some({matches:[{pattern:v,startRng:Z,endRng:Z}],position:F});{const K=v6(e,s.remainingPatterns,F.container,F.offset,n,a),J=K.getOr({matches:[],position:F}),de=J.position;return Jj(l,v,de.container,de.offset,n,K.isNone()).map(be=>{const Me=C9(l,f,be,a);return{matches:J.matches.concat([{pattern:v,startRng:Me,endRng:Z}]),position:B0(be.startContainer,be.startOffset)}})}})},v6=(e,n,s,a,l,f)=>{const v=e.dom;return QL(s,a,v.getRoot()).bind(k=>{const O=r7(v,l,s,a);for(let F=0;F<n.length;F++){const Z=n[F];if(!hr(O,Z.end))continue;const K=n.slice();K.splice(F,1);const J=i7(e,l,{pattern:Z,remainingPatterns:K,position:k},f);if(J.isNone()&&a>0)return v6(e,n,s,a-1,l,f);if(J.isSome())return J}return Y.none()})},_9=(e,n,s)=>{e.selection.setRng(s),n.type==="inline-format"?oe(n.format,a=>{e.formatter.apply(a)}):e.execCommand(n.cmd,!1,n.value)},A9=(e,n,s,a)=>{const l=q4(e.dom,s);b6(e.dom,l,a),_9(e,n,l)},Qj=(e,n,s,a,l)=>{const f=e.dom,v=q4(f,a),k=q4(f,s);b6(f,k,l),b6(f,v,l);const O={prefix:s.prefix,start:s.end,end:a.start},F=q4(f,O);_9(e,n,F)},eZ=(e,n)=>{const s=ab("mce_textpattern"),a=An(n,(l,f)=>{const v=k9(e,s+`_end${l.length}`,f.endRng);return l.concat([{...f,endMarker:v}])},[]);return An(a,(l,f)=>{const v=a.length-l.length-1,k=a7(f.pattern)?f.endMarker:k9(e,s+`_start${v}`,f.startRng);return l.concat([{...f,startMarker:k}])},[])},tZ=e=>Mn(e,(n,s)=>s.end.length-n.end.length),nZ=(e,n)=>{const s=rt(e,a=>De(n,l=>a.pattern.start===l.pattern.start&&a.pattern.end===l.pattern.end));return e.length===n.length?s?e:n:e.length>n.length?e:n},O9=(e,n,s,a,l,f)=>{const v=v6(e,l.inlinePatterns,s,a,n,f).fold(()=>[],O=>O.matches),k=v6(e,tZ(l.inlinePatterns),s,a,n,f).fold(()=>[],O=>O.matches);return nZ(v,k)},D9=(e,n)=>{if(n.length===0)return;const s=e.dom,a=e.selection.getBookmark(),l=eZ(s,n);oe(l,f=>{const v=s.getParent(f.startMarker.start,s.isBlock),k=O=>O===v;a7(f.pattern)?A9(e,f.pattern,f.endMarker,k):Qj(e,f.pattern,f.startMarker,f.endMarker,k),T9(s,f.endMarker,k),T9(s,f.startMarker,k)}),e.selection.moveToBookmark(a)},R9=(e,n,s)=>qV(n,0,n).map(a=>{const l=a.container;return aH(l,s.start.length,n).each(f=>{const v=e.createRng();v.setStart(l,0),v.setEnd(f.container,f.offset),b6(e,v,k=>k===n)}),l}),M9=e=>(n,s)=>{const a=n.dom,l=s.pattern,f=o7(a.getRoot(),s.range).getOrDie("Unable to resolve path range"),v=(k,O)=>{const F=O.get(k);return qt(F)&&Gt(F).exists(Z=>Lo(Z,"block"))};return gB(n,f).each(k=>{l.type==="block-format"?v(l.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,k,l),n.formatter.apply(l.format)}):l.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,k,l),n.execCommand(l.cmd,!1,l.value)})}),!0},N9=e=>Mn(e,(n,s)=>s.start.length-n.start.length),B9=e=>(n,s)=>{const a=N9(n),l=s.replace(wc," ");return hn(a,f=>e(f,s,l))},y6=(e,n)=>(s,a,l,f,v)=>{var k;v===void 0&&(v=(k=a.textContent)!==null&&k!==void 0?k:"");const O=s.dom,F=Pl(s);return O.is(a,F)?e(l.blockPatterns,v).map(Z=>n&&bn.trim(v).length===Z.start.length?[]:[{pattern:Z,range:h6(O,O.getRoot(),a,0,a,0,f)}]).getOr([]):[]},oZ=e=>/^\s[^\s]/.test(e),sZ=M9((e,n,s)=>{R9(e,n,s).each(a=>{const l=je.fromDom(a),f=y1(l);oZ(f)&&Fx(l,f.slice(1))})}),rZ=B9((e,n,s)=>n.indexOf(e.start)===0||s.indexOf(e.start)===0),aZ=y6(rZ,!0),iZ=(e,n)=>{const s=e.selection.getRng();return gB(e,s).map(a=>{var l;const f=Math.max(0,s.startOffset),v=s7(n,a,(l=a.textContent)!==null&&l!==void 0?l:""),k=O9(e,a,s.startContainer,f,v,!0),O=aZ(e,a,v,!0);return{inlineMatches:k,blockMatches:O}}).filter(({inlineMatches:a,blockMatches:l})=>l.length>0||a.length>0)},x6=(e,n)=>{if(n.length===0)return;const s=e.selection.getBookmark();oe(n,a=>sZ(e,a)),e.selection.moveToBookmark(s)},cZ=M9(R9),lZ=B9((e,n,s)=>n===e.start||s===e.start),uZ=y6(lZ,!1),dZ=(e,n)=>{const s=e.selection.getRng();return gB(e,s).map(a=>{const l=Math.max(0,s.startOffset),f=r7(e.dom,a,s.startContainer,l),v=s7(n,a,f);return uZ(e,a,v,!1,f)}).filter(a=>a.length>0)},mZ=(e,n)=>{oe(n,s=>cZ(e,s))},gZ=(e,n)=>iZ(e,n).fold($e,({inlineMatches:s,blockMatches:a})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{ZC(e),D9(e,s),x6(e,a);const l=e.selection.getRng(),f=QL(l.startContainer,l.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),f.each(v=>{const k=v.container;k.data.charAt(v.offset-1)===Og&&(k.deleteData(v.offset-1,1),G4(e.dom,k.parentNode,O=>O===e.dom.getRoot()))})}),!0)),fZ=(e,n)=>{const s=e.selection.getRng();gB(e,s).map(a=>{const l=Math.max(0,s.startOffset-1),f=r7(e.dom,a,s.startContainer,l),v=s7(n,a,f),k=O9(e,a,s.startContainer,l,v,!1);k.length>0&&e.undoManager.transact(()=>{D9(e,k)})})},pZ=(e,n)=>dZ(e,n).fold($e,s=>(e.undoManager.transact(()=>{mZ(e,s)}),!0)),I9=(e,n,s)=>{for(let a=0;a<e.length;a++)if(s(e[a],n))return!0;return!1},F9=(e,n)=>I9(e,n,(s,a)=>s===a.keyCode&&!eo.modifierPressed(a)),hZ=(e,n)=>I9(e,n,(s,a)=>s.charCodeAt(0)===a.charCode),P9=e=>{const n=[",",".",";",":","!","?"],s=[32],a=()=>mu(NA(e).filter(v=>v.type==="inline-command"||v.type==="block-command"?e.queryCommandSupported(v.cmd):!0),yT(e)),l=()=>Sy(e);e.on("keydown",v=>{if(v.keyCode===13&&!eo.modifierPressed(v)&&e.selection.isCollapsed()&&e.selection.isEditable()){const k=hh(a(),"enter");(k.inlinePatterns.length>0||k.blockPatterns.length>0||l())&&gZ(e,k)&&v.preventDefault()}},!0),e.on("keydown",v=>{if(v.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const k=hh(a(),"space");(k.blockPatterns.length>0||l())&&pZ(e,k)&&v.preventDefault()}},!0);const f=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const v=hh(a(),"space");(v.inlinePatterns.length>0||l())&&fZ(e,v)}};e.on("keyup",v=>{F9(s,v)&&f()}),e.on("keypress",v=>{hZ(n,v)&&Wo.setEditorTimeout(e,f)})},bZ=e=>{P9(e)},vZ=e=>{const n=bn.each,s=eo.BACKSPACE,a=eo.DELETE,l=e.dom,f=e.selection,v=e.parser,k=ms.browser,O=k.isFirefox(),F=k.isChromium()||k.isSafari(),Z=ms.deviceType.isiPhone()||ms.deviceType.isiPad(),K=ms.os.isMacOS()||ms.os.isiOS(),J=(bo,Is)=>{try{e.getDoc().execCommand(bo,!1,String(Is))}catch{}},de=bo=>bo.isDefaultPrevented(),Te=()=>{const bo=Ps=>{const po=l.create("body"),Or=Ps.cloneContents();return po.appendChild(Or),f.serializer.serialize(po,{format:"html"})},Is=Ps=>{const po=bo(Ps),Or=l.createRng();Or.selectNode(e.getBody());const Vr=bo(Or);return po===Vr};e.on("keydown",Ps=>{const po=Ps.keyCode;if(!de(Ps)&&(po===a||po===s)&&e.selection.isEditable()){const Or=e.selection.isCollapsed(),Vr=e.getBody();if(Or&&!Yc(e.schema,Vr)||!Or&&!Is(e.selection.getRng()))return;Ps.preventDefault(),e.setContent(""),Vr.firstChild&&l.isBlock(Vr.firstChild)?e.selection.setCursorLocation(Vr.firstChild,0):e.selection.setCursorLocation(Vr,0),e.nodeChanged()}})},be=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Me=()=>{e.inline||l.bind(e.getDoc(),"mousedown mouseup",bo=>{let Is;if(bo.target===e.getDoc().documentElement)if(Is=f.getRng(),e.getBody().focus(),bo.type==="mousedown"){if(Lg(Is.startContainer))return;f.placeCaretAt(bo.clientX,bo.clientY)}else f.setRng(Is)})},Xe=()=>{e.on("keydown",bo=>{if(!de(bo)&&bo.keyCode===s){if(!e.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&f.getRng().startOffset===0){const Is=f.getNode(),Ps=Is.previousSibling;if(Is.nodeName==="HR"){l.remove(Is),bo.preventDefault();return}Ps&&Ps.nodeName&&Ps.nodeName.toLowerCase()==="hr"&&(l.remove(Ps),bo.preventDefault())}}})},gt=()=>{Range.prototype.getClientRects||e.on("mousedown",bo=>{if(!de(bo)&&bo.target.nodeName==="HTML"){const Is=e.getBody();Is.blur(),Wo.setEditorTimeout(e,()=>{Is.focus()})}})},bt=()=>{const bo=Vu(e);e.on("click",Is=>{const Ps=Is.target;/^(IMG|HR)$/.test(Ps.nodeName)&&l.isEditable(Ps)&&(Is.preventDefault(),e.selection.select(Ps),e.nodeChanged()),Ps.nodeName==="A"&&l.hasClass(Ps,bo)&&Ps.childNodes.length===0&&l.isEditable(Ps.parentNode)&&(Is.preventDefault(),f.select(Ps))})},Ot=()=>{const bo=()=>{const Ps=l.getAttribs(f.getStart().cloneNode(!1));return()=>{const po=f.getStart();po!==e.getBody()&&(l.setAttrib(po,"style",null),n(Ps,Or=>{po.setAttributeNode(Or.cloneNode(!0))}))}},Is=()=>!f.isCollapsed()&&l.getParent(f.getStart(),l.isBlock)!==l.getParent(f.getEnd(),l.isBlock);e.on("keypress",Ps=>{let po;return!de(Ps)&&(Ps.keyCode===8||Ps.keyCode===46)&&Is()?(po=bo(),e.getDoc().execCommand("delete",!1),po(),Ps.preventDefault(),!1):!0}),l.bind(e.getDoc(),"cut",Ps=>{if(!de(Ps)&&Is()){const po=bo();Wo.setEditorTimeout(e,()=>{po()})}})},yn=()=>{e.on("keydown",bo=>{if(!de(bo)&&bo.keyCode===s&&f.isCollapsed()&&f.getRng().startOffset===0){const Is=f.getNode().previousSibling;if(Is&&Is.nodeName&&Is.nodeName.toLowerCase()==="table")return bo.preventDefault(),!1}return!0})},Un=()=>{e.on("keydown",bo=>{if(de(bo)||bo.keyCode!==eo.BACKSPACE)return;let Is=f.getRng();const Ps=Is.startContainer,po=Is.startOffset,Or=l.getRoot();let Vr=Ps;if(!(!Is.collapsed||po!==0)){for(;Vr.parentNode&&Vr.parentNode.firstChild===Vr&&Vr.parentNode!==Or;)Vr=Vr.parentNode;Vr.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Vr),Is=l.createRng(),Is.setStart(Ps,0),Is.setEnd(Ps,0),f.setRng(Is))}})},So=()=>{const bo=()=>{J("StyleWithCSS",!1),J("enableInlineTableEditing",!1),Au(e)||J("enableObjectResizing",!1)};qv(e)||e.on("BeforeExecCommand mousedown",bo)},sn=()=>{const bo=()=>{n(l.select("a:not([data-mce-block])"),Is=>{var Ps;let po=Is.parentNode;const Or=l.getRoot();if((po==null?void 0:po.lastChild)===Is){for(;po&&!l.isBlock(po);){if(((Ps=po.parentNode)===null||Ps===void 0?void 0:Ps.lastChild)!==po||po===Or)return;po=po.parentNode}l.add(po,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Is=>{(Is.type==="setcontent"||Is.command==="mceInsertLink")&&bo()})},Ut=()=>{e.on("init",()=>{J("DefaultParagraphSeparator",Pl(e))})},En=bo=>{const Is=bo.getBody(),Ps=bo.selection.getRng();return Ps.startContainer===Ps.endContainer&&Ps.startContainer===Is&&Ps.startOffset===0&&Ps.endOffset===Is.childNodes.length},Io=()=>{e.on("keyup focusin mouseup",bo=>{!eo.modifierPressed(bo)&&!En(e)&&f.normalize()},!0)},gs=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Gs=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Tr=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",bo=>{let Is;bo.target.nodeName==="HTML"&&(Is=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Is),e.selection.normalize(),e.nodeChanged())}))},za=()=>{K&&e.on("keydown",bo=>{eo.metaKeyPressed(bo)&&!bo.shiftKey&&(bo.keyCode===37||bo.keyCode===39)&&(bo.preventDefault(),e.selection.getSel().modify("move",bo.keyCode===37?"backward":"forward","lineboundary"))})},ci=()=>{e.on("click",bo=>{let Is=bo.target;do if(Is.tagName==="A"){bo.preventDefault();return}while(Is=Is.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},El=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",bo=>{bo.preventDefault()})})},tm=()=>{v.addNodeFilter("br",bo=>{let Is=bo.length;for(;Is--;)bo[Is].attr("class")==="Apple-interchange-newline"&&bo[Is].remove()})},gd=Kt,to=()=>{if(!O||e.removed)return!1;const bo=e.selection.getSel();return!bo||!bo.rangeCount||bo.rangeCount===0},us=()=>{F&&(Me(),bt(),El(),be(),Z&&(Gs(),Tr(),ci())),O&&(gt(),So(),gs(),za())},pa=()=>{Un(),Te(),ms.windowsPhone||Io(),F&&(Me(),bt(),Ut(),El(),yn(),tm(),Z?(Gs(),Tr(),ci()):be()),O&&(Xe(),gt(),Ot(),So(),sn(),gs(),za(),yn())};return $p(e)?us():pa(),{refreshContentEditable:gd,isHidden:to}},L9=e=>e.toLowerCase()==="gpl",fB=e=>e.length>=64&&e.length<=255,yZ=e=>L9(e)||fB(e)?"VALID":"INVALID",$9=e=>{const n=SD(e);!ue(kD(e))&&(oo(n)||yZ(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},c7=qs.DOM,xZ=(e,n)=>{const s=je.fromDom(e.getBody()),a=pf(Vd(s)),l=je.fromTag("style");Pi(l,"type","text/css"),va(l,je.fromText(n)),va(a,l),e.on("remove",()=>{Zr(l)})},wZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,l7=e=>Er(e,n=>oo(n)===!1),u7=e=>{const n=e.options.get,s=e.editorUpload.blobCache;return l7({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:wZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:S2(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:s,document:e.getDoc()})},H9=e=>{const n=e.options.get;return l7({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},z9=e=>{const n=e.options.get;return{...u7(e),...H9(e),...l7({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},CZ=e=>{const n=zS(u7(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(s,a)=>{const l=e.dom,f="data-mce-"+a;let v=s.length;for(;v--;){const k=s[v];let O=k.attr(a);if(O&&!k.attr(f)){if(O.indexOf("data:")===0||O.indexOf("blob:")===0)continue;a==="style"?(O=l.serializeStyle(l.parseStyle(O),k.name),O.length||(O=null),k.attr(f,O),k.attr(a,O)):a==="tabindex"?(k.attr(f,O),k.attr(a,null)):k.attr(f,e.convertURL(O,a,k.name))}}}),n.addNodeFilter("script",s=>{let a=s.length;for(;a--;){const l=s[a],f=l.attr("type")||"no/type";f.indexOf("mce-")!==0&&l.attr("type","mce-"+f)}}),wT(e)&&n.addNodeFilter("#cdata",s=>{var a;let l=s.length;for(;l--;){const f=s[l];f.type=8,f.name="#comment",f.value="[CDATA["+e.dom.encode((a=f.value)!==null&&a!==void 0?a:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",s=>{let a=s.length;const l=e.schema.getNonEmptyElements();for(;a--;){const f=s[a];f.isEmpty(l)&&f.getAll("br").length===0&&f.append(new xm("br",1))}}),n},SZ=e=>{const n=aw(e);n&&Wo.setEditorTimeout(e,()=>{let s;n===!0?s=e:s=e.editorManager.get(n),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)},kZ=e=>{const n=e.dom.getRoot();!e.inline&&(!yw(e)||e.selection.getStart(!0)===n)&&kl(n).each(s=>{const a=s.getNode(),l=rg(a)?kl(a).getOr(s):s;e.selection.setRng(l.toRange())})},TZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Ug(e),e.focus(!0),kZ(e),e.nodeChanged({initial:!0});const n=DA(e);Be(n)&&n.call(e,e),SZ(e),S0(e)&&e4(e,!0)},d7=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,EZ=(e,n,s)=>{const{pass:a,fail:l}=At(n,k=>tinymce.Resource.has(nv(k))),v=[...a.map(k=>{const O=tinymce.Resource.get(nv(k));return ue(O)?Promise.resolve(d7(e).loadRawCss(k,O)):Promise.resolve()}),d7(e).loadAll(l)];return e.inline?v:v.concat([e.ui.styleSheetLoader.loadAll(s)])},V9=e=>{const n=d7(e),s=Df(e),a=e.contentCSS,l=()=>{n.unloadAll(a),e.inline||e.ui.styleSheetLoader.unloadAll(s)},f=()=>{e.removed?l():e.on("remove",l)};if(e.contentStyles.length>0){let O="";bn.each(e.contentStyles,F=>{O+=F+`\r
`}),e.dom.addStyle(O)}const v=Promise.all(EZ(e,a,s)).then(f).catch(f),k=vb(e);return k&&xZ(e,k),v},_Z=e=>{const n=e.getDoc(),s=e.getBody();zu(e),y2(e)||(n.body.spellcheck=!1,c7.setAttrib(s,"spellcheck","false")),e.quirks=vZ(e),Vg(e);const a=g2(e);a!==void 0&&(s.dir=a);const l=RA(e);l&&e.on("BeforeSetContent",f=>{bn.each(l,v=>{f.content=f.content.replace(v,k=>"<!--mce:protected "+escape(k)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",f=>{e.composing=f.type==="compositionstart"})},AZ=e=>{$p(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},w6=e=>{e.removed!==!0&&(AZ(e),TZ(e))},m7=e=>{let n=!1;const s=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(s),n=!0,e.setProgressState(!1)}},g7=e=>{const n=e.getElement();let s=e.getDoc();e.inline&&(c7.addClass(n,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const a=e.getBody();a.disabled=!0,e.readonly=qv(e),e._editableRoot=yy(e),!N1(e)&&e.hasEditableRoot()&&(e.inline&&c7.getStyle(a,"position",!0)==="static"&&(a.style.position="relative"),a.contentEditable="true"),a.disabled=!1,e.editorUpload=C5(e),e.schema=ya(H9(e)),e.dom=qs(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:d2(e),referrerPolicy:tw(e),onSetAttrib:v=>{e.dispatch("SetAttrib",v)}}),e.parser=CZ(e),e.serializer=xM(z9(e),e),e.selection=j3(e.dom,e.getWin(),e.serializer,e),e.annotator=ii(e),e.formatter=_0(e),e.undoManager=k5(e),e._nodeChangeDispatcher=new OW(e),e._selectionOverrides=Kj(e),ys(e),e9(e),Hh(e),$p(e)||(Ej(e),bZ(e));const l=AW(e);pr(e,l),TC(e),E5(e),i6(e);const f=dM(e);_Z(e),$9(e),f.fold(()=>{const v=m7(e);V9(e).then(()=>{w6(e),v()})},v=>{e.setProgressState(!0),V9(e).then(()=>{v().then(k=>{e.setProgressState(!1),w6(e),bM(e)},k=>{e.notificationManager.open({type:"error",text:String(k)}),w6(e),bM(e)})})})},U9=pt,OZ=(e,n,s)=>j(e,n,U9,s),f7=qs.DOM,DZ=(e,n,s,a)=>{const l=je.fromTag("iframe");return a.each(f=>Pi(l,"tabindex",f)),dc(l,s),dc(l,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Pm(l,"tox-edit-area__iframe"),l},W9=e=>{let n=Of(e)+"<html><head>";_A(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const s=qm(e),a=Qr(e),l=e.translate(xp(e));return AA(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+AA(e)+'" />'),n+=`</head><body id="${s}" class="mce-content-body ${a}" data-id="${e.id}" aria-label="${l}"><br></body></html>`,n},j9=(e,n)=>{const s=ms.browser.isFirefox()?xp(e):"Rich Text Area",a=e.translate(s),l=Yi(je.fromDom(e.getElement()),"tabindex").bind(Ua),f=DZ(e.id,a,pm(e),l).dom;f.onload=()=>{f.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=f,e.iframeHTML=W9(e),f7.add(n.iframeContainer,f)},RZ=e=>{const n=e.iframeElement,s=()=>{e.contentDocument=n.contentDocument,g7(e)};if(Cy(e)||ms.browser.isFirefox()){const a=e.getDoc();a.open(),a.write(e.iframeHTML),a.close(),s()}else{const a=OZ(je.fromDom(n),"load",()=>{a.unbind(),s()});n.srcdoc=e.iframeHTML}},MZ=(e,n)=>{j9(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=f7.isHidden(n.editorContainer)),e.getElement().style.display="none",f7.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,RZ(e)},C6=qs.DOM,S6=(e,n,s)=>{const a=ek.get(s),l=ek.urls[s]||e.documentBaseUrl.replace(/\/$/,"");if(s=bn.trim(s),a&&bn.inArray(n,s)===-1){if(e.plugins[s])return;try{const f=a(e,l)||{};e.plugins[s]=f,Be(f.init)&&(f.init(e,l),n.push(s))}catch(f){b5(e,s,f)}}},k6=e=>e.replace(/^\-/,""),DC=e=>{const n=[];oe(sw(e),s=>{S6(e,n,k6(s))})},T6=e=>{const n=bn.trim(l2(e)),s=e.ui.registry.getAll().icons,a={...fx.get("default").icons,...fx.get(n).icons};vn(a,(l,f)=>{Lo(s,f)||e.ui.registry.addIcon(f,l)})},K4=e=>{const n=py(e);if(ue(n)){const s=Ph.get(n);e.theme=s(e,Ph.urls[n])||{},Be(e.theme.init)&&e.theme.init(e,Ph.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},Z9=e=>{const n=hy(e),s=QS.get(n);e.model=s(e,QS.urls[n])},NZ=e=>{const n=e.theme.renderUI;return n?n():E6(e)},BZ=e=>{const n=e.getElement(),a=py(e)(e,n);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||e.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||e.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:n.offsetHeight,a},p7=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),IZ=e=>{const n=C6.create("div");return C6.insertAfter(n,e),p7(n,n)},E6=e=>{const n=e.getElement();return e.inline?p7(null):IZ(n)},_6=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ue(py(e))?NZ(e):Be(py(e))?BZ(e):E6(e)},_k=(e,n)=>{const s={show:Y.from(n.show).getOr(Kt),hide:Y.from(n.hide).getOr(Kt),isEnabled:Y.from(n.isEnabled).getOr(pt),setEnabled:a=>{a&&(e.mode.get()==="readonly"||S0(e))||Y.from(n.setEnabled).each(f=>f(a))}};e.ui={...e.ui,...s}},j_=async e=>{e.dispatch("ScriptsLoaded"),T6(e),K4(e),Z9(e),DC(e);const n=await _6(e);_k(e,Y.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Yf(e),e.inline?g7(e):MZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ak=qs.DOM,G9=e=>e.charAt(0)==="-",FZ=(e,n)=>{const s=m2(n),a=hD(n);if(!Ig.hasCode(s)&&s!=="en"){const l=Bs(a)?a:`${n.editorManager.baseURL}/langs/${s}.js`;e.add(l).catch(()=>{uL(n,l,s)})}},PZ=(e,n)=>{const s=py(e);if(ue(s)&&!G9(s)&&!Lo(Ph.urls,s)){const a=vD(e),l=a?e.documentBaseURI.toAbsolute(a):`themes/${s}/theme${n}.js`;Ph.load(s,l).catch(()=>{h5(e,l,s)})}},LZ=(e,n)=>{const s=hy(e);if(s!=="plugin"&&!Lo(QS.urls,s)){const a=Gr(e),l=ue(a)?e.documentBaseURI.toAbsolute(a):`models/${s}/model${n}.js`;QS.load(s,l).catch(()=>{b_(e,l,s)})}},$Z=e=>Y.from(hs(e)).filter(Bs).map(n=>({url:n,name:Y.none()})),q9=(e,n,s)=>Y.from(n).filter(a=>Bs(a)&&!fx.has(a)).map(a=>({url:`${e.editorManager.baseURL}/icons/${a}/icons${s}.js`,name:Y.some(a)})),K9=(e,n,s)=>{const a=q9(n,"default",s),l=$Z(n).orThunk(()=>q9(n,l2(n),""));oe($d([a,l]),f=>{e.add(f.url).catch(()=>{BM(n,f.url,f.name.getOrUndefined())})})},HZ=(e,n)=>{const s=(a,l)=>{ek.load(a,l).catch(()=>{p5(e,l,a)})};vn(Rf(e),(a,l)=>{s(l,a),e.options.set("plugins",sw(e).concat(l))}),oe(sw(e),a=>{a=bn.trim(a),a&&!ek.urls[a]&&!G9(a)&&s(a,`plugins/${a}/plugin${n}.js`)})},zZ=e=>{const n=py(e);return!ue(n)||Qe(Ph.get(n))},VZ=e=>{const n=hy(e);return Qe(QS.get(n))},_q=(e,n)=>{const s=Sd.ScriptLoader,a=()=>{!e.removed&&zZ(e)&&VZ(e)&&j_(e)};PZ(e,n),LZ(e,n),FZ(s,e),K9(s,e,n),HZ(e,n),s.loadQueue().then(a,a)},UZ=(e,n)=>Pu.forElement(e,{contentCssCors:h2(n),referrerPolicy:tw(n)}),h7=e=>{const n=e.id;Ig.setCode(m2(e));const s=()=>{Ak.unbind(window,"ready",s),e.render()};if(!ih.Event.domLoaded){Ak.bind(window,"ready",s);return}if(!e.getElement())return;const a=je.fromDom(e.getElement()),l=Im(a);e.on("remove",()=>{ct(a.dom.attributes,v=>tr(a,v.name)),dc(a,l)}),e.ui.styleSheetLoader=UZ(a,e),by(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const f=e.getElement().form||Ak.getParent(n,"form");f&&(e.formElement=f,yD(e)&&!Li(e.getElement())&&(Ak.insertAfter(Ak.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=v=>{e.dispatch(v.type,v)},Ak.bind(f,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),D1(e)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),f._mceOldSubmit(f)))),e.windowManager=J3(e),e.notificationManager=f5(e),ST(e)&&e.on("GetContent",v=>{v.save&&(v.content=Ak.encode(v.content))}),R1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),fT(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),_q(e,e.suffix)},WZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,S0(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Jl(e,n))},jZ=e=>e._editableRoot,Y9=(e,n)=>({sections:Le(e),options:Le(n)}),X9=le().deviceType,b7=X9.isPhone(),ZZ=X9.isTablet(),Z_=e=>{if(qn(e))return[];{const n=qt(e)?e:e.split(/[ ,]/),s=Ne(n,Ur);return dt(s,Bs)}},GZ=(e,n)=>{const s=hi(n,(a,l)=>ce(e,l));return Y9(s.t,s.f)},qZ=(e,n,s={})=>{const a=e.sections(),l=kr(a,n).getOr({});return bn.extend({},s,l)},v7=(e,n)=>Lo(e.sections(),n),KZ=(e,n)=>v7(e,n)?e.sections()[n]:{},J9=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:kr(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),y7=(e,n)=>{var s;const a=(s=n.external_plugins)!==null&&s!==void 0?s:{};return e&&e.external_plugins?bn.extend({},e.external_plugins,a):a},Q9=(e,n)=>[...Z_(e),...Z_(n)],x7=(e,n,s,a)=>e&&v7(n,"mobile")?a:s,YZ=(e,n,s,a)=>{const l=Z_(s.forced_plugins),f=Z_(a.plugins),v=KZ(n,"mobile"),k=v.plugins?Z_(v.plugins):f,O=x7(e,n,f,k),F=Q9(l,O);return bn.extend(a,{forced_plugins:l,plugins:F})},Aq=(e,n)=>e&&v7(n,"mobile"),Oq=(e,n,s,a,l)=>{var f;const v=e?{mobile:J9((f=l.mobile)!==null&&f!==void 0?f:{},n)}:{},k=GZ(["mobile"],kk(v,l)),O=bn.extend(s,a,k.options(),Aq(e,k)?qZ(k,"mobile"):{},{external_plugins:y7(a,k.options())});return YZ(e,k,a,O)},XZ=(e,n)=>{const s=xH(n);return Oq(b7||ZZ,b7,s,e,s)},eV=(e,n)=>hM(e,n),JZ=e=>{const n=(a,l)=>{e.formatter.toggle(a,l),e.nodeChanged()},s=a=>()=>{oe("left,center,right,justify".split(","),l=>{a!==l&&e.formatter.remove("align"+l)}),a!=="none"&&n("align"+a)};e.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})},QZ=e=>{const n=s=>()=>{const a=e.selection,l=a.isCollapsed()?[e.dom.getParent(a.getNode(),e.dom.isBlock)]:a.getSelectedBlocks();return De(l,f=>Qe(e.formatter.matchNode(f,s)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},eG=e=>{JZ(e),QZ(e)},Dq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=e.getDoc();let a;try{s.execCommand(n)}catch{a=!0}if(n==="paste"&&!s.queryCommandEnabled(n)&&(a=!0),a||!s.queryCommandSupported(n)){let l=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ms.os.isMacOS()||ms.os.isiOS())&&(l=l.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:l,type:"error"})}}})},Rq=(e,n,s,a)=>{const l=je.fromDom(e.getRoot());return Ww(l,Xt.fromRangeStart(n),a)?s=s.replace(/^ /,"&nbsp;"):s=s.replace(/^&nbsp;/," "),jw(l,Xt.fromRangeEnd(n),a)?s=s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s=s.replace(/&nbsp;(<br( \/)?>)?$/," "),s},tV=e=>{if(typeof e!="string"){const n=bn.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},nV=(e,n)=>{const s=e.selection,a=e.dom;return/^ | $/.test(n)?Rq(a,s.getRng(),n,e.schema):n},A6=(e,n)=>{if(e.selection.isEditable()){const{content:s,details:a}=tV(n);JR(e,{...a,content:nV(e,s),format:"html",set:!1,selection:!0}).each(l=>{const f=Ni(e,l.content,a);lC(e,f,l),e.addVisual()})}},tG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,s,a)=>{A6(e,e.dom.createHTML("img",{src:a}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,a)=>{A6(e,e.dom.encode(a))},insertHTML:(n,s,a)=>{A6(e,a)},mceInsertContent:(n,s,a)=>{A6(e,a)},mceSetContent:(n,s,a)=>{e.setContent(a)},mceReplaceContent:(n,s,a)=>{e.execCommand("mceInsertContent",!1,a.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(xy(e))}})},nG={"font-size":"size","font-family":"face"},Mq=Ol("font"),Nq=(e,n,s)=>{const a=f=>il(f,e).orThunk(()=>Mq(f)?kr(nG,e).bind(v=>Yi(f,v)):Y.none()),l=f=>Lr(je.fromDom(n),f);return sx(je.fromDom(s),f=>a(f),l)},Bq=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),oG=(e,n)=>Y.from(qs.DOM.getStyle(n,e,!0)),sG=e=>(n,s)=>Y.from(s).map(je.fromDom).filter(nr).bind(a=>Nq(e,n,a.dom).or(oG(e,a.dom))).getOr(""),rG=sG("font-size"),G_=B(Bq,sG("font-family")),w7=e=>kl(e.getBody()).bind(n=>{const s=n.container();return Y.from(_n(s)?s.parentNode:s)}),O6=e=>Y.from(e.selection.getRng()).bind(n=>{const s=e.getBody();return n.startContainer===s&&n.startOffset===0?Y.none():Y.from(e.selection.getStart(!0))}),oV=(e,n)=>O6(e).orThunk(Se(w7,e)).map(je.fromDom).filter(nr).bind(n),D6=(e,n)=>oV(e,Jt(Y.some,n)),C7=(e,n)=>{if(/^[0-9.]+$/.test(n)){const s=parseInt(n,10);if(s>=1&&s<=7){const a=ky(e),l=IA(e);return l.length>0?l[s-1]||n:a[s-1]||n}else return n}else return n},aG=e=>{const n=e.split(/\s*,\s*/);return Ne(n,s=>s.indexOf(" ")!==-1&&!(cs(s,'"')||cs(s,"'"))?`'${s}'`:s).join(",")},iG=(e,n)=>{const s=C7(e,n);e.formatter.toggle("fontname",{value:aG(s)}),e.nodeChanged()},cG=e=>D6(e,n=>G_(e.getBody(),n.dom)).getOr(""),lG=(e,n)=>{e.formatter.toggle("fontsize",{value:C7(e,n)}),e.nodeChanged()},uG=e=>D6(e,n=>rG(e.getBody(),n.dom)).getOr(""),dG=e=>D6(e,n=>{const s=je.fromDom(e.getBody()),a=sx(n,f=>il(f,"line-height"),Se(Lr,s)),l=()=>{const f=parseFloat(_r(n,"line-height")),v=parseFloat(_r(n,"font-size"));return String(f/v)};return a.getOrThunk(l)}).getOr(""),Ok=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},mG=e=>{const n=(s,a)=>{e.formatter.toggle(s,a),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>{n(s)},"ForeColor,HiliteColor":(s,a,l)=>{n(s,{value:l})},BackColor:(s,a,l)=>{n("hilitecolor",{value:l})},FontName:(s,a,l)=>{iG(e,l)},FontSize:(s,a,l)=>{lG(e,l)},LineHeight:(s,a,l)=>{Ok(e,l)},Lang:(s,a,l)=>{var f;n(s,{value:l.code,customValue:(f=l.customCode)!==null&&f!==void 0?f:null})},RemoveFormat:s=>{e.formatter.remove(s)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(s,a,l)=>{n(ue(l)?l:"p")},mceToggleFormat:(s,a,l)=>{n(l)}})},sV=e=>{const n=s=>e.formatter.match(s);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>n(s),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>cG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>uG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>dG(e))},gG=e=>{mG(e),sV(e)},R6=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},fG=e=>{e.editorCommands.addCommands({Indent:()=>{cn(e)},Outdent:()=>{Dn(e)}}),e.editorCommands.addCommands({Outdent:()=>Re(e)},"state")},pG=e=>{const n=(s,a,l)=>{if(e.mode.isReadOnly())return;const f=ue(l)?{href:l}:l,v=e.dom.getParent(e.selection.getNode(),"a");ve(f)&&ue(f.href)&&(f.href=f.href.replace(/ /g,"%20"),(!v||!f.href)&&e.formatter.remove("link"),f.href&&e.formatter.apply("link",f,v))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const s=e.dom.getParent(e.selection.getStart(),"a");s&&e.dom.remove(s,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},hG=(e,n,s,a)=>{const l=e.dom,f=k=>l.isBlock(k)&&k.parentElement===s,v=f(n)?n:l.getParent(a,f,s);return Y.from(v).map(je.fromDom)},S7=(e,n)=>{if(e.mode.isReadOnly())return;const s=e.dom,a=e.selection.getRng(),l=n?e.selection.getStart():e.selection.getEnd(),f=n?a.startContainer:a.endContainer,v=oB(s,f);if(!v||!v.isContentEditable)return;const k=n?Ji:Xu,O=Pl(e);hG(e,l,v,f).each(F=>{const Z=WU(e,f,F.dom,v,!1,O);k(F,je.fromDom(Z)),e.selection.setCursorLocation(Z,0),e.dispatch("NewBlock",{newBlock:Z}),nB(e,"insertParagraph")})},bG=e=>S7(e,!0),vG=e=>S7(e,!1),yG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{bG(e)},InsertNewBlockAfter:()=>{vG(e)}})},xG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{rB(oz,e)},mceInsertNewLine:(n,s,a)=>{dz(e,a)},InsertLineBreak:(n,s,a)=>{rB(iz,e)}})},k7=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,s,a)=>{let l=0;e.dom.getParent(e.selection.getNode(),f=>so(f)&&l++===a?(e.selection.select(f),!1):!0,e.getBody())},mceSelectNode:(n,s,a)=>{e.selection.select(a)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),dn);if(n){const s=e.dom.createRng();s.selectNodeContents(n),e.selection.setRng(s)}}})},wG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,s,a)=>{const l=a??e.selection.getNode();if(l!==e.getBody()){const f=e.selection.getBookmark();e.dom.remove(l,!0),e.selection.moveToBookmark(f)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,s,a)=>{Ca(e,a===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},CG=e=>{eG(e),Dq(e),R6(e),k7(e),tG(e),pG(e),fG(e),yG(e),xG(e),gG(e),wG(e)},Zu=["toggleview"],rV=e=>ce(Zu,e.toLowerCase());class aV{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,s=!1,a,l){const f=this.editor,v=n.toLowerCase(),k=l==null?void 0:l.skip_focus;if(f.removed||(v!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(v)&&!k?f.focus():qg(f)),f.dispatch("BeforeExecCommand",{command:n,ui:s,value:a}).isDefaultPrevented()))return!1;const F=this.commands.exec[v];return Be(F)?(F(v,s,a),f.dispatch("ExecCommand",{command:n,ui:s,value:a}),!0):!1}queryCommandState(n){if(!rV(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=n.toLowerCase(),a=this.commands.state[s];return Be(a)?a(s):!1}queryCommandValue(n){if(!rV(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=n.toLowerCase(),a=this.commands.value[s];return Be(a)?a(s):""}addCommands(n,s="exec"){const a=this.commands;vn(n,(l,f)=>{oe(f.toLowerCase().split(","),v=>{a[s][v]=l})})}addCommand(n,s,a){const l=n.toLowerCase();this.commands.exec[l]=(f,v,k)=>s.call(a??this.editor,v,k)}queryCommandSupported(n){const s=n.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(n,s,a){this.commands.state[n.toLowerCase()]=()=>s.call(a??this.editor)}addQueryValueHandler(n,s,a){this.commands.value[n.toLowerCase()]=()=>s.call(a??this.editor)}}const T7=bn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class M6{static isNative(n){return!!T7[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||$e}fire(n,s){return this.dispatch(n,s)}dispatch(n,s){const a=n.toLowerCase(),l=K0(a,s??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(l);const f=this.bindings[a];if(f)for(let v=0,k=f.length;v<k;v++){const O=f[v];if(!O.removed){if(O.once&&this.off(a,O.func),l.isImmediatePropagationStopped())return l;if(O.func.call(this.scope,l)===!1)return l.preventDefault(),l}}return l}on(n,s,a,l){if(s===!1&&(s=$e),s){const f={func:s,removed:!1};l&&bn.extend(f,l);const v=n.toLowerCase().split(" ");let k=v.length;for(;k--;){const O=v[k];let F=this.bindings[O];F||(F=[],this.toggleEvent(O,!0)),a?F=[f,...F]:F=[...F,f],this.bindings[O]=F}}return this}off(n,s){if(n){const a=n.toLowerCase().split(" ");let l=a.length;for(;l--;){const f=a[l];let v=this.bindings[f];if(!f)return vn(this.bindings,(k,O)=>{this.toggleEvent(O,!1),delete this.bindings[O]}),this;if(v){if(!s)v.length=0;else{const k=At(v,O=>O.func===s);v=k.fail,this.bindings[f]=v,oe(k.pass,O=>{O.removed=!0})}v.length||(this.toggleEvent(n,!1),delete this.bindings[f])}}}else vn(this.bindings,(a,l)=>{this.toggleEvent(l,!1)}),this.bindings={};return this}once(n,s,a){return this.on(n,s,a,{once:!0})}has(n){n=n.toLowerCase();const s=this.bindings[n];return!(!s||s.length===0)}}const q_=e=>(e._eventDispatcher||(e._eventDispatcher=new M6({scope:e,toggleEvent:(n,s)=>{M6.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,s)}})),e._eventDispatcher),E7={fire(e,n,s){return this.dispatch(e,n,s)},dispatch(e,n,s){const a=this;if(a.removed&&e!=="remove"&&e!=="detach")return K0(e.toLowerCase(),n??{},a);const l=q_(a).dispatch(e,n);if(s!==!1&&a.parent){let f=a.parent();for(;f&&!l.isPropagationStopped();)f.dispatch(e,l,!1),f=f.parent?f.parent():void 0}return l},on(e,n,s){return q_(this).on(e,n,s)},off(e,n){return q_(this).off(e,n)},once(e,n){return q_(this).once(e,n)},hasEventListeners(e){return q_(this).has(e)}},N6=qs.DOM;let K_;const B6=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const s=O1(e);return s?(e.eventRoot||(e.eventRoot=N6.select(s)[0]),e.eventRoot):e.getBody()},SG=e=>!e.hidden&&!S0(e),iV=(e,n,s)=>{SG(e)?e.dispatch(n,s):S0(e)&&fL(e,s)},cV=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const s=B6(e,n);if(O1(e)){if(K_||(K_={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||K_&&(vn(K_,(l,f)=>{e.dom.unbind(B6(e,f))}),K_=null)})),K_[n])return;const a=l=>{const f=l.target,v=e.editorManager.get();let k=v.length;for(;k--;){const O=v[k].getBody();(O===f||N6.isChildOf(f,O))&&iV(v[k],n,l)}};K_[n]=a,N6.bind(s,n,a)}else{const a=l=>{iV(e,n,l)};N6.bind(s,n,a),e.delegates[n]=a}},lV={...E7,bindPendingEventDelegates(){const e=this;bn.each(e._pendingNativeEvents,n=>{cV(e,n)})},toggleNativeEvent(e,n){const s=this;e==="focus"||e==="blur"||s.removed||(n?s.initialized?cV(s,e):s._pendingNativeEvents?s._pendingNativeEvents.push(e):s._pendingNativeEvents=[e]:s.initialized&&s.delegates&&(s.dom.unbind(B6(s,e),e,s.delegates[e]),delete s.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),s=e.dom;e.delegates&&(vn(e.delegates,(a,l)=>{e.dom.unbind(B6(e,l),l,a)}),delete e.delegates),!e.inline&&n&&s&&(n.onload=null,s.unbind(e.getWin()),s.unbind(e.getDoc())),s&&(s.unbind(n),s.unbind(e.getContainer()))}},Y4=e=>ue(e)?{value:e.split(/[ ,]/),valid:!0}:$t(e,ue)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},I0=e=>{const n=(()=>{switch(e){case"array":return qt;case"boolean":return rn;case"function":return Be;case"number":return z;case"object":return ve;case"string":return ue;case"string[]":return Y4;case"object[]":return s=>$t(s,ve);case"regexp":return s=>at(s,RegExp);default:return pt}})();return s=>_7(s,n,`The value must be a ${e}.`)},kG=e=>ue(e.processor),uV=(e,n)=>{const s=er(n.message)?"":`. ${n.message}`;return e+s},dV=e=>e.valid,_7=(e,n,s="")=>{const a=n(e);return rn(a)?a?{value:e,valid:!0}:{valid:!1,message:s}:a},TG=(e,n,s)=>{if(!oo(n)){const a=_7(n,s);if(dV(a))return a.value;console.error(uV(`Invalid default value passed for the "${e}" option`,a))}},EG=(e,n,s=n)=>{const a={},l={},f=(de,Te,be)=>{const Me=_7(Te,be);return dV(Me)?(l[de]=Me.value,!0):(console.warn(uV(`Invalid value passed for the ${de} option`,Me)),!1)},v=(de,Te)=>{const be=kG(Te)?I0(Te.processor):Te.processor,Me=TG(de,Te.default,be);a[de]={...Te,default:Me,processor:be},kr(l,de).orThunk(()=>kr(n,de)).each(gt=>f(de,gt,be))},k=de=>Lo(a,de);return{register:v,isRegistered:k,get:de=>kr(l,de).orThunk(()=>kr(a,de).map(Te=>Te.default)).getOrUndefined(),set:(de,Te)=>{if(k(de)){const be=a[de];return be.immutable?(console.error(`"${de}" is an immutable option and cannot be updated`),!1):f(de,Te,be.processor)}else return console.warn(`"${de}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:de=>{const Te=k(de);return Te&&delete l[de],Te},isSet:de=>Lo(l,de),debug:()=>{try{console.log(JSON.parse(JSON.stringify(s,(de,Te)=>rn(Te)||z(Te)||ue(Te)||re(Te)||qt(Te)||In(Te)?Te:Object.prototype.toString.call(Te))))}catch(de){console.error(de)}}}},_G=(e,n)=>{e.dom.contentEditable="true"},AG=(e,n)=>{const s=je.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&_G(s),LM(e)):(e.readonly=!1,$M(e))},pB=e=>e.readonly,Iq=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{pB(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&pB(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&pB(e)){const s=e.undoManager.add();Qe(s)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(pB(e)){const n=e.undoManager.add();Qe(n)&&e.undoManager.undo()}})},OG=["design","readonly"],mV=(e,n,s,a)=>{const l=s[n.get()],f=s[a];try{f.activate()}catch(v){console.error(`problem while activating editor mode ${a}:`,v);return}l.deactivate(),l.editorReadOnly!==f.editorReadOnly&&AG(e,f.editorReadOnly),n.set(a),o2(e,a)},DG=(e,n,s,a)=>{if(!(a===s.get()||e.initialized&&S0(e))){if(!Lo(n,a))throw new Error(`Editor mode '${a}' is invalid`);e.initialized?mV(e,s,n,a):e.on("init",()=>mV(e,s,n,a))}},RG=(e,n,s)=>{if(ce(OG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...s,deactivate:()=>{try{s.deactivate()}catch(a){console.error(`problem while deactivating editor mode ${n}:`,a)}}}}},MG=e=>{const n=fa("design"),s=fa({design:{activate:Kt,deactivate:Kt,editorReadOnly:!1},readonly:{activate:Kt,deactivate:Kt,editorReadOnly:!0}});return Iq(e),pL(e),{isReadOnly:()=>pB(e),set:a=>DG(e,s.get(),n,a),get:()=>n.get(),register:(a,l)=>{s.set(RG(s.get(),a,l))}}},A7=bn.each,O7=bn.explode,NG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},gV=bn.makeMap("alt,ctrl,shift,meta,access"),BG=e=>e in gV,IG=e=>{const n={},s=ms.os.isMacOS()||ms.os.isiOS();A7(O7(e.toLowerCase(),"+"),f=>{BG(f)?n[f]=!0:/^[0-9]{2,}$/.test(f)?n.keyCode=parseInt(f,10):(n.charCode=f.charCodeAt(0),n.keyCode=NG[f]||f.toUpperCase().charCodeAt(0))});const a=[n.keyCode];let l;for(l in gV)n[l]?a.push(l):n[l]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class fV{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const s=this;n.on("keyup keypress keydown",a=>{(s.hasModifier(a)||s.isFunctionKey(a))&&!a.isDefaultPrevented()&&(A7(s.shortcuts,l=>{s.matchShortcut(a,l)&&(s.pendingPatterns=l.subpatterns.slice(0),a.type==="keydown"&&s.executeShortcutAction(l))}),s.matchShortcut(a,s.pendingPatterns[0])&&(s.pendingPatterns.length===1&&a.type==="keydown"&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(n,s,a,l){const f=this,v=f.normalizeCommandFunc(a);return A7(O7(bn.trim(n)),k=>{const O=f.createShortcut(k,s,v,l);f.shortcuts[O.id]=O}),!0}remove(n){const s=this.createShortcut(n);return this.shortcuts[s.id]?(delete this.shortcuts[s.id],!0):!1}normalizeCommandFunc(n){const s=this,a=n;return typeof a=="string"?()=>{s.editor.execCommand(a,!1,null)}:bn.isArray(a)?()=>{s.editor.execCommand(a[0],a[1],a[2])}:a}createShortcut(n,s,a,l){const f=bn.map(O7(n,">"),IG);return f[f.length-1]=bn.extend(f[f.length-1],{func:a,scope:l||this.editor}),bn.extend(f[0],{desc:this.editor.translate(s),subpatterns:f.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,s){return!s||s.ctrl!==n.ctrlKey||s.meta!==n.metaKey||s.alt!==n.altKey||s.shift!==n.shiftKey?!1:n.keyCode===s.keyCode||n.charCode&&n.charCode===s.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const FG=()=>{const e={},n={},s={},a={},l={},f={},v={},k={},O={},F=(de,Te)=>(be,Me)=>{de[be.toLowerCase()]={...Me,type:Te}},Z=(de,Te)=>(be,Me)=>{de[be.toLowerCase()]={type:Te,...Me}},K=(de,Te)=>a[de.toLowerCase()]=Te,J=(de,Te)=>v[de.toLowerCase()]=Te;return{addButton:F(e,"button"),addGroupToolbarButton:F(e,"grouptoolbarbutton"),addToggleButton:F(e,"togglebutton"),addMenuButton:F(e,"menubutton"),addSplitButton:F(e,"splitbutton"),addMenuItem:F(n,"menuitem"),addNestedMenuItem:F(n,"nestedmenuitem"),addToggleMenuItem:F(n,"togglemenuitem"),addAutocompleter:F(s,"autocompleter"),addContextMenu:F(l,"contextmenu"),addContextToolbar:F(f,"contexttoolbar"),addContextForm:Z(f,"contextform"),addSidebar:F(k,"sidebar"),addView:F(O,"views"),addIcon:K,addContext:J,getAll:()=>({buttons:e,menuItems:n,icons:a,popups:s,contextMenus:l,contextToolbars:f,sidebars:k,views:O,contexts:v})}},PG=()=>{const e=FG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Y_=qs.DOM,pV=bn.extend,LG=bn.each;class I6{constructor(n,s,a){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=a,this.documentBaseUrl=a.documentBaseURL,pV(this,lV);const l=this;this.id=n,this.hidden=!1;const f=XZ(a.defaultOptions,s);this.options=EG(l,f,s),Gm(l);const v=this.options.get;v("deprecation_warnings")&&c5(s,f);const k=v("suffix");k&&(a.suffix=k),this.suffix=a.suffix;const O=v("base_url");O&&a._setBaseUrl(O),this.baseUri=a.baseURI;const F=tw(l);F&&(Sd.ScriptLoader._setReferrerPolicy(F),qs.DOM.styleSheetLoader._setReferrerPolicy(F));const Z=h2(l);Qe(Z)&&qs.DOM.styleSheetLoader._setContentCssCors(Z),Lu.languageLoad=v("language_load"),Lu.baseURL=a.baseURL,this.setDirty(!1),this.documentBaseURI=new Wu(_A(l),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=by(l),this.hasVisual=b2(l),this.shortcuts=new fV(this),this.editorCommands=new aV(this),CG(this);const K=v("cache_suffix");K&&(ms.cacheSuffix=K.replace(/^[\?\&]+/,"")),this.ui={registry:PG(),styleSheetLoader:void 0,show:Kt,hide:Kt,setEnabled:Kt,isEnabled:pt},this.mode=MG(l),a.dispatch("SetupEditor",{editor:this});const J=vh(l);Be(J)&&J.call(l,l)}render(){h7(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return hc(this)}translate(n){return Ig.translate(n)}getParam(n,s,a){const l=this.options;return l.isRegistered(n)||(Qe(a)?l.register(n,{processor:a,default:s}):l.register(n,{processor:pt,default:s})),!l.isSet(n)&&!oo(s)?s:l.get(n)}hasPlugin(n,s){return ce(sw(this),n)?s?ek.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,s,a){this.editorCommands.addCommand(n,s,a)}addQueryStateHandler(n,s,a){this.editorCommands.addQueryStateHandler(n,s,a)}addQueryValueHandler(n,s,a){this.editorCommands.addQueryValueHandler(n,s,a)}addShortcut(n,s,a,l){this.shortcuts.add(n,s,a,l)}execCommand(n,s,a,l){return this.editorCommands.execCommand(n,s,a,l)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Y_.show(n.getContainer()),Y_.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Y_.hide(n.getContainer()),Y_.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,s){this.dispatch("ProgressState",{state:n,time:s})}load(n={}){const s=this,a=s.getElement();if(s.removed)return"";if(a){const l={...n,load:!0},f=Li(a)?a.value:a.innerHTML,v=s.setContent(f,l);return l.no_events||s.dispatch("LoadContent",{...l,element:a}),v}else return""}save(n={}){const s=this;let a=s.getElement();if(!a||!s.initialized||s.removed)return"";const l={...n,save:!0,element:a};let f=s.getContent(l);const v={...l,content:f};if(v.no_events||s.dispatch("SaveContent",v),v.format==="raw"&&s.dispatch("RawSaveContent",v),f=v.content,Li(a))a.value=f;else{(n.is_removing||!s.inline)&&(a.innerHTML=f);const k=Y_.getParent(s.id,"form");k&&LG(k.elements,O=>O.name===s.id?(O.value=f,!1):!0)}return v.element=l.element=a=null,v.set_dirty!==!1&&s.setDirty(!1),f}setContent(n,s){return C0(this,n,s)}getContent(n){return CM(this,n)}insertContent(n,s){s&&(n=pV({content:n},s)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?C0(this,this.startContent,{format:"raw"}):C0(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const s=!this.isNotDirty;this.isNotDirty=!n,n&&n!==s&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Y_.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Y_.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const s=n.iframeElement;s&&(n.contentWindow=s.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const s=n.getWin();s&&(n.contentDocument=s.document)}return n.contentDocument}getBody(){var n,s;const a=this.getDoc();return(s=(n=this.bodyElement)!==null&&n!==void 0?n:a==null?void 0:a.body)!==null&&s!==void 0?s:null}convertURL(n,s,a){const l=this,f=l.options.get,v=xb(l);if(Be(v))return v.call(l,n,a,!0,s);if(!f("convert_urls")||a==="link"||ve(a)&&a.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const k=new Wu(n);return k.protocol!=="http"&&k.protocol!=="https"&&k.protocol!==""?n:f("relative_urls")?l.documentBaseURI.toRelative(n):(n=l.documentBaseURI.toAbsolute(n,f("remove_script_host")),n)}addVisual(n){eV(this,n)}setEditableRoot(n){WZ(this,n)}hasEditableRoot(){return jZ(this)}remove(){d5(this)}destroy(n){Kf(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const X4=qs.DOM,F6=bn.each;let hV=!1,P6,ep=[];const hB=e=>{const n=e.type;F6(Dk.get(),s=>{switch(n){case"scroll":s.dispatch("ScrollWindow",e);break;case"resize":s.dispatch("ResizeWindow",e);break}})},bV=e=>{if(e!==hV){const n=qs.DOM;e?(n.bind(window,"resize",hB),n.bind(window,"scroll",hB)):(n.unbind(window,"resize",hB),n.unbind(window,"scroll",hB)),hV=e}},vV=e=>{const n=ep;return ep=dt(ep,s=>e!==s),Dk.activeEditor===e&&(Dk.activeEditor=ep.length>0?ep[0]:null),Dk.focusedEditor===e&&(Dk.focusedEditor=null),n.length!==ep.length},$G=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(vV(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},HG=document.compatMode!=="CSS1Compat",Dk={...E7,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.0",releaseDate:"2024-12-11",i18n:Ig,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",s="",a=Wu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));const l=window.tinymce||window.tinyMCEPreInit;if(l)n=l.base||l.baseURL,s=l.suffix;else{const f=document.getElementsByTagName("script");for(let v=0;v<f.length;v++){const k=f[v].src||"";if(k==="")continue;const O=k.substring(k.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(k)){O.indexOf(".min")!==-1&&(s=".min"),n=k.substring(0,k.lastIndexOf("/"));break}}if(!n&&document.currentScript){const v=document.currentScript.src;v.indexOf(".min")!==-1&&(s=".min"),n=v.substring(0,v.lastIndexOf("/"))}}e.baseURL=new Wu(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new Wu(e.baseURL),e.suffix=s,Qn(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const s=e.suffix;s&&(this.suffix=s),this.defaultOptions=e;const a=e.plugin_base_urls;a!==void 0&&vn(a,(l,f)=>{Lu.PluginManager.urls[f]=l})},init(e){const n=this;let s;const a=bn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),l=(Z,K)=>Z.inline&&K.tagName.toLowerCase()in a,f=Z=>{let K=Z.id;return K||(K=kr(Z,"name").filter(J=>!X4.get(J)).getOrThunk(X4.uniqueId),Z.setAttribute("id",K)),K},v=Z=>{const K=e[Z];if(K)return K.apply(n,[])},k=Z=>ms.browser.isIE()||ms.browser.isEdge()?(hC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):HG?(hC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ue(Z.selector)?X4.select(Z.selector):Qe(Z.target)?[Z.target]:[];let O=Z=>{s=Z};const F=()=>{let Z=0;const K=[];let J;const de=(Te,be,Me)=>{const Xe=new I6(Te,be,n);K.push(Xe),Xe.on("init",()=>{++Z===J.length&&O(K)}),Xe.targetElm=Xe.targetElm||Me,Xe.render()};X4.unbind(window,"ready",F),v("onpageload"),J=ma(k(e)),bn.each(J,Te=>{$G(n.get(Te.id))}),J=bn.grep(J,Te=>!n.get(Te.id)),J.length===0?O([]):F6(J,Te=>{l(e,Te)?hC("Could not initialize inline editor on invalid inline target element",Te):de(f(Te),e,Te)})};return X4.bind(window,"ready",F),new Promise(Z=>{s?Z(s):O=K=>{Z(K)}})},get(e){return arguments.length===0?ep.slice(0):ue(e)?hn(ep,n=>n.id===e).getOr(null):z(e)&&ep[e]?ep[e]:null},add(e){const n=this,s=n.get(e.id);return s===e||(s===null&&ep.push(e),bV(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),P6||(P6=a=>{const l=n.dispatch("BeforeUnload");if(l.returnValue)return a.preventDefault(),a.returnValue=l.returnValue,l.returnValue},window.addEventListener("beforeunload",P6))),e},createEditor(e,n){return this.add(new I6(e,n,this))},remove(e){const n=this;let s;if(!e){for(let a=ep.length-1;a>=0;a--)n.remove(ep[a]);return}if(ue(e)){F6(X4.select(e),a=>{s=n.get(a.id),s&&n.remove(s)});return}return s=e,re(n.get(s.id))?null:(vV(s)&&n.dispatch("RemoveEditor",{editor:s}),ep.length===0&&window.removeEventListener("beforeunload",P6),s.remove(),bV(ep.length>0),s)},execCommand(e,n,s){var a;const l=this,f=ve(s)?(a=s.id)!==null&&a!==void 0?a:s.index:s;switch(e){case"mceAddEditor":{if(!l.get(f)){const v=s.options;new I6(f,v,l).render()}return!0}case"mceRemoveEditor":{const v=l.get(f);return v&&v.remove(),!0}case"mceToggleEditor":{const v=l.get(f);return v?(v.isHidden()?v.show():v.hide(),!0):(l.execCommand("mceAddEditor",!1,s),!0)}}return l.activeEditor?l.activeEditor.execCommand(e,n,s):!1},triggerSave:()=>{F6(ep,e=>{e.save()})},addI18n:(e,n)=>{Ig.add(e,n)},translate:e=>Ig.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Wu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Wu(this.baseURL)}};Dk.setup();const zG=(()=>{const e=Kl(),n=f=>({items:f,types:ns(f),getType:v=>kr(f,v).getOrUndefined()}),s=f=>{e.set(f)},a=()=>e.get().getOrUndefined(),l=e.clear;return{FakeClipboardItem:n,write:s,read:a,clear:l}})(),yV=Math.min,X_=Math.max,L6=Math.round,xV=(e,n,s)=>{let a=n.x,l=n.y;const f=e.w,v=e.h,k=n.w,O=n.h,F=(s||"").split("");return F[0]==="b"&&(l+=O),F[1]==="r"&&(a+=k),F[0]==="c"&&(l+=L6(O/2)),F[1]==="c"&&(a+=L6(k/2)),F[3]==="b"&&(l-=v),F[4]==="r"&&(a-=f),F[3]==="c"&&(l-=L6(v/2)),F[4]==="c"&&(a-=L6(f/2)),J4(a,l,f,v)},VG=(e,n,s,a)=>{for(let l=0;l<a.length;l++){const f=xV(e,n,a[l]);if(f.x>=s.x&&f.x+f.w<=s.w+s.x&&f.y>=s.y&&f.y+f.h<=s.h+s.y)return a[l]}return null},UG=(e,n,s)=>J4(e.x-n,e.y-s,e.w+n*2,e.h+s*2),WG=(e,n)=>{const s=X_(e.x,n.x),a=X_(e.y,n.y),l=yV(e.x+e.w,n.x+n.w),f=yV(e.y+e.h,n.y+n.h);return l-s<0||f-a<0?null:J4(s,a,l-s,f-a)},jG=(e,n,s)=>{let a=e.x,l=e.y,f=e.x+e.w,v=e.y+e.h;const k=n.x+n.w,O=n.y+n.h,F=X_(0,n.x-a),Z=X_(0,n.y-l),K=X_(0,f-k),J=X_(0,v-O);return a+=F,l+=Z,s&&(f+=F,v+=Z,a-=K,l-=J),f-=K,v-=J,J4(a,l,f-a,v-l)},J4=(e,n,s,a)=>({x:e,y:n,w:s,h:a}),wV={inflate:UG,relativePosition:xV,findBestRelativePosition:VG,intersect:WG,clamp:jG,create:J4,fromClientRect:e=>J4(e.left,e.top,e.width,e.height)},Lq=(e,n,s=1e3)=>{let a=!1,l=null;const f=F=>(...Z)=>{a||(a=!0,l!==null&&(clearTimeout(l),l=null),F.apply(null,Z))},v=f(e),k=f(n);return{start:(...F)=>{!a&&l===null&&(l=setTimeout(()=>k.apply(null,F),s))},resolve:v,reject:k}},GG=(()=>{const e={},n={},s={};return{load:(O,F)=>{const Z=`Script at URL "${F}" failed to load`,K=`Script at URL "${F}" did not call \`tinymce.Resource.add('${O}', data)\` within 1 second`;if(e[O]!==void 0)return e[O];{const J=new Promise((de,Te)=>{const be=Lq(de,Te);n[O]=be.resolve,Sd.ScriptLoader.loadScript(F).then(()=>be.start(K),()=>be.reject(Z))});return e[O]=J,J}},add:(O,F)=>{n[O]!==void 0&&(n[O](F),delete n[O]),e[O]=Promise.resolve(F),s[O]=F},has:O=>O in s,get:O=>s[O],unload:O=>{delete e[O],delete s[O]}}})(),CV=()=>(()=>{let e={},n=[];const s={getItem:a=>{const l=e[a];return l||null},setItem:(a,l)=>{n.push(a),e[a]=String(l)},key:a=>n[a],removeItem:a=>{n=n.filter(l=>l===a),delete e[a]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})();let bB;try{const e="__storage_test__";bB=window.localStorage,bB.setItem(e,e),bB.removeItem(e)}catch{bB=CV()}var qG=bB;const KG={geom:{Rect:wV},util:{Delay:Wo,Tools:bn,VK:eo,URI:Wu,EventDispatcher:M6,Observable:E7,I18n:Ig,LocalStorage:qG,ImageUploader:jM},dom:{EventUtils:ih,TreeWalker:ru,TextSeeker:v1,DOMUtils:qs,ScriptLoader:Sd,RangeUtils:Kd,Serializer:xM,StyleSheetLoader:$r,ControlSelection:u0,BookmarkManager:id,Selection:j3,Event:ih.Event},html:{Styles:u1,Entities:ah,Node:xm,Schema:ya,DomParser:zS,Writer:ZD,Serializer:Gy},Env:ms,AddOnManager:Lu,Annotator:ii,Formatter:_0,UndoManager:k5,EditorCommands:aV,WindowManager:J3,NotificationManager:f5,EditorObservable:lV,Shortcuts:fV,Editor:I6,FocusManager:dO,EditorManager:Dk,DOM:qs.DOM,ScriptLoader:Sd.ScriptLoader,PluginManager:ek,ThemeManager:Ph,ModelManager:QS,IconManager:fx,Resource:GG,FakeClipboard:zG,trim:bn.trim,isArray:bn.isArray,is:bn.is,toArray:bn.toArray,makeMap:bn.makeMap,each:bn.each,map:bn.map,grep:bn.grep,inArray:bn.inArray,extend:bn.extend,walk:bn.walk,resolve:bn.resolve,explode:bn.explode,_addCacheSuffix:bn._addCacheSuffix},SV=bn.extend(Dk,KG),YG=e=>{try{$n.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(SV),YG(SV)})()})(hK);var qK=hK.exports;const KK=OK(qK);(function(){var $n=tinymce.util.Tools.resolve("tinymce.ModelManager");const Xo=(m,h,C)=>{var _;return C(m,h.prototype)?!0:((_=m.constructor)===null||_===void 0?void 0:_.name)===h.name},mo=m=>{const h=typeof m;return m===null?"null":h==="object"&&Array.isArray(m)?"array":h==="object"&&Xo(m,String,(C,_)=>_.isPrototypeOf(C))?"string":h},vo=m=>h=>mo(h)===m,ko=m=>h=>typeof h===m,wn=m=>h=>m===h,no=vo("string"),Tt=vo("object"),Fn=vo("array"),To=wn(null),ss=ko("boolean"),st=wn(void 0),es=m=>m==null,Vn=m=>!es(m),kn=ko("function"),zn=ko("number"),Vt=()=>{},Ue=(m,h)=>(...C)=>m(h.apply(null,C)),at=(m,h)=>C=>m(h(C)),ue=m=>()=>m,ve=m=>m,In=(m,h)=>m===h;function qt(m,...h){return(...C)=>{const _=h.concat(C);return m.apply(null,_)}}const re=m=>h=>!m(h),rn=m=>()=>{throw new Error(m)},oo=m=>m(),qn=ue(!1),Qe=ue(!0);class Be{constructor(h,C){this.tag=h,this.value=C}static some(h){return new Be(!0,h)}static none(){return Be.singletonNone}fold(h,C){return this.tag?C(this.value):h()}isSome(){return this.tag}isNone(){return!this.tag}map(h){return this.tag?Be.some(h(this.value)):Be.none()}bind(h){return this.tag?h(this.value):Be.none()}exists(h){return this.tag&&h(this.value)}forall(h){return!this.tag||h(this.value)}filter(h){return!this.tag||h(this.value)?this:Be.none()}getOr(h){return this.tag?this.value:h}or(h){return this.tag?this:h}getOrThunk(h){return this.tag?this.value:h()}orThunk(h){return this.tag?this:h()}getOrDie(h){if(this.tag)return this.value;throw new Error(h??"Called getOrDie on None")}static from(h){return Vn(h)?Be.some(h):Be.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(h){this.tag&&h(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Be.singletonNone=new Be(!1);const z=Array.prototype.slice,$t=Array.prototype.indexOf,Kt=Array.prototype.push,B=(m,h)=>$t.call(m,h),Jt=(m,h)=>B(m,h)>-1,Le=(m,h)=>{for(let C=0,_=m.length;C<_;C++){const L=m[C];if(h(L,C))return!0}return!1},Qt=(m,h)=>{const C=[];for(let _=0;_<m;_++)C.push(h(_));return C},mn=(m,h)=>{const C=m.length,_=new Array(C);for(let L=0;L<C;L++){const U=m[L];_[L]=h(U,L)}return _},Se=(m,h)=>{for(let C=0,_=m.length;C<_;C++){const L=m[C];h(L,C)}},Oe=(m,h)=>{for(let C=m.length-1;C>=0;C--){const _=m[C];h(_,C)}},ft=(m,h)=>{const C=[],_=[];for(let L=0,U=m.length;L<U;L++){const ee=m[L];(h(ee,L)?C:_).push(ee)}return{pass:C,fail:_}},tt=(m,h)=>{const C=[];for(let _=0,L=m.length;_<L;_++){const U=m[_];h(U,_)&&C.push(U)}return C},Bt=(m,h,C)=>(Oe(m,(_,L)=>{C=h(C,_,L)}),C),$e=(m,h,C)=>(Se(m,(_,L)=>{C=h(C,_,L)}),C),pt=(m,h,C)=>{for(let _=0,L=m.length;_<L;_++){const U=m[_];if(h(U,_))return Be.some(U);if(C(U,_))break}return Be.none()},Y=(m,h)=>pt(m,h,qn),Jo=(m,h)=>{for(let C=0,_=m.length;C<_;C++){const L=m[C];if(h(L,C))return Be.some(C)}return Be.none()},Et=m=>{const h=[];for(let C=0,_=m.length;C<_;++C){if(!Fn(m[C]))throw new Error("Arr.flatten item "+C+" was not an array, input: "+m);Kt.apply(h,m[C])}return h},Mt=(m,h)=>Et(mn(m,h)),Pn=(m,h)=>{for(let C=0,_=m.length;C<_;++C){const L=m[C];if(h(L,C)!==!0)return!1}return!0},Nt=m=>{const h=z.call(m,0);return h.reverse(),h},ce=(m,h)=>{const C={};for(let _=0,L=m.length;_<L;_++){const U=m[_];C[String(U)]=h(U,_)}return C},De=(m,h)=>{const C=z.call(m,0);return C.sort(h),C},Ne=(m,h)=>h>=0&&h<m.length?Be.some(m[h]):Be.none(),oe=m=>Ne(m,0),ct=m=>Ne(m,m.length-1),At=(m,h)=>{for(let C=0;C<m.length;C++){const _=h(m[C],C);if(_.isSome())return _}return Be.none()},dt=Object.keys,An=Object.hasOwnProperty,it=(m,h)=>{const C=dt(m);for(let _=0,L=C.length;_<L;_++){const U=C[_],ee=m[U];h(ee,U)}},Dt=(m,h)=>hn(m,(C,_)=>({k:_,v:h(C,_)})),hn=(m,h)=>{const C={};return it(m,(_,L)=>{const U=h(_,L);C[U.k]=U.v}),C},Hn=m=>(h,C)=>{m[C]=h},ut=(m,h,C,_)=>{it(m,(L,U)=>{(h(L,U)?C:_)(L,U)})},ot=(m,h)=>{const C={};return ut(m,h,Hn(C),Vt),C},rt=(m,h)=>{const C=[];return it(m,(_,L)=>{C.push(h(_,L))}),C},nn=m=>rt(m,ve),Zo=(m,h)=>Co(m,h)?Be.from(m[h]):Be.none(),Co=(m,h)=>An.call(m,h),Mn=(m,h)=>Co(m,h)&&m[h]!==void 0&&m[h]!==null,No=m=>{for(const h in m)if(An.call(m,h))return!1;return!0},Gt=typeof window<"u"?window:Function("return this;")(),yo=(m,h)=>{let C=h??Gt;for(let _=0;_<m.length&&C!==void 0&&C!==null;++_)C=C[m[_]];return C},gr=(m,h)=>{const C=m.split(".");return yo(C,h)},Us=(m,h)=>gr(m,h),ma=(m,h)=>{const C=Us(m,h);if(C==null)throw new Error(m+" not available on this browser");return C},ns=Object.getPrototypeOf,Pa=m=>ma("HTMLElement",m),vn=m=>{const h=gr("ownerDocument.defaultView",m);return Tt(m)&&(Pa(h).prototype.isPrototypeOf(m)||/^HTML\w*Element$/.test(ns(m).constructor.name))},Ls=8,Ba=9,Dr=11,Gi=1,hi=3,Er=m=>m.dom.nodeName.toLowerCase(),bi=m=>m.dom.nodeType,Bi=m=>h=>bi(h)===m,kr=m=>bi(m)===Ls||Er(m)==="#comment",Lo=m=>Aa(m)&&vn(m.dom),Aa=Bi(Gi),vi=Bi(hi),nu=Bi(Ba),yt=Bi(Dr),Xr=m=>h=>Aa(h)&&Er(h)===m,Oa=(m,h,C)=>{if(no(C)||ss(C)||zn(C))m.setAttribute(h,C+"");else throw console.error("Invalid call to Attribute.set. Key ",h,":: Value ",C,":: Element ",m),new Error("Attribute value was not simple")},Ia=(m,h,C)=>{Oa(m.dom,h,C)},Mc=(m,h)=>{const C=m.dom;it(h,(_,L)=>{Oa(C,L,_)})},ac=(m,h)=>{it(h,(C,_)=>{C.fold(()=>{Pe(m,_)},L=>{Oa(m.dom,_,L)})})},Ga=(m,h)=>{const C=m.dom.getAttribute(h);return C===null?void 0:C},Ve=(m,h)=>Be.from(Ga(m,h)),Pe=(m,h)=>{m.dom.removeAttribute(h)},Rt=m=>$e(m.dom.attributes,(h,C)=>(h[C.name]=C.value,h),{}),Ht=(m,h)=>{const _=(h||document).createElement("div");if(_.innerHTML=m,!_.hasChildNodes()||_.childNodes.length>1){const L="HTML does not have a single root node";throw console.error(L,m),new Error(L)}return Fs(_.childNodes[0])},Qo=(m,h)=>{const _=(h||document).createElement(m);return Fs(_)},vs=(m,h)=>{const _=(h||document).createTextNode(m);return Fs(_)},Fs=m=>{if(m==null)throw new Error("Node cannot be null or undefined");return{dom:m}},fn={fromHtml:Ht,fromTag:Qo,fromText:vs,fromDom:Fs,fromPoint:(m,h,C)=>Be.from(m.dom.elementFromPoint(h,C)).map(Fs)},xt=(m,h)=>{const C=m.dom;if(C.nodeType!==Gi)return!1;{const _=C;if(_.matches!==void 0)return _.matches(h);if(_.msMatchesSelector!==void 0)return _.msMatchesSelector(h);if(_.webkitMatchesSelector!==void 0)return _.webkitMatchesSelector(h);if(_.mozMatchesSelector!==void 0)return _.mozMatchesSelector(h);throw new Error("Browser lacks native selectors")}},We=m=>m.nodeType!==Gi&&m.nodeType!==Ba&&m.nodeType!==Dr||m.childElementCount===0,Ge=(m,h)=>{const C=h===void 0?document:h.dom;return We(C)?[]:mn(C.querySelectorAll(m),fn.fromDom)},pn=(m,h)=>{const C=h===void 0?document:h.dom;return We(C)?Be.none():Be.from(C.querySelector(m)).map(fn.fromDom)},Tn=(m,h)=>m.dom===h.dom,Xn=(m,h)=>{const C=m.dom,_=h.dom;return C===_?!1:C.contains(_)},xo=xt,Eo=m=>fn.fromDom(m.dom.ownerDocument),Bo=m=>nu(m)?m:Eo(m),Vo=m=>fn.fromDom(Bo(m).dom.documentElement),cs=m=>fn.fromDom(Bo(m).dom.defaultView),hr=m=>Be.from(m.dom.parentNode).map(fn.fromDom),Va=m=>Be.from(m.dom.parentElement).map(fn.fromDom),Ur=(m,h)=>{const C=kn(h)?h:qn;let _=m.dom;const L=[];for(;_.parentNode!==null&&_.parentNode!==void 0;){const U=_.parentNode,ee=fn.fromDom(U);if(L.push(ee),C(ee)===!0)break;_=U}return L},Al=m=>Be.from(m.dom.previousSibling).map(fn.fromDom),La=m=>Be.from(m.dom.nextSibling).map(fn.fromDom),Bs=m=>mn(m.dom.childNodes,fn.fromDom),er=(m,h)=>{const C=m.dom.childNodes;return Be.from(C[h]).map(fn.fromDom)},ar=m=>er(m,0),Ua=(m,h)=>{hr(m).each(_=>{_.dom.insertBefore(h.dom,m.dom)})},Ti=(m,h)=>{La(m).fold(()=>{hr(m).each(L=>{Ta(L,h)})},_=>{Ua(_,h)})},Wc=(m,h)=>{ar(m).fold(()=>{Ta(m,h)},_=>{m.dom.insertBefore(h.dom,_.dom)})},Ta=(m,h)=>{m.dom.appendChild(h.dom)},ws=(m,h,C)=>{er(m,C).fold(()=>{Ta(m,h)},_=>{Ua(_,h)})},yu=(m,h)=>{Ua(m,h),Ta(h,m)},Ei=(m,h)=>{Se(h,(C,_)=>{const L=_===0?m:h[_-1];Ti(L,C)})},Es=(m,h)=>{Se(h,C=>{Ta(m,C)})},xu=m=>{m.dom.textContent="",Se(Bs(m),h=>{Xs(h)})},Xs=m=>{const h=m.dom;h.parentNode!==null&&h.parentNode.removeChild(h)},hd=m=>{const h=Bs(m);h.length>0&&Ei(m,h),Xs(m)},Vl=(m,h)=>fn.fromDom(m.dom.cloneNode(h)),fs=m=>Vl(m,!1),li=m=>Vl(m,!0),Ld=(m,h)=>{const C=fn.fromTag(h),_=Rt(m);return Mc(C,_),C},Wa=(m,h)=>{const C=Ld(m,h),_=Bs(li(m));return Es(C,_),C},Dm=(m,h)=>{const C=Ld(m,h);Ti(m,C);const _=Bs(m);return Es(C,_),Xs(m),C},ui=["tfoot","thead","tbody","colgroup"],kg=m=>Jt(ui,m),qi=(m,h)=>({rows:m,columns:h}),or=(m,h)=>({row:m,column:h}),wu=(m,h,C)=>({element:m,rowspan:h,colspan:C}),Rm=(m,h,C,_)=>({element:m,rowspan:h,colspan:C,isNew:_}),Ku=(m,h,C,_,L,U)=>({element:m,rowspan:h,colspan:C,row:_,column:L,isLocked:U}),oi=(m,h,C)=>({element:m,cells:h,section:C}),qa=(m,h,C,_)=>({element:m,cells:h,section:C,isNew:_}),Ki=(m,h,C)=>({element:m,isNew:h,isLocked:C}),Wr=(m,h,C,_)=>({element:m,cells:h,section:C,isNew:_}),bd=(m,h,C,_)=>({startRow:m,startCol:h,finishRow:C,finishCol:_}),ol=(m,h,C)=>({element:m,colspan:h,column:C}),le=(m,h)=>({element:m,columns:h}),He=m=>yt(m)&&Vn(m.dom.host),Je=m=>fn.fromDom(m.dom.getRootNode()),Pt=m=>He(m)?m:fn.fromDom(Bo(m).dom.body),Nn=m=>{const h=Je(m);return He(h)?Be.some(h):Be.none()},ho=m=>fn.fromDom(m.dom.host),Kn=m=>{if(Vn(m.target)){const h=fn.fromDom(m.target);if(Aa(h)&&ms(h)&&m.composed&&m.composedPath){const C=m.composedPath();if(C)return oe(C)}}return Be.from(m.target)},ms=m=>Vn(m.dom.shadowRoot),Ds=m=>{const h=vi(m)?m.dom.parentNode:m.dom;if(h==null||h.ownerDocument===null)return!1;const C=h.ownerDocument;return Nn(fn.fromDom(h)).fold(()=>C.body.contains(h),at(Ds,ho))},br=()=>X(fn.fromDom(document)),X=m=>{const h=m.dom.body;if(h==null)throw new Error("Body is not available yet");return fn.fromDom(h)},fe=(m,h,C)=>tt(Ur(m,C),h),Ze=(m,h)=>tt(Bs(m),h),St=(m,h)=>{let C=[];return Se(Bs(m),_=>{h(_)&&(C=C.concat([_])),C=C.concat(St(_,h))}),C},Oo=(m,h,C)=>fe(m,_=>xt(_,h),C),Gn=(m,h)=>Ze(m,C=>xt(C,h)),jr=(m,h)=>Ge(h,m);var vc=(m,h,C,_,L)=>m(C,_)?Be.some(C):kn(L)&&L(C)?Be.none():h(C,_,L);const bn=(m,h,C)=>{let _=m.dom;const L=kn(C)?C:qn;for(;_.parentNode;){_=_.parentNode;const U=fn.fromDom(_);if(h(U))return Be.some(U);if(L(U))break}return Be.none()},fl=(m,h,C)=>vc((L,U)=>U(L),bn,m,h,C),ba=(m,h)=>{const C=L=>h(fn.fromDom(L));return Y(m.dom.childNodes,C).map(fn.fromDom)},$d=(m,h)=>{const C=_=>{for(let L=0;L<_.childNodes.length;L++){const U=fn.fromDom(_.childNodes[L]);if(h(U))return Be.some(U);const ee=C(_.childNodes[L]);if(ee.isSome())return ee}return Be.none()};return C(m.dom)},Ii=(m,h,C)=>bn(m,_=>xt(_,h),C),cr=(m,h)=>ba(m,C=>xt(C,h)),ou=(m,h)=>pn(h,m),Nc=(m,h,C)=>vc((L,U)=>xt(L,U),Ii,m,h,C),Ul=(m,h,C=In)=>m.exists(_=>C(_,h)),uc=m=>{const h=[],C=_=>{h.push(_)};for(let _=0;_<m.length;_++)m[_].each(C);return h},Mm=(m,h)=>m!=null?h(m):Be.none(),Xp=(m,h)=>m?Be.some(h):Be.none(),Qb=(m,h)=>m.substring(h),Ka=(m,h,C)=>h===""||m.length>=h.length&&m.substr(C,C+h.length)===h,Nm=(m,h)=>sl(m,h)?Qb(m,h.length):m,Ec=(m,h,C=0,_)=>{const L=m.indexOf(h,C);return L!==-1?st(_)?!0:L+h.length<=_:!1},sl=(m,h)=>Ka(m,h,0),ic=(m,h)=>Ka(m,h,m.length-h.length),we=(m=>h=>h.replace(m,""))(/^\s+|\s+$/g),_e=m=>m.length>0,wt=m=>{const h=parseFloat(m);return isNaN(h)?Be.none():Be.some(h)},un=m=>m.style!==void 0&&kn(m.style.getPropertyValue),Ko=(m,h,C)=>{if(!no(C))throw console.error("Invalid call to CSS.set. Property ",h,":: Value ",C,":: Element ",m),new Error("CSS value must be a string: "+C);un(m)&&m.style.setProperty(h,C)},Ks=(m,h)=>{un(m)&&m.style.removeProperty(h)},nr=(m,h,C)=>{const _=m.dom;Ko(_,h,C)},Da=(m,h)=>{const C=m.dom;it(h,(_,L)=>{Ko(C,L,_)})},si=(m,h)=>{const C=m.dom,L=window.getComputedStyle(C).getPropertyValue(h);return L===""&&!Ds(m)?Fi(C,h):L},Fi=(m,h)=>un(m)?m.style.getPropertyValue(h):"",Ol=(m,h)=>{const C=m.dom,_=Fi(C,h);return Be.from(_).filter(L=>L.length>0)},di=(m,h)=>{const C=m.dom;Ks(C,h),Ul(Ve(m,"style").map(we),"")&&Pe(m,"style")},Pi=(m,h)=>{const C=m.dom,_=h.dom;un(C)&&un(_)&&(_.style.cssText=C.style.cssText)},dc=(m,h,C=0)=>Ve(m,h).map(_=>parseInt(_,10)).getOr(C),pl=(m,h)=>dc(m,h,1),Yi=m=>Xr("col")(m)?dc(m,"span",1)>1:pl(m,"colspan")>1,Bc=m=>pl(m,"rowspan")>1,tr=(m,h)=>parseInt(si(m,h),10),_i=ue(10),Im=ue(10),Fm=(m,h)=>Ic(m,h,Qe),Ic=(m,h,C)=>Mt(Bs(m),_=>xt(_,h)?C(_)?[_]:[]:Ic(_,h,C)),Go=(m,h,C=qn)=>{if(C(h))return Be.none();if(Jt(m,Er(h)))return Be.some(h);const _=L=>xt(L,"table")||C(L);return Ii(h,m.join(","),_)},og=(m,h)=>Go(["td","th"],m,h),Hd=m=>Fm(m,"th,td"),Br=m=>xt(m,"colgroup")?Gn(m,"col"):Mt(Pm(m),h=>Gn(h,"col")),su=(m,h)=>Nc(m,"table",h),xv=m=>Fm(m,"tr"),Pm=m=>su(m).fold(ue([]),h=>Gn(h,"colgroup")),vr=(m,h)=>mn(m,C=>{if(Er(C)==="colgroup"){const _=mn(Br(C),L=>{const U=dc(L,"span",1);return wu(L,1,U)});return oi(C,_,"colgroup")}else{const _=mn(Hd(C),L=>{const U=dc(L,"rowspan",1),ee=dc(L,"colspan",1);return wu(L,U,ee)});return oi(C,_,h(C))}}),Wl=m=>hr(m).map(h=>{const C=Er(h);return kg(C)?C:"tbody"}).getOr("tbody"),Jp=m=>{const h=xv(m),_=[...Pm(m),...h];return vr(_,Wl)},Qp=(m,h)=>vr(m,()=>h),cf=m=>{let h=!1,C;return(..._)=>(h||(h=!0,C=m.apply(null,_)),C)},Lm=(m,h,C,_)=>{const L=m.isiOS()&&/ipad/i.test(C)===!0,U=m.isiOS()&&!L,ee=m.isiOS()||m.isAndroid(),me=ee||_("(pointer:coarse)"),Ee=L||!U&&ee&&_("(min-device-width:768px)"),Ke=U||ee&&!Ee,kt=h.isSafari()&&m.isiOS()&&/safari/i.test(C)===!1,Bn=!Ke&&!Ee&&!kt;return{isiPad:ue(L),isiPhone:ue(U),isTablet:ue(Ee),isPhone:ue(Ke),isTouch:ue(me),isAndroid:m.isAndroid,isiOS:m.isiOS,isWebView:ue(kt),isDesktop:ue(Bn)}},sg=(m,h)=>{for(let C=0;C<m.length;C++){const _=m[C];if(_.test(h))return _}},lf=(m,h)=>{const C=sg(m,h);if(!C)return{major:0,minor:0};const _=L=>Number(h.replace(C,"$"+L));return uf(_(1),_(2))},Kh=(m,h)=>{const C=String(h).toLowerCase();return m.length===0?je():lf(m,C)},je=()=>uf(0,0),uf=(m,h)=>({major:m,minor:h}),ga={nu:uf,detect:Kh,unknown:je},Tx=(m,h)=>At(h.brands,C=>{const _=C.brand.toLowerCase();return Y(m,L=>{var U;return _===((U=L.brand)===null||U===void 0?void 0:U.toLowerCase())}).map(L=>({current:L.name,version:ga.nu(parseInt(C.version,10),0)}))}),Yh=(m,h)=>{const C=String(h).toLowerCase();return Y(m,_=>_.search(C))},$m=(m,h)=>Yh(m,h).map(C=>{const _=ga.detect(C.versionRegexes,h);return{current:C.name,version:_}}),Lr=(m,h)=>Yh(m,h).map(C=>{const _=ga.detect(C.versionRegexes,h);return{current:C.name,version:_}}),Xi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hl=m=>h=>Ec(h,m),zd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:m=>Ec(m,"edge/")&&Ec(m,"chrome")&&Ec(m,"safari")&&Ec(m,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xi],search:m=>Ec(m,"chrome")&&!Ec(m,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:m=>Ec(m,"msie")||Ec(m,"trident")},{name:"Opera",versionRegexes:[Xi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hl("firefox")},{name:"Safari",versionRegexes:[Xi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:m=>(Ec(m,"safari")||Ec(m,"mobile/"))&&Ec(m,"applewebkit")}],df=[{name:"Windows",search:hl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:m=>Ec(m,"iphone")||Ec(m,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:hl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hl("linux"),versionRegexes:[]},{name:"Solaris",search:hl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:hl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mf={browsers:ue(zd),oses:ue(df)},jl="Edge",Xh="Chromium",eh="IE",Tg="Opera",rl="Firefox",ps="Safari",Dl=()=>gf({current:void 0,version:ga.unknown()}),gf=m=>{const h=m.current,C=m.version,_=L=>()=>h===L;return{current:h,version:C,isEdge:_(jl),isChromium:_(Xh),isIE:_(eh),isOpera:_(Tg),isFirefox:_(rl),isSafari:_(ps)}},Rl={unknown:Dl,nu:gf,edge:ue(jl),chromium:ue(Xh),ie:ue(eh),opera:ue(Tg),firefox:ue(rl),safari:ue(ps)},om="Windows",al="iOS",bl="Android",Hm="Linux",Fc="macOS",ff="Solaris",Vd="FreeBSD",pf="ChromeOS",$0=()=>Eg({current:void 0,version:ga.unknown()}),Eg=m=>{const h=m.current,C=m.version,_=L=>()=>h===L;return{current:h,version:C,isWindows:_(om),isiOS:_(al),isAndroid:_(bl),isMacOS:_(Fc),isLinux:_(Hm),isSolaris:_(ff),isFreeBSD:_(Vd),isChromeOS:_(pf)}},th={unknown:$0,nu:Eg,windows:ue(om),ios:ue(al),android:ue(bl),linux:ue(Hm),macos:ue(Fc),solaris:ue(ff),freebsd:ue(Vd),chromeos:ue(pf)},Ai={detect:(m,h,C)=>{const _=mf.browsers(),L=mf.oses(),U=h.bind(Ee=>Tx(_,Ee)).orThunk(()=>$m(_,m)).fold(Rl.unknown,Rl.nu),ee=Lr(L,m).fold(th.unknown,th.nu),me=Lm(ee,U,m,C);return{browser:U,os:ee,deviceType:me}}},Zl=m=>window.matchMedia(m).matches;let Ml=cf(()=>Ai.detect(window.navigator.userAgent,Be.from(window.navigator.userAgentData),Zl));const Yu=()=>Ml(),oa=(m,h)=>{const C=(me,Ee)=>{if(!zn(Ee)&&!Ee.match(/^[0-9]+$/))throw new Error(m+".set accepts only positive integer values. Value was "+Ee);const Ke=me.dom;un(Ke)&&(Ke.style[m]=Ee+"px")},_=me=>{const Ee=h(me);if(Ee<=0||Ee===null){const Ke=si(me,m);return parseFloat(Ke)||0}return Ee},L=_,U=(me,Ee)=>$e(Ee,(Ke,kt)=>{const Bn=si(me,kt),co=Bn===void 0?0:parseInt(Bn,10);return isNaN(co)?Ke:Ke+co},0);return{set:C,get:_,getOuter:L,aggregate:U,max:(me,Ee,Ke)=>{const kt=U(me,Ke);return Ee>kt?Ee-kt:0}}},jc=(m,h)=>wt(m).getOr(h),Ya=(m,h,C)=>jc(si(m,h),C),vl=(m,h,C,_)=>{const L=Ya(m,`padding-${C}`,0),U=Ya(m,`padding-${_}`,0),ee=Ya(m,`border-${C}-width`,0),me=Ya(m,`border-${_}-width`,0);return h-L-U-ee-me},hf=(m,h)=>{const C=m.dom,_=C.getBoundingClientRect().width||C.offsetWidth;return h==="border-box"?_:vl(m,_,"left","right")},Yt=m=>Ya(m,"height",m.dom.offsetHeight),wo=m=>Ya(m,"width",m.dom.offsetWidth),yc=m=>hf(m,"content-box"),Gl=oa("width",m=>m.dom.offsetWidth),mc=m=>Gl.get(m),Ir=m=>Gl.getOuter(m),bf=yc,ql=wo,Fr=(m,h,C)=>{const _=m.cells,L=_.slice(0,h),U=_.slice(h),ee=L.concat(C).concat(U);return _r(m,ee)},sm=(m,h,C)=>Fr(m,h,[C]),Ws=(m,h,C)=>{const _=m.cells;_[h]=C},_r=(m,h)=>Wr(m.element,h,m.section,m.isNew),_g=(m,h)=>{const C=m.cells,_=mn(C,h);return Wr(m.element,_,m.section,m.isNew)},il=(m,h)=>m.cells[h],Cu=(m,h)=>il(m,h).element,gc=m=>m.cells.length,ht=m=>{const h=ft(m,C=>C.section==="colgroup");return{rows:h.fail,cols:h.pass}},Ji=(m,h,C)=>{const _=mn(m.cells,C);return Wr(h(m.element),_,m.section,!0)},Xu="data-snooker-locked-cols",yi=m=>Ve(m,Xu).bind(h=>Be.from(h.match(/\d+/g))).map(h=>ce(h,Qe)),va=m=>{const h=$e(ht(m).rows,(_,L)=>(Se(L.cells,(U,ee)=>{U.isLocked&&(_[ee]=!0)}),_),{}),C=rt(h,(_,L)=>parseInt(L,10));return De(C)},cl=(m,h)=>m+","+h,sr=(m,h,C)=>Be.from(m.access[cl(h,C)]),vd=(m,h,C)=>{const _=rm(m,L=>C(h,L.element));return _.length>0?Be.some(_[0]):Be.none()},rm=(m,h)=>{const C=Mt(m.all,_=>_.cells);return tt(C,h)},Zr=m=>{const h={};let C=0;return Se(m.cells,_=>{const L=_.colspan;Qt(L,U=>{const ee=C+U;h[ee]=ol(_.element,L,ee)}),C+=L}),h},Su=m=>{const h={},C=[],L=oe(m).map(Qn=>Qn.element).bind(su).bind(yi).getOr({});let U=0,ee=0,me=0;const{pass:Ee,fail:Ke}=ft(m,Qn=>Qn.section==="colgroup");Se(Ke,Qn=>{const jn=[];Se(Qn.cells,Ho=>{let On=0;for(;h[cl(me,On)]!==void 0;)On++;const ds=Mn(L,On.toString()),rr=Ku(Ho.element,Ho.rowspan,Ho.colspan,me,On,ds);for(let Cn=0;Cn<Ho.colspan;Cn++)for(let _a=0;_a<Ho.rowspan;_a++){const ea=me+_a,zr=On+Cn,Ui=cl(ea,zr);h[Ui]=rr,ee=Math.max(ee,zr+1)}jn.push(rr)}),U++,C.push(oi(Qn.element,jn,Qn.section)),me++});const{columns:kt,colgroups:Bn}=ct(Ee).map(Qn=>{const jn=Zr(Qn);return{colgroups:[le(Qn.element,nn(jn))],columns:jn}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:qi(U,ee),access:h,all:C,columns:kt,colgroups:Bn}},yr={fromTable:m=>{const h=Jp(m);return Su(h)},generate:Su,getAt:sr,findItem:vd,filterItems:rm,justCells:m=>Mt(m.all,h=>h.cells),justColumns:m=>nn(m.columns),hasColumns:m=>dt(m.columns).length>0,getColumnAt:(m,h)=>Be.from(m.columns[h])},im=(m,h=Qe)=>{const C=m.grid,_=Qt(C.columns,ve),L=Qt(C.rows,ve);return mn(_,U=>Zc(()=>Mt(L,Ke=>yr.getAt(m,Ke,U).filter(kt=>kt.column===U).toArray()),Ke=>Ke.colspan===1&&h(Ke.element),()=>yr.getAt(m,0,U)))},Zc=(m,h,C)=>{const _=m();return Y(_,h).orThunk(()=>Be.from(_[0]).orThunk(C)).map(ee=>ee.element)},I=m=>{const h=m.grid,C=Qt(h.rows,ve),_=Qt(h.columns,ve);return mn(C,L=>Zc(()=>Mt(_,Ee=>yr.getAt(m,L,Ee).filter(Ke=>Ke.row===L).fold(ue([]),Ke=>[Ke])),Ee=>Ee.rowspan===1,()=>yr.getAt(m,L,0)))},j=(m,h)=>{if(h<0||h>=m.length-1)return Be.none();const C=m[h].fold(()=>{const L=Nt(m.slice(0,h));return At(L,(U,ee)=>U.map(me=>({value:me,delta:ee+1})))},L=>Be.some({value:L,delta:0})),_=m[h+1].fold(()=>{const L=m.slice(h+1);return At(L,(U,ee)=>U.map(me=>({value:me,delta:ee+1})))},L=>Be.some({value:L,delta:1}));return C.bind(L=>_.map(U=>{const ee=U.delta+L.delta;return Math.abs(U.value-L.value)/ee}))},ne=(m,h)=>C=>ze(C)==="rtl"?h:m,ze=m=>si(m,"direction")==="rtl"?"rtl":"ltr",qe=oa("height",m=>{const h=m.dom;return Ds(m)?h.getBoundingClientRect().height:h.offsetHeight}),Sn=m=>qe.get(m),as=m=>qe.getOuter(m),Ys=Yt,Os=(m,h)=>({left:m,top:h,translate:(_,L)=>Os(m+_,h+L)}),_o=Os,Oi=m=>{const h=m.getBoundingClientRect();return _o(h.left,h.top)},Xa=(m,h)=>m!==void 0?m:h!==void 0?h:0,Bu=m=>{const h=m.dom.ownerDocument,C=h.body,_=h.defaultView,L=h.documentElement;if(C===m.dom)return _o(C.offsetLeft,C.offsetTop);const U=Xa(_==null?void 0:_.pageYOffset,L.scrollTop),ee=Xa(_==null?void 0:_.pageXOffset,L.scrollLeft),me=Xa(L.clientTop,C.clientTop),Ee=Xa(L.clientLeft,C.clientLeft);return Iu(m).translate(ee-Ee,U-me)},Iu=m=>{const h=m.dom,_=h.ownerDocument.body;return _===h?_o(_.offsetLeft,_.offsetTop):Ds(m)?Oi(h):_o(0,0)},nh=(m,h)=>({row:m,y:h}),cm=(m,h)=>({col:m,x:h}),H0=m=>Bu(m).left+Ir(m),ll=m=>Bu(m).left,z0=(m,h)=>cm(m,ll(h)),NC=(m,h)=>cm(m,H0(h)),xc=m=>Bu(m).top,ru=(m,h)=>nh(m,xc(h)),Og=(m,h)=>nh(m,xc(h)+as(h)),wc=(m,h,C)=>{if(C.length===0)return[];const _=mn(C.slice(1),(U,ee)=>U.map(me=>m(ee,me))),L=C[C.length-1].map(U=>h(C.length-1,U));return _.concat([L])},Cv=m=>-m,Pc={delta:ve,positions:m=>wc(ru,Og,m),edge:xc},Dg=ne({delta:ve,edge:ll,positions:m=>wc(z0,NC,m)},{delta:Cv,edge:H0,positions:m=>wc(NC,z0,m)}),e1={delta:(m,h)=>Dg(h).delta(m,h),positions:(m,h)=>Dg(h).positions(m,h),edge:m=>Dg(m).edge(m)},Sv={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},t1=(()=>{const m="[0-9]+",C="[eE]"+("[+-]?"+m),_="\\.",L=me=>`(?:${me})?`,ee=`[+-]?(?:${["Infinity",m+_+L(m)+L(C),_+m+L(C),m+L(C)].join("|")})`;return new RegExp(`^(${ee})(.*)$`)})(),Ud=(m,h)=>Le(h,C=>Le(Sv[C],_=>m===_)),vf=(m,h)=>Be.from(t1.exec(m)).bind(_=>{const L=Number(_[1]),U=_[2];return Ud(U,h)?Be.some({value:L,unit:U}):Be.none()}),oh=/(\d+(\.\d+)?)%/,so=/(\d+(\.\d+)?)px|em/,Qu=Xr("col"),Vm=Xr("tr"),xd=(m,h,C)=>{const _=Va(m).getOrThunk(()=>X(Eo(m)));return h(m)/C(_)*100},Fu=(m,h)=>{nr(m,"width",h+"px")},n1=(m,h)=>{nr(m,"width",h+"%")},Rg=(m,h)=>{nr(m,"height",h+"px")},ap=m=>{di(m,"height")},o1=m=>Ys(m)+"px",rg=(m,h,C,_)=>{const L=su(m).map(U=>{const ee=C(U);return Math.floor(h/100*ee)}).getOr(h);return _(m,L),L},Ex=(m,h,C,_)=>{const L=parseFloat(m);return ic(m,"%")&&Er(h)!=="table"?rg(h,L,C,_):L},Li=m=>{const h=o1(m);return h?Ex(h,m,Sn,Rg):Sn(m)},_n=(m,h,C)=>{const _=C(m),L=pl(m,h);return _/L},$s=(m,h)=>Ol(m,h).orThunk(()=>Ve(m,h).map(C=>C+"px")),Uo=m=>$s(m,"width"),fc=m=>$s(m,"height"),sh=m=>xd(m,mc,bf),Gc=m=>Qu(m)?mc(m):ql(m),aa=m=>Vm(m)?Sn(m):_n(m,"rowspan",Li),Ja=m=>Uo(m).bind(C=>vf(C,["fixed","relative","empty"])),dn=(m,h,C)=>{nr(m,"width",h+C)},ia=m=>mc(m)+"px",tn=m=>Sn(m)+"px",qc=m=>xd(m,mc,bf)+"%",Kc=m=>Uo(m).exists(h=>oh.test(h)),ed=m=>Uo(m).exists(h=>so.test(h)),kv=m=>Uo(m).isNone(),lm=ue(oh),_x=Xr("col"),au=m=>Uo(m).getOrThunk(()=>Gc(m)+"px"),Cs=m=>fc(m).getOrThunk(()=>aa(m)+"px"),ku=m=>mn(yr.justColumns(m),h=>Be.from(h.element)),s1=m=>{const h=Yu().browser,C=h.isChromium()||h.isFirefox();return _x(m)?C:!0},ri=(m,h,C,_,L,U)=>m.filter(_).fold(()=>U(j(C,h)),ee=>L(ee)),Jh=(m,h,C,_)=>{const L=im(m),U=yr.hasColumns(m)?ku(m):L,ee=[Be.some(e1.edge(h))].concat(mn(e1.positions(L,h),Ee=>Ee.map(Ke=>Ke.x))),me=re(Yi);return mn(U,(Ee,Ke)=>ri(Ee,Ke,ee,me,kt=>{if(s1(kt))return C(kt);{const Bn=Mm(L[Ke],ve);return ri(Bn,Ke,ee,me,co=>_(Be.some(mc(co))),_)}},_))},Mg=m=>m.map(h=>h+"px").getOr(""),um=(m,h)=>Jh(m,h,au,Mg),Yc=(m,h,C)=>Jh(m,h,sh,_=>_.fold(()=>C.minCellWidth(),L=>L/C.pixelWidth()*100)),yl=(m,h,C)=>Jh(m,h,Gc,_=>_.getOrThunk(C.minCellWidth)),Ct=(m,h,C,_)=>{const L=I(m),U=mn(m.all,me=>Be.some(me.element)),ee=[Be.some(Pc.edge(h))].concat(mn(Pc.positions(L,h),me=>me.map(Ee=>Ee.y)));return mn(U,(me,Ee)=>ri(me,Ee,ee,Qe,C,_))},fa=(m,h)=>Ct(m,h,aa,C=>C.getOrThunk(Im)),wd=(m,h)=>Ct(m,h,Cs,Mg),gn=(m,h)=>()=>Ds(m)?h(m):parseFloat(Ol(m,"width").getOr("0")),Kl=m=>{const h=gn(m,mc),C=ue(0);return{width:h,pixelWidth:h,getWidths:(L,U)=>yl(L,m,U),getCellDelta:C,singleColumnWidth:ue([0]),minCellWidth:C,setElementWidth:Vt,adjustTableWidth:Vt,isRelative:!0,label:"none"}},Ra=m=>{const h=gn(m,Ee=>parseFloat(qc(Ee))),C=gn(m,mc);return{width:h,pixelWidth:C,getWidths:(Ee,Ke)=>Yc(Ee,m,Ke),getCellDelta:Ee=>Ee/C()*100,singleColumnWidth:(Ee,Ke)=>[100-Ee],minCellWidth:()=>_i()/C()*100,setElementWidth:n1,adjustTableWidth:Ee=>{const Ke=h(),kt=Ee/100*Ke,Bn=Ke+kt;n1(m,Bn)},isRelative:!0,label:"percent"}},Ea=m=>{const h=gn(m,mc);return{width:h,pixelWidth:h,getWidths:(ee,me)=>yl(ee,m,me),getCellDelta:ve,singleColumnWidth:(ee,me)=>[Math.max(_i(),ee+me)-ee],minCellWidth:_i,setElementWidth:Fu,adjustTableWidth:ee=>{const me=h()+ee;Fu(m,me)},isRelative:!1,label:"pixel"}},V0=(m,h)=>lm().exec(h)!==null?Ra(m):Ea(m),H={getTableSize:m=>Uo(m).fold(()=>Kl(m),C=>V0(m,C)),pixelSize:Ea,percentageSize:Ra,noneSize:Kl},te=(m,h,C,_,L,U)=>({minRow:m,minCol:h,maxRow:C,maxCol:_,allCells:L,selectedCells:U}),ye=(m,h)=>{const C=m.grid.columns;let L=m.grid.rows,U=C,ee=0,me=0;const Ee=[],Ke=[];return it(m.access,kt=>{if(Ee.push(kt),h(kt)){Ke.push(kt);const Bn=kt.row,co=Bn+kt.rowspan-1,Qn=kt.column,jn=Qn+kt.colspan-1;Bn<L?L=Bn:co>ee&&(ee=co),Qn<U?U=Qn:jn>me&&(me=jn)}}),te(L,U,ee,me,Ee,Ke)},et=(m,h,C)=>{const _=m[C].element,L=fn.fromTag("td");Ta(L,fn.fromTag("br")),(h?Ta:Wc)(_,L)},an=(m,h,C,_)=>{const L=tt(m,me=>me.section!=="colgroup"),U=h.grid.columns,ee=h.grid.rows;for(let me=0;me<ee;me++){let Ee=!1;for(let Ke=0;Ke<U;Ke++)me<C.minRow||me>C.maxRow||Ke<C.minCol||Ke>C.maxCol||(yr.getAt(h,me,Ke).filter(_).isNone()?et(L,Ee,me):Ee=!0)}},xn=(m,h,C,_)=>{it(C.columns,ee=>{(ee.column<h.minCol||ee.column>h.maxCol)&&Xs(ee.element)});const L=tt(Fm(m,"tr"),ee=>ee.dom.childElementCount===0);Se(L,Xs),(h.minCol===h.maxCol||h.minRow===h.maxRow)&&Se(Fm(m,"th,td"),ee=>{Pe(ee,"rowspan"),Pe(ee,"colspan")}),Pe(m,Xu),Pe(m,"data-snooker-col-series"),H.getTableSize(m).adjustTableWidth(_)},Fo=(m,h,C,_)=>{if(_.minCol===0&&h.grid.columns===_.maxCol+1)return 0;const L=yl(h,m,C),U=$e(L,(Ke,kt)=>Ke+kt,0),Ee=$e(L.slice(_.minCol,_.maxCol+1),(Ke,kt)=>Ke+kt,0)/U*C.pixelWidth()-C.pixelWidth();return C.getCellDelta(Ee)},$o=(m,h)=>{const C=co=>xt(co.element,h),_=li(m),L=Jp(_),U=H.getTableSize(m),ee=yr.generate(L),me=ye(ee,C),Ee="th:not("+h+"),td:not("+h+")",Ke=Ic(_,"th,td",co=>xt(co,Ee));Se(Ke,Xs),an(L,ee,me,C);const kt=yr.fromTable(m),Bn=Fo(m,kt,U,me);return xn(_,me,ee,Bn),_},Ss=" ",Pr=((m,h)=>{const C=U=>{if(!m(U))throw new Error("Can only get "+h+" value of a "+h+" node");return _(U).getOr("")},_=U=>m(U)?Be.from(U.dom.nodeValue):Be.none();return{get:C,getOption:_,set:(U,ee)=>{if(!m(U))throw new Error("Can only set raw "+h+" value of a "+h+" node");U.dom.nodeValue=ee}}})(vi,"text"),gi=m=>Pr.get(m),Lc=m=>Pr.getOption(m),ag=(m,h)=>Pr.set(m,h),iu=m=>Er(m)==="img"?1:Lc(m).fold(()=>Bs(m).length,h=>h.length),Um=m=>Lc(m).filter(h=>h.trim().length!==0||h.indexOf(Ss)>-1).isSome(),r1=m=>Lo(m)&&Ga(m,"contenteditable")==="false",yf=["img","br"],ig=m=>Um(m)||Jt(yf,Er(m))||r1(m),ip=m=>$d(m,ig),a1=m=>Qh(m,ig),Qh=(m,h)=>{const C=_=>{const L=Bs(_);for(let U=L.length-1;U>=0;U--){const ee=L[U];if(h(ee))return Be.some(ee);const me=C(ee);if(me.isSome())return me}return Be.none()};return C(m)},i1={scope:["row","col"]},Xc=m=>()=>{const h=fn.fromTag("td",m.dom);return Ta(h,fn.fromTag("br",m.dom)),h},cg=m=>()=>fn.fromTag("col",m.dom),$r=m=>()=>fn.fromTag("colgroup",m.dom),ai=m=>()=>fn.fromTag("tr",m.dom),Pu=(m,h,C)=>{const _=Wa(m,h);return it(C,(L,U)=>{L===null?Pe(_,U):Ia(_,U,L)}),_},_c=m=>m,eb=(m,h,C)=>ip(m).map(L=>{const U=C.join(","),ee=Oo(L,U,me=>Tn(me,m));return Bt(ee,(me,Ee)=>{const Ke=fs(Ee);return Ta(me,Ke),Ke},h)}).getOr(h),Tv=(m,h)=>{it(i1,(C,_)=>Ve(m,_).filter(L=>Jt(C,L)).each(L=>Ia(h,_,L)))},xf=(m,h,C)=>{const _=(ee,me)=>{Pi(ee.element,me),di(me,"height"),ee.colspan!==1&&di(me,"width")},L=ee=>{const me=fn.fromTag(Er(ee.element),h.dom),Ee=C.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ke=Ee.length>0?eb(ee.element,me,Ee):me;return Ta(Ke,fn.fromTag("br")),_(ee,me),Tv(ee.element,me),m(ee.element,me),me};return{col:ee=>{const me=fn.fromTag(Er(ee.element),h.dom);return _(ee,me),m(ee.element,me),me},colgroup:$r(h),row:ai(h),cell:L,replace:Pu,colGap:cg(h),gap:Xc(h)}},td=m=>({col:cg(m),colgroup:$r(m),row:ai(m),cell:Xc(m),replace:_c,colGap:cg(m),gap:Xc(m)}),wf=(m,h)=>{const _=document.createElement("div");return _.innerHTML=m,Bs(fn.fromDom(_))},Bk=m=>mn(m,fn.fromDom),nd=m=>h=>h.options.get(m),sA="100%",lg=m=>{var h;const C=m.dom,_=(h=C.getParent(m.selection.getStart(),C.isBlock))!==null&&h!==void 0?h:m.getBody();return bf(fn.fromDom(_))+"px"},tb=(m,h)=>cu(m)||!Ox(m)?h:ug(m)?{...h,width:lg(m)}:{...h,width:sA},Ev=(m,h)=>cu(m)||Ox(m)?h:ug(m)?{...h,width:lg(m)}:{...h,width:sA},Ik=m=>{const h=m.options.register;h("table_clone_elements",{processor:"string[]"}),h("table_use_colgroups",{processor:"boolean",default:!0}),h("table_header_type",{processor:C=>{const _=Jt(["section","cells","sectionCells","auto"],C);return _?{value:C,valid:_}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),h("table_sizing_mode",{processor:"string",default:"auto"}),h("table_default_attributes",{processor:"object",default:{border:"1"}}),h("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),h("table_column_resizing",{processor:C=>{const _=Jt(["preservetable","resizetable"],C);return _?{value:C,valid:_}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),h("table_resize_bars",{processor:"boolean",default:!0}),h("table_style_by_css",{processor:"boolean",default:!0}),h("table_merge_content_on_paste",{processor:"boolean",default:!0})},cp=m=>Be.from(m.options.get("table_clone_elements")),c1=m=>{const h=m.options.get("object_resizing");return Jt(h.split(","),"table")},nb=nd("table_header_type"),Qi=nd("table_column_resizing"),Ax=m=>Qi(m)==="preservetable",lp=m=>Qi(m)==="resizetable",rh=nd("table_sizing_mode"),U0=m=>rh(m)==="relative",ug=m=>rh(m)==="fixed",cu=m=>rh(m)==="responsive",BC=nd("table_resize_bars"),Ox=nd("table_style_by_css"),ah=nd("table_merge_content_on_paste"),$c=m=>{const h=m.options,C=h.get("table_default_attributes");return h.isSet("table_default_attributes")?C:Ev(m,C)},_v=m=>{const h=m.options,C=h.get("table_default_styles");return h.isSet("table_default_styles")?C:tb(m,C)},Hr=nd("table_use_colgroups"),dm=m=>Nc(m,"[contenteditable]"),up=(m,h=!1)=>Ds(m)?m.dom.isContentEditable:dm(m).fold(ue(h),C=>Av(C)==="true"),Av=m=>m.dom.contentEditable,$a=m=>fn.fromDom(m.getBody()),od=m=>h=>Tn(h,$a(m)),Wd=m=>{Pe(m,"data-mce-style");const h=C=>Pe(C,"data-mce-style");Se(Hd(m),h),Se(Br(m),h),Se(xv(m),h)},dp=m=>fn.fromDom(m.selection.getStart()),ec=m=>m.getBoundingClientRect().width,Dx=m=>m.getBoundingClientRect().height,W0=m=>(h,C)=>{const _=h.dom.getStyle(C,m)||h.dom.getAttrib(C,m);return Be.from(_).filter(_e)},Ov=W0("width"),Ng=W0("height"),Fk=m=>/^(\d+(\.\d+)?)%$/.test(m),Do=m=>/^(\d+(\.\d+)?)px$/.test(m),l1=m=>fl(m,Xr("table")).exists(up),xr=(m,h)=>{const C=h.column,_=h.column+h.colspan-1,L=h.row,U=h.row+h.rowspan-1;return C<=m.finishCol&&_>=m.startCol&&L<=m.finishRow&&U>=m.startRow},qo=(m,h)=>h.column>=m.startCol&&h.column+h.colspan-1<=m.finishCol&&h.row>=m.startRow&&h.row+h.rowspan-1<=m.finishRow,ob=(m,h)=>{let C=!0;const _=qt(qo,h);for(let L=h.startRow;L<=h.finishRow;L++)for(let U=h.startCol;U<=h.finishCol;U++)C=C&&yr.getAt(m,L,U).exists(_);return C?Be.some(h):Be.none()},j0=(m,h)=>bd(Math.min(m.row,h.row),Math.min(m.column,h.column),Math.max(m.row+m.rowspan-1,h.row+h.rowspan-1),Math.max(m.column+m.colspan-1,h.column+h.colspan-1)),sb=(m,h,C)=>{const _=yr.findItem(m,h,Tn),L=yr.findItem(m,C,Tn);return _.bind(U=>L.map(ee=>j0(U,ee)))},Dv=(m,h,C)=>sb(m,h,C).bind(_=>ob(m,_)),IC=(m,h,C,_)=>yr.findItem(m,h,Tn).bind(L=>{const U=C>0?L.row+L.rowspan-1:L.row,ee=_>0?L.column+L.colspan-1:L.column;return yr.getAt(m,U+C,ee+_).map(Ee=>Ee.element)}),ya=(m,h,C)=>sb(m,h,C).map(_=>{const L=yr.filterItems(m,qt(xr,_));return mn(L,U=>U.element)}),Pk=(m,h)=>{const C=(_,L)=>Xn(L,_);return yr.findItem(m,h,C).map(_=>_.element)},FC=(m,h,C)=>su(m).bind(_=>{const L=Z0(_);return IC(L,m,h,C)}),PC=(m,h,C)=>{const _=Z0(m);return ya(_,h,C)},on=(m,h,C,_,L)=>{const U=Z0(m),ee=Tn(m,C)?Be.some(h):Pk(U,h),me=Tn(m,L)?Be.some(_):Pk(U,_);return ee.bind(Ee=>me.bind(Ke=>ya(U,Ee,Ke)))},Rv=(m,h,C)=>{const _=Z0(m);return Dv(_,h,C)},Z0=yr.fromTable;var G0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Rx=()=>{const m=Ke=>fn.fromDom(Ke.dom.cloneNode(!1)),h=Ke=>Bo(Ke).dom,C=Ke=>Aa(Ke)?Er(Ke)==="body"?!0:Jt(G0,Er(Ke)):!1,_=Ke=>Aa(Ke)?Jt(["br","img","hr","input"],Er(Ke)):!1,L=Ke=>Aa(Ke)&&Ga(Ke,"contenteditable")==="false",U=(Ke,kt)=>Ke.dom.compareDocumentPosition(kt.dom),ee=(Ke,kt)=>{const Bn=Rt(Ke);Mc(kt,Bn)},me=Ke=>{const kt=Er(Ke);return Jt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],kt)},Ee=Ke=>Aa(Ke)?Ve(Ke,"lang"):Be.none();return{up:ue({selector:Ii,closest:Nc,predicate:bn,all:Ur}),down:ue({selector:jr,predicate:St}),styles:ue({get:si,getRaw:Ol,set:nr,remove:di}),attrs:ue({get:Ga,set:Ia,remove:Pe,copyTo:ee}),insert:ue({before:Ua,after:Ti,afterAll:Ei,append:Ta,appendAll:Es,prepend:Wc,wrap:yu}),remove:ue({unwrap:hd,remove:Xs}),create:ue({nu:fn.fromTag,clone:m,text:fn.fromText}),query:ue({comparePosition:U,prevSibling:Al,nextSibling:La}),property:ue({children:Bs,name:Er,parent:hr,document:h,isText:vi,isComment:kr,isElement:Aa,isSpecial:me,getLanguage:Ee,getText:gi,setText:ag,isBoundary:C,isEmptyTag:_,isNonEditable:L}),eq:Tn,is:xo}};const q0=(m,h,C,_)=>{const L=C[0],U=C.slice(1);return _(m,h,L,U)},LC=(m,h,C)=>C.length>0?q0(m,h,C,Mv):Be.none(),Mv=(m,h,C,_)=>{const L=h(m,C);return Bt(_,(U,ee)=>{const me=h(m,ee);return mp(m,U,me)},L)},mp=(m,h,C)=>h.bind(_=>C.filter(qt(m.eq,_))),u1=(m,h)=>qt(m.eq,h),$i=(m,h,C,_=qn)=>{const L=[h].concat(m.up().all(h)),U=[C].concat(m.up().all(C)),ee=kt=>Jo(kt,_).fold(()=>kt,co=>kt.slice(0,co+1)),me=ee(L),Ee=ee(U),Ke=Y(me,kt=>Le(Ee,u1(m,kt)));return{firstpath:me,secondpath:Ee,shared:Ke}},Cd=LC,d1=$i,gp=Rx(),Mx=(m,h)=>Cd(gp,(C,_)=>m(_),h),K0=(m,h,C)=>d1(gp,m,h,C),Y0=m=>Ii(m,"table"),$C=(m,h,C)=>{const _=L=>U=>C!==void 0&&C(U)||Tn(U,L);return Tn(m,h)?Be.some({boxes:Be.some([m]),start:m,finish:h}):Y0(m).bind(L=>Y0(h).bind(U=>{if(Tn(L,U))return Be.some({boxes:PC(L,m,h),start:m,finish:h});if(Xn(L,U)){const ee=Oo(h,"td,th",_(L)),me=ee.length>0?ee[ee.length-1]:h;return Be.some({boxes:on(L,m,L,h,U),start:m,finish:me})}else if(Xn(U,L)){const ee=Oo(m,"td,th",_(U)),me=ee.length>0?ee[ee.length-1]:m;return Be.some({boxes:on(U,m,L,h,U),start:m,finish:me})}else return K0(m,h).shared.bind(ee=>Nc(ee,"table",C).bind(me=>{const Ee=Oo(h,"td,th",_(me)),Ke=Ee.length>0?Ee[Ee.length-1]:h,kt=Oo(m,"td,th",_(me)),Bn=kt.length>0?kt[kt.length-1]:m;return Be.some({boxes:on(me,m,L,h,U),start:Bn,finish:Ke})}))}))},mm=(m,h)=>{const C=jr(m,h);return C.length>0?Be.some(C):Be.none()},HC=(m,h)=>Y(m,C=>xt(C,h)),tc=(m,h,C)=>ou(m,h).bind(_=>ou(m,C).bind(L=>Mx(Y0,[_,L]).map(U=>({first:_,last:L,table:U})))),m1=(m,h)=>Ii(m,"table").bind(C=>ou(C,h).bind(_=>$C(_,m).bind(L=>L.boxes.map(U=>({boxes:U,start:L.start,finish:L.finish}))))),rD=(m,h,C,_,L)=>HC(m,L).bind(U=>FC(U,h,C).bind(ee=>m1(ee,_))),ih=(m,h)=>mm(m,h),Tu=(m,h,C)=>tc(m,h,C).bind(_=>{const L=Ee=>Tn(m,Ee),U="thead,tfoot,tbody,table",ee=Ii(_.first,U,L),me=Ii(_.last,U,L);return ee.bind(Ee=>me.bind(Ke=>Tn(Ee,Ke)?Rv(_.table,_.first,_.last):Be.none()))}),Wm=ve,Nx=m=>{const h=(_,L)=>Ve(_,L).exists(U=>parseInt(U,10)>1),C=_=>h(_,"rowspan")||h(_,"colspan");return m.length>0&&Pn(m,C)?Be.some(m):Be.none()},Cf=(m,h,C)=>h.length<=1?Be.none():Tu(m,C.firstSelectedSelector,C.lastSelectedSelector).map(_=>({bounds:_,cells:h})),lu="data-mce-selected",Ln="td["+lu+"],th["+lu+"]",Nv="["+lu+"]",xl="data-mce-first-selected",rb="td["+xl+"],th["+xl+"]",Bx="data-mce-last-selected",Lk="td["+Bx+"],th["+Bx+"]",qs=Nv,gm={selected:lu,selectedSelector:Ln,firstSelected:xl,firstSelectedSelector:rb,lastSelected:Bx,lastSelectedSelector:Lk},g1=(m,h,C)=>({element:C,mergable:Cf(h,m,gm),unmergable:Nx(m),selection:Wm(m)}),Bv=(m,h,C)=>({element:m,clipboard:h,generators:C}),Sf=(m,h,C,_)=>({selection:Wm(m),clipboard:C,generators:_}),uu=m=>su(m).bind(h=>ih(h,gm.firstSelectedSelector)).fold(ue(m),h=>h[0]),Sd=m=>(h,C)=>{const _=Er(h),L=_==="col"||_==="colgroup"?uu(h):h;return Nc(L,m,C)},zC=Sd("th,td,caption"),Cc=Sd("th,td"),Bg=m=>Bk(m.model.table.getSelectedCells()),Hi=m=>tt(Bg(m),h=>xt(h,gm.selectedSelector)),VC=m=>su(m[0]).map(h=>{const C=$o(h,qs);return Wd(C),[C]}),kd=(m,h)=>mn(h,C=>m.selection.serializer.serialize(C.dom,{})).join(""),Iv=(m,h)=>{const C=m.getDoc(),_=Je(fn.fromDom(m.getBody())),L=fn.fromTag("div",C);Ia(L,"data-mce-bogus","all"),Da(L,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const U=Pt(_);Es(L,h),Ta(U,L);const ee=L.dom.innerText;return Xs(L),ee},kf=(m,h)=>{m.on("BeforeGetContent",C=>{const _=L=>{C.preventDefault(),VC(L).each(U=>{const ee=C.format==="text"?Iv(m,U):kd(m,U);C.content=ee})};if(C.selection===!0){const L=Hi(m);L.length>=1&&_(L)}}),m.on("BeforeSetContent",C=>{if(C.selection===!0&&C.paste===!0){const _=Bg(m);oe(_).each(L=>{su(L).each(U=>{const ee=tt(wf(C.content),Ee=>Er(Ee)!=="meta"),me=Xr("table");if(ah(m)&&ee.length===1&&me(ee[0])){C.preventDefault();const Ee=fn.fromDom(m.getDoc()),Ke=td(Ee),kt=Bv(L,ee[0],Ke);h.pasteCells(U,kt).each(()=>{m.focus()})}})})}})},Yl=(m,h)=>({element:m,offset:h}),f1=(m,h,C)=>m.property().isText(h)&&m.property().getText(h).trim().length===0||m.property().isComment(h)?C(h).bind(_=>f1(m,_,C).orThunk(()=>Be.some(_))):Be.none(),rA=(m,h)=>m.property().isText(h)?m.property().getText(h).length:m.property().children(h).length,$k=(m,h)=>{const C=f1(m,h,m.query().prevSibling).getOr(h);if(m.property().isText(C))return Yl(C,rA(m,C));const _=m.property().children(C);return _.length>0?$k(m,_[_.length-1]):Yl(C,rA(m,C))},Tf=$k,Ig=Rx(),Lu=m=>Tf(Ig,m),Fv=(m,h)=>{Yi(m)||Ja(m).each(_=>{const L=_.value/2;dn(m,L,_.unit),dn(h,L,_.unit)})},Sc=m=>mn(m,ue(0)),wl=(m,h,C,_,L)=>L(m.slice(0,h)).concat(_).concat(L(m.slice(C))),Cl=m=>(h,C,_,L)=>{if(m(_)){const U=Math.max(L,h[C]-Math.abs(_)),ee=Math.abs(U-h[C]);return _>=0?ee:-ee}else return _},Ac=Cl(m=>m<0),Hc=Cl(Qe),kc=()=>{const m=(me,Ee,Ke,kt,Bn)=>{const co=Ac(me,Ee,kt,Bn);return wl(me,Ee,Ke+1,[co,0],Sc)},h=(me,Ee,Ke,kt)=>{const Bn=(100+Ke)/100,co=Math.max(kt,(me[Ee]+Ke)/Bn);return mn(me,(Qn,jn)=>(jn===Ee?co:Qn/Bn)-Qn)},C=(me,Ee,Ke,kt,Bn,co)=>co?h(me,Ee,kt,Bn):m(me,Ee,Ke,kt,Bn);return{resizeTable:(me,Ee)=>me(Ee),clampTableDelta:Ac,calcLeftEdgeDeltas:C,calcMiddleDeltas:(me,Ee,Ke,kt,Bn,co,Qn)=>C(me,Ke,kt,Bn,co,Qn),calcRightEdgeDeltas:(me,Ee,Ke,kt,Bn,co)=>{if(co)return h(me,Ke,kt,Bn);{const Qn=Ac(me,Ke,kt,Bn);return Sc(me.slice(0,Ke)).concat([Qn])}},calcRedestributedWidths:(me,Ee,Ke,kt)=>{if(kt){const co=(Ee+Ke)/Ee,Qn=mn(me,jn=>jn/co);return{delta:co*100-100,newSizes:Qn}}else return{delta:Ke,newSizes:me}}}},fp=()=>{const m=(ee,me,Ee,Ke,kt)=>{const Bn=Ke>=0?Ee:me,co=Hc(ee,Bn,Ke,kt);return wl(ee,me,Ee+1,[co,-co],Sc)};return{resizeTable:(ee,me,Ee)=>{Ee&&ee(me)},clampTableDelta:(ee,me,Ee,Ke,kt)=>{if(kt){if(Ee>=0)return Ee;{const Bn=$e(ee,(co,Qn)=>co+Qn-Ke,0);return Math.max(-Bn,Ee)}}else return Ac(ee,me,Ee,Ke)},calcLeftEdgeDeltas:m,calcMiddleDeltas:(ee,me,Ee,Ke,kt,Bn)=>m(ee,Ee,Ke,kt,Bn),calcRightEdgeDeltas:(ee,me,Ee,Ke,kt,Bn)=>{if(Bn)return Sc(ee);{const co=Ke/ee.length;return mn(ee,ue(co))}},calcRedestributedWidths:(ee,me,Ee,Ke)=>({delta:0,newSizes:ee})}},Ef=m=>yr.fromTable(m).grid,p1=Xr("th"),X0=m=>Pn(m,h=>p1(h.element)),aA=(m,h)=>m&&h?"sectionCells":m?"section":"cells",UC=m=>{const h=m.section==="thead",C=Ul(J0(m.cells),"th");return m.section==="tfoot"?{type:"footer"}:h||C?{type:"header",subType:aA(h,C)}:{type:"body"}},J0=m=>{const h=tt(m,C=>p1(C.element));return h.length===0?Be.some("td"):h.length===m.length?Be.some("th"):Be.none()},Q0=m=>{const h=mn(m,L=>UC(L).type),C=Jt(h,"header"),_=Jt(h,"footer");if(!C&&!_)return Be.some("body");{const L=Jt(h,"body");return C&&!L&&!_?Be.some("header"):!C&&!L&&_?Be.some("footer"):Be.none()}},iA=m=>At(m.all,h=>{const C=UC(h);return C.type==="header"?Be.from(C.subType):Be.none()}),Hk=(m,h,C)=>Ki(C(m.element,h),!0,m.isLocked),Td=(m,h)=>m.section!==h?Wr(m.element,m.cells,h,m.isNew):m,cA=()=>({transformRow:Td,transformCell:(m,h,C)=>{const _=C(m.element,h),L=Er(_)!=="td"?Dm(_,"td"):_;return Ki(L,m.isNew,m.isLocked)}}),sd=()=>({transformRow:Td,transformCell:Hk}),ey=()=>({transformRow:(m,h)=>Td(m,h==="thead"?"tbody":h),transformCell:Hk}),du={getTableSectionType:(m,h)=>{const C=yr.fromTable(m);switch(iA(C).getOr(h)){case"section":return cA();case"sectionCells":return sd();case"cells":return ey()}},section:cA,sectionCells:sd,cells:ey,fallback:()=>({transformRow:ve,transformCell:Hk})},b1=(m,h,C,_)=>{C===_?Pe(m,h):Ia(m,h,C)},pp=(m,h,C)=>{ct(Gn(m,h)).fold(()=>Wc(m,C),_=>Ti(_,C))},Ix=(m,h)=>{const C=cr(m,h).getOrThunk(()=>{const _=fn.fromTag(h,Eo(m).dom);return h==="thead"?pp(m,"caption,colgroup",_):h==="colgroup"?pp(m,"caption",_):Ta(m,_),_});return xu(C),C},zk=(m,h)=>{const C=[],_=[],L=Qn=>mn(Qn,jn=>{jn.isNew&&C.push(jn.element);const Ho=jn.element;return xu(Ho),Se(jn.cells,On=>{On.isNew&&_.push(On.element),b1(On.element,"colspan",On.colspan,1),b1(On.element,"rowspan",On.rowspan,1),Ta(Ho,On.element)}),Ho}),U=Qn=>Mt(Qn,jn=>mn(jn.cells,Ho=>(b1(Ho.element,"span",Ho.colspan,1),Ho.element))),ee=(Qn,jn)=>{const Ho=Ix(m,jn),ds=(jn==="colgroup"?U:L)(Qn);Es(Ho,ds)},me=Qn=>{cr(m,Qn).each(Xs)},Ee=(Qn,jn)=>{Qn.length>0?ee(Qn,jn):me(jn)},Ke=[],kt=[],Bn=[],co=[];return Se(h,Qn=>{switch(Qn.section){case"thead":Ke.push(Qn);break;case"tbody":kt.push(Qn);break;case"tfoot":Bn.push(Qn);break;case"colgroup":co.push(Qn);break}}),Ee(co,"colgroup"),Ee(Ke,"thead"),Ee(kt,"tbody"),Ee(Bn,"tfoot"),{newRows:C,newCells:_}},WC=m=>mn(m,h=>{const C=fs(h.element);return Se(h.cells,_=>{const L=li(_.element);b1(L,"colspan",_.colspan,1),b1(L,"rowspan",_.rowspan,1),Ta(C,L)}),C}),lA=(m,h)=>mn(m,C=>il(C,h)),v1=(m,h)=>m[h],aD=(m,h)=>{if(m.length===0)return 0;const C=m[0];return Jo(m,L=>!h(C.element,L.element)).getOr(m.length)},ty=(m,h,C,_)=>{const L=v1(m,h),U=L.section==="colgroup",ee=aD(L.cells.slice(C),_),me=U?1:aD(lA(m.slice(h),C),_);return{colspan:ee,rowspan:me}},y1=(m,h)=>{const C=mn(m,L=>mn(L.cells,qn)),_=(L,U,ee,me)=>{for(let Ee=L;Ee<L+ee;Ee++)for(let Ke=U;Ke<U+me;Ke++)C[Ee][Ke]=!0};return mn(m,(L,U)=>{const ee=Mt(L.cells,(me,Ee)=>{if(C[U][Ee]===!1){const Ke=ty(m,U,Ee,h);return _(U,Ee,Ke.rowspan,Ke.colspan),[Rm(me.element,Ke.rowspan,Ke.colspan,me.isNew)]}else return[]});return qa(L.element,ee,L.section,L.isNew)})},Pv=(m,h,C)=>{const _=[];Se(m.colgroups,L=>{const U=[];for(let ee=0;ee<m.grid.columns;ee++){const me=yr.getColumnAt(m,ee).map(Ee=>Ki(Ee.element,C,!1)).getOrThunk(()=>Ki(h.colGap(),!0,!1));U.push(me)}_.push(Wr(L.element,U,"colgroup",C))});for(let L=0;L<m.grid.rows;L++){const U=[];for(let Ee=0;Ee<m.grid.columns;Ee++){const Ke=yr.getAt(m,L,Ee).map(kt=>Ki(kt.element,C,kt.isLocked)).getOrThunk(()=>Ki(h.gap(),!0,!1));U.push(Ke)}const ee=m.all[L],me=Wr(ee.element,U,ee.section,C);_.push(me)}return _},Fx=(m,h)=>Pv(m,h,!1),jC=m=>y1(m,Tn),Vk=(m,h)=>At(m.all,C=>Y(C.cells,_=>Tn(h,_.element))),Ed=(m,h,C)=>{const _=mn(h.selection,U=>og(U).bind(ee=>Vk(m,ee)).filter(C)),L=uc(_);return Xp(L.length>0,L)},Eu=(m,h,C,_,L)=>(U,ee,me,Ee)=>{const Ke=yr.fromTable(U),kt=Be.from(Ee==null?void 0:Ee.section).getOrThunk(du.fallback);return h(Ke,ee).map(co=>{const Qn=Fx(Ke,me),jn=m(Qn,co,Tn,L(me),kt),Ho=va(jn.grid),On=jC(jn.grid);return{info:co,grid:On,cursor:jn.cursor,lockedColumns:Ho}}).bind(co=>{const Qn=zk(U,co.grid),jn=Be.from(Ee==null?void 0:Ee.sizing).getOrThunk(()=>H.getTableSize(U)),Ho=Be.from(Ee==null?void 0:Ee.resize).getOrThunk(fp);return C(U,co.grid,co.info,{sizing:jn,resize:Ho,section:kt}),_(U),Pe(U,Xu),co.lockedColumns.length>0&&Ia(U,Xu,co.lockedColumns.join(",")),Be.some({cursor:co.cursor,newRows:Qn.newRows,newCells:Qn.newCells})})},uA=(m,h)=>og(h.element).bind(C=>Vk(m,C).map(_=>({..._,generators:h.generators,clipboard:h.clipboard}))),Uk=(m,h)=>Ed(m,h,Qe).map(C=>({cells:C,generators:h.generators,clipboard:h.clipboard})),ib=(m,h)=>h.mergable,iD=(m,h)=>h.unmergable,_u=(m,h)=>Ed(m,h,Qe),Fg=(m,h)=>Ed(m,h,C=>!C.isLocked),x1=(m,h)=>Vk(m,h).exists(C=>!C.isLocked),cb=(m,h)=>Pn(h,C=>x1(m,C)),cD=(m,h)=>ib(m,h).filter(C=>cb(m,C.cells)),Px=(m,h)=>iD(m,h).filter(C=>cb(m,C)),jm=(m,h,C,_)=>{const L=ht(m).rows;if(L.length===0)return m;for(let U=h.startRow;U<=h.finishRow;U++)for(let ee=h.startCol;ee<=h.finishCol;ee++){const me=L[U],Ee=il(me,ee).isLocked;Ws(me,ee,Ki(_(),!1,Ee))}return m},_f=(m,h,C,_)=>{const L=ht(m).rows;let U=!0;for(let ee=0;ee<L.length;ee++)for(let me=0;me<gc(L[0]);me++){const Ee=L[ee],Ke=il(Ee,me),kt=Ke.element,Bn=C(kt,h);Bn&&!U?Ws(Ee,me,Ki(_(),!0,Ke.isLocked)):Bn&&(U=!1)}return m},Lx=(m,h)=>$e(m,(C,_)=>Le(C,L=>h(L.element,_.element))?C:C.concat([_]),[]),Pg=(m,h,C,_)=>(h>0&&h<m[0].cells.length&&Se(m,L=>{const U=L.cells[h-1];let ee=0;const me=_();for(;L.cells.length>h+ee&&C(U.element,L.cells[h+ee].element);)Ws(L,h+ee,Ki(me,!0,L.cells[h+ee].isLocked)),ee++}),m),ch=(m,h,C,_)=>{const L=ht(m).rows;if(h>0&&h<L.length){const U=L[h-1].cells,ee=Lx(U,C);Se(ee,me=>{let Ee=Be.none();for(let Ke=h;Ke<L.length;Ke++)for(let kt=0;kt<gc(L[0]);kt++){const Bn=L[Ke],co=il(Bn,kt);C(co.element,me.element)&&(Ee.isNone()&&(Ee=Be.some(_())),Ee.each(jn=>{Ws(Bn,kt,Ki(jn,!0,co.isLocked))}))}})}return m},lh=m=>{const h=U=>U(m),C=ue(m),_=()=>L,L={tag:!0,inner:m,fold:(U,ee)=>ee(m),isValue:Qe,isError:qn,map:U=>Nl.value(U(m)),mapError:_,bind:h,exists:h,forall:h,getOr:C,or:_,getOrThunk:C,orThunk:_,getOrDie:C,each:U=>{U(m)},toOptional:()=>Be.some(m)};return L},Sl=m=>{const h=()=>C,C={tag:!1,inner:m,fold:(_,L)=>_(m),isValue:qn,isError:Qe,map:h,mapError:_=>Nl.error(_(m)),bind:h,exists:qn,forall:Qe,getOr:ve,or:ve,getOrThunk:oo,orThunk:oo,getOrDie:rn(String(m)),each:Vt,toOptional:Be.none};return C},Nl={value:lh,error:Sl,fromOption:(m,h)=>m.fold(()=>Sl(h),lh)},ZC=(m,h,C)=>{if(m.row>=h.length||m.column>gc(h[0]))return Nl.error("invalid start address out of table bounds, row: "+m.row+", column: "+m.column);const _=h.slice(m.row),L=_[0].cells.slice(m.column),U=gc(C[0]),ee=C.length;return Nl.value({rowDelta:_.length-ee,colDelta:L.length-U})},GC=(m,h)=>{const C=gc(m[0]),_=gc(h[0]);return{rowDelta:0,colDelta:C-_}},Lv=(m,h)=>{const C=m.length,_=h.length;return{rowDelta:C-_,colDelta:0}},uh=(m,h,C,_)=>{const L=h.section==="colgroup"?C.col:C.cell;return Qt(m,U=>Ki(L(),!0,_(U)))},dh=(m,h,C,_)=>{const L=m[m.length-1];return m.concat(Qt(h,()=>{const U=L.section==="colgroup"?C.colgroup:C.row,ee=Ji(L,U,ve),me=uh(ee.cells.length,ee,C,Ee=>Co(_,Ee.toString()));return _r(ee,me)}))},Lg=(m,h,C,_)=>mn(m,L=>{const U=uh(h,L,C,qn);return Fr(L,_,U)}),jk=(m,h,C)=>mn(m,_=>$e(C,(L,U)=>{const ee=uh(1,_,h,Qe)[0];return sm(L,U,ee)},_)),ny=(m,h,C)=>{const _=h.colDelta<0?Lg:ve,L=h.rowDelta<0?dh:ve,U=va(m),ee=gc(m[0]),me=Le(U,kt=>kt===ee-1),Ee=_(m,Math.abs(h.colDelta),C,me?ee-1:ee),Ke=va(Ee);return L(Ee,Math.abs(h.rowDelta),C,ce(Ke,Qe))},oy=(m,h,C,_)=>{const L=il(m[h],C),U=qt(_,L.element),ee=m[h];return m.length>1&&gc(ee)>1&&(C>0&&U(Cu(ee,C-1))||C<ee.cells.length-1&&U(Cu(ee,C+1))||h>0&&U(Cu(m[h-1],C))||h<m.length-1&&U(Cu(m[h+1],C)))},lb=(m,h,C,_,L,U)=>{const ee=m.row,me=m.column,Ee=C.length,Ke=gc(C[0]),kt=ee+Ee,Bn=me+Ke+U.length,co=ce(U,Qe);for(let Qn=ee;Qn<kt;Qn++){let jn=0;for(let Ho=me;Ho<Bn;Ho++){if(co[Ho]){jn++;continue}oy(h,Qn,Ho,L)&&_f(h,Cu(h[Qn],Ho),L,_.cell);const On=Ho-me-jn,ds=il(C[Qn-ee],On),rr=ds.element,Cn=_.replace(rr);Ws(h[Qn],Ho,Ki(Cn,!0,ds.isLocked))}}return h},$x=(m,h,C)=>{const _=gc(h[0]),L=ht(h).cols.length+m.row,U=Qt(_-m.column,me=>me+m.column),ee=Y(U,me=>Pn(C,Ee=>Ee!==me)).getOr(_-1);return{row:L,column:ee}},Ar=(m,h,C)=>tt(C,_=>_>=m.column&&_<=gc(h[0])+m.column),rd=(m,h,C,_,L)=>{const U=va(h),ee=$x(m,h,U),me=ht(C).rows,Ee=Ar(ee,me,U);return ZC(ee,h,me).map(kt=>{const Bn={...kt,colDelta:kt.colDelta-Ee.length},co=ny(h,Bn,_),Qn=va(co),jn=Ar(ee,me,Qn);return lb(ee,co,me,_,L,jn)})},w1=(m,h,C,_,L)=>{Pg(h,m,L,_.cell);const U=Lv(C,h),ee=ny(C,U,_),me=Lv(h,ee),Ee=ny(h,me,_);return mn(Ee,(Ke,kt)=>Fr(Ke,m,ee[kt].cells))},ub=(m,h,C,_,L)=>{ch(h,m,L,_.cell);const U=va(h),ee=GC(h,C),me={...ee,colDelta:ee.colDelta-U.length},Ee=ny(h,me,_),{cols:Ke,rows:kt}=ht(Ee),Bn=va(Ee),co=GC(C,h),Qn={...co,colDelta:co.colDelta+Bn.length},jn=jk(C,_,Bn),Ho=ny(jn,Qn,_);return[...Ke,...kt.slice(0,m),...Ho,...kt.slice(m,kt.length)]},xi=(m,h,C,_)=>Ji(m,L=>_(L,C),h),C1=(m,h,C,_,L)=>{const{rows:U,cols:ee}=ht(m),me=U.slice(0,h),Ee=U.slice(h),Ke=xi(U[C],(kt,Bn)=>h>0&&h<U.length&&_(Cu(U[h-1],Bn),Cu(U[h],Bn))?il(U[h],Bn):Ki(L(kt.element,_),!0,kt.isLocked),_,L);return[...ee,...me,Ke,...Ee]},hp=(m,h,C,_,L,U,ee)=>{if(C==="colgroup"||!_){const me=il(m,L);return Ki(ee(me.element,U),!0,!1)}else return il(m,h)},$v=(m,h,C,_,L)=>mn(m,U=>{const ee=h>0&&h<gc(U)&&_(Cu(U,h-1),Cu(U,h)),me=hp(U,h,U.section,ee,C,_,L);return sm(U,h,me)}),lD=(m,h)=>Mt(m,C=>{const _=C.cells,L=Bt(h,(U,ee)=>ee>=0&&ee<U.length?U.slice(0,ee).concat(U.slice(ee+1)):U,_);return L.length>0?[Wr(C.element,L,C.section,C.isNew)]:[]}),Zk=(m,h,C)=>{const{rows:_,cols:L}=ht(m);return[...L,..._.slice(0,h),..._.slice(C+1)]},wi=(m,h,C,_)=>Cu(m[h],C)!==void 0&&h>0&&_(Cu(m[h-1],C),Cu(m[h],C)),db=(m,h,C)=>h>0&&C(Cu(m,h-1),Cu(m,h)),Gk=(m,h,C,_)=>wi(m,h,C,_)||db(m[h],C,_),dA=(m,h)=>Pn(h,ve)&&X0(m.cells)?Qe:(_,L,U)=>!(Er(_.element)==="th"&&h[U]),S1=(m,h)=>Pn(h,ve)&&X0(m)?Qe:(_,L,U)=>!(Er(_.element)==="th"&&h[L]),Oc=(m,h,C,_)=>{const L=ee=>ee==="row"?Bc(h):Yi(h),U=ee=>L(ee)?`${ee}group`:ee;return m?p1(h)?U(C):null:_&&p1(h)?U(C==="row"?"col":"row"):null},Hx=(m,h)=>(C,_,L)=>Be.some(Oc(m,C.element,"col",h[L])),mb=(m,h)=>(C,_)=>Be.some(Oc(m,C.element,"row",h[_])),Ao=(m,h,C)=>Ki(C(m.element,h),!0,m.isLocked),qk=(m,h,C,_,L,U,ee)=>{const me=Ee=>Le(h,Ke=>C(Ee.element,Ke.element));return mn(m,(Ee,Ke)=>_g(Ee,(kt,Bn)=>{if(me(kt)){const co=ee(kt,Ke,Bn)?L(kt,C,_):kt;return U(co,Ke,Bn).each(Qn=>{ac(co.element,{scope:Be.from(Qn)})}),co}else return kt}))},sy=(m,h,C)=>Mt(m,(_,L)=>Gk(m,L,h,C)?[]:[il(_,h)]),mA=(m,h,C)=>{const _=m[h];return Mt(_.cells,(L,U)=>Gk(m,h,U,C)?[]:[L])},zx=(m,h,C,_,L)=>{const U=ht(m).rows,ee=Mt(h,kt=>sy(U,kt,_)),me=mn(U,kt=>X0(kt.cells)),Ee=S1(ee,me),Ke=mb(C,me);return qk(m,ee,_,L,Ao,Ke,Ee)},Kk=(m,h,C,_,L,U,ee)=>{const{cols:me,rows:Ee}=ht(m),Ke=Ee[h[0]],kt=Mt(h,On=>mA(Ee,On,L)),Bn=mn(Ke.cells,(On,ds)=>X0(sy(Ee,ds,L))),co=[...Ee];Se(h,On=>{co[On]=ee.transformRow(Ee[On],C)});const Qn=[...me,...co],jn=dA(Ke,Bn),Ho=Hx(_,Bn);return qk(Qn,kt,L,U,ee.transformCell,Ho,jn)},qC=(m,h,C,_)=>{const L=ht(m).rows,U=mn(h,ee=>il(L[ee.row],ee.column));return qk(m,U,C,_,Ao,Be.none,Qe)},$g={generate:m=>{if(!Fn(m))throw new Error("cases must be an array");if(m.length===0)throw new Error("there must be at least one case");const h=[],C={};return Se(m,(_,L)=>{const U=dt(_);if(U.length!==1)throw new Error("one and only one name per case");const ee=U[0],me=_[ee];if(C[ee]!==void 0)throw new Error("duplicate key detected:"+ee);if(ee==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Fn(me))throw new Error("case arguments must be an array");h.push(ee),C[ee]=(...Ee)=>{const Ke=Ee.length;if(Ke!==me.length)throw new Error("Wrong number of arguments to case "+ee+". Expected "+me.length+" ("+me+"), got "+Ke);return{fold:(...Bn)=>{if(Bn.length!==m.length)throw new Error("Wrong number of arguments to fold. Expected "+m.length+", got "+Bn.length);return Bn[L].apply(null,Ee)},match:Bn=>{const co=dt(Bn);if(h.length!==co.length)throw new Error("Wrong number of arguments to match. Expected: "+h.join(",")+`
Actual: `+co.join(","));if(!Pn(h,jn=>Jt(co,jn)))throw new Error("Not all branches were specified when using match. Specified: "+co.join(", ")+`
Required: `+h.join(", "));return Bn[ee].apply(null,Ee)},log:Bn=>{console.log(Bn,{constructors:h,constructor:ee,params:Ee})}}}}),C}},bp={...$g.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},gA=(m,h)=>m.length===0?bp.none():m.length===1?bp.only(0):h===0?bp.left(0,1):h===m.length-1?bp.right(h-1,h):h>0&&h<m.length-1?bp.middle(h-1,h,h+1):bp.none(),Vx=(m,h,C,_,L)=>{const U=m.slice(0),ee=gA(m,h),me=ue(mn(U,ue(0))),Ee=co=>_.singleColumnWidth(U[co],C),Ke=(co,Qn)=>L.calcLeftEdgeDeltas(U,co,Qn,C,_.minCellWidth(),_.isRelative),kt=(co,Qn,jn)=>L.calcMiddleDeltas(U,co,Qn,jn,C,_.minCellWidth(),_.isRelative),Bn=(co,Qn)=>L.calcRightEdgeDeltas(U,co,Qn,C,_.minCellWidth(),_.isRelative);return ee.fold(me,Ee,Ke,kt,Bn)},Hg=(m,h,C)=>{let _=0;for(let L=m;L<h;L++)_+=C[L]!==void 0?C[L]:0;return _},fA=(m,h)=>{const C=yr.justCells(m);return mn(C,_=>{const L=Hg(_.column,_.column+_.colspan,h);return{element:_.element,width:L,colspan:_.colspan}})},Ux=(m,h)=>{const C=yr.justColumns(m);return mn(C,(_,L)=>({element:_.element,width:h[L],colspan:_.colspan}))},Wx=(m,h)=>mn(m.all,(C,_)=>({element:C.element,height:h[_]})),pA=m=>Bt(m,(h,C)=>h+C,0),dD=(m,h)=>yr.hasColumns(m)?Ux(m,h):fA(m,h),KC=(m,h,C)=>{const _=dD(m,h);Se(_,L=>{C.setElementWidth(L.element,L.width)})},YC=(m,h,C,_,L)=>{const U=yr.fromTable(m),ee=L.getCellDelta(h),me=L.getWidths(U,L),Ee=C===U.grid.columns-1,Ke=_.clampTableDelta(me,C,ee,L.minCellWidth(),Ee),kt=Vx(me,C,Ke,L,_),Bn=mn(kt,(co,Qn)=>co+me[Qn]);KC(U,Bn,L),_.resizeTable(L.adjustTableWidth,Ke,Ee)},hA=(m,h,C)=>{const _=yr.fromTable(m),L=fa(_,m),U=mn(L,(Ee,Ke)=>C===Ke?Math.max(h+Ee,Im()):Ee),ee=Wx(_,U);Se(ee,Ee=>{Rg(Ee.element,Ee.height)}),Se(yr.justCells(_),Ee=>{ap(Ee.element)});const me=pA(U);Rg(m,me)},bA=(m,h,C,_,L)=>{const U=yr.generate(h),ee=_.getWidths(U,_),me=_.pixelWidth(),{newSizes:Ee,delta:Ke}=L.calcRedestributedWidths(ee,me,C.pixelDelta,_.isRelative);KC(U,Ee,_),_.adjustTableWidth(Ke)},vA=(m,h,C,_)=>{const L=yr.generate(h),U=_.getWidths(L,_);KC(L,U,_)},mh=m=>$e(m,(C,_)=>Le(C,U=>U.column===_.column)?C:C.concat([_]),[]).sort((C,_)=>C.column-_.column),$u=Xr("col"),gh=Xr("colgroup"),k1=m=>Er(m)==="tr"||gh(m),ry=m=>{const h=dc(m,"colspan",1),C=dc(m,"rowspan",1);return{element:m,colspan:h,rowspan:C}},jx=(m,h=ry)=>{const C=me=>$u(me.element)?m.col(me):m.cell(me),_=me=>gh(me.element)?m.colgroup(me):m.row(me),L=me=>{if(k1(me))return _({element:me});{const Ee=me,Ke=C(h(Ee));return U=Be.some({item:Ee,replacement:Ke}),Ke}};let U=Be.none();return{getOrInit:(me,Ee)=>U.fold(()=>L(me),Ke=>Ee(me,Ke.item)?Ke.replacement:L(me))}},Zx=m=>h=>{const C=[],_=(ee,me)=>Y(C,Ee=>me(Ee.item,ee)),L=ee=>{const me=m==="td"?{scope:null}:{},Ee=h.replace(ee,m,me);return C.push({item:ee,sub:Ee}),Ee};return{replaceOrInit:(ee,me)=>{if(k1(ee)||$u(ee))return ee;{const Ee=ee;return _(Ee,me).fold(()=>L(Ee),Ke=>me(ee,Ke.item)?Ke.sub:L(Ee))}}}},Gx=m=>Ve(m,"scope").map(h=>h.substr(0,3)),_d={modification:jx,transform:Zx,merging:m=>({unmerge:_=>{const L=Gx(_);return L.each(U=>Ia(_,"scope",U)),()=>{const U=m.cell({element:_,colspan:1,rowspan:1});return di(U,"width"),di(_,"width"),L.each(ee=>Ia(U,"scope",ee)),U}},merge:_=>{const L=()=>{const U=uc(mn(_,Gx));if(U.length===0)return Be.none();{const ee=U[0],me=["row","col"];return Le(U,Ke=>Ke!==ee&&Jt(me,Ke))?Be.none():Be.from(ee)}};return di(_[0],"width"),L().fold(()=>Pe(_[0],"scope"),U=>Ia(_[0],"scope",U+"group")),ue(_[0])}})},yA=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Zm=(m,h)=>{const C=m.property().name(h);return Jt(["ol","ul"],C)},Yk=(m,h)=>{const C=m.property().name(h);return Jt(yA,C)},fh=(m,h)=>Jt(["br","img","hr","input"],m.property().name(h)),Af=Rx(),XC=m=>Yk(Af,m),Xt=m=>Zm(Af,m),zg=m=>fh(Af,m),T1=m=>{const h=Xr("br"),C=Ee=>Pn(Ee,Ke=>h(Ke)||vi(Ke)&&gi(Ke).trim().length===0),_=Ee=>Er(Ee)==="li"||bn(Ee,Xt).isSome(),L=Ee=>La(Ee).map(Ke=>XC(Ke)?!0:zg(Ke)?Er(Ke)!=="img":!1).getOr(!1),U=Ee=>a1(Ee).bind(Ke=>{const kt=L(Ke);return hr(Ke).map(Bn=>kt===!0||_(Bn)||h(Ke)||XC(Bn)&&!Tn(Ee,Bn)?[]:[fn.fromTag("br")])}).getOr([]),me=(()=>{const Ee=Mt(m,Ke=>{const kt=Bs(Ke);return C(kt)?[]:kt.concat(U(Ke))});return Ee.length===0?[fn.fromTag("br")]:Ee})();xu(m[0]),Es(m[0],me)},Xk=m=>up(m,!0),ay=m=>{Hd(m).length===0&&Xs(m)},fm=(m,h)=>({grid:m,cursor:h}),JC=m=>At(m,h=>At(h.cells,C=>{const _=C.element;return Xp(Xk(_),_)})),xA=(m,h,C)=>{var _,L;const U=ht(m).rows;return Be.from((L=(_=U[h])===null||_===void 0?void 0:_.cells[C])===null||L===void 0?void 0:L.element).filter(Xk).orThunk(()=>JC(U))},jd=(m,h,C)=>{const _=xA(m,h,C);return fm(m,_)},Vv=m=>$e(m,(C,_)=>Le(C,U=>U.row===_.row)?C:C.concat([_]),[]).sort((C,_)=>C.row-_.row),mD=(m,h,C,_)=>{const L=h[0].row,U=Vv(h),ee=Bt(U,(me,Ee)=>({grid:C1(me.grid,L,Ee.row+me.delta,C,_.getOrInit),delta:me.delta+1}),{grid:m,delta:0}).grid;return jd(ee,L,h[0].column)},Jr=(m,h,C,_)=>{const L=Vv(h),U=L[L.length-1],ee=U.row+U.rowspan,me=Bt(L,(Ee,Ke)=>C1(Ee,ee,Ke.row,C,_.getOrInit),m);return jd(me,ee,h[0].column)},E1=(m,h,C,_)=>{const L=h.details,U=mh(L),ee=U[0].column,me=Bt(U,(Ee,Ke)=>({grid:$v(Ee.grid,ee,Ke.column+Ee.delta,C,_.getOrInit),delta:Ee.delta+1}),{grid:m,delta:0}).grid;return jd(me,L[0].row,ee)},Uv=(m,h,C,_)=>{const L=h.details,U=L[L.length-1],ee=U.column+U.colspan,me=mh(L),Ee=Bt(me,(Ke,kt)=>$v(Ke,ee,kt.column,C,_.getOrInit),m);return jd(Ee,L[0].row,ee)},Jk=(m,h,C,_)=>{const L=mh(h),U=mn(L,me=>me.column),ee=zx(m,U,!0,C,_.replaceOrInit);return jd(ee,h[0].row,h[0].column)},wA=(m,h,C,_)=>{const L=qC(m,h,C,_.replaceOrInit);return jd(L,h[0].row,h[0].column)},Qk=(m,h,C,_)=>{const L=mh(h),U=mn(L,me=>me.column),ee=zx(m,U,!1,C,_.replaceOrInit);return jd(ee,h[0].row,h[0].column)},gD=(m,h,C,_)=>{const L=qC(m,h,C,_.replaceOrInit);return jd(L,h[0].row,h[0].column)},iy=(m,h)=>(C,_,L,U,ee)=>{const me=Vv(_),Ee=mn(me,kt=>kt.row),Ke=Kk(C,Ee,m,h,L,U.replaceOrInit,ee);return jd(Ke,_[0].row,_[0].column)},cy=iy("thead",!0),CA=iy("tbody",!1),SA=iy("tfoot",!1),fD=(m,h,C,_)=>{const L=mh(h.details),U=lD(m,mn(L,me=>me.column)),ee=U.length>0?U[0].cells.length-1:0;return jd(U,L[0].row,Math.min(L[0].column,ee))},Di=(m,h,C,_)=>{const L=Vv(h),U=Zk(m,L[0].row,L[L.length-1].row),ee=Math.max(ht(U).rows.length-1,0);return jd(U,Math.min(h[0].row,ee),h[0].column)},QC=(m,h,C,_)=>{const L=h.cells;T1(L);const U=jm(m,h.bounds,C,_.merge(L));return fm(U,Be.from(L[0]))},kA=(m,h,C,_)=>{const U=Bt(h,(ee,me)=>_f(ee,me,C,_.unmerge(me)),m);return fm(U,Be.from(h[0]))},eT=(m,h,C,_)=>{const U=((Ee,Ke)=>{const kt=yr.fromTable(Ee);return Pv(kt,Ke,!0)})(h.clipboard,h.generators),ee=or(h.row,h.column);return rd(ee,m,U,h.generators,C).fold(()=>fm(m,Be.some(h.element)),Ee=>jd(Ee,h.row,h.column))},ly=(m,h,C)=>{const _=Qp(m,C.section),L=yr.generate(_);return Pv(L,h,!0)},Hu=(m,h,C,_)=>{const L=ht(m).rows,U=h.cells[0].column,ee=L[h.cells[0].row],me=ly(h.clipboard,h.generators,ee),Ee=w1(U,m,me,h.generators,C);return jd(Ee,h.cells[0].row,h.cells[0].column)},dg=(m,h,C,_)=>{const L=ht(m).rows,U=h.cells[h.cells.length-1].column+h.cells[h.cells.length-1].colspan,ee=L[h.cells[0].row],me=ly(h.clipboard,h.generators,ee),Ee=w1(U,m,me,h.generators,C);return jd(Ee,h.cells[0].row,U)},TA=(m,h,C,_)=>{const L=ht(m).rows,U=h.cells[0].row,ee=L[U],me=ly(h.clipboard,h.generators,ee),Ee=ub(U,m,me,h.generators,C);return jd(Ee,h.cells[0].row,h.cells[0].column)},go=(m,h,C,_)=>{const L=ht(m).rows,U=h.cells[h.cells.length-1].row+h.cells[h.cells.length-1].rowspan,ee=L[h.cells[0].row],me=ly(h.clipboard,h.generators,ee),Ee=ub(U,m,me,h.generators,C);return jd(Ee,U,h.cells[0].column)},Bl=(m,h)=>{const C=yr.fromTable(m);return _u(C,h).bind(L=>{const U=L[L.length-1],ee=L[0].column,me=U.column+U.colspan,Ee=Et(mn(C.all,Ke=>tt(Ke.cells,kt=>kt.column>=ee&&kt.column<me)));return J0(Ee)}).getOr("")},tT=(m,h)=>{const C=yr.fromTable(m);return _u(C,h).bind(J0).getOr("")},Il=(m,h)=>{const C=yr.fromTable(m);return _u(C,h).bind(L=>{const U=L[L.length-1],ee=L[0].row,me=U.row+U.rowspan,Ee=C.all.slice(ee,me);return Q0(Ee)}).getOr("")},gb=(m,h,C,_)=>vA(m,h,C,_.sizing),ph=(m,h,C,_)=>bA(m,h,C,_.sizing,_.resize),EA=(m,h)=>Le(h,C=>C.column===0&&C.isLocked),zc=(m,h)=>Le(h,C=>C.column+C.colspan>=m.grid.columns&&C.isLocked),nT=(m,h)=>{const C=im(m),_=mh(h);return $e(_,(L,U)=>{const me=C[U.column].map(Ir).getOr(0);return L+me},0)},mg=m=>(h,C)=>_u(h,C).filter(_=>!(m?EA:zc)(h,_)).map(_=>({details:_,pixelDelta:nT(h,_)})),zi=(m,h)=>Fg(m,h).map(C=>({details:C,pixelDelta:-nT(m,C)})),vp=m=>(h,C)=>Uk(h,C).filter(_=>!(m?EA:zc)(h,_.cells)),_1=_d.transform("th"),Wv=_d.transform("td"),qx=Eu(mD,_u,Vt,Vt,_d.modification),e2=Eu(Jr,_u,Vt,Vt,_d.modification),yp=Eu(E1,mg(!0),ph,Vt,_d.modification),mu=Eu(Uv,mg(!1),ph,Vt,_d.modification),hh=Eu(fD,zi,ph,ay,_d.modification),Kx=Eu(Di,_u,Vt,ay,_d.modification),t2=Eu(Jk,Fg,Vt,Vt,_1),pD=Eu(Qk,Fg,Vt,Vt,Wv),n2=Eu(cy,_u,Vt,Vt,_1),oT=Eu(CA,_u,Vt,Vt,Wv),sT=Eu(SA,_u,Vt,Vt,Wv),o2=Eu(wA,Fg,Vt,Vt,_1),rT=Eu(gD,Fg,Vt,Vt,Wv),Yx=Eu(QC,cD,gb,Vt,_d.merging),zu=Eu(kA,Px,gb,Vt,_d.merging),Vg=Eu(eT,uA,gb,Vt,_d.modification),Ug=Eu(Hu,vp(!0),Vt,Vt,_d.modification),Xl=Eu(dg,vp(!1),Vt,Vt,_d.modification),s2=Eu(TA,Uk,Vt,Vt,_d.modification),fb=Eu(go,Uk,Vt,Vt,_d.modification),Xx=Bl,r2=tT,aT=Il,uy=(m,h)=>m.dispatch("NewRow",{node:h}),dy=(m,h)=>m.dispatch("NewCell",{node:h}),pb=(m,h,C)=>{m.dispatch("TableModified",{...C,table:h})},iT=(m,h,C,_,L)=>{m.dispatch("TableSelectionChange",{cells:h,start:C,finish:_,otherCells:L})},Jx=m=>{m.dispatch("TableSelectionClear")},lr=(m,h,C,_,L)=>{m.dispatch("ObjectResizeStart",{target:h,width:C,height:_,origin:L})},pc=(m,h,C,_,L)=>{m.dispatch("ObjectResized",{target:h,width:C,height:_,origin:L})},Fl={structure:!1,style:!0},Fa={structure:!0,style:!1},Jl={structure:!0,style:!0},Jc=(m,h)=>U0(m)?H.percentageSize(h):ug(m)?H.pixelSize(h):H.getTableSize(h),my=(m,h,C)=>{const _=Tc=>Er($a(Tc))==="table",L=Tc=>!_(m)||Ef(Tc).rows>1,U=Tc=>!_(m)||Ef(Tc).columns>1,ee=cp(m),me=lp(m)?Vt:Fv,Ee=Tc=>{switch(nb(m)){case"section":return du.section();case"sectionCells":return du.sectionCells();case"cells":return du.cells();default:return du.getTableSectionType(Tc,"section")}},Ke=(Tc,$f)=>$f.cursor.fold(()=>{const u0=Hd(Tc);return oe(u0).filter(Ds).map(Qm=>{C.clearSelectedCells(Tc.dom);const Js=m.dom.createRng();return Js.selectNode(Qm.dom),m.selection.setRng(Js),Ia(Qm,"data-mce-selected","1"),Js})},u0=>{const Qm=Lu(u0),Js=m.dom.createRng();return Js.setStart(Qm.element.dom,Qm.offset),Js.setEnd(Qm.element.dom,Qm.offset),m.selection.setRng(Js),C.clearSelectedCells(Tc.dom),Be.some(Js)}),kt=(Tc,$f,u0,Qm)=>(Js,Mw,Nw=!1)=>{Wd(Js);const Rb=fn.fromDom(m.getDoc()),nE=xf(u0,Rb,ee),Mb={sizing:Jc(m,Js),resize:lp(m)?kc():fp(),section:Ee(Js)};return $f(Js)?Tc(Js,Mw,nE,Mb).bind(Th=>{h.refresh(Js.dom),Se(Th.newRows,Yg=>{uy(m,Yg.dom)}),Se(Th.newCells,Yg=>{dy(m,Yg.dom)});const Bw=Ke(Js,Th);return Ds(Js)&&(Wd(Js),Nw||pb(m,Js.dom,Qm)),Bw.map(Yg=>({rng:Yg,effect:Qm}))}):Be.none()},Bn=kt(Kx,L,Vt,Fa),co=kt(hh,U,Vt,Fa),Qn=kt(qx,Qe,Vt,Fa),jn=kt(e2,Qe,Vt,Fa),Ho=kt(yp,Qe,me,Fa),On=kt(mu,Qe,me,Fa),ds=kt(Yx,Qe,Vt,Fa),rr=kt(zu,Qe,Vt,Fa),Cn=kt(Ug,Qe,Vt,Fa),_a=kt(Xl,Qe,Vt,Fa),ea=kt(s2,Qe,Vt,Fa),zr=kt(fb,Qe,Vt,Fa),Ui=kt(Vg,Qe,Vt,Jl),hc=kt(o2,Qe,Vt,Fa),Lf=kt(rT,Qe,Vt,Fa),Xm=kt(t2,Qe,Vt,Fa),Kg=kt(pD,Qe,Vt,Fa),Ca=kt(n2,Qe,Vt,Fa),eo=kt(oT,Qe,Vt,Fa),$l=kt(sT,Qe,Vt,Fa);return{deleteRow:Bn,deleteColumn:co,insertRowsBefore:Qn,insertRowsAfter:jn,insertColumnsBefore:Ho,insertColumnsAfter:On,mergeCells:ds,unmergeCells:rr,pasteColsBefore:Cn,pasteColsAfter:_a,pasteRowsBefore:ea,pasteRowsAfter:zr,pasteCells:Ui,makeCellsHeader:hc,unmakeCellsHeader:Lf,makeColumnsHeader:Xm,unmakeColumnsHeader:Kg,makeRowsHeader:Ca,makeRowsBody:eo,makeRowsFooter:$l,getTableRowType:aT,getTableCellType:r2,getTableColType:Xx}},gy=(m,h,C)=>{const _=dc(m,h,1);C===1||_<=1?Pe(m,h):Ia(m,h,Math.min(C,_))},cT=(m,h)=>C=>{const _=C.column+C.colspan-1,L=C.column;return _>=m&&L<h},lT=(m,h,C)=>{if(yr.hasColumns(m)){const _=tt(yr.justColumns(m),cT(h,C)),L=mn(_,ee=>{const me=li(ee.element);return gy(me,"span",C-h),me}),U=fn.fromTag("colgroup");return Es(U,L),[U]}else return[]},Qx=(m,h,C)=>mn(m.all,_=>{const L=tt(_.cells,cT(h,C)),U=mn(L,me=>{const Ee=li(me.element);return gy(Ee,"colspan",C-h),Ee}),ee=fn.fromTag("tr");return Es(ee,U),ee}),Ro=(m,h)=>{const C=yr.fromTable(m);return Fg(C,h).map(L=>{const U=L[L.length-1],ee=L[0].column,me=U.column+U.colspan,Ee=lT(C,ee,me),Ke=Qx(C,ee,me);return[...Ee,...Ke]})},fy=(m,h,C)=>{const _=yr.fromTable(m);return _u(_,h).bind(U=>{const ee=Pv(_,C,!1),Ee=ht(ee).rows.slice(U[0].row,U[U.length-1].row+U[U.length-1].rowspan),Ke=Mt(Ee,Bn=>{const co=tt(Bn.cells,Qn=>!Qn.isLocked);return co.length>0?[{...Bn,cells:co}]:[]}),kt=jC(Ke);return Xp(kt.length>0,kt)}).map(U=>WC(U))},A1=$g.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Gm=(m,h,C)=>{const _=C.substring(0,C.length-m.length),L=parseFloat(_);return _===L.toString()?h(L):A1.invalid(C)},Of={...A1,from:m=>ic(m,"%")?Gm("%",A1.percent,m):ic(m,"px")?Gm("px",A1.pixels,m):A1.invalid(m)},_A=(m,h)=>mn(m,C=>Of.from(C).fold(()=>C,L=>L/h*100+"%",L=>L+"%")),qm=(m,h,C)=>{const _=C/h;return mn(m,L=>Of.from(L).fold(()=>L,ee=>ee*_+"px",ee=>ee/100*C+"px"))},Qr=(m,h)=>{const C=m.fold(()=>ue(""),_=>{const L=_/h;return ue(L+"px")},()=>{const _=100/h;return ue(_+"%")});return Qt(h,C)},AA=(m,h,C)=>m.fold(()=>h,_=>qm(h,C,_),_=>_A(h,C)),Zd=(m,h,C)=>{const _=Of.from(C),L=Pn(m,U=>U==="0px")?Qr(_,m.length):AA(_,m,h);return Ad(L)},Pl=(m,h)=>m.length===0?h:Bt(m,(C,_)=>Of.from(_).fold(ue(0),ve,ve)+C,0),bh=(m,h)=>{const C=Math.floor(m);return{value:C+h,remainder:m-C}},hb=(m,h)=>Of.from(m).fold(ue(m),C=>C+h+"px",C=>C+h+"%"),Ad=m=>{if(m.length===0)return m;const h=Bt(m,(_,L)=>{const U=Of.from(L).fold(()=>({value:L,remainder:0}),ee=>bh(ee,"px"),ee=>({value:ee+"%",remainder:0}));return{output:[U.value].concat(_.output),remainder:_.remainder+U.remainder}},{output:[],remainder:0}),C=h.output;return C.slice(0,C.length-1).concat([hb(C[C.length-1],Math.round(h.remainder))])},uT=Of.from,ew=(m,h,C)=>{Se(h,_=>{const L=m.slice(_.column,_.colspan+_.column),U=Pl(L,_i());nr(_.element,"width",U+C)})},a2=(m,h,C)=>{Se(h,(_,L)=>{const U=Pl([m[L]],_i());nr(_.element,"width",U+C)})},i2=(m,h,C)=>{Se(C,_=>{di(_.element,"height")}),Se(h,(_,L)=>{nr(_.element,"height",m[L])})},c2=m=>uT(m).fold(ue("px"),ue("px"),ue("%")),dT=(m,h,C)=>{const _=yr.fromTable(m),L=_.all,U=yr.justCells(_),ee=yr.justColumns(_);h.each(me=>{const Ee=c2(me),Ke=mc(m),kt=um(_,m),Bn=Zd(kt,Ke,me);yr.hasColumns(_)?a2(Bn,ee,Ee):ew(Bn,U,Ee),nr(m,"width",me)}),C.each(me=>{const Ee=Sn(m),Ke=wd(_,m),kt=Zd(Ke,Ee,me);i2(kt,L,U),nr(m,"height",me)})},l2=Kc,hs=ed,mT=kv,bb=m=>{Pe(m,"width"),Pe(m,"height")},jv=m=>{const h=qc(m);dT(m,Be.some(h),Be.none()),bb(m)},u2=m=>{const h=ia(m);dT(m,Be.some(h),Be.none()),bb(m)},d2=m=>{const h=tn(m);dT(m,Be.none(),Be.some(h)),bb(m)},tw=m=>{di(m,"width");const h=Br(m),C=h.length>0?h:Hd(m);Se(C,_=>{di(_,"width"),bb(_)}),bb(m)},m2={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},hD=()=>fn.fromTag("th"),nw=()=>fn.fromTag("td"),xa=()=>fn.fromTag("col"),bD=(m,h,C,_)=>{const L=fn.fromTag("tr");for(let U=0;U<m;U++){const ee=_<h||U<C?hD():nw();U<C&&Ia(ee,"scope","row"),_<h&&Ia(ee,"scope","col"),Ta(ee,fn.fromTag("br")),Ta(L,ee)}return L},vb=m=>{const h=fn.fromTag("colgroup");return Qt(m,()=>Ta(h,xa())),h},Df=(m,h,C,_)=>Qt(m,L=>bD(h,C,_,L)),g2=(m,h,C,_,L,U=m2)=>{const ee=fn.fromTag("table"),me=L!=="cells";Da(ee,U.styles),Mc(ee,U.attributes),U.colGroups&&Ta(ee,vb(h));const Ee=Math.min(m,C);if(me&&C>0){const Qn=fn.fromTag("thead");Ta(ee,Qn);const Ho=Df(C,h,L==="sectionCells"?Ee:0,_);Es(Qn,Ho)}const Ke=fn.fromTag("tbody");Ta(ee,Ke);const kt=me?m-Ee:m,co=Df(kt,h,me?0:C,_);return Es(Ke,co),ee},hm=m=>m.dom.innerHTML,Au=m=>{const h=fn.fromTag("div"),C=fn.fromDom(m.dom.cloneNode(!0));return Ta(h,C),hm(h)},Zv=(m,h)=>{m.selection.select(h.dom,!0),m.selection.collapse(!0)},ow=(m,h)=>{ou(h,"td,th").each(qt(Zv,m))},O1=(m,h)=>{Se(jr(h,"tr"),C=>{uy(m,C.dom),Se(jr(C,"th,td"),_=>{dy(m,_.dom)})})},f2=m=>no(m)&&m.indexOf("%")!==-1,py=(m,h,C,_,L)=>{const U=_v(m),ee={styles:U,attributes:$c(m),colGroups:Hr(m)};return m.undoManager.ignore(()=>{const me=g2(C,h,L,_,nb(m),ee);Ia(me,"data-mce-id","__mce");const Ee=Au(me);m.insertContent(Ee),m.addVisual()}),ou($a(m),'table[data-mce-id="__mce"]').map(me=>(ug(m)?u2(me):cu(m)?tw(me):(U0(m)||f2(U.width))&&jv(me),Wd(me),Pe(me,"data-mce-id"),O1(m,me),ow(m,me),me.dom)).getOrNull()},vD=(m,h,C,_={})=>{const L=U=>zn(U)&&U>0;if(L(h)&&L(C)){const U=_.headerRows||0,ee=_.headerColumns||0;return py(m,C,h,ee,U)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var hy=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Gr="x-tinymce/dom-table-",Gd=Gr+"rows",yb=Gr+"columns",OA=m=>{const h=hy.FakeClipboardItem(m);hy.write([h])},Gv=m=>{var h;const C=(h=hy.read())!==null&&h!==void 0?h:[];return At(C,_=>Be.from(_.getType(m)))},sa=m=>{Gv(m).isSome()&&hy.clear()},gT=m=>{m.fold(yD,h=>OA({[Gd]:h}))},by=()=>Gv(Gd),yD=()=>sa(Gd),D1=m=>{m.fold(fT,h=>OA({[yb]:h}))},R1=()=>Gv(yb),fT=()=>sa(yb),p2=m=>zC(dp(m),od(m)).filter(l1),vy=m=>Cc(dp(m),od(m)).filter(l1),qv=(m,h)=>{const C=od(m),_=()=>p2(m).each(On=>{su(On,C).filter(re(C)).each(ds=>{const rr=fn.fromText("");if(Ti(ds,rr),Xs(ds),m.dom.isEmpty(m.getBody()))m.setContent(""),m.selection.setCursorLocation();else{const Cn=m.dom.createRng();Cn.setStart(rr.dom,0),Cn.setEnd(rr.dom,0),m.selection.setRng(Cn),m.nodeChanged()}})}),L=On=>p2(m).each(ds=>{cu(m)||ug(m)||U0(m)||su(ds,C).each(Cn=>{On==="relative"&&!l2(Cn)?jv(Cn):On==="fixed"&&!hs(Cn)?u2(Cn):On==="responsive"&&!mT(Cn)&&tw(Cn),Wd(Cn),pb(m,Cn.dom,Fa)})}),U=On=>su(On,C),ee=On=>vy(m).bind(ds=>U(ds).map(rr=>On(rr,ds))),me=(On,ds)=>{ee(rr=>{m.formatter.toggle("tableclass",{value:ds},rr.dom),pb(m,rr.dom,Fl)})},Ee=(On,ds)=>{ee(rr=>{const Cn=Bg(m),ea=Pn(Cn,zr=>m.formatter.match("tablecellclass",{value:ds},zr.dom))?m.formatter.remove:m.formatter.apply;Se(Cn,zr=>ea("tablecellclass",{value:ds},zr.dom)),pb(m,rr.dom,Fl)})},Ke=()=>{p2(m).each(On=>{su(On,C).each(ds=>{cr(ds,"caption").fold(()=>{const rr=fn.fromTag("caption");Ta(rr,fn.fromText("Caption")),ws(ds,rr,0),m.selection.setCursorLocation(rr.dom,0)},rr=>{Xr("caption")(On)&&pn("td",ds).each(Cn=>m.selection.setCursorLocation(Cn.dom,0)),Xs(rr)}),pb(m,ds.dom,Fa)})})},kt=On=>{m.focus()},Bn=(On,ds=!1)=>ee((rr,Cn)=>{const _a=g1(Bg(m),rr,Cn);On(rr,_a,ds).each(kt)}),co=()=>ee((On,ds)=>{const rr=g1(Bg(m),On,ds),Cn=xf(Vt,fn.fromDom(m.getDoc()),Be.none());return fy(On,rr,Cn)}),Qn=()=>ee((On,ds)=>{const rr=g1(Bg(m),On,ds);return Ro(On,rr)}),jn=(On,ds)=>ds().each(rr=>{const Cn=mn(rr,_a=>li(_a));ee((_a,ea)=>{const zr=td(fn.fromDom(m.getDoc())),Ui=Sf(Bg(m),ea,Cn,zr);On(_a,Ui).each(kt)})}),Ho=On=>(ds,rr)=>Zo(rr,"type").each(Cn=>{Bn(On(Cn),rr.no_events)});it({mceTableSplitCells:()=>Bn(h.unmergeCells),mceTableMergeCells:()=>Bn(h.mergeCells),mceTableInsertRowBefore:()=>Bn(h.insertRowsBefore),mceTableInsertRowAfter:()=>Bn(h.insertRowsAfter),mceTableInsertColBefore:()=>Bn(h.insertColumnsBefore),mceTableInsertColAfter:()=>Bn(h.insertColumnsAfter),mceTableDeleteCol:()=>Bn(h.deleteColumn),mceTableDeleteRow:()=>Bn(h.deleteRow),mceTableCutCol:()=>Qn().each(On=>{D1(On),Bn(h.deleteColumn)}),mceTableCutRow:()=>co().each(On=>{gT(On),Bn(h.deleteRow)}),mceTableCopyCol:()=>Qn().each(On=>D1(On)),mceTableCopyRow:()=>co().each(On=>gT(On)),mceTablePasteColBefore:()=>jn(h.pasteColsBefore,R1),mceTablePasteColAfter:()=>jn(h.pasteColsAfter,R1),mceTablePasteRowBefore:()=>jn(h.pasteRowsBefore,by),mceTablePasteRowAfter:()=>jn(h.pasteRowsAfter,by),mceTableDelete:_,mceTableCellToggleClass:Ee,mceTableToggleClass:me,mceTableToggleCaption:Ke,mceTableSizingMode:(On,ds)=>L(ds),mceTableCellType:Ho(On=>On==="th"?h.makeCellsHeader:h.unmakeCellsHeader),mceTableColType:Ho(On=>On==="th"?h.makeColumnsHeader:h.unmakeColumnsHeader),mceTableRowType:Ho(On=>{switch(On){case"header":return h.makeRowsHeader;case"footer":return h.makeRowsFooter;default:return h.makeRowsBody}})},(On,ds)=>m.addCommand(ds,On)),m.addCommand("mceInsertTable",(On,ds)=>{vD(m,ds.rows,ds.columns,ds.options)}),m.addCommand("mceTableApplyCellStyle",(On,ds)=>{const rr=ea=>"tablecell"+ea.toLowerCase().replace("-","");if(!Tt(ds))return;const Cn=tt(Bg(m),l1);if(Cn.length===0)return;const _a=ot(ds,(ea,zr)=>m.formatter.has(rr(zr))&&no(ea));No(_a)||(it(_a,(ea,zr)=>{const Ui=rr(zr);Se(Cn,hc=>{ea===""?m.formatter.remove(Ui,{value:null},hc.dom,!0):m.formatter.apply(Ui,{value:ea},hc.dom)})}),U(Cn[0]).each(ea=>pb(m,ea.dom,Fl)))})},yy=(m,h)=>{const C=od(m),_=L=>Cc(dp(m)).bind(U=>su(U,C).map(ee=>{const me=g1(Bg(m),ee,U);return L(ee,me)})).getOr("");it({mceTableRowType:()=>_(h.getTableRowType),mceTableCellType:()=>_(h.getTableCellType),mceTableColType:()=>_(h.getTableColType)},(L,U)=>m.addQueryValueHandler(U,L))},h2=$g.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sw=(m,h,C,_)=>m.fold(h,C,_),Rf=m=>m.fold(ve,ve,ve),rw=h2.before,b2=h2.on,v2=h2.after,Vu={before:rw,on:b2,after:v2,cata:sw,getStart:Rf},vh={create:(m,h)=>({selection:m,kill:h})},DA=(m,h)=>{const C=m.document.createRange();return C.selectNode(h.dom),C},xb=(m,h)=>{const C=m.document.createRange();return aw(C,h),C},aw=(m,h)=>m.selectNodeContents(h.dom),y2=(m,h)=>{h.fold(C=>{m.setStartBefore(C.dom)},(C,_)=>{m.setStart(C.dom,_)},C=>{m.setStartAfter(C.dom)})},RA=(m,h)=>{h.fold(C=>{m.setEndBefore(C.dom)},(C,_)=>{m.setEnd(C.dom,_)},C=>{m.setEndAfter(C.dom)})},pT=(m,h,C)=>{const _=m.document.createRange();return y2(_,h),RA(_,C),_},Kv=(m,h,C,_,L)=>{const U=m.document.createRange();return U.setStart(h.dom,C),U.setEnd(_.dom,L),U},hT=m=>({left:m.left,top:m.top,right:m.right,bottom:m.bottom,width:m.width,height:m.height}),MA=m=>{const h=m.getClientRects(),C=h.length>0?h[0]:m.getBoundingClientRect();return C.width>0||C.height>0?Be.some(C).map(hT):Be.none()},xy=$g.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bT=(m,h,C)=>h(fn.fromDom(C.startContainer),C.startOffset,fn.fromDom(C.endContainer),C.endOffset),xD=(m,h)=>h.match({domRange:C=>({ltr:ue(C),rtl:Be.none}),relative:(C,_)=>({ltr:cf(()=>pT(m,C,_)),rtl:cf(()=>Be.some(pT(m,_,C)))}),exact:(C,_,L,U)=>({ltr:cf(()=>Kv(m,C,_,L,U)),rtl:cf(()=>Be.some(Kv(m,L,U,C,_)))})}),iw=(m,h)=>{const C=h.ltr();return C.collapsed?h.rtl().filter(L=>L.collapsed===!1).map(L=>xy.rtl(fn.fromDom(L.endContainer),L.endOffset,fn.fromDom(L.startContainer),L.startOffset)).getOrThunk(()=>bT(m,xy.ltr,C)):bT(m,xy.ltr,C)},vT=(m,h)=>{const C=xD(m,h);return iw(m,C)},x2=(m,h)=>vT(m,h).match({ltr:(_,L,U,ee)=>{const me=m.document.createRange();return me.setStart(_.dom,L),me.setEnd(U.dom,ee),me},rtl:(_,L,U,ee)=>{const me=m.document.createRange();return me.setStart(U.dom,ee),me.setEnd(_.dom,L),me}});xy.ltr,xy.rtl;const wy={create:(m,h,C,_)=>({start:m,soffset:h,finish:C,foffset:_})},yT={create:(m,h,C,_)=>({start:Vu.on(m,h),finish:Vu.on(C,_)})},xT=(m,h)=>{const C=x2(m,h);return wy.create(fn.fromDom(C.startContainer),C.startOffset,fn.fromDom(C.endContainer),C.endOffset)},w2=yT.create,BA=(m,h,C,_,L,U,ee)=>Tn(C,L)&&_===U?Be.none():Nc(C,"td,th",h).bind(me=>Nc(L,"td,th",h).bind(Ee=>wT(m,h,me,Ee,ee))),wT=(m,h,C,_,L)=>Tn(C,_)?Be.none():$C(C,_,h).bind(U=>{const ee=U.boxes.getOr([]);return ee.length>1?(L(m,ee,U.start,U.finish),Be.some(vh.create(Be.some(w2(C,0,C,iu(C))),!0))):Be.none()}),CT=(m,h,C,_,L)=>{const U=ee=>(L.clearBeforeUpdate(C),L.selectRange(C,ee.boxes,ee.start,ee.finish),ee.boxes);return rD(_,m,h,L.firstSelectedSelector,L.lastSelectedSelector).map(U)},Yv=(m,h)=>({item:m,mode:h}),Cy=(m,h,C,_=Sy)=>m.property().parent(h).map(L=>Yv(L,_)),Sy=(m,h,C,_=ky)=>C.sibling(m,h).map(L=>Yv(L,_)),ky=(m,h,C,_=ky)=>{const L=m.property().children(h);return C.first(L).map(ee=>Yv(ee,_))},IA=[{current:Cy,next:Sy,fallback:Be.none()},{current:Sy,next:ky,fallback:Be.some(Cy)},{current:ky,next:ky,fallback:Be.some(Sy)}],ST=(m,h,C,_,L=IA)=>Y(L,ee=>ee.current===C).bind(ee=>ee.current(m,h,_,ee.next).orThunk(()=>ee.fallback.bind(me=>ST(m,h,me,_)))),M1={left:()=>({sibling:(C,_)=>C.query().prevSibling(_),first:C=>C.length>0?Be.some(C[C.length-1]):Be.none()}),right:()=>({sibling:(C,_)=>C.query().nextSibling(_),first:C=>C.length>0?Be.some(C[0]):Be.none()})},C2=(m,h,C,_,L,U)=>ST(m,h,_,L).bind(me=>U(me.item)?Be.none():C(me.item)?Be.some(me.item):C2(m,me.item,C,me.mode,L,U)),kT=(m,h,C,_)=>C2(m,h,C,Sy,M1.left(),_),S2=(m,h,C,_)=>C2(m,h,C,Sy,M1.right(),_),TT=m=>h=>m.property().children(h).length===0,SD=(m,h,C)=>N1(m,h,TT(m),C),kD=(m,h,C)=>Xv(m,h,TT(m),C),N1=kT,Xv=S2,Ty=Rx(),ET=(m,h)=>SD(Ty,m,h),k2=(m,h)=>kD(Ty,m,h),_T=(m,h,C)=>N1(Ty,m,h,C),AT=(m,h,C)=>Xv(Ty,m,h,C),TD=(m,h,C)=>bn(m,h,C).isSome(),T2=$g.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ey=(m,h,C)=>{const _=m.getRect(h),L=m.getRect(C);return L.right>_.left&&L.left<_.right},FA=m=>Nc(m,"tr"),_y={...T2,verify:(m,h,C,_,L,U,ee)=>Nc(_,"td,th",ee).bind(me=>Nc(h,"td,th",ee).map(Ee=>Tn(me,Ee)?Tn(_,me)&&iu(me)===L?U(Ee):T2.none("in same cell"):Mx(FA,[me,Ee]).fold(()=>Ey(m,Ee,me)?T2.success():U(Ee),Ke=>U(Ee)))).getOr(T2.none("default")),cata:(m,h,C,_,L)=>m.fold(h,C,_,L)},PA=(m,h,C,_)=>({parent:m,children:h,element:C,index:_}),LA=m=>hr(m).bind(h=>{const C=Bs(h);return qd(C,m).map(_=>PA(h,C,m,_))}),qd=(m,h)=>Jo(m,qt(Tn,h)),E2=Xr("br"),OT=(m,h,C)=>h(m,C).bind(_=>vi(_)&&gi(_).trim().length===0?OT(_,h,C):Be.some(_)),_D=(m,h,C)=>C.traverse(h).orThunk(()=>OT(h,C.gather,m)).map(C.relative),DT=(m,h)=>er(m,h).filter(E2).orThunk(()=>er(m,h-1).filter(E2)),cw=(m,h,C,_)=>DT(h,C).bind(L=>_.traverse(L).fold(()=>OT(L,_.gather,m).map(_.relative),U=>LA(U).map(ee=>Vu.on(ee.parent,ee.index)))),lw=(m,h,C,_)=>(E2(h)?_D(m,h,_):cw(m,h,C,_)).map(U=>({start:U,finish:U})),$A=m=>_y.cata(m,h=>Be.none(),()=>Be.none(),h=>Be.some(Yl(h,0)),h=>Be.some(Yl(h,iu(h)))),Ay=(m,h)=>({left:m.left,top:m.top+h,right:m.right,bottom:m.bottom+h}),RT=(m,h)=>({left:m.left,top:m.top-h,right:m.right,bottom:m.bottom-h}),ts=(m,h,C)=>({left:m.left+h,top:m.top+C,right:m.right+h,bottom:m.bottom+C}),MT=m=>m.top,Oy=m=>m.bottom,AD=(m,h,C)=>C>=0&&C<iu(h)?m.getRangedRect(h,C,h,C+1):C>0?m.getRangedRect(h,C-1,h,C):Be.none(),Qv=m=>({left:m.left,top:m.top,right:m.right,bottom:m.bottom}),_2=(m,h)=>Be.some(m.getRect(h)),wp=(m,h,C)=>Aa(h)?_2(m,h).map(Qv):vi(h)?AD(m,h,C).map(Qv):Be.none(),wb=(m,h)=>Aa(h)?_2(m,h).map(Qv):vi(h)?m.getRangedRect(h,0,h,iu(h)).map(Qv):Be.none(),yh=5,_s=100,Ts=$g.generate([{none:[]},{retry:["caret"]}]),xh=(m,h)=>m.left<h.left||Math.abs(h.right-m.left)<1||m.left>h.right,Mf=(m,h,C)=>fl(h,XC).fold(qn,_=>wb(m,_).exists(L=>xh(C,L))),A2=(m,h,C,_,L)=>{const U=Ay(L,yh);return Math.abs(C.bottom-_.bottom)<1||C.top>L.bottom?Ts.retry(U):C.top===L.bottom?Ts.retry(Ay(L,1)):Mf(m,h,L)?Ts.retry(ts(U,yh,0)):Ts.none()},Rs={point:MT,adjuster:(m,h,C,_,L)=>{const U=RT(L,yh);return Math.abs(C.top-_.top)<1||C.bottom<L.top?Ts.retry(U):C.bottom===L.top?Ts.retry(RT(L,1)):Mf(m,h,L)?Ts.retry(ts(U,yh,0)):Ts.none()},move:RT,gather:ET},e0={point:Oy,adjuster:A2,move:Ay,gather:k2},t0=(m,h,C)=>m.elementFromPoint(h,C).filter(_=>Er(_)==="table").isSome(),n0=(m,h,C,_,L)=>Dy(m,h,C,h.move(_,yh),L),Dy=(m,h,C,_,L)=>L===0?Be.some(_):t0(m,_.left,h.point(_))?n0(m,h,C,_,L-1):m.situsFromPoint(_.left,h.point(_)).bind(U=>U.start.fold(Be.none,ee=>wb(m,ee).bind(me=>h.adjuster(m,ee,me,C,_).fold(Be.none,Ee=>Dy(m,h,C,Ee,L-1))).orThunk(()=>Be.some(_)),Be.none)),zA=(m,h,C)=>m.point(h)>C.getInnerHeight()?Be.some(m.point(h)-C.getInnerHeight()):m.point(h)<0?Be.some(-m.point(h)):Be.none(),o0=(m,h,C)=>{const _=m.move(C,yh),L=Dy(h,m,C,_,_s).getOr(_);return zA(m,L,h).fold(()=>h.situsFromPoint(L.left,m.point(L)),U=>(h.scrollBy(0,U),h.situsFromPoint(L.left,m.point(L)-U)))},Ry={tryUp:qt(o0,Rs),tryDown:qt(o0,e0),getJumpSize:ue(yh)},ur=20,O2=(m,h,C)=>m.getSelection().bind(_=>lw(h,_.finish,_.foffset,C).fold(()=>Be.some(Yl(_.finish,_.foffset)),L=>{const U=m.fromSitus(L),ee=_y.verify(m,_.finish,_.foffset,U.finish,U.foffset,C.failure,h);return $A(ee)})),Cb=(m,h,C,_,L,U)=>U===0?Be.none():Cp(m,h,C,_,L).bind(ee=>{const me=m.fromSitus(ee),Ee=_y.verify(m,C,_,me.finish,me.foffset,L.failure,h);return _y.cata(Ee,()=>Be.none(),()=>Be.some(ee),Ke=>Tn(C,Ke)&&_===0?Ql(m,C,_,RT,L):Cb(m,h,Ke,0,L,U-1),Ke=>Tn(C,Ke)&&_===iu(Ke)?Ql(m,C,_,Ay,L):Cb(m,h,Ke,iu(Ke),L,U-1))}),Ql=(m,h,C,_,L)=>wp(m,h,C).bind(U=>NT(m,L,_(U,Ry.getJumpSize()))),NT=(m,h,C)=>{const _=Yu().browser;return _.isChromium()||_.isSafari()||_.isFirefox()?h.retry(m,C):Be.none()},Cp=(m,h,C,_,L)=>wp(m,C,_).bind(U=>NT(m,L,U)),BT=(m,h,C)=>O2(m,h,C).bind(_=>Cb(m,h,_.element,_.offset,C,ur).map(m.fromSitus)),uw=(m,h)=>TD(m,C=>hr(C).exists(_=>Tn(_,h))),s0=(m,h,C,_,L)=>Nc(_,"td,th",h).bind(U=>Nc(U,"table",h).bind(ee=>uw(L,ee)?BT(m,h,C).bind(me=>Nc(me.finish,"td,th",h).map(Ee=>({start:U,finish:Ee,range:me}))):Be.none())),VA=(m,h,C,_,L,U)=>U(_,h).orThunk(()=>s0(m,h,C,_,L).map(ee=>{const me=ee.range;return vh.create(Be.some(w2(me.start,me.soffset,me.finish,me.foffset)),!0)})),D2=(m,h)=>Nc(m,"tr",h).bind(C=>Nc(C,"table",h).bind(_=>{const L=jr(_,"tr");return Tn(C,L[0])?_T(_,U=>a1(U).isSome(),h).map(U=>{const ee=iu(U);return vh.create(Be.some(w2(U,ee,U,ee)),!0)}):Be.none()})),TB=(m,h)=>Nc(m,"tr",h).bind(C=>Nc(C,"table",h).bind(_=>{const L=jr(_,"tr");return Tn(C,L[L.length-1])?AT(_,U=>ip(U).isSome(),h).map(U=>vh.create(Be.some(w2(U,0,U,0)),!0)):Be.none()})),IT=(m,h,C,_,L,U,ee)=>s0(m,C,_,L,U).bind(me=>wT(h,C,me.start,me.finish,ee)),gu=m=>{let h=m;return{get:()=>h,set:L=>{h=L}}},dw=m=>{const h=gu(Be.none()),C=()=>h.get().each(m);return{clear:()=>{C(),h.set(Be.none())},isSet:()=>h.get().isSome(),get:()=>h.get(),set:me=>{C(),h.set(Be.some(me))}}},Nf=()=>{const m=dw(Vt);return{...m,on:C=>m.get().each(C)}},Km=(m,h)=>Nc(m,"td,th",h),UA=m=>Va(m).exists(up),FT=(m,h,C,_)=>{const L=Nf(),U=L.clear,ee=kt=>{L.on(Bn=>{_.clearBeforeUpdate(h),Km(kt.target,C).each(co=>{$C(Bn,co,C).each(Qn=>{const jn=Qn.boxes.getOr([]);if(jn.length===1){const Ho=jn[0],On=Av(Ho)==="false",ds=Ul(dm(kt.target),Ho,Tn);On&&ds&&_.selectRange(h,jn,Ho,Ho)}else jn.length>1&&(_.selectRange(h,jn,Qn.start,Qn.finish),m.selectContents(co))})})})};return{clearstate:U,mousedown:kt=>{_.clear(h),Km(kt.target,C).filter(UA).each(L.set)},mouseover:kt=>{ee(kt)},mouseup:kt=>{ee(kt),U()}}},R2={traverse:La,gather:k2,relative:Vu.before,retry:Ry.tryDown,failure:_y.failedDown},M2={traverse:Al,gather:ET,relative:Vu.before,retry:Ry.tryUp,failure:_y.failedUp},Wg=m=>h=>h===m,N2=Wg(38),Sp=Wg(40),ad=m=>m>=37&&m<=40,r0={isBackward:Wg(37),isForward:Wg(39)},kp={isBackward:Wg(39),isForward:Wg(37)},B1=m=>{const h=m!==void 0?m.dom:document,C=h.body.scrollLeft||h.documentElement.scrollLeft,_=h.body.scrollTop||h.documentElement.scrollTop;return _o(C,_)},Vi=(m,h,C)=>{const L=(C!==void 0?C.dom:document).defaultView;L&&L.scrollBy(m,h)},Ou=$g.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),kl=m=>Ou.exact(m.start,m.soffset,m.finish,m.foffset),Ma=m=>m.match({domRange:h=>fn.fromDom(h.startContainer),relative:(h,C)=>Vu.getStart(h),exact:(h,C,_,L)=>h}),bm=Ou.domRange,Od=Ou.relative,wh=Ou.exact,mw=m=>{const h=Ma(m);return cs(h)},WA=wy.create,Bf={domRange:bm,relative:Od,exact:wh,exactFromRange:kl,getWin:mw,range:WA},Ha=(m,h,C)=>{var _;return Be.from((_=m.caretPositionFromPoint)===null||_===void 0?void 0:_.call(m,h,C)).bind(L=>{if(L.offsetNode===null)return Be.none();const U=m.createRange();return U.setStart(L.offsetNode,L.offset),U.collapse(),Be.some(U)})},My=(m,h,C)=>{var _;return Be.from((_=m.caretRangeFromPoint)===null||_===void 0?void 0:_.call(m,h,C))},gw=(m,h,C)=>m.caretPositionFromPoint?Ha(m,h,C):m.caretRangeFromPoint?My(m,h,C):Be.none(),PT=(m,h,C)=>{const _=m.document;return gw(_,h,C).map(L=>wy.create(fn.fromDom(L.startContainer),L.startOffset,fn.fromDom(L.endContainer),L.endOffset))},I1=(m,h)=>{const C=Er(m);return C==="input"?Vu.after(m):Jt(["br","img"],C)?h===0?Vu.before(m):Vu.after(m):Vu.on(m,h)},LT=(m,h)=>{const C=m.fold(Vu.before,I1,Vu.after),_=h.fold(Vu.before,I1,Vu.after);return Bf.relative(C,_)},B2=(m,h,C,_)=>{const L=I1(m,h),U=I1(C,_);return Bf.relative(L,U)},$T=(m,h,C,_)=>{const U=Eo(m).dom.createRange();return U.setStart(m.dom,h),U.setEnd(C.dom,_),U},HT=(m,h,C,_)=>{const L=$T(m,h,C,_),U=Tn(m,C)&&h===_;return L.collapsed&&!U},F1=m=>Be.from(m.getSelection()),Ny=(m,h)=>{F1(m).each(C=>{C.removeAllRanges(),C.addRange(h)})},I2=(m,h,C,_,L)=>{const U=Kv(m,h,C,_,L);Ny(m,U)},jA=(m,h,C,_,L,U)=>{h.collapse(C.dom,_),h.extend(L.dom,U)},qr=(m,h)=>vT(m,h).match({ltr:(C,_,L,U)=>{I2(m,C,_,L,U)},rtl:(C,_,L,U)=>{F1(m).each(ee=>{if(ee.setBaseAndExtent)ee.setBaseAndExtent(C.dom,_,L.dom,U);else if(ee.extend)try{jA(m,ee,C,_,L,U)}catch{I2(m,L,U,C,_)}else I2(m,L,U,C,_)})}}),Ch=(m,h,C,_,L)=>{const U=B2(h,C,_,L);qr(m,U)},P1=(m,h,C)=>{const _=LT(h,C);qr(m,_)},Sb=m=>{if(m.rangeCount>0){const h=m.getRangeAt(0),C=m.getRangeAt(m.rangeCount-1);return Be.some(wy.create(fn.fromDom(h.startContainer),h.startOffset,fn.fromDom(C.endContainer),C.endOffset))}else return Be.none()},ZA=m=>{if(m.anchorNode===null||m.focusNode===null)return Sb(m);{const h=fn.fromDom(m.anchorNode),C=fn.fromDom(m.focusNode);return HT(h,m.anchorOffset,C,m.focusOffset)?Be.some(wy.create(h,m.anchorOffset,C,m.focusOffset)):Sb(m)}},Dd=(m,h,C=!0)=>{const L=(C?xb:DA)(m,h);Ny(m,L)},EB=m=>F1(m).filter(h=>h.rangeCount>0).bind(ZA),a0=m=>EB(m).map(h=>Bf.exact(h.start,h.soffset,h.finish,h.foffset)),Sh=(m,h)=>{const C=x2(m,h);return MA(C)},fw=(m,h,C)=>PT(m,h,C),zT=m=>{F1(m).each(h=>h.removeAllRanges())},pw=m=>({elementFromPoint:(On,ds)=>fn.fromPoint(fn.fromDom(m.document),On,ds),getRect:On=>On.dom.getBoundingClientRect(),getRangedRect:(On,ds,rr,Cn)=>{const _a=Bf.exact(On,ds,rr,Cn);return Sh(m,_a)},getSelection:()=>a0(m).map(On=>xT(m,On)),fromSitus:On=>{const ds=Bf.relative(On.start,On.finish);return xT(m,ds)},situsFromPoint:(On,ds)=>fw(m,On,ds).map(rr=>yT.create(rr.start,rr.soffset,rr.finish,rr.foffset)),clearSelection:()=>{zT(m)},collapseSelection:(On=!1)=>{a0(m).each(ds=>ds.fold(rr=>rr.collapse(On),(rr,Cn)=>{const _a=On?rr:Cn;P1(m,_a,_a)},(rr,Cn,_a,ea)=>{const zr=On?rr:_a,Ui=On?Cn:ea;Ch(m,zr,Ui,zr,Ui)}))},setSelection:On=>{Ch(m,On.start,On.soffset,On.finish,On.foffset)},setRelativeSelection:(On,ds)=>{P1(m,On,ds)},selectNode:On=>{Dd(m,On,!1)},selectContents:On=>{Dd(m,On)},getInnerHeight:()=>m.innerHeight,getScrollY:()=>B1(fn.fromDom(m.document)).top,scrollBy:(On,ds)=>{Vi(On,ds,fn.fromDom(m.document))}}),By=(m,h)=>({rows:m,cols:h}),GA=(m,h,C,_)=>{const L=pw(m),U=FT(L,h,C,_);return{clearstate:U.clearstate,mousedown:U.mousedown,mouseover:U.mouseover,mouseup:U.mouseup}},qA=m=>fl(m,Lo).exists(up),hw=(m,h)=>qA(m)||qA(h),L1=(m,h,C,_)=>{const L=pw(m),U=()=>(_.clear(h),Be.none());return{keydown:(Ee,Ke,kt,Bn,co,Qn)=>{const jn=Ee.raw,Ho=jn.which,On=jn.shiftKey===!0;return mm(h,_.selectedSelector).fold(()=>(ad(Ho)&&!On&&_.clearBeforeUpdate(h),ad(Ho)&&On&&!hw(Ke,Bn)?Be.none:Sp(Ho)&&On?qt(IT,L,h,C,R2,Bn,Ke,_.selectRange):N2(Ho)&&On?qt(IT,L,h,C,M2,Bn,Ke,_.selectRange):Sp(Ho)?qt(VA,L,C,R2,Bn,Ke,TB):N2(Ho)?qt(VA,L,C,M2,Bn,Ke,D2):Be.none),rr=>{const Cn=_a=>()=>At(_a,zr=>CT(zr.rows,zr.cols,h,rr,_)).fold(()=>tc(h,_.firstSelectedSelector,_.lastSelectedSelector).map(zr=>{const Ui=Sp(Ho)||Qn.isForward(Ho)?Vu.after:Vu.before;return L.setRelativeSelection(Vu.on(zr.first,0),Ui(zr.table)),_.clear(h),vh.create(Be.none(),!0)}),zr=>Be.some(vh.create(Be.none(),!0)));return ad(Ho)&&On&&!hw(Ke,Bn)?Be.none:Sp(Ho)&&On?Cn([By(1,0)]):N2(Ho)&&On?Cn([By(-1,0)]):Qn.isBackward(Ho)&&On?Cn([By(0,-1),By(-1,0)]):Qn.isForward(Ho)&&On?Cn([By(0,1),By(1,0)]):ad(Ho)&&!On?U:Be.none})()},keyup:(Ee,Ke,kt,Bn,co)=>mm(h,_.selectedSelector).fold(()=>{const Qn=Ee.raw,jn=Qn.which;return Qn.shiftKey===!0&&ad(jn)&&hw(Ke,Bn)?BA(h,C,Ke,kt,Bn,co,_.selectRange):Be.none()},Be.none)}},Iy=(m,h,C,_)=>{const L=pw(m);return(U,ee)=>{_.clearBeforeUpdate(h),$C(U,ee,C).each(me=>{const Ee=me.boxes.getOr([]);_.selectRange(h,Ee,me.start,me.finish),L.selectContents(ee),L.collapseSelection()})}},bw=(m,h)=>{const C=Ga(m,h);return C===void 0||C===""?[]:C.split(" ")},OD=(m,h,C)=>{const L=bw(m,h).concat([C]);return Ia(m,h,L.join(" ")),!0},VT=(m,h,C)=>{const _=tt(bw(m,h),L=>L!==C);return _.length>0?Ia(m,h,_.join(" ")):Pe(m,h),!1},$1=m=>m.dom.classList!==void 0,vw=m=>bw(m,"class"),F2=(m,h)=>OD(m,"class",h),yw=(m,h)=>VT(m,"class",h),If=(m,h)=>{$1(m)?m.dom.classList.add(h):F2(m,h)},UT=m=>{($1(m)?m.dom.classList:vw(m)).length===0&&Pe(m,"class")},Fy=(m,h)=>{$1(m)?m.dom.classList.remove(h):yw(m,h),UT(m)},Py=(m,h)=>$1(m)&&m.dom.classList.contains(h),KA=(m,h)=>{Se(h,C=>{Fy(m,C)})},P2=m=>h=>{If(h,m)},L2=m=>h=>{KA(h,m)},kb={byClass:m=>{const h=P2(m.selected),C=L2([m.selected,m.lastSelected,m.firstSelected]),_=U=>{const ee=jr(U,m.selectedSelector);Se(ee,C)};return{clearBeforeUpdate:_,clear:_,selectRange:(U,ee,me,Ee)=>{_(U),Se(ee,h),If(me,m.firstSelected),If(Ee,m.lastSelected)},selectedSelector:m.selectedSelector,firstSelectedSelector:m.firstSelectedSelector,lastSelectedSelector:m.lastSelectedSelector}},byAttr:(m,h,C)=>{const _=Ee=>{Pe(Ee,m.selected),Pe(Ee,m.firstSelected),Pe(Ee,m.lastSelected)},L=Ee=>{Ia(Ee,m.selected,"1")},U=Ee=>{ee(Ee),C()},ee=Ee=>{const Ke=jr(Ee,`${m.selectedSelector},${m.firstSelectedSelector},${m.lastSelectedSelector}`);Se(Ke,_)};return{clearBeforeUpdate:ee,clear:U,selectRange:(Ee,Ke,kt,Bn)=>{U(Ee),Se(Ke,L),Ia(kt,m.firstSelected,"1"),Ia(Bn,m.lastSelected,"1"),h(Ke,kt,Bn)},selectedSelector:m.selectedSelector,firstSelectedSelector:m.firstSelectedSelector,lastSelectedSelector:m.lastSelectedSelector}}},xw=(m,h,C,_)=>{switch(m.tag){case"none":return h();case"single":return _(m.element);case"multiple":return C(m.elements)}},ao=()=>({tag:"none"}),Ll=m=>({tag:"multiple",elements:m}),Ly=m=>({tag:"single",element:m}),nc=(m,h,C)=>({get:()=>ih(m(),C).fold(()=>h().fold(ao,Ly),Ll)}),vm=(m,h)=>{const C=m.slice(0,h[h.length-1].row+1),_=jC(C);return Mt(_,L=>{const U=L.cells.slice(0,h[h.length-1].column+1);return mn(U,ee=>ee.element)})},$y=(m,h)=>{const C=m.slice(h[0].row+h[0].rowspan-1,m.length),_=jC(C);return Mt(_,L=>{const U=L.cells.slice(h[0].column+h[0].colspan-1,L.cells.length);return mn(U,ee=>ee.element)})},Ff=(m,h,C)=>{const _=yr.fromTable(m);return _u(_,h).map(U=>{const ee=Pv(_,C,!1),{rows:me}=ht(ee),Ee=vm(me,U),Ke=$y(me,U);return{upOrLeftCells:Ee,downOrRightCells:Ke}})},Tp=(m,h,C,_,L,U,ee)=>({target:m,x:h,y:C,stop:_,prevent:L,kill:U,raw:ee}),Hy=m=>{const h=fn.fromDom(Kn(m).getOr(m.target)),C=()=>m.stopPropagation(),_=()=>m.preventDefault(),L=Ue(_,C);return Tp(h,m.clientX,m.clientY,C,_,L,m)},jT=(m,h)=>C=>{m(C)&&h(Hy(C))},XA=(m,h,C,_,L)=>{const U=jT(C,_);return m.dom.addEventListener(h,U,L),{unbind:qt(Ep,m,h,U,L)}},JA=(m,h,C,_)=>XA(m,h,C,_,!1),Ep=(m,h,C,_)=>{m.dom.removeEventListener(h,C,_)},QA=Qe,gg=(m,h,C)=>JA(m,h,QA,C),eu=Hy,wa=m=>!Py(fn.fromDom(m.target),"ephox-snooker-resizer-bar"),Pf=(m,h)=>{const C=nc(()=>fn.fromDom(m.getBody()),()=>Cc(dp(m),od(m)),gm.selectedSelector),_=(Ee,Ke,kt)=>{su(Ke).each(co=>{const Qn=mn(Ee,rr=>rr.dom),jn=cp(m),Ho=xf(Vt,fn.fromDom(m.getDoc()),jn),On=Bg(m),ds=Ff(co,{selection:On},Ho).map(rr=>Dt(rr,Cn=>mn(Cn,_a=>_a.dom))).getOrUndefined();iT(m,Qn,Ke.dom,kt.dom,ds)})},L=()=>Jx(m),U=kb.byAttr(gm,_,L);return m.on("init",Ee=>{const Ke=m.getWin(),kt=$a(m),Bn=od(m),co=()=>{const Ca=m.selection,eo=fn.fromDom(Ca.getStart()),$l=fn.fromDom(Ca.getEnd());Mx(su,[eo,$l]).fold(()=>U.clear(kt),Vt)},Qn=GA(Ke,kt,Bn,U),jn=L1(Ke,kt,Bn,U),Ho=Iy(Ke,kt,Bn,U),On=Ca=>Ca.raw.shiftKey===!0;m.on("TableSelectorChange",Ca=>Ho(Ca.start,Ca.finish));const ds=(Ca,eo)=>{On(Ca)&&(eo.kill&&Ca.kill(),eo.selection.each($l=>{const ld=Bf.relative($l.start,$l.finish),Jm=x2(Ke,ld);m.selection.setRng(Jm)}))},rr=Ca=>{const eo=eu(Ca);if(eo.raw.shiftKey&&ad(eo.raw.which)){const $l=m.selection.getRng(),ld=fn.fromDom($l.startContainer),Jm=fn.fromDom($l.endContainer);jn.keyup(eo,ld,$l.startOffset,Jm,$l.endOffset).each(fr=>{ds(eo,fr)})}},Cn=Ca=>{const eo=eu(Ca);h.hide();const $l=m.selection.getRng(),ld=fn.fromDom($l.startContainer),Jm=fn.fromDom($l.endContainer),fr=ne(r0,kp)(fn.fromDom(m.selection.getStart()));jn.keydown(eo,ld,$l.startOffset,Jm,$l.endOffset,fr).each(Tc=>{ds(eo,Tc)}),h.show()},_a=Ca=>Ca.button===0,ea=Ca=>Ca.buttons===void 0?!0:(Ca.buttons&1)!==0,zr=Ca=>{Qn.clearstate()},Ui=Ca=>{_a(Ca)&&wa(Ca)&&Qn.mousedown(eu(Ca))},hc=Ca=>{ea(Ca)&&wa(Ca)&&Qn.mouseover(eu(Ca))},Lf=Ca=>{_a(Ca)&&wa(Ca)&&Qn.mouseup(eu(Ca))},Kg=(()=>{const Ca=gu(fn.fromDom(kt)),eo=gu(0);return{touchEnd:ld=>{const Jm=fn.fromDom(ld.target);if(Xr("td")(Jm)||Xr("th")(Jm)){const fr=Ca.get(),Tc=eo.get();Tn(fr,Jm)&&ld.timeStamp-Tc<300&&(ld.preventDefault(),Ho(Jm,Jm))}Ca.set(Jm),eo.set(ld.timeStamp)}}})();m.on("dragstart",zr),m.on("mousedown",Ui),m.on("mouseover",hc),m.on("mouseup",Lf),m.on("touchend",Kg.touchEnd),m.on("keyup",rr),m.on("keydown",Cn),m.on("NodeChange",co)}),m.on("PreInit",()=>{m.serializer.addTempAttr(gm.firstSelected),m.serializer.addTempAttr(gm.lastSelected)}),{getSelectedCells:()=>xw(C.get(),ue([]),Ee=>mn(Ee,Ke=>Ke.dom),Ee=>[Ee.dom]),clearSelectedCells:Ee=>U.clear(fn.fromDom(Ee))}},ir=m=>{let h=[];return{bind:U=>{if(U===void 0)throw new Error("Event bind error: undefined handler");h.push(U)},unbind:U=>{h=tt(h,ee=>ee!==U)},trigger:(...U)=>{const ee={};Se(m,(me,Ee)=>{ee[me]=U[Ee]}),Se(h,me=>{me(ee)})}}},Tb=m=>{const h=Dt(m,_=>({bind:_.bind,unbind:_.unbind})),C=Dt(m,_=>_.trigger);return{registry:h,trigger:C}},ww=(m,h)=>{let C=null;const _=()=>{To(C)||(clearTimeout(C),C=null)};return{cancel:_,throttle:(...U)=>{_(),C=setTimeout(()=>{C=null,m.apply(null,U)},h)}}},Na=m=>m.slice(0).sort(),i0=(m,h)=>{throw new Error("All required keys ("+Na(m).join(", ")+") were not specified. Specified keys were: "+Na(h).join(", ")+".")},Eb=m=>{throw new Error("Unsupported keys for object: "+Na(m).join(", "))},_b=(m,h)=>{if(!Fn(h))throw new Error("The "+m+" fields must be an array. Was: "+h+".");Se(h,C=>{if(!no(C))throw new Error("The value "+C+" in the "+m+" fields was not a string.")})},Cw=(m,h)=>{throw new Error("All values need to be of type: "+h+". Keys ("+Na(m).join(", ")+") were not.")},Sw=m=>{const h=Na(m);Y(h,(_,L)=>L<h.length-1&&_===h[L+1]).each(_=>{throw new Error("The field: "+_+" occurs more than once in the combined fields: ["+h.join(", ")+"].")})},ZT=(m,h)=>eO(m,h,{validate:kn,label:"function"}),eO=(m,h,C)=>{if(h.length===0)throw new Error("You must specify at least one required field.");return _b("required",h),Sw(h),_=>{const L=dt(_);Pn(h,me=>Jt(L,me))||i0(h,L),m(h,L);const ee=tt(h,me=>!C.validate(_[me],me));return ee.length>0&&Cw(ee,C.label),_}},tO=(m,h)=>{const C=tt(h,_=>!Jt(m,_));C.length>0&&Eb(C)},$2=m=>ZT(tO,m),nO=$2(["compare","extract","mutate","sink"]),Ri=$2(["element","start","stop","destroy"]),Du=$2(["forceDrop","drop","move","delayDrop"]),fg=()=>{let m=Be.none();const h=()=>{m=Be.none()},C=(U,ee)=>{const me=m.map(Ee=>U.compare(Ee,ee));return m=Be.some(ee),me},_=(U,ee)=>{ee.extract(U).each(Ee=>{C(ee,Ee).each(kt=>{L.trigger.move(kt)})})},L=Tb({move:ir(["info"])});return{onEvent:_,reset:h,events:L.registry}},ym=()=>{const m=Tb({move:ir(["info"])});return{onEvent:Vt,reset:Vt,events:m.registry}},kw=()=>{const m=ym(),h=fg();let C=m;return{on:()=>{C.reset(),C=h},off:()=>{C.reset(),C=m},isOn:()=>C===h,onEvent:(me,Ee)=>{C.onEvent(me,Ee)},events:h.events}},Ab=(m,h,C)=>{let _=!1;const L=Tb({start:ir([]),stop:ir([])}),U=kw(),ee=()=>{jn.stop(),U.isOn()&&(U.off(),L.trigger.stop())},me=ww(ee,200),Ee=On=>{jn.start(On),U.on(),L.trigger.start()},Ke=On=>{me.cancel(),U.onEvent(On,h)};U.events.move.bind(On=>{h.mutate(m,On.info)});const kt=()=>{_=!0},Bn=()=>{_=!1},co=()=>_,Qn=On=>(...ds)=>{_&&On.apply(null,ds)},jn=h.sink(Du({forceDrop:ee,drop:Qn(ee),move:Qn(Ke),delayDrop:Qn(me.throttle)}),C),Ho=()=>{jn.destroy()};return{element:jn.element,go:Ee,on:kt,off:Bn,isActive:co,destroy:Ho,events:L.registry}},Uu=m=>{const h=m.replace(/\./g,"-");return{resolve:_=>h+"-"+_}},GT=Uu("ephox-dragster").resolve,Tw=m=>{const h={layerClass:GT("blocker"),...m},C=fn.fromTag("div");return Ia(C,"role","presentation"),Da(C,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),If(C,GT("blocker")),If(C,h.layerClass),{element:ue(C),destroy:()=>{Xs(C)}}};var Uy=nO({compare:(m,h)=>_o(h.left-m.left,h.top-m.top),extract:m=>Be.some(_o(m.x,m.y)),sink:(m,h)=>{const C=Tw(h),_=gg(C.element(),"mousedown",m.forceDrop),L=gg(C.element(),"mouseup",m.drop),U=gg(C.element(),"mousemove",m.move),ee=gg(C.element(),"mouseout",m.delayDrop),me=()=>{C.destroy(),L.unbind(),U.unbind(),ee.unbind(),_.unbind()},Ee=kt=>{Ta(kt,C.element())},Ke=()=>{Xs(C.element())};return Ri({element:C.element,start:Ee,stop:Ke,destroy:me})},mutate:(m,h)=>{m.mutate(h.left,h.top)}});const Ew=(m,h={})=>{var C;const _=(C=h.mode)!==null&&C!==void 0?C:Uy;return Ab(m,_,h)},id=Uu("ephox-snooker").resolve,qT=()=>{const m=Tb({drag:ir(["xDelta","yDelta"])});return{mutate:(C,_)=>{m.trigger.drag(C,_)},events:m.registry}},KT=()=>{const m=Tb({drag:ir(["xDelta","yDelta","target"])});let h=Be.none();const C=qT();return C.events.drag.bind(U=>{h.each(ee=>{m.trigger.drag(U.xDelta,U.yDelta,ee)})}),{assign:U=>{h=Be.some(U)},get:()=>h,mutate:C.mutate,events:m.registry}},Zg=(m,h,C,_,L)=>{const U=fn.fromTag("div");return Da(U,{position:"absolute",left:h-_/2+"px",top:C+"px",height:L+"px",width:_+"px"}),Mc(U,{"data-column":m,role:"presentation"}),U},Rd=(m,h,C,_,L)=>{const U=fn.fromTag("div");return Da(U,{position:"absolute",left:h+"px",top:C-L/2+"px",height:L+"px",width:_+"px"}),Mc(U,{"data-row":m,role:"presentation"}),U},kh=id("resizer-bar"),_w=id("resizer-rows"),Gg=id("resizer-cols"),Qa=7,H2=(m,h)=>Mt(m.all,(C,_)=>h(C.element)?[_]:[]),c0=(m,h)=>{const C=[];return Qt(m.grid.columns,_=>{yr.getColumnAt(m,_).map(U=>U.element).forall(h)&&C.push(_)}),tt(C,_=>{const L=yr.filterItems(m,U=>U.column===_);return Pn(L,U=>h(U.element))})},Ob=m=>{const h=jr(m.parent(),"."+kh);Se(h,Xs)},YT=(m,h,C)=>{const _=m.origin();Se(h,L=>{L.each(U=>{const ee=C(_,U);If(ee,kh),Ta(m.parent(),ee)})})},z2=(m,h,C,_)=>{YT(m,h,(L,U)=>{const ee=Zg(U.col,U.x-L.left,C.top-L.top,Qa,_);return If(ee,Gg),ee})},XT=(m,h,C,_)=>{YT(m,h,(L,U)=>{const ee=Rd(U.row,C.left-L.left,U.y-L.top,_,Qa);return If(ee,_w),ee})},Db=(m,h,C,_,L)=>{const U=Bu(C),ee=h.isResizable,me=_.length>0?Pc.positions(_,C):[],Ee=me.length>0?H2(m,ee):[],Ke=tt(me,(Qn,jn)=>Le(Ee,Ho=>jn===Ho));XT(h,Ke,U,Ir(C));const kt=L.length>0?e1.positions(L,C):[],Bn=kt.length>0?c0(m,ee):[],co=tt(kt,(Qn,jn)=>Le(Bn,Ho=>jn===Ho));z2(h,co,U,as(C))},H1=(m,h)=>{if(Ob(m),m.isResizable(h)){const C=yr.fromTable(h),_=I(C),L=im(C);Db(C,m,h,_,L)}},Ym=(m,h)=>{const C=jr(m.parent(),"."+kh);Se(C,h)},cd=m=>{Ym(m,h=>{nr(h,"display","none")})},l0=m=>{Ym(m,h=>{nr(h,"display","block")})},rO=m=>Py(m,_w),aO=m=>Py(m,Gg),V2=id("resizer-bar-dragging"),Kr=m=>{const h=KT(),C=Ew(h,{});let _=Be.none();const L=(jn,Ho)=>Be.from(Ga(jn,Ho));h.events.drag.bind(jn=>{L(jn.target,"data-row").each(Ho=>{const On=tr(jn.target,"top");nr(jn.target,"top",On+jn.yDelta+"px")}),L(jn.target,"data-column").each(Ho=>{const On=tr(jn.target,"left");nr(jn.target,"left",On+jn.xDelta+"px")})});const U=(jn,Ho)=>{const On=tr(jn,Ho),ds=dc(jn,"data-initial-"+Ho,0);return On-ds};C.events.stop.bind(()=>{h.get().each(jn=>{_.each(Ho=>{L(jn,"data-row").each(On=>{const ds=U(jn,"top");Pe(jn,"data-initial-top"),Qn.trigger.adjustHeight(Ho,ds,parseInt(On,10))}),L(jn,"data-column").each(On=>{const ds=U(jn,"left");Pe(jn,"data-initial-left"),Qn.trigger.adjustWidth(Ho,ds,parseInt(On,10))}),H1(m,Ho)})})});const ee=(jn,Ho)=>{Qn.trigger.startAdjust(),h.assign(jn),Ia(jn,"data-initial-"+Ho,tr(jn,Ho)),If(jn,V2),nr(jn,"opacity","0.2"),C.go(m.parent())},me=gg(m.parent(),"mousedown",jn=>{rO(jn.target)&&ee(jn.target,"top"),aO(jn.target)&&ee(jn.target,"left")}),Ee=jn=>Tn(jn,m.view()),Ke=jn=>Nc(jn,"table",Ee).filter(up),kt=gg(m.view(),"mouseover",jn=>{Ke(jn.target).fold(()=>{Ds(jn.target)&&Ob(m)},Ho=>{C.isActive()&&(_=Be.some(Ho),H1(m,Ho))})}),Bn=()=>{me.unbind(),kt.unbind(),C.destroy(),Ob(m)},co=jn=>{H1(m,jn)},Qn=Tb({adjustHeight:ir(["table","delta","row"]),adjustWidth:ir(["table","delta","column"]),startAdjust:ir([])});return{destroy:Bn,refresh:co,on:C.on,off:C.off,hideBars:qt(cd,m),showBars:qt(l0,m),events:Qn.registry}},JT={create:(m,h,C)=>{const _=Pc,L=e1,U=Kr(m),ee=Tb({beforeResize:ir(["table","type"]),afterResize:ir(["table","type"]),startDrag:ir([])});return U.events.adjustHeight.bind(me=>{const Ee=me.table;ee.trigger.beforeResize(Ee,"row");const Ke=_.delta(me.delta,Ee);hA(Ee,Ke,me.row),ee.trigger.afterResize(Ee,"row")}),U.events.startAdjust.bind(me=>{ee.trigger.startDrag()}),U.events.adjustWidth.bind(me=>{const Ee=me.table;ee.trigger.beforeResize(Ee,"col");const Ke=L.delta(me.delta,Ee),kt=C(Ee);YC(Ee,Ke,me.column,h,kt),ee.trigger.afterResize(Ee,"col")}),{on:U.on,off:U.off,refreshBars:U.refresh,hideBars:U.hideBars,showBars:U.showBars,destroy:U.destroy,events:ee.registry}}},lO={only:(m,h)=>{const C=nu(m)?Vo(m):m;return{parent:ue(C),view:ue(m),origin:ue(_o(0,0)),isResizable:h}},detached:(m,h,C)=>{const _=()=>Bu(h);return{parent:ue(h),view:ue(m),origin:_,isResizable:C}},body:(m,h,C)=>({parent:ue(h),view:ue(m),origin:ue(_o(0,0)),isResizable:C})},RD=()=>{const m=fn.fromTag("div");return Da(m,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ta(br(),m),m},uO=(m,h)=>m.inline?lO.body(fn.fromDom(m.getBody()),RD(),h):lO.only(fn.fromDom(m.getDoc()),h),MD=(m,h)=>{m.inline&&Xs(h.parent())},Ow=m=>Vn(m)&&m.nodeName==="TABLE",Dw="bar-",Rw=m=>Ga(m,"data-mce-resize")!=="false",QT=m=>{const h=yr.fromTable(m);yr.hasColumns(h)||Se(Hd(m),C=>{const _=si(C,"width");nr(C,"width",_),Pe(C,"width")})},qg=m=>sl(m,"corner-"),W6=m=>Nm(m,"corner-"),dO=m=>{const h=Nf(),C=Nf(),_=Nf();let L,U,ee,me;const Ee=Cn=>Jc(m,Cn),Ke=()=>Ax(m)?fp():kc(),kt=Cn=>Ef(Cn).columns,Bn=Cn=>Ef(Cn).rows,co=(Cn,_a,ea,zr)=>{const Ui=W6(_a),hc=ic(Ui,"e"),Lf=sl(Ui,"n");if(U===""&&jv(Cn),me===""&&d2(Cn),ea!==L&&U!==""){nr(Cn,"width",U);const Xm=Ke(),Kg=Ee(Cn),Ca=Ax(m)||hc?kt(Cn)-1:0;YC(Cn,ea-L,Ca,Xm,Kg)}else if(Fk(U)){const Xm=parseFloat(U.replace("%","")),Kg=ea*Xm/L;nr(Cn,"width",Kg+"%")}if(Do(U)&&QT(Cn),zr!==ee&&me!==""){nr(Cn,"height",me);const Xm=Lf?0:Bn(Cn)-1;hA(Cn,zr-ee,Xm)}},Qn=()=>{C.on(Cn=>{Cn.destroy()}),_.on(Cn=>{MD(m,Cn)})};m.on("init",()=>{const Cn=uO(m,Rw);if(_.set(Cn),c1(m)&&BC(m)){const _a=Ke(),ea=JT.create(Cn,_a,Ee);m.mode.isReadOnly()||ea.on(),ea.events.startDrag.bind(zr=>{h.set(m.selection.getRng())}),ea.events.beforeResize.bind(zr=>{const Ui=zr.table.dom;lr(m,Ui,ec(Ui),Dx(Ui),Dw+zr.type)}),ea.events.afterResize.bind(zr=>{const Ui=zr.table,hc=Ui.dom;Wd(Ui),h.on(Lf=>{m.selection.setRng(Lf),m.focus()}),pc(m,hc,ec(hc),Dx(hc),Dw+zr.type),m.undoManager.add()}),C.set(ea)}}),m.on("ObjectResizeStart",Cn=>{const _a=Cn.target;if(Ow(_a)&&!m.mode.isReadOnly()){const ea=fn.fromDom(_a);Se(m.dom.select(".mce-clonedresizable"),zr=>{m.dom.addClass(zr,"mce-"+Qi(m)+"-columns")}),!hs(ea)&&ug(m)?u2(ea):!l2(ea)&&U0(m)&&jv(ea),mT(ea)&&sl(Cn.origin,Dw)&&jv(ea),L=Cn.width,U=cu(m)?"":Ov(m,_a).getOr(""),ee=Cn.height,me=Ng(m,_a).getOr("")}}),m.on("ObjectResized",Cn=>{const _a=Cn.target;if(Ow(_a)){const ea=fn.fromDom(_a),zr=Cn.origin;qg(zr)&&co(ea,zr,Cn.width,Cn.height),Wd(ea),pb(m,ea.dom,Fl)}});const jn=()=>{C.on(Cn=>{Cn.on(),Cn.showBars()})},Ho=()=>{C.on(Cn=>{Cn.off(),Cn.hideBars()})};return m.on("DisabledStateChange",Cn=>{Cn.state?Ho():jn()}),m.on("SwitchMode",()=>{m.mode.isReadOnly()?Ho():jn()}),m.on("dragstart dragend",Cn=>{Cn.type==="dragstart"?Ho():jn()}),m.on("remove",()=>{Qn()}),{refresh:Cn=>{C.on(_a=>_a.refreshBars(fn.fromDom(Cn)))},hide:()=>{C.on(Cn=>Cn.hideBars())},show:()=>{C.on(Cn=>Cn.showBars())}}},eE=m=>{Ik(m);const h=dO(m),C=Pf(m,h),_=my(m,h,C);return qv(m,_),yy(m,_),kf(m,_),{getSelectedCells:C.getSelectedCells,clearSelectedCells:C.clearSelectedCells}},tE=m=>({table:eE(m)});var Wo=()=>{$n.add("dom",tE)};Wo()})();(function(){const $n=Object.getPrototypeOf,Xo=(t,r,i)=>{var d;return i(t,r.prototype)?!0:((d=t.constructor)===null||d===void 0?void 0:d.name)===r.name},mo=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&Xo(t,String,(i,d)=>d.isPrototypeOf(i))?"string":r},vo=t=>r=>mo(r)===t,ko=t=>r=>typeof r===t,wn=t=>r=>t===r,no=(t,r)=>Fn(t)&&Xo(t,r,(i,d)=>$n(i)===d),Tt=vo("string"),Fn=vo("object"),To=t=>no(t,Object),ss=vo("array"),st=wn(null),es=ko("boolean"),Vn=wn(void 0),kn=t=>t==null,zn=t=>!kn(t),Vt=ko("function"),Ue=ko("number"),at=(t,r)=>{if(ss(t)){for(let i=0,d=t.length;i<d;++i)if(!r(t[i]))return!1;return!0}return!1},ue=()=>{},ve=t=>()=>t(),In=(t,r)=>(...i)=>t(r.apply(null,i)),qt=(t,r)=>i=>t(r(i)),re=t=>()=>t,rn=t=>t,oo=(t,r)=>t===r;function qn(t,...r){return(...i)=>{const d=r.concat(i);return t.apply(null,d)}}const Qe=t=>r=>!t(r),Be=t=>()=>{throw new Error(t)},z=t=>t(),$t=re(!1),Kt=re(!0);class B{constructor(r,i){this.tag=r,this.value=i}static some(r){return new B(!0,r)}static none(){return B.singletonNone}fold(r,i){return this.tag?i(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?B.some(r(this.value)):B.none()}bind(r){return this.tag?r(this.value):B.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:B.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return zn(r)?B.some(r):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const Jt=Array.prototype.slice,Le=Array.prototype.indexOf,Qt=Array.prototype.push,mn=(t,r)=>Le.call(t,r),Se=(t,r)=>{const i=mn(t,r);return i===-1?B.none():B.some(i)},Oe=(t,r)=>mn(t,r)>-1,ft=(t,r)=>{for(let i=0,d=t.length;i<d;i++){const p=t[i];if(r(p,i))return!0}return!1},tt=(t,r)=>{const i=[];for(let d=0;d<t;d++)i.push(r(d));return i},Bt=(t,r)=>{const i=[];for(let d=0;d<t.length;d+=r){const p=Jt.call(t,d,d+r);i.push(p)}return i},$e=(t,r)=>{const i=t.length,d=new Array(i);for(let p=0;p<i;p++){const x=t[p];d[p]=r(x,p)}return d},pt=(t,r)=>{for(let i=0,d=t.length;i<d;i++){const p=t[i];r(p,i)}},Y=(t,r)=>{for(let i=t.length-1;i>=0;i--){const d=t[i];r(d,i)}},Jo=(t,r)=>{const i=[],d=[];for(let p=0,x=t.length;p<x;p++){const w=t[p];(r(w,p)?i:d).push(w)}return{pass:i,fail:d}},Et=(t,r)=>{const i=[];for(let d=0,p=t.length;d<p;d++){const x=t[d];r(x,d)&&i.push(x)}return i},Mt=(t,r,i)=>(Y(t,(d,p)=>{i=r(i,d,p)}),i),Pn=(t,r,i)=>(pt(t,(d,p)=>{i=r(i,d,p)}),i),Nt=(t,r,i)=>{for(let d=0,p=t.length;d<p;d++){const x=t[d];if(r(x,d))return B.some(x);if(i(x,d))break}return B.none()},ce=(t,r)=>Nt(t,r,$t),De=(t,r)=>{for(let i=0,d=t.length;i<d;i++){const p=t[i];if(r(p,i))return B.some(i)}return B.none()},Ne=t=>{const r=[];for(let i=0,d=t.length;i<d;++i){if(!ss(t[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+t);Qt.apply(r,t[i])}return r},oe=(t,r)=>Ne($e(t,r)),ct=(t,r)=>{for(let i=0,d=t.length;i<d;++i){const p=t[i];if(r(p,i)!==!0)return!1}return!0},At=t=>{const r=Jt.call(t,0);return r.reverse(),r},dt=(t,r)=>Et(t,i=>!Oe(r,i)),An=(t,r)=>{const i={};for(let d=0,p=t.length;d<p;d++){const x=t[d];i[String(x)]=r(x,d)}return i},it=t=>[t],Dt=(t,r)=>{const i=Jt.call(t,0);return i.sort(r),i},hn=(t,r)=>r>=0&&r<t.length?B.some(t[r]):B.none(),Hn=t=>hn(t,0),ut=t=>hn(t,t.length-1),ot=Vt(Array.from)?Array.from:t=>Jt.call(t),rt=(t,r)=>{for(let i=0;i<t.length;i++){const d=r(t[i],i);if(d.isSome())return d}return B.none()},nn=Object.keys,Zo=Object.hasOwnProperty,Co=(t,r)=>{const i=nn(t);for(let d=0,p=i.length;d<p;d++){const x=i[d],w=t[x];r(w,x)}},Mn=(t,r)=>No(t,(i,d)=>({k:d,v:r(i,d)})),No=(t,r)=>{const i={};return Co(t,(d,p)=>{const x=r(d,p);i[x.k]=x.v}),i},Gt=t=>(r,i)=>{t[i]=r},yo=(t,r,i,d)=>{Co(t,(p,x)=>{(r(p,x)?i:d)(p,x)})},gr=(t,r)=>{const i={},d={};return yo(t,r,Gt(i),Gt(d)),{t:i,f:d}},Us=(t,r)=>{const i={};return yo(t,r,Gt(i),ue),i},ma=(t,r)=>{const i=[];return Co(t,(d,p)=>{i.push(r(d,p))}),i},ns=(t,r)=>{const i=nn(t);for(let d=0,p=i.length;d<p;d++){const x=i[d],w=t[x];if(r(w,x,t))return B.some(w)}return B.none()},Pa=t=>ma(t,rn),vn=(t,r)=>Ls(t,r)?B.from(t[r]):B.none(),Ls=(t,r)=>Zo.call(t,r),Ba=(t,r)=>Ls(t,r)&&t[r]!==void 0&&t[r]!==null,Dr=(t,r,i=oo)=>t.exists(d=>i(d,r)),Gi=(t,r,i=oo)=>bi(t,r,i).getOr(t.isNone()&&r.isNone()),hi=t=>{const r=[],i=d=>{r.push(d)};for(let d=0;d<t.length;d++)t[d].each(i);return r},Er=t=>{const r=[];for(let i=0;i<t.length;i++){const d=t[i];if(d.isSome())r.push(d.getOrDie());else return B.none()}return B.some(r)},bi=(t,r,i)=>t.isSome()&&r.isSome()?B.some(i(t.getOrDie(),r.getOrDie())):B.none(),Bi=(t,r,i,d)=>t.isSome()&&r.isSome()&&i.isSome()?B.some(d(t.getOrDie(),r.getOrDie(),i.getOrDie())):B.none(),kr=(t,r)=>t!=null?B.some(r(t)):B.none(),Lo=(t,r)=>t?B.some(r):B.none(),Aa=(t,r)=>t+r,vi=(t,r)=>t.substring(r),nu=(t,r,i)=>r===""||t.length>=r.length&&t.substr(i,i+r.length)===r,yt=(t,r)=>Ia(t,r)?vi(t,r.length):t,Xr=(t,r)=>Mc(t,r)?t:Aa(t,r),Oa=(t,r,i=0,d)=>{const p=t.indexOf(r,i);return p!==-1?Vn(d)?!0:p+r.length<=d:!1},Ia=(t,r)=>nu(t,r,0),Mc=(t,r)=>nu(t,r,t.length-r.length),Ga=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),Ve=t=>t.length>0,Pe=t=>!Ve(t),Rt=t=>{const r=parseFloat(t);return isNaN(r)?B.none():B.some(r)},Ht=t=>t.style!==void 0&&Vt(t.style.getPropertyValue),Qo=(t,r)=>{const d=(r||document).createElement("div");if(d.innerHTML=t,!d.hasChildNodes()||d.childNodes.length>1){const p="HTML does not have a single root node";throw console.error(p,t),new Error(p)}return ka(d.childNodes[0])},vs=(t,r)=>{const d=(r||document).createElement(t);return ka(d)},Fs=(t,r)=>{const d=(r||document).createTextNode(t);return ka(d)},ka=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},xt={fromHtml:Qo,fromTag:vs,fromText:Fs,fromDom:ka,fromPoint:(t,r,i)=>B.from(t.dom.elementFromPoint(r,i)).map(ka)},We=typeof window<"u"?window:Function("return this;")(),Ge=(t,r)=>{let i=r??We;for(let d=0;d<t.length&&i!==void 0&&i!==null;++d)i=i[t[d]];return i},pn=(t,r)=>{const i=t.split(".");return Ge(i,r)},Tn=(t,r)=>pn(t,r),Xn=(t,r)=>{const i=Tn(t,r);if(i==null)throw new Error(t+" not available on this browser");return i},xo=Object.getPrototypeOf,Eo=t=>Xn("HTMLElement",t),Bo=t=>{const r=pn("ownerDocument.defaultView",t);return Fn(t)&&(Eo(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(xo(t).constructor.name))},Vo=9,cs=11,hr=1,Va=3,Ur=t=>t.dom.nodeName.toLowerCase(),Al=t=>t.dom.nodeType,La=t=>r=>Al(r)===t,Bs=t=>er(t)&&Bo(t.dom),er=La(hr),ar=La(Va),Ua=La(Vo),Ti=La(cs),Wc=t=>r=>er(r)&&Ur(r)===t,Ta=(t,r)=>{const i=t.dom;if(i.nodeType!==hr)return!1;{const d=i;if(d.matches!==void 0)return d.matches(r);if(d.msMatchesSelector!==void 0)return d.msMatchesSelector(r);if(d.webkitMatchesSelector!==void 0)return d.webkitMatchesSelector(r);if(d.mozMatchesSelector!==void 0)return d.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},ws=t=>t.nodeType!==hr&&t.nodeType!==Vo&&t.nodeType!==cs||t.childElementCount===0,yu=(t,r)=>{const i=r===void 0?document:r.dom;return ws(i)?[]:$e(i.querySelectorAll(t),xt.fromDom)},Ei=(t,r)=>{const i=r===void 0?document:r.dom;return ws(i)?B.none():B.from(i.querySelector(t)).map(xt.fromDom)},Es=(t,r)=>t.dom===r.dom,xu=(t,r)=>{const i=t.dom,d=r.dom;return i===d?!1:i.contains(d)},Xs=t=>xt.fromDom(t.dom.ownerDocument),hd=t=>Ua(t)?t:Xs(t),Vl=t=>xt.fromDom(hd(t).dom.documentElement),fs=t=>xt.fromDom(hd(t).dom.defaultView),li=t=>B.from(t.dom.parentNode).map(xt.fromDom),Ld=t=>li(t),Wa=t=>B.from(t.dom.parentElement).map(xt.fromDom),Dm=(t,r)=>{const i=Vt(r)?r:$t;let d=t.dom;const p=[];for(;d.parentNode!==null&&d.parentNode!==void 0;){const x=d.parentNode,w=xt.fromDom(x);if(p.push(w),i(w)===!0)break;d=x}return p},ui=t=>B.from(t.dom.offsetParent).map(xt.fromDom),kg=t=>B.from(t.dom.nextSibling).map(xt.fromDom),qi=t=>$e(t.dom.childNodes,xt.fromDom),or=(t,r)=>{const i=t.dom.childNodes;return B.from(i[r]).map(xt.fromDom)},wu=t=>or(t,0),Rm=(t,r)=>({element:t,offset:r}),Ku=(t,r)=>{const i=qi(t);return i.length>0&&r<i.length?Rm(i[r],0):Rm(t,r)},oi=t=>Ti(t)&&zn(t.dom.host),qa=t=>xt.fromDom(t.dom.getRootNode()),Ki=t=>oi(t)?t:xt.fromDom(hd(t).dom.body),Wr=t=>bd(t).isSome(),bd=t=>{const r=qa(t);return oi(r)?B.some(r):B.none()},ol=t=>xt.fromDom(t.dom.host),le=t=>{if(zn(t.target)){const r=xt.fromDom(t.target);if(er(r)&&He(r)&&t.composed&&t.composedPath){const i=t.composedPath();if(i)return Hn(i)}}return B.from(t.target)},He=t=>zn(t.dom.shadowRoot),Je=t=>{const r=ar(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const i=r.ownerDocument;return bd(xt.fromDom(r)).fold(()=>i.body.contains(r),qt(Je,ol))},Pt=()=>Nn(xt.fromDom(document)),Nn=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return xt.fromDom(r)},ho=(t,r,i)=>{if(Tt(i)||es(i)||Ue(i))t.setAttribute(r,i+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple")},Kn=(t,r,i)=>{ho(t.dom,r,i)},ms=(t,r)=>{const i=t.dom;Co(r,(d,p)=>{ho(i,p,d)})},Ds=(t,r)=>{const i=t.dom.getAttribute(r);return i===null?void 0:i},br=(t,r)=>B.from(Ds(t,r)),X=(t,r)=>{const i=t.dom;return i&&i.hasAttribute?i.hasAttribute(r):!1},fe=(t,r)=>{t.dom.removeAttribute(r)},Ze=t=>Pn(t.dom.attributes,(r,i)=>(r[i.name]=i.value,r),{}),St=(t,r,i)=>{if(!Tt(i))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);Ht(t)&&t.style.setProperty(r,i)},Oo=(t,r)=>{Ht(t)&&t.style.removeProperty(r)},Gn=(t,r,i)=>{const d=t.dom;St(d,r,i)},jr=(t,r)=>{const i=t.dom;Co(r,(d,p)=>{St(i,p,d)})},vc=(t,r)=>{const i=t.dom;Co(r,(d,p)=>{d.fold(()=>{Oo(i,p)},x=>{St(i,p,x)})})},bn=(t,r)=>{const i=t.dom,p=window.getComputedStyle(i).getPropertyValue(r);return p===""&&!Je(t)?fl(i,r):p},fl=(t,r)=>Ht(t)?t.style.getPropertyValue(r):"",ba=(t,r)=>{const i=t.dom,d=fl(i,r);return B.from(d).filter(p=>p.length>0)},$d=t=>{const r={},i=t.dom;if(Ht(i))for(let d=0;d<i.style.length;d++){const p=i.style.item(d);r[p]=i.style[p]}return r},Ii=(t,r,i)=>{const d=xt.fromTag(t);return Gn(d,r,i),ba(d,r).isSome()},cr=(t,r)=>{const i=t.dom;Oo(i,r),Dr(br(t,"style").map(Ga),"")&&fe(t,"style")},ou=t=>t.dom.offsetWidth,Nc=(t,r)=>{const i=(A,R)=>{if(!Ue(R)&&!R.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+R);const $=A.dom;Ht($)&&($.style[t]=R+"px")},d=A=>{const R=r(A);if(R<=0||R===null){const $=bn(A,t);return parseFloat($)||0}return R},p=d,x=(A,R)=>Pn(R,($,W)=>{const q=bn(A,W),se=q===void 0?0:parseInt(q,10);return isNaN(se)?$:$+se},0);return{set:i,get:d,getOuter:p,aggregate:x,max:(A,R,$)=>{const W=x(A,$);return R>W?R-W:0}}},Ul=Nc("height",t=>{const r=t.dom;return Je(t)?r.getBoundingClientRect().height:r.offsetHeight}),uc=t=>Ul.get(t),Mm=t=>Ul.getOuter(t),Xp=(t,r)=>{const i=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],d=Ul.max(t,r,i);Gn(t,"max-height",d+"px")},Qb=(t,r)=>({left:t,top:r,translate:(d,p)=>Qb(t+d,r+p)}),Ka=Qb,Nm=t=>{const r=t.getBoundingClientRect();return Ka(r.left,r.top)},Ec=(t,r)=>t!==void 0?t:r!==void 0?r:0,sl=t=>{const r=t.dom.ownerDocument,i=r.body,d=r.defaultView,p=r.documentElement;if(i===t.dom)return Ka(i.offsetLeft,i.offsetTop);const x=Ec(d==null?void 0:d.pageYOffset,p.scrollTop),w=Ec(d==null?void 0:d.pageXOffset,p.scrollLeft),A=Ec(p.clientTop,i.clientTop),R=Ec(p.clientLeft,i.clientLeft);return ic(t).translate(w-R,x-A)},ic=t=>{const r=t.dom,d=r.ownerDocument.body;return d===r?Ka(d.offsetLeft,d.offsetTop):Je(t)?Nm(r):Ka(0,0)},Bm=Nc("width",t=>t.dom.offsetWidth),we=(t,r)=>Bm.set(t,r),_e=t=>Bm.get(t),wt=t=>Bm.getOuter(t),un=(t,r)=>{const i=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],d=Bm.max(t,r,i);Gn(t,"max-width",d+"px")},Ko=t=>{let r=!1,i;return(...d)=>(r||(r=!0,i=t.apply(null,d)),i)},Ks=(t,r,i,d)=>{const p=t.isiOS()&&/ipad/i.test(i)===!0,x=t.isiOS()&&!p,w=t.isiOS()||t.isAndroid(),A=w||d("(pointer:coarse)"),R=p||!x&&w&&d("(min-device-width:768px)"),$=x||w&&!R,W=r.isSafari()&&t.isiOS()&&/safari/i.test(i)===!1,q=!$&&!R&&!W;return{isiPad:re(p),isiPhone:re(x),isTablet:re(R),isPhone:re($),isTouch:re(A),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:re(W),isDesktop:re(q)}},nr=(t,r)=>{for(let i=0;i<t.length;i++){const d=t[i];if(d.test(r))return d}},Da=(t,r)=>{const i=nr(t,r);if(!i)return{major:0,minor:0};const d=p=>Number(r.replace(i,"$"+p));return Ol(d(1),d(2))},si=(t,r)=>{const i=String(r).toLowerCase();return t.length===0?Fi():Da(t,i)},Fi=()=>Ol(0,0),Ol=(t,r)=>({major:t,minor:r}),di={nu:Ol,detect:si,unknown:Fi},Pi=(t,r)=>rt(r.brands,i=>{const d=i.brand.toLowerCase();return ce(t,p=>{var x;return d===((x=p.brand)===null||x===void 0?void 0:x.toLowerCase())}).map(p=>({current:p.name,version:di.nu(parseInt(i.version,10),0)}))}),dc=(t,r)=>{const i=String(r).toLowerCase();return ce(t,d=>d.search(i))},pl=(t,r)=>dc(t,r).map(i=>{const d=di.detect(i.versionRegexes,r);return{current:i.name,version:d}}),Yi=(t,r)=>dc(t,r).map(i=>{const d=di.detect(i.versionRegexes,r);return{current:i.name,version:d}}),Bc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=t=>r=>Oa(r,t),_i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Oa(t,"edge/")&&Oa(t,"chrome")&&Oa(t,"safari")&&Oa(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bc],search:t=>Oa(t,"chrome")&&!Oa(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Oa(t,"msie")||Oa(t,"trident")},{name:"Opera",versionRegexes:[Bc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[Bc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Oa(t,"safari")||Oa(t,"mobile/"))&&Oa(t,"applewebkit")}],Im=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Oa(t,"iphone")||Oa(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fm={browsers:re(_i),oses:re(Im)},Ic="Edge",Go="Chromium",og="IE",Hd="Opera",Br="Firefox",su="Safari",xv=()=>Pm({current:void 0,version:di.unknown()}),Pm=t=>{const r=t.current,i=t.version,d=p=>()=>r===p;return{current:r,version:i,isEdge:d(Ic),isChromium:d(Go),isIE:d(og),isOpera:d(Hd),isFirefox:d(Br),isSafari:d(su)}},vr={unknown:xv,nu:Pm,edge:re(Ic),chromium:re(Go),ie:re(og),opera:re(Hd),firefox:re(Br),safari:re(su)},Wl="Windows",Jp="iOS",Qp="Android",cf="Linux",Lm="macOS",sg="Solaris",lf="FreeBSD",Kh="ChromeOS",je=()=>uf({current:void 0,version:di.unknown()}),uf=t=>{const r=t.current,i=t.version,d=p=>()=>r===p;return{current:r,version:i,isWindows:d(Wl),isiOS:d(Jp),isAndroid:d(Qp),isMacOS:d(Lm),isLinux:d(cf),isSolaris:d(sg),isFreeBSD:d(lf),isChromeOS:d(Kh)}},ga={unknown:je,nu:uf,windows:re(Wl),ios:re(Jp),android:re(Qp),linux:re(cf),macos:re(Lm),solaris:re(sg),freebsd:re(lf),chromeos:re(Kh)},Yh={detect:(t,r,i)=>{const d=Fm.browsers(),p=Fm.oses(),x=r.bind(R=>Pi(d,R)).orThunk(()=>pl(d,t)).fold(vr.unknown,vr.nu),w=Yi(p,t).fold(ga.unknown,ga.nu),A=Ks(w,x,t,i);return{browser:x,os:w,deviceType:A}}},$m=t=>window.matchMedia(t).matches;let Lr=Ko(()=>Yh.detect(window.navigator.userAgent,B.from(window.navigator.userAgentData),$m));const Xi=()=>Lr(),hl=(t,r,i,d,p,x,w)=>({target:t,x:r,y:i,stop:d,prevent:p,kill:x,raw:w}),zd=t=>{const r=xt.fromDom(le(t).getOr(t.target)),i=()=>t.stopPropagation(),d=()=>t.preventDefault(),p=In(d,i);return hl(r,t.clientX,t.clientY,i,d,p,t)},df=(t,r)=>i=>{t(i)&&r(zd(i))},mf=(t,r,i,d,p)=>{const x=df(i,d);return t.dom.addEventListener(r,x,p),{unbind:qn(eh,t,r,x,p)}},jl=(t,r,i,d)=>mf(t,r,i,d,!1),Xh=(t,r,i,d)=>mf(t,r,i,d,!0),eh=(t,r,i,d)=>{t.dom.removeEventListener(r,i,d)},Tg=(t,r)=>{li(t).each(d=>{d.dom.insertBefore(r.dom,t.dom)})},rl=(t,r)=>{kg(t).fold(()=>{li(t).each(p=>{Dl(p,r)})},d=>{Tg(d,r)})},ps=(t,r)=>{wu(t).fold(()=>{Dl(t,r)},d=>{t.dom.insertBefore(r.dom,d.dom)})},Dl=(t,r)=>{t.dom.appendChild(r.dom)},gf=(t,r,i)=>{or(t,i).fold(()=>{Dl(t,r)},d=>{Tg(d,r)})},Rl=(t,r)=>{pt(r,i=>{Dl(t,i)})},om=t=>{t.dom.textContent="",pt(qi(t),r=>{al(r)})},al=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},bl=t=>{const r=t!==void 0?t.dom:document,i=r.body.scrollLeft||r.documentElement.scrollLeft,d=r.body.scrollTop||r.documentElement.scrollTop;return Ka(i,d)},Hm=(t,r,i)=>{const p=(i!==void 0?i.dom:document).defaultView;p&&p.scrollTo(t,r)},Fc=t=>{const r=t===void 0?window:t;return Xi().browser.isFirefox()?B.none():B.from(r.visualViewport)},ff=(t,r,i,d)=>({x:t,y:r,width:i,height:d,right:t+i,bottom:r+d}),Vd=t=>{const r=t===void 0?window:t,i=r.document,d=bl(xt.fromDom(i));return Fc(r).fold(()=>{const p=r.document.documentElement,x=p.clientWidth,w=p.clientHeight;return ff(d.left,d.top,x,w)},p=>ff(Math.max(p.pageLeft,d.left),Math.max(p.pageTop,d.top),p.width,p.height))},pf=()=>xt.fromDom(document),$0=(t,r)=>t.view(r).fold(re([]),d=>{const p=t.owner(d),x=$0(t,p);return[d].concat(x)}),Eg=(t,r)=>{const i=r.owner(t),d=$0(r,i);return B.some(d)};var Ai=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?B.none():B.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(xt.fromDom)},owner:t=>Xs(t)});const Zl=t=>{const r=pf(),i=bl(r);return Eg(t,Ai).fold(qn(sl,t),p=>{const x=ic(t),w=Mt(p,(A,R)=>{const $=ic(R);return{left:A.left+$.left,top:A.top+$.top}},{left:0,top:0});return Ka(w.left+x.left+i.left,w.top+x.top+i.top)})},Ml=(t,r,i)=>({point:t,width:r,height:i}),Yu=(t,r,i,d)=>({x:t,y:r,width:i,height:d}),oa=(t,r,i,d)=>({x:t,y:r,width:i,height:d,right:t+i,bottom:r+d}),jc=t=>{const r=sl(t),i=wt(t),d=Mm(t);return oa(r.left,r.top,i,d)},Ya=t=>{const r=Zl(t),i=wt(t),d=Mm(t);return oa(r.left,r.top,i,d)},vl=(t,r)=>{const i=Math.max(t.x,r.x),d=Math.max(t.y,r.y),p=Math.min(t.right,r.right),x=Math.min(t.bottom,r.bottom),w=p-i,A=x-d;return oa(i,d,w,A)},hf=(t,r)=>Pn(r,(i,d)=>vl(i,d),t),Yt=()=>Vd(window),wo=t=>{let r=t;return{get:()=>r,set:p=>{r=p}}},yc=t=>{const r=wo(B.none()),i=()=>r.get().each(t);return{clear:()=>{i(),r.set(B.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:A=>{i(),r.set(B.some(A))}}},Gl=()=>yc(t=>t.destroy()),mc=()=>yc(t=>t.unbind()),Ir=()=>{const t=yc(ue);return{...t,on:i=>t.get().each(i)}};var bf=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ql=t=>{const r=x=>x(t),i=re(t),d=()=>p,p={tag:!0,inner:t,fold:(x,w)=>w(t),isValue:Kt,isError:$t,map:x=>Ws.value(x(t)),mapError:d,bind:r,exists:r,forall:r,getOr:i,or:d,getOrThunk:i,orThunk:d,getOrDie:i,each:x=>{x(t)},toOptional:()=>B.some(t)};return p},Fr=t=>{const r=()=>i,i={tag:!1,inner:t,fold:(d,p)=>d(t),isValue:$t,isError:Kt,map:r,mapError:d=>Ws.error(d(t)),bind:r,exists:$t,forall:Kt,getOr:rn,or:rn,getOrThunk:z,orThunk:z,getOrDie:Be(String(t)),each:ue,toOptional:B.none};return i},Ws={value:ql,error:Fr,fromOption:(t,r)=>t.fold(()=>Fr(r),ql)};var _r;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(_r||(_r={}));const _g=(t,r,i)=>t.stype===_r.Error?r(t.serror):i(t.svalue),il=t=>{const r=[],i=[];return pt(t,d=>{_g(d,p=>i.push(p),p=>r.push(p))}),{values:r,errors:i}},Cu=(t,r)=>t.stype===_r.Error?{stype:_r.Error,serror:r(t.serror)}:t,gc=(t,r)=>t.stype===_r.Value?{stype:_r.Value,svalue:r(t.svalue)}:t,ht=(t,r)=>t.stype===_r.Value?r(t.svalue):t,Ji=(t,r)=>t.stype===_r.Error?r(t.serror):t,Xu=t=>({stype:_r.Value,svalue:t}),yi=t=>({stype:_r.Error,serror:t}),sr={fromResult:t=>t.fold(yi,Xu),toResult:t=>_g(t,Ws.error,Ws.value),svalue:Xu,partition:il,serror:yi,bind:ht,bindError:Ji,map:gc,mapError:Cu,fold:_g},vd=(t,r,i,d)=>({tag:"field",key:t,newKey:r,presence:i,prop:d}),rm=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),Zr=(t,r,i)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return i(t.newKey,t.instantiator)}},Su=(t,r)=>r,zm=(t,r)=>To(t)&&To(r)?mi(t,r):r,Ag=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const i={};for(let d=0;d<r.length;d++){const p=r[d];for(const x in p)Ls(p,x)&&(i[x]=t(i[x],p[x]))}return i},mi=Ag(zm),am=Ag(Su),yd=()=>({tag:"required",process:{}}),yr=t=>({tag:"defaultedThunk",process:t}),im=t=>yr(re(t)),Zc=()=>({tag:"option",process:{}}),I=t=>({tag:"mergeWithThunk",process:t}),j=t=>I(re(t)),ne=(t,r)=>t.length>0?sr.svalue(mi(r,am.apply(void 0,t))):sr.svalue(r),ze=t=>In(sr.serror,Ne)(t),as={consolidateObj:(t,r)=>{const i=sr.partition(t);return i.errors.length>0?ze(i.errors):ne(i.values,r)},consolidateArr:t=>{const r=sr.partition(t);return r.errors.length>0?ze(r.errors):sr.svalue(r.values)}},Ys=t=>Fn(t)&&nn(t).length>100?" removed due to size":JSON.stringify(t,null,2),Os=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):t;return $e(r,i=>"Failed path: ("+i.path.join(" > ")+`)
`+i.getErrorInfo())},_o=(t,r)=>sr.serror([{path:t,getErrorInfo:r}]),Oi=(t,r,i)=>_o(t,()=>'Could not find valid *required* value for "'+r+'" in '+Ys(i)),Xa=(t,r)=>_o(t,()=>'Choice schema did not contain choice key: "'+r+'"'),Bu=(t,r,i)=>_o(t,()=>'The chosen schema: "'+i+'" did not exist in branches: '+Ys(r)),Iu=(t,r)=>_o(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),nh=(t,r)=>_o(t,re(r)),cm=t=>{const r=(d,p)=>sr.bindError(t(p),x=>nh(d,x)),i=re("val");return{extract:r,toString:i}},H0=cm(sr.svalue),ll=(t,r,i,d)=>vn(r,i).fold(()=>Oi(t,i,r),d),z0=(t,r,i,d)=>{const p=vn(t,r).getOrThunk(()=>i(t));return d(p)},NC=(t,r,i)=>i(vn(t,r)),xc=(t,r,i,d)=>{const p=vn(t,r).map(x=>x===!0?i(t):x);return d(p)},ru=(t,r,i,d,p)=>{const x=A=>p.extract(r.concat([d]),A),w=A=>A.fold(()=>sr.svalue(B.none()),R=>{const $=p.extract(r.concat([d]),R);return sr.map($,B.some)});switch(t.tag){case"required":return ll(r,i,d,x);case"defaultedThunk":return z0(i,d,t.process,x);case"option":return NC(i,d,w);case"defaultedOptionThunk":return xc(i,d,t.process,w);case"mergeWithThunk":return z0(i,d,re({}),A=>{const R=mi(t.process(i),A);return x(R)})}},Og=(t,r,i)=>{const d={},p=[];for(const x of i)Zr(x,(w,A,R,$)=>{const W=ru(R,t,r,w,$);sr.fold(W,q=>{p.push(...q)},q=>{d[A]=q})},(w,A)=>{d[w]=A(r)});return p.length>0?sr.serror(p):sr.svalue(d)},wc=t=>({extract:(d,p)=>t().extract(d,p),toString:()=>t().toString()}),Cv=t=>nn(Us(t,zn)),Pc=t=>{const r=os(t),i=Mt(t,(p,x)=>Zr(x,w=>mi(p,{[w]:!0}),re(p)),{});return{extract:(p,x)=>{const w=es(x)?[]:Cv(x),A=Et(w,R=>!Ba(i,R));return A.length===0?r.extract(p,x):Iu(p,A)},toString:r.toString}},os=t=>({extract:(d,p)=>Og(d,p,t),toString:()=>`obj{
`+$e(t,p=>Zr(p,(x,w,A,R)=>x+" -> "+R.toString(),(x,w)=>"state("+x+")")).join(`
`)+"}"}),Ju=t=>({extract:(d,p)=>{const x=$e(p,(w,A)=>t.extract(d.concat(["["+A+"]"]),w));return as.consolidateArr(x)},toString:()=>"array("+t.toString()+")"}),Dg=(t,r)=>{const i=r!==void 0?r:rn;return{extract:(x,w)=>{const A=[];for(const R of t){const $=R.extract(x,w);if($.stype===_r.Value)return{stype:_r.Value,svalue:i($.svalue)};A.push($)}return as.consolidateArr(A)},toString:()=>"oneOf("+$e(t,x=>x.toString()).join(", ")+")"}},e1=(t,r)=>{const i=(x,w)=>Ju(cm(t)).extract(x,w);return{extract:(x,w)=>{const A=nn(w),R=i(x,A);return sr.bind(R,$=>{const W=$e($,q=>vd(q,q,yd(),r));return os(W).extract(x,w)})},toString:()=>"setOf("+r.toString()+")"}},Sv=(t,r)=>{const i=Ko(r);return{extract:(x,w)=>i().extract(x,w),toString:()=>i().toString()}},t1=In(Ju,os),Ud=re(H0),vf=(t,r)=>cm(i=>{const d=typeof i;return t(i)?sr.svalue(i):sr.serror(`Expected type: ${r} but got: ${d}`)}),oh=vf(Ue,"number"),so=vf(Tt,"string"),Qu=vf(es,"boolean"),Vm=vf(Vt,"function"),xd=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>xd(t[r]));default:return!1}},Fu=cm(t=>xd(t)?sr.svalue(t):sr.serror("Expected value to be acceptable for sending via postMessage")),n1=(t,r,i,d)=>vn(i,d).fold(()=>Bu(t,i,d),x=>x.extract(t.concat(["branch: "+d]),r)),Rg=(t,r)=>({extract:(p,x)=>vn(x,t).fold(()=>Xa(p,t),A=>n1(p,x,r,A)),toString:()=>"chooseOn("+t+"). Possible values: "+nn(r)}),ap=()=>Ju(H0),o1=t=>cm(r=>t(r).fold(sr.serror,sr.svalue)),rg=(t,r)=>e1(i=>sr.fromResult(t(i)),r),Ex=(t,r,i)=>{const d=r.extract([t],i);return sr.mapError(d,p=>({input:i,errors:p}))},Li=(t,r,i)=>sr.toResult(Ex(t,r,i)),_n=t=>t.fold(r=>{throw new Error(Uo(r))},rn),$s=(t,r,i)=>_n(Li(t,r,i)),Uo=t=>`Errors: 
`+Os(t.errors).join(`
`)+`

Input object: `+Ys(t.input),fc=(t,r)=>Rg(t,Mn(r,os)),sh=(t,r)=>Sv(t,r),Gc=vd,aa=rm,Ja=t=>o1(r=>Oe(t,r)?Ws.value(r):Ws.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),dn=t=>Gc(t,t,yd(),Ud()),ia=(t,r)=>Gc(t,t,yd(),r),tn=t=>ia(t,oh),qc=t=>ia(t,so),Kc=(t,r)=>Gc(t,t,yd(),Ja(r)),ed=t=>ia(t,Vm),kv=(t,r)=>Gc(t,t,Zc(),cm(i=>sr.serror("The field: "+t+" is forbidden. "+r))),lm=(t,r)=>Gc(t,t,yd(),os(r)),_x=(t,r)=>Gc(t,t,yd(),t1(r)),au=(t,r)=>Gc(t,t,yd(),Ju(r)),Cs=t=>Gc(t,t,Zc(),Ud()),ku=(t,r)=>Gc(t,t,Zc(),r),s1=t=>ku(t,oh),ri=t=>ku(t,so),Jh=(t,r)=>ku(t,Ja(r)),Mg=t=>ku(t,Vm),um=(t,r)=>ku(t,Ju(r)),Yc=(t,r)=>ku(t,os(r)),yl=(t,r)=>ku(t,Pc(r)),Ct=(t,r)=>Gc(t,t,im(r),Ud()),fa=(t,r,i)=>Gc(t,t,im(r),i),wd=(t,r)=>fa(t,r,oh),gn=(t,r)=>fa(t,r,so),Kl=(t,r,i)=>fa(t,r,Ja(i)),Ra=(t,r)=>fa(t,r,Qu),Ea=(t,r)=>fa(t,r,Vm),V0=(t,r)=>fa(t,r,Fu),D=(t,r,i)=>fa(t,r,Ju(i)),H=(t,r,i)=>fa(t,r,os(i)),ye={generate:t=>{if(!ss(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],i={};return pt(t,(d,p)=>{const x=nn(d);if(x.length!==1)throw new Error("one and only one name per case");const w=x[0],A=d[w];if(i[w]!==void 0)throw new Error("duplicate key detected:"+w);if(w==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ss(A))throw new Error("case arguments must be an array");r.push(w),i[w]=(...R)=>{const $=R.length;if($!==A.length)throw new Error("Wrong number of arguments to case "+w+". Expected "+A.length+" ("+A+"), got "+$);return{fold:(...q)=>{if(q.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+q.length);return q[p].apply(null,R)},match:q=>{const se=nn(q);if(r.length!==se.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+se.join(","));if(!ct(r,Ae=>Oe(se,Ae)))throw new Error("Not all branches were specified when using match. Specified: "+se.join(", ")+`
Required: `+r.join(", "));return q[w].apply(null,R)},log:q=>{console.log(q,{constructors:r,constructor:w,params:R})}}}}),i}};ye.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const et=t=>{const r=[],i=[];return pt(t,d=>{d.fold(p=>{r.push(p)},p=>{i.push(p)})}),{errors:r,values:i}},an=(t,r)=>{const i={};return Co(t,(d,p)=>{Oe(r,p)||(i[p]=d)}),i},xn=(t,r)=>({[t]:r}),Fo=t=>{const r={};return pt(t,i=>{r[i.key]=i.value}),r},$o=(t,r)=>an(t,r),Ss=(t,r)=>xn(t,r),ua=t=>Fo(t),Pr=(t,r)=>t.length===0?Ws.value(r):Ws.value(mi(r,am.apply(void 0,t))),gi=t=>Ws.error(Ne(t)),Lc=(t,r)=>{const i=et(t);return i.errors.length>0?gi(i.errors):Pr(i.values,r)},ag=t=>Vt(t)?t:$t,iu=(t,r,i)=>{let d=t.dom;const p=ag(i);for(;d.parentNode;){d=d.parentNode;const x=xt.fromDom(d),w=r(x);if(w.isSome())return w;if(p(x))break}return B.none()},Um=(t,r,i)=>{const d=r(t),p=ag(i);return d.orThunk(()=>p(t)?B.none():iu(t,r,p))},r1=(t,r)=>Es(t.element,r.event.target),yf={can:Kt,abort:$t,run:ue},ig=t=>{if(!Ba(t,"can")&&!Ba(t,"abort")&&!Ba(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...yf,...t}},ip=(t,r)=>(...i)=>Pn(t,(d,p)=>d&&r(p).apply(void 0,i),!0),a1=(t,r)=>(...i)=>Pn(t,(d,p)=>d||r(p).apply(void 0,i),!1),Qh=t=>Vt(t)?{can:Kt,abort:$t,run:t}:t,i1=t=>{const r=ip(t,p=>p.can),i=a1(t,p=>p.abort);return{can:r,abort:i,run:(...p)=>{pt(t,x=>{x.run.apply(void 0,p)})}}},Xc=re,cg=Xc("touchstart"),$r=Xc("touchmove"),ai=Xc("touchend"),Pu=Xc("touchcancel"),_c=Xc("mousedown"),eb=Xc("mousemove"),Tv=Xc("mouseout"),xf=Xc("mouseup"),td=Xc("mouseover"),wf=Xc("focusin"),Bk=Xc("focusout"),nd=Xc("keydown"),sA=Xc("keyup"),lg=Xc("input"),tb=Xc("change"),Ev=Xc("click"),Ik=Xc("transitioncancel"),cp=Xc("transitionend"),c1=Xc("transitionstart"),nb=Xc("selectstart"),Qi=t=>re("alloy."+t),Ax={tap:Qi("tap")},lp=Qi("focus"),rh=Qi("blur.post"),U0=Qi("paste.post"),ug=Qi("receive"),cu=Qi("execute"),BC=Qi("focus.item"),Ox=Ax.tap,ah=Qi("longpress"),$c=Qi("sandbox.close"),_v=Qi("typeahead.cancel"),Hr=Qi("system.init"),dm=Qi("system.touchmove"),up=Qi("system.touchend"),Av=Qi("system.scroll"),$a=Qi("system.resize"),od=Qi("system.attached"),Wd=Qi("system.detached"),dp=Qi("system.dismissRequested"),ec=Qi("system.repositionRequested"),Dx=Qi("focusmanager.shifted"),W0=Qi("slotcontainer.visibility"),Ov=Qi("system.external.element.scroll"),Ng=Qi("change.tab"),Fk=Qi("dismiss.tab"),Do=Qi("highlight"),l1=Qi("dehighlight"),xr=(t,r)=>{sb(t,t.element,r,{})},qo=(t,r,i)=>{sb(t,t.element,r,i)},ob=t=>{xr(t,cu())},j0=(t,r,i)=>{sb(t,r,i,{})},sb=(t,r,i,d)=>{const p={target:r,...d};t.getSystem().triggerEvent(i,r,p)},Dv=(t,r,i,d)=>{const p={...d,target:r};t.getSystem().triggerEvent(i,r,p)},IC=(t,r,i,d)=>{t.getSystem().triggerEvent(i,r,d.event)},ya=t=>ua(t),Pk=(t,r)=>({key:t,value:ig({abort:r})}),FC=(t,r)=>({key:t,value:ig({can:r})}),PC=t=>({key:t,value:ig({run:(r,i)=>{i.event.prevent()}})}),on=(t,r)=>({key:t,value:ig({run:r})}),Rv=(t,r,i)=>({key:t,value:ig({run:(d,p)=>{r.apply(void 0,[d,p].concat(i))}})}),Z0=t=>r=>on(t,r),G0=t=>r=>({key:t,value:ig({run:(i,d)=>{r1(i,d)&&r(i,d)}})}),Rx=(t,r)=>on(t,(i,d)=>{i.getSystem().getByUid(r).each(p=>{IC(p,p.element,t,d)})}),q0=(t,r,i)=>{const d=r.partUids[i];return Rx(t,d)},LC=(t,r)=>on(t,(i,d)=>{const p=d.event,x=i.getSystem().getByDom(p.target).getOrThunk(()=>Um(p.target,A=>i.getSystem().getByDom(A).toOptional(),$t).getOr(i));r(i,x,d)}),Mv=t=>on(t,(r,i)=>{i.cut()}),mp=t=>on(t,(r,i)=>{i.stop()}),u1=(t,r)=>G0(t)(r),$i=G0(od()),Cd=G0(Wd()),d1=G0(Hr()),gp=Z0(cu()),Mx=(t,r,i)=>{const d=i.toString(),p=d.indexOf(")")+1,x=d.indexOf("("),w=d.substring(x+1,p-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:K0(w.slice(0,1).concat(w.slice(3)))}),t},K0=t=>$e(t,r=>Mc(r,"/*")?r.substring(0,r.length-2):r),Y0=(t,r)=>{const i=t.toString(),d=i.indexOf(")")+1,p=i.indexOf("("),x=i.substring(p+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:K0(x)}),t},$C=(t,r)=>{const i=r.toString(),d=i.indexOf(")")+1,p=i.indexOf("("),x=i.substring(p+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:K0(x.slice(1))}),t},mm=t=>({classes:Vn(t.classes)?[]:t.classes,attributes:Vn(t.attributes)?{}:t.attributes,styles:Vn(t.styles)?{}:t.styles}),HC=(t,r)=>({...t,attributes:{...t.attributes,...r.attributes},styles:{...t.styles,...r.styles},classes:t.classes.concat(r.classes)}),tc=(t,r,i)=>gp(d=>{i(d,t,r)}),m1=(t,r,i)=>d1((d,p)=>{i(d,t,r)}),rD=(t,r,i,d,p,x)=>{const w=Pc(t),A=Yc(r,[yl("config",t)]);return Nx(w,A,r,i,d,p,x)},ih=(t,r,i,d,p,x)=>{const w=t,A=Yc(r,[ku("config",t)]);return Nx(w,A,r,i,d,p,x)},Tu=(t,r,i)=>Mx((p,...x)=>{const w=[p].concat(x);return p.config({name:re(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+i)},A=>{const R=Array.prototype.slice.call(w,1);return r.apply(void 0,[p,A.config,A.state].concat(R))})},i,r),Wm=t=>({key:t,value:void 0}),Nx=(t,r,i,d,p,x,w)=>{const A=q=>Ba(q,i)?q[i]():B.none(),R=Mn(p,(q,se)=>Tu(i,q,se)),W={...Mn(x,(q,se)=>Y0(q,se)),...R,revoke:qn(Wm,i),config:q=>{const se=$s(i+"-config",t,q);return{key:i,value:{config:se,me:W,configAsRaw:Ko(()=>$s(i+"-config",t,q)),initialConfig:q,state:w}}},schema:re(r),exhibit:(q,se)=>bi(A(q),vn(d,"exhibit"),(ge,Ae)=>Ae(se,ge.config,ge.state)).getOrThunk(()=>mm({})),name:re(i),handlers:q=>A(q).map(se=>vn(d,"events").getOr(()=>({}))(se.config,se.state)).getOr({})};return W},Cf={init:()=>lu({readState:re("No State required")})},lu=t=>t,Ln=t=>ua(t),Nv=Pc([dn("fields"),dn("name"),Ct("active",{}),Ct("apis",{}),Ct("state",Cf),Ct("extra",{})]),xl=t=>{const r=$s("Creating behaviour: "+t.name,Nv,t);return rD(r.fields,r.name,r.active,r.apis,r.extra,r.state)},rb=Pc([dn("branchKey"),dn("branches"),dn("name"),Ct("active",{}),Ct("apis",{}),Ct("state",Cf),Ct("extra",{})]),Bx=t=>{const r=$s("Creating behaviour: "+t.name,rb,t);return ih(fc(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},Lk=re(void 0),qs=(t,r)=>{const i=Ds(t,r);return i===void 0||i===""?[]:i.split(" ")},gm=(t,r,i)=>{const p=qs(t,r).concat([i]);return Kn(t,r,p.join(" ")),!0},g1=(t,r,i)=>{const d=Et(qs(t,r),p=>p!==i);return d.length>0?Kn(t,r,d.join(" ")):fe(t,r),!1},Bv=t=>t.dom.classList!==void 0,Sf=t=>qs(t,"class"),uu=(t,r)=>gm(t,"class",r),Sd=(t,r)=>g1(t,"class",r),zC=(t,r)=>Oe(Sf(t),r)?Sd(t,r):uu(t,r),Cc=(t,r)=>{Bv(t)?t.dom.classList.add(r):uu(t,r)},Bg=t=>{(Bv(t)?t.dom.classList:Sf(t)).length===0&&fe(t,"class")},Hi=(t,r)=>{Bv(t)?t.dom.classList.remove(r):Sd(t,r),Bg(t)},VC=(t,r)=>{const i=Bv(t)?t.dom.classList.toggle(r):zC(t,r);return Bg(t),i},kd=(t,r)=>Bv(t)&&t.dom.classList.contains(r),Iv=(t,r)=>{pt(r,i=>{Cc(t,i)})},kf=(t,r)=>{pt(r,i=>{Hi(t,i)})},Yl=(t,r)=>{pt(r,i=>{VC(t,i)})},f1=(t,r)=>ct(r,i=>kd(t,i)),rA=t=>{const r=t.dom.classList,i=new Array(r.length);for(let d=0;d<r.length;d++){const p=r.item(d);p!==null&&(i[d]=p)}return i},$k=t=>Bv(t)?rA(t):Sf(t),Tf=(t,r,i,d,p)=>{const x=w=>w+"px";return{position:t,left:r.map(x),top:i.map(x),right:d.map(x),bottom:p.map(x)}},Ig=t=>({...t,position:B.some(t.position)}),Lu=(t,r)=>{vc(t,Ig(r))},Fv=t=>(Dr(ba(t,"position"),"fixed")?B.none():ui(t)).orThunk(()=>{const d=xt.fromTag("span");return li(t).bind(p=>{Dl(p,d);const x=ui(d);return al(d),x})}),Sc=t=>Fv(t).map(sl).getOrThunk(()=>Ka(0,0)),wl=(t,r)=>{const i=t.element;Cc(i,r.transitionClass),Hi(i,r.fadeOutClass),Cc(i,r.fadeInClass),r.onShow(t)},Cl=(t,r)=>{const i=t.element;Cc(i,r.transitionClass),Hi(i,r.fadeInClass),Cc(i,r.fadeOutClass),r.onHide(t)},Ac=(t,r)=>t.y<r.bottom&&t.bottom>r.y,Hc=(t,r)=>t.y>=r.y,kc=(t,r)=>t.bottom<=r.bottom,fp=(t,r,i)=>({location:"top",leftX:r,topY:i.bounds.y-t.y}),Ef=(t,r,i)=>({location:"bottom",leftX:r,bottomY:t.bottom-i.bounds.bottom}),p1=t=>t.box.x-t.win.x,X0=(t,r,i)=>{const d=r.win,p=r.box,x=p1(r);return rt(t,w=>{switch(w){case"bottom":return kc(p,i.bounds)?B.none():B.some(Ef(d,x,i));case"top":return Hc(p,i.bounds)?B.none():B.some(fp(d,x,i));default:return B.none()}}).getOr({location:"no-dock"})},aA=(t,r,i)=>ct(t,d=>{switch(d){case"bottom":return kc(r,i.bounds);case"top":return Hc(r,i.bounds)}}),UC=(t,r)=>{const i=r.optScrollEnv.fold(re(t.bounds.y),d=>d.scrollElmTop+(t.bounds.y-d.currentScrollTop));return Ka(t.bounds.x,i)},J0=(t,r)=>{const i=r.optScrollEnv.fold(re(t.y),d=>t.y+d.currentScrollTop-d.scrollElmTop);return Ka(t.x,i)},Q0=(t,r,i)=>i.getInitialPos().map(d=>{const p=UC(d,r);return{box:oa(p.left,p.top,_e(t),uc(t)),location:d.location}}),iA=(t,r,i,d,p)=>{const x=J0(r,i),w=oa(x.left,x.top,r.width,r.height);d.setInitialPos({style:$d(t),position:bn(t,"position")||"static",bounds:w,location:p.location})},Hk=(t,r,i,d,p)=>{d.getInitialPos().fold(()=>iA(t,r,i,d,p),()=>ue)},Td=(t,r,i)=>i.getInitialPos().bind(d=>{var p;switch(i.clearInitialPos(),d.position){case"static":return B.some({morph:"static"});case"absolute":const x=Fv(t).getOr(Pt()),w=jc(x),A=(p=x.dom.scrollTop)!==null&&p!==void 0?p:0;return B.some({morph:"absolute",positionCss:Tf("absolute",vn(d.style,"left").map(R=>r.x-w.x),vn(d.style,"top").map(R=>r.y-w.y+A),vn(d.style,"right").map(R=>w.right-r.right),vn(d.style,"bottom").map(R=>w.bottom-r.bottom))});default:return B.none()}}),cA=(t,r,i)=>Q0(t,r,i).filter(({box:d})=>aA(i.getModes(),d,r)).bind(({box:d})=>Td(t,d,i)),sd=t=>{switch(t.location){case"top":return B.some({morph:"fixed",positionCss:Tf("fixed",B.some(t.leftX),B.some(t.topY),B.none(),B.none())});case"bottom":return B.some({morph:"fixed",positionCss:Tf("fixed",B.some(t.leftX),B.none(),B.none(),B.some(t.bottomY))});default:return B.none()}},ey=(t,r,i)=>{const d=jc(t),p=Yt(),x=X0(i.getModes(),{win:p,box:d},r);return x.location==="top"||x.location==="bottom"?(iA(t,d,r,i,x),sd(x)):B.none()},ab=(t,r,i)=>cA(t,r,i).orThunk(()=>r.optScrollEnv.bind(d=>Q0(t,r,i)).bind(({box:d,location:p})=>{const x=Yt(),w=p1({win:x,box:d}),A=p==="top"?fp(x,w,r):Ef(x,w,r);return sd(A)})),h1=(t,r,i)=>{const d=t.element;return Dr(ba(d,"position"),"fixed")?ab(d,r,i):ey(d,r,i)},du=(t,r,i)=>{const d=t.element;return Q0(d,r,i).bind(({box:p})=>Td(d,p,i))},b1=(t,r,i,d)=>{const p=jc(t),x=Yt(),w=p1({win:x,box:p}),A=d(x,w,r);return A.location==="bottom"||A.location==="top"?(Hk(t,p,r,i,A),sd(A)):B.none()},pp=(t,r,i)=>{i.setDocked(!1),pt(["left","right","top","bottom","position"],d=>cr(t.element,d)),r.onUndocked(t)},Ix=(t,r,i,d)=>{const p=d.position==="fixed";i.setDocked(p),Lu(t.element,d),(p?r.onDocked:r.onUndocked)(t)},zk=(t,r,i,d,p=!1)=>{r.contextual.each(x=>{x.lazyContext(t).each(w=>{const A=Ac(w,d.bounds);A!==i.isVisible()&&(i.setVisible(A),p&&!A?(Iv(t.element,[x.fadeOutClass]),x.onHide(t)):(A?wl:Cl)(t,x))})})},WC=(t,r,i,d,p)=>{zk(t,r,i,d,!0),Ix(t,r,i,p.positionCss)},lA=(t,r,i,d,p)=>{switch(p.morph){case"static":return pp(t,r,i);case"absolute":return Ix(t,r,i,p.positionCss);case"fixed":return WC(t,r,i,d,p)}},v1=(t,r,i)=>{const d=r.lazyViewport(t);zk(t,r,i,d),h1(t,d,i).each(p=>{lA(t,r,i,d,p)})},aD=(t,r,i)=>{const d=t.element;i.setDocked(!1);const p=r.lazyViewport(t);du(t,p,i).each(x=>{switch(x.morph){case"static":{pp(t,r,i);break}case"absolute":{Ix(t,r,i,x.positionCss);break}}}),i.setVisible(!0),r.contextual.each(x=>{kf(d,[x.fadeInClass,x.fadeOutClass,x.transitionClass]),x.onShow(t)}),ty(t,r,i)},ty=(t,r,i)=>{t.getSystem().isConnected()&&v1(t,r,i)},y1=(t,r,i)=>{i.isDocked()&&aD(t,r,i)},Pv=t=>(r,i,d)=>{const p=i.lazyViewport(r);b1(r.element,p,d,t).each(w=>{WC(r,i,d,p,w)})},Fx=Pv(fp),jC=Pv(Ef);var uA=Object.freeze({__proto__:null,refresh:ty,reset:y1,isDocked:(t,r,i)=>i.isDocked(),getModes:(t,r,i)=>i.getModes(),setModes:(t,r,i,d)=>i.setModes(d),forceDockToTop:Fx,forceDockToBottom:jC}),ib=Object.freeze({__proto__:null,events:(t,r)=>ya([u1(cp(),(i,d)=>{t.contextual.each(p=>{kd(i.element,p.transitionClass)&&(kf(i.element,[p.transitionClass,p.fadeInClass]),(r.isVisible()?p.onShown:p.onHidden)(i)),d.stop()})}),on(Av(),(i,d)=>{ty(i,t,r)}),on(Ov(),(i,d)=>{ty(i,t,r)}),on($a(),(i,d)=>{y1(i,t,r)})])});const iD=(t,r)=>{const d=(r||document).createElement("div");return d.innerHTML=t,qi(xt.fromDom(d))},_u=t=>t.dom.innerHTML,Fg=(t,r)=>{const d=Xs(t).dom,p=xt.fromDom(d.createDocumentFragment()),x=iD(r,d);Rl(p,x),om(t),Dl(t,p)},x1=t=>{const r=xt.fromTag("div"),i=xt.fromDom(t.dom.cloneNode(!0));return Dl(r,i),_u(r)},cb=(t,r)=>xt.fromDom(t.dom.cloneNode(r)),cD=t=>cb(t,!1),Px=t=>cb(t,!0),jm=t=>{if(oi(t))return"#shadow-root";{const r=cD(t);return x1(r)}},_f=t=>jm(t),Lx="unknown";var Pg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Pg||(Pg={}));const ch=wo({}),lh=(t,r)=>{const i=[],d=new Date().getTime();return{logEventCut:(p,x,w)=>{i.push({outcome:"cut",target:x,purpose:w})},logEventStopped:(p,x,w)=>{i.push({outcome:"stopped",target:x,purpose:w})},logNoParent:(p,x,w)=>{i.push({outcome:"no-parent",target:x,purpose:w})},logEventNoHandlers:(p,x)=>{i.push({outcome:"no-handlers-left",target:x})},logEventResponse:(p,x,w)=>{i.push({outcome:"response",purpose:w,target:x})},write:()=>{const p=new Date().getTime();Oe(["mousemove","mouseover","mouseout",Hr()],t)||console.log(t,{event:t,time:p-d,target:r.dom,sequence:$e(i,x=>Oe(["cut","stopped","response"],x.outcome)?"{"+x.purpose+"} "+x.outcome+" at ("+_f(x.target)+")":x.outcome)})}}},Sl=(t,r,i)=>{switch(vn(ch.get(),t).orThunk(()=>{const p=nn(ch.get());return rt(p,x=>t.indexOf(x)>-1?B.some(ch.get()[x]):B.none())}).getOr(Pg.NORMAL)){case Pg.NORMAL:return i(Lv());case Pg.LOGGING:{const p=lh(t,r),x=i(p);return p.write(),x}case Pg.STOP:return!0}},Wk=["alloy/data/Fields","alloy/debugging/Debugging"],Nl=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return ce(r,i=>i.indexOf("alloy")>0&&!ft(Wk,d=>i.indexOf(d)>-1)).getOr(Lx)}else return Lx},ZC={logEventCut:ue,logEventStopped:ue,logNoParent:ue,logEventNoHandlers:ue,logEventResponse:ue,write:ue},GC=(t,r,i)=>Sl(t,r,i),Lv=re(ZC),uh=re([dn("menu"),dn("selectedMenu")]),dh=re([dn("item"),dn("selectedItem")]);re(os(dh().concat(uh())));const Lg=re(os(dh())),jk=lm("initSize",[dn("numColumns"),dn("numRows")]),ny=()=>ia("markers",Lg()),oy=()=>lm("markers",[dn("backgroundMenu")].concat(uh()).concat(dh())),lb=t=>lm("markers",$e(t,dn)),$x=(t,r,i)=>(Nl(),Gc(r,r,i,o1(d=>Ws.value((...p)=>d.apply(void 0,p))))),Ar=t=>$x("onHandler",t,im(ue)),rd=t=>$x("onKeyboardHandler",t,im(B.none)),w1=t=>$x("onHandler",t,yd()),ub=t=>$x("onKeyboardHandler",t,yd()),xi=(t,r)=>aa(t,re(r)),C1=t=>aa(t,rn),hp=re(jk);var $v=[Yc("contextual",[qc("fadeInClass"),qc("fadeOutClass"),qc("transitionClass"),ed("lazyContext"),Ar("onShow"),Ar("onShown"),Ar("onHide"),Ar("onHidden")]),Ea("lazyViewport",()=>({bounds:Yt(),optScrollEnv:B.none()})),D("modes",["top","bottom"],so),Ar("onDocked"),Ar("onUndocked")],Zk=Object.freeze({__proto__:null,init:t=>{const r=wo(!1),i=wo(!0),d=Ir(),p=wo(t.modes),x=()=>`docked:  ${r.get()}, visible: ${i.get()}, modes: ${p.get().join(",")}`;return lu({isDocked:r.get,setDocked:r.set,getInitialPos:d.get,setInitialPos:d.set,clearInitialPos:d.clear,isVisible:i.get,setVisible:i.set,getModes:p.get,setModes:p.set,readState:x})}});const wi=xl({fields:$v,name:"docking",active:ib,apis:uA,state:Zk}),db=(t,r,i)=>Es(r,t.element)&&!Es(r,i),Gk=ya([FC(lp(),(t,r)=>{const i=r.event,d=i.originator,p=i.target;return db(t,d,p)?(console.warn(lp()+` did not get interpreted by the desired target. 
Originator: `+_f(d)+`
Target: `+_f(p)+`
Check the `+lp()+" event handlers"),!1):!0})]);var dA=Object.freeze({__proto__:null,events:Gk});const S1=(t,r,i,d)=>{const p=t+r;return p>d?i:p<i?d:p},Oc=(t,r,i)=>Math.min(Math.max(t,r),i),Hx=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let mb=0;const Ao=t=>{const i=new Date().getTime(),d=Math.floor(Hx()*1e9);return mb++,t+"_"+d+mb+String(i)},qk=re("alloy-id-"),sy=re("data-alloy-id"),mA=qk(),zx=sy(),Kk=(t,r)=>{const i=Ao(mA+t);return qC(r,i),i},qC=(t,r)=>{Object.defineProperty(t.dom,zx,{value:r,writable:!0})},Hv=t=>{const r=er(t)?t.dom[zx]:null;return B.from(r)},$g=t=>Ao(t),uD=rn,bp=t=>{const r=p=>`The component must be in a context to execute: ${p}`+(t?`
`+_f(t().element)+" is not in context.":""),i=p=>()=>{throw new Error(r(p))},d=p=>()=>{console.warn(r(p))};return{debugInfo:re("fake"),triggerEvent:d("triggerEvent"),triggerFocus:d("triggerFocus"),triggerEscape:d("triggerEscape"),broadcast:d("broadcast"),broadcastOn:d("broadcastOn"),broadcastEvent:d("broadcastEvent"),build:i("build"),buildOrPatch:i("buildOrPatch"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),isConnected:$t}},gA=bp(),Vx=Ao("alloy-premade"),Hg=t=>(Object.defineProperty(t.element.dom,Vx,{value:t.uid,writable:!0}),Ss(Vx,t)),fA=t=>Ls(t.dom,Vx),Ux=t=>vn(t,Vx),Wx=t=>$C((r,...i)=>t(r.getApis(),r,...i),t),pA=(t,r)=>{const i=$e(r,p=>Yc(p.name(),[dn("config"),Ct("state",Cf)])),d=Li("component.behaviours",os(i),t.behaviours).fold(p=>{throw new Error(Uo(p)+`
Complete spec:
`+JSON.stringify(t,null,2))},rn);return{list:r,data:Mn(d,p=>{const x=p.map(w=>({config:w.config,state:w.state.init(w.config)}));return re(x)})}},dD=t=>t.list,KC=t=>t.data,YC=(t,r)=>{const i={};return Co(t,(d,p)=>{Co(d,(x,w)=>{const A=vn(i,w).getOr([]);i[w]=A.concat([r(p,x)])})}),i},hA=(t,r,i,d)=>{const p={...r};pt(i,W=>{p[W.name()]=W.exhibit(t,d)});const x=YC(p,(W,q)=>({name:W,modification:q})),w=W=>Mt(W,(q,se)=>({...se.modification,...q}),{}),A=Mt(x.classes,(W,q)=>q.modification.concat(W),[]),R=w(x.attributes),$=w(x.styles);return mm({classes:A,attributes:R,styles:$})},bA=(t,r,i,d)=>{try{const p=Dt(i,(x,w)=>{const A=x[r],R=w[r],$=d.indexOf(A),W=d.indexOf(R);if($===-1)throw new Error("The ordering for "+t+" does not have an entry for "+A+`.
Order specified: `+JSON.stringify(d,null,2));if(W===-1)throw new Error("The ordering for "+t+" does not have an entry for "+R+`.
Order specified: `+JSON.stringify(d,null,2));return $<W?-1:W<$?1:0});return Ws.value(p)}catch(p){return Ws.error([p])}},vA=(t,r)=>({handler:t,purpose:r}),mh=(t,r)=>({cHandler:t,purpose:r}),$u=(t,r)=>mh(qn.apply(void 0,[t.handler].concat(r)),t.purpose),gh=t=>t.cHandler,k1=(t,r)=>({name:t,handler:r}),ry=(t,r)=>{const i={};return pt(t,d=>{i[d.name()]=d.handlers(r)}),i},jx=(t,r,i)=>{const d={...i,...ry(r,t)};return YC(d,k1)},Zx=(t,r,i,d)=>{const p=jx(t,i,d);return yA(p,r)},Gx=t=>{const r=Qh(t);return(i,d,...p)=>{const x=[i,d].concat(p);r.abort.apply(void 0,x)?d.stop():r.can.apply(void 0,x)&&r.run.apply(void 0,x)}},zv=(t,r)=>Ws.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify($e(r,i=>i.name),null,2)]),_d=(t,r,i)=>{const d=r[i];return d?bA("Event: "+i,"name",t,d).map(p=>{const x=$e(p,w=>w.handler);return i1(x)}):zv(i,t)},yA=(t,r)=>{const i=ma(t,(d,p)=>(d.length===1?Ws.value(d[0].handler):_d(d,r,p)).map(w=>{const A=Gx(w),R=d.length>1?Et(r[p],$=>ft(d,W=>W.name===$)).join(" > "):d[0].name;return Ss(p,vA(A,R))}));return Lc(i,{})},Zm="alloy.base.behaviour",Yk=os([Gc("dom","dom",yd(),os([dn("tag"),Ct("styles",{}),Ct("classes",[]),Ct("attributes",{}),Cs("value"),Cs("innerHtml")])),dn("components"),dn("uid"),Ct("events",{}),Ct("apis",{}),Gc("eventOrder","eventOrder",j({[cu()]:["disabling",Zm,"toggling","typeaheadevents"],[lp()]:[Zm,"focusing","keying"],[Hr()]:[Zm,"disabling","toggling","representing","tooltipping"],[lg()]:[Zm,"representing","streaming","invalidating"],[Wd()]:[Zm,"representing","item-events","toolbar-button-events","tooltipping"],[_c()]:["focusing",Zm,"item-type-events"],[cg()]:["focusing",Zm,"item-type-events"],[td()]:["item-type-events","tooltipping"],[ug()]:["receiving","reflecting","tooltipping"]}),Ud()),Cs("domModification")]),fh=t=>Li("custom.definition",Yk,t),Af=t=>({...t.dom,uid:t.uid,domChildren:$e(t.components,r=>r.element)}),XC=t=>t.domModification.fold(()=>mm({}),mm),Xt=t=>t.events,zg=t=>t.dom.value,T1=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},Xk=(t,r,i)=>or(t,r).map(p=>{if(i.exists(w=>!Es(w,p))){const w=i.map(Ur).getOr("span"),A=xt.fromTag(w);return Tg(p,A),A}else return p}),ay=(t,r,i)=>{i.fold(()=>Dl(t,r),d=>{Es(d,r)||(Tg(d,r),al(d))})},fm=(t,r,i)=>{const d=$e(r,i),p=qi(t);return pt(p.slice(d.length),al),d},JC=(t,r,i,d)=>{const p=or(t,r),x=d(i,p),w=Xk(t,r,p);return ay(t,x.element,w),x},xA=(t,r,i)=>fm(t,r,(d,p)=>JC(t,p,d,i)),jd=(t,r)=>fm(t,r,(i,d)=>{const p=or(t,d);return ay(t,i,p),i}),Vv=(t,r)=>{const i=nn(t),d=nn(r),p=dt(d,i),x=gr(t,(w,A)=>!Ls(r,A)||w!==r[A]).t;return{toRemove:p,toSet:x}},mD=(t,r)=>{const{class:i,style:d,...p}=Ze(r),{toSet:x,toRemove:w}=Vv(t.attributes,p),A=()=>{pt(w,lt=>fe(r,lt)),ms(r,x)},R=$d(r),{toSet:$,toRemove:W}=Vv(t.styles,R),q=()=>{pt(W,lt=>cr(r,lt)),jr(r,$)},se=$k(r),ge=dt(se,t.classes),Ae=dt(t.classes,se),Ie=()=>{Iv(r,Ae),kf(r,ge)},mt=lt=>{Fg(r,lt)},Fe=()=>{const lt=t.domChildren;jd(r,lt)},nt=()=>{const lt=r,Ft=t.value.getOrUndefined();Ft!==zg(lt)&&T1(lt,Ft??"")};return A(),Ie(),q(),t.innerHtml.fold(Fe,mt),nt(),r},Jr=t=>{const r=xt.fromTag(t.tag);ms(r,t.attributes),Iv(r,t.classes),jr(r,t.styles),t.innerHtml.each(d=>Fg(r,d));const i=t.domChildren;return Rl(r,i),t.value.each(d=>{T1(r,d)}),r},E1=(t,r)=>{try{const i=mD(t,r);return B.some(i)}catch{return B.none()}},Uv=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Jk=(t,r)=>{const i=p=>Ur(p)===t.tag&&!Uv(t)&&!fA(p),d=r.filter(i).bind(p=>E1(t,p)).getOrThunk(()=>Jr(t));return qC(d,t.uid),d},wA=t=>{const r=vn(t,"behaviours").getOr({});return oe(nn(r),i=>{const d=r[i];return zn(d)?[d.me]:[]})},Qk=(t,r)=>pA(t,r),gD=t=>{const r=wA(t);return Qk(t,r)},iy=(t,r,i)=>{const d=Af(t),p=XC(t),x={"alloy.base.modification":p},w=r.length>0?hA(i,x,r,d):p;return HC(d,w)},cy=(t,r,i)=>{const d={"alloy.base.behaviour":Xt(t)};return Zx(i,t.eventOrder,r,d).getOrDie()},CA=(t,r)=>{const i=()=>lt,d=wo(gA),p=_n(fh(t)),x=gD(t),w=dD(x),A=KC(x),R=iy(p,w,A),$=Jk(R,r),W=cy(p,w,A),q=wo(p.components),se=Ft=>{d.set(Ft)},ge=()=>{d.set(bp(i))},Ae=()=>{const Ft=qi($),zt=oe(Ft,Zn=>d.get().getByDom(Zn).fold(()=>[],it));q.set(zt)},Ie=Ft=>{const zt=A;return(Vt(zt[Ft.name()])?zt[Ft.name()]:()=>{throw new Error("Could not find "+Ft.name()+" in "+JSON.stringify(t,null,2))})()},mt=Ft=>Vt(A[Ft.name()]),Fe=()=>p.apis,nt=Ft=>A[Ft]().map(zt=>zt.state.readState()).getOr("not enabled"),lt={uid:t.uid,getSystem:d.get,config:Ie,hasConfigured:mt,spec:t,readState:nt,getApis:Fe,connect:se,disconnect:ge,element:$,syncComponents:Ae,components:q.get,events:W};return lt},SA=(t,r)=>{const i=vn(t,"components").getOr([]);return r.fold(()=>$e(i,Hu),d=>$e(i,(p,x)=>ly(p,or(d,x))))},fD=(t,r)=>{const{events:i,...d}=uD(t),p=SA(d,r),x={...d,events:{...dA,...i},components:p};return Ws.value(CA(x,r))},Di=t=>{const r=xt.fromText(t);return QC({element:r})},QC=t=>{const r=$s("external.component",Pc([dn("element"),Cs("uid")]),t),i=wo(bp()),d=A=>{i.set(A)},p=()=>{i.set(bp(()=>w))},x=r.uid.getOrThunk(()=>$g("external"));qC(r.element,x);const w={uid:x,getSystem:i.get,config:B.none,hasConfigured:$t,connect:d,disconnect:p,getApis:()=>({}),element:r.element,spec:t,readState:re("No state"),syncComponents:ue,components:re([]),events:{}};return Hg(w)},kA=$g,eT=t=>Ls(t,"uid"),ly=(t,r)=>Ux(t).getOrThunk(()=>{const i=eT(t)?t:{uid:kA(""),...t};return fD(i,r).getOrDie()}),Hu=t=>ly(t,B.none()),dg=Hg;var TA=(t,r,i,d,p)=>t(i,d)?B.some(i):Vt(p)&&p(i)?B.none():r(i,d,p);const go=(t,r,i)=>{let d=t.dom;const p=Vt(i)?i:$t;for(;d.parentNode;){d=d.parentNode;const x=xt.fromDom(d);if(r(x))return B.some(x);if(p(x))break}return B.none()},Bl=(t,r,i)=>TA((p,x)=>x(p),go,t,r,i),tT=(t,r)=>{const i=t.dom;return i.parentNode?Il(xt.fromDom(i.parentNode),d=>!Es(t,d)&&r(d)):B.none()},Il=(t,r)=>{const i=p=>r(xt.fromDom(p));return ce(t.dom.childNodes,i).map(xt.fromDom)},gb=(t,r)=>{const i=d=>{for(let p=0;p<d.childNodes.length;p++){const x=xt.fromDom(d.childNodes[p]);if(r(x))return B.some(x);const w=i(d.childNodes[p]);if(w.isSome())return w}return B.none()};return i(t.dom)},ph=(t,r,i)=>Bl(t,r,i).isSome(),EA=t=>Ei(t),zc=(t,r,i)=>go(t,d=>Ta(d,r),i),nT=(t,r)=>tT(t,i=>Ta(i,r)),mg=(t,r)=>Il(t,i=>Ta(i,r)),zi=(t,r)=>Ei(r,t),vp=(t,r,i)=>TA((p,x)=>Ta(p,x),zc,t,r,i),_1="aria-controls",Wv=t=>Bl(t,i=>{if(!er(i))return!1;const d=Ds(i,"id");return d!==void 0&&d.indexOf(_1)>-1}).bind(i=>{const d=Ds(i,"id"),p=qa(i);return zi(p,`[${_1}="${d}"]`)}),qx=()=>{const t=Ao(_1);return{id:t,link:d=>{Kn(d,_1,t)},unlink:d=>{fe(d,_1)}}},e2=(t,r)=>Wv(r).exists(i=>yp(t,i)),yp=(t,r)=>ph(r,i=>Es(i,t.element),$t)||e2(t,r),mu=(t,r,i,d,p,x,w,A=!1)=>({x:t,y:r,bubble:i,direction:d,placement:p,restriction:x,label:`${w}-${p}`,alwaysFit:A}),hh=ye.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Kx=(t,r,i,d,p,x,w,A,R)=>t.fold(r,i,d,p,x,w,A,R),t2=(t,r,i,d)=>t.fold(r,r,d,d,r,d,i,i),pD=(t,r,i,d)=>t.fold(r,d,r,d,i,i,r,d),n2=hh.southeast,oT=hh.southwest,sT=hh.northeast,o2=hh.northwest,rT=hh.south,Yx=hh.north,zu=hh.east,Vg=hh.west,Ug=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Xl=(t,r)=>An(["left","right","top","bottom"],i=>vn(r,i).map(d=>Ug(t,d))),s2=(t,r,i)=>{const d=(R,$)=>r[R].map(W=>{const q=R==="top"||R==="bottom",se=q?i.top:i.left,Ae=(R==="left"||R==="top"?Math.max:Math.min)(W,$)+se;return q?Oc(Ae,t.y,t.bottom):Oc(Ae,t.x,t.right)}).getOr($),p=d("left",t.x),x=d("top",t.y),w=d("right",t.right),A=d("bottom",t.bottom);return oa(p,x,w-p,A-x)},fb="layout",Xx=t=>t.x,r2=(t,r)=>t.x+t.width/2-r.width/2,aT=(t,r)=>t.x+t.width-r.width,uy=(t,r)=>t.y-r.height,dy=t=>t.y+t.height,pb=(t,r)=>t.y+t.height/2-r.height/2,iT=t=>t.x+t.width,Jx=(t,r)=>t.x-r.width,lr=(t,r,i)=>mu(Xx(t),dy(t),i.southeast(),n2(),"southeast",Xl(t,{left:1,top:3}),fb),pc=(t,r,i)=>mu(aT(t,r),dy(t),i.southwest(),oT(),"southwest",Xl(t,{right:0,top:3}),fb),Fl=(t,r,i)=>mu(Xx(t),uy(t,r),i.northeast(),sT(),"northeast",Xl(t,{left:1,bottom:2}),fb),Fa=(t,r,i)=>mu(aT(t,r),uy(t,r),i.northwest(),o2(),"northwest",Xl(t,{right:0,bottom:2}),fb),Jl=(t,r,i)=>mu(r2(t,r),uy(t,r),i.north(),Yx(),"north",Xl(t,{bottom:2}),fb),Jc=(t,r,i)=>mu(r2(t,r),dy(t),i.south(),rT(),"south",Xl(t,{top:3}),fb),my=(t,r,i)=>mu(iT(t),pb(t,r),i.east(),zu(),"east",Xl(t,{left:0}),fb),gy=(t,r,i)=>mu(Jx(t,r),pb(t,r),i.west(),Vg(),"west",Xl(t,{right:1}),fb),cT=()=>[lr,pc,Fl,Fa,Jc,Jl,my,gy],lT=()=>[pc,lr,Fa,Fl,Jc,Jl,my,gy],Qx=()=>[Fl,Fa,lr,pc,Jl,Jc],Ro=()=>[Fa,Fl,pc,lr,Jl,Jc],fy=()=>[lr,pc,Fl,Fa,Jc,Jl],A1=()=>[pc,lr,Fa,Fl,Jc,Jl],Gm=(t,r)=>r.universal?t:Et(t,i=>Oe(r.channels,i));var Of=Object.freeze({__proto__:null,events:t=>ya([on(ug(),(r,i)=>{const d=t.channels,p=nn(d),x=i,w=Gm(p,x);pt(w,A=>{const R=d[A],$=R.schema,W=$s("channel["+A+`] data
Receiver: `+_f(r.element),$,x.data);R.onReceive(r,W)})})])}),_A=[ia("channels",rg(Ws.value,Pc([w1("onReceive"),Ct("schema",Ud())])))];const qm=xl({fields:_A,name:"receiving",active:Of});var AA=Object.freeze({__proto__:null,exhibit:(t,r)=>mm({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Zd=(t,r=!1)=>t.dom.focus({preventScroll:r}),Pl=t=>t.dom.blur(),bh=t=>{const r=qa(t).dom;return t.dom===r.activeElement},hb=(t=pf())=>B.from(t.dom.activeElement).map(xt.fromDom),Ad=t=>hb(qa(t)).filter(r=>t.dom.contains(r.dom)),uT=(t,r)=>{const i=qa(r),d=hb(i).bind(x=>{const w=A=>Es(x,A);return w(r)?B.some(r):gb(r,w)}),p=t(r);return d.each(x=>{hb(i).filter(w=>Es(w,x)).fold(()=>{Zd(x)},ue)}),p},ew=ye.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),a2=(t,r,i,d,p,x)=>{const w=r.rect,A=w.x-i,R=w.y-d,$=w.width,W=w.height,q=p-(A+$),se=x-(R+W),ge=B.some(A),Ae=B.some(R),Ie=B.some(q),mt=B.some(se),Fe=B.none();return Kx(r.direction,()=>Tf(t,ge,Ae,Fe,Fe),()=>Tf(t,Fe,Ae,Ie,Fe),()=>Tf(t,ge,Fe,Fe,mt),()=>Tf(t,Fe,Fe,Ie,mt),()=>Tf(t,ge,Ae,Fe,Fe),()=>Tf(t,ge,Fe,Fe,mt),()=>Tf(t,ge,Ae,Fe,Fe),()=>Tf(t,Fe,Ae,Ie,Fe))},i2=(t,r)=>t.fold(()=>{const i=r.rect;return Tf("absolute",B.some(i.x),B.some(i.y),B.none(),B.none())},(i,d,p,x)=>a2("absolute",r,i,d,p,x),(i,d,p,x)=>a2("fixed",r,i,d,p,x)),c2=(t,r)=>{const i=qn(Zl,r),d=t.fold(i,i,()=>{const w=bl();return Zl(r).translate(-w.left,-w.top)}),p=wt(r),x=Mm(r);return oa(d.left,d.top,p,x)},dT=(t,r)=>r.fold(()=>t.fold(Yt,Yt,oa),i=>t.fold(re(i),re(i),()=>{const d=l2(t,i.x,i.y);return oa(d.left,d.top,i.width,i.height)})),l2=(t,r,i)=>{const d=Ka(r,i),p=()=>{const x=bl();return d.translate(-x.left,-x.top)};return t.fold(re(d),re(d),p)},hs=(t,r,i,d)=>t.fold(r,i,d);ew.none;const mT=ew.relative,bb=ew.fixed,jv=(t,r)=>({anchorBox:t,origin:r}),u2=(t,r)=>jv(t,r),d2="data-alloy-placement",tw=(t,r)=>{Kn(t,d2,r)},m2=t=>br(t,d2),hD=t=>fe(t,d2),nw=ye.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),xa=(t,r)=>{const{x:i,y:d,right:p,bottom:x}=r,{x:w,y:A,right:R,bottom:$,width:W,height:q}=t,se=w>=i&&w<=p,ge=A>=d&&A<=x,Ae=se&&ge,Ie=R<=p&&R>=i,mt=$<=x&&$>=d,Fe=Ie&&mt,nt=Math.min(W,w>=i?p-w:R-i),lt=Math.min(q,A>=d?x-A:$-d);return{originInBounds:Ae,sizeInBounds:Fe,visibleW:nt,visibleH:lt}},bD=(t,r)=>{const{x:i,y:d,right:p,bottom:x}=r,{x:w,y:A,width:R,height:$}=t,W=Math.max(i,p-R),q=Math.max(d,x-$),se=Oc(w,i,W),ge=Oc(A,d,q),Ae=Math.min(se+R,p)-se,Ie=Math.min(ge+$,x)-ge;return oa(se,ge,Ae,Ie)},vb=(t,r,i)=>{const d=re(r.bottom-i.y),p=re(i.bottom-r.y),x=t2(t,p,p,d),w=re(r.right-i.x),A=re(i.right-r.x);return{maxWidth:pD(t,A,A,w),maxHeight:x}},Df=(t,r,i,d)=>{const p=t.bubble,x=p.offset,w=s2(d,t.restriction,x),A=t.x+x.left,R=t.y+x.top,$=oa(A,R,r,i),{originInBounds:W,sizeInBounds:q,visibleW:se,visibleH:ge}=xa($,w),Ae=W&&q,Ie=Ae?$:bD($,w),mt=Ie.width>0&&Ie.height>0,{maxWidth:Fe,maxHeight:nt}=vb(t.direction,Ie,d),lt={rect:Ie,maxHeight:nt,maxWidth:Fe,direction:t.direction,placement:t.placement,classes:{on:p.classesOn,off:p.classesOff},layout:t.label,testY:R};return Ae||t.alwaysFit?nw.fit(lt):nw.nofit(lt,se,ge,mt)},g2=(t,r,i,d,p,x)=>{const w=d.width,A=d.height,R=(W,q,se,ge,Ae)=>{const Ie=W(i,d,p,t,x),mt=Df(Ie,w,A,x);return mt.fold(re(mt),(Fe,nt,lt,Ft)=>(Ae===Ft?lt>ge||nt>se:!Ae&&Ft)?mt:nw.nofit(q,se,ge,Ae))};return Pn(r,(W,q)=>{const se=qn(R,q);return W.fold(re(W),se)},nw.nofit({rect:i,maxHeight:d.height,maxWidth:d.width,direction:n2(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:i.y},-1,-1,!1)).fold(rn,rn)},hm=Kt,Au=(t,r,i)=>jl(t,r,hm,i),Zv=(t,r,i)=>Xh(t,r,hm,i),ow=zd,O1=["top","bottom","right","left"],f2="data-alloy-transition-timer",py=(t,r)=>f1(t,r.classes),vD=(t,r,i)=>i.exists(d=>{const p=t.mode;return p==="all"?!0:d[p]!==r[p]}),hy=(t,r)=>{const i=d=>parseFloat(d).toFixed(3);return ns(r,(d,p)=>{const x=t[p].map(i),w=d.map(i);return!Gi(x,w)}).isSome()},Gr=t=>{const r=x=>{const A=bn(t,x).split(/\s*,\s*/);return Et(A,Ve)},i=x=>{if(Tt(x)&&/^[\d.]+/.test(x)){const w=parseFloat(x);return Mc(x,"ms")?w:w*1e3}else return 0},d=r("transition-delay"),p=r("transition-duration");return Pn(p,(x,w,A)=>{const R=i(d[A])+i(w);return Math.max(x,R)},0)},Gd=(t,r)=>{const i=mc(),d=mc();let p;const x=$=>{var W;const q=(W=$.raw.pseudoElement)!==null&&W!==void 0?W:"";return Es($.target,t)&&Pe(q)&&Oe(O1,$.raw.propertyName)},w=$=>{if(kn($)||x($)){i.clear(),d.clear();const W=$==null?void 0:$.raw.type;(kn(W)||W===cp())&&(clearTimeout(p),fe(t,f2),kf(t,r.classes))}},A=Au(t,c1(),$=>{x($)&&(A.unbind(),i.set(Au(t,cp(),w)),d.set(Au(t,Ik(),w)))}),R=Gr(t);requestAnimationFrame(()=>{p=setTimeout(w,R+17),Kn(t,f2,p)})},yb=(t,r)=>{Iv(t,r.classes),br(t,f2).each(i=>{clearTimeout(parseInt(i,10)),fe(t,f2)}),Gd(t,r)},OA=(t,r,i,d,p,x)=>{const w=vD(d,p,x);if(w||py(t,d)){Gn(t,"position",i.position);const A=c2(r,t),R=i2(r,{...p,rect:A}),$=An(O1,W=>R[W]);hy(i,$)&&(vc(t,$),w&&yb(t,d),ou(t))}else kf(t,d.classes)},Gv=t=>({width:wt(t),height:Mm(t)}),sa=(t,r,i,d)=>{cr(r,"max-height"),cr(r,"max-width");const p=Gv(r);return g2(r,d.preference,t,p,i,d.bounds)},gT=(t,r)=>{const i=r.classes;kf(t,i.off),Iv(t,i.on)},by=(t,r,i)=>{const d=i.maxHeightFunction;d(t,r.maxHeight)},yD=(t,r,i)=>{const d=i.maxWidthFunction;d(t,r.maxWidth)},D1=(t,r,i)=>{const d=i2(i.origin,r);i.transition.each(p=>{OA(t,i.origin,d,p,r,i.lastPlacement)}),Lu(t,d)},R1=(t,r)=>{tw(t,r.placement)},fT=(t,r)=>{Xp(t,Math.floor(r))},p2=re((t,r)=>{fT(t,r),jr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),vy=re((t,r)=>{fT(t,r)}),qv=(t,r,i)=>t[r]===void 0?i:t[r],yy=(t,r,i,d,p,x,w,A)=>{const R=qv(w,"maxHeightFunction",p2()),$=qv(w,"maxWidthFunction",ue),W=t.anchorBox,q=t.origin,se={bounds:dT(q,x),origin:q,preference:d,maxHeightFunction:R,maxWidthFunction:$,lastPlacement:p,transition:A};return h2(W,r,i,se)},h2=(t,r,i,d)=>{const p=sa(t,r,i,d);return D1(r,p,d),R1(r,p),gT(r,p),by(r,p,d),yD(r,p,d),{layout:p.layout,placement:p.placement}},sw=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Rf=(t,r,i,d=1)=>{const p=t*d,x=r*d,w=R=>vn(i,R).getOr([]),A=(R,$,W)=>{const q=dt(sw,W);return{offset:Ka(R,$),classesOn:oe(W,w),classesOff:oe(q,w)}};return{southeast:()=>A(-t,r,["top","alignLeft"]),southwest:()=>A(t,r,["top","alignRight"]),south:()=>A(-t/2,r,["top","alignCentre"]),northeast:()=>A(-t,-r,["bottom","alignLeft"]),northwest:()=>A(t,-r,["bottom","alignRight"]),north:()=>A(-t/2,-r,["bottom","alignCentre"]),east:()=>A(t,-r/2,["valignCentre","left"]),west:()=>A(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>A(p,x,["top","alignLeft","inset"]),insetNorthwest:()=>A(-p,x,["top","alignRight","inset"]),insetNorth:()=>A(-p/2,x,["top","alignCentre","inset"]),insetSoutheast:()=>A(p,-x,["bottom","alignLeft","inset"]),insetSouthwest:()=>A(-p,-x,["bottom","alignRight","inset"]),insetSouth:()=>A(-p/2,-x,["bottom","alignCentre","inset"]),insetEast:()=>A(-p,-x/2,["valignCentre","right","inset"]),insetWest:()=>A(p,-x/2,["valignCentre","left","inset"])}},rw=()=>Rf(0,0,{}),b2=rn,v2=(t,r)=>i=>Vu(i)==="rtl"?r:t,Vu=t=>bn(t,"direction")==="rtl"?"rtl":"ltr";var xp;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(xp||(xp={}));const vh="data-alloy-vertical-dir",DA=t=>ph(t,r=>er(r)&&Ds(r,"data-alloy-vertical-dir")===xp.BottomToTop),xb=()=>Yc("layouts",[dn("onLtr"),dn("onRtl"),Cs("onBottomLtr"),Cs("onBottomRtl")]),aw=(t,r,i,d,p,x,w)=>{const A=w.map(DA).getOr(!1),R=r.layouts.map(ge=>ge.onLtr(t)),$=r.layouts.map(ge=>ge.onRtl(t)),W=A?r.layouts.bind(ge=>ge.onBottomLtr.map(Ae=>Ae(t))).or(R).getOr(p):R.getOr(i),q=A?r.layouts.bind(ge=>ge.onBottomRtl.map(Ae=>Ae(t))).or($).getOr(x):$.getOr(d);return v2(W,q)(t)},y2=(t,r,i)=>{const d=r.hotspot,p=c2(i,d.element),x=aw(t.element,r,fy(),A1(),Qx(),Ro(),B.some(r.hotspot.element));return B.some(b2({anchorBox:p,bubble:r.bubble.getOr(rw()),overrides:r.overrides,layouts:x}))};var RA=[dn("hotspot"),Cs("bubble"),Ct("overrides",{}),xb(),xi("placement",y2)];const pT=(t,r,i)=>{const d=l2(i,r.x,r.y),p=oa(d.left,d.top,r.width,r.height),x=aw(t.element,r,cT(),lT(),cT(),lT(),B.none());return B.some(b2({anchorBox:p,bubble:r.bubble,overrides:r.overrides,layouts:x}))};var Kv=[dn("x"),dn("y"),Ct("height",0),Ct("width",0),Ct("bubble",rw()),Ct("overrides",{}),xb(),xi("placement",pT)];const hT=ye.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),MA=t=>t.fold(rn,(r,i,d)=>r.translate(-i,-d)),xy=t=>t.fold(rn,rn),bT=t=>Pn(t,(r,i)=>r.translate(i.left,i.top),Ka(0,0)),xD=t=>{const r=$e(t,MA);return bT(r)},iw=t=>{const r=$e(t,xy);return bT(r)},vT=hT.screen,x2=hT.absolute,wD=(t,r,i)=>{const d=fs(i.root).dom,p=x=>{const w=Xs(x),A=Xs(t.element);return Es(w,A)};return B.from(d.frameElement).map(xt.fromDom).filter(p).map(sl)},wy=(t,r,i)=>{const d=Xs(t.element),p=bl(d),x=wD(t,r,i).getOr(p);return x2(x,p.left,p.top)},NA=(t,r,i,d)=>{const p=vT(Ka(t,r));return B.some(Ml(p,i,d))},yT=(t,r,i,d,p)=>t.map(x=>{const w=[r,x.point],A=hs(d,()=>iw(w),()=>iw(w),()=>xD(w)),R=Yu(A.left,A.top,x.width,x.height),$=i.showAbove?Qx():fy(),W=i.showAbove?Ro():A1(),q=aw(p,i,$,W,$,W,B.none());return b2({anchorBox:R,bubble:i.bubble.getOr(rw()),overrides:i.overrides,layouts:q})}),xT=(t,r,i)=>{const d=wy(t,i,r);return r.node.filter(Je).bind(p=>{const x=p.dom.getBoundingClientRect(),w=NA(x.left,x.top,x.width,x.height),A=r.node.getOr(t.element);return yT(w,d,r,i,A)})};var w2=[dn("node"),dn("root"),Cs("bubble"),xb(),Ct("overrides",{}),Ct("showAbove",!1),xi("placement",xT)];const BA="\uFEFF",wT=" ",Yv={create:(t,r,i,d)=>({start:t,soffset:r,finish:i,foffset:d})},Cy=ye.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Sy=(t,r,i,d)=>t.fold(r,i,d),ky=t=>t.fold(rn,rn,rn),IA=Cy.before,ST=Cy.on,CD=Cy.after,kB={before:IA,on:ST,after:CD,cata:Sy,getStart:ky},M1=ye.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),C2=t=>M1.exact(t.start,t.soffset,t.finish,t.foffset),kT=t=>t.match({domRange:r=>xt.fromDom(r.startContainer),relative:(r,i)=>kB.getStart(r),exact:(r,i,d,p)=>r}),S2=M1.domRange,TT=M1.relative,SD=M1.exact,kD=t=>{const r=kT(t);return fs(r)},N1=Yv.create,Xv={domRange:S2,relative:TT,exact:SD,exactFromRange:C2,getWin:kD,range:N1},Ty=(t,r)=>{r.fold(i=>{t.setStartBefore(i.dom)},(i,d)=>{t.setStart(i.dom,d)},i=>{t.setStartAfter(i.dom)})},ET=(t,r)=>{r.fold(i=>{t.setEndBefore(i.dom)},(i,d)=>{t.setEnd(i.dom,d)},i=>{t.setEndAfter(i.dom)})},k2=(t,r,i)=>{const d=t.document.createRange();return Ty(d,r),ET(d,i),d},_T=(t,r,i,d,p)=>{const x=t.document.createRange();return x.setStart(r.dom,i),x.setEnd(d.dom,p),x},AT=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),TD=t=>{const r=t.getClientRects(),i=r.length>0?r[0]:t.getBoundingClientRect();return i.width>0||i.height>0?B.some(i).map(AT):B.none()},T2=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?B.some(r).map(AT):B.none()},Ey=ye.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),FA=(t,r,i)=>r(xt.fromDom(i.startContainer),i.startOffset,xt.fromDom(i.endContainer),i.endOffset),ED=(t,r)=>r.match({domRange:i=>({ltr:re(i),rtl:B.none}),relative:(i,d)=>({ltr:Ko(()=>k2(t,i,d)),rtl:Ko(()=>B.some(k2(t,d,i)))}),exact:(i,d,p,x)=>({ltr:Ko(()=>_T(t,i,d,p,x)),rtl:Ko(()=>B.some(_T(t,p,x,i,d)))})}),Jv=(t,r)=>{const i=r.ltr();return i.collapsed?r.rtl().filter(p=>p.collapsed===!1).map(p=>Ey.rtl(xt.fromDom(p.endContainer),p.endOffset,xt.fromDom(p.startContainer),p.startOffset)).getOrThunk(()=>FA(t,Ey.ltr,i)):FA(t,Ey.ltr,i)},_y=(t,r)=>{const i=ED(t,r);return Jv(t,i)},PA=(t,r)=>_y(t,r).match({ltr:(d,p,x,w)=>{const A=t.document.createRange();return A.setStart(d.dom,p),A.setEnd(x.dom,w),A},rtl:(d,p,x,w)=>{const A=t.document.createRange();return A.setStart(x.dom,w),A.setEnd(d.dom,p),A}});Ey.ltr,Ey.rtl;const LA=(t,r,i)=>Et(Dm(t,i),r),qd=(t,r)=>yu(r,t),E2=(t,r,i,d)=>{const x=Xs(t).dom.createRange();return x.setStart(t.dom,r),x.setEnd(i.dom,d),x},OT=(t,r,i,d)=>{const p=E2(t,r,i,d),x=Es(t,i)&&r===d;return p.collapsed&&!x},_D=t=>B.from(t.getSelection()),DT=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),i=t.getRangeAt(t.rangeCount-1);return B.some(Yv.create(xt.fromDom(r.startContainer),r.startOffset,xt.fromDom(i.endContainer),i.endOffset))}else return B.none()},cw=t=>{if(t.anchorNode===null||t.focusNode===null)return DT(t);{const r=xt.fromDom(t.anchorNode),i=xt.fromDom(t.focusNode);return OT(r,t.anchorOffset,i,t.focusOffset)?B.some(Yv.create(r,t.anchorOffset,i,t.focusOffset)):DT(t)}},lw=t=>_D(t).filter(r=>r.rangeCount>0).bind(cw),$A=(t,r)=>{const i=PA(t,r);return TD(i)},Ay=(t,r)=>{const i=PA(t,r);return T2(i)},ts=((t,r)=>{const i=x=>{if(!t(x))throw new Error("Can only get "+r+" value of a "+r+" node");return d(x).getOr("")},d=x=>t(x)?B.from(x.dom.nodeValue):B.none();return{get:i,getOption:d,set:(x,w)=>{if(!t(x))throw new Error("Can only set raw "+r+" value of a "+r+" node");x.dom.nodeValue=w}}})(ar,"text"),MT=t=>ts.get(t),Oy=(t,r)=>({element:t,offset:r}),AD=(t,r)=>{const i=qi(t);if(i.length===0)return Oy(t,r);if(r<i.length)return Oy(i[r],0);{const d=i[i.length-1],p=ar(d)?MT(d).length:qi(d).length;return Oy(d,p)}},Qv=(t,r)=>ar(t)?Oy(t,r):AD(t,r),_2=t=>t.foffset!==void 0,wp=(t,r)=>r.getSelection.getOrThunk(()=>()=>lw(t))().map(d=>{if(_2(d)){const p=Qv(d.start,d.soffset),x=Qv(d.finish,d.foffset);return Xv.range(p.element,p.offset,x.element,x.offset)}else return d}),wb=(t,r,i)=>{const d=fs(r.root).dom,p=wy(t,i,r),x=wp(d,r).bind(R=>{if(_2(R))return Ay(d,Xv.exactFromRange(R)).orThunk(()=>{const W=xt.fromText(BA);Tg(R.start,W);const q=$A(d,Xv.exact(W,0,W,1));return al(W),q}).bind(W=>NA(W.left,W.top,W.width,W.height));{const $=Mn(R,q=>q.dom.getBoundingClientRect()),W={left:Math.min($.firstCell.left,$.lastCell.left),right:Math.max($.firstCell.right,$.lastCell.right),top:Math.min($.firstCell.top,$.lastCell.top),bottom:Math.max($.firstCell.bottom,$.lastCell.bottom)};return NA(W.left,W.top,W.right-W.left,W.bottom-W.top)}}),A=wp(d,r).bind(R=>_2(R)?er(R.start)?B.some(R.start):Wa(R.start):B.some(R.firstCell)).getOr(t.element);return yT(x,p,r,i,A)};var yh=[Cs("getSelection"),dn("root"),Cs("bubble"),xb(),Ct("overrides",{}),Ct("showAbove",!1),xi("placement",wb)];const _s="link-layout",Ts=t=>t.x+t.width,xh=(t,r)=>t.x-r.width,Mf=(t,r)=>t.y-r.height+t.height,A2=t=>t.y,HA=(t,r,i)=>mu(Ts(t),A2(t),i.southeast(),n2(),"southeast",Xl(t,{left:0,top:2}),_s),Rs=(t,r,i)=>mu(xh(t,r),A2(t),i.southwest(),oT(),"southwest",Xl(t,{right:1,top:2}),_s),e0=(t,r,i)=>mu(Ts(t),Mf(t,r),i.northeast(),sT(),"northeast",Xl(t,{left:0,bottom:3}),_s),t0=(t,r,i)=>mu(xh(t,r),Mf(t,r),i.northwest(),o2(),"northwest",Xl(t,{right:1,bottom:3}),_s),n0=()=>[HA,Rs,e0,t0],Dy=()=>[Rs,HA,t0,e0],zA=(t,r,i)=>{const d=c2(i,r.item.element),p=aw(t.element,r,n0(),Dy(),n0(),Dy(),B.none());return B.some(b2({anchorBox:d,bubble:rw(),overrides:r.overrides,layouts:p}))};var o0=[dn("item"),xb(),Ct("overrides",{}),xi("placement",zA)],Ry=fc("type",{selection:yh,node:w2,hotspot:RA,submenu:o0,makeshift:Kv});const ur=[au("classes",so),Kl("mode","all",["all","layout","placement"])],O2=[Ct("useFixed",$t),Cs("getBounds")],Cb=[ia("anchor",Ry),Yc("transition",ur)],Ql=()=>{const t=document.documentElement;return bb(0,0,t.clientWidth,t.clientHeight)},NT=t=>{const r=sl(t.element),i=t.element.dom.getBoundingClientRect();return mT(r.left,r.top,i.width,i.height)},Cp=(t,r,i,d,p,x)=>{const w=u2(r.anchorBox,t);return yy(w,d.element,r.bubble,r.layouts,p,i,r.overrides,x)},BT=(t,r,i,d,p)=>{const x=B.none();uw(t,r,i,d,p,x)},uw=(t,r,i,d,p,x)=>{const w=$s("placement.info",os(Cb),p),A=w.anchor,R=d.element,$=i.get(d.uid);uT(()=>{Gn(R,"position","fixed");const W=ba(R,"visibility");Gn(R,"visibility","hidden");const q=r.useFixed()?Ql():NT(t);A.placement(t,A,q).each(se=>{const ge=x.orThunk(()=>r.getBounds.map(z)),Ae=Cp(q,se,ge,d,$,w.transition);i.set(d.uid,Ae)}),W.fold(()=>{cr(R,"visibility")},se=>{Gn(R,"visibility",se)}),ba(R,"left").isNone()&&ba(R,"top").isNone()&&ba(R,"right").isNone()&&ba(R,"bottom").isNone()&&Dr(ba(R,"position"),"fixed")&&cr(R,"position")},R)};var D2=Object.freeze({__proto__:null,position:BT,positionWithinBounds:uw,getMode:(t,r,i)=>r.useFixed()?"fixed":"absolute",reset:(t,r,i,d)=>{const p=d.element;pt(["position","left","right","top","bottom"],x=>cr(p,x)),hD(p),i.clear(d.uid)}}),IT=Object.freeze({__proto__:null,init:()=>{let t={};return lu({readState:()=>t,clear:p=>{zn(p)?delete t[p]:t={}},set:(p,x)=>{t[p]=x},get:p=>vn(t,p)})}});const gu=xl({fields:O2,name:"positioning",active:AA,apis:D2,state:IT}),dw=t=>t.getSystem().isConnected(),Nf=t=>{xr(t,Wd());const r=t.components();pt(r,Nf)},Km=t=>{const r=t.components();pt(r,Km),xr(t,od())},UA=(t,r)=>{t.getSystem().addToWorld(r),Je(t.element)&&Km(r)},FT=t=>{Nf(t),t.getSystem().removeFromWorld(t)},R2=(t,r)=>{Dl(t.element,r.element)},M2=t=>{pt(t.components(),r=>al(r.element)),om(t.element),t.syncComponents()},Wg=(t,r,i)=>{const d=t.components();M2(t);const p=i(r),x=dt(d,p);pt(x,w=>{Nf(w),t.getSystem().removeFromWorld(w)}),pt(p,w=>{dw(w)?R2(t,w):(t.getSystem().addToWorld(w),R2(t,w),Je(t.element)&&Km(w))}),t.syncComponents()},N2=(t,r,i)=>{const d=t.components(),p=oe(r,A=>Ux(A).toArray());pt(d,A=>{Oe(p,A)||FT(A)});const x=i(r),w=dt(d,x);pt(w,A=>{dw(A)&&FT(A)}),pt(x,A=>{dw(A)||UA(t,A)}),t.syncComponents()},Sp=(t,r)=>{ad(t,r,Dl)},ad=(t,r,i)=>{t.getSystem().addToWorld(r),i(t.element,r.element),Je(t.element)&&Km(r),t.syncComponents()},r0=t=>{Nf(t),al(t.element),t.getSystem().removeFromWorld(t)},kp=t=>{const r=li(t.element).bind(i=>t.getSystem().getByDom(i).toOptional());r0(t),r.each(i=>{i.syncComponents()})},B1=t=>{const r=t.components();pt(r,r0),om(t.element),t.syncComponents()},Vi=(t,r)=>{kl(t,r,Dl)},Ou=(t,r)=>{kl(t,r,rl)},kl=(t,r,i)=>{i(t,r.element);const d=qi(r.element);pt(d,p=>{r.getByDom(p).each(Km)})},Ma=t=>{const r=qi(t.element);pt(r,i=>{t.getByDom(i).each(Nf)}),al(t.element)},bm=(t,r,i,d)=>{i.get().each(w=>{B1(t)});const p=r.getAttachPoint(t);Sp(p,t);const x=t.getSystem().build(d);return Sp(t,x),i.set(x),x},Od=(t,r,i,d)=>{const p=bm(t,r,i,d);return r.onOpen(t,p),p},wh=(t,r,i,d)=>i.get().map(()=>bm(t,r,i,d)),mw=(t,r,i,d,p)=>{I1(t,r),Od(t,r,i,d),p(),B2(t,r)},WA=(t,r,i)=>{i.get().each(d=>{B1(t),kp(t),r.onClose(t,d),i.clear()})},Bf=(t,r,i)=>i.isOpen(),Ha=(t,r,i,d)=>Bf(t,r,i)&&i.get().exists(p=>r.isPartOf(t,p,d)),My=(t,r,i)=>i.get(),gw=(t,r,i,d)=>{ba(t.element,r).fold(()=>{fe(t.element,i)},p=>{Kn(t.element,i,p)}),Gn(t.element,r,d)},PT=(t,r,i)=>{br(t.element,i).fold(()=>cr(t.element,r),d=>Gn(t.element,r,d))},I1=(t,r,i)=>{const d=r.getAttachPoint(t);Gn(t.element,"position",gu.getMode(d)),gw(t,"visibility",r.cloakVisibilityAttr,"hidden")},LT=t=>ft(["top","left","right","bottom"],r=>ba(t,r).isSome()),B2=(t,r,i)=>{LT(t.element)||cr(t.element,"position"),PT(t,"visibility",r.cloakVisibilityAttr)};var $T=Object.freeze({__proto__:null,cloak:I1,decloak:B2,open:Od,openWhileCloaked:mw,close:WA,isOpen:Bf,isPartOf:Ha,getState:My,setContent:wh}),F1=Object.freeze({__proto__:null,events:(t,r)=>ya([on($c(),(i,d)=>{WA(i,t,r)})])}),Ny=[Ar("onOpen"),Ar("onClose"),dn("isPartOf"),dn("getAttachPoint"),Ct("cloakVisibilityAttr","data-precloak-visibility")],jA=Object.freeze({__proto__:null,init:()=>{const t=Ir(),r=re("not-implemented");return lu({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const qr=xl({fields:Ny,name:"sandboxing",active:F1,apis:$T,state:jA}),Ch=re("dismiss.popups"),P1=re("reposition.popups"),Sb=re("mouse.released"),ZA=Pc([Ct("isExtraPart",$t),Yc("fireEventInstead",[Ct("event",dp())])]),Dd=t=>{const r=$s("Dismissal",ZA,t);return{[Ch()]:{schema:Pc([dn("target")]),onReceive:(i,d)=>{qr.isOpen(i)&&(qr.isPartOf(i,d.target)||r.isExtraPart(i,d.target)||r.fireEventInstead.fold(()=>qr.close(i),x=>xr(i,x.event)))}}}},EB=Pc([Yc("fireEventInstead",[Ct("event",ec())]),ed("doReposition")]),a0=t=>{const r=$s("Reposition",EB,t);return{[P1()]:{onReceive:i=>{qr.isOpen(i)&&r.fireEventInstead.fold(()=>r.doReposition(i),d=>xr(i,d.event))}}}},Sh=(t,r,i)=>{r.store.manager.onLoad(t,r,i)},fw=(t,r,i)=>{r.store.manager.onUnload(t,r,i)};var GA=Object.freeze({__proto__:null,onLoad:Sh,onUnload:fw,setValue:(t,r,i,d)=>{r.store.manager.setValue(t,r,i,d)},getValue:(t,r,i)=>r.store.manager.getValue(t,r,i),getState:(t,r,i)=>i}),hw=Object.freeze({__proto__:null,events:(t,r)=>{const i=t.resetOnDom?[$i((d,p)=>{Sh(d,t,r)}),Cd((d,p)=>{fw(d,t,r)})]:[m1(t,r,Sh)];return ya(i)}});const L1=()=>{const t=wo(null),r=()=>({mode:"memory",value:t.get()}),i=()=>t.get()===null,d=()=>{t.set(null)};return lu({set:t.set,get:t.get,isNotSet:i,clear:d,readState:r})},Iy=()=>lu({readState:ue}),bw=()=>{const t=wo({}),r=wo({});return lu({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:w=>vn(t.get(),w).orThunk(()=>vn(r.get(),w)),update:w=>{const A=t.get(),R=r.get(),$={},W={};pt(w,q=>{$[q.value]=q,vn(q,"meta").each(se=>{vn(se,"text").each(ge=>{W[ge]=q})})}),t.set({...A,...$}),r.set({...R,...W})},clear:()=>{t.set({}),r.set({})}})};var VT=Object.freeze({__proto__:null,memory:L1,dataset:bw,manual:Iy,init:t=>t.store.manager.state(t)});const $1=(t,r,i,d)=>{const p=r.store;i.update([d]),p.setValue(t,d),r.onSetValue(t,d)},vw=(t,r,i)=>{const d=r.store,p=d.getDataKey(t);return i.lookup(p).getOrThunk(()=>d.getFallbackEntry(p))},F2=(t,r,i)=>{r.store.initialValue.each(p=>{$1(t,r,i,p)})},yw=(t,r,i)=>{i.clear()};var If=[Cs("initialValue"),dn("getFallbackEntry"),dn("getDataKey"),dn("setValue"),xi("manager",{setValue:$1,getValue:vw,onLoad:F2,onUnload:yw,state:bw})];const UT=(t,r,i)=>r.store.getValue(t),Fy=(t,r,i,d)=>{r.store.setValue(t,d),r.onSetValue(t,d)},Py=(t,r,i)=>{r.store.initialValue.each(d=>{r.store.setValue(t,d)})};var KA=[dn("getValue"),Ct("setValue",ue),Cs("initialValue"),xi("manager",{setValue:Fy,getValue:UT,onLoad:Py,onUnload:ue,state:Cf.init})];const P2=(t,r,i,d)=>{i.set(d),r.onSetValue(t,d)},L2=(t,r,i)=>i.get(),YA=(t,r,i)=>{r.store.initialValue.each(d=>{i.isNotSet()&&i.set(d)})},WT=(t,r,i)=>{i.clear()};var kb=[Cs("initialValue"),xi("manager",{setValue:P2,getValue:L2,onLoad:YA,onUnload:WT,state:L1})],xw=[fa("store",{mode:"memory"},fc("mode",{memory:kb,manual:KA,dataset:If})),Ar("onSetValue"),Ct("resetOnDom",!1)];const ao=xl({fields:xw,name:"representing",active:hw,apis:GA,extra:{setValueFrom:(t,r)=>{const i=ao.getValue(r);ao.setValue(t,i)}},state:VT}),Ll=(t,r)=>H(t,{},$e(r,i=>kv(i.name(),"Cannot configure "+i.name()+" for "+t)).concat([aa("dump",rn)])),Ly=t=>t.dump,nc=(t,r)=>({...Ln(r),...t.dump}),vm={field:Ll,augment:nc,get:Ly},$y="placeholder",Ff=ye.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Tp=t=>Ls(t,"uiType"),Hy=(t,r,i,d)=>t.exists(p=>p!==i.owner)?Ff.single(!0,re(i)):vn(d,i.name).fold(()=>{throw new Error("Unknown placeholder component: "+i.name+`
Known: [`+nn(d)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(i,null,2))},p=>p.replace()),jT=(t,r,i,d)=>Tp(i)&&i.uiType===$y?Hy(t,r,i,d):Ff.single(!1,re(i)),XA=(t,r,i,d)=>jT(t,r,i,d).fold((x,w)=>{const A=Tp(i)?w(r,i.config,i.validated):w(r),R=vn(A,"components").getOr([]),$=oe(R,W=>XA(t,r,W,d));return[{...A,components:$}]},(x,w)=>{if(Tp(i)){const A=w(r,i.config,i.validated);return i.validated.preprocess.getOr(rn)(A)}else return w(r)}),JA=(t,r,i,d)=>oe(i,p=>XA(t,r,p,d)),Ep=(t,r)=>{let i=!1;const d=()=>i,p=()=>{if(i)throw new Error("Trying to use the same placeholder more than once: "+t);return i=!0,r},x=()=>r.fold((w,A)=>w,(w,A)=>w);return{name:re(t),required:x,used:d,replace:p}},QA=(t,r,i,d)=>{const p=Mn(d,(w,A)=>Ep(A,w)),x=JA(t,r,i,p);return Co(p,w=>{if(w.used()===!1&&w.required())throw new Error("Placeholder: "+w.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),x},gg=Ff.single,eu=Ff.multiple,wa=re($y),Pf=ye.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ir=Ct("factory",{sketch:rn}),Tb=Ct("schema",[]),ww=dn("name"),Na=Gc("pname","pname",yr(t=>"<alloy."+Ao(t.name)+">"),Ud()),i0=aa("schema",()=>[Cs("preprocess")]),Eb=Ct("defaults",re({})),_b=Ct("overrides",re({})),Cw=os([ir,Tb,ww,Na,Eb,_b]),Sw=os([ir,Tb,ww,Eb,_b]),ZT=os([ir,Tb,ww,Na,Eb,_b]),eO=os([ir,i0,ww,dn("unit"),Na,Eb,_b]),tO=t=>t.fold(B.some,B.none,B.some,B.some),$2=t=>{const r=i=>i.name;return t.fold(r,r,r,r)},nO=t=>t.fold(rn,rn,rn,rn),Ri=(t,r)=>i=>{const d=$s("Converting part type",r,i);return t(d)},Du=Ri(Pf.required,Cw),fg=Ri(Pf.external,Sw),ym=Ri(Pf.optional,ZT),kw=Ri(Pf.group,eO),Ab=re("entirety");var Uu=Object.freeze({__proto__:null,required:Du,external:fg,optional:ym,group:kw,asNamedPart:tO,name:$2,asCommon:nO,original:Ab});const jg=(t,r,i,d)=>mi(r.defaults(t,i,d),i,{uid:t.partUids[r.name]},r.overrides(t,i,d)),GT=(t,r,i)=>{const d={},p={};return pt(i,x=>{x.fold(w=>{d[w.pname]=gg(!0,(A,R,$)=>w.factory.sketch(jg(A,w,R,$)))},w=>{const A=r.parts[w.name];p[w.name]=re(w.factory.sketch(jg(r,w,A[Ab()]),A))},w=>{d[w.pname]=gg(!1,(A,R,$)=>w.factory.sketch(jg(A,w,R,$)))},w=>{d[w.pname]=eu(!0,(A,R,$)=>{const W=A[w.name];return $e(W,q=>w.factory.sketch(mi(w.defaults(A,q,$),q,w.overrides(A,q))))})})}),{internals:re(d),externals:re(p)}},Tw=(t,r)=>{const i={};return pt(r,d=>{tO(d).each(p=>{const x=oO(t,p.pname);i[p.name]=w=>{const A=$s("Part: "+p.name+" in "+t,os(p.schema),w);return{...x,config:w,validated:A}}})}),i},oO=(t,r)=>({uiType:wa(),owner:t,name:r}),zy=(t,r,i)=>({uiType:wa(),owner:t,name:r,config:i,validated:{}}),sO=t=>oe(t,r=>r.fold(B.none,B.some,B.none,B.none).map(i=>lm(i.name,i.schema.concat([C1(Ab())]))).toArray()),Vy=t=>$e(t,$2),Uy=(t,r,i)=>GT(t,r,i),Ew=(t,r,i)=>QA(B.some(t),r,r.components,i),ii=(t,r,i)=>{const d=r.partUids[i];return t.getSystem().getByUid(d).toOptional()},id=(t,r,i)=>ii(t,r,i).getOrDie("Could not find part: "+i),qT=(t,r,i)=>{const d={},p=r.partUids,x=t.getSystem();return pt(i,w=>{d[w]=re(x.getByUid(p[w]))}),d},KT=(t,r)=>{const i=t.getSystem();return Mn(r.partUids,(d,p)=>re(i.getByUid(d)))},Zg=t=>nn(t.partUids),Rd=(t,r,i)=>{const d={},p=r.partUids,x=t.getSystem();return pt(i,w=>{d[w]=re(x.getByUid(p[w]).getOrDie())}),d},kh=(t,r)=>{const i=Vy(r);return ua($e(i,d=>({key:d,value:t+"-"+d})))},_w=t=>Gc("partUids","partUids",I(r=>kh(r.uid,t)),Ud());var Gg=Object.freeze({__proto__:null,generate:Tw,generateOne:zy,schemas:sO,names:Vy,substitutes:Uy,components:Ew,defaultUids:kh,defaultUidsSchema:_w,getAllParts:KT,getAllPartNames:Zg,getPart:ii,getPartOrDie:id,getParts:qT,getPartsOrDie:Rd});const Qa=(t,r)=>(t.length>0?[lm("parts",t)]:[]).concat([dn("uid"),Ct("dom",{}),Ct("components",[]),C1("originalSpec"),Ct("debug.sketcher",{})]).concat(r),H2=(t,r,i,d,p)=>{const x=Qa(d,p);return $s(t+" [SpecSchema]",Pc(x.concat(r)),i)},c0=(t,r,i,d)=>{const p=z2(d),x=H2(t,r,p,[],[]);return i(x,p)},Ob=(t,r,i,d,p)=>{const x=z2(p),w=sO(i),A=_w(i),R=H2(t,r,x,w,[A]),$=Uy(t,R,i),W=Ew(t,R,$.internals());return d(R,W,x,$.externals())},YT=t=>Ls(t,"uid"),z2=t=>YT(t)?t:{...t,uid:$g("uid")},XT=t=>t.uid!==void 0,Db=Pc([dn("name"),dn("factory"),dn("configFields"),Ct("apis",{}),Ct("extraApis",{})]),H1=Pc([dn("name"),dn("factory"),dn("configFields"),dn("partFields"),Ct("apis",{}),Ct("extraApis",{})]),Ym=t=>{const r=$s("Sketcher for "+t.name,Db,t),i=x=>c0(r.name,r.configFields,r.factory,x),d=Mn(r.apis,Wx),p=Mn(r.extraApis,(x,w)=>Y0(x,w));return{name:r.name,configFields:r.configFields,sketch:i,...d,...p}},cd=t=>{const r=$s("Sketcher for "+t.name,H1,t),i=w=>Ob(r.name,r.configFields,r.partFields,r.factory,w),d=Tw(r.name,r.partFields),p=Mn(r.apis,Wx),x=Mn(r.extraApis,(w,A)=>Y0(w,A));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:i,parts:d,...p,...x}},l0=t=>Wc("input")(t)&&Ds(t,"type")!=="radio"||Wc("textarea")(t);var aO=Object.freeze({__proto__:null,getCurrent:(t,r,i)=>r.find(t)});const V2=[dn("find")],Kr=xl({fields:V2,name:"composing",apis:aO}),Aw=["input","button","textarea","select"],JT=(t,r,i)=>{(r.disabled()?Ow:Dw)(t,r)},iO=(t,r)=>r.useNative===!0&&Oe(Aw,Ur(t.element)),DD=t=>X(t.element,"disabled"),cO=t=>{Kn(t.element,"disabled","disabled")},lO=t=>{fe(t.element,"disabled")},RD=t=>Ds(t.element,"aria-disabled")==="true",uO=t=>{Kn(t.element,"aria-disabled","true")},MD=t=>{Kn(t.element,"aria-disabled","false")},Ow=(t,r,i)=>{r.disableClass.each(p=>{Cc(t.element,p)}),(iO(t,r)?cO:uO)(t),r.onDisabled(t)},Dw=(t,r,i)=>{r.disableClass.each(p=>{Hi(t.element,p)}),(iO(t,r)?lO:MD)(t),r.onEnabled(t)},Rw=(t,r)=>iO(t,r)?DD(t):RD(t);var qg=Object.freeze({__proto__:null,enable:Dw,disable:Ow,isDisabled:Rw,onLoad:JT,set:(t,r,i,d)=>{(d?Ow:Dw)(t,r)}}),eE=Object.freeze({__proto__:null,exhibit:(t,r)=>mm({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>ya([Pk(cu(),(i,d)=>Rw(i,t)),m1(t,r,JT)])}),tE=[Ea("disabled",$t),Ct("useNative",!0),Cs("disableClass"),Ar("onDisabled"),Ar("onEnabled")];const Wo=xl({fields:tE,name:"disabling",active:eE,apis:qg}),m=(t,r,i,d)=>{const p=qd(t.element,"."+r.highlightClass);pt(p,x=>{ft(d,A=>Es(A.element,x))||(Hi(x,r.highlightClass),t.getSystem().getByDom(x).each(A=>{r.onDehighlight(t,A),xr(A,l1())}))})},h=(t,r,i)=>m(t,r,i,[]),C=(t,r,i,d)=>{Ee(t,r,i,d)&&(Hi(d.element,r.highlightClass),r.onDehighlight(t,d),xr(d,l1()))},_=(t,r,i,d)=>{m(t,r,i,[d]),Ee(t,r,i,d)||(Cc(d.element,r.highlightClass),r.onHighlight(t,d),xr(d,Do()))},L=(t,r,i)=>{Bn(t,r).each(d=>{_(t,r,i,d)})},U=(t,r,i)=>{co(t,r).each(d=>{_(t,r,i,d)})},ee=(t,r,i,d)=>{kt(t,r,i,d).fold(p=>{throw p},p=>{_(t,r,i,p)})},me=(t,r,i,d)=>{const p=On(t,r);ce(p,d).each(w=>{_(t,r,i,w)})},Ee=(t,r,i,d)=>kd(d.element,r.highlightClass),Ke=(t,r,i)=>zi(t.element,"."+r.highlightClass).bind(d=>t.getSystem().getByDom(d).toOptional()),kt=(t,r,i,d)=>{const p=qd(t.element,"."+r.itemClass);return B.from(p[d]).fold(()=>Ws.error(new Error("No element found with index "+d)),t.getSystem().getByDom)},Bn=(t,r,i)=>zi(t.element,"."+r.itemClass).bind(d=>t.getSystem().getByDom(d).toOptional()),co=(t,r,i)=>{const d=qd(t.element,"."+r.itemClass);return(d.length>0?B.some(d[d.length-1]):B.none()).bind(x=>t.getSystem().getByDom(x).toOptional())},Qn=(t,r,i,d)=>{const p=qd(t.element,"."+r.itemClass);return De(p,w=>kd(w,r.highlightClass)).bind(w=>{const A=S1(w,d,0,p.length-1);return t.getSystem().getByDom(p[A]).toOptional()})},jn=(t,r,i)=>Qn(t,r,i,-1),Ho=(t,r,i)=>Qn(t,r,i,1),On=(t,r,i)=>{const d=qd(t.element,"."+r.itemClass);return hi($e(d,p=>t.getSystem().getByDom(p).toOptional()))};var ds=Object.freeze({__proto__:null,dehighlightAll:h,dehighlight:C,highlight:_,highlightFirst:L,highlightLast:U,highlightAt:ee,highlightBy:me,isHighlighted:Ee,getHighlighted:Ke,getFirst:Bn,getLast:co,getPrevious:jn,getNext:Ho,getCandidates:On}),rr=[dn("highlightClass"),dn("itemClass"),Ar("onHighlight"),Ar("onDehighlight")];const Cn=xl({fields:rr,name:"highlighting",apis:ds}),_a=[8],ea=[9],zr=[13],Ui=[27],hc=[32],Lf=[37],Xm=[38],Kg=[39],Ca=[40],eo=(t,r,i)=>{const d=At(t.slice(0,r)),p=At(t.slice(r+1));return ce(d.concat(p),i)},$l=(t,r,i)=>{const d=At(t.slice(0,r));return ce(d,i)},ld=(t,r,i)=>{const d=t.slice(0,r),p=t.slice(r+1);return ce(p.concat(d),i)},Jm=(t,r,i)=>{const d=t.slice(r+1);return ce(d,i)},fr=t=>r=>{const i=r.raw;return Oe(t,i.which)},Tc=t=>r=>ct(t,i=>i(r)),$f=t=>t.raw.shiftKey===!0,u0=t=>t.raw.ctrlKey===!0,Qm=Qe($f),Js=(t,r)=>({matches:t,classification:r}),Mw=(t,r)=>ce(t,d=>d.matches(r)).map(d=>d.classification),Nw=(t,r,i)=>{r.exists(p=>i.exists(x=>Es(x,p)))||qo(t,Dx(),{prevFocus:r,newFocus:i})},Rb=()=>{const t=i=>Ad(i.element);return{get:t,set:(i,d)=>{const p=t(i);i.getSystem().triggerFocus(d,i.element);const x=t(i);Nw(i,p,x)}}},nE=()=>{const t=i=>Cn.getHighlighted(i).map(d=>d.element);return{get:t,set:(i,d)=>{const p=t(i);i.getSystem().getByDom(d).fold(ue,w=>{Cn.highlight(i,w)});const x=t(i);Nw(i,p,x)}}};var Mb;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Mb||(Mb={}));const Th=(t,r,i,d,p)=>{const x=()=>t.concat([Ct("focusManager",Rb()),fa("focusInside","onFocus",o1($=>Oe(["onFocus","onEnterOrSpace","onApi"],$)?Ws.value($):Ws.error("Invalid value for focusInside"))),xi("handler",R),xi("state",r),xi("sendFocusIn",p)]),w=($,W,q,se,ge)=>{const Ae=q($,W,se,ge);return Mw(Ae,W.event).bind(Ie=>Ie($,W,se,ge))},R={schema:x,processKey:w,toEvents:($,W)=>{const q=$.focusInside!==Mb.OnFocusMode?B.none():p($).map(Ae=>on(lp(),(Ie,mt)=>{Ae(Ie,$,W),mt.stop()})),se=(Ae,Ie)=>{const mt=fr(hc.concat(zr))(Ie.event);$.focusInside===Mb.OnEnterOrSpaceMode&&mt&&r1(Ae,Ie)&&p($).each(Fe=>{Fe(Ae,$,W),Ie.stop()})},ge=[on(nd(),(Ae,Ie)=>{w(Ae,Ie,i,$,W).fold(()=>{se(Ae,Ie)},mt=>{Ie.stop()})}),on(sA(),(Ae,Ie)=>{w(Ae,Ie,d,$,W).each(mt=>{Ie.stop()})})];return ya(q.toArray().concat(ge))}};return R},Bw=t=>{const r=[Cs("onEscape"),Cs("onEnter"),Ct("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ct("firstTabstop",0),Ct("useTabstopAt",Kt),Cs("visibilitySelector")].concat([t]),i=(Fe,nt)=>{const lt=Fe.visibilitySelector.bind(Ft=>vp(nt,Ft)).getOr(nt);return uc(lt)>0},d=(Fe,nt)=>{const lt=qd(Fe.element,nt.selector),Ft=Et(lt,zt=>i(nt,zt));return B.from(Ft[nt.firstTabstop])},p=(Fe,nt)=>nt.focusManager.get(Fe).bind(lt=>vp(lt,nt.selector)),x=(Fe,nt)=>i(Fe,nt)&&Fe.useTabstopAt(nt),w=(Fe,nt,lt)=>{d(Fe,nt).each(Ft=>{nt.focusManager.set(Fe,Ft)})},A=(Fe,nt,lt,Ft,zt)=>zt(nt,lt,Zn=>x(Ft,Zn)).fold(()=>Ft.cyclic?B.some(!0):B.none(),Zn=>(Ft.focusManager.set(Fe,Zn),B.some(!0))),R=(Fe,nt,lt,Ft)=>{const zt=qd(Fe.element,lt.selector);return p(Fe,lt).bind(Zn=>De(zt,qn(Es,Zn)).bind(ln=>A(Fe,zt,ln,lt,Ft)))},$=(Fe,nt,lt)=>{const Ft=lt.cyclic?eo:$l;return R(Fe,nt,lt,Ft)},W=(Fe,nt,lt)=>{const Ft=lt.cyclic?ld:Jm;return R(Fe,nt,lt,Ft)},q=Fe=>Ld(Fe).bind(wu).exists(nt=>Es(nt,Fe)),se=(Fe,nt,lt)=>p(Fe,lt).filter(Ft=>!lt.useTabstopAt(Ft)).bind(Ft=>(q(Ft)?$:W)(Fe,nt,lt)),ge=(Fe,nt,lt)=>lt.onEnter.bind(Ft=>Ft(Fe,nt)),Ae=(Fe,nt,lt)=>lt.onEscape.bind(Ft=>Ft(Fe,nt)),Ie=re([Js(Tc([$f,fr(ea)]),$),Js(fr(ea),W),Js(Tc([Qm,fr(zr)]),ge)]),mt=re([Js(fr(Ui),Ae),Js(fr(ea),se)]);return Th(r,Cf.init,Ie,mt,()=>B.some(w))};var Yg=Bw(aa("cyclic",$t)),j6=Bw(aa("cyclic",Kt));const ND=(t,r,i)=>(j0(t,i,cu()),B.some(!0)),Dc=(t,r,i)=>l0(i)&&fr(hc)(r.event)?B.none():ND(t,r,i),Nb=(t,r)=>B.some(!0),BD=[Ct("execute",Dc),Ct("useSpace",!1),Ct("useEnter",!0),Ct("useControlEnter",!1),Ct("useDown",!1)],Bb=(t,r,i)=>i.execute(t,r,t.element),_B=(t,r,i,d)=>{const p=i.useSpace&&!l0(t.element)?hc:[],x=i.useEnter?zr:[],w=i.useDown?Ca:[],A=p.concat(x).concat(w);return[Js(fr(A),Bb)].concat(i.useControlEnter?[Js(Tc([u0,fr(zr)]),Bb)]:[])},mO=(t,r,i,d)=>i.useSpace&&!l0(t.element)?[Js(fr(hc),Nb)]:[];var oE=Th(BD,Cf.init,_B,mO,()=>B.none());const AB=()=>{const t=Ir();return lu({readState:()=>t.get().map(p=>({numRows:String(p.numRows),numColumns:String(p.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(p,x)=>{t.set({numRows:p,numColumns:x})},getNumRows:()=>t.get().map(p=>p.numRows),getNumColumns:()=>t.get().map(p=>p.numColumns)})};var Wy=Object.freeze({__proto__:null,flatgrid:AB,init:t=>t.state(t)});const OB=t=>(r,i,d,p)=>{const x=t(r.element);return FD(x,r,i,d,p)},z1=(t,r)=>{const i=v2(t,r);return OB(i)},ID=(t,r)=>{const i=v2(r,t);return OB(i)},V1=t=>(r,i,d,p)=>FD(t,r,i,d,p),FD=(t,r,i,d,p)=>d.focusManager.get(r).bind(w=>t(r.element,w,d,p)).map(w=>(d.focusManager.set(r,w),!0)),Hf=V1,U2=V1,jy=V1,gO=t=>t.offsetWidth<=0&&t.offsetHeight<=0,sE=t=>!gO(t.dom),Iw=(t,r)=>De(t,r).map(i=>({index:i,candidates:t})),rE=(t,r,i)=>{const d=w=>Es(w,r),p=qd(t,i),x=Et(p,sE);return Iw(x,d)},Kd=(t,r)=>De(t,i=>Es(r,i)),fO=(t,r,i,d)=>{const p=Math.floor(r/i),x=r%i;return d(p,x).bind(w=>{const A=w.row*i+w.column;return A>=0&&A<t.length?B.some(t[A]):B.none()})},PD=(t,r,i,d,p)=>fO(t,r,d,(x,w)=>{const R=x===i-1?t.length-x*d:d,$=S1(w,p,0,R-1);return B.some({row:x,column:$})}),pO=(t,r,i,d,p)=>fO(t,r,d,(x,w)=>{const A=S1(x,p,0,i-1),$=A===i-1?t.length-A*d:d,W=Oc(w,0,$-1);return B.some({row:A,column:W})}),hO=(t,r,i,d)=>PD(t,r,i,d,1),W2=(t,r,i,d)=>PD(t,r,i,d,-1),DB=(t,r,i,d)=>pO(t,r,i,d,-1),G6=(t,r,i,d)=>pO(t,r,i,d,1),q6=[dn("selector"),Ct("execute",Dc),rd("onEscape"),Ct("captureTab",!1),hp()],aE=(t,r,i)=>{zi(t.element,r.selector).each(d=>{r.focusManager.set(t,d)})},LD=(t,r)=>r.focusManager.get(t).bind(i=>vp(i,r.selector)),RB=(t,r,i,d)=>LD(t,i).bind(p=>i.execute(t,r,p)),j2=t=>(r,i,d,p)=>rE(r,i,d.selector).bind(x=>t(x.candidates,x.index,p.getNumRows().getOr(d.initSize.numRows),p.getNumColumns().getOr(d.initSize.numColumns))),MB=(t,r,i)=>i.captureTab?B.some(!0):B.none(),$D=(t,r,i)=>i.onEscape(t,r),iE=j2(W2),NB=j2(hO),BB=j2(DB),IB=j2(G6),K6=re([Js(fr(Lf),z1(iE,NB)),Js(fr(Kg),ID(iE,NB)),Js(fr(Xm),Hf(BB)),Js(fr(Ca),U2(IB)),Js(Tc([$f,fr(ea)]),MB),Js(Tc([Qm,fr(ea)]),MB),Js(fr(hc.concat(zr)),RB)]),bO=re([Js(fr(Ui),$D),Js(fr(hc),Nb)]);var Y6=Th(q6,AB,K6,bO,()=>B.some(aE));const vO=(t,r,i,d,p)=>{const x=A=>Ur(A)==="button"&&Ds(A,"disabled")==="disabled",w=(A,R,$)=>p(A,R,d,0,$.length-1,$[R],W=>x($[W])?w(A,W,$):B.from($[W]));return rE(t,i,r).bind(A=>{const R=A.index,$=A.candidates;return w(R,R,$)})},HD=(t,r,i,d)=>vO(t,r,i,d,(p,x,w,A,R,$,W)=>{const q=Oc(x+w,A,R);return q===p?B.from($):W(q)}),cE=(t,r,i,d)=>vO(t,r,i,d,(p,x,w,A,R,$,W)=>{const q=S1(x,w,A,R);return q===p?B.none():W(q)}),FB=[dn("selector"),Ct("getInitial",B.none),Ct("execute",Dc),rd("onEscape"),Ct("executeOnMove",!1),Ct("allowVertical",!0),Ct("allowHorizontal",!0),Ct("cycles",!0)],X6=(t,r)=>r.focusManager.get(t).bind(i=>vp(i,r.selector)),zD=(t,r,i)=>X6(t,i).bind(d=>i.execute(t,r,d)),J6=(t,r,i)=>{r.getInitial(t).orThunk(()=>zi(t.element,r.selector)).each(d=>{r.focusManager.set(t,d)})},PB=(t,r,i)=>(i.cycles?cE:HD)(t,i.selector,r,-1),LB=(t,r,i)=>(i.cycles?cE:HD)(t,i.selector,r,1),Fw=t=>(r,i,d,p)=>t(r,i,d,p).bind(()=>d.executeOnMove?zD(r,i,d):B.some(!0)),$B=(t,r,i)=>i.onEscape(t,r),Pw=(t,r,i,d)=>{const p=[...i.allowHorizontal?Lf:[]].concat(i.allowVertical?Xm:[]),x=[...i.allowHorizontal?Kg:[]].concat(i.allowVertical?Ca:[]);return[Js(fr(p),Fw(z1(PB,LB))),Js(fr(x),Fw(ID(PB,LB))),Js(fr(zr),zD),Js(fr(hc),zD)]},HB=re([Js(fr(hc),Nb),Js(fr(Ui),$B)]);var zB=Th(FB,Cf.init,Pw,HB,()=>B.some(J6));const Z2=(t,r,i)=>B.from(t[r]).bind(d=>B.from(d[i]).map(p=>({rowIndex:r,columnIndex:i,cell:p}))),VB=(t,r,i,d)=>{const x=t[r].length,w=S1(i,d,0,x-1);return Z2(t,r,w)},UB=(t,r,i,d)=>{const p=S1(i,d,0,t.length-1),x=t[p].length,w=Oc(r,0,x-1);return Z2(t,p,w)},WB=(t,r,i,d)=>{const x=t[r].length,w=Oc(i+d,0,x-1);return Z2(t,r,w)},yO=(t,r,i,d)=>{const p=Oc(i+d,0,t.length-1),x=t[p].length,w=Oc(r,0,x-1);return Z2(t,p,w)},Q6=(t,r,i)=>VB(t,r,i,1),xO=(t,r,i)=>VB(t,r,i,-1),VD=(t,r,i)=>UB(t,i,r,-1),G2=(t,r,i)=>UB(t,i,r,1),xm=(t,r,i)=>WB(t,r,i,-1),lE=(t,r,i)=>WB(t,r,i,1),UD=(t,r,i)=>yO(t,i,r,-1),uE=(t,r,i)=>yO(t,i,r,1),wO=[lm("selectors",[dn("row"),dn("cell")]),Ct("cycles",!0),Ct("previousSelector",B.none),Ct("execute",Dc)],Eh=(t,r,i)=>{r.previousSelector(t).orThunk(()=>{const p=r.selectors;return zi(t.element,p.cell)}).each(p=>{r.focusManager.set(t,p)})},_h=(t,r,i)=>Ad(t.element).bind(d=>i.execute(t,r,d)),jB=(t,r)=>$e(t,i=>qd(i,r.selectors.cell)),Zy=(t,r)=>(i,d,p)=>{const x=p.cycles?t:r;return vp(d,p.selectors.row).bind(w=>{const A=qd(w,p.selectors.cell);return Kd(A,d).bind(R=>{const $=qd(i,p.selectors.row);return Kd($,w).bind(W=>{const q=jB($,p);return x(q,W,R).map(se=>se.cell)})})})},WD=Zy(xO,xm),ZB=Zy(Q6,lE),q2=Zy(VD,UD),GB=Zy(G2,uE),Tl=re([Js(fr(Lf),z1(WD,ZB)),Js(fr(Kg),ID(WD,ZB)),Js(fr(Xm),Hf(q2)),Js(fr(Ca),U2(GB)),Js(fr(hc.concat(zr)),_h)]),qB=re([Js(fr(hc),Nb)]);var KB=Th(wO,Cf.init,Tl,qB,()=>B.some(Eh));const Lw=[dn("selector"),Ct("execute",Dc),Ct("moveOnTab",!1)],$w=(t,r,i)=>i.focusManager.get(t).bind(d=>i.execute(t,r,d)),K2=(t,r,i)=>{zi(t.element,r.selector).each(d=>{r.focusManager.set(t,d)})},CO=(t,r,i)=>cE(t,i.selector,r,-1),SO=(t,r,i)=>cE(t,i.selector,r,1),jD=(t,r,i,d)=>i.moveOnTab?jy(CO)(t,r,i,d):B.none(),ZD=(t,r,i,d)=>i.moveOnTab?jy(SO)(t,r,i,d):B.none(),Gy=re([Js(fr(Xm),jy(CO)),Js(fr(Ca),jy(SO)),Js(Tc([$f,fr(ea)]),jD),Js(Tc([Qm,fr(ea)]),ZD),Js(fr(zr),$w),Js(fr(hc),$w)]),YB=re([Js(fr(hc),Nb)]);var GD=Th(Lw,Cf.init,Gy,YB,()=>B.some(K2));const qD=[rd("onSpace"),rd("onEnter"),rd("onShiftEnter"),rd("onLeft"),rd("onRight"),rd("onTab"),rd("onShiftTab"),rd("onUp"),rd("onDown"),rd("onEscape"),Ct("stopSpaceKeyup",!1),Cs("focusIn")],dE=(t,r,i)=>[Js(fr(hc),i.onSpace),Js(Tc([Qm,fr(zr)]),i.onEnter),Js(Tc([$f,fr(zr)]),i.onShiftEnter),Js(Tc([$f,fr(ea)]),i.onShiftTab),Js(Tc([Qm,fr(ea)]),i.onTab),Js(fr(Xm),i.onUp),Js(fr(Ca),i.onDown),Js(fr(Lf),i.onLeft),Js(fr(Kg),i.onRight),Js(fr(hc),i.onSpace)],Hw=(t,r,i)=>[...i.stopSpaceKeyup?[Js(fr(hc),Nb)]:[],Js(fr(Ui),i.onEscape)];var XB=Th(qD,Cf.init,dE,Hw,t=>t.focusIn);const JB=Yg.schema(),KD=j6.schema(),QB=zB.schema(),eI=Y6.schema(),tI=KB.schema(),YD=oE.schema(),kO=GD.schema(),mE=XB.schema();var gE=Object.freeze({__proto__:null,acyclic:JB,cyclic:KD,flow:QB,flatgrid:eI,matrix:tI,execution:YD,menu:kO,special:mE});const d0=t=>Ba(t,"setGridSize"),rs=Bx({branchKey:"mode",branches:gE,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,i)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},d=>{d(t,r,i)})},setGridSize:(t,r,i,d,p)=>{d0(i)?i.setGridSize(d,p):console.error("Layout does not support setGridSize")}},state:Wy}),Y2=(t,r)=>{uT(()=>{Wg(t,r,()=>$e(r,t.getSystem().build))},t.element)},nI=(t,r)=>{uT(()=>{N2(t,r,()=>xA(t.element,r,t.getSystem().buildOrPatch))},t.element)},e8=(t,r,i,d)=>{FT(r);const p=JC(t.element,i,d,t.getSystem().buildOrPatch);UA(t,p),t.syncComponents()},_p=(t,r,i)=>{const d=t.getSystem().build(i);ad(t,d,r)},zw=(t,r,i,d)=>{kp(r),_p(t,(p,x)=>gf(p,x,i),d)},XD=(t,r,i,d)=>(r.reuseDom?nI:Y2)(t,d),Vw=(t,r,i,d)=>{_p(t,Dl,d)},m0=(t,r,i,d)=>{_p(t,ps,d)},U1=(t,r,i,d)=>{const p=fE(t);ce(p,w=>Es(d.element,w.element)).each(kp)},fE=(t,r)=>t.components(),JD=(t,r,i,d,p)=>{const x=fE(t);return B.from(x[d]).map(w=>(p.fold(()=>kp(w),A=>{(r.reuseDom?e8:zw)(t,w,d,A)}),w))};var W1=Object.freeze({__proto__:null,append:Vw,prepend:m0,remove:U1,replaceAt:JD,replaceBy:(t,r,i,d,p)=>{const x=fE(t);return De(x,d).bind(w=>JD(t,r,i,w,p))},set:XD,contents:fE});const Hs=xl({fields:[Ra("reuseDom",!0)],name:"replacing",apis:W1}),oI=(t,r)=>{const i=ya(r);return xl({fields:[dn("enabled")],name:t,active:{events:re(i)}})},zs=(t,r)=>{const i=oI(t,r);return{key:t,value:{config:{},me:i,configAsRaw:re({}),initialConfig:{},state:Cf}}},Md=(t,r)=>{r.ignore||(Zd(t.element),r.onFocus(t))};var eR=Object.freeze({__proto__:null,focus:Md,blur:(t,r)=>{r.ignore||Pl(t.element)},isFocused:t=>bh(t.element)}),sI=Object.freeze({__proto__:null,exhibit:(t,r)=>{const i=r.ignore?{}:{attributes:{tabindex:"-1"}};return mm(i)},events:t=>ya([on(lp(),(r,i)=>{Md(r,t),i.stop()})].concat(t.stopMousedown?[on(_c(),(r,i)=>{i.event.prevent()})]:[]))}),pE=[Ar("onFocus"),Ct("stopMousedown",!1),Ct("ignore",!1)];const Ms=xl({fields:pE,name:"focusing",active:sI,apis:eR}),Ky=t=>({init:()=>{const i=wo(t);return{get:()=>i.get(),set:A=>i.set(A),clear:()=>i.set(t),readState:()=>i.get()}}}),EO=(t,r,i)=>{const d=r.aria;d.update(t,d,i.get())},rI=(t,r,i)=>{r.toggleClass.each(d=>{i.get()?Cc(t.element,d):Hi(t.element,d)})},Yy=(t,r,i,d)=>{const p=i.get();i.set(d),rI(t,r,i),EO(t,r,i),p!==d&&r.onToggled(t,d)},hE=(t,r,i)=>{Yy(t,r,i,!i.get())},tR=(t,r,i)=>{Yy(t,r,i,!0)},Ah=(t,r,i)=>{Yy(t,r,i,!1)},nR=(t,r,i)=>i.get(),Uw=(t,r,i)=>{Yy(t,r,i,r.selected)};var oR=Object.freeze({__proto__:null,onLoad:Uw,toggle:hE,isOn:nR,on:tR,off:Ah,set:Yy}),aI=Object.freeze({__proto__:null,exhibit:()=>mm({}),events:(t,r)=>{const i=tc(t,r,hE),d=m1(t,r,Uw);return ya(Ne([t.toggleOnExecute?[i]:[],[d]]))}});const iI=(t,r,i)=>{Kn(t.element,"aria-pressed",i),r.syncWithExpanded&&_O(t,r,i)},o8=(t,r,i)=>{Kn(t.element,"aria-selected",i)},cI=(t,r,i)=>{Kn(t.element,"aria-checked",i)},_O=(t,r,i)=>{Kn(t.element,"aria-expanded",i)};var Ww=[Ct("selected",!1),Cs("toggleClass"),Ct("toggleOnExecute",!0),Ar("onToggled"),fa("aria",{mode:"none"},fc("mode",{pressed:[Ct("syncWithExpanded",!1),xi("update",iI)],checked:[xi("update",cI)],expanded:[xi("update",_O)],selected:[xi("update",o8)],none:[xi("update",ue)]}))];const dr=xl({fields:Ww,name:"toggling",active:aI,apis:oR,state:Ky(!1)}),jw=()=>{const t=(r,i)=>{i.stop(),ob(r)};return[on(Ev(),t),on(Ox(),t),Mv(cg()),Mv(_c())]},Xy=t=>{const r=i=>gp((d,p)=>{i(d),p.stop()});return ya(Ne([t.map(r).toArray(),jw()]))},AO="alloy.item-hover",OO="alloy.item-focus",DO="alloy.item-toggled",sR=t=>{(Ad(t.element).isNone()||Ms.isFocused(t))&&(Ms.isFocused(t)||Ms.focus(t),qo(t,AO,{item:t}))},RO=t=>{qo(t,OO,{item:t})},lI=(t,r)=>{qo(t,DO,{item:t,state:r})},bE=re(AO),s8=re(OO),MO=re(DO),rR=t=>t.role.fold(()=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),rn),vE=(t,r)=>({aria:{mode:r?"selected":"checked"},...Us(t,(i,d)=>d!=="exclusive"),onToggled:(i,d)=>{Vt(t.onToggled)&&t.onToggled(i,d),lI(i,d)}}),aR=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:rR(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:vm.augment(t.itemBehaviours,[t.toggling.fold(dr.revoke,r=>dr.config(vE(r,t.role.exists(i=>i==="option")))),Ms.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{RO(r)}}),rs.config({mode:"execution"}),ao.config({store:{mode:"memory",initialValue:t.data}}),zs("item-type-events",[...jw(),on(td(),sR),on(BC(),Ms.focus)])]),components:t.components,eventOrder:t.eventOrder}),iR=[dn("data"),dn("components"),dn("dom"),Ct("hasSubmenu",!1),Cs("toggling"),Cs("role"),vm.field("itemBehaviours",[dr,Ms,rs,ao]),Ct("ignoreFocus",!1),Ct("domModification",{}),xi("builder",aR),Ct("eventOrder",{})],uI=t=>({dom:t.dom,components:t.components,events:ya([mp(BC())])}),r8=[dn("dom"),dn("components"),xi("builder",uI)],NO=re("item-widget"),cR=re([Du({name:"widget",overrides:t=>({behaviours:Ln([ao.config({store:{mode:"manual",getValue:r=>t.data,setValue:ue}})])})})]),dI=t=>{const r=Uy(NO(),t,cR()),i=Ew(NO(),t,r.internals()),d=x=>ii(x,t,"widget").map(w=>(rs.focusIn(w),w)),p=(x,w)=>l0(w.event.target)?B.none():(t.autofocus&&w.setSource(x.element),B.none());return{dom:t.dom,components:i,domModification:t.domModification,events:ya([gp((x,w)=>{d(x).each(A=>{w.stop()})}),on(td(),sR),on(BC(),(x,w)=>{t.autofocus?d(x):Ms.focus(x)})]),behaviours:vm.augment(t.widgetBehaviours,[ao.config({store:{mode:"memory",initialValue:t.data}}),Ms.config({ignore:t.ignoreFocus,onFocus:x=>{RO(x)}}),rs.config({mode:"special",focusIn:t.autofocus?x=>{d(x)}:Lk(),onLeft:p,onRight:p,onEscape:(x,w)=>!Ms.isFocused(x)&&!t.autofocus?(Ms.focus(x),B.some(!0)):(t.autofocus&&w.setSource(x.element),B.none())})])}},mI=[dn("uid"),dn("data"),dn("components"),dn("dom"),Ct("autofocus",!1),Ct("ignoreFocus",!1),vm.field("widgetBehaviours",[ao,Ms,rs]),Ct("domModification",{}),_w(cR()),xi("builder",dI)],Qc=fc("type",{widget:mI,item:iR,separator:r8}),lR=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),a8=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),i8=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),J2=re([kw({factory:{sketch:t=>{const r=$s("menu.spec item",Qc,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>Ls(r,"uid")?r:{...r,uid:$g("item")},overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),Jy=re([ri("role"),dn("value"),dn("items"),dn("dom"),dn("components"),Ct("eventOrder",{}),Ll("menuBehaviours",[Cn,ao,Kr,rs]),fa("movement",{mode:"menu",moveOnTab:!0},fc("mode",{grid:[hp(),xi("config",lR)],matrix:[xi("config",a8),dn("rowSelector"),Ct("previousSelector",B.none)],menu:[Ct("moveOnTab",!0),xi("config",i8)]})),ny(),Ct("fakeFocus",!1),Ct("focusManager",Rb()),Ar("onHighlight"),Ar("onDehighlight"),Ct("showMenuRole",!0)]),Ib=re("alloy.menu-focus"),gI=(t,r)=>{const i=qd(t.element,'[role="menuitemradio"][aria-checked="true"]');pt(i,d=>{Es(d,r.element)||t.getSystem().getByDom(d).each(p=>{dr.off(p)})})},fI=(t,r,i,d)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:nc(t.menuBehaviours,[Cn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),ao.config({store:{mode:"memory",initialValue:t.value}}),Kr.config({find:B.some}),rs.config(t.movement.config(t,t.movement))]),events:ya([on(s8(),(p,x)=>{const w=x.event;p.getSystem().getByDom(w.target).each(A=>{Cn.highlight(p,A),x.stop(),qo(p,Ib(),{menu:p,item:A})})}),on(bE(),(p,x)=>{const w=x.event.item;Cn.highlight(p,w)}),on(MO(),(p,x)=>{const{item:w,state:A}=x.event;A&&Ds(w.element,"role")==="menuitemradio"&&gI(p,w)})]),components:r,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Qy=cd({name:"Menu",configFields:Jy(),partFields:J2(),factory:fI}),BO=t=>No(t,(r,i)=>({k:r,v:i})),pI=(t,r,i,d)=>vn(i,d).bind(p=>vn(t,p).bind(x=>{const w=pI(t,r,i,x);return B.some([x].concat(w))})).getOr([]),g0=(t,r)=>{const i={};Co(t,(w,A)=>{pt(w,R=>{i[R]=A})});const d=r,p=BO(r),x=Mn(p,(w,A)=>[A].concat(pI(i,d,p,A)));return Mn(i,w=>vn(x,w).getOr([w]))},hI=()=>{const t=wo({}),r=wo({}),i=wo({}),d=Ir(),p=wo({}),x=()=>{t.set({}),r.set({}),i.set({}),d.clear()},w=()=>d.get().isNone(),A=(zt,Zn)=>{r.set({...r.get(),[zt]:{type:"prepared",menu:Zn}})},R=(zt,Zn,Mo,ln)=>{d.set(zt),t.set(Mo),r.set(Zn),p.set(ln);const Po=g0(ln,Mo);i.set(Po)},$=zt=>ns(t.get(),(Zn,Mo)=>Zn===zt),W=(zt,Zn,Mo)=>Ie(zt).bind(ln=>$(zt).bind(Po=>Zn(Po).map(io=>({triggeredMenu:ln,triggeringItem:io,triggeringPath:Mo})))),q=(zt,Zn)=>{const Mo=Et(Fe(zt).toArray(),ln=>Ie(ln).isSome());return vn(i.get(),zt).bind(ln=>{const Po=At(Mo.concat(ln)),io=oe(Po,(zo,Mr)=>W(zo,Zn,Po.slice(0,Mr+1)).fold(()=>Dr(d.get(),zo)?[]:[B.none()],rc=>[B.some(rc)]));return Er(io)})},se=zt=>vn(t.get(),zt).map(Zn=>{const Mo=vn(i.get(),zt).getOr([]);return[Zn].concat(Mo)}),ge=zt=>vn(i.get(),zt).bind(Zn=>Zn.length>1?B.some(Zn.slice(1)):B.none()),Ae=zt=>vn(i.get(),zt),Ie=zt=>mt(zt).bind(uR),mt=zt=>vn(r.get(),zt),Fe=zt=>vn(t.get(),zt);return{setMenuBuilt:A,setContents:R,expand:se,refresh:Ae,collapse:ge,lookupMenu:mt,lookupItem:Fe,otherMenus:zt=>{const Zn=p.get();return dt(nn(Zn),zt)},getPrimary:()=>d.get().bind(Ie),getMenus:()=>r.get(),clear:x,isClear:w,getTriggeringPath:q}},uR=t=>t.type==="prepared"?B.some(t.menu):B.none(),j1={init:hI,extractPreparedMenu:uR},IO=Ao("tiered-menu-item-highlight"),FO=Ao("tiered-menu-item-dehighlight");var fu;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(fu||(fu={}));const c8=(t,r)=>{const i=Ir(),d=(Rn,lo,Vs)=>Mn(Vs,(mr,bs)=>{const Qs=()=>Qy.sketch({...mr,value:bs,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ki,ni)=>{qo(ki,IO,{menuComp:ki,itemComp:ni})},onDehighlight:(ki,ni)=>{qo(ki,FO,{menuComp:ki,itemComp:ni})},focusManager:t.fakeFocus?nE():Rb()});return bs===lo?{type:"prepared",menu:Rn.getSystem().build(Qs())}:{type:"notbuilt",nbMenu:Qs}}),p=j1.init(),x=Rn=>{const lo=d(Rn,t.data.primary,t.data.menus),Vs=R();return p.setContents(t.data.primary,lo,t.data.expansions,Vs),p.getPrimary()},w=Rn=>ao.getValue(Rn).value,A=(Rn,lo,Vs)=>rt(lo,mr=>{if(!mr.getSystem().isConnected())return B.none();const bs=Cn.getCandidates(mr);return ce(bs,Qs=>w(Qs)===Vs)}),R=Rn=>Mn(t.data.menus,(lo,Vs)=>oe(lo.items,mr=>mr.type==="separator"?[]:[mr.data.value])),$=Cn.highlight,W=(Rn,lo)=>{$(Rn,lo),Cn.getHighlighted(lo).orThunk(()=>Cn.getFirst(lo)).each(Vs=>{t.fakeFocus?Cn.highlight(lo,Vs):j0(Rn,Vs.element,BC())})},q=(Rn,lo)=>hi($e(lo,Vs=>Rn.lookupMenu(Vs).bind(mr=>mr.type==="prepared"?B.some(mr.menu):B.none()))),se=(Rn,lo,Vs)=>{const mr=q(lo,lo.otherMenus(Vs));pt(mr,bs=>{kf(bs.element,[t.markers.backgroundMenu]),t.stayInDom||Hs.remove(Rn,bs)})},ge=Rn=>i.get().getOrThunk(()=>{const lo={},Vs=qd(Rn.element,`.${t.markers.item}`),mr=Et(Vs,bs=>Ds(bs,"aria-haspopup")==="true");return pt(mr,bs=>{Rn.getSystem().getByDom(bs).each(Qs=>{const ki=w(Qs);lo[ki]=Qs})}),i.set(lo),lo}),Ae=(Rn,lo)=>{const Vs=ge(Rn);Co(Vs,(mr,bs)=>{const Qs=Oe(lo,bs);Kn(mr.element,"aria-expanded",Qs)})},Ie=(Rn,lo,Vs)=>B.from(Vs[0]).bind(mr=>lo.lookupMenu(mr).bind(bs=>{if(bs.type==="notbuilt")return B.none();{const Qs=bs.menu,ki=q(lo,Vs.slice(1));return pt(ki,ni=>{Cc(ni.element,t.markers.backgroundMenu)}),Je(Qs.element)||Hs.append(Rn,dg(Qs)),kf(Qs.element,[t.markers.backgroundMenu]),W(Rn,Qs),se(Rn,lo,Vs),B.some(Qs)}}));let mt;(function(Rn){Rn[Rn.HighlightSubmenu=0]="HighlightSubmenu",Rn[Rn.HighlightParent=1]="HighlightParent"})(mt||(mt={}));const Fe=(Rn,lo,Vs)=>{if(Vs.type==="notbuilt"){const mr=Rn.getSystem().build(Vs.nbMenu());return p.setMenuBuilt(lo,mr),mr}else return Vs.menu},nt=(Rn,lo,Vs=mt.HighlightSubmenu)=>{if(lo.hasConfigured(Wo)&&Wo.isDisabled(lo))return B.some(lo);{const mr=w(lo);return p.expand(mr).bind(bs=>(Ae(Rn,bs),B.from(bs[0]).bind(Qs=>p.lookupMenu(Qs).bind(ki=>{const ni=Fe(Rn,Qs,ki);return Je(ni.element)||Hs.append(Rn,dg(ni)),t.onOpenSubmenu(Rn,lo,ni,At(bs)),Vs===mt.HighlightSubmenu?(Cn.highlightFirst(ni),Ie(Rn,p,bs)):(Cn.dehighlightAll(ni),B.some(lo))}))))}},lt=(Rn,lo)=>{const Vs=w(lo);return p.collapse(Vs).bind(mr=>(Ae(Rn,mr),Ie(Rn,p,mr).map(bs=>(t.onCollapseMenu(Rn,lo,bs),bs))))},Ft=(Rn,lo)=>{const Vs=w(lo);return p.refresh(Vs).bind(mr=>(Ae(Rn,mr),Ie(Rn,p,mr)))},zt=(Rn,lo)=>l0(lo.element)?B.none():nt(Rn,lo,mt.HighlightSubmenu),Zn=(Rn,lo)=>l0(lo.element)?B.none():lt(Rn,lo),Mo=(Rn,lo)=>lt(Rn,lo).orThunk(()=>t.onEscape(Rn,lo).map(()=>Rn)),ln=Rn=>(lo,Vs)=>vp(Vs.getSource(),`.${t.markers.item}`).bind(mr=>lo.getSystem().getByDom(mr).toOptional().bind(bs=>Rn(lo,bs).map(Kt))),Po=ya([on(Ib(),(Rn,lo)=>{const Vs=lo.event.item;p.lookupItem(w(Vs)).each(()=>{const mr=lo.event.menu;Cn.highlight(Rn,mr);const bs=w(lo.event.item);p.refresh(bs).each(Qs=>se(Rn,p,Qs))})}),gp((Rn,lo)=>{const Vs=lo.event.target;Rn.getSystem().getByDom(Vs).each(mr=>{w(mr).indexOf("collapse-item")===0&&lt(Rn,mr),nt(Rn,mr,mt.HighlightSubmenu).fold(()=>{t.onExecute(Rn,mr)},ue)})}),$i((Rn,lo)=>{x(Rn).each(Vs=>{Hs.append(Rn,dg(Vs)),t.onOpenMenu(Rn,Vs),t.highlightOnOpen===fu.HighlightMenuAndItem?W(Rn,Vs):t.highlightOnOpen===fu.HighlightJustMenu&&$(Rn,Vs)})}),on(IO,(Rn,lo)=>{t.onHighlightItem(Rn,lo.event.menuComp,lo.event.itemComp)}),on(FO,(Rn,lo)=>{t.onDehighlightItem(Rn,lo.event.menuComp,lo.event.itemComp)}),...t.navigateOnHover?[on(bE(),(Rn,lo)=>{const Vs=lo.event.item;Ft(Rn,Vs),nt(Rn,Vs,mt.HighlightParent),t.onHover(Rn,Vs)})]:[]]),io=Rn=>Cn.getHighlighted(Rn).bind(Cn.getHighlighted),zo=Rn=>{io(Rn).each(lo=>{lt(Rn,lo)})},Mr=Rn=>{p.getPrimary().each(lo=>{W(Rn,lo)})},rc=Rn=>B.from(Rn.components()[0]).filter(lo=>Ds(lo.element,"role")==="menu"),Yo={collapseMenu:zo,highlightPrimary:Mr,repositionMenus:Rn=>{p.getPrimary().bind(Vs=>io(Rn).bind(mr=>{const bs=w(mr),Qs=Pa(p.getMenus()),ki=hi($e(Qs,j1.extractPreparedMenu));return p.getTriggeringPath(bs,ni=>A(Rn,ki,ni))}).map(mr=>({primary:Vs,triggeringPath:mr}))).fold(()=>{rc(Rn).each(Vs=>{t.onRepositionMenu(Rn,Vs,[])})},({primary:Vs,triggeringPath:mr})=>{t.onRepositionMenu(Rn,Vs,mr)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:nc(t.tmenuBehaviours,[rs.config({mode:"special",onRight:ln(zt),onLeft:ln(Zn),onEscape:ln(Mo),focusIn:(Rn,lo)=>{p.getPrimary().each(Vs=>{j0(Rn,Vs.element,BC())})}}),Cn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Kr.config({find:Rn=>Cn.getHighlighted(Rn)}),Hs.config({})]),eventOrder:t.eventOrder,apis:Yo,events:Po}},Vf=re("collapse-item"),Uf=(t,r,i)=>({primary:t,menus:r,expansions:i}),bI=(t,r)=>({primary:t,menus:Ss(t,r),expansions:{}}),vI=t=>({value:Ao(Vf()),meta:{text:t}}),Fb=Ym({name:"TieredMenu",configFields:[ub("onExecute"),ub("onEscape"),w1("onOpenMenu"),w1("onOpenSubmenu"),Ar("onRepositionMenu"),Ar("onCollapseMenu"),Ct("highlightOnOpen",fu.HighlightMenuAndItem),lm("data",[dn("primary"),dn("menus"),dn("expansions")]),Ct("fakeFocus",!1),Ar("onHighlightItem"),Ar("onDehighlightItem"),Ar("onHover"),oy(),dn("dom"),Ct("navigateOnHover",!0),Ct("stayInDom",!1),Ll("tmenuBehaviours",[rs,Cn,Kr,Hs]),Ct("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:c8,extraApis:{tieredData:Uf,singleData:bI,collapseItem:vI}}),l8=(t,r,i,d,p)=>{const x=()=>t.lazySink(r),w=d.type==="horizontal"?{layouts:{onLtr:()=>fy(),onRtl:()=>A1()}}:{},A=$=>$.length===2,R=$=>A($)?w:{};return Fb.sketch({dom:{tag:"div"},data:d.data,markers:d.menu.markers,highlightOnOpen:d.menu.highlightOnOpen,fakeFocus:d.menu.fakeFocus,onEscape:()=>(qr.close(r),t.onEscape.map($=>$(r)),B.some(!0)),onExecute:()=>B.some(!0),onOpenMenu:($,W)=>{gu.positionWithinBounds(x().getOrDie(),W,i,p())},onOpenSubmenu:($,W,q,se)=>{const ge=x().getOrDie();gu.position(ge,q,{anchor:{type:"submenu",item:W,...R(se)}})},onRepositionMenu:($,W,q)=>{const se=x().getOrDie();gu.positionWithinBounds(se,W,i,p()),pt(q,ge=>{const Ae=R(ge.triggeringPath);gu.position(se,ge.triggeredMenu,{anchor:{type:"submenu",item:ge.triggeringItem,...Ae}})})}})},PO=(t,r)=>{const i=(se,ge)=>t.getRelated(se).exists(Ie=>yp(Ie,ge)),d=(se,ge)=>{qr.setContent(se,ge)},p=(se,ge,Ae)=>{const Ie=B.none;x(se,ge,Ae,Ie)},x=(se,ge,Ae,Ie)=>{const mt=t.lazySink(se).getOrDie();qr.openWhileCloaked(se,ge,()=>gu.positionWithinBounds(mt,se,Ae,Ie())),ao.setValue(se,B.some({mode:"position",config:Ae,getBounds:Ie}))},w=(se,ge,Ae)=>{A(se,ge,Ae,B.none)},A=(se,ge,Ae,Ie)=>{const mt=l8(t,se,ge,Ae,Ie);qr.open(se,mt),ao.setValue(se,B.some({mode:"menu",menu:mt}))},R=se=>{qr.isOpen(se)&&(ao.setValue(se,B.none()),qr.close(se))},$=se=>qr.getState(se),W=se=>{qr.isOpen(se)&&ao.getValue(se).each(ge=>{switch(ge.mode){case"menu":qr.getState(se).each(Fb.repositionMenus);break;case"position":const Ae=t.lazySink(se).getOrDie();gu.positionWithinBounds(Ae,se,ge.config,ge.getBounds());break}})},q={setContent:d,showAt:p,showWithinBounds:x,showMenuAt:w,showMenuWithinBounds:A,hide:R,getContent:$,reposition:W,isOpen:qr.isOpen};return{uid:t.uid,dom:t.dom,behaviours:nc(t.inlineBehaviours,[qr.config({isPartOf:(se,ge,Ae)=>yp(ge,Ae)||i(se,Ae),getAttachPoint:se=>t.lazySink(se).getOrDie(),onOpen:se=>{t.onShow(se)},onClose:se=>{t.onHide(se)}}),ao.config({store:{mode:"memory",initialValue:B.none()}}),qm.config({channels:{...Dd({isExtraPart:r.isExtraPart,...t.fireDismissalEventInstead.map(se=>({fireEventInstead:{event:se.event}})).getOr({})}),...a0({...t.fireRepositionEventInstead.map(se=>({fireEventInstead:{event:se.event}})).getOr({}),doReposition:W})}})]),eventOrder:t.eventOrder,apis:q}},cc=Ym({name:"InlineView",configFields:[dn("lazySink"),Ar("onShow"),Ar("onHide"),Mg("onEscape"),Ll("inlineBehaviours",[qr,ao,qm]),Yc("fireDismissalEventInstead",[Ct("event",dp())]),Yc("fireRepositionEventInstead",[Ct("event",ec())]),Ct("getRelated",B.none),Ct("isExtraPart",$t),Ct("eventOrder",B.none)],factory:PO,apis:{showAt:(t,r,i,d)=>{t.showAt(r,i,d)},showWithinBounds:(t,r,i,d,p)=>{t.showWithinBounds(r,i,d,p)},showMenuAt:(t,r,i,d)=>{t.showMenuAt(r,i,d)},showMenuWithinBounds:(t,r,i,d,p)=>{t.showMenuWithinBounds(r,i,d,p)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,i)=>{t.setContent(r,i)},reposition:(t,r)=>{t.reposition(r)}}});var Q2=tinymce.util.Tools.resolve("tinymce.util.Delay"),yE=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),LO=tinymce.util.Tools.resolve("tinymce.EditorManager"),Oh=tinymce.util.Tools.resolve("tinymce.Env"),Xg;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Xg||(Xg={}));var Zw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Zw||(Zw={}));const ei=t=>r=>r.options.get(t),eS=t=>r=>B.from(t(r)),ex=t=>{const r=Oh.deviceType.isPhone(),i=Oh.deviceType.isTablet()||r,d=t.options.register,p=w=>Tt(w)||w===!1,x=w=>Tt(w)||Ue(w);d("skin",{processor:w=>Tt(w)||w===!1,default:"oxide"}),d("skin_url",{processor:"string"}),d("height",{processor:x,default:Math.max(t.getElement().offsetHeight,400)}),d("width",{processor:x,default:yE.DOM.getStyle(t.getElement(),"width")}),d("min_height",{processor:"number",default:100}),d("min_width",{processor:"number"}),d("max_height",{processor:"number"}),d("max_width",{processor:"number"}),d("style_formats",{processor:"object[]"}),d("style_formats_merge",{processor:"boolean",default:!1}),d("style_formats_autohide",{processor:"boolean",default:!1}),d("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),d("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),d("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),d("font_size_input_default_unit",{processor:"string",default:"pt"}),d("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),d("content_langs",{processor:"object[]"}),d("removed_menuitems",{processor:"string",default:""}),d("menubar",{processor:w=>Tt(w)||es(w),default:!r}),d("menu",{processor:"object",default:{}}),d("toolbar",{processor:w=>es(w)||Tt(w)||ss(w)?{value:w,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),tt(9,w=>{d("toolbar"+(w+1),{processor:"string"})}),d("toolbar_mode",{processor:"string",default:i?"scrolling":"floating"}),d("toolbar_groups",{processor:"object",default:{}}),d("toolbar_location",{processor:"string",default:Zw.auto}),d("toolbar_persist",{processor:"boolean",default:!1}),d("toolbar_sticky",{processor:"boolean",default:t.inline}),d("toolbar_sticky_offset",{processor:"number",default:0}),d("fixed_toolbar_container",{processor:"string",default:""}),d("fixed_toolbar_container_target",{processor:"object"}),d("ui_mode",{processor:"string",default:"combined"}),d("file_picker_callback",{processor:"function"}),d("file_picker_validator_handler",{processor:"function"}),d("file_picker_types",{processor:"string"}),d("typeahead_urls",{processor:"boolean",default:!0}),d("anchor_top",{processor:p,default:"#top"}),d("anchor_bottom",{processor:p,default:"#bottom"}),d("draggable_modal",{processor:"boolean",default:!1}),d("statusbar",{processor:"boolean",default:!0}),d("elementpath",{processor:"boolean",default:!0}),d("branding",{processor:"boolean",default:!0}),d("promotion",{processor:"boolean",default:!0}),d("resize",{processor:w=>w==="both"||es(w),default:!Oh.deviceType.isTouch()}),d("sidebar_show",{processor:"string"}),d("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),d("default_font_stack",{processor:"string[]",default:[]})},$O=ei("readonly"),xE=ei("disabled"),HO=ei("height"),dR=ei("width"),Jg=eS(ei("min_width")),wE=eS(ei("min_height")),tx=eS(ei("max_width")),tS=eS(ei("max_height")),Yr=eS(ei("style_formats")),mR=ei("style_formats_merge"),nS=ei("style_formats_autohide"),yI=ei("content_langs"),gR=ei("removed_menuitems"),Ap=ei("toolbar_mode"),Yd=ei("toolbar_groups"),CE=ei("toolbar_location"),oS=ei("fixed_toolbar_container"),Z1=ei("fixed_toolbar_container_target"),Pb=ei("toolbar_persist"),Gw=ei("toolbar_sticky_offset"),zO=ei("menubar"),sS=ei("toolbar"),fR=ei("file_picker_callback"),VO=ei("file_picker_validator_handler"),xI=ei("font_size_input_default_unit"),wI=ei("file_picker_types"),SE=ei("typeahead_urls"),UO=ei("anchor_top"),WO=ei("anchor_bottom"),pR=ei("draggable_modal"),rS=ei("statusbar"),CI=ei("elementpath"),hR=ei("branding"),SI=ei("resize"),Lb=ei("paste_as_text"),aS=ei("sidebar_show"),jO=ei("promotion"),kE=ei("help_accessibility"),bR=ei("default_font_stack"),TE=ei("skin"),G1=t=>t.options.get("skin")===!1,ZO=t=>t.options.get("menubar")!==!1,kI=t=>{const r=t.options.get("skin_url");if(G1(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const i=t.options.get("skin");return LO.baseURL+"/skins/ui/"+i}},u8=t=>B.from(t.options.get("skin_url")),TI=t=>t.options.get("line_height_formats").split(" "),GO=t=>{const r=sS(t),i=Tt(r),d=ss(r)&&r.length>0;return!EE(t)&&(d||i||r===!0)},qO=t=>{const r=tt(9,d=>t.options.get("toolbar"+(d+1))),i=Et(r,Tt);return Lo(i.length>0,i)},EE=t=>qO(t).fold(()=>{const r=sS(t);return at(r,Tt)&&r.length>0},Kt),vR=t=>CE(t)===Zw.bottom,KO=t=>{var r;if(!t.inline)return B.none();const i=(r=oS(t))!==null&&r!==void 0?r:"";if(i.length>0)return zi(Pt(),i);const d=Z1(t);return zn(d)?B.some(xt.fromDom(d)):B.none()},Qg=t=>t.inline&&KO(t).isSome(),yR=t=>KO(t).getOrThunk(()=>Ki(qa(xt.fromDom(t.getElement())))),qw=t=>t.inline&&!ZO(t)&&!GO(t)&&!EE(t),q1=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Qg(t)&&!qw(t),ef=t=>!Qg(t)&&t.options.get("ui_mode")==="split",nx=t=>{const r=t.options.get("menu");return Mn(r,i=>({...i,items:i.items}))};var YO=Object.freeze({__proto__:null,get ToolbarMode(){return Xg},get ToolbarLocation(){return Zw},register:ex,getSkinUrl:kI,getSkinUrlOption:u8,isReadOnly:$O,isDisabled:xE,getSkin:TE,isSkinDisabled:G1,getHeightOption:HO,getWidthOption:dR,getMinWidthOption:Jg,getMinHeightOption:wE,getMaxWidthOption:tx,getMaxHeightOption:tS,getUserStyleFormats:Yr,shouldMergeStyleFormats:mR,shouldAutoHideStyleFormats:nS,getLineHeightFormats:TI,getContentLanguages:yI,getRemovedMenuItems:gR,isMenubarEnabled:ZO,isMultipleToolbars:EE,isToolbarEnabled:GO,isToolbarPersist:Pb,getMultipleToolbarsOption:qO,getUiContainer:yR,useFixedContainer:Qg,isSplitUiMode:ef,getToolbarMode:Ap,isDraggableModal:pR,isDistractionFree:qw,isStickyToolbar:q1,getStickyToolbarOffset:Gw,getToolbarLocation:CE,isToolbarLocationBottom:vR,getToolbarGroups:Yd,getMenus:nx,getMenubar:zO,getToolbar:sS,getFilePickerCallback:fR,getFilePickerTypes:wI,useTypeaheadUrls:SE,getAnchorTop:UO,getAnchorBottom:WO,getFilePickerValidatorHandler:VO,getFontSizeInputDefaultUnit:xI,useStatusBar:rS,useElementPath:CI,promotionEnabled:jO,useBranding:hR,getResize:SI,getPasteAsText:Lb,getSidebarShow:aS,useHelpAccessibility:kE,getDefaultFontStack:bR});const _E=["visible","hidden","clip"],ox=t=>Ga(t).length>0&&!Oe(_E,t),f0=t=>{if(Bs(t)){const r=bn(t,"overflow-x"),i=bn(t,"overflow-y");return ox(r)||ox(i)}else return!1},iS=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),cS=(t,r)=>{const i=LA(r,f0),d=i.length===0?bd(r).map(ol).map(p=>LA(p,f0)).getOr([]):i;return Hn(d).map(p=>({element:p,others:d.slice(1),isFullscreen:()=>iS(t)}))},p0=(t,r)=>ef(t)?cS(t,r):B.none(),K1=t=>{const r=[...$e(t.others,jc),Yt()];return t.isFullscreen()?Yt():hf(jc(t.element),r)},Hl=Ym({name:"Button",factory:t=>{const r=Xy(t.action),i=t.dom.tag,d=x=>vn(t.dom,"attributes").bind(w=>vn(w,x)),p=()=>{if(i==="button"){const x=d("type").getOr("button"),w=d("role").map(A=>({role:A})).getOr({});return{type:x,...w}}else return{role:t.role.getOr(d("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:vm.augment(t.buttonBehaviours,[Ms.config({}),rs.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:p()},eventOrder:t.eventOrder}},configFields:[Ct("uid",void 0),dn("dom"),Ct("components",[]),vm.field("buttonBehaviours",[Ms,rs]),Cs("action"),Cs("role"),Ct("eventOrder",{})]}),_I=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return Pn(r,(i,d)=>d.name==="class"?i:{...i,[d.name]:d.value},{})},lS=t=>Array.prototype.slice.call(t.dom.classList,0),Dh=t=>{const r=xt.fromHtml(t),i=qi(r),d=_I(r),p=lS(r),x=i.length===0?{}:{innerHtml:_u(r)};return{tag:Ur(r),classes:p,attributes:d,...x}},da=t=>{const r=XT(t)&&Ba(t,"uid")?t.uid:$g("memento");return{get:x=>x.getSystem().getByUid(r).getOrDie(),getOpt:x=>x.getSystem().getByUid(r).toOptional(),asSpec:()=>({...t,uid:r})}};var uS=Object.freeze({__proto__:null,exhibit:(t,r)=>mm({attributes:ua([{key:r.tabAttr,value:"true"}])})}),AI=[Ct("tabAttr","data-alloy-tabstop")];const Wi=xl({fields:AI,name:"tabstopping",active:uS}),AE=Ao("tooltip.exclusive"),dS=Ao("tooltip.show"),Op=Ao("tooltip.hide"),Rh=Ao("tooltip.immediateHide"),pg=Ao("tooltip.immediateShow"),XO=(t,r,i)=>{t.getSystem().broadcastOn([AE],{})};var xR=Object.freeze({__proto__:null,hideAllExclusive:XO,immediateOpenClose:(t,r,i,d)=>xr(t,d?pg:Rh),isEnabled:(t,r,i)=>i.isEnabled(),setComponents:(t,r,i,d)=>{i.getTooltip().each(p=>{p.getSystem().isConnected()&&Hs.set(p,d)})},setEnabled:(t,r,i,d)=>i.setEnabled(d)}),DI=Object.freeze({__proto__:null,events:(t,r)=>{const i=w=>{r.getTooltip().each(A=>{A.getSystem().isConnected()&&(kp(A),t.onHide(w,A),r.clearTooltip())}),r.clearTimer()},d=w=>{if(!r.isShowing()&&r.isEnabled()){XO(w);const A=t.lazySink(w).getOrDie(),R=w.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ya(t.mode==="normal"?[on(td(),$=>{xr(w,dS)}),on(Tv(),$=>{xr(w,Op)})]:[]),behaviours:Ln([Hs.config({})])});r.setTooltip(R),Sp(A,R),t.onShow(w,R),gu.position(A,R,{anchor:t.anchor(w)})}},p=w=>{r.getTooltip().each(A=>{const R=t.lazySink(w).getOrDie();gu.position(R,A,{anchor:t.anchor(w)})})},x=()=>{switch(t.mode){case"normal":return[on(wf(),w=>{xr(w,pg)}),on(rh(),w=>{xr(w,Rh)}),on(td(),w=>{xr(w,dS)}),on(Tv(),w=>{xr(w,Op)})];case"follow-highlight":return[on(Do(),(w,A)=>{xr(w,dS)}),on(l1(),w=>{xr(w,Op)})];case"children-normal":return[on(wf(),(w,A)=>{Ad(w.element).each(R=>{Ta(A.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold(()=>{xr(w,pg)},$=>{r.isShowing()&&(t.onShow(w,$),p(w))})})}),on(rh(),w=>{Ad(w.element).fold(()=>{xr(w,Rh)},ue)}),on(td(),w=>{zi(w.element,"[data-mce-tooltip]:hover").each(A=>{r.getTooltip().fold(()=>{xr(w,dS)},R=>{r.isShowing()&&(t.onShow(w,R),p(w))})})}),on(Tv(),w=>{zi(w.element,"[data-mce-tooltip]:hover").fold(()=>{xr(w,Op)},ue)})];default:return[on(wf(),(w,A)=>{Ad(w.element).each(R=>{Ta(A.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold(()=>{xr(w,pg)},$=>{r.isShowing()&&(t.onShow(w,$),p(w))})})}),on(rh(),w=>{Ad(w.element).fold(()=>{xr(w,Rh)},ue)})]}};return ya(Ne([[d1(w=>{t.onSetup(w)}),on(dS,w=>{r.resetTimer(()=>{d(w)},t.delayForShow())}),on(Op,w=>{r.resetTimer(()=>{i(w)},t.delayForHide())}),on(pg,w=>{r.resetTimer(()=>{d(w)},0)}),on(Rh,w=>{r.resetTimer(()=>{i(w)},0)}),on(ug(),(w,A)=>{const R=A;R.universal||Oe(R.channels,AE)&&i(w)}),Cd(w=>{i(w)})],x()]))}}),OE=[dn("lazySink"),dn("tooltipDom"),Ct("exclusive",!0),Ct("tooltipComponents",[]),Ea("delayForShow",re(300)),Ea("delayForHide",re(300)),Ea("onSetup",ue),Kl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Ct("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:re([Jc,Jl,lr,Fl,pc,Fa]),onRtl:re([Jc,Jl,lr,Fl,pc,Fa])},bubble:Rf(0,-2,{})})),Ar("onHide"),Ar("onShow")],Mh=Object.freeze({__proto__:null,init:()=>{const t=wo(!0),r=Ir(),i=Ir(),d=()=>{r.on(clearTimeout)},p=(w,A)=>{d(),r.set(setTimeout(w,A))},x=re("not-implemented");return lu({getTooltip:i.get,isShowing:i.isSet,setTooltip:i.set,clearTooltip:i.clear,clearTimer:d,resetTimer:p,readState:x,isEnabled:()=>t.get(),setEnabled:w=>t.set(w)})}});const lc=xl({fields:OE,name:"tooltipping",active:DI,state:Mh,apis:xR});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:JO,setPrototypeOf:DE,isFrozen:RI,getPrototypeOf:MI,getOwnPropertyDescriptor:NI}=Object;let{freeze:hg,seal:Dp,create:RE}=Object,{apply:mS,construct:ME}=typeof Reflect<"u"&&Reflect;hg||(hg=function(r){return r}),Dp||(Dp=function(r){return r}),mS||(mS=function(r,i,d){return r.apply(i,d)}),ME||(ME=function(r,i){return new r(...i)});const NE=Mp(Array.prototype.forEach),QO=Mp(Array.prototype.pop),BE=Mp(Array.prototype.push),e3=Mp(String.prototype.toLowerCase),wR=Mp(String.prototype.toString),BI=Mp(String.prototype.match),IE=Mp(String.prototype.replace),h8=Mp(String.prototype.indexOf),t3=Mp(String.prototype.trim),Rp=Mp(Object.prototype.hasOwnProperty),bg=Mp(RegExp.prototype.test),Y1=CR(TypeError);function Mp(t){return function(r){for(var i=arguments.length,d=new Array(i>1?i-1:0),p=1;p<i;p++)d[p-1]=arguments[p];return mS(t,r,d)}}function CR(t){return function(){for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return ME(t,i)}}function Mi(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e3;DE&&DE(t,null);let d=r.length;for(;d--;){let p=r[d];if(typeof p=="string"){const x=i(p);x!==p&&(RI(r)||(r[d]=x),p=x)}t[p]=!0}return t}function b8(t){for(let r=0;r<t.length;r++)Rp(t,r)||(t[r]=null);return t}function Kw(t){const r=RE(null);for(const[i,d]of JO(t))Rp(t,i)&&(Array.isArray(d)?r[i]=b8(d):d&&typeof d=="object"&&d.constructor===Object?r[i]=Kw(d):r[i]=d);return r}function gS(t,r){for(;t!==null;){const d=NI(t,r);if(d){if(d.get)return Mp(d.get);if(typeof d.value=="function")return Mp(d.value)}t=MI(t)}function i(){return null}return i}const FE=hg(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sx=hg(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rx=hg(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),II=hg(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PE=hg(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),n3=hg(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SR=hg(["#text"]),$b=hg(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),LE=hg(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Np=hg(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fS=hg(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FI=Dp(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PI=Dp(/<%[\w\W]*|[\w\W]*%>/gm),pS=Dp(/\${[\w\W]*}/gm),v8=Dp(/^data-[\-\w.\u00B7-\uFFFF]/),kR=Dp(/^aria-[\-\w]+$/),o3=Dp(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hS=Dp(/^(?:\w+script|data):/i),s3=Dp(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$E=Dp(/^html$/i),LI=Dp(/^[a-z][.\w]*(-[.\w]+)+$/i);var HE=Object.freeze({__proto__:null,MUSTACHE_EXPR:FI,ERB_EXPR:PI,TMPLIT_EXPR:pS,DATA_ATTR:v8,ARIA_ATTR:kR,IS_ALLOWED_URI:o3,IS_SCRIPT_OR_DATA:hS,ATTR_WHITESPACE:s3,DOCTYPE_NAME:$E,CUSTOM_ELEMENT:LI});const bS={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},y8=function(){return typeof window>"u"?null:window},$I=function(r,i){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let d=null;const p="data-tt-policy-suffix";i&&i.hasAttribute(p)&&(d=i.getAttribute(p));const x="dompurify"+(d?"#"+d:"");try{return r.createPolicy(x,{createHTML(w){return w},createScriptURL(w){return w}})}catch{return console.warn("TrustedTypes policy "+x+" could not be created."),null}};function X1(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y8();const r=na=>X1(na);if(r.version="3.1.7",r.removed=[],!t||!t.document||t.document.nodeType!==bS.document)return r.isSupported=!1,r;let{document:i}=t;const d=i,p=d.currentScript,{DocumentFragment:x,HTMLTemplateElement:w,Node:A,Element:R,NodeFilter:$,NamedNodeMap:W=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:q,DOMParser:se,trustedTypes:ge}=t,Ae=R.prototype,Ie=gS(Ae,"cloneNode"),mt=gS(Ae,"remove"),Fe=gS(Ae,"nextSibling"),nt=gS(Ae,"childNodes"),lt=gS(Ae,"parentNode");if(typeof w=="function"){const na=i.createElement("template");na.content&&na.content.ownerDocument&&(i=na.content.ownerDocument)}let Ft,zt="";const{implementation:Zn,createNodeIterator:Mo,createDocumentFragment:ln,getElementsByTagName:Po}=i,{importNode:io}=d;let zo={};r.isSupported=typeof JO=="function"&&typeof lt=="function"&&Zn&&Zn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Mr,ERB_EXPR:rc,TMPLIT_EXPR:Sa,DATA_ATTR:Yo,ARIA_ATTR:Rn,IS_SCRIPT_OR_DATA:lo,ATTR_WHITESPACE:Vs,CUSTOM_ELEMENT:mr}=HE;let{IS_ALLOWED_URI:bs}=HE,Qs=null;const ki=Mi({},[...FE,...sx,...rx,...PE,...SR]);let ni=null;const op=Mi({},[...$b,...LE,...Np,...fS]);let Vc=Object.seal(RE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Uh=null,Om=null,Wh=!0,jh=!0,bv=!1,xB=!0,kx=!1,B7=!0,tA=!1,I7=!1,JG=!1,$6=!1,NV=!1,BV=!1,Hq=!0,zq=!1;const xK="user-content-";let QG=!0,F7=!1,H6={},z6=null;const Vq=Mi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Uq=null;const Wq=Mi({},["audio","video","img","source","image","track"]);let eq=null;const jq=Mi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),IV="http://www.w3.org/1998/Math/MathML",FV="http://www.w3.org/2000/svg",nA="http://www.w3.org/1999/xhtml";let V6=nA,tq=!1,nq=null;const wK=Mi({},[IV,FV,nA],wR);let P7=null;const CK=["application/xhtml+xml","text/html"],SK="text/html";let sp=null,U6=null;const kK=i.createElement("form"),Zq=function(Zt){return Zt instanceof RegExp||Zt instanceof Function},oq=function(){let Zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(U6&&U6===Zt)){if((!Zt||typeof Zt!="object")&&(Zt={}),Zt=Kw(Zt),P7=CK.indexOf(Zt.PARSER_MEDIA_TYPE)===-1?SK:Zt.PARSER_MEDIA_TYPE,sp=P7==="application/xhtml+xml"?wR:e3,Qs=Rp(Zt,"ALLOWED_TAGS")?Mi({},Zt.ALLOWED_TAGS,sp):ki,ni=Rp(Zt,"ALLOWED_ATTR")?Mi({},Zt.ALLOWED_ATTR,sp):op,nq=Rp(Zt,"ALLOWED_NAMESPACES")?Mi({},Zt.ALLOWED_NAMESPACES,wR):wK,eq=Rp(Zt,"ADD_URI_SAFE_ATTR")?Mi(Kw(jq),Zt.ADD_URI_SAFE_ATTR,sp):jq,Uq=Rp(Zt,"ADD_DATA_URI_TAGS")?Mi(Kw(Wq),Zt.ADD_DATA_URI_TAGS,sp):Wq,z6=Rp(Zt,"FORBID_CONTENTS")?Mi({},Zt.FORBID_CONTENTS,sp):Vq,Uh=Rp(Zt,"FORBID_TAGS")?Mi({},Zt.FORBID_TAGS,sp):{},Om=Rp(Zt,"FORBID_ATTR")?Mi({},Zt.FORBID_ATTR,sp):{},H6=Rp(Zt,"USE_PROFILES")?Zt.USE_PROFILES:!1,Wh=Zt.ALLOW_ARIA_ATTR!==!1,jh=Zt.ALLOW_DATA_ATTR!==!1,bv=Zt.ALLOW_UNKNOWN_PROTOCOLS||!1,xB=Zt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kx=Zt.SAFE_FOR_TEMPLATES||!1,B7=Zt.SAFE_FOR_XML!==!1,tA=Zt.WHOLE_DOCUMENT||!1,$6=Zt.RETURN_DOM||!1,NV=Zt.RETURN_DOM_FRAGMENT||!1,BV=Zt.RETURN_TRUSTED_TYPE||!1,JG=Zt.FORCE_BODY||!1,Hq=Zt.SANITIZE_DOM!==!1,zq=Zt.SANITIZE_NAMED_PROPS||!1,QG=Zt.KEEP_CONTENT!==!1,F7=Zt.IN_PLACE||!1,bs=Zt.ALLOWED_URI_REGEXP||o3,V6=Zt.NAMESPACE||nA,Vc=Zt.CUSTOM_ELEMENT_HANDLING||{},Zt.CUSTOM_ELEMENT_HANDLING&&Zq(Zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Vc.tagNameCheck=Zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Zt.CUSTOM_ELEMENT_HANDLING&&Zq(Zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Vc.attributeNameCheck=Zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Zt.CUSTOM_ELEMENT_HANDLING&&typeof Zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Vc.allowCustomizedBuiltInElements=Zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kx&&(jh=!1),NV&&($6=!0),H6&&(Qs=Mi({},SR),ni=[],H6.html===!0&&(Mi(Qs,FE),Mi(ni,$b)),H6.svg===!0&&(Mi(Qs,sx),Mi(ni,LE),Mi(ni,fS)),H6.svgFilters===!0&&(Mi(Qs,rx),Mi(ni,LE),Mi(ni,fS)),H6.mathMl===!0&&(Mi(Qs,PE),Mi(ni,Np),Mi(ni,fS))),Zt.ADD_TAGS&&(Qs===ki&&(Qs=Kw(Qs)),Mi(Qs,Zt.ADD_TAGS,sp)),Zt.ADD_ATTR&&(ni===op&&(ni=Kw(ni)),Mi(ni,Zt.ADD_ATTR,sp)),Zt.ADD_URI_SAFE_ATTR&&Mi(eq,Zt.ADD_URI_SAFE_ATTR,sp),Zt.FORBID_CONTENTS&&(z6===Vq&&(z6=Kw(z6)),Mi(z6,Zt.FORBID_CONTENTS,sp)),QG&&(Qs["#text"]=!0),tA&&Mi(Qs,["html","head","body"]),Qs.table&&(Mi(Qs,["tbody"]),delete Uh.tbody),Zt.TRUSTED_TYPES_POLICY){if(typeof Zt.TRUSTED_TYPES_POLICY.createHTML!="function")throw Y1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Zt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Y1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ft=Zt.TRUSTED_TYPES_POLICY,zt=Ft.createHTML("")}else Ft===void 0&&(Ft=$I(ge,p)),Ft!==null&&typeof zt=="string"&&(zt=Ft.createHTML(""));hg&&hg(Zt),U6=Zt}},Gq=Mi({},["mi","mo","mn","ms","mtext"]),qq=Mi({},["annotation-xml"]),TK=Mi({},["title","style","font","a","script"]),Kq=Mi({},[...sx,...rx,...II]),Yq=Mi({},[...PE,...n3]),EK=function(Zt){let ks=lt(Zt);(!ks||!ks.tagName)&&(ks={namespaceURI:V6,tagName:"template"});const Nr=e3(Zt.tagName),Gu=e3(ks.tagName);return nq[Zt.namespaceURI]?Zt.namespaceURI===FV?ks.namespaceURI===nA?Nr==="svg":ks.namespaceURI===IV?Nr==="svg"&&(Gu==="annotation-xml"||Gq[Gu]):!!Kq[Nr]:Zt.namespaceURI===IV?ks.namespaceURI===nA?Nr==="math":ks.namespaceURI===FV?Nr==="math"&&qq[Gu]:!!Yq[Nr]:Zt.namespaceURI===nA?ks.namespaceURI===FV&&!qq[Gu]||ks.namespaceURI===IV&&!Gq[Gu]?!1:!Yq[Nr]&&(TK[Nr]||!Kq[Nr]):!!(P7==="application/xhtml+xml"&&nq[Zt.namespaceURI]):!1},Rk=function(Zt){BE(r.removed,{element:Zt});try{lt(Zt).removeChild(Zt)}catch{mt(Zt)}},L7=function(Zt,ks){try{BE(r.removed,{attribute:ks.getAttributeNode(Zt),from:ks})}catch{BE(r.removed,{attribute:null,from:ks})}if(ks.removeAttribute(Zt),Zt==="is"&&!ni[Zt])if($6||NV)try{Rk(ks)}catch{}else try{ks.setAttribute(Zt,"")}catch{}},Xq=function(Zt){let ks=null,Nr=null;if(JG)Zt="<remove></remove>"+Zt;else{const rp=BI(Zt,/^[\r\n\t ]+/);Nr=rp&&rp[0]}P7==="application/xhtml+xml"&&V6===nA&&(Zt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Zt+"</body></html>");const Gu=Ft?Ft.createHTML(Zt):Zt;if(V6===nA)try{ks=new se().parseFromString(Gu,P7)}catch{}if(!ks||!ks.documentElement){ks=Zn.createDocument(V6,"template",null);try{ks.documentElement.innerHTML=tq?zt:Gu}catch{}}const Zh=ks.body||ks.documentElement;return Zt&&Nr&&Zh.insertBefore(i.createTextNode(Nr),Zh.childNodes[0]||null),V6===nA?Po.call(ks,tA?"html":"body")[0]:tA?ks.documentElement:Zh},Jq=function(Zt){return Mo.call(Zt.ownerDocument||Zt,Zt,$.SHOW_ELEMENT|$.SHOW_COMMENT|$.SHOW_TEXT|$.SHOW_PROCESSING_INSTRUCTION|$.SHOW_CDATA_SECTION,null)},Qq=function(Zt){return Zt instanceof q&&(typeof Zt.nodeName!="string"||typeof Zt.textContent!="string"||typeof Zt.removeChild!="function"||!(Zt.attributes instanceof W)||typeof Zt.removeAttribute!="function"||typeof Zt.setAttribute!="function"||typeof Zt.namespaceURI!="string"||typeof Zt.insertBefore!="function"||typeof Zt.hasChildNodes!="function")},eK=function(Zt){return typeof A=="function"&&Zt instanceof A},oA=function(Zt,ks,Nr){zo[Zt]&&NE(zo[Zt],Gu=>{Gu.call(r,ks,Nr,U6)})},tK=function(Zt){let ks=null;if(oA("beforeSanitizeElements",Zt,null),Qq(Zt))return Rk(Zt),!0;const Nr=sp(Zt.nodeName);if(oA("uponSanitizeElement",Zt,{tagName:Nr,allowedTags:Qs}),Zt.hasChildNodes()&&!eK(Zt.firstElementChild)&&bg(/<[/\w]/g,Zt.innerHTML)&&bg(/<[/\w]/g,Zt.textContent)||Zt.nodeType===bS.progressingInstruction||B7&&Zt.nodeType===bS.comment&&bg(/<[/\w]/g,Zt.data))return Rk(Zt),!0;if(!Qs[Nr]||Uh[Nr]){if(!Uh[Nr]&&oK(Nr)&&(Vc.tagNameCheck instanceof RegExp&&bg(Vc.tagNameCheck,Nr)||Vc.tagNameCheck instanceof Function&&Vc.tagNameCheck(Nr)))return!1;if(QG&&!z6[Nr]){const Gu=lt(Zt)||Zt.parentNode,Zh=nt(Zt)||Zt.childNodes;if(Zh&&Gu){const rp=Zh.length;for(let vv=rp-1;vv>=0;--vv){const Mk=Ie(Zh[vv],!0);Mk.__removalCount=(Zt.__removalCount||0)+1,Gu.insertBefore(Mk,Fe(Zt))}}}return Rk(Zt),!0}return Zt instanceof R&&!EK(Zt)||(Nr==="noscript"||Nr==="noembed"||Nr==="noframes")&&bg(/<\/no(script|embed|frames)/i,Zt.innerHTML)?(Rk(Zt),!0):(kx&&Zt.nodeType===bS.text&&(ks=Zt.textContent,NE([Mr,rc,Sa],Gu=>{ks=IE(ks,Gu," ")}),Zt.textContent!==ks&&(BE(r.removed,{element:Zt.cloneNode()}),Zt.textContent=ks)),oA("afterSanitizeElements",Zt,null),!1)},nK=function(Zt,ks,Nr){if(Hq&&(ks==="id"||ks==="name")&&(Nr in i||Nr in kK))return!1;if(!(jh&&!Om[ks]&&bg(Yo,ks))){if(!(Wh&&bg(Rn,ks))){if(!ni[ks]||Om[ks]){if(!(oK(Zt)&&(Vc.tagNameCheck instanceof RegExp&&bg(Vc.tagNameCheck,Zt)||Vc.tagNameCheck instanceof Function&&Vc.tagNameCheck(Zt))&&(Vc.attributeNameCheck instanceof RegExp&&bg(Vc.attributeNameCheck,ks)||Vc.attributeNameCheck instanceof Function&&Vc.attributeNameCheck(ks))||ks==="is"&&Vc.allowCustomizedBuiltInElements&&(Vc.tagNameCheck instanceof RegExp&&bg(Vc.tagNameCheck,Nr)||Vc.tagNameCheck instanceof Function&&Vc.tagNameCheck(Nr))))return!1}else if(!eq[ks]){if(!bg(bs,IE(Nr,Vs,""))){if(!((ks==="src"||ks==="xlink:href"||ks==="href")&&Zt!=="script"&&h8(Nr,"data:")===0&&Uq[Zt])){if(!(bv&&!bg(lo,IE(Nr,Vs,"")))){if(Nr)return!1}}}}}}return!0},oK=function(Zt){return Zt!=="annotation-xml"&&BI(Zt,mr)},sK=function(Zt){oA("beforeSanitizeAttributes",Zt,null);const{attributes:ks}=Zt;if(!ks)return;const Nr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ni};let Gu=ks.length;for(;Gu--;){const Zh=ks[Gu],{name:rp,namespaceURI:vv,value:Mk}=Zh,$7=sp(rp);let Yp=rp==="value"?Mk:t3(Mk);const AK=Yp;if(Nr.attrName=$7,Nr.attrValue=Yp,Nr.keepAttr=!0,Nr.forceKeepAttr=void 0,oA("uponSanitizeAttribute",Zt,Nr),Yp=Nr.attrValue,Nr.forceKeepAttr)continue;if(!Nr.keepAttr){L7(rp,Zt);continue}if(!xB&&bg(/\/>/i,Yp)){L7(rp,Zt);continue}kx&&NE([Mr,rc,Sa],aK=>{Yp=IE(Yp,aK," ")});const rK=sp(Zt.nodeName);if(!nK(rK,$7,Yp)){L7(rp,Zt);continue}if(zq&&($7==="id"||$7==="name")&&(L7(rp,Zt),Yp=xK+Yp),B7&&bg(/((--!?|])>)|<\/(style|title)/i,Yp)){L7(rp,Zt);continue}if(Ft&&typeof ge=="object"&&typeof ge.getAttributeType=="function"&&!vv)switch(ge.getAttributeType(rK,$7)){case"TrustedHTML":{Yp=Ft.createHTML(Yp);break}case"TrustedScriptURL":{Yp=Ft.createScriptURL(Yp);break}}if(Yp!==AK)try{vv?Zt.setAttributeNS(vv,rp,Yp):Zt.setAttribute(rp,Yp),Qq(Zt)?Rk(Zt):QO(r.removed)}catch{}}oA("afterSanitizeAttributes",Zt,null)},_K=function na(Zt){let ks=null;const Nr=Jq(Zt);for(oA("beforeSanitizeShadowDOM",Zt,null);ks=Nr.nextNode();)oA("uponSanitizeShadowNode",ks,null),!tK(ks)&&(ks.content instanceof x&&na(ks.content),sK(ks));oA("afterSanitizeShadowDOM",Zt,null)};return r.sanitize=function(na){let Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ks=null,Nr=null,Gu=null,Zh=null;if(tq=!na,tq&&(na="<!-->"),typeof na!="string"&&!eK(na))if(typeof na.toString=="function"){if(na=na.toString(),typeof na!="string")throw Y1("dirty is not a string, aborting")}else throw Y1("toString is not a function");if(!r.isSupported)return na;if(I7||oq(Zt),r.removed=[],typeof na=="string"&&(F7=!1),F7){if(na.nodeName){const Mk=sp(na.nodeName);if(!Qs[Mk]||Uh[Mk])throw Y1("root node is forbidden and cannot be sanitized in-place")}}else if(na instanceof A)ks=Xq("<!---->"),Nr=ks.ownerDocument.importNode(na,!0),Nr.nodeType===bS.element&&Nr.nodeName==="BODY"||Nr.nodeName==="HTML"?ks=Nr:ks.appendChild(Nr);else{if(!$6&&!kx&&!tA&&na.indexOf("<")===-1)return Ft&&BV?Ft.createHTML(na):na;if(ks=Xq(na),!ks)return $6?null:BV?zt:""}ks&&JG&&Rk(ks.firstChild);const rp=Jq(F7?na:ks);for(;Gu=rp.nextNode();)tK(Gu)||(Gu.content instanceof x&&_K(Gu.content),sK(Gu));if(F7)return na;if($6){if(NV)for(Zh=ln.call(ks.ownerDocument);ks.firstChild;)Zh.appendChild(ks.firstChild);else Zh=ks;return(ni.shadowroot||ni.shadowrootmode)&&(Zh=io.call(d,Zh,!0)),Zh}let vv=tA?ks.outerHTML:ks.innerHTML;return tA&&Qs["!doctype"]&&ks.ownerDocument&&ks.ownerDocument.doctype&&ks.ownerDocument.doctype.name&&bg($E,ks.ownerDocument.doctype.name)&&(vv="<!DOCTYPE "+ks.ownerDocument.doctype.name+`>
`+vv),kx&&NE([Mr,rc,Sa],Mk=>{vv=IE(vv,Mk," ")}),Ft&&BV?Ft.createHTML(vv):vv},r.setConfig=function(){let na=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oq(na),I7=!0},r.clearConfig=function(){U6=null,I7=!1},r.isValidAttribute=function(na,Zt,ks){U6||oq({});const Nr=sp(na),Gu=sp(Zt);return nK(Nr,Gu,ks)},r.addHook=function(na,Zt){typeof Zt=="function"&&(zo[na]=zo[na]||[],BE(zo[na],Zt))},r.removeHook=function(na){if(zo[na])return QO(zo[na])},r.removeHooks=function(na){zo[na]&&(zo[na]=[])},r.removeAllHooks=function(){zo={}},r}var TR=X1();const HI=t=>TR().sanitize(t);var Bp=tinymce.util.Tools.resolve("tinymce.util.I18n");const Yw={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},ER="temporary-placeholder",Xw=t=>()=>vn(t,ER).getOr("!not found!"),r3=(t,r)=>{const i=t.toLowerCase();if(Bp.isRtl()){const d=Xr(i,"-rtl");return Ls(r,d)?d:i}else return i},zI=(t,r)=>vn(r,r3(t,r)),a3=(t,r)=>{const i=r();return zI(t,i).getOrThunk(Xw(i))},Ip=(t,r,i)=>{const d=r();return zI(t,d).or(i).getOrThunk(Xw(d))},i3=t=>Bp.isRtl()?Ls(Yw,t):!1,VI=()=>zs("add-focusable",[$i(t=>{mg(t.element,"svg").each(r=>Kn(r,"focusable","false"))})]),c3=(t,r,i,d)=>{var p,x;const w=i3(r)?["tox-icon--flip"]:[],A=vn(i,r3(r,i)).or(d).getOrThunk(Xw(i));return{dom:{tag:t.tag,attributes:(p=t.attributes)!==null&&p!==void 0?p:{},classes:t.classes.concat(w),innerHtml:A},behaviours:Ln([...(x=t.behaviours)!==null&&x!==void 0?x:[],VI()])}},vg=(t,r,i,d=B.none())=>c3(r,t,i(),d),_R=(t,r,i)=>{const d=i(),p=ce(t,x=>Ls(d,r3(x,d)));return c3(r,p.getOr(ER),d,B.none())},UI={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},zE=Ym({name:"Notification",factory:t=>{const r=Ao("notification-text"),i=da({dom:Dh(`<p id=${r}>${HI(t.backstageProvider.translate(t.text))}</p>`),behaviours:Ln([Hs.config({})])}),d=Ae=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Ae}%`}}}),p=Ae=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Ae}%`}}),x=da({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[d(0)]},p(0)],behaviours:Ln([Hs.config({})])}),R={updateProgress:(Ae,Ie)=>{Ae.getSystem().isConnected()&&x.getOpt(Ae).each(mt=>{Hs.set(mt,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[d(Ie)]},p(Ie)])})},updateText:(Ae,Ie)=>{if(Ae.getSystem().isConnected()){const mt=i.get(Ae);Hs.set(mt,[Di(Ie)])}}},$=Ne([t.icon.toArray(),t.level.toArray(),t.level.bind(Ae=>B.from(UI[Ae])).toArray()]),W=da(Hl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[vg("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Ln([Wi.config({}),lc.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:Ae=>{t.onAction(Ae)}})),q=_R($,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),se={dom:{tag:"div",classes:["tox-notification__body"]},components:[i.asSpec()],behaviours:Ln([Hs.config({})])},ge=[q,se];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":r},classes:t.level.map(Ae=>["tox-notification","tox-notification--in",`tox-notification--${Ae}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Ln([Wi.config({}),Ms.config({}),rs.config({mode:"special",onEscape:Ae=>(t.onAction(Ae),B.some(!0))})]),components:ge.concat(t.progress?[x.asSpec()]:[]).concat([W.asSpec()]),apis:R}},configFields:[Cs("level"),dn("progress"),Cs("icon"),dn("onAction"),dn("text"),dn("iconProvider"),dn("backstageProvider")],apis:{updateProgress:(t,r,i)=>{t.updateProgress(r,i)},updateText:(t,r,i)=>{t.updateText(r,i)}}});var jI=(t,r,i,d)=>{const p=r.backstage.shared,x=()=>xt.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),w=()=>{const q=jc(x());return B.some(q)},A=q=>{w().each(se=>{pt(q,ge=>{cr(ge.element,"width"),_e(ge.element)>se.width&&Gn(ge.element,"width",se.width+"px")})})};return{open:(q,se,ge)=>{const Ae=()=>{const nt=Zn=>{Hs.remove(Zn,Ie),mt()},lt=(Zn,Mo)=>{qi(Zn.element).length===0?Ft(Zn,Mo):zt(Zn,Mo)},Ft=(Zn,Mo)=>{cc.hide(Zn),d.clear(),Mo&&t.focus()},zt=(Zn,Mo)=>{Mo&&rs.focusIn(Zn)};d.on(Zn=>{se();const Mo=ge();nt(Zn),lt(Zn,Mo)})},Ie=Hu(zE.sketch({text:q.text,level:Oe(["success","error","warning","warn","info"],q.type)?q.type:void 0,progress:q.progressBar===!0,icon:q.icon,onAction:Ae,iconProvider:p.providers.icons,backstageProvider:p.providers}));if(d.isSet()){const nt=dg(Ie);d.on(lt=>{Hs.append(lt,nt),cc.reposition(lt),wi.refresh(lt),A(lt.components())})}else{const nt=Hu(cc.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:p.getSink,fireDismissalEventInstead:{},...p.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ln([rs.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Hs.config({}),...q1(t)&&!p.header.isPositionedAtTop()?[]:[wi.config({contextual:{lazyContext:()=>B.some(jc(x())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Zn=>p0(t,Zn.element).map(ln=>({bounds:K1(ln),optScrollEnv:B.some({currentScrollTop:ln.element.dom.scrollTop,scrollElmTop:sl(ln.element).top})})).getOrThunk(()=>({bounds:Yt(),optScrollEnv:B.none()}))})]])})),lt=dg(Ie),Ft={maxHeightFunction:vy()},zt={...p.anchors.banner(),overrides:Ft};d.set(nt),i.add(nt),cc.showWithinBounds(nt,lt,{anchor:zt},w)}Ue(q.timeout)&&q.timeout>0&&Q2.setEditorTimeout(t,()=>{Ae()},q.timeout);const mt=()=>{d.on(nt=>{cc.reposition(nt),wi.refresh(nt),A(nt.components())})};return{close:Ae,reposition:mt,text:nt=>{zE.updateText(Ie,nt)},settings:q,getEl:()=>Ie.element.dom,progressBar:{value:nt=>{zE.updateProgress(Ie,nt)}}}},close:q=>{q.close()},getArgs:q=>q.settings}};const l3={setup:(t,r)=>{const i=(p,x)=>{qo(p,nd(),{raw:x})},d=()=>t.getMenu().bind(Cn.getHighlighted);r.on("keydown",p=>{const x=p.which;t.isActive()&&(t.isMenuOpen()?x===13?(d().each(ob),p.preventDefault()):x===40?(d().fold(()=>{t.getMenu().each(Cn.highlightFirst)},w=>{i(w,p)}),p.preventDefault(),p.stopImmediatePropagation()):(x===37||x===38||x===39)&&d().each(w=>{i(w,p),p.preventDefault(),p.stopImmediatePropagation()}):(x===13||x===38||x===40)&&t.cancelIfNecessary())}),r.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!r.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var u3;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(u3||(u3={}));var Fp=u3;const vS="tox-menu-nav__js",Jw="tox-collection__item",Qw="tox-swatch",d3={normal:vS,color:Qw},eC="tox-collection__item--enabled",x8="tox-collection__group-heading",UE="tox-collection__item-icon",AR="tox-collection__item-label",ZI="tox-collection__item-accessory",m3="tox-collection__item-caret",ax="tox-collection__item-checkmark",tC="tox-collection__item--active",WE="tox-collection__item-container",Hb="tox-collection__item-container--column",OR="tox-collection__item-container--row",g3="tox-collection__item-container--align-right",DR="tox-collection__item-container--align-left",f3="tox-collection__item-container--valign-top",J1="tox-collection__item-container--valign-middle",RR="tox-collection__item-container--valign-bottom",Wf=t=>vn(d3,t).getOr(vS),ix=t=>t==="color"?"tox-swatches":"tox-menu",yS=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:ix(t),tieredMenu:"tox-tiered-menu"}),b0=t=>{const r=yS(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:Wf(t)}},GI=(t,r,i)=>{const d=yS(i);return{tag:"div",classes:Ne([[d.menu,`tox-menu-${r}-column`],t?[d.hasIcons]:[]])}},qI=[Qy.parts.items({})],Q1=(t,r,i)=>{const d=yS(i);return{dom:{tag:"div",classes:Ne([[d.tieredMenu]])},markers:b0(i)}},jE=re([gn("type","text"),Cs("data"),Ct("inputAttributes",{}),Ct("inputStyles",{}),Ct("tag","input"),Ct("inputClasses",[]),Ar("onSetValue"),Ea("fromInputValue",rn),Ea("toInputValue",rn),Ct("styles",{}),Ct("eventOrder",{}),Ll("inputBehaviours",[ao,Ms]),Ct("selectOnFocus",!0)]),MR=t=>Ln([Ms.config({onFocus:t.selectOnFocus?r=>{const i=r.element,d=zg(i);t.type!=="range"&&i.dom.setSelectionRange(0,d.length)}:ue})]),KI=t=>({...MR(t),...nc(t.inputBehaviours,[ao.config({store:{mode:"manual",...t.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>t.fromInputValue(zg(r.element)),setValue:(r,i)=>{zg(r.element)!==i&&T1(r.element,t.toInputValue(i))}},onSetValue:t.onSetValue})])}),p3=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),YI=(t,r)=>({uid:t.uid,dom:p3(t),components:[],behaviours:KI(t),eventOrder:t.eventOrder}),Nh=Ym({name:"Input",configFields:jE(),factory:YI}),h3=Ao("refetch-trigger-event"),XI=Ao("redirect-menu-item-interaction"),tf="tox-menu__searcher",xS=t=>zi(t.element,`.${tf}`).bind(r=>t.getSystem().getByDom(r).toOptional()),NR=xS,BR=(t,r)=>{ao.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},wS=t=>{const r=ao.getValue(t),i=t.element.dom.selectionStart,d=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:i,selectionEnd:d}},JI=(t,r)=>{br(r.element,"id").each(i=>Kn(t.element,"aria-activedescendant",i))},CS=t=>{const r=(p,x)=>(x.cut(),B.none()),i=(p,x)=>{const w={interactionEvent:x.event,eventType:x.event.raw.type};return qo(p,XI,w),B.some(!0)},d="searcher-events";return{dom:{tag:"div",classes:[Jw]},components:[Nh.sketch({inputClasses:[tf,"tox-textfield"],inputAttributes:{...t.placeholder.map(p=>({placeholder:t.i18n(p)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ln([zs(d,[on(lg(),p=>{xr(p,h3)}),on(nd(),(p,x)=>{x.event.raw.key==="Escape"&&x.stop()})]),rs.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:i,onEscape:i,onUp:i,onDown:i})]),eventOrder:{keydown:[d,rs.name()]}})]}},Bh="tox-collection--results__js",v0=t=>{var r;return t.dom?{...t,dom:{...t.dom,attributes:{...(r=t.dom.attributes)!==null&&r!==void 0?r:{},id:Ao("aria-item-search-result-id"),"aria-selected":"false"}}}:t},nC=(t,r)=>i=>{const d=Bt(i,r);return $e(d,p=>({dom:t,components:p}))},IR=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Qy.parts.items({preprocess:t!=="auto"?nC({tag:"div",classes:["tox-swatches__row"]},t):rn})]}]}),b3=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Qy.parts.items({preprocess:nC({tag:"div",classes:["tox-collection__group"]},t)})]}),v3=(t,r)=>{const i=[];let d=[];return pt(t,(p,x)=>{r(p,x)?(d.length>0&&i.push(d),d=[],(Ls(p.dom,"innerHtml")||p.components&&p.components.length>0)&&d.push(p)):d.push(p)}),d.length>0&&i.push(d),$e(i,p=>({dom:{tag:"div",classes:["tox-collection__group"]},components:p}))},y3=(t,r,i)=>Qy.parts.items({preprocess:d=>{const p=$e(d,i);return t!=="auto"&&t>1?nC({tag:"div",classes:["tox-collection__group"]},t)(p):v3(p,(x,w)=>r[w].type==="separator")}}),x3=(t,r,i=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[y3(t,r,rn)]}),QI=(t,r,i=!0)=>{const d=Ao("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Bh].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:d}},components:[y3(t,r,v0)]}},eF=(t,r,i)=>{const d=Ao("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[CS({i18n:Bp.translate,placeholder:i.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Bh],attributes:{id:d}},components:[y3(t,r,v0)]}]}},tF=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Qy.parts.items({preprocess:i=>v3(i,(d,p)=>t[p].type==="separator")})]}),w3=t=>ft(t,r=>"icon"in r&&r.icon!==void 0),ev=t=>(console.error(Uo(t)),console.log(t),B.none()),nF=(t,r,i,d,p)=>{const x=tF(i);return{value:t,dom:x.dom,components:x.components,items:i}},wm=(t,r,i,d,p)=>{const x=()=>p.menuType!=="searchable"?x3(d,i):p.searchMode.searchMode==="search-with-field"?eF(d,i,p.searchMode):QI(d,i);if(p.menuType==="color"){const w=IR(d);return{value:t,dom:w.dom,components:w.components,items:i}}else if(p.menuType==="normal"&&d==="auto"){const w=x3(d,i);return{value:t,dom:w.dom,components:w.components,items:i}}else if(p.menuType==="normal"||p.menuType==="searchable"){const w=x();return{value:t,dom:w.dom,components:w.components,items:i}}else if(p.menuType==="listpreview"&&d!=="auto"){const w=b3(d);return{value:t,dom:w.dom,components:w.components,items:i}}else return{value:t,dom:GI(r,d,p.menuType),components:qI,items:i}},ul=qc("type"),oC=qc("name"),FR=qc("label"),tv=qc("text"),PR=qc("title"),LR=qc("icon"),sC=qc("value"),C3=ed("fetch"),$R=ed("getSubmenuItems"),SS=ed("onAction"),w8=ed("onItemAction"),cx=Ea("onSetup",()=>ue),HR=ri("name"),lx=ri("text"),oF=ri("role"),nf=ri("icon"),kS=ri("tooltip"),zR=ri("label"),ZE=ri("shortcut"),S3=Mg("select"),TS=Ra("active",!1),k3=Ra("borderless",!1),jf=Ra("enabled",!0),T3=Ra("primary",!1),sF=t=>Ct("columns",t),VR=Ct("meta",{}),y0=Ea("onAction",ue),ES=t=>gn("type",t),rC=t=>Gc("name","name",yr(()=>Ao(`${t}-name`)),so),rF=t=>Gc("value","value",yr(()=>Ao(`${t}-value`)),Ud()),E3=os([ul,lx]),aF=t=>Li("separatormenuitem",E3,t),iF=os([ES("autocompleteitem"),TS,jf,VR,sC,lx,nf]),yg=t=>Li("Autocompleter.Separator",E3,t),of=t=>Li("Autocompleter.Item",iF,t),_S=[jf,kS,nf,lx,cx,gn("context","mode:design")],UR=os([ul,SS,ZE].concat(_S)),AS=t=>Li("toolbarbutton",UR,t),aC=[TS].concat(_S),cF=os(aC.concat([ul,SS,ZE])),OS=t=>Li("ToggleButton",cF,t),iC=[Ea("predicate",$t),Kl("scope","node",["node","editor"]),Kl("position","selection",["node","selection","line"])],WR=_S.concat([ES("contextformbutton"),gn("align","end"),T3,SS,aa("original",rn)]),_3=aC.concat([ES("contextformbutton"),gn("align","end"),T3,SS,aa("original",rn)]),DS=_S.concat([ES("contextformbutton")]),C8=aC.concat([ES("contextformtogglebutton")]),S8=fc("type",{contextformbutton:WR,contextformtogglebutton:_3}),ji=[zR,au("commands",S8),ku("launch",fc("type",{contextformbutton:DS,contextformtogglebutton:C8})),Ea("onInput",ue),Ea("onSetup",ue)],sf=[...iC,...ji,Kc("type",["contextform"]),Ea("initValue",re("")),ri("placeholder")],GE=[...iC,...ji,Kc("type",["contextsliderform"]),Ea("initValue",re(0)),Ea("min",re(0)),Ea("max",re(100))],Zf=[...iC,...ji,Kc("type",["contextsizeinputform"]),Ea("initValue",re({width:"",height:""}))],jR=fc("type",{contextform:sf,contextsliderform:GE,contextsizeinputform:Zf}),Ci=t=>Li("ContextForm",jR,t),ux=os([ES("contexttoolbar"),ia("items",Dg([so,t1([ri("name"),ri("label"),au("items",so)])]))].concat(iC)),x0=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),RS=t=>({...t,items:Tt(t.items)?t.items:$e(t.items,x0)}),A3=t=>Li("ContextToolbar",ux,t),qE=[ul,qc("src"),ri("alt"),D("classes",[],so)],KE=os(qE),lF=[ul,tv,HR,D("classes",["tox-collection__item-label"],so)],MS=os(lF),YE=wc(()=>Rg("type",{cardimage:KE,cardtext:MS,cardcontainer:NS})),NS=os([ul,gn("direction","horizontal"),gn("align","left"),gn("valign","middle"),au("items",YE)]),zb=[jf,lx,oF,ZE,rF("menuitem"),VR,gn("context","mode:design")],Gf=os([ul,zR,au("items",YE),cx,y0].concat(zb)),BS=t=>Li("cardmenuitem",Gf,t),XE=os([ul,TS,nf].concat(zb)),uF=t=>Li("choicemenuitem",XE,t),dF=[ul,qc("fancytype"),y0],mF=[Ct("initData",{})].concat(dF),k8=[Mg("select"),H("initData",{},[Ra("allowCustomColors",!0),gn("storageKey","default"),um("colors",Ud())])].concat(dF),T8=fc("fancytype",{inserttable:mF,colorswatch:k8}),IS=t=>Li("fancymenuitem",T8,t),E8=os([ul,cx,y0,nf].concat(zb)),_8=t=>Li("menuitem",E8,t),gF=os([ul,$R,cx,nf].concat(zb)),A8=t=>Li("nestedmenuitem",gF,t),fF=os([ul,nf,TS,cx,SS].concat(zb)),JE=t=>Li("togglemenuitem",fF,t),ZR=(t,r,i)=>{const d=qd(t.element,"."+i);if(d.length>0){const p=De(d,x=>{const w=x.dom.getBoundingClientRect().top,A=d[0].dom.getBoundingClientRect().top;return Math.abs(w-A)>r}).getOr(d.length);return B.some({numColumns:p,numRows:Math.ceil(d.length/p)})}else return B.none()},pF=(t,r)=>Ln([zs(t,r)]),cC={namedEvents:pF,unnamedEvents:t=>pF(Ao("unnamed-events"),t)},hF=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),qf={item:t=>Wo.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Wo.config({disabled:t}),splitButton:t=>Wo.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Wo.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},QE=(t,r)=>{const i=t.getApi(r);return d=>{d(i)}},Pp=(t,r)=>$i(i=>{Vt(t.onBeforeSetup)&&t.onBeforeSetup(i),QE(t,i)(p=>{const x=t.onSetup(p);Vt(x)&&r.set(x)})}),Wu=(t,r)=>Cd(i=>QE(t,i)(r.get())),bF="silver.uistate",dx="setDisabled",vF="setEnabled",GR="init",qR=["switchmode",GR],FS=(t,r)=>{const i=t.mainUi.outerContainer,d=[t.mainUi.mothership,...t.uiMotherships];r===dx&&pt(d,p=>{p.broadcastOn([Ch()],{target:i.element})}),pt(d,p=>{p.broadcastOn([bF],r)})},O3=(t,r)=>{t.on("init SwitchMode",i=>{FS(r,i.type)}),t.on("DisabledStateChange",i=>{if(!i.isDefaultPrevented()){const d=i.state?dx:GR;FS(r,d),i.state||t.nodeChanged()}}),t.on("NodeChange",i=>{const d=t.ui.isEnabled()?i.type:dx;FS(r,d)}),$O(t)&&t.mode.set("readonly")},dl=t=>qm.config({channels:{[bF]:{onReceive:(r,i)=>{if(i===dx||i===vF){Wo.set(r,i===dx);return}const{contextType:d,shouldDisable:p}=t();d==="mode"&&!Oe(qR,i)||Wo.set(r,p)}}}}),I8=(t,r)=>gp((i,d)=>{QE(t,i)(t.onAction),!t.triggersSubmenu&&r===Fp.CLOSE_ON_EXECUTE&&(i.getSystem().isConnected()&&xr(i,$c()),d.stop())}),F8={[cu()]:["disabling","alloy.base.behaviour","toggling","item-events"]},PS=hi,LS=(t,r,i,d)=>{const p=wo(ue);return{type:"item",dom:r.dom,components:PS(r.optComponents),data:t.data,eventOrder:F8,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ln([zs("item-events",[I8(t,i),Pp(t,p),Wu(t,p)]),qf.item(()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable),dl(()=>d.checkUiComponentContext(t.context)),Hs.config({})].concat(t.itemBehaviours))}},$S=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),HS=t=>{const r=Oh.os.isMacOS()||Oh.os.isiOS(),p=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},x=t.split("+"),w=$e(x,A=>{const R=A.toLowerCase().trim();return Ls(p,R)?p[R]:A});return r?w.join(""):w.join("+")},e_=(t,r,i=[UE])=>vg(t,{tag:"div",classes:i},r),D3=t=>({dom:{tag:"div",classes:[AR]},components:[Di(Bp.translate(t))]}),R3=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),P8=(t,r)=>({dom:{tag:"div",classes:[AR]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Di(Bp.translate(r))]}]}),L8=t=>({dom:{tag:"div",classes:[ZI]},components:[Di(HS(t))]}),KR=t=>e_("checkmark",t,[ax]),zS=t=>e_("chevron-right",t,[m3]),YR=t=>e_("chevron-down",t,[m3]),XR=(t,r)=>{const i=t.direction==="vertical"?Hb:OR,d=t.align==="left"?DR:g3;return{dom:{tag:"div",classes:[WE,i,d,(()=>{switch(t.valign){case"top":return f3;case"middle":return J1;case"bottom":return RR}})()]},components:r}},yF=(t,r,i)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:i.getOr("")}}}),pu=(t,r,i)=>{const d="custom",p="remove",x=t.value,w=t.iconContent.map($=>Ip($,r.icons,i)),A=t.ariaLabel.map($=>({"aria-label":r.translate($),"data-mce-name":$})).getOr({});return{dom:(()=>{const $=Qw,W=w.getOr(""),q={tag:"div",attributes:A,classes:[$]};return x===d?{...q,tag:"button",classes:[...q.classes,"tox-swatches__picker-btn"],innerHtml:W}:x===p?{...q,classes:[...q.classes,"tox-swatch--remove"],innerHtml:W}:zn(x)?{...q,attributes:{...q.attributes,"data-mce-color":x},styles:{"background-color":x},innerHtml:W}:q})(),optComponents:[]}},Ih=t=>{const r=t.map(i=>({attributes:{id:Ao("menu-item"),"aria-label":Bp.translate(i)}})).getOr({});return{tag:"div",classes:[vS,Jw],...r}},JR=(t,r,i,d)=>{const p={tag:"div",classes:[UE]},x=se=>vg(se,p,r.icons,d),w=()=>B.some({dom:p}),A=i?t.iconContent.map(x).orThunk(w):B.none(),R=t.checkMark,$=B.from(t.meta).fold(()=>D3,se=>Ls(se,"style")?qn(P8,se.style):D3),W=t.htmlContent.fold(()=>t.textContent.map($),se=>B.some(R3(se,[AR])));return{dom:Ih(t.ariaLabel),optComponents:[A,W,t.shortcutContent.map(L8),R,t.caret]}},lC=(t,r,i,d=B.none())=>t.presets==="color"?pu(t,r,d):JR(t,r,i,d),M3=(t,r,i)=>vn(t,"tooltipWorker").map(d=>[lc.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:p=>({type:"submenu",item:p,overrides:{maxHeightFunction:vy}}),mode:"follow-highlight",onShow:(p,x)=>{d(w=>{lc.setComponents(p,[QC({element:xt.fromDom(w)})])})}})]).getOrThunk(()=>i.map(d=>[lc.config({...r.providers.tooltips.getConfig({tooltipText:d}),mode:"follow-highlight"})]).getOr([])),QR=t=>yE.DOM.encode(t),uC=(t,r)=>{const i=Bp.translate(t),d=QR(i);if(r.length>0){const p=new RegExp(hF(r),"gi");return d.replace(p,x=>`<span class="tox-autocompleter-highlight">${x}</span>`)}else return d},xF=(t,r,i,d,p,x,w,A=!0)=>{const R=lC({presets:d,textContent:B.none(),htmlContent:i?t.text.map(W=>uC(W,r)):B.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:B.none(),checkMark:B.none(),caret:B.none(),value:t.value},w.providers,A,t.icon),$=t.text.filter(W=>!i&&W!=="");return LS({context:"mode:design",data:$S(t),enabled:t.enabled,getApi:re({}),onAction:W=>p(t.value,t.meta),onSetup:re(ue),triggersSubmenu:!1,itemBehaviours:M3(t,w,$)},R,x,w.providers)},Fh=(t,r)=>$e(t,i=>{switch(i.type){case"cardcontainer":return XR(i,Fh(i.items,r));case"cardimage":return yF(i.src,i.classes,i.alt);case"cardtext":const p=i.name.exists(x=>Oe(r.cardText.highlightOn,x))?B.from(r.cardText.matchText).getOr(""):"";return R3(uC(i.text,p),i.classes)}}),$8=(t,r,i,d)=>{const p=w=>({isEnabled:()=>!Wo.isDisabled(w),setEnabled:A=>{Wo.set(w,!A),pt(qd(w.element,"*"),R=>{w.getSystem().getByDom(R).each($=>{$.hasConfigured(Wo)&&Wo.set($,!A)})})}}),x={dom:Ih(t.label),optComponents:[B.some({dom:{tag:"div",classes:[WE,OR]},components:Fh(t.items,d)})]};return LS({context:"mode:design",data:$S({text:B.none(),...t}),enabled:t.enabled,getApi:p,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:B.from(d.itemBehaviours).getOr([])},x,r,i.providers)},H8=(t,r,i,d,p,x,w,A=!0)=>{const R=q=>({setActive:se=>{dr.set(q,se)},isActive:()=>dr.isOn(q),isEnabled:()=>!Wo.isDisabled(q),setEnabled:se=>Wo.set(q,!se)}),$=lC({presets:i,textContent:r?t.text:B.none(),htmlContent:B.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:B.none(),checkMark:r?B.some(KR(w.icons)):B.none(),caret:B.none(),value:t.value},w,A),W=t.text.filter(re(!r)).map(q=>lc.config(w.tooltips.getConfig({tooltipText:w.translate(q)})));return mi(LS({context:t.context,data:$S(t),enabled:t.enabled,getApi:R,onAction:q=>d(t.value),onSetup:q=>(q.setActive(p),ue),triggersSubmenu:!1,itemBehaviours:[...W.toArray()]},$,x,w),{toggling:{toggleClass:eC,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},N3=Tw(NO(),cR()),B3=t=>({value:tM(t)}),eM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,I3=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Vb=t=>eM.test(t)||I3.test(t),tM=t=>yt(t,"#").toUpperCase(),wF=t=>Vb(t)?B.some({value:tM(t)}):B.none(),F3=t=>({value:t.value.replace(eM,(i,d,p,x)=>d+d+p+p+x+x)}),nM=t=>{const r=F3(t),i=I3.exec(r.value);return i===null?["FFFFFF","FF","FF","FF"]:i},P3=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},VS=t=>{const r=P3(t.red)+P3(t.green)+P3(t.blue);return B3(r)},oM=Math.min,CF=Math.max,L3=Math.round,SF=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,kF=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,mx=(t,r,i,d)=>({red:t,green:r,blue:i,alpha:d}),sM=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},$3=t=>{let r,i,d;const p=(t.hue||0)%360;let x=t.saturation/100,w=t.value/100;if(x=CF(0,oM(x,1)),w=CF(0,oM(w,1)),x===0)return r=i=d=L3(255*w),mx(r,i,d,1);const A=p/60,R=w*x,$=R*(1-Math.abs(A%2-1)),W=w-R;switch(Math.floor(A)){case 0:r=R,i=$,d=0;break;case 1:r=$,i=R,d=0;break;case 2:r=0,i=R,d=$;break;case 3:r=0,i=$,d=R;break;case 4:r=$,i=0,d=R;break;case 5:r=R,i=0,d=$;break;default:r=i=d=0}return r=L3(255*(r+W)),i=L3(255*(i+W)),d=L3(255*(d+W)),mx(r,i,d,1)},US=t=>{const r=nM(t),i=parseInt(r[1],16),d=parseInt(r[2],16),p=parseInt(r[3],16);return mx(i,d,p,1)},t_=(t,r,i,d)=>{const p=parseInt(t,10),x=parseInt(r,10),w=parseInt(i,10),A=parseFloat(d);return mx(p,x,w,A)},n_=t=>{const r=SF.exec(t);if(r!==null)return B.some(t_(r[1],r[2],r[3],"1"));const i=kF.exec(t);return i!==null?B.some(t_(i[1],i[2],i[3],i[4])):B.none()},TF=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Nd=mx(255,0,0,1),z8=t=>{t.dispatch("SkinLoaded")},V8=(t,r)=>{t.dispatch("SkinLoadError",r)},U8=t=>{t.dispatch("ResizeEditor")},rM=(t,r)=>{t.dispatch("ResizeContent",r)},WS=(t,r)=>{t.dispatch("ScrollContent",r)},aM=(t,r)=>{t.dispatch("TextColorChange",r)},H3=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},iM=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),EF=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},W8=(t,r)=>{t.dispatch("StylesTextUpdate",r)},Ub=(t,r)=>{t.dispatch("AlignTextUpdate",r)},_F=(t,r)=>{t.dispatch("FontSizeTextUpdate",r)},j8=(t,r)=>{t.dispatch("FontSizeInputTextUpdate",r)},cM=(t,r)=>{t.dispatch("BlocksTextUpdate",r)},AF=(t,r)=>{t.dispatch("FontFamilyTextUpdate",r)},z3=t=>{t.dispatch("ToggleSidebar")},OF=t=>{t.dispatch("ToggleView")},lM=t=>{t.dispatch("ContextToolbarClose")},DF=t=>{t.dispatch("ContextFormSlideBack")},dC=(t,r)=>()=>{t(),r()},Bd=t=>mC(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),o_=(t,r)=>i=>{const d=mc(),p=()=>{i.setActive(t.formatter.match(r));const x=t.formatter.formatChanged(r,i.setActive);d.set(x)};return t.initialized?p():t.once("init",p),()=>{t.off("init",p),d.clear()}},s_=(t,r)=>i=>{const d=Bd(t)(i),p=o_(t,r)(i);return()=>{d(),p()}},mC=(t,r,i)=>d=>{const p=()=>i(d),x=()=>{i(d),t.on(r,p)};return t.initialized?x():t.once("init",x),()=>{t.off("init",x),t.off(r,p)}},r_=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},Xd=(t,r)=>()=>t.execCommand(r);var Wb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const jS={},w0=(t,r=10)=>{const i=Wb.getItem(t),d=Tt(i)?JSON.parse(i):[],x=($=>r-$.length<0?$.slice(0,r):$)(d),w=$=>{Se(x,$).each(A),x.unshift($),x.length>r&&x.pop(),Wb.setItem(t,JSON.stringify(x))},A=$=>{x.splice($,1)};return{add:w,state:()=>x.slice(0)}},RF=t=>vn(jS,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,i=Wb.getItem(r);if(kn(i)){const p=Wb.getItem("tinymce-custom-colors");Wb.setItem(r,zn(p)?p:"[]")}const d=w0(r,10);return jS[t]=d,d}),Z8=t=>$e(RF(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),a_=(t,r)=>{RF(t).add(r)},ZS=(t,r,i)=>({hue:t,saturation:r,value:i}),V3=t=>{let r=0,i=0,d=0;const p=t.red/255,x=t.green/255,w=t.blue/255,A=Math.min(p,Math.min(x,w)),R=Math.max(p,Math.max(x,w));if(A===R)return d=A,ZS(0,0,d*100);const $=p===A?x-w:w===A?p-x:w-p;return r=p===A?3:w===A?1:5,r=60*(r-$/(R-A)),i=(R-A)/R,d=R,ZS(Math.round(r),Math.round(i*100),Math.round(d*100))},MF=t=>V3(US(t)),NF=t=>VS($3(t)),G8=t=>wF(t).orThunk(()=>n_(t).map(VS)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const i=r.getContext("2d");i.clearRect(0,0,r.width,r.height),i.fillStyle="#FFFFFF",i.fillStyle=t,i.fillRect(0,0,1,1);const d=i.getImageData(0,0,1,1).data,p=d[0],x=d[1],w=d[2],A=d[3];return VS(mx(p,x,w,A))}),i_="forecolor",c_="hilitecolor",uM=5,BF=t=>l_(t.map((r,i)=>i%2===0?"#"+G8(r).value:r)),l_=t=>{const r=[];for(let i=0;i<t.length;i+=2)r.push({text:t[i+1],value:t[i],icon:"checkmark",type:"choiceitem"});return r},Lp=t=>r=>r.options.get(t),U3="#000000",q8=t=>{const r=t.options.register,i=x=>at(x,Tt)?{value:BF(x),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=x=>at(x,Tt)?{value:l_(x),valid:!0}:{valid:!1,message:"Must be an array of strings."},p=x=>Ue(x)&&x>0?{value:x,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:i,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_raw",{processor:d}),r("color_map_background",{processor:i}),r("color_map_foreground",{processor:i}),r("color_cols",{processor:p,default:u_(t)}),r("color_cols_foreground",{processor:p,default:dM(t,i_)}),r("color_cols_background",{processor:p,default:dM(t,c_)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:U3}),r("color_default_background",{processor:"string",default:U3})},$p=(t,r)=>r===i_&&t.options.isSet("color_map_foreground")?Lp("color_map_foreground")(t):r===c_&&t.options.isSet("color_map_background")?Lp("color_map_background")(t):t.options.isSet("color_map_raw")?Lp("color_map_raw")(t):Lp("color_map")(t),u_=(t,r="default")=>Math.max(uM,Math.ceil(Math.sqrt($p(t,r).length))),dM=(t,r)=>{const i=Lp("color_cols")(t),d=u_(t,r);return i===u_(t)?d:i},d_=(t,r="default")=>Math.round(r===i_?Lp("color_cols_foreground")(t):r===c_?Lp("color_cols_background")(t):Lp("color_cols")(t)),hu=Lp("custom_colors"),K8=Lp("color_default_foreground"),Y8=Lp("color_default_background"),IF="rgba(0, 0, 0, 0)",FF=t=>n_(t).exists(r=>r.alpha!==0),X8=t=>Um(t,r=>{if(er(r)){const i=bn(r,"background-color");return Lo(FF(i),i)}else return B.none()}).getOr(IF),PF=(t,r)=>{const i=xt.fromDom(t.selection.getStart()),d=r==="hilitecolor"?X8(i):bn(i,"color");return n_(d).map(p=>"#"+VS(p).value)},GS=(t,r,i)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:i}),t.nodeChanged()})},J8=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},Q8=t=>{t.addCommand("mceApplyTextcolor",(r,i)=>{GS(t,r,i)}),t.addCommand("mceRemoveTextcolor",r=>{J8(t,r)})},mM=t=>{const r="choiceitem",i={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[i,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[i]},W3=(t,r,i,d)=>{i==="custom"?UF(t)(x=>{x.each(w=>{a_(r,w),t.execCommand("mceApplyTextcolor",r,w),d(w)})},PF(t,r).getOr(U3)):i==="remove"?(d(""),t.execCommand("mceRemoveTextcolor",r)):(d(i),t.execCommand("mceApplyTextcolor",r,i))},qS=(t,r,i)=>t.concat(Z8(r).concat(mM(i))),LF=(t,r,i)=>d=>{d(qS(t,r,i))},gM=(t,r,i)=>{const d=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(d,i)},$F=(t,r)=>{t.setTooltip(r)},HF=(t,r)=>i=>{const d=PF(t,r);return Dr(d,i.toUpperCase())},fM=(t,r,i)=>{if(Pe(i))return r==="forecolor"?"Text color":"Background color";const d=r==="forecolor"?"Text color {0}":"Background color {0}",p=qS($p(t,r),r,!1),x=ce(p,w=>w.value===i).getOr({text:""}).text;return t.translate([d,t.translate(x)])},zF=(t,r,i,d)=>{t.ui.registry.addSplitButton(r,{tooltip:fM(t,i,d.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:HF(t,i),columns:d_(t,i),fetch:LF($p(t,i),i,hu(t)),onAction:p=>{W3(t,i,d.get(),ue)},onItemAction:(p,x)=>{W3(t,i,x,w=>{d.set(w),aM(t,{name:r,color:w})})},onSetup:p=>{gM(p,r,d.get());const x=w=>{w.name===r&&(gM(p,w.name,w.color),$F(p,fM(t,i,w.color)))};return t.on("TextColorChange",x),dC(Bd(t)(p),()=>{t.off("TextColorChange",x)})}})},VF=(t,r,i,d,p)=>{t.ui.registry.addNestedMenuItem(r,{text:d,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:x=>($F(x,fM(t,i,p.get())),gM(x,r,p.get()),Bd(t)(x)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:HF(t,i),initData:{storageKey:i},onAction:x=>{W3(t,i,x.value,w=>{p.set(w),aM(t,{name:r,color:w})})}}]})},UF=t=>(r,i)=>{let d=!1;const p=A=>{const $=A.getData().colorpicker;d?(r(B.from($)),A.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",$]))},x=(A,R)=>{R.name==="hex-valid"&&(d=R.value)},w={colorpicker:i};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:w,onAction:x,onSubmit:p,onClose:ue,onCancel:()=>{r(B.none())}})},eL=t=>{Q8(t);const r=K8(t),i=Y8(t),d=wo(r),p=wo(i);zF(t,"forecolor","forecolor",d),zF(t,"backcolor","hilitecolor",p),VF(t,"forecolor","forecolor","Text color",d),VF(t,"backcolor","hilitecolor","Background color",p)},pM=(t,r,i,d,p,x,w,A)=>{const R=w3(r),W=Ni(r,i,d,p!=="color"?"normal":"color",x,w,A);return wm(t,R,W,d,{menuType:p})},Ni=(t,r,i,d,p,x,w)=>hi($e(t,A=>A.type==="choiceitem"?uF(A).fold(ev,R=>B.some(H8(R,i===1,d,r,x(R.value),p,w,w3(t)))):B.none())),m_=(t,r)=>{const i=b0(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+i.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:p=>r==="color"?zi(p.element,"[aria-checked=true]"):B.none()}},hM=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${Qw}`:`.${Jw}`}},bM=(t,r)=>{const i=WF(t,r),d=r.colorinput.getColorCols(t.initData.storageKey),p="color",w={...pM(Ao("menu-value"),i,A=>{t.onAction({value:A})},d,p,Fp.CLOSE_ON_EXECUTE,t.select.getOr($t),r.shared.providers),markers:b0(p),movement:m_(d,p),showMenuRole:!1};return{type:"widget",data:{value:Ao("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[N3.widget(Qy.sketch(w))]}},WF=(t,r)=>{const i=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>qS(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,i),d=>d.concat(mM(i)))},KS=Ao("cell-over"),jF=Ao("cell-execute"),vM=t=>(r,i)=>t.shared.providers.translate(["{0} columns, {1} rows",i,r]),tL=(t,r,i)=>{const d=w=>qo(w,KS,{row:t,col:r}),p=w=>qo(w,jF,{row:t,col:r}),x=(w,A)=>{A.stop(),p(w)};return Hu({dom:{tag:"div",attributes:{role:"button","aria-label":i}},behaviours:Ln([zs("insert-table-picker-cell",[on(td(),Ms.focus),on(cu(),p),on(Ev(),x),on(Ox(),x)]),dr.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ms.config({onFocus:d})])})},ZF=(t,r,i)=>{const d=[];for(let p=0;p<r;p++){const x=[];for(let w=0;w<i;w++){const A=t(p+1,w+1);x.push(tL(p,w,A))}d.push(x)}return d},GF=(t,r,i,d,p)=>{for(let x=0;x<d;x++)for(let w=0;w<p;w++)dr.set(t[x][w],x<=r&&w<=i)},nL=t=>oe(t,r=>$e(r,dg)),qF=(t,r)=>Di(`${r}x${t}`),KF={inserttable:(t,r)=>{const p=vM(r),x=ZF(p,10,10),w=qF(0,0),A=da({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[w],behaviours:Ln([Hs.config({})])});return{type:"widget",data:{value:Ao("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[N3.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:nL(x).concat(A.asSpec()),behaviours:Ln([zs("insert-table-picker",[$i(R=>{Hs.set(A.get(R),[w])}),LC(KS,(R,$,W)=>{const{row:q,col:se}=W.event;GF(x,q,se,10,10),Hs.set(A.get(R),[qF(q+1,se+1)])}),LC(jF,(R,$,W)=>{const{row:q,col:se}=W.event;xr(R,$c()),t.onAction({numRows:q+1,numColumns:se+1})})]),rs.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:bM},YS=(t,r)=>vn(KF,t.fancytype).map(i=>i(t,r)),XS=(t,r,i,d=!0,p=!1)=>{const x=p?YR(i.icons):zS(i.icons),w=R=>({isEnabled:()=>!Wo.isDisabled(R),setEnabled:$=>Wo.set(R,!$),setIconFill:($,W)=>{zi(R.element,`svg path[class="${$}"], rect[class="${$}"]`).each(q=>{Kn(q,"fill",W)})},setTooltip:$=>{const W=i.translate($);Kn(R.element,"aria-label",W)}}),A=lC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:B.none(),ariaLabel:t.text,caret:B.some(x),checkMark:B.none(),shortcutContent:t.shortcut},i,d);return LS({context:t.context,data:$S(t),getApi:w,enabled:t.enabled,onAction:ue,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},A,r,i)},JS=(t,r,i,d=!0)=>{const p=w=>({isEnabled:()=>!Wo.isDisabled(w),setEnabled:A=>Wo.set(w,!A)}),x=lC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:B.none(),ariaLabel:t.text,caret:B.none(),checkMark:B.none(),shortcutContent:t.shortcut},i,d);return LS({context:t.context,data:$S(t),getApi:p,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},x,r,i)},j3=t=>({type:"separator",dom:{tag:"div",classes:[Jw,x8]},components:t.text.map(Di).toArray()}),YF=(t,r,i,d=!0)=>{const p=w=>({setActive:A=>{dr.set(w,A)},isActive:()=>dr.isOn(w),isEnabled:()=>!Wo.isDisabled(w),setEnabled:A=>Wo.set(w,!A)}),x=lC({iconContent:t.icon,textContent:t.text,htmlContent:B.none(),ariaLabel:t.text,checkMark:B.some(KR(i.icons)),caret:B.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},i,d);return mi(LS({context:t.context,data:$S(t),enabled:t.enabled,getApi:p,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},x,r,i),{toggling:{toggleClass:eC,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},XF=xF,Z3=j3,JF=JS,QF=XS,e5=YF,yM=YS,t5=$8;var sL=Object.freeze({__proto__:null,getCoupled:(t,r,i,d)=>i.getOrCreate(t,r,d),getExistingCoupled:(t,r,i,d)=>i.getExisting(t,r,d)}),o5=[ia("others",rg(Ws.value,Ud()))],xM=Object.freeze({__proto__:null,init:()=>{const t={},r=(x,w)=>{if(nn(x.others).length===0)throw new Error("Cannot find any known coupled components");return vn(t,w)},i=(x,w,A)=>r(w,A).getOrThunk(()=>{const $=vn(w.others,A).getOrDie("No information found for coupled component: "+A)(x),W=x.getSystem().build($);return t[A]=W,W}),d=(x,w,A)=>r(w,A).orThunk(()=>(vn(w.others,A).getOrDie("No information found for coupled component: "+A),B.none())),p=re({});return lu({readState:p,getExisting:d,getOrCreate:i})}});const el=xl({fields:o5,name:"coupling",apis:sL,state:xM}),wM=t=>{let r=B.none(),i=[];const d=$=>wM(W=>{p(q=>{W($(q))})}),p=$=>{w()?R($):i.push($)},x=$=>{w()||(r=B.some($),A(i),i=[])},w=()=>r.isSome(),A=$=>{pt($,R)},R=$=>{r.each(W=>{setTimeout(()=>{$(W)},0)})};return t(x),{get:p,map:d,isReady:w}},s5={nu:wM,pure:t=>wM(r=>{r(t)})},r5=t=>{setTimeout(()=>{throw t},0)},C0=t=>{const r=R=>{t().then(R,r5)};return{map:R=>C0(()=>t().then(R)),bind:R=>C0(()=>t().then($=>R($).toPromise())),anonBind:R=>C0(()=>t().then(()=>R.toPromise())),toLazy:()=>s5.nu(r),toCached:()=>{let R=null;return C0(()=>(R===null&&(R=t()),R))},toPromise:t,get:r}},Id={nu:t=>C0(()=>new Promise(t)),pure:t=>C0(()=>Promise.resolve(t))},SM=re("sink"),G3=re(ym({name:SM(),overrides:re({dom:{tag:"div"},behaviours:Ln([gu.config({useFixed:Kt})]),events:ya([Mv(nd()),Mv(_c()),Mv(Ev())])})})),kM=(t,r)=>{const i=t.getHotspot(r).getOr(r),d="hotspot",p=t.getAnchorOverrides();return t.layouts.fold(()=>({type:d,hotspot:i,overrides:p}),x=>({type:d,hotspot:i,overrides:p,layouts:x}))},a5=(t,r,i)=>{const d=t.fetch;return d(i).map(r)},i5=(t,r,i,d,p,x,w)=>{const A=a5(t,r,d),R=EM(d,t);return A.map($=>$.bind(W=>{const q=W.menus[W.primary];return B.from(q).each(se=>{t.listRole.each(ge=>{se.role=ge})}),B.from(Fb.sketch({...x.menu(),uid:$g(""),data:W,highlightOnOpen:w,onOpenMenu:(se,ge)=>{const Ae=R().getOrDie();gu.position(Ae,ge,{anchor:i}),qr.decloak(p)},onOpenSubmenu:(se,ge,Ae)=>{const Ie=R().getOrDie();gu.position(Ie,Ae,{anchor:{type:"submenu",item:ge}}),qr.decloak(p)},onRepositionMenu:(se,ge,Ae)=>{const Ie=R().getOrDie();gu.position(Ie,ge,{anchor:i}),pt(Ae,mt=>{gu.position(Ie,mt.triggeredMenu,{anchor:{type:"submenu",item:mt.triggeringItem}})})},onEscape:()=>(Ms.focus(d),qr.close(p),B.some(!0))}))}))},q3=(t,r,i,d,p,x,w)=>{const A=kM(t,i);return i5(t,r,A,i,d,p,w).map($=>($.fold(()=>{qr.isOpen(d)&&qr.close(d)},W=>{qr.cloak(d),qr.open(d,W),x(d)}),d))},aL=(t,r,i,d,p,x,w)=>(qr.close(d),Id.pure(d)),TM=(t,r,i,d,p,x)=>{const w=el.getCoupled(i,"sandbox");return(qr.isOpen(w)?aL:q3)(t,r,i,w,d,p,x)},K3=(t,r,i)=>{const d=Kr.getCurrent(r).getOr(r),p=_e(t.element);i?Gn(d.element,"min-width",p+"px"):we(d.element,p)},EM=(t,r)=>t.getSystem().getByUid(r.uid+"-"+SM()).map(i=>()=>Ws.value(i)).getOrThunk(()=>r.lazySink.fold(()=>()=>Ws.error(new Error("No internal sink is specified, nor could an external sink be found")),i=>()=>i(t))),c5=t=>{qr.getState(t).each(r=>{Fb.repositionMenus(r)})},gC=(t,r,i)=>{const d=qx(),p=(A,R)=>{const $=kM(t,r);d.link(r.element),t.matchWidth&&K3($.hotspot,R,t.useMinWidth),t.onOpen($,A,R),i!==void 0&&i.onOpen!==void 0&&i.onOpen(A,R)},x=(A,R)=>{d.unlink(r.element),w().getOr(R).element.dom.dispatchEvent(new window.FocusEvent("focusout")),i!==void 0&&i.onClose!==void 0&&i.onClose(A,R)},w=EM(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:d.id}},behaviours:vm.augment(t.sandboxBehaviours,[ao.config({store:{mode:"memory",initialValue:r}}),qr.config({onOpen:p,onClose:x,isPartOf:(A,R,$)=>yp(R,$)||yp(r,$),getAttachPoint:()=>w().getOrDie()}),Kr.config({find:A=>qr.getState(A).bind(R=>Kr.getCurrent(R))}),qm.config({channels:{...Dd({isExtraPart:$t}),...a0({doReposition:c5})}})])}},_M=t=>{const r=el.getCoupled(t,"sandbox");c5(r)},gx=()=>[Ct("sandboxClasses",[]),vm.field("sandboxBehaviours",[Kr,qm,qr,ao])],l5=re([dn("dom"),dn("fetch"),Ar("onOpen"),rd("onExecute"),Ct("getHotspot",B.some),Ct("getAnchorOverrides",re({})),xb(),Ll("dropdownBehaviours",[dr,el,rs,Ms]),dn("toggleClass"),Ct("eventOrder",{}),Cs("lazySink"),Ct("matchWidth",!1),Ct("useMinWidth",!1),Cs("role"),Cs("listRole")].concat(gx())),u5=re([fg({schema:[oy(),Ct("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),G3()]),d5=(t,r,i,d)=>{const p=W=>vn(t.dom,"attributes").bind(q=>vn(q,W)),x=W=>{qr.getState(W).each(q=>{Fb.highlightPrimary(q)})},w=(W,q,se)=>TM(t,rn,W,d,q,se),A=W=>{w(W,x,fu.HighlightMenuAndItem).get(ue)},R={expand:W=>{dr.isOn(W)||w(W,ue,fu.HighlightNone).get(ue)},open:W=>{dr.isOn(W)||w(W,ue,fu.HighlightMenuAndItem).get(ue)},refetch:W=>el.getExistingCoupled(W,"sandbox").fold(()=>w(W,ue,fu.HighlightMenuAndItem).map(ue),se=>q3(t,rn,W,se,d,ue,fu.HighlightMenuAndItem).map(ue)),isOpen:dr.isOn,close:W=>{dr.isOn(W)&&w(W,ue,fu.HighlightMenuAndItem).get(ue)},repositionMenus:W=>{dr.isOn(W)&&_M(W)}},$=(W,q)=>(ob(W),B.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.dropdownBehaviours,[dr.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),el.config({others:{sandbox:W=>gC(t,W,{onOpen:()=>dr.on(W),onClose:()=>dr.off(W)})}}),rs.config({mode:"special",onSpace:$,onEnter:$,onDown:(W,q)=>{if(Kf.isOpen(W)){const se=el.getCoupled(W,"sandbox");x(se)}else Kf.open(W);return B.some(!0)},onEscape:(W,q)=>Kf.isOpen(W)?(Kf.close(W),B.some(!0)):B.none()}),Ms.config({})]),events:Xy(B.some(A)),eventOrder:{...t.eventOrder,[cu()]:["disabling","toggling","alloy.base.behaviour"]},apis:R,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),W=>({role:W})),...t.dom.tag==="button"?{type:p("type").getOr("button")}:{}}}}},Kf=cd({name:"Dropdown",configFields:l5(),partFields:u5(),factory:d5,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),Z7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},fx=t=>{const r=ao.getValue(t),i=xS(t).map(wS);Kf.refetch(r).get(()=>{const d=el.getCoupled(r,"sandbox");i.each(p=>xS(d).each(x=>BR(x,p)))})},QS=(t,r)=>{AM(t).each(i=>{Dv(t,i.element,r.event.eventType,r.event.interactionEvent)})},AM=t=>qr.getState(t).bind(Cn.getHighlighted).bind(Cn.getHighlighted),f_=t=>kd(t.element,Bh)?B.some(t.element):zi(t.element,"."+Bh),OM=(t,r,i)=>{NR(t).each(d=>{JI(d,i),f_(r).each(x=>{br(x,"id").each(w=>Kn(d.element,"aria-controls",w))})}),Kn(i.element,"aria-selected","true")},m5=(t,r,i)=>{Kn(i.element,"aria-selected","false")},iL=t=>{NR(t).each(r=>Ms.focus(r))},cL=t=>el.getExistingCoupled(t,"sandbox").bind(xS).map(wS).map(i=>i.fetchPattern).getOr("");var p_;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(p_||(p_={}));const DM=(t,r,i,d,p)=>{const x=i.shared.providers,w=A=>p?{...A,shortcut:B.none(),icon:A.text.isSome()?B.none():A.icon}:A;switch(t.type){case"menuitem":return _8(t).fold(ev,A=>B.some(JF(w(A),r,x,d)));case"nestedmenuitem":return A8(t).fold(ev,A=>B.some(QF(w(A),r,x,d,p)));case"togglemenuitem":return JE(t).fold(ev,A=>B.some(e5(w(A),r,x,d)));case"separator":return aF(t).fold(ev,A=>B.some(Z3(A)));case"fancymenuitem":return IS(t).fold(ev,A=>yM(A,i));default:return console.error("Unknown item in general menu",t),B.none()}},Y3=(t,r,i,d,p,x,w)=>{const A=d===1,R=!A||w3(t);return hi($e(t,$=>{switch($.type){case"separator":return yg($).fold(ev,W=>B.some(Z3(W)));case"cardmenuitem":return BS($).fold(ev,W=>B.some(t5({...W,onAction:q=>{W.onAction(q),i(W.value,W.meta)}},p,x,{itemBehaviours:M3(W.meta,x,B.none()),cardText:{matchText:r,highlightOn:w}})));case"autocompleteitem":default:return of($).fold(ev,W=>B.some(XF(W,r,A,"normal",i,p,x,R)))}}))},RM=(t,r,i,d,p,x)=>{const w=w3(r),A=hi($e(r,W=>{const q=ge=>p?!Ls(ge,"text"):w,se=ge=>DM(ge,i,d,q(ge),p);return W.type==="nestedmenuitem"&&W.getSubmenuItems().length<=0?se({...W,enabled:!1}):se(W)})),R=Z7(x);return(p?nF:wm)(t,w,A,1,R)},h_=t=>Fb.singleData(t.value,t),g5=(t,r,i,d)=>{const p=m_(r,d),x=b0(d);return{data:h_({...t,movement:p,menuBehaviours:cC.unnamedEvents(r!=="auto"?[]:[$i((w,A)=>{ZR(w,4,x.item).each(({numColumns:R,numRows:$})=>{rs.setGridSize(w,$,R)})})])}),menu:{markers:b0(d),fakeFocus:i===p_.ContentFocus}}},lL=t=>Yv.create(xt.fromDom(t.startContainer),t.startOffset,xt.fromDom(t.endContainer),t.endOffset),ek={register:(t,r)=>{const i=Ao("autocompleter"),d=wo(!1),p=wo(!1),x=Ir(),w=Hu(cc.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:i}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ln([zs("dismissAutocompleter",[on(dp(),()=>q()),on(Do(),(Fe,nt)=>{br(nt.event.target,"id").each(lt=>Kn(xt.fromDom(t.getBody()),"aria-activedescendant",lt))})])]),lazySink:r.getSink})),A=()=>cc.isOpen(w),R=p.get,$=()=>{if(A()){cc.hide(w),t.dom.remove(i,!1);const Fe=xt.fromDom(t.getBody());br(Fe,"aria-owns").filter(nt=>nt===i).each(()=>{fe(Fe,"aria-owns"),fe(Fe,"aria-activedescendant")})}},W=()=>cc.getContent(w).bind(Fe=>hn(Fe.components(),0)),q=()=>t.execCommand("mceAutocompleterClose"),se=Fe=>{const nt=rt(Fe,lt=>B.from(lt.columns)).getOr(1);return oe(Fe,lt=>{const Ft=lt.items;return Y3(Ft,lt.matchText,(zt,Zn)=>{const Mo={hide:()=>q(),reload:ln=>{$(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:ln})}};t.execCommand("mceAutocompleterRefreshActiveRange"),x.get().each(ln=>{d.set(!0),lt.onAction(Mo,ln,zt,Zn),d.set(!1)})},nt,Fp.BUBBLE_TO_SANDBOX,r,lt.highlightOn)})},ge=(Fe,nt)=>{const lt=rt(Fe,Ft=>B.from(Ft.columns)).getOr(1);cc.showMenuAt(w,{anchor:{type:"selection",getSelection:()=>x.get().map(lL),root:xt.fromDom(t.getBody())}},g5(wm("autocompleter-value",!0,nt,lt,{menuType:"normal"}),lt,p_.ContentFocus,"normal")),W().each(Cn.highlightFirst)},Ae=Fe=>{const nt=se(Fe);nt.length>0?(ge(Fe,nt),Kn(xt.fromDom(t.getBody()),"aria-owns",i),t.inline||Ie()):$()},Ie=()=>{t.dom.get(i)&&t.dom.remove(i,!1);const Fe=t.getDoc().documentElement,nt=t.selection.getNode(),lt=Px(w.element);jr(lt,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${nt.offsetTop}px`,left:`${nt.offsetLeft}px`}),t.dom.add(Fe,lt.dom),zi(lt,'[role="menu"]').each(Ft=>{cr(Ft,"position"),cr(Ft,"max-height")})};t.on("AutocompleterStart",({lookupData:Fe})=>{p.set(!0),d.set(!1),Ae(Fe)}),t.on("AutocompleterUpdate",({lookupData:Fe})=>Ae(Fe)),t.on("AutocompleterUpdateActiveRange",({range:Fe})=>x.set(Fe)),t.on("AutocompleterEnd",()=>{$(),p.set(!1),d.set(!1),x.clear()});const mt={cancelIfNecessary:q,isMenuOpen:A,isActive:R,isProcessingAction:d.get,getMenu:W};l3.setup(mt,t)}},Ph=(t,r,i)=>vp(t,r,i).isSome(),X3=(t,r)=>{let i=null;return{cancel:()=>{i!==null&&(clearTimeout(i),i=null)},schedule:(...x)=>{i=setTimeout(()=>{t.apply(null,x),i=null},r)}}},J3=5,MM=400,fC=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?B.none():B.some(r.touches[0])},NM=(t,r)=>{const i=Math.abs(t.clientX-r.x),d=Math.abs(t.clientY-r.y);return i>J3||d>J3},pC=t=>{const r=Ir(),i=wo(!1),d=X3($=>{t.triggerEvent(ah(),$),i.set(!0)},MM),p=$=>(fC($).each(W=>{d.cancel();const q={x:W.clientX,y:W.clientY,target:$.target};d.schedule($),i.set(!1),r.set(q)}),B.none()),x=$=>(d.cancel(),fC($).each(W=>{r.on(q=>{NM(W,q)&&r.clear()})}),B.none()),w=$=>{d.cancel();const W=q=>Es(q.target,$.target);return r.get().filter(W).map(q=>i.get()?($.prevent(),!1):t.triggerEvent(Ox(),$))},A=ua([{key:cg(),value:p},{key:$r(),value:x},{key:ai(),value:w}]);return{fireIfReady:($,W)=>vn(A,W).bind(q=>q($))}},Hp=t=>t.raw.which===_a[0]&&!Oe(["input","textarea"],Ur(t.target))&&!Ph(t.target,'[contenteditable="true"]'),p5=(t,r)=>{const i={stopBackspace:!0,...r},d=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],p=pC(i),x=$e(d.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),ge=>Au(t,ge,Ae=>{p.fireIfReady(Ae,ge).each(mt=>{mt&&Ae.kill()}),i.triggerEvent(ge,Ae)&&Ae.kill()})),w=Ir(),A=Au(t,"paste",ge=>{p.fireIfReady(ge,"paste").each(Ie=>{Ie&&ge.kill()}),i.triggerEvent("paste",ge)&&ge.kill(),w.set(setTimeout(()=>{i.triggerEvent(U0(),ge)},0))}),R=Au(t,"keydown",ge=>{i.triggerEvent("keydown",ge)?ge.kill():i.stopBackspace&&Hp(ge)&&ge.prevent()}),$=Au(t,"focusin",ge=>{i.triggerEvent("focusin",ge)&&ge.kill()}),W=Ir(),q=Au(t,"focusout",ge=>{i.triggerEvent("focusout",ge)&&ge.kill(),W.set(setTimeout(()=>{i.triggerEvent(rh(),ge)},0))});return{unbind:()=>{pt(x,ge=>{ge.unbind()}),R.unbind(),$.unbind(),q.unbind(),A.unbind(),w.on(clearTimeout),W.on(clearTimeout)}}},BM=(t,r)=>{const i=vn(t,"target").getOr(r);return wo(i)},uL=(t,r)=>{const i=wo(!1),d=wo(!1);return{stop:()=>{i.set(!0)},cut:()=>{d.set(!0)},isStopped:i.get,isCut:d.get,event:t,setSource:r.set,getSource:r.get}},h5=t=>{const r=wo(!1);return{stop:()=>{r.set(!0)},cut:ue,isStopped:r.get,isCut:$t,event:t,setSource:Be("Cannot set source of a broadcasted event"),getSource:Be("Cannot get source of a broadcasted event")}},b_=ye.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),b5=(t,r,i,d,p,x)=>{const w=t(r,d),A=uL(i,p);return w.fold(()=>(x.logEventNoHandlers(r,d),b_.complete()),R=>{const $=R.descHandler;return gh($)(A),A.isStopped()?(x.logEventStopped(r,R.element,$.purpose),b_.stopped()):A.isCut()?(x.logEventCut(r,R.element,$.purpose),b_.complete()):li(R.element).fold(()=>(x.logNoParent(r,R.element,$.purpose),b_.complete()),q=>(x.logEventResponse(r,R.element,$.purpose),b_.resume(q)))})},hC=(t,r,i,d,p,x)=>b5(t,r,i,d,p,x).fold(Kt,w=>hC(t,r,i,w,p,x),$t),dL=(t,r,i,d,p)=>{const x=BM(i,d);return b5(t,r,i,d,x,p)},Q3=(t,r,i)=>{const d=h5(r);return pt(t,p=>{const x=p.descHandler;gh(x)(d)}),d.isStopped()},IM=(t,r,i,d)=>FM(t,r,i,i.target,d),FM=(t,r,i,d,p)=>{const x=BM(i,d);return hC(t,r,i,d,x,p)},PM=(t,r)=>({element:t,descHandler:r}),LM=(t,r)=>({id:t,descHandler:r}),$M=()=>{const t={},r=(w,A,R)=>{Co(R,($,W)=>{const q=t[W]!==void 0?t[W]:{};q[A]=$u($,w),t[W]=q})},i=(w,A)=>Hv(A).bind(R=>vn(w,R)).map(R=>PM(A,R));return{registerId:r,unregisterId:w=>{Co(t,(A,R)=>{Ls(A,w)&&delete A[w]})},filterByType:w=>vn(t,w).map(A=>ma(A,(R,$)=>LM($,R))).getOr([]),find:(w,A,R)=>vn(t,A).bind($=>Um(R,W=>i($,W),w))}},S0=()=>{const t=$M(),r={},i=$=>{const W=$.element;return Hv(W).getOrThunk(()=>Kk("uid-",$.element))},d=($,W)=>{const q=r[W];if(q===$)x($);else throw new Error('The tagId "'+W+'" is already used by: '+_f(q.element)+`
Cannot use it for: `+_f($.element)+`
The conflicting element is`+(Je(q.element)?" ":" not ")+"already in the DOM")},p=$=>{const W=i($);Ba(r,W)&&d($,W);const q=[$];t.registerId(q,W,$.events),r[W]=$},x=$=>{Hv($.element).each(W=>{delete r[W],t.unregisterId(W)})};return{find:($,W,q)=>t.find($,W,q),filter:$=>t.filterByType($),register:p,unregister:x,getById:$=>vn(r,$)}},zp=Ym({name:"Container",factory:t=>{const{attributes:r,...i}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...i},components:t.components,behaviours:Ly(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ct("components",[]),Ll("containerBehaviours",[]),Ct("events",{}),Ct("domModification",{}),Ct("eventOrder",{})]}),HM=t=>{const r=Fe=>li(t.element).fold(Kt,nt=>Es(Fe,nt)),i=S0(),d=(Fe,nt)=>i.find(r,Fe,nt),p=p5(t.element,{triggerEvent:(Fe,nt)=>GC(Fe,nt.target,lt=>IM(d,Fe,nt,lt))}),x={debugInfo:re("real"),triggerEvent:(Fe,nt,lt)=>{GC(Fe,nt,Ft=>FM(d,Fe,lt,nt,Ft))},triggerFocus:(Fe,nt)=>{Hv(Fe).fold(()=>{Zd(Fe)},lt=>{GC(lp(),Fe,Ft=>(dL(d,lp(),{originator:nt,kill:ue,prevent:ue,target:Fe},Fe,Ft),!1))})},triggerEscape:(Fe,nt)=>{x.triggerEvent("keydown",Fe.element,nt.event)},getByUid:Fe=>Ie(Fe),getByDom:Fe=>mt(Fe),build:Hu,buildOrPatch:ly,addToGui:Fe=>{R(Fe)},removeFromGui:Fe=>{$(Fe)},addToWorld:Fe=>{w(Fe)},removeFromWorld:Fe=>{A(Fe)},broadcast:Fe=>{se(Fe)},broadcastOn:(Fe,nt)=>{ge(Fe,nt)},broadcastEvent:(Fe,nt)=>{Ae(Fe,nt)},isConnected:Kt},w=Fe=>{Fe.connect(x),ar(Fe.element)||(i.register(Fe),pt(Fe.components(),w),x.triggerEvent(Hr(),Fe.element,{target:Fe.element}))},A=Fe=>{ar(Fe.element)||(pt(Fe.components(),A),i.unregister(Fe)),Fe.disconnect()},R=Fe=>{Sp(t,Fe)},$=Fe=>{kp(Fe)},W=()=>{p.unbind(),al(t.element)},q=Fe=>{const nt=i.filter(ug());pt(nt,lt=>{const Ft=lt.descHandler;gh(Ft)(Fe)})},se=Fe=>{q({universal:!0,data:Fe})},ge=(Fe,nt)=>{q({universal:!1,channels:Fe,data:nt})},Ae=(Fe,nt)=>{const lt=i.filter(Fe);return Q3(lt,nt)},Ie=Fe=>i.getById(Fe).fold(()=>Ws.error(new Error('Could not find component with uid: "'+Fe+'" in system.')),Ws.value),mt=Fe=>{const nt=Hv(Fe).getOr("not found");return Ie(nt)};return w(t),{root:t,element:t.element,destroy:W,add:R,remove:$,getByUid:Ie,getByDom:mt,addToWorld:w,removeFromWorld:A,broadcast:se,broadcastOn:ge,broadcastEvent:Ae}},e4=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$e(t.items,r.interpreter)}),mL=re([Ct("prefix","form-field"),Ll("fieldBehaviours",[Kr,ao])]),zM=re([ym({schema:[dn("dom")],name:"label"}),ym({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[dn("text")],name:"aria-descriptor"}),Du({factory:{sketch:t=>{const r=$o(t,["factory"]);return t.factory.sketch(r)}},schema:[dn("factory")],name:"field"})]),gL=(t,r,i,d)=>{const p=nc(t.fieldBehaviours,[Kr.config({find:A=>ii(A,t,"field")}),ao.config({store:{mode:"manual",getValue:A=>Kr.getCurrent(A).bind(ao.getValue),setValue:(A,R)=>{Kr.getCurrent(A).each($=>{ao.setValue($,R)})}}})]),x=ya([$i((A,R)=>{const $=qT(A,t,["label","field","aria-descriptor"]);$.field().each(W=>{const q=Ao(t.prefix);$.label().each(se=>{Kn(se.element,"for",q),Kn(W.element,"id",q)}),$["aria-descriptor"]().each(se=>{const ge=Ao(t.prefix);Kn(se.element,"id",ge),Kn(W.element,"aria-describedby",ge)})})})]),w={getField:A=>ii(A,t,"field"),getLabel:A=>ii(A,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:p,events:x,apis:w}},ra=cd({name:"FormField",configFields:mL(),partFields:zM(),factory:gL,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var v5=tinymce.util.Tools.resolve("tinymce.html.Entities");const bC=(t,r,i,d)=>{const p=t4(t,r,i,d);return ra.sketch(p)},fL=(t,r)=>bC(t,r,[],[]),t4=(t,r,i,d)=>({dom:y5(i),components:t.toArray().concat([r]),fieldBehaviours:Ln(d)}),pL=()=>y5([]),y5=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),nv=(t,r)=>ra.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Di(r.translate(t))]}),eg=Ao("form-component-change"),VM=Ao("form-component-input"),v_=Ao("form-close"),ov=Ao("form-cancel"),Yf=Ao("form-action"),nk=Ao("form-submit"),UM=Ao("form-block"),y_=Ao("form-unblock"),WM=Ao("form-tabchange"),x5=Ao("form-resize"),hL=(t,r,i)=>{const d=t.label.map(ge=>nv(ge,r)),p=r.icons(),x=ge=>{var Ae;return(Ae=p[ge])!==null&&Ae!==void 0?Ae:ge},w=ge=>(Ae,Ie)=>{vp(Ie.event.target,"[data-collection-item-value]").each(mt=>{ge(Ae,Ie,mt,Ds(mt,"data-collection-item-value"))})},A=(ge,Ae)=>{const mt=r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()?" tox-collection__item--state-disabled":"",Fe=$e(Ae,Ft=>{const zt=Bp.translate(Ft.text),Zn=t.columns===1?`<div class="tox-collection__item-label">${zt}</div>`:"",Mo=`<div class="tox-collection__item-icon">${x(Ft.icon)}</div>`,ln={_:" "," - ":" ","-":" "},Po=zt.replace(/\_| \- |\-/g,io=>ln[io]);return`<div data-mce-tooltip="${Po}" class="tox-collection__item${mt}" tabindex="-1" data-collection-item-value="${v5.encodeAllRaw(Ft.value)}" aria-label="${Po}">${Mo}${Zn}</div>`}),nt=t.columns!=="auto"&&t.columns>1?Bt(Fe,t.columns):[Fe],lt=$e(nt,Ft=>`<div class="tox-collection__group">${Ft.join("")}</div>`);Fg(ge.element,lt.join(""))},R=w((ge,Ae,Ie,mt)=>{Ae.stop(),r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()||qo(ge,Yf,{name:t.name,value:mt})}),$=[on(td(),w((ge,Ae,Ie)=>{Zd(Ie,!0)})),on(Ev(),R),on(Ox(),R),on(wf(),w((ge,Ae,Ie)=>{zi(ge.element,"."+tC).each(mt=>{Hi(mt,tC)}),Cc(Ie,tC)})),on(Bk(),w(ge=>{zi(ge.element,"."+tC).each(Ae=>{Hi(Ae,tC),Pl(Ae)})})),gp(w((ge,Ae,Ie,mt)=>{qo(ge,Yf,{name:t.name,value:mt})}))],W=(ge,Ae)=>$e(qd(ge.element,".tox-collection__item"),Ae),q=ra.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:rn},behaviours:Ln([Wo.config({disabled:()=>r.checkUiComponentContext(t.context).shouldDisable,onDisabled:ge=>{W(ge,Ae=>{Cc(Ae,"tox-collection__item--state-disabled"),Kn(Ae,"aria-disabled",!0)})},onEnabled:ge=>{W(ge,Ae=>{Hi(Ae,"tox-collection__item--state-disabled"),fe(Ae,"aria-disabled")})}}),dl(()=>r.checkUiComponentContext(t.context)),Hs.config({}),lc.config({...r.tooltips.getConfig({tooltipText:"",onShow:ge=>{zi(ge.element,"."+tC+"[data-mce-tooltip]").each(Ae=>{br(Ae,"data-mce-tooltip").each(Ie=>{lc.setComponents(ge,r.tooltips.getComponents({tooltipText:Ie}))})})}}),mode:"children-keyboard-focus",anchor:ge=>({type:"node",node:zi(ge.element,"."+tC).orThunk(()=>EA(".tox-collection__item")),root:ge.element,layouts:{onLtr:re([Jc,Jl,lr,Fl,pc,Fa]),onRtl:re([Jc,Jl,lr,Fl,pc,Fa])},bubble:Rf(0,-2,{})})}),ao.config({store:{mode:"memory",initialValue:i.getOr([])},onSetValue:(ge,Ae)=>{A(ge,Ae),t.columns==="auto"&&ZR(ge,5,"tox-collection__item").each(({numRows:Ie,numColumns:mt})=>{rs.setGridSize(ge,Ie,mt)}),xr(ge,x5)}}),Wi.config({}),rs.config(hM(t.columns,"normal")),zs("collection-events",$)]),eventOrder:{[cu()]:["disabling","alloy.base.behaviour","collection-events"],[wf()]:["collection-events","tooltipping"]}});return bC(d,q,["tox-form__group--collection"],[])},bL=["input","textarea"],w5=t=>{const r=Ur(t);return Oe(bL,r)},n4=(t,r)=>{const i=r.getRoot(t).getOr(t.element);Hi(i,r.invalidClass),r.notify.each(d=>{w5(t.element)&&Kn(t.element,"aria-invalid",!1),d.getContainer(t).each(p=>{Fg(p,d.validHtml)}),d.onValid(t)})},x_=(t,r,i,d)=>{const p=r.getRoot(t).getOr(t.element);Cc(p,r.invalidClass),r.notify.each(x=>{w5(t.element)&&Kn(t.element,"aria-invalid",!0),x.getContainer(t).each(w=>{Fg(w,d)}),x.onInvalid(t,d)})},jM=(t,r,i)=>r.validator.fold(()=>Id.pure(Ws.value(!0)),d=>d.validate(t)),o4=(t,r,i)=>(r.notify.each(d=>{d.onValidate(t)}),jM(t,r).map(d=>t.getSystem().isConnected()?d.fold(p=>(x_(t,r,i,p),Ws.error(p)),p=>(n4(t,r),Ws.value(p))):Ws.error("No longer in system")));var C5=Object.freeze({__proto__:null,markValid:n4,markInvalid:x_,query:jM,run:o4,isInvalid:(t,r)=>{const i=r.getRoot(t).getOr(t.element);return kd(i,r.invalidClass)}}),s4=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(i=>ya([on(i.onEvent,d=>{o4(d,t,r).get(rn)})].concat(i.validateOnLoad?[$i(d=>{o4(d,t,r).get(ue)})]:[]))).getOr({})}),k0=[dn("invalidClass"),Ct("getRoot",B.none),Yc("notify",[Ct("aria","alert"),Ct("getContainer",B.none),Ct("validHtml",""),Ar("onValid"),Ar("onInvalid"),Ar("onValidate")]),Yc("validator",[dn("validate"),Ct("onEvent","input"),Ct("validateOnLoad",!0)])];const Vp=xl({fields:k0,name:"invalidating",active:s4,apis:C5,extra:{validation:t=>r=>{const i=ao.getValue(r);return Id.pure(t(i))}}});var T0=Object.freeze({__proto__:null,events:()=>ya([Pk(nb(),Kt)]),exhibit:()=>mm({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Cm=xl({fields:[],name:"unselecting",active:T0}),r4=(t,r)=>Kf.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Ln([qf.button(()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable),dl(()=>r.providers.checkUiComponentContext(t.context)),Cm.config({}),Wi.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:i=>Id.nu(d=>t.fetch(d)).map(d=>B.from(h_(mi(pM(Ao("menu-value"),d,p=>{t.onItemAction(i,p)},t.columns,t.presets,Fp.CLOSE_ON_EXECUTE,$t,r.providers),{movement:m_(t.columns,t.presets)})))),parts:{menu:Q1(!1,1,t.presets)}}),w_=Ao("color-input-change"),C_=Ao("color-swatch-change"),E0=Ao("color-picker-cancel"),vC=(t,r,i,d)=>{const p=ra.parts.field({factory:Nh,inputClasses:["tox-textfield"],data:d,onSetValue:$=>Vp.run($).get(ue),inputBehaviours:Ln([Wo.config({disabled:()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable}),dl(()=>r.providers.checkUiComponentContext(t.context)),Wi.config({}),Vp.config({invalidClass:"tox-textbox-field-invalid",getRoot:$=>Wa($.element),notify:{onValid:$=>{const W=ao.getValue($);qo($,w_,{color:W})}},validator:{validateOnLoad:!1,validate:$=>{const W=ao.getValue($);if(W.length===0)return Id.pure(Ws.value(!0));{const q=xt.fromTag("span");Gn(q,"background-color",W);const se=ba(q,"background-color").fold(()=>Ws.error("blah"),ge=>Ws.value(W));return Id.pure(se)}}}})]),selectOnFocus:!1}),x=t.label.map($=>nv($,r.providers)),w=($,W)=>{qo($,C_,{value:W})},A=($,W)=>{R.getOpt($).each(q=>{W==="custom"?i.colorPicker(se=>{se.fold(()=>xr(q,E0),ge=>{w(q,ge),a_(t.storageKey,ge)})},"#ffffff"):W==="remove"?w(q,""):w(q,W)})},R=da(r4({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[pc,lr,Jc],onLtr:()=>[lr,pc,Jc]},components:[],fetch:LF(i.getColors(t.storageKey),t.storageKey,i.hasCustomColors()),columns:i.getColorCols(t.storageKey),presets:"color",onItemAction:A,context:t.context},r));return ra.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:x.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[p,R.asSpec()]}]),fieldBehaviours:Ln([zs("form-field-events",[on(w_,($,W)=>{R.getOpt($).each(q=>{Gn(q.element,"background-color",W.event.color)}),qo($,eg,{name:t.name})}),on(C_,($,W)=>{ra.getField($).each(q=>{ao.setValue(q,W.event.value),Kr.getCurrent($).each(Ms.focus)})}),on(E0,($,W)=>{ra.getField($).each(q=>{Kr.getCurrent($).each(Ms.focus)})})])])})},S5=ym({schema:[dn("dom")],name:"label"}),_0=t=>ym({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),d=>({events:ya([Rv(cg(),(p,x,w)=>d(p,w),[r]),Rv(_c(),(p,x,w)=>d(p,w),[r]),Rv(eb(),(p,x,w)=>{w.mouseIsDown.get()&&d(p,w)},[r])])}))}),GM=_0("top-left"),yL=_0("top"),xL=_0("top-right"),k5=_0("right"),qM=_0("bottom-right"),KM=_0("bottom"),T5=_0("bottom-left"),YM=_0("left"),wL=Du({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ya([q0(cg(),t,"spectrum"),q0($r(),t,"spectrum"),q0(ai(),t,"spectrum"),q0(_c(),t,"spectrum"),q0(eb(),t,"spectrum"),q0(xf(),t,"spectrum")])})}),ok=t=>$f(t.event),CL=Du({schema:[aa("mouseIsDown",()=>wo(!1))],name:"spectrum",overrides:t=>{const i=t.model.manager,d=(p,x)=>i.getValueFromEvent(x).map(w=>i.setValueFrom(p,t,w));return{behaviours:Ln([rs.config({mode:"special",onLeft:(p,x)=>i.onLeft(p,t,ok(x)),onRight:(p,x)=>i.onRight(p,t,ok(x)),onUp:(p,x)=>i.onUp(p,t,ok(x)),onDown:(p,x)=>i.onDown(p,t,ok(x))}),Wi.config({}),Ms.config({})]),events:ya([on(cg(),d),on($r(),d),on(_c(),d),on(eb(),(p,x)=>{t.mouseIsDown.get()&&d(p,x)})])}}});var E5=[S5,YM,k5,yL,KM,GM,xL,T5,qM,wL,CL];const sk=re("slider.change.value"),S_=t=>t.type.indexOf("touch")!==-1,XM=t=>{const r=t.event.raw;if(S_(r)){const i=r;return i.touches!==void 0&&i.touches.length===1?B.some(i.touches[0]).map(d=>Ka(d.clientX,d.clientY)):B.none()}else{const i=r;return i.clientX!==void 0?B.some(i).map(d=>Ka(d.clientX,d.clientY)):B.none()}},A5="top",O5="right",D5="bottom",R5="left",yC=t=>t.model.minX,xC=t=>t.model.minY,a4=t=>t.model.minX-1,i4=t=>t.model.minY-1,wC=t=>t.model.maxX,Xf=t=>t.model.maxY,rk=t=>t.model.maxX+1,k_=t=>t.model.maxY+1,JM=(t,r,i)=>r(t)-i(t),QM=t=>JM(t,wC,yC),eN=t=>JM(t,Xf,xC),A0=t=>QM(t)/2,tN=t=>eN(t)/2,sv=(t,r)=>r?t.stepSize*t.speedMultiplier:t.stepSize,nN=t=>t.snapToGrid,c4=t=>t.snapStart,l4=t=>t.rounded,u4=(t,r)=>t[r+"-edge"]!==void 0,T_=t=>u4(t,R5),M5=t=>u4(t,O5),tu=t=>u4(t,A5),N5=t=>u4(t,D5),O0=t=>t.model.value.get(),Lh=(t,r)=>({x:t,y:r}),ud=(t,r)=>{qo(t,sk(),{value:r})},oN=(t,r)=>{ud(t,Lh(a4(r),i4(r)))},E_=(t,r)=>{ud(t,i4(r))},SL=(t,r)=>{ud(t,Lh(A0(r),i4(r)))},sN=(t,r)=>{ud(t,Lh(rk(r),i4(r)))},kL=(t,r)=>{ud(t,rk(r))},TL=(t,r)=>{ud(t,Lh(rk(r),tN(r)))},EL=(t,r)=>{ud(t,Lh(rk(r),k_(r)))},B5=(t,r)=>{ud(t,k_(r))},ak=(t,r)=>{ud(t,Lh(A0(r),k_(r)))},Up=(t,r)=>{ud(t,Lh(a4(r),k_(r)))},rN=(t,r)=>{ud(t,a4(r))},aN=(t,r)=>{ud(t,Lh(a4(r),tN(r)))},iN=(t,r,i,d)=>t<r?t:t>i?i:t===r?r-1:Math.max(r,t-d),xg=(t,r,i,d)=>t>i?t:t<r?r:t===i?i+1:Math.min(i,t+d),I5=(t,r,i)=>Math.max(r,Math.min(i,t)),_L=(t,r,i,d,p)=>p.fold(()=>{const x=t-r,w=Math.round(x/d)*d;return I5(r+w,r-1,i+1)},x=>{const w=(t-x)%d,A=Math.round(w/d),R=Math.floor((t-x)/d),$=Math.floor((i-x)/d),W=Math.min($,R+A),q=x+W*d;return Math.max(x,q)}),F5=(t,r,i)=>Math.min(i,Math.max(t,r))-r,cN=t=>{const{min:r,max:i,range:d,value:p,step:x,snap:w,snapStart:A,rounded:R,hasMinEdge:$,hasMaxEdge:W,minBound:q,maxBound:se,screenRange:ge}=t,Ae=$?r-1:r,Ie=W?i+1:i;if(p<q)return Ae;if(p>se)return Ie;{const mt=F5(p,q,se),Fe=I5(mt/ge*d+r,Ae,Ie);return w&&Fe>=r&&Fe<=i?_L(Fe,r,i,x,A):R?Math.round(Fe):Fe}},P5=t=>{const{min:r,max:i,range:d,value:p,hasMinEdge:x,hasMaxEdge:w,maxBound:A,maxOffset:R,centerMinEdge:$,centerMaxEdge:W}=t;return p<r?x?0:$:p>i?w?A:W:(p-r)/d*R},lN="top",L5="right",$5="bottom",uN="left",AL="width",OL="height",jb=t=>t.element.dom.getBoundingClientRect(),$h=(t,r)=>t[r],d4=t=>{const r=jb(t);return $h(r,uN)},H5=t=>{const r=jb(t);return $h(r,L5)},__=t=>{const r=jb(t);return $h(r,lN)},m4=t=>{const r=jb(t);return $h(r,$5)},dN=t=>{const r=jb(t);return $h(r,AL)},mN=t=>{const r=jb(t);return $h(r,OL)},gN=(t,r,i)=>(t+r)/2-i,fN=(t,r)=>{const i=jb(t),d=jb(r),p=$h(i,uN),x=$h(i,L5),w=$h(d,uN);return gN(p,x,w)},g4=(t,r)=>{const i=jb(t),d=jb(r),p=$h(i,lN),x=$h(i,$5),w=$h(d,lN);return gN(p,x,w)},f4=(t,r)=>{qo(t,sk(),{value:r})},A_=(t,r,i)=>{const d={min:yC(r),max:wC(r),range:QM(r),value:i,step:sv(r),snap:nN(r),snapStart:c4(r),rounded:l4(r),hasMinEdge:T_(r),hasMaxEdge:M5(r),minBound:d4(t),maxBound:H5(t),screenRange:dN(t)};return cN(d)},ik=(t,r,i)=>{const d=A_(t,r,i);return f4(t,d),d},z5=(t,r)=>{const i=yC(r);f4(t,i)},V5=(t,r)=>{const i=wC(r);f4(t,i)},U5=(t,r,i,d)=>{const x=(t>0?xg:iN)(O0(i),yC(i),wC(i),sv(i,d));return f4(r,x),B.some(x)},pN=t=>(r,i,d)=>U5(t,r,i,d).map(Kt),DL=t=>XM(t).map(i=>i.left),p4=(t,r,i,d,p)=>{const w=dN(t),A=d.bind(W=>B.some(fN(W,t))).getOr(0),R=p.bind(W=>B.some(fN(W,t))).getOr(w),$={min:yC(r),max:wC(r),range:QM(r),value:i,hasMinEdge:T_(r),hasMaxEdge:M5(r),minBound:d4(t),minOffset:0,maxBound:H5(t),maxOffset:w,centerMinEdge:A,centerMaxEdge:R};return P5($)},hN=(t,r,i,d,p,x)=>{const w=p4(r,x,i,d,p);return d4(r)-d4(t)+w},RL=(t,r,i,d)=>{const p=O0(i),x=hN(t,d.getSpectrum(t),p,d.getLeftEdge(t),d.getRightEdge(t),i),w=_e(r.element)/2;Gn(r.element,"left",x-w+"px")},W5=pN(-1),j5=pN(1),bN=B.none,Z5=B.none,Sm={"top-left":B.none(),top:B.none(),"top-right":B.none(),right:B.some(kL),"bottom-right":B.none(),bottom:B.none(),"bottom-left":B.none(),left:B.some(rN)};var G5=Object.freeze({__proto__:null,setValueFrom:ik,setToMin:z5,setToMax:V5,findValueOfOffset:A_,getValueFromEvent:DL,findPositionOfValue:hN,setPositionFromValue:RL,onLeft:W5,onRight:j5,onUp:bN,onDown:Z5,edgeActions:Sm});const h4=(t,r)=>{qo(t,sk(),{value:r})},vN=(t,r,i)=>{const d={min:xC(r),max:Xf(r),range:eN(r),value:i,step:sv(r),snap:nN(r),snapStart:c4(r),rounded:l4(r),hasMinEdge:tu(r),hasMaxEdge:N5(r),minBound:__(t),maxBound:m4(t),screenRange:mN(t)};return cN(d)},q5=(t,r,i)=>{const d=vN(t,r,i);return h4(t,d),d},ML=(t,r)=>{const i=xC(r);h4(t,i)},NL=(t,r)=>{const i=Xf(r);h4(t,i)},BL=(t,r,i,d)=>{const x=(t>0?xg:iN)(O0(i),xC(i),Xf(i),sv(i,d));return h4(r,x),B.some(x)},yN=t=>(r,i,d)=>BL(t,r,i,d).map(Kt),Zb=t=>XM(t).map(i=>i.top),b4=(t,r,i,d,p)=>{const w=mN(t),A=d.bind(W=>B.some(g4(W,t))).getOr(0),R=p.bind(W=>B.some(g4(W,t))).getOr(w),$={min:xC(r),max:Xf(r),range:eN(r),value:i,hasMinEdge:tu(r),hasMaxEdge:N5(r),minBound:__(t),minOffset:0,maxBound:m4(t),maxOffset:w,centerMinEdge:A,centerMaxEdge:R};return P5($)},v4=(t,r,i,d,p,x)=>{const w=b4(r,x,i,d,p);return __(r)-__(t)+w},O_=(t,r,i,d)=>{const p=O0(i),x=v4(t,d.getSpectrum(t),p,d.getTopEdge(t),d.getBottomEdge(t),i),w=uc(r.element)/2;Gn(r.element,"top",x-w+"px")},xN=B.none,IL=B.none,FL=yN(-1),PL=yN(1),LL={"top-left":B.none(),top:B.some(E_),"top-right":B.none(),right:B.none(),"bottom-right":B.none(),bottom:B.some(B5),"bottom-left":B.none(),left:B.none()};var $L=Object.freeze({__proto__:null,setValueFrom:q5,setToMin:ML,setToMax:NL,findValueOfOffset:vN,getValueFromEvent:Zb,findPositionOfValue:v4,setPositionFromValue:O_,onLeft:xN,onRight:IL,onUp:FL,onDown:PL,edgeActions:LL});const ck=(t,r)=>{qo(t,sk(),{value:r})},lk=(t,r)=>({x:t,y:r}),K5=(t,r,i)=>{const d=A_(t,r,i.left),p=vN(t,r,i.top),x=lk(d,p);return ck(t,x),x},Y5=(t,r,i,d,p)=>{const x=t>0?xg:iN,w=r?O0(d).x:x(O0(d).x,yC(d),wC(d),sv(d,p)),A=r?x(O0(d).y,xC(d),Xf(d),sv(d,p)):O0(d).y;return ck(i,lk(w,A)),B.some(w)},Wp=(t,r)=>(i,d,p)=>Y5(t,r,i,d,p).map(Kt),y4=(t,r)=>{const i=yC(r),d=xC(r);ck(t,lk(i,d))},HL=(t,r)=>{const i=wC(r),d=Xf(r);ck(t,lk(i,d))},zL=t=>XM(t),X5=(t,r,i,d)=>{const p=O0(i),x=hN(t,d.getSpectrum(t),p.x,d.getLeftEdge(t),d.getRightEdge(t),i),w=v4(t,d.getSpectrum(t),p.y,d.getTopEdge(t),d.getBottomEdge(t),i),A=_e(r.element)/2,R=uc(r.element)/2;Gn(r.element,"left",x-A+"px"),Gn(r.element,"top",w-R+"px")},J5=Wp(-1,!1),wN=Wp(1,!1),x4=Wp(-1,!0),CC=Wp(1,!0),D_={"top-left":B.some(oN),top:B.some(SL),"top-right":B.some(sN),right:B.some(TL),"bottom-right":B.some(EL),bottom:B.some(ak),"bottom-left":B.some(Up),left:B.some(aN)};var Q5=Object.freeze({__proto__:null,setValueFrom:K5,setToMin:y4,setToMax:HL,getValueFromEvent:zL,setPositionFromValue:X5,onLeft:J5,onRight:wN,onUp:x4,onDown:CC,edgeActions:D_});const eP=[Ct("stepSize",1),Ct("speedMultiplier",10),Ct("onChange",ue),Ct("onChoose",ue),Ct("onInit",ue),Ct("onDragStart",ue),Ct("onDragEnd",ue),Ct("snapToGrid",!1),Ct("rounded",!0),Cs("snapStart"),ia("model",fc("mode",{x:[Ct("minX",0),Ct("maxX",100),aa("value",t=>wo(t.mode.minX)),dn("getInitialValue"),xi("manager",G5)],y:[Ct("minY",0),Ct("maxY",100),aa("value",t=>wo(t.mode.minY)),dn("getInitialValue"),xi("manager",$L)],xy:[Ct("minX",0),Ct("maxX",100),Ct("minY",0),Ct("maxY",100),aa("value",t=>wo({x:t.mode.minX,y:t.mode.minY})),dn("getInitialValue"),xi("manager",Q5)]})),Ll("sliderBehaviours",[rs,ao]),aa("mouseIsDown",()=>wo(!1))],Jd=cd({name:"Slider",configFields:eP,partFields:E5,factory:(t,r,i,d)=>{const p=zt=>id(zt,t,"thumb"),x=zt=>id(zt,t,"spectrum"),w=zt=>ii(zt,t,"left-edge"),A=zt=>ii(zt,t,"right-edge"),R=zt=>ii(zt,t,"top-edge"),$=zt=>ii(zt,t,"bottom-edge"),W=t.model,q=W.manager,se=(zt,Zn)=>{q.setPositionFromValue(zt,Zn,t,{getLeftEdge:w,getRightEdge:A,getTopEdge:R,getBottomEdge:$,getSpectrum:x})},ge=(zt,Zn)=>{W.value.set(Zn);const Mo=p(zt);se(zt,Mo)},Ae=(zt,Zn)=>{ge(zt,Zn);const Mo=p(zt);return t.onChange(zt,Mo,Zn),B.some(!0)},Ie=zt=>{q.setToMin(zt,t)},mt=zt=>{q.setToMax(zt,t)},Fe=zt=>{const Zn=()=>{ii(zt,t,"thumb").each(ln=>{const Po=W.value.get();t.onChoose(zt,ln,Po)})},Mo=t.mouseIsDown.get();t.mouseIsDown.set(!1),Mo&&Zn()},nt=(zt,Zn)=>{Zn.stop(),t.mouseIsDown.set(!0),t.onDragStart(zt,p(zt))},lt=(zt,Zn)=>{Zn.stop(),t.onDragEnd(zt,p(zt)),Fe(zt)},Ft=zt=>{ii(zt,t,"spectrum").map(rs.focusIn)};return{uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.sliderBehaviours,[rs.config({mode:"special",focusIn:Ft}),ao.config({store:{mode:"manual",getValue:zt=>W.value.get(),setValue:ge}}),qm.config({channels:{[Sb()]:{onReceive:Fe}}})]),events:ya([on(sk(),(zt,Zn)=>{Ae(zt,Zn.event.value)}),$i((zt,Zn)=>{const Mo=W.getInitialValue();W.value.set(Mo);const ln=p(zt);se(zt,ln);const Po=x(zt);t.onInit(zt,ln,Po,W.value.get())}),on(cg(),nt),on(ai(),lt),on(_c(),(zt,Zn)=>{Ft(zt),nt(zt,Zn)}),on(xf(),lt)]),apis:{resetToMin:Ie,resetToMax:mt,setValue:ge,refresh:se},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,i)=>{t.setValue(r,i)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),CN=Ao("rgb-hex-update"),nP=Ao("slider-update"),oP=Ao("palette-update"),rf=(t,r)=>{const i=Jd.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),d=Jd.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Jd.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:re(0)},components:[i,d],sliderBehaviours:Ln([Ms.config({})]),onChange:(p,x,w)=>{Kn(p.element,"aria-valuenow",Math.floor(360-w*3.6)),qo(p,nP,{value:w})}})},SN="form",sP=[Ll("formBehaviours",[ao])],kN=t=>"<alloy.field."+t+">",VL=t=>{const r=(()=>{const x=[];return{field:(A,R)=>(x.push(A),zy(SN,kN(A),R)),record:re(x)}})(),i=t(r),d=r.record(),p=$e(d,x=>Du({name:x,pname:kN(x)}));return Ob(SN,sP,p,UL,i)},rP=(t,r)=>t.fold(()=>Ws.error(r),Ws.value),UL=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.formBehaviours,[ao.config({store:{mode:"manual",getValue:i=>{const d=KT(i,t);return Mn(d,(p,x)=>p().bind(w=>{const A=Kr.getCurrent(w);return rP(A,new Error(`Cannot find a current component to extract the value from for form part '${x}': `+_f(w.element)))}).map(ao.getValue))},setValue:(i,d)=>{Co(d,(p,x)=>{ii(i,t,x).each(w=>{Kr.getCurrent(w).each(A=>{ao.setValue(A,p)})})})}}})]),apis:{getField:(i,d)=>ii(i,t,d).bind(Kr.getCurrent)}}),hx={getField:Wx((t,r,i)=>t.getField(r,i)),sketch:VL},uk=Ao("valid-input"),aP=Ao("invalid-input"),TN=Ao("validating-input"),EN="colorcustom.rgb.",WL={isEnabled:Kt,setEnabled:ue,immediatelyShow:ue,immediatelyHide:ue},dk=(t,r,i,d,p,x)=>{const w=(Ie,mt)=>{const Fe=mt.get();Ie!==Fe.isEnabled()&&(Fe.setEnabled(Ie),Ie?Fe.immediatelyShow():Fe.immediatelyHide())},A=(Ie,mt,Fe)=>Vp.config({invalidClass:r("invalid"),notify:{onValidate:nt=>{qo(nt,TN,{type:Ie})},onValid:nt=>{w(!1,Fe),qo(nt,uk,{type:Ie,value:ao.getValue(nt)})},onInvalid:nt=>{w(!0,Fe),qo(nt,aP,{type:Ie,value:ao.getValue(nt)})}},validator:{validate:nt=>{const lt=ao.getValue(nt),Ft=mt(lt)?Ws.value(!0):Ws.error(t("aria.input.invalid"));return Id.pure(Ft)},validateOnLoad:!1}}),R=(Ie,mt,Fe,nt,lt)=>{const Ft=wo(WL),zt=t(EN+"range"),Zn=ra.parts.label({dom:{tag:"label"},components:[Di(Fe)]}),Mo=ra.parts.field({data:lt,factory:Nh,inputAttributes:{type:"text","aria-label":nt,...mt==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:Ln([A(mt,Ie,Ft),Wi.config({}),lc.config({...p({tooltipText:"",onSetup:Sa=>{Ft.set({isEnabled:()=>lc.isEnabled(Sa),setEnabled:Yo=>lc.setEnabled(Sa,Yo),immediatelyShow:()=>lc.immediateOpenClose(Sa,!0),immediatelyHide:()=>lc.immediateOpenClose(Sa,!1)}),lc.setEnabled(Sa,!1)},onShow:(Sa,Yo)=>{lc.setComponents(Sa,[{dom:{tag:"p",classes:[r("rgb-warning-note")]},components:[Di(t(mt==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Sa=>{Vp.isInvalid(Sa)&&Vp.run(Sa).get(ue)}}),ln=Ao("aria-invalid"),Po=da(x("invalid",B.some(ln),"warning")),io=da({dom:{tag:"div",classes:[r("invalid-icon")]},components:[Po.asSpec()]}),zo=[Zn,Mo,io.asSpec()],Mr=mt!=="hex"?[ra.parts["aria-descriptor"]({text:zt})]:[],rc=zo.concat(Mr);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[r("rgb-container")]},components:rc}},$=(Ie,mt)=>{const Fe=VS(mt);return hx.getField(Ie,"hex").each(nt=>{Ms.isFocused(nt)||ao.setValue(Ie,{hex:Fe.value})}),Fe},W=(Ie,mt)=>{const Fe=mt.red,nt=mt.green,lt=mt.blue;ao.setValue(Ie,{red:Fe,green:nt,blue:lt})},q=da({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),se=(Ie,mt)=>{q.getOpt(Ie).each(Fe=>{Gn(Fe.element,"background-color","#"+mt.value)})};return Ym({factory:()=>{const Ie={red:wo(B.some(255)),green:wo(B.some(255)),blue:wo(B.some(255)),hex:wo(B.some("ffffff"))},mt=(Yo,Rn)=>{const lo=US(Rn);W(Yo,lo),Ft(lo)},Fe=Yo=>Ie[Yo].get(),nt=(Yo,Rn)=>{Ie[Yo].set(Rn)},lt=()=>Fe("red").bind(Yo=>Fe("green").bind(Rn=>Fe("blue").map(lo=>mx(Yo,Rn,lo,1)))),Ft=Yo=>{const Rn=Yo.red,lo=Yo.green,Vs=Yo.blue;nt("red",B.some(Rn)),nt("green",B.some(lo)),nt("blue",B.some(Vs))},zt=(Yo,Rn)=>{const lo=Rn.event;lo.type!=="hex"?nt(lo.type,B.none()):d(Yo)},Zn=(Yo,Rn)=>{i(Yo);const lo=B3(Rn);nt("hex",B.some(lo.value));const Vs=US(lo);W(Yo,Vs),Ft(Vs),qo(Yo,CN,{hex:lo}),se(Yo,lo)},Mo=(Yo,Rn,lo)=>{const Vs=parseInt(lo,10);nt(Rn,B.some(Vs)),lt().each(mr=>{const bs=$(Yo,mr);qo(Yo,CN,{hex:bs}),se(Yo,bs)})},ln=Yo=>Yo.type==="hex",Po=(Yo,Rn)=>{const lo=Rn.event;ln(lo)?Zn(Yo,lo.value):Mo(Yo,lo.type,lo.value)},io=Yo=>({label:t(EN+Yo+".label"),description:t(EN+Yo+".description")}),zo=io("red"),Mr=io("green"),rc=io("blue"),Sa=io("hex");return mi(hx.sketch(Yo=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Yo.field("red",ra.sketch(R(sM,"red",zo.label,zo.description,255))),Yo.field("green",ra.sketch(R(sM,"green",Mr.label,Mr.description,255))),Yo.field("blue",ra.sketch(R(sM,"blue",rc.label,rc.description,255))),Yo.field("hex",ra.sketch(R(Vb,"hex",Sa.label,Sa.description,"ffffff"))),q.asSpec()],formBehaviours:Ln([Vp.config({invalidClass:r("form-invalid")}),zs("rgb-form-events",[on(uk,Po),on(aP,zt),on(TN,zt)])])})),{apis:{updateHex:(Yo,Rn)=>{ao.setValue(Yo,{hex:Rn.value}),mt(Yo,Rn),se(Yo,Rn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Ie,mt,Fe)=>{Ie.updateHex(mt,Fe)}},extraApis:{}})},iP=(t,r)=>{const i=Jd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),d=Jd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),p=($,W)=>{const{width:q,height:se}=$,ge=$.getContext("2d");if(ge===null)return;ge.fillStyle=W,ge.fillRect(0,0,q,se);const Ae=ge.createLinearGradient(0,0,q,0);Ae.addColorStop(0,"rgba(255,255,255,1)"),Ae.addColorStop(1,"rgba(255,255,255,0)"),ge.fillStyle=Ae,ge.fillRect(0,0,q,se);const Ie=ge.createLinearGradient(0,0,0,se);Ie.addColorStop(0,"rgba(0,0,0,0)"),Ie.addColorStop(1,"rgba(0,0,0,1)"),ge.fillStyle=Ie,ge.fillRect(0,0,q,se)},x=($,W)=>{const q=$.components()[0].element.dom,se=ZS(W,100,100),ge=$3(se);p(q,TF(ge))},w=($,W)=>{const q=V3(US(W));Jd.setValue($,{x:q.saturation,y:100-q.value}),Kn($.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",q.saturation,q.value]))};return Ym({factory:$=>{const W=re({x:0,y:0}),q=(Ae,Ie,mt)=>{Ue(mt)||Kn(Ae.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(mt.x),Math.floor(100-mt.y)])),qo(Ae,oP,{value:mt})},se=(Ae,Ie,mt,Fe)=>{p(mt.element.dom,TF(Nd))},ge=Ln([Kr.config({find:B.some}),Ms.config({})]);return Jd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:W},rounded:!1,components:[i,d],onChange:q,onInit:se,sliderBehaviours:ge})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:($,W,q)=>{x(W,q)},setThumb:($,W,q)=>{w(W,q)}},extraApis:{}})},R_=(t,r,i,d)=>{const p=w=>{const A=dk(t,r,w.onValidHex,w.onInvalidHex,i,d),R=iP(t,r),$=ln=>(100-ln)/100*360,W=ln=>100-ln/360*100,q={paletteRgba:wo(Nd),paletteHue:wo(0)},se=da(rf(t,r)),ge=da(R.sketch({})),Ae=da(A.sketch({})),Ie=(ln,Po,io)=>{ge.getOpt(ln).each(zo=>{R.setHue(zo,io)})},mt=(ln,Po)=>{Ae.getOpt(ln).each(io=>{A.updateHex(io,Po)})},Fe=(ln,Po,io)=>{se.getOpt(ln).each(zo=>{Jd.setValue(zo,W(io))})},nt=(ln,Po)=>{ge.getOpt(ln).each(io=>{R.setThumb(io,Po)})},lt=(ln,Po)=>{const io=US(ln);q.paletteRgba.set(io),q.paletteHue.set(Po)},Ft=(ln,Po,io,zo)=>{lt(Po,io),pt(zo,Mr=>{Mr(ln,Po,io)})},zt=()=>{const ln=[mt];return(Po,io)=>{const zo=io.event.value,Mr=q.paletteHue.get(),rc=ZS(Mr,zo.x,100-zo.y),Sa=NF(rc);Ft(Po,Sa,Mr,ln)}},Zn=()=>{const ln=[Ie,mt];return(Po,io)=>{const zo=$(io.event.value),Mr=q.paletteRgba.get(),rc=V3(Mr),Sa=ZS(zo,rc.saturation,rc.value),Yo=NF(Sa);Ft(Po,Yo,zo,ln)}},Mo=()=>{const ln=[Ie,Fe,nt];return(Po,io)=>{const zo=io.event.hex,Mr=MF(zo);Ft(Po,zo,Mr.hue,ln)}};return{uid:w.uid,dom:w.dom,components:[ge.asSpec(),se.asSpec(),Ae.asSpec()],behaviours:Ln([zs("colour-picker-events",[on(CN,Mo()),on(oP,zt()),on(nP,Zn())]),Kr.config({find:ln=>Ae.getOpt(ln)}),rs.config({mode:"acyclic"})])}};return Ym({name:"ColourPicker",configFields:[dn("dom"),Ct("onValidHex",ue),Ct("onInvalidHex",ue)],factory:p})},Fd={self:()=>Kr.config({find:B.some}),memento:t=>Kr.config({find:t.getOpt}),childAt:t=>Kr.config({find:r=>or(r.element,t).bind(i=>r.getSystem().getByDom(i).toOptional())})},w4=os([Ct("preprocess",rn),Ct("postprocess",rn)]),uP=(t,r)=>{const i=$s("RepresentingConfigs.memento processors",w4,r);return ao.config({store:{mode:"manual",getValue:d=>{const p=t.get(d),x=ao.getValue(p);return i.postprocess(x)},setValue:(d,p)=>{const x=i.preprocess(p),w=t.get(d);ao.setValue(w,x)}}})},D0=(t,r,i)=>ao.config({store:{mode:"manual",...t.map(d=>({initialValue:d})).getOr({}),getValue:r,setValue:i}}),M_=(t,r,i)=>D0(t,d=>r(d.element),(d,p)=>i(d.element,p)),AN=t=>M_(t,_u,Fg),bx=t=>ao.config({store:{mode:"memory",initialValue:t}}),ON={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},DN=t=>r=>Tt(r)?t.translate(ON[r]):t.translate(r),RN=(t,r,i)=>{const d=$=>"tox-"+$,p=($,W,q=$,se=$)=>vg(q,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+$],attributes:{title:r.translate(se),"aria-live":"polite",...W.fold(()=>({}),ge=>({id:ge}))}},r.icons),x=R_(DN(r),d,r.tooltips.getConfig,p),w=$=>{qo($,Yf,{name:"hex-valid",value:!0})},A=$=>{qo($,Yf,{name:"hex-valid",value:!1})},R=da(x.sketch({dom:{tag:"div",classes:[d("color-picker-container")],attributes:{role:"presentation"}},onValidHex:w,onInvalidHex:A}));return{dom:{tag:"div"},components:[R.asSpec()],behaviours:Ln([D0(i,$=>{const W=R.get($);return Kr.getCurrent(W).bind(ge=>ao.getValue(ge).hex).map(ge=>"#"+yt(ge,"#")).getOr("")},($,W)=>{const q=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,se=B.from(q.exec(W)).bind(Ie=>hn(Ie,1)),ge=R.get($);Kr.getCurrent(ge).fold(()=>{console.log("Can not find form")},Ie=>{ao.setValue(Ie,{hex:se.getOr("")}),hx.getField(Ie,"hex").each(mt=>{xr(mt,lg())})})}),Fd.self()])}};var dP=tinymce.util.Tools.resolve("tinymce.Resource");const MN=t=>Ls(t,"init"),mP=t=>{const r=Ir(),i=da({dom:{tag:t.tag}}),d=Ir(),p=!MN(t)&&t.onFocus.isSome()?[Ms.config({onFocus:x=>{t.onFocus.each(w=>{w(x.element.dom)})}}),Wi.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ln([zs("custom-editor-events",[$i(x=>{i.getOpt(x).each(w=>{(MN(t)?t.init(w.element.dom):dP.load(t.scriptId,t.scriptUrl).then(A=>A(w.element.dom,t.settings))).then(A=>{d.on(R=>{A.setValue(R)}),d.clear(),r.set(A)})})})]),D0(B.none(),()=>r.get().fold(()=>d.get().getOr(""),x=>x.getValue()),(x,w)=>{r.get().fold(()=>d.set(w),A=>A.setValue(w))}),Fd.self()].concat(p)),components:[i.asSpec()]}};var rv=tinymce.util.Tools.resolve("tinymce.util.Tools");const N_=Ao("browse.files.event"),NN=(t,r)=>{const i=rv.explode(r.getOption("images_file_types")),d=p=>ft(i,x=>Mc(p.name.toLowerCase(),`.${x.toLowerCase()}`));return Et(ot(t),d)},gP=(t,r,i)=>{const d=(se,ge)=>{ge.stop()},p=se=>(ge,Ae)=>{pt(se,Ie=>{Ie(ge,Ae)})},x=(se,ge)=>{var Ae;if(!Wo.isDisabled(se)){const Ie=ge.event.raw;qo(se,N_,{files:(Ae=Ie.dataTransfer)===null||Ae===void 0?void 0:Ae.files})}},w=(se,ge)=>{const Ae=ge.event.raw.target;qo(se,N_,{files:Ae.files})},A=(se,ge)=>{ge&&(ao.setValue(se,NN(ge,r)),qo(se,eg,{name:t.name}))},R=da({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ln([zs("input-file-events",[Mv(Ev()),Mv(Ox())])])}),$=t.label.map(se=>nv(se,r)),W=ra.parts.field({factory:Hl,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Di(r.translate("Browse for an image")),R.asSpec()],action:se=>{R.get(se).element.dom.click()},buttonBehaviours:Ln([Fd.self(),bx(i.getOr([])),Wi.config({}),qf.button(()=>r.checkUiComponentContext(t.context).shouldDisable),dl(()=>r.checkUiComponentContext(t.context))])}),q={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ln([Wo.config({disabled:()=>r.checkUiComponentContext(t.context).shouldDisable}),dl(()=>r.checkUiComponentContext(t.context)),dr.config({toggleClass:"dragenter",toggleOnExecute:!1}),zs("dropzone-events",[on("dragenter",p([d,dr.toggle])),on("dragleave",p([d,dr.toggle])),on("dragover",d),on("drop",p([d,x])),on(tb(),w)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Di(r.translate("Drop an image here"))]},W]}]};return bC($,q,["tox-form__group--stretched"],[zs("handle-files",[on(N_,(se,ge)=>{ra.getField(se).each(Ae=>{A(Ae,ge.event.files)})})])])},BN=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:$e(t.items,r.interpreter)}),IN=(t,r)=>{let i=null,d=null;return{cancel:()=>{st(i)||(clearTimeout(i),i=null,d=null)},throttle:(...w)=>{d=w,st(i)&&(i=setTimeout(()=>{const A=d;i=null,d=null,t.apply(null,A)},r))}}},SC=(t,r)=>{let i=null;return{cancel:()=>{st(i)||(clearTimeout(i),i=null)},throttle:(...x)=>{st(i)&&(i=setTimeout(()=>{i=null,t.apply(null,x)},r))}}},C4=(t,r)=>{let i=null;const d=()=>{st(i)||(clearTimeout(i),i=null)};return{cancel:d,throttle:(...x)=>{d(),i=setTimeout(()=>{i=null,t.apply(null,x)},r)}}},S4=Ao("alloy-fake-before-tabstop"),B_=Ao("alloy-fake-after-tabstop"),I_=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ln([Ms.config({ignore:!0}),Wi.config({})])}),FN=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[I_([S4]),r,I_([B_])],behaviours:Ln([Fd.childAt(1)])}),PN=(t,r)=>{qo(t,nd(),{raw:{which:9,shiftKey:r}})},k4=(t,r)=>{const i=r.element;kd(i,S4)?PN(t,!0):kd(i,B_)&&PN(t,!1)},F_=t=>Ph(t,["."+S4,"."+B_].join(","),$t),mk=Ao("update-dialog"),LN=Ao("update-title"),P_=Ao("update-body"),$N=Ao("update-footer"),T4=Ao("body-send-message"),kC=Ao("dialog-focus-shifted"),HN=Xi().browser,gk=HN.isSafari(),jL=HN.isFirefox(),zN=gk||jL,VN=HN.isChromium(),ZL=({scrollTop:t,scrollHeight:r,clientHeight:i})=>Math.ceil(t)+i>=r,UN=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),GL=(t,r)=>{const i=t.body;return B.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!VN&&!gk||zn(i)&&(i.scrollTop!==0||Math.abs(i.scrollHeight-i.clientHeight)>1))?i:t.documentElement)},o=(t,r,i)=>{const d=t.dom;B.from(d.contentDocument).fold(i,p=>{let x=0;const w=GL(p,r).map(R=>(x=R.scrollTop,R)).forall(ZL),A=()=>{const R=d.contentWindow;zn(R)&&(w?UN(R,"bottom"):!w&&zN&&x!==0&&UN(R,x))};gk&&d.addEventListener("load",A,{once:!0}),p.open(),p.write(r),p.close(),gk||A()})},u=Lo(zN,gk?500:200).map(t=>IN(o,t)),g=(t,r)=>{const i=wo(t.getOr(""));return{getValue:d=>i.get(),setValue:(d,p)=>{if(i.get()!==p){const x=d.element,w=()=>Kn(x,"srcdoc",p);r?u.fold(re(o),A=>A.throttle)(x,p,w):w()}i.set(p)}}},b=(t,r,i)=>{const d="tox-dialog__iframe",p=t.transparent?[]:[`${d}--opaque`],x=t.border?["tox-navobj-bordered"]:[],w={...t.label.map(q=>({title:q})).getOr({}),...i.map(q=>({srcdoc:q})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},A=g(i,t.streamContent),R=t.label.map(q=>nv(q,r)),$=q=>FN(B.from(x),{uid:q.uid,dom:{tag:"iframe",attributes:w,classes:[d,...p]},behaviours:Ln([Wi.config({}),Ms.config({}),D0(i,A.getValue,A.setValue),qm.config({channels:{[kC]:{onReceive:(se,ge)=>{ge.newFocus.each(Ae=>{Wa(se.element).each(Ie=>{(Es(se.element,Ae)?Cc:Hi)(Ie,"tox-navobj-bordered-focus")})})}}}})])}),W=ra.parts.field({factory:{sketch:$}});return bC(R,W,["tox-form__group--stretched"],[])},y=t=>new Promise((r,i)=>{const d=()=>{x(),r(t)},p=[Au(t,"load",d),Au(t,"error",()=>{x(),i("Unable to load data from image: "+t.dom.src)})],x=()=>pt(p,w=>w.unbind());t.dom.complete&&d()}),S=(t,r,i,d,p)=>{const x=i*p,w=d*p,A=Math.max(0,t/2-x/2),R=Math.max(0,r/2-w/2);return{left:A.toString()+"px",top:R.toString()+"px",width:x.toString()+"px",height:w.toString()+"px"}},T=(t,r,i)=>{const d=_e(t),p=uc(t);return Math.min(d/r,p/i,1)},E=(t,r)=>{const i=wo(r.getOr({url:""})),d=da({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(R=>({src:R.url})).getOr({})}}),p=da({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[d.asSpec()]}),x=(R,$)=>{const W={url:$.url};$.zoom.each(se=>W.zoom=se),$.cachedWidth.each(se=>W.cachedWidth=se),$.cachedHeight.each(se=>W.cachedHeight=se),i.set(W);const q=()=>{const{cachedWidth:se,cachedHeight:ge,zoom:Ae}=W;if(!Vn(se)&&!Vn(ge)){if(Vn(Ae)){const mt=T(R.element,se,ge);W.zoom=mt}const Ie=S(_e(R.element),uc(R.element),se,ge,W.zoom);p.getOpt(R).each(mt=>{jr(mt.element,Ie)})}};d.getOpt(R).each(se=>{const ge=se.element;$.url!==Ds(ge,"src")&&(Kn(ge,"src",$.url),Hi(R.element,"tox-imagepreview__loaded")),q(),y(ge).then(Ae=>{R.getSystem().isConnected()&&(Cc(R.element,"tox-imagepreview__loaded"),W.cachedWidth=Ae.dom.naturalWidth,W.cachedHeight=Ae.dom.naturalHeight,q())})})},w={};t.height.each(R=>w.height=R);const A=r.map(R=>({url:R.url,zoom:B.from(R.zoom),cachedWidth:B.from(R.cachedWidth),cachedHeight:B.from(R.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:w,attributes:{role:"presentation"}},components:[p.asSpec()],behaviours:Ln([Fd.self(),D0(A,()=>i.get(),x)])}},M=(t,r,i)=>{const d="tox-label",p=t.align==="center"?[`${d}--center`]:[],x=t.align==="end"?[`${d}--end`]:[],w=da({dom:{tag:"label",classes:[d,...p,...x]},components:[Di(r.providers.translate(t.label))]}),A=$e(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[w.asSpec(),...A],behaviours:Ln([Fd.self(),Hs.config({}),AN(B.none()),rs.config({mode:"acyclic"}),zs("label",[$i(R=>{t.for.each($=>{i($).each(W=>{w.getOpt(R).each(q=>{var se;const ge=(se=Ds(W.element,"id"))!==null&&se!==void 0?se:Ao("form-field");Kn(W.element,"id",ge),Kn(q.element,"for",ge)})})})})])])}},P=Ao("toolbar.button.execute"),N=t=>gp((r,i)=>{QE(t,r)(d=>{qo(r,P,{buttonApi:d}),t.onAction(d)})}),V=Ao("common-button-display-events"),G={[cu()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[od()]:["toolbar-button-events",V],[Wd()]:["toolbar-button-events","dropdown-events","tooltipping"],[_c()]:["focusing","alloy.base.behaviour",V]},Q=t=>Gn(t.element,"width",bn(t.element,"width")),pe=(t,r,i)=>vg(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:i},r),he=(t,r)=>pe(t,r,[]),xe=(t,r)=>pe(t,r,[Hs.config({})]),ie=(t,r,i)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Di(i.translate(t))],behaviours:Ln([Hs.config({})])}),ae=Ao("update-menu-text"),Ce=Ao("update-menu-icon"),ke=(t,r,i,d)=>{const p=wo(ue),x=t.text.map(Ie=>da(ie(Ie,r,i.providers))),w=t.icon.map(Ie=>da(xe(Ie,i.providers.icons))),A=(Ie,mt)=>{const Fe=ao.getValue(Ie);return Ms.focus(Fe),qo(Fe,"keydown",{raw:mt.event.raw}),Kf.close(Fe),B.some(!0)},R=t.role.fold(()=>({}),Ie=>({role:Ie})),$=B.from(t.listRole).map(Ie=>({listRole:Ie})).getOr({}),W=t.ariaLabel.fold(()=>({}),Ie=>({"aria-label":i.providers.translate(Ie)})),q=vg("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},i.providers.icons),se=Ao("common-button-display-events"),ge="dropdown-events";return da(Kf.sketch({...t.uid?{uid:t.uid}:{},...R,...$,dom:{tag:"button",classes:[r,`${r}--select`].concat($e(t.classes,Ie=>`${r}--${Ie}`)),attributes:{...W,...zn(d)?{"data-mce-name":d}:{}}},components:PS([w.map(Ie=>Ie.asSpec()),x.map(Ie=>Ie.asSpec()),B.some(q)]),matchWidth:!0,useMinWidth:!0,onOpen:(Ie,mt,Fe)=>{t.searchable&&iL(Fe)},dropdownBehaviours:Ln([...t.dropdownBehaviours,qf.button(()=>t.disabled||i.providers.checkUiComponentContext(t.context).shouldDisable),dl(()=>i.providers.checkUiComponentContext(t.context)),Cm.config({}),Hs.config({}),...t.tooltip.map(Ie=>lc.config(i.providers.tooltips.getConfig({tooltipText:i.providers.translate(Ie)}))).toArray(),zs(ge,[Pp(t,p),Wu(t,p)]),zs(se,[$i((Ie,mt)=>{t.listRole!=="listbox"&&Q(Ie)})]),zs("update-dropdown-width-variable",[on($a(),(Ie,mt)=>Kf.close(Ie))]),zs("menubutton-update-display-text",[on(ae,(Ie,mt)=>{x.bind(Fe=>Fe.getOpt(Ie)).each(Fe=>{Hs.set(Fe,[Di(i.providers.translate(mt.event.text))])})}),on(Ce,(Ie,mt)=>{w.bind(Fe=>Fe.getOpt(Ie)).each(Fe=>{Hs.set(Fe,[xe(mt.event.icon,i.providers.icons)])})})])]),eventOrder:mi(G,{[_c()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[od()]:["toolbar-button-events",lc.name(),ge,se]}),sandboxBehaviours:Ln([rs.config({mode:"special",onLeft:A,onRight:A}),zs("dropdown-sandbox-events",[on(h3,(Ie,mt)=>{fx(Ie),mt.stop()}),on(XI,(Ie,mt)=>{QS(Ie,mt),mt.stop()})])]),lazySink:i.getSink,toggleClass:`${r}--active`,parts:{menu:{...Q1(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:OM,onCollapseMenu:(Ie,mt,Fe)=>{Cn.getHighlighted(Fe).each(nt=>{OM(Ie,Fe,nt)})},onDehighlightItem:m5}}},getAnchorOverrides:()=>({maxHeightFunction:(Ie,mt)=>{p2()(Ie,mt-10)}}),fetch:Ie=>Id.nu(qn(t.fetch,Ie))})).asSpec()},Re=t=>Tt(t),Ye=t=>t.type==="separator",vt=t=>Ls(t,"getSubmenuItems"),en={type:"separator"},jt=(t,r)=>{const i=Pn(t,(d,p)=>Re(p)?p===""?d:p==="|"?d.length>0&&!Ye(d[d.length-1])?d.concat([en]):d:Ls(r,p.toLowerCase())?d.concat([r[p.toLowerCase()]]):d:d.concat([p]),[]);return i.length>0&&Ye(i[i.length-1])&&i.pop(),i},cn=(t,r)=>{const i=t.getSubmenuItems(),d=fo(i,r),p=mi(d.menus,{[t.value]:d.items}),x=mi(d.expansions,{[t.value]:t.value});return{item:t,menus:p,expansions:x}},Dn=t=>{const r=vn(t,"value").getOrThunk(()=>Ao("generated-menu-item"));return mi({value:r},t)},fo=(t,r)=>{const i=jt(Tt(t)?t.split(" "):t,r);return Mt(i,(d,p)=>{if(vt(p)){const x=Dn(p),w=cn(x,r);return{menus:mi(d.menus,w.menus),items:[w.item,...d.items],expansions:mi(d.expansions,w.expansions)}}else return{...d,items:[p,...d.items]}},{menus:{},expansions:{},items:[]})},jo=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),ls=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),As=(t,r,i,d)=>{const p=Ao("primary-menu"),x=fo(t,i.shared.providers.menuItems());if(x.items.length===0)return B.none();const w=jo(d),A=RM(p,x.items,r,i,d.isHorizontalMenu,w),R=ls(d),$=Mn(x.menus,(q,se)=>RM(se,q,r,i,!1,R)),W=mi($,Ss(p,A));return B.from(Fb.tieredData(p,W,x.expansions))},pr=t=>!Ls(t,"items"),fi="data-value",Zi=(t,r,i,d,p)=>$e(i,x=>pr(x)?{type:"togglemenuitem",...p?{}:{role:"option"},text:x.text,value:x.value,active:x.value===d,onAction:()=>{ao.setValue(t,x.value),qo(t,eg,{name:r}),Ms.focus(t)}}:{type:"nestedmenuitem",text:x.text,getSubmenuItems:()=>Zi(t,r,x.items,d,p)}),ca=(t,r)=>rt(t,i=>pr(i)?Lo(i.value===r,i):ca(i.items,r)),ta=(t,r,i)=>{const d=ft(t.items,$=>!pr($)),p=r.shared.providers,x=i.bind($=>ca(t.items,$)).orThunk(()=>Hn(t.items).filter(pr)),w=t.label.map($=>nv($,p)),A=ra.parts.field({dom:{},factory:{sketch:$=>ke({context:t.context,uid:$.uid,text:x.map(W=>W.text),icon:B.none(),tooltip:B.none(),role:Lo(!d,"combobox"),...d?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(W,q)=>{const se=Zi(W,t.name,t.items,ao.getValue(W),d);q(As(se,Fp.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:B.none()}))},onSetup:re(ue),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Wi.config({}),D0(x.map(W=>W.value),W=>Ds(W.element,fi),(W,q)=>{ca(t.items,q).each(se=>{Kn(W.element,fi,se.value),qo(W,ae,{text:se.text})})})]},"tox-listbox",r.shared)}}),R={dom:{tag:"div",classes:["tox-listboxfield"]},components:[A]};return ra.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ne([w.toArray(),[R]]),fieldBehaviours:Ln([Wo.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable,onDisabled:$=>{ra.getField($).each(Wo.disable)},onEnabled:$=>{ra.getField($).each(Wo.enable)}})])})},ys=(t,r)=>({dom:{tag:"div",classes:t.classes},components:$e(t.items,r.shared.interpreter)}),ti=(t,r)=>{const i=$e(t.options,p=>({dom:{tag:"option",value:p.value,innerHtml:p.text}})),d=t.data.map(p=>Ss("initialValue",p)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:i,behaviours:nc(t.selectBehaviours,[Ms.config({}),ao.config({store:{mode:"manual",getValue:p=>zg(p.element),setValue:(p,x)=>{const w=Hn(t.options);ce(t.options,R=>R.value===x).isSome()?T1(p.element,x):p.element.dom.selectedIndex===-1&&x===""&&w.each(R=>T1(p.element,R.value))},...d}})])}},ja=Ym({name:"HtmlSelect",configFields:[dn("options"),Ll("selectBehaviours",[Ms,ao]),Ct("selectClasses",[]),Ct("selectAttributes",{}),Cs("data")],factory:ti}),dd=(t,r,i)=>{const d=$e(t.items,R=>({text:r.translate(R.text),value:R.value})),p=t.label.map(R=>nv(R,r)),x=ra.parts.field({dom:{},...i.map(R=>({data:R})).getOr({}),selectAttributes:{size:t.size},options:d,factory:ja,selectBehaviours:Ln([Wo.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),Wi.config({}),zs("selectbox-change",[on(tb(),(R,$)=>{qo(R,eg,{name:t.name})})])])}),w=t.size>1?B.none():B.some(vg("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),A={dom:{tag:"div",classes:["tox-selectfield"]},components:Ne([[x],w.toArray()])};return ra.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ne([p.toArray(),[A]]),fieldBehaviours:Ln([Wo.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:R=>{ra.getField(R).each(Wo.disable)},onEnabled:R=>{ra.getField(R).each(Wo.enable)}}),dl(()=>r.checkUiComponentContext(t.context))])})},pi=re([Ct("field1Name","field1"),Ct("field2Name","field2"),w1("onLockedChange"),lb(["lockClass"]),Ct("locked",!1),vm.field("coupledFieldBehaviours",[Kr,ao]),Ea("onInput",ue)]),ml=(t,r,i)=>ii(t,r,i).bind(Kr.getCurrent),zl=(t,r)=>Du({factory:ra,name:t,overrides:i=>({fieldBehaviours:Ln([zs("coupled-input-behaviour",[on(lg(),d=>{ml(d,i,r).each(p=>{ii(d,i,"lock").each(x=>{dr.isOn(x)&&i.onLockedChange(d,p,x),i.onInput(d)})})})])])})}),R0=re([zl("field1","field2"),zl("field2","field1"),Du({factory:Hl,schema:[dn("dom")],name:"lock",overrides:t=>({buttonBehaviours:Ln([dr.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),TC=(t,r,i,d)=>({uid:t.uid,dom:t.dom,components:r,behaviours:vm.augment(t.coupledFieldBehaviours,[Kr.config({find:B.some}),ao.config({store:{mode:"manual",getValue:p=>{const x=Rd(p,t,["field1","field2"]);return{[t.field1Name]:ao.getValue(x.field1()),[t.field2Name]:ao.getValue(x.field2())}},setValue:(p,x)=>{const w=Rd(p,t,["field1","field2"]);Ba(x,t.field1Name)&&ao.setValue(w.field1(),x[t.field1Name]),Ba(x,t.field2Name)&&ao.setValue(w.field2(),x[t.field2Name])}}})]),apis:{getField1:p=>ii(p,t,"field1"),getField2:p=>ii(p,t,"field2"),getLock:p=>ii(p,t,"lock")}}),km=cd({name:"FormCoupledInputs",configFields:pi(),partFields:R0(),factory:TC,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),E4=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},i=p=>p in r?r[p]:1;let d=t.value.toFixed(i(t.unit));return d.indexOf(".")!==-1&&(d=d.replace(/\.?0*$/,"")),d+t.unit},av=t=>{const i=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(i!==null){const d=parseFloat(i[1]),p=i[2];return Ws.value({value:d,unit:p})}else return Ws.error(t)},M0=(t,r)=>{const i={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},d=p=>Ls(i,p);return t.unit===r?B.some(t.value):d(t.unit)&&d(r)?i[t.unit]===i[r]?B.some(t.value):B.some(t.value/i[t.unit]*i[r]):B.none()},Hh=t=>B.none(),fk=(t,r)=>i=>M0(i,r).map(d=>({value:d*t,unit:r})),EC=(t,r)=>{const i=av(t).toOptional(),d=av(r).toOptional();return bi(i,d,(p,x)=>M0(p,x.unit).map(w=>x.value/w).map(w=>fk(w,x.unit)).getOr(Hh)).getOr(Hh)},iv=(t,r)=>{let i=Hh;const d=Ao("ratio-event"),p=Fe=>vg(Fe,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Fe]},r.icons),x=()=>!t.enabled||t.context.exists(Fe=>r.checkUiComponentContext(Fe).shouldDisable),w=t.context.map(Fe=>dl(()=>r.checkUiComponentContext(Fe))),A=t.label.getOr("Constrain proportions"),R=r.translate(A),$=km.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":R,"data-mce-name":A}},components:[p("lock"),p("unlock")],buttonBehaviours:Ln([Wo.config({disabled:x}),...w.toArray(),Wi.config({}),lc.config(r.tooltips.getConfig({tooltipText:R}))])}),W=Fe=>({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:Fe}),q=Fe=>ra.parts.field({factory:Nh,inputClasses:t.inDialog?["tox-textfield"]:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Fe?t.width:t.height,inputBehaviours:Ln([Wo.config({disabled:x}),...w.toArray(),Wi.config({}),zs("size-input-events",[on(wf(),(nt,lt)=>{qo(nt,d,{isField1:Fe})}),on(tb(),(nt,lt)=>{t.name.each(Ft=>qo(nt,eg,{name:Ft}))})]),...t.onEnter.map(nt=>rs.config({mode:"special",onEnter:nt})).toArray()]),selectOnFocus:!1}),se=Fe=>({dom:{tag:"label",classes:["tox-label"]},components:[Di(r.translate(Fe))]}),ge=km.parts.field1(W([ra.parts.label(se("Width")),q(!0)])),Ae=km.parts.field2(W([ra.parts.label(se("Height")),q(!1)])),Ie=wo(ue),mt=bi(t.onSetup,t.getApi,(Fe,nt)=>[Pp({onSetup:Fe,getApi:nt},Ie),Wu({getApi:nt},Ie)]).getOr([]);return km.sketch({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[ge,Ae,W([se(wT),$])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Fe,nt,lt)=>{av(ao.getValue(Fe)).each(Ft=>{i(Ft).each(zt=>{ao.setValue(nt,E4(zt))})})},onInput:Fe=>xr(Fe,VM),coupledFieldBehaviours:Ln([Wo.config({disabled:x,onDisabled:Fe=>{km.getField1(Fe).bind(ra.getField).each(Wo.disable),km.getField2(Fe).bind(ra.getField).each(Wo.disable),km.getLock(Fe).each(Wo.disable)},onEnabled:Fe=>{km.getField1(Fe).bind(ra.getField).each(Wo.enable),km.getField2(Fe).bind(ra.getField).each(Wo.enable),km.getLock(Fe).each(Wo.enable)}}),dl(()=>r.checkUiComponentContext("mode:design")),zs("size-input-events",[on(d,(Fe,nt)=>{const lt=nt.event.isField1,Ft=lt?km.getField1(Fe):km.getField2(Fe),zt=lt?km.getField2(Fe):km.getField1(Fe),Zn=Ft.map(ao.getValue).getOr(""),Mo=zt.map(ao.getValue).getOr("");i=EC(Zn,Mo)}),on(VM,Fe=>{t.onInput.each(nt=>nt(Fe))}),...mt])])})},pk=(t,r)=>iv({inDialog:!0,label:t.label,enabled:t.enabled,context:B.some(t.context),name:B.some(t.name),width:"",height:"",onEnter:B.none(),onInput:B.none(),onSetup:B.none(),getApi:B.none()},r),_C=(t,r,i)=>{const d=Jd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Di(r.translate(t.label))]}),p=Jd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),x=Jd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Jd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:re(i.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[d,p,x],sliderBehaviours:Ln([Fd.self(),Ms.config({})]),onChoose:(w,A,R)=>{qo(w,eg,{name:t.name,value:R})},onChange:(w,A,R)=>{qo(w,eg,{name:t.name,value:R})}})},L_=(t,r)=>{const i=A=>({dom:{tag:"th",innerHtml:r.translate(A)}}),d=A=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$e(A,i)}]}),p=A=>({dom:{tag:"td",innerHtml:r.translate(A)}}),x=A=>({dom:{tag:"tr"},components:$e(A,p)}),w=A=>({dom:{tag:"tbody"},components:$e(A,x)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[d(t.header),w(t.cells)],behaviours:Ln([Wi.config({}),Ms.config({})])}},hk=(t,r)=>{const i=t.label.map(ge=>nv(ge,r)),d=[Wo.config({disabled:()=>t.disabled||r.checkUiComponentContext(t.context).shouldDisable}),dl(()=>r.checkUiComponentContext(t.context)),rs.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:ge=>(xr(ge,nk),B.some(!0))}),zs("textfield-change",[on(lg(),(ge,Ae)=>{qo(ge,eg,{name:t.name})}),on(U0(),(ge,Ae)=>{qo(ge,eg,{name:t.name})})]),Wi.config({})],p=t.validation.map(ge=>Vp.config({getRoot:Ae=>Wa(Ae.element),invalidClass:"tox-invalid",validator:{validate:Ae=>{const Ie=ao.getValue(Ae),mt=ge.validator(Ie);return Id.pure(mt===!0?Ws.value(Ie):Ws.error(mt))},validateOnLoad:ge.validateOnLoad}})).toArray(),x=t.placeholder.fold(re({}),ge=>({placeholder:r.translate(ge)})),w=t.inputMode.fold(re({}),ge=>({inputmode:ge})),A={...x,...w,"data-mce-name":t.name},R=ra.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(ge=>({data:ge})).getOr({}),inputAttributes:A,inputClasses:[t.classname],inputBehaviours:Ln(Ne([d,p])),selectOnFocus:!1,factory:Nh}),$=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[R]}:R,q=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),se=[Wo.config({disabled:()=>t.disabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:ge=>{ra.getField(ge).each(Wo.disable)},onEnabled:ge=>{ra.getField(ge).each(Wo.enable)}}),dl(()=>r.checkUiComponentContext(t.context))];return bC(i,$,q,se)},bk=(t,r,i)=>hk({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:B.none(),maximized:t.maximized,data:i,context:t.context},r),N0=(t,r,i)=>hk({name:t.name,multiline:!0,label:t.label,inputMode:B.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:B.none(),maximized:t.maximized,data:i,context:t.context},r),jp=(t,r)=>r.getAnimationRoot.fold(()=>t.element,i=>i(t)),wr=t=>t.dimension.property,Jf=(t,r)=>t.dimension.getDimension(r),af=(t,r)=>{const i=jp(t,r);kf(i,[r.shrinkingClass,r.growingClass])},$_=(t,r)=>{Hi(t.element,r.openClass),Cc(t.element,r.closedClass),Gn(t.element,wr(r),"0px"),ou(t.element)},vk=(t,r)=>{Hi(t.element,r.closedClass),Cc(t.element,r.openClass),cr(t.element,wr(r))},yk=(t,r,i,d)=>{i.setCollapsed(),Gn(t.element,wr(r),Jf(r,t.element)),af(t,r),$_(t,r),r.onStartShrink(t),r.onShrunk(t)},_4=(t,r,i,d)=>{const p=d.getOrThunk(()=>Jf(r,t.element));i.setCollapsed(),Gn(t.element,wr(r),p),ou(t.element);const x=jp(t,r);Hi(x,r.growingClass),Cc(x,r.shrinkingClass),$_(t,r),r.onStartShrink(t)},H_=(t,r,i)=>{const d=Jf(r,t.element);(d==="0px"?yk:_4)(t,r,i,B.some(d))},cv=(t,r,i)=>{const d=jp(t,r),p=kd(d,r.shrinkingClass),x=Jf(r,t.element);vk(t,r);const w=Jf(r,t.element);(p?()=>{Gn(t.element,wr(r),x),ou(t.element)}:()=>{$_(t,r)})(),Hi(d,r.shrinkingClass),Cc(d,r.growingClass),vk(t,r),Gn(t.element,wr(r),w),i.setExpanded(),r.onStartGrow(t)},xk=(t,r,i)=>{if(i.isExpanded()){cr(t.element,wr(r));const d=Jf(r,t.element);Gn(t.element,wr(r),d)}},A4=(t,r,i)=>{i.isExpanded()||cv(t,r,i)},WN=(t,r,i)=>{i.isExpanded()&&H_(t,r,i)},qL=(t,r,i)=>{i.isExpanded()&&yk(t,r,i)},z_=(t,r,i)=>i.isExpanded(),fP=(t,r,i)=>i.isCollapsed(),Pd=(t,r,i)=>{const d=jp(t,r);return kd(d,r.growingClass)===!0},AC=(t,r,i)=>{const d=jp(t,r);return kd(d,r.shrinkingClass)===!0};var bP=Object.freeze({__proto__:null,refresh:xk,grow:A4,shrink:WN,immediateShrink:qL,hasGrown:z_,hasShrunk:fP,isGrowing:Pd,isShrinking:AC,isTransitioning:(t,r,i)=>Pd(t,r)||AC(t,r),toggleGrow:(t,r,i)=>{(i.isExpanded()?H_:cv)(t,r,i)},disableTransitions:af,immediateGrow:(t,r,i)=>{i.isExpanded()||(vk(t,r),Gn(t.element,wr(r),Jf(r,t.element)),af(t,r),i.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),jN=Object.freeze({__proto__:null,exhibit:(t,r,i)=>{const d=r.expanded;return mm(d?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:Ss(r.dimension.property,"0px")})},events:(t,r)=>ya([u1(cp(),(i,d)=>{d.event.raw.propertyName===t.dimension.property&&(af(i,t),r.isExpanded()&&cr(i.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(i))})])}),ZN=[dn("closedClass"),dn("openClass"),dn("shrinkingClass"),dn("growingClass"),Cs("getAnimationRoot"),Ar("onShrunk"),Ar("onStartShrink"),Ar("onGrown"),Ar("onStartGrow"),Ct("expanded",!1),ia("dimension",fc("property",{width:[xi("property","width"),xi("getDimension",t=>_e(t)+"px")],height:[xi("property","height"),xi("getDimension",t=>uc(t)+"px")]}))],wk=Object.freeze({__proto__:null,init:t=>{const r=wo(t.expanded),i=()=>"expanded: "+r.get();return lu({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:qn(r.set,!1),setExpanded:qn(r.set,!0),readState:i})}});const Tm=xl({fields:ZN,name:"sliding",active:jN,apis:bP,state:wk}),vP=t=>({isEnabled:()=>!Wo.isDisabled(t),setEnabled:r=>Wo.set(t,!r),setActive:r=>{const i=t.element;r?(Cc(i,"tox-tbtn--enabled"),Kn(i,"aria-pressed",!0)):(Hi(i,"tox-tbtn--enabled"),fe(i,"aria-pressed"))},isActive:()=>kd(t.element,"tox-tbtn--enabled"),setText:r=>{qo(t,ae,{text:r})},setIcon:r=>qo(t,Ce,{icon:r})}),uv=(t,r,i,d,p=!0,x)=>ke({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:d,fetch:(w,A)=>{const R={pattern:t.search.isSome()?cL(w):""};t.fetch($=>{A(As($,Fp.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:t.search}))},R,vP(w))},onSetup:t.onSetup,getApi:vP,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...p?[Wi.config({})]:[]],context:t.context},r,i.shared,x),yP=(t,r,i)=>{const d=x=>w=>{const A=!w.isActive();w.setActive(A),x.storage.set(A),i.shared.getSink().each(R=>{r().getOpt(R).each($=>{Zd($.element),qo($,Yf,{name:x.name,value:x.storage.get()})})})},p=x=>w=>{w.setActive(x.storage.get())};return x=>{x($e(t,w=>{const A=w.text.fold(()=>({}),R=>({text:R}));return{type:w.type,active:!1,...A,context:w.context,onAction:d(w),onSetup:p(w)}}))}},Gb=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Di(t)]}),GN=(t,r,i)=>{t.customStateIcon.each(d=>r.push(R4(d,i.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],p=>[lc.config(i.shared.providers.tooltips.getConfig({tooltipText:p}))]),["tox-icon-custom-state"])))},qN=Ao("leaf-label-event-id"),D4=({leaf:t,onLeafAction:r,visible:i,treeId:d,selectedId:p,backstage:x})=>{const w=t.menu.map(R=>uv(R,"tox-mbtn",x,B.none(),i)),A=[Gb(t.title)];return GN(t,A,x),w.each(R=>A.push(R)),Hl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(i?["tox-tree--leaf__label--visible"]:[])},components:A,role:"treeitem",action:R=>{r(t.id),R.getSystem().broadcastOn([`update-active-item-${d}`],{value:t.id})},eventOrder:{[nd()]:[qN,"keying"]},buttonBehaviours:Ln([...i?[Wi.config({})]:[],dr.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),qm.config({channels:{[`update-active-item-${d}`]:{onReceive:(R,$)=>{($.value===t.id?dr.on:dr.off)(R)}}}}),zs(qN,[$i((R,$)=>{p.each(W=>{(W===t.id?dr.on:dr.off)(R)})}),on(nd(),(R,$)=>{const W=$.event.raw.code==="ArrowLeft",q=$.event.raw.code==="ArrowRight";W?(zc(R.element,".tox-tree--directory").each(se=>{R.getSystem().getByDom(se).each(ge=>{mg(se,".tox-tree--directory__label").each(Ae=>{ge.getSystem().getByDom(Ae).each(Ms.focus)})})}),$.stop()):q&&$.stop()})])])})},R4=(t,r,i,d,p)=>vg(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(d||[]),behaviours:i,attributes:p},r),KN=(t,r)=>R4(t,r,[]),_t=Ao("directory-label-event-id"),Cr=({directory:t,visible:r,noChildren:i,backstage:d})=>{const p=t.menu.map(A=>uv(A,"tox-mbtn",d,B.none())),x=[{dom:{tag:"div",classes:["tox-chevron"]},components:[KN("chevron-right",d.shared.providers.icons)]},Gb(t.title)];GN(t,x,d),p.each(A=>{x.push(A)});const w=A=>{zc(A.element,".tox-tree--directory").each(R=>{A.getSystem().getByDom(R).each($=>{const W=!dr.isOn($);dr.toggle($),qo(A,"expand-tree-node",{expanded:W,node:t.id})})})};return Hl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:x,action:w,eventOrder:{[nd()]:[_t,"keying"]},buttonBehaviours:Ln([...r?[Wi.config({})]:[],zs(_t,[on(nd(),(A,R)=>{const $=R.event.raw.code==="ArrowRight",W=R.event.raw.code==="ArrowLeft";$&&i&&R.stop(),($||W)&&zc(A.element,".tox-tree--directory").each(q=>{A.getSystem().getByDom(q).each(se=>{!dr.isOn(se)&&$||dr.isOn(se)&&W?(w(A),R.stop()):W&&!dr.isOn(se)&&(zc(se.element,".tox-tree--directory").each(ge=>{mg(ge,".tox-tree--directory__label").each(Ae=>{se.getSystem().getByDom(Ae).each(Ms.focus)})}),R.stop())})})})])])})},Zs=({children:t,onLeafAction:r,visible:i,treeId:d,expandedIds:p,selectedId:x,backstage:w})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(A=>A.type==="leaf"?D4({leaf:A,selectedId:x,onLeafAction:r,visible:i,treeId:d,backstage:w}):bc({directory:A,expandedIds:p,selectedId:x,onLeafAction:r,labelTabstopping:i,treeId:d,backstage:w})),behaviours:Ln([Tm.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:i}),Hs.config({})])}),oc=Ao("directory-event-id"),bc=({directory:t,onLeafAction:r,labelTabstopping:i,treeId:d,backstage:p,expandedIds:x,selectedId:w})=>{const{children:A}=t,R=wo(x),$=q=>A.map(se=>se.type==="leaf"?D4({leaf:se,selectedId:w,onLeafAction:r,visible:q,treeId:d,backstage:p}):bc({directory:se,expandedIds:R.get(),selectedId:w,onLeafAction:r,labelTabstopping:q,treeId:d,backstage:p})),W=x.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Cr({directory:t,visible:i,noChildren:t.children.length===0,backstage:p}),Zs({children:A,expandedIds:x,selectedId:w,onLeafAction:r,visible:W,treeId:d,backstage:p})],behaviours:Ln([zs(oc,[$i((q,se)=>{dr.set(q,W)}),on("expand-tree-node",(q,se)=>{const{expanded:ge,node:Ae}=se.event;R.set(ge?[...R.get(),Ae]:R.get().filter(Ie=>Ie!==Ae))})]),dr.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(q,se)=>{const ge=q.components()[1],Ae=$(se);se?Tm.grow(ge):Tm.shrink(ge),Hs.set(ge,Ae)}})])}},Si=Ao("tree-event-id"),Qd=(t,r)=>{const i=t.onLeafAction.getOr(ue),d=t.onToggleExpand.getOr(ue),p=t.defaultExpandedIds,x=wo(p),w=wo(t.defaultSelectedId),A=Ao("tree-id"),R=($,W)=>t.items.map(q=>q.type==="leaf"?D4({leaf:q,selectedId:$,onLeafAction:i,visible:!0,treeId:A,backstage:r}):bc({directory:q,selectedId:$,onLeafAction:i,expandedIds:W,labelTabstopping:!0,treeId:A,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:R(w.get(),x.get()),behaviours:Ln([rs.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),zs(Si,[on("expand-tree-node",($,W)=>{const{expanded:q,node:se}=W.event;x.set(q?[...x.get(),se]:x.get().filter(ge=>ge!==se)),d(x.get(),{expanded:q,node:se})})]),qm.config({channels:{[`update-active-item-${A}`]:{onReceive:($,W)=>{w.set(B.some(W.value)),Hs.set($,R(B.some(W.value),x.get()))}}}}),Hs.config({})])}};var dv=Object.freeze({__proto__:null,events:(t,r)=>{const d=t.stream.streams.setup(t,r);return ya([on(t.event,d),Cd(()=>r.cancel())].concat(t.cancelEvent.map(p=>[on(p,()=>r.cancel())]).getOr([])))}});const Em=t=>{const r=wo(null);return lu({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:x=>{r.set(x)},cancel:()=>{const x=r.get();x!==null&&x.cancel()}})};var YN=Object.freeze({__proto__:null,throttle:Em,init:t=>t.stream.streams.state(t)});const xP=(t,r)=>{const i=t.stream,d=C4(t.onStream,i.delay);return r.setTimer(d),(p,x)=>{d.throttle(p,x),i.stopEvent&&x.stop()}};var $V=[ia("stream",fc("mode",{throttle:[dn("delay"),Ct("stopEvent",!0),xi("streams",{setup:xP,state:Em})]})),Ct("event","input"),Cs("cancelEvent"),w1("onStream")];const KL=xl({fields:$V,name:"streaming",active:dv,state:YN}),wP=(t,r,i)=>{const d=ao.getValue(i);ao.setValue(r,d),X7(r)},Y7=(t,r)=>{const i=t.element,d=zg(i),p=i.dom;Ds(i,"type")!=="number"&&r(p,d)},X7=t=>{Y7(t,(r,i)=>r.setSelectionRange(i.length,i.length))},HV=(t,r)=>{Y7(t,(i,d)=>i.setSelectionRange(r,d.length))},zV=(t,r,i)=>{if(t.selectsOver){const d=ao.getValue(r),p=t.getDisplayText(d),x=ao.getValue(i);return t.getDisplayText(x).indexOf(p)===0?B.some(()=>{wP(t,r,i),HV(r,p.length)}):B.none()}else return B.none()},YL=re("alloy.typeahead.itemexecute"),VV=(t,r,i,d)=>{const p=(q,se,ge)=>{t.previewing.set(!1);const Ae=el.getCoupled(q,"sandbox");if(qr.isOpen(Ae))Kr.getCurrent(Ae).each(Ie=>{Cn.getHighlighted(Ie).fold(()=>{ge(Ie)},()=>{IC(Ae,Ie.element,"keydown",se)})});else{const Ie=mt=>{Kr.getCurrent(mt).each(ge)};q3(t,w(q),q,Ae,d,Ie,fu.HighlightMenuAndItem).get(ue)}},x=MR(t),w=q=>se=>se.map(ge=>{const Ae=Pa(ge.menus),Ie=oe(Ae,Fe=>Et(Fe.items,nt=>nt.type==="item"));return ao.getState(q).update($e(Ie,Fe=>Fe.data)),ge}),A=q=>Kr.getCurrent(q),R="typeaheadevents",$=[Ms.config({}),ao.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:q=>zg(q.element),getFallbackEntry:q=>({value:q,meta:{}}),setValue:(q,se)=>{T1(q.element,t.model.getDisplayText(se))},...t.initialData.map(q=>Ss("initialValue",q)).getOr({})}}),KL.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(q,se)=>{const ge=el.getCoupled(q,"sandbox");if(Ms.isFocused(q)&&zg(q.element).length>=t.minChars){const Ie=A(ge).bind(Fe=>Cn.getHighlighted(Fe).map(ao.getValue));t.previewing.set(!0);const mt=Fe=>{A(ge).each(nt=>{Ie.fold(()=>{t.model.selectsOver&&Cn.highlightFirst(nt)},lt=>{Cn.highlightBy(nt,Ft=>ao.getValue(Ft).value===lt.value),Cn.getHighlighted(nt).orThunk(()=>(Cn.highlightFirst(nt),B.none()))})})};q3(t,w(q),q,ge,d,mt,fu.HighlightJustMenu).get(ue)}},cancelEvent:_v()}),rs.config({mode:"special",onDown:(q,se)=>(p(q,se,Cn.highlightFirst),B.some(!0)),onEscape:q=>{const se=el.getCoupled(q,"sandbox");return qr.isOpen(se)?(qr.close(se),B.some(!0)):B.none()},onUp:(q,se)=>(p(q,se,Cn.highlightLast),B.some(!0)),onEnter:q=>{const se=el.getCoupled(q,"sandbox"),ge=qr.isOpen(se);if(ge&&!t.previewing.get())return A(se).bind(Ae=>Cn.getHighlighted(Ae)).map(Ae=>(qo(q,YL(),{item:Ae}),!0));{const Ae=ao.getValue(q);return xr(q,_v()),t.onExecute(se,q,Ae),ge&&qr.close(se),B.some(!0)}}}),dr.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),el.config({others:{sandbox:q=>gC(t,q,{onOpen:()=>dr.on(q),onClose:()=>{t.lazyTypeaheadComp.get().each(se=>fe(se.element,"aria-activedescendant")),dr.off(q)}})}}),zs(R,[$i(q=>{t.lazyTypeaheadComp.set(B.some(q))}),Cd(q=>{t.lazyTypeaheadComp.set(B.none())}),gp(q=>{const se=ue;TM(t,w(q),q,d,se,fu.HighlightMenuAndItem).get(ue)}),on(YL(),(q,se)=>{const ge=el.getCoupled(q,"sandbox");wP(t.model,q,se.event.item),xr(q,_v()),t.onItemExecute(q,ge,se.event.item,ao.getValue(q)),qr.close(ge),X7(q)})].concat(t.dismissOnBlur?[on(rh(),q=>{const se=el.getCoupled(q,"sandbox");Ad(se.element).isNone()&&qr.close(se)})]:[]))],W={[Wd()]:[ao.name(),KL.name(),R],...t.eventOrder};return{uid:t.uid,dom:p3(mi(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...x,...nc(t.typeaheadBehaviours,$)},eventOrder:W}},UV=re([Cs("lazySink"),dn("fetch"),Ct("minChars",5),Ct("responseTime",1e3),Ar("onOpen"),Ct("getHotspot",B.some),Ct("getAnchorOverrides",re({})),Ct("layouts",B.none()),Ct("eventOrder",{}),H("model",{},[Ct("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ct("selectsOver",!0),Ct("populateFromBrowse",!0)]),Ar("onSetValue"),rd("onExecute"),Ar("onItemExecute"),Ct("inputClasses",[]),Ct("inputAttributes",{}),Ct("inputStyles",{}),Ct("matchWidth",!0),Ct("useMinWidth",!1),Ct("dismissOnBlur",!0),lb(["openClass"]),Cs("initialData"),Cs("listRole"),Ll("typeaheadBehaviours",[Ms,ao,KL,rs,dr,el]),aa("lazyTypeaheadComp",()=>wo(B.none)),aa("previewing",()=>wo(!0))].concat(jE()).concat(gx())),J7=re([fg({schema:[oy()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,i,d)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(p=>{zV(t.model,p,d).fold(()=>{t.model.selectsOver?(Cn.dehighlight(i,d),t.previewing.set(!0)):t.previewing.set(!1)},x=>{x(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(p=>{t.model.populateFromBrowse&&wP(t.model,p,d),br(d.element,"id").each(x=>Kn(p.element,"aria-activedescendant",x))})},onExecute:(r,i)=>t.lazyTypeaheadComp.get().map(d=>(qo(d,YL(),{item:i}),!0)),onHover:(r,i)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&wP(t.model,d,i)})}})})]),WV=cd({name:"Typeahead",configFields:UV(),partFields:J7(),factory:VV}),mv=t=>({...t,toCached:()=>mv(t.toCached()),bindFuture:R=>mv(t.bind($=>$.fold(W=>Id.pure(Ws.error(W)),W=>R(W)))),bindResult:R=>mv(t.map($=>$.bind(R))),mapResult:R=>mv(t.map($=>$.map(R))),mapError:R=>mv(t.map($=>$.mapError(R))),foldResult:(R,$)=>t.map(W=>W.fold(R,$)),withTimeout:(R,$)=>mv(Id.nu(W=>{let q=!1;const se=setTimeout(()=>{q=!0,W(Ws.error($()))},R);t.get(ge=>{q||(clearTimeout(se),W(ge))})}))}),Q7=t=>mv(Id.nu(t)),eH=t=>mv(Id.pure(Ws.value(t))),tH={nu:Q7,wrap:mv,pure:eH,value:eH,error:t=>mv(Id.pure(Ws.error(t))),fromResult:t=>mv(Id.pure(t)),fromFuture:t=>mv(t.map(Ws.value)),fromPromise:t=>Q7(r=>{t.then(i=>{r(Ws.value(i))},i=>{r(Ws.error(i))})})},CP=(t,r,i=[],d,p,x,w)=>{const A=r.fold(()=>({}),W=>({action:W})),R={buttonBehaviours:Ln([qf.item(()=>!t.enabled||w.checkUiComponentContext(t.context).shouldDisable),dl(()=>w.checkUiComponentContext(t.context)),Wi.config({}),...x.map(W=>lc.config(w.tooltips.getConfig({tooltipText:w.translate(W)}))).toArray(),zs("button press",[PC("click")])].concat(i)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...A},$=mi(R,{dom:d});return mi($,{components:p})},nH=(t,r,i,d=[],p)=>{const x=t.tooltip.map($=>({"aria-label":i.translate($)})).getOr({}),w={tag:"button",classes:["tox-tbtn"],attributes:{...x,"data-mce-name":p}},A=t.icon.map($=>he($,i.icons)),R=PS([A]);return CP(t,r,d,w,R,t.tooltip,i)},SP=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},kP=(t,r,i,d=[],p=[])=>{const x=i.translate(t.text),w=t.icon.map(ge=>he(ge,i.icons)),A=[w.getOrThunk(()=>Di(x))],R=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),q={tag:"button",classes:[...SP(R),...w.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...p],attributes:{"aria-label":x,"data-mce-name":t.text}},se=t.icon.map(re(x));return CP(t,r,d,q,A,se,i)},oH=(t,r,i,d=[],p=[])=>{const x=kP(t,B.some(r),i,d,p);return Hl.sketch(x)},XL=(t,r)=>i=>{r==="custom"?qo(i,Yf,{name:t,value:{}}):r==="submit"?xr(i,nk):r==="cancel"?xr(i,ov):console.error("Unknown button type: ",r)},sH=(t,r)=>r==="menu",ZV=(t,r)=>r==="custom"||r==="cancel"||r==="submit",rH=(t,r)=>r==="togglebutton",GV=(t,r,i)=>{var d,p;const x=t.icon.map(lt=>xe(lt,r.icons)).map(da),w=lt=>{qo(lt,Yf,{name:t.name,value:{setIcon:Ft=>{x.map(zt=>zt.getOpt(lt).each(Zn=>{Hs.set(Zn,[xe(Ft,r.icons)])}))}}})},A=t.buttonType.getOr(t.primary?"primary":"secondary"),R={...t,name:(d=t.name)!==null&&d!==void 0?d:"",primary:A==="primary",tooltip:t.tooltip,enabled:(p=t.enabled)!==null&&p!==void 0?p:!1,borderless:!1},$=R.tooltip.or(t.text).map(lt=>({"aria-label":r.translate(lt)})).getOr({}),W=SP(A??"secondary"),q=t.icon.isSome()&&t.text.isSome(),se={tag:"button",classes:[...W.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...q?["tox-button--icon-and-text"]:[]],attributes:{...$,...zn(i)?{"data-mce-name":i}:{}}},ge=[],Ae=r.translate(t.text.getOr("")),Ie=Di(Ae),Fe=[...PS([x.map(lt=>lt.asSpec())]),...t.text.isSome()?[Ie]:[]],nt=CP(R,B.some(w),ge,se,Fe,t.tooltip,r);return Hl.sketch(nt)},TP=(t,r,i)=>{if(sH(t,r)){const d=()=>w,p=t,x={...t,type:"menubutton",search:B.none(),onSetup:A=>(A.setEnabled(t.enabled),ue),fetch:yP(p.items,d,i)},w=da(uv(x,"tox-tbtn",i,B.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return w.asSpec()}else if(ZV(t,r)){const d=XL(t.name,r),p={...t,context:r==="cancel"?"any":t.context,borderless:!1};return oH(p,d,i.shared.providers,[])}else{if(rH(t,r))return GV(t,i.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")}},B0=(t,r)=>{const i=XL(t.name,"custom");return fL(B.none(),ra.parts.field({factory:Hl,...kP(t,B.some(i),r,[bx(""),Fd.self()])}))},EP={type:"separator"},_P=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ue}),JL=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:ue}),QL=t=>$e(t,_P),qV=(t,r)=>Et(r,i=>i.type===t),AP=(t,r)=>QL(qV(t,r)),aH=t=>AP("header",t.targets),e$=t=>AP("anchor",t.targets),KV=t=>B.from(t.anchorTop).map(r=>JL("<top>",r)).toArray(),YV=t=>B.from(t.anchorBottom).map(r=>JL("<bottom>",r)).toArray(),iH=t=>$e(t,r=>JL(r,r)),XV=t=>Pn(t,(r,i)=>r.length===0||i.length===0?r.concat(i):r.concat(EP,i),[]),t$=(t,r)=>{const i=t.toLowerCase();return Et(r,d=>{var p;const x=d.meta!==void 0&&d.meta.text!==void 0?d.meta.text:d.text,w=(p=d.value)!==null&&p!==void 0?p:"";return Oa(x.toLowerCase(),i)||Oa(w.toLowerCase(),i)})},n$=(t,r,i)=>{var d,p;const x=ao.getValue(r),w=(p=(d=x==null?void 0:x.meta)===null||d===void 0?void 0:d.text)!==null&&p!==void 0?p:x.value;return i.getLinkInformation().fold(()=>[],R=>{const $=t$(w,iH(i.getHistory(t)));return t==="file"?XV([$,t$(w,aH(R)),t$(w,Ne([KV(R),e$(R),YV(R)]))]):$})},cH=Ao("aria-invalid"),JV=(t,r,i,d)=>{const p=r.shared.providers,x=nt=>{const lt=ao.getValue(nt);i.addToHistory(lt.value,t.filetype)},w={...d.map(nt=>({initialData:nt})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":cH,type:"url"},minChars:0,responseTime:0,fetch:nt=>{const lt=n$(t.filetype,nt,i),Ft=As(lt,Fp.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:B.none()});return Id.pure(Ft)},getHotspot:nt=>Ae.getOpt(nt),onSetValue:(nt,lt)=>{nt.hasConfigured(Vp)&&Vp.run(nt).get(ue)},typeaheadBehaviours:Ln([...i.getValidationHandler().map(nt=>Vp.config({getRoot:lt=>Wa(lt.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(lt,Ft)=>{W.getOpt(lt).each(zt=>{Kn(zt.element,"title",p.translate(Ft))})}},validator:{validate:lt=>{const Ft=ao.getValue(lt);return tH.nu(zt=>{nt({type:t.filetype,url:Ft.value},Zn=>{if(Zn.status==="invalid"){const Mo=Ws.error(Zn.message);zt(Mo)}else{const Mo=Ws.value(Zn.message);zt(Mo)}})})},validateOnLoad:!1}})).toArray(),Wo.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable}),Wi.config({}),zs("urlinput-events",[on(lg(),nt=>{const lt=zg(nt.element),Ft=lt.trim();Ft!==lt&&T1(nt.element,Ft),t.filetype==="file"&&qo(nt,eg,{name:t.name})}),on(tb(),nt=>{qo(nt,eg,{name:t.name}),x(nt)}),on(U0(),nt=>{qo(nt,eg,{name:t.name}),x(nt)})])]),eventOrder:{[lg()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:nt=>nt.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:Q1(!1,1,"normal")},onExecute:(nt,lt,Ft)=>{qo(lt,nk,{})},onItemExecute:(nt,lt,Ft,zt)=>{x(nt),qo(nt,eg,{name:t.name})}},A=ra.parts.field({...w,factory:WV}),R=t.label.map(nt=>nv(nt,p)),W=da(((nt,lt,Ft=nt,zt=nt)=>vg(Ft,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+nt],attributes:{title:p.translate(zt),"aria-live":"polite",...lt.fold(()=>({}),Zn=>({id:Zn}))}},p.icons))("invalid",B.some(cH),"warning")),q=da({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[W.asSpec()]}),se=i.getUrlPicker(t.filetype),ge=Ao("browser.url.event"),Ae=da({dom:{tag:"div",classes:["tox-control-wrap"]},components:[A,q.asSpec()],behaviours:Ln([Wo.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable})])}),Ie=da(oH({context:t.context,name:t.name,icon:B.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:B.none(),borderless:!0},nt=>xr(nt,ge),p,[],["tox-browse-url"])),mt=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ne([[Ae.asSpec()],se.map(()=>Ie.asSpec()).toArray()])}),Fe=nt=>{Kr.getCurrent(nt).each(lt=>{const Ft=ao.getValue(lt),zt={fieldname:t.name,...Ft};se.each(Zn=>{Zn(zt).get(Mo=>{ao.setValue(lt,Mo),qo(nt,eg,{name:t.name})})})})};return ra.sketch({dom:pL(),components:R.toArray().concat([mt()]),fieldBehaviours:Ln([Wo.config({disabled:()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable,onDisabled:nt=>{ra.getField(nt).each(Wo.disable),Ie.getOpt(nt).each(Wo.disable)},onEnabled:nt=>{ra.getField(nt).each(Wo.enable),Ie.getOpt(nt).each(Wo.enable)}}),dl(()=>p.checkUiComponentContext(t.context)),zs("url-input-events",[on(ge,Fe)])])})},lH=(t,r)=>{const i=a3(t.icon,r.icons);return zp.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:i},components:t.url?[Hl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:i,attributes:{title:r.translate(t.iconTooltip)}},action:d=>qo(d,Yf,{name:"alert-banner",value:t.url}),buttonBehaviours:Ln([VI()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},uH=(t,r)=>{t.dom.checked=r},QV=t=>t.dom.checked,eU=(t,r,i)=>{const d=R=>(R.element.dom.click(),B.some(!0)),p=ra.parts.field({factory:{sketch:rn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ln([Fd.self(),Wo.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable,onDisabled:R=>{Wa(R.element).each($=>Cc($,"tox-checkbox--disabled"))},onEnabled:R=>{Wa(R.element).each($=>Hi($,"tox-checkbox--disabled"))}}),Wi.config({}),Ms.config({}),M_(i,QV,uH),rs.config({mode:"special",onEnter:d,onSpace:d,stopSpaceKeyup:!0}),zs("checkbox-events",[on(tb(),(R,$)=>{qo(R,eg,{name:t.name})})])])}),x=ra.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Di(r.translate(t.label))],behaviours:Ln([Cm.config({})])}),w=R=>vg(R==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+R]},r.icons),A=da({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[w("checked"),w("unchecked")]});return ra.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[p,A.asSpec(),x],fieldBehaviours:Ln([Wo.config({disabled:()=>!t.enabled||r.checkUiComponentContext(t.context).shouldDisable}),dl(()=>r.checkUiComponentContext(t.context))])})},tU=(t,r)=>{const i=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],d=zs("htmlpanel",[$i(p=>{t.onInit(p.element.dom)})]);return t.presets==="presentation"?zp.sketch({dom:{tag:"div",classes:i,innerHtml:t.html},containerBehaviours:Ln([lc.config({...r.tooltips.getConfig({tooltipText:"",onShow:p=>{zi(p.element,"[data-mce-tooltip]:hover").orThunk(()=>Ad(p.element)).each(x=>{br(x,"data-mce-tooltip").each(w=>{lc.setComponents(p,r.tooltips.getComponents({tooltipText:w}))})})}}),mode:"children-normal",anchor:p=>({type:"node",node:zi(p.element,"[data-mce-tooltip]:hover").orThunk(()=>Ad(p.element).filter(x=>br(x,"data-mce-tooltip").isSome())),root:p.element,layouts:{onLtr:re([Jc,Jl,lr,Fl,pc,Fa]),onRtl:re([Jc,Jl,lr,Fl,pc,Fa])},bubble:Rf(0,-2,{})})}),d])}):zp.sketch({dom:{tag:"div",classes:i,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ln([Wi.config({}),Ms.config({}),d])})},ju=t=>(r,i,d,p,x)=>vn(i,"name").fold(()=>t(i,p,B.none(),x),w=>r.field(w,t(i,p,vn(d,w),x))),dH=t=>(r,i,d,p,x)=>{const w=mi(i,{source:"dynamic"});return ju(t)(r,w,d,p,x)},qb={bar:ju((t,r)=>e4(t,r.shared)),collection:ju((t,r,i)=>hL(t,r.shared.providers,i)),alertbanner:ju((t,r)=>lH(t,r.shared.providers)),input:ju((t,r,i)=>bk(t,r.shared.providers,i)),textarea:ju((t,r,i)=>N0(t,r.shared.providers,i)),label:ju((t,r,i,d)=>M(t,r.shared,d)),iframe:dH((t,r,i)=>b(t,r.shared.providers,i)),button:ju((t,r)=>B0(t,r.shared.providers)),checkbox:ju((t,r,i)=>eU(t,r.shared.providers,i)),colorinput:ju((t,r,i)=>vC(t,r.shared,r.colorinput,i)),colorpicker:ju((t,r,i)=>RN(t,r.shared.providers,i)),dropzone:ju((t,r,i)=>gP(t,r.shared.providers,i)),grid:ju((t,r)=>BN(t,r.shared)),listbox:ju((t,r,i)=>ta(t,r,i)),selectbox:ju((t,r,i)=>dd(t,r.shared.providers,i)),sizeinput:ju((t,r)=>pk(t,r.shared.providers)),slider:ju((t,r,i)=>_C(t,r.shared.providers,i)),urlinput:ju((t,r,i)=>JV(t,r,r.urlinput,i)),customeditor:ju(mP),htmlpanel:ju((t,r)=>tU(t,r.shared.providers)),imagepreview:ju((t,r,i)=>E(t,i)),table:ju((t,r)=>L_(t,r.shared.providers)),tree:ju((t,r)=>Qd(t,r)),panel:ju((t,r)=>ys(t,r))},o$={field:(t,r)=>r,record:re([])},mH=(t,r,i,d,p)=>{const x=mi(d,{shared:{interpreter:w=>s$(t,w,i,x,p)}});return s$(t,r,i,x,p)},s$=(t,r,i,d,p)=>vn(qb,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),x=>x(t,r,i,d,p)),gH=(t,r,i,d)=>s$(o$,t,r,i,d),Ck="layout-inset",r$=t=>t.x,a$=(t,r)=>t.x+t.width/2-r.width/2,OP=(t,r)=>t.x+t.width-r.width,fH=t=>t.y,pH=(t,r)=>t.y+t.height-r.height,em=(t,r)=>t.y+t.height/2-r.height/2,M4=(t,r,i)=>mu(OP(t,r),pH(t,r),i.insetSouthwest(),o2(),"southwest",Xl(t,{right:0,bottom:3}),Ck),DP=(t,r,i)=>mu(r$(t),pH(t,r),i.insetSoutheast(),sT(),"southeast",Xl(t,{left:1,bottom:3}),Ck),Sk=(t,r,i)=>mu(OP(t,r),fH(t),i.insetNorthwest(),oT(),"northwest",Xl(t,{right:0,top:2}),Ck),XN=(t,r,i)=>mu(r$(t),fH(t),i.insetNortheast(),n2(),"northeast",Xl(t,{left:1,top:2}),Ck),gv=(t,r,i)=>mu(a$(t,r),fH(t),i.insetNorth(),rT(),"north",Xl(t,{top:2}),Ck),JN=(t,r,i)=>mu(a$(t,r),pH(t,r),i.insetSouth(),Yx(),"south",Xl(t,{bottom:3}),Ck),hH=(t,r,i)=>mu(OP(t,r),em(t,r),i.insetEast(),Vg(),"east",Xl(t,{right:0}),Ck),bH=(t,r,i)=>mu(r$(t),em(t,r),i.insetWest(),zu(),"west",Xl(t,{left:1}),Ck),nU=t=>{switch(t){case"north":return gv;case"northeast":return XN;case"northwest":return Sk;case"south":return JN;case"southeast":return DP;case"southwest":return M4;case"east":return hH;case"west":return bH}},vH=(t,r,i,d,p)=>m2(d).map(nU).getOr(gv)(t,r,i,d,p),oU=t=>{switch(t){case"north":return JN;case"northeast":return DP;case"northwest":return M4;case"south":return gv;case"southeast":return XN;case"southwest":return Sk;case"east":return bH;case"west":return hH}},yH=(t,r,i,d,p)=>m2(d).map(oU).getOr(gv)(t,r,i,d,p),kk={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},xH=(t,r,i)=>{const p={maxHeightFunction:vy()},x=()=>({type:"node",root:Ki(qa(t())),node:B.from(t()),bubble:Rf(12,12,kk),layouts:{onRtl:()=>[XN],onLtr:()=>[Sk]},overrides:p}),w=()=>({type:"hotspot",hotspot:r(),bubble:Rf(-12,12,kk),layouts:{onRtl:()=>[lr,pc,Jc],onLtr:()=>[pc,lr,Jc]},overrides:p});return()=>i()?x():w()},i$=(t,r,i,d)=>{const x={maxHeightFunction:vy()},w=()=>({type:"node",root:Ki(qa(r())),node:B.from(r()),bubble:Rf(12,12,kk),layouts:{onRtl:()=>[gv],onLtr:()=>[gv]},overrides:x}),A=()=>t?{type:"node",root:Ki(qa(r())),node:B.from(r()),bubble:Rf(0,-Mm(r()),kk),layouts:{onRtl:()=>[Jl],onLtr:()=>[Jl]},overrides:x}:{type:"hotspot",hotspot:i(),bubble:Rf(0,0,kk),layouts:{onRtl:()=>[Jl],onLtr:()=>[Jl]},overrides:x};return()=>d()?w():A()},sU=(t,r,i)=>{const d=()=>({type:"node",root:Ki(qa(t())),node:B.from(t()),layouts:{onRtl:()=>[gv],onLtr:()=>[gv]}}),p=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Jc],onLtr:()=>[Jc]}});return()=>i()?d():p()},wH=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const i=t.selection.getRng(),d=t.model.table.getSelectedCells();if(d.length>1){const p=d[0],x=d[d.length-1],w={firstCell:xt.fromDom(p),lastCell:xt.fromDom(x)};return B.some(w)}return B.some(Xv.range(xt.fromDom(i.startContainer),i.startOffset,xt.fromDom(i.endContainer),i.endOffset))}}),rU=t=>r=>({type:"node",root:t(),node:r}),aU=(t,r,i,d)=>{const p=Qg(t),x=()=>xt.fromDom(t.getBody()),w=()=>xt.fromDom(t.getContentAreaContainer()),A=()=>p||!d();return{inlineDialog:xH(w,r,A),inlineBottomDialog:i$(t.inline,w,i,A),banner:sU(w,r,A),cursor:wH(t,x),node:rU(x)}},CH=t=>(r,i)=>{UF(t)(r,i)},mq=t=>()=>hu(t),gq=t=>r=>$p(t,r),SH=t=>r=>d_(t,r),iU=t=>({colorPicker:CH(t),hasCustomColors:mq(t),getColors:gq(t),getColorCols:SH(t)}),cU=t=>()=>pR(t),kH=t=>({isDraggableModal:cU(t)}),c$=t=>{const r=wo(vR(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},TH=t=>Ba(t,"items"),EH=t=>Ba(t,"format"),l$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],lU=t=>Ls(t,"items"),uU=t=>Ls(t,"block"),dU=t=>Ls(t,"inline"),mU=t=>Ls(t,"selector"),QN=t=>Pn(t,(r,i)=>{if(lU(i)){const d=QN(i.items);return{customFormats:r.customFormats.concat(d.customFormats),formats:r.formats.concat([{title:i.title,items:d.formats}])}}else if(dU(i)||uU(i)||mU(i)){const p=`custom-${Tt(i.name)?i.name:i.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:p,format:i}]),formats:r.formats.concat([{title:i.title,format:p,icon:i.icon}])}}else return{...r,formats:r.formats.concat(i)}},{customFormats:[],formats:[]}),u$=(t,r)=>{const i=QN(r),d=p=>{pt(p,x=>{t.formatter.has(x.name)||t.formatter.register(x.name,x.format)})};return t.formatter?d(i.customFormats):t.on("init",()=>{d(i.customFormats)}),i.formats},_H=t=>Yr(t).map(r=>{const i=u$(t,r);return mR(t)?l$.concat(i):i}).getOr(l$),gU=t=>{const r=nn(t);return r.length===1&&Oe(r,"title")},AH=(t,r,i)=>({...t,type:"formatter",isSelected:r(t.format),getStylePreview:i(t.format)}),OH=(t,r,i,d)=>{const p=R=>AH(R,i,d),x=R=>{const $=A(R.items);return{...R,type:"submenu",getStyleItems:re($)}},w=R=>{const $=Tt(R.name)?R.name:Ao(R.title),W=`custom-${$}`,q={...R,type:"formatter",format:W,isSelected:i(W),getStylePreview:d(W)};return t.formatter.register($,q),q},A=R=>$e(R,$=>TH($)?x($):EH($)?p($):gU($)?{...$,type:"separator"}:w($));return A(r)},fU=t=>{const r=A=>()=>t.formatter.match(A),i=A=>()=>{const R=t.formatter.get(A);return R!==void 0?B.some({tag:R.length>0&&(R[0].inline||R[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(A))}):B.none()},d=wo([]),p=wo([]),x=wo(!1);return t.on("PreInit",A=>{const R=_H(t),$=OH(t,R,r,i);d.set($)}),t.on("addStyleModifications",A=>{const R=OH(t,A.items,r,i);p.set(R),x.set(A.replace)}),{getData:()=>{const A=x.get()?[]:d.get(),R=p.get();return A.concat(R)}}},pU=t=>{let d=0;const p=()=>d>0,x=A=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Di(A.tooltipText)]}];return{getConfig:A=>({delayForShow:()=>p()?60:300,delayForHide:re(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:x(A),onShow:(R,$)=>{d++,A.onShow&&A.onShow(R,$)},onHide:(R,$)=>{d--,A.onHide&&A.onHide(R,$)},onSetup:A.onSetup}),getComponents:x}},d$=t=>zn(t)&&t.nodeType===1,hU=rv.trim,eB=t=>r=>!!(d$(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),bU=eB("true"),N4=eB("false"),DH=(t,r,i,d,p)=>({type:t,title:r,url:i,level:d,attach:p}),m$=t=>{let r=t;for(;r=r.parentNode;){const i=r.contentEditable;if(i&&i!=="inherit")return bU(r)}return!1},B4=(t,r)=>$e(qd(xt.fromDom(r),t),i=>i.dom),g$=t=>t.innerText||t.textContent,RH=t=>t.id?t.id:Ao("h"),f$=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,MH=t=>f$(t)&&p$(t),RP=t=>t&&/^(H[1-6])$/.test(t.nodeName),p$=t=>m$(t)&&!N4(t),NH=t=>RP(t)&&p$(t),h$=t=>RP(t)?parseInt(t.nodeName.substr(1),10):0,V_=t=>{var r;const i=RH(t),d=()=>{t.id=i};return DH("header",(r=g$(t))!==null&&r!==void 0?r:"","#"+i,h$(t),d)},vU=t=>{const r=t.id||t.name,i=g$(t);return DH("anchor",i||"#"+r,"#"+r,0,ue)},yU=t=>$e(Et(t,NH),V_),I4=t=>$e(Et(t,MH),vU),BH=t=>B4("h1,h2,h3,h4,h5,h6,a:not([href])",t),MP=t=>hU(t.title).length>0,b$={find:t=>{const r=BH(t);return Et(yU(r).concat(I4(r)),MP)}},fv="tinymce-url-history",IH=5,FH=t=>Tt(t)&&/^https?/.test(t),wU=t=>ss(t)&&t.length<=IH&&ct(t,FH),NP=t=>Fn(t)&&ns(t,r=>!wU(r)).isNone(),PH=()=>{const t=Wb.getItem(fv);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(i){if(i instanceof SyntaxError)return console.log("Local storage "+fv+" was not valid JSON",i),{};throw i}return NP(r)?r:(console.log("Local storage "+fv+" was not valid format",r),{})},CU=t=>{if(!NP(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Wb.setItem(fv,JSON.stringify(t))},SU=t=>{const r=PH();return vn(r,t).getOr([])},kU=(t,r)=>{if(!FH(t))return;const i=PH(),d=vn(i,r).getOr([]),p=Et(d,x=>x!==t);i[r]=[t].concat(p).slice(0,IH),CU(i)},LH=t=>!!t,TU=t=>Mn(rv.makeMap(t,/[, ]/),LH),v$=t=>B.from(fR(t)),$H=t=>{const r=B.from(wI(t)).filter(LH).map(TU);return v$(t).fold($t,i=>r.fold(Kt,d=>nn(d).length>0?d:!1))},EU=(t,r)=>{const i=$H(t);return es(i)?i?v$(t):B.none():i[r]?v$(t):B.none()},tB=(t,r)=>EU(t,r).map(i=>d=>Id.nu(p=>{const x=(A,R)=>{if(!Tt(A))throw new Error("Expected value to be string");if(R!==void 0&&!Fn(R))throw new Error("Expected meta to be a object");p({value:A,meta:R})},w={filetype:r,fieldname:d.fieldname,...B.from(d.meta).getOr({})};i.call(t,x,d.value,w)})),HH=t=>B.from(t).filter(Tt).getOrUndefined(),_U=t=>SE(t)?B.some({targets:b$.find(t.getBody()),anchorTop:HH(UO(t)),anchorBottom:HH(WO(t))}):B.none(),y$=t=>B.from(VO(t)),zH=t=>({getHistory:SU,addToHistory:kU,getLinkInformation:()=>_U(t),getValidationHandler:()=>y$(t),getUrlPicker:r=>tB(t,r)}),BP=(t,r,i,d)=>{const p=wo(!1),x=c$(r),w={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:Bp.translate,isDisabled:()=>!r.ui.isEnabled(),getOption:r.options.get,tooltips:pU(t.dialog),checkUiComponentContext:Fe=>{if(xE(r))return{contextType:"disabled",shouldDisable:!0};const[nt,lt=""]=Fe.split(":"),Ft=r.ui.registry.getAll().contexts,zt=vn(Ft,nt).fold(()=>vn(Ft,"mode").map(Zn=>Zn("design")).getOr(!1),Zn=>lt.charAt(0)==="!"?!Zn(lt.slice(1)):Zn(lt));return{contextType:nt,shouldDisable:!zt}}},A=zH(r),R=fU(r),$=iU(r),W=kH(r),q=()=>p.get(),se=Fe=>p.set(Fe),ge={shared:{providers:w,anchors:aU(r,i,d,x.isPositionedAtTop),header:x},urlinput:A,styles:R,colorinput:$,dialog:W,isContextMenuOpen:q,setContextMenuState:se},Ae=Fe=>B.none(),Ie={...ge,shared:{...ge.shared,interpreter:Fe=>gH(Fe,{},Ie,Ae),getSink:t.popup}},mt={...ge,shared:{...ge.shared,interpreter:Fe=>gH(Fe,{},mt,Ae),getSink:t.dialog}};return{popup:Ie,dialog:mt}},AU=(t,r,i)=>{const d=(ln,Po)=>{pt([r,...i],io=>{io.broadcastEvent(ln,Po)})},p=(ln,Po)=>{pt([r,...i],io=>{io.broadcastOn([ln],Po)})},x=ln=>p(Ch(),{target:ln.target}),w=pf(),A=Au(w,"touchstart",x),R=Au(w,"touchmove",ln=>d(dm(),ln)),$=Au(w,"touchend",ln=>d(up(),ln)),W=Au(w,"mousedown",x),q=Au(w,"mouseup",ln=>{ln.raw.button===0&&p(Sb(),{target:ln.target})}),se=ln=>p(Ch(),{target:xt.fromDom(ln.target)}),ge=ln=>{ln.button===0&&p(Sb(),{target:xt.fromDom(ln.target)})},Ae=()=>{pt(t.editorManager.get(),ln=>{t!==ln&&ln.dispatch("DismissPopups",{relatedTarget:t})})},Ie=ln=>d(Av(),ow(ln)),mt=ln=>{p(P1(),{}),d($a(),ow(ln))},Fe=qa(xt.fromDom(t.getElement())),nt=Zv(Fe,"scroll",ln=>{requestAnimationFrame(()=>{const Po=t.getContainer();if(Po!=null){const zo=p0(t,r.element).map(Mr=>[Mr.element,...Mr.others]).getOr([]);ft(zo,Mr=>Es(Mr,ln.target))&&(t.dispatch("ElementScroll",{target:ln.target.dom}),d(Ov(),ln))}})}),lt=()=>p(P1(),{}),Ft=ln=>{ln.state&&p(Ch(),{target:xt.fromDom(t.getContainer())})},zt=ln=>{p(Ch(),{target:xt.fromDom(ln.relatedTarget.getContainer())})},Zn=ln=>t.dispatch("focusin",ln),Mo=ln=>t.dispatch("focusout",ln);t.on("PostRender",()=>{t.on("click",se),t.on("tap",se),t.on("mouseup",ge),t.on("mousedown",Ae),t.on("ScrollWindow",Ie),t.on("ResizeWindow",mt),t.on("ResizeEditor",lt),t.on("AfterProgressState",Ft),t.on("DismissPopups",zt),pt([r,...i],ln=>{ln.element.dom.addEventListener("focusin",Zn),ln.element.dom.addEventListener("focusout",Mo)})}),t.on("remove",()=>{t.off("click",se),t.off("tap",se),t.off("mouseup",ge),t.off("mousedown",Ae),t.off("ScrollWindow",Ie),t.off("ResizeWindow",mt),t.off("ResizeEditor",lt),t.off("AfterProgressState",Ft),t.off("DismissPopups",zt),pt([r,...i],ln=>{ln.element.dom.removeEventListener("focusin",Zn),ln.element.dom.removeEventListener("focusout",Mo)}),W.unbind(),A.unbind(),R.unbind(),$.unbind(),q.unbind(),nt.unbind()}),t.on("detach",()=>{pt([r,...i],Ma),pt([r,...i],ln=>ln.destroy())})},md=Gg,yx=Uu,OU=re([Ct("shell",!1),dn("makeItem"),Ct("setupItem",ue),vm.field("listBehaviours",[Hs])]),x$=ym({name:"items",overrides:()=>({behaviours:Ln([Hs.config({})])})}),DU=re([x$]),RU=re("CustomList"),MU=(t,r,i,d)=>{const p=(A,R)=>{w(A).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},$=>{const W=Hs.contents($),q=R.length,se=q-W.length,ge=se>0?tt(se,()=>t.makeItem()):[],Ae=W.slice(q);pt(Ae,mt=>Hs.remove($,mt)),pt(ge,mt=>Hs.append($,mt));const Ie=Hs.contents($);pt(Ie,(mt,Fe)=>{t.setupItem(A,mt,R[Fe],Fe)})})},x=t.shell?{behaviours:[Hs.config({})],components:[]}:{behaviours:[],components:r},w=A=>t.shell?B.some(A):ii(A,t,"items");return{uid:t.uid,dom:t.dom,components:x.components,behaviours:nc(t.listBehaviours,x.behaviours),apis:{setItems:p}}},VH=cd({name:RU(),configFields:OU(),partFields:DU(),factory:MU,apis:{setItems:(t,r,i)=>{t.setItems(r,i)}}}),F4=re([dn("dom"),Ct("shell",!0),Ll("toolbarBehaviours",[Hs])]),hq=re([ym({name:"groups",overrides:()=>({behaviours:Ln([Hs.config({})])})})]),NU=(t,r,i,d)=>{const p=(A,R)=>{x(A).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},$=>{Hs.set($,R)})},x=A=>t.shell?B.some(A):ii(A,t,"groups"),w=t.shell?{behaviours:[Hs.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:w.components,behaviours:nc(t.toolbarBehaviours,w.behaviours),apis:{setGroups:p,refresh:ue},domModification:{attributes:{role:"group"}}}},pv=cd({name:"Toolbar",configFields:F4(),partFields:hq(),factory:NU,apis:{setGroups:(t,r,i)=>{t.setGroups(r,i)}}}),UH=ue,IP=$t,w$=re([]);var BU=Object.freeze({__proto__:null,setup:UH,isDocked:IP,getBehaviours:w$});const C$=re(Ao("toolbar-height-change")),xx={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},WH="tox-tinymce--toolbar-sticky-on",jH="tox-tinymce--toolbar-sticky-off",IU=(t,r)=>{const i=Xs(r),p=fs(r).dom.innerHeight,x=bl(i),w=xt.fromDom(t.elm),A=Ya(w),R=uc(w),$=A.y,W=$+R,q=sl(r),se=uc(r),ge=q.top,Ae=ge+se,Ie=Math.abs(ge-x.top)<2,mt=Math.abs(Ae-(x.top+p))<2;if(Ie&&$<Ae)Hm(x.left,$-se,i);else if(mt&&W>ge){const Fe=$-p+R+se;Hm(x.left,Fe,i)}},FP=(t,r)=>Oe(wi.getModes(t),r),PP=t=>{const r=d=>Mm(d)+(parseInt(bn(d,"margin-top"),10)||0)+(parseInt(bn(d,"margin-bottom"),10)||0),i=t.element;Wa(i).each(d=>{const p="padding-"+wi.getModes(t)[0];if(wi.isDocked(t)){const x=_e(d);Gn(i,"width",x+"px"),Gn(d,p,r(i)+"px")}else cr(i,"width"),cr(d,p)})},S$=(t,r)=>{r?(Hi(t,xx.fadeOutClass),Iv(t,[xx.transitionClass,xx.fadeInClass])):(Hi(t,xx.fadeInClass),Iv(t,[xx.fadeOutClass,xx.transitionClass]))},ZH=(t,r)=>{const i=xt.fromDom(t.getContainer());r?(Cc(i,WH),Hi(i,jH)):(Cc(i,jH),Hi(i,WH))},GH=(t,r)=>{const i=Xs(r);hb(i).filter(d=>!Es(r,d)).filter(d=>Es(d,xt.fromDom(i.dom.body))||xu(t,d)).each(()=>Zd(r))},FU=(t,r)=>Ad(t).orThunk(()=>r().toOptional().bind(i=>Ad(i.element))),PU=(t,r,i)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{i().each(wi.reset)}),t.on("ResizeWindow ResizeEditor",()=>{i().each(PP)}),t.on("SkinLoaded",()=>{i().each(d=>{wi.isDocked(d)?wi.reset(d):wi.refresh(d)})}),t.on("FullscreenStateChanged",()=>{i().each(wi.reset)})),t.on("AfterScrollIntoView",d=>{i().each(p=>{wi.refresh(p);const x=p.element;sE(x)&&IU(d,x)})}),t.on("PostRender",()=>{ZH(t,!1)})},LU=t=>t().map(wi.isDocked).getOr(!1),U_=()=>[qm.config({channels:{[C$()]:{onReceive:PP}}})],k$=(t,r)=>{const i=Ir(),d=r.getSink,p=A=>{d().each(R=>A(R.element))},x=A=>{t.inline||PP(A),ZH(t,wi.isDocked(A)),A.getSystem().broadcastOn([P1()],{}),d().each(R=>R.getSystem().broadcastOn([P1()],{}))},w=t.inline?[]:U_();return[Ms.config({}),wi.config({contextual:{lazyContext:A=>{const R=Mm(A.element),$=t.inline?t.getContentAreaContainer():t.getContainer();return B.from($).map(W=>{const q=jc(xt.fromDom(W));return p0(t,A.element).fold(()=>{const ge=q.height-R,Ae=q.y+(FP(A,"top")?0:R);return oa(q.x,Ae,q.width,ge)},ge=>{const Ae=vl(q,K1(ge)),Ie=FP(A,"top")?Ae.y:Ae.y+R;return oa(Ae.x,Ie,Ae.width,Ae.height-R)})})},onShow:()=>{p(A=>S$(A,!0))},onShown:A=>{p(R=>kf(R,[xx.transitionClass,xx.fadeInClass])),i.get().each(R=>{GH(A.element,R),i.clear()})},onHide:A=>{FU(A.element,d).fold(i.clear,i.set),p(R=>S$(R,!1))},onHidden:()=>{p(A=>kf(A,[xx.transitionClass]))},...xx},lazyViewport:A=>p0(t,A.element).fold(()=>{const $=Yt(),W=Gw(t),q=$.y+(FP(A,"top")&&!iS(t)?W:0),se=$.height-(FP(A,"bottom")?W:0);return{bounds:oa($.x,q,$.width,se),optScrollEnv:B.none()}},$=>({bounds:K1($),optScrollEnv:B.some({currentScrollTop:$.element.dom.scrollTop,scrollElmTop:sl($.element).top})})),modes:[r.header.getDockingMode()],onDocked:x,onUndocked:x}),...w]};var nB=Object.freeze({__proto__:null,setup:PU,isDocked:LU,getBehaviours:k$});const LP=t=>{const r=t.editor,i=t.sticky?k$:w$;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ln(i(r,t.sharedBackstage))}},qH=os([ul,ia("items",Dg([t1([oC,au("items",so)]),so]))].concat(_S)),KH=t=>Li("GroupToolbarButton",qH,t),YH=[ri("text"),ri("tooltip"),ri("icon"),fa("search",!1,Dg([Qu,os([ri("placeholder")])],t=>es(t)?t?B.some({placeholder:B.none()}):B.none():B.some(t))),ed("fetch"),Ea("onSetup",()=>ue),gn("context","mode:design")],$U=os([ul,...YH]),XH=t=>Li("menubutton",$U,t),HU=os([ul,kS,nf,lx,S3,C3,cx,Kl("presets","normal",["normal","color","listpreview"]),sF(1),SS,w8,gn("context","mode:design")]),zU=t=>Li("SplitButton",HU,t);var T$=Ym({factory:(t,r)=>{const i=(p,x)=>{const w=$e(x,A=>{const R={type:"menubutton",text:A.text,fetch:W=>{W(A.getItems())},context:"any"},$=XH(R).mapError(W=>Uo(W)).getOrDie();return uv($,"tox-mbtn",r.backstage,B.some("menuitem"))});Hs.set(p,w)},d={focus:rs.focusIn,setMenus:i};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ln([Hs.config({}),zs("menubar-events",[$i(p=>{t.onSetup(p)}),on(td(),(p,x)=>{zi(p.element,".tox-mbtn--active").each(w=>{vp(x.event.target,".tox-mbtn").each(A=>{Es(w,A)||p.getSystem().getByDom(w).each(R=>{p.getSystem().getByDom(A).each($=>{Kf.expand($),Kf.close(R),Ms.focus($)})})})})}),on(Dx(),(p,x)=>{x.event.prevFocus.bind(w=>p.getSystem().getByDom(w).toOptional()).each(w=>{x.event.newFocus.bind(A=>p.getSystem().getByDom(A).toOptional()).each(A=>{Kf.isOpen(w)&&(Kf.expand(A),Kf.close(w))})})})]),rs.config({mode:"flow",selector:".tox-mbtn",onEscape:p=>(t.onEscape(p),B.some(!0))}),Wi.config({})]),apis:d,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[dn("dom"),dn("uid"),dn("onEscape"),dn("backstage"),Ct("onSetup",ue)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,i)=>{t.setMenus(r,i)}}});const P4="⚡️Upgrade",oB="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",E$=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:oB,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:P4}}]}),JH="container",VU=[Ll("slotBehaviours",[])],$P=t=>"<alloy.field."+t+">",UU=t=>{const r=(()=>{const x=[];return{slot:(A,R)=>(x.push(A),zy(JH,$P(A),R)),record:re(x)}})(),i=t(r),d=r.record(),p=$e(d,x=>Du({name:x,pname:$P(x)}));return Ob(JH,VU,p,sB,i)},sB=(t,r)=>{const i=Ie=>Zg(t),d=(Ie,mt)=>ii(Ie,t,mt),p=(Ie,mt)=>(Fe,nt)=>ii(Fe,t,nt).map(lt=>Ie(lt,nt)).getOr(mt),x=Ie=>(mt,Fe)=>{pt(Fe,nt=>Ie(mt,nt))},w=(Ie,mt)=>Ds(Ie.element,"aria-hidden")!=="true",A=(Ie,mt)=>{if(!w(Ie)){const Fe=Ie.element;cr(Fe,"display"),fe(Fe,"aria-hidden"),qo(Ie,W0(),{name:mt,visible:!0})}},R=(Ie,mt)=>{if(w(Ie)){const Fe=Ie.element;Gn(Fe,"display","none"),Kn(Fe,"aria-hidden","true"),qo(Ie,W0(),{name:mt,visible:!1})}},$=p(w,!1),W=p(R),q=x(W),se=Ie=>q(Ie,i()),ge=p(A),Ae={getSlotNames:i,getSlot:d,isShowing:$,hideSlot:W,hideAllSlots:se,showSlot:ge};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ly(t.slotBehaviours),apis:Ae}},tg={...Mn({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,i)=>t.getSlot(r,i),isShowing:(t,r,i)=>t.isShowing(r,i),hideSlot:(t,r,i)=>t.hideSlot(r,i),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,i)=>t.showSlot(r,i)},t=>Wx(t)),sketch:UU},jU=os([nf,kS,Ea("onShow",ue),Ea("onHide",ue),cx]),ZU=t=>Li("sidebar",jU,t),GU=t=>{const{sidebars:r}=t.ui.registry.getAll();pt(nn(r),i=>{const d=r[i],p=()=>Dr(B.from(t.queryCommandValue("ToggleSidebar")),i);t.ui.registry.addToggleButton(i,{icon:d.icon,tooltip:d.tooltip,onAction:x=>{t.execCommand("ToggleSidebar",!1,i),x.setActive(p())},onSetup:x=>{x.setActive(p());const w=()=>x.setActive(p());return t.on("ToggleSidebar",w),()=>{t.off("ToggleSidebar",w)}},context:"any"})})},qU=t=>({element:()=>t.element.dom}),KU=(t,r)=>{const i=$e(nn(r),d=>{const p=r[d],x=_n(ZU(p));return{name:d,getApi:qU,onSetup:x.onSetup,onShow:x.onShow,onHide:x.onHide}});return $e(i,d=>{const p=wo(ue);return t.slot(d.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:cC.unnamedEvents([Pp(d,p),Wu(d,p),on(W0(),(x,w)=>{const A=w.event;ce(i,$=>$.name===A.name).each($=>{(A.visible?$.onShow:$.onHide)($.getApi(x))})})])})})},QH=t=>tg.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:KU(r,t),slotBehaviours:cC.unnamedEvents([$i(i=>tg.hideAllSlots(i))])})),ez=(t,r,i)=>{Kr.getCurrent(t).each(p=>{Hs.set(p,[QH(r)]);const x=i==null?void 0:i.toLowerCase();Tt(x)&&Ls(r,x)&&Kr.getCurrent(p).each(w=>{tg.showSlot(w,x),Tm.immediateGrow(p),cr(p.element,"width"),L4(t.element,"region")})})},L4=(t,r)=>{Kn(t,"role",r)},YU=(t,r)=>{Kr.getCurrent(t).each(d=>{Kr.getCurrent(d).each(x=>{Tm.hasGrown(d)?tg.isShowing(x,r)?(Tm.shrink(d),L4(t.element,"presentation")):(tg.hideAllSlots(x),tg.showSlot(x,r),L4(t.element,"region")):(tg.hideAllSlots(x),tg.showSlot(x,r),Tm.grow(d),L4(t.element,"region"))})})},HP=t=>Kr.getCurrent(t).bind(i=>Tm.isGrowing(i)||Tm.hasGrown(i)?Kr.getCurrent(i).bind(x=>ce(tg.getSlotNames(x),w=>tg.isShowing(x,w))):B.none()),$4=Ao("FixSizeEvent"),zP=Ao("AutoSizeEvent"),XU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ln([Wi.config({}),Ms.config({}),Tm.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{Kr.getCurrent(r).each(tg.hideAllSlots),xr(r,zP)},onGrown:r=>{xr(r,zP)},onStartGrow:r=>{qo(r,$4,{width:ba(r.element,"width").getOr("")})},onStartShrink:r=>{qo(r,$4,{width:_e(r.element)+"px"})}}),Hs.config({}),Kr.config({find:r=>{const i=Hs.contents(r);return Hn(i)}})])}],behaviours:Ln([Fd.childAt(0),zs("sidebar-sliding-events",[on($4,(r,i)=>{Gn(r.element,"width",i.event.width)}),on(zP,(r,i)=>{cr(r.element,"width")})])])});var _$=Object.freeze({__proto__:null,block:(t,r,i,d)=>{Kn(t.element,"aria-busy",!0);const p=r.getRoot(t).getOr(t),x=Ln([rs.config({mode:"special",onTab:()=>B.some(!0),onShiftTab:()=>B.some(!0)}),Ms.config({})]),w=d(p,x),A=p.getSystem().build(w);Hs.append(p,dg(A)),A.hasConfigured(rs)&&r.focus&&rs.focusIn(A),i.isBlocked()||r.onBlock(t),i.blockWith(()=>Hs.remove(p,A))},unblock:(t,r,i)=>{fe(t.element,"aria-busy"),i.isBlocked()&&r.onUnblock(t),i.clear()},isBlocked:(t,r,i)=>i.isBlocked()}),JU=[Ea("getRoot",B.none),Ra("focus",!0),Ar("onBlock"),Ar("onUnblock")],QU=Object.freeze({__proto__:null,init:()=>{const t=Gl(),r=i=>{t.set({destroy:i})};return lu({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const Kb=xl({fields:JU,name:"blocking",apis:_$,state:QU}),eW=t=>(r,i)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Dh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),nz=t=>Kr.getCurrent(t).each(r=>Zd(r.element,!0)),tW=(t,r)=>{const i="tabindex",d=`data-mce-${i}`;B.from(t.iframeElement).map(xt.fromDom).each(p=>{r?(br(p,i).each(x=>Kn(p,d,x)),Kn(p,i,-1)):(fe(p,i),br(p,d).each(x=>{Kn(p,i,x),fe(p,d)}))})},nW=(t,r,i,d)=>{const p=r.element;if(tW(t,i),i)Kb.block(r,eW(d)),cr(p,"display"),fe(p,"aria-hidden"),t.hasFocus()&&nz(r);else{const x=Kr.getCurrent(r).exists(w=>bh(w.element));Kb.unblock(r),Gn(p,"display","none"),Kn(p,"aria-hidden","true"),x&&t.focus()}},oW=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ln([Hs.config({}),Kb.config({focus:!1}),Kr.config({find:r=>Hn(r.components())})]),components:[]}),wq=t=>t.type==="focusin",Cq=t=>wq(t)?(t.composed?Hn(t.composedPath()):B.from(t.target)).map(xt.fromDom).filter(er).exists(i=>kd(i,"mce-pastebin")):!1,oz=(t,r,i)=>{const d=wo(!1),p=Ir(),x=A=>{d.get()&&!Cq(A)&&(A.preventDefault(),nz(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",x),t.on("BeforeExecCommand",A=>{A.command.toLowerCase()==="mcefocus"&&A.value!==!0&&x(A)})});const w=A=>{A!==d.get()&&(d.set(A),nW(t,r(),A,i.providers),H3(t,A))};t.on("ProgressState",A=>{if(p.on(clearTimeout),Ue(A.time)){const R=Q2.setEditorTimeout(t,()=>w(A.state),A.time);p.set(R)}else w(A.state),p.clear()})},sW=(t,r)=>Pn(t,(p,x)=>r(x,p.len).fold(re(p),A=>({len:A.finish,list:p.list.concat([A])})),{len:0,list:[]}).list,VP=(t,r,i)=>({within:t,extra:r,withinWidth:i}),sz=(t,r,i)=>{const d=sW(t,(A,R)=>{const $=i(A);return B.some({element:A,start:R,finish:R+$,width:$})}),p=Et(d,A=>A.finish<=r),x=Mt(p,(A,R)=>A+R.width,0),w=d.slice(p.length);return{within:p,extra:w,withinWidth:x}},UP=t=>$e(t,r=>r.element),rW=(t,r,i)=>{const d=UP(t.concat(r));return VP(d,[],i)},aW=(t,r,i,d)=>{const p=UP(t).concat([i]);return VP(p,UP(r),d)},iW=(t,r,i)=>VP(UP(t),[],i),rz=(t,r,i)=>{const d=sz(r,t,i);return d.extra.length===0?B.some(d):B.none()},cW=(t,r,i,d)=>{const p=rz(t,r,i).getOrThunk(()=>sz(r,t-i(d),i)),x=p.within,w=p.extra,A=p.withinWidth;return w.length===1&&w[0].width<=i(d)?rW(x,w,A):w.length>=1?aW(x,w,d,A):iW(x,w,A)},az=(t,r)=>{const i=$e(r,d=>dg(d));pv.setGroups(t,i)},lW=t=>rt(t,r=>Ad(r.element).bind(i=>r.getSystem().getByDom(i).toOptional())),uW=(t,r,i)=>{const d=r.builtGroups.get();if(d.length===0)return;const p=id(t,r,"primary"),x=el.getCoupled(t,"overflowGroup");Gn(p.element,"visibility","hidden");const w=d.concat([x]),A=lW(w);i([]),az(p,w);const R=_e(p.element),$=cW(R,r.builtGroups.get(),W=>Math.ceil(W.element.dom.getBoundingClientRect().width),x);$.extra.length===0?(Hs.remove(p,x),i([])):(az(p,$.within),i($.extra)),cr(p.element,"visibility"),ou(p.element),A.each(Ms.focus)},dW=re([Ll("splitToolbarBehaviours",[el]),aa("builtGroups",()=>wo([]))]),iz=re([lb(["overflowToggledClass"]),Mg("getOverflowBounds"),dn("lazySink"),aa("overflowGroups",()=>wo([])),Ar("onOpened"),Ar("onClosed")].concat(dW())),cz=re([Du({factory:pv,schema:F4(),name:"primary"}),fg({schema:F4(),name:"overflow"}),fg({name:"overflow-button"}),fg({name:"overflow-group"})]),A$=re((t,r)=>{un(t,Math.floor(r))}),mW=re([lb(["toggledClass"]),dn("lazySink"),ed("fetch"),Mg("getBounds"),Yc("fireDismissalEventInstead",[Ct("event",dp())]),xb(),Ar("onToggled")]),zh=re([fg({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ln([dr.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),fg({factory:pv,schema:F4(),name:"toolbar",overrides:t=>({toolbarBehaviours:Ln([rs.config({mode:"cyclic",onEscape:r=>(ii(r,t,"button").each(Ms.focus),B.none())})])})})]),WP=Ir(),lz=(t,r)=>{WP.set(!0),jP(t,r),WP.clear()},jP=(t,r)=>{const i=el.getCoupled(t,"toolbarSandbox");qr.isOpen(i)?qr.close(i):qr.open(i,r.toolbar())},O$=(t,r,i,d)=>{const p=i.getBounds.map(w=>w()),x=i.lazySink(t).getOrDie();gu.positionWithinBounds(x,r,{anchor:{type:"hotspot",hotspot:t,layouts:d,overrides:{maxWidthFunction:A$()}}},p)},H4=(t,r,i,d,p)=>{pv.setGroups(r,p),O$(t,r,i,d),dr.on(t)},gW=(t,r,i)=>{const d=qx(),p=(w,A)=>{const R=WP.get().getOr(!1);i.fetch().get($=>{H4(t,A,i,r.layouts,$),d.link(t.element),R||rs.focusIn(A)})},x=()=>{dr.off(t),WP.get().getOr(!1)||Ms.focus(t),d.unlink(t.element)};return{dom:{tag:"div",attributes:{id:d.id}},behaviours:Ln([rs.config({mode:"special",onEscape:w=>(qr.close(w),B.some(!0))}),qr.config({onOpen:p,onClose:x,isPartOf:(w,A,R)=>yp(A,R)||yp(t,R),getAttachPoint:()=>i.lazySink(t).getOrDie()}),qm.config({channels:{...Dd({isExtraPart:$t,...i.fireDismissalEventInstead.map(w=>({fireEventInstead:{event:w.event}})).getOr({})}),...a0({doReposition:()=>{qr.getState(el.getCoupled(t,"toolbarSandbox")).each(w=>{O$(t,w,i,r.layouts)})}})}})])}},Tk=cd({name:"FloatingToolbarButton",factory:(t,r,i,d)=>({...Hl.sketch({...d.button(),action:p=>{jP(p,d)},buttonBehaviours:vm.augment({dump:d.button().buttonBehaviours},[el.config({others:{toolbarSandbox:p=>gW(p,i,t)}})])}),apis:{setGroups:(p,x)=>{qr.getState(el.getCoupled(p,"toolbarSandbox")).each(w=>{H4(p,w,t,i.layouts,x)})},reposition:p=>{qr.getState(el.getCoupled(p,"toolbarSandbox")).each(x=>{O$(p,x,t,i.layouts)})},toggle:p=>{jP(p,d)},toggleWithoutFocusing:p=>{lz(p,d)},getToolbar:p=>qr.getState(el.getCoupled(p,"toolbarSandbox")),isOpen:p=>qr.isOpen(el.getCoupled(p,"toolbarSandbox"))}}),configFields:mW(),partFields:zh(),apis:{setGroups:(t,r,i)=>{t.setGroups(r,i)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),ZP=re([dn("items"),lb(["itemSelector"]),Ll("tgroupBehaviours",[rs])]),fW=re([kw({name:"items",unit:"item"})]),pW=(t,r,i,d)=>({uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.tgroupBehaviours,[rs.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Qf=cd({name:"ToolbarGroup",configFields:ZP(),partFields:fW(),factory:pW}),uz=t=>$e(t,r=>dg(r)),rB=(t,r,i)=>{uW(t,i,d=>{i.overflowGroups.set(d),r.getOpt(t).each(p=>{Tk.setGroups(p,uz(d))})})},dz=(t,r,i,d)=>{const p=da(Tk.sketch({fetch:()=>Id.nu(x=>{x(uz(t.overflowGroups.get()))}),layouts:{onLtr:()=>[pc,lr],onRtl:()=>[lr,pc],onBottomLtr:()=>[Fa,Fl],onBottomRtl:()=>[Fl,Fa]},getBounds:i.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:d["overflow-button"](),toolbar:d.overflow()},onToggled:(x,w)=>t[w?"onOpened":"onClosed"](x)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.splitToolbarBehaviours,[el.config({others:{overflowGroup:()=>Qf.sketch({...d["overflow-group"](),items:[p.asSpec()]})}})]),apis:{setGroups:(x,w)=>{t.builtGroups.set($e(w,x.getSystem().build)),rB(x,p,t)},refresh:x=>rB(x,p,t),toggle:x=>{p.getOpt(x).each(w=>{Tk.toggle(w)})},toggleWithoutFocusing:x=>{p.getOpt(x).each(Tk.toggleWithoutFocusing)},isOpen:x=>p.getOpt(x).map(Tk.isOpen).getOr(!1),reposition:x=>{p.getOpt(x).each(w=>{Tk.reposition(w)})},getOverflow:x=>p.getOpt(x).bind(Tk.getToolbar)},domModification:{attributes:{role:"group"}}}},R$=cd({name:"SplitFloatingToolbar",configFields:iz(),partFields:cz(),factory:dz,apis:{setGroups:(t,r,i)=>{t.setGroups(r,i)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),hW=re([lb(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ar("onOpened"),Ar("onClosed")].concat(dW())),mz=re([Du({factory:pv,schema:F4(),name:"primary"}),Du({factory:pv,schema:F4(),name:"overflow",overrides:t=>({toolbarBehaviours:Ln([Tm.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{ii(r,t,"overflow-button").each(i=>{dr.off(i)}),t.onClosed(r)},onGrown:r=>{t.onOpened(r)},onStartGrow:r=>{ii(r,t,"overflow-button").each(dr.on)}}),rs.config({mode:"acyclic",onEscape:r=>(ii(r,t,"overflow-button").each(Ms.focus),B.some(!0))})])})}),fg({name:"overflow-button",overrides:t=>({buttonBehaviours:Ln([dr.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),fg({name:"overflow-group"})]),bW=(t,r)=>ii(t,r,"overflow").map(Tm.hasGrown).getOr(!1),M$=(t,r,i)=>{ii(t,r,"overflow-button").each(d=>{ii(t,r,"overflow").each(p=>{if(N$(t,r),Tm.hasShrunk(p)){const x=r.onOpened;r.onOpened=w=>{i||rs.focusIn(p),x(w),r.onOpened=x}}else{const x=r.onClosed;r.onClosed=w=>{i||Ms.focus(d),x(w),r.onClosed=x}}Tm.toggleGrow(p)})})},N$=(t,r)=>{ii(t,r,"overflow").each(i=>{uW(t,r,d=>{const p=$e(d,x=>dg(x));pv.setGroups(i,p)}),ii(t,r,"overflow-button").each(d=>{Tm.hasGrown(i)&&dr.on(d)}),Tm.refresh(i)})},vW=(t,r,i,d)=>{const p="alloy.toolbar.toggle",x=(w,A)=>{const R=$e(A,w.getSystem().build);t.builtGroups.set(R)};return{uid:t.uid,dom:t.dom,components:r,behaviours:nc(t.splitToolbarBehaviours,[el.config({others:{overflowGroup:w=>Qf.sketch({...d["overflow-group"](),items:[Hl.sketch({...d["overflow-button"](),action:A=>{xr(w,p)}})]})}}),zs("toolbar-toggle-events",[on(p,w=>{M$(w,t,!1)})])]),apis:{setGroups:(w,A)=>{x(w,A),N$(w,t)},refresh:w=>N$(w,t),toggle:w=>{M$(w,t,!1)},toggleWithoutFocusing:w=>{M$(w,t,!0)},isOpen:w=>bW(w,t)},domModification:{attributes:{role:"group"}}}},B$=cd({name:"SplitSlidingToolbar",configFields:hW(),partFields:mz(),factory:vW,apis:{setGroups:(t,r,i)=>{t.setGroups(r,i)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),gz=t=>{const r=t.label.isNone()?t.title.fold(()=>({}),i=>({attributes:{title:i}})):t.label.fold(()=>({}),i=>({attributes:{"aria-label":i}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...r},components:[...t.label.map(i=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Di(i)]})).toArray(),Qf.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ln([Wi.config({}),Ms.config({})])}},GP=t=>Qf.sketch(gz(t)),I$=(t,r)=>{const i=$i(d=>{const p=$e(t.initGroups,GP);pv.setGroups(d,p)});return Ln([qf.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),dl(()=>t.providers.checkUiComponentContext("any")),rs.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),zs("toolbar-events",[i])])},F$=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":gz({title:B.none(),label:B.none(),items:[]}),"overflow-button":nH({context:"any",name:"more",icon:B.some("more-drawer"),enabled:!0,tooltip:B.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:B.none(),borderless:!1},B.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:I$(t,r)}},fz=t=>{const r=F$(t),i=4,d=R$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return R$.sketch({...r,lazySink:t.getSink,getOverflowBounds:()=>{const p=t.moreDrawerData.lazyHeader().element,x=Ya(p),w=Vl(p),A=Ya(w),R=Math.max(w.dom.scrollHeight,A.height);return oa(x.x+i,A.y,x.width-i*2,R)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[d],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:p=>t.onToggled(p,!0),onClosed:p=>t.onToggled(p,!1)})},yW=t=>{const r=B$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),i=B$.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),d=F$(t);return B$.sketch({...d,components:[r,i],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:p=>{p.getSystem().broadcastOn([C$()],{type:"opened"}),t.onToggled(p,!0)},onClosed:p=>{p.getSystem().broadcastOn([C$()],{type:"closed"}),t.onToggled(p,!1)}})},qP=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return pv.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Xg.scrolling?["tox-toolbar--scrolling"]:[])},components:[pv.parts.groups({})],toolbarBehaviours:I$(t,r)})},P$=[lx,nf,ri("tooltip"),Kl("buttonType","secondary",["primary","secondary"]),Ra("borderless",!1),ed("onAction"),gn("context","mode:design")],pz=[...P$,tv,Kc("type",["button"])],hz=[...P$,Ra("active",!1),Kc("type",["togglebutton"])],bz={button:pz,togglebutton:hz},xW=[Kc("type",["group"]),D("buttons",[],fc("type",bz))],wW=fc("type",{...bz,group:xW}),vz=os([D("buttons",[],wW),ed("onShow"),ed("onHide")]),CW=t=>Li("view",vz,t),SW=(t,r)=>{var i,d;const p=t.type==="togglebutton",x=t.icon.map(lt=>xe(lt,r.icons)).map(da),A=lt=>{const Ft=ln=>{x.map(Po=>Po.getOpt(lt).each(io=>{Hs.set(io,[xe(ln,r.icons)])}))},zt=ln=>{const Po=lt.element;ln?(Cc(Po,"tox-button--enabled"),Kn(Po,"aria-pressed",!0)):(Hi(Po,"tox-button--enabled"),fe(Po,"aria-pressed"))},Zn=()=>kd(lt.element,"tox-button--enabled"),Mo=()=>Zd(lt.element);if(p)return t.onAction({setIcon:Ft,setActive:zt,isActive:Zn,focus:Mo});if(t.type==="button")return t.onAction({setIcon:Ft})},R={...t,name:p?t.text.getOr(t.icon.getOr("")):(i=t.text)!==null&&i!==void 0?i:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:B.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},$=SP((d=t.buttonType)!==null&&d!==void 0?d:"secondary"),W=p?t.text.map(r.translate):B.some(r.translate(t.text)),q=W.map(Di),se=R.tooltip.or(W).map(lt=>({"aria-label":r.translate(lt)})).getOr({}),ge=x.map(lt=>lt.asSpec()),Ae=PS([ge,q]),Ie=t.icon.isSome()&&q.isSome(),mt={tag:"button",classes:$.concat(...t.icon.isSome()&&!Ie?["tox-button--icon"]:[]).concat(...Ie?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:se},Fe=[],nt=CP(R,B.some(A),Fe,mt,Ae,t.tooltip,r);return Hl.sketch(nt)},yz=(t,r)=>SW(t,r),kW=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:$e(t.buttons,i=>yz(i,r))}),xz=Xi().deviceType,TW=xz.isPhone(),EW=xz.isTablet(),_W=t=>{let r=!1;const i=$e(t.buttons,d=>d.type==="group"?(r=!0,kW(d,t.providers)):yz(d,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...TW||EW?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ln([Ms.config({}),rs.config({mode:"flow",selector:"button, .tox-button",focusInside:Mb.OnEnterOrSpaceMode})]),components:r?i:[zp.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),zp.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:i})]}},AW=t=>({uid:t.uid,behaviours:Ln([Ms.config({}),Wi.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),OW=(t,r,i,d)=>{const p={getPane:x=>md.getPart(x,t,"pane"),getOnShow:x=>t.viewConfig.onShow,getOnHide:x=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ln([Ms.config({}),rs.config({mode:"cyclic",focusInside:Mb.OnEnterOrSpaceMode})]),apis:p}};var W_=cd({name:"silver.View",configFields:[dn("viewConfig")],partFields:[ym({factory:{sketch:_W},schema:[dn("buttons"),dn("providers")],name:"header"}),ym({factory:{sketch:AW},schema:[],name:"pane"})],factory:OW,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const DW=(t,r,i)=>ma(r,(d,p)=>{const x=_n(CW(d));return t.slot(p,W_.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:x,components:[...x.buttons.length>0?[W_.parts.header({buttons:x.buttons,providers:i})]:[],W_.parts.pane({})]}))}),RW=(t,r)=>tg.sketch(i=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:DW(i,t,r),slotBehaviours:cC.unnamedEvents([$i(d=>tg.hideAllSlots(d))])})),KP=t=>ce(tg.getSlotNames(t),r=>tg.isShowing(t,r)),MW=t=>{const r=t.element;Gn(r,"display","none"),Kn(r,"aria-hidden","true")},YP=t=>{const r=t.element;cr(r,"display"),fe(r,"aria-hidden")},NW=t=>({getContainer:re(t)}),L$=(t,r,i)=>{tg.getSlot(t,r).each(d=>{W_.getPane(d).each(p=>{i(d)(NW(p.element.dom))})})},BW=(t,r)=>L$(t,r,W_.getOnShow),IW=(t,r)=>L$(t,r,W_.getOnHide);var XP=Ym({factory:(t,r)=>{const x={setViews:(w,A)=>{Hs.set(w,[RW(A,r.backstage.shared.providers)])},whichView:w=>Kr.getCurrent(w).bind(KP),toggleView:(w,A,R,$)=>Kr.getCurrent(w).exists(W=>{const q=KP(W),se=q.exists(Ae=>$===Ae),ge=tg.getSlot(W,$).isSome();return ge&&(tg.hideAllSlots(W),se?(MW(w),A()):(R(),YP(w),tg.showSlot(W,$),BW(W,$)),q.each(Ae=>IW(W,Ae))),ge})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ln([Hs.config({}),Kr.config({find:w=>{const A=Hs.contents(w);return Hn(A)}})]),apis:x}},name:"silver.ViewWrapper",configFields:[dn("backstage")],apis:{setViews:(t,r,i)=>t.setViews(r,i),toggleView:(t,r,i,d,p)=>t.toggleView(r,i,d,p),whichView:(t,r)=>t.whichView(r)}});const FW=(t,r,i)=>{let d=!1;const p=w=>{nT(w,".tox-statusbar").each(A=>{bn(A,"display")==="none"&&Ds(A,"aria-hidden")==="true"?(cr(A,"display"),fe(A,"aria-hidden")):(Gn(A,"display","none"),Kn(A,"aria-hidden","true"))})},x={getSocket:w=>md.getPart(w,t,"socket"),setSidebar:(w,A,R)=>{md.getPart(w,t,"sidebar").each($=>ez($,A,R))},toggleSidebar:(w,A)=>{md.getPart(w,t,"sidebar").each(R=>YU(R,A))},whichSidebar:w=>md.getPart(w,t,"sidebar").bind(HP).getOrNull(),getHeader:w=>md.getPart(w,t,"header"),getToolbar:w=>md.getPart(w,t,"toolbar"),setToolbar:(w,A)=>{md.getPart(w,t,"toolbar").each(R=>{const $=$e(A,GP);R.getApis().setGroups(R,$)})},setToolbars:(w,A)=>{md.getPart(w,t,"multiple-toolbar").each(R=>{const $=$e(A,W=>$e(W,GP));VH.setItems(R,$)})},refreshToolbar:w=>{md.getPart(w,t,"toolbar").each(R=>R.getApis().refresh(R))},toggleToolbarDrawer:w=>{md.getPart(w,t,"toolbar").each(A=>{kr(A.getApis().toggle,R=>R(A))})},toggleToolbarDrawerWithoutFocusing:w=>{md.getPart(w,t,"toolbar").each(A=>{kr(A.getApis().toggleWithoutFocusing,R=>R(A))})},isToolbarDrawerToggled:w=>md.getPart(w,t,"toolbar").bind(A=>B.from(A.getApis().isOpen).map(R=>R(A))).getOr(!1),getThrobber:w=>md.getPart(w,t,"throbber"),focusToolbar:w=>{md.getPart(w,t,"toolbar").orThunk(()=>md.getPart(w,t,"multiple-toolbar")).each(R=>{rs.focusIn(R)})},setMenubar:(w,A)=>{md.getPart(w,t,"menubar").each(R=>{T$.setMenus(R,A)})},focusMenubar:w=>{md.getPart(w,t,"menubar").each(A=>{T$.focus(A)})},setViews:(w,A)=>{md.getPart(w,t,"viewWrapper").each(R=>{XP.setViews(R,A)})},toggleView:(w,A)=>md.getPart(w,t,"viewWrapper").exists(R=>XP.toggleView(R,()=>x.showMainView(w),()=>x.hideMainView(w),A)),whichView:w=>md.getPart(w,t,"viewWrapper").bind(XP.whichView).getOrNull(),hideMainView:w=>{d=x.isToolbarDrawerToggled(w),d&&x.toggleToolbarDrawer(w),md.getPart(w,t,"editorContainer").each(A=>{const R=A.element;p(R),Gn(R,"display","none"),Kn(R,"aria-hidden","true")})},showMainView:w=>{d&&x.toggleToolbarDrawer(w),md.getPart(w,t,"editorContainer").each(A=>{const R=A.element;p(R),cr(R,"display"),fe(R,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:x,behaviours:t.behaviours}},$$=yx.optional({factory:T$,name:"menubar",schema:[dn("backstage")]}),PW=t=>t.type===Xg.sliding?yW:t.type===Xg.floating?fz:qP,JP=yx.optional({factory:{sketch:t=>VH.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ln([rs.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>qP({type:t.type,uid:Ao("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),B.some(!0))}),setupItem:(r,i,d,p)=>{pv.setGroups(i,d)},shell:!0})},name:"multiple-toolbar",schema:[dn("dom"),dn("onEscape")]}),wz=yx.optional({factory:{sketch:t=>{const r=PW(t),i={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),B.some(!0)),onToggled:(d,p)=>t.onToolbarToggled(p),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(i)}},name:"toolbar",schema:[dn("dom"),dn("onEscape"),dn("getSink")]}),Cz=yx.optional({factory:{sketch:LP},name:"header",schema:[dn("dom")]}),H$=yx.optional({factory:{sketch:E$},name:"promotion",schema:[dn("dom")]}),LW=yx.optional({name:"socket",schema:[dn("dom")]}),Sz=yx.optional({factory:{sketch:XU},name:"sidebar",schema:[dn("dom")]}),z4=yx.optional({factory:{sketch:oW},name:"throbber",schema:[dn("dom")]}),kz=yx.optional({factory:XP,name:"viewWrapper",schema:[dn("backstage")]}),$W=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),HW=yx.optional({factory:{sketch:$W},name:"editorContainer",schema:[]});var sc=cd({name:"OuterContainer",factory:FW,configFields:[dn("dom"),dn("behaviours")],partFields:[Cz,$$,wz,JP,LW,Sz,H$,z4,kz,HW],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,i,d)=>{t.setSidebar(r,i,d)},toggleSidebar:(t,r,i)=>{t.toggleSidebar(r,i)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,i)=>{t.setToolbar(r,i)},setToolbars:(t,r,i)=>{t.setToolbars(r,i)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,i)=>{t.setMenubar(r,i)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,i)=>{t.setViews(r,i)},toggleView:(t,r,i)=>t.toggleView(r,i),whichView:(t,r)=>t.whichView(r)}});const z$="file edit view insert format tools table help",Tz={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},zW=(t,r,i)=>{const d=gR(i).split(/[ ,]/);return{text:t.title,getItems:()=>oe(t.items,p=>{const x=p.toLowerCase();return x.trim().length===0?[]:ft(d,w=>w===x)?[]:x==="separator"||x==="|"?[{type:"separator"}]:r.menuItems[x]?[r.menuItems[x]]:[]})}},QP=t=>t.split(" "),V$=(t,r)=>{const i={...Tz,...r.menus},d=nn(r.menus).length>0,p=r.menubar===void 0||r.menubar===!0?QP(z$):QP(r.menubar===!1?"":r.menubar),x=Et(p,A=>{const R=Ls(Tz,A);return d?R||vn(r.menus,A).exists($=>Ls($,"items")):R}),w=$e(x,A=>{const R=i[A];return zW({title:R.title,items:QP(R.items)},r,t)});return Et(w,A=>{const R=$=>Tt($)||$.type!=="separator";return A.getItems().length>0&&ft(A.getItems(),R)})},e6=t=>{const r=()=>{t._skinLoaded=!0,z8(t)};return()=>{t.initialized?r():t.on("init",r)}},U$=(t,r)=>()=>V8(t,{message:r}),VW=t=>{const r=TE(t);return r?B.from(r):B.none()},Ez=(t,r,i)=>(t.on("remove",()=>i.unload(r)),i.load(r)),aB=(t,r,i,d)=>(t.on("remove",()=>d.unloadRawCss(r)),d.loadRawCss(r,i)),UW=(t,r)=>"ui/"+t+"/"+r,WW=t=>B.from(tinymce.Resource.get(t)).filter(Tt),W$=(t,r,i="")=>{const d=VW(t).map(x=>UW(x,`${r}.css`)),p=d.bind(WW);return bi(d,p,(x,w)=>({_kind:"load-raw",key:x,css:w})).getOrThunk(()=>{const x=t.editorManager.suffix;return{_kind:"load-stylesheet",url:i+`/${r}${x}.css`}})},_z=(t,r)=>{const i=t.ui.styleSheetLoader,d=W$(t,"skin",r);switch(d._kind){case"load-raw":const{key:p,css:x}=d;return aB(t,p,x,i),Promise.resolve();case"load-stylesheet":const{url:w}=d;return Ez(t,w,i);default:return Promise.resolve()}},jW=(t,r)=>{if(Wr(xt.fromDom(t.getElement()))){const d=yE.DOM.styleSheetLoader,p=W$(t,"skin.shadowdom",r);switch(p._kind){case"load-raw":const{key:x,css:w}=p;return aB(t,x,w,d),Promise.resolve();case"load-stylesheet":const{url:A}=p;return Ez(t,A,d);default:return Promise.resolve()}}else return Promise.resolve()},ZW=(t,r,i)=>{const p=W$(t,r?"content.inline":"content",i);switch(p._kind){case"load-raw":const{key:x,css:w}=p;return r?aB(t,x,w,t.ui.styleSheetLoader):t.on("PostRender",()=>{aB(t,x,w,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:A}=p;return i&&t.contentCSS.push(A),Promise.resolve();default:return Promise.resolve()}},j$=async(t,r)=>{const i=kI(r);if(await ZW(r,t,i),!G1(r)&&Tt(i))return Promise.all([_z(r,i),jW(r,i)]).then()},Az=(t,r)=>j$(t,r).then(e6(r),U$(r,"Skin could not be loaded")),GW=qn(Az,!1),Oz=qn(Az,!0),V4=(t,r,i)=>Pe(i)?t.translate(r):t.translate([r,t.translate(i)]),Dz=(t,r)=>{const i=(w,A,R,$)=>{const W=t.shared.providers.translate(w.title);if(w.type==="separator")return B.some({type:"separator",text:W});if(w.type==="submenu"){const q=oe(w.getStyleItems(),se=>d(se,A,$));return A===0&&q.length<=0?B.none():B.some({type:"nestedmenuitem",text:W,enabled:q.length>0,getSubmenuItems:()=>oe(w.getStyleItems(),se=>d(se,A,$))})}else return B.some({type:"togglemenuitem",text:W,icon:w.icon,active:w.isSelected($),enabled:!R,onAction:r.onAction(w),...w.getStylePreview().fold(()=>({}),q=>({meta:{style:q}}))})},d=(w,A,R)=>{const $=w.type==="formatter"&&r.isInvalid(w);return A===0?$?[]:i(w,A,!1,R).toArray():i(w,A,$,R).toArray()},p=w=>{const A=r.getCurrentValue(),R=r.shouldHide?0:1;return oe(w,$=>d($,R,A))};return{validateItems:p,getFetch:(w,A)=>(R,$)=>{const W=A(),q=p(W),se=As(q,Fp.CLOSE_ON_EXECUTE,w,{isHorizontalMenu:!1,search:B.none()});$(se)}}},U4=(t,r)=>{const i=r.dataset,d=i.type==="basic"?()=>$e(i.data,p=>AH(p,r.isSelectedFor,r.getPreviewFor)):i.getData;return{items:Dz(t,r),getStyleItems:d}},W4=(t,r,i,d,p,x)=>{const{items:w,getStyleItems:A}=U4(r,i),R=wo(i.tooltip),$=q=>({getComponent:re(q),setTooltip:se=>{const ge=r.shared.providers.translate(se);Kn(q.element,"aria-label",ge),R.set(se)}}),W=q=>{const se=ge=>q.setTooltip(V4(t,d(ge.value),ge.value));return t.on(p,se),dC(mC(t,"NodeChange",ge=>{const Ae=ge.getComponent();i.updateText(Ae),Wo.set(ge.getComponent(),!t.selection.isEditable())})(q),()=>t.off(p,se))};return ke({context:"mode:design",text:i.icon.isSome()?B.none():i.text,icon:i.icon,ariaLabel:B.some(i.tooltip),tooltip:B.none(),role:B.none(),fetch:w.getFetch(r,A),onSetup:W,getApi:$,columns:1,presets:"normal",classes:i.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[lc.config({...r.shared.providers.tooltips.getConfig({tooltipText:r.shared.providers.translate(i.tooltip),onShow:q=>{if(i.tooltip!==R.get()){const se=r.shared.providers.translate(R.get());lc.setComponents(q,r.shared.providers.tooltips.getComponents({tooltipText:se}))}}})})]},"tox-tbtn",r.shared,x)},qW=t=>$e(t,r=>{let i=r,d=r;const p=r.split("=");return p.length>1&&(i=p[0],d=p[1]),{title:i,format:d}}),KW=t=>({type:"basic",data:t});var j4;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(j4||(j4={}));const Rz=(t,r)=>r===j4.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),Z$=(t,r,i)=>{const d=t.options.get(r);return{type:"basic",data:qW(Rz(d,i))}},YW="Align",Mz=re("Alignment {0}"),t6="left",iB=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Nz=t=>{const r=()=>ce(iB,A=>t.formatter.match(A.format)),i=A=>()=>t.formatter.match(A),d=A=>B.none,p=A=>{const $=r().fold(re(t6),W=>W.title.toLowerCase());qo(A,Ce,{icon:`align-${$}`}),Ub(t,{value:$})},x=KW(iB),w=A=>()=>ce(iB,R=>R.format===A.format).each(R=>t.execCommand(R.command));return{tooltip:V4(t,Mz(),t6),text:B.none(),icon:B.some("align-left"),isSelectedFor:i,getCurrentValue:B.none,getPreviewFor:d,onAction:w,updateText:p,dataset:x,shouldHide:!1,isInvalid:A=>!t.formatter.canApply(A.format)}},XW=(t,r)=>W4(t,r,Nz(t),Mz,"AlignTextUpdate","align"),JW=(t,r)=>{const i=U4(r,Nz(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate(YW),onSetup:Bd(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},Bz=(t,r)=>{const i=r(),d=$e(i,p=>p.format);return B.from(t.formatter.closest(d)).bind(p=>ce(i,x=>x.format===p))},QW="Blocks",Iz=re("Block {0}"),G$="Paragraph",Fz=t=>{const r=x=>()=>t.formatter.match(x),i=x=>()=>{const w=t.formatter.get(x);return w?B.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(x))}):B.none()},d=x=>{const A=Bz(t,()=>p.data).fold(re(G$),R=>R.title);qo(x,ae,{text:A}),cM(t,{value:A})},p=Z$(t,"block_formats",j4.SemiColon);return{tooltip:V4(t,Iz(),G$),text:B.some(G$),icon:B.none(),isSelectedFor:r,getCurrentValue:B.none,getPreviewFor:i,onAction:r_(t),updateText:d,dataset:p,shouldHide:!1,isInvalid:x=>!t.formatter.canApply(x.format)}},ej=(t,r)=>W4(t,r,Fz(t),Iz,"BlocksTextUpdate","blocks"),Pz=(t,r)=>{const i=U4(r,Fz(t));t.ui.registry.addNestedMenuItem("blocks",{text:QW,onSetup:Bd(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},n6="Fonts",o6=re("Font {0}"),s6="System Font",Ek=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],q$=t=>{const r=t.split(/\s*,\s*/);return $e(r,i=>i.replace(/^['"]+|['"]+$/g,""))},Lz=(t,r)=>r.length>0&&ct(r,i=>t.indexOf(i.toLowerCase())>-1),tj=(t,r)=>{if(t.indexOf("-apple-system")===0||r.length>0){const i=q$(t.toLowerCase());return Lz(i,Ek)||Lz(i,r)}else return!1},$z=t=>{const r=()=>{const R=Ae=>Ae?q$(Ae)[0]:"",$=t.queryCommandValue("FontName"),W=A.data,q=$?$.toLowerCase():"",se=bR(t);return{matchOpt:ce(W,Ae=>{const Ie=Ae.format;return Ie.toLowerCase()===q||R(Ie).toLowerCase()===R(q).toLowerCase()}).orThunk(()=>Lo(tj(q,se),{title:s6,format:q})),font:$}},i=R=>$=>$.exists(W=>W.format===R),d=()=>{const{matchOpt:R}=r();return R},p=R=>()=>B.some({tag:"div",styles:R.indexOf("dings")===-1?{"font-family":R}:{}}),x=R=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,R.format)})},w=R=>{const{matchOpt:$,font:W}=r(),q=$.fold(re(W),se=>se.title);qo(R,ae,{text:q}),AF(t,{value:q})},A=Z$(t,"font_family_formats",j4.SemiColon);return{tooltip:V4(t,o6(),s6),text:B.some(s6),icon:B.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:p,onAction:x,updateText:w,dataset:A,shouldHide:!1,isInvalid:$t}},nj=(t,r)=>W4(t,r,$z(t),o6,"FontFamilyTextUpdate","fontfamily"),oj=(t,r)=>{const i=U4(r,$z(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate(n6),onSetup:Bd(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},sj={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},rj=(()=>{const t="[0-9]+",i="[eE]"+("[+-]?"+t),d="\\.",p=A=>`(?:${A})?`,w=`[+-]?(?:${["Infinity",t+d+p(t)+p(i),d+t+p(i),t+p(i)].join("|")})`;return new RegExp(`^(${w})(.*)$`)})(),Hz=(t,r)=>ft(r,i=>ft(sj[i],d=>t===d)),r6=(t,r)=>B.from(rj.exec(t)).bind(d=>{const p=Number(d[1]),x=d[2];return Hz(x,r)?B.some({value:p,unit:x}):B.none()}),aj=(t,r)=>r6(t,r).map(({value:i,unit:d})=>i+d),a6={tab:re(9),escape:re(27),enter:re(13),backspace:re(8),delete:re(46),left:re(37),up:re(38),right:re(39),down:re(40),space:re(32),home:re(36),end:re(35),pageUp:re(33),pageDown:re(34)},ij=(t,r,i,d)=>{let p=B.none();const x=lt=>lt.map(Ft=>ao.getValue(Ft)).getOr(""),w=mC(t,"NodeChange SwitchMode DisabledStateChange",lt=>{const Ft=lt.getComponent();p=B.some(Ft),i.updateInputValue(Ft),Wo.set(Ft,!t.selection.isEditable()||xE(t))}),A=lt=>({getComponent:re(lt)}),R=wo(ue),$=Ao("custom-number-input-events"),W=(lt,Ft,zt)=>{const Zn=x(p),Mo=i.getNewValue(Zn,lt),ln=Zn.length-`${Mo}`.length,Po=p.map(zo=>zo.element.dom.selectionStart-ln),io=p.map(zo=>zo.element.dom.selectionEnd-ln);i.onAction(Mo,zt),p.each(zo=>{ao.setValue(zo,Mo),Ft&&(Po.each(Mr=>zo.element.dom.selectionStart=Mr),io.each(Mr=>zo.element.dom.selectionEnd=Mr))})},q=(lt,Ft)=>W((zt,Zn)=>zt-Zn,lt,Ft),se=(lt,Ft)=>W((zt,Zn)=>zt+Zn,lt,Ft),ge=lt=>Wa(lt.element).fold(B.none,Ft=>(Zd(Ft),B.some(!0))),Ae=lt=>bh(lt.element)?(wu(lt.element).each(Ft=>Zd(Ft)),B.some(!0)):B.none(),Ie=(lt,Ft,zt,Zn)=>{const Mo=wo(ue),ln=r.shared.providers.translate(zt),Po=Ao("altExecuting"),io=mC(t,"NodeChange SwitchMode DisabledStateChange",Mr=>{Wo.set(Mr.getComponent(),!t.selection.isEditable()||xE(t))}),zo=Mr=>{Wo.isDisabled(Mr)||lt(!0)};return Hl.sketch({dom:{tag:"button",attributes:{"aria-label":ln,"data-mce-name":Ft},classes:Zn.concat(Ft)},components:[he(Ft,r.shared.providers.icons)],buttonBehaviours:Ln([Wo.config({}),lc.config(r.shared.providers.tooltips.getConfig({tooltipText:ln})),zs(Po,[Pp({onSetup:io,getApi:A},Mo),Wu({getApi:A},Mo),on(nd(),(Mr,rc)=>{(rc.event.raw.keyCode===a6.space()||rc.event.raw.keyCode===a6.enter())&&(Wo.isDisabled(Mr)||lt(!1))}),on(Ev(),zo),on(ai(),zo)])]),eventOrder:{[nd()]:[Po,"keying"],[Ev()]:[Po,"alloy.base.behaviour"],[ai()]:[Po,"alloy.base.behaviour"],[od()]:["alloy.base.behaviour",Po,"tooltipping"],[Wd()]:[Po,"tooltipping"]}})},mt=da(Ie(lt=>q(!1,lt),"minus","Decrease font size",[])),Fe=da(Ie(lt=>se(!1,lt),"plus","Increase font size",[])),nt=da({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Nh.sketch({inputBehaviours:Ln([Wo.config({}),zs($,[Pp({onSetup:w,getApi:A},R),Wu({getApi:A},R)]),zs("input-update-display-text",[on(ae,(lt,Ft)=>{ao.setValue(lt,Ft.event.text)}),on(Bk(),lt=>{i.onAction(ao.getValue(lt))}),on(tb(),lt=>{i.onAction(ao.getValue(lt))})]),rs.config({mode:"special",onEnter:lt=>(W(rn,!0,!0),B.some(!0)),onEscape:ge,onUp:lt=>(se(!0,!1),B.some(!0)),onDown:lt=>(q(!0,!1),B.some(!0)),onLeft:(lt,Ft)=>(Ft.cut(),B.none()),onRight:(lt,Ft)=>(Ft.cut(),B.none())})])})],behaviours:Ln([Ms.config({}),rs.config({mode:"special",onEnter:Ae,onSpace:Ae,onEscape:ge}),zs("input-wrapper-events",[on(td(),lt=>{pt([mt,Fe],Ft=>{const zt=xt.fromDom(Ft.get(lt).element.dom);bh(zt)&&Pl(zt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...zn(d)?{"data-mce-name":d}:{}}},components:[mt.asSpec(),nt.asSpec(),Fe.asSpec()],behaviours:Ln([Ms.config({}),rs.config({mode:"flow",focusInside:Mb.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:lt=>bh(lt.element)?B.none():(Zd(lt.element),B.some(!0))})])}},cj="Font sizes",zz=re("Font size {0}"),Vz="12pt",lj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},uj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Uz=(t,r)=>{const i=Math.pow(10,r);return Math.round(t*i)/i},Wz=(t,r)=>/[0-9.]+px$/.test(t)?Uz(parseInt(t,10)*72/96,r||0)+"pt":vn(uj,t).getOr(t),jz=t=>vn(lj,t).getOr(""),Zz=t=>{const r=()=>{let R=B.none();const $=A.data,W=t.queryCommandValue("FontSize");if(W)for(let q=3;R.isNone()&&q>=0;q--){const se=Wz(W,q),ge=jz(se);R=ce($,Ae=>Ae.format===W||Ae.format===se||Ae.format===ge)}return{matchOpt:R,size:W}},i=R=>$=>$.exists(W=>W.format===R),d=()=>{const{matchOpt:R}=r();return R},p=re(B.none),x=R=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,R.format)})},w=R=>{const{matchOpt:$,size:W}=r(),q=$.fold(re(W),se=>se.title);qo(R,ae,{text:q}),_F(t,{value:q})},A=Z$(t,"font_size_formats",j4.Space);return{tooltip:V4(t,zz(),Vz),text:B.some(Vz),icon:B.none(),isSelectedFor:i,getPreviewFor:p,getCurrentValue:d,onAction:x,updateText:w,dataset:A,shouldHide:!1,isInvalid:$t}},Gz=(t,r)=>W4(t,r,Zz(t),zz,"FontSizeTextUpdate","fontsize"),dj=t=>{var r;const i={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:i},mj=16,gj=t=>t>=0,qz=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:d=>qo(d,ae,{text:r()}),onAction:(d,p)=>t.execCommand("FontSize",!1,d,{skip_focus:!p}),getNewValue:(d,p)=>{r6(d,["unsupportedLength","empty"]);const x=r(),w=r6(d,["unsupportedLength","empty"]).or(r6(x,["unsupportedLength","empty"])),A=w.map(se=>se.value).getOr(mj),R=xI(t),$=w.map(se=>se.unit).filter(se=>se!=="").getOr(R),W=p(A,dj($).step),q=`${gj(W)?W:A}${$}`;return q!==x&&j8(t,{value:q}),q}}},fj=(t,r)=>ij(t,r,qz(t),"fontsizeinput"),Kz=(t,r)=>{const i=U4(r,Zz(t));t.ui.registry.addNestedMenuItem("fontsize",{text:cj,onSetup:Bd(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},pj="Formats",Yz=t=>Pe(t)?"Formats":"Format {0}",Xz=(t,r)=>{const i="Formats",d=w=>()=>t.formatter.match(w),p=w=>()=>{const A=t.formatter.get(w);return A!==void 0?B.some({tag:A.length>0&&(A[0].inline||A[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):B.none()},x=w=>{const A=q=>TH(q)?oe(q.items,A):EH(q)?[{title:q.title,format:q.format}]:[],R=oe(_H(t),A),W=Bz(t,re(R)).fold(re({title:i,tooltipLabel:""}),q=>({title:q.title,tooltipLabel:q.title}));qo(w,ae,{text:W.title}),W8(t,{value:W.tooltipLabel})};return{tooltip:V4(t,Yz(""),""),text:B.some(i),icon:B.none(),isSelectedFor:d,getCurrentValue:B.none,getPreviewFor:p,onAction:r_(t),updateText:x,shouldHide:nS(t),isInvalid:w=>!t.formatter.canApply(w.format),dataset:r}},hj=(t,r)=>{const i={type:"advanced",...r.styles};return W4(t,r,Xz(t,i),Yz,"StylesTextUpdate","styles")},bj=(t,r)=>{const i={type:"advanced",...r.styles},d=U4(r,Xz(t,i));t.ui.registry.addNestedMenuItem("styles",{text:pj,onSetup:Bd(t),getSubmenuItems:()=>d.items.validateItems(d.getStyleItems())})},vj=re([dn("toggleClass"),dn("fetch"),w1("onExecute"),Ct("getHotspot",B.some),Ct("getAnchorOverrides",re({})),xb(),w1("onItemExecute"),Cs("lazySink"),dn("dom"),Ar("onOpen"),Ll("splitDropdownBehaviours",[el,rs,Ms]),Ct("matchWidth",!1),Ct("useMinWidth",!1),Ct("eventOrder",{}),Cs("role"),Cs("listRole")].concat(gx())),yj=Du({factory:Hl,schema:[dn("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ln([Ms.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(ob)},buttonBehaviours:Ln([dr.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Jz=Du({factory:Hl,schema:[dn("dom")],name:"button",defaults:()=>({buttonBehaviours:Ln([Ms.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(i=>{t.onExecute(i,r)})}})}),xj=re([yj,Jz,ym({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[dn("text")],name:"aria-descriptor"}),fg({schema:[oy()],name:"menu",defaults:t=>({onExecute:(r,i)=>{r.getSystem().getByUid(t.uid).each(d=>{t.onItemExecute(d,r,i)})}})}),G3()]),wj=(t,r,i,d)=>{const p=W=>{Kr.getCurrent(W).each(q=>{Cn.highlightFirst(q),rs.focusIn(q)})},x=W=>{TM(t,rn,W,d,p,fu.HighlightMenuAndItem).get(ue)},w=W=>(x(W),B.some(!0)),A=W=>{const q=id(W,t,"button");return ob(q),B.some(!0)},R={...ya([$i((W,q)=>{ii(W,t,"aria-descriptor").each(ge=>{const Ae=Ao("aria");Kn(ge.element,"id",Ae),Kn(W.element,"aria-describedby",Ae)})})]),...Xy(B.some(x))},$={repositionMenus:W=>{dr.isOn(W)&&_M(W)}};return{uid:t.uid,dom:t.dom,components:r,apis:$,eventOrder:{...t.eventOrder,[cu()]:["disabling","toggling","alloy.base.behaviour"]},events:R,behaviours:nc(t.splitDropdownBehaviours,[el.config({others:{sandbox:W=>{const q=id(W,t,"arrow");return gC(t,W,{onOpen:()=>{dr.on(q),dr.on(W)},onClose:()=>{dr.off(q),dr.off(W)}})}}}),rs.config({mode:"special",onSpace:A,onEnter:A,onDown:w}),Ms.config({}),dr.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},i6=cd({name:"SplitDropdown",configFields:vj(),partFields:xj(),factory:wj,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),Qz=t=>({isEnabled:()=>!Wo.isDisabled(t),setEnabled:r=>Wo.set(t,!r),setText:r=>qo(t,ae,{text:r}),setIcon:r=>qo(t,Ce,{icon:r})}),Cj=t=>({setActive:r=>{dr.set(t,r)},isActive:()=>dr.isOn(t),isEnabled:()=>!Wo.isDisabled(t),setEnabled:r=>Wo.set(t,!r),setText:r=>qo(t,ae,{text:r}),setIcon:r=>qo(t,Ce,{icon:r})}),e9=(t,r)=>t.map(i=>({"aria-label":r.translate(i)})).getOr({}),t9=Ao("focus-button"),c6=(t,r,i,d,p,x,w)=>{const A=r.map($=>da(ie($,"tox-tbtn",p))),R=t.map($=>da(xe($,p.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:{...e9(i,p),...zn(w)?{"data-mce-name":w}:{}}},components:PS([R.map($=>$.asSpec()),A.map($=>$.asSpec())]),eventOrder:{[_c()]:["focusing","alloy.base.behaviour",V],[od()]:[V,"toolbar-group-button-events"],[Wd()]:[V,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Ln([qf.toolbarButton(()=>p.checkUiComponentContext(x).shouldDisable),dl(()=>p.checkUiComponentContext(x)),zs(V,[$i(($,W)=>Q($)),on(ae,($,W)=>{A.bind(q=>q.getOpt($)).each(q=>{Hs.set(q,[Di(p.translate(W.event.text))])})}),on(Ce,($,W)=>{R.bind(q=>q.getOpt($)).each(q=>{Hs.set(q,[xe(W.event.icon,p.icons)])})}),on(_c(),($,W)=>{W.event.prevent(),xr($,t9)})])].concat(d.getOr([])))}},Sj=(t,r,i,d,p)=>{const x=r.shared,w=wo(ue),A={toolbarButtonBehaviours:[],getApi:Qz,onSetup:t.onSetup},R=[zs("toolbar-group-button-events",[Pp(A,w),Wu(A,w)]),...t.tooltip.map($=>lc.config(r.shared.providers.tooltips.getConfig({tooltipText:r.shared.providers.translate($)}))).toArray()];return Tk.sketch({lazySink:x.getSink,fetch:()=>Id.nu($=>{$($e(i(t.items),GP))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:c6(t.icon,t.text,t.tooltip,B.some(R),x.providers,t.context,p),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:d}}}})},n9=(t,r,i,d)=>{var p;const x=wo(ue),w=c6(t.icon,t.text,t.tooltip,B.none(),i,t.context,d);return Hl.sketch({dom:w.dom,components:w.components,eventOrder:G,buttonBehaviours:{...Ln([zs("toolbar-button-events",[N({onAction:t.onAction,getApi:r.getApi}),Pp(r,x),Wu(r,x)]),...t.tooltip.map(A=>lc.config(i.tooltips.getConfig({tooltipText:i.translate(A)+t.shortcut.map(R=>` (${HS(R)})`).getOr("")}))).toArray(),qf.toolbarButton(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),dl(()=>i.checkUiComponentContext(t.context))].concat(r.toolbarButtonBehaviours)),[V]:(p=w.buttonBehaviours)===null||p===void 0?void 0:p[V]}})},o9=(t,r,i)=>s9(t,r,[],i),s9=(t,r,i,d)=>n9(t,{toolbarButtonBehaviours:i.length>0?[zs("toolbarButtonWith",i)]:[],getApi:Qz,onSetup:t.onSetup},r,d),r9=(t,r,i)=>K$(t,r,[],i),K$=(t,r,i,d)=>n9(t,{toolbarButtonBehaviours:[Hs.config({}),dr.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(i.length>0?[zs("toolbarToggleButtonWith",i)]:[]),getApi:Cj,onSetup:t.onSetup},r,d),kj=(t,r,i)=>d=>Id.nu(p=>r.fetch(p)).map(p=>B.from(h_(mi(pM(Ao("menu-value"),p,x=>{r.onItemAction(t(d),x)},r.columns,r.presets,Fp.CLOSE_ON_EXECUTE,r.select.getOr($t),i),{movement:m_(r.columns,r.presets),menuBehaviours:cC.unnamedEvents(r.columns!=="auto"?[]:[$i((x,w)=>{ZR(x,4,Wf(r.presets)).each(({numRows:A,numColumns:R})=>{rs.setGridSize(x,A,R)})})])})))),Tj=(t,r,i)=>{const d=wo(t.tooltip.getOr("")),p=A=>({isEnabled:()=>!Wo.isDisabled(A),setEnabled:R=>Wo.set(A,!R),setIconFill:(R,$)=>{zi(A.element,`svg path[class="${R}"], rect[class="${R}"]`).each(W=>{Kn(W,"fill",$)})},setActive:R=>{Kn(A.element,"aria-pressed",R),zi(A.element,"span").each($=>{A.getSystem().getByDom($).each(W=>dr.set(W,R))})},isActive:()=>zi(A.element,"span").exists(R=>A.getSystem().getByDom(R).exists(dr.isOn)),setText:R=>zi(A.element,"span").each($=>A.getSystem().getByDom($).each(W=>qo(W,ae,{text:R}))),setIcon:R=>zi(A.element,"span").each($=>A.getSystem().getByDom($).each(W=>qo(W,Ce,{icon:R}))),setTooltip:R=>{const $=r.providers.translate(R);Kn(A.element,"aria-label",$),d.set(R)}}),x=wo(ue),w={getApi:p,onSetup:t.onSetup};return i6.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...e9(t.tooltip,r.providers),...zn(i)?{"data-mce-name":i}:{}}},onExecute:A=>{const R=p(A);R.isEnabled()&&t.onAction(R)},onItemExecute:(A,R,$)=>{},splitDropdownBehaviours:Ln([zs("split-dropdown-events",[$i((A,R)=>Q(A)),on(t9,Ms.focus),Pp(w,x),Wu(w,x)]),qf.splitButton(()=>r.providers.isDisabled()||r.providers.checkUiComponentContext(t.context).shouldDisable),dl(()=>r.providers.checkUiComponentContext(t.context)),Cm.config({}),...t.tooltip.map(A=>lc.config({...r.providers.tooltips.getConfig({tooltipText:r.providers.translate(A),onShow:R=>{if(d.get()!==A){const $=r.providers.translate(d.get());lc.setComponents(R,r.providers.tooltips.getComponents({tooltipText:$}))}}})})).toArray()]),eventOrder:{[od()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Wd()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:kj(p,t,r.providers),parts:{menu:Q1(!1,t.columns,t.presets)},components:[i6.parts.button(c6(t.icon,t.text,B.none(),B.some([dr.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),qf.toolbarButton($t),dl(re({contextType:"any",shouldDisable:!1}))]),r.providers,t.context)),i6.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:a3("chevron-down",r.providers.icons)},buttonBehaviours:Ln([qf.splitButton($t),dl(re({contextType:"any",shouldDisable:!1}))])}),i6.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},Ej=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wx=(t,r)=>(i,d,p,x)=>{const w=t(i).mapError(A=>Uo(A)).getOrDie();return r(w,d,p,x)},_j={button:wx(AS,(t,r,i,d)=>o9(t,r.shared.providers,d)),togglebutton:wx(OS,(t,r,i,d)=>r9(t,r.shared.providers,d)),menubutton:wx(XH,(t,r,i,d)=>uv(t,"tox-tbtn",r,B.none(),!1,d)),splitbutton:wx(zU,(t,r,i,d)=>Tj(t,r.shared,d)),grouptoolbarbutton:wx(KH,(t,r,i,d)=>{const p=i.ui.registry.getAll().buttons,x=A=>Z4(i,{buttons:p,toolbar:A,allowToolbarGroups:!1},r,B.none()),w={[vh]:r.shared.header.isPositionedAtTop()?xp.TopToBottom:xp.BottomToTop};switch(Ap(i)){case Xg.floating:return Sj(t,r,x,w,d);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Aj=(t,r,i,d)=>vn(_j,t.type).fold(()=>(console.error("skipping button defined by",t),B.none()),p=>B.some(p(t,r,i,d))),a9={styles:hj,fontsize:Gz,fontsizeinput:fj,fontfamily:nj,blocks:ej,align:XW},Oj=t=>{const r=$e(Ej,i=>{const d=Et(i.items,p=>Ls(t,p)||Ls(a9,p));return{name:i.name,items:d}});return Et(r,i=>i.items.length>0)},Dj=t=>{const r=t.split("|");return $e(r,i=>({items:i.trim().split(" ")}))},Rj=t=>at(t,r=>(Ls(r,"name")||Ls(r,"label"))&&Ls(r,"items")),Mj=t=>{const r=t.toolbar,i=t.buttons;return r===!1?[]:r===void 0||r===!0?Oj(i):Tt(r)?Dj(r):Rj(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Nj=(t,r,i,d,p,x)=>vn(r,i.toLowerCase()).orThunk(()=>x.bind(w=>rt(w,A=>vn(r,A+i.toLowerCase())))).fold(()=>vn(a9,i.toLowerCase()).map(w=>w(t,p)),w=>w.type==="grouptoolbarbutton"&&!d?(console.warn(`Ignoring the '${i}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),B.none()):Aj(w,p,t,i.toLowerCase())),Z4=(t,r,i,d)=>{const p=Mj(r),x=$e(p,w=>{const A=oe(w.items,R=>R.trim().length===0?[]:Nj(t,r.buttons,R,r.allowToolbarGroups,i,d).toArray());return{title:B.from(t.translate(w.name)),label:Lo(w.label!==void 0,t.translate(w.label)),items:A}});return Et(x,w=>w.items.length>0)},i9=(t,r,i,d)=>{const p=r.mainUi.outerContainer,x=i.toolbar,w=i.buttons;if(at(x,Tt)){const A=x.map(R=>{const $={toolbar:R,buttons:w,allowToolbarGroups:i.allowToolbarGroups};return Z4(t,$,d,B.none())});sc.setToolbars(p,A)}else sc.setToolbar(p,Z4(t,i,d,B.none()))},c9=Xi(),l9=c9.os.isiOS()&&c9.os.version.major<=12,u9=(t,r)=>{const{uiMotherships:i}=r,d=t.dom;let p=t.getWin();const x=t.getDoc().documentElement,w=wo(Ka(p.innerWidth,p.innerHeight)),A=wo(Ka(x.offsetWidth,x.offsetHeight)),R=()=>{const se=w.get();(se.left!==p.innerWidth||se.top!==p.innerHeight)&&(w.set(Ka(p.innerWidth,p.innerHeight)),rM(t))},$=()=>{const se=t.getDoc().documentElement,ge=A.get();(ge.left!==se.offsetWidth||ge.top!==se.offsetHeight)&&(A.set(Ka(se.offsetWidth,se.offsetHeight)),rM(t))},W=se=>{WS(t,se)};d.bind(p,"resize",R),d.bind(p,"scroll",W);const q=Zv(xt.fromDom(t.getBody()),"load",$);t.on("hide",()=>{pt(i,se=>{Gn(se.element,"display","none")})}),t.on("show",()=>{pt(i,se=>{cr(se.element,"display")})}),t.on("NodeChange",$),t.on("remove",()=>{q.unbind(),d.unbind(p,"resize",R),d.unbind(p,"scroll",W),p=null})},Bj=(t,r,i)=>{ef(t)&&Ou(i.mainUi.mothership.element,i.popupUi.mothership),Vi(r,i.dialogUi.mothership)};var Ij=Object.freeze({__proto__:null,render:(t,r,i,d,p)=>{const{mainUi:x,uiMotherships:w}=r,A=wo(0),R=x.outerContainer;GW(t);const $=xt.fromDom(p.targetNode),W=Ki(qa($));Ou($,x.mothership),Bj(t,W,r),t.on("PostRender",()=>{sc.setSidebar(R,i.sidebar,aS(t))}),t.on("SkinLoaded",()=>{i9(t,r,i,d),A.set(t.getWin().innerWidth),sc.setMenubar(R,V$(t,i)),sc.setViews(R,i.views),u9(t,r)});const q=sc.getSocket(R).getOrDie("Could not find expected socket element");if(l9){jr(q.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Ie=SC(()=>{t.dispatch("ScrollContent")},20),mt=Au(q.element,"scroll",Ie.throttle);t.on("remove",mt.unbind)}O3(t,r),t.addCommand("ToggleSidebar",(Ie,mt)=>{sc.toggleSidebar(R,mt),z3(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var Ie;return(Ie=sc.whichSidebar(R))!==null&&Ie!==void 0?Ie:""}),t.addCommand("ToggleView",(Ie,mt)=>{if(sc.toggleView(R,mt)){const Fe=R.element;x.mothership.broadcastOn([Ch()],{target:Fe}),pt(w,nt=>{nt.broadcastOn([Ch()],{target:Fe})}),st(sc.whichView(R))&&(t.focus(),t.nodeChanged(),sc.refreshToolbar(R)),OF(t)}}),t.addQueryValueHandler("ToggleView",()=>{var Ie;return(Ie=sc.whichView(R))!==null&&Ie!==void 0?Ie:""});const se=Ap(t),ge=()=>{sc.refreshToolbar(r.mainUi.outerContainer)};(se===Xg.sliding||se===Xg.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Ie=t.getWin().innerWidth;Ie!==A.get()&&(ge(),A.set(Ie))});const Ae={setEnabled:Ie=>{FS(r,Ie?"setEnabled":"setDisabled")},isEnabled:()=>!Wo.isDisabled(R)};return{iframeContainer:q.element.dom,editorContainer:R.element.dom,api:Ae}}});const d9=t=>/^[0-9\.]+(|px)$/i.test(""+t)?B.some(parseInt(""+t,10)):B.none(),Y$=t=>Ue(t)?t+"px":t,l6=(t,r,i)=>{const d=r.filter(x=>t<x),p=i.filter(x=>t>x);return d.or(p).getOr(t)},m9=t=>{const r=HO(t),i=wE(t),d=tS(t);return d9(r).map(p=>l6(p,i,d))},Fj=t=>m9(t).getOr(HO(t)),g9=t=>{const r=dR(t),i=Jg(t),d=tx(t);return d9(r).map(p=>l6(p,i,d))},Pj=t=>g9(t).getOr(dR(t)),{ToolbarLocation:X$,ToolbarMode:cB}=YO,Lj=40,u6=(t,r,i,d,p)=>{const{mainUi:x,uiMotherships:w}=i,A=yE.DOM,R=Qg(t),$=q1(t),W=tx(t).or(g9(t)),q=d.shared.header,se=q.isPositionedAtTop,ge=150,Ae=Ap(t),Ie=Ae===cB.sliding||Ae===cB.floating,mt=wo(!1),Fe=()=>mt.get()&&!t.removed,nt=Yo=>Ie?Yo.fold(re(0),Rn=>Rn.components().length>1?uc(Rn.components()[1].element):0):0,lt=Yo=>{switch(CE(t)){case X$.auto:const Rn=sc.getToolbar(x.outerContainer),lo=nt(Rn),Vs=uc(Yo.element)-lo,mr=jc(r);if(mr.y>Vs)return"top";{const Qs=Vl(r),ki=Math.max(Qs.dom.scrollHeight,uc(Qs));return mr.bottom<ki-Vs||Yt().bottom<mr.bottom-Vs?"bottom":"top"}case X$.bottom:return"bottom";case X$.top:default:return"top"}},Ft=Yo=>{p.on(Rn=>{wi.setModes(Rn,[Yo]),q.setDockingMode(Yo);const lo=se()?xp.TopToBottom:xp.BottomToTop;Kn(Rn.element,vh,lo)})},zt=()=>{p.on(Yo=>{const Rn=W.getOrThunk(()=>Vd().width-ic(r).left-10);Gn(Yo.element,"max-width",Rn+"px")})},Zn=(Yo,Rn)=>{p.on(lo=>{const Vs=sc.getToolbar(x.outerContainer),mr=nt(Vs),bs=jc(r),Qs=Mo(t,x.outerContainer.element),ki=()=>Qs.fold(()=>bs.x,Om=>{const Wh=jc(Om);return Es(Om,Pt())?bs.x:bs.x-Wh.x}),ni=()=>Qs.fold(()=>se()?Math.max(bs.y-uc(lo.element)+mr,0):bs.bottom,Om=>{var Wh;const jh=jc(Om),bv=(Wh=Om.dom.scrollTop)!==null&&Wh!==void 0?Wh:0,kx=Es(Om,Pt())?Math.max(bs.y-uc(lo.element)+mr,0):bs.y-jh.y+bv-uc(lo.element)+mr;return se()?kx:bs.bottom}),op=ki(),Vc=Lo(Yo,Math.ceil(x.outerContainer.element.dom.getBoundingClientRect().width)).filter(Om=>Om>ge).map(Om=>{const Wh=Rn.getOr(bl()),jh=window.innerWidth-(op-Wh.left),bv=Math.max(Math.min(Om,jh),ge);return jh<Om&&Gn(x.outerContainer.element,"width",bv+"px"),{width:bv+"px"}}).getOr({width:"max-content"}),Uh={position:"absolute",left:Math.round(op)+"px",top:ni()+"px"};jr(x.outerContainer.element,{...Uh,...Vc})})},Mo=(Yo,Rn)=>ef(Yo)?Fv(Rn):B.none(),ln=()=>{pt(w,Yo=>{Yo.broadcastOn([P1()],{})})},Po=()=>!R&&(sl(x.outerContainer.element).left+wt(x.outerContainer.element)>=window.innerWidth-Lj||ba(x.outerContainer.element,"width").isSome())?(Gn(x.outerContainer.element,"position","absolute"),Gn(x.outerContainer.element,"left","0px"),cr(x.outerContainer.element,"width"),!0):!1,io=Yo=>{if(!Fe())return;R||zt();const Rn=bl(),lo=R?!1:Po();if(Ie&&sc.refreshToolbar(x.outerContainer),!R){const Vs=bl(),mr=Lo(Rn.left!==Vs.left,Rn);Zn(lo,mr),mr.each(bs=>{Hm(bs.left,Vs.top)})}$&&p.on(Yo),ln()},zo=()=>R||!$||!Fe()?!1:p.get().exists(Yo=>{const Rn=q.getDockingMode(),lo=lt(Yo);return lo!==Rn?(Ft(lo),!0):!1});return{isVisible:Fe,isPositionedAtTop:se,show:()=>{mt.set(!0),Gn(x.outerContainer.element,"display","flex"),A.addClass(t.getBody(),"mce-edit-focus"),pt(w,Yo=>{cr(Yo.element,"display")}),zo(),ef(t)?io(Yo=>wi.isDocked(Yo)?wi.reset(Yo):wi.refresh(Yo)):io(wi.refresh)},hide:()=>{mt.set(!1),Gn(x.outerContainer.element,"display","none"),A.removeClass(t.getBody(),"mce-edit-focus"),pt(w,Yo=>{Gn(Yo.element,"display","none")})},update:io,updateMode:()=>{zo()&&io(wi.reset)},repositionPopups:ln}},lB=(t,r)=>{const i=jc(t);return{pos:r?i.y:i.bottom,bounds:i}},f9=(t,r,i,d)=>{const p=wo(lB(r,i.isPositionedAtTop())),x=$=>{const{pos:W,bounds:q}=lB(r,i.isPositionedAtTop()),{pos:se,bounds:ge}=p.get(),Ae=q.height!==ge.height||q.width!==ge.width;p.set({pos:W,bounds:q}),Ae&&rM(t,$),i.isVisible()&&(se!==W?i.update(wi.reset):Ae&&(i.updateMode(),i.repositionPopups()))};d||(t.on("activate",i.show),t.on("deactivate",i.hide)),t.on("SkinLoaded ResizeWindow",()=>i.update(wi.reset)),t.on("NodeChange keydown",$=>{requestAnimationFrame(()=>x($))});let w=0;const A=C4(()=>i.update(wi.refresh),33);t.on("ScrollWindow",()=>{const $=bl().left;$!==w&&(w=$,A.throttle()),i.updateMode()}),ef(t)&&t.on("ElementScroll",$=>{i.update(wi.refresh)});const R=mc();R.set(Zv(xt.fromDom(t.getBody()),"load",$=>x($.raw))),t.on("remove",()=>{R.clear()})};var $j=Object.freeze({__proto__:null,render:(t,r,i,d,p)=>{const{mainUi:x}=r,w=Ir(),A=xt.fromDom(p.targetNode),R=u6(t,A,r,d,w),$=Pb(t);Oz(t);const W=()=>{if(w.isSet()){R.show();return}w.set(sc.getHeader(x.outerContainer).getOrDie());const se=yR(t);ef(t)?(Ou(A,x.mothership),Ou(A,r.popupUi.mothership)):Vi(se,x.mothership),Vi(se,r.dialogUi.mothership);const ge=()=>{i9(t,r,i,d),sc.setMenubar(x.outerContainer,V$(t,i)),R.show(),f9(t,A,R,$),t.nodeChanged()};$?t.once("SkinLoaded",ge):ge()};t.on("show",W),t.on("hide",R.hide),$||(t.on("focus",W),t.on("blur",R.hide)),t.on("init",()=>{(t.hasFocus()||$)&&W()}),O3(t,r);const q={show:W,hide:R.hide,setEnabled:se=>{FS(r,se?"setEnabled":"setDisabled")},isEnabled:()=>!Wo.isDisabled(x.outerContainer)};return{editorContainer:x.outerContainer.element.dom,api:q}}});const Hj=()=>{const t=Ir(),r=Ir(),i=Ir();return{dialogUi:t,popupUi:r,mainUi:i,getUiMotherships:()=>{const x=t.get().map(A=>A.mothership),w=r.get().map(A=>A.mothership);return x.fold(()=>w.toArray(),A=>w.fold(()=>[A],R=>Es(A.element,R.element)?[A]:[A,R]))},lazyGetInOuterOrDie:(x,w)=>()=>i.get().bind(A=>w(A.outerContainer)).getOrDie(`Could not find ${x} element in OuterContainer`)}},zj="contexttoolbar-show",p9="contexttoolbar-hide",d6=".tox-toolbar-slider__input,.tox-toolbar-textfield",m6=t=>{cc.getContent(t).each(r=>{zi(r.element,d6).fold(()=>rs.focusIn(r),Zd)})},J$=t=>Ad(t.element).each(r=>{zc(r,'[tabindex="-1"]').each(i=>{Zd(i)})}),Q$=Ao("forward-slide"),g6=Ao("backward-slide"),e7=Ao("change-slide-event"),f6="tox-pop--resizing",Vj=t=>{const r=wo([]);return cc.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{r.set([]),cc.getContent(i).each(d=>{cr(d.element,"visibility")}),Hi(i.element,f6),cr(i.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:Ln([zs("context-toolbar-events",[u1(cp(),(i,d)=>{d.event.raw.propertyName==="width"&&(Hi(i.element,f6),cr(i.element,"width"))}),on(e7,(i,d)=>{const p=i.element;cr(p,"width");const x=_e(p);cr(p,"left"),cr(p,"right"),cr(p,"max-width"),cc.setContent(i,d.event.contents),Cc(p,f6);const w=_e(p);Gn(p,"transition","none"),cc.reposition(i),cr(p,"transition"),Gn(p,"width",x+"px"),d.event.focus.fold(()=>m6(i),A=>{Zd(A),Ad(p).isNone()&&m6(i)}),setTimeout(()=>{Gn(i.element,"width",w+"px")},0)}),on(Q$,(i,d)=>{cc.getContent(i).each(p=>{r.set(r.get().concat([{bar:p,focus:hb(qa(i.element))}]))}),qo(i,e7,{contents:d.event.forwardContents,focus:B.none()})}),on(g6,(i,d)=>{t.onBack(),ut(r.get()).each(p=>{r.set(r.get().slice(0,r.get().length-1)),qo(i,e7,{contents:dg(p.bar),focus:p.focus})})})]),rs.config({mode:"special",onEscape:i=>ut(r.get()).fold(()=>t.onEscape(),d=>(xr(i,g6),B.some(!0)))})]),lazySink:()=>Ws.value(t.sink)})},OC=t=>{const r=Ir();return{setInputEnabled:i=>{i||J$(t),Wo.set(t,!i)},isInputEnabled:()=>!Wo.isDisabled(t),hide:()=>{r.isSet()||r.set(ao.getValue(t)),xr(t,$c())},back:()=>{r.isSet()||r.set(ao.getValue(t)),xr(t,g6)},getValue:()=>r.get().getOrThunk(()=>ao.getValue(t)),setValue:i=>{r.isSet()?r.set(i):ao.setValue(t,i)}}},h9=(t,r)=>on(P,(i,d)=>{const p=t.get(i),x=OC(p);r.onAction(x,d.event.buttonApi)}),Uj=(t,r,i)=>{const{primary:d,...p}=r.original,x=_n(AS({...p,type:"button",onAction:ue}));return s9(x,i,[h9(t,r)])},Wj=(t,r,i)=>{const{primary:d,...p}=r.original,x=_n(OS({...p,type:"togglebutton",onAction:ue}));return K$(x,i,[h9(t,r)])},uB=t=>t.type==="contextformtogglebutton",jj=(t,r,i)=>uB(r)?Wj(t,r,i):Uj(t,r,i),b9=(t,r,i)=>{const d=$e(r,w=>da(jj(t,w,i)));return{asSpecs:()=>$e(d,w=>w.asSpec()),findPrimary:w=>rt(r,(A,R)=>A.primary?B.from(d[R]).bind($=>$.getOpt(w)).filter(Qe(Wo.isDisabled)):B.none())}},Zj=(t,r,i)=>{const{width:d,height:p}=t.initValue();return iv({inDialog:!1,label:t.label,enabled:!0,context:B.none(),name:B.none(),width:d,height:p,onEnter:B.some(i),onInput:B.some(x=>t.onInput(OC(x))),onSetup:B.some(t.onSetup),getApi:B.some(OC)},r)},t7=(t,r,i)=>ra.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),r],fieldBehaviours:Ln([Wo.config({disabled:()=>i.checkUiComponentContext("mode:design").shouldDisable,onDisabled:d=>{J$(d),ra.getField(d).each(Wo.disable)},onEnabled:d=>{ra.getField(d).each(Wo.enable)}})])}),Gj=(t,r,i)=>{const d=wo(ue),p=t.label.map(w=>ra.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Di(r.translate(w))]})),x=ra.parts.field({factory:Nh,type:"range",inputClasses:["tox-toolbar-slider__input"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:w=>Rt(w).getOr(t.min()),toInputValue:w=>String(w),inputBehaviours:Ln([Wo.config({disabled:()=>r.checkUiComponentContext("mode:design").shouldDisable}),dl(()=>r.checkUiComponentContext("mode:design")),rs.config({mode:"special",onEnter:i,onLeft:(w,A)=>(A.cut(),B.none()),onRight:(w,A)=>(A.cut(),B.none())}),zs("slider-events",[Pp({onSetup:t.onSetup,getApi:OC,onBeforeSetup:rs.focusIn},d),Wu({getApi:OC},d),on(lg(),w=>{t.onInput(OC(w))})])])});return t7(p,x,r)},v9=(t,r,i)=>{const d=wo(ue),p=t.label.map(R=>ra.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Di(r.translate(R))]})),w={...t.placeholder.map(R=>({placeholder:r.translate(R)})).getOr({})},A=ra.parts.field({factory:Nh,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],inputAttributes:w,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Ln([Wo.config({disabled:()=>r.checkUiComponentContext("mode:design").shouldDisable}),dl(()=>r.checkUiComponentContext("mode:design")),rs.config({mode:"special",onEnter:i,onLeft:(R,$)=>($.cut(),B.none()),onRight:(R,$)=>($.cut(),B.none())}),zs("input-events",[Pp({onSetup:t.onSetup,getApi:OC,onBeforeSetup:rs.focusIn},d),Wu({getApi:OC},d),on(lg(),R=>{t.onInput(OC(R))})])])});return t7(p,A,r)},n7=(t,r,i)=>{const p=da(t(i,R=>w.findPrimary(R).orThunk(()=>A.findPrimary(R)).map($=>(ob($),!0)))),x=Jo(r.commands,R=>R.align==="start"),w=b9(p,x.pass,i),A=b9(p,x.fail,i);return Et([{title:B.none(),label:B.none(),items:w.asSpecs()},{title:B.none(),label:B.none(),items:[p.asSpec()]},{title:B.none(),label:B.none(),items:A.asSpecs()}],R=>R.items.length>0)},y9=(t,r)=>{switch(t.type){case"contextform":return n7(qn(v9,t),t,r);case"contextsliderform":return n7(qn(Gj,t),t,r);case"contextsizeinputform":return n7(qn(Zj,t),t,r)}},qj={renderContextForm:(t,r,i)=>qP({type:t,uid:Ao("context-toolbar"),initGroups:y9(r,i),onEscape:B.none,cyclicKeying:!0,providers:i}),buildInitGroups:y9},x9=(t,r,i)=>r.bottom-t.y>=i&&t.bottom-r.y>=i,dB=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const i=Ku(xt.fromDom(t.startContainer),t.startOffset).element;return(ar(i)?li(i):B.some(i)).filter(er).map(p=>p.dom.getBoundingClientRect()).getOr(r)}else return r},p6=t=>{const r=t.selection.getRng(),i=dB(r);if(t.inline){const d=bl();return oa(d.left+i.left,d.top+i.top,i.width,i.height)}else{const d=Ya(xt.fromDom(t.getBody()));return oa(d.x+i.left,d.y+i.top,i.width,i.height)}},Kj=(t,r)=>r.filter(i=>Je(i)&&Bs(i)).map(Ya).getOrThunk(()=>p6(t)),Yj=(t,r,i)=>{const d=Math.max(t.x+i,r.x),p=Math.min(t.right-i,r.right);return{x:d,width:p-d}},w9=(t,r,i,d,p,x)=>{const w=xt.fromDom(t.getContainer()),A=zi(w,".tox-editor-header").getOr(w),R=jc(A),$=R.y>=r.bottom,W=d&&!$;if(t.inline&&W)return{y:Math.max(R.bottom+x,i.y),bottom:i.bottom};if(t.inline&&!W)return{y:i.y,bottom:Math.min(R.y-x,i.bottom)};const q=p==="line"?jc(w):r;return W?{y:Math.max(R.bottom+x,i.y),bottom:Math.min(q.bottom-x,i.bottom)}:{y:Math.max(q.y+x,i.y),bottom:Math.min(R.y-x,i.bottom)}},h6=(t,r,i,d=0)=>{const p=Vd(window),x=jc(xt.fromDom(t.getContentAreaContainer())),w=ZO(t)||GO(t)||EE(t),{x:A,width:R}=Yj(x,p,d);if(t.inline&&!w)return oa(A,p.y,R,p.height);{const $=r.header.isPositionedAtTop(),{y:W,bottom:q}=w9(t,x,p,$,i,d);return oa(A,W,R,q-W)}},mB=12,o7={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},C9={maxHeightFunction:vy(),maxWidthFunction:A$()},G4=(t,r)=>{const i=t.selection.getRng(),d=Ku(xt.fromDom(i.startContainer),i.startOffset);return i.startContainer===i.endContainer&&i.startOffset===i.endOffset-1&&Es(d.element,r)},b6=(t,r,i)=>{const d=ba(t,"position");Gn(t,"position",r);const p=i(t);return d.each(x=>Gn(t,"position",x)),p},gB=t=>t==="node",s7=(t,r,i,d,p)=>{const x=p6(t),w=d.lastElement().exists(A=>Es(i,A));if(G4(t,i))return w?vH:gv;if(w)return b6(r,d.getMode(),()=>x9(x,jc(r),-20)&&!d.isReposition()?yH:vH);{const A=d.getMode()==="fixed"?p.y+bl().top:p.y,R=uc(r)+mB;return A+R<=x.y?gv:JN}},r7=(t,r,i,d)=>{const p=R=>($,W,q,se,ge)=>{const Ae=s7(t,se,R,i,ge),Ie={...$,y:ge.y,height:ge.height};return{...Ae(Ie,W,q,se,ge),alwaysFit:!0}},x=R=>gB(d)?[p(R)]:[];return r?{onLtr:R=>[Jc,lr,pc,Fl,Fa,Jl].concat(x(R)),onRtl:R=>[Jc,pc,lr,Fa,Fl,Jl].concat(x(R))}:{onLtr:R=>[Jl,Jc,Fl,lr,Fa,pc].concat(x(R)),onRtl:R=>[Jl,Jc,Fa,pc,Fl,lr].concat(x(R))}},S9=(t,r,i,d)=>r==="line"?{bubble:Rf(mB,0,o7),layouts:{onLtr:()=>[my],onRtl:()=>[gy]},overrides:C9}:{bubble:Rf(0,mB,o7,1/mB),layouts:r7(t,i,d,r),overrides:C9},q4=(t,r)=>{const i=Et(r,x=>x.predicate(t.dom)),{pass:d,fail:p}=Jo(i,x=>x.type==="contexttoolbar");return{contextToolbars:d,contextForms:p}},k9=t=>{if(t.length<=1)return t;{const r=x=>ft(t,w=>w.position===x),i=x=>Et(t,w=>w.position===x),d=r("selection"),p=r("node");if(d||p)if(p&&d){const x=i("node"),w=$e(i("selection"),A=>({...A,position:"node"}));return x.concat(w)}else return i(d?"selection":"node");else return i("line")}},T9=t=>{if(t.length<=1)return t;{const r=d=>ce(t,p=>p.position===d);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(d=>d.position).fold(()=>[],d=>Et(t,p=>p.position===d))}},a7=(t,r,i)=>{const d=q4(t,r);if(d.contextForms.length>0)return B.some({elem:t,toolbars:[d.contextForms[0]]});{const p=q4(t,i);if(p.contextForms.length>0)return B.some({elem:t,toolbars:[p.contextForms[0]]});if(d.contextToolbars.length>0||p.contextToolbars.length>0){const x=k9(d.contextToolbars.concat(p.contextToolbars));return B.some({elem:t,toolbars:x})}else return B.none()}},Xj=(t,r,i)=>t(r)?B.none():iu(r,d=>{if(er(d)){const{contextToolbars:p,contextForms:x}=q4(d,i.inNodeScope),w=x.length>0?x:T9(p);return w.length>0?B.some({elem:d,toolbars:w}):B.none()}else return B.none()},t),E9=(t,r)=>{const i=xt.fromDom(r.getBody()),d=w=>Es(w,i),p=w=>!d(w)&&!xu(i,w),x=xt.fromDom(r.selection.getNode());return p(x)?B.none():a7(x,t.inNodeScope,t.inEditorScope).orThunk(()=>Xj(d,x,t))},Jj=(t,r)=>{const i={},d=[],p=[],x={},w={},A=(W,q)=>{const se=_n(Ci(q));i[W]=se,se.launch.map(ge=>{x["form:"+W]={...q.launch,type:ge.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(se)}}}),se.scope==="editor"?p.push(se):d.push(se),w[W]=se},R=(W,q)=>{A3(q).each(se=>{q.scope==="editor"?p.push(se):d.push(se),w[W]=se})},$=nn(t);return pt($,W=>{const q=t[W];q.type==="contextform"||q.type==="contextsliderform"||q.type==="contextsizeinputform"?A(W,q):q.type==="contexttoolbar"&&R(W,q)}),{forms:i,inNodeScope:d,inEditorScope:p,lookupTable:w,formNavigators:x}},i7="tox-pop--transition",v6=(t,r,i,d)=>{const p=d.backstage,x=p.shared,w=Xi().deviceType.isTouch,A=Ir(),R=Ir(),$=Ir(),W=Hu(Vj({sink:i,onEscape:()=>(t.focus(),lM(t),B.some(!0)),onHide:()=>{lM(t)},onBack:()=>{DF(t)}})),q=()=>{const io=$.get().getOr("node"),zo=gB(io)?1:0;return h6(t,x,io,zo)},se=()=>!t.removed&&!(w()&&p.isContextMenuOpen()),ge=io=>Dr(bi(io,A.get(),Es),!0),Ae=()=>{if(se()){const io=q(),zo=Dr($.get(),"node")?Kj(t,A.get()):p6(t);return io.height<=0||!x9(zo,io,.01)}else return!0},Ie=()=>{A.clear(),R.clear(),$.clear(),cc.hide(W)},mt=()=>{if(cc.isOpen(W)){const io=W.element;cr(io,"display"),Ae()?Gn(io,"display","none"):(R.set(0),cc.reposition(W))}},Fe=io=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[io],behaviours:Ln([rs.config({mode:"acyclic"}),zs("pop-dialog-wrap-events",[$i(zo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>rs.focusIn(zo))}),Cd(zo=>{t.shortcuts.remove("ctrl+F9")})])])}),nt=Ko(()=>Jj(r,io=>{const zo=zt([io]);qo(W,Q$,{forwardContents:Fe(zo)})})),lt=(io,zo)=>Z4(t,{buttons:io,toolbar:zo.items,allowToolbarGroups:!1},d.backstage,B.some(["form:"])),Ft=(io,zo)=>qj.buildInitGroups(io,zo),zt=io=>{const{buttons:zo}=t.ui.registry.getAll(),Mr=nt(),rc={...zo,...Mr.formNavigators},Sa=Ap(t)===Xg.scrolling?Xg.scrolling:Xg.default,Yo=Ne($e(io,Rn=>Rn.type==="contexttoolbar"?lt(rc,RS(Rn)):Ft(Rn,x.providers)));return qP({type:Sa,uid:Ao("context-toolbar"),initGroups:Yo,onEscape:B.none,cyclicKeying:!0,providers:x.providers})},Zn=(io,zo)=>{const Mr=io==="node"?x.anchors.node(zo):x.anchors.cursor(),rc=S9(t,io,w(),{lastElement:A.get,isReposition:()=>Dr(R.get(),0),getMode:()=>gu.getMode(i)});return mi(Mr,rc)},Mo=(io,zo)=>{if(Po.cancel(),!se())return;const Mr=zt(io),rc=io[0].position,Sa=Zn(rc,zo);$.set(rc),R.set(1);const Yo=W.element;cr(Yo,"display"),ge(zo)||(Hi(Yo,i7),gu.reset(i,W)),cc.showWithinBounds(W,Fe(Mr),{anchor:Sa,transition:{classes:[i7],mode:"placement"}},()=>B.some(q())),zo.fold(A.clear,A.set),Ae()&&Gn(Yo,"display","none")};let ln=!1;const Po=C4(()=>{if(!(!t.hasFocus()||t.removed||ln))if(kd(W.element,i7))Po.throttle();else{const io=nt();E9(io,t).fold(Ie,zo=>{Mo(zo.toolbars,B.some(zo.elem))})}},17);t.on("init",()=>{t.on("remove",Ie),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",mt),t.on("click keyup focus SetContent",Po.throttle),t.on(p9,Ie),t.on(zj,io=>{const zo=nt();vn(zo.lookupTable,io.toolbarKey).each(Mr=>{Mo([Mr],Lo(io.target!==t,io.target)),m6(W)})}),t.on("focusout",io=>{Q2.setEditorTimeout(t,()=>{Ad(i.element).isNone()&&Ad(W.element).isNone()&&Ie()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Ie()}),t.on("DisabledStateChange",io=>{io.state&&Ie()}),t.on("ExecCommand",({command:io})=>{io.toLowerCase()==="toggleview"&&Ie()}),t.on("AfterProgressState",io=>{io.state?Ie():t.hasFocus()&&Po.throttle()}),t.on("dragstart",()=>{ln=!0}),t.on("dragend drop",()=>{ln=!1}),t.on("NodeChange",io=>{Ad(W.element).fold(Po.throttle,ue)})})},_9=t=>{pt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],i=>{t.ui.registry.addToggleButton(i.name,{tooltip:i.text,icon:i.icon,onAction:Xd(t,i.cmd),onSetup:s_(t,i.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Bd(t),onAction:Xd(t,"JustifyNone")})},A9=(t,r)=>{const i=()=>{const d=r.getOptions(t),p=r.getCurrent(t).map(r.hash),x=Ir();return $e(d,w=>({type:"togglemenuitem",text:r.display(w),onSetup:A=>{const R=W=>{W&&(x.on(q=>q.setActive(!1)),x.set(A)),A.setActive(W)};R(Dr(p,r.hash(w)));const $=r.watcher(t,w,R);return()=>{x.clear(),$()}},onAction:()=>r.setCurrent(t,w)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:d=>d(i()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:i,onSetup:r.onMenuSetup})},Qj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:TI,hash:r=>aj(r,["fixed","relative","empty"]).getOr(r),display:rn,watcher:(r,i,d)=>r.formatter.formatChanged("lineheight",d,!1,{value:i}).unbind,getCurrent:r=>B.from(r.queryCommandValue("LineHeight")),setCurrent:(r,i)=>r.execCommand("LineHeight",!1,i),onToolbarSetup:Bd(t),onMenuSetup:Bd(t)}),eZ=t=>B.from(yI(t)).map(i=>({name:"language",text:"Language",icon:"language",getOptions:re(i),hash:d=>Vn(d.customCode)?d.code:`${d.code}/${d.customCode}`,display:d=>d.title,watcher:(d,p,x)=>{var w;return d.formatter.formatChanged("lang",x,!1,{value:p.code,customValue:(w=p.customCode)!==null&&w!==void 0?w:null}).unbind},getCurrent:d=>{const p=xt.fromDom(d.selection.getNode());return Um(p,x=>B.some(x).filter(er).bind(w=>br(w,"lang").map(R=>{const $=br(w,"data-mce-lang").getOrUndefined();return{code:R,customCode:$,title:""}})))},setCurrent:(d,p)=>d.execCommand("Lang",!1,p),onToolbarSetup:d=>{const p=mc();return d.setActive(t.formatter.match("lang",{},void 0,!0)),p.set(t.formatter.formatChanged("lang",d.setActive,!0)),dC(p.clear,Bd(t)(d))},onMenuSetup:Bd(t)})),tZ=t=>{A9(t,Qj(t)),eZ(t).each(r=>A9(t,r))},nZ=(t,r)=>{JW(t,r),oj(t,r),bj(t,r),Pz(t,r),Kz(t,r)},O9=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",r=>t.mode.get()===r),t.ui.registry.addContext("any",Kt),t.ui.registry.addContext("formatting",r=>t.formatter.canApply(r)),t.ui.registry.addContext("insert",r=>t.schema.isValidChild(t.selection.getNode().tagName,r))},D9=t=>mC(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),R9=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:D9(t),onAction:Xd(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Bd(t),onAction:Xd(t,"indent")})},M9=t=>{R9(t)},N9=(t,r)=>i=>{i.setActive(r.get());const d=p=>{r.set(p.state),i.setActive(p.state)};return t.on("PastePlainTextToggle",d),dC(()=>t.off("PastePlainTextToggle",d),Bd(t)(i))},B9=t=>{const r=wo(Lb(t)),i=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:i,onSetup:N9(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:i,onSetup:N9(t,r)})},y6=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},oZ=t=>{rv.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,i)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:s_(t,r.name),onAction:y6(t,r.name),shortcut:r.shortcut})});for(let r=1;r<=6;r++){const i="h"+r,d=`Access+${r}`;t.ui.registry.addToggleButton(i,{text:i.toUpperCase(),tooltip:"Heading "+r,onSetup:s_(t,i),onAction:y6(t,i),shortcut:d})}},Eq=t=>{rv.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Xd(t,r.action),shortcut:r.shortcut,context:r.context})}),rv.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Bd(t),onAction:Xd(t,r.action)})})},sZ=t=>{rv.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:Xd(t,r.action),onSetup:s_(t,r.name)})})},rZ=t=>{oZ(t),Eq(t),sZ(t)},aZ=t=>{rv.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:Xd(t,r.action),context:r.context})}),rv.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:Bd(t),onAction:Xd(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Bd(t),onAction:y6(t,"code")})},iZ=t=>{rZ(t),aZ(t)},x6=(t,r)=>mC(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",i=>{i.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),cZ=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:x6(t,"hasUndo"),onAction:Xd(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:x6(t,"hasRedo"),onAction:Xd(t,"redo")})},lZ=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:x6(t,"hasUndo"),onAction:Xd(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:x6(t,"hasRedo"),onAction:Xd(t,"redo"),shortcut:"Meta+Y"})},uZ=t=>{cZ(t),lZ(t)},dZ=t=>mC(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),mZ=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:dZ(t),onAction:Xd(t,"mceToggleVisualAid"),context:"any"})},gZ=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Xd(t,"mceToggleVisualAid"),context:"any"})},fZ=t=>{gZ(t),mZ(t)},pZ=(t,r)=>{_9(t),iZ(t),nZ(t,r),uZ(t),eL(t),fZ(t),M9(t),tZ(t),B9(t),O9(t)},I9=t=>Tt(t)?t.split(/[ ,]/):t,F9=t=>r=>r.options.get(t),hZ=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:i=>i===!1?{value:[],valid:!0}:Tt(i)||at(i,Tt)?{value:I9(i),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},P9=F9("contextmenu_never_use_native"),bZ=F9("contextmenu_avoid_overlap"),vZ=t=>L9(t).length===0,L9=t=>{const r=t.ui.registry.getAll().contextMenus,i=t.options.get("contextmenu");return t.options.isSet("contextmenu")?i:Et(i,d=>Ls(r,d))},fB=(t,r)=>({type:"makeshift",x:t,y:r}),yZ=(t,r,i)=>fB(t.x+r,t.y+i),$9=t=>t.type==="longpress"||t.type.indexOf("touch")===0,c7=t=>{if($9(t)){const r=t.touches[0];return fB(r.pageX,r.pageY)}else return fB(t.pageX,t.pageY)},xZ=t=>{if($9(t)){const r=t.touches[0];return fB(r.clientX,r.clientY)}else return fB(t.clientX,t.clientY)},wZ=(t,r)=>{const i=yE.DOM.getPos(t);return yZ(r,i.x,i.y)},l7=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?c7(r):wZ(t.getContentAreaContainer(),xZ(r)):u7(t),u7=t=>({type:"selection",root:xt.fromDom(t.selection.getNode())}),H9=t=>({type:"node",node:B.some(xt.fromDom(t.selection.getNode())),root:xt.fromDom(t.getBody())}),z9=(t,r,i)=>{switch(i){case"node":return H9(t);case"point":return l7(t,r);case"selection":return u7(t)}},CZ=(t,r,i,d,p,x)=>{const w=i(),A=z9(t,r,x);As(w,Fp.CLOSE_ON_EXECUTE,d,{isHorizontalMenu:!1,search:B.none()}).map(R=>{r.preventDefault(),cc.showMenuAt(p,{anchor:A},{menu:{markers:b0("normal")},data:R})})},SZ={onLtr:()=>[Jc,lr,pc,Fl,Fa,Jl,gv,JN,XN,DP,Sk,M4],onRtl:()=>[Jc,pc,lr,Fa,Fl,Jl,gv,JN,Sk,M4,XN,DP]},kZ=12,TZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},d7=(t,r)=>{const i=t.selection;if(i.isCollapsed()||r.touches.length<1)return!1;{const d=r.touches[0],p=i.getRng();return $A(t.getWin(),Xv.domRange(p)).exists(w=>w.left<=d.clientX&&w.right>=d.clientX&&w.top<=d.clientY&&w.bottom>=d.clientY)}},EZ=t=>{const r=t.selection.getRng(),i=()=>{Q2.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),x()};t.once("touchend",i);const d=w=>{w.preventDefault(),w.stopImmediatePropagation()};t.on("mousedown",d,!0);const p=()=>x();t.once("longpresscancel",p);const x=()=>{t.off("touchend",i),t.off("longpresscancel",p),t.off("mousedown",d)}},V9=(t,r,i)=>{const d=z9(t,r,i);return{bubble:Rf(0,i==="point"?kZ:0,TZ),layouts:SZ,overrides:{maxWidthFunction:A$(),maxHeightFunction:vy()},...d}},_Z=(t,r,i,d,p,x,w)=>{const A=V9(t,r,x);As(i,Fp.CLOSE_ON_EXECUTE,d,{isHorizontalMenu:!0,search:B.none()}).map(R=>{r.preventDefault();const $=w?fu.HighlightMenuAndItem:fu.HighlightNone;cc.showMenuWithinBounds(p,{anchor:A},{menu:{markers:b0("normal"),highlightOnOpen:$},data:R,type:"horizontal"},()=>B.some(h6(t,d.shared,x==="node"?"node":"selection"))),t.dispatch(p9)})},AZ=(t,r,i,d,p,x)=>{const w=Xi(),A=w.os.isiOS(),R=w.os.isMacOS(),$=w.os.isAndroid(),W=w.deviceType.isTouch(),q=()=>!($||A||R&&W),se=()=>{const ge=i();_Z(t,r,ge,d,p,x,q())};if((R||A)&&x!=="node"){const ge=()=>{EZ(t),se()};d7(t,r)?ge():(t.once("selectionchange",ge),t.once("touchend",()=>t.off("selectionchange",ge)))}else se()},w6=t=>Tt(t)?t==="|":t.type==="separator",m7={type:"separator"},g7=t=>{const r=i=>({text:i.text,icon:i.icon,enabled:i.enabled,shortcut:i.shortcut});if(Tt(t))return t;switch(t.type){case"separator":return m7;case"submenu":return{type:"nestedmenuitem",...r(t),getSubmenuItems:()=>{const d=t.getSubmenuItems();return Tt(d)?d:$e(d,g7)}};default:const i=t;return{type:"menuitem",...r(i),onAction:ve(i.onAction)}}},U9=(t,r)=>{if(r.length===0)return t;const d=ut(t).filter(p=>!w6(p)).fold(()=>[],p=>[m7]);return t.concat(d).concat(r).concat([m7])},OZ=(t,r,i)=>{const d=Pn(r,(p,x)=>vn(t,x.toLowerCase()).map(w=>{const A=w.update(i);if(Tt(A)&&Ve(Ga(A)))return U9(p,A.split(" "));if(ss(A)&&A.length>0){const R=$e(A,g7);return U9(p,R)}else return p}).getOrThunk(()=>p.concat([x])),[]);return d.length>0&&w6(d[d.length-1])&&d.pop(),d},f7=(t,r)=>r.ctrlKey&&!P9(t),DZ=t=>t.type==="longpress"||Ls(t,"touches"),W9=(t,r)=>!DZ(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),j9=(t,r)=>W9(t,r)?t.selection.getStart(!0):r.target,RZ=(t,r)=>{const i=bZ(t),d=W9(t,r)?"selection":"point";if(Ve(i)){const p=j9(t,r);return Ph(xt.fromDom(p),i)?"node":d}else return d},MZ=(t,r,i)=>{const p=Xi().deviceType.isTouch,x=Hu(cc.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>i.setContextMenuState(!0),onHide:()=>i.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ln([zs("dismissContextMenu",[on(dp(),(R,$)=>{qr.close(R),t.focus()})])])})),w=()=>cc.hide(x),A=R=>{if(P9(t)&&R.preventDefault(),f7(t,R)||vZ(t))return;const $=RZ(t,R),W=()=>{const se=j9(t,R),ge=t.ui.registry.getAll(),Ae=L9(t);return OZ(ge.contextMenus,Ae,se)};(p()?AZ:CZ)(t,R,W,i,x,$)};t.on("init",()=>{const R="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(p()?"":" ResizeWindow");t.on(R,w),t.on("longpress contextmenu",A)})},C6=ye.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),S6=t=>r=>r.translate(-t.left,-t.top),k6=t=>r=>r.translate(t.left,t.top),DC=t=>(r,i)=>Pn(t,(d,p)=>p(d),Ka(r,i)),T6=(t,r,i)=>t.fold(DC([k6(i),S6(r)]),DC([S6(r)]),DC([])),K4=(t,r,i)=>t.fold(DC([k6(i)]),DC([]),DC([k6(r)])),Z9=(t,r,i)=>t.fold(DC([]),DC([S6(i)]),DC([k6(r),S6(i)])),NZ=(t,r,i,d,p,x)=>{const w=K4(t,p,x),A=K4(r,p,x);return Math.abs(w.left-A.left)<=i&&Math.abs(w.top-A.top)<=d},BZ=(t,r,i,d,p,x)=>{const w=K4(t,p,x),A=K4(r,p,x),R=Math.abs(w.left-A.left),$=Math.abs(w.top-A.top);return Ka(R,$)},p7=(t,r,i)=>{const d=t.fold((p,x)=>({position:B.some("absolute"),left:B.some(p+"px"),top:B.some(x+"px")}),(p,x)=>({position:B.some("absolute"),left:B.some(p-i.left+"px"),top:B.some(x-i.top+"px")}),(p,x)=>({position:B.some("fixed"),left:B.some(p+"px"),top:B.some(x+"px")}));return{right:B.none(),bottom:B.none(),...d}},IZ=(t,r,i)=>t.fold((d,p)=>_6(d+r,p+i),(d,p)=>_k(d+r,p+i),(d,p)=>j_(d+r,p+i)),E6=(t,r,i,d)=>{const p=(x,w)=>(A,R)=>{const $=x(r,i,d);return w(A.getOr($.left),R.getOr($.top))};return t.fold(p(Z9,_6),p(K4,_k),p(T6,j_))},_6=C6.offset,_k=C6.absolute,j_=C6.fixed,Ak=(t,r)=>{const i=Ds(t,r);return Vn(i)?NaN:parseInt(i,10)},G9=(t,r)=>{const i=t.element,d=Ak(i,r.leftAttr),p=Ak(i,r.topAttr);return isNaN(d)||isNaN(p)?B.none():B.some(Ka(d,p))},FZ=(t,r,i)=>{const d=t.element;Kn(d,r.leftAttr,i.left+"px"),Kn(d,r.topAttr,i.top+"px")},PZ=(t,r)=>{const i=t.element;fe(i,r.leftAttr),fe(i,r.topAttr)},LZ=(t,r,i,d)=>G9(t,r).fold(()=>i,p=>j_(p.left+d.left,p.top+d.top)),$Z=(t,r,i,d,p,x)=>{const w=LZ(t,r,i,d),A=r.mustSnap?HZ(t,r,w,p,x):zZ(t,r,w,p,x),R=T6(w,p,x);return FZ(t,r,R),A.fold(()=>({coord:j_(R.left,R.top),extra:B.none()}),$=>({coord:$.output,extra:$.extra}))},q9=(t,r)=>{PZ(t,r)},K9=(t,r,i,d)=>rt(t,p=>{const x=p.sensor;return NZ(r,x,p.range.left,p.range.top,i,d)?B.some({output:E6(p.output,r,i,d),extra:p.extra}):B.none()}),HZ=(t,r,i,d,p)=>{const x=r.getSnapPoints(t);return K9(x,i,d,p).orThunk(()=>Pn(x,(R,$)=>{const W=$.sensor,q=BZ(i,W,$.range.left,$.range.top,d,p);return R.deltas.fold(()=>({deltas:B.some(q),snap:B.some($)}),se=>{const ge=(q.left+q.top)/2,Ae=(se.left+se.top)/2;return ge<=Ae?{deltas:B.some(q),snap:B.some($)}:R})},{deltas:B.none(),snap:B.none()}).snap.map(R=>({output:E6(R.output,i,d,p),extra:R.extra})))},zZ=(t,r,i,d,p)=>{const x=r.getSnapPoints(t);return K9(x,i,d,p)},VZ=(t,r,i)=>({coord:E6(t.output,t.output,r,i),extra:t.extra});var UZ=Object.freeze({__proto__:null,snapTo:(t,r,i,d)=>{const p=r.getTarget(t.element);if(r.repositionTarget){const x=Xs(t.element),w=bl(x),A=Sc(p),R=VZ(d,w,A),$=p7(R.coord,w,A);vc(p,$)}}});const h7="data-initial-z-index",WZ=t=>{li(t.element).filter(er).each(r=>{br(r,h7).fold(()=>cr(r,"z-index"),i=>Gn(r,"z-index",i)),fe(r,h7)})},jZ=t=>{li(t.element).filter(er).each(r=>{ba(r,"z-index").each(i=>{Kn(r,h7,i)}),Gn(r,"z-index",bn(t.element,"z-index"))})},Y9=(t,r)=>{t.getSystem().addToGui(r),jZ(r)},X9=t=>{WZ(t),t.getSystem().removeFromGui(t)},b7=(t,r,i)=>t.getSystem().build(zp.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:i}));var ZZ=Yc("snaps",[dn("getSnapPoints"),Ar("onSensor"),dn("leftAttr"),dn("topAttr"),Ct("lazyViewport",Yt),Ct("mustSnap",!1)]);const Z_=[Ct("useFixed",$t),dn("blockerClass"),Ct("getTarget",rn),Ct("onDrag",ue),Ct("repositionTarget",!0),Ct("onDrop",ue),Ea("getBounds",Yt),ZZ],GZ=t=>Bi(ba(t,"left"),ba(t,"top"),ba(t,"position"),(r,i,d)=>(d==="fixed"?j_:_6)(parseInt(r,10),parseInt(i,10))).getOrThunk(()=>{const r=sl(t);return _k(r.left,r.top)}),qZ=(t,r,i,d,p)=>{const x=p.bounds,w=K4(r,i,d),A=Oc(w.left,x.x,x.x+x.width-p.width),R=Oc(w.top,x.y,x.y+x.height-p.height),$=_k(A,R);return r.fold(()=>{const W=Z9($,i,d);return _6(W.left,W.top)},re($),()=>{const W=T6($,i,d);return j_(W.left,W.top)})},v7=(t,r,i,d,p,x,w)=>{const A=r.fold(()=>{const R=IZ(i,x.left,x.top),$=T6(R,d,p);return j_($.left,$.top)},R=>{const $=$Z(t,R,i,x,d,p);return $.extra.each(W=>{R.onSensor(t,W)}),$.coord});return qZ(t,A,d,p,w)},KZ=(t,r,i,d)=>{const p=r.getTarget(t.element);if(r.repositionTarget){const x=Xs(t.element),w=bl(x),A=Sc(p),R=GZ(p),$=v7(t,r.snaps,R,w,A,d,i),W=p7($,w,A);vc(p,W)}r.onDrag(t,p,d)},J9=(t,r)=>({bounds:t.getBounds(),height:Mm(r.element),width:wt(r.element)}),y7=(t,r,i,d,p)=>{const x=i.update(d,p),w=i.getStartData().getOrThunk(()=>J9(r,t));x.each(A=>{KZ(t,r,w,A)})},Q9=(t,r,i,d)=>{r.each(X9),i.snaps.each(x=>{q9(t,x)});const p=i.getTarget(t.element);d.reset(),i.onDrop(t,p)},x7=t=>(r,i)=>{const d=p=>{i.setStartData(J9(r,p))};return ya([on(Av(),p=>{i.getStartData().each(()=>d(p))}),...t(r,i,d)])},YZ=t=>ya([on(_c(),t.forceDrop),on(xf(),t.drop),on(eb(),(r,i)=>{t.move(i.event)}),on(Tv(),t.delayDrop)]);var XZ=Object.freeze({__proto__:null,getData:t=>B.from(Ka(t.x,t.y)),getDelta:(t,r)=>Ka(r.left-t.left,r.top-t.top)});const eV=(t,r,i)=>[on(_c(),(d,p)=>{if(p.event.raw.button!==0)return;p.stop();const w=()=>Q9(d,B.some($),t,r),A=X3(w,200),R={drop:w,delayDrop:A.schedule,forceDrop:w,move:q=>{A.cancel(),y7(d,t,r,XZ,q)}},$=b7(d,t.blockerClass,YZ(R));(()=>{i(d),Y9(d,$)})()})],JZ=[...Z_,xi("dragger",{handlers:x7(eV)})],QZ=t=>ya([on(cg(),t.forceDrop),on(ai(),t.drop),on(Pu(),t.drop),on($r(),(r,i)=>{t.move(i.event)})]),eG=t=>{const r=t[0];return B.some(Ka(r.clientX,r.clientY))};var tV=Object.freeze({__proto__:null,getData:t=>{const i=t.raw.touches;return i.length===1?eG(i):B.none()},getDelta:(t,r)=>Ka(r.left-t.left,r.top-t.top)});const nV=(t,r,i)=>{const d=Ir(),p=x=>{Q9(x,d.get(),t,r),d.clear()};return[on(cg(),(x,w)=>{w.stop();const A=()=>p(x),R={drop:A,delayDrop:ue,forceDrop:A,move:q=>{y7(x,t,r,tV,q)}},$=b7(x,t.blockerClass,QZ(R));d.set($),(()=>{i(x),Y9(x,$)})()}),on($r(),(x,w)=>{w.stop(),y7(x,t,r,tV,w.event)}),on(ai(),(x,w)=>{w.stop(),p(x)}),on(Pu(),p)]},A6=[...Z_,xi("dragger",{handlers:x7(nV)})],tG=(t,r,i)=>[...eV(t,r,i),...nV(t,r,i)],nG=[...Z_,xi("dragger",{handlers:x7(tG)})];var oG=Object.freeze({__proto__:null,mouse:JZ,touch:A6,mouseOrTouch:nG}),rG=Object.freeze({__proto__:null,init:()=>{let t=B.none(),r=B.none();const i=()=>{t=B.none(),r=B.none()},d=(R,$)=>{const W=t.map(q=>R.getDelta(q,$));return t=B.some($),W},p=(R,$)=>R.getData($).bind(W=>d(R,W)),x=R=>{r=B.some(R)},w=()=>r,A=re({});return lu({readState:A,reset:i,update:p,getStartData:w,setStartData:x})}});const G_=Bx({branchKey:"mode",branches:oG,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:B.from(t.extra)})},state:rG,apis:UZ}),w7=40,O6=w7/2,oV=(t,r,i,d,p,x)=>t.fold(()=>G_.snap({sensor:_k(i-O6,d-O6),range:Ka(p,x),output:_k(B.some(i),B.some(d)),extra:{td:r}}),w=>{const A=i-O6,R=d-O6,$=w7,W=w7,q=w.element.dom.getBoundingClientRect();return G_.snap({sensor:_k(A,R),range:Ka($,W),output:_k(B.some(i-q.width/2),B.some(d-q.height/2)),extra:{td:r}})}),D6=(t,r,i)=>{const d=(p,x)=>p.exists(w=>Es(w,x));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(p,x)=>{const w=x.td;d(r.get(),w)||(r.set(w),i(w))},mustSnap:!0}},C7=t=>da(Hl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ln([G_.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Cm.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),aG=(t,r)=>{const i=wo([]),d=wo([]),p=wo(!1),x=Ir(),w=Ir(),A=Mo=>{const ln=Ya(Mo);return oV(ge.getOpt(r),Mo,ln.x,ln.y,ln.width,ln.height)},R=()=>$e(i.get(),Mo=>A(Mo)),$=Mo=>{const ln=Ya(Mo);return oV(Ae.getOpt(r),Mo,ln.right,ln.bottom,ln.width,ln.height)},W=()=>$e(d.get(),Mo=>$(Mo)),q=D6(R,x,Mo=>{w.get().each(ln=>{t.dispatch("TableSelectorChange",{start:Mo,finish:ln})})}),se=D6(W,w,Mo=>{x.get().each(ln=>{t.dispatch("TableSelectorChange",{start:ln,finish:Mo})})}),ge=C7(q),Ae=C7(se),Ie=Hu(ge.asSpec()),mt=Hu(Ae.asSpec()),Fe=(Mo,ln,Po,io)=>{const zo=ln.dom.getBoundingClientRect();cr(Mo.element,"display");const Mr=fs(xt.fromDom(t.getBody())).dom.innerHeight,rc=Po(zo),Sa=io(zo,Mr);(rc||Sa)&&Gn(Mo.element,"display","none")},nt=(Mo,ln,Po,io)=>{const zo=Po(ln);G_.snapTo(Mo,zo),Fe(Mo,ln,Sa=>Sa[io]<0,(Sa,Yo)=>Sa[io]>Yo)},lt=Mo=>nt(Ie,Mo,A,"top"),Ft=()=>x.get().each(lt),zt=Mo=>nt(mt,Mo,$,"bottom"),Zn=()=>w.get().each(zt);if(Xi().deviceType.isTouch()){const Mo=ln=>$e(ln,xt.fromDom);t.on("TableSelectionChange",ln=>{p.get()||(Sp(r,Ie),Sp(r,mt),p.set(!0));const Po=xt.fromDom(ln.start),io=xt.fromDom(ln.finish);x.set(Po),w.set(io),B.from(ln.otherCells).each(zo=>{i.set(Mo(zo.upOrLeftCells)),d.set(Mo(zo.downOrRightCells)),lt(Po),zt(io)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ft(),Zn()}),t.on("TableSelectionClear",()=>{p.get()&&(kp(Ie),kp(mt),p.set(!1)),x.clear(),w.clear()})}};var iG=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const cG=(t,r)=>{const i=B.from(Ds(t,"id")).getOrThunk(()=>{const d=Ao("aria");return Kn(r,"id",d),d});Kn(t,"aria-describedby",i)},lG=t=>{fe(t,"aria-describedby")},uG=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",dG=(t,r,i)=>{var d;const p=(d=r.delimiter)!==null&&d!==void 0?d:"›",x=($,W,q)=>Hl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":q}},components:[Di($)],action:se=>{t.focus(),t.selection.select(W),t.nodeChanged()},buttonBehaviours:Ln([lc.config({...i.tooltips.getConfig({tooltipText:i.translate(["Select the {0} element",W.nodeName.toLowerCase()]),onShow:(se,ge)=>{cG(se.element,ge.element)},onHide:se=>{lG(se.element)}})}),qf.button(i.isDisabled),dl(()=>i.checkUiComponentContext("any"))])}),w=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Di(` ${p} `)]}),A=$=>Pn($,(W,q,se)=>{const ge=x(q.name,q.element,se);return se===0?W.concat([ge]):W.concat([w(),ge])},[]),R=$=>{const W=[];let q=$.length;for(;q-- >0;){const se=$[q];if(se.nodeType===1&&!uG(se)){const ge=iM(t,se);if(ge.isDefaultPrevented()||W.push({name:ge.name,element:se}),ge.isPropagationStopped())break}}return W};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ln([rs.config({mode:"flow",selector:"div[role=button]"}),Wo.config({disabled:i.isDisabled}),dl(()=>i.checkUiComponentContext("any")),Wi.config({}),Hs.config({}),zs("elementPathEvents",[$i(($,W)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>rs.focusIn($)),t.on("NodeChange",q=>{const se=R(q.parents),ge=se.length>0?A(se):[];Hs.set($,ge)})})])]),components:[]}};var Ok;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ok||(Ok={}));const mG=(t,r,i,d,p)=>{const x={height:l6(d+r.top,wE(t),tS(t))};return i===Ok.Both&&(x.width=l6(p+r.left,Jg(t),tx(t))),x},sV=(t,r,i)=>{const d=xt.fromDom(t.getContainer()),p=mG(t,r,i,uc(d),_e(d));Co(p,(x,w)=>{Ue(x)&&Gn(d,w,Y$(x))}),U8(t)},gG=t=>{const r=SI(t);return r===!1?Ok.None:r==="both"?Ok.Both:Ok.Vertical},R6=(t,r,i,d)=>{const x=Ka(i*20,d*20);return sV(t,x,r),B.some(!0)},fG=(t,r)=>{const i=gG(t);if(i===Ok.None)return B.none();const d=i===Ok.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return B.some(vg("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":r.translate(d),"data-mce-name":"resize-handle"},behaviours:[G_.config({mode:"mouse",repositionTarget:!1,onDrag:(p,x,w)=>sV(t,w,i),blockerClass:"tox-blocker"}),rs.config({mode:"special",onLeft:()=>R6(t,i,-1,0),onRight:()=>R6(t,i,1,0),onUp:()=>R6(t,i,0,-1),onDown:()=>R6(t,i,0,1)}),Wi.config({}),Ms.config({}),lc.config(r.tooltips.getConfig({tooltipText:r.translate("Resize")}))]},r.icons))},pG=(t,r)=>{const i=(d,p,x)=>Hs.set(d,[Di(r.translate(["{0} "+x,p[x]]))]);return Hl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ln([qf.button(r.isDisabled),dl(()=>r.checkUiComponentContext("any")),Wi.config({}),Hs.config({}),ao.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),zs("wordcount-events",[gp(d=>{const p=ao.getValue(d),x=p.mode==="words"?"characters":"words";ao.setValue(d,{mode:x,count:p.count}),i(d,p.count,x)}),$i(d=>{t.on("wordCountUpdate",p=>{const{mode:x}=ao.getValue(d);ao.setValue(d,{mode:x,count:p.wordCount}),i(d,p.wordCount,x)})})])]),eventOrder:{[cu()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},hG=(t,r)=>{const i=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",iG.trim()])},behaviours:Ln([Ms.config({})])}]}),d=()=>{const A=HS("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Di(Bp.translate(["Press {0} for help",A]))]}},p=()=>{const A=[];return t.hasPlugin("wordcount")&&A.push(pG(t,r)),hR(t)&&A.push(i()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:A}},x=()=>{const A=[],R=kE(t),$=CI(t),W=hR(t)||t.hasPlugin("wordcount"),q=()=>{const se="tox-statusbar__text-container--flex-start",ge="tox-statusbar__text-container--flex-end",Ae="tox-statusbar__text-container--space-around";if(R){const Ie="tox-statusbar__text-container-3-cols";return!W&&!$?[Ie,Ae]:W&&!$?[Ie,ge]:[Ie,se]}return[W&&!$?ge:se]};return $&&A.push(dG(t,{},r)),R&&A.push(d()),W&&A.push(p()),A.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...q()]},components:A}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const A=x(),R=fG(t,r);return A.concat(R.toArray())})()}},S7=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),bG=(t,r)=>{const i=t.inline,d=i?$j:Ij,p=q1(t)?nB:BU,x=Hj(),w=Ir(),A=Ir(),R=Ir(),se=Xi().deviceType.isTouch()?["tox-platform-touch"]:[],ge=vR(t),Ae=Ap(t),Ie=da({dom:{tag:"div",classes:["tox-anchorbar"]}}),mt=da({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Fe=()=>x.mainUi.get().map(bs=>bs.outerContainer).bind(sc.getHeader),nt=()=>Ws.fromOption(x.dialogUi.get().map(bs=>bs.sink),"UI has not been rendered"),lt=()=>Ws.fromOption(x.popupUi.get().map(bs=>bs.sink),"(popup) UI has not been rendered"),Ft=x.lazyGetInOuterOrDie("anchor bar",Ie.getOpt),zt=x.lazyGetInOuterOrDie("bottom anchor bar",mt.getOpt),Zn=x.lazyGetInOuterOrDie("toolbar",sc.getToolbar),Mo=x.lazyGetInOuterOrDie("throbber",sc.getThrobber),ln=BP({popup:lt,dialog:nt},t,Ft,zt),Po=()=>{const bs={attributes:{[vh]:ge?xp.BottomToTop:xp.TopToBottom}},Qs=sc.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ln.popup,onEscape:()=>{t.focus()}}),ki=sc.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ln.popup.shared.getSink,providers:ln.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:kx=>{EF(t,kx)},type:Ae,lazyToolbar:Zn,lazyHeader:()=>Fe().getOrDie("Could not find header element"),...bs}),ni=sc.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ln.popup.shared.providers,onEscape:()=>{t.focus()},type:Ae}),op=EE(t),Vc=GO(t),Uh=ZO(t),Om=jO(t),Wh=io(),jh=op||Vc||Uh,bv=()=>op?[ni]:Vc?[ki]:[],xB=Om?[Wh,Qs]:[Qs];return sc.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(jh?[]:["tox-editor-header--empty"]),...bs},components:Ne([Uh?xB:[],bv(),Qg(t)?[]:[Ie.asSpec()]]),sticky:q1(t),editor:t,sharedBackstage:ln.popup.shared})},io=()=>sc.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),zo=()=>{const bs=sc.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Qs=sc.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[bs,Qs]}},Mr=()=>{const bs=yR(t),Qs=Es(Pt(),bs)&&bn(bs,"display")==="grid",ki={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(se),attributes:{...Bp.isRtl()?{dir:"rtl"}:{}}},behaviours:Ln([gu.config({useFixed:()=>p.isDocked(Fe)})])},ni={dom:{styles:{width:document.body.clientWidth+"px"}},events:ya([on($a(),Uh=>{Gn(Uh.element,"width",document.body.clientWidth+"px")})])},op=Hu(mi(ki,Qs?ni:{})),Vc=HM(op);return A.set(Vc),{sink:op,mothership:Vc}},rc=()=>{const bs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(se),attributes:{...Bp.isRtl()?{dir:"rtl"}:{}}},behaviours:Ln([gu.config({useFixed:()=>p.isDocked(Fe),getBounds:()=>r.getPopupSinkBounds()})])},Qs=Hu(bs),ki=HM(Qs);return R.set(ki),{sink:Qs,mothership:ki}},Sa=()=>{const bs=Po(),Qs=zo(),ki=sc.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ln.popup}),ni=sc.parts.viewWrapper({backstage:ln.popup}),op=rS(t)&&!i?B.some(hG(t,ln.popup.shared.providers)):B.none(),Vc=Ne([ge?[]:[bs],i?[]:[Qs],ge?[bs]:[]]),Uh=sc.parts.editorContainer({components:Ne([Vc,i?[]:[mt.asSpec()]])}),Om=qw(t),Wh={role:"application",...Bp.isRtl()?{dir:"rtl"}:{},...Om?{"aria-hidden":"true"}:{}},jh=Hu(sc.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(ge?["tox-tinymce--toolbar-bottom"]:[]).concat(se),styles:{visibility:"hidden",...Om?{opacity:"0",border:"0"}:{}},attributes:Wh},components:[Uh,...i?[]:[ni,...op.toArray()],ki],behaviours:Ln([dl(()=>ln.popup.shared.providers.checkUiComponentContext("any")),Wo.config({disableClass:"tox-tinymce--disabled"}),rs.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),bv=HM(jh);return w.set(bv),{mothership:bv,outerContainer:jh}},Yo=bs=>{const Qs=Y$(Fj(t)),ki=Y$(Pj(t));return t.inline||(Ii("div","width",ki)&&Gn(bs.element,"width",ki),Ii("div","height",Qs)?Gn(bs.element,"height",Qs):Gn(bs.element,"height","400px")),Qs},Rn=bs=>{t.addShortcut("alt+F9","focus menubar",()=>{sc.focusMenubar(bs)}),t.addShortcut("alt+F10","focus toolbar",()=>{sc.focusToolbar(bs)}),t.addCommand("ToggleToolbarDrawer",(Qs,ki)=>{ki!=null&&ki.skipFocus?sc.toggleToolbarDrawerWithoutFocusing(bs):sc.toggleToolbarDrawer(bs)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>sc.isToolbarDrawerToggled(bs))},lo=bs=>{const{mainUi:Qs,popupUi:ki,uiMotherships:ni}=bs;Mn(Yd(t),(tA,I7)=>{t.ui.registry.addGroupToolbarButton(I7,tA)});const{buttons:op,menuItems:Vc,contextToolbars:Uh,sidebars:Om,views:Wh}=t.ui.registry.getAll(),jh=qO(t),bv={menuItems:Vc,menus:nx(t),menubar:zO(t),toolbar:jh.getOrThunk(()=>sS(t)),allowToolbarGroups:Ae===Xg.floating,buttons:op,sidebar:Om,views:Wh};Rn(Qs.outerContainer),AU(t,Qs.mothership,ni),p.setup(t,ln.popup.shared,Fe),pZ(t,ln.popup),MZ(t,ln.popup.shared.getSink,ln.popup),GU(t),oz(t,Mo,ln.popup.shared),v6(t,Uh,ki.sink,{backstage:ln.popup}),aG(t,ki.sink);const xB=t.getElement(),kx=Yo(Qs.outerContainer),B7={targetNode:xB,height:kx};return d.render(t,bs,bv,ln.popup,B7)},Vs=bs=>(R.set(bs.mothership),bs),mr=()=>{const bs=Sa(),Qs=Mr(),ki=ef(t)?rc():Vs(Qs);x.dialogUi.set(Qs),x.popupUi.set(ki),x.mainUi.set(bs);const ni={popupUi:ki,dialogUi:Qs,mainUi:bs,uiMotherships:x.getUiMotherships()};return lo(ni)};return{popups:{backstage:ln.popup,getMothership:()=>S7("popups",R)},dialogs:{backstage:ln.dialog,getMothership:()=>S7("dialogs",A)},renderUI:mr}},vG=t=>t.dom.textContent,yG=(t,r)=>{const i=br(t,"id").fold(()=>{const d=Ao("dialog-label");return Kn(r,"id",d),d},rn);Kn(t,"aria-labelledby",i)},xG=re([dn("lazySink"),Cs("dragBlockClass"),Ea("getBounds",Yt),Ct("useTabstopAt",Kt),Ct("firstTabstop",0),Ct("eventOrder",{}),Ll("modalBehaviours",[rs]),rd("onExecute"),ub("onEscape")]),k7={sketch:rn},wG=re([ym({name:"draghandle",overrides:(t,r)=>({behaviours:Ln([G_.config({mode:"mouse",getTarget:i=>zc(i,'[role="dialog"]').getOr(i),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Du({schema:[dn("dom")],name:"title"}),Du({factory:k7,schema:[dn("dom")],name:"close"}),Du({factory:k7,schema:[dn("dom")],name:"body"}),ym({factory:k7,schema:[dn("dom")],name:"footer"}),fg({factory:{sketch:(t,r)=>({...t,dom:r.dom,components:r.components})},schema:[Ct("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ct("components",[])],name:"blocker"})]),CG=(t,r,i,d)=>{const p=Ir(),x=Ae=>{p.set(Ae);const Ie=t.lazySink(Ae).getOrDie(),mt=d.blocker(),Fe=Ie.getSystem().build({...mt,components:mt.components.concat([dg(Ae)]),behaviours:Ln([Ms.config({}),zs("dialog-blocker-events",[u1(wf(),()=>{Kb.isBlocked(Ae)?ue():rs.focusIn(Ae)})])])});Sp(Ie,Fe),rs.focusIn(Ae)},w=Ae=>{p.clear(),li(Ae.element).each(Ie=>{Ae.getSystem().getByDom(Ie).each(mt=>{kp(mt)})})},A=Ae=>id(Ae,t,"body"),R=Ae=>ii(Ae,t,"footer"),$=(Ae,Ie)=>{Kb.block(Ae,Ie)},W=Ae=>{Kb.unblock(Ae)},q=Ao("modal-events"),se={...t.eventOrder,[od()]:[q].concat(t.eventOrder["alloy.system.attached"]||[])},ge=Xi();return{uid:t.uid,dom:t.dom,components:r,apis:{show:x,hide:w,getBody:A,getFooter:R,setIdle:W,setBusy:$},eventOrder:se,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:nc(t.modalBehaviours,[Hs.config({}),rs.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Kb.config({getRoot:p.get}),zs(q,[$i(Ae=>{const Ie=id(Ae,t,"title").element,mt=vG(Ie);ge.os.isMacOS()&&zn(mt)?Kn(Ae.element,"aria-label",mt):yG(Ae.element,Ie)})])])}},Zu=cd({name:"ModalDialog",configFields:xG(),partFields:wG(),factory:CG,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,i)=>{t.setBusy(r,i)},setIdle:(t,r)=>{t.setIdle(r)}}}),rV=os([ul,oC].concat(zb)),aV=Qu,T7=[rC("button"),nf,Kl("align","end",["start","end"]),T3,jf,Jh("buttonType",["primary","secondary"]),gn("context","mode:design")],M6=[...T7,tv],q_=[Kc("type",["submit","cancel","custom"]),...M6],E7=[Kc("type",["menu"]),lx,kS,nf,au("items",rV),...T7],N6=[...T7,Kc("type",["togglebutton"]),kS,nf,lx,Ra("active",!1)],K_=fc("type",{submit:q_,cancel:q_,custom:q_,menu:E7,togglebutton:N6}),B6=[ul,tv,Kc("level",["info","warn","error","success"]),LR,Ct("url","")],SG=os(B6),iV=t=>[ul,t],cV=[ul,tv,jf,rC("button"),nf,k3,Jh("buttonType",["primary","secondary","toolbar"]),T3,gn("context","mode:design")],lV=os(cV),Y4=[ul,oC],I0=Y4.concat([zR]),kG=Y4.concat([FR,jf,gn("context","mode:design")]),uV=os(kG),dV=Qu,_7=I0.concat([sF("auto"),gn("context","mode:design")]),TG=os(_7),EG=t1([sC,tv,LR]),_G=I0.concat([gn("storageKey","default"),gn("context","mode:design")]),AG=os(_G),pB=so,OG=os(I0),mV=so,DG=Y4.concat([gn("tag","textarea"),qc("scriptId"),qc("scriptUrl"),Mg("onFocus"),V0("settings",void 0)]),RG=Y4.concat([gn("tag","textarea"),ed("init")]),MG=o1(t=>Li("customeditor.old",Pc(RG),t).orThunk(()=>Li("customeditor.new",Pc(DG),t))),A7=so,O7=I0.concat([gn("context","mode:design")]),NG=os(O7),gV=ap(),BG=t=>[ul,tn("columns"),t],IG=[ul,qc("html"),Kl("presets","presentation",["presentation","document"]),Ea("onInit",ue),Ra("stretched",!1)],fV=os(IG),FG=I0.concat([Ra("border",!1),Ra("sandboxed",!0),Ra("streamContent",!1),Ra("transparent",!0)]),PG=os(FG),Y_=so,pV=os(Y4.concat([ri("height")])),LG=os([qc("url"),s1("zoom"),s1("cachedWidth"),s1("cachedHeight")]),I6=I0.concat([ri("inputMode"),ri("placeholder"),Ra("maximized",!1),jf,gn("context","mode:design")]),X4=os(I6),F6=so,hV=t=>[ul,FR,t,Kl("align","start",["start","center","end"]),ri("for")],P6=[tv,sC],ep=[tv,au("items",sh("items",()=>hB))],hB=Dg([os(P6),os(ep)]),bV=I0.concat([au("items",hB),jf,gn("context","mode:design")]),vV=os(bV),$G=so,HG=I0.concat([_x("items",[tv,sC]),wd("size",1),jf,gn("context","mode:design")]),Dk=os(HG),Fq=so,zG=I0.concat([Ra("constrain",!0),jf,gn("context","mode:design")]),yV=os(zG),X_=os([qc("width"),qc("height")]),L6=Y4.concat([FR,wd("min",0),wd("max",0)]),xV=os(L6),VG=oh,UG=[ul,au("header",so),au("cells",Ju(so))],WG=os(UG),jG=I0.concat([ri("placeholder"),Ra("maximized",!1),jf,gn("context","mode:design")]),J4=os(jG),Pq=so,wV=[Kc("type",["directory","leaf"]),PR,qc("id"),ku("menu",$U),ri("customStateIcon"),ri("customStateIconTooltip")],ZG=os(wV),GG=wV.concat([au("children",sh("children",()=>Rg("type",{directory:CV,leaf:ZG})))]),CV=os(GG),bB=Rg("type",{directory:CV,leaf:ZG}),qG=[ul,au("items",bB),Mg("onLeafAction"),Mg("onToggleExpand"),D("defaultExpandedIds",[],so),ri("defaultSelectedId")],KG=os(qG),SV=I0.concat([Kl("filetype","file",["image","media","file"]),jf,ri("picker_text"),gn("context","mode:design")]),YG=os(SV),$q=os([sC,VR]),e=t=>Gc("items","items",yd(),Ju(o1(r=>Li(`Checking item of ${t}`,n,r).fold(i=>Ws.error(Uo(i)),i=>Ws.value(i))))),n=wc(()=>Rg("type",{alertbanner:SG,bar:os(iV(e("bar"))),button:lV,checkbox:uV,colorinput:AG,colorpicker:OG,dropzone:NG,grid:os(BG(e("grid"))),iframe:PG,input:X4,listbox:vV,selectbox:Dk,sizeinput:yV,slider:xV,textarea:J4,urlinput:YG,customeditor:MG,htmlpanel:fV,imagepreview:pV,collection:TG,label:os(hV(e("label"))),table:WG,tree:KG,panel:a})),s=[ul,Ct("classes",[]),au("items",n)],a=os(s),l=[rC("tab"),PR,au("items",n)],f=[ul,_x("tabs",l)],v=os(f),k=M6,O=K_,F=os([qc("title"),ia("body",Rg("type",{panel:a,tabpanel:v})),gn("size","normal"),D("buttons",[],O),Ct("initialData",{}),Ea("onAction",ue),Ea("onChange",ue),Ea("onSubmit",ue),Ea("onClose",ue),Ea("onCancel",ue),Ea("onTabChange",ue)]),Z=t=>Li("dialog",F,t),K=os([Kc("type",["cancel","custom"]),...k]),J=os([qc("title"),qc("url"),s1("height"),s1("width"),um("buttons",K),Ea("onAction",ue),Ea("onCancel",ue),Ea("onClose",ue),Ea("onMessage",ue)]),de=t=>Li("dialog",J,t),Te=t=>Fn(t)?[t].concat(oe(Pa(t),Te)):ss(t)?oe(t,Te):[],be=t=>Tt(t.type)&&Tt(t.name),Me={checkbox:dV,colorinput:pB,colorpicker:mV,dropzone:gV,input:F6,iframe:Y_,imagepreview:LG,selectbox:Fq,sizeinput:X_,slider:VG,listbox:$G,size:X_,textarea:Pq,urlinput:$q,customeditor:A7,collection:EG,togglemenuitem:aV},Xe=t=>B.from(Me[t.type]),gt=t=>Et(Te(t),be),bt=t=>{const r=gt(t),i=oe(r,d=>Xe(d).fold(()=>[],p=>[ia(d.name,p)]));return os(i)},Ot=t=>{var r;const i=_n(Z(t)),d=bt(t),p=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:i,dataValidator:d,initialData:p}},yn={open:(t,r)=>{const i=Ot(r);return t(i.internalDialog,i.initialData,i.dataValidator)},openUrl:(t,r)=>{const i=_n(de(r));return t(i)},redial:t=>Ot(t)};var So=Object.freeze({__proto__:null,events:(t,r)=>{const i=(d,p)=>{t.updateState.each(x=>{const w=x(d,p);r.set(w)}),t.renderComponents.each(x=>{const w=x(p,r.get());(t.reuseDom?nI:Y2)(d,w)})};return ya([on(ug(),(d,p)=>{const x=p;if(!x.universal){const w=t.channel;Oe(x.channels,w)&&i(d,x.data)}}),$i((d,p)=>{t.initialData.each(x=>{i(d,x)})})])}}),Ut=Object.freeze({__proto__:null,getState:(t,r,i)=>i}),En=[dn("channel"),Cs("renderComponents"),Cs("updateState"),Cs("initialData"),Ra("reuseDom",!0)],gs=Object.freeze({__proto__:null,init:()=>{const t=wo(B.none()),r=()=>t.set(B.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const Gs=xl({fields:En,name:"reflecting",active:So,apis:Ut,state:gs}),Tr=t=>{const r=[],i={};return Co(t,(d,p)=>{d.fold(()=>{r.push(p)},x=>{i[p]=x})}),r.length>0?Ws.error(r):Ws.value(i)},za=(t,r,i,d)=>{const p=da(hx.sketch(x=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:$e(t.items,w=>mH(x,w,r,i,d))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[p.asSpec()]}],behaviours:Ln([rs.config({mode:"acyclic",useTabstopAt:Qe(F_)}),Fd.memento(p),uP(p,{postprocess:x=>Tr(x).fold(w=>(console.error(w),{}),rn)}),zs("dialog-body-panel",[on(wf(),(x,w)=>{x.getSystem().broadcastOn([kC],{newFocus:B.some(w.event.target)})})])])}},ci=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:Xy(t.action),behaviours:nc(t.tabButtonBehaviours,[Ms.config({}),rs.config({mode:"execution",useSpace:!0,useEnter:!0}),ao.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),El=Ym({name:"TabButton",configFields:[Ct("uid",void 0),dn("value"),Gc("dom","dom",I(()=>({attributes:{role:"tab",id:Ao("aria"),"aria-selected":"false"}})),Ud()),Cs("action"),Ct("domModification",{}),Ll("tabButtonBehaviours",[Ms,rs,ao]),dn("view")],factory:ci}),tm=re([dn("tabs"),dn("dom"),Ct("clickToDismiss",!1),Ll("tabbarBehaviours",[Cn,rs]),lb(["tabClass","selectedClass"])]),gd=kw({factory:El,name:"tabs",unit:"tab",overrides:t=>{const r=(d,p)=>{Cn.dehighlight(d,p),qo(d,Fk(),{tabbar:d,button:p})},i=(d,p)=>{Cn.highlight(d,p),qo(d,Ng(),{tabbar:d,button:p})};return{action:d=>{const p=d.getSystem().getByUid(t.uid).getOrDie(),x=Cn.isHighlighted(p,d);(x&&t.clickToDismiss?r:x?ue:i)(p,d)},domModification:{classes:[t.markers.tabClass]}}}}),to=re([gd]),us=(t,r,i,d)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:nc(t.tabbarBehaviours,[Cn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(p,x)=>{Kn(x.element,"aria-selected","true")},onDehighlight:(p,x)=>{Kn(x.element,"aria-selected","false")}}),rs.config({mode:"flow",getInitial:p=>Cn.getHighlighted(p).map(x=>x.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),pa=cd({name:"Tabbar",configFields:tm(),partFields:to(),factory:us}),bo=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:nc(t.tabviewBehaviours,[Hs.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Is=Ym({name:"Tabview",configFields:[Ll("tabviewBehaviours",[Hs])],factory:bo}),Ps=re([Ct("selectFirst",!0),Ar("onChangeTab"),Ar("onDismissTab"),Ct("tabs",[]),Ll("tabSectionBehaviours",[])]),po=Du({factory:pa,schema:[dn("dom"),lm("markers",[dn("tabClass"),dn("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Or=Du({factory:Is,name:"tabview"}),Vr=re([po,Or]),Ru=(t,r,i,d)=>{const p=w=>{const A=ao.getValue(w);ii(w,t,"tabview").each(R=>{ce(t.tabs,W=>W.value===A).each(W=>{const q=W.view();br(w.element,"id").each(se=>{Kn(R.element,"aria-labelledby",se)}),Hs.set(R,q),t.onChangeTab(R,w,q)})})},x=(w,A)=>{ii(w,t,"tabbar").each(R=>{A(R).each(ob)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:Ly(t.tabSectionBehaviours),events:ya(Ne([t.selectFirst?[$i((w,A)=>{x(w,Cn.getFirst)})]:[],[on(Ng(),(w,A)=>{const R=A.event.button;p(R)}),on(Fk(),(w,A)=>{const R=A.event.button;t.onDismissTab(w,R)})]])),apis:{getViewItems:w=>ii(w,t,"tabview").map(A=>Hs.contents(A)).getOr([]),showTab:(w,A)=>{x(w,$=>{const W=Cn.getCandidates($);return ce(W,se=>ao.getValue(se)===A).filter(se=>!Cn.isHighlighted($,se))})}}}},Za=cd({name:"TabSection",configFields:Ps(),partFields:Vr(),factory:Ru,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,i)=>{t.showTab(r,i)}}}),_m=(t,r,i)=>$e(t,(d,p)=>{Hs.set(i,t[p].view());const x=r.dom.getBoundingClientRect();return Hs.set(i,[]),x.height}),tp=t=>Hn(Dt(t,(r,i)=>r>i?-1:r<i?1:0)),F0=(t,r,i)=>{const d=Vl(t).dom,p=zc(t,".tox-dialog-wrap").getOr(t),x=bn(p,"position")==="fixed";let w;x?w=Math.max(d.clientHeight,window.innerHeight):w=Math.max(d.offsetHeight,d.scrollHeight);const A=uc(r),$=r.dom.offsetLeft>=i.dom.offsetLeft+_e(i)?Math.max(uc(i),A):A,W=parseInt(bn(t,"margin-top"),10)||0,q=parseInt(bn(t,"margin-bottom"),10)||0,ge=uc(t)+W+q-$;return w-ge},ng=(t,r)=>{Hn(t).each(i=>Za.showTab(r,i.value))},Zp=(t,r)=>{Gn(t,"height",r+"px"),Gn(t,"flex-basis",r+"px")},Gp=(t,r,i)=>{zc(t,'[role="dialog"]').each(d=>{zi(d,'[role="tablist"]').each(p=>{i.get().map(x=>(Gn(r,"height","0"),Gn(r,"flex-basis","0"),Math.min(x,F0(d,r,p)))).each(x=>{Zp(r,x)})})})},nm=t=>zi(t,'[role="tabpanel"]'),qp=t=>{const r=Ir();return{extraEvents:[$i(p=>{const x=p.element;nm(x).each(w=>{Gn(w,"visibility","hidden"),p.getSystem().getByDom(w).toOptional().each(A=>{const R=_m(t,w,A);tp(R).fold(r.clear,r.set)}),Gp(x,w,r),cr(w,"visibility"),ng(t,p),requestAnimationFrame(()=>{Gp(x,w,r)})})}),on($a(),p=>{const x=p.element;nm(x).each(w=>{Gp(x,w,r)})}),on(x5,(p,x)=>{const w=p.element;nm(w).each(A=>{const R=hb(qa(A));Gn(A,"visibility","hidden");const $=ba(A,"height").map(se=>parseInt(se,10));cr(A,"height"),cr(A,"flex-basis");const W=A.dom.getBoundingClientRect().height;$.forall(se=>W>se)?(r.set(W),Gp(w,A,r)):$.each(se=>{Zp(A,se)}),cr(A,"visibility"),R.each(Zd)})})],selectFirst:!1}},is="send-data-to-section",la="send-data-to-view",_l=(t,r,i,d)=>{const p=wo({}),x=W=>{const q=ao.getValue(W),se=Tr(q).getOr({}),ge=p.get(),Ae=mi(ge,se);p.set(Ae)},w=W=>{const q=p.get();ao.setValue(W,q)},A=wo(null),R=$e(t.tabs,W=>({value:W.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Di(i.shared.providers.translate(W.title))],view:()=>[hx.sketch(q=>({dom:{tag:"div",classes:["tox-form"]},components:$e(W.items,se=>mH(q,se,r,i,d)),formBehaviours:Ln([rs.config({mode:"acyclic",useTabstopAt:Qe(F_)}),zs("TabView.form.events",[$i(w),Cd(x)]),qm.config({channels:ua([{key:is,value:{onReceive:x}},{key:la,value:{onReceive:w}}])})])}))]})),$=qp(R);return Za.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(W,q,se)=>{const ge=ao.getValue(q);qo(W,WM,{name:ge,oldName:A.get()}),A.set(ge)},tabs:R,components:[Za.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pa.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ln([Wi.config({})])}),Za.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:$.selectFirst,tabSectionBehaviours:Ln([zs("tabpanel",$.extraEvents),rs.config({mode:"acyclic"}),Kr.config({find:W=>Hn(Za.getViewItems(W))}),D0(B.none(),W=>(W.getSystem().broadcastOn([is],{}),p.get()),(W,q)=>{p.set(q),W.getSystem().broadcastOn([la],{})})])})},Mu=(t,r,i,d,p,x)=>{const w=$=>{const W=$.body;switch(W.type){case"tabpanel":return[_l(W,$.initialData,d,x)];default:return[za(W,$.initialData,d,x)]}},A=($,W)=>B.some({isTabPanel:()=>W.body.type==="tabpanel"}),R={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...i.map($=>({id:$})).getOr({}),...p?R:{}}},components:[],behaviours:Ln([Fd.childAt(0),Gs.config({channel:`${P_}-${r}`,updateState:A,renderComponents:w,initialData:t})])}},fd=(t,r,i,d,p,x)=>Mu(t,r,B.some(i),d,p,x),Nu=(t,r,i,d)=>{const p=Mu(t,r,B.none(),i,!1,d);return Zu.parts.body(p)},tl=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[FN(B.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ln([Wi.config({}),Ms.config({})])})]}],behaviours:Ln([rs.config({mode:"acyclic",useTabstopAt:Qe(F_)})])};return Zu.parts.body(r)},nl=Oh.deviceType.isTouch(),wg=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),Yb=(t,r)=>Zu.parts.close(Hl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:Ln([Wi.config({})])})),P0=()=>Zu.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),hv=(t,r)=>Zu.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Dh(`<p>${HI(r.translate(t))}</p>`)}]}]}),J_=t=>Zu.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Q_=(t,r)=>[zp.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),zp.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],RC=t=>{const r="tox-dialog",i=r+"-wrap",d=i+"__backdrop",p=r+"__disable-scroll";return Zu.sketch({lazySink:t.lazySink,onEscape:x=>(t.onEscape(x),B.some(!0)),useTabstopAt:x=>!F_(x),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Dh(`<div class="${i}"></div>`),components:[{dom:{tag:"div",classes:nl?[d,d+"--opaque"]:[d]}}]}},dragBlockClass:i,modalBehaviours:Ln([Ms.config({}),zs("dialog-events",t.dialogEvents.concat([u1(wf(),(x,w)=>{Kb.isBlocked(x)?ue():rs.focusIn(x)}),on(Dx(),(x,w)=>{x.getSystem().broadcastOn([kC],{newFocus:w.event.newFocus})})])),zs("scroll-lock",[$i(()=>{Cc(Pt(),p)}),Cd(()=>{Hi(Pt(),p)})]),...t.extraBehaviours]),eventOrder:{[cu()]:["dialog-events"],[od()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Wd()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Xb=t=>Hl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ln([Wi.config({}),lc.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[vg("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{xr(r,ov)}}),MC=(t,r,i,d)=>{const p=x=>[Di(d.translate(x.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...i.map(x=>({id:x})).getOr({})}},components:[],behaviours:Ln([Gs.config({channel:`${LN}-${r}`,initialData:t,renderComponents:p})])}},Q4=()=>({dom:Dh('<div class="tox-dialog__draghandle"></div>')}),eD=(t,r,i,d)=>zp.sketch({dom:Dh('<div class="tox-dialog__header"></div>'),components:[MC(t,r,B.some(i),d),Q4(),Xb(d)],containerBehaviours:Ln([G_.config({mode:"mouse",blockerClass:"blocker",getTarget:p=>vp(p,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),kV=(t,r,i)=>{const d=Zu.parts.title(MC(t,r,B.none(),i)),p=Zu.parts.draghandle(Q4()),x=Zu.parts.close(Xb(i)),w=[d].concat(t.draggable?[p]:[]).concat([x]);return zp.sketch({dom:Dh('<div class="tox-dialog__header"></div>'),components:w})},eA=(t,r,i)=>kV({title:i.shared.providers.translate(t),draggable:i.dialog.isDraggableModal()},r,i.shared.providers),D7=(t,r,i,d)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":i.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${d.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:Dh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),R7=(t,r,i)=>({onClose:()=>i.closeWindow(),onBlock:d=>{const p=zi(t().element,".tox-dialog__header").map(x=>uc(x));Zu.setBusy(t(),(x,w)=>D7(d.message,w,r,p))},onUnblock:()=>{Zu.setIdle(t())}}),Am="tox-dialog--fullscreen",Kp="tox-dialog--width-lg",tD="tox-dialog--width-md",It=t=>{switch(t){case"large":return B.some(Kp);case"medium":return B.some(tD);default:return B.none()}},Lt=(t,r)=>{const i=xt.fromDom(r.element.dom);kd(i,Am)||(kf(i,[Kp,tD]),It(t).each(d=>Cc(i,d)))},Jn=(t,r)=>{const i=xt.fromDom(t.element.dom),d=$k(i),p=ce(d,x=>x===Kp||x===tD).or(It(r));Yl(i,[Am,...p.toArray()])},Wn=(t,r,i)=>Hu(RC({...t,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[bx({}),...t.extraBehaviours],onEscape:d=>{xr(d,ov)},dialogEvents:r,eventOrder:{[ug()]:[Gs.name(),qm.name()],[od()]:["scroll-lock",Gs.name(),"messages","dialog-events","alloy.base.behaviour"],[Wd()]:["alloy.base.behaviour","dialog-events","messages",Gs.name(),"scroll-lock"]}})),Ns=(t,r={})=>{const i=d=>{const p=$e(d.items,x=>{const w=vn(r,x.name).getOr(wo(!1));return{...x,storage:w}});return{...d,items:p}};return $e(t,d=>d.type==="menu"?i(d):d)},ha=t=>Pn(t,(r,i)=>i.type==="menu"?Pn(i.items,(p,x)=>(p[x.name]=x.storage,p),r):r,{}),gl=(t,r)=>[LC(wf(),k4),t(v_,(i,d,p,x)=>{bh(x.element)&&hb(qa(x.element)).each(Pl),r.onClose(),d.onClose()}),t(ov,(i,d,p,x)=>{d.onCancel(i),xr(x,v_)}),on(y_,(i,d)=>r.onUnblock()),on(UM,(i,d)=>r.onBlock(d.event))],L0=(t,r)=>{const i=(p,x)=>on(p,(w,A)=>{d(w,(R,$)=>{x(t(),R,A.event,w)})}),d=(p,x)=>{Gs.getState(p).get().each(w=>{x(w,p)})};return[...gl(i,r),i(Yf,(p,x,w)=>{x.onAction(p,{name:w.name})})]},Jb=(t,r,i)=>{const d=(x,w)=>on(x,(A,R)=>{p(A,($,W)=>{w(t(),$,R.event,A)})}),p=(x,w)=>{Gs.getState(x).get().each(A=>{w(A.internalDialog,x)})};return[...gl(d,r),d(nk,(x,w)=>w.onSubmit(x)),d(eg,(x,w,A)=>{w.onChange(x,{name:A.name})}),d(Yf,(x,w,A,R)=>{const $=()=>R.getSystem().isConnected()?rs.focusIn(R):void 0,W=ge=>X(ge,"disabled")||br(ge,"aria-disabled").exists(Ae=>Ae==="true"),q=qa(R.element),se=hb(q);w.onAction(x,{name:A.name,value:A.value}),hb(q).fold($,ge=>{W(ge)||se.exists(Ae=>xu(ge,Ae)&&W(Ae))?$():i().toOptional().filter(Ae=>!xu(Ae.element,ge)).each($)})}),d(WM,(x,w,A)=>{w.onTabChange(x,{newTabName:A.name,oldTabName:A.oldName})}),Cd(x=>{const w=t();ao.setValue(x,w.getData())})]},vB=(t,r)=>TP(t,t.type,r),TV=(t,r,i)=>ce(r,d=>d.name===i).bind(d=>d.memento.getOpt(t)),EV=(t,r)=>{const i=r.map(A=>A.footerButtons).getOr([]),d=Jo(i,A=>A.align==="start"),p=(A,R)=>zp.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${A}`]},components:$e(R,$=>$.memento.asSpec())}),x=p("start",d.pass),w=p("end",d.fail);return[x,w]},M7=(t,r,i)=>{const d=(p,x)=>{const w=$e(x.buttons,R=>{const $=da(vB(R,i));return{name:R.name,align:R.align,memento:$}}),A=R=>TV(p,w,R);return B.some({lookupByName:A,footerButtons:w})};return{dom:Dh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ln([Gs.config({channel:`${$N}-${r}`,initialData:t,updateState:d,renderComponents:EV})])}},_V=(t,r,i)=>M7(t,r,i),Cx=(t,r,i)=>Zu.parts.footer(M7(t,r,i)),yB=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const d=Kr.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return hx.getField(d,r).orThunk(()=>t.getFooter().bind(w=>Gs.getState(w).get()).bind(w=>w.lookupByName(r)))}else return B.none()},AV=(t,r)=>{const i=t.getRoot();return Gs.getState(i).get().map(d=>_n(Li("data",d.dataValidator,r))).getOr(r)},N7=(t,r,i)=>{const d=Ae=>{const Ie=t.getRoot();Ie.getSystem().isConnected()&&Ae(Ie)},ge={getData:()=>{const Ae=t.getRoot(),Ie=Ae.getSystem().isConnected()?t.getFormWrapper():Ae,mt=ao.getValue(Ie),Fe=Mn(i,nt=>nt.get());return{...mt,...Fe}},setData:Ae=>{d(Ie=>{const mt=ge.getData(),Fe=mi(mt,Ae),nt=AV(t,Fe),lt=t.getFormWrapper();ao.setValue(lt,nt),Co(i,(Ft,zt)=>{Ls(Fe,zt)&&Ft.set(Fe[zt])})})},setEnabled:(Ae,Ie)=>{yB(t,Ae).each(Ie?Wo.enable:Wo.disable)},focus:Ae=>{yB(t,Ae).each(Ms.focus)},block:Ae=>{if(!Tt(Ae))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");d(Ie=>{qo(Ie,UM,{message:Ae})})},unblock:()=>{d(Ae=>{xr(Ae,y_)})},showTab:Ae=>{d(Ie=>{const mt=t.getBody();Gs.getState(mt).get().exists(nt=>nt.isTabPanel())&&Kr.getCurrent(mt).each(nt=>{Za.showTab(nt,Ae)})})},redial:Ae=>{d(Ie=>{const mt=t.getId(),Fe=r(Ae),nt=Ns(Fe.internalDialog.buttons,i);Ie.getSystem().broadcastOn([`${mk}-${mt}`],Fe),Ie.getSystem().broadcastOn([`${LN}-${mt}`],Fe.internalDialog),Ie.getSystem().broadcastOn([`${P_}-${mt}`],Fe.internalDialog),Ie.getSystem().broadcastOn([`${$N}-${mt}`],{...Fe.internalDialog,buttons:nt}),ge.setData(Fe.initialData)})},close:()=>{d(Ae=>{xr(Ae,v_)})},toggleFullscreen:t.toggleFullscreen};return ge},OV=(t,r,i)=>{const d=Ao("dialog"),p=t.internalDialog,x=eA(p.title,d,i),w=wo(p.size),A=lt=>yB(Fe,lt),R=It(w.get()).toArray(),$=(lt,Ft)=>(w.set(Ft.internalDialog.size),Lt(Ft.internalDialog.size,lt),B.some(Ft)),W=Nu({body:p.body,initialData:p.initialData},d,i,A),q=Ns(p.buttons),se=ha(q),ge=Lo(q.length!==0,Cx({buttons:q},d,i)),Ae=Jb(()=>nt,R7(()=>mt,i.shared.providers,r),i.shared.getSink),Ie={id:d,header:x,body:W,footer:ge,extraClasses:R,extraBehaviours:[Gs.config({channel:`${mk}-${d}`,updateState:$,initialData:t})],extraStyles:{}},mt=Wn(Ie,Ae,i),Fe=(()=>{const lt=()=>{const zt=Zu.getBody(mt);return Kr.getCurrent(zt).getOr(zt)},Ft=()=>{Jn(mt,w.get())};return{getId:re(d),getRoot:re(mt),getBody:()=>Zu.getBody(mt),getFooter:()=>Zu.getFooter(mt),getFormWrapper:lt,toggleFullscreen:Ft}})(),nt=N7(Fe,r.redial,se);return{dialog:mt,instanceApi:nt}},DV=(t,r,i,d=!1,p)=>{const x=Ao("dialog"),w=Ao("dialog-label"),A=Ao("dialog-content"),R=t.internalDialog,$=Po=>yB(Mo,Po),W=wo(R.size),q=It(W.get()).toArray(),se=(Po,io)=>(W.set(io.internalDialog.size),Lt(io.internalDialog.size,Po),p(),B.some(io)),ge=da(eD({title:R.title,draggable:!0},x,w,i.shared.providers)),Ae=da(fd({body:R.body,initialData:R.initialData},x,A,i,d,$)),Ie=Ns(R.buttons),mt=ha(Ie),Fe=Lo(Ie.length!==0,da(_V({buttons:Ie},x,i))),nt=Jb(()=>ln,{onBlock:Po=>{Kb.block(zt,(io,zo)=>{const Mr=ge.getOpt(zt).map(rc=>uc(rc.element));return D7(Po.message,zo,i.shared.providers,Mr)})},onUnblock:()=>{Kb.unblock(zt)},onClose:()=>r.closeWindow()},i.shared.getSink),lt="tox-dialog-inline",Ft=Xi().os,zt=Hu({dom:{tag:"div",classes:["tox-dialog",lt,...q],attributes:{role:"dialog",...Ft.isMacOS()?{"aria-label":R.title}:{"aria-labelledby":w}}},eventOrder:{[ug()]:[Gs.name(),qm.name()],[cu()]:["execute-on-form"],[od()]:["reflecting","execute-on-form"]},behaviours:Ln([rs.config({mode:"cyclic",onEscape:Po=>(xr(Po,v_),B.some(!0)),useTabstopAt:Po=>!F_(Po)&&(Ur(Po)!=="button"||Ds(Po,"disabled")!=="disabled"),firstTabstop:1}),Gs.config({channel:`${mk}-${x}`,updateState:se,initialData:t}),Ms.config({}),zs("execute-on-form",nt.concat([u1(wf(),(Po,io)=>{rs.focusIn(Po)}),on(Dx(),(Po,io)=>{Po.getSystem().broadcastOn([kC],{newFocus:io.event.newFocus})})])),Kb.config({getRoot:()=>B.some(zt)}),Hs.config({}),bx({})]),components:[ge.asSpec(),Ae.asSpec(),...Fe.map(Po=>Po.asSpec()).toArray()]}),Zn=()=>{Jn(zt,W.get())},Mo={getId:re(x),getRoot:re(zt),getFooter:()=>Fe.map(Po=>Po.get(zt)),getBody:()=>Ae.get(zt),getFormWrapper:()=>{const Po=Ae.get(zt);return Kr.getCurrent(Po).getOr(Po)},toggleFullscreen:Zn},ln=N7(Mo,r.redial,mt);return{dialog:zt,instanceApi:ln}};var Rr=tinymce.util.Tools.resolve("tinymce.util.URI");const Wt=t=>{const r=w=>{t.getSystem().isConnected()&&w(t)};return{block:w=>{if(!Tt(w))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(A=>{qo(A,UM,{message:w})})},unblock:()=>{r(w=>{xr(w,y_)})},close:()=>{r(w=>{xr(w,v_)})},sendMessage:w=>{r(A=>{A.getSystem().broadcastOn([T4],w)})}}},xs=["insertContent","setContent","execCommand","close","block","unblock"],Sr=t=>Fn(t)&&xs.indexOf(t.mceAction)!==-1,bu=t=>!Sr(t)&&Fn(t)&&Ls(t,"mceAction"),np=(t,r,i)=>{switch(i.mceAction){case"insertContent":t.insertContent(i.content);break;case"setContent":t.setContent(i.content);break;case"execCommand":const d=es(i.ui)?i.ui:!1;t.execCommand(i.cmd,d,i.value);break;case"close":r.close();break;case"block":r.block(i.message);break;case"unblock":r.unblock();break}},Cg=(t,r,i,d)=>{const p=Ao("dialog"),x=eA(t.title,p,d),w=tl(t),A=t.buttons.bind(lt=>lt.length===0?B.none():B.some(Cx({buttons:lt},p,d))),R=L0(()=>nt,R7(()=>Fe,d.shared.providers,r)),$={...t.height.fold(()=>({}),lt=>({height:lt+"px","max-height":lt+"px"})),...t.width.fold(()=>({}),lt=>({width:lt+"px","max-width":lt+"px"}))},W=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],q=new Rr(t.url,{base_uri:new Rr(window.location.href)}),se=`${q.protocol}://${q.host}${q.port?":"+q.port:""}`,ge=mc(),Ae=(lt,Ft)=>B.some(Ft),Ie=[Gs.config({channel:`${mk}-${p}`,updateState:Ae,initialData:t}),zs("messages",[$i(()=>{const lt=Au(xt.fromDom(window),"message",Ft=>{if(q.isSameOrigin(new Rr(Ft.raw.origin))){const zt=Ft.raw.data;Sr(zt)?np(i,nt,zt):bu(zt)&&t.onMessage(nt,zt)}});ge.set(lt)}),Cd(ge.clear)]),qm.config({channels:{[T4]:{onReceive:(lt,Ft)=>{zi(lt.element,"iframe").each(zt=>{const Zn=zt.dom.contentWindow;zn(Zn)&&Zn.postMessage(Ft,se)})}}}})],Fe=Wn({id:p,header:x,body:w,footer:A,extraClasses:W,extraBehaviours:Ie,extraStyles:$},R,d),nt=Wt(Fe);return{dialog:Fe,instanceApi:nt}},Vh=t=>{const r=t.shared;return{open:(d,p)=>{const x=()=>{Zu.hide($),p()},w=da(TP({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:B.some("primary"),align:"end",enabled:!0,icon:B.none()},"cancel",t)),A=P0(),R=Yb(x,r.providers),$=Hu(RC({lazySink:()=>r.getSink(),header:wg(A,R),body:hv(d,r.providers),footer:B.some(J_(Q_([],[w.asSpec()]))),onEscape:x,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[on(ov,x)],eventOrder:{}}));Zu.show($);const W=w.get($);Ms.focus(W)}}},Sx=t=>{const r=t.shared;return{open:(d,p)=>{const x=se=>{Zu.hide(W),p(se)},w=da(TP({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:B.some("primary"),align:"end",enabled:!0,icon:B.none()},"submit",t)),A=TP({context:"any",name:"no",text:"No",primary:!1,buttonType:B.some("secondary"),align:"end",enabled:!0,icon:B.none()},"cancel",t),R=P0(),$=Yb(()=>x(!1),r.providers),W=Hu(RC({lazySink:()=>r.getSink(),header:wg(R,$),body:hv(d,r.providers),footer:B.some(J_(Q_([],[A,w.asSpec()]))),onEscape:()=>x(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[on(ov,()=>x(!1)),on(nk,()=>x(!0))],eventOrder:{}}));Zu.show(W);const q=w.get(W);Ms.focus(q)}}},nD=(t,r)=>_n(Li("data",r,t)),Sg=t=>Ph(t,".tox-alert-dialog")||Ph(t,".tox-confirm-dialog"),XG=(t,r,i)=>r&&i?[]:[wi.config({contextual:{lazyContext:()=>B.some(jc(xt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:d=>p0(t,d.element).map(x=>({bounds:K1(x),optScrollEnv:B.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:sl(x.element).top})})).getOrThunk(()=>({bounds:Yt(),optScrollEnv:B.none()}))})],RV=t=>{const r=t.editor,i=q1(r),d=Vh(t.backstages.dialog),p=Sx(t.backstages.dialog),x=(Ae,Ie,mt)=>{if(!Vn(Ie)){if(Ie.inline==="toolbar")return $(Ae,t.backstages.popup.shared.anchors.inlineDialog(),mt,Ie);if(Ie.inline==="bottom")return W(Ae,t.backstages.popup.shared.anchors.inlineBottomDialog(),mt,Ie);if(Ie.inline==="cursor")return $(Ae,t.backstages.popup.shared.anchors.cursor(),mt,Ie)}return R(Ae,mt)},w=(Ae,Ie)=>A(Ae,Ie),A=(Ae,Ie)=>{const mt=Fe=>{const nt=Cg(Fe,{closeWindow:()=>{Zu.hide(nt.dialog),Ie(nt.instanceApi)}},r,t.backstages.dialog);return Zu.show(nt.dialog),nt.instanceApi};return yn.openUrl(mt,Ae)},R=(Ae,Ie)=>{const mt=(Fe,nt,lt)=>{const Ft=nt,Zn=OV({dataValidator:lt,initialData:Ft,internalDialog:Fe},{redial:yn.redial,closeWindow:()=>{Zu.hide(Zn.dialog),Ie(Zn.instanceApi)}},t.backstages.dialog);return Zu.show(Zn.dialog),Zn.instanceApi.setData(Ft),Zn.instanceApi};return yn.open(mt,Ae)},$=(Ae,Ie,mt,Fe)=>{const nt=(lt,Ft,zt)=>{const Zn=nD(Ft,zt),Mo=Ir(),ln=t.backstages.popup.shared.header.isPositionedAtTop(),Po={dataValidator:zt,initialData:Zn,internalDialog:lt},io=()=>Mo.on(Sa=>{cc.reposition(Sa),(!i||!ln)&&wi.refresh(Sa)}),zo=DV(Po,{redial:yn.redial,closeWindow:()=>{Mo.on(cc.hide),r.off("ResizeEditor",io),Mo.clear(),mt(zo.instanceApi)}},t.backstages.popup,Fe.ariaAttrs,io),Mr=Hu(cc.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Fe.persistent?{event:"doNotDismissYet"}:{},...ln?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ln([zs("window-manager-inline-events",[on(dp(),(Sa,Yo)=>{xr(zo.dialog,ov)})]),...XG(r,i,ln)]),isExtraPart:(Sa,Yo)=>Sg(Yo)}));Mo.set(Mr);const rc=()=>{const Sa=r.inline?Pt():xt.fromDom(r.getContainer()),Yo=jc(Sa);return B.some(Yo)};return cc.showWithinBounds(Mr,dg(zo.dialog),{anchor:Ie},rc),(!i||!ln)&&(wi.refresh(Mr),r.on("ResizeEditor",io)),zo.instanceApi.setData(Zn),rs.focusIn(zo.dialog),zo.instanceApi};return yn.open(nt,Ae)},W=(Ae,Ie,mt,Fe)=>{const nt=(lt,Ft,zt)=>{const Zn=nD(Ft,zt),Mo=Ir(),ln=t.backstages.popup.shared.header.isPositionedAtTop(),Po={dataValidator:zt,initialData:Zn,internalDialog:lt},io=()=>Mo.on(Sa=>{cc.reposition(Sa),wi.refresh(Sa)}),zo=DV(Po,{redial:yn.redial,closeWindow:()=>{Mo.on(cc.hide),r.off("ResizeEditor ScrollWindow ElementScroll",io),Mo.clear(),mt(zo.instanceApi)}},t.backstages.popup,Fe.ariaAttrs,io),Mr=Hu(cc.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Fe.persistent?{event:"doNotDismissYet"}:{},...ln?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ln([zs("window-manager-inline-events",[on(dp(),(Sa,Yo)=>{xr(zo.dialog,ov)})]),wi.config({contextual:{lazyContext:()=>B.some(jc(xt.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Sa=>p0(r,Sa.element).map(Rn=>({bounds:K1(Rn),optScrollEnv:B.some({currentScrollTop:Rn.element.dom.scrollTop,scrollElmTop:sl(Rn.element).top})})).getOrThunk(()=>({bounds:Yt(),optScrollEnv:B.none()}))})]),isExtraPart:(Sa,Yo)=>Sg(Yo)}));Mo.set(Mr);const rc=()=>t.backstages.popup.shared.getSink().toOptional().bind(Sa=>{const Yo=p0(r,Sa.element),Rn=15,lo=Yo.map(bs=>K1(bs)).getOr(Yt()),Vs=jc(xt.fromDom(r.getContentAreaContainer())),mr=vl(Vs,lo);return B.some(oa(mr.x,mr.y,mr.width,mr.height-Rn))});return cc.showWithinBounds(Mr,dg(zo.dialog),{anchor:Ie},rc),wi.refresh(Mr),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",io),zo.instanceApi.setData(Zn),rs.focusIn(zo.dialog),zo.instanceApi};return yn.open(nt,Ae)};return{open:x,openUrl:w,alert:(Ae,Ie)=>{d.open(Ae,Ie)},close:Ae=>{Ae.close()},confirm:(Ae,Ie)=>{p.open(Ae,Ie)}}},MV=t=>{ex(t),q8(t),hZ(t)};var yK=()=>{bf.add("silver",t=>{MV(t);let r=()=>Yt();const{dialogs:i,popups:d,renderUI:p}=bG(t,{getPopupSinkBounds:()=>r()}),x=()=>{const $=p();return p0(t,d.getMothership().element).each(q=>{r=()=>K1(q)}),$};ek.register(t,d.backstage.shared);const w=RV({editor:t,backstages:{popup:d.backstage,dialog:i.backstage}}),A=Ir(),R=()=>jI(t,{backstage:d.backstage},d.getMothership(),A);return{renderUI:x,getWindowManagerImpl:re(w),getNotificationManagerImpl:R}})};yK()})();var YK=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],XK=function($n){return YK.map(function(Xo){return Xo.toLowerCase()}).indexOf($n.toLowerCase())!==-1},JK=function($n,Xo,mo){Object.keys(Xo).filter(XK).forEach(function(vo){var ko=Xo[vo];typeof ko=="function"&&(vo==="onInit"?ko($n,mo):mo.on(vo.substring(2),function(wn){return ko(wn,mo)}))})},QK=function($n,Xo,mo,vo){var ko=$n.modelEvents?$n.modelEvents:null,wn=Array.isArray(ko)?ko.join(" "):ko;PV(vo,function(no,Tt){mo&&typeof no=="string"&&no!==Tt&&no!==mo.getContent({format:$n.outputFormat})&&mo.setContent(no)}),mo.on(wn||"change input undo redo",function(){Xo.emit("update:modelValue",mo.getContent({format:$n.outputFormat}))})},eY=function($n,Xo,mo,vo,ko,wn){vo.setContent(wn()),mo.attrs["onUpdate:modelValue"]&&QK(Xo,mo,vo,ko),JK($n,mo.attrs,vo)},dK=0,bK=function($n){var Xo=Date.now(),mo=Math.floor(Math.random()*1e9);return dK++,$n+"_"+mo+dK+String(Xo)},tY=function($n){return $n!==null&&$n.tagName.toLowerCase()==="textarea"},mK=function($n){return typeof $n>"u"||$n===""?[]:Array.isArray($n)?$n:$n.split(" ")},nY=function($n,Xo){return mK($n).concat(mK(Xo))},oY=function($n){return $n==null},gK=function(){return{listeners:[],scriptId:bK("tiny-script"),scriptLoaded:!1}},sY=function(){var $n=gK(),Xo=function(ko,wn,no,Tt){var Fn=wn.createElement("script");Fn.referrerPolicy="origin",Fn.type="application/javascript",Fn.id=ko,Fn.src=no;var To=function(){Fn.removeEventListener("load",To),Tt()};Fn.addEventListener("load",To),wn.head&&wn.head.appendChild(Fn)},mo=function(ko,wn,no){$n.scriptLoaded?no():($n.listeners.push(no),ko.getElementById($n.scriptId)||Xo($n.scriptId,ko,wn,function(){$n.listeners.forEach(function(Tt){return Tt()}),$n.scriptLoaded=!0}))},vo=function(){$n=gK()};return{load:mo,reinitialize:vo}},rY=sY(),aY=function(){return typeof window<"u"?window:global},SB=function(){var $n=aY();return $n&&$n.tinymce?$n.tinymce:null},iY={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function($n){return $n==="html"||$n==="text"}}},Nk=function(){return Nk=Object.assign||function($n){for(var Xo,mo=1,vo=arguments.length;mo<vo;mo++){Xo=arguments[mo];for(var ko in Xo)Object.prototype.hasOwnProperty.call(Xo,ko)&&($n[ko]=Xo[ko])}return $n},Nk.apply(this,arguments)},cY=function($n,Xo,mo,vo){return $n(vo||"div",{id:Xo,ref:mo})},lY=function($n,Xo,mo){return $n("textarea",{id:Xo,visibility:"hidden",ref:mo})},aq={selector:void 0,target:void 0},uY=iq({props:iY,setup:function($n,Xo){var mo=$n.init?Nk(Nk({},$n.init),aq):Nk({},aq),vo=DK($n),ko=vo.disabled,wn=vo.modelValue,no=vo.tagName,Tt=qh(null),Fn=null,To=$n.id||bK("tiny-vue"),ss=$n.init&&$n.init.inline||$n.inline,st=!!Xo.attrs["onUpdate:modelValue"],es=!0,Vn=$n.initialValue?$n.initialValue:"",kn="",zn=function(at){return st?function(){return wn!=null&&wn.value?wn.value:""}:function(){return at?Vn:kn}},Vt=function(){var at=zn(es),ue=Nk(Nk({},mo),{readonly:$n.disabled,target:Tt.value,plugins:nY(mo.plugins,$n.plugins),toolbar:$n.toolbar||mo.toolbar,inline:ss,license_key:$n.licenseKey,setup:function(ve){Fn=ve,ve.on("init",function(In){return eY(In,$n,Xo,ve,wn,at)}),typeof mo.setup=="function"&&mo.setup(ve)}});tY(Tt.value)&&(Tt.value.style.visibility=""),SB().init(ue),es=!1};PV(ko,function(at){var ue;Fn!==null&&(typeof((ue=Fn.mode)===null||ue===void 0?void 0:ue.set)=="function"?Fn.mode.set(at?"readonly":"design"):Fn.setMode(at?"readonly":"design"))}),PV(no,function(at){var ue;st||(kn=Fn.getContent()),(ue=SB())===null||ue===void 0||ue.remove(Fn),LV(function(){return Vt()})}),cq(function(){if(SB()!==null)Vt();else if(Tt.value&&Tt.value.ownerDocument){var at=$n.cloudChannel?$n.cloudChannel:"7",ue=$n.apiKey?$n.apiKey:"no-api-key",ve=oY($n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ue,"/tinymce/").concat(at,"/tinymce.min.js"):$n.tinymceScriptSrc;rY.load(Tt.value.ownerDocument,ve,Vt)}}),RK(function(){SB()!==null&&SB().remove(Fn)}),ss||(MK(function(){es||Vt()}),NK(function(){var at;st||(kn=Fn.getContent()),(at=SB())===null||at===void 0||at.remove(Fn)}));var Ue=function(at){var ue;kn=Fn.getContent(),(ue=SB())===null||ue===void 0||ue.remove(Fn),mo=Nk(Nk(Nk({},mo),at),aq),LV(function(){return Vt()})};return Xo.expose({rerender:Ue,getEditor:function(){return Fn}}),function(){return ss?cY(iK,To,Tt,$n.tagName):lY(iK,To,Tt)}}});tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=Object.getPrototypeOf,mo=(X,fe,Ze)=>{var St;return Ze(X,fe.prototype)?!0:((St=X.constructor)===null||St===void 0?void 0:St.name)===fe.name},vo=X=>{const fe=typeof X;return X===null?"null":fe==="object"&&Array.isArray(X)?"array":fe==="object"&&mo(X,String,(Ze,St)=>St.isPrototypeOf(Ze))?"string":fe},ko=X=>fe=>vo(fe)===X,wn=X=>fe=>typeof fe===X,no=X=>fe=>X===fe,Tt=(X,fe)=>To(X)&&mo(X,fe,(Ze,St)=>Xo(Ze)===St),Fn=ko("string"),To=ko("object"),ss=X=>Tt(X,Object),st=ko("array"),es=no(null),Vn=wn("boolean"),kn=X=>X==null,zn=X=>!kn(X),Vt=wn("function"),Ue=wn("number"),at=(X,fe)=>{if(st(X)){for(let Ze=0,St=X.length;Ze<St;++Ze)if(!fe(X[Ze]))return!1;return!0}return!1},ue=()=>{};class ve{constructor(fe,Ze){this.tag=fe,this.value=Ze}static some(fe){return new ve(!0,fe)}static none(){return ve.singletonNone}fold(fe,Ze){return this.tag?Ze(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?ve.some(fe(this.value)):ve.none()}bind(fe){return this.tag?fe(this.value):ve.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:ve.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return zn(fe)?ve.some(fe):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const In=Object.keys,qt=Object.hasOwnProperty,re=(X,fe)=>{const Ze=In(X);for(let St=0,Oo=Ze.length;St<Oo;St++){const Gn=Ze[St],jr=X[Gn];fe(jr,Gn)}},rn=X=>(fe,Ze)=>{X[Ze]=fe},oo=(X,fe,Ze,St)=>{re(X,(Oo,Gn)=>{(fe(Oo,Gn)?Ze:St)(Oo,Gn)})},qn=(X,fe)=>{const Ze={};return oo(X,fe,rn(Ze),ue),Ze},Qe=(X,fe)=>qt.call(X,fe),Be=(X,fe)=>Qe(X,fe)&&X[fe]!==void 0&&X[fe]!==null,z=Array.prototype.push,$t=X=>{const fe=[];for(let Ze=0,St=X.length;Ze<St;++Ze){if(!st(X[Ze]))throw new Error("Arr.flatten item "+Ze+" was not an array, input: "+X);z.apply(fe,X[Ze])}return fe},Kt=(X,fe)=>fe>=0&&fe<X.length?ve.some(X[fe]):ve.none(),B=X=>Kt(X,0),Jt=(X,fe)=>{for(let Ze=0;Ze<X.length;Ze++){const St=fe(X[Ze],Ze);if(St.isSome())return St}return ve.none()};typeof window<"u"||Function("return this;")();const Le=(X,fe,Ze)=>{if(Fn(Ze)||Vn(Ze)||Ue(Ze))X.setAttribute(fe,Ze+"");else throw console.error("Invalid call to Attribute.set. Key ",fe,":: Value ",Ze,":: Element ",X),new Error("Attribute value was not simple")},Qt=(X,fe,Ze)=>{Le(X.dom,fe,Ze)},mn=(X,fe)=>{X.dom.removeAttribute(fe)},Se=(X,fe)=>{const St=(fe||document).createElement("div");if(St.innerHTML=X,!St.hasChildNodes()||St.childNodes.length>1){const Oo="HTML does not have a single root node";throw console.error(Oo,X),new Error(Oo)}return tt(St.childNodes[0])},Oe=(X,fe)=>{const St=(fe||document).createElement(X);return tt(St)},ft=(X,fe)=>{const St=(fe||document).createTextNode(X);return tt(St)},tt=X=>{if(X==null)throw new Error("Node cannot be null or undefined");return{dom:X}},$e={fromHtml:Se,fromTag:Oe,fromText:ft,fromDom:tt,fromPoint:(X,fe,Ze)=>ve.from(X.dom.elementFromPoint(fe,Ze)).map(tt)};var pt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Y=tinymce.util.Tools.resolve("tinymce.util.URI");const Jo=X=>X.length>0,Et=X=>fe=>fe.options.get(X),Mt=X=>{const fe=X.options.register;fe("image_dimensions",{processor:"boolean",default:!0}),fe("image_advtab",{processor:"boolean",default:!1}),fe("image_uploadtab",{processor:"boolean",default:!0}),fe("image_prepend_url",{processor:"string",default:""}),fe("image_class_list",{processor:"object[]"}),fe("image_description",{processor:"boolean",default:!0}),fe("image_title",{processor:"boolean",default:!1}),fe("image_caption",{processor:"boolean",default:!1}),fe("image_list",{processor:Ze=>{const St=Ze===!1||Fn(Ze)||at(Ze,To)||Vt(Ze);return St?{value:Ze,valid:St}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Pn=Et("image_dimensions"),Nt=Et("image_advtab"),ce=Et("image_uploadtab"),De=Et("image_prepend_url"),Ne=Et("image_class_list"),oe=Et("image_description"),ct=Et("image_title"),At=Et("image_caption"),dt=Et("image_list"),An=Et("a11y_advanced_options"),it=Et("automatic_uploads"),Dt=X=>Jo(X.options.get("images_upload_url")),hn=X=>zn(X.options.get("images_upload_handler")),Hn=(X,fe)=>Math.max(parseInt(X,10),parseInt(fe,10)),ut=X=>new Promise(fe=>{const Ze=document.createElement("img"),St=Gn=>{Ze.onload=Ze.onerror=null,Ze.parentNode&&Ze.parentNode.removeChild(Ze),fe(Gn)};Ze.onload=()=>{const Gn=Hn(Ze.width,Ze.clientWidth),jr=Hn(Ze.height,Ze.clientHeight),vc={width:Gn,height:jr};St(Promise.resolve(vc))},Ze.onerror=()=>{St(Promise.reject(`Failed to get image dimensions for: ${X}`))};const Oo=Ze.style;Oo.visibility="hidden",Oo.position="fixed",Oo.bottom=Oo.left="0px",Oo.width=Oo.height="auto",document.body.appendChild(Ze),Ze.src=X}),ot=X=>(X&&(X=X.replace(/px$/,"")),X),rt=X=>(X.length>0&&/^[0-9]+$/.test(X)&&(X+="px"),X),nn=X=>{if(X.margin){const fe=String(X.margin).split(" ");switch(fe.length){case 1:X["margin-top"]=X["margin-top"]||fe[0],X["margin-right"]=X["margin-right"]||fe[0],X["margin-bottom"]=X["margin-bottom"]||fe[0],X["margin-left"]=X["margin-left"]||fe[0];break;case 2:X["margin-top"]=X["margin-top"]||fe[0],X["margin-right"]=X["margin-right"]||fe[1],X["margin-bottom"]=X["margin-bottom"]||fe[0],X["margin-left"]=X["margin-left"]||fe[1];break;case 3:X["margin-top"]=X["margin-top"]||fe[0],X["margin-right"]=X["margin-right"]||fe[1],X["margin-bottom"]=X["margin-bottom"]||fe[2],X["margin-left"]=X["margin-left"]||fe[1];break;case 4:X["margin-top"]=X["margin-top"]||fe[0],X["margin-right"]=X["margin-right"]||fe[1],X["margin-bottom"]=X["margin-bottom"]||fe[2],X["margin-left"]=X["margin-left"]||fe[3]}delete X.margin}return X},Zo=(X,fe)=>{const Ze=dt(X);Fn(Ze)?fetch(Ze).then(St=>{St.ok&&St.json().then(fe)}):Vt(Ze)?Ze(fe):fe(Ze)},Co=(X,fe,Ze)=>{const St=()=>{Ze.onload=Ze.onerror=null,X.selection&&(X.selection.select(Ze),X.nodeChanged())};Ze.onload=()=>{!fe.width&&!fe.height&&Pn(X)&&X.dom.setAttribs(Ze,{width:String(Ze.clientWidth),height:String(Ze.clientHeight)}),St()},Ze.onerror=St},Mn=X=>new Promise((fe,Ze)=>{const St=new FileReader;St.onload=()=>{fe(St.result)},St.onerror=()=>{var Oo;Ze((Oo=St.error)===null||Oo===void 0?void 0:Oo.message)},St.readAsDataURL(X)}),No=X=>X.nodeName==="IMG"&&(X.hasAttribute("data-mce-object")||X.hasAttribute("data-mce-placeholder")),Gt=(X,fe)=>{const Ze=X.options.get;return Y.isDomSafe(fe,"img",{allow_html_data_urls:Ze("allow_html_data_urls"),allow_script_urls:Ze("allow_script_urls"),allow_svg_data_urls:Ze("allow_svg_data_urls")})},yo=pt.DOM,gr=X=>X.style.marginLeft&&X.style.marginRight&&X.style.marginLeft===X.style.marginRight?ot(X.style.marginLeft):"",Us=X=>X.style.marginTop&&X.style.marginBottom&&X.style.marginTop===X.style.marginBottom?ot(X.style.marginTop):"",ma=X=>X.style.borderWidth?ot(X.style.borderWidth):"",ns=(X,fe)=>{var Ze;return X.hasAttribute(fe)&&(Ze=X.getAttribute(fe))!==null&&Ze!==void 0?Ze:""},Pa=X=>X.parentNode!==null&&X.parentNode.nodeName==="FIGURE",vn=(X,fe,Ze)=>{Ze===""||Ze===null?X.removeAttribute(fe):X.setAttribute(fe,Ze)},Ls=X=>{const fe=yo.create("figure",{class:"image"});yo.insertAfter(fe,X),fe.appendChild(X),fe.appendChild(yo.create("figcaption",{contentEditable:"true"},"Caption")),fe.contentEditable="false"},Ba=X=>{const fe=X.parentNode;zn(fe)&&(yo.insertAfter(X,fe),yo.remove(fe))},Dr=X=>{Pa(X)?Ba(X):Ls(X)},Gi=(X,fe)=>{const Ze=X.getAttribute("style"),St=fe(Ze!==null?Ze:"");St.length>0?(X.setAttribute("style",St),X.setAttribute("data-mce-style",St)):X.removeAttribute("style")},hi=(X,fe)=>(Ze,St,Oo)=>{const Gn=Ze.style;Gn[St]?(Gn[St]=rt(Oo),Gi(Ze,fe)):vn(Ze,St,Oo)},Er=(X,fe)=>X.style[fe]?ot(X.style[fe]):ns(X,fe),bi=(X,fe)=>{const Ze=rt(fe);X.style.marginLeft=Ze,X.style.marginRight=Ze},Bi=(X,fe)=>{const Ze=rt(fe);X.style.marginTop=Ze,X.style.marginBottom=Ze},kr=(X,fe)=>{const Ze=rt(fe);X.style.borderWidth=Ze},Lo=(X,fe)=>{X.style.borderStyle=fe},Aa=X=>{var fe;return(fe=X.style.borderStyle)!==null&&fe!==void 0?fe:""},vi=X=>zn(X)&&X.nodeName==="FIGURE",nu=X=>X.nodeName==="IMG",yt=X=>yo.getAttrib(X,"alt").length===0&&yo.getAttrib(X,"role")==="presentation",Xr=X=>yt(X)?"":ns(X,"alt"),Oa=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ia=(X,fe)=>{var Ze;const St=document.createElement("img");return vn(St,"style",fe.style),(gr(St)||fe.hspace!=="")&&bi(St,fe.hspace),(Us(St)||fe.vspace!=="")&&Bi(St,fe.vspace),(ma(St)||fe.border!=="")&&kr(St,fe.border),(Aa(St)||fe.borderStyle!=="")&&Lo(St,fe.borderStyle),X((Ze=St.getAttribute("style"))!==null&&Ze!==void 0?Ze:"")},Mc=(X,fe)=>{const Ze=document.createElement("img");if(Ht(X,{...fe,caption:!1},Ze),Ve(Ze,fe.alt,fe.isDecorative),fe.caption){const St=yo.create("figure",{class:"image"});return St.appendChild(Ze),St.appendChild(yo.create("figcaption",{contentEditable:"true"},"Caption")),St.contentEditable="false",St}else return Ze},ac=(X,fe)=>({src:ns(fe,"src"),alt:Xr(fe),title:ns(fe,"title"),width:Er(fe,"width"),height:Er(fe,"height"),class:ns(fe,"class"),style:X(ns(fe,"style")),caption:Pa(fe),hspace:gr(fe),vspace:Us(fe),border:ma(fe),borderStyle:Aa(fe),isDecorative:yt(fe)}),Ga=(X,fe,Ze,St,Oo)=>{Ze[St]!==fe[St]&&Oo(X,St,String(Ze[St]))},Ve=(X,fe,Ze)=>{if(Ze){yo.setAttrib(X,"role","presentation");const St=$e.fromDom(X);Qt(St,"alt","")}else{if(es(fe)){const St=$e.fromDom(X);mn(St,"alt")}else{const St=$e.fromDom(X);Qt(St,"alt",fe)}yo.getAttrib(X,"role")==="presentation"&&yo.setAttrib(X,"role","")}},Pe=(X,fe,Ze)=>{(Ze.alt!==fe.alt||Ze.isDecorative!==fe.isDecorative)&&Ve(X,Ze.alt,Ze.isDecorative)},Rt=(X,fe)=>(Ze,St,Oo)=>{X(Ze,Oo),Gi(Ze,fe)},Ht=(X,fe,Ze)=>{const St=ac(X,Ze);Ga(Ze,St,fe,"caption",(Oo,Gn,jr)=>Dr(Oo)),Ga(Ze,St,fe,"src",vn),Ga(Ze,St,fe,"title",vn),Ga(Ze,St,fe,"width",hi("width",X)),Ga(Ze,St,fe,"height",hi("height",X)),Ga(Ze,St,fe,"class",vn),Ga(Ze,St,fe,"style",Rt((Oo,Gn)=>vn(Oo,"style",Gn),X)),Ga(Ze,St,fe,"hspace",Rt(bi,X)),Ga(Ze,St,fe,"vspace",Rt(Bi,X)),Ga(Ze,St,fe,"border",Rt(kr,X)),Ga(Ze,St,fe,"borderStyle",Rt(Lo,X)),Pe(Ze,St,fe)},Qo=(X,fe)=>{const Ze=X.dom.styles.parse(fe),St=nn(Ze),Oo=X.dom.styles.parse(X.dom.styles.serialize(St));return X.dom.styles.serialize(Oo)},vs=X=>{const fe=X.selection.getNode(),Ze=X.dom.getParent(fe,"figure.image");return Ze?X.dom.select("img",Ze)[0]:fe&&(fe.nodeName!=="IMG"||No(fe))?null:fe},Fs=(X,fe)=>{var Ze;const St=X.dom,Oo=qn(X.schema.getTextBlockElements(),(jr,vc)=>!X.schema.isValidChild(vc,"figure")),Gn=St.getParent(fe.parentNode,jr=>Be(Oo,jr.nodeName),X.getBody());return Gn&&(Ze=St.split(Gn,fe))!==null&&Ze!==void 0?Ze:fe},ka=X=>{const fe=vs(X);return fe?ac(Ze=>Qo(X,Ze),fe):Oa()},fn=(X,fe)=>{const Ze=Mc(Oo=>Qo(X,Oo),fe);X.dom.setAttrib(Ze,"data-mce-id","__mcenew"),X.focus(),X.selection.setContent(Ze.outerHTML);const St=X.dom.select('*[data-mce-id="__mcenew"]')[0];if(X.dom.setAttrib(St,"data-mce-id",null),vi(St)){const Oo=Fs(X,St);X.selection.select(Oo)}else X.selection.select(St)},xt=(X,fe)=>{X.dom.setAttrib(fe,"src",fe.getAttribute("src"))},We=(X,fe)=>{if(fe){const Ze=X.dom.is(fe.parentNode,"figure.image")?fe.parentNode:fe;X.dom.remove(Ze),X.focus(),X.nodeChanged(),X.dom.isEmpty(X.getBody())&&(X.setContent(""),X.selection.setCursorLocation())}},Ge=(X,fe)=>{const Ze=vs(X);if(Ze)if(Ht(St=>Qo(X,St),fe,Ze),xt(X,Ze),vi(Ze.parentNode)){const St=Ze.parentNode;Fs(X,St),X.selection.select(Ze.parentNode)}else X.selection.select(Ze),Co(X,fe,Ze)},pn=(X,fe)=>{const Ze=fe.src;return{...fe,src:Gt(X,Ze)?Ze:""}},Tn=(X,fe)=>{const Ze=vs(X);if(Ze){const Oo={...ac(jr=>Qo(X,jr),Ze),...fe},Gn=pn(X,Oo);Oo.src?Ge(X,Gn):We(X,Ze)}else fe.src&&fn(X,{...Oa(),...fe})},Eo=(X=>(...fe)=>{if(fe.length===0)throw new Error("Can't merge zero objects");const Ze={};for(let St=0;St<fe.length;St++){const Oo=fe[St];for(const Gn in Oo)Qe(Oo,Gn)&&(Ze[Gn]=X(Ze[Gn],Oo[Gn]))}return Ze})((X,fe)=>ss(X)&&ss(fe)?Eo(X,fe):fe);var Bo=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Vo=tinymce.util.Tools.resolve("tinymce.util.Tools");const cs=X=>Fn(X.value)?X.value:"",hr=X=>Fn(X.text)?X.text:Fn(X.title)?X.title:"",Va=(X,fe)=>{const Ze=[];return Vo.each(X,St=>{const Oo=hr(St);if(St.menu!==void 0){const Gn=Va(St.menu,fe);Ze.push({text:Oo,items:Gn})}else{const Gn=fe(St);Ze.push({text:Oo,value:Gn})}}),Ze},Ur=(X=cs)=>fe=>fe?ve.from(fe).map(Ze=>Va(Ze,X)):ve.none(),Al=X=>Ur(cs)(X),La=X=>Qe(X,"items"),Bs=(X,fe)=>Jt(X,Ze=>La(Ze)?Bs(Ze.items,fe):Ze.value===fe?ve.some(Ze):ve.none()),ar={sanitizer:Ur,sanitize:Al,findEntry:(X,fe)=>X.bind(Ze=>Bs(Ze,fe))},Ti={makeTab:X=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Wc=X=>{const fe=ar.sanitizer(Ul=>X.convertURL(Ul.value||Ul.url||"","src")),Ze=new Promise(Ul=>{Zo(X,uc=>{Ul(fe(uc).map(Mm=>$t([[{text:"None",value:""}],Mm])))})}),St=ar.sanitize(Ne(X)),Oo=Nt(X),Gn=ce(X),jr=Dt(X),vc=hn(X),bn=ka(X),fl=oe(X),ba=ct(X),$d=Pn(X),Ii=At(X),cr=An(X),ou=it(X),Nc=ve.some(De(X)).filter(Ul=>Fn(Ul)&&Ul.length>0);return Ze.then(Ul=>({image:bn,imageList:Ul,classList:St,hasAdvTab:Oo,hasUploadTab:Gn,hasUploadUrl:jr,hasUploadHandler:vc,hasDescription:fl,hasImageTitle:ba,hasDimensions:$d,hasImageCaption:Ii,prependURL:Nc,hasAccessibilityOptions:cr,automaticUploads:ou}))},Ta=X=>{const fe={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},Ze=X.imageList.map(ba=>({name:"images",type:"listbox",label:"Image list",items:ba})),St={name:"alt",type:"input",label:"Alternative description",enabled:!(X.hasAccessibilityOptions&&X.image.isDecorative)},Oo={name:"title",type:"input",label:"Image title"},Gn={name:"dimensions",type:"sizeinput"},jr={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},vc=X.classList.map(ba=>({name:"classes",type:"listbox",label:"Class",items:ba})),bn={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},fl=ba=>ba?{type:"grid",columns:2}:{type:"panel"};return $t([[fe],Ze.toArray(),X.hasAccessibilityOptions&&X.hasDescription?[jr]:[],X.hasDescription?[St]:[],X.hasImageTitle?[Oo]:[],X.hasDimensions?[Gn]:[],[{...fl(X.classList.isSome()&&X.hasImageCaption),items:$t([vc.toArray(),X.hasImageCaption?[bn]:[]])}]])},yu={makeTab:X=>({title:"General",name:"general",items:Ta(X)}),makeItems:Ta},Es={makeTab:X=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},xu=X=>({prevImage:ar.findEntry(X.imageList,X.image.src),prevAlt:X.image.alt,open:!0}),Xs=X=>({src:{value:X.src,meta:{}},images:X.src,alt:X.alt,title:X.title,dimensions:{width:X.width,height:X.height},classes:X.class,caption:X.caption,style:X.style,vspace:X.vspace,border:X.border,hspace:X.hspace,borderstyle:X.borderStyle,fileinput:[],isDecorative:X.isDecorative}),hd=(X,fe)=>({src:X.src.value,alt:(X.alt===null||X.alt.length===0)&&fe?null:X.alt,title:X.title,width:X.dimensions.width,height:X.dimensions.height,class:X.classes,style:X.style,caption:X.caption,hspace:X.hspace,vspace:X.vspace,border:X.border,borderStyle:X.borderstyle,isDecorative:X.isDecorative}),Vl=(X,fe)=>/^(?:[a-zA-Z]+:)?\/\//.test(fe)?ve.none():X.prependURL.bind(Ze=>fe.substring(0,Ze.length)!==Ze?ve.some(Ze+fe):ve.none()),fs=(X,fe)=>{const Ze=fe.getData();Vl(X,Ze.src.value).each(St=>{fe.setData({src:{value:St,meta:Ze.src.meta}})})},li=(X,fe,Ze)=>{X.hasDescription&&Fn(Ze.alt)&&(fe.alt=Ze.alt),X.hasAccessibilityOptions&&(fe.isDecorative=Ze.isDecorative||fe.isDecorative||!1),X.hasImageTitle&&Fn(Ze.title)&&(fe.title=Ze.title),X.hasDimensions&&(Fn(Ze.width)&&(fe.dimensions.width=Ze.width),Fn(Ze.height)&&(fe.dimensions.height=Ze.height)),Fn(Ze.class)&&ar.findEntry(X.classList,Ze.class).each(St=>{fe.classes=St.value}),X.hasImageCaption&&Vn(Ze.caption)&&(fe.caption=Ze.caption),X.hasAdvTab&&(Fn(Ze.style)&&(fe.style=Ze.style),Fn(Ze.vspace)&&(fe.vspace=Ze.vspace),Fn(Ze.border)&&(fe.border=Ze.border),Fn(Ze.hspace)&&(fe.hspace=Ze.hspace),Fn(Ze.borderstyle)&&(fe.borderstyle=Ze.borderstyle))},Ld=(X,fe)=>{const Ze=fe.getData(),St=Ze.src.meta;if(St!==void 0){const Oo=Eo({},Ze);li(X,Oo,St),fe.setData(Oo)}},Wa=(X,fe,Ze,St)=>{const Oo=St.getData(),Gn=Oo.src.value,jr=Oo.src.meta||{};!jr.width&&!jr.height&&fe.hasDimensions&&(Jo(Gn)?X.imageSize(Gn).then(vc=>{Ze.open&&St.setData({dimensions:vc})}).catch(vc=>console.error(vc)):St.setData({dimensions:{width:"",height:""}}))},Dm=(X,fe,Ze)=>{const St=Ze.getData(),Oo=ar.findEntry(X.imageList,St.src.value);fe.prevImage=Oo,Ze.setData({images:Oo.map(Gn=>Gn.value).getOr("")})},ui=(X,fe,Ze,St)=>{fs(fe,St),Ld(fe,St),Wa(X,fe,Ze,St),Dm(fe,Ze,St)},kg=(X,fe,Ze,St)=>{const Oo=St.getData(),Gn=ar.findEntry(fe.imageList,Oo.images);Gn.each(jr=>{Oo.alt===""||Ze.prevImage.map(bn=>bn.text===Oo.alt).getOr(!1)?jr.value===""?St.setData({src:jr,alt:Ze.prevAlt}):St.setData({src:jr,alt:jr.text}):St.setData({src:jr})}),Ze.prevImage=Gn,ui(X,fe,Ze,St)},qi=(X,fe,Ze,St)=>{const Oo=St.getData();St.block("Uploading image"),B(Oo.fileinput).fold(()=>{St.unblock()},Gn=>{const jr=URL.createObjectURL(Gn),vc=()=>{St.unblock(),URL.revokeObjectURL(jr)},bn=fl=>{St.setData({src:{value:fl,meta:{}}}),St.showTab("general"),ui(X,fe,Ze,St),St.focus("src")};Mn(Gn).then(fl=>{const ba=X.createBlobCache(Gn,jr,fl);fe.automaticUploads?X.uploadImage(ba).then($d=>{bn($d.url),vc()}).catch($d=>{vc(),X.alertErr($d,()=>{St.focus("fileinput")})}):(X.addToBlobCache(ba),bn(ba.blobUri()),St.unblock())})})},or=(X,fe,Ze)=>(St,Oo)=>{Oo.name==="src"?ui(X,fe,Ze,St):Oo.name==="images"?kg(X,fe,Ze,St):Oo.name==="alt"?Ze.prevAlt=St.getData().alt:Oo.name==="fileinput"?qi(X,fe,Ze,St):Oo.name==="isDecorative"&&St.setEnabled("alt",!St.getData().isDecorative)},wu=X=>()=>{X.open=!1},Rm=X=>X.hasAdvTab||X.hasUploadUrl||X.hasUploadHandler?{type:"tabpanel",tabs:$t([[yu.makeTab(X)],X.hasAdvTab?[Ti.makeTab(X)]:[],X.hasUploadTab&&(X.hasUploadUrl||X.hasUploadHandler)?[Es.makeTab(X)]:[]])}:{type:"panel",items:yu.makeItems(X)},Ku=(X,fe,Ze)=>St=>{const Oo=Eo(Xs(fe.image),St.getData()),Gn={...Oo,style:Ia(Ze.normalizeCss,hd(Oo,!1))};X.execCommand("mceUpdateImage",!1,hd(Gn,fe.hasAccessibilityOptions)),X.editorUpload.uploadImagesAuto(),St.close()},oi=X=>fe=>Gt(X,fe)?ut(X.documentBaseURI.toAbsolute(fe)).then(Ze=>({width:String(Ze.width),height:String(Ze.height)})):Promise.resolve({width:"",height:""}),qa=X=>(fe,Ze,St)=>{var Oo;return X.editorUpload.blobCache.create({blob:fe,blobUri:Ze,name:(Oo=fe.name)===null||Oo===void 0?void 0:Oo.replace(/\.[^\.]+$/,""),filename:fe.name,base64:St.split(",")[1]})},Ki=X=>fe=>{X.editorUpload.blobCache.add(fe)},Wr=X=>(fe,Ze)=>{X.windowManager.alert(fe,Ze)},bd=X=>fe=>Qo(X,fe),ol=X=>fe=>X.dom.parseStyle(fe),le=X=>(fe,Ze)=>X.dom.serializeStyle(fe,Ze),He=X=>fe=>Bo(X).upload([fe],!1).then(Ze=>{var St;return Ze.length===0?Promise.reject("Failed to upload image"):Ze[0].status===!1?Promise.reject((St=Ze[0].error)===null||St===void 0?void 0:St.message):Ze[0]}),Je=X=>{const fe={imageSize:oi(X),addToBlobCache:Ki(X),createBlobCache:qa(X),alertErr:Wr(X),normalizeCss:bd(X),parseStyle:ol(X),serializeStyle:le(X),uploadImage:He(X)};return{open:()=>{Wc(X).then(St=>{const Oo=xu(St);return{title:"Insert/Edit Image",size:"normal",body:Rm(St),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Xs(St.image),onSubmit:Ku(X,St,fe),onChange:or(fe,St,Oo),onClose:wu(Oo)}}).then(X.windowManager.open)}}},Pt=X=>{X.addCommand("mceImage",Je(X).open),X.addCommand("mceUpdateImage",(fe,Ze)=>{X.undoManager.transact(()=>Tn(X,Ze))})},Nn=X=>{const fe=X.attr("class");return zn(fe)&&/\bimage\b/.test(fe)},ho=X=>fe=>{let Ze=fe.length;const St=Oo=>{Oo.attr("contenteditable",X?"true":null)};for(;Ze--;){const Oo=fe[Ze];Nn(Oo)&&(Oo.attr("contenteditable",X?"false":null),Vo.each(Oo.getAll("figcaption"),St))}},Kn=X=>{X.on("PreInit",()=>{X.parser.addNodeFilter("figure",ho(!0)),X.serializer.addNodeFilter("figure",ho(!1))})},ms=X=>fe=>{const Ze=()=>{fe.setEnabled(X.selection.isEditable())};return X.on("NodeChange",Ze),Ze(),()=>{X.off("NodeChange",Ze)}},Ds=X=>{X.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Je(X).open,onSetup:fe=>{fe.setActive(zn(vs(X)));const Ze=X.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",fe.setActive).unbind,St=ms(X)(fe);return()=>{Ze(),St()}}}),X.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Je(X).open,onSetup:ms(X)}),X.ui.registry.addContextMenu("image",{update:fe=>X.selection.isEditable()&&(vi(fe)||nu(fe)&&!No(fe))?["image"]:[]})};var br=()=>{$n.add("image",X=>{Mt(X),Kn(X),Ds(X),Pt(X)})};br()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(le,He,Je)=>{var Pt;return Je(le,He.prototype)?!0:((Pt=le.constructor)===null||Pt===void 0?void 0:Pt.name)===He.name},mo=le=>{const He=typeof le;return le===null?"null":He==="object"&&Array.isArray(le)?"array":He==="object"&&Xo(le,String,(Je,Pt)=>Pt.isPrototypeOf(Je))?"string":He},vo=le=>He=>mo(He)===le,ko=le=>He=>typeof He===le,wn=le=>He=>le===He,no=vo("string"),Tt=vo("object"),Fn=vo("array"),To=wn(null),ss=ko("boolean"),st=le=>le==null,es=le=>!st(le),Vn=ko("function"),kn=(le,He)=>{if(Fn(le)){for(let Je=0,Pt=le.length;Je<Pt;++Je)if(!He(le[Je]))return!1;return!0}return!1},zn=()=>{},Vt=le=>()=>le,Ue=(le,He)=>le===He;class at{constructor(He,Je){this.tag=He,this.value=Je}static some(He){return new at(!0,He)}static none(){return at.singletonNone}fold(He,Je){return this.tag?Je(this.value):He()}isSome(){return this.tag}isNone(){return!this.tag}map(He){return this.tag?at.some(He(this.value)):at.none()}bind(He){return this.tag?He(this.value):at.none()}exists(He){return this.tag&&He(this.value)}forall(He){return!this.tag||He(this.value)}filter(He){return!this.tag||He(this.value)?this:at.none()}getOr(He){return this.tag?this.value:He}or(He){return this.tag?this:He}getOrThunk(He){return this.tag?this.value:He()}orThunk(He){return this.tag?this:He()}getOrDie(He){if(this.tag)return this.value;throw new Error(He??"Called getOrDie on None")}static from(He){return es(He)?at.some(He):at.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(He){this.tag&&He(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}at.singletonNone=new at(!1);const ue=Array.prototype.indexOf,ve=Array.prototype.push,In=(le,He)=>ue.call(le,He),qt=(le,He)=>In(le,He)>-1,re=(le,He)=>{const Je=le.length,Pt=new Array(Je);for(let Nn=0;Nn<Je;Nn++){const ho=le[Nn];Pt[Nn]=He(ho,Nn)}return Pt},rn=(le,He)=>{for(let Je=0,Pt=le.length;Je<Pt;Je++){const Nn=le[Je];He(Nn,Je)}},oo=(le,He,Je)=>(rn(le,(Pt,Nn)=>{Je=He(Je,Pt,Nn)}),Je),qn=le=>{const He=[];for(let Je=0,Pt=le.length;Je<Pt;++Je){if(!Fn(le[Je]))throw new Error("Arr.flatten item "+Je+" was not an array, input: "+le);ve.apply(He,le[Je])}return He},Qe=(le,He)=>qn(re(le,He)),Be=(le,He)=>{for(let Je=0;Je<le.length;Je++){const Pt=He(le[Je],Je);if(Pt.isSome())return Pt}return at.none()},z=(le,He,Je=Ue)=>le.exists(Pt=>Je(Pt,He)),$t=le=>{const He=[],Je=Pt=>{He.push(Pt)};for(let Pt=0;Pt<le.length;Pt++)le[Pt].each(Je);return He},Kt=(le,He)=>le?at.some(He):at.none(),B=le=>He=>He.options.get(le),Jt=le=>{const He=le.options.register;He("link_assume_external_targets",{processor:Je=>{const Pt=no(Je)||ss(Je);return Pt?Je===!0?{value:1,valid:Pt}:Je==="http"||Je==="https"?{value:Je,valid:Pt}:{value:0,valid:Pt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),He("link_context_toolbar",{processor:"boolean",default:!1}),He("link_list",{processor:Je=>no(Je)||Vn(Je)||kn(Je,Tt)}),He("link_default_target",{processor:"string"}),He("link_default_protocol",{processor:"string",default:"https"}),He("link_target_list",{processor:Je=>ss(Je)||kn(Je,Tt),default:!0}),He("link_rel_list",{processor:"object[]",default:[]}),He("link_class_list",{processor:"object[]",default:[]}),He("link_title",{processor:"boolean",default:!0}),He("allow_unsafe_link_target",{processor:"boolean",default:!1}),He("link_quicklink",{processor:"boolean",default:!1})},Le=B("link_assume_external_targets"),Qt=B("link_context_toolbar"),mn=B("link_list"),Se=B("link_default_target"),Oe=B("link_default_protocol"),ft=B("link_target_list"),tt=B("link_rel_list"),Bt=B("link_class_list"),$e=B("link_title"),pt=B("allow_unsafe_link_target"),Y=B("link_quicklink"),Jo=Object.keys,Et=Object.hasOwnProperty,Mt=(le,He)=>{const Je=Jo(le);for(let Pt=0,Nn=Je.length;Pt<Nn;Pt++){const ho=Je[Pt],Kn=le[ho];He(Kn,ho)}},Pn=le=>(He,Je)=>{le[Je]=He},Nt=(le,He,Je,Pt)=>{Mt(le,(Nn,ho)=>{(He(Nn,ho)?Je:Pt)(Nn,ho)})},ce=(le,He)=>{const Je={};return Nt(le,He,Pn(Je),zn),Je},De=(le,He)=>Et.call(le,He),Ne=(le,He)=>De(le,He)&&le[He]!==void 0&&le[He]!==null;var oe=tinymce.util.Tools.resolve("tinymce.util.URI"),ct=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),At=tinymce.util.Tools.resolve("tinymce.util.Tools");const dt=le=>es(le)&&le.nodeName.toLowerCase()==="a",An=le=>dt(le)&&!!hn(le),it=(le,He)=>{if(le.collapsed)return[];{const Je=le.cloneContents(),Pt=Je.firstChild,Nn=new ct(Pt,Je),ho=[];let Kn=Pt;do He(Kn)&&ho.push(Kn);while(Kn=Nn.next());return ho}},Dt=le=>/^\w+:/i.test(le),hn=le=>{var He,Je;return(Je=(He=le.getAttribute("data-mce-href"))!==null&&He!==void 0?He:le.getAttribute("href"))!==null&&Je!==void 0?Je:""},Hn=(le,He)=>{const Je=["noopener"],Pt=le?le.split(/\s+/):[],Nn=Ds=>At.trim(Ds.sort().join(" ")),ho=Ds=>(Ds=Kn(Ds),Ds.length>0?Ds.concat(Je):Je),Kn=Ds=>Ds.filter(br=>At.inArray(Je,br)===-1),ms=He?ho(Pt):Kn(Pt);return ms.length>0?Nn(ms):""},ut=le=>le.replace(/\uFEFF/g,""),ot=(le,He)=>(He=He||Zo(le.selection.getRng())[0]||le.selection.getNode(),yo(He)?at.from(le.dom.select("a[href]",He)[0]):at.from(le.dom.getParent(He,"a[href]"))),rt=(le,He)=>ot(le,He).isSome(),nn=(le,He)=>{const Je=He.fold(()=>le.getContent({format:"text"}),Pt=>Pt.innerText||Pt.textContent||"");return ut(Je)},Zo=le=>it(le,An),Co=le=>At.grep(le,An),Mn=le=>Co(le).length>0,No=le=>Zo(le).length>0,Gt=le=>{const He=le.schema.getTextInlineElements(),Je=ho=>ho.nodeType===1&&!dt(ho)&&!De(He,ho.nodeName.toLowerCase());if(ot(le).exists(ho=>ho.hasAttribute("data-mce-block")))return!1;const Nn=le.selection.getRng();return Nn.collapsed?!0:it(Nn,Je).length===0},yo=le=>es(le)&&le.nodeName==="FIGURE"&&/\bimage\b/i.test(le.className),gr=le=>oo(["title","rel","class","target"],(Je,Pt)=>(le[Pt].each(Nn=>{Je[Pt]=Nn.length>0?Nn:null}),Je),{href:le.href}),Us=(le,He)=>(He==="http"||He==="https")&&!Dt(le)?He+"://"+le:le,ma=(le,He)=>{const Je={...He};if(tt(le).length===0&&!pt(le)){const Pt=Hn(Je.rel,Je.target==="_blank");Je.rel=Pt||null}return at.from(Je.target).isNone()&&ft(le)===!1&&(Je.target=Se(le)),Je.href=Us(Je.href,Le(le)),Je},ns=(le,He,Je,Pt)=>{Je.each(Nn=>{De(He,"innerText")?He.innerText=Nn:He.textContent=Nn}),le.dom.setAttribs(He,Pt),le.selection.select(He)},Pa=(le,He,Je,Pt)=>{const Nn=le.dom;yo(He)?Bi(Nn,He,Pt):Je.fold(()=>{le.execCommand("mceInsertLink",!1,Pt)},ho=>{le.insertContent(Nn.createHTML("a",Pt,Nn.encode(ho)))})},vn=(le,He,Je)=>{const Pt=le.selection.getNode(),Nn=ot(le,Pt),ho=ma(le,gr(Je));le.undoManager.transact(()=>{Je.href===He.href&&He.attach(),Nn.fold(()=>{Pa(le,Pt,Je.text,ho)},Kn=>{le.focus(),ns(le,Kn,Je.text,ho)})})},Ls=le=>{const He=le.dom,Je=le.selection,Pt=Je.getBookmark(),Nn=Je.getRng().cloneRange(),ho=He.getParent(Nn.startContainer,"a[href]",le.getBody()),Kn=He.getParent(Nn.endContainer,"a[href]",le.getBody());ho&&Nn.setStartBefore(ho),Kn&&Nn.setEndAfter(Kn),Je.setRng(Nn),le.execCommand("unlink"),Je.moveToBookmark(Pt)},Ba=le=>{le.undoManager.transact(()=>{const He=le.selection.getNode();yo(He)?bi(le,He):Ls(le),le.focus()})},Dr=le=>{const{class:He,href:Je,rel:Pt,target:Nn,text:ho,title:Kn}=le;return ce({class:He.getOrNull(),href:Je,rel:Pt.getOrNull(),target:Nn.getOrNull(),text:ho.getOrNull(),title:Kn.getOrNull()},(ms,Ds)=>To(ms)===!1)},Gi=(le,He)=>{const Je=le.options.get,Pt={allow_html_data_urls:Je("allow_html_data_urls"),allow_script_urls:Je("allow_script_urls"),allow_svg_data_urls:Je("allow_svg_data_urls")},Nn=He.href;return{...He,href:oe.isDomSafe(Nn,"a",Pt)?Nn:""}},hi=(le,He,Je)=>{const Pt=Gi(le,Je);le.hasPlugin("rtc",!0)?le.execCommand("createlink",!1,Dr(Pt)):vn(le,He,Pt)},Er=le=>{le.hasPlugin("rtc",!0)?le.execCommand("unlink"):Ba(le)},bi=(le,He)=>{var Je;const Pt=le.dom.select("img",He)[0];if(Pt){const Nn=le.dom.getParents(Pt,"a[href]",He)[0];Nn&&((Je=Nn.parentNode)===null||Je===void 0||Je.insertBefore(Pt,Nn),le.dom.remove(Nn))}},Bi=(le,He,Je)=>{var Pt;const Nn=le.select("img",He)[0];if(Nn){const ho=le.create("a",Je);(Pt=Nn.parentNode)===null||Pt===void 0||Pt.insertBefore(ho,Nn),ho.appendChild(Nn)}},kr=le=>no(le.value)?le.value:"",Lo=le=>no(le.text)?le.text:no(le.title)?le.title:"",Aa=(le,He)=>{const Je=[];return At.each(le,Pt=>{const Nn=Lo(Pt);if(Pt.menu!==void 0){const ho=Aa(Pt.menu,He);Je.push({text:Nn,items:ho})}else{const ho=He(Pt);Je.push({text:Nn,value:ho})}}),Je},vi=(le=kr)=>He=>at.from(He).map(Je=>Aa(Je,le)),Xr={sanitize:le=>vi(kr)(le),sanitizeWith:vi,createUi:(le,He)=>Je=>({name:le,type:"listbox",label:He,items:Je}),getValue:kr},Oa=le=>Ne(le,"items"),Ia=(le,He)=>Be(He,Je=>Oa(Je)?Ia(le,Je.items):Kt(Je.value===le,Je)),Mc=(le,He,Je,Pt)=>{const Nn=Pt[He],ho=le.length>0;return Nn!==void 0?Ia(Nn,Je).map(Kn=>({url:{value:Kn.value,meta:{text:ho?le:Kn.text,attach:zn}},text:ho?le:Kn.text})):at.none()},ac=(le,He)=>He==="link"?le.link:He==="anchor"?le.anchor:at.none(),Ve={init:(le,He)=>{const Je={text:le.text,title:le.title},Pt=Ds=>{var br;return Kt(Je.title.length<=0,at.from((br=Ds.meta)===null||br===void 0?void 0:br.title).getOr(""))},Nn=Ds=>{var br;return Kt(Je.text.length<=0,at.from((br=Ds.meta)===null||br===void 0?void 0:br.text).getOr(Ds.value))},ho=Ds=>{const br=Nn(Ds.url),X=Pt(Ds.url);return br.isSome()||X.isSome()?at.some({...br.map(fe=>({text:fe})).getOr({}),...X.map(fe=>({title:fe})).getOr({})}):at.none()},Kn=(Ds,br)=>{const X=ac(He,br).getOr([]);return Mc(Je.text,br,X,Ds)};return{onChange:(Ds,br)=>{const X=br.name;return X==="url"?ho(Ds()):qt(["anchor","link"],X)?Kn(Ds(),X):((X==="text"||X==="title")&&(Je[X]=Ds()[X]),at.none())}}},getDelta:Mc};var Pe=tinymce.util.Tools.resolve("tinymce.util.Delay");const Rt=(le,He,Je)=>{const Pt=le.selection.getRng();Pe.setEditorTimeout(le,()=>{le.windowManager.confirm(He,Nn=>{le.selection.setRng(Pt),Je(Nn)})})},Ht=le=>{const He=le.href;return He.indexOf("@")>0&&He.indexOf("/")===-1&&He.indexOf("mailto:")===-1?at.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Pt=>({...Pt,href:"mailto:"+He})}):at.none()},Qo=(le,He)=>Je=>{const Pt=Je.href;return le===1&&!Dt(Pt)||le===0&&/^\s*www(\.|\d\.)/i.test(Pt)?at.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${He}:// prefix?`,preprocess:ho=>({...ho,href:He+"://"+Pt})}):at.none()},Fs={preprocess:(le,He)=>Be([Ht,Qo(Le(le),Oe(le))],Je=>Je(He)).fold(()=>Promise.resolve(He),Je=>new Promise(Pt=>{Rt(le,Je.message,Nn=>{Pt(Nn?Je.preprocess(He):He)})}))},fn={getAnchors:le=>{const He=le.dom.select("a:not([href])"),Je=Qe(He,Pt=>{const Nn=Pt.name||Pt.id;return Nn?[{text:Nn,value:"#"+Nn}]:[]});return Je.length>0?at.some([{text:"None",value:""}].concat(Je)):at.none()}},We={getClasses:le=>{const He=Bt(le);return He.length>0?Xr.sanitize(He):at.none()}},Ge=le=>{try{return at.some(JSON.parse(le))}catch{return at.none()}},Tn={getLinks:le=>{const He=Pt=>le.convertURL(Pt.value||Pt.url||"","href"),Je=mn(le);return new Promise(Pt=>{no(Je)?fetch(Je).then(Nn=>Nn.ok?Nn.text().then(Ge):Promise.reject()).then(Pt,()=>Pt(at.none())):Vn(Je)?Je(Nn=>Pt(at.some(Nn))):Pt(at.from(Je))}).then(Pt=>Pt.bind(Xr.sanitizeWith(He)).map(Nn=>Nn.length>0?[{text:"None",value:""}].concat(Nn):Nn))}},xo={getRels:(le,He)=>{const Je=tt(le);if(Je.length>0){const Pt=z(He,"_blank"),Nn=pt(le)===!1,ho=ms=>Hn(Xr.getValue(ms),Pt);return(Nn?Xr.sanitizeWith(ho):Xr.sanitize)(Je)}return at.none()}},Eo=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Vo={getTargets:le=>{const He=ft(le);return Fn(He)?Xr.sanitize(He).orThunk(()=>at.some(Eo)):He===!1?at.none():at.some(Eo)}},cs=(le,He,Je)=>{const Pt=le.getAttrib(He,Je);return Pt!==null&&Pt.length>0?at.some(Pt):at.none()},hr=(le,He)=>{const Je=le.dom,Nn=Gt(le)?at.some(nn(le.selection,He)):at.none(),ho=He.bind(X=>at.from(Je.getAttrib(X,"href"))),Kn=He.bind(X=>at.from(Je.getAttrib(X,"target"))),ms=He.bind(X=>cs(Je,X,"rel")),Ds=He.bind(X=>cs(Je,X,"class")),br=He.bind(X=>cs(Je,X,"title"));return{url:ho,text:Nn,title:br,target:Kn,rel:ms,linkClass:Ds}},Ur={collect:(le,He)=>Tn.getLinks(le).then(Je=>{const Pt=hr(le,He);return{anchor:Pt,catalogs:{targets:Vo.getTargets(le),rels:xo.getRels(le,Pt.target),classes:We.getClasses(le),anchor:fn.getAnchors(le),link:Je},optNode:He,flags:{titleEnabled:$e(le)}}})},Al=(le,He)=>Je=>{const Pt=Je.getData();if(!Pt.url.value){Er(le),Je.close();return}const Nn=ms=>at.from(Pt[ms]).filter(Ds=>!z(He.anchor[ms],Ds)),ho={href:Pt.url.value,text:Nn("text"),target:Nn("target"),rel:Nn("rel"),class:Nn("linkClass"),title:Nn("title")},Kn={href:Pt.url.value,attach:Pt.url.meta!==void 0&&Pt.url.meta.attach?Pt.url.meta.attach:zn};Fs.preprocess(le,ho).then(ms=>{hi(le,Kn,ms)}),Je.close()},La=le=>{const He=ot(le);return Ur.collect(le,He)},Bs=(le,He)=>{const Je=le.anchor,Pt=Je.url.getOr("");return{url:{value:Pt,meta:{original:{value:Pt}}},text:Je.text.getOr(""),title:Je.title.getOr(""),anchor:Pt,link:Pt,rel:Je.rel.getOr(""),target:Je.target.or(He).getOr(""),linkClass:Je.linkClass.getOr("")}},er=(le,He,Je)=>{const Pt=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Nn=le.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),ho=le.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Kn=at.from(Se(Je)),ms=Bs(le,Kn),Ds=le.catalogs,br=Ve.init(ms,Ds);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:qn([Pt,Nn,ho,$t([Ds.anchor.map(Xr.createUi("anchor","Anchors")),Ds.rels.map(Xr.createUi("rel","Rel")),Ds.targets.map(Xr.createUi("target","Open link in...")),Ds.link.map(Xr.createUi("link","Link list")),Ds.classes.map(Xr.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ms,onChange:(fe,{name:Ze})=>{br.onChange(fe.getData,{name:Ze}).each(St=>{fe.setData(St)})},onSubmit:He}},ar=le=>{La(le).then(Je=>{const Pt=Al(le,Je);return er(Je,Pt,le)}).then(Je=>{le.windowManager.open(Je)})},Ua=le=>{le.addCommand("mceLink",(He,Je)=>{(Je==null?void 0:Je.dialog)===!0||!Y(le)?ar(le):le.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Ti=le=>{le.addShortcut("Meta+K","",()=>{le.execCommand("mceLink")})},Wc=le=>{let He=le;return{get:()=>He,set:Nn=>{He=Nn}}},Ta=le=>{const He=Wc(at.none()),Je=()=>He.get().each(le);return{clear:()=>{Je(),He.set(at.none())},isSet:()=>He.get().isSome(),get:()=>He.get(),set:ms=>{Je(),He.set(at.some(ms))}}},ws=()=>{const le=Ta(zn);return{...le,on:Je=>le.get().each(Je)}},yu=(le,He)=>le.substring(He),Ei=(le,He,Je)=>He===""||le.length>=He.length&&le.substr(Je,Je+He.length)===He,Es=(le,He)=>xu(le,He)?yu(le,He.length):le,xu=(le,He)=>Ei(le,He,0);var Xs=tinymce.util.Tools.resolve("tinymce.util.VK");const hd=(le,He)=>{document.body.appendChild(le),le.dispatchEvent(He),document.body.removeChild(le)},Vl=le=>{const He=document.createElement("a");He.target="_blank",He.href=le,He.rel="noreferrer noopener";const Je=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Je),hd(He,Je)},fs=le=>le.altKey===!0&&le.shiftKey===!1&&le.ctrlKey===!1&&le.metaKey===!1,li=(le,He)=>{if(He){const Je=hn(He);if(/^#/.test(Je)){const Pt=le.dom.select(`${Je},[name="${Es(Je,"#")}"]`);Pt.length&&le.selection.scrollIntoView(Pt[0],!0)}else Vl(He.href)}},Ld=le=>{const He=le.selection.getRng(),Je=He.startContainer;return An(Je)&&He.startContainer===He.endContainer&&le.dom.select("img",Je).length===1},Wa=(le,He)=>{const Je=Co(le.dom.getParents(He));return Kt(Je.length===1,Je[0])},Dm=le=>{const He=Zo(le.selection.getRng());return Kt(He.length>0,He[0]).or(Wa(le,le.selection.getNode()))},ui=le=>le.selection.isCollapsed()||Ld(le)?Wa(le,le.selection.getStart()):Dm(le),kg=le=>{const He=ws(),Je=()=>He.get().or(ui(le)),Pt=()=>Je().each(Nn=>li(le,Nn));return le.on("contextmenu",Nn=>{Wa(le,Nn.target).each(He.set)}),le.on("SelectionChange",()=>{He.isSet()||ui(le).each(He.set)}),le.on("click",Nn=>{He.clear();const ho=Co(le.dom.getParents(Nn.target));ho.length===1&&Xs.metaKeyPressed(Nn)&&(Nn.preventDefault(),li(le,ho[0]))}),le.on("keydown",Nn=>{He.clear(),!Nn.isDefaultPrevented()&&Nn.keyCode===13&&fs(Nn)&&Je().each(ho=>{Nn.preventDefault(),li(le,ho)})}),{gotoSelectedLink:Pt}},qi=le=>()=>{le.execCommand("mceLink",!1,{dialog:!0})},or=(le,He)=>(le.on("NodeChange",He),()=>le.off("NodeChange",He)),wu=le=>He=>{const Je=()=>{He.setActive(!le.mode.isReadOnly()&&rt(le,le.selection.getNode())),He.setEnabled(le.selection.isEditable())};return Je(),or(le,Je)},Rm=le=>He=>{const Je=()=>{He.setEnabled(le.selection.isEditable())};return Je(),or(le,Je)},Ku=le=>He=>{const Je=ho=>Mn(ho)||No(le.selection.getRng()),Pt=le.dom.getParents(le.selection.getStart()),Nn=ho=>{He.setEnabled(Je(ho)&&le.selection.isEditable())};return Nn(Pt),or(le,ho=>Nn(ho.parents))},oi=(le,He)=>{le.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:qi(le),onSetup:wu(le)}),le.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:He.gotoSelectedLink,onSetup:Ku(le)}),le.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Er(le),onSetup:Ku(le)})},qa=(le,He)=>{le.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:He.gotoSelectedLink,onSetup:Ku(le)}),le.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:qi(le),onSetup:Rm(le)}),le.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Er(le),onSetup:Ku(le)})},Ki=le=>{const He="link unlink openlink",Je="link";le.ui.registry.addContextMenu("link",{update:Pt=>le.dom.isEditable(Pt)?Mn(le.dom.getParents(Pt,"a"))?He:Je:""})},Wr=(le,He)=>{const Je=ho=>{ho.selection.collapse(!1)},Pt=ho=>{const Kn=le.selection.getNode();return ho.setEnabled(rt(le,Kn)&&le.selection.isEditable()),zn},Nn=ho=>{const Kn=ot(le),ms=Gt(le);if(Kn.isNone()&&ms){const Ds=nn(le.selection,Kn);return Kt(Ds.length===0,ho)}else return at.none()};le.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:wu(le)},label:"Link",predicate:ho=>Qt(le)&&rt(le,ho),initValue:()=>ot(le).fold(Vt(""),hn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ho=>{const Kn=le.selection.getNode();return ho.setActive(rt(le,Kn)),wu(le)(ho)},onAction:ho=>{const Kn=ho.getValue(),ms=Nn(Kn);hi(le,{href:Kn,attach:zn},{href:Kn,text:ms,title:at.none(),rel:at.none(),target:at.from(Se(le)),class:at.none()}),Je(le),ho.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Pt,onAction:ho=>{Er(le),ho.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Pt,onAction:ho=>{He.gotoSelectedLink(),ho.hide()}}]})},bd=le=>{const He=kg(le);oi(le,He),qa(le,He),Ki(le),Wr(le,He)};var ol=()=>{$n.add("link",le=>{Jt(le),Ua(le),bd(le),Ti(le)})};ol()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(Tt,Fn)=>{Tt.focus(),Tt.undoManager.transact(()=>{Tt.setContent(Fn)}),Tt.selection.setCursorLocation(),Tt.nodeChanged()},mo=Tt=>Tt.getContent({source_view:!0}),vo=Tt=>{const Fn=mo(Tt);Tt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Fn},onSubmit:To=>{Xo(Tt,To.getData().code),To.close()}})},ko=Tt=>{Tt.addCommand("mceCodeEditor",()=>{vo(Tt)})},wn=Tt=>{const Fn=()=>Tt.execCommand("mceCodeEditor");Tt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Fn}),Tt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Fn})};var no=()=>{$n.add("code",Tt=>(ko(Tt),wn(Tt),{}))};no()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(D,H,te)=>{var ye;return te(D,H.prototype)?!0:((ye=D.constructor)===null||ye===void 0?void 0:ye.name)===H.name},mo=D=>{const H=typeof D;return D===null?"null":H==="object"&&Array.isArray(D)?"array":H==="object"&&Xo(D,String,(te,ye)=>ye.isPrototypeOf(te))?"string":H},vo=D=>H=>mo(H)===D,ko=D=>H=>typeof H===D,wn=D=>H=>D===H,no=vo("string"),Tt=vo("array"),Fn=ko("boolean"),To=wn(void 0),ss=D=>D==null,st=D=>!ss(D),es=ko("function"),Vn=ko("number"),kn=()=>{},zn=(D,H)=>te=>D(H(te)),Vt=D=>()=>D,Ue=D=>D,at=(D,H)=>D===H;function ue(D,...H){return(...te)=>{const ye=H.concat(te);return D.apply(null,ye)}}const ve=D=>{D()},In=Vt(!1),qt=Vt(!0);class re{constructor(H,te){this.tag=H,this.value=te}static some(H){return new re(!0,H)}static none(){return re.singletonNone}fold(H,te){return this.tag?te(this.value):H()}isSome(){return this.tag}isNone(){return!this.tag}map(H){return this.tag?re.some(H(this.value)):re.none()}bind(H){return this.tag?H(this.value):re.none()}exists(H){return this.tag&&H(this.value)}forall(H){return!this.tag||H(this.value)}filter(H){return!this.tag||H(this.value)?this:re.none()}getOr(H){return this.tag?this.value:H}or(H){return this.tag?this:H}getOrThunk(H){return this.tag?this.value:H()}orThunk(H){return this.tag?this:H()}getOrDie(H){if(this.tag)return this.value;throw new Error(H??"Called getOrDie on None")}static from(H){return st(H)?re.some(H):re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(H){this.tag&&H(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}re.singletonNone=new re(!1);const rn=Object.keys,oo=Object.hasOwnProperty,qn=(D,H)=>{const te=rn(D);for(let ye=0,et=te.length;ye<et;ye++){const an=te[ye],xn=D[an];H(xn,an)}},Qe=D=>(H,te)=>{D[te]=H},Be=(D,H,te,ye)=>{qn(D,(et,an)=>{(H(et,an)?te:ye)(et,an)})},z=(D,H)=>{const te={};return Be(D,H,Qe(te),kn),te},$t=(D,H)=>{const te=[];return qn(D,(ye,et)=>{te.push(H(ye,et))}),te},Kt=D=>$t(D,Ue),B=D=>rn(D).length,Jt=(D,H)=>Le(D,H)?re.from(D[H]):re.none(),Le=(D,H)=>oo.call(D,H),Qt=(D,H)=>Le(D,H)&&D[H]!==void 0&&D[H]!==null,mn=D=>{for(const H in D)if(oo.call(D,H))return!1;return!0},Se=Array.prototype.indexOf,Oe=Array.prototype.push,ft=(D,H)=>Se.call(D,H),tt=(D,H)=>ft(D,H)>-1,Bt=(D,H)=>{for(let te=0,ye=D.length;te<ye;te++){const et=D[te];if(H(et,te))return!0}return!1},$e=(D,H)=>{const te=[];for(let ye=0;ye<D;ye++)te.push(H(ye));return te},pt=(D,H)=>{const te=D.length,ye=new Array(te);for(let et=0;et<te;et++){const an=D[et];ye[et]=H(an,et)}return ye},Y=(D,H)=>{for(let te=0,ye=D.length;te<ye;te++){const et=D[te];H(et,te)}},Jo=(D,H)=>{for(let te=D.length-1;te>=0;te--){const ye=D[te];H(ye,te)}},Et=(D,H)=>{const te=[],ye=[];for(let et=0,an=D.length;et<an;et++){const xn=D[et];(H(xn,et)?te:ye).push(xn)}return{pass:te,fail:ye}},Mt=(D,H)=>{const te=[];for(let ye=0,et=D.length;ye<et;ye++){const an=D[ye];H(an,ye)&&te.push(an)}return te},Pn=(D,H,te)=>(Jo(D,(ye,et)=>{te=H(te,ye,et)}),te),Nt=(D,H,te)=>(Y(D,(ye,et)=>{te=H(te,ye,et)}),te),ce=(D,H,te)=>{for(let ye=0,et=D.length;ye<et;ye++){const an=D[ye];if(H(an,ye))return re.some(an);if(te(an,ye))break}return re.none()},De=(D,H)=>ce(D,H,In),Ne=D=>{const H=[];for(let te=0,ye=D.length;te<ye;++te){if(!Tt(D[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+D);Oe.apply(H,D[te])}return H},oe=(D,H)=>Ne(pt(D,H)),ct=(D,H)=>{for(let te=0,ye=D.length;te<ye;++te){const et=D[te];if(H(et,te)!==!0)return!1}return!0},At=(D,H)=>{const te={};for(let ye=0,et=D.length;ye<et;ye++){const an=D[ye];te[String(an)]=H(an,ye)}return te},dt=(D,H)=>H>=0&&H<D.length?re.some(D[H]):re.none(),An=D=>dt(D,0),it=D=>dt(D,D.length-1),Dt=(D,H)=>{for(let te=0;te<D.length;te++){const ye=H(D[te],te);if(ye.isSome())return ye}return re.none()},hn=8,Hn=9,ut=11,ot=1,rt=3,nn=(D,H)=>{const ye=(H||document).createElement("div");if(ye.innerHTML=D,!ye.hasChildNodes()||ye.childNodes.length>1){const et="HTML does not have a single root node";throw console.error(et,D),new Error(et)}return Mn(ye.childNodes[0])},Zo=(D,H)=>{const ye=(H||document).createElement(D);return Mn(ye)},Co=(D,H)=>{const ye=(H||document).createTextNode(D);return Mn(ye)},Mn=D=>{if(D==null)throw new Error("Node cannot be null or undefined");return{dom:D}},Gt={fromHtml:nn,fromTag:Zo,fromText:Co,fromDom:Mn,fromPoint:(D,H,te)=>re.from(D.dom.elementFromPoint(H,te)).map(Mn)},yo=(D,H)=>{const te=D.dom;if(te.nodeType!==ot)return!1;{const ye=te;if(ye.matches!==void 0)return ye.matches(H);if(ye.msMatchesSelector!==void 0)return ye.msMatchesSelector(H);if(ye.webkitMatchesSelector!==void 0)return ye.webkitMatchesSelector(H);if(ye.mozMatchesSelector!==void 0)return ye.mozMatchesSelector(H);throw new Error("Browser lacks native selectors")}},gr=D=>D.nodeType!==ot&&D.nodeType!==Hn&&D.nodeType!==ut||D.childElementCount===0,Us=(D,H)=>{const te=H===void 0?document:H.dom;return gr(te)?[]:pt(te.querySelectorAll(D),Gt.fromDom)},ma=(D,H)=>{const te=H===void 0?document:H.dom;return gr(te)?re.none():re.from(te.querySelector(D)).map(Gt.fromDom)},ns=(D,H)=>D.dom===H.dom,Pa=yo;typeof window<"u"||Function("return this;")();const vn=D=>D.dom.nodeName.toLowerCase(),Ls=D=>D.dom.nodeType,Ba=D=>H=>Ls(H)===D,Dr=D=>Ls(D)===hn||vn(D)==="#comment",Gi=Ba(ot),hi=Ba(rt),Er=Ba(Hn),bi=Ba(ut),Bi=D=>H=>Gi(H)&&vn(H)===D,kr=D=>Gt.fromDom(D.dom.ownerDocument),Lo=D=>Er(D)?D:kr(D),Aa=D=>re.from(D.dom.parentNode).map(Gt.fromDom),vi=(D,H)=>{const te=es(H)?H:In;let ye=D.dom;const et=[];for(;ye.parentNode!==null&&ye.parentNode!==void 0;){const an=ye.parentNode,xn=Gt.fromDom(an);if(et.push(xn),te(xn)===!0)break;ye=an}return et},nu=D=>re.from(D.dom.previousSibling).map(Gt.fromDom),yt=D=>re.from(D.dom.nextSibling).map(Gt.fromDom),Xr=D=>pt(D.dom.childNodes,Gt.fromDom),Oa=(D,H)=>{const te=D.dom.childNodes;return re.from(te[H]).map(Gt.fromDom)},Ia=D=>Oa(D,0),Mc=D=>bi(D)&&st(D.dom.host),ac=D=>Gt.fromDom(D.dom.getRootNode()),Ga=D=>{const H=ac(D);return Mc(H)?re.some(H):re.none()},Ve=D=>Gt.fromDom(D.dom.host),Pe=D=>{const H=hi(D)?D.dom.parentNode:D.dom;if(H==null||H.ownerDocument===null)return!1;const te=H.ownerDocument;return Ga(Gt.fromDom(H)).fold(()=>te.body.contains(H),zn(Pe,Ve))};var Rt=(D,H,te,ye,et)=>D(te,ye)?re.some(te):es(et)&&et(te)?re.none():H(te,ye,et);const Ht=(D,H,te)=>{let ye=D.dom;const et=es(te)?te:In;for(;ye.parentNode;){ye=ye.parentNode;const an=Gt.fromDom(ye);if(H(an))return re.some(an);if(et(an))break}return re.none()},Qo=(D,H,te)=>Rt((et,an)=>an(et),Ht,D,H,te),vs=(D,H)=>{const te=et=>H(Gt.fromDom(et));return De(D.dom.childNodes,te).map(Gt.fromDom)},Fs=(D,H,te)=>Ht(D,ye=>yo(ye,H),te),ka=(D,H)=>vs(D,te=>yo(te,H)),fn=(D,H)=>ma(H,D),xt=(D,H,te)=>Rt((et,an)=>yo(et,an),Fs,D,H,te),We=D=>xt(D,"[contenteditable]"),Ge=(D,H=!1)=>Pe(D)?D.dom.isContentEditable:We(D).fold(Vt(H),te=>pn(te)==="true"),pn=D=>D.dom.contentEditable,Tn=D=>D.nodeName.toLowerCase(),Xn=D=>Gt.fromDom(D.getBody()),xo=D=>H=>ns(H,Xn(D)),Eo=D=>D?D.replace(/px$/,""):"",Bo=D=>/^\d+(\.\d+)?$/.test(D)?D+"px":D,Vo=D=>Gt.fromDom(D.selection.getStart()),cs=D=>Gt.fromDom(D.selection.getEnd()),hr=D=>Qo(D,Bi("table")).forall(Ge),Va=(D,H)=>Mt(Xr(D),H),Ur=(D,H)=>{let te=[];return Y(Xr(D),ye=>{H(ye)&&(te=te.concat([ye])),te=te.concat(Ur(ye,H))}),te},Al=(D,H)=>Va(D,te=>yo(te,H)),La=(D,H)=>Us(H,D),Bs=(D,H,te)=>{if(no(te)||Fn(te)||Vn(te))D.setAttribute(H,te+"");else throw console.error("Invalid call to Attribute.set. Key ",H,":: Value ",te,":: Element ",D),new Error("Attribute value was not simple")},er=(D,H,te)=>{Bs(D.dom,H,te)},ar=(D,H)=>{const te=D.dom;qn(H,(ye,et)=>{Bs(te,et,ye)})},Ua=(D,H)=>{const te=D.dom.getAttribute(H);return te===null?void 0:te},Ti=(D,H)=>re.from(Ua(D,H)),Wc=(D,H)=>{D.dom.removeAttribute(H)},Ta=D=>Nt(D.dom.attributes,(H,te)=>(H[te.name]=te.value,H),{}),ws=(D,H,te=at)=>D.exists(ye=>te(ye,H)),yu=D=>{const H=[],te=ye=>{H.push(ye)};for(let ye=0;ye<D.length;ye++)D[ye].each(te);return H},Ei=(D,H,te)=>D.isSome()&&H.isSome()?re.some(te(D.getOrDie(),H.getOrDie())):re.none(),Es=D=>D.bind(Ue),xu=(D,H)=>D?re.some(H):re.none(),Xs=(D,H)=>D.substring(H),hd=(D,H,te)=>H===""||D.length>=H.length&&D.substr(te,te+H.length)===H,Vl=(D,H)=>fs(D,H)?Xs(D,H.length):D,fs=(D,H)=>hd(D,H,0),Ld=(D=>H=>H.replace(D,""))(/^\s+|\s+$/g),Wa=D=>D.length>0,Dm=D=>!Wa(D),ui=(D,H=10)=>{const te=parseInt(D,H);return isNaN(te)?re.none():re.some(te)},kg=D=>{const H=parseFloat(D);return isNaN(H)?re.none():re.some(H)},qi=D=>D.style!==void 0&&es(D.style.getPropertyValue),or=(D,H,te)=>{if(!no(te))throw console.error("Invalid call to CSS.set. Property ",H,":: Value ",te,":: Element ",D),new Error("CSS value must be a string: "+te);qi(D)&&D.style.setProperty(H,te)},wu=(D,H)=>{qi(D)&&D.style.removeProperty(H)},Rm=(D,H,te)=>{const ye=D.dom;or(ye,H,te)},Ku=(D,H)=>{const te=D.dom,et=window.getComputedStyle(te).getPropertyValue(H);return et===""&&!Pe(D)?oi(te,H):et},oi=(D,H)=>qi(D)?D.style.getPropertyValue(H):"",qa=(D,H)=>{const te=D.dom,ye=oi(te,H);return re.from(ye).filter(et=>et.length>0)},Ki=(D,H)=>{const te=D.dom;wu(te,H),ws(Ti(D,"style").map(Ld),"")&&Wc(D,"style")},Wr=(D,H,te=0)=>Ti(D,H).map(ye=>parseInt(ye,10)).getOr(te),bd=(D,H)=>ol(D,H,qt),ol=(D,H,te)=>oe(Xr(D),ye=>yo(ye,H)?te(ye)?[ye]:[]:ol(ye,H,te)),le=["tfoot","thead","tbody","colgroup"],He=D=>tt(le,D),Je=(D,H)=>({rows:D,columns:H}),Pt=(D,H,te)=>({element:D,rowspan:H,colspan:te}),Nn=(D,H,te,ye,et,an)=>({element:D,rowspan:H,colspan:te,row:ye,column:et,isLocked:an}),ho=(D,H,te)=>({element:D,cells:H,section:te}),Kn=(D,H,te,ye)=>({startRow:D,startCol:H,finishRow:te,finishCol:ye}),ms=(D,H,te)=>({element:D,colspan:H,column:te}),Ds=(D,H)=>({element:D,columns:H}),br=(D,H,te=In)=>{if(te(H))return re.none();if(tt(D,vn(H)))return re.some(H);const ye=et=>yo(et,"table")||te(et);return Fs(H,D.join(","),ye)},X=(D,H)=>br(["td","th"],D,H),fe=D=>bd(D,"th,td"),Ze=D=>yo(D,"colgroup")?Al(D,"col"):oe(Gn(D),H=>Al(H,"col")),St=(D,H)=>xt(D,"table",H),Oo=D=>bd(D,"tr"),Gn=D=>St(D).fold(Vt([]),H=>Al(H,"colgroup")),jr=(D,H)=>pt(D,te=>{if(vn(te)==="colgroup"){const ye=pt(Ze(te),et=>{const an=Wr(et,"span",1);return Pt(et,1,an)});return ho(te,ye,"colgroup")}else{const ye=pt(fe(te),et=>{const an=Wr(et,"rowspan",1),xn=Wr(et,"colspan",1);return Pt(et,an,xn)});return ho(te,ye,H(te))}}),vc=D=>Aa(D).map(H=>{const te=vn(H);return He(te)?te:"tbody"}).getOr("tbody"),bn=D=>{const H=Oo(D),ye=[...Gn(D),...H];return jr(ye,vc)},fl="data-snooker-locked-cols",ba=D=>Ti(D,fl).bind(H=>re.from(H.match(/\d+/g))).map(H=>At(H,qt)),$d=(D,H)=>D+","+H,Ii=(D,H,te)=>re.from(D.access[$d(H,te)]),cr=(D,H,te)=>{const ye=ou(D,et=>te(H,et.element));return ye.length>0?re.some(ye[0]):re.none()},ou=(D,H)=>{const te=oe(D.all,ye=>ye.cells);return Mt(te,H)},Nc=D=>{const H={};let te=0;return Y(D.cells,ye=>{const et=ye.colspan;$e(et,an=>{const xn=te+an;H[xn]=ms(ye.element,et,xn)}),te+=et}),H},Ul=D=>{const H={},te=[],et=An(D).map(Lc=>Lc.element).bind(St).bind(ba).getOr({});let an=0,xn=0,Fo=0;const{pass:$o,fail:Ss}=Et(D,Lc=>Lc.section==="colgroup");Y(Ss,Lc=>{const ag=[];Y(Lc.cells,iu=>{let Um=0;for(;H[$d(Fo,Um)]!==void 0;)Um++;const r1=Qt(et,Um.toString()),yf=Nn(iu.element,iu.rowspan,iu.colspan,Fo,Um,r1);for(let ig=0;ig<iu.colspan;ig++)for(let ip=0;ip<iu.rowspan;ip++){const a1=Fo+ip,Qh=Um+ig,i1=$d(a1,Qh);H[i1]=yf,xn=Math.max(xn,Qh+1)}ag.push(yf)}),an++,te.push(ho(Lc.element,ag,Lc.section)),Fo++});const{columns:ua,colgroups:Pr}=it($o).map(Lc=>{const ag=Nc(Lc);return{colgroups:[Ds(Lc.element,Kt(ag))],columns:ag}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Je(an,xn),access:H,all:te,columns:ua,colgroups:Pr}},Nm={fromTable:D=>{const H=bn(D);return Ul(H)},generate:Ul,getAt:Ii,findItem:cr,filterItems:ou,justCells:D=>oe(D.all,H=>H.cells),justColumns:D=>Kt(D.columns),hasColumns:D=>rn(D.columns).length>0,getColumnAt:(D,H)=>re.from(D.columns[H])};var Ec=tinymce.util.Tools.resolve("tinymce.util.Tools");const sl=(D,H,te)=>{const ye=D.select("td,th",H);let et;for(let an=0;an<ye.length;an++){const xn=D.getStyle(ye[an],te);if(To(et)&&(et=xn),et!==xn)return""}return et},ic=(D,H,te)=>{Ec.each("left center right".split(" "),ye=>{ye!==te&&D.formatter.remove("align"+ye,{},H)}),te&&D.formatter.apply("align"+te,{},H)},Bm=(D,H,te)=>{Ec.each("top middle bottom".split(" "),ye=>{ye!==te&&D.formatter.remove("valign"+ye,{},H)}),te&&D.formatter.apply("valign"+te,{},H)},we=(D,H,te)=>{D.dispatch("TableModified",{...te,table:H})},_e=(D,H)=>kg(D).getOr(H),wt=(D,H,te)=>_e(Ku(D,H),te),un=(D,H,te,ye)=>{const et=wt(D,`padding-${te}`,0),an=wt(D,`padding-${ye}`,0),xn=wt(D,`border-${te}-width`,0),Fo=wt(D,`border-${ye}-width`,0);return H-et-an-xn-Fo},Ko=(D,H)=>{const te=D.dom,ye=te.getBoundingClientRect().width||te.offsetWidth;return H==="border-box"?ye:un(D,ye,"left","right")},nr=D=>Ko(D,"content-box");var Da=tinymce.util.Tools.resolve("tinymce.Env");const si="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Fi=$e(5,D=>{const H=`${D+1}px`;return{title:H,value:H}}),Ol=pt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],D=>({title:D,value:D.toLowerCase()})),di="100%",Pi=D=>{var H;const te=D.dom,ye=(H=te.getParent(D.selection.getStart(),te.isBlock))!==null&&H!==void 0?H:D.getBody();return nr(Gt.fromDom(ye))+"px"},dc=(D,H)=>cf(D)||!Br(D)?H:Qp(D)?{...H,width:Pi(D)}:{...H,width:di},pl=(D,H)=>cf(D)||Br(D)?H:Qp(D)?{...H,width:Pi(D)}:{...H,width:di},Yi=D=>H=>H.options.get(D),Bc=D=>{const H=D.options.register;H("table_border_widths",{processor:"object[]",default:Fi}),H("table_border_styles",{processor:"object[]",default:Ol}),H("table_cell_advtab",{processor:"boolean",default:!0}),H("table_row_advtab",{processor:"boolean",default:!0}),H("table_advtab",{processor:"boolean",default:!0}),H("table_appearance_options",{processor:"boolean",default:!0}),H("table_grid",{processor:"boolean",default:!Da.deviceType.isTouch()}),H("table_cell_class_list",{processor:"object[]",default:[]}),H("table_row_class_list",{processor:"object[]",default:[]}),H("table_class_list",{processor:"object[]",default:[]}),H("table_toolbar",{processor:"string",default:si}),H("table_background_color_map",{processor:"object[]",default:[]}),H("table_border_color_map",{processor:"object[]",default:[]})},tr=Yi("table_sizing_mode"),_i=Yi("table_border_widths"),Im=Yi("table_border_styles"),Fm=Yi("table_cell_advtab"),Ic=Yi("table_row_advtab"),Go=Yi("table_advtab"),og=Yi("table_appearance_options"),Hd=Yi("table_grid"),Br=Yi("table_style_by_css"),su=Yi("table_cell_class_list"),xv=Yi("table_row_class_list"),Pm=Yi("table_class_list"),vr=Yi("table_toolbar"),Wl=Yi("table_background_color_map"),Jp=Yi("table_border_color_map"),Qp=D=>tr(D)==="fixed",cf=D=>tr(D)==="responsive",Lm=D=>{const H=D.options,te=H.get("table_default_styles");return H.isSet("table_default_styles")?te:dc(D,te)},sg=D=>{const H=D.options,te=H.get("table_default_attributes");return H.isSet("table_default_attributes")?te:pl(D,te)},lf=(D,H)=>H.column>=D.startCol&&H.column+H.colspan-1<=D.finishCol&&H.row>=D.startRow&&H.row+H.rowspan-1<=D.finishRow,Kh=(D,H)=>{let te=!0;const ye=ue(lf,H);for(let et=H.startRow;et<=H.finishRow;et++)for(let an=H.startCol;an<=H.finishCol;an++)te=te&&Nm.getAt(D,et,an).exists(ye);return te?re.some(H):re.none()},je=(D,H)=>Kn(Math.min(D.row,H.row),Math.min(D.column,H.column),Math.max(D.row+D.rowspan-1,H.row+H.rowspan-1),Math.max(D.column+D.colspan-1,H.column+H.colspan-1)),uf=(D,H,te)=>{const ye=Nm.findItem(D,H,ns),et=Nm.findItem(D,te,ns);return ye.bind(an=>et.map(xn=>je(an,xn)))},ga=(D,H,te)=>uf(D,H,te).bind(ye=>Kh(D,ye)),Tx=(D,H,te)=>{const ye=Yh(D);return ga(ye,H,te)},Yh=Nm.fromTable,$m=(D,H)=>{Aa(D).each(ye=>{ye.dom.insertBefore(H.dom,D.dom)})},Lr=(D,H)=>{yt(D).fold(()=>{Aa(D).each(et=>{hl(et,H)})},ye=>{$m(ye,H)})},Xi=(D,H)=>{Ia(D).fold(()=>{hl(D,H)},ye=>{D.dom.insertBefore(H.dom,ye.dom)})},hl=(D,H)=>{D.dom.appendChild(H.dom)},zd=(D,H)=>{$m(D,H),hl(H,D)},df=(D,H)=>{Y(H,(te,ye)=>{const et=ye===0?D:H[ye-1];Lr(et,te)})},mf=(D,H)=>{Y(H,te=>{hl(D,te)})},jl=D=>{const H=D.dom;H.parentNode!==null&&H.parentNode.removeChild(H)},Xh=D=>{const H=Xr(D);H.length>0&&df(D,H),jl(D)},Tg=((D,H)=>{const te=an=>{if(!D(an))throw new Error("Can only get "+H+" value of a "+H+" node");return ye(an).getOr("")},ye=an=>D(an)?re.from(an.dom.nodeValue):re.none();return{get:te,getOption:ye,set:(an,xn)=>{if(!D(an))throw new Error("Can only set raw "+H+" value of a "+H+" node");an.dom.nodeValue=xn}}})(hi,"text"),rl=D=>Tg.get(D),ps=(D,H)=>Tg.set(D,H);var Dl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],gf=()=>{const D=Ss=>Gt.fromDom(Ss.dom.cloneNode(!1)),H=Ss=>Lo(Ss).dom,te=Ss=>Gi(Ss)?vn(Ss)==="body"?!0:tt(Dl,vn(Ss)):!1,ye=Ss=>Gi(Ss)?tt(["br","img","hr","input"],vn(Ss)):!1,et=Ss=>Gi(Ss)&&Ua(Ss,"contenteditable")==="false",an=(Ss,ua)=>Ss.dom.compareDocumentPosition(ua.dom),xn=(Ss,ua)=>{const Pr=Ta(Ss);ar(ua,Pr)},Fo=Ss=>{const ua=vn(Ss);return tt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ua)},$o=Ss=>Gi(Ss)?Ti(Ss,"lang"):re.none();return{up:Vt({selector:Fs,closest:xt,predicate:Ht,all:vi}),down:Vt({selector:La,predicate:Ur}),styles:Vt({get:Ku,getRaw:qa,set:Rm,remove:Ki}),attrs:Vt({get:Ua,set:er,remove:Wc,copyTo:xn}),insert:Vt({before:$m,after:Lr,afterAll:df,append:hl,appendAll:mf,prepend:Xi,wrap:zd}),remove:Vt({unwrap:Xh,remove:jl}),create:Vt({nu:Gt.fromTag,clone:D,text:Gt.fromText}),query:Vt({comparePosition:an,prevSibling:nu,nextSibling:yt}),property:Vt({children:Xr,name:vn,parent:Aa,document:H,isText:hi,isComment:Dr,isElement:Gi,isSpecial:Fo,getLanguage:$o,getText:rl,setText:ps,isBoundary:te,isEmptyTag:ye,isNonEditable:et}),eq:ns,is:Pa}};const Rl=(D,H,te,ye)=>{const et=te[0],an=te.slice(1);return ye(D,H,et,an)},om=(D,H,te)=>te.length>0?Rl(D,H,te,al):re.none(),al=(D,H,te,ye)=>{const et=H(D,te);return Pn(ye,(an,xn)=>{const Fo=H(D,xn);return bl(D,an,Fo)},et)},bl=(D,H,te)=>H.bind(ye=>te.filter(ue(D.eq,ye))),Hm=om,Fc=gf(),ff=(D,H)=>Hm(Fc,(te,ye)=>D(ye),H),Vd=D=>Fs(D,"table"),pf=(D,H)=>{const te=La(D,H);return te.length>0?re.some(te):re.none()},$0=(D,H,te)=>fn(D,H).bind(ye=>fn(D,te).bind(et=>ff(Vd,[ye,et]).map(an=>({first:ye,last:et,table:an})))),Eg=(D,H)=>pf(D,H),th=(D,H,te)=>$0(D,H,te).bind(ye=>{const et=$o=>ns(D,$o),an="thead,tfoot,tbody,table",xn=Fs(ye.first,an,et),Fo=Fs(ye.last,an,et);return xn.bind($o=>Fo.bind(Ss=>ns($o,Ss)?Tx(ye.table,ye.first,ye.last):re.none()))}),wv=D=>pt(D,Gt.fromDom),Ai="data-mce-selected",Zl="td["+Ai+"],th["+Ai+"]",Ml="data-mce-first-selected",Yu="td["+Ml+"],th["+Ml+"]",oa="data-mce-last-selected",jc="td["+oa+"],th["+oa+"]",Ya={selected:Ai,selectedSelector:Zl,firstSelected:Ml,firstSelectedSelector:Yu,lastSelected:oa,lastSelectedSelector:jc},vl=D=>St(D).bind(H=>Eg(H,Ya.firstSelectedSelector)).fold(Vt(D),H=>H[0]),hf=D=>(H,te)=>{const ye=vn(H),et=ye==="col"||ye==="colgroup"?vl(H):H;return xt(et,D,te)},Yt=hf("th,td,caption"),wo=hf("th,td"),yc=D=>wv(D.model.table.getSelectedCells()),Gl=(D,H)=>{const te=wo(D),ye=te.bind(et=>St(et)).map(et=>Oo(et));return Ei(te,ye,(et,an)=>Mt(an,xn=>Bt(wv(xn.dom.cells),Fo=>Ua(Fo,H)==="1"||ns(Fo,et)))).getOr([])},mc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ir=D=>({value:sm(D)}),bf=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ql=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Fr=D=>bf.test(D)||ql.test(D),sm=D=>Vl(D,"#").toUpperCase(),Ws=D=>Fr(D)?re.some({value:sm(D)}):re.none(),_r=D=>{const H=D.toString(16);return(H.length===1?"0"+H:H).toUpperCase()},_g=D=>{const H=_r(D.red)+_r(D.green)+_r(D.blue);return Ir(H)},il=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Cu=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,gc=(D,H,te,ye)=>({red:D,green:H,blue:te,alpha:ye}),ht=(D,H,te,ye)=>{const et=parseInt(D,10),an=parseInt(H,10),xn=parseInt(te,10),Fo=parseFloat(ye);return gc(et,an,xn,Fo)},Ji=D=>{const H=il.exec(D);if(H!==null)return re.some(ht(H[1],H[2],H[3],"1"));const te=Cu.exec(D);return te!==null?re.some(ht(te[1],te[2],te[3],te[4])):re.none()},Xu=D=>Ws(D).orThunk(()=>Ji(D).map(_g)).getOrThunk(()=>{const H=document.createElement("canvas");H.height=1,H.width=1;const te=H.getContext("2d");te.clearRect(0,0,H.width,H.height),te.fillStyle="#FFFFFF",te.fillStyle=D,te.fillRect(0,0,1,1);const ye=te.getImageData(0,0,1,1).data,et=ye[0],an=ye[1],xn=ye[2],Fo=ye[3];return _g(gc(et,an,xn,Fo))}),yi=D=>Ji(D).map(_g).map(H=>"#"+H.value).getOr(D),va=D=>{let H=D;return{get:()=>H,set:et=>{H=et}}},cl=D=>{const H=va(re.none()),te=()=>H.get().each(D);return{clear:()=>{te(),H.set(re.none())},isSet:()=>H.get().isSome(),get:()=>H.get(),set:Fo=>{te(),H.set(re.some(Fo))}}},sr=()=>cl(D=>D.unbind()),vd=(D,H,te)=>ye=>{const et=sr(),an=Dm(te),xn=()=>{const Fo=yc(D),$o=Ss=>D.formatter.match(H,{value:te},Ss.dom,an);an?(ye.setActive(!Bt(Fo,$o)),et.set(D.formatter.formatChanged(H,Ss=>ye.setActive(!Ss),!0))):(ye.setActive(ct(Fo,$o)),et.set(D.formatter.formatChanged(H,ye.setActive,!1,{value:te})))};return D.initialized?xn():D.on("init",xn),et.clear},rm=D=>Qt(D,"menu"),Zr=D=>pt(D,H=>{const te=H.text||H.title||"";return rm(H)?{text:te,items:Zr(H.menu)}:{text:te,value:H.value}}),Su=D=>D.length?re.some(Zr([{text:"Select...",value:"mce-no-match"},...D])):re.none(),zm=(D,H,te,ye)=>pt(H,et=>{const an=et.text||et.title;return rm(et)?{type:"nestedmenuitem",text:an,getSubmenuItems:()=>zm(D,et.menu,te,ye)}:{text:an,type:"togglemenuitem",onAction:()=>ye(et.value),onSetup:vd(D,te,et.value)}}),Ag=(D,H)=>te=>{D.execCommand("mceTableApplyCellStyle",!1,{[H]:te})},mi=D=>oe(D,H=>rm(H)?[{...H,menu:mi(H.menu)}]:Wa(H.value)?[H]:[]),am=(D,H,te,ye)=>et=>et(zm(D,H,te,ye)),yd=(D,H,te)=>{const ye=pt(H,et=>({text:et.title,value:"#"+Xu(et.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ye.length>0?ye:void 0,allowCustomColors:!1},onAction:et=>{const an=et.value==="remove"?"":et.value;D.execCommand("mceTableApplyCellStyle",!1,{[te]:an})}}]},yr=D=>()=>{const te=D.queryCommandValue("mceTableRowType")==="header"?"body":"header";D.execCommand("mceTableRowType",!1,{type:te})},im=D=>()=>{const te=D.queryCommandValue("mceTableColType")==="th"?"td":"th";D.execCommand("mceTableColType",!1,{type:te})},Zc=D=>Su(su(D)).map(H=>({name:"class",type:"listbox",label:"Class",items:H})),I=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:mc}],j=D=>I.concat(Zc(D).toArray()),ne=(D,H)=>{const ye=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Zr(Im(D)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:H==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ye):ye}},qe={normal:(D,H)=>{const te=D.dom;return{setAttrib:(xn,Fo)=>{te.setAttrib(H,xn,Fo)},setStyle:(xn,Fo)=>{te.setStyle(H,xn,Fo)},setFormat:(xn,Fo)=>{Fo===""?D.formatter.remove(xn,{value:null},H,!0):D.formatter.apply(xn,{value:Fo},H)}}}},Sn=Bi("th"),as=(D,H)=>D&&H?"sectionCells":D?"section":"cells",Ys=D=>{const H=D.section==="thead",te=ws(Os(D.cells),"th");return D.section==="tfoot"?{type:"footer"}:H||te?{type:"header",subType:as(H,te)}:{type:"body"}},Os=D=>{const H=Mt(D,te=>Sn(te.element));return H.length===0?re.some("td"):H.length===D.length?re.some("th"):re.none()},_o=D=>{const H=pt(D,et=>Ys(et).type),te=tt(H,"header"),ye=tt(H,"footer");if(!te&&!ye)return re.some("body");{const et=tt(H,"body");return te&&!et&&!ye?re.some("header"):!te&&!et&&ye?re.some("footer"):re.none()}},Oi=D=>{let H=!1,te;return(...ye)=>(H||(H=!0,te=D.apply(null,ye)),te)},Xa=(D,H)=>Dt(D.all,te=>De(te.cells,ye=>ns(H,ye.element))),Bu=(D,H,te)=>{const ye=pt(H.selection,an=>X(an).bind(xn=>Xa(D,xn)).filter(te)),et=yu(ye);return xu(et.length>0,et)},Iu=(D,H)=>H.mergable,nh=(D,H)=>H.unmergable,cm=(D,H)=>Bu(D,H,qt),H0=(D,H)=>Xa(D,H).exists(te=>!te.isLocked),ll=(D,H)=>ct(H,te=>H0(D,te)),z0=(D,H)=>Iu(D,H).filter(te=>ll(D,te.cells)),NC=(D,H)=>nh(D,H).filter(te=>ll(D,te));({...{generate:D=>{if(!Tt(D))throw new Error("cases must be an array");if(D.length===0)throw new Error("there must be at least one case");const H=[],te={};return Y(D,(ye,et)=>{const an=rn(ye);if(an.length!==1)throw new Error("one and only one name per case");const xn=an[0],Fo=ye[xn];if(te[xn]!==void 0)throw new Error("duplicate key detected:"+xn);if(xn==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Tt(Fo))throw new Error("case arguments must be an array");H.push(xn),te[xn]=(...$o)=>{const Ss=$o.length;if(Ss!==Fo.length)throw new Error("Wrong number of arguments to case "+xn+". Expected "+Fo.length+" ("+Fo+"), got "+Ss);return{fold:(...Pr)=>{if(Pr.length!==D.length)throw new Error("Wrong number of arguments to fold. Expected "+D.length+", got "+Pr.length);return Pr[et].apply(null,$o)},match:Pr=>{const gi=rn(Pr);if(H.length!==gi.length)throw new Error("Wrong number of arguments to match. Expected: "+H.join(",")+`
Actual: `+gi.join(","));if(!ct(H,ag=>tt(gi,ag)))throw new Error("Not all branches were specified when using match. Specified: "+gi.join(", ")+`
Required: `+H.join(", "));return Pr[xn].apply(null,$o)},log:Pr=>{console.log(Pr,{constructors:H,constructor:xn,params:$o})}}}}),te}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Cv=(D,H)=>{const te=Nm.fromTable(D);return cm(te,H).bind(et=>{const an=et[et.length-1],xn=et[0].row,Fo=an.row+an.rowspan,$o=te.all.slice(xn,Fo);return _o($o)}).getOr("")},Pc=D=>fs(D,"rgb")?yi(D):D,os=D=>{const H=Gt.fromDom(D);return{borderwidth:qa(H,"border-width").getOr(""),borderstyle:qa(H,"border-style").getOr(""),bordercolor:qa(H,"border-color").map(Pc).getOr(""),backgroundcolor:qa(H,"background-color").map(Pc).getOr("")}},Ju=D=>{const H=D[0],te=D.slice(1);return Y(te,ye=>{Y(rn(H),et=>{qn(ye,(an,xn)=>{const Fo=H[et];Fo!==""&&et===xn&&Fo!==an&&(H[et]=et==="class"?"mce-no-match":"")})})}),H},Dg=(D,H,te,ye)=>De(D,et=>!To(te.formatter.matchNode(ye,H+et))).getOr(""),e1=ue(Dg,["left","center","right"],"align"),Sv=ue(Dg,["top","middle","bottom"],"valign"),t1=(D,H)=>{const te=Lm(D),ye=sg(D),et=()=>({borderstyle:Jt(te,"border-style").getOr(""),bordercolor:Pc(Jt(te,"border-color").getOr("")),backgroundcolor:Pc(Jt(te,"background-color").getOr(""))}),an={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},xn=()=>{const ua=te["border-width"];return Br(D)&&ua?{border:ua}:Jt(ye,"border").fold(()=>({}),Pr=>({border:Pr}))},Fo=H?et():{},$o=()=>{const ua=Jt(te,"border-spacing").or(Jt(ye,"cellspacing")).fold(()=>({}),gi=>({cellspacing:gi})),Pr=Jt(te,"border-padding").or(Jt(ye,"cellpadding")).fold(()=>({}),gi=>({cellpadding:gi}));return{...ua,...Pr}};return{...an,...te,...ye,...Fo,...xn(),...$o()}},Ud=D=>St(Gt.fromDom(D)).map(H=>{const te={selection:wv(D.cells)};return Cv(H,te)}).getOr(""),vf=(D,H,te)=>{const ye=(Fo,$o)=>{const Ss=qa(Gt.fromDom($o),"border-width");return Br(D)&&Ss.isSome()?Ss.getOr(""):Fo.getAttrib($o,"border")||sl(D.dom,$o,"border-width")||sl(D.dom,$o,"border")||""},et=D.dom,an=Br(D)?et.getStyle(H,"border-spacing")||et.getAttrib(H,"cellspacing"):et.getAttrib(H,"cellspacing")||et.getStyle(H,"border-spacing"),xn=Br(D)?sl(et,H,"padding")||et.getAttrib(H,"cellpadding"):et.getAttrib(H,"cellpadding")||sl(et,H,"padding");return{width:et.getStyle(H,"width")||et.getAttrib(H,"width"),height:et.getStyle(H,"height")||et.getAttrib(H,"height"),cellspacing:an??"",cellpadding:xn??"",border:ye(et,H),caption:!!et.select("caption",H)[0],class:et.getAttrib(H,"class",""),align:e1(D,H),...te?os(H):{}}},oh=(D,H,te)=>{const ye=D.dom;return{height:ye.getStyle(H,"height")||ye.getAttrib(H,"height"),class:ye.getAttrib(H,"class",""),type:Ud(H),align:e1(D,H),...te?os(H):{}}},so=(D,H,te,ye)=>{const et=D.dom,an=ye.getOr(H);return{width:((Fo,$o)=>et.getStyle(Fo,$o)||et.getAttrib(Fo,$o))(an,"width"),scope:et.getAttrib(H,"scope"),celltype:Tn(H),class:et.getAttrib(H,"class",""),halign:e1(D,H),valign:Sv(D,H),...te?os(H):{}}},Qu=(D,H)=>{const te=Nm.fromTable(D),ye=Nm.justCells(te),et=Mt(ye,an=>Bt(H,xn=>ns(an.element,xn)));return pt(et,an=>({element:an.element.dom,column:Nm.getColumnAt(te,an.column).map(xn=>xn.element.dom)}))},Vm=(D,H,te,ye)=>{ye("scope")&&D.setAttrib("scope",te.scope),ye("class")&&te.class!=="mce-no-match"&&D.setAttrib("class",te.class),ye("width")&&H.setStyle("width",Bo(te.width))},xd=(D,H,te)=>{te("backgroundcolor")&&D.setFormat("tablecellbackgroundcolor",H.backgroundcolor),te("bordercolor")&&D.setFormat("tablecellbordercolor",H.bordercolor),te("borderstyle")&&D.setFormat("tablecellborderstyle",H.borderstyle),te("borderwidth")&&D.setFormat("tablecellborderwidth",Bo(H.borderwidth))},Fu=(D,H,te,ye)=>{const et=H.length===1;Y(H,an=>{const xn=an.element,Fo=et?qt:ye,$o=qe.normal(D,xn),Ss=an.column.map(ua=>qe.normal(D,ua)).getOr($o);Vm($o,Ss,te,Fo),Fm(D)&&xd($o,te,Fo),ye("halign")&&ic(D,xn,te.halign),ye("valign")&&Bm(D,xn,te.valign)})},n1=(D,H)=>{D.execCommand("mceTableCellType",!1,{type:H.celltype,no_events:!0})},Rg=(D,H,te,ye)=>{const et=z(ye,(an,xn)=>te[xn]!==an);B(et)>0&&H.length>=1&&St(H[0]).each(an=>{const xn=Qu(an,H),Fo=B(z(et,(Ss,ua)=>ua!=="scope"&&ua!=="celltype"))>0,$o=Le(et,"celltype");(Fo||Le(et,"scope"))&&Fu(D,xn,ye,ue(Le,et)),$o&&n1(D,ye),we(D,an.dom,{structure:$o,style:Fo})})},ap=(D,H,te,ye)=>{const et=ye.getData();ye.close(),D.undoManager.transact(()=>{Rg(D,H,te,et),D.focus()})},o1=(D,H)=>{const te=St(H[0]).map(ye=>pt(Qu(ye,H),et=>so(D,et.element,Fm(D),et.column)));return Ju(te.getOrDie())},rg=D=>{const H=yc(D);if(H.length===0)return;const te=o1(D,H),ye={type:"tabpanel",tabs:[{title:"General",name:"general",items:j(D)},ne(D,"cell")]},et={type:"panel",items:[{type:"grid",columns:2,items:j(D)}]};D.windowManager.open({title:"Cell Properties",size:"normal",body:Fm(D)?ye:et,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:te,onSubmit:ue(ap,D,H,te)})},Ex=D=>Su(xv(D)).map(H=>({name:"class",type:"listbox",label:"Class",items:H})),Li=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],_n=D=>Li.concat(Ex(D).toArray()),$s=(D,H,te)=>{te("class")&&H.class!=="mce-no-match"&&D.setAttrib("class",H.class),te("height")&&D.setStyle("height",Bo(H.height))},Uo=(D,H,te)=>{te("backgroundcolor")&&D.setStyle("background-color",H.backgroundcolor),te("bordercolor")&&D.setStyle("border-color",H.bordercolor),te("borderstyle")&&D.setStyle("border-style",H.borderstyle)},fc=(D,H,te,ye)=>{const an=H.length===1?qt:ye;Y(H,xn=>{const Fo=Al(Gt.fromDom(xn),"td,th"),$o=qe.normal(D,xn);$s($o,te,an),Ic(D)&&Uo($o,te,an),ye("height")&&Y(Fo,Ss=>{D.dom.setStyle(Ss.dom,"height",null)}),ye("align")&&ic(D,xn,te.align)})},sh=(D,H)=>{D.execCommand("mceTableRowType",!1,{type:H.type,no_events:!0})},Gc=(D,H,te,ye)=>{const et=z(ye,(an,xn)=>te[xn]!==an);if(B(et)>0){const an=Le(et,"type"),xn=an?B(et)>1:!0;xn&&fc(D,H,ye,ue(Le,et)),an&&sh(D,ye),St(Gt.fromDom(H[0])).each(Fo=>we(D,Fo.dom,{structure:an,style:xn}))}},aa=(D,H,te,ye)=>{const et=ye.getData();ye.close(),D.undoManager.transact(()=>{Gc(D,H,te,et),D.focus()})},Ja=D=>{const H=Gl(Vo(D),Ya.selected);if(H.length===0)return;const te=pt(H,xn=>oh(D,xn.dom,Ic(D))),ye=Ju(te),et={type:"tabpanel",tabs:[{title:"General",name:"general",items:_n(D)},ne(D,"row")]},an={type:"panel",items:[{type:"grid",columns:2,items:_n(D)}]};D.windowManager.open({title:"Row Properties",size:"normal",body:Ic(D)?et:an,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ye,onSubmit:ue(aa,D,pt(H,xn=>xn.dom),ye)})},dn=(D,H,te)=>{const ye=te?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],et=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],an=og(D)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],xn=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Fo=H.length>0?[{name:"class",type:"listbox",label:"Class",items:H}]:[];return ye.concat(et).concat(an).concat(xn).concat(Fo)},ia=(D,H,te,ye)=>{if(H.tagName==="TD"||H.tagName==="TH")no(te)&&st(ye)?D.setStyle(H,te,ye):D.setStyles(H,te);else if(H.children)for(let et=0;et<H.children.length;et++)ia(D,H.children[et],te,ye)},tn=(D,H,te,ye)=>{const et=D.dom,an={},xn={},Fo=Br(D),$o=Go(D),Ss=parseFloat(te.border)===0;if(!To(te.class)&&te.class!=="mce-no-match"&&(an.class=te.class),xn.height=Bo(te.height),Fo?xn.width=Bo(te.width):et.getAttrib(H,"width")&&(an.width=Eo(te.width)),Fo?(Ss?(an.border=0,xn["border-width"]=""):(xn["border-width"]=Bo(te.border),an.border=1),xn["border-spacing"]=Bo(te.cellspacing)):(an.border=Ss?0:te.border,an.cellpadding=te.cellpadding,an.cellspacing=te.cellspacing),Fo&&H.children){const ua={};if(Ss?ua["border-width"]="":ye.border&&(ua["border-width"]=Bo(te.border)),ye.cellpadding&&(ua.padding=Bo(te.cellpadding)),$o&&ye.bordercolor&&(ua["border-color"]=te.bordercolor),!mn(ua))for(let Pr=0;Pr<H.children.length;Pr++)ia(et,H.children[Pr],ua)}if($o){const ua=te;xn["background-color"]=ua.backgroundcolor,xn["border-color"]=ua.bordercolor,xn["border-style"]=ua.borderstyle}et.setStyles(H,{...Lm(D),...xn}),et.setAttribs(H,{...sg(D),...an})},qc=(D,H,te,ye)=>{const et=D.dom,an=ye.getData(),xn=z(an,(Fo,$o)=>te[$o]!==Fo);ye.close(),D.undoManager.transact(()=>{if(!H){const Fo=ui(an.cols).getOr(1),$o=ui(an.rows).getOr(1);D.execCommand("mceInsertTable",!1,{rows:$o,columns:Fo}),H=wo(Vo(D),xo(D)).bind(Ss=>St(Ss,xo(D))).map(Ss=>Ss.dom).getOrDie()}if(B(xn)>0){const Fo={border:Le(xn,"border"),bordercolor:Le(xn,"bordercolor"),cellpadding:Le(xn,"cellpadding")};tn(D,H,an,Fo);const $o=et.select("caption",H)[0];($o&&!an.caption||!$o&&an.caption)&&D.execCommand("mceTableToggleCaption"),ic(D,H,an.align)}if(D.focus(),D.addVisual(),B(xn)>0){const Fo=Le(xn,"caption"),$o=Fo?B(xn)>1:!0;we(D,H,{structure:Fo,style:$o})}})},Kc=(D,H)=>{const te=D.dom;let ye,et=t1(D,Go(D));H?(et.cols="1",et.rows="1",Go(D)&&(et.borderstyle="",et.bordercolor="",et.backgroundcolor="")):(ye=te.getParent(D.selection.getStart(),"table",D.getBody()),ye?et=vf(D,ye,Go(D)):Go(D)&&(et.borderstyle="",et.bordercolor="",et.backgroundcolor=""));const an=Su(Pm(D));an.isSome()&&et.class&&(et.class=et.class.replace(/\s*mce\-item\-table\s*/g,""));const xn={type:"grid",columns:2,items:dn(D,an.getOr([]),H)},Fo=()=>({type:"panel",items:[xn]}),$o=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[xn]},ne(D,"table")]}),Ss=Go(D)?$o():Fo();D.windowManager.open({title:"Table Properties",size:"normal",body:Ss,onSubmit:ue(qc,D,ye,et),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:et})},ed=D=>{const H=te=>{hr(Vo(D))&&te()};qn({mceTableProps:ue(Kc,D,!1),mceTableRowProps:ue(Ja,D),mceTableCellProps:ue(rg,D),mceInsertTableDialog:ue(Kc,D,!0)},(te,ye)=>D.addCommand(ye,()=>H(te)))},kv=(D,H)=>ka(D,H).isSome(),lm=Ue,_x=D=>{const H=(ye,et)=>Ti(ye,et).exists(an=>parseInt(an,10)>1),te=ye=>H(ye,"rowspan")||H(ye,"colspan");return D.length>0&&ct(D,te)?re.some(D):re.none()},au=(D,H,te)=>H.length<=1?re.none():th(D,te.firstSelectedSelector,te.lastSelectedSelector).map(ye=>({bounds:ye,cells:H})),Cs=D=>({element:D,mergable:re.none(),unmergable:re.none(),selection:[D]}),ku=(D,H,te)=>({element:te,mergable:au(H,D,Ya),unmergable:_x(D),selection:lm(D)}),s1=D=>{const H=va(re.none()),te=va([]);let ye=re.none();const et=Bi("caption"),an=$r=>ye.forall(ai=>!ai[$r]),xn=()=>Yt(Vo(D),xo(D)),Fo=()=>Yt(cs(D),xo(D)),$o=()=>xn().bind($r=>Es(Ei(St($r),Fo().bind(St),(ai,Pu)=>ns(ai,Pu)?et($r)?re.some(Cs($r)):re.some(ku(yc(D),ai,$r)):re.none()))),Ss=$r=>St($r.element).map(Pu=>{const _c=Nm.fromTable(Pu),eb=cm(_c,$r).getOr([]),Tv=Nt(eb,(xf,td)=>(td.isLocked&&(xf.onAny=!0,td.column===0?xf.onFirst=!0:td.column+td.colspan>=_c.grid.columns&&(xf.onLast=!0)),xf),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:z0(_c,$r).isSome(),unmergeable:NC(_c,$r).isSome(),locked:Tv}}),ua=()=>{H.set(Oi($o)()),ye=H.get().bind(Ss),Y(te.get(),ve)},Pr=$r=>($r(),te.set(te.get().concat([$r])),()=>{te.set(Mt(te.get(),ai=>ai!==$r))}),gi=($r,ai)=>Pr(()=>H.get().fold(()=>{$r.setEnabled(!1)},Pu=>{$r.setEnabled(!ai(Pu)&&D.selection.isEditable())})),Lc=($r,ai,Pu)=>Pr(()=>H.get().fold(()=>{$r.setEnabled(!1),$r.setActive(!1)},_c=>{$r.setEnabled(!ai(_c)&&D.selection.isEditable()),$r.setActive(Pu(_c))})),ag=$r=>ye.exists(ai=>ai.locked[$r]),iu=$r=>gi($r,ai=>!1),Um=$r=>gi($r,ai=>et(ai.element)),r1=$r=>ai=>gi(ai,Pu=>et(Pu.element)||ag($r)),yf=$r=>ai=>gi(ai,Pu=>et(Pu.element)||$r().isNone()),ig=($r,ai)=>Pu=>gi(Pu,_c=>et(_c.element)||$r().isNone()||ag(ai)),ip=$r=>gi($r,ai=>an("mergeable")),a1=$r=>gi($r,ai=>an("unmergeable")),Qh=$r=>Lc($r,In,ai=>St(ai.element,xo(D)).exists(_c=>kv(_c,"caption"))),i1=($r,ai)=>Pu=>Lc(Pu,_c=>et(_c.element),()=>D.queryCommandValue($r)===ai),Xc=i1("mceTableRowType","header"),cg=i1("mceTableColType","th");return D.on("NodeChange ExecCommand TableSelectorChange",ua),{onSetupTable:iu,onSetupCellOrRow:Um,onSetupColumn:r1,onSetupPasteable:yf,onSetupPasteableColumn:ig,onSetupMergeable:ip,onSetupUnmergeable:a1,resetTargets:ua,onSetupTableWithCaption:Qh,onSetupTableRowHeaders:Xc,onSetupTableColumnHeaders:cg,targets:H.get}};var ri=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jh="x-tinymce/dom-table-",Mg=Jh+"rows",um=Jh+"columns",Yc=D=>{var H;const te=(H=ri.read())!==null&&H!==void 0?H:[];return Dt(te,ye=>re.from(ye.getType(D)))},yl=()=>Yc(Mg),Ct=()=>Yc(um),fa=D=>H=>{const te=()=>{H.setEnabled(D.selection.isEditable())};return D.on("NodeChange",te),te(),()=>{D.off("NodeChange",te)}},wd=(D,H)=>{D.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:fa(D),fetch:Fo=>Fo("inserttable | cell row column | advtablesort | tableprops deletetable")});const te=Fo=>()=>D.execCommand(Fo),ye=(Fo,$o)=>{D.queryCommandSupported($o.command)&&D.ui.registry.addButton(Fo,{...$o,onAction:es($o.onAction)?$o.onAction:te($o.command)})},et=(Fo,$o)=>{D.queryCommandSupported($o.command)&&D.ui.registry.addToggleButton(Fo,{...$o,onAction:es($o.onAction)?$o.onAction:te($o.command)})};ye("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:H.onSetupTable}),ye("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:H.onSetupTable}),ye("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:H.onSetupCellOrRow}),ye("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:H.onSetupMergeable}),ye("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:H.onSetupUnmergeable}),ye("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:H.onSetupCellOrRow}),ye("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:H.onSetupCellOrRow}),ye("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:H.onSetupCellOrRow}),ye("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:H.onSetupCellOrRow}),ye("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:H.onSetupColumn("onFirst")}),ye("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:H.onSetupColumn("onLast")}),ye("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:H.onSetupColumn("onAny")}),ye("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:H.onSetupCellOrRow}),ye("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:H.onSetupCellOrRow}),ye("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:H.onSetupPasteable(yl)}),ye("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:H.onSetupPasteable(yl)}),ye("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:H.onSetupColumn("onAny")}),ye("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:H.onSetupColumn("onAny")}),ye("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:H.onSetupPasteableColumn(Ct,"onFirst")}),ye("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:H.onSetupPasteableColumn(Ct,"onLast")}),ye("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:fa(D)});const an=mi(Pm(D));an.length!==0&&D.queryCommandSupported("mceTableToggleClass")&&D.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:am(D,an,"tableclass",Fo=>D.execCommand("mceTableToggleClass",!1,Fo)),onSetup:H.onSetupTable});const xn=mi(su(D));xn.length!==0&&D.queryCommandSupported("mceTableCellToggleClass")&&D.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:am(D,xn,"tablecellclass",Fo=>D.execCommand("mceTableCellToggleClass",!1,Fo)),onSetup:H.onSetupCellOrRow}),D.queryCommandSupported("mceTableApplyCellStyle")&&(D.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:am(D,mc,"tablecellverticalalign",Ag(D,"vertical-align")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:am(D,_i(D),"tablecellborderwidth",Ag(D,"border-width")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:am(D,Im(D),"tablecellborderstyle",Ag(D,"border-style")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Fo=>Fo(yd(D,Wl(D),"background-color")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Fo=>Fo(yd(D,Jp(D),"border-color")),onSetup:H.onSetupCellOrRow})),et("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:H.onSetupTableWithCaption}),et("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:yr(D),onSetup:H.onSetupTableRowHeaders}),et("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:im(D),onSetup:H.onSetupTableColumnHeaders})},gn=D=>{const H=ye=>D.dom.is(ye,"table")&&D.getBody().contains(ye)&&D.dom.isEditable(ye.parentNode),te=vr(D);te.length>0&&D.ui.registry.addContextToolbar("table",{predicate:H,items:te,scope:"node",position:"node"})},Kl=D=>H=>{const te=()=>{H.setEnabled(D.selection.isEditable())};return D.on("NodeChange",te),te(),()=>{D.off("NodeChange",te)}},Ra=(D,H)=>{const te=Pr=>()=>D.execCommand(Pr),ye=(Pr,gi)=>D.queryCommandSupported(gi.command)?(D.ui.registry.addMenuItem(Pr,{...gi,onAction:es(gi.onAction)?gi.onAction:te(gi.command)}),!0):!1,et=(Pr,gi)=>{D.queryCommandSupported(gi.command)&&D.ui.registry.addToggleMenuItem(Pr,{...gi,onAction:es(gi.onAction)?gi.onAction:te(gi.command)})},an=Pr=>{D.execCommand("mceInsertTable",!1,{rows:Pr.numRows,columns:Pr.numColumns})},xn=[ye("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:H.onSetupCellOrRow}),ye("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:H.onSetupCellOrRow}),ye("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:H.onSetupCellOrRow}),ye("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:H.onSetupCellOrRow}),ye("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:H.onSetupCellOrRow}),ye("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:H.onSetupCellOrRow}),ye("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:H.onSetupPasteable(yl)}),ye("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:H.onSetupPasteable(yl)})],Fo=[ye("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:H.onSetupColumn("onFirst")}),ye("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:H.onSetupColumn("onLast")}),ye("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:H.onSetupColumn("onAny")}),ye("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:H.onSetupColumn("onAny")}),ye("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:H.onSetupColumn("onAny")}),ye("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:H.onSetupPasteableColumn(Ct,"onFirst")}),ye("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:H.onSetupPasteableColumn(Ct,"onLast")})],$o=[ye("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:H.onSetupCellOrRow}),ye("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:H.onSetupMergeable}),ye("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:H.onSetupUnmergeable})];Hd(D)?D.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:an}],onSetup:Kl(D)}):D.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:te("mceInsertTableDialog"),onSetup:Kl(D)}),D.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:te("mceInsertTableDialog"),onSetup:Kl(D)}),ye("tableprops",{text:"Table properties",onSetup:H.onSetupTable,command:"mceTableProps"}),ye("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:H.onSetupTable,command:"mceTableDelete"}),tt(xn,!0)&&D.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Vt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),tt(Fo,!0)&&D.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Vt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),tt($o,!0)&&D.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Vt("tablecellprops tablemergecells tablesplitcells")}),D.ui.registry.addContextMenu("table",{update:()=>(H.resetTargets(),H.targets().fold(Vt(""),Pr=>vn(Pr.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Ss=mi(Pm(D));Ss.length!==0&&D.queryCommandSupported("mceTableToggleClass")&&D.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>zm(D,Ss,"tableclass",Pr=>D.execCommand("mceTableToggleClass",!1,Pr)),onSetup:H.onSetupTable});const ua=mi(su(D));ua.length!==0&&D.queryCommandSupported("mceTableCellToggleClass")&&D.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>zm(D,ua,"tablecellclass",Pr=>D.execCommand("mceTableCellToggleClass",!1,Pr)),onSetup:H.onSetupCellOrRow}),D.queryCommandSupported("mceTableApplyCellStyle")&&(D.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>zm(D,mc,"tablecellverticalalign",Ag(D,"vertical-align")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>zm(D,_i(D),"tablecellborderwidth",Ag(D,"border-width")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>zm(D,Im(D),"tablecellborderstyle",Ag(D,"border-style")),onSetup:H.onSetupCellOrRow}),D.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>yd(D,Wl(D),"background-color"),onSetup:H.onSetupCellOrRow}),D.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>yd(D,Jp(D),"border-color"),onSetup:H.onSetupCellOrRow})),et("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:H.onSetupTableWithCaption}),et("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:yr(D),onSetup:H.onSetupTableRowHeaders}),et("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:im(D),onSetup:H.onSetupTableRowHeaders})},Ea=D=>{const H=s1(D);Bc(D),ed(D),Ra(D,H),wd(D,H),gn(D)};var V0=()=>{$n.add("table",Ea)};V0()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(I,j,ne)=>{var ze;return ne(I,j.prototype)?!0:((ze=I.constructor)===null||ze===void 0?void 0:ze.name)===j.name},mo=I=>{const j=typeof I;return I===null?"null":j==="object"&&Array.isArray(I)?"array":j==="object"&&Xo(I,String,(ne,ze)=>ze.isPrototypeOf(ne))?"string":j},vo=I=>j=>mo(j)===I,ko=I=>j=>typeof j===I,wn=vo("string"),no=vo("object"),Tt=vo("array"),Fn=ko("boolean"),To=I=>I==null,ss=I=>!To(I),st=ko("function"),es=ko("number"),Vn=()=>{},kn=(I,j)=>ne=>I(j(ne)),zn=I=>()=>I,Vt=(I,j)=>I===j;function Ue(I,...j){return(...ne)=>{const ze=j.concat(ne);return I.apply(null,ze)}}const at=I=>j=>!I(j),ue=zn(!1);class ve{constructor(j,ne){this.tag=j,this.value=ne}static some(j){return new ve(!0,j)}static none(){return ve.singletonNone}fold(j,ne){return this.tag?ne(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?ve.some(j(this.value)):ve.none()}bind(j){return this.tag?j(this.value):ve.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:ve.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return ss(j)?ve.some(j):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const In=Array.prototype.slice,qt=Array.prototype.indexOf,re=Array.prototype.push,rn=(I,j)=>qt.call(I,j),oo=(I,j)=>rn(I,j)>-1,qn=(I,j)=>{for(let ne=0,ze=I.length;ne<ze;ne++){const qe=I[ne];if(j(qe,ne))return!0}return!1},Qe=(I,j)=>{const ne=I.length,ze=new Array(ne);for(let qe=0;qe<ne;qe++){const Sn=I[qe];ze[qe]=j(Sn,qe)}return ze},Be=(I,j)=>{for(let ne=0,ze=I.length;ne<ze;ne++){const qe=I[ne];j(qe,ne)}},z=(I,j)=>{const ne=[];for(let ze=0,qe=I.length;ze<qe;ze++){const Sn=I[ze];j(Sn,ze)&&ne.push(Sn)}return ne},$t=(I,j)=>{if(I.length===0)return[];{let ne=j(I[0]);const ze=[];let qe=[];for(let Sn=0,as=I.length;Sn<as;Sn++){const Ys=I[Sn],Os=j(Ys);Os!==ne&&(ze.push(qe),qe=[]),ne=Os,qe.push(Ys)}return qe.length!==0&&ze.push(qe),ze}},Kt=(I,j,ne)=>(Be(I,(ze,qe)=>{ne=j(ne,ze,qe)}),ne),B=(I,j,ne)=>{for(let ze=0,qe=I.length;ze<qe;ze++){const Sn=I[ze];if(j(Sn,ze))return ve.some(Sn);if(ne(Sn,ze))break}return ve.none()},Jt=(I,j)=>B(I,j,ue),Le=I=>{const j=[];for(let ne=0,ze=I.length;ne<ze;++ne){if(!Tt(I[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+I);re.apply(j,I[ne])}return j},Qt=(I,j)=>Le(Qe(I,j)),mn=I=>{const j=In.call(I,0);return j.reverse(),j},Se=(I,j)=>j>=0&&j<I.length?ve.some(I[j]):ve.none(),Oe=I=>Se(I,0),ft=I=>Se(I,I.length-1),tt=(I,j)=>{const ne=[],ze=st(j)?qe=>qn(ne,Sn=>j(Sn,qe)):qe=>oo(ne,qe);for(let qe=0,Sn=I.length;qe<Sn;qe++){const as=I[qe];ze(as)||ne.push(as)}return ne},Bt=(I,j,ne=Vt)=>I.exists(ze=>ne(ze,j)),$e=(I,j,ne=Vt)=>pt(I,j,ne).getOr(I.isNone()&&j.isNone()),pt=(I,j,ne)=>I.isSome()&&j.isSome()?ve.some(ne(I.getOrDie(),j.getOrDie())):ve.none(),Y=8,Jo=11,Et=1,Mt=3,Pn=(I,j)=>{const ze=(j||document).createElement("div");if(ze.innerHTML=I,!ze.hasChildNodes()||ze.childNodes.length>1){const qe="HTML does not have a single root node";throw console.error(qe,I),new Error(qe)}return De(ze.childNodes[0])},Nt=(I,j)=>{const ze=(j||document).createElement(I);return De(ze)},ce=(I,j)=>{const ze=(j||document).createTextNode(I);return De(ze)},De=I=>{if(I==null)throw new Error("Node cannot be null or undefined");return{dom:I}},oe={fromHtml:Pn,fromTag:Nt,fromText:ce,fromDom:De,fromPoint:(I,j,ne)=>ve.from(I.dom.elementFromPoint(j,ne)).map(De)},ct=(I,j)=>{const ne=I.dom;if(ne.nodeType!==Et)return!1;{const ze=ne;if(ze.matches!==void 0)return ze.matches(j);if(ze.msMatchesSelector!==void 0)return ze.msMatchesSelector(j);if(ze.webkitMatchesSelector!==void 0)return ze.webkitMatchesSelector(j);if(ze.mozMatchesSelector!==void 0)return ze.mozMatchesSelector(j);throw new Error("Browser lacks native selectors")}},At=(I,j)=>I.dom===j.dom,dt=(I,j)=>{const ne=I.dom,ze=j.dom;return ne===ze?!1:ne.contains(ze)},An=ct,it=typeof window<"u"?window:Function("return this;")(),Dt=(I,j)=>{let ne=j??it;for(let ze=0;ze<I.length&&ne!==void 0&&ne!==null;++ze)ne=ne[I[ze]];return ne},hn=(I,j)=>{const ne=I.split(".");return Dt(ne,j)},Hn=(I,j)=>hn(I,j),ut=(I,j)=>{const ne=Hn(I,j);if(ne==null)throw new Error(I+" not available on this browser");return ne},ot=Object.getPrototypeOf,rt=I=>ut("HTMLElement",I),nn=I=>{const j=hn("ownerDocument.defaultView",I);return no(I)&&(rt(j).prototype.isPrototypeOf(I)||/^HTML\w*Element$/.test(ot(I).constructor.name))},Zo=I=>I.dom.nodeName.toLowerCase(),Co=I=>I.dom.nodeType,Mn=I=>j=>Co(j)===I,No=I=>Co(I)===Y||Zo(I)==="#comment",Gt=I=>yo(I)&&nn(I.dom),yo=Mn(Et),gr=Mn(Mt),Us=Mn(Jo),ma=I=>j=>yo(j)&&Zo(j)===I,ns=I=>ve.from(I.dom.parentNode).map(oe.fromDom),Pa=I=>ve.from(I.dom.parentElement).map(oe.fromDom),vn=I=>ve.from(I.dom.nextSibling).map(oe.fromDom),Ls=I=>Qe(I.dom.childNodes,oe.fromDom),Ba=(I,j)=>{const ne=I.dom.childNodes;return ve.from(ne[j]).map(oe.fromDom)},Dr=I=>Ba(I,0),Gi=I=>Ba(I,I.dom.childNodes.length-1),hi=I=>Us(I)&&ss(I.dom.host),Er=I=>oe.fromDom(I.dom.getRootNode()),bi=I=>{const j=Er(I);return hi(j)?ve.some(j):ve.none()},Bi=I=>oe.fromDom(I.dom.host),kr=I=>{const j=gr(I)?I.dom.parentNode:I.dom;if(j==null||j.ownerDocument===null)return!1;const ne=j.ownerDocument;return bi(oe.fromDom(j)).fold(()=>ne.body.contains(j),kn(kr,Bi))};var Lo=(I,j,ne,ze,qe)=>I(ne,ze)?ve.some(ne):st(qe)&&qe(ne)?ve.none():j(ne,ze,qe);const Aa=(I,j,ne)=>{let ze=I.dom;const qe=st(ne)?ne:ue;for(;ze.parentNode;){ze=ze.parentNode;const Sn=oe.fromDom(ze);if(j(Sn))return ve.some(Sn);if(qe(Sn))break}return ve.none()},vi=(I,j,ne)=>Lo((qe,Sn)=>Sn(qe),Aa,I,j,ne),nu=(I,j,ne)=>Aa(I,ze=>ct(ze,j),ne),yt=(I,j,ne)=>Lo((qe,Sn)=>ct(qe,Sn),nu,I,j,ne),Xr=I=>yt(I,"[contenteditable]"),Oa=(I,j=!1)=>kr(I)?I.dom.isContentEditable:Xr(I).fold(zn(j),ne=>Ia(ne)==="true"),Ia=I=>I.dom.contentEditable,Mc=(I,j)=>{ns(I).each(ze=>{ze.dom.insertBefore(j.dom,I.dom)})},ac=(I,j)=>{vn(I).fold(()=>{ns(I).each(qe=>{Ve(qe,j)})},ze=>{Mc(ze,j)})},Ga=(I,j)=>{Dr(I).fold(()=>{Ve(I,j)},ze=>{I.dom.insertBefore(j.dom,ze.dom)})},Ve=(I,j)=>{I.dom.appendChild(j.dom)},Pe=(I,j)=>{Be(j,ne=>{Mc(I,ne)})},Rt=(I,j)=>{Be(j,ne=>{Ve(I,ne)})},Ht=I=>{I.dom.textContent="",Be(Ls(I),j=>{Qo(j)})},Qo=I=>{const j=I.dom;j.parentNode!==null&&j.parentNode.removeChild(j)};var vs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Fs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ka=tinymce.util.Tools.resolve("tinymce.util.VK");const fn=I=>Qe(I,oe.fromDom),xt=Object.keys,We=(I,j)=>{const ne=xt(I);for(let ze=0,qe=ne.length;ze<qe;ze++){const Sn=ne[ze],as=I[Sn];j(as,Sn)}},Ge=I=>(j,ne)=>{I[ne]=j},pn=(I,j,ne,ze)=>{We(I,(qe,Sn)=>{(j(qe,Sn)?ne:ze)(qe,Sn)})},Tn=(I,j)=>{const ne={};return pn(I,j,Ge(ne),Vn),ne},Xn=(I,j,ne)=>{if(wn(ne)||Fn(ne)||es(ne))I.setAttribute(j,ne+"");else throw console.error("Invalid call to Attribute.set. Key ",j,":: Value ",ne,":: Element ",I),new Error("Attribute value was not simple")},xo=(I,j)=>{const ne=I.dom;We(j,(ze,qe)=>{Xn(ne,qe,ze)})},Eo=I=>Kt(I.dom.attributes,(j,ne)=>(j[ne.name]=ne.value,j),{}),Bo=(I,j)=>oe.fromDom(I.dom.cloneNode(j)),Vo=I=>Bo(I,!0),cs=(I,j)=>{const ne=oe.fromTag(j),ze=Eo(I);return xo(ne,ze),ne},hr=(I,j)=>{const ne=cs(I,j);ac(I,ne);const ze=Ls(I);return Rt(ne,ze),Qo(I),ne};var Va=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ur=tinymce.util.Tools.resolve("tinymce.util.Tools");const Al=I=>j=>ss(j)&&j.nodeName.toLowerCase()===I,La=I=>j=>ss(j)&&I.test(j.nodeName),Bs=I=>ss(I)&&I.nodeType===3,er=I=>ss(I)&&I.nodeType===1,ar=La(/^(OL|UL|DL)$/),Ua=La(/^(OL|UL)$/),Ti=Al("ol"),Wc=La(/^(LI|DT|DD)$/),Ta=La(/^(DT|DD)$/),ws=La(/^(TH|TD)$/),yu=Al("br"),Ei=I=>{var j;return((j=I.parentNode)===null||j===void 0?void 0:j.firstChild)===I},Es=(I,j)=>ss(j)&&j.nodeName in I.schema.getTextBlockElements(),xu=(I,j)=>ss(I)&&I.nodeName in j,Xs=(I,j)=>ss(j)&&j.nodeName in I.schema.getVoidElements(),hd=(I,j)=>yu(j)?I.isBlock(j.nextSibling)&&!yu(j.previousSibling):!1,Vl=(I,j,ne)=>{const ze=I.isEmpty(j);return ne&&I.select("span[data-mce-type=bookmark]",j).length>0?!1:ze},fs=(I,j)=>I.isChildOf(j,I.getRoot()),li=I=>j=>j.options.get(I),Ld=I=>{const j=I.options.register;j("lists_indent_on_tab",{processor:"boolean",default:!0})},Wa=li("lists_indent_on_tab"),Dm=li("forced_root_block"),ui=li("forced_root_block_attrs"),kg=(I,j,ne={})=>{const ze=I.dom,qe=I.schema.getBlockElements(),Sn=ze.createFragment(),as=Dm(I),Ys=ui(I);let Os,_o,Oi=!1;for(_o=ze.create(as,{...Ys,...ne.style?{style:ne.style}:{}}),xu(j.firstChild,qe)||Sn.appendChild(_o);Os=j.firstChild;){const Xa=Os.nodeName;!Oi&&(Xa!=="SPAN"||Os.getAttribute("data-mce-type")!=="bookmark")&&(Oi=!0),xu(Os,qe)?(Sn.appendChild(Os),_o=null):(_o||(_o=ze.create(as,Ys),Sn.appendChild(_o)),_o.appendChild(Os))}return!Oi&&_o&&_o.appendChild(ze.create("br",{"data-mce-bogus":"1"})),Sn},qi=Va.DOM,or=(I,j,ne)=>{const ze=_o=>{const Oi=_o.parentNode;Oi&&Ur.each(qe,Xa=>{Oi.insertBefore(Xa,ne.parentNode)}),qi.remove(_o)},qe=qi.select('span[data-mce-type="bookmark"]',j),Sn=kg(I,ne),as=qi.createRng();as.setStartAfter(ne),as.setEndAfter(j);const Ys=as.extractContents();for(let _o=Ys.firstChild;_o;_o=_o.firstChild)if(_o.nodeName==="LI"&&I.dom.isEmpty(_o)){qi.remove(_o);break}I.dom.isEmpty(Ys)||qi.insertAfter(Ys,j),qi.insertAfter(Sn,j);const Os=ne.parentElement;Os&&Vl(I.dom,Os)&&ze(Os),qi.remove(ne),Vl(I.dom,j)&&qi.remove(j)},wu=ma("dd"),Rm=ma("dt"),Ku=(I,j)=>{wu(j)?hr(j,"dt"):Rm(j)&&Pa(j).each(ne=>or(I,ne.dom,j.dom))},oi=I=>{Rm(I)&&hr(I,"dd")},qa=(I,j,ne)=>{j==="Indent"?Be(ne,oi):Be(ne,ze=>Ku(I,ze))},Ki=(I,j)=>{if(Bs(I))return{container:I,offset:j};const ne=vs.getNode(I,j);return Bs(ne)?{container:ne,offset:j>=I.childNodes.length?ne.data.length:0}:ne.previousSibling&&Bs(ne.previousSibling)?{container:ne.previousSibling,offset:ne.previousSibling.data.length}:ne.nextSibling&&Bs(ne.nextSibling)?{container:ne.nextSibling,offset:0}:{container:I,offset:j}},Wr=I=>{const j=I.cloneRange(),ne=Ki(I.startContainer,I.startOffset);j.setStart(ne.container,ne.offset);const ze=Ki(I.endContainer,I.endOffset);return j.setEnd(ze.container,ze.offset),j},bd=["OL","UL","DL"],ol=bd.join(","),le=(I,j)=>{const ne=j||I.selection.getStart(!0);return I.dom.getParent(ne,ol,br(I,ne))},He=(I,j)=>ss(I)&&j.length===1&&j[0]===I,Je=I=>z(I.querySelectorAll(ol),ar),Pt=I=>{const j=le(I),ne=I.selection.getSelectedBlocks();return He(j,ne)?Je(j):z(ne,ze=>ar(ze)&&j!==ze)},Nn=(I,j)=>{const ne=Ur.map(j,ze=>{const qe=I.dom.getParent(ze,"li,dd,dt",br(I,ze));return qe||ze});return tt(ne)},ho=I=>{const j=I.selection.getSelectedBlocks();return z(Nn(I,j),Wc)},Kn=I=>z(ho(I),Ta),ms=(I,j)=>{const ne=I.dom.getParents(j,"TD,TH");return ne.length>0?ne[0]:I.getBody()},Ds=(I,j)=>!ar(j)&&!Wc(j)&&qn(bd,ne=>I.isValidChild(j.nodeName,ne)),br=(I,j)=>{const ne=I.dom.getParents(j,I.dom.isBlock),ze=Sn=>Sn.nodeName.toLowerCase()!==Dm(I);return Jt(ne,Sn=>ze(Sn)&&Ds(I.schema,Sn)).getOr(I.getBody())},X=I=>ns(I).exists(j=>Wc(j.dom)&&Dr(j).exists(ne=>!ar(ne.dom))&&Gi(j).exists(ne=>!ar(ne.dom))),fe=(I,j)=>{const ne=I.dom.getParents(j,"ol,ul",br(I,j));return ft(ne)},Ze=I=>{const j=fe(I,I.selection.getStart()),ne=z(I.selection.getSelectedBlocks(),Ua);return j.toArray().concat(ne)},St=I=>{const j=I.selection.getStart();return I.dom.getParents(j,"ol,ul",br(I,j))},Oo=I=>{const j=Ze(I),ne=St(I);return Jt(ne,ze=>X(oe.fromDom(ze))).fold(()=>Gn(I,j),ze=>[ze])},Gn=(I,j)=>{const ne=Qe(j,ze=>fe(I,ze).getOr(ze));return tt(ne)},jr=I=>/\btox\-/.test(I.className),vc=(I,j)=>B(I,ar,ws).exists(ne=>ne.nodeName===j&&!jr(ne)),bn=(I,j)=>j!==null&&!I.dom.isEditable(j),fl=I=>{const j=le(I);return bn(I,j)||!I.selection.isEditable()},ba=(I,j)=>{const ne=I.dom.getParent(j,"ol,ul,dl");return bn(I,ne)||!I.selection.isEditable()},$d=(I,j)=>{const ne=I.selection.getNode();return j({parents:I.dom.getParents(ne),element:ne}),I.on("NodeChange",j),()=>I.off("NodeChange",j)},Ii=(I,j)=>{const ze=document.createDocumentFragment();return Be(I,qe=>{ze.appendChild(qe.dom)}),oe.fromDom(ze)},cr=(I,j,ne)=>I.dispatch("ListMutation",{action:j,element:ne}),Nc=(I=>j=>j.replace(I,""))(/^\s+|\s+$/g),Ul=I=>I.length>0,uc=I=>!Ul(I),Mm=I=>I.style!==void 0&&st(I.style.getPropertyValue),Xp=(I,j,ne)=>{if(!wn(ne))throw console.error("Invalid call to CSS.set. Property ",j,":: Value ",ne,":: Element ",I),new Error("CSS value must be a string: "+ne);Mm(I)&&I.style.setProperty(j,ne)},Qb=(I,j,ne)=>{const ze=I.dom;Xp(ze,j,ne)},Ka=I=>An(I,"OL,UL"),Nm=I=>An(I,"LI"),Ec=I=>Dr(I).exists(Ka),sl=I=>Gi(I).exists(Ka),ic=I=>"listAttributes"in I,Bm=I=>"isComment"in I,we=I=>"isFragment"in I,_e=I=>I.depth>0,wt=I=>I.isSelected,un=I=>{const j=Ls(I),ne=sl(I)?j.slice(0,-1):j;return Qe(ne,Vo)},Ko=(I,j,ne)=>ns(I).filter(yo).map(ze=>({depth:j,dirty:!1,isSelected:ne,content:un(I),itemAttributes:Eo(I),listAttributes:Eo(ze),listType:Zo(ze),isInPreviousLi:!1})),Ks=(I,j)=>{Ve(I.item,j.list)},nr=I=>{for(let j=1;j<I.length;j++)Ks(I[j-1],I[j])},Da=(I,j)=>{pt(ft(I),Oe(j),Ks)},si=(I,j)=>{const ne={list:oe.fromTag(j,I),item:oe.fromTag("li",I)};return Ve(ne.list,ne.item),ne},Fi=(I,j,ne)=>{const ze=[];for(let qe=0;qe<ne;qe++)ze.push(si(I,ic(j)?j.listType:j.parentListType));return ze},Ol=(I,j)=>{for(let ne=0;ne<I.length-1;ne++)Qb(I[ne].item,"list-style-type","none");ft(I).each(ne=>{ic(j)&&(xo(ne.list,j.listAttributes),xo(ne.item,j.itemAttributes)),Rt(ne.item,j.content)})},di=(I,j)=>{Zo(I.list)!==j.listType&&(I.list=hr(I.list,j.listType)),xo(I.list,j.listAttributes)},Pi=(I,j,ne)=>{const ze=oe.fromTag("li",I);return xo(ze,j),Rt(ze,ne),ze},dc=(I,j)=>{Ve(I.list,j),I.item=j},pl=(I,j,ne)=>{const ze=j.slice(0,ne.depth);return ft(ze).each(qe=>{if(ic(ne)){const Sn=Pi(I,ne.itemAttributes,ne.content);dc(qe,Sn),di(qe,ne)}else if(we(ne))Rt(qe.item,ne.content);else{const Sn=oe.fromHtml(`<!--${ne.content}-->`);Ve(qe.list,Sn)}}),ze},Yi=(I,j,ne)=>{const ze=Fi(I,ne,ne.depth-j.length);return nr(ze),Ol(ze,ne),Da(j,ze),j.concat(ze)},Bc=(I,j)=>{let ne=ve.none();const ze=Kt(j,(qe,Sn,as)=>Bm(Sn)?as===0?(ne=ve.some(Sn),qe):pl(I,qe,Sn):Sn.depth>qe.length?Yi(I,qe,Sn):pl(I,qe,Sn),[]);return ne.each(qe=>{const Sn=oe.fromHtml(`<!--${qe.content}-->`);Oe(ze).each(as=>{Ga(as.list,Sn)})}),Oe(ze).map(qe=>qe.list)},tr=(I,j)=>{switch(I){case"Indent":j.depth++;break;case"Outdent":j.depth--;break;case"Flatten":j.depth=0}j.dirty=!0},_i=(I,j)=>{ic(I)&&ic(j)&&(I.listType=j.listType,I.listAttributes={...j.listAttributes})},Im=I=>{I.listAttributes=Tn(I.listAttributes,(j,ne)=>ne!=="start")},Fm=(I,j)=>{const ne=I[j].depth,ze=Sn=>Sn.depth===ne&&!Sn.dirty,qe=Sn=>Sn.depth<ne;return B(mn(I.slice(0,j)),ze,qe).orThunk(()=>B(I.slice(j+1),ze,qe))},Ic=I=>(Be(I,(j,ne)=>{Fm(I,ne).fold(()=>{j.dirty&&ic(j)&&Im(j)},ze=>_i(j,ze))}),I),Go=I=>{let j=I;return{get:()=>j,set:qe=>{j=qe}}},og=(I,j,ne,ze)=>{var qe;if(No(ze))return[{depth:I+1,content:(qe=ze.dom.nodeValue)!==null&&qe!==void 0?qe:"",dirty:!1,isSelected:!1,isComment:!0}];j.each(Ys=>{At(Ys.start,ze)&&ne.set(!0)});const Sn=Ko(ze,I,ne.get());j.each(Ys=>{At(Ys.end,ze)&&ne.set(!1)});const as=Gi(ze).filter(Ka).map(Ys=>Br(I,j,ne,Ys)).getOr([]);return Sn.toArray().concat(as)},Hd=(I,j,ne,ze)=>Dr(ze).filter(Ka).fold(()=>og(I,j,ne,ze),qe=>{const Sn=Kt(Ls(ze),(as,Ys,Os)=>{if(Os===0)return as;if(Nm(Ys))return as.concat(og(I,j,ne,Ys));{const _o={isFragment:!0,depth:I,content:[Ys],isSelected:!1,dirty:!1,parentListType:Zo(qe)};return as.concat(_o)}},[]);return Br(I,j,ne,qe).concat(Sn)}),Br=(I,j,ne,ze)=>Qt(Ls(ze),qe=>{const Sn=Ka(qe)?Br:Hd,as=I+1;return Sn(as,j,ne,qe)}),su=(I,j)=>{const ne=Go(!1),ze=0;return Qe(I,qe=>({sourceList:qe,entries:Br(ze,j,ne,qe)}))},xv=(I,j)=>{const ne=Ic(j);return Qe(ne,ze=>{const qe=Bm(ze)?Ii([oe.fromHtml(`<!--${ze.content}-->`)]):Ii(ze.content),Sn=ic(ze)?ze.itemAttributes:{};return oe.fromDom(kg(I,qe.dom,Sn))})},Pm=(I,j)=>{const ne=Ic(j);return Bc(I.contentDocument,ne).toArray()},vr=(I,j)=>Qt($t(j,_e),ne=>Oe(ne).exists(_e)?Pm(I,ne):xv(I,ne)),Wl=(I,j)=>{Be(z(I,wt),ne=>tr(j,ne))},Jp=I=>{const j=Qe(ho(I),oe.fromDom);return pt(Jt(j,at(Ec)),Jt(mn(j),at(Ec)),(ne,ze)=>({start:ne,end:ze}))},Qp=(I,j,ne)=>{const ze=su(j,Jp(I));Be(ze,qe=>{Wl(qe.entries,ne);const Sn=vr(I,qe.entries);Be(Sn,as=>{cr(I,ne==="Indent"?"IndentList":"OutdentList",as.dom)}),Pe(qe.sourceList,Sn),Qo(qe.sourceList)})},cf=(I,j)=>{const ne=fn(Oo(I)),ze=fn(Kn(I));let qe=!1;if(ne.length||ze.length){const Sn=I.selection.getBookmark();Qp(I,ne,j),qa(I,j,ze),I.selection.moveToBookmark(Sn),I.selection.setRng(Wr(I.selection.getRng())),I.nodeChanged(),qe=!0}return qe},Lm=(I,j)=>!fl(I)&&cf(I,j),sg=I=>Lm(I,"Indent"),lf=I=>Lm(I,"Outdent"),Kh=I=>Lm(I,"Flatten"),je="\uFEFF",uf=I=>I===je,ga=(I,j,ne)=>Aa(I,j,ne).isSome(),Tx=(I,j)=>ga(I,Ue(At,j));var Yh=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const $m=Va.DOM,Lr=I=>{const j={},ne=ze=>{let qe=I[ze?"startContainer":"endContainer"],Sn=I[ze?"startOffset":"endOffset"];if(er(qe)){const as=$m.create("span",{"data-mce-type":"bookmark"});qe.hasChildNodes()?(Sn=Math.min(Sn,qe.childNodes.length-1),ze?qe.insertBefore(as,qe.childNodes[Sn]):$m.insertAfter(as,qe.childNodes[Sn])):qe.appendChild(as),qe=as,Sn=0}j[ze?"startContainer":"endContainer"]=qe,j[ze?"startOffset":"endOffset"]=Sn};return ne(!0),I.collapsed||ne(),j},Xi=I=>{const j=ze=>{const qe=Ys=>{var Os;let _o=(Os=Ys.parentNode)===null||Os===void 0?void 0:Os.firstChild,Oi=0;for(;_o;){if(_o===Ys)return Oi;(!er(_o)||_o.getAttribute("data-mce-type")!=="bookmark")&&Oi++,_o=_o.nextSibling}return-1};let Sn=I[ze?"startContainer":"endContainer"],as=I[ze?"startOffset":"endOffset"];if(Sn){if(er(Sn)&&Sn.parentNode){const Ys=Sn;as=qe(Sn),Sn=Sn.parentNode,$m.remove(Ys),!Sn.hasChildNodes()&&$m.isBlock(Sn)&&Sn.appendChild($m.create("br"))}I[ze?"startContainer":"endContainer"]=Sn,I[ze?"startOffset":"endOffset"]=as}};j(!0),j();const ne=$m.createRng();return ne.setStart(I.startContainer,I.startOffset),I.endContainer&&ne.setEnd(I.endContainer,I.endOffset),Wr(ne)},hl=I=>{switch(I){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},zd=(I,j,ne)=>{const ze=ne["list-style-type"]?ne["list-style-type"]:null;I.setStyle(j,"list-style-type",ze)},df=(I,j)=>{Ur.each(j,(ne,ze)=>{I.setAttribute(ze,ne)})},mf=(I,j,ne)=>{df(j,ne["list-attributes"]),Ur.each(I.select("li",j),ze=>{df(ze,ne["list-item-attributes"])})},jl=(I,j,ne)=>{zd(I,j,ne),mf(I,j,ne)},Xh=(I,j,ne)=>{Ur.each(ne,ze=>I.setStyle(j,ze,""))},eh=(I,j)=>ss(j)&&!xu(j,I.schema.getBlockElements()),Tg=(I,j,ne,ze)=>{let qe=j[ne?"startContainer":"endContainer"];const Sn=j[ne?"startOffset":"endOffset"];er(qe)&&(qe=qe.childNodes[Math.min(Sn,qe.childNodes.length-1)]||qe),!ne&&yu(qe.nextSibling)&&(qe=qe.nextSibling);const as=Os=>{for(;!I.dom.isBlock(Os)&&Os.parentNode&&ze!==Os;)Os=Os.parentNode;return Os},Ys=(Os,_o)=>{var Oi;const Xa=new Fs(Os,as(Os)),Bu=_o?"next":"prev";let Iu;for(;Iu=Xa[Bu]();)if(!(Xs(I,Iu)||uf(Iu.textContent)||((Oi=Iu.textContent)===null||Oi===void 0?void 0:Oi.length)===0))return ve.some(Iu);return ve.none()};if(ne&&Bs(qe))if(uf(qe.textContent))qe=Ys(qe,!1).getOr(qe);else for(qe.parentNode!==null&&eh(I,qe.parentNode)&&(qe=qe.parentNode);qe.previousSibling!==null&&(eh(I,qe.previousSibling)||Bs(qe.previousSibling));)qe=qe.previousSibling;if(!ne&&Bs(qe))if(uf(qe.textContent))qe=Ys(qe,!0).getOr(qe);else for(qe.parentNode!==null&&eh(I,qe.parentNode)&&(qe=qe.parentNode);qe.nextSibling!==null&&(eh(I,qe.nextSibling)||Bs(qe.nextSibling));)qe=qe.nextSibling;for(;qe.parentNode!==ze;){const Os=qe.parentNode;if(Es(I,qe)||/^(TD|TH)$/.test(Os.nodeName))return qe;qe=Os}return qe},rl=(I,j,ne)=>{const ze=[],qe=I.dom,Sn=Tg(I,j,!0,ne),as=Tg(I,j,!1,ne);let Ys;const Os=[];for(let _o=Sn;_o&&(Os.push(_o),_o!==as);_o=_o.nextSibling);return Ur.each(Os,_o=>{var Oi;if(Es(I,_o)){ze.push(_o),Ys=null;return}if(qe.isBlock(_o)||yu(_o)){yu(_o)&&qe.remove(_o),Ys=null;return}const Xa=_o.nextSibling;if(Yh.isBookmarkNode(_o)&&(ar(Xa)||Es(I,Xa)||!Xa&&_o.parentNode===ne)){Ys=null;return}Ys||(Ys=qe.create("p"),(Oi=_o.parentNode)===null||Oi===void 0||Oi.insertBefore(Ys,_o),ze.push(Ys)),Ys.appendChild(_o)}),ze},ps=(I,j,ne)=>{const ze=I.getStyle(j,"list-style-type");let qe=ne?ne["list-style-type"]:"";return qe=qe===null?"":qe,ze===qe},Dl=(I,j)=>{const ne=I.selection.getStart(!0),ze=Tg(I,j,!0,I.getBody());return Tx(oe.fromDom(ze),oe.fromDom(j.commonAncestorContainer))?j.commonAncestorContainer:ne},gf=(I,j,ne)=>{const ze=I.selection.getRng();let qe="LI";const Sn=br(I,Dl(I,ze)),as=I.dom;if(as.getContentEditable(I.selection.getNode())==="false")return;j=j.toUpperCase(),j==="DL"&&(qe="DT");const Ys=Lr(ze),Os=z(rl(I,ze,Sn),I.dom.isEditable);Ur.each(Os,_o=>{let Oi;const Xa=_o.previousSibling,Bu=_o.parentNode;Wc(Bu)||(Xa&&ar(Xa)&&Xa.nodeName===j&&ps(as,Xa,ne)?(Oi=Xa,_o=as.rename(_o,qe),Xa.appendChild(_o)):(Oi=as.create(j),Bu.insertBefore(Oi,_o),Oi.appendChild(_o),_o=as.rename(_o,qe)),Xh(as,_o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),jl(as,Oi,ne),Hm(I.dom,Oi))}),I.selection.setRng(Xi(Ys))},Rl=(I,j)=>ar(I)&&I.nodeName===(j==null?void 0:j.nodeName),om=(I,j,ne)=>{const ze=I.getStyle(j,"list-style-type",!0),qe=I.getStyle(ne,"list-style-type",!0);return ze===qe},al=(I,j)=>I.className===j.className,bl=(I,j,ne)=>Rl(j,ne)&&om(I,j,ne)&&al(j,ne),Hm=(I,j)=>{let ne,ze=j.nextSibling;if(bl(I,j,ze)){const qe=ze;for(;ne=qe.firstChild;)j.appendChild(ne);I.remove(qe)}if(ze=j.previousSibling,bl(I,j,ze)){const qe=ze;for(;ne=qe.lastChild;)j.insertBefore(ne,j.firstChild);I.remove(qe)}},Fc=(I,j,ne,ze)=>{if(j.nodeName!==ne){const qe=I.dom.rename(j,ne);jl(I.dom,qe,ze),cr(I,hl(ne),qe)}else jl(I.dom,j,ze),cr(I,hl(ne),j)},ff=(I,j,ne,ze)=>{if(j.classList.forEach((qe,Sn,as)=>{qe.startsWith("tox-")&&(as.remove(qe),as.length===0&&j.removeAttribute("class"))}),j.nodeName!==ne){const qe=I.dom.rename(j,ne);jl(I.dom,qe,ze),cr(I,hl(ne),qe)}else jl(I.dom,j,ze),cr(I,hl(ne),j)},Vd=(I,j,ne,ze,qe)=>{const Sn=ar(j);if(Sn&&j.nodeName===ze&&!pf(qe)&&!jr(j))Kh(I);else{gf(I,ze,qe);const as=Lr(I.selection.getRng()),Ys=Sn?[j,...ne]:ne,Os=Sn&&jr(j)?ff:Fc;Ur.each(Ys,_o=>{Os(I,_o,ze,qe)}),I.selection.setRng(Xi(as))}},pf=I=>"list-style-type"in I,$0=(I,j,ne,ze)=>{if(j!==I.getBody())if(j)if(j.nodeName===ne&&!pf(ze)&&!jr(j))Kh(I);else{const qe=Lr(I.selection.getRng());jr(j)&&j.classList.forEach((as,Ys,Os)=>{as.startsWith("tox-")&&(Os.remove(as),Os.length===0&&j.removeAttribute("class"))}),jl(I.dom,j,ze);const Sn=I.dom.rename(j,ne);Hm(I.dom,Sn),I.selection.setRng(Xi(qe)),gf(I,ne,ze),cr(I,hl(ne),Sn)}else gf(I,ne,ze),cr(I,hl(ne),j)},Eg=(I,j,ne)=>{const ze=le(I);if(ba(I,ze))return;const qe=Pt(I),Sn=no(ne)?ne:{};qe.length>0?Vd(I,ze,qe,j,Sn):$0(I,ze,j,Sn)},th=Va.DOM,wv=(I,j)=>{const ne=j.parentElement;if(ne&&ne.nodeName==="LI"&&ne.firstChild===j){const ze=ne.previousSibling;ze&&ze.nodeName==="LI"?(ze.appendChild(j),Vl(I,ne)&&th.remove(ne)):th.setStyle(ne,"listStyleType","none")}if(ar(ne)){const ze=ne.previousSibling;ze&&ze.nodeName==="LI"&&ze.appendChild(j)}},Ai=(I,j)=>{const ne=Ur.grep(I.select("ol,ul",j));Ur.each(ne,ze=>{wv(I,ze)})},Zl=(I,j,ne,ze)=>{let qe=j.startContainer;const Sn=j.startOffset;if(Bs(qe)&&(ne?Sn<qe.data.length:Sn>0))return qe;const as=I.schema.getNonEmptyElements();er(qe)&&(qe=vs.getNode(qe,Sn));const Ys=new Fs(qe,ze);ne&&hd(I.dom,qe)&&Ys.next();const Os=ne?Ys.next.bind(Ys):Ys.prev2.bind(Ys);for(;qe=Os();)if(qe.nodeName==="LI"&&!qe.hasChildNodes()||as[qe.nodeName]||Bs(qe)&&qe.data.length>0)return qe;return null},Ml=(I,j)=>{const ne=j.childNodes;return ne.length===1&&!ar(ne[0])&&I.isBlock(ne[0])},Yu=I=>ve.from(I).map(oe.fromDom).filter(Gt).exists(j=>Oa(j)&&!oo(["details"],Zo(j))),oa=(I,j)=>{Ml(I,j)&&Yu(j.firstChild)&&I.remove(j.firstChild,!0)},jc=(I,j,ne)=>{let ze;const qe=Ml(I,ne)?ne.firstChild:ne;if(oa(I,j),!Vl(I,j,!0))for(;ze=j.firstChild;)qe.appendChild(ze)},Ya=(I,j,ne)=>{let ze;const qe=j.parentNode;if(!fs(I,j)||!fs(I,ne))return;ar(ne.lastChild)&&(ze=ne.lastChild),qe===ne.lastChild&&yu(qe.previousSibling)&&I.remove(qe.previousSibling);const Sn=ne.lastChild;Sn&&yu(Sn)&&j.hasChildNodes()&&I.remove(Sn),Vl(I,ne,!0)&&Ht(oe.fromDom(ne)),jc(I,j,ne),ze&&ne.appendChild(ze);const Ys=dt(oe.fromDom(ne),oe.fromDom(j))?I.getParents(j,ar,ne):[];I.remove(j),Be(Ys,Os=>{Vl(I,Os)&&Os!==I.getRoot()&&I.remove(Os)})},vl=(I,j,ne)=>{Ht(oe.fromDom(ne)),Ya(I.dom,j,ne),I.selection.setCursorLocation(ne,0)},hf=(I,j,ne,ze)=>{const qe=I.dom;if(qe.isEmpty(ze))vl(I,ne,ze);else{const Sn=Lr(j);Ya(qe,ne,ze),I.selection.setRng(Xi(Sn))}},Yt=(I,j,ne,ze)=>{const qe=Lr(j);Ya(I.dom,ne,ze);const Sn=Xi(qe);I.selection.setRng(Sn)},wo=(I,j)=>{const ne=I.dom,ze=I.selection,qe=ze.getStart(),Sn=ms(I,qe),as=ne.getParent(ze.getStart(),"LI",Sn);if(as){const Ys=as.parentElement;if(Ys===I.getBody()&&Vl(ne,Ys))return!0;const Os=Wr(ze.getRng()),_o=ne.getParent(Zl(I,Os,j,Sn),"LI",Sn),Oi=_o&&(j?ne.isChildOf(as,_o):ne.isChildOf(_o,as));if(_o&&_o!==as&&!Oi)return I.undoManager.transact(()=>{j?hf(I,Os,_o,as):Ei(as)?lf(I):Yt(I,Os,as,_o)}),!0;if(Oi&&!j&&_o!==as)return I.undoManager.transact(()=>{if(Os.commonAncestorContainer.parentElement){const Xa=Lr(Os),Bu=Os.commonAncestorContainer.parentElement;jc(ne,Os.commonAncestorContainer.parentElement,_o),Bu.remove();const Iu=Xi(Xa);I.selection.setRng(Iu)}}),!0;if(!_o&&!j&&Os.startOffset===0&&Os.endOffset===0)return I.undoManager.transact(()=>{Kh(I)}),!0}return!1},yc=(I,j,ne)=>{const ze=I.getParent(j.parentNode,I.isBlock,ne);I.remove(j),ze&&I.isEmpty(ze)&&I.remove(ze)},Gl=(I,j)=>{const ne=I.dom,ze=I.selection.getStart(),qe=ms(I,ze),Sn=ne.getParent(ze,ne.isBlock,qe);if(Sn&&ne.isEmpty(Sn,void 0,{checkRootAsContent:!0})){const as=Wr(I.selection.getRng()),Ys=ne.getParent(Zl(I,as,j,qe),"LI",qe);if(Ys){const Os=Bu=>oo(["td","th","caption"],Zo(Bu)),_o=Bu=>Bu.dom===qe,Oi=vi(oe.fromDom(Ys),Os,_o),Xa=vi(oe.fromDom(as.startContainer),Os,_o);return $e(Oi,Xa,At)?(I.undoManager.transact(()=>{const Bu=Ys.parentNode;yc(ne,Sn,qe),Hm(ne,Bu),I.selection.select(Ys,!0),I.selection.collapse(j)}),!0):!1}}return!1},mc=(I,j)=>wo(I,j)||Gl(I,j),Ir=I=>{const j=I.selection.getStart(),ne=ms(I,j);return I.dom.getParent(j,"LI,DT,DD",ne)||ho(I).length>0},bf=I=>Ir(I)?(I.undoManager.transact(()=>{let j=!0;const ne=()=>j=!1;I.on("input",ne),I.execCommand("Delete"),I.off("input",ne),j&&I.dispatch("input"),Ai(I.dom,I.getBody())}),!0):!1,ql=(I,j)=>{const ne=I.selection;return!ba(I,ne.getNode())&&(ne.isCollapsed()?mc(I,j):bf(I))},Fr=I=>{I.on("ExecCommand",j=>{const ne=j.command.toLowerCase();(ne==="delete"||ne==="forwarddelete")&&Ir(I)&&Ai(I.dom,I.getBody())}),I.on("keydown",j=>{j.keyCode===ka.BACKSPACE?ql(I,!1)&&j.preventDefault():j.keyCode===ka.DELETE&&ql(I,!0)&&j.preventDefault()})},sm=I=>({backspaceDelete:j=>{ql(I,j)}}),Ws=(I,j)=>{const ne=le(I);ne===null||ba(I,ne)||I.undoManager.transact(()=>{no(j.styles)&&I.dom.setStyles(ne,j.styles),no(j.attrs)&&We(j.attrs,(ze,qe)=>I.dom.setAttrib(ne,qe,ze))})},_r=I=>{const j=mn(Nc(I).split("")),ne=Qe(j,(ze,qe)=>{const Sn=ze.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,qe)*Sn});return Kt(ne,(ze,qe)=>ze+qe,0)},_g=I=>{if(I--,I<0)return"";{const j=I%26,ne=Math.floor(I/26),ze=_g(ne),qe=String.fromCharCode(65+j);return ze+qe}},il=I=>/^[A-Z]+$/.test(I),Cu=I=>/^[a-z]+$/.test(I),gc=I=>/^[0-9]+$/.test(I),ht=I=>gc(I)?2:il(I)?0:Cu(I)?1:uc(I)?3:4,Ji=I=>{switch(ht(I)){case 2:return ve.some({listStyleType:ve.none(),start:I});case 0:return ve.some({listStyleType:ve.some("upper-alpha"),start:_r(I).toString()});case 1:return ve.some({listStyleType:ve.some("lower-alpha"),start:_r(I).toString()});case 3:return ve.some({listStyleType:ve.none(),start:""});case 4:return ve.none()}},Xu=I=>{const j=parseInt(I.start,10);return Bt(I.listStyleType,"upper-alpha")?_g(j):Bt(I.listStyleType,"lower-alpha")?_g(j).toLowerCase():I.start},yi=I=>{const j=le(I);!Ti(j)||ba(I,j)||I.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Xu({start:I.dom.getAttrib(j,"start","1"),listStyleType:ve.from(I.dom.getStyle(j,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ne=>{const ze=ne.getData();Ji(ze.start).each(qe=>{I.execCommand("mceListUpdate",!1,{attrs:{start:qe.start==="1"?"":qe.start},styles:{"list-style-type":qe.listStyleType.getOr("")}})}),ne.close()}})},va=(I,j)=>()=>{const ne=le(I);return ss(ne)&&ne.nodeName===j},cl=I=>{I.addCommand("mceListProps",()=>{yi(I)})},sr=I=>{I.on("BeforeExecCommand",j=>{const ne=j.command.toLowerCase();ne==="indent"?sg(I):ne==="outdent"&&lf(I)}),I.addCommand("InsertUnorderedList",(j,ne)=>{Eg(I,"UL",ne)}),I.addCommand("InsertOrderedList",(j,ne)=>{Eg(I,"OL",ne)}),I.addCommand("InsertDefinitionList",(j,ne)=>{Eg(I,"DL",ne)}),I.addCommand("RemoveList",()=>{Kh(I)}),cl(I),I.addCommand("mceListUpdate",(j,ne)=>{no(ne)&&Ws(I,ne)}),I.addQueryStateHandler("InsertUnorderedList",va(I,"UL")),I.addQueryStateHandler("InsertOrderedList",va(I,"OL")),I.addQueryStateHandler("InsertDefinitionList",va(I,"DL"))};var vd=tinymce.util.Tools.resolve("tinymce.html.Node");const rm=I=>I.type===3,Zr=I=>I.length===0,Su=I=>{const j=(qe,Sn)=>{const as=vd.create("li");Be(qe,Ys=>as.append(Ys)),Sn?I.insert(as,Sn,!0):I.append(as)},ne=(qe,Sn)=>rm(Sn)?[...qe,Sn]:!Zr(qe)&&!rm(Sn)?(j(qe,Sn),[]):qe,ze=Kt(I.children(),ne,[]);Zr(ze)||j(ze)},zm=I=>{I.on("PreInit",()=>{const{parser:j}=I;j.addNodeFilter("ul,ol",ne=>Be(ne,Su))})},Ag=I=>{I.on("keydown",j=>{j.keyCode!==ka.TAB||ka.metaKeyPressed(j)||I.undoManager.transact(()=>{(j.shiftKey?lf(I):sg(I))&&j.preventDefault()})})},mi=I=>{Wa(I)&&Ag(I),Fr(I)},am=(I,j)=>ne=>{const ze=qe=>{ne.setActive(vc(qe.parents,j)),ne.setEnabled(!ba(I,qe.element)&&I.selection.isEditable())};return ne.setEnabled(I.selection.isEditable()),$d(I,ze)},yd=I=>{const j=ne=>()=>I.execCommand(ne);I.hasPlugin("advlist")||(I.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:j("InsertOrderedList"),onSetup:am(I,"OL")}),I.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:j("InsertUnorderedList"),onSetup:am(I,"UL")}))},yr=(I,j)=>ne=>$d(I,qe=>ne.setEnabled(vc(qe.parents,j)&&!ba(I,qe.element))),im=I=>{const j={text:"List properties...",icon:"ordered-list",onAction:()=>I.execCommand("mceListProps"),onSetup:yr(I,"OL")};I.ui.registry.addMenuItem("listprops",j),I.ui.registry.addContextMenu("lists",{update:ne=>{const ze=le(I,ne);return Ti(ze)?["listprops"]:[]}})};var Zc=()=>{$n.add("lists",I=>(Ld(I),zm(I),I.hasPlugin("rtc",!0)?cl(I):(mi(I),sr(I)),yd(I),im(I),sm(I)))};Zc()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(ce=>De=>ce===De)(null),vo=ce=>ce,ko=(ce,De)=>{const Ne=ce.length,oe=new Array(Ne);for(let ct=0;ct<Ne;ct++){const At=ce[ct];oe[ct]=De(At,ct)}return oe},no={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},Tt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Fn=[new RegExp(no.aletter),new RegExp(no.midnumlet),new RegExp(no.midletter),new RegExp(no.midnum),new RegExp(no.numeric),new RegExp(no.cr),new RegExp(no.lf),new RegExp(no.newline),new RegExp(no.extend),new RegExp(no.format),new RegExp(no.katakana),new RegExp(no.extendnumlet),new RegExp("@")],To="",ss=new RegExp("^"+no.punctuation+"$"),st=/^\s+$/,es=Fn,Vn=Tt.OTHER,kn=ce=>{let De=Vn;const Ne=es.length;for(let oe=0;oe<Ne;++oe){const ct=es[oe];if(ct&&ct.test(ce)){De=oe;break}}return De},zn=ce=>{const De={};return Ne=>{if(De[Ne])return De[Ne];{const oe=ce(Ne);return De[Ne]=oe,oe}}},Vt=ce=>{const De=zn(kn);return ko(ce,De)},Ue=(ce,De)=>{const Ne=ce[De],oe=ce[De+1];if(De<0||De>ce.length-1&&De!==0||Ne===Tt.ALETTER&&oe===Tt.ALETTER)return!1;const ct=ce[De+2];if(Ne===Tt.ALETTER&&(oe===Tt.MIDLETTER||oe===Tt.MIDNUMLET||oe===Tt.AT)&&ct===Tt.ALETTER)return!1;const At=ce[De-1];return(Ne===Tt.MIDLETTER||Ne===Tt.MIDNUMLET||oe===Tt.AT)&&oe===Tt.ALETTER&&At===Tt.ALETTER||(Ne===Tt.NUMERIC||Ne===Tt.ALETTER)&&(oe===Tt.NUMERIC||oe===Tt.ALETTER)||(Ne===Tt.MIDNUM||Ne===Tt.MIDNUMLET)&&oe===Tt.NUMERIC&&At===Tt.NUMERIC||Ne===Tt.NUMERIC&&(oe===Tt.MIDNUM||oe===Tt.MIDNUMLET)&&ct===Tt.NUMERIC||(Ne===Tt.EXTEND||Ne===Tt.FORMAT)&&(oe===Tt.ALETTER||oe===Tt.NUMERIC||oe===Tt.KATAKANA||oe===Tt.EXTEND||oe===Tt.FORMAT)||(oe===Tt.EXTEND||oe===Tt.FORMAT&&(ct===Tt.ALETTER||ct===Tt.NUMERIC||ct===Tt.KATAKANA||ct===Tt.EXTEND||ct===Tt.FORMAT))&&(Ne===Tt.ALETTER||Ne===Tt.NUMERIC||Ne===Tt.KATAKANA||Ne===Tt.EXTEND||Ne===Tt.FORMAT)||Ne===Tt.CR&&oe===Tt.LF?!1:Ne===Tt.NEWLINE||Ne===Tt.CR||Ne===Tt.LF||oe===Tt.NEWLINE||oe===Tt.CR||oe===Tt.LF?!0:!(Ne===Tt.KATAKANA&&oe===Tt.KATAKANA||oe===Tt.EXTENDNUMLET&&(Ne===Tt.ALETTER||Ne===Tt.NUMERIC||Ne===Tt.KATAKANA||Ne===Tt.EXTENDNUMLET)||Ne===Tt.EXTENDNUMLET&&(oe===Tt.ALETTER||oe===Tt.NUMERIC||oe===Tt.KATAKANA)||Ne===Tt.AT)},at=To,ue=st,ve=ss,In=ce=>ce==="http"||ce==="https",qt=(ce,De)=>{let Ne;for(Ne=De;Ne<ce.length&&!ue.test(ce[Ne]);Ne++);return Ne},re=(ce,De)=>{const Ne=qt(ce,De+1);return ce.slice(De+1,Ne).join(at).substr(0,3)==="://"?Ne:De},rn=(ce,De,Ne,oe)=>{const ct=[],At=[];let dt=[];for(let An=0;An<Ne.length;++An)if(dt.push(ce[An]),Ue(Ne,An)){const it=De[An];if((oe.includeWhitespace||!ue.test(it))&&(oe.includePunctuation||!ve.test(it))){const Dt=An-dt.length+1,hn=An+1,Hn=De.slice(Dt,hn).join(at);if(In(Hn)){const ut=re(De,An),ot=ce.slice(hn,ut);Array.prototype.push.apply(dt,ot),An=ut}De[An+1]==="."&&/^([a-zA-Z]\.)+$/.test(Hn+".")?(dt.push(ce[An+1]),At.push({start:Dt,end:hn+1})):At.push({start:Dt,end:hn}),ct.push(dt)}dt=[]}return{words:ct,indices:At}},oo=()=>({includeWhitespace:!1,includePunctuation:!1}),qn=(ce,De,Ne)=>{Ne={...oo(),...Ne};const oe=ko(ce,De),ct=Vt(oe);return rn(ce,oe,ct,Ne)},Be=(ce,De,Ne)=>qn(ce,De,Ne).words,z=ce=>ce.replace(/\uFEFF/g,"");var $t=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Kt=(ce,De)=>{const Ne=De.getBlockElements(),oe=De.getVoidElements(),ct=Dt=>Ne[Dt.nodeName]||oe[Dt.nodeName],At=[];let dt="";const An=new $t(ce,ce);let it;for(;it=An.next();)it.nodeType===3?dt+=z(it.data):ct(it)&&dt.length&&(At.push(dt),dt="");return dt.length&&At.push(dt),At},B=ce=>ce.replace(/\u200B/g,""),Jt=ce=>ce.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Le=(ce,De)=>{const Ne=B(Kt(ce,De).join(`
`));return Be(Ne.split(""),vo).length},Qt=(ce,De)=>{const Ne=Kt(ce,De).join("");return Jt(Ne)},mn=(ce,De)=>{const Ne=Kt(ce,De).join("").replace(/\s/g,"");return Jt(Ne)},Se=(ce,De)=>()=>De(ce.getBody(),ce.schema),Oe=(ce,De)=>()=>De(ce.selection.getRng().cloneContents(),ce.schema),ft=ce=>Se(ce,Le),tt=ce=>({body:{getWordCount:ft(ce),getCharacterCount:Se(ce,Qt),getCharacterCountWithoutSpaces:Se(ce,mn)},selection:{getWordCount:Oe(ce,Le),getCharacterCount:Oe(ce,Qt),getCharacterCountWithoutSpaces:Oe(ce,mn)},getCount:ft(ce)}),Bt=(ce,De)=>{ce.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(De.body.getWordCount()),String(De.selection.getWordCount())],["Characters (no spaces)",String(De.body.getCharacterCountWithoutSpaces()),String(De.selection.getCharacterCountWithoutSpaces())],["Characters",String(De.body.getCharacterCount()),String(De.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},$e=(ce,De)=>{ce.addCommand("mceWordCount",()=>Bt(ce,De))},pt=(ce,De)=>{let Ne=null;return{cancel:()=>{mo(Ne)||(clearTimeout(Ne),Ne=null)},throttle:(...At)=>{mo(Ne)&&(Ne=setTimeout(()=>{Ne=null,ce.apply(null,At)},De))}}};var Y=tinymce.util.Tools.resolve("tinymce.util.Delay");const Jo=(ce,De)=>{ce.dispatch("wordCountUpdate",{wordCount:{words:De.body.getWordCount(),characters:De.body.getCharacterCount(),charactersWithoutSpaces:De.body.getCharacterCountWithoutSpaces()}})},Et=(ce,De)=>{Jo(ce,De)},Mt=(ce,De,Ne)=>{const oe=pt(()=>Et(ce,De),Ne);ce.on("init",()=>{Et(ce,De),Y.setEditorTimeout(ce,()=>{ce.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",oe.throttle)},0),ce.on("remove",oe.cancel)})},Pn=ce=>{const De=()=>ce.execCommand("mceWordCount");ce.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:De,context:"any"}),ce.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:De,context:"any"})};var Nt=(ce=300)=>{$n.add("wordcount",De=>{const Ne=tt(De);return $e(De,Ne),Pn(De),Mt(De,Ne,ce),Ne})};Nt()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(Se,Oe,ft)=>{const tt=Oe==="UL"?"InsertUnorderedList":"InsertOrderedList";Se.execCommand(tt,!1,ft===!1?null:{"list-style-type":ft})},mo=Se=>{Se.addCommand("ApplyUnorderedListStyle",(Oe,ft)=>{Xo(Se,"UL",ft["list-style-type"])}),Se.addCommand("ApplyOrderedListStyle",(Oe,ft)=>{Xo(Se,"OL",ft["list-style-type"])})},vo=Se=>Oe=>Oe.options.get(Se),ko=Se=>{const Oe=Se.options.register;Oe("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Oe("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},wn=vo("advlist_number_styles"),no=vo("advlist_bullet_styles"),Tt=Se=>Se==null,Fn=Se=>!Tt(Se);class To{constructor(Oe,ft){this.tag=Oe,this.value=ft}static some(Oe){return new To(!0,Oe)}static none(){return To.singletonNone}fold(Oe,ft){return this.tag?ft(this.value):Oe()}isSome(){return this.tag}isNone(){return!this.tag}map(Oe){return this.tag?To.some(Oe(this.value)):To.none()}bind(Oe){return this.tag?Oe(this.value):To.none()}exists(Oe){return this.tag&&Oe(this.value)}forall(Oe){return!this.tag||Oe(this.value)}filter(Oe){return!this.tag||Oe(this.value)?this:To.none()}getOr(Oe){return this.tag?this.value:Oe}or(Oe){return this.tag?this:Oe}getOrThunk(Oe){return this.tag?this.value:Oe()}orThunk(Oe){return this.tag?this:Oe()}getOrDie(Oe){if(this.tag)return this.value;throw new Error(Oe??"Called getOrDie on None")}static from(Oe){return Fn(Oe)?To.some(Oe):To.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Oe){this.tag&&Oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}To.singletonNone=new To(!1);const ss=Array.prototype.indexOf,st=(Se,Oe)=>ss.call(Se,Oe),es=(Se,Oe)=>st(Se,Oe)>-1,Vn=(Se,Oe,ft)=>{for(let tt=0,Bt=Se.length;tt<Bt;tt++){const $e=Se[tt];if(Oe($e,tt))return To.some($e);if(ft($e,tt))break}return To.none()},kn=Object.keys,zn=(Se,Oe)=>{const ft=kn(Se);for(let tt=0,Bt=ft.length;tt<Bt;tt++){const $e=ft[tt],pt=Se[$e];Oe(pt,$e)}},Vt=(Se,Oe)=>Ue(Se,(ft,tt)=>({k:tt,v:Oe(ft,tt)})),Ue=(Se,Oe)=>{const ft={};return zn(Se,(tt,Bt)=>{const $e=Oe(tt,Bt);ft[$e.k]=$e.v}),ft};var at=tinymce.util.Tools.resolve("tinymce.util.Tools");const ue=Se=>/\btox\-/.test(Se.className),ve=(Se,Oe)=>Se.dom.isChildOf(Oe,Se.getBody()),In=Se=>Oe=>Fn(Oe)&&Se.test(Oe.nodeName),qt=In(/^(OL|UL|DL)$/),re=In(/^(TH|TD)$/),rn=(Se,Oe,ft)=>Vn(Oe,tt=>qt(tt)&&!ue(tt),re).exists(tt=>tt.nodeName===ft&&ve(Se,tt)),oo=Se=>{const Oe=Se.dom.getParent(Se.selection.getNode(),"ol,ul"),ft=Se.dom.getStyle(Oe,"listStyleType");return To.from(ft)},qn=(Se,Oe)=>Oe!==null&&!Se.dom.isEditable(Oe),Qe=(Se,Oe)=>{const ft=Se.dom.getParent(Oe,"ol,ul,dl");return qn(Se,ft)||!Se.selection.isEditable()},Be=(Se,Oe)=>{const ft=Se.selection.getNode();return Oe({parents:Se.dom.getParents(ft),element:ft}),Se.on("NodeChange",Oe),()=>Se.off("NodeChange",Oe)},z=Se=>Se.replace(/\-/g," ").replace(/\b\w/g,Oe=>Oe.toUpperCase()),$t=Se=>Tt(Se)||Se==="default"?"":Se,Kt=(Se,Oe)=>ft=>{const tt=($e,pt)=>{const Y=$e.selection.getStart(!0);ft.setActive(rn($e,pt,Oe)),ft.setEnabled(!Qe($e,Y))};return Be(Se,$e=>tt(Se,$e.parents))},B=(Se,Oe,ft,tt,Bt,$e)=>{const pt={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},Y=Vt(pt,Jo=>es($e,Jo));Se.ui.registry.addSplitButton(Oe,{tooltip:ft,icon:Bt==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Jo=>{const Et=at.map($e,Mt=>{const Pn=Bt==="OL"?"num":"bull",Nt=Mt==="disc"||Mt==="decimal"?"default":Mt,ce=$t(Mt),De=z(Mt);return{type:"choiceitem",value:ce,icon:"list-"+Pn+"-"+Nt,text:De}});Jo(Et)},onAction:()=>Se.execCommand(tt),onItemAction:(Jo,Et)=>{Xo(Se,Bt,Et)},select:Jo=>oo(Se).exists(Mt=>Jo===Mt||pt[Mt]===Jo&&!Y[Jo]),onSetup:Kt(Se,Bt)})},Jt=(Se,Oe,ft,tt,Bt,$e)=>{Se.ui.registry.addToggleButton(Oe,{active:!1,tooltip:ft,icon:Bt==="OL"?"ordered-list":"unordered-list",onSetup:Kt(Se,Bt),onAction:()=>Se.queryCommandState(tt)||$e===""?Se.execCommand(tt):Xo(Se,Bt,$e)})},Le=(Se,Oe,ft,tt,Bt,$e)=>{$e.length>1?B(Se,Oe,ft,tt,Bt,$e):Jt(Se,Oe,ft,tt,Bt,$t($e[0]))},Qt=Se=>{Le(Se,"numlist","Numbered list","InsertOrderedList","OL",wn(Se)),Le(Se,"bullist","Bullet list","InsertUnorderedList","UL",no(Se))};var mn=()=>{$n.add("advlist",Se=>{Se.hasPlugin("lists")?(ko(Se),Qt(Se),mo(Se)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};mn()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),mo=tinymce.util.Tools.resolve("tinymce.util.Tools");const vo=$t=>Kt=>Kt.options.get($t),ko=$t=>{const Kt=$t.options.register;Kt("allow_html_in_named_anchor",{processor:"boolean",default:!1})},wn=vo("allow_html_in_named_anchor"),no="a:not([href])",Tt=$t=>!$t,Fn=$t=>$t.getAttribute("id")||$t.getAttribute("name")||"",To=$t=>$t.nodeName.toLowerCase()==="a",ss=$t=>To($t)&&!$t.getAttribute("href")&&Fn($t)!=="",st=$t=>ss($t)&&!$t.firstChild,es=$t=>{const Kt=$t.dom;Xo(Kt).walk($t.selection.getRng(),B=>{mo.each(B,Jt=>{st(Jt)&&Kt.remove(Jt,!1)})})},Vn=$t=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test($t),kn=$t=>$t.dom.getParent($t.selection.getStart(),no),zn=$t=>{const Kt=kn($t);return Kt?Fn(Kt):""},Vt=($t,Kt)=>{$t.undoManager.transact(()=>{wn($t)||$t.selection.collapse(!0),$t.selection.isCollapsed()?$t.insertContent($t.dom.createHTML("a",{id:Kt})):(es($t),$t.formatter.remove("namedAnchor",void 0,void 0,!0),$t.formatter.apply("namedAnchor",{value:Kt}),$t.addVisual())})},Ue=($t,Kt,B)=>{B.removeAttribute("name"),B.id=Kt,$t.addVisual(),$t.undoManager.add()},at=($t,Kt)=>{const B=kn($t);B?Ue($t,Kt,B):Vt($t,Kt),$t.focus()},ue=($t,Kt)=>Vn(Kt)?(at($t,Kt),!0):($t.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),ve=$t=>{const Kt=zn($t);$t.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Kt},onSubmit:B=>{ue($t,B.getData().id)&&B.close()}})},In=$t=>{$t.addCommand("mceAnchor",()=>{ve($t)})},qt=$t=>Tt($t.attr("href"))&&!Tt($t.attr("id")||$t.attr("name")),re=$t=>qt($t)&&!$t.firstChild,rn=$t=>Kt=>{for(let B=0;B<Kt.length;B++){const Jt=Kt[B];re(Jt)&&Jt.attr("contenteditable",$t)}},oo=$t=>{$t.on("PreInit",()=>{$t.parser.addNodeFilter("a",rn("false")),$t.serializer.addNodeFilter("a",rn(null))})},qn=$t=>{$t.formatter.register("namedAnchor",{inline:"a",selector:no,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Kt,B,Jt)=>ss(Kt)})},Qe=$t=>Kt=>{const B=()=>{Kt.setEnabled($t.selection.isEditable())};return $t.on("NodeChange",B),B(),()=>{$t.off("NodeChange",B)}},Be=$t=>{const Kt=()=>$t.execCommand("mceAnchor");$t.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Kt,onSetup:B=>{const Jt=$t.selection.selectorChangedWithUnbind("a:not([href])",B.setActive).unbind,Le=Qe($t)(B);return()=>{Jt(),Le()}}}),$t.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Kt,onSetup:Qe($t)})};var z=()=>{$n.add("anchor",$t=>{ko($t),oo($t),In($t),Be($t),$t.on("PreInit",()=>{qn($t)})})};z()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,mo=tt=>Bt=>Bt.options.get(tt),vo=tt=>{const Bt=tt.options.register;Bt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Xo().source+"$","i")}),Bt("link_default_target",{processor:"string"}),Bt("link_default_protocol",{processor:"string",default:"https"})},ko=mo("autolink_pattern"),wn=mo("link_default_target"),no=mo("link_default_protocol"),Tt=mo("allow_unsafe_link_target"),Fn=(tt,Bt,$e)=>{var pt;return $e(tt,Bt.prototype)?!0:((pt=tt.constructor)===null||pt===void 0?void 0:pt.name)===Bt.name},To=tt=>{const Bt=typeof tt;return tt===null?"null":Bt==="object"&&Array.isArray(tt)?"array":Bt==="object"&&Fn(tt,String,($e,pt)=>pt.isPrototypeOf($e))?"string":Bt},ss=tt=>Bt=>To(Bt)===tt,st=tt=>Bt=>tt===Bt,es=ss("string"),Vn=st(void 0),kn=tt=>tt==null,zn=tt=>!kn(tt),Vt=tt=>Bt=>!tt(Bt),Ue=Object.hasOwnProperty,at=(tt,Bt)=>Ue.call(tt,Bt),ue=(tt,Bt,$e)=>tt.length>=Bt.length&&tt.substr($e,$e+Bt.length)===Bt,ve=(tt,Bt,$e=0,pt)=>{const Y=tt.indexOf(Bt,$e);return Y!==-1?Vn(pt)?!0:Y+Bt.length<=pt:!1},In=(tt,Bt)=>ue(tt,Bt,0),qt="\uFEFF",re=tt=>tt===qt,rn=tt=>tt.replace(/\uFEFF/g,"");var oo=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const qn=tt=>tt.nodeType===3,Qe=tt=>tt.nodeType===1,Be=tt=>/^[(\[{ \u00a0]$/.test(tt),z=tt=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(tt),$t=tt=>/[?!,.;:]/.test(tt),Kt=(tt,Bt,$e)=>{for(let pt=Bt-1;pt>=0;pt--){const Y=tt.charAt(pt);if(!re(Y)&&$e(Y))return pt}return-1},B=(tt,Bt)=>{let $e=tt,pt=Bt;for(;Qe($e)&&$e.childNodes[pt];)$e=$e.childNodes[pt],pt=qn($e)?$e.data.length:$e.childNodes.length;return{container:$e,offset:pt}},Jt=(tt,Bt)=>{var $e;const pt=tt.schema.getVoidElements(),Y=ko(tt),{dom:Jo,selection:Et}=tt;if(Jo.getParent(Et.getNode(),"a[href]")!==null||tt.mode.isReadOnly())return null;const Mt=Et.getRng(),Pn=oo(Jo,it=>Jo.isBlock(it)||at(pt,it.nodeName.toLowerCase())||Jo.getContentEditable(it)==="false"),{container:Nt,offset:ce}=B(Mt.endContainer,Mt.endOffset),De=($e=Jo.getParent(Nt,Jo.isBlock))!==null&&$e!==void 0?$e:Jo.getRoot(),Ne=Pn.backwards(Nt,ce+Bt,(it,Dt)=>{const hn=it.data,Hn=Kt(hn,Dt,Vt(Be));return Hn===-1||$t(hn[Hn])?Hn:Hn+1},De);if(!Ne)return null;let oe=Ne.container;const ct=Pn.backwards(Ne.container,Ne.offset,(it,Dt)=>{oe=it;const hn=Kt(it.data,Dt,Be);return hn===-1?hn:hn+1},De),At=Jo.createRng();ct?At.setStart(ct.container,ct.offset):At.setStart(oe,0),At.setEnd(Ne.container,Ne.offset);const An=rn(At.toString()).match(Y);if(An){let it=An[0];return In(it,"www.")?it=no(tt)+"://"+it:ve(it,"@")&&!z(it)&&(it="mailto:"+it),{rng:At,url:it}}else return null},Le=(tt,Bt)=>{const{dom:$e,selection:pt}=tt,{rng:Y,url:Jo}=Bt,Et=pt.getBookmark();pt.setRng(Y);const Mt="createlink",Pn={command:Mt,ui:!1,value:Jo};if(!tt.dispatch("BeforeExecCommand",Pn).isDefaultPrevented()){tt.getDoc().execCommand(Mt,!1,Jo),tt.dispatch("ExecCommand",Pn);const ce=wn(tt);if(es(ce)){const De=pt.getNode();$e.setAttrib(De,"target",ce),ce==="_blank"&&!Tt(tt)&&$e.setAttrib(De,"rel","noopener")}}pt.moveToBookmark(Et),tt.nodeChanged()},Qt=tt=>{const Bt=Jt(tt,-1);zn(Bt)&&Le(tt,Bt)},mn=Qt,Se=tt=>{const Bt=Jt(tt,0);zn(Bt)&&Le(tt,Bt)},Oe=tt=>{tt.on("keydown",Bt=>{Bt.keyCode===13&&!Bt.isDefaultPrevented()&&Se(tt)}),tt.on("keyup",Bt=>{Bt.keyCode===32?Qt(tt):(Bt.keyCode===48&&Bt.shiftKey||Bt.keyCode===221)&&mn(tt)})};var ft=()=>{$n.add("autolink",tt=>{vo(tt),Oe(tt)})};ft()})();(function(){const $n=at=>{let ue=at;return{get:()=>ue,set:qt=>{ue=qt}}};var Xo=tinymce.util.Tools.resolve("tinymce.PluginManager"),mo=tinymce.util.Tools.resolve("tinymce.Env");const vo=at=>at.dispatch("ResizeEditor"),ko=at=>ue=>ue.options.get(at),wn=at=>{const ue=at.options.register;ue("autoresize_overflow_padding",{processor:"number",default:1}),ue("autoresize_bottom_margin",{processor:"number",default:50})},no=ko("min_height"),Tt=ko("max_height"),Fn=ko("autoresize_overflow_padding"),To=ko("autoresize_bottom_margin"),ss=at=>at.plugins.fullscreen&&at.plugins.fullscreen.isFullscreen(),st=(at,ue)=>{const ve=at.getBody();ve&&(ve.style.overflowY=ue?"":"hidden",ue||(ve.scrollTop=0))},es=(at,ue,ve,In)=>{var qt;const re=parseInt((qt=at.getStyle(ue,ve,In))!==null&&qt!==void 0?qt:"",10);return isNaN(re)?0:re},Vn=at=>{if((at==null?void 0:at.type.toLowerCase())==="setcontent"){const ue=at;return ue.selection===!0||ue.paste===!0}else return!1},kn=(at,ue,ve,In)=>{var qt;const re=at.dom,rn=at.getDoc();if(!rn)return;if(ss(at)){st(at,!0);return}const oo=rn.documentElement,qn=In?In():Fn(at),Qe=(qt=no(at))!==null&&qt!==void 0?qt:at.getElement().offsetHeight;let Be=Qe;const z=es(re,oo,"margin-top",!0),$t=es(re,oo,"margin-bottom",!0);let Kt=oo.offsetHeight+z+$t+qn;Kt<0&&(Kt=0);const B=at.getContainer().offsetHeight,Jt=at.getContentAreaContainer().offsetHeight,Le=B-Jt;Kt+Le>Qe&&(Be=Kt+Le);const Qt=Tt(at);Qt&&Be>Qt?(Be=Qt,st(at,!0)):st(at,!1);const mn=ue.get();if(mn.set&&(at.dom.setStyles(at.getDoc().documentElement,{"min-height":0}),at.dom.setStyles(at.getBody(),{"min-height":"inherit"})),Be!==mn.totalHeight&&(Kt-qn!==mn.contentHeight||!mn.set)){const Se=Be-mn.totalHeight;if(re.setStyle(at.getContainer(),"height",Be+"px"),ue.set({totalHeight:Be,contentHeight:Kt,set:!0}),vo(at),mo.browser.isSafari()&&(mo.os.isMacOS()||mo.os.isiOS())){const Oe=at.getWin();Oe.scrollTo(Oe.pageXOffset,Oe.pageYOffset)}at.hasFocus()&&Vn(ve)&&at.selection.scrollIntoView(),(mo.browser.isSafari()||mo.browser.isChromium())&&Se<0&&kn(at,ue,ve,In)}},zn=(at,ue)=>{const ve=()=>To(at);at.on("init",In=>{const qt=Fn(at),re=at.dom;re.setStyles(at.getDoc().documentElement,{height:"auto"}),mo.browser.isEdge()||mo.browser.isIE()?re.setStyles(at.getBody(),{paddingLeft:qt,paddingRight:qt,"min-height":0}):re.setStyles(at.getBody(),{paddingLeft:qt,paddingRight:qt}),kn(at,ue,In,ve)}),at.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",In=>{kn(at,ue,In,ve)})},Vt=(at,ue)=>{at.addCommand("mceAutoResize",()=>{kn(at,ue)})};var Ue=()=>{Xo.add("autoresize",at=>{if(wn(at),at.options.isSet("resize")||at.options.set("resize",!1),!at.inline){const ue=$n({totalHeight:0,contentHeight:0,set:!1});Vt(at,ue),zn(at,ue)}})};Ue()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(Le,Qt,mn)=>{var Se;return mn(Le,Qt.prototype)?!0:((Se=Le.constructor)===null||Se===void 0?void 0:Se.name)===Qt.name},mo=Le=>{const Qt=typeof Le;return Le===null?"null":Qt==="object"&&Array.isArray(Le)?"array":Qt==="object"&&Xo(Le,String,(mn,Se)=>Se.isPrototypeOf(mn))?"string":Qt},vo=Le=>Qt=>mo(Qt)===Le,ko=Le=>Qt=>Le===Qt,wn=vo("string"),no=ko(void 0);var Tt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Fn=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),To=tinymce.util.Tools.resolve("tinymce.util.Tools");const ss=Le=>Le.dispatch("RestoreDraft"),st=Le=>Le.dispatch("StoreDraft"),es=Le=>Le.dispatch("RemoveDraft"),Vn=Le=>{const Qt={s:1e3,m:6e4},mn=/^(\d+)([ms]?)$/.exec(Le);return(mn&&mn[2]?Qt[mn[2]]:1)*parseInt(Le,10)},kn=Le=>Qt=>Qt.options.get(Le),zn=Le=>{const Qt=Le.options.register,mn=Se=>{const Oe=wn(Se);return Oe?{value:Vn(Se),valid:Oe}:{valid:!1,message:"Must be a string."}};Qt("autosave_ask_before_unload",{processor:"boolean",default:!0}),Qt("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),Qt("autosave_restore_when_empty",{processor:"boolean",default:!1}),Qt("autosave_interval",{processor:mn,default:"30s"}),Qt("autosave_retention",{processor:mn,default:"20m"})},Vt=kn("autosave_ask_before_unload"),Ue=kn("autosave_restore_when_empty"),at=kn("autosave_interval"),ue=kn("autosave_retention"),ve=Le=>{const Qt=document.location;return Le.options.get("autosave_prefix").replace(/{path}/g,Qt.pathname).replace(/{query}/g,Qt.search).replace(/{hash}/g,Qt.hash).replace(/{id}/g,Le.id)},In=(Le,Qt)=>{if(no(Qt))return Le.dom.isEmpty(Le.getBody());{const mn=To.trim(Qt);if(mn==="")return!0;{const Se=new DOMParser().parseFromString(mn,"text/html");return Le.dom.isEmpty(Se)}}},qt=Le=>{var Qt;const mn=parseInt((Qt=Fn.getItem(ve(Le)+"time"))!==null&&Qt!==void 0?Qt:"0",10)||0;return new Date().getTime()-mn>ue(Le)?(re(Le,!1),!1):!0},re=(Le,Qt)=>{const mn=ve(Le);Fn.removeItem(mn+"draft"),Fn.removeItem(mn+"time"),Qt!==!1&&es(Le)},rn=Le=>{const Qt=ve(Le);!In(Le)&&Le.isDirty()&&(Fn.setItem(Qt+"draft",Le.getContent({format:"raw",no_events:!0})),Fn.setItem(Qt+"time",new Date().getTime().toString()),st(Le))},oo=Le=>{var Qt;const mn=ve(Le);qt(Le)&&(Le.setContent((Qt=Fn.getItem(mn+"draft"))!==null&&Qt!==void 0?Qt:"",{format:"raw"}),ss(Le))},qn=Le=>{const Qt=at(Le);Tt.setEditorInterval(Le,()=>{rn(Le)},Qt)},Qe=Le=>{Le.undoManager.transact(()=>{oo(Le),re(Le)}),Le.focus()},Be=Le=>({hasDraft:()=>qt(Le),storeDraft:()=>rn(Le),restoreDraft:()=>oo(Le),removeDraft:Qt=>re(Le,Qt),isEmpty:Qt=>In(Le,Qt)});var z=tinymce.util.Tools.resolve("tinymce.EditorManager");const $t=Le=>{Le.editorManager.on("BeforeUnload",Qt=>{let mn;To.each(z.get(),Se=>{Se.plugins.autosave&&Se.plugins.autosave.storeDraft(),!mn&&Se.isDirty()&&Vt(Se)&&(mn=Se.translate("You have unsaved changes are you sure you want to navigate away?"))}),mn&&(Qt.preventDefault(),Qt.returnValue=mn)})},Kt=Le=>Qt=>{const mn=()=>qt(Le)&&!Le.mode.isReadOnly();Qt.setEnabled(mn());const Se=()=>Qt.setEnabled(mn());return Le.on("StoreDraft RestoreDraft RemoveDraft",Se),()=>Le.off("StoreDraft RestoreDraft RemoveDraft",Se)},B=Le=>{qn(Le);const Qt=()=>{Qe(Le)};Le.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:Qt,onSetup:Kt(Le)}),Le.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:Qt,onSetup:Kt(Le)})};var Jt=()=>{$n.add("autosave",Le=>(zn(Le),$t(Le),B(Le),Le.on("init",()=>{Ue(Le)&&Le.dom.isEmpty(Le.getBody())&&oo(Le)}),Be(Le)))};Jt()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(ce,De)=>ce.dispatch("insertCustomChar",{chr:De}),mo=(ce,De)=>{const Ne=Xo(ce,De).chr;ce.execCommand("mceInsertContent",!1,Ne)},vo=(ce,De,Ne)=>{var oe;return Ne(ce,De.prototype)?!0:((oe=ce.constructor)===null||oe===void 0?void 0:oe.name)===De.name},ko=ce=>{const De=typeof ce;return ce===null?"null":De==="object"&&Array.isArray(ce)?"array":De==="object"&&vo(ce,String,(Ne,oe)=>oe.isPrototypeOf(Ne))?"string":De},wn=ce=>De=>ko(De)===ce,no=ce=>De=>typeof De===ce,Tt=ce=>De=>ce===De,Fn=wn("array"),To=Tt(null),ss=Tt(void 0),st=ce=>ce==null,es=ce=>!st(ce),Vn=no("function"),zn=(ce=>()=>ce)(!1);class Vt{constructor(De,Ne){this.tag=De,this.value=Ne}static some(De){return new Vt(!0,De)}static none(){return Vt.singletonNone}fold(De,Ne){return this.tag?Ne(this.value):De()}isSome(){return this.tag}isNone(){return!this.tag}map(De){return this.tag?Vt.some(De(this.value)):Vt.none()}bind(De){return this.tag?De(this.value):Vt.none()}exists(De){return this.tag&&De(this.value)}forall(De){return!this.tag||De(this.value)}filter(De){return!this.tag||De(this.value)?this:Vt.none()}getOr(De){return this.tag?this.value:De}or(De){return this.tag?this:De}getOrThunk(De){return this.tag?this.value:De()}orThunk(De){return this.tag?this:De()}getOrDie(De){if(this.tag)return this.value;throw new Error(De??"Called getOrDie on None")}static from(De){return es(De)?Vt.some(De):Vt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(De){this.tag&&De(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Vt.singletonNone=new Vt(!1);const Ue=Array.prototype.push,at=(ce,De)=>{const Ne=ce.length,oe=new Array(Ne);for(let ct=0;ct<Ne;ct++){const At=ce[ct];oe[ct]=De(At,ct)}return oe},ue=(ce,De)=>{for(let Ne=0,oe=ce.length;Ne<oe;Ne++){const ct=ce[Ne];De(ct,Ne)}},ve=(ce,De,Ne)=>{for(let oe=0,ct=ce.length;oe<ct;oe++){const At=ce[oe];if(De(At,oe))return Vt.some(At);if(Ne(At,oe))break}return Vt.none()},In=(ce,De)=>ve(ce,De,zn),qt=ce=>{const De=[];for(let Ne=0,oe=ce.length;Ne<oe;++Ne){if(!Fn(ce[Ne]))throw new Error("Arr.flatten item "+Ne+" was not an array, input: "+ce);Ue.apply(De,ce[Ne])}return De},re=(ce,De)=>qt(at(ce,De));var rn=tinymce.util.Tools.resolve("tinymce.util.Tools");const oo=ce=>De=>De.options.get(ce),qn=ce=>{const De=ce.options.register,Ne=oe=>Vn(oe)||Fn(oe);De("charmap",{processor:Ne}),De("charmap_append",{processor:Ne})},Qe=oo("charmap"),Be=oo("charmap_append"),z=rn.isArray,$t="User Defined",Kt=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],B=ce=>rn.grep(ce,De=>z(De)&&De.length===2),Jt=ce=>z(ce)?B(ce):typeof ce=="function"?ce():[],Le=(ce,De)=>{const Ne=Qe(ce);Ne&&(De=[{name:$t,characters:Jt(Ne)}]);const oe=Be(ce);if(oe){const ct=rn.grep(De,At=>At.name===$t);return ct.length?(ct[0].characters=[...ct[0].characters,...Jt(oe)],De):De.concat({name:$t,characters:Jt(oe)})}return De},Qt=ce=>{const De=Le(ce,Kt());return De.length>1?[{name:"All",characters:re(De,Ne=>Ne.characters)}].concat(De):De},mn=ce=>({getCharMap:()=>Qt(ce),insertChar:oe=>{mo(ce,oe)}}),Se=ce=>{let De=ce;return{get:()=>De,set:ct=>{De=ct}}},Oe=(ce,De)=>{let Ne=null;const oe=()=>{To(Ne)||(clearTimeout(Ne),Ne=null)};return{cancel:oe,throttle:(...At)=>{oe(),Ne=setTimeout(()=>{Ne=null,ce.apply(null,At)},De)}}},ft=(ce,De,Ne=0,oe)=>{const ct=ce.indexOf(De,Ne);return ct!==-1?ss(oe)?!0:ct+De.length<=oe:!1},tt=String.fromCodePoint,Bt=(ce,De,Ne)=>ft(tt(ce).toLowerCase(),Ne)?!0:ft(De.toLowerCase(),Ne)||ft(De.toLowerCase().replace(/\s+/g,""),Ne),$e=(ce,De)=>{const Ne=[],oe=De.toLowerCase();return ue(ce.characters,ct=>{Bt(ct[0],ct[1],oe)&&Ne.push(ct)}),at(Ne,ct=>({text:ct[1],value:tt(ct[0]),icon:tt(ct[0])}))},pt="pattern",Y=(ce,De)=>{const Ne=()=>[{label:"Search",type:"input",name:pt},{type:"collection",name:"results"}],oe=()=>at(De,rt=>({title:rt.name,name:rt.name,items:Ne()})),ct=()=>({type:"panel",items:Ne()}),At=()=>({type:"tabpanel",tabs:oe()}),dt=De.length===1?Se($t):Se("All"),An=(rt,nn)=>{In(De,Zo=>Zo.name===dt.get()).each(Zo=>{const Co=$e(Zo,nn);rt.setData({results:Co})})},Dt=Oe(rt=>{const nn=rt.getData().pattern;An(rt,nn)},40),hn=De.length===1?ct():At(),Hn={pattern:"",results:$e(De[0],"")},ut={title:"Special Character",size:"normal",body:hn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:Hn,onAction:(rt,nn)=>{nn.name==="results"&&(mo(ce,nn.value),rt.close())},onTabChange:(rt,nn)=>{dt.set(nn.newTabName),Dt.throttle(rt)},onChange:(rt,nn)=>{nn.name===pt&&Dt.throttle(rt)}};ce.windowManager.open(ut).focus(pt)},Jo=(ce,De)=>{ce.addCommand("mceShowCharmap",()=>{Y(ce,De)})},Et=(ce,De)=>{ce.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(Ne,oe)=>new Promise((ct,At)=>{ct($e(De,Ne))}),onAction:(Ne,oe,ct)=>{ce.selection.setRng(oe),ce.insertContent(ct),Ne.hide()}})},Mt=ce=>De=>{const Ne=()=>{De.setEnabled(ce.selection.isEditable())};return ce.on("NodeChange",Ne),Ne(),()=>{ce.off("NodeChange",Ne)}},Pn=ce=>{const De=()=>ce.execCommand("mceShowCharmap");ce.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:De,onSetup:Mt(ce)}),ce.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:De,onSetup:Mt(ce)})};var Nt=()=>{$n.add("charmap",ce=>{qn(ce);const De=Qt(ce);return Jo(ce,De),Pn(ce),Et(ce,De[0]),mn(ce)})};Nt()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=B=>B==null,mo=B=>!Xo(B),vo=()=>{},ko=B=>()=>B;class wn{constructor(Jt,Le){this.tag=Jt,this.value=Le}static some(Jt){return new wn(!0,Jt)}static none(){return wn.singletonNone}fold(Jt,Le){return this.tag?Le(this.value):Jt()}isSome(){return this.tag}isNone(){return!this.tag}map(Jt){return this.tag?wn.some(Jt(this.value)):wn.none()}bind(Jt){return this.tag?Jt(this.value):wn.none()}exists(Jt){return this.tag&&Jt(this.value)}forall(Jt){return!this.tag||Jt(this.value)}filter(Jt){return!this.tag||Jt(this.value)?this:wn.none()}getOr(Jt){return this.tag?this.value:Jt}or(Jt){return this.tag?this:Jt}getOrThunk(Jt){return this.tag?this.value:Jt()}orThunk(Jt){return this.tag?this:Jt()}getOrDie(Jt){if(this.tag)return this.value;throw new Error(Jt??"Called getOrDie on None")}static from(Jt){return mo(Jt)?wn.some(Jt):wn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Jt){this.tag&&Jt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}wn.singletonNone=new wn(!1);const no=(B,Jt)=>Jt>=0&&Jt<B.length?wn.some(B[Jt]):wn.none(),Tt=B=>no(B,0);var Fn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const To=typeof window<"u"?window:Function("return this;")(),ss=function(B,Jt,Le){const Qt=window.Prism;window.Prism={manual:!0};var mn=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Se=function(Oe){var ft=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,tt=0,Bt={},$e={manual:Oe.Prism&&Oe.Prism.manual,disableWorkerMessageHandler:Oe.Prism&&Oe.Prism.disableWorkerMessageHandler,util:{encode:function oe(ct){return ct instanceof pt?new pt(ct.type,oe(ct.content),ct.alias):Array.isArray(ct)?ct.map(oe):ct.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(oe){return Object.prototype.toString.call(oe).slice(8,-1)},objId:function(oe){return oe.__id||Object.defineProperty(oe,"__id",{value:++tt}),oe.__id},clone:function oe(ct,At){At=At||{};var dt,An;switch($e.util.type(ct)){case"Object":if(An=$e.util.objId(ct),At[An])return At[An];dt={},At[An]=dt;for(var it in ct)ct.hasOwnProperty(it)&&(dt[it]=oe(ct[it],At));return dt;case"Array":return An=$e.util.objId(ct),At[An]?At[An]:(dt=[],At[An]=dt,ct.forEach(function(Dt,hn){dt[hn]=oe(Dt,At)}),dt);default:return ct}},getLanguage:function(oe){for(;oe;){var ct=ft.exec(oe.className);if(ct)return ct[1].toLowerCase();oe=oe.parentElement}return"none"},setLanguage:function(oe,ct){oe.className=oe.className.replace(RegExp(ft,"gi"),""),oe.classList.add("language-"+ct)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(dt){var oe=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(dt.stack)||[])[1];if(oe){var ct=document.getElementsByTagName("script");for(var At in ct)if(ct[At].src==oe)return ct[At]}return null}},isActive:function(oe,ct,At){for(var dt="no-"+ct;oe;){var An=oe.classList;if(An.contains(ct))return!0;if(An.contains(dt))return!1;oe=oe.parentElement}return!!At}},languages:{plain:Bt,plaintext:Bt,text:Bt,txt:Bt,extend:function(oe,ct){var At=$e.util.clone($e.languages[oe]);for(var dt in ct)At[dt]=ct[dt];return At},insertBefore:function(oe,ct,At,dt){dt=dt||$e.languages;var An=dt[oe],it={};for(var Dt in An)if(An.hasOwnProperty(Dt)){if(Dt==ct)for(var hn in At)At.hasOwnProperty(hn)&&(it[hn]=At[hn]);At.hasOwnProperty(Dt)||(it[Dt]=An[Dt])}var Hn=dt[oe];return dt[oe]=it,$e.languages.DFS($e.languages,function(ut,ot){ot===Hn&&ut!=oe&&(this[ut]=it)}),it},DFS:function oe(ct,At,dt,An){An=An||{};var it=$e.util.objId;for(var Dt in ct)if(ct.hasOwnProperty(Dt)){At.call(ct,Dt,ct[Dt],dt||Dt);var hn=ct[Dt],Hn=$e.util.type(hn);Hn==="Object"&&!An[it(hn)]?(An[it(hn)]=!0,oe(hn,At,null,An)):Hn==="Array"&&!An[it(hn)]&&(An[it(hn)]=!0,oe(hn,At,Dt,An))}}},plugins:{},highlightAll:function(oe,ct){$e.highlightAllUnder(document,oe,ct)},highlightAllUnder:function(oe,ct,At){var dt={callback:At,container:oe,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};$e.hooks.run("before-highlightall",dt),dt.elements=Array.prototype.slice.apply(dt.container.querySelectorAll(dt.selector)),$e.hooks.run("before-all-elements-highlight",dt);for(var An=0,it;it=dt.elements[An++];)$e.highlightElement(it,ct===!0,dt.callback)},highlightElement:function(oe,ct,At){var dt=$e.util.getLanguage(oe),An=$e.languages[dt];$e.util.setLanguage(oe,dt);var it=oe.parentElement;it&&it.nodeName.toLowerCase()==="pre"&&$e.util.setLanguage(it,dt);var Dt=oe.textContent,hn={element:oe,language:dt,grammar:An,code:Dt};function Hn(ot){hn.highlightedCode=ot,$e.hooks.run("before-insert",hn),hn.element.innerHTML=hn.highlightedCode,$e.hooks.run("after-highlight",hn),$e.hooks.run("complete",hn),At&&At.call(hn.element)}if($e.hooks.run("before-sanity-check",hn),it=hn.element.parentElement,it&&it.nodeName.toLowerCase()==="pre"&&!it.hasAttribute("tabindex")&&it.setAttribute("tabindex","0"),!hn.code){$e.hooks.run("complete",hn),At&&At.call(hn.element);return}if($e.hooks.run("before-highlight",hn),!hn.grammar){Hn($e.util.encode(hn.code));return}if(ct&&Oe.Worker){var ut=new Worker($e.filename);ut.onmessage=function(ot){Hn(ot.data)},ut.postMessage(JSON.stringify({language:hn.language,code:hn.code,immediateClose:!0}))}else Hn($e.highlight(hn.code,hn.grammar,hn.language))},highlight:function(oe,ct,At){var dt={code:oe,grammar:ct,language:At};if($e.hooks.run("before-tokenize",dt),!dt.grammar)throw new Error('The language "'+dt.language+'" has no grammar.');return dt.tokens=$e.tokenize(dt.code,dt.grammar),$e.hooks.run("after-tokenize",dt),pt.stringify($e.util.encode(dt.tokens),dt.language)},tokenize:function(oe,ct){var At=ct.rest;if(At){for(var dt in At)ct[dt]=At[dt];delete ct.rest}var An=new Et;return Mt(An,An.head,oe),Jo(oe,An,ct,An.head,0),Nt(An)},hooks:{all:{},add:function(oe,ct){var At=$e.hooks.all;At[oe]=At[oe]||[],At[oe].push(ct)},run:function(oe,ct){var At=$e.hooks.all[oe];if(!(!At||!At.length))for(var dt=0,An;An=At[dt++];)An(ct)}},Token:pt};Oe.Prism=$e;function pt(oe,ct,At,dt){this.type=oe,this.content=ct,this.alias=At,this.length=(dt||"").length|0}pt.stringify=function oe(ct,At){if(typeof ct=="string")return ct;if(Array.isArray(ct)){var dt="";return ct.forEach(function(Hn){dt+=oe(Hn,At)}),dt}var An={type:ct.type,content:oe(ct.content,At),tag:"span",classes:["token",ct.type],attributes:{},language:At},it=ct.alias;it&&(Array.isArray(it)?Array.prototype.push.apply(An.classes,it):An.classes.push(it)),$e.hooks.run("wrap",An);var Dt="";for(var hn in An.attributes)Dt+=" "+hn+'="'+(An.attributes[hn]||"").replace(/"/g,"&quot;")+'"';return"<"+An.tag+' class="'+An.classes.join(" ")+'"'+Dt+">"+An.content+"</"+An.tag+">"};function Y(oe,ct,At,dt){oe.lastIndex=ct;var An=oe.exec(At);if(An&&dt&&An[1]){var it=An[1].length;An.index+=it,An[0]=An[0].slice(it)}return An}function Jo(oe,ct,At,dt,An,it){for(var Dt in At)if(!(!At.hasOwnProperty(Dt)||!At[Dt])){var hn=At[Dt];hn=Array.isArray(hn)?hn:[hn];for(var Hn=0;Hn<hn.length;++Hn){if(it&&it.cause==Dt+","+Hn)return;var ut=hn[Hn],ot=ut.inside,rt=!!ut.lookbehind,nn=!!ut.greedy,Zo=ut.alias;if(nn&&!ut.pattern.global){var Co=ut.pattern.toString().match(/[imsuy]*$/)[0];ut.pattern=RegExp(ut.pattern.source,Co+"g")}for(var Mn=ut.pattern||ut,No=dt.next,Gt=An;No!==ct.tail&&!(it&&Gt>=it.reach);Gt+=No.value.length,No=No.next){var yo=No.value;if(ct.length>oe.length)return;if(!(yo instanceof pt)){var gr=1,Us;if(nn){if(Us=Y(Mn,Gt,oe,rt),!Us||Us.index>=oe.length)break;var vn=Us.index,ma=Us.index+Us[0].length,ns=Gt;for(ns+=No.value.length;vn>=ns;)No=No.next,ns+=No.value.length;if(ns-=No.value.length,Gt=ns,No.value instanceof pt)continue;for(var Pa=No;Pa!==ct.tail&&(ns<ma||typeof Pa.value=="string");Pa=Pa.next)gr++,ns+=Pa.value.length;gr--,yo=oe.slice(Gt,ns),Us.index-=Gt}else if(Us=Y(Mn,0,yo,rt),!Us)continue;var vn=Us.index,Ls=Us[0],Ba=yo.slice(0,vn),Dr=yo.slice(vn+Ls.length),Gi=Gt+yo.length;it&&Gi>it.reach&&(it.reach=Gi);var hi=No.prev;Ba&&(hi=Mt(ct,hi,Ba),Gt+=Ba.length),Pn(ct,hi,gr);var Er=new pt(Dt,ot?$e.tokenize(Ls,ot):Ls,Zo,Ls);if(No=Mt(ct,hi,Er),Dr&&Mt(ct,No,Dr),gr>1){var bi={cause:Dt+","+Hn,reach:Gi};Jo(oe,ct,At,No.prev,Gt,bi),it&&bi.reach>it.reach&&(it.reach=bi.reach)}}}}}}function Et(){var oe={value:null,prev:null,next:null},ct={value:null,prev:oe,next:null};oe.next=ct,this.head=oe,this.tail=ct,this.length=0}function Mt(oe,ct,At){var dt=ct.next,An={value:At,prev:ct,next:dt};return ct.next=An,dt.prev=An,oe.length++,An}function Pn(oe,ct,At){for(var dt=ct.next,An=0;An<At&&dt!==oe.tail;An++)dt=dt.next;ct.next=dt,dt.prev=ct,oe.length-=An}function Nt(oe){for(var ct=[],At=oe.head.next;At!==oe.tail;)ct.push(At.value),At=At.next;return ct}if(!Oe.document)return Oe.addEventListener&&($e.disableWorkerMessageHandler||Oe.addEventListener("message",function(oe){var ct=JSON.parse(oe.data),At=ct.language,dt=ct.code,An=ct.immediateClose;Oe.postMessage($e.highlight(dt,$e.languages[At],At)),An&&Oe.close()},!1)),$e;var ce=$e.util.currentScript();ce&&($e.filename=ce.src,ce.hasAttribute("data-manual")&&($e.manual=!0));function De(){$e.manual||$e.highlightAll()}if(!$e.manual){var Ne=document.readyState;Ne==="loading"||Ne==="interactive"&&ce&&ce.defer?document.addEventListener("DOMContentLoaded",De):window.requestAnimationFrame?window.requestAnimationFrame(De):window.setTimeout(De,16)}return $e}(mn);return Se.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Oe){function ft(tt,Bt){return"___"+tt.toUpperCase()+Bt+"___"}Object.defineProperties(Oe.languages["markup-templating"]={},{buildPlaceholders:{value:function(tt,Bt,$e,pt){if(tt.language===Bt){var Y=tt.tokenStack=[];tt.code=tt.code.replace($e,function(Jo){if(typeof pt=="function"&&!pt(Jo))return Jo;for(var Et=Y.length,Mt;tt.code.indexOf(Mt=ft(Bt,Et))!==-1;)++Et;return Y[Et]=Jo,Mt}),tt.grammar=Oe.languages.markup}}},tokenizePlaceholders:{value:function(tt,Bt){if(tt.language!==Bt||!tt.tokenStack)return;tt.grammar=Oe.languages[Bt];var $e=0,pt=Object.keys(tt.tokenStack);function Y(Jo){for(var Et=0;Et<Jo.length&&!($e>=pt.length);Et++){var Mt=Jo[Et];if(typeof Mt=="string"||Mt.content&&typeof Mt.content=="string"){var Pn=pt[$e],Nt=tt.tokenStack[Pn],ce=typeof Mt=="string"?Mt:Mt.content,De=ft(Bt,Pn),Ne=ce.indexOf(De);if(Ne>-1){++$e;var oe=ce.substring(0,Ne),ct=new Oe.Token(Bt,Oe.tokenize(Nt,tt.grammar),"language-"+Bt,Nt),At=ce.substring(Ne+De.length),dt=[];oe&&dt.push.apply(dt,Y([oe])),dt.push(ct),At&&dt.push.apply(dt,Y([At])),typeof Mt=="string"?Jo.splice.apply(Jo,[Et,1].concat(dt)):Mt.content=dt}}else Mt.content&&Y(Mt.content)}return Jo}Y(tt.tokens)}}})}(Se),Se.languages.c=Se.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Se.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Se.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Se.languages.c.string],char:Se.languages.c.char,comment:Se.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Se.languages.c}}}}),Se.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Se.languages.c.boolean,function(Oe){var ft=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,tt=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return ft.source});Oe.languages.cpp=Oe.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return ft.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:ft,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Oe.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return tt})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Oe.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Oe.languages.cpp}}}}),Oe.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Oe.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Oe.languages.extend("cpp",{})}}),Oe.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Oe.languages.cpp["base-clause"])}(Se),function(Oe){function ft(Us,ma){return Us.replace(/<<(\d+)>>/g,function(ns,Pa){return"(?:"+ma[+Pa]+")"})}function tt(Us,ma,ns){return RegExp(ft(Us,ma),"")}function Bt(Us,ma){for(var ns=0;ns<ma;ns++)Us=Us.replace(/<<self>>/g,function(){return"(?:"+Us+")"});return Us.replace(/<<self>>/g,"[^\\s\\S]")}var $e={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function pt(Us){return"\\b(?:"+Us.trim().replace(/ /g,"|")+")\\b"}var Y=pt($e.typeDeclaration),Jo=RegExp(pt($e.type+" "+$e.typeDeclaration+" "+$e.contextual+" "+$e.other)),Et=pt($e.typeDeclaration+" "+$e.contextual+" "+$e.other),Mt=pt($e.type+" "+$e.typeDeclaration+" "+$e.other),Pn=Bt(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Nt=Bt(/\((?:[^()]|<<self>>)*\)/.source,2),ce=/@?\b[A-Za-z_]\w*\b/.source,De=ft(/<<0>>(?:\s*<<1>>)?/.source,[ce,Pn]),Ne=ft(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[Et,De]),oe=/\[\s*(?:,\s*)*\]/.source,ct=ft(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[Ne,oe]),At=ft(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Pn,Nt,oe]),dt=ft(/\(<<0>>+(?:,<<0>>+)+\)/.source,[At]),An=ft(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[dt,Ne,oe]),it={keyword:Jo,punctuation:/[<>()?,.:[\]]/},Dt=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,hn=/"(?:\\.|[^\\"\r\n])*"/.source,Hn=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Oe.languages.csharp=Oe.languages.extend("clike",{string:[{pattern:tt(/(^|[^$\\])<<0>>/.source,[Hn]),lookbehind:!0,greedy:!0},{pattern:tt(/(^|[^@$\\])<<0>>/.source,[hn]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:tt(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[Ne]),lookbehind:!0,inside:it},{pattern:tt(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[ce,An]),lookbehind:!0,inside:it},{pattern:tt(/(\busing\s+)<<0>>(?=\s*=)/.source,[ce]),lookbehind:!0},{pattern:tt(/(\b<<0>>\s+)<<1>>/.source,[Y,De]),lookbehind:!0,inside:it},{pattern:tt(/(\bcatch\s*\(\s*)<<0>>/.source,[Ne]),lookbehind:!0,inside:it},{pattern:tt(/(\bwhere\s+)<<0>>/.source,[ce]),lookbehind:!0},{pattern:tt(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[ct]),lookbehind:!0,inside:it},{pattern:tt(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[An,Mt,ce]),inside:it}],keyword:Jo,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Oe.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Oe.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:tt(/([(,]\s*)<<0>>(?=\s*:)/.source,[ce]),lookbehind:!0,alias:"punctuation"}}),Oe.languages.insertBefore("csharp","class-name",{namespace:{pattern:tt(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[ce]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:tt(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Nt]),lookbehind:!0,alias:"class-name",inside:it},"return-type":{pattern:tt(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[An,Ne]),inside:it,alias:"class-name"},"constructor-invocation":{pattern:tt(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[An]),lookbehind:!0,inside:it,alias:"class-name"},"generic-method":{pattern:tt(/<<0>>\s*<<1>>(?=\s*\()/.source,[ce,Pn]),inside:{function:tt(/^<<0>>/.source,[ce]),generic:{pattern:RegExp(Pn),alias:"class-name",inside:it}}},"type-list":{pattern:tt(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Y,De,ce,An,Jo.source,Nt,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:tt(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[De,Nt]),lookbehind:!0,greedy:!0,inside:Oe.languages.csharp},keyword:Jo,"class-name":{pattern:RegExp(An),greedy:!0,inside:it},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var ut=hn+"|"+Dt,ot=ft(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[ut]),rt=Bt(ft(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ot]),2),nn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,Zo=ft(/<<0>>(?:\s*\(<<1>>*\))?/.source,[Ne,rt]);Oe.languages.insertBefore("csharp","class-name",{attribute:{pattern:tt(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[nn,Zo]),lookbehind:!0,greedy:!0,inside:{target:{pattern:tt(/^<<0>>(?=\s*:)/.source,[nn]),alias:"keyword"},"attribute-arguments":{pattern:tt(/\(<<0>>*\)/.source,[rt]),inside:Oe.languages.csharp},"class-name":{pattern:RegExp(Ne),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var Co=/:[^}\r\n]+/.source,Mn=Bt(ft(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ot]),2),No=ft(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Mn,Co]),Gt=Bt(ft(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[ut]),2),yo=ft(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Gt,Co]);function gr(Us,ma){return{interpolation:{pattern:tt(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[Us]),lookbehind:!0,inside:{"format-string":{pattern:tt(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[ma,Co]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Oe.languages.csharp}}},string:/[\s\S]+/}}Oe.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:tt(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[No]),lookbehind:!0,greedy:!0,inside:gr(No,Mn)},{pattern:tt(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[yo]),lookbehind:!0,greedy:!0,inside:gr(yo,Gt)}],char:{pattern:RegExp(Dt),greedy:!0}}),Oe.languages.dotnet=Oe.languages.cs=Oe.languages.csharp}(Se),function(Oe){var ft=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Oe.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+ft.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+ft.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+ft.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+ft.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:ft,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Oe.languages.css.atrule.inside.rest=Oe.languages.css;var tt=Oe.languages.markup;tt&&(tt.tag.addInlined("style","css"),tt.tag.addAttribute("style","css"))}(Se),function(Oe){var ft=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,tt=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,Bt={pattern:RegExp(/(^|[^\w.])/.source+tt+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Oe.languages.java=Oe.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[Bt,{pattern:RegExp(/(^|[^\w.])/.source+tt+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:Bt.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+tt+/[A-Z]\w*\b/.source),lookbehind:!0,inside:Bt.inside}],keyword:ft,function:[Oe.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),Oe.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Oe.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":Bt,keyword:ft,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+tt+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:Bt.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+tt+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:Bt.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return ft.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Se),Se.languages.javascript=Se.languages.extend("clike",{"class-name":[Se.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Se.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Se.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Se.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Se.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Se.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Se.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Se.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Se.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Se.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Se.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Se.languages.markup&&(Se.languages.markup.tag.addInlined("script","javascript"),Se.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Se.languages.js=Se.languages.javascript,Se.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Se.languages.markup.tag.inside["attr-value"].inside.entity=Se.languages.markup.entity,Se.languages.markup.doctype.inside["internal-subset"].inside=Se.languages.markup,Se.hooks.add("wrap",function(Oe){Oe.type==="entity"&&(Oe.attributes.title=Oe.content.replace(/&amp;/,"&"))}),Object.defineProperty(Se.languages.markup.tag,"addInlined",{value:function(ft,tt){var Bt={};Bt["language-"+tt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Se.languages[tt]},Bt.cdata=/^<!\[CDATA\[|\]\]>$/i;var $e={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Bt}};$e["language-"+tt]={pattern:/[\s\S]+/,inside:Se.languages[tt]};var pt={};pt[ft]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return ft}),"i"),lookbehind:!0,greedy:!0,inside:$e},Se.languages.insertBefore("markup","cdata",pt)}}),Object.defineProperty(Se.languages.markup.tag,"addAttribute",{value:function(Oe,ft){Se.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Oe+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[ft,"language-"+ft],inside:Se.languages[ft]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Se.languages.html=Se.languages.markup,Se.languages.mathml=Se.languages.markup,Se.languages.svg=Se.languages.markup,Se.languages.xml=Se.languages.extend("markup",{}),Se.languages.ssml=Se.languages.xml,Se.languages.atom=Se.languages.xml,Se.languages.rss=Se.languages.xml,function(Oe){var ft=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,tt=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],Bt=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,$e=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,pt=/[{}\[\](),:;]/;Oe.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:ft,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:tt,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:Bt,operator:$e,punctuation:pt};var Y={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Oe.languages.php},Jo=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Y}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Y}}];Oe.languages.insertBefore("php","variable",{string:Jo,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:ft,string:Jo,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:tt,number:Bt,operator:$e,punctuation:pt}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Oe.hooks.add("before-tokenize",function(Et){if(/<\?/.test(Et.code)){var Mt=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Oe.languages["markup-templating"].buildPlaceholders(Et,"php",Mt)}}),Oe.hooks.add("after-tokenize",function(Et){Oe.languages["markup-templating"].tokenizePlaceholders(Et,"php")})}(Se),Se.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Se.languages.python["string-interpolation"].inside.interpolation.inside.rest=Se.languages.python,Se.languages.py=Se.languages.python,function(Oe){Oe.languages.ruby=Oe.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Oe.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var ft={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Oe.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Oe.languages.ruby.function;var tt="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",Bt=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Oe.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+tt+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:ft,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:ft,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+Bt),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+Bt+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Oe.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+tt),greedy:!0,inside:{interpolation:ft,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:ft,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:ft,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+tt),greedy:!0,inside:{interpolation:ft,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:ft,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Oe.languages.ruby.string,Oe.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Oe.languages.rb=Oe.languages.ruby}(Se),window.Prism=Qt,Se}(),st=B=>Jt=>Jt.options.get(B),es=B=>{const Jt=B.options.register;Jt("codesample_languages",{processor:"object[]"}),Jt("codesample_global_prismjs",{processor:"boolean",default:!1})},Vn=st("codesample_languages"),kn=st("codesample_global_prismjs"),zn=B=>To.Prism&&kn(B)?To.Prism:ss,Vt=B=>mo(B)&&B.nodeName==="PRE"&&B.className.indexOf("language-")!==-1,Ue=B=>{const Jt=B.selection?B.selection.getNode():null;return Vt(Jt)?wn.some(Jt):wn.none()},at=(B,Jt,Le)=>{const Qt=B.dom;B.undoManager.transact(()=>{const mn=Ue(B);return Le=Fn.DOM.encode(Le),mn.fold(()=>{B.insertContent('<pre id="__new" class="language-'+Jt+'">'+Le+"</pre>");const Se=Qt.select("#__new")[0];Qt.setAttrib(Se,"id",null),B.selection.select(Se)},Se=>{Qt.setAttrib(Se,"class","language-"+Jt),Se.innerHTML=Le,zn(B).highlightElement(Se),B.selection.select(Se)})})},ue=B=>Ue(B).bind(Le=>wn.from(Le.textContent)).getOr(""),ve=B=>{const Jt=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],Le=Vn(B);return Le||Jt},In=(B,Jt)=>Ue(B).fold(()=>Jt,Qt=>{const mn=Qt.className.match(/language-(\w+)/);return mn?mn[1]:Jt}),qt=B=>{const Jt=ve(B),Le=Tt(Jt).fold(ko(""),Se=>Se.value),Qt=In(B,Le),mn=ue(B);B.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:Jt},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:Qt,code:mn},onSubmit:Se=>{const Oe=Se.getData();at(B,Oe.language,Oe.code),Se.close()}})},re=B=>{B.addCommand("codesample",()=>{const Jt=B.selection.getNode();B.selection.isCollapsed()||Vt(Jt)?qt(B):B.formatter.toggle("code")})},oo=(B=>Jt=>Jt.replace(B,""))(/^\s+|\s+$/g);var qn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Qe=B=>{B.on("PreProcess",Jt=>{const Le=B.dom,Qt=Le.select("pre[contenteditable=false]",Jt.node);qn.each(qn.grep(Qt,Vt),mn=>{const Se=mn.textContent;Le.setAttrib(mn,"class",oo(Le.getAttrib(mn,"class"))),Le.setAttrib(mn,"contentEditable",null),Le.setAttrib(mn,"data-mce-highlighted",null);let Oe;for(;Oe=mn.firstChild;)mn.removeChild(Oe);const ft=Le.add(mn,"code");ft.textContent=Se})}),B.on("SetContent",()=>{const Jt=B.dom,Le=qn.grep(Jt.select("pre"),Qt=>Vt(Qt)&&Jt.getAttrib(Qt,"data-mce-highlighted")!=="true");Le.length&&B.undoManager.transact(()=>{qn.each(Le,Qt=>{var mn;qn.each(Jt.select("br",Qt),Se=>{Jt.replace(B.getDoc().createTextNode(`
`),Se)}),Qt.innerHTML=Jt.encode((mn=Qt.textContent)!==null&&mn!==void 0?mn:""),zn(B).highlightElement(Qt),Jt.setAttrib(Qt,"data-mce-highlighted",!0),Qt.className=oo(Qt.className)})})}),B.on("PreInit",()=>{B.parser.addNodeFilter("pre",Jt=>{var Le;for(let Qt=0,mn=Jt.length;Qt<mn;Qt++){const Se=Jt[Qt];((Le=Se.attr("class"))!==null&&Le!==void 0?Le:"").indexOf("language-")!==-1&&(Se.attr("contenteditable","false"),Se.attr("data-mce-highlighted","false"))}})})},Be=(B,Jt=vo)=>Le=>{const Qt=()=>{Le.setEnabled(B.selection.isEditable()),Jt(Le)};return B.on("NodeChange",Qt),Qt(),()=>{B.off("NodeChange",Qt)}},z=B=>{const Jt=B.selection.getStart();return B.dom.is(Jt,'pre[class*="language-"]')},$t=B=>{const Jt=()=>B.execCommand("codesample");B.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Jt,onSetup:Be(B,Le=>{Le.setActive(z(B))})}),B.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Jt,onSetup:Be(B)})};var Kt=()=>{$n.add("codesample",B=>{es(B),Qe(B),$t(B),re(B),B.on("dblclick",Jt=>{Vt(Jt.target)&&qt(B)})})};Kt()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(ut,ot,rt)=>{var nn;return rt(ut,ot.prototype)?!0:((nn=ut.constructor)===null||nn===void 0?void 0:nn.name)===ot.name},mo=ut=>{const ot=typeof ut;return ut===null?"null":ot==="object"&&Array.isArray(ut)?"array":ot==="object"&&Xo(ut,String,(rt,nn)=>nn.isPrototypeOf(rt))?"string":ot},vo=ut=>ot=>mo(ot)===ut,ko=ut=>ot=>typeof ot===ut,wn=vo("string"),no=ko("boolean"),Tt=ut=>ut==null,Fn=ut=>!Tt(ut),To=ko("function"),ss=ko("number"),st=(ut,ot)=>rt=>ut(ot(rt)),Vn=(ut=>()=>ut)(!1);class kn{constructor(ot,rt){this.tag=ot,this.value=rt}static some(ot){return new kn(!0,ot)}static none(){return kn.singletonNone}fold(ot,rt){return this.tag?rt(this.value):ot()}isSome(){return this.tag}isNone(){return!this.tag}map(ot){return this.tag?kn.some(ot(this.value)):kn.none()}bind(ot){return this.tag?ot(this.value):kn.none()}exists(ot){return this.tag&&ot(this.value)}forall(ot){return!this.tag||ot(this.value)}filter(ot){return!this.tag||ot(this.value)?this:kn.none()}getOr(ot){return this.tag?this.value:ot}or(ot){return this.tag?this:ot}getOrThunk(ot){return this.tag?this.value:ot()}orThunk(ot){return this.tag?this:ot()}getOrDie(ot){if(this.tag)return this.value;throw new Error(ot??"Called getOrDie on None")}static from(ot){return Fn(ot)?kn.some(ot):kn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ot){this.tag&&ot(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}kn.singletonNone=new kn(!1);const zn=(ut,ot)=>{const rt=ut.length,nn=new Array(rt);for(let Zo=0;Zo<rt;Zo++){const Co=ut[Zo];nn[Zo]=ot(Co,Zo)}return nn},Vt=(ut,ot)=>{for(let rt=0,nn=ut.length;rt<nn;rt++){const Zo=ut[rt];ot(Zo,rt)}},Ue=(ut,ot)=>{const rt=[];for(let nn=0,Zo=ut.length;nn<Zo;nn++){const Co=ut[nn];ot(Co,nn)&&rt.push(Co)}return rt},at=11,ue=1,ve=3,In=(ut,ot)=>{const nn=(ot||document).createElement("div");if(nn.innerHTML=ut,!nn.hasChildNodes()||nn.childNodes.length>1){const Zo="HTML does not have a single root node";throw console.error(Zo,ut),new Error(Zo)}return rn(nn.childNodes[0])},qt=(ut,ot)=>{const nn=(ot||document).createElement(ut);return rn(nn)},re=(ut,ot)=>{const nn=(ot||document).createTextNode(ut);return rn(nn)},rn=ut=>{if(ut==null)throw new Error("Node cannot be null or undefined");return{dom:ut}},qn={fromHtml:In,fromTag:qt,fromText:re,fromDom:rn,fromPoint:(ut,ot,rt)=>kn.from(ut.dom.elementFromPoint(ot,rt)).map(rn)},Qe=(ut,ot)=>{const rt=ut.dom;if(rt.nodeType!==ue)return!1;{const nn=rt;if(nn.matches!==void 0)return nn.matches(ot);if(nn.msMatchesSelector!==void 0)return nn.msMatchesSelector(ot);if(nn.webkitMatchesSelector!==void 0)return nn.webkitMatchesSelector(ot);if(nn.mozMatchesSelector!==void 0)return nn.mozMatchesSelector(ot);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Be=ut=>ut.dom.nodeName.toLowerCase(),z=ut=>ut.dom.nodeType,$t=ut=>ot=>z(ot)===ut,Kt=$t(ue),B=$t(ve),Jt=$t(at),Le=ut=>ot=>Kt(ot)&&Be(ot)===ut,Qt=ut=>kn.from(ut.dom.parentNode).map(qn.fromDom),mn=ut=>zn(ut.dom.childNodes,qn.fromDom),Se=(ut,ot,rt)=>{if(wn(rt)||no(rt)||ss(rt))ut.setAttribute(ot,rt+"");else throw console.error("Invalid call to Attribute.set. Key ",ot,":: Value ",rt,":: Element ",ut),new Error("Attribute value was not simple")},Oe=(ut,ot,rt)=>{Se(ut.dom,ot,rt)},ft=(ut,ot)=>{ut.dom.removeAttribute(ot)},tt=ut=>Jt(ut)&&Fn(ut.dom.host),Bt=ut=>qn.fromDom(ut.dom.getRootNode()),$e=ut=>{const ot=Bt(ut);return tt(ot)?kn.some(ot):kn.none()},pt=ut=>qn.fromDom(ut.dom.host),Y=ut=>{const ot=B(ut)?ut.dom.parentNode:ut.dom;if(ot==null||ot.ownerDocument===null)return!1;const rt=ot.ownerDocument;return $e(qn.fromDom(ot)).fold(()=>rt.body.contains(ot),st(Y,pt))},Jo=(ut,ot,rt)=>{let nn=ut.dom;const Zo=To(rt)?rt:Vn;for(;nn.parentNode;){nn=nn.parentNode;const Co=qn.fromDom(nn);if(ot(Co))return kn.some(Co);if(Zo(Co))break}return kn.none()},Et=(ut,ot,rt)=>Jo(ut,nn=>Qe(nn,ot),rt),Mt=ut=>ut.style!==void 0&&To(ut.style.getPropertyValue),Pn=(ut,ot)=>{const rt=ut.dom,Zo=window.getComputedStyle(rt).getPropertyValue(ot);return Zo===""&&!Y(ut)?Nt(rt,ot):Zo},Nt=(ut,ot)=>Mt(ut)?ut.style.getPropertyValue(ot):"",ce=ut=>Pn(ut,"direction")==="rtl"?"rtl":"ltr",De=(ut,ot)=>Ue(mn(ut),ot),Ne=(ut,ot)=>De(ut,rt=>Qe(rt,ot)),oe=ut=>Qt(ut).filter(Kt),ct=(ut,ot)=>(ot?Et(ut,"ol,ul"):kn.some(ut)).getOr(ut),At=Le("li"),dt=(ut,ot,rt)=>{Vt(ot,nn=>{const Zo=qn.fromDom(nn),Co=At(Zo),Mn=ct(Zo,Co);oe(Mn).each(Gt=>{if(ut.setStyle(Mn.dom,"direction",null),ce(Gt)===rt?ft(Mn,"dir"):Oe(Mn,"dir",rt),ce(Mn)!==rt&&ut.setStyle(Mn.dom,"direction",rt),Co){const gr=Ne(Mn,"li[dir],li[style]");Vt(gr,Us=>{ft(Us,"dir"),ut.setStyle(Us.dom,"direction",null)})}})})},An=(ut,ot)=>{ut.selection.isEditable()&&(dt(ut.dom,ut.selection.getSelectedBlocks(),ot),ut.nodeChanged())},it=ut=>{ut.addCommand("mceDirectionLTR",()=>{An(ut,"ltr")}),ut.addCommand("mceDirectionRTL",()=>{An(ut,"rtl")})},Dt=(ut,ot)=>rt=>{const nn=Zo=>{const Co=qn.fromDom(Zo.element);rt.setActive(ce(Co)===ot),rt.setEnabled(ut.selection.isEditable())};return ut.on("NodeChange",nn),rt.setEnabled(ut.selection.isEditable()),()=>ut.off("NodeChange",nn)},hn=ut=>{ut.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>ut.execCommand("mceDirectionLTR"),onSetup:Dt(ut,"ltr")}),ut.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>ut.execCommand("mceDirectionRTL"),onSetup:Dt(ut,"rtl")})};var Hn=()=>{$n.add("directionality",ut=>{it(ut),hn(ut)})};Hn()})();(function(){const $n=we=>{let _e=we;return{get:()=>_e,set:Ko=>{_e=Ko}}};var Xo=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=we=>({isFullscreen:()=>we.get()!==null}),vo=(we,_e,wt)=>{var un;return wt(we,_e.prototype)?!0:((un=we.constructor)===null||un===void 0?void 0:un.name)===_e.name},ko=we=>{const _e=typeof we;return we===null?"null":_e==="object"&&Array.isArray(we)?"array":_e==="object"&&vo(we,String,(wt,un)=>un.isPrototypeOf(wt))?"string":_e},wn=we=>_e=>ko(_e)===we,no=we=>_e=>typeof _e===we,Tt=we=>_e=>we===_e,Fn=wn("string"),To=wn("object"),ss=wn("array"),st=Tt(null),es=no("boolean"),Vn=Tt(void 0),kn=we=>we==null,zn=we=>!kn(we),Vt=no("function"),Ue=no("number"),at=()=>{},ue=(we,_e)=>(...wt)=>we(_e.apply(null,wt)),ve=(we,_e)=>wt=>we(_e(wt)),In=we=>()=>we;function qt(we,..._e){return(...wt)=>{const un=_e.concat(wt);return we.apply(null,un)}}const re=In(!1),rn=In(!0);class oo{constructor(_e,wt){this.tag=_e,this.value=wt}static some(_e){return new oo(!0,_e)}static none(){return oo.singletonNone}fold(_e,wt){return this.tag?wt(this.value):_e()}isSome(){return this.tag}isNone(){return!this.tag}map(_e){return this.tag?oo.some(_e(this.value)):oo.none()}bind(_e){return this.tag?_e(this.value):oo.none()}exists(_e){return this.tag&&_e(this.value)}forall(_e){return!this.tag||_e(this.value)}filter(_e){return!this.tag||_e(this.value)?this:oo.none()}getOr(_e){return this.tag?this.value:_e}or(_e){return this.tag?this:_e}getOrThunk(_e){return this.tag?this.value:_e()}orThunk(_e){return this.tag?this:_e()}getOrDie(_e){if(this.tag)return this.value;throw new Error(_e??"Called getOrDie on None")}static from(_e){return zn(_e)?oo.some(_e):oo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_e){this.tag&&_e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}oo.singletonNone=new oo(!1);const qn=Array.prototype.push,Qe=(we,_e)=>{const wt=we.length,un=new Array(wt);for(let Ko=0;Ko<wt;Ko++){const Ks=we[Ko];un[Ko]=_e(Ks,Ko)}return un},Be=(we,_e)=>{for(let wt=0,un=we.length;wt<un;wt++){const Ko=we[wt];_e(Ko,wt)}},z=(we,_e)=>{const wt=[];for(let un=0,Ko=we.length;un<Ko;un++){const Ks=we[un];_e(Ks,un)&&wt.push(Ks)}return wt},$t=(we,_e,wt)=>{for(let un=0,Ko=we.length;un<Ko;un++){const Ks=we[un];if(_e(Ks,un))return oo.some(Ks);if(wt(Ks,un))break}return oo.none()},Kt=(we,_e)=>$t(we,_e,re),B=we=>{const _e=[];for(let wt=0,un=we.length;wt<un;++wt){if(!ss(we[wt]))throw new Error("Arr.flatten item "+wt+" was not an array, input: "+we);qn.apply(_e,we[wt])}return _e},Jt=(we,_e)=>B(Qe(we,_e)),Le=(we,_e)=>_e>=0&&_e<we.length?oo.some(we[_e]):oo.none(),Qt=we=>Le(we,0),mn=(we,_e)=>{for(let wt=0;wt<we.length;wt++){const un=_e(we[wt],wt);if(un.isSome())return un}return oo.none()},Se=(we,_e,wt)=>we.isSome()&&_e.isSome()?oo.some(wt(we.getOrDie(),_e.getOrDie())):oo.none(),Oe=we=>{const _e=$n(oo.none()),wt=()=>_e.get().each(we);return{clear:()=>{wt(),_e.set(oo.none())},isSet:()=>_e.get().isSome(),get:()=>_e.get(),set:Da=>{wt(),_e.set(oo.some(Da))}}},ft=()=>Oe(we=>we.unbind()),tt=()=>{const we=Oe(at);return{...we,on:wt=>we.get().each(wt)}},Bt=(we,_e)=>{let wt=null;return{cancel:()=>{st(wt)||(clearTimeout(wt),wt=null)},throttle:(...Ks)=>{st(wt)&&(wt=setTimeout(()=>{wt=null,we.apply(null,Ks)},_e))}}},$e=Object.keys,pt=(we,_e)=>{const wt=$e(we);for(let un=0,Ko=wt.length;un<Ko;un++){const Ks=wt[un],nr=we[Ks];_e(nr,Ks)}},Y=typeof window<"u"?window:Function("return this;")(),Jo=(we,_e)=>{let wt=_e??Y;for(let un=0;un<we.length&&wt!==void 0&&wt!==null;++un)wt=wt[we[un]];return wt},Et=(we,_e)=>{const wt=we.split(".");return Jo(wt,_e)},Mt=(we,_e)=>Et(we,_e),Pn=(we,_e)=>{const wt=Mt(we,_e);if(wt==null)throw new Error(we+" not available on this browser");return wt},Nt=Object.getPrototypeOf,ce=we=>Pn("HTMLElement",we),De=we=>{const _e=Et("ownerDocument.defaultView",we);return To(we)&&(ce(_e).prototype.isPrototypeOf(we)||/^HTML\w*Element$/.test(Nt(we).constructor.name))},Ne=9,oe=11,ct=1,At=3,dt=we=>we.dom.nodeType,An=we=>_e=>dt(_e)===we,it=we=>Dt(we)&&De(we.dom),Dt=An(ct),hn=An(At),Hn=An(oe),ut=(we,_e,wt)=>{if(Fn(wt)||es(wt)||Ue(wt))we.setAttribute(_e,wt+"");else throw console.error("Invalid call to Attribute.set. Key ",_e,":: Value ",wt,":: Element ",we),new Error("Attribute value was not simple")},ot=(we,_e,wt)=>{ut(we.dom,_e,wt)},rt=(we,_e)=>{const wt=we.dom.getAttribute(_e);return wt===null?void 0:wt},nn=(we,_e)=>{we.dom.removeAttribute(_e)},Zo=we=>we.dom.classList!==void 0,Co=(we,_e)=>Zo(we)&&we.dom.classList.contains(_e),Mn=(we,_e,wt=0,un)=>{const Ko=we.indexOf(_e,wt);return Ko!==-1?Vn(un)?!0:Ko+_e.length<=un:!1},No=we=>we.style!==void 0&&Vt(we.style.getPropertyValue),Gt=(we,_e)=>{const un=(_e||document).createElement("div");if(un.innerHTML=we,!un.hasChildNodes()||un.childNodes.length>1){const Ko="HTML does not have a single root node";throw console.error(Ko,we),new Error(Ko)}return Us(un.childNodes[0])},yo=(we,_e)=>{const un=(_e||document).createElement(we);return Us(un)},gr=(we,_e)=>{const un=(_e||document).createTextNode(we);return Us(un)},Us=we=>{if(we==null)throw new Error("Node cannot be null or undefined");return{dom:we}},ns={fromHtml:Gt,fromTag:yo,fromText:gr,fromDom:Us,fromPoint:(we,_e,wt)=>oo.from(we.dom.elementFromPoint(_e,wt)).map(Us)},Pa=(we,_e)=>{const wt=we.dom;if(wt.nodeType!==ct)return!1;{const un=wt;if(un.matches!==void 0)return un.matches(_e);if(un.msMatchesSelector!==void 0)return un.msMatchesSelector(_e);if(un.webkitMatchesSelector!==void 0)return un.webkitMatchesSelector(_e);if(un.mozMatchesSelector!==void 0)return un.mozMatchesSelector(_e);throw new Error("Browser lacks native selectors")}},vn=we=>we.nodeType!==ct&&we.nodeType!==Ne&&we.nodeType!==oe||we.childElementCount===0,Ls=(we,_e)=>{const wt=document;return vn(wt)?[]:Qe(wt.querySelectorAll(we),ns.fromDom)},Ba=(we,_e)=>we.dom===_e.dom,Dr=we=>ns.fromDom(we.dom.ownerDocument),Gi=we=>oo.from(we.dom.parentNode).map(ns.fromDom),hi=(we,_e)=>{const wt=Vt(_e)?_e:re;let un=we.dom;const Ko=[];for(;un.parentNode!==null&&un.parentNode!==void 0;){const Ks=un.parentNode,nr=ns.fromDom(Ks);if(Ko.push(nr),wt(nr)===!0)break;un=Ks}return Ko},Er=we=>{const _e=wt=>z(wt,un=>!Ba(we,un));return Gi(we).map(Bi).map(_e).getOr([])},bi=we=>oo.from(we.dom.nextSibling).map(ns.fromDom),Bi=we=>Qe(we.dom.childNodes,ns.fromDom),kr=we=>Hn(we)&&zn(we.dom.host),Lo=we=>ns.fromDom(we.dom.getRootNode()),Aa=we=>{const _e=Lo(we);return kr(_e)?oo.some(_e):oo.none()},vi=we=>ns.fromDom(we.dom.host),nu=we=>{if(zn(we.target)){const _e=ns.fromDom(we.target);if(Dt(_e)&&yt(_e)&&we.composed&&we.composedPath){const wt=we.composedPath();if(wt)return Qt(wt)}}return oo.from(we.target)},yt=we=>zn(we.dom.shadowRoot),Xr=we=>{const _e=hn(we)?we.dom.parentNode:we.dom;if(_e==null||_e.ownerDocument===null)return!1;const wt=_e.ownerDocument;return Aa(ns.fromDom(_e)).fold(()=>wt.body.contains(_e),ve(Xr,vi))},Oa=we=>{const _e=we.dom.body;if(_e==null)throw new Error("Body is not available yet");return ns.fromDom(_e)},Ia=(we,_e,wt)=>{if(!Fn(wt))throw console.error("Invalid call to CSS.set. Property ",_e,":: Value ",wt,":: Element ",we),new Error("CSS value must be a string: "+wt);No(we)&&we.style.setProperty(_e,wt)},Mc=(we,_e,wt)=>{const un=we.dom;Ia(un,_e,wt)},ac=(we,_e)=>{const wt=we.dom;pt(_e,(un,Ko)=>{Ia(wt,Ko,un)})},Ga=(we,_e)=>{const wt=we.dom,Ko=window.getComputedStyle(wt).getPropertyValue(_e);return Ko===""&&!Xr(we)?Ve(wt,_e):Ko},Ve=(we,_e)=>No(we)?we.style.getPropertyValue(_e):"",Pe=(we,_e,wt,un,Ko,Ks,nr)=>({target:we,x:_e,y:wt,stop:un,prevent:Ko,kill:Ks,raw:nr}),Rt=we=>{const _e=ns.fromDom(nu(we).getOr(we.target)),wt=()=>we.stopPropagation(),un=()=>we.preventDefault(),Ko=ue(un,wt);return Pe(_e,we.clientX,we.clientY,wt,un,Ko,we)},Ht=(we,_e)=>wt=>{we(wt)&&_e(Rt(wt))},Qo=(we,_e,wt,un,Ko)=>{const Ks=Ht(wt,un);return we.dom.addEventListener(_e,Ks,Ko),{unbind:qt(Fs,we,_e,Ks,Ko)}},vs=(we,_e,wt,un)=>Qo(we,_e,wt,un,!1),Fs=(we,_e,wt,un)=>{we.dom.removeEventListener(_e,wt,un)},ka=rn,fn=(we,_e,wt)=>vs(we,_e,ka,wt),xt=we=>{let _e=!1,wt;return(...un)=>(_e||(_e=!0,wt=we.apply(null,un)),wt)},We=(we,_e,wt,un)=>{const Ko=we.isiOS()&&/ipad/i.test(wt)===!0,Ks=we.isiOS()&&!Ko,nr=we.isiOS()||we.isAndroid(),Da=nr||un("(pointer:coarse)"),si=Ko||!Ks&&nr&&un("(min-device-width:768px)"),Fi=Ks||nr&&!si,Ol=_e.isSafari()&&we.isiOS()&&/safari/i.test(wt)===!1,di=!Fi&&!si&&!Ol;return{isiPad:In(Ko),isiPhone:In(Ks),isTablet:In(si),isPhone:In(Fi),isTouch:In(Da),isAndroid:we.isAndroid,isiOS:we.isiOS,isWebView:In(Ol),isDesktop:In(di)}},Ge=(we,_e)=>{for(let wt=0;wt<we.length;wt++){const un=we[wt];if(un.test(_e))return un}},pn=(we,_e)=>{const wt=Ge(we,_e);if(!wt)return{major:0,minor:0};const un=Ko=>Number(_e.replace(wt,"$"+Ko));return xo(un(1),un(2))},Tn=(we,_e)=>{const wt=String(_e).toLowerCase();return we.length===0?Xn():pn(we,wt)},Xn=()=>xo(0,0),xo=(we,_e)=>({major:we,minor:_e}),Eo={nu:xo,detect:Tn,unknown:Xn},Bo=(we,_e)=>mn(_e.brands,wt=>{const un=wt.brand.toLowerCase();return Kt(we,Ko=>{var Ks;return un===((Ks=Ko.brand)===null||Ks===void 0?void 0:Ks.toLowerCase())}).map(Ko=>({current:Ko.name,version:Eo.nu(parseInt(wt.version,10),0)}))}),Vo=(we,_e)=>{const wt=String(_e).toLowerCase();return Kt(we,un=>un.search(wt))},cs=(we,_e)=>Vo(we,_e).map(wt=>{const un=Eo.detect(wt.versionRegexes,_e);return{current:wt.name,version:un}}),hr=(we,_e)=>Vo(we,_e).map(wt=>{const un=Eo.detect(wt.versionRegexes,_e);return{current:wt.name,version:un}}),Va=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ur=we=>_e=>Mn(_e,we),Al=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:we=>Mn(we,"edge/")&&Mn(we,"chrome")&&Mn(we,"safari")&&Mn(we,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Va],search:we=>Mn(we,"chrome")&&!Mn(we,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:we=>Mn(we,"msie")||Mn(we,"trident")},{name:"Opera",versionRegexes:[Va,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ur("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ur("firefox")},{name:"Safari",versionRegexes:[Va,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:we=>(Mn(we,"safari")||Mn(we,"mobile/"))&&Mn(we,"applewebkit")}],La=[{name:"Windows",search:Ur("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:we=>Mn(we,"iphone")||Mn(we,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ur("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ur("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ur("linux"),versionRegexes:[]},{name:"Solaris",search:Ur("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ur("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ur("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Bs={browsers:In(Al),oses:In(La)},er="Edge",ar="Chromium",Ua="IE",Ti="Opera",Wc="Firefox",Ta="Safari",ws=()=>yu({current:void 0,version:Eo.unknown()}),yu=we=>{const _e=we.current,wt=we.version,un=Ko=>()=>_e===Ko;return{current:_e,version:wt,isEdge:un(er),isChromium:un(ar),isIE:un(Ua),isOpera:un(Ti),isFirefox:un(Wc),isSafari:un(Ta)}},Ei={unknown:ws,nu:yu,edge:In(er),chromium:In(ar),ie:In(Ua),opera:In(Ti),firefox:In(Wc),safari:In(Ta)},Es="Windows",xu="iOS",Xs="Android",hd="Linux",Vl="macOS",fs="Solaris",li="FreeBSD",Ld="ChromeOS",Wa=()=>Dm({current:void 0,version:Eo.unknown()}),Dm=we=>{const _e=we.current,wt=we.version,un=Ko=>()=>_e===Ko;return{current:_e,version:wt,isWindows:un(Es),isiOS:un(xu),isAndroid:un(Xs),isMacOS:un(Vl),isLinux:un(hd),isSolaris:un(fs),isFreeBSD:un(li),isChromeOS:un(Ld)}},ui={unknown:Wa,nu:Dm,windows:In(Es),ios:In(xu),android:In(Xs),linux:In(hd),macos:In(Vl),solaris:In(fs),freebsd:In(li),chromeos:In(Ld)},qi={detect:(we,_e,wt)=>{const un=Bs.browsers(),Ko=Bs.oses(),Ks=_e.bind(si=>Bo(un,si)).orThunk(()=>cs(un,we)).fold(Ei.unknown,Ei.nu),nr=hr(Ko,we).fold(ui.unknown,ui.nu),Da=We(nr,Ks,we,wt);return{browser:Ks,os:nr,deviceType:Da}}},or=we=>window.matchMedia(we).matches;let wu=xt(()=>qi.detect(window.navigator.userAgent,oo.from(window.navigator.userAgentData),or));const Rm=()=>wu(),Ku=(we,_e)=>({left:we,top:_e,translate:(un,Ko)=>Ku(we+un,_e+Ko)}),oi=Ku,qa=we=>{const _e=we!==void 0?we.dom:document,wt=_e.body.scrollLeft||_e.documentElement.scrollLeft,un=_e.body.scrollTop||_e.documentElement.scrollTop;return oi(wt,un)},Ki=we=>{const _e=we===void 0?window:we;return Rm().browser.isFirefox()?oo.none():oo.from(_e.visualViewport)},Wr=(we,_e,wt,un)=>({x:we,y:_e,width:wt,height:un,right:we+wt,bottom:_e+un}),bd=we=>{const _e=we===void 0?window:we,wt=_e.document,un=qa(ns.fromDom(wt));return Ki(_e).fold(()=>{const Ko=_e.document.documentElement,Ks=Ko.clientWidth,nr=Ko.clientHeight;return Wr(un.left,un.top,Ks,nr)},Ko=>Wr(Math.max(Ko.pageLeft,un.left),Math.max(Ko.pageTop,un.top),Ko.width,Ko.height))},ol=(we,_e,wt)=>Ki(wt).map(un=>{const Ko=Ks=>_e(Rt(Ks));return un.addEventListener(we,Ko),{unbind:()=>un.removeEventListener(we,Ko)}}).getOrThunk(()=>({unbind:at}));var le=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),He=tinymce.util.Tools.resolve("tinymce.Env");const Je=(we,_e)=>{we.dispatch("FullscreenStateChanged",{state:_e}),we.dispatch("ResizeEditor")},Pt=we=>_e=>_e.options.get(we),Nn=we=>{const _e=we.options.register;_e("fullscreen_native",{processor:"boolean",default:!1})},ho=Pt("fullscreen_native"),Kn=we=>{const _e=ns.fromDom(we.getElement());return Aa(_e).map(vi).getOrThunk(()=>Oa(Dr(_e)))},ms=we=>we.fullscreenElement!==void 0?we.fullscreenElement:we.msFullscreenElement!==void 0?we.msFullscreenElement:we.webkitFullscreenElement!==void 0?we.webkitFullscreenElement:null,Ds=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",br=we=>{const _e=we.dom;_e.requestFullscreen?_e.requestFullscreen():_e.msRequestFullscreen?_e.msRequestFullscreen():_e.webkitRequestFullScreen&&_e.webkitRequestFullScreen()},X=we=>{const _e=we.dom;_e.exitFullscreen?_e.exitFullscreen():_e.msExitFullscreen?_e.msExitFullscreen():_e.webkitCancelFullScreen&&_e.webkitCancelFullScreen()},fe=we=>we.dom===ms(Dr(we).dom),Ze=(we,_e,wt)=>z(hi(we,wt),_e),St=(we,_e)=>z(Er(we),_e),Oo=we=>Ls(we),Gn=(we,_e,wt)=>Ze(we,un=>Pa(un,_e),wt),jr=(we,_e)=>St(we,wt=>Pa(wt,_e)),vc="data-ephox-mobile-fullscreen-style",bn="display:none!important;",fl="position:absolute!important;",ba="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",$d="background-color:rgb(255,255,255)!important;",Ii=He.os.isAndroid(),cr=we=>{const _e=Ga(we,"background-color");return _e!==void 0&&_e!==""?"background-color:"+_e+"!important":$d},ou=(we,_e,wt)=>{const un=Fi=>jr(Fi,"*:not(.tox-silver-sink)"),Ko=Fi=>Ol=>{const di=rt(Ol,"style"),Pi=di===void 0?"no-styles":di.trim();Pi!==Fi&&(ot(Ol,vc,Pi),ac(Ol,we.parseStyle(Fi)))},Ks=Gn(_e,"*"),nr=Jt(Ks,un),Da=cr(wt);Be(nr,Ko(bn)),Be(Ks,Ko(fl+ba+Da)),Ko((Ii===!0?"":fl)+ba+Da)(_e)},Nc=we=>{const _e=Oo("["+vc+"]");Be(_e,wt=>{const un=rt(wt,vc);un&&un!=="no-styles"?ac(wt,we.parseStyle(un)):nn(wt,"style"),nn(wt,vc)})},Ul=le.DOM,uc=()=>bd(window),Mm=we=>window.scrollTo(we.x,we.y),Xp=Ki().fold(()=>({bind:at,unbind:at}),we=>{const _e=tt(),wt=ft(),un=ft(),Ko=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Ks=()=>{window.requestAnimationFrame(()=>{_e.on(Fi=>ac(Fi,{top:we.offsetTop+"px",left:we.offsetLeft+"px",height:we.height+"px",width:we.width+"px"}))})},nr=Bt(()=>{Ko(),Ks()},50);return{bind:Fi=>{_e.set(Fi),nr.throttle(),wt.set(ol("resize",nr.throttle)),un.set(ol("scroll",nr.throttle))},unbind:()=>{_e.on(()=>{wt.clear(),un.clear()}),_e.clear()}}}),Qb=(we,_e)=>{const wt=document.body,un=document.documentElement,Ko=we.getContainer(),Ks=ns.fromDom(Ko),nr=bi(Ks).filter(Bc=>it(Bc)&&Co(Bc,"tox-silver-sink")),Da=Kn(we),si=_e.get(),Fi=ns.fromDom(we.getBody()),Ol=He.deviceType.isTouch(),di=Ko.style,Pi=we.iframeElement,dc=Pi==null?void 0:Pi.style,pl=Bc=>{Bc(wt,"tox-fullscreen"),Bc(un,"tox-fullscreen"),Bc(Ko,"tox-fullscreen"),Aa(Ks).map(tr=>vi(tr).dom).each(tr=>{Bc(tr,"tox-fullscreen"),Bc(tr,"tox-shadowhost")})},Yi=()=>{Ol&&Nc(we.dom),pl(Ul.removeClass),Xp.unbind(),oo.from(_e.get()).each(Bc=>Bc.fullscreenChangeHandler.unbind())};if(si)si.fullscreenChangeHandler.unbind(),ho(we)&&fe(Da)&&X(Dr(Da)),dc.width=si.iframeWidth,dc.height=si.iframeHeight,di.width=si.containerWidth,di.height=si.containerHeight,di.top=si.containerTop,di.left=si.containerLeft,Se(nr,si.sinkCssPosition,(Bc,tr)=>{Mc(Bc,"position",tr)}),Yi(),Mm(si.scrollPos),_e.set(null),Je(we,!1),we.off("remove",Yi);else{const Bc=fn(Dr(Da),Ds(),_i=>{ho(we)&&!fe(Da)&&_e.get()!==null&&Qb(we,_e)}),tr={scrollPos:uc(),containerWidth:di.width,containerHeight:di.height,containerTop:di.top,containerLeft:di.left,iframeWidth:dc.width,iframeHeight:dc.height,fullscreenChangeHandler:Bc,sinkCssPosition:nr.map(_i=>Ga(_i,"position"))};Ol&&ou(we.dom,Ks,Fi),dc.width=dc.height="100%",di.width=di.height="",pl(Ul.addClass),nr.each(_i=>{Mc(_i,"position","fixed")}),Xp.bind(Ks),we.on("remove",Yi),_e.set(tr),ho(we)&&br(Da),Je(we,!0)}},Ka=(we,_e)=>{we.addCommand("mceFullScreen",()=>{Qb(we,_e)})};var Nm=tinymce.util.Tools.resolve("tinymce.util.VK");const Ec=(we,_e)=>{we.on("init",()=>{we.on("keydown",wt=>{wt.keyCode===Nm.TAB&&!(wt.metaKey||wt.ctrlKey)&&_e.get()&&wt.preventDefault()})})},sl=(we,_e)=>wt=>{wt.setActive(_e.get()!==null);const un=Ko=>wt.setActive(Ko.state);return we.on("FullscreenStateChanged",un),()=>we.off("FullscreenStateChanged",un)},ic=(we,_e)=>{const wt=()=>we.execCommand("mceFullScreen");we.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:wt,onSetup:sl(we,_e),context:"any"}),we.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:wt,onSetup:sl(we,_e),shortcut:"Meta+Shift+F",context:"any"})};var Bm=()=>{Xo.add("fullscreen",we=>{const _e=$n(null);return we.inline||(Nn(we),Ka(we,_e),ic(we,_e),Ec(we,_e),we.addShortcut("Meta+Shift+F","","mceFullScreen")),mo(_e)})};Bm()})();(function(){const $n=it=>{let Dt=it;return{get:()=>Dt,set:ut=>{Dt=ut}}};var Xo=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let vo=0;const ko=it=>{const hn=new Date().getTime(),Hn=Math.floor(mo()*1e9);return vo++,it+"_"+Hn+vo+String(hn)},wn=it=>({addTab:hn=>{var Hn;const ut=(Hn=hn.name)!==null&&Hn!==void 0?Hn:ko("tab-name"),ot=it.get();ot[ut]=hn,it.set(ot)}}),no=(it,Dt)=>{it.addCommand("mceHelp",Dt)},Tt=it=>Dt=>Dt.options.get(it),Fn=it=>{const Dt=it.options.register;Dt("help_tabs",{processor:"array"})},To=Tt("help_tabs"),ss=Tt("forced_plugins"),st=(it,Dt)=>{it.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:Dt,context:"any"}),it.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:Dt,context:"any"})},es=(it,Dt,hn)=>{var Hn;return hn(it,Dt.prototype)?!0:((Hn=it.constructor)===null||Hn===void 0?void 0:Hn.name)===Dt.name},Vn=it=>{const Dt=typeof it;return it===null?"null":Dt==="object"&&Array.isArray(it)?"array":Dt==="object"&&es(it,String,(hn,Hn)=>Hn.isPrototypeOf(hn))?"string":Dt},kn=it=>Dt=>Vn(Dt)===it,zn=it=>Dt=>typeof Dt===it,Vt=it=>Dt=>it===Dt,Ue=kn("string"),at=Vt(void 0),ue=it=>it==null,ve=it=>!ue(it),In=zn("function"),re=(it=>()=>it)(!1);class rn{constructor(Dt,hn){this.tag=Dt,this.value=hn}static some(Dt){return new rn(!0,Dt)}static none(){return rn.singletonNone}fold(Dt,hn){return this.tag?hn(this.value):Dt()}isSome(){return this.tag}isNone(){return!this.tag}map(Dt){return this.tag?rn.some(Dt(this.value)):rn.none()}bind(Dt){return this.tag?Dt(this.value):rn.none()}exists(Dt){return this.tag&&Dt(this.value)}forall(Dt){return!this.tag||Dt(this.value)}filter(Dt){return!this.tag||Dt(this.value)?this:rn.none()}getOr(Dt){return this.tag?this.value:Dt}or(Dt){return this.tag?this:Dt}getOrThunk(Dt){return this.tag?this.value:Dt()}orThunk(Dt){return this.tag?this:Dt()}getOrDie(Dt){if(this.tag)return this.value;throw new Error(Dt??"Called getOrDie on None")}static from(Dt){return ve(Dt)?rn.some(Dt):rn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Dt){this.tag&&Dt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rn.singletonNone=new rn(!1);const oo=Array.prototype.slice,qn=Array.prototype.indexOf,Qe=(it,Dt)=>qn.call(it,Dt),Be=(it,Dt)=>Qe(it,Dt)>-1,z=(it,Dt)=>{const hn=it.length,Hn=new Array(hn);for(let ut=0;ut<hn;ut++){const ot=it[ut];Hn[ut]=Dt(ot,ut)}return Hn},$t=(it,Dt)=>{const hn=[];for(let Hn=0,ut=it.length;Hn<ut;Hn++){const ot=it[Hn];Dt(ot,Hn)&&hn.push(ot)}return hn},Kt=(it,Dt,hn)=>{for(let Hn=0,ut=it.length;Hn<ut;Hn++){const ot=it[Hn];if(Dt(ot,Hn))return rn.some(ot);if(hn(ot,Hn))break}return rn.none()},B=(it,Dt)=>Kt(it,Dt,re),Jt=(it,Dt)=>{const hn=oo.call(it,0);return hn.sort(Dt),hn},Le=Object.keys,Qt=Object.hasOwnProperty,mn=(it,Dt)=>Se(it,Dt)?rn.from(it[Dt]):rn.none(),Se=(it,Dt)=>Qt.call(it,Dt),Oe=it=>{const Dt=[],hn=Hn=>{Dt.push(Hn)};for(let Hn=0;Hn<it.length;Hn++)it[Hn].each(hn);return Dt};var ft=tinymce.util.Tools.resolve("tinymce.Resource"),tt=tinymce.util.Tools.resolve("tinymce.util.I18n");const Bt=(it,Dt)=>ft.load(`tinymce.html-i18n.help-keynav.${Dt}`,`${it}/js/i18n/keynav/${Dt}.js`),$e=it=>Bt(it,tt.getCode()).catch(()=>Bt(it,"en")),pt=(it,Dt)=>{it.on("init",()=>{$e(Dt)})},Y=async it=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await $e(it)}]});var Jo=tinymce.util.Tools.resolve("tinymce.Env");const Et=it=>{const Dt=Jo.os.isMacOS()||Jo.os.isiOS(),ut=Dt?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},ot=it.split("+"),rt=z(ot,nn=>{const Zo=nn.toLowerCase().trim();return Se(ut,Zo)?ut[Zo]:nn});return Dt?rt.join("").replace(/\s/,""):rt.join("+")},Mt=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],Pn=()=>{const it=z(Mt,hn=>{const Hn=z(hn.shortcuts,Et).join(" or ");return[hn.action,Hn]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:it}]}},Nt=z([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"uploadcare",name:"Image Optimizer Powered by Uploadcare",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],it=>({...it,type:it.type||"opensource",slug:it.slug||it.key})),ce=it=>{const Dt=()=>{const Co=$t(Nt,({type:Gt})=>Gt==="premium"),Mn=Jt(z(Co,Gt=>Gt.name),(Gt,yo)=>Gt.localeCompare(yo)),No=z(Mn,Gt=>`<li>${Gt}</li>`).join("");return"<div><p><b>"+tt.translate("Premium plugins:")+"</b></p><ul>"+No+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+tt.translate("Learn more...")+"</a></li></ul></div>"},hn=Co=>`<a data-alloy-tabstop="true" tabindex="-1" href="${Co.url}" target="_blank" rel="noopener">${Co.name}</a>`,Hn=(Co,Mn)=>{const No=Co.plugins[Mn].getMetadata;if(In(No)){const Gt=No();return{name:Gt.name,html:hn(Gt)}}else return{name:Mn,html:Mn}},ut=(Co,Mn)=>B(Nt,No=>No.key===Mn).fold(()=>Hn(Co,Mn),No=>{const Gt=No.type==="premium"?`${No.name}*`:No.name,yo=hn({name:Gt,url:`https://www.tiny.cloud/docs/tinymce/7/${No.slug}/`});return{name:Gt,html:yo}}),ot=Co=>{const Mn=Le(Co.plugins),No=ss(Co);return at(No)?Mn:$t(Mn,Gt=>!Be(No,Gt))},rt=Co=>{const Mn=ot(Co),No=Jt(z(Mn,ma=>ut(Co,ma)),(ma,ns)=>ma.name.localeCompare(ns.name)),Gt=z(No,ma=>"<li>"+ma.html+"</li>"),yo=Gt.length,gr=Gt.join("");return"<p><b>"+tt.translate(["Plugins installed ({0}):",yo])+"</b></p><ul>"+gr+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(Co=>Co==null?"":"<div>"+rt(Co)+"</div>")(it),Dt()].join("")}]}};var De=tinymce.util.Tools.resolve("tinymce.EditorManager");const Ne=()=>{const hn='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/7/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((ut,ot)=>ut.indexOf("@")===0?"X.X.X":ut+"."+ot)(De.majorVersion,De.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+tt.translate(["You are using {0}",hn])+"</p>",presets:"document"}]}},oe=(it,Dt)=>{const hn={},Hn=z(it,ut=>{var ot;if(Ue(ut))return Se(Dt,ut)&&(hn[ut]=Dt[ut]),ut;{const rt=(ot=ut.name)!==null&&ot!==void 0?ot:ko("tab-name");return hn[rt]=ut,rt}});return{tabs:hn,names:Hn}},ct=it=>{const Dt=Le(it),hn=Dt.indexOf("versions");return hn!==-1&&(Dt.splice(hn,1),Dt.push("versions")),{tabs:it,names:Dt}},At=async(it,Dt,hn)=>{const Hn=Pn(),ut=await Y(hn),ot=ce(it),rt=Ne(),nn={[Hn.name]:Hn,[ut.name]:ut,[ot.name]:ot,[rt.name]:rt,...Dt.get()};return rn.from(To(it)).fold(()=>ct(nn),Zo=>oe(Zo,nn))},dt=(it,Dt,hn)=>()=>{At(it,Dt,hn).then(({tabs:Hn,names:ut})=>{const ot=z(ut,Zo=>mn(Hn,Zo)),nn={type:"tabpanel",tabs:Oe(ot)};it.windowManager.open({title:"Help",size:"medium",body:nn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var An=()=>{Xo.add("help",(it,Dt)=>{const hn=$n({}),Hn=wn(hn);Fn(it);const ut=dt(it,hn,Dt);return st(it,ut),no(it,ut),it.shortcuts.add("Alt+0","Open help dialog","mceHelp"),pt(it,Dt),Hn})};An()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(Et,Mt,Pn)=>{var Nt;return Pn(Et,Mt.prototype)?!0:((Nt=Et.constructor)===null||Nt===void 0?void 0:Nt.name)===Mt.name},mo=Et=>{const Mt=typeof Et;return Et===null?"null":Mt==="object"&&Array.isArray(Et)?"array":Mt==="object"&&Xo(Et,String,(Pn,Nt)=>Nt.isPrototypeOf(Pn))?"string":Mt},vo=Et=>Mt=>mo(Mt)===Et,ko=Et=>Mt=>typeof Mt===Et,wn=vo("string"),no=vo("object"),Tt=vo("array"),Fn=ko("function");var To=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ss=tinymce.util.Tools.resolve("tinymce.EditorManager"),st=tinymce.util.Tools.resolve("tinymce.Env"),es=tinymce.util.Tools.resolve("tinymce.util.Tools");const Vn=Et=>Mt=>Mt.options.get(Et),kn=Et=>{const Mt=Et.options.register,Pn=Nt=>wn(Nt)||Fn(Nt)||no(Nt);Mt("importcss_merge_classes",{processor:"boolean",default:!0}),Mt("importcss_exclusive",{processor:"boolean",default:!0}),Mt("importcss_selector_converter",{processor:"function"}),Mt("importcss_selector_filter",{processor:Pn}),Mt("importcss_file_filter",{processor:Pn}),Mt("importcss_groups",{processor:"object[]"}),Mt("importcss_append",{processor:"boolean",default:!1})},zn=Vn("importcss_merge_classes"),Vt=Vn("importcss_exclusive"),Ue=Vn("importcss_selector_converter"),at=Vn("importcss_selector_filter"),ue=Vn("importcss_groups"),ve=Vn("importcss_append"),In=Vn("importcss_file_filter"),qt=Vn("skin"),re=Vn("skin_url"),rn=Array.prototype.push,oo=(Et,Mt)=>{const Pn=Et.length,Nt=new Array(Pn);for(let ce=0;ce<Pn;ce++){const De=Et[ce];Nt[ce]=Mt(De,ce)}return Nt},qn=Et=>{const Mt=[];for(let Pn=0,Nt=Et.length;Pn<Nt;++Pn){if(!Tt(Et[Pn]))throw new Error("Arr.flatten item "+Pn+" was not an array, input: "+Et);rn.apply(Mt,Et[Pn])}return Mt},Qe=(Et,Mt)=>qn(oo(Et,Mt)),Be=()=>{const Et=[],Mt=[],Pn={};return{addItemToGroup:(Ne,oe)=>{Pn[Ne]?Pn[Ne].push(oe):(Mt.push(Ne),Pn[Ne]=[oe])},addItem:Ne=>{Et.push(Ne)},toFormats:()=>Qe(Mt,oe=>{const ct=Pn[oe];return ct.length===0?[]:[{title:oe,items:ct}]}).concat(Et)}},z=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,$t=Et=>{const Mt=st.cacheSuffix;return wn(Et)&&(Et=Et.replace("?"+Mt,"").replace("&"+Mt,"")),Et},Kt=(Et,Mt)=>{const Pn=qt(Et);if(Pn){const Nt=re(Et),ce=Nt?Et.documentBaseURI.toAbsolute(Nt):ss.baseURL+"/skins/ui/"+Pn,De=ss.baseURL+"/skins/content/",Ne=Et.editorManager.suffix;return Mt===ce+"/content"+(Et.inline?".inline":"")+`${Ne}.css`||Mt.indexOf(De)!==-1}return!1},B=Et=>wn(Et)?Mt=>Mt.indexOf(Et)!==-1:Et instanceof RegExp?Mt=>Et.test(Mt):Et,Jt=Et=>Et.styleSheet,Le=Et=>Et.selectorText,Qt=(Et,Mt,Pn)=>{const Nt=[],ce={},De=(Ne,oe)=>{let ct=Ne.href,At;if(ct=$t(ct),!(!ct||Pn&&!Pn(ct,oe)||Kt(Et,ct))){es.each(Ne.imports,dt=>{De(dt,!0)});try{At=Ne.cssRules||Ne.rules}catch{}es.each(At,dt=>{Jt(dt)&&dt.styleSheet?De(dt.styleSheet,!0):Le(dt)&&es.each(dt.selectorText.split(","),An=>{Nt.push(es.trim(An))})})}};es.each(Et.contentCSS,Ne=>{ce[Ne]=!0}),Pn||(Pn=(Ne,oe)=>oe||ce[Ne]);try{es.each(Mt.styleSheets,Ne=>{De(Ne)})}catch{}return Nt},mn=(Et,Mt)=>{let Pn={};const Nt=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(Mt);if(!Nt)return;const ce=Nt[1],De=Nt[2].substr(1).split(".").join(" "),Ne=es.makeMap("a,img");return Nt[1]?(Pn={title:Mt},Et.schema.getTextBlockElements()[ce]?Pn.block=ce:Et.schema.getBlockElements()[ce]||Ne[ce.toLowerCase()]?Pn.selector=ce:Pn.inline=ce):Nt[2]&&(Pn={inline:"span",title:Mt.substr(1),classes:De}),zn(Et)?Pn.classes=De:Pn.attributes={class:De},Pn},Se=(Et,Mt)=>es.grep(Et,Pn=>!Pn.filter||Pn.filter(Mt)),Oe=Et=>es.map(Et,Mt=>es.extend({},Mt,{original:Mt,selectors:{},filter:B(Mt.filter)})),ft=(Et,Mt)=>Mt===null||Vt(Et),tt=(Et,Mt,Pn,Nt)=>!(ft(Et,Pn)?Mt in Nt:Mt in Pn.selectors),Bt=(Et,Mt,Pn,Nt)=>{ft(Et,Pn)?Nt[Mt]=!0:Pn.selectors[Mt]=!0},$e=(Et,Mt,Pn,Nt)=>{let ce;const De=Ue(Et);return Nt&&Nt.selector_converter?ce=Nt.selector_converter:De?ce=De:ce=()=>mn(Et,Pn),ce.call(Mt,Pn,Nt)},pt=Et=>{Et.on("init",()=>{const Mt=Be(),Pn={},Nt=B(at(Et)),ce=Oe(ue(Et)),De=(oe,ct)=>{if(tt(Et,oe,ct,Pn)){Bt(Et,oe,ct,Pn);const At=$e(Et,Et.plugins.importcss,oe,ct);if(At){const dt=At.name||To.DOM.uniqueId();return Et.formatter.register(dt,At),{title:At.title,format:dt}}}return null};es.each(Qt(Et,Et.getDoc(),B(In(Et))),oe=>{if(!z.test(oe)&&(!Nt||Nt(oe))){const ct=Se(ce,oe);if(ct.length>0)es.each(ct,At=>{const dt=De(oe,At);dt&&Mt.addItemToGroup(At.title,dt)});else{const At=De(oe,null);At&&Mt.addItem(At)}}});const Ne=Mt.toFormats();Et.dispatch("addStyleModifications",{items:Ne,replace:!ve(Et)})})},Y=Et=>({convertSelectorToFormat:Pn=>mn(Et,Pn)});var Jo=()=>{$n.add("importcss",Et=>(kn(Et),pt(Et),Y(Et)))};Jo()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=qt=>re=>re.options.get(qt),mo=qt=>{const re=qt.options.register;re("insertdatetime_dateformat",{processor:"string",default:qt.translate("%Y-%m-%d")}),re("insertdatetime_timeformat",{processor:"string",default:qt.translate("%H:%M:%S")}),re("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),re("insertdatetime_element",{processor:"boolean",default:!1})},vo=Xo("insertdatetime_dateformat"),ko=Xo("insertdatetime_timeformat"),wn=Xo("insertdatetime_formats"),no=Xo("insertdatetime_element"),Tt=qt=>{const re=wn(qt);return re.length>0?re[0]:ko(qt)},Fn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),To="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ss="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),st="January February March April May June July August September October November December".split(" "),es=(qt,re)=>{if(qt=""+qt,qt.length<re)for(let rn=0;rn<re-qt.length;rn++)qt="0"+qt;return qt},Vn=(qt,re,rn=new Date)=>(re=re.replace("%D","%m/%d/%Y"),re=re.replace("%r","%I:%M:%S %p"),re=re.replace("%Y",""+rn.getFullYear()),re=re.replace("%y",""+rn.getYear()),re=re.replace("%m",es(rn.getMonth()+1,2)),re=re.replace("%d",es(rn.getDate(),2)),re=re.replace("%H",""+es(rn.getHours(),2)),re=re.replace("%M",""+es(rn.getMinutes(),2)),re=re.replace("%S",""+es(rn.getSeconds(),2)),re=re.replace("%I",""+((rn.getHours()+11)%12+1)),re=re.replace("%p",rn.getHours()<12?"AM":"PM"),re=re.replace("%B",""+qt.translate(st[rn.getMonth()])),re=re.replace("%b",""+qt.translate(ss[rn.getMonth()])),re=re.replace("%A",""+qt.translate(To[rn.getDay()])),re=re.replace("%a",""+qt.translate(Fn[rn.getDay()])),re=re.replace("%%","%"),re),kn=(qt,re,rn,oo)=>{const qn=qt.dom.create("time",{datetime:rn},oo);qt.dom.replace(qn,re),qt.selection.select(qn,!0),qt.selection.collapse(!1)},zn=(qt,re)=>{if(no(qt)&&qt.selection.isEditable()){const rn=Vn(qt,re);let oo;/%[HMSIp]/.test(re)?oo=Vn(qt,"%Y-%m-%dT%H:%M"):oo=Vn(qt,"%Y-%m-%d");const qn=qt.dom.getParent(qt.selection.getStart(),"time");qn?kn(qt,qn,oo,rn):qt.insertContent('<time datetime="'+oo+'">'+rn+"</time>")}else qt.insertContent(Vn(qt,re))},Vt=qt=>{qt.addCommand("mceInsertDate",(re,rn)=>{zn(qt,rn??vo(qt))}),qt.addCommand("mceInsertTime",(re,rn)=>{zn(qt,rn??ko(qt))})},Ue=qt=>{let re=qt;return{get:()=>re,set:qn=>{re=qn}}};var at=tinymce.util.Tools.resolve("tinymce.util.Tools");const ue=qt=>re=>{const rn=()=>{re.setEnabled(qt.selection.isEditable())};return qt.on("NodeChange",rn),rn(),()=>{qt.off("NodeChange",rn)}},ve=qt=>{const re=wn(qt),rn=Ue(Tt(qt)),oo=Qe=>qt.execCommand("mceInsertDate",!1,Qe);qt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Qe=>Qe===rn.get(),fetch:Qe=>{Qe(at.map(re,Be=>({type:"choiceitem",text:Vn(qt,Be),value:Be})))},onAction:Qe=>{oo(rn.get())},onItemAction:(Qe,Be)=>{rn.set(Be),oo(Be)},onSetup:ue(qt)});const qn=Qe=>()=>{rn.set(Qe),oo(Qe)};qt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>at.map(re,Qe=>({type:"menuitem",text:Vn(qt,Qe),onAction:qn(Qe)})),onSetup:ue(qt)})};var In=()=>{$n.add("insertdatetime",qt=>{mo(qt),Vt(qt),ve(qt)})};In()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=(Ve,Pe,Rt)=>{var Ht;return Rt(Ve,Pe.prototype)?!0:((Ht=Ve.constructor)===null||Ht===void 0?void 0:Ht.name)===Pe.name},mo=Ve=>{const Pe=typeof Ve;return Ve===null?"null":Pe==="object"&&Array.isArray(Ve)?"array":Pe==="object"&&Xo(Ve,String,(Rt,Ht)=>Ht.isPrototypeOf(Rt))?"string":Pe},vo=Ve=>Pe=>mo(Pe)===Ve,ko=vo("string"),wn=vo("object"),no=vo("array"),Tt=Ve=>Ve==null,Fn=Ve=>!Tt(Ve);class To{constructor(Pe,Rt){this.tag=Pe,this.value=Rt}static some(Pe){return new To(!0,Pe)}static none(){return To.singletonNone}fold(Pe,Rt){return this.tag?Rt(this.value):Pe()}isSome(){return this.tag}isNone(){return!this.tag}map(Pe){return this.tag?To.some(Pe(this.value)):To.none()}bind(Pe){return this.tag?Pe(this.value):To.none()}exists(Pe){return this.tag&&Pe(this.value)}forall(Pe){return!this.tag||Pe(this.value)}filter(Pe){return!this.tag||Pe(this.value)?this:To.none()}getOr(Pe){return this.tag?this.value:Pe}or(Pe){return this.tag?this:Pe}getOrThunk(Pe){return this.tag?this.value:Pe()}orThunk(Pe){return this.tag?this:Pe()}getOrDie(Pe){if(this.tag)return this.value;throw new Error(Pe??"Called getOrDie on None")}static from(Pe){return Fn(Pe)?To.some(Pe):To.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Pe){this.tag&&Pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}To.singletonNone=new To(!1);const ss=Array.prototype.push,st=(Ve,Pe)=>{for(let Rt=0,Ht=Ve.length;Rt<Ht;Rt++){const Qo=Ve[Rt];Pe(Qo,Rt)}},es=Ve=>{const Pe=[];for(let Rt=0,Ht=Ve.length;Rt<Ht;++Rt){if(!no(Ve[Rt]))throw new Error("Arr.flatten item "+Rt+" was not an array, input: "+Ve);ss.apply(Pe,Ve[Rt])}return Pe},Vn=Ve=>{let Pe=Ve;return{get:()=>Pe,set:Qo=>{Pe=Qo}}},kn=Object.keys,zn=Object.hasOwnProperty,Vt=(Ve,Pe)=>{const Rt=kn(Ve);for(let Ht=0,Qo=Rt.length;Ht<Qo;Ht++){const vs=Rt[Ht],Fs=Ve[vs];Pe(Fs,vs)}},Ue=(Ve,Pe)=>at(Ve,Pe)?To.from(Ve[Pe]):To.none(),at=(Ve,Pe)=>zn.call(Ve,Pe),ue=Ve=>Pe=>Pe.options.get(Ve),ve=Ve=>{const Pe=Ve.options.register;Pe("audio_template_callback",{processor:"function"}),Pe("video_template_callback",{processor:"function"}),Pe("iframe_template_callback",{processor:"function"}),Pe("media_live_embeds",{processor:"boolean",default:!0}),Pe("media_filter_html",{processor:"boolean",default:!0}),Pe("media_url_resolver",{processor:"function"}),Pe("media_alt_source",{processor:"boolean",default:!0}),Pe("media_poster",{processor:"boolean",default:!0}),Pe("media_dimensions",{processor:"boolean",default:!0})},In=ue("audio_template_callback"),qt=ue("video_template_callback"),re=ue("iframe_template_callback"),rn=ue("media_live_embeds"),oo=ue("media_filter_html"),qn=ue("media_url_resolver"),Qe=ue("media_alt_source"),Be=ue("media_poster"),z=ue("media_dimensions");var $t=tinymce.util.Tools.resolve("tinymce.util.Tools"),Kt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Jt=Kt.DOM,Le=Ve=>Ve.replace(/px$/,""),Qt=Ve=>{const Pe=Ve.attr("style"),Rt=Pe?Jt.parseStyle(Pe):{};return{type:"ephox-embed-iri",source:Ve.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Ue(Rt,"max-width").map(Le).getOr(""),height:Ue(Rt,"max-height").map(Le).getOr("")}},mn=(Ve,Pe)=>{let Rt={};const Qo=B({validate:!1,forced_root_block:!1},Pe).parse(Ve);for(let vs=Qo;vs;vs=vs.walk())if(vs.type===1){const Fs=vs.name;if(vs.attr("data-ephox-embed-iri")){Rt=Qt(vs);break}else!Rt.source&&Fs==="param"&&(Rt.source=vs.attr("movie")),(Fs==="iframe"||Fs==="object"||Fs==="embed"||Fs==="video"||Fs==="audio")&&(Rt.type||(Rt.type=Fs),Rt=$t.extend(vs.attributes.map,Rt)),Fs==="source"&&(Rt.source?Rt.altsource||(Rt.altsource=vs.attr("src")):Rt.source=vs.attr("src")),Fs==="img"&&!Rt.poster&&(Rt.poster=vs.attr("src"))}return Rt.source=Rt.source||Rt.src||"",Rt.altsource=Rt.altsource||"",Rt.poster=Rt.poster||"",Rt},Se=Ve=>{var Pe;const Rt={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ht=(Pe=Ve.toLowerCase().split(".").pop())!==null&&Pe!==void 0?Pe:"";return Ue(Rt,Ht).getOr("")};var Oe=tinymce.util.Tools.resolve("tinymce.html.Node"),ft=tinymce.util.Tools.resolve("tinymce.html.Serializer");const tt=(Ve,Pe={})=>B({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Pe},Ve),Bt=Kt.DOM,$e=Ve=>/^[0-9.]+$/.test(Ve)?Ve+"px":Ve,pt=(Ve,Pe)=>{const Rt=Pe.attr("style"),Ht=Rt?Bt.parseStyle(Rt):{};Fn(Ve.width)&&(Ht["max-width"]=$e(Ve.width)),Fn(Ve.height)&&(Ht["max-height"]=$e(Ve.height)),Pe.attr("style",Bt.serializeStyle(Ht))},Y=["source","altsource"],Jo=(Ve,Pe,Rt,Ht)=>{let Qo=0,vs=0;const Fs=tt(Ht);Fs.addNodeFilter("source",fn=>Qo=fn.length);const ka=Fs.parse(Ve);for(let fn=ka;fn;fn=fn.walk())if(fn.type===1){const xt=fn.name;if(fn.attr("data-ephox-embed-iri")){pt(Pe,fn);break}else{switch(xt){case"video":case"object":case"embed":case"img":case"iframe":Pe.height!==void 0&&Pe.width!==void 0&&(fn.attr("width",Pe.width),fn.attr("height",Pe.height));break}if(Rt)switch(xt){case"video":fn.attr("poster",Pe.poster),fn.attr("src",null);for(let Ge=Qo;Ge<2;Ge++)if(Pe[Y[Ge]]){const pn=new Oe("source",1);pn.attr("src",Pe[Y[Ge]]),pn.attr("type",Pe[Y[Ge]+"mime"]||null),fn.append(pn)}break;case"iframe":fn.attr("src",Pe.source);break;case"object":const We=fn.getAll("img").length>0;if(Pe.poster&&!We){fn.attr("src",Pe.poster);const Ge=new Oe("img",1);Ge.attr("src",Pe.poster),Ge.attr("width",Pe.width),Ge.attr("height",Pe.height),fn.append(Ge)}break;case"source":if(vs<2&&(fn.attr("src",Pe[Y[vs]]),fn.attr("type",Pe[Y[vs]+"mime"]||null),!Pe[Y[vs]])){fn.remove();continue}vs++;break;case"img":Pe.poster||fn.remove();break}}}return ft({},Ht).serialize(ka)},Et=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Mt=Ve=>{const Pe=Ve.match(/^(https?:\/\/|www\.)(.+)$/i);return Pe&&Pe.length>1?Pe[1]==="www."?"https://":Pe[1]:"https://"},Pn=(Ve,Pe)=>{const Rt=Mt(Pe),Ht=Ve.regex.exec(Pe);let Qo=Rt+Ve.url;if(Fn(Ht))for(let vs=0;vs<Ht.length;vs++)Qo=Qo.replace("$"+vs,()=>Ht[vs]?Ht[vs]:"");return Qo.replace(/\?$/,"")},Nt=Ve=>{const Pe=Et.filter(Rt=>Rt.regex.test(Ve));return Pe.length>0?$t.extend({},Pe[0],{url:Pn(Pe[0],Ve)}):null},ce=(Ve,Pe)=>{if(Pe)return Pe(Ve);{const Rt=Ve.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Ve.source+'" width="'+Ve.width+'" height="'+Ve.height+'"'+Rt+"></iframe>"}},De=Ve=>{let Pe='<object data="'+Ve.source+'" width="'+Ve.width+'" height="'+Ve.height+'" type="application/x-shockwave-flash">';return Ve.poster&&(Pe+='<img src="'+Ve.poster+'" width="'+Ve.width+'" height="'+Ve.height+'" />'),Pe+="</object>",Pe},Ne=(Ve,Pe)=>Pe?Pe(Ve):'<audio controls="controls" src="'+Ve.source+'">'+(Ve.altsource?`
<source src="`+Ve.altsource+'"'+(Ve.altsourcemime?' type="'+Ve.altsourcemime+'"':"")+` />
`:"")+"</audio>",oe=(Ve,Pe)=>Pe?Pe(Ve):'<video width="'+Ve.width+'" height="'+Ve.height+'"'+(Ve.poster?' poster="'+Ve.poster+'"':"")+` controls="controls">
<source src="`+Ve.source+'"'+(Ve.sourcemime?' type="'+Ve.sourcemime+'"':"")+` />
`+(Ve.altsource?'<source src="'+Ve.altsource+'"'+(Ve.altsourcemime?' type="'+Ve.altsourcemime+'"':"")+` />
`:"")+"</video>",ct=(Ve,Pe)=>{var Rt;const Ht=$t.extend({},Pe);if(!Ht.source&&($t.extend(Ht,mn((Rt=Ht.embed)!==null&&Rt!==void 0?Rt:"",Ve.schema)),!Ht.source))return"";Ht.altsource||(Ht.altsource=""),Ht.poster||(Ht.poster=""),Ht.source=Ve.convertURL(Ht.source,"source"),Ht.altsource=Ve.convertURL(Ht.altsource,"source"),Ht.sourcemime=Se(Ht.source),Ht.altsourcemime=Se(Ht.altsource),Ht.poster=Ve.convertURL(Ht.poster,"poster");const Qo=Nt(Ht.source);if(Qo&&(Ht.source=Qo.url,Ht.type=Qo.type,Ht.allowfullscreen=Qo.allowFullscreen,Ht.width=Ht.width||String(Qo.w),Ht.height=Ht.height||String(Qo.h)),Ht.embed)return Jo(Ht.embed,Ht,!0,Ve.schema);{const vs=In(Ve),Fs=qt(Ve),ka=re(Ve);return Ht.width=Ht.width||"300",Ht.height=Ht.height||"150",$t.each(Ht,(fn,xt)=>{Ht[xt]=Ve.dom.encode(""+fn)}),Ht.type==="iframe"?ce(Ht,ka):Ht.sourcemime==="application/x-shockwave-flash"?De(Ht):Ht.sourcemime.indexOf("audio")!==-1?Ne(Ht,vs):oe(Ht,Fs)}},At=Ve=>Ve.hasAttribute("data-mce-object")||Ve.hasAttribute("data-ephox-embed-iri"),dt=Ve=>{Ve.on("mousedown",Pe=>{const Rt=Ve.dom.getParent(Pe.target,".mce-preview-object");Rt&&Ve.dom.getAttrib(Rt,"data-mce-selected")==="2"&&Pe.stopImmediatePropagation()}),Ve.on("click keyup touchend",()=>{const Pe=Ve.selection.getNode();Pe&&Ve.dom.hasClass(Pe,"mce-preview-object")&&Ve.dom.getAttrib(Pe,"data-mce-selected")&&Pe.setAttribute("data-mce-selected","2")}),Ve.on("ObjectResized",Pe=>{const Rt=Pe.target;if(Rt.getAttribute("data-mce-object")){let Ht=Rt.getAttribute("data-mce-html");Ht&&(Ht=unescape(Ht),Rt.setAttribute("data-mce-html",escape(Jo(Ht,{width:String(Pe.width),height:String(Pe.height)},!1,Ve.schema))))}})},An={},it=(Ve,Pe,Rt)=>new Promise((Ht,Qo)=>{const vs=Fs=>(Fs.html&&(An[Ve.source]=Fs),Ht({url:Ve.source,html:Fs.html?Fs.html:Pe(Ve)}));An[Ve.source]?vs(An[Ve.source]):Rt({url:Ve.source}).then(vs).catch(Qo)}),Dt=(Ve,Pe)=>Promise.resolve({html:Pe(Ve),url:Ve.source}),hn=Ve=>Pe=>ct(Ve,Pe),Hn=(Ve,Pe)=>{const Rt=qn(Ve);return Rt?it(Pe,hn(Ve),Rt):Dt(Pe,hn(Ve))},ut=Ve=>at(An,Ve),ot=(Ve,Pe)=>Ue(Pe,Ve).bind(Rt=>Ue(Rt,"meta")),rt=(Ve,Pe,Rt)=>Ht=>{const Qo=()=>Ue(Ve,Ht),vs=()=>Ue(Pe,Ht),Fs=xt=>Ue(xt,"value").bind(We=>We.length>0?To.some(We):To.none()),ka=()=>Qo().bind(xt=>wn(xt)?Fs(xt).orThunk(vs):vs().orThunk(()=>To.from(xt))),fn=()=>vs().orThunk(()=>Qo().bind(xt=>wn(xt)?Fs(xt):To.from(xt)));return{[Ht]:(Ht===Rt?ka():fn()).getOr("")}},nn=(Ve,Pe)=>{const Rt={};return Ue(Ve,"dimensions").each(Ht=>{st(["width","height"],Qo=>{Ue(Pe,Qo).orThunk(()=>Ue(Ht,Qo)).each(vs=>Rt[Qo]=vs)})}),Rt},Zo=(Ve,Pe)=>{const Rt=Pe&&Pe!=="dimensions"?ot(Pe,Ve).getOr({}):{},Ht=rt(Ve,Rt,Pe);return{...Ht("source"),...Ht("altsource"),...Ht("poster"),...Ht("embed"),...nn(Ve,Rt)}},Co=Ve=>{const Pe={...Ve,source:{value:Ue(Ve,"source").getOr("")},altsource:{value:Ue(Ve,"altsource").getOr("")},poster:{value:Ue(Ve,"poster").getOr("")}};return st(["width","height"],Rt=>{Ue(Ve,Rt).each(Ht=>{const Qo=Pe.dimensions||{};Qo[Rt]=Ht,Pe.dimensions=Qo})}),Pe},Mn=Ve=>Pe=>{const Rt=Pe&&Pe.msg?"Media embed handler error: "+Pe.msg:"Media embed handler threw unknown error.";Ve.notificationManager.open({type:"error",text:Rt})},No=Ve=>{const Pe=Ve.selection.getNode(),Rt=At(Pe)?Ve.serializer.serialize(Pe,{selection:!0}):"",Ht=mn(Rt,Ve.schema),vs=(()=>{if(Us(Ht.source,Ht.type)){const Fs=Ve.dom.getRect(Pe);return{width:Fs.w.toString().replace(/px$/,""),height:Fs.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Rt,...Ht,...vs}},Gt=(Ve,Pe)=>Rt=>{if(ko(Rt.url)&&Rt.url.trim().length>0){const Ht=Rt.html,vs={...mn(Ht,Pe.schema),source:Rt.url,embed:Ht};Ve.setData(Co(vs))}},yo=(Ve,Pe)=>{const Rt=Ve.dom.select("*[data-mce-object]");for(let Ht=0;Ht<Pe.length;Ht++)for(let Qo=Rt.length-1;Qo>=0;Qo--)Pe[Ht]===Rt[Qo]&&Rt.splice(Qo,1);Ve.selection.select(Rt[0])},gr=(Ve,Pe)=>{const Rt=Ve.dom.select("*[data-mce-object]");Ve.insertContent(Pe),yo(Ve,Rt),Ve.nodeChanged()},Us=(Ve,Pe)=>Fn(Pe)&&Pe==="ephox-embed-iri"&&Fn(Nt(Ve)),ma=(Ve,Pe)=>((Ht,Qo)=>Ht.width!==Qo.width||Ht.height!==Qo.height)(Ve,Pe)&&Us(Pe.source,Ve.type),ns=(Ve,Pe,Rt)=>{var Ht;Pe.embed=ma(Ve,Pe)&&z(Rt)?ct(Rt,{...Pe,embed:""}):Jo((Ht=Pe.embed)!==null&&Ht!==void 0?Ht:"",Pe,!1,Rt.schema),Pe.embed&&(Ve.source===Pe.source||ut(Pe.source))?gr(Rt,Pe.embed):Hn(Rt,Pe).then(Qo=>{gr(Rt,Qo.html)}).catch(Mn(Rt))},Pa=Ve=>{const Pe=No(Ve),Rt=Vn(Pe),Ht=Co(Pe),Qo=(Bo,Vo)=>{const cs=Zo(Vo.getData(),"source");Bo.source!==cs.source&&(Gt(Eo,Ve)({url:cs.source,html:""}),Hn(Ve,cs).then(Gt(Eo,Ve)).catch(Mn(Ve)))},vs=Bo=>{var Vo;const cs=Zo(Bo.getData()),hr=mn((Vo=cs.embed)!==null&&Vo!==void 0?Vo:"",Ve.schema);Bo.setData(Co(hr))},Fs=(Bo,Vo,cs)=>{const hr=Zo(Bo.getData(),Vo),Va=ma(cs,hr)&&z(Ve)?{...hr,embed:""}:hr,Ur=ct(Ve,Va);Bo.setData(Co({...Va,embed:Ur}))},ka=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],fn=z(Ve)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],xt={title:"General",name:"general",items:es([ka,fn])},Ge={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},pn=[];Qe(Ve)&&pn.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Be(Ve)&&pn.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Tn={title:"Advanced",name:"advanced",items:pn},Xn=[xt,Ge];pn.length>0&&Xn.push(Tn);const xo={type:"tabpanel",tabs:Xn},Eo=Ve.windowManager.open({title:"Insert/Edit Media",size:"normal",body:xo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Bo=>{const Vo=Zo(Bo.getData());ns(Rt.get(),Vo,Ve),Bo.close()},onChange:(Bo,Vo)=>{switch(Vo.name){case"source":Qo(Rt.get(),Bo);break;case"embed":vs(Bo);break;case"dimensions":case"altsource":case"poster":Fs(Bo,Vo.name,Rt.get());break}Rt.set(Zo(Bo.getData()))},initialData:Ht})},vn=Ve=>({showDialog:()=>{Pa(Ve)}}),Ls=Ve=>{const Pe=()=>{Pa(Ve)};Ve.addCommand("mceMedia",Pe)},Ba=(Ve,Pe,Rt)=>Ve.length>=Pe.length&&Ve.substr(Rt,Rt+Pe.length)===Pe,Dr=(Ve,Pe)=>Ba(Ve,Pe,0);var Gi=tinymce.util.Tools.resolve("tinymce.Env");const hi=Ve=>{const Pe=Ve.name;return Pe==="iframe"||Pe==="video"||Pe==="audio"},Er=(Ve,Pe,Rt,Ht=null)=>{const Qo=Ve.attr(Rt);return Fn(Qo)?Qo:at(Pe,Rt)?null:Ht},bi=(Ve,Pe,Rt)=>{const Ht=Pe.name==="img"||Ve.name==="video",Qo=Ht?"300":null,vs=Ve.name==="audio"?"30":"150",Fs=Ht?vs:null;Pe.attr({width:Er(Ve,Rt,"width",Qo),height:Er(Ve,Rt,"height",Fs)})},Bi=(Ve,Pe,Rt,Ht)=>{const Qo=tt(Ve.schema).parse(Ht,{context:Pe});for(;Qo.firstChild;)Rt.append(Qo.firstChild)},kr=(Ve,Pe)=>{const Rt=Pe.name,Ht=new Oe("img",1);return Aa(Ve,Pe,Ht),bi(Pe,Ht,{}),Ht.attr({style:Pe.attr("style"),src:Gi.transparentSrc,"data-mce-object":Rt,class:"mce-object mce-object-"+Rt}),Ht},Lo=(Ve,Pe)=>{var Rt;const Ht=Pe.name,Qo=new Oe("span",1);Qo.attr({contentEditable:"false",style:Pe.attr("style"),"data-mce-object":Ht,class:"mce-preview-object mce-object-"+Ht}),Aa(Ve,Pe,Qo);const vs=Ve.dom.parseStyle((Rt=Pe.attr("style"))!==null&&Rt!==void 0?Rt:""),Fs=new Oe(Ht,1);if(bi(Pe,Fs,vs),Fs.attr({src:Pe.attr("src"),style:Pe.attr("style"),class:Pe.attr("class")}),Ht==="iframe")Fs.attr({allowfullscreen:Pe.attr("allowfullscreen"),frameborder:"0",sandbox:Pe.attr("sandbox"),referrerpolicy:Pe.attr("referrerpolicy")});else{st(["controls","crossorigin","currentTime","loop","muted","poster","preload"],We=>{Fs.attr(We,Pe.attr(We))});const xt=Qo.attr("data-mce-html");Fn(xt)&&Bi(Ve,Ht,Fs,unescape(xt))}const ka=new Oe("span",1);return ka.attr("class","mce-shim"),Qo.append(Fs),Qo.append(ka),Qo},Aa=(Ve,Pe,Rt)=>{var Ht;const Qo=(Ht=Pe.attributes)!==null&&Ht!==void 0?Ht:[];let vs=Qo.length;for(;vs--;){const xt=Qo[vs].name;let We=Qo[vs].value;xt!=="width"&&xt!=="height"&&xt!=="style"&&!Dr(xt,"data-mce-")&&((xt==="data"||xt==="src")&&(We=Ve.convertURL(We,xt)),Rt.attr("data-mce-p-"+xt,We))}const Fs=ft({inner:!0},Ve.schema),ka=new Oe("div",1);st(Pe.children(),xt=>ka.append(xt));const fn=Fs.serialize(ka);fn&&(Rt.attr("data-mce-html",escape(fn)),Rt.empty())},vi=Ve=>{const Pe=Ve.attr("class");return ko(Pe)&&/\btiny-pageembed\b/.test(Pe)},nu=Ve=>{let Pe=Ve;for(;Pe=Pe.parent;)if(Pe.attr("data-ephox-embed-iri")||vi(Pe))return!0;return!1},yt=Ve=>Pe=>{let Rt=Pe.length,Ht;for(;Rt--;)Ht=Pe[Rt],Ht.parent&&(Ht.parent.attr("data-mce-object")||(hi(Ht)&&rn(Ve)?nu(Ht)||Ht.replace(Lo(Ve,Ht)):nu(Ht)||Ht.replace(kr(Ve,Ht))))},Xr=(Ve,Pe,Rt)=>{const Ht=Ve.options.get,Qo=Ht("xss_sanitization"),vs=oo(Ve);return tt(Ve.schema,{sanitize:Qo,validate:vs}).parse(Rt,{context:Pe})},Oa=Ve=>{Ve.on("PreInit",()=>{const{schema:Pe,serializer:Rt,parser:Ht}=Ve,Qo=Pe.getBoolAttrs();st("webkitallowfullscreen mozallowfullscreen".split(" "),vs=>{Qo[vs]={}}),Vt({embed:["wmode"]},(vs,Fs)=>{const ka=Pe.getElementRule(Fs);ka&&st(vs,fn=>{ka.attributes[fn]={},ka.attributesOrder.push(fn)})}),Ht.addNodeFilter("iframe,video,audio,object,embed",yt(Ve)),Rt.addAttributeFilter("data-mce-object",(vs,Fs)=>{var ka;let fn=vs.length;for(;fn--;){const xt=vs[fn];if(!xt.parent)continue;const We=xt.attr(Fs),Ge=new Oe(We,1);if(We!=="audio"){const xo=xt.attr("class");xo&&xo.indexOf("mce-preview-object")!==-1&&xt.firstChild?Ge.attr({width:xt.firstChild.attr("width"),height:xt.firstChild.attr("height")}):Ge.attr({width:xt.attr("width"),height:xt.attr("height")})}Ge.attr({style:xt.attr("style")});const pn=(ka=xt.attributes)!==null&&ka!==void 0?ka:[];let Tn=pn.length;for(;Tn--;){const xo=pn[Tn].name;xo.indexOf("data-mce-p-")===0&&Ge.attr(xo.substr(11),pn[Tn].value)}const Xn=xt.attr("data-mce-html");if(Xn){const xo=Xr(Ve,We,unescape(Xn));st(xo.children(),Eo=>Ge.append(Eo))}xt.replace(Ge)}})}),Ve.on("SetContent",()=>{const Pe=Ve.dom;st(Pe.select("span.mce-preview-object"),Rt=>{Pe.select("span.mce-shim",Rt).length===0&&Pe.add(Rt,"span",{class:"mce-shim"})})})},Ia=Ve=>{Ve.on("ResolveName",Pe=>{let Rt;Pe.target.nodeType===1&&(Rt=Pe.target.getAttribute("data-mce-object"))&&(Pe.name=Rt)})},Mc=Ve=>Pe=>{const Rt=()=>{Pe.setEnabled(Ve.selection.isEditable())};return Ve.on("NodeChange",Rt),Rt(),()=>{Ve.off("NodeChange",Rt)}},ac=Ve=>{const Pe=()=>Ve.execCommand("mceMedia");Ve.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Pe,onSetup:Rt=>{const Ht=Ve.selection;Rt.setActive(At(Ht.getNode()));const Qo=Ht.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Rt.setActive).unbind,vs=Mc(Ve)(Rt);return()=>{Qo(),vs()}}}),Ve.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Pe,onSetup:Mc(Ve)})};var Ga=()=>{$n.add("media",Ve=>(ve(Ve),Ls(Ve),ac(Ve),Ia(Ve),Oa(Ve),dt(Ve),vn(Ve)))};Ga()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=Ue=>at=>typeof at===Ue,mo=Xo("boolean"),vo=Xo("number"),ko=Ue=>at=>at.options.get(Ue),wn=Ue=>{const at=Ue.options.register;at("nonbreaking_force_tab",{processor:ue=>mo(ue)?{value:ue?3:0,valid:!0}:vo(ue)?{value:ue,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),at("nonbreaking_wrap",{processor:"boolean",default:!0})},no=ko("nonbreaking_force_tab"),Tt=ko("nonbreaking_wrap"),Fn=(Ue,at)=>{let ue="";for(let ve=0;ve<at;ve++)ue+=Ue;return ue},To=Ue=>Ue.plugins.visualchars?Ue.plugins.visualchars.isEnabled():!1,ss=(Ue,at)=>{const ue=()=>To(Ue)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",ve=()=>`<span class="${ue()}" contenteditable="false">${Fn("&nbsp;",at)}</span>`,qt=Tt(Ue)||Ue.plugins.visualchars?ve():Fn("&nbsp;",at);Ue.undoManager.transact(()=>Ue.insertContent(qt))},st=Ue=>{Ue.addCommand("mceNonBreaking",()=>{ss(Ue,1)})};var es=tinymce.util.Tools.resolve("tinymce.util.VK");const Vn=Ue=>{const at=no(Ue);at>0&&Ue.on("keydown",ue=>{if(ue.keyCode===es.TAB&&!ue.isDefaultPrevented()){if(ue.shiftKey)return;ue.preventDefault(),ue.stopImmediatePropagation(),ss(Ue,at)}})},kn=Ue=>at=>{const ue=()=>{at.setEnabled(Ue.selection.isEditable())};return Ue.on("NodeChange",ue),ue(),()=>{Ue.off("NodeChange",ue)}},zn=Ue=>{const at=()=>Ue.execCommand("mceNonBreaking");Ue.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:at,onSetup:kn(Ue)}),Ue.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:at,onSetup:kn(Ue)})};var Vt=()=>{$n.add("nonbreaking",Ue=>{wn(Ue),st(Ue),zn(Ue),Vn(Ue)})};Vt()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xo=tinymce.util.Tools.resolve("tinymce.Env");const mo=kn=>zn=>zn.options.get(kn),vo=kn=>{const zn=kn.options.register;zn("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),zn("pagebreak_split_block",{processor:"boolean",default:!1})},ko=mo("pagebreak_separator"),wn=mo("pagebreak_split_block"),no="mce-pagebreak",Tt=kn=>{const zn=`<img src="${Xo.transparentSrc}" class="${no}" data-mce-resize="false" data-mce-placeholder />`;return kn?`<p>${zn}</p>`:zn},Fn=kn=>{const zn=ko(kn),Vt=()=>wn(kn),Ue=new RegExp(zn.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,at=>"\\"+at),"gi");kn.on("BeforeSetContent",at=>{at.content=at.content.replace(Ue,Tt(Vt()))}),kn.on("PreInit",()=>{kn.serializer.addNodeFilter("img",at=>{let ue=at.length,ve,In;for(;ue--;)if(ve=at[ue],In=ve.attr("class"),In&&In.indexOf(no)!==-1){const qt=ve.parent;if(qt&&kn.schema.getBlockElements()[qt.name]&&Vt()){qt.type=3,qt.value=zn,qt.raw=!0,ve.remove();continue}ve.type=3,ve.value=zn,ve.raw=!0}})})},To=kn=>{kn.addCommand("mcePageBreak",()=>{kn.insertContent(Tt(wn(kn)))})},ss=kn=>{kn.on("ResolveName",zn=>{zn.target.nodeName==="IMG"&&kn.dom.hasClass(zn.target,no)&&(zn.name="pagebreak")})},st=kn=>zn=>{const Vt=()=>{zn.setEnabled(kn.selection.isEditable())};return kn.on("NodeChange",Vt),Vt(),()=>{kn.off("NodeChange",Vt)}},es=kn=>{const zn=()=>kn.execCommand("mcePageBreak");kn.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:zn,onSetup:st(kn)}),kn.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:zn,onSetup:st(kn)})};var Vn=()=>{$n.add("pagebreak",kn=>{vo(kn),To(kn),es(kn),Fn(kn),ss(kn)})};Vn()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xo=tinymce.util.Tools.resolve("tinymce.Env"),mo=tinymce.util.Tools.resolve("tinymce.util.Tools");const vo=Vn=>kn=>kn.options.get(Vn),ko=vo("content_style"),wn=vo("content_css_cors"),no=vo("body_class"),Tt=vo("body_id"),Fn=Vn=>{var kn;let zn="";const Vt=Vn.dom.encode,Ue=(kn=ko(Vn))!==null&&kn!==void 0?kn:"";zn+='<base href="'+Vt(Vn.documentBaseURI.getURI())+'">';const at=wn(Vn)?' crossorigin="anonymous"':"";mo.each(Vn.contentCSS,qn=>{zn+='<link type="text/css" rel="stylesheet" href="'+Vt(Vn.documentBaseURI.toAbsolute(qn))+'"'+at+">"}),Ue&&(zn+='<style type="text/css">'+Ue+"</style>");const ue=Tt(Vn),ve=no(Vn),qt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Xo.os.isMacOS()||Xo.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",re=Vn.getBody().dir,rn=re?' dir="'+Vt(re)+'"':"";return"<!DOCTYPE html><html><head>"+zn+'</head><body id="'+Vt(ue)+'" class="mce-content-body '+Vt(ve)+'"'+rn+">"+Vn.getContent()+qt+"</body></html>"},To=Vn=>{const kn=Fn(Vn);Vn.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:kn}}).focus("close")},ss=Vn=>{Vn.addCommand("mcePreview",()=>{To(Vn)})},st=Vn=>{const kn=()=>Vn.execCommand("mcePreview");Vn.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:kn,context:"any"}),Vn.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:kn,context:"any"})};var es=()=>{$n.add("preview",Vn=>{ss(Vn),st(Vn)})};es()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const Xo=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let mo=0;const vo=Nt=>{const De=new Date().getTime(),Ne=Math.floor(Xo()*1e9);return mo++,Nt+"_"+Ne+mo+String(De)},ko=(Nt,ce,De)=>{Nt.execCommand("mceInsertTable",!1,{rows:De,columns:ce})},wn=(Nt,ce,De)=>{const Ne=Nt.editorUpload.blobCache,oe=Ne.create(vo("mceu"),De,ce);Ne.add(oe),Nt.insertContent(Nt.dom.createHTML("img",{src:oe.blobUri()}))},no=Nt=>new Promise(ce=>{const De=new FileReader;De.onloadend=()=>{ce(De.result.split(",")[1])},De.readAsDataURL(Nt)});var Tt=tinymce.util.Tools.resolve("tinymce.util.Delay");const Fn=Nt=>new Promise(ce=>{let De=!1;const Ne=document.createElement("input");Ne.type="file",Ne.accept="image/*",Ne.style.position="fixed",Ne.style.left="0",Ne.style.top="0",Ne.style.opacity="0.001",document.body.appendChild(Ne);const oe=dt=>{var An;De||((An=Ne.parentNode)===null||An===void 0||An.removeChild(Ne),De=!0,ce(dt))},ct=dt=>{oe(Array.prototype.slice.call(dt.target.files))};Ne.addEventListener("input",ct),Ne.addEventListener("change",ct);const At=dt=>{const An=()=>{oe([])};De||(dt.type==="focusin"?Tt.setEditorTimeout(Nt,An,1e3):An()),Nt.off("focusin remove",At)};Nt.on("focusin remove",At),Ne.click()}),To=Nt=>{Nt.on("PreInit",()=>{Nt.queryCommandSupported("QuickbarInsertImage")||Nt.addCommand("QuickbarInsertImage",()=>{Fn(Nt).then(ce=>{if(ce.length>0){const De=ce[0];no(De).then(Ne=>{wn(Nt,Ne,De)})}})})})},ss=(Nt,ce,De)=>{var Ne;return De(Nt,ce.prototype)?!0:((Ne=Nt.constructor)===null||Ne===void 0?void 0:Ne.name)===ce.name},st=Nt=>{const ce=typeof Nt;return Nt===null?"null":ce==="object"&&Array.isArray(Nt)?"array":ce==="object"&&ss(Nt,String,(De,Ne)=>Ne.isPrototypeOf(De))?"string":ce},es=Nt=>ce=>st(ce)===Nt,Vn=Nt=>ce=>typeof ce===Nt,kn=es("string"),zn=Vn("boolean"),Vt=Nt=>Nt==null,Ue=Nt=>!Vt(Nt),at=Vn("function"),ue=Nt=>ce=>ce.options.get(Nt),ve=Nt=>{const ce=Nt.options.register,De=At=>dt=>{const An=zn(dt)||kn(dt);return An?zn(dt)?{value:dt?At:"",valid:An}:{value:dt.trim(),valid:An}:{valid:!1,message:"Must be a boolean or string."}},Ne="bold italic | quicklink h2 h3 blockquote";ce("quickbars_selection_toolbar",{processor:De(Ne),default:Ne});const oe="quickimage quicktable";ce("quickbars_insert_toolbar",{processor:De(oe),default:oe});const ct="alignleft aligncenter alignright";ce("quickbars_image_toolbar",{processor:De(ct),default:ct})},In=ue("quickbars_selection_toolbar"),qt=ue("quickbars_insert_toolbar"),re=ue("quickbars_image_toolbar"),rn=Nt=>{Nt.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>Nt.execCommand("QuickbarInsertImage")}),Nt.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{ko(Nt,2,2)}})},qn=(Nt=>()=>Nt)(!1);class Qe{constructor(ce,De){this.tag=ce,this.value=De}static some(ce){return new Qe(!0,ce)}static none(){return Qe.singletonNone}fold(ce,De){return this.tag?De(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Qe.some(ce(this.value)):Qe.none()}bind(ce){return this.tag?ce(this.value):Qe.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Qe.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return Ue(ce)?Qe.some(ce):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1),typeof window<"u"||Function("return this;")();const Be=1,z=Nt=>Nt.dom.nodeName.toLowerCase(),$t=(Nt,ce)=>{const De=Nt.dom;return De&&De.hasAttribute?De.hasAttribute(ce):!1};var Kt=(Nt,ce,De,Ne,oe)=>Nt(De,Ne)?Qe.some(De):at(oe)&&oe(De)?Qe.none():ce(De,Ne,oe);const B=(Nt,ce)=>{const Ne=(ce||document).createElement("div");if(Ne.innerHTML=Nt,!Ne.hasChildNodes()||Ne.childNodes.length>1){const oe="HTML does not have a single root node";throw console.error(oe,Nt),new Error(oe)}return Qt(Ne.childNodes[0])},Jt=(Nt,ce)=>{const Ne=(ce||document).createElement(Nt);return Qt(Ne)},Le=(Nt,ce)=>{const Ne=(ce||document).createTextNode(Nt);return Qt(Ne)},Qt=Nt=>{if(Nt==null)throw new Error("Node cannot be null or undefined");return{dom:Nt}},Se={fromHtml:B,fromTag:Jt,fromText:Le,fromDom:Qt,fromPoint:(Nt,ce,De)=>Qe.from(Nt.dom.elementFromPoint(ce,De)).map(Qt)},Oe=(Nt,ce)=>{const De=Nt.dom;if(De.nodeType!==Be)return!1;{const Ne=De;if(Ne.matches!==void 0)return Ne.matches(ce);if(Ne.msMatchesSelector!==void 0)return Ne.msMatchesSelector(ce);if(Ne.webkitMatchesSelector!==void 0)return Ne.webkitMatchesSelector(ce);if(Ne.mozMatchesSelector!==void 0)return Ne.mozMatchesSelector(ce);throw new Error("Browser lacks native selectors")}},ft=(Nt,ce,De)=>{let Ne=Nt.dom;const oe=at(De)?De:qn;for(;Ne.parentNode;){Ne=Ne.parentNode;const ct=Se.fromDom(Ne);if(ce(ct))return Qe.some(ct);if(oe(ct))break}return Qe.none()},tt=(Nt,ce,De)=>Kt((oe,ct)=>ct(oe),ft,Nt,ce,De),Bt=(Nt,ce,De)=>tt(Nt,ce,De).isSome(),$e=(Nt,ce,De)=>ft(Nt,Ne=>Oe(Ne,ce),De),pt=(Nt,ce,De)=>Kt((oe,ct)=>Oe(oe,ct),$e,Nt,ce,De),Y=Nt=>{const ce=qt(Nt);ce.length>0&&Nt.ui.registry.addContextToolbar("quickblock",{predicate:De=>{const Ne=Se.fromDom(De),oe=Nt.schema.getTextBlockElements(),ct=At=>At.dom===Nt.getBody();return!$t(Ne,"data-mce-bogus")&&pt(Ne,'table,[data-mce-bogus="all"]',ct).fold(()=>Bt(Ne,At=>z(At)in oe&&Nt.dom.isEmpty(At.dom),ct),qn)},items:ce,position:"line",scope:"editor"})},Jo=Nt=>Nt.dom.classList!==void 0,Et=(Nt,ce)=>Jo(Nt)&&Nt.dom.classList.contains(ce),Mt=Nt=>{const ce=At=>Nt.dom.isEditable(At),De=At=>ce(At.parentElement),Ne=At=>{const dt=At.nodeName==="FIGURE"&&/image/i.test(At.className),An=At.nodeName==="IMG"||dt,it=Et(Se.fromDom(At),"mce-pagebreak");return An&&De(At)&&!it},oe=re(Nt);oe.length>0&&Nt.ui.registry.addContextToolbar("imageselection",{predicate:Ne,items:oe,position:"node"});const ct=In(Nt);ct.length>0&&Nt.ui.registry.addContextToolbar("textselection",{predicate:At=>!Ne(At)&&!Nt.selection.isCollapsed()&&ce(At),items:ct,position:"selection",scope:"editor"})};var Pn=()=>{$n.add("quickbars",Nt=>{ve(Nt),To(Nt),rn(Nt),Y(Nt),Mt(Nt)})};Pn()})();(function(){var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(Ue=>at=>typeof at===Ue)("function");var vo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ko=tinymce.util.Tools.resolve("tinymce.util.Tools");const wn=Ue=>at=>at.options.get(Ue),no=Ue=>{const at=Ue.options.register;at("save_enablewhendirty",{processor:"boolean",default:!0}),at("save_onsavecallback",{processor:"function"}),at("save_oncancelcallback",{processor:"function"})},Tt=wn("save_enablewhendirty"),Fn=wn("save_onsavecallback"),To=wn("save_oncancelcallback"),ss=(Ue,at)=>{Ue.notificationManager.open({text:at,type:"error"})},st=Ue=>{const at=vo.DOM.getParent(Ue.id,"form");if(Tt(Ue)&&!Ue.isDirty())return;Ue.save();const ue=Fn(Ue);if(mo(ue)){ue.call(Ue,Ue),Ue.nodeChanged();return}at?(Ue.setDirty(!1),(!at.onsubmit||at.onsubmit())&&(typeof at.submit=="function"?at.submit():ss(Ue,"Error: Form submit field collision.")),Ue.nodeChanged()):ss(Ue,"Error: No form element found.")},es=Ue=>{const at=ko.trim(Ue.startContent),ue=To(Ue);if(mo(ue)){ue.call(Ue,Ue);return}Ue.resetContent(at)},Vn=Ue=>{Ue.addCommand("mceSave",()=>{st(Ue)}),Ue.addCommand("mceCancel",()=>{es(Ue)})},kn=Ue=>at=>{const ue=()=>{at.setEnabled(!Tt(Ue)||Ue.isDirty())};return ue(),Ue.on("NodeChange dirty",ue),()=>Ue.off("NodeChange dirty",ue)},zn=Ue=>{Ue.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>Ue.execCommand("mceSave"),onSetup:kn(Ue),shortcut:"Meta+S"}),Ue.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>Ue.execCommand("mceCancel"),onSetup:kn(Ue)}),Ue.addShortcut("Meta+S","","mceSave")};var Vt=()=>{$n.add("save",Ue=>{no(Ue),zn(Ue),Vn(Ue)})};Vt()})();(function(){const $n=We=>{let Ge=We;return{get:()=>Ge,set:Xn=>{Ge=Xn}}};var Xo=tinymce.util.Tools.resolve("tinymce.PluginManager");const mo=(We,Ge,pn)=>{var Tn;return pn(We,Ge.prototype)?!0:((Tn=We.constructor)===null||Tn===void 0?void 0:Tn.name)===Ge.name},vo=We=>{const Ge=typeof We;return We===null?"null":Ge==="object"&&Array.isArray(We)?"array":Ge==="object"&&mo(We,String,(pn,Tn)=>Tn.isPrototypeOf(pn))?"string":Ge},ko=We=>Ge=>vo(Ge)===We,wn=We=>Ge=>typeof Ge===We,no=ko("string"),Tt=ko("array"),Fn=wn("boolean"),To=We=>We==null,ss=We=>!To(We),st=wn("number"),es=()=>{},Vn=We=>()=>We,kn=Vn(!0),Vt=Vn("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class Ue{constructor(Ge,pn){this.tag=Ge,this.value=pn}static some(Ge){return new Ue(!0,Ge)}static none(){return Ue.singletonNone}fold(Ge,pn){return this.tag?pn(this.value):Ge()}isSome(){return this.tag}isNone(){return!this.tag}map(Ge){return this.tag?Ue.some(Ge(this.value)):Ue.none()}bind(Ge){return this.tag?Ge(this.value):Ue.none()}exists(Ge){return this.tag&&Ge(this.value)}forall(Ge){return!this.tag||Ge(this.value)}filter(Ge){return!this.tag||Ge(this.value)?this:Ue.none()}getOr(Ge){return this.tag?this.value:Ge}or(Ge){return this.tag?this:Ge}getOrThunk(Ge){return this.tag?this.value:Ge()}orThunk(Ge){return this.tag?this:Ge()}getOrDie(Ge){if(this.tag)return this.value;throw new Error(Ge??"Called getOrDie on None")}static from(Ge){return ss(Ge)?Ue.some(Ge):Ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ge){this.tag&&Ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ue.singletonNone=new Ue(!1);const at=Vt;var ue=tinymce.util.Tools.resolve("tinymce.Env"),ve=tinymce.util.Tools.resolve("tinymce.util.Tools");const In=Array.prototype.slice,qt=Array.prototype.push,re=(We,Ge)=>{const pn=We.length,Tn=new Array(pn);for(let Xn=0;Xn<pn;Xn++){const xo=We[Xn];Tn[Xn]=Ge(xo,Xn)}return Tn},rn=(We,Ge)=>{for(let pn=0,Tn=We.length;pn<Tn;pn++){const Xn=We[pn];Ge(Xn,pn)}},oo=(We,Ge)=>{for(let pn=We.length-1;pn>=0;pn--){const Tn=We[pn];Ge(Tn,pn)}},qn=(We,Ge)=>{if(We.length===0)return[];{let pn=Ge(We[0]);const Tn=[];let Xn=[];for(let xo=0,Eo=We.length;xo<Eo;xo++){const Bo=We[xo],Vo=Ge(Bo);Vo!==pn&&(Tn.push(Xn),Xn=[]),pn=Vo,Xn.push(Bo)}return Xn.length!==0&&Tn.push(Xn),Tn}},Qe=(We,Ge,pn)=>(rn(We,(Tn,Xn)=>{pn=Ge(pn,Tn,Xn)}),pn),Be=We=>{const Ge=[];for(let pn=0,Tn=We.length;pn<Tn;++pn){if(!Tt(We[pn]))throw new Error("Arr.flatten item "+pn+" was not an array, input: "+We);qt.apply(Ge,We[pn])}return Ge},z=(We,Ge)=>Be(re(We,Ge)),$t=(We,Ge)=>{const pn=In.call(We,0);return pn.sort(Ge),pn},Kt=Object.hasOwnProperty,B=(We,Ge)=>Kt.call(We,Ge);typeof window<"u"||Function("return this;")();const Jt=9,Le=11,Qt=1,mn=3,Se=We=>We.dom.nodeType,ft=(We=>Ge=>Se(Ge)===We)(mn),tt=(We,Ge,pn)=>{if(no(pn)||Fn(pn)||st(pn))We.setAttribute(Ge,pn+"");else throw console.error("Invalid call to Attribute.set. Key ",Ge,":: Value ",pn,":: Element ",We),new Error("Attribute value was not simple")},Bt=(We,Ge,pn)=>{tt(We.dom,Ge,pn)},$e=(We,Ge)=>{const Tn=(Ge||document).createElement("div");if(Tn.innerHTML=We,!Tn.hasChildNodes()||Tn.childNodes.length>1){const Xn="HTML does not have a single root node";throw console.error(Xn,We),new Error(Xn)}return Jo(Tn.childNodes[0])},pt=(We,Ge)=>{const Tn=(Ge||document).createElement(We);return Jo(Tn)},Y=(We,Ge)=>{const Tn=(Ge||document).createTextNode(We);return Jo(Tn)},Jo=We=>{if(We==null)throw new Error("Node cannot be null or undefined");return{dom:We}},Mt={fromHtml:$e,fromTag:pt,fromText:Y,fromDom:Jo,fromPoint:(We,Ge,pn)=>Ue.from(We.dom.elementFromPoint(Ge,pn)).map(Jo)},Pn=We=>We.nodeType!==Qt&&We.nodeType!==Jt&&We.nodeType!==Le||We.childElementCount===0,Nt=(We,Ge)=>{const pn=Ge===void 0?document:Ge.dom;return Pn(pn)?[]:re(pn.querySelectorAll(We),Mt.fromDom)},ce=We=>Ue.from(We.dom.parentNode).map(Mt.fromDom),De=We=>re(We.dom.childNodes,Mt.fromDom),Ne=(We,Ge)=>({element:We,offset:Ge}),oe=(We,Ge)=>{const pn=De(We);return pn.length>0&&Ge<pn.length?Ne(pn[Ge],0):Ne(We,Ge)},ct=(We,Ge)=>{ce(We).each(Tn=>{Tn.dom.insertBefore(Ge.dom,We.dom)})},At=(We,Ge)=>{We.dom.appendChild(Ge.dom)},dt=(We,Ge)=>{ct(We,Ge),At(Ge,We)},it=((We,Ge)=>{const pn=xo=>{if(!We(xo))throw new Error("Can only get "+Ge+" value of a "+Ge+" node");return Tn(xo).getOr("")},Tn=xo=>We(xo)?Ue.from(xo.dom.nodeValue):Ue.none();return{get:pn,getOption:Tn,set:(xo,Eo)=>{if(!We(xo))throw new Error("Can only set raw "+Ge+" value of a "+Ge+" node");xo.dom.nodeValue=Eo}}})(ft,"text"),Dt=We=>it.get(We),hn=(We,Ge,pn)=>(We.compareDocumentPosition(Ge)&pn)!==0,Hn=(We,Ge)=>hn(We,Ge,Node.DOCUMENT_POSITION_PRECEDING),ut=(We,Ge)=>Nt(Ge,We);var ot=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const rt=(We,Ge)=>We.isBlock(Ge)||B(We.schema.getVoidElements(),Ge.nodeName),nn=(We,Ge)=>!We.isEditable(Ge),Zo=(We,Ge)=>We.getContentEditable(Ge)==="true"&&Ge.parentNode&&!We.isEditable(Ge.parentNode),Co=(We,Ge)=>!We.isBlock(Ge)&&B(We.schema.getWhitespaceElements(),Ge.nodeName),Mn=(We,Ge)=>rt(We,Ge)||nn(We,Ge)||Co(We,Ge)||Zo(We,Ge),No=We=>We.nodeType===3,Gt=()=>({sOffset:0,fOffset:0,elements:[]}),yo=(We,Ge)=>oe(Mt.fromDom(We),Ge),gr=(We,Ge,pn,Tn,Xn,xo=!0)=>{let Eo=xo?Ge(!1):pn;for(;Eo;){const Bo=nn(We,Eo);if(Bo||Co(We,Eo)){if(Bo?Tn.cef(Eo):Tn.boundary(Eo))break;Eo=Ge(!0);continue}else if(rt(We,Eo)){if(Tn.boundary(Eo))break}else No(Eo)&&Tn.text(Eo);if(Eo===Xn)break;Eo=Ge(!1)}},Us=(We,Ge,pn,Tn,Xn)=>{var xo;if(Mn(We,pn))return;const Eo=(xo=We.getParent(Tn,We.isBlock))!==null&&xo!==void 0?xo:We.getRoot(),Bo=new ot(pn,Eo),Vo=Xn?Bo.next.bind(Bo):Bo.prev.bind(Bo);gr(We,Vo,pn,{boundary:kn,cef:kn,text:cs=>{Xn?Ge.fOffset+=cs.length:Ge.sOffset+=cs.length,Ge.elements.push(Mt.fromDom(cs))}})},ma=(We,Ge,pn,Tn,Xn,xo=!0)=>{const Eo=new ot(pn,Ge),Bo=[];let Vo=Gt();Us(We,Vo,pn,Ge,!1);const cs=()=>(Vo.elements.length>0&&(Bo.push(Vo),Vo=Gt()),!1);return gr(We,Eo.next.bind(Eo),pn,{boundary:cs,cef:hr=>(cs(),Xn&&Bo.push(...Xn.cef(hr)),!1),text:hr=>{Vo.elements.push(Mt.fromDom(hr)),Xn&&Xn.text(hr,Vo)}},Tn,xo),Tn&&Us(We,Vo,Tn,Ge,!0),cs(),Bo},ns=(We,Ge)=>{const pn=yo(Ge.startContainer,Ge.startOffset),Tn=pn.element.dom,Xn=yo(Ge.endContainer,Ge.endOffset),xo=Xn.element.dom;return ma(We,Ge.commonAncestorContainer,Tn,xo,{text:(Eo,Bo)=>{Eo===xo?Bo.fOffset+=Eo.length-Xn.offset:Eo===Tn&&(Bo.sOffset+=pn.offset)},cef:Eo=>{const Bo=z(ut(Mt.fromDom(Eo),"*[contenteditable=true]"),Vo=>{const cs=Vo.dom;return ma(We,cs,cs)});return $t(Bo,(Vo,cs)=>Hn(Vo.elements[0].dom,cs.elements[0].dom)?1:-1)}},!1)},Pa=(We,Ge)=>Ge.collapsed?[]:ns(We,Ge),vn=(We,Ge)=>{const pn=We.createRng();return pn.selectNode(Ge),Pa(We,pn)},Ls=(We,Ge)=>z(Ge,pn=>vn(We,pn)),Ba=(We,Ge,pn=0,Tn=We.length)=>{const Xn=Ge.regex;Xn.lastIndex=pn;const xo=[];let Eo;for(;Eo=Xn.exec(We);){const Bo=Eo[Ge.matchIndex],Vo=Eo.index+Eo[0].indexOf(Bo),cs=Vo+Bo.length;if(cs>Tn)break;xo.push({start:Vo,finish:cs}),Xn.lastIndex=cs}return xo},Dr=(We,Ge)=>{const pn=Qe(We,(Tn,Xn)=>{const xo=Dt(Xn),Eo=Tn.last,Bo=Eo+xo.length,Vo=z(Ge,(cs,hr)=>cs.start<Bo&&cs.finish>Eo?[{element:Xn,start:Math.max(Eo,cs.start)-Eo,finish:Math.min(Bo,cs.finish)-Eo,matchId:hr}]:[]);return{results:Tn.results.concat(Vo),last:Bo}},{results:[],last:0}).results;return qn(pn,Tn=>Tn.matchId)},Gi=(We,Ge)=>z(Ge,pn=>{const Tn=pn.elements,Xn=re(Tn,Dt).join(""),xo=Ba(Xn,We,pn.sOffset,Xn.length-pn.fOffset);return Dr(Tn,xo)}),hi=(We,Ge)=>{oo(We,(pn,Tn)=>{oo(pn,Xn=>{const xo=Mt.fromDom(Ge.cloneNode(!1));Bt(xo,"data-mce-index",Tn);const Eo=Xn.element.dom;if(Eo.length===Xn.finish&&Xn.start===0)dt(Xn.element,xo);else{Eo.length!==Xn.finish&&Eo.splitText(Xn.finish);const Bo=Eo.splitText(Xn.start);dt(Mt.fromDom(Bo),xo)}})})},Er=(We,Ge,pn,Tn)=>{const Xn=vn(We,pn),xo=Gi(Ge,Xn);return hi(xo,Tn),xo.length},bi=(We,Ge,pn,Tn)=>{const Xn=pn.getBookmark(),xo=We.select("td[data-mce-selected],th[data-mce-selected]"),Eo=xo.length>0?Ls(We,xo):Pa(We,pn.getRng()),Bo=Gi(Ge,Eo);return hi(Bo,Tn),pn.moveToBookmark(Xn),Bo.length},Bi=We=>We.getAttribute("data-mce-index"),kr=(We,Ge,pn,Tn)=>{const Xn=We.dom.create("span",{"data-mce-bogus":1});Xn.className="mce-match-marker";const xo=We.getBody();return Ga(We,Ge,!1),Tn?bi(We.dom,pn,We.selection,Xn):Er(We.dom,pn,xo,Xn)},Lo=We=>{var Ge;const pn=We.parentNode;We.firstChild&&pn.insertBefore(We.firstChild,We),(Ge=We.parentNode)===null||Ge===void 0||Ge.removeChild(We)},Aa=(We,Ge)=>{const pn=[],Tn=ve.toArray(We.getBody().getElementsByTagName("span"));if(Tn.length)for(let Xn=0;Xn<Tn.length;Xn++){const xo=Bi(Tn[Xn]);xo===null||!xo.length||xo===Ge.toString()&&pn.push(Tn[Xn])}return pn},vi=(We,Ge,pn)=>{const Tn=Ge.get();let Xn=Tn.index;const xo=We.dom;pn?Xn+1===Tn.count?Xn=0:Xn++:Xn-1===-1?Xn=Tn.count-1:Xn--,xo.removeClass(Aa(We,Tn.index),"mce-match-marker-selected");const Eo=Aa(We,Xn);return Eo.length?(xo.addClass(Aa(We,Xn),"mce-match-marker-selected"),We.selection.scrollIntoView(Eo[0]),Xn):-1},nu=(We,Ge)=>{const pn=Ge.parentNode;We.remove(Ge),pn&&We.isEmpty(pn)&&We.remove(pn)},yt=(We,Ge)=>{const Tn="("+We.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return Ge?`(?:^|\\s|${at()})`+Tn+`(?=$|\\s|${at()})`:Tn},Xr=(We,Ge,pn,Tn,Xn,xo)=>{const Eo=We.selection,Bo=yt(pn,Xn),Vo=Eo.isForward(),cs={regex:new RegExp(Bo,Tn?"g":"gi"),matchIndex:1},hr=kr(We,Ge,cs,xo);if(ue.browser.isSafari()&&Eo.setRng(Eo.getRng(),Vo),hr){const Va=vi(We,Ge,!0);Ge.set({index:Va,count:hr,text:pn,matchCase:Tn,wholeWord:Xn,inSelection:xo})}return hr},Oa=(We,Ge)=>{const pn=vi(We,Ge,!0);Ge.set({...Ge.get(),index:pn})},Ia=(We,Ge)=>{const pn=vi(We,Ge,!1);Ge.set({...Ge.get(),index:pn})},Mc=We=>{const Ge=Bi(We);return Ge!==null&&Ge.length>0},ac=(We,Ge,pn,Tn,Xn)=>{const xo=Ge.get(),Eo=xo.index;let Bo,Vo=Eo;Tn=Tn!==!1;const cs=We.getBody(),hr=ve.grep(ve.toArray(cs.getElementsByTagName("span")),Mc);for(let Va=0;Va<hr.length;Va++){const Ur=Bi(hr[Va]);let Al=Bo=parseInt(Ur,10);if(Xn||Al===xo.index){for(pn.length?(hr[Va].innerText=pn,Lo(hr[Va])):nu(We.dom,hr[Va]);hr[++Va];)if(Al=parseInt(Bi(hr[Va]),10),Al===Bo)nu(We.dom,hr[Va]);else{Va--;break}Tn&&Vo--}else Bo>Eo&&hr[Va].setAttribute("data-mce-index",String(Bo-1))}return Ge.set({...xo,count:Xn?0:xo.count-1,index:Vo}),Tn?Oa(We,Ge):Ia(We,Ge),!Xn&&Ge.get().count>0},Ga=(We,Ge,pn)=>{let Tn,Xn;const xo=Ge.get(),Eo=ve.toArray(We.getBody().getElementsByTagName("span"));for(let Bo=0;Bo<Eo.length;Bo++){const Vo=Bi(Eo[Bo]);Vo!==null&&Vo.length&&(Vo===xo.index.toString()&&(Tn||(Tn=Eo[Bo].firstChild),Xn=Eo[Bo].firstChild),Lo(Eo[Bo]))}if(Ge.set({...xo,index:-1,count:0,text:""}),Tn&&Xn){const Bo=We.dom.createRng();return Bo.setStart(Tn,0),Bo.setEnd(Xn,Xn.data.length),pn!==!1&&We.selection.setRng(Bo),Bo}else return},Ve=(We,Ge)=>Ge.get().count>1,Pe=(We,Ge)=>Ge.get().count>1,Rt=(We,Ge)=>({done:Bo=>Ga(We,Ge,Bo),find:(Bo,Vo,cs,hr=!1)=>Xr(We,Ge,Bo,Vo,cs,hr),next:()=>Oa(We,Ge),prev:()=>Ia(We,Ge),replace:(Bo,Vo,cs)=>ac(We,Ge,Bo,Vo,cs)}),Ht=We=>{const Ge=$n(Ue.none()),pn=()=>Ge.get().each(We);return{clear:()=>{pn(),Ge.set(Ue.none())},isSet:()=>Ge.get().isSome(),get:()=>Ge.get(),set:Bo=>{pn(),Ge.set(Ue.some(Bo))}}},Qo=()=>{const We=Ht(es);return{...We,on:pn=>We.get().each(pn)}},vs=(We,Ge)=>{const pn=Qo();We.undoManager.add();const Tn=ve.trim(We.selection.getContent({format:"text"})),Xn=Bs=>{Bs.setEnabled("next",Ve(We,Ge)),Bs.setEnabled("prev",Pe(We,Ge))},xo=Bs=>{const er=Bs.getData(),ar=Ge.get();Ge.set({...ar,matchCase:er.matchcase,wholeWord:er.wholewords,inSelection:er.inselection})},Eo=(Bs,er)=>{rn(["replace","replaceall","prev","next"],Ti=>Bs.setEnabled(Ti,!er))},Bo=(Bs,er)=>{er.redial(La(Bs,er.getData()))},Vo=(Bs,er)=>{ue.browser.isSafari()&&ue.deviceType.isTouch()&&(er==="find"||er==="replace"||er==="replaceall")&&Bs.focus(er)},cs=Bs=>{Ga(We,Ge,!1),Eo(Bs,!0),Xn(Bs)},hr=Bs=>{const er=Bs.getData(),ar=Ge.get();if(!er.findtext.length){cs(Bs);return}if(ar.text===er.findtext&&ar.matchCase===er.matchcase&&ar.wholeWord===er.wholewords)Oa(We,Ge);else{const Ua=Xr(We,Ge,er.findtext,er.matchcase,er.wholewords,er.inselection);Ua<=0&&Bo(!0,Bs),Eo(Bs,Ua===0)}Xn(Bs)},Va=Ge.get(),Ur={findtext:Tn,replacetext:"",wholewords:Va.wholeWord,matchcase:Va.matchCase,inselection:Va.inSelection},Al=Bs=>{const er=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Bs&&er.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),er},La=(Bs,er)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Al(Bs)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:er,onChange:(ar,Ua)=>{Bs&&Bo(!1,ar),Ua.name==="findtext"&&Ge.get().count>0&&cs(ar)},onAction:(ar,Ua)=>{const Ti=ar.getData();switch(Ua.name){case"find":hr(ar);break;case"replace":ac(We,Ge,Ti.replacetext)?Xn(ar):cs(ar);break;case"replaceall":ac(We,Ge,Ti.replacetext,!0,!0),cs(ar);break;case"prev":Ia(We,Ge),Xn(ar);break;case"next":Oa(We,Ge),Xn(ar);break;case"matchcase":case"wholewords":case"inselection":Bo(!1,ar),xo(ar),cs(ar);break}Vo(ar,Ua.name)},onSubmit:ar=>{hr(ar),Vo(ar,"find")},onClose:()=>{We.focus(),Ga(We,Ge),We.undoManager.add()}});pn.set(We.windowManager.open(La(!1,Ur),{inline:"toolbar"}))},Fs=(We,Ge)=>{We.addCommand("SearchReplace",()=>{vs(We,Ge)})},ka=(We,Ge)=>()=>{vs(We,Ge)},fn=(We,Ge)=>{We.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ka(We,Ge),icon:"search"}),We.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ka(We,Ge),icon:"search",shortcut:"Meta+F"}),We.shortcuts.add("Meta+F","",ka(We,Ge))};var xt=()=>{Xo.add("searchreplace",We=>{const Ge=$n({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Fs(We,Ge),fn(We,Ge),Rt(We,Ge)})};xt()})();(function(){const $n=Object.getPrototypeOf,Xo=(o,c,u)=>{var g;return!!u(o,c.prototype)||((g=o.constructor)===null||g===void 0?void 0:g.name)===c.name},mo=o=>c=>(u=>{const g=typeof u;return u===null?"null":g==="object"&&Array.isArray(u)?"array":g==="object"&&Xo(u,String,(b,y)=>y.isPrototypeOf(b))?"string":g})(c)===o,vo=o=>c=>typeof c===o,ko=o=>c=>o===c,wn=mo("string"),no=mo("object"),Tt=o=>((c,u)=>no(c)&&Xo(c,u,(g,b)=>$n(g)===b))(o,Object),Fn=mo("array"),To=ko(null),ss=vo("boolean"),st=ko(void 0),es=o=>o==null,Vn=o=>!es(o),kn=vo("function"),zn=vo("number"),Vt=(o,c)=>{if(Fn(o)){for(let u=0,g=o.length;u<g;++u)if(!c(o[u]))return!1;return!0}return!1},Ue=()=>{},at=o=>()=>o(),ue=(o,c)=>(...u)=>o(c.apply(null,u)),ve=o=>()=>o,In=o=>o,qt=(o,c)=>o===c;function re(o,...c){return(...u)=>{const g=c.concat(u);return o.apply(null,g)}}const rn=o=>c=>!o(c),oo=o=>()=>{throw new Error(o)},qn=o=>o(),Qe=ve(!1),Be=ve(!0);class z{constructor(c,u){this.tag=c,this.value=u}static some(c){return new z(!0,c)}static none(){return z.singletonNone}fold(c,u){return this.tag?u(this.value):c()}isSome(){return this.tag}isNone(){return!this.tag}map(c){return this.tag?z.some(c(this.value)):z.none()}bind(c){return this.tag?c(this.value):z.none()}exists(c){return this.tag&&c(this.value)}forall(c){return!this.tag||c(this.value)}filter(c){return!this.tag||c(this.value)?this:z.none()}getOr(c){return this.tag?this.value:c}or(c){return this.tag?this:c}getOrThunk(c){return this.tag?this.value:c()}orThunk(c){return this.tag?this:c()}getOrDie(c){if(this.tag)return this.value;throw new Error(c??"Called getOrDie on None")}static from(c){return Vn(c)?z.some(c):z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(c){this.tag&&c(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}z.singletonNone=new z(!1);const $t=Array.prototype.slice,Kt=Array.prototype.indexOf,B=Array.prototype.push,Jt=(o,c)=>Kt.call(o,c),Le=(o,c)=>Jt(o,c)>-1,Qt=(o,c)=>{for(let u=0,g=o.length;u<g;u++)if(c(o[u],u))return!0;return!1},mn=(o,c)=>{const u=[];for(let g=0;g<o;g++)u.push(c(g));return u},Se=(o,c)=>{const u=[];for(let g=0;g<o.length;g+=c){const b=$t.call(o,g,g+c);u.push(b)}return u},Oe=(o,c)=>{const u=o.length,g=new Array(u);for(let b=0;b<u;b++){const y=o[b];g[b]=c(y,b)}return g},ft=(o,c)=>{for(let u=0,g=o.length;u<g;u++)c(o[u],u)},tt=(o,c)=>{const u=[],g=[];for(let b=0,y=o.length;b<y;b++){const S=o[b];(c(S,b)?u:g).push(S)}return{pass:u,fail:g}},Bt=(o,c)=>{const u=[];for(let g=0,b=o.length;g<b;g++){const y=o[g];c(y,g)&&u.push(y)}return u},$e=(o,c,u)=>(((g,b)=>{for(let y=g.length-1;y>=0;y--)b(g[y],y)})(o,(g,b)=>{u=c(u,g,b)}),u),pt=(o,c,u)=>(ft(o,(g,b)=>{u=c(u,g,b)}),u),Y=(o,c)=>((u,g,b)=>{for(let y=0,S=u.length;y<S;y++){const T=u[y];if(g(T,y))return z.some(T);if(b(T,y))break}return z.none()})(o,c,Qe),Jo=(o,c)=>{for(let u=0,g=o.length;u<g;u++)if(c(o[u],u))return z.some(u);return z.none()},Et=o=>{const c=[];for(let u=0,g=o.length;u<g;++u){if(!Fn(o[u]))throw new Error("Arr.flatten item "+u+" was not an array, input: "+o);B.apply(c,o[u])}return c},Mt=(o,c)=>Et(Oe(o,c)),Pn=(o,c)=>{for(let u=0,g=o.length;u<g;++u)if(c(o[u],u)!==!0)return!1;return!0},Nt=o=>{const c=$t.call(o,0);return c.reverse(),c},ce=(o,c)=>Bt(o,u=>!Le(c,u)),De=(o,c)=>{const u={};for(let g=0,b=o.length;g<b;g++){const y=o[g];u[String(y)]=c(y,g)}return u},Ne=o=>[o],oe=(o,c)=>{const u=$t.call(o,0);return u.sort(c),u},ct=(o,c)=>c>=0&&c<o.length?z.some(o[c]):z.none(),At=o=>ct(o,0),dt=o=>ct(o,o.length-1),An=kn(Array.from)?Array.from:o=>$t.call(o),it=(o,c)=>{for(let u=0;u<o.length;u++){const g=c(o[u],u);if(g.isSome())return g}return z.none()},Dt=Object.keys,hn=Object.hasOwnProperty,Hn=(o,c)=>{const u=Dt(o);for(let g=0,b=u.length;g<b;g++){const y=u[g];c(o[y],y)}},ut=(o,c)=>ot(o,(u,g)=>({k:g,v:c(u,g)})),ot=(o,c)=>{const u={};return Hn(o,(g,b)=>{const y=c(g,b);u[y.k]=y.v}),u},rt=o=>(c,u)=>{o[u]=c},nn=(o,c,u,g)=>{Hn(o,(b,y)=>{(c(b,y)?u:g)(b,y)})},Zo=(o,c)=>{const u={};return nn(o,c,rt(u),Ue),u},Co=(o,c)=>{const u=[];return Hn(o,(g,b)=>{u.push(c(g,b))}),u},Mn=(o,c)=>{const u=Dt(o);for(let g=0,b=u.length;g<b;g++){const y=u[g],S=o[y];if(c(S,y,o))return z.some(S)}return z.none()},No=o=>Co(o,In),Gt=(o,c)=>yo(o,c)?z.from(o[c]):z.none(),yo=(o,c)=>hn.call(o,c),gr=(o,c)=>yo(o,c)&&o[c]!==void 0&&o[c]!==null,Us=(o,c,u=qt)=>o.exists(g=>u(g,c)),ma=o=>{const c=[],u=g=>{c.push(g)};for(let g=0;g<o.length;g++)o[g].each(u);return c},ns=(o,c,u)=>o.isSome()&&c.isSome()?z.some(u(o.getOrDie(),c.getOrDie())):z.none(),Pa=(o,c)=>o!=null?z.some(c(o)):z.none(),vn=(o,c)=>o?z.some(c):z.none(),Ls=(o,c,u)=>c===""||o.length>=c.length&&o.substr(u,u+c.length)===c,Ba=(o,c)=>Gi(o,c)?((u,g)=>u.substring(g))(o,c.length):o,Dr=(o,c,u=0,g)=>{const b=o.indexOf(c,u);return b!==-1&&(!!st(g)||b+c.length<=g)},Gi=(o,c)=>Ls(o,c,0),hi=(o,c)=>Ls(o,c,o.length-c.length),Er=(Ec=/^\s+|\s+$/g,o=>o.replace(Ec,"")),bi=o=>o.length>0,Bi=o=>!bi(o),kr=o=>o.style!==void 0&&kn(o.style.getPropertyValue),Lo=o=>{if(o==null)throw new Error("Node cannot be null or undefined");return{dom:o}},Aa=(o,c)=>{const u=document.createElement("div");if(u.innerHTML=o,!u.hasChildNodes()||u.childNodes.length>1){const g="HTML does not have a single root node";throw console.error(g,o),new Error(g)}return Lo(u.childNodes[0])},vi=(o,c)=>{const u=document.createElement(o);return Lo(u)},nu=(o,c)=>{const u=document.createTextNode(o);return Lo(u)},yt=Lo,Xr=typeof window<"u"?window:Function("return this;")(),Oa=(o,c)=>((u,g)=>{let b=g??Xr;for(let y=0;y<u.length&&b!=null;++y)b=b[u[y]];return b})(o.split("."),c),Ia=Object.getPrototypeOf,Mc=o=>{const c=Oa("ownerDocument.defaultView",o);return no(o)&&((u=>((g,b)=>{const y=((S,T)=>Oa(S,T))(g,b);if(y==null)throw new Error(g+" not available on this browser");return y})("HTMLElement",u))(c).prototype.isPrototypeOf(o)||/^HTML\w*Element$/.test(Ia(o).constructor.name))},ac=o=>o.dom.nodeName.toLowerCase(),Ga=o=>c=>(u=>u.dom.nodeType)(c)===o,Ve=o=>Pe(o)&&Mc(o.dom),Pe=Ga(1),Rt=Ga(3),Ht=Ga(9),Qo=Ga(11),vs=o=>c=>Pe(c)&&ac(c)===o,Fs=(o,c)=>{const u=o.dom;if(u.nodeType!==1)return!1;{const g=u;if(g.matches!==void 0)return g.matches(c);if(g.msMatchesSelector!==void 0)return g.msMatchesSelector(c);if(g.webkitMatchesSelector!==void 0)return g.webkitMatchesSelector(c);if(g.mozMatchesSelector!==void 0)return g.mozMatchesSelector(c);throw new Error("Browser lacks native selectors")}},ka=o=>o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11||o.childElementCount===0,fn=(o,c)=>{const u=c===void 0?document:c.dom;return ka(u)?z.none():z.from(u.querySelector(o)).map(yt)},xt=(o,c)=>o.dom===c.dom,We=(o,c)=>{const u=o.dom,g=c.dom;return u!==g&&u.contains(g)},Ge=o=>yt(o.dom.ownerDocument),pn=o=>Ht(o)?o:Ge(o),Tn=o=>yt(pn(o).dom.documentElement),Xn=o=>yt(pn(o).dom.defaultView),xo=o=>z.from(o.dom.parentNode).map(yt),Eo=o=>z.from(o.dom.parentElement).map(yt),Bo=o=>z.from(o.dom.offsetParent).map(yt),Vo=o=>Oe(o.dom.childNodes,yt),cs=(o,c)=>{const u=o.dom.childNodes;return z.from(u[c]).map(yt)},hr=o=>cs(o,0),Va=(o,c)=>({element:o,offset:c}),Ur=(o,c)=>{const u=Vo(o);return u.length>0&&c<u.length?Va(u[c],0):Va(o,c)},Al=o=>Qo(o)&&Vn(o.dom.host),La=o=>yt(o.dom.getRootNode()),Bs=o=>Al(o)?o:yt(pn(o).dom.body),er=o=>{const c=La(o);return Al(c)?z.some(c):z.none()},ar=o=>yt(o.dom.host),Ua=o=>{const c=Rt(o)?o.dom.parentNode:o.dom;if(c==null||c.ownerDocument===null)return!1;const u=c.ownerDocument;return er(yt(c)).fold(()=>u.body.contains(c),(g=Ua,b=ar,y=>g(b(y))));var g,b},Ti=()=>Wc(yt(document)),Wc=o=>{const c=o.dom.body;if(c==null)throw new Error("Body is not available yet");return yt(c)},Ta=(o,c,u)=>{if(!(wn(u)||ss(u)||zn(u)))throw console.error("Invalid call to Attribute.set. Key ",c,":: Value ",u,":: Element ",o),new Error("Attribute value was not simple");o.setAttribute(c,u+"")},ws=(o,c,u)=>{Ta(o.dom,c,u)},yu=(o,c)=>{const u=o.dom;Hn(c,(g,b)=>{Ta(u,b,g)})},Ei=(o,c)=>{const u=o.dom.getAttribute(c);return u===null?void 0:u},Es=(o,c)=>z.from(Ei(o,c)),xu=(o,c)=>{const u=o.dom;return!(!u||!u.hasAttribute)&&u.hasAttribute(c)},Xs=(o,c)=>{o.dom.removeAttribute(c)},hd=(o,c,u)=>{if(!wn(u))throw console.error("Invalid call to CSS.set. Property ",c,":: Value ",u,":: Element ",o),new Error("CSS value must be a string: "+u);kr(o)&&o.style.setProperty(c,u)},Vl=(o,c)=>{kr(o)&&o.style.removeProperty(c)},fs=(o,c,u)=>{const g=o.dom;hd(g,c,u)},li=(o,c)=>{const u=o.dom;Hn(c,(g,b)=>{hd(u,b,g)})},Ld=(o,c)=>{const u=o.dom;Hn(c,(g,b)=>{g.fold(()=>{Vl(u,b)},y=>{hd(u,b,y)})})},Wa=(o,c)=>{const u=o.dom,g=window.getComputedStyle(u).getPropertyValue(c);return g!==""||Ua(o)?g:Dm(u,c)},Dm=(o,c)=>kr(o)?o.style.getPropertyValue(c):"",ui=(o,c)=>{const u=o.dom,g=Dm(u,c);return z.from(g).filter(b=>b.length>0)},kg=o=>{const c={},u=o.dom;if(kr(u))for(let g=0;g<u.style.length;g++){const b=u.style.item(g);c[b]=u.style[b]}return c},qi=(o,c,u)=>{const g=vi(o);return fs(g,c,u),ui(g,c).isSome()},or=(o,c)=>{const u=o.dom;Vl(u,c),Us(Es(o,"style").map(Er),"")&&Xs(o,"style")},wu=o=>o.dom.offsetWidth,Rm=(o,c)=>{const u=b=>{const y=c(b);if(y<=0||y===null){const S=Wa(b,o);return parseFloat(S)||0}return y},g=(b,y)=>pt(y,(S,T)=>{const E=Wa(b,T),M=E===void 0?0:parseInt(E,10);return isNaN(M)?S:S+M},0);return{set:(b,y)=>{if(!zn(y)&&!y.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+y);const S=b.dom;kr(S)&&(S.style[o]=y+"px")},get:u,getOuter:u,aggregate:g,max:(b,y,S)=>{const T=g(b,S);return y>T?y-T:0}}},Ku=Rm("height",o=>{const c=o.dom;return Ua(o)?c.getBoundingClientRect().height:c.offsetHeight}),oi=o=>Ku.get(o),qa=o=>Ku.getOuter(o),Ki=(o,c)=>({left:o,top:c,translate:(u,g)=>Ki(o+u,c+g)}),Wr=Ki,bd=(o,c)=>o!==void 0?o:c!==void 0?c:0,ol=o=>{const c=o.dom.ownerDocument,u=c.body,g=c.defaultView,b=c.documentElement;if(u===o.dom)return Wr(u.offsetLeft,u.offsetTop);const y=bd(g==null?void 0:g.pageYOffset,b.scrollTop),S=bd(g==null?void 0:g.pageXOffset,b.scrollLeft),T=bd(b.clientTop,u.clientTop),E=bd(b.clientLeft,u.clientLeft);return le(o).translate(S-E,y-T)},le=o=>{const c=o.dom,u=c.ownerDocument.body;return u===c?Wr(u.offsetLeft,u.offsetTop):Ua(o)?(g=>{const b=g.getBoundingClientRect();return Wr(b.left,b.top)})(c):Wr(0,0)},He=Rm("width",o=>o.dom.offsetWidth),Je=o=>He.get(o),Pt=o=>He.getOuter(o),Nn=o=>{let c,u=!1;return(...g)=>(u||(u=!0,c=o.apply(null,g)),c)},ho=()=>Kn(0,0),Kn=(o,c)=>({major:o,minor:c}),ms={nu:Kn,detect:(o,c)=>{const u=String(c).toLowerCase();return o.length===0?ho():((g,b)=>{const y=((T,E)=>{for(let M=0;M<T.length;M++){const P=T[M];if(P.test(E))return P}})(g,b);if(!y)return{major:0,minor:0};const S=T=>Number(b.replace(y,"$"+T));return Kn(S(1),S(2))})(o,u)},unknown:ho},Ds=(o,c)=>{const u=String(c).toLowerCase();return Y(o,g=>g.search(u))},br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,X=o=>c=>Dr(c,o),fe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:o=>Dr(o,"edge/")&&Dr(o,"chrome")&&Dr(o,"safari")&&Dr(o,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,br],search:o=>Dr(o,"chrome")&&!Dr(o,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:o=>Dr(o,"msie")||Dr(o,"trident")},{name:"Opera",versionRegexes:[br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:X("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:X("firefox")},{name:"Safari",versionRegexes:[br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:o=>(Dr(o,"safari")||Dr(o,"mobile/"))&&Dr(o,"applewebkit")}],Ze=[{name:"Windows",search:X("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:o=>Dr(o,"iphone")||Dr(o,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:X("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:X("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:X("linux"),versionRegexes:[]},{name:"Solaris",search:X("sunos"),versionRegexes:[]},{name:"FreeBSD",search:X("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:X("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],St={browsers:ve(fe),oses:ve(Ze)},Oo="Edge",Gn="Chromium",jr="Opera",vc="Firefox",bn="Safari",fl=o=>{const c=o.current,u=o.version,g=b=>()=>c===b;return{current:c,version:u,isEdge:g(Oo),isChromium:g(Gn),isIE:g("IE"),isOpera:g(jr),isFirefox:g(vc),isSafari:g(bn)}},ba=()=>fl({current:void 0,version:ms.unknown()}),$d=fl,Ii="Windows",cr="Android",ou="Linux",Nc="macOS",Ul="Solaris",uc="FreeBSD",Mm="ChromeOS",Xp=o=>{const c=o.current,u=o.version,g=b=>()=>c===b;return{current:c,version:u,isWindows:g(Ii),isiOS:g("iOS"),isAndroid:g(cr),isMacOS:g(Nc),isLinux:g(ou),isSolaris:g(Ul),isFreeBSD:g(uc),isChromeOS:g(Mm)}},Qb=()=>Xp({current:void 0,version:ms.unknown()}),Ka=Xp,Nm=o=>window.matchMedia(o).matches;var Ec;let sl=Nn(()=>((o,c,u)=>{const g=St.browsers(),b=St.oses(),y=c.bind(E=>((M,P)=>it(P.brands,N=>{const V=N.brand.toLowerCase();return Y(M,G=>{var Q;return V===((Q=G.brand)===null||Q===void 0?void 0:Q.toLowerCase())}).map(G=>({current:G.name,version:ms.nu(parseInt(N.version,10),0)}))}))(g,E)).orThunk(()=>((E,M)=>Ds(E,M).map(P=>{const N=ms.detect(P.versionRegexes,M);return{current:P.name,version:N}}))(g,o)).fold(ba,$d),S=((E,M)=>Ds(E,M).map(P=>{const N=ms.detect(P.versionRegexes,M);return{current:P.name,version:N}}))(b,o).fold(Qb,Ka),T=((E,M,P,N)=>{const V=E.isiOS()&&/ipad/i.test(P)===!0,G=E.isiOS()&&!V,Q=E.isiOS()||E.isAndroid(),pe=Q||N("(pointer:coarse)"),he=V||!G&&Q&&N("(min-device-width:768px)"),xe=G||Q&&!he,ie=M.isSafari()&&E.isiOS()&&/safari/i.test(P)===!1,ae=!xe&&!he&&!ie;return{isiPad:ve(V),isiPhone:ve(G),isTablet:ve(he),isPhone:ve(xe),isTouch:ve(pe),isAndroid:E.isAndroid,isiOS:E.isiOS,isWebView:ve(ie),isDesktop:ve(ae)}})(S,y,o,u);return{browser:y,os:S,deviceType:T}})(window.navigator.userAgent,z.from(window.navigator.userAgentData),Nm));const ic=()=>sl(),Bm=o=>{const c=yt((y=>{if(Vn(y.target)){const S=yt(y.target);if(Pe(S)&&(T=>Vn(T.dom.shadowRoot))(S)&&y.composed&&y.composedPath){const T=y.composedPath();if(T)return At(T)}}return z.from(y.target)})(o).getOr(o.target)),u=()=>o.stopPropagation(),g=()=>o.preventDefault(),b=ue(g,u);return((y,S,T,E,M,P,N)=>({target:y,x:S,y:T,stop:E,prevent:M,kill:P,raw:N}))(c,o.clientX,o.clientY,u,g,b,o)},we=(o,c,u,g,b)=>{const y=((S,T)=>E=>{S(E)&&T(Bm(E))})(u,g);return o.dom.addEventListener(c,y,b),{unbind:re(_e,o,c,y,b)}},_e=(o,c,u,g)=>{o.dom.removeEventListener(c,u,g)},wt=(o,c)=>{xo(o).each(u=>{u.dom.insertBefore(c.dom,o.dom)})},un=(o,c)=>{(g=>z.from(g.dom.nextSibling).map(yt))(o).fold(()=>{xo(o).each(g=>{Ks(g,c)})},g=>{wt(g,c)})},Ko=(o,c)=>{hr(o).fold(()=>{Ks(o,c)},u=>{o.dom.insertBefore(c.dom,u.dom)})},Ks=(o,c)=>{o.dom.appendChild(c.dom)},nr=(o,c)=>{ft(c,u=>{Ks(o,u)})},Da=o=>{o.dom.textContent="",ft(Vo(o),c=>{si(c)})},si=o=>{const c=o.dom;c.parentNode!==null&&c.parentNode.removeChild(c)},Fi=o=>{const c=o!==void 0?o.dom:document,u=c.body.scrollLeft||c.documentElement.scrollLeft,g=c.body.scrollTop||c.documentElement.scrollTop;return Wr(u,g)},Ol=(o,c,u)=>{const g=(u!==void 0?u.dom:document).defaultView;g&&g.scrollTo(o,c)},di=(o,c,u,g)=>({x:o,y:c,width:u,height:g,right:o+u,bottom:c+g}),Pi=o=>{const c=o===void 0?window:o,u=c.document,g=Fi(yt(u));return(b=>{const y=b===void 0?window:b;return ic().browser.isFirefox()?z.none():z.from(y.visualViewport)})(c).fold(()=>{const b=c.document.documentElement,y=b.clientWidth,S=b.clientHeight;return di(g.left,g.top,y,S)},b=>di(Math.max(b.pageLeft,g.left),Math.max(b.pageTop,g.top),b.width,b.height))},dc=()=>yt(document),pl=(o,c)=>o.view(c).fold(ve([]),u=>{const g=o.owner(u),b=pl(o,g);return[u].concat(b)});var Yi=Object.freeze({__proto__:null,view:o=>{var c;return(o.dom===document?z.none():z.from((c=o.dom.defaultView)===null||c===void 0?void 0:c.frameElement)).map(yt)},owner:o=>Ge(o)});const Bc=o=>{const c=dc(),u=Fi(c);return((b,y)=>{const S=y.owner(b),T=pl(y,S);return z.some(T)})(o,Yi).fold(re(ol,o),b=>{const y=le(o),S=$e(b,(T,E)=>{const M=le(E);return{left:T.left+M.left,top:T.top+M.top}},{left:0,top:0});return Wr(S.left+y.left+u.left,S.top+y.top+u.top)})},tr=(o,c,u,g)=>({x:o,y:c,width:u,height:g,right:o+u,bottom:c+g}),_i=o=>{const c=ol(o),u=Pt(o),g=qa(o);return tr(c.left,c.top,u,g)},Im=o=>{const c=Bc(o),u=Pt(o),g=qa(o);return tr(c.left,c.top,u,g)},Fm=(o,c)=>{const u=Math.max(o.x,c.x),g=Math.max(o.y,c.y),b=Math.min(o.right,c.right),y=Math.min(o.bottom,c.bottom);return tr(u,g,b-u,y-g)},Ic=()=>Pi(window),Go=o=>{let c=o;return{get:()=>c,set:u=>{c=u}}},og=o=>{const c=Go(z.none()),u=()=>c.get().each(o);return{clear:()=>{u(),c.set(z.none())},isSet:()=>c.get().isSome(),get:()=>c.get(),set:g=>{u(),c.set(z.some(g))}}},Hd=()=>og(o=>o.unbind()),Br=()=>{const o=og(Ue);return{...o,on:c=>o.get().each(c)}};var su=tinymce.util.Tools.resolve("tinymce.ThemeManager");const xv=o=>{const c=y=>y(o),u=ve(o),g=()=>b,b={tag:!0,inner:o,fold:(y,S)=>S(o),isValue:Be,isError:Qe,map:y=>vr.value(y(o)),mapError:g,bind:c,exists:c,forall:c,getOr:u,or:g,getOrThunk:u,orThunk:g,getOrDie:u,each:y=>{y(o)},toOptional:()=>z.some(o)};return b},Pm=o=>{const c=()=>u,u={tag:!1,inner:o,fold:(g,b)=>g(o),isValue:Qe,isError:Be,map:c,mapError:g=>vr.error(g(o)),bind:c,exists:Qe,forall:Be,getOr:In,or:In,getOrThunk:qn,orThunk:qn,getOrDie:oo(String(o)),each:Ue,toOptional:z.none};return u},vr={value:xv,error:Pm,fromOption:(o,c)=>o.fold(()=>Pm(c),xv)};var Wl;(function(o){o[o.Error=0]="Error",o[o.Value=1]="Value"})(Wl||(Wl={}));const Jp=(o,c,u)=>o.stype===Wl.Error?c(o.serror):u(o.svalue),Qp=o=>({stype:Wl.Value,svalue:o}),cf=o=>({stype:Wl.Error,serror:o}),Lm=Qp,sg=cf,lf=Jp,Kh=(o,c,u,g)=>({tag:"field",key:o,newKey:c,presence:u,prop:g}),je=(o,c,u)=>{switch(o.tag){case"field":return c(o.key,o.newKey,o.presence,o.prop);case"custom":return u(o.newKey,o.instantiator)}},uf=o=>(...c)=>{if(c.length===0)throw new Error("Can't merge zero objects");const u={};for(let g=0;g<c.length;g++){const b=c[g];for(const y in b)yo(b,y)&&(u[y]=o(u[y],b[y]))}return u},ga=uf((o,c)=>Tt(o)&&Tt(c)?ga(o,c):c),Tx=uf((o,c)=>c),Yh=o=>({tag:"defaultedThunk",process:o}),$m=o=>Yh(ve(o)),Lr=o=>({tag:"mergeWithThunk",process:o}),Xi=o=>{const c=(g=>{const b=[],y=[];return ft(g,S=>{Jp(S,T=>y.push(T),T=>b.push(T))}),{values:b,errors:y}})(o);return c.errors.length>0?(u=c.errors,ue(sg,Et)(u)):Lm(c.values);var u},hl=o=>no(o)&&Dt(o).length>100?" removed due to size":JSON.stringify(o,null,2),zd=(o,c)=>sg([{path:o,getErrorInfo:c}]),df=o=>({extract:(c,u)=>((g,b)=>g.stype===Wl.Error?b(g.serror):g)(o(u),g=>((b,y)=>zd(b,ve(y)))(c,g)),toString:ve("val")}),mf=df(Lm),jl=(o,c,u,g)=>g(Gt(o,c).getOrThunk(()=>u(o))),Xh=(o,c,u,g,b)=>{const y=T=>b.extract(c.concat([g]),T),S=T=>T.fold(()=>Lm(z.none()),E=>((M,P)=>M.stype===Wl.Value?{stype:Wl.Value,svalue:P(M.svalue)}:M)(b.extract(c.concat([g]),E),z.some));switch(o.tag){case"required":return((T,E,M,P)=>Gt(E,M).fold(()=>((N,V,G)=>zd(N,()=>'Could not find valid *required* value for "'+V+'" in '+hl(G)))(T,M,E),P))(c,u,g,y);case"defaultedThunk":return jl(u,g,o.process,y);case"option":return((T,E,M)=>M(Gt(T,E)))(u,g,S);case"defaultedOptionThunk":return((T,E,M,P)=>P(Gt(T,E).map(N=>N===!0?M(T):N)))(u,g,o.process,S);case"mergeWithThunk":return jl(u,g,ve({}),T=>{const E=ga(o.process(u),T);return y(E)})}},eh=o=>({extract:(c,u)=>o().extract(c,u),toString:()=>o().toString()}),Tg=o=>Dt(Zo(o,Vn)),rl=o=>{const c=ps(o),u=$e(o,(g,b)=>je(b,y=>ga(g,{[y]:!0}),ve(g)),{});return{extract:(g,b)=>{const y=ss(b)?[]:Tg(b),S=Bt(y,T=>!gr(u,T));return S.length===0?c.extract(g,b):((T,E)=>zd(T,()=>"There are unsupported fields: ["+E.join(", ")+"] specified"))(g,S)},toString:c.toString}},ps=o=>({extract:(c,u)=>((g,b,y)=>{const S={},T=[];for(const E of y)je(E,(M,P,N,V)=>{const G=Xh(N,g,b,M,V);lf(G,Q=>{T.push(...Q)},Q=>{S[P]=Q})},(M,P)=>{S[M]=P(b)});return T.length>0?sg(T):Lm(S)})(c,u,o),toString:()=>`obj{
`+Oe(o,c=>je(c,(u,g,b,y)=>u+" -> "+y.toString(),(u,g)=>"state("+u+")")).join(`
`)+"}"}),Dl=o=>({extract:(c,u)=>{const g=Oe(u,(b,y)=>o.extract(c.concat(["["+y+"]"]),b));return Xi(g)},toString:()=>"array("+o.toString()+")"}),gf=(o,c)=>{const u=c!==void 0?c:In;return{extract:(g,b)=>{const y=[];for(const S of o){const T=S.extract(g,b);if(T.stype===Wl.Value)return{stype:Wl.Value,svalue:u(T.svalue)};y.push(T)}return Xi(y)},toString:()=>"oneOf("+Oe(o,g=>g.toString()).join(", ")+")"}},Rl=(o,c)=>({extract:(u,g)=>{const b=Dt(g),y=((S,T)=>Dl(df(o)).extract(S,T))(u,b);return((S,T)=>S.stype===Wl.Value?T(S.svalue):S)(y,S=>{const T=Oe(S,E=>Kh(E,E,{tag:"required",process:{}},c));return ps(T).extract(u,g)})},toString:()=>"setOf("+c.toString()+")"}),om=ue(Dl,ps),al=ve(mf),bl=(o,c)=>df(u=>{const g=typeof u;return o(u)?Lm(u):sg(`Expected type: ${c} but got: ${g}`)}),Hm=bl(zn,"number"),Fc=bl(wn,"string"),ff=bl(ss,"boolean"),Vd=bl(kn,"function"),pf=o=>{if(Object(o)!==o)return!0;switch({}.toString.call(o).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(o).every(c=>pf(o[c]));default:return!1}},$0=df(o=>pf(o)?Lm(o):sg("Expected value to be acceptable for sending via postMessage")),Eg=(o,c)=>({extract:(u,g)=>Gt(g,o).fold(()=>((b,y)=>zd(b,()=>'Choice schema did not contain choice key: "'+y+'"'))(u,o),b=>((y,S,T,E)=>Gt(T,E).fold(()=>((M,P,N)=>zd(M,()=>'The chosen schema: "'+N+'" did not exist in branches: '+hl(P)))(y,T,E),M=>M.extract(y.concat(["branch: "+E]),S)))(u,g,c,b)),toString:()=>"chooseOn("+o+"). Possible values: "+Dt(c)}),th=o=>df(c=>o(c).fold(sg,Lm)),wv=(o,c)=>Rl(u=>o(u).fold(cf,Qp),c),Ai=(o,c,u)=>{return g=((b,y,S)=>((T,E)=>T.stype===Wl.Error?{stype:Wl.Error,serror:E(T.serror)}:T)(y.extract([b],S),T=>({input:S,errors:T})))(o,c,u),Jp(g,vr.error,vr.value);var g},Zl=o=>o.fold(c=>{throw new Error(Yu(c))},In),Ml=(o,c,u)=>Zl(Ai(o,c,u)),Yu=o=>`Errors: 
`+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ve("... (only showing first ten failures)")}]):c;return Oe(u,g=>"Failed path: ("+g.path.join(" > ")+`)
`+g.getErrorInfo())})(o.errors).join(`
`)+`

Input object: `+hl(o.input),oa=(o,c)=>Eg(o,ut(c,ps)),jc=(o,c)=>((u,g)=>{const b=Nn(g);return{extract:(y,S)=>b().extract(y,S),toString:()=>b().toString()}})(0,c),Ya=Kh,vl=(o,c)=>({tag:"custom",newKey:o,instantiator:c}),hf=o=>th(c=>Le(o,c)?vr.value(c):vr.error(`Unsupported value: "${c}", choose one of "${o.join(", ")}".`)),Yt=o=>Ya(o,o,{tag:"required",process:{}},al()),wo=(o,c)=>Ya(o,o,{tag:"required",process:{}},c),yc=o=>wo(o,Fc),Gl=(o,c)=>Ya(o,o,{tag:"required",process:{}},hf(c)),mc=o=>wo(o,Vd),Ir=(o,c)=>Ya(o,o,{tag:"required",process:{}},ps(c)),bf=(o,c)=>Ya(o,o,{tag:"required",process:{}},om(c)),ql=(o,c)=>Ya(o,o,{tag:"required",process:{}},Dl(c)),Fr=o=>Ya(o,o,{tag:"option",process:{}},al()),sm=(o,c)=>Ya(o,o,{tag:"option",process:{}},c),Ws=o=>sm(o,Hm),_r=o=>sm(o,Fc),_g=(o,c)=>sm(o,hf(c)),il=o=>sm(o,Vd),Cu=(o,c)=>sm(o,Dl(c)),gc=(o,c)=>sm(o,ps(c)),ht=(o,c)=>Ya(o,o,$m(c),al()),Ji=(o,c,u)=>Ya(o,o,$m(c),u),Xu=(o,c)=>Ji(o,c,Hm),yi=(o,c)=>Ji(o,c,Fc),va=(o,c,u)=>Ji(o,c,hf(u)),cl=(o,c)=>Ji(o,c,ff),sr=(o,c)=>Ji(o,c,Vd),vd=(o,c,u)=>Ji(o,c,Dl(u)),rm=(o,c,u)=>Ji(o,c,ps(u)),Zr=o=>{if(!Fn(o))throw new Error("cases must be an array");if(o.length===0)throw new Error("there must be at least one case");const c=[],u={};return ft(o,(g,b)=>{const y=Dt(g);if(y.length!==1)throw new Error("one and only one name per case");const S=y[0],T=g[S];if(u[S]!==void 0)throw new Error("duplicate key detected:"+S);if(S==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Fn(T))throw new Error("case arguments must be an array");c.push(S),u[S]=(...E)=>{const M=E.length;if(M!==T.length)throw new Error("Wrong number of arguments to case "+S+". Expected "+T.length+" ("+T+"), got "+M);return{fold:(...P)=>{if(P.length!==o.length)throw new Error("Wrong number of arguments to fold. Expected "+o.length+", got "+P.length);return P[b].apply(null,E)},match:P=>{const N=Dt(P);if(c.length!==N.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+`
Actual: `+N.join(","));if(!Pn(c,V=>Le(N,V)))throw new Error("Not all branches were specified when using match. Specified: "+N.join(", ")+`
Required: `+c.join(", "));return P[S].apply(null,E)},log:P=>{console.log(P,{constructors:c,constructor:S,params:E})}}}}),u};Zr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Su=(o,c)=>((u,g)=>({[u]:g}))(o,c),zm=o=>(c=>{const u={};return ft(c,g=>{u[g.key]=g.value}),u})(o),Ag=o=>kn(o)?o:Qe,mi=(o,c,u)=>{let g=o.dom;const b=Ag(u);for(;g.parentNode;){g=g.parentNode;const y=yt(g),S=c(y);if(S.isSome())return S;if(b(y))break}return z.none()},am=(o,c,u)=>{const g=c(o),b=Ag(u);return g.orThunk(()=>b(o)?z.none():mi(o,c,b))},yd=(o,c)=>xt(o.element,c.event.target),yr={can:Be,abort:Qe,run:Ue},im=o=>{if(!gr(o,"can")&&!gr(o,"abort")&&!gr(o,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(o,null,2)+" does not have can, abort, or run!");return{...yr,...o}},Zc=ve,I=Zc("touchstart"),j=Zc("touchmove"),ne=Zc("touchend"),ze=Zc("touchcancel"),qe=Zc("mousedown"),Sn=Zc("mousemove"),as=Zc("mouseout"),Ys=Zc("mouseup"),Os=Zc("mouseover"),_o=Zc("focusin"),Oi=Zc("focusout"),Xa=Zc("keydown"),Bu=Zc("keyup"),Iu=Zc("input"),nh=Zc("change"),cm=Zc("click"),H0=Zc("transitioncancel"),ll=Zc("transitionend"),z0=Zc("transitionstart"),NC=Zc("selectstart"),xc=o=>ve("alloy."+o),ru={tap:xc("tap")},Og=xc("focus"),wc=xc("blur.post"),Cv=xc("paste.post"),Pc=xc("receive"),os=xc("execute"),Ju=xc("focus.item"),Dg=ru.tap,e1=xc("longpress"),Sv=xc("sandbox.close"),t1=xc("typeahead.cancel"),Ud=xc("system.init"),vf=xc("system.touchmove"),oh=xc("system.touchend"),so=xc("system.scroll"),Qu=xc("system.resize"),Vm=xc("system.attached"),xd=xc("system.detached"),Fu=xc("system.dismissRequested"),n1=xc("system.repositionRequested"),Rg=xc("focusmanager.shifted"),ap=xc("slotcontainer.visibility"),o1=xc("system.external.element.scroll"),rg=xc("change.tab"),Ex=xc("dismiss.tab"),Li=xc("highlight"),_n=xc("dehighlight"),$s=(o,c)=>{Gc(o,o.element,c,{})},Uo=(o,c,u)=>{Gc(o,o.element,c,u)},fc=o=>{$s(o,os())},sh=(o,c,u)=>{Gc(o,c,u,{})},Gc=(o,c,u,g)=>{const b={target:c,...g};o.getSystem().triggerEvent(u,c,b)},aa=(o,c,u,g)=>{o.getSystem().triggerEvent(u,c,g.event)},Ja=o=>zm(o),dn=(o,c)=>({key:o,value:im({abort:c})}),ia=o=>({key:o,value:im({run:(c,u)=>{u.event.prevent()}})}),tn=(o,c)=>({key:o,value:im({run:c})}),qc=(o,c,u)=>({key:o,value:im({run:(g,b)=>{c.apply(void 0,[g,b].concat(u))}})}),Kc=o=>c=>({key:o,value:im({run:(u,g)=>{yd(u,g)&&c(u,g)}})}),ed=(o,c,u)=>((g,b)=>tn(g,(y,S)=>{y.getSystem().getByUid(b).each(T=>{aa(T,T.element,g,S)})}))(o,c.partUids[u]),kv=(o,c)=>tn(o,(u,g)=>{const b=g.event,y=u.getSystem().getByDom(b.target).getOrThunk(()=>am(b.target,S=>u.getSystem().getByDom(S).toOptional(),Qe).getOr(u));c(u,y,g)}),lm=o=>tn(o,(c,u)=>{u.cut()}),_x=o=>tn(o,(c,u)=>{u.stop()}),au=(o,c)=>Kc(o)(c),Cs=Kc(Vm()),ku=Kc(xd()),s1=Kc(Ud()),ri=(lg=os(),o=>tn(lg,o)),Jh=o=>Oe(o,c=>hi(c,"/*")?c.substring(0,c.length-2):c),Mg=(o,c)=>{const u=o.toString(),g=u.indexOf(")")+1,b=u.indexOf("("),y=u.substring(b+1,g-1).split(/,\s*/);return o.toFunctionAnnotation=()=>({name:c,parameters:Jh(y)}),o},um=o=>({classes:st(o.classes)?[]:o.classes,attributes:st(o.attributes)?{}:o.attributes,styles:st(o.styles)?{}:o.styles}),Yc=(o,c,u)=>s1((g,b)=>{u(g,o,c)}),yl=o=>({key:o,value:void 0}),Ct=(o,c,u,g,b,y,S)=>{const T=P=>gr(P,u)?P[u]():z.none(),E=ut(b,(P,N)=>((V,G,Q)=>((pe,he,xe)=>{const ie=xe.toString(),ae=ie.indexOf(")")+1,Ce=ie.indexOf("("),ke=ie.substring(Ce+1,ae-1).split(/,\s*/);return pe.toFunctionAnnotation=()=>({name:he,parameters:Jh(ke.slice(0,1).concat(ke.slice(3)))}),pe})((pe,...he)=>{const xe=[pe].concat(he);return pe.config({name:ve(V)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+V+". Using API: "+Q)},ie=>{const ae=Array.prototype.slice.call(xe,1);return G.apply(void 0,[pe,ie.config,ie.state].concat(ae))})},Q,G))(u,P,N)),M={...ut(y,(P,N)=>Mg(P,N)),...E,revoke:re(yl,u),config:P=>{const N=Ml(u+"-config",o,P);return{key:u,value:{config:N,me:M,configAsRaw:Nn(()=>Ml(u+"-config",o,P)),initialConfig:P,state:S}}},schema:ve(c),exhibit:(P,N)=>ns(T(P),Gt(g,"exhibit"),(V,G)=>G(N,V.config,V.state)).getOrThunk(()=>um({})),name:ve(u),handlers:P=>T(P).map(N=>Gt(g,"events").getOr(()=>({}))(N.config,N.state)).getOr({})};return M},fa={init:()=>wd({readState:ve("No State required")})},wd=o=>o,gn=o=>zm(o),Kl=rl([Yt("fields"),Yt("name"),ht("active",{}),ht("apis",{}),ht("state",fa),ht("extra",{})]),Ra=o=>{const c=Ml("Creating behaviour: "+o.name,Kl,o);return((u,g,b,y,S,T)=>{const E=rl(u),M=gc(g,[(P=u,sm("config",rl(P)))]);var P;return Ct(E,M,g,b,y,S,T)})(c.fields,c.name,c.active,c.apis,c.extra,c.state)},Ea=rl([Yt("branchKey"),Yt("branches"),Yt("name"),ht("active",{}),ht("apis",{}),ht("state",fa),ht("extra",{})]),V0=o=>{const c=Ml("Creating behaviour: "+o.name,Ea,o);return((u,g,b,y,S,T)=>{const E=u,M=gc(g,[sm("config",u)]);return Ct(E,M,g,b,y,S,T)})(oa(c.branchKey,c.branches),c.name,c.active,c.apis,c.extra,c.state)},D=ve(void 0),H=(o,c)=>{const u=Ei(o,c);return u===void 0||u===""?[]:u.split(" ")},te=o=>o.dom.classList!==void 0,ye=o=>H(o,"class"),et=(o,c)=>((u,g,b)=>{const y=H(u,g).concat([b]);return ws(u,g,y.join(" ")),!0})(o,"class",c),an=(o,c)=>((u,g,b)=>{const y=Bt(H(u,g),S=>S!==b);return y.length>0?ws(u,g,y.join(" ")):Xs(u,g),!1})(o,"class",c),xn=(o,c)=>{te(o)?o.dom.classList.add(c):et(o,c)},Fo=o=>{(te(o)?o.dom.classList:ye(o)).length===0&&Xs(o,"class")},$o=(o,c)=>{te(o)?o.dom.classList.remove(c):an(o,c),Fo(o)},Ss=(o,c)=>te(o)&&o.dom.classList.contains(c),ua=(o,c)=>{ft(c,u=>{xn(o,u)})},Pr=(o,c)=>{ft(c,u=>{$o(o,u)})},gi=o=>te(o)?(c=>{const u=c.dom.classList,g=new Array(u.length);for(let b=0;b<u.length;b++){const y=u.item(b);y!==null&&(g[b]=y)}return g})(o):ye(o),Lc=(o,c,u,g,b)=>{const y=S=>S+"px";return{position:o,left:c.map(y),top:u.map(y),right:g.map(y),bottom:b.map(y)}},ag=(o,c)=>{Ld(o,(u=>({...u,position:z.some(u.position)}))(c))},iu=o=>(Us(ui(o,"position"),"fixed")?z.none():Bo(o)).orThunk(()=>{const c=vi("span");return xo(o).bind(u=>{Ks(u,c);const g=Bo(c);return si(c),g})}),Um=o=>iu(o).map(ol).getOrThunk(()=>Wr(0,0)),r1=(o,c)=>{const u=o.element;xn(u,c.transitionClass),$o(u,c.fadeOutClass),xn(u,c.fadeInClass),c.onShow(o)},yf=(o,c)=>{const u=o.element;xn(u,c.transitionClass),$o(u,c.fadeInClass),xn(u,c.fadeOutClass),c.onHide(o)},ig=(o,c)=>o.y>=c.y,ip=(o,c)=>o.bottom<=c.bottom,a1=(o,c,u)=>({location:"top",leftX:c,topY:u.bounds.y-o.y}),Qh=(o,c,u)=>({location:"bottom",leftX:c,bottomY:o.bottom-u.bounds.bottom}),i1=o=>o.box.x-o.win.x,Xc=(o,c,u)=>u.getInitialPos().map(g=>{const b=((y,S)=>{const T=S.optScrollEnv.fold(ve(y.bounds.y),E=>E.scrollElmTop+(y.bounds.y-E.currentScrollTop));return Wr(y.bounds.x,T)})(g,c);return{box:tr(b.left,b.top,Je(o),oi(o)),location:g.location}}),cg=(o,c,u,g,b)=>{const y=((T,E)=>{const M=E.optScrollEnv.fold(ve(T.y),P=>T.y+P.currentScrollTop-P.scrollElmTop);return Wr(T.x,M)})(c,u),S=tr(y.left,y.top,c.width,c.height);g.setInitialPos({style:kg(o),position:Wa(o,"position")||"static",bounds:S,location:b.location})},$r=(o,c,u)=>u.getInitialPos().bind(g=>{var b;switch(u.clearInitialPos(),g.position){case"static":return z.some({morph:"static"});case"absolute":const y=iu(o).getOr(Ti()),S=_i(y),T=(b=y.dom.scrollTop)!==null&&b!==void 0?b:0;return z.some({morph:"absolute",positionCss:Lc("absolute",Gt(g.style,"left").map(E=>c.x-S.x),Gt(g.style,"top").map(E=>c.y-S.y+T),Gt(g.style,"right").map(E=>S.right-c.right),Gt(g.style,"bottom").map(E=>S.bottom-c.bottom))});default:return z.none()}}),ai=o=>{switch(o.location){case"top":return z.some({morph:"fixed",positionCss:Lc("fixed",z.some(o.leftX),z.some(o.topY),z.none(),z.none())});case"bottom":return z.some({morph:"fixed",positionCss:Lc("fixed",z.some(o.leftX),z.none(),z.none(),z.some(o.bottomY))});default:return z.none()}},Pu=(o,c,u)=>{const g=o.element;return Us(ui(g,"position"),"fixed")?((b,y,S)=>((T,E,M)=>Xc(T,E,M).filter(({box:P})=>((N,V,G)=>Pn(N,Q=>{switch(Q){case"bottom":return ip(V,G.bounds);case"top":return ig(V,G.bounds)}}))(M.getModes(),P,E)).bind(({box:P})=>$r(T,P,M)))(b,y,S).orThunk(()=>y.optScrollEnv.bind(T=>Xc(b,y,S)).bind(({box:T,location:E})=>{const M=Ic(),P=i1({win:M,box:T}),N=E==="top"?a1(M,P,y):Qh(M,P,y);return ai(N)})))(g,c,u):((b,y,S)=>{const T=_i(b),E=Ic(),M=((P,N,V)=>{const G=N.win,Q=N.box,pe=i1(N);return it(P,he=>{switch(he){case"bottom":return ip(Q,V.bounds)?z.none():z.some(Qh(G,pe,V));case"top":return ig(Q,V.bounds)?z.none():z.some(a1(G,pe,V));default:return z.none()}}).getOr({location:"no-dock"})})(S.getModes(),{win:E,box:T},y);return M.location==="top"||M.location==="bottom"?(cg(b,T,y,S,M),ai(M)):z.none()})(g,c,u)},_c=(o,c,u)=>{u.setDocked(!1),ft(["left","right","top","bottom","position"],g=>or(o.element,g)),c.onUndocked(o)},eb=(o,c,u,g)=>{const b=g.position==="fixed";u.setDocked(b),ag(o.element,g),(b?c.onDocked:c.onUndocked)(o)},Tv=(o,c,u,g,b=!1)=>{c.contextual.each(y=>{y.lazyContext(o).each(S=>{const T=((E,M)=>E.y<M.bottom&&E.bottom>M.y)(S,g.bounds);T!==u.isVisible()&&(u.setVisible(T),b&&!T?(ua(o.element,[y.fadeOutClass]),y.onHide(o)):(T?r1:yf)(o,y))})})},xf=(o,c,u,g,b)=>{Tv(o,c,u,g,!0),eb(o,c,u,b.positionCss)},td=(o,c,u)=>{o.getSystem().isConnected()&&((g,b,y)=>{const S=b.lazyViewport(g);Tv(g,b,y,S),Pu(g,S,y).each(T=>{((E,M,P,N,V)=>{switch(V.morph){case"static":return _c(E,M,P);case"absolute":return eb(E,M,P,V.positionCss);case"fixed":xf(E,M,P,N,V)}})(g,b,y,S,T)})})(o,c,u)},wf=(o,c,u)=>{u.isDocked()&&((g,b,y)=>{const S=g.element;y.setDocked(!1);const T=b.lazyViewport(g);((E,M,P)=>{const N=E.element;return Xc(N,M,P).bind(({box:V})=>$r(N,V,P))})(g,T,y).each(E=>{switch(E.morph){case"static":_c(g,b,y);break;case"absolute":eb(g,b,y,E.positionCss)}}),y.setVisible(!0),b.contextual.each(E=>{Pr(S,[E.fadeInClass,E.fadeOutClass,E.transitionClass]),E.onShow(g)}),td(g,b,y)})(o,c,u)},Bk=o=>(c,u,g)=>{const b=u.lazyViewport(c);((y,S,T,E)=>{const M=_i(y),P=Ic(),N=E(P,i1({win:P,box:M}),S);return N.location==="bottom"||N.location==="top"?(((V,G,Q,pe,he)=>{pe.getInitialPos().fold(()=>cg(V,G,Q,pe,he),()=>Ue)})(y,M,S,T,N),ai(N)):z.none()})(c.element,b,g,o).each(y=>{xf(c,u,g,b,y)})},nd=Bk(a1),sA=Bk(Qh);var lg,tb=Object.freeze({__proto__:null,refresh:td,reset:wf,isDocked:(o,c,u)=>u.isDocked(),getModes:(o,c,u)=>u.getModes(),setModes:(o,c,u,g)=>u.setModes(g),forceDockToTop:nd,forceDockToBottom:sA}),Ev=Object.freeze({__proto__:null,events:(o,c)=>Ja([au(ll(),(u,g)=>{o.contextual.each(b=>{Ss(u.element,b.transitionClass)&&(Pr(u.element,[b.transitionClass,b.fadeInClass]),(c.isVisible()?b.onShown:b.onHidden)(u)),g.stop()})}),tn(so(),(u,g)=>{td(u,o,c)}),tn(o1(),(u,g)=>{td(u,o,c)}),tn(Qu(),(u,g)=>{wf(u,o,c)})])});const Ik=o=>o.dom.innerHTML,cp=(o,c)=>{const u=Ge(o).dom,g=yt(u.createDocumentFragment()),b=((y,S)=>{const T=(S||document).createElement("div");return T.innerHTML=y,Vo(yt(T))})(c,u);nr(g,b),Da(o),Ks(o,g)},c1=(o,c)=>yt(o.dom.cloneNode(c)),nb=o=>(c=>{if(Al(c))return"#shadow-root";{const u=(g=>c1(g,!1))(c);return(g=>{const b=vi("div"),y=yt(g.dom.cloneNode(!0));return Ks(b,y),Ik(b)})(u)}})(o);var Qi;(function(o){o[o.STOP=0]="STOP",o[o.NORMAL=1]="NORMAL",o[o.LOGGING=2]="LOGGING"})(Qi||(Qi={}));const Ax=Go({}),lp=["alloy/data/Fields","alloy/debugging/Debugging"],rh=(o,c,u)=>((g,b,y)=>{switch(Gt(Ax.get(),g).orThunk(()=>{const S=Dt(Ax.get());return it(S,T=>g.indexOf(T)>-1?z.some(Ax.get()[T]):z.none())}).getOr(Qi.NORMAL)){case Qi.NORMAL:return y(U0());case Qi.LOGGING:{const S=((E,M)=>{const P=[],N=new Date().getTime();return{logEventCut:(V,G,Q)=>{P.push({outcome:"cut",target:G,purpose:Q})},logEventStopped:(V,G,Q)=>{P.push({outcome:"stopped",target:G,purpose:Q})},logNoParent:(V,G,Q)=>{P.push({outcome:"no-parent",target:G,purpose:Q})},logEventNoHandlers:(V,G)=>{P.push({outcome:"no-handlers-left",target:G})},logEventResponse:(V,G,Q)=>{P.push({outcome:"response",purpose:Q,target:G})},write:()=>{const V=new Date().getTime();Le(["mousemove","mouseover","mouseout",Ud()],E)||console.log(E,{event:E,time:V-N,target:M.dom,sequence:Oe(P,G=>Le(["cut","stopped","response"],G.outcome)?"{"+G.purpose+"} "+G.outcome+" at ("+nb(G.target)+")":G.outcome)})}}})(g,b),T=y(S);return S.write(),T}case Qi.STOP:return!0}})(o,c,u),U0=ve({logEventCut:Ue,logEventStopped:Ue,logNoParent:Ue,logEventNoHandlers:Ue,logEventResponse:Ue,write:Ue}),ug=ve([Yt("menu"),Yt("selectedMenu")]),cu=ve([Yt("item"),Yt("selectedItem")]);ve(ps(cu().concat(ug())));const BC=ve(ps(cu())),Ox=Ir("initSize",[Yt("numColumns"),Yt("numRows")]),ah=()=>Ir("markers",[Yt("backgroundMenu")].concat(ug()).concat(cu())),$c=o=>Ir("markers",Oe(o,Yt)),_v=(o,c,u)=>((()=>{const g=new Error;if(g.stack!==void 0){const b=g.stack.split(`
`);Y(b,y=>y.indexOf("alloy")>0&&!Qt(lp,S=>y.indexOf(S)>-1)).getOr("unknown")}})(),Ya(c,c,u,th(g=>vr.value((...b)=>g.apply(void 0,b))))),Hr=o=>_v(0,o,$m(Ue)),dm=o=>_v(0,o,$m(z.none)),up=o=>_v(0,o,{tag:"required",process:{}}),Av=o=>_v(0,o,{tag:"required",process:{}}),$a=(o,c)=>vl(o,ve(c)),od=o=>vl(o,In),Wd=ve(Ox);var dp=[gc("contextual",[yc("fadeInClass"),yc("fadeOutClass"),yc("transitionClass"),mc("lazyContext"),Hr("onShow"),Hr("onShown"),Hr("onHide"),Hr("onHidden")]),sr("lazyViewport",()=>({bounds:Ic(),optScrollEnv:z.none()})),vd("modes",["top","bottom"],Fc),Hr("onDocked"),Hr("onUndocked")];const ec=Ra({fields:dp,name:"docking",active:Ev,apis:tb,state:Object.freeze({__proto__:null,init:o=>{const c=Go(!1),u=Go(!0),g=Br(),b=Go(o.modes);return wd({isDocked:c.get,setDocked:c.set,getInitialPos:g.get,setInitialPos:g.set,clearInitialPos:g.clear,isVisible:u.get,setVisible:u.set,getModes:b.get,setModes:b.set,readState:()=>`docked:  ${c.get()}, visible: ${u.get()}, modes: ${b.get().join(",")}`})}})}),Dx=Ja([((o,c)=>({key:o,value:im({can:(u,g)=>{const b=g.event,y=b.originator,S=b.target;return!((T,E,M)=>xt(E,T.element)&&!xt(E,M))(u,y,S)||(console.warn(Og()+` did not get interpreted by the desired target. 
Originator: `+nb(y)+`
Target: `+nb(S)+`
Check the `+Og()+" event handlers"),!1)}})}))(Og())]);var W0=Object.freeze({__proto__:null,events:Dx});const Ov=(o,c,u,g)=>{const b=o+c;return b>g?u:b<u?g:b},Ng=(o,c,u)=>Math.min(Math.max(o,c),u);let Fk=0;const Do=o=>{const c=new Date().getTime(),u=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return Fk++,o+"_"+u+Fk+String(c)},l1=ve("alloy-id-"),xr=ve("data-alloy-id"),qo=l1(),ob=xr(),j0=(o,c)=>{Object.defineProperty(o.dom,ob,{value:c,writable:!0})},sb=o=>{const c=Pe(o)?o.dom[ob]:null;return z.from(c)},Dv=o=>Do(o),IC=In,ya=o=>{const c=b=>`The component must be in a context to execute: ${b}`+(o?`
`+nb(o().element)+" is not in context.":""),u=b=>()=>{throw new Error(c(b))},g=b=>()=>{console.warn(c(b))};return{debugInfo:ve("fake"),triggerEvent:g("triggerEvent"),triggerFocus:g("triggerFocus"),triggerEscape:g("triggerEscape"),broadcast:g("broadcast"),broadcastOn:g("broadcastOn"),broadcastEvent:g("broadcastEvent"),build:u("build"),buildOrPatch:u("buildOrPatch"),addToWorld:u("addToWorld"),removeFromWorld:u("removeFromWorld"),addToGui:u("addToGui"),removeFromGui:u("removeFromGui"),getByUid:u("getByUid"),getByDom:u("getByDom"),isConnected:Qe}},Pk=ya(),FC=Do("alloy-premade"),PC=o=>(Object.defineProperty(o.element.dom,FC,{value:o.uid,writable:!0}),Su(FC,o)),on=o=>Gt(o,FC),Rv=o=>((c,u)=>{const g=u.toString(),b=g.indexOf(")")+1,y=g.indexOf("("),S=g.substring(y+1,b-1).split(/,\s*/);return c.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Jh(S.slice(1))}),c})((c,...u)=>o(c.getApis(),c,...u),o),Z0=(o,c)=>{const u={};return Hn(o,(g,b)=>{Hn(g,(y,S)=>{const T=Gt(u,S).getOr([]);u[S]=T.concat([c(b,y)])})}),u},G0=o=>o.cHandler,Rx=(o,c)=>({name:o,handler:c}),q0=(o,c)=>{const u={};return ft(o,g=>{u[g.name()]=g.handlers(c)}),u},LC=(o,c,u)=>{const g=c[u];return g?((b,y,S,T)=>{try{const E=oe(S,(M,P)=>{const N=M[y],V=P[y],G=T.indexOf(N),Q=T.indexOf(V);if(G===-1)throw new Error("The ordering for "+b+" does not have an entry for "+N+`.
Order specified: `+JSON.stringify(T,null,2));if(Q===-1)throw new Error("The ordering for "+b+" does not have an entry for "+V+`.
Order specified: `+JSON.stringify(T,null,2));return G<Q?-1:Q<G?1:0});return vr.value(E)}catch(E){return vr.error([E])}})("Event: "+u,"name",o,g).map(b=>(y=>({can:((E,M)=>(...P)=>pt(E,(N,V)=>N&&(G=>G.can)(V).apply(void 0,P),!0))(y),abort:((E,M)=>(...P)=>pt(E,(N,V)=>N||(G=>G.abort)(V).apply(void 0,P),!1))(y),run:(...E)=>{ft(y,M=>{M.run.apply(void 0,E)})}}))(Oe(b,y=>y.handler))):((b,y)=>vr.error(["The event ("+b+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Oe(y,S=>S.name),null,2)]))(u,o)},Mv=(o,c)=>((u,g)=>{const b=(S=>{const T=[],E=[];return ft(S,M=>{M.fold(P=>{T.push(P)},P=>{E.push(P)})}),{errors:T,values:E}})(u);return b.errors.length>0?(y=b.errors,vr.error(Et(y))):((S,T)=>S.length===0?vr.value(T):vr.value(ga(T,Tx.apply(void 0,S))))(b.values,g);var y})(Co(o,(u,g)=>(u.length===1?vr.value(u[0].handler):LC(u,c,g)).map(b=>{const y=(T=>{const E=(M=>kn(M)?{can:Be,abort:Qe,run:M}:M)(T);return(M,P,...N)=>{const V=[M,P].concat(N);E.abort.apply(void 0,V)?P.stop():E.can.apply(void 0,V)&&E.run.apply(void 0,V)}})(b),S=u.length>1?Bt(c[g],T=>Qt(u,E=>E.name===T)).join(" > "):u[0].name;return Su(g,((T,E)=>({handler:T,purpose:E}))(y,S))})),{}),mp="alloy.base.behaviour",u1=ps([Ya("dom","dom",{tag:"required",process:{}},ps([Yt("tag"),ht("styles",{}),ht("classes",[]),ht("attributes",{}),Fr("value"),Fr("innerHtml")])),Yt("components"),Yt("uid"),ht("events",{}),ht("apis",{}),Ya("eventOrder","eventOrder",(Nx={[os()]:["disabling",mp,"toggling","typeaheadevents"],[Og()]:[mp,"focusing","keying"],[Ud()]:[mp,"disabling","toggling","representing","tooltipping"],[Iu()]:[mp,"representing","streaming","invalidating"],[xd()]:[mp,"representing","item-events","toolbar-button-events","tooltipping"],[qe()]:["focusing",mp,"item-type-events"],[I()]:["focusing",mp,"item-type-events"],[Os()]:["item-type-events","tooltipping"],[Pc()]:["receiving","reflecting","tooltipping"]},Lr(ve(Nx))),al()),Fr("domModification")]),$i=o=>o.events,Cd=o=>o.dom.value,d1=(o,c)=>{if(c===void 0)throw new Error("Value.set was undefined");o.dom.value=c},gp=(o,c,u)=>{u.fold(()=>Ks(o,c),g=>{xt(g,c)||(wt(g,c),si(g))})},Mx=(o,c,u)=>{const g=Oe(c,u),b=Vo(o);return ft(b.slice(g.length),si),g},K0=(o,c,u,g)=>{const b=cs(o,c),y=g(u,b),S=((T,E,M)=>cs(T,E).map(P=>{if(M.exists(N=>!xt(N,P))){const N=M.map(ac).getOr("span"),V=vi(N);return wt(P,V),V}return P}))(o,c,b);return gp(o,y.element,S),y},Y0=(o,c)=>{const u=Dt(o),g=Dt(c),b=ce(g,u),y=((S,T)=>{const E={},M={};return nn(S,(P,N)=>!yo(c,N)||P!==c[N],rt(E),rt(M)),{t:E,f:M}})(o).t;return{toRemove:b,toSet:y}},$C=(o,c)=>{const u=c.filter(g=>ac(g)===o.tag&&!(b=>b.innerHtml.isSome()&&b.domChildren.length>0)(o)&&!(b=>yo(b.dom,FC))(g)).bind(g=>((b,y)=>{try{const S=((T,E)=>{const{class:M,style:P,...N}=(Ce=>pt(Ce.dom.attributes,(ke,Re)=>(ke[Re.name]=Re.value,ke),{}))(E),{toSet:V,toRemove:G}=Y0(T.attributes,N),Q=kg(E),{toSet:pe,toRemove:he}=Y0(T.styles,Q),xe=gi(E),ie=ce(xe,T.classes),ae=ce(T.classes,xe);return ft(G,Ce=>Xs(E,Ce)),yu(E,V),ua(E,ae),Pr(E,ie),ft(he,Ce=>or(E,Ce)),li(E,pe),T.innerHtml.fold(()=>{const Ce=T.domChildren;((ke,Re)=>{Mx(ke,Re,(Ye,vt)=>{const en=cs(ke,vt);return gp(ke,Ye,en),Ye})})(E,Ce)},Ce=>{cp(E,Ce)}),(()=>{const Ce=E,ke=T.value.getOrUndefined();ke!==Cd(Ce)&&d1(Ce,ke??"")})(),E})(b,y);return z.some(S)}catch{return z.none()}})(o,g)).getOrThunk(()=>(g=>{const b=vi(g.tag);yu(b,g.attributes),ua(b,g.classes),li(b,g.styles),g.innerHtml.each(S=>cp(b,S));const y=g.domChildren;return nr(b,y),g.value.each(S=>{d1(b,S)}),b})(o));return j0(u,o.uid),u},mm=o=>{const c=(u=>{const g=Gt(u,"behaviours").getOr({});return Mt(Dt(g),b=>{const y=g[b];return Vn(y)?[y.me]:[]})})(o);return((u,g)=>((b,y)=>{const S=Oe(y,E=>gc(E.name(),[Yt("config"),ht("state",fa)])),T=Ai("component.behaviours",ps(S),b.behaviours).fold(E=>{throw new Error(Yu(E)+`
Complete spec:
`+JSON.stringify(b,null,2))},In);return{list:y,data:ut(T,E=>{const M=E.map(P=>({config:P.config,state:P.state.init(P.config)}));return ve(M)})}})(u,g))(o,c)},HC=(o,c)=>{const u=()=>V,g=Go(Pk),b=Zl((G=>Ai("custom.definition",u1,G))(o)),y=mm(o),S=(G=>G.list)(y),T=(G=>G.data)(y),E=((G,Q,pe)=>{const he={...(xe=G).dom,uid:xe.uid,domChildren:Oe(xe.components,Ye=>Ye.element)};var xe;const ie=(Ye=>Ye.domModification.fold(()=>um({}),um))(G),ae={"alloy.base.modification":ie},Ce=Q.length>0?((Ye,vt,en,jt)=>{const cn={...vt};ft(en,pr=>{cn[pr.name()]=pr.exhibit(Ye,jt)});const Dn=Z0(cn,(pr,fi)=>({name:pr,modification:fi})),fo=pr=>$e(pr,(fi,Zi)=>({...Zi.modification,...fi}),{}),jo=$e(Dn.classes,(pr,fi)=>fi.modification.concat(pr),[]),ls=fo(Dn.attributes),As=fo(Dn.styles);return um({classes:jo,attributes:ls,styles:As})})(pe,ae,Q,he):ie;return ke=he,Re=Ce,{...ke,attributes:{...ke.attributes,...Re.attributes},styles:{...ke.styles,...Re.styles},classes:ke.classes.concat(Re.classes)};var ke,Re})(b,S,T),M=$C(E,c),P=((G,Q,pe)=>{const he={"alloy.base.behaviour":$i(G)};return((xe,ie,ae,Ce)=>{const ke=((Re,Ye,vt)=>{const en={...vt,...q0(Ye,Re)};return Z0(en,Rx)})(xe,ae,Ce);return Mv(ke,ie)})(pe,G.eventOrder,Q,he).getOrDie()})(b,S,T),N=Go(b.components),V={uid:o.uid,getSystem:g.get,config:G=>{const Q=T;return(kn(Q[G.name()])?Q[G.name()]:()=>{throw new Error("Could not find "+G.name()+" in "+JSON.stringify(o,null,2))})()},hasConfigured:G=>kn(T[G.name()]),spec:o,readState:G=>T[G]().map(Q=>Q.state.readState()).getOr("not enabled"),getApis:()=>b.apis,connect:G=>{g.set(G)},disconnect:()=>{g.set(ya(u))},element:M,syncComponents:()=>{const G=Vo(M),Q=Mt(G,pe=>g.get().getByDom(pe).fold(()=>[],Ne));N.set(Q)},components:N.get,events:P};return V},tc=o=>{const c=nu(o);return m1({element:c})},m1=o=>{const c=Ml("external.component",rl([Yt("element"),Fr("uid")]),o),u=Go(ya()),g=c.uid.getOrThunk(()=>Dv("external"));j0(c.element,g);const b={uid:g,getSystem:u.get,config:z.none,hasConfigured:Qe,connect:y=>{u.set(y)},disconnect:()=>{u.set(ya(()=>b))},getApis:()=>({}),element:c.element,spec:o,readState:ve("No state"),syncComponents:Ue,components:ve([]),events:{}};return PC(b)},rD=Dv,ih=(o,c)=>on(o).getOrThunk(()=>((u,g)=>{const{events:b,...y}=IC(u),S=((E,M)=>{const P=Gt(E,"components").getOr([]);return M.fold(()=>Oe(P,Tu),N=>Oe(P,(V,G)=>ih(V,cs(N,G))))})(y,g),T={...y,events:{...W0,...b},components:S};return vr.value(HC(T,g))})((u=>yo(u,"uid"))(o)?o:{uid:rD(""),...o},c).getOrDie()),Tu=o=>ih(o,z.none()),Wm=PC;var Nx,Cf=(o,c,u,g,b)=>o(u,g)?z.some(u):kn(b)&&b(u)?z.none():c(u,g,b);const lu=(o,c,u)=>{let g=o.dom;const b=kn(u)?u:Qe;for(;g.parentNode;){g=g.parentNode;const y=yt(g);if(c(y))return z.some(y);if(b(y))break}return z.none()},Ln=(o,c,u)=>Cf((g,b)=>b(g),lu,o,c,u),Nv=(o,c)=>Y(o.dom.childNodes,u=>c(yt(u))).map(yt),xl=(o,c,u)=>Ln(o,c,u).isSome(),rb=(o,c,u)=>lu(o,g=>Fs(g,c),u),Bx=(o,c)=>((u,g)=>{const b=u.dom;return b.parentNode?Nv(yt(b.parentNode),y=>!xt(u,y)&&Fs(y,c)):z.none()})(o),Lk=(o,c)=>Nv(o,u=>Fs(u,c)),qs=(o,c)=>fn(c,o),gm=(o,c,u)=>Cf((g,b)=>Fs(g,b),rb,o,c,u),g1="aria-controls",Bv=()=>{const o=Do(g1);return{id:o,link:c=>{ws(c,g1,o)},unlink:c=>{Xs(c,g1)}}},Sf=(o,c)=>xl(c,u=>xt(u,o.element),Qe)||((u,g)=>(b=>Ln(b,y=>{if(!Pe(y))return!1;const S=Ei(y,"id");return S!==void 0&&S.indexOf(g1)>-1}).bind(y=>{const S=Ei(y,"id"),T=La(y);return qs(T,`[${g1}="${S}"]`)}))(g).exists(b=>Sf(u,b)))(o,c),uu=(o,c,u,g,b,y,S,T=!1)=>({x:o,y:c,bubble:u,direction:g,placement:b,restriction:y,label:`${S}-${b}`,alwaysFit:T}),Sd=Zr([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),zC=Sd.southeast,Cc=Sd.southwest,Bg=Sd.northeast,Hi=Sd.northwest,VC=Sd.south,kd=Sd.north,Iv=Sd.east,kf=Sd.west,Yl=(o,c)=>De(["left","right","top","bottom"],u=>Gt(c,u).map(g=>((b,y)=>{switch(y){case 1:return b.x;case 0:return b.x+b.width;case 2:return b.y;case 3:return b.y+b.height}})(o,g))),f1="layout",rA=o=>o.x,$k=(o,c)=>o.x+o.width/2-c.width/2,Tf=(o,c)=>o.x+o.width-c.width,Ig=(o,c)=>o.y-c.height,Lu=o=>o.y+o.height,Fv=(o,c)=>o.y+o.height/2-c.height/2,Sc=(o,c,u)=>uu(rA(o),Lu(o),u.southeast(),zC(),"southeast",Yl(o,{left:1,top:3}),f1),wl=(o,c,u)=>uu(Tf(o,c),Lu(o),u.southwest(),Cc(),"southwest",Yl(o,{right:0,top:3}),f1),Cl=(o,c,u)=>uu(rA(o),Ig(o,c),u.northeast(),Bg(),"northeast",Yl(o,{left:1,bottom:2}),f1),Ac=(o,c,u)=>uu(Tf(o,c),Ig(o,c),u.northwest(),Hi(),"northwest",Yl(o,{right:0,bottom:2}),f1),Hc=(o,c,u)=>uu($k(o,c),Ig(o,c),u.north(),kd(),"north",Yl(o,{bottom:2}),f1),kc=(o,c,u)=>uu($k(o,c),Lu(o),u.south(),VC(),"south",Yl(o,{top:3}),f1),fp=(o,c,u)=>uu((g=>g.x+g.width)(o),Fv(o,c),u.east(),Iv(),"east",Yl(o,{left:0}),f1),Ef=(o,c,u)=>uu(((g,b)=>g.x-b.width)(o,c),Fv(o,c),u.west(),kf(),"west",Yl(o,{right:1}),f1),p1=()=>[Sc,wl,Cl,Ac,kc,Hc,fp,Ef],X0=()=>[wl,Sc,Ac,Cl,kc,Hc,fp,Ef],aA=()=>[Cl,Ac,Sc,wl,Hc,kc],UC=()=>[Ac,Cl,wl,Sc,Hc,kc],J0=()=>[Sc,wl,Cl,Ac,kc,Hc],Q0=()=>[wl,Sc,Ac,Cl,kc,Hc];var iA=Object.freeze({__proto__:null,events:o=>Ja([tn(Pc(),(c,u)=>{const g=o.channels,b=Dt(g),y=u,S=((T,E)=>E.universal?T:Bt(T,M=>Le(E.channels,M)))(b,y);ft(S,T=>{const E=g[T],M=E.schema,P=Ml("channel["+T+`] data
Receiver: `+nb(c.element),M,y.data);E.onReceive(c,P)})})])}),Hk=[wo("channels",wv(vr.value,rl([up("onReceive"),ht("schema",al())])))];const Td=Ra({fields:Hk,name:"receiving",active:iA});var cA=Object.freeze({__proto__:null,exhibit:(o,c)=>um({classes:[],styles:c.useFixed()?{}:{position:"relative"}})});const sd=(o,c=!1)=>o.dom.focus({preventScroll:c}),ey=o=>o.dom.blur(),ab=o=>{const c=La(o).dom;return o.dom===c.activeElement},h1=(o=dc())=>z.from(o.dom.activeElement).map(yt),du=o=>h1(La(o)).filter(c=>o.dom.contains(c.dom)),b1=(o,c)=>{const u=La(c),g=h1(u).bind(y=>{const S=T=>xt(y,T);return S(c)?z.some(c):((T,E)=>{const M=P=>{for(let N=0;N<P.childNodes.length;N++){const V=yt(P.childNodes[N]);if(E(V))return z.some(V);const G=M(P.childNodes[N]);if(G.isSome())return G}return z.none()};return M(T.dom)})(c,S)}),b=o(c);return g.each(y=>{h1(u).filter(S=>xt(S,y)).fold(()=>{sd(y)},Ue)}),b},pp=Zr([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ix=(o,c,u,g,b,y)=>{const S=c.rect,T=S.x-u,E=S.y-g,M=b-(T+S.width),P=y-(E+S.height),N=z.some(T),V=z.some(E),G=z.some(M),Q=z.some(P),pe=z.none();return c.direction.fold(()=>Lc(o,N,V,pe,pe),()=>Lc(o,pe,V,G,pe),()=>Lc(o,N,pe,pe,Q),()=>Lc(o,pe,pe,G,Q),()=>Lc(o,N,V,pe,pe),()=>Lc(o,N,pe,pe,Q),()=>Lc(o,N,V,pe,pe),()=>Lc(o,pe,V,G,pe))},zk=(o,c)=>o.fold(()=>{const u=c.rect;return Lc("absolute",z.some(u.x),z.some(u.y),z.none(),z.none())},(u,g,b,y)=>Ix("absolute",c,u,g,b,y),(u,g,b,y)=>Ix("fixed",c,u,g,b,y)),WC=(o,c)=>{const u=re(Bc,c),g=o.fold(u,u,()=>{const S=Fi();return Bc(c).translate(-S.left,-S.top)}),b=Pt(c),y=qa(c);return tr(g.left,g.top,b,y)},lA=(o,c)=>c.fold(()=>o.fold(Ic,Ic,tr),u=>o.fold(ve(u),ve(u),()=>{const g=v1(o,u.x,u.y);return tr(g.left,g.top,u.width,u.height)})),v1=(o,c,u)=>{const g=Wr(c,u);return o.fold(ve(g),ve(g),()=>{const b=Fi();return g.translate(-b.left,-b.top)})};pp.none;const aD=pp.relative,ty=pp.fixed,y1="data-alloy-placement",Pv=o=>Es(o,y1),Fx=Zr([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),jC=(o,c,u,g)=>{const b=o.bubble,y=b.offset,S=((Ce,ke,Re)=>{const Ye=(Dn,fo)=>ke[Dn].map(jo=>{const ls=Dn==="top"||Dn==="bottom",As=ls?Re.top:Re.left,pr=(Dn==="left"||Dn==="top"?Math.max:Math.min)(jo,fo)+As;return ls?Ng(pr,Ce.y,Ce.bottom):Ng(pr,Ce.x,Ce.right)}).getOr(fo),vt=Ye("left",Ce.x),en=Ye("top",Ce.y),jt=Ye("right",Ce.right),cn=Ye("bottom",Ce.bottom);return tr(vt,en,jt-vt,cn-en)})(g,o.restriction,y),T=o.x+y.left,E=o.y+y.top,M=tr(T,E,c,u),{originInBounds:P,sizeInBounds:N,visibleW:V,visibleH:G}=((Ce,ke)=>{const{x:Re,y:Ye,right:vt,bottom:en}=ke,{x:jt,y:cn,right:Dn,bottom:fo,width:jo,height:ls}=Ce;return{originInBounds:jt>=Re&&jt<=vt&&cn>=Ye&&cn<=en,sizeInBounds:Dn<=vt&&Dn>=Re&&fo<=en&&fo>=Ye,visibleW:Math.min(jo,jt>=Re?vt-jt:Dn-Re),visibleH:Math.min(ls,cn>=Ye?en-cn:fo-Ye)}})(M,S),Q=P&&N,pe=Q?M:((Ce,ke)=>{const{x:Re,y:Ye,right:vt,bottom:en}=ke,{x:jt,y:cn,width:Dn,height:fo}=Ce,jo=Math.max(Re,vt-Dn),ls=Math.max(Ye,en-fo),As=Ng(jt,Re,jo),pr=Ng(cn,Ye,ls),fi=Math.min(As+Dn,vt)-As,Zi=Math.min(pr+fo,en)-pr;return tr(As,pr,fi,Zi)})(M,S),he=pe.width>0&&pe.height>0,{maxWidth:xe,maxHeight:ie}=((Ce,ke,Re)=>{const Ye=ve(ke.bottom-Re.y),vt=ve(Re.bottom-ke.y),en=((fo,jo,ls,As)=>fo.fold(jo,jo,As,As,jo,As,ls,ls))(Ce,vt,vt,Ye),jt=ve(ke.right-Re.x),cn=ve(Re.right-ke.x);return{maxWidth:((fo,jo,ls,As)=>fo.fold(jo,As,jo,As,ls,ls,jo,As))(Ce,cn,cn,jt),maxHeight:en}})(o.direction,pe,g),ae={rect:pe,maxHeight:ie,maxWidth:xe,direction:o.direction,placement:o.placement,classes:{on:b.classesOn,off:b.classesOff},layout:o.label,testY:E};return Q||o.alwaysFit?Fx.fit(ae):Fx.nofit(ae,V,G,he)},Vk=Be,Ed=(o,c,u)=>((g,b,y,S)=>we(g,b,y,S,!1))(o,c,Vk,u),Eu=(o,c,u)=>((g,b,y,S)=>we(g,b,y,S,!0))(o,c,Vk,u),uA=Bm,Uk=["top","bottom","right","left"],ib="data-alloy-transition-timer",iD=(o,c,u,g,b,y)=>{const S=((T,E,M)=>M.exists(P=>{const N=T.mode;return N==="all"||P[N]!==E[N]}))(g,b,y);if(S||((T,E)=>((M,P)=>Pn(P,N=>Ss(M,N)))(T,E.classes))(o,g)){fs(o,"position",u.position);const T=WC(c,o),E=zk(c,{...b,rect:T}),M=De(Uk,P=>E[P]);((P,N)=>{const V=G=>parseFloat(G).toFixed(3);return Mn(N,(G,Q)=>!((pe,he,xe=qt)=>ns(pe,he,xe).getOr(pe.isNone()&&he.isNone()))(P[Q].map(V),G.map(V))).isSome()})(u,M)&&(Ld(o,M),S&&((P,N)=>{ua(P,N.classes),Es(P,ib).each(V=>{clearTimeout(parseInt(V,10)),Xs(P,ib)}),((V,G)=>{const Q=Hd(),pe=Hd();let he;const xe=ke=>{var Re;const Ye=(Re=ke.raw.pseudoElement)!==null&&Re!==void 0?Re:"";return xt(ke.target,V)&&Bi(Ye)&&Le(Uk,ke.raw.propertyName)},ie=ke=>{if(es(ke)||xe(ke)){Q.clear(),pe.clear();const Re=ke==null?void 0:ke.raw.type;(es(Re)||Re===ll())&&(clearTimeout(he),Xs(V,ib),Pr(V,G.classes))}},ae=Ed(V,z0(),ke=>{xe(ke)&&(ae.unbind(),Q.set(Ed(V,ll(),ie)),pe.set(Ed(V,H0(),ie)))}),Ce=(ke=>{const Re=jt=>{const cn=Wa(ke,jt).split(/\s*,\s*/);return Bt(cn,bi)},Ye=jt=>{if(wn(jt)&&/^[\d.]+/.test(jt)){const cn=parseFloat(jt);return hi(jt,"ms")?cn:1e3*cn}return 0},vt=Re("transition-delay"),en=Re("transition-duration");return pt(en,(jt,cn,Dn)=>{const fo=Ye(vt[Dn])+Ye(cn);return Math.max(jt,fo)},0)})(V);requestAnimationFrame(()=>{he=setTimeout(ie,Ce+17),ws(V,ib,he)})})(P,N)})(o,g),wu(o))}else Pr(o,g.classes)},_u=(o,c)=>{((u,g)=>{const b=Ku.max(u,g,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);fs(u,"max-height",b+"px")})(o,Math.floor(c))},Fg=ve((o,c)=>{_u(o,c),li(o,{"overflow-x":"hidden","overflow-y":"auto"})}),x1=ve((o,c)=>{_u(o,c)}),cb=(o,c,u)=>o[c]===void 0?u:o[c],cD=(o,c,u,g)=>{const b=((y,S,T,E)=>{or(S,"max-height"),or(S,"max-width");const M={width:Pt(P=S),height:qa(P)};var P;return((N,V,G,Q,pe,he)=>{const xe=Q.width,ie=Q.height,ae=(Ce,ke,Re,Ye,vt)=>{const en=Ce(G,Q,pe,N,he),jt=jC(en,xe,ie,he);return jt.fold(ve(jt),(cn,Dn,fo,jo)=>(vt===jo?fo>Ye||Dn>Re:!vt&&jo)?jt:Fx.nofit(ke,Re,Ye,vt))};return pt(V,(Ce,ke)=>{const Re=re(ae,ke);return Ce.fold(ve(Ce),Re)},Fx.nofit({rect:G,maxHeight:Q.height,maxWidth:Q.width,direction:zC(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:G.y},-1,-1,!1)).fold(In,In)})(S,E.preference,y,M,T,E.bounds)})(o,c,u,g);return((y,S,T)=>{const E=zk(T.origin,S);T.transition.each(M=>{iD(y,T.origin,E,M,S,T.lastPlacement)}),ag(y,E)})(c,b,g),((y,S)=>{((T,E)=>{ws(T,y1,E)})(y,S.placement)})(c,b),((y,S)=>{const T=S.classes;Pr(y,T.off),ua(y,T.on)})(c,b),((y,S,T)=>{(0,T.maxHeightFunction)(y,S.maxHeight)})(c,b,g),((y,S,T)=>{(0,T.maxWidthFunction)(y,S.maxWidth)})(c,b,g),{layout:b.layout,placement:b.placement}},Px=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],jm=(o,c,u,g=1)=>{const b=o*g,y=c*g,S=E=>Gt(u,E).getOr([]),T=(E,M,P)=>{const N=ce(Px,P);return{offset:Wr(E,M),classesOn:Mt(P,S),classesOff:Mt(N,S)}};return{southeast:()=>T(-o,c,["top","alignLeft"]),southwest:()=>T(o,c,["top","alignRight"]),south:()=>T(-o/2,c,["top","alignCentre"]),northeast:()=>T(-o,-c,["bottom","alignLeft"]),northwest:()=>T(o,-c,["bottom","alignRight"]),north:()=>T(-o/2,-c,["bottom","alignCentre"]),east:()=>T(o,-c/2,["valignCentre","left"]),west:()=>T(-o,-c/2,["valignCentre","right"]),insetNortheast:()=>T(b,y,["top","alignLeft","inset"]),insetNorthwest:()=>T(-b,y,["top","alignRight","inset"]),insetNorth:()=>T(-b/2,y,["top","alignCentre","inset"]),insetSoutheast:()=>T(b,-y,["bottom","alignLeft","inset"]),insetSouthwest:()=>T(-b,-y,["bottom","alignRight","inset"]),insetSouth:()=>T(-b/2,-y,["bottom","alignCentre","inset"]),insetEast:()=>T(-b,-y/2,["valignCentre","right","inset"]),insetWest:()=>T(b,-y/2,["valignCentre","left","inset"])}},_f=()=>jm(0,0,{}),Lx=In,Pg=(o,c)=>u=>ch(u)==="rtl"?c:o,ch=o=>Wa(o,"direction")==="rtl"?"rtl":"ltr";var lh;(function(o){o.TopToBottom="toptobottom",o.BottomToTop="bottomtotop"})(lh||(lh={}));const Sl="data-alloy-vertical-dir",Wk=o=>xl(o,c=>Pe(c)&&Ei(c,"data-alloy-vertical-dir")===lh.BottomToTop),Nl=()=>gc("layouts",[Yt("onLtr"),Yt("onRtl"),Fr("onBottomLtr"),Fr("onBottomRtl")]),ZC=(o,c,u,g,b,y,S)=>{const T=S.map(Wk).getOr(!1),E=c.layouts.map(V=>V.onLtr(o)),M=c.layouts.map(V=>V.onRtl(o)),P=T?c.layouts.bind(V=>V.onBottomLtr.map(G=>G(o))).or(E).getOr(b):E.getOr(u),N=T?c.layouts.bind(V=>V.onBottomRtl.map(G=>G(o))).or(M).getOr(y):M.getOr(g);return Pg(P,N)(o)};var GC=[Yt("hotspot"),Fr("bubble"),ht("overrides",{}),Nl(),$a("placement",(o,c,u)=>{const g=c.hotspot,b=WC(u,g.element),y=ZC(o.element,c,J0(),Q0(),aA(),UC(),z.some(c.hotspot.element));return z.some(Lx({anchorBox:b,bubble:c.bubble.getOr(_f()),overrides:c.overrides,layouts:y}))})],Lv=[Yt("x"),Yt("y"),ht("height",0),ht("width",0),ht("bubble",_f()),ht("overrides",{}),Nl(),$a("placement",(o,c,u)=>{const g=v1(u,c.x,c.y),b=tr(g.left,g.top,c.width,c.height),y=ZC(o.element,c,p1(),X0(),p1(),X0(),z.none());return z.some(Lx({anchorBox:b,bubble:c.bubble,overrides:c.overrides,layouts:y}))})];const uh=Zr([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),dh=o=>o.fold(In,(c,u,g)=>c.translate(-u,-g)),Lg=o=>o.fold(In,In),jk=o=>pt(o,(c,u)=>c.translate(u.left,u.top),Wr(0,0)),ny=o=>{const c=Oe(o,Lg);return jk(c)},oy=uh.screen,lb=uh.absolute,$x=(o,c,u)=>{const g=Ge(o.element),b=Fi(g),y=((S,T,E)=>{const M=Xn(E.root).dom;return z.from(M.frameElement).map(yt).filter(P=>{const N=Ge(P),V=Ge(S.element);return xt(N,V)}).map(ol)})(o,0,u).getOr(b);return lb(y,b.left,b.top)},Ar=(o,c,u,g)=>{const b=oy(Wr(o,c));return z.some(((y,S,T)=>({point:y,width:S,height:T}))(b,u,g))},rd=(o,c,u,g,b)=>o.map(y=>{const S=[c,y.point],T=(E=()=>ny(S),M=()=>ny(S),P=()=>(ae=>{const Ce=Oe(ae,dh);return jk(Ce)})(S),g.fold(E,M,P));var E,M,P;const N=(pe=T.left,he=T.top,xe=y.width,ie=y.height,{x:pe,y:he,width:xe,height:ie}),V=u.showAbove?aA():J0(),G=u.showAbove?UC():Q0(),Q=ZC(b,u,V,G,V,G,z.none());var pe,he,xe,ie;return Lx({anchorBox:N,bubble:u.bubble.getOr(_f()),overrides:u.overrides,layouts:Q})});var w1=[Yt("node"),Yt("root"),Fr("bubble"),Nl(),ht("overrides",{}),ht("showAbove",!1),$a("placement",(o,c,u)=>{const g=$x(o,0,c);return c.node.filter(Ua).bind(b=>{const y=b.dom.getBoundingClientRect(),S=Ar(y.left,y.top,y.width,y.height),T=c.node.getOr(o.element);return rd(S,g,c,u,T)})})];const ub=(o,c,u,g)=>({start:o,soffset:c,finish:u,foffset:g}),xi=Zr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),C1=(xi.before,xi.on,xi.after,o=>o.fold(In,In,In)),hp=Zr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$v={domRange:hp.domRange,relative:hp.relative,exact:hp.exact,exactFromRange:o=>hp.exact(o.start,o.soffset,o.finish,o.foffset),getWin:o=>{const c=(u=>u.match({domRange:g=>yt(g.startContainer),relative:(g,b)=>C1(g),exact:(g,b,y,S)=>g}))(o);return Xn(c)},range:ub},lD=(o,c,u)=>{const g=o.document.createRange();var b;return b=g,c.fold(y=>{b.setStartBefore(y.dom)},(y,S)=>{b.setStart(y.dom,S)},y=>{b.setStartAfter(y.dom)}),((y,S)=>{S.fold(T=>{y.setEndBefore(T.dom)},(T,E)=>{y.setEnd(T.dom,E)},T=>{y.setEndAfter(T.dom)})})(g,u),g},Zk=(o,c,u,g,b)=>{const y=o.document.createRange();return y.setStart(c.dom,u),y.setEnd(g.dom,b),y},wi=o=>({left:o.left,top:o.top,right:o.right,bottom:o.bottom,width:o.width,height:o.height}),db=Zr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Gk=(o,c,u)=>c(yt(u.startContainer),u.startOffset,yt(u.endContainer),u.endOffset),dA=(o,c)=>((u,g)=>{const b=((y,S)=>S.match({domRange:T=>({ltr:ve(T),rtl:z.none}),relative:(T,E)=>({ltr:Nn(()=>lD(y,T,E)),rtl:Nn(()=>z.some(lD(y,E,T)))}),exact:(T,E,M,P)=>({ltr:Nn(()=>Zk(y,T,E,M,P)),rtl:Nn(()=>z.some(Zk(y,M,P,T,E)))})}))(u,g);return((y,S)=>{const T=S.ltr();return T.collapsed?S.rtl().filter(E=>E.collapsed===!1).map(E=>db.rtl(yt(E.endContainer),E.endOffset,yt(E.startContainer),E.startOffset)).getOrThunk(()=>Gk(0,db.ltr,T)):Gk(0,db.ltr,T)})(0,b)})(o,c).match({ltr:(u,g,b,y)=>{const S=o.document.createRange();return S.setStart(u.dom,g),S.setEnd(b.dom,y),S},rtl:(u,g,b,y)=>{const S=o.document.createRange();return S.setStart(b.dom,y),S.setEnd(u.dom,g),S}});db.ltr,db.rtl;const S1=(o,c,u)=>Bt(((g,b)=>{const y=kn(b)?b:Qe;let S=g.dom;const T=[];for(;S.parentNode!==null&&S.parentNode!==void 0;){const E=S.parentNode,M=yt(E);if(T.push(M),y(M)===!0)break;S=E}return T})(o,u),c),Oc=(o,c)=>((u,g)=>{const b=g===void 0?document:g.dom;return ka(b)?[]:Oe(b.querySelectorAll(u),yt)})(c,o),Hx=o=>{if(o.rangeCount>0){const c=o.getRangeAt(0),u=o.getRangeAt(o.rangeCount-1);return z.some(ub(yt(c.startContainer),c.startOffset,yt(u.endContainer),u.endOffset))}return z.none()},mb=o=>{if(o.anchorNode===null||o.focusNode===null)return Hx(o);{const c=yt(o.anchorNode),u=yt(o.focusNode);return((g,b,y,S)=>{const T=((M,P,N,V)=>{const G=Ge(M).dom.createRange();return G.setStart(M.dom,P),G.setEnd(N.dom,V),G})(g,b,y,S),E=xt(g,y)&&b===S;return T.collapsed&&!E})(c,o.anchorOffset,u,o.focusOffset)?z.some(ub(c,o.anchorOffset,u,o.focusOffset)):Hx(o)}},Ao=(o,c)=>(u=>{const g=u.getClientRects(),b=g.length>0?g[0]:u.getBoundingClientRect();return b.width>0||b.height>0?z.some(b).map(wi):z.none()})(dA(o,c)),qk=((o,c)=>{const u=g=>o(g)?z.from(g.dom.nodeValue):z.none();return{get:g=>{if(!o(g))throw new Error("Can only get text value of a text node");return u(g).getOr("")},getOption:u,set:(g,b)=>{if(!o(g))throw new Error("Can only set raw text value of a text node");g.dom.nodeValue=b}}})(Rt),sy=(o,c)=>({element:o,offset:c}),mA=(o,c)=>Rt(o)?sy(o,c):((u,g)=>{const b=Vo(u);if(b.length===0)return sy(u,g);if(g<b.length)return sy(b[g],0);{const y=b[b.length-1],S=Rt(y)?(T=>qk.get(T))(y).length:Vo(y).length;return sy(y,S)}})(o,c),zx=o=>o.foffset!==void 0,Kk=(o,c)=>c.getSelection.getOrThunk(()=>()=>(u=>(g=>z.from(g.getSelection()))(u).filter(g=>g.rangeCount>0).bind(mb))(o))().map(u=>{if(zx(u)){const g=mA(u.start,u.soffset),b=mA(u.finish,u.foffset);return $v.range(g.element,g.offset,b.element,b.offset)}return u});var qC=[Fr("getSelection"),Yt("root"),Fr("bubble"),Nl(),ht("overrides",{}),ht("showAbove",!1),$a("placement",(o,c,u)=>{const g=Xn(c.root).dom,b=$x(o,0,c),y=Kk(g,c).bind(T=>{if(zx(T))return((M,P)=>(N=>{const V=N.getBoundingClientRect();return V.width>0||V.height>0?z.some(V).map(wi):z.none()})(dA(M,P)))(g,$v.exactFromRange(T)).orThunk(()=>{const M=nu("\uFEFF");wt(T.start,M);const P=Ao(g,$v.exact(M,0,M,1));return si(M),P}).bind(M=>Ar(M.left,M.top,M.width,M.height));{const E=ut(T,P=>P.dom.getBoundingClientRect()),M={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return Ar(M.left,M.top,M.right-M.left,M.bottom-M.top)}}),S=Kk(g,c).bind(T=>zx(T)?Pe(T.start)?z.some(T.start):Eo(T.start):z.some(T.firstCell)).getOr(o.element);return rd(y,b,c,u,S)})];const Hv="link-layout",$g=o=>o.x+o.width,uD=(o,c)=>o.x-c.width,bp=(o,c)=>o.y-c.height+o.height,gA=o=>o.y,Vx=(o,c,u)=>uu($g(o),gA(o),u.southeast(),zC(),"southeast",Yl(o,{left:0,top:2}),Hv),Hg=(o,c,u)=>uu(uD(o,c),gA(o),u.southwest(),Cc(),"southwest",Yl(o,{right:1,top:2}),Hv),fA=(o,c,u)=>uu($g(o),bp(o,c),u.northeast(),Bg(),"northeast",Yl(o,{left:0,bottom:3}),Hv),Ux=(o,c,u)=>uu(uD(o,c),bp(o,c),u.northwest(),Hi(),"northwest",Yl(o,{right:1,bottom:3}),Hv),Wx=()=>[Vx,Hg,fA,Ux],pA=()=>[Hg,Vx,Ux,fA];var dD=[Yt("item"),Nl(),ht("overrides",{}),$a("placement",(o,c,u)=>{const g=WC(u,c.item.element),b=ZC(o.element,c,Wx(),pA(),Wx(),pA(),z.none());return z.some(Lx({anchorBox:g,bubble:_f(),overrides:c.overrides,layouts:b}))})],KC=oa("type",{selection:qC,node:w1,hotspot:GC,submenu:dD,makeshift:Lv});const YC=[ql("classes",Fc),va("mode","all",["all","layout","placement"])],hA=[ht("useFixed",Qe),Fr("getBounds")],bA=[wo("anchor",KC),gc("transition",YC)],vA=(o,c,u,g,b,y)=>{const S=Ml("placement.info",ps(bA),b),T=S.anchor,E=g.element,M=u.get(g.uid);b1(()=>{fs(E,"position","fixed");const P=ui(E,"visibility");fs(E,"visibility","hidden");const N=c.useFixed()?(()=>{const V=document.documentElement;return ty(0,0,V.clientWidth,V.clientHeight)})():(V=>{const G=ol(V.element),Q=V.element.dom.getBoundingClientRect();return aD(G.left,G.top,Q.width,Q.height)})(o);T.placement(o,T,N).each(V=>{const G=y.orThunk(()=>c.getBounds.map(qn)),Q=((pe,he,xe,ie,ae,Ce)=>((ke,Re,Ye,vt,en,jt,cn,Dn)=>{const fo=cb(cn,"maxHeightFunction",Fg()),jo=cb(cn,"maxWidthFunction",Ue),ls=ke.anchorBox,As=ke.origin,pr={bounds:lA(As,jt),origin:As,preference:vt,maxHeightFunction:fo,maxWidthFunction:jo,lastPlacement:en,transition:Dn};return cD(ls,Re,Ye,pr)})(((ke,Re)=>((Ye,vt)=>({anchorBox:Ye,origin:vt}))(ke,Re))(he.anchorBox,pe),ie.element,he.bubble,he.layouts,ae,xe,he.overrides,Ce))(N,V,G,g,M,S.transition);u.set(g.uid,Q)}),P.fold(()=>{or(E,"visibility")},V=>{fs(E,"visibility",V)}),ui(E,"left").isNone()&&ui(E,"top").isNone()&&ui(E,"right").isNone()&&ui(E,"bottom").isNone()&&Us(ui(E,"position"),"fixed")&&or(E,"position")},E)};var mh=Object.freeze({__proto__:null,position:(o,c,u,g,b)=>{const y=z.none();vA(o,c,u,g,b,y)},positionWithinBounds:vA,getMode:(o,c,u)=>c.useFixed()?"fixed":"absolute",reset:(o,c,u,g)=>{const b=g.element;ft(["position","left","right","top","bottom"],y=>or(b,y)),(y=>{Xs(y,y1)})(b),u.clear(g.uid)}});const $u=Ra({fields:hA,name:"positioning",active:cA,apis:mh,state:Object.freeze({__proto__:null,init:()=>{let o={};return wd({readState:()=>o,clear:c=>{Vn(c)?delete o[c]:o={}},set:(c,u)=>{o[c]=u},get:c=>Gt(o,c)})}})}),gh=o=>o.getSystem().isConnected(),k1=o=>{$s(o,xd());const c=o.components();ft(c,k1)},ry=o=>{const c=o.components();ft(c,ry),$s(o,Vm())},jx=(o,c)=>{o.getSystem().addToWorld(c),Ua(o.element)&&ry(c)},Zx=o=>{k1(o),o.getSystem().removeFromWorld(o)},Gx=(o,c)=>{Ks(o.element,c.element)},zv=(o,c)=>{_d(o,c,Ks)},_d=(o,c,u)=>{o.getSystem().addToWorld(c),u(o.element,c.element),Ua(o.element)&&ry(c),o.syncComponents()},yA=o=>{k1(o),si(o.element),o.getSystem().removeFromWorld(o)},Zm=o=>{const c=xo(o.element).bind(u=>o.getSystem().getByDom(u).toOptional());yA(o),c.each(u=>{u.syncComponents()})},Yk=o=>{const c=o.components();ft(c,yA),Da(o.element),o.syncComponents()},fh=(o,c)=>{XC(o,c,Ks)},Af=(o,c)=>{XC(o,c,un)},XC=(o,c,u)=>{u(o,c.element);const g=Vo(c.element);ft(g,b=>{c.getByDom(b).each(ry)})},Xt=o=>{const c=Vo(o.element);ft(c,u=>{o.getByDom(u).each(k1)}),si(o.element)},zg=(o,c,u,g)=>{u.get().each(S=>{Yk(o)});const b=c.getAttachPoint(o);zv(b,o);const y=o.getSystem().build(g);return zv(o,y),u.set(y),y},T1=(o,c,u,g)=>{const b=zg(o,c,u,g);return c.onOpen(o,b),b},Xk=(o,c,u)=>{u.get().each(g=>{Yk(o),Zm(o),c.onClose(o,g),u.clear()})},ay=(o,c,u)=>u.isOpen(),fm=(o,c,u)=>{const g=c.getAttachPoint(o);fs(o.element,"position",$u.getMode(g)),((b,y,S,T)=>{ui(b.element,y).fold(()=>{Xs(b.element,S)},E=>{ws(b.element,S,E)}),fs(b.element,y,"hidden")})(o,"visibility",c.cloakVisibilityAttr)},JC=(o,c,u)=>{(g=>Qt(["top","left","right","bottom"],b=>ui(g,b).isSome()))(o.element)||or(o.element,"position"),((g,b,y)=>{Es(g.element,y).fold(()=>or(g.element,b),S=>fs(g.element,b,S))})(o,"visibility",c.cloakVisibilityAttr)};var xA=Object.freeze({__proto__:null,cloak:fm,decloak:JC,open:T1,openWhileCloaked:(o,c,u,g,b)=>{fm(o,c),T1(o,c,u,g),b(),JC(o,c)},close:Xk,isOpen:ay,isPartOf:(o,c,u,g)=>ay(0,0,u)&&u.get().exists(b=>c.isPartOf(o,b,g)),getState:(o,c,u)=>u.get(),setContent:(o,c,u,g)=>u.get().map(()=>zg(o,c,u,g))}),jd=Object.freeze({__proto__:null,events:(o,c)=>Ja([tn(Sv(),(u,g)=>{Xk(u,o,c)})])}),Vv=[Hr("onOpen"),Hr("onClose"),Yt("isPartOf"),Yt("getAttachPoint"),ht("cloakVisibilityAttr","data-precloak-visibility")],mD=Object.freeze({__proto__:null,init:()=>{const o=Br(),c=ve("not-implemented");return wd({readState:c,isOpen:o.isSet,clear:o.clear,set:o.set,get:o.get})}});const Jr=Ra({fields:Vv,name:"sandboxing",active:jd,apis:xA,state:mD}),E1=ve("dismiss.popups"),Uv=ve("reposition.popups"),Jk=ve("mouse.released"),wA=rl([ht("isExtraPart",Qe),gc("fireEventInstead",[ht("event",Fu())])]),Qk=o=>{const c=Ml("Dismissal",wA,o);return{[E1()]:{schema:rl([Yt("target")]),onReceive:(u,g)=>{Jr.isOpen(u)&&(Jr.isPartOf(u,g.target)||c.isExtraPart(u,g.target)||c.fireEventInstead.fold(()=>Jr.close(u),b=>$s(u,b.event)))}}}},gD=rl([gc("fireEventInstead",[ht("event",n1())]),mc("doReposition")]),iy=o=>{const c=Ml("Reposition",gD,o);return{[Uv()]:{onReceive:u=>{Jr.isOpen(u)&&c.fireEventInstead.fold(()=>c.doReposition(u),g=>$s(u,g.event))}}}},cy=(o,c,u)=>{c.store.manager.onLoad(o,c,u)},CA=(o,c,u)=>{c.store.manager.onUnload(o,c,u)};var SA=Object.freeze({__proto__:null,onLoad:cy,onUnload:CA,setValue:(o,c,u,g)=>{c.store.manager.setValue(o,c,u,g)},getValue:(o,c,u)=>c.store.manager.getValue(o,c,u),getState:(o,c,u)=>u}),fD=Object.freeze({__proto__:null,events:(o,c)=>{const u=o.resetOnDom?[Cs((g,b)=>{cy(g,o,c)}),ku((g,b)=>{CA(g,o,c)})]:[Yc(o,c,cy)];return Ja(u)}});const Di=()=>{const o=Go(null);return wd({set:o.set,get:o.get,isNotSet:()=>o.get()===null,clear:()=>{o.set(null)},readState:()=>({mode:"memory",value:o.get()})})},QC=()=>{const o=Go({}),c=Go({});return wd({readState:()=>({mode:"dataset",dataByValue:o.get(),dataByText:c.get()}),lookup:u=>Gt(o.get(),u).orThunk(()=>Gt(c.get(),u)),update:u=>{const g=o.get(),b=c.get(),y={},S={};ft(u,T=>{y[T.value]=T,Gt(T,"meta").each(E=>{Gt(E,"text").each(M=>{S[M]=T})})}),o.set({...g,...y}),c.set({...b,...S})},clear:()=>{o.set({}),c.set({})}})};var kA=Object.freeze({__proto__:null,memory:Di,dataset:QC,manual:()=>wd({readState:Ue}),init:o=>o.store.manager.state(o)});const eT=(o,c,u,g)=>{const b=c.store;u.update([g]),b.setValue(o,g),c.onSetValue(o,g)};var ly=[Fr("initialValue"),Yt("getFallbackEntry"),Yt("getDataKey"),Yt("setValue"),$a("manager",{setValue:eT,getValue:(o,c,u)=>{const g=c.store,b=g.getDataKey(o);return u.lookup(b).getOrThunk(()=>g.getFallbackEntry(b))},onLoad:(o,c,u)=>{c.store.initialValue.each(g=>{eT(o,c,u,g)})},onUnload:(o,c,u)=>{u.clear()},state:QC})],Hu=[Yt("getValue"),ht("setValue",Ue),Fr("initialValue"),$a("manager",{setValue:(o,c,u,g)=>{c.store.setValue(o,g),c.onSetValue(o,g)},getValue:(o,c,u)=>c.store.getValue(o),onLoad:(o,c,u)=>{c.store.initialValue.each(g=>{c.store.setValue(o,g)})},onUnload:Ue,state:fa.init})],dg=[Fr("initialValue"),$a("manager",{setValue:(o,c,u,g)=>{u.set(g),c.onSetValue(o,g)},getValue:(o,c,u)=>u.get(),onLoad:(o,c,u)=>{c.store.initialValue.each(g=>{u.isNotSet()&&u.set(g)})},onUnload:(o,c,u)=>{u.clear()},state:Di})],TA=[Ji("store",{mode:"memory"},oa("mode",{memory:dg,manual:Hu,dataset:ly})),Hr("onSetValue"),ht("resetOnDom",!1)];const go=Ra({fields:TA,name:"representing",active:fD,apis:SA,extra:{setValueFrom:(o,c)=>{const u=go.getValue(c);go.setValue(o,u)}},state:kA}),Bl=(o,c)=>rm(o,{},Oe(c,u=>{return g=u.name(),b="Cannot configure "+u.name()+" for "+o,Ya(g,g,{tag:"option",process:{}},df(y=>sg("The field: "+g+" is forbidden. "+b)));var g,b}).concat([vl("dump",In)])),tT=o=>o.dump,Il=(o,c)=>({...gn(c),...o.dump}),gb=Bl,ph=Il,EA="placeholder",zc=Zr([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),nT=o=>yo(o,"uiType"),mg=(o,c,u,g)=>((b,y,S,T)=>nT(S)&&S.uiType===EA?((E,M,P,N)=>E.exists(V=>V!==P.owner)?zc.single(!0,ve(P)):Gt(N,P.name).fold(()=>{throw new Error("Unknown placeholder component: "+P.name+`
Known: [`+Dt(N)+`]
Namespace: `+E.getOr("none")+`
Spec: `+JSON.stringify(P,null,2))},V=>V.replace()))(b,0,S,T):zc.single(!1,ve(S)))(o,0,u,g).fold((b,y)=>{const S=nT(u)?y(c,u.config,u.validated):y(c),T=Gt(S,"components").getOr([]),E=Mt(T,M=>mg(o,c,M,g));return[{...S,components:E}]},(b,y)=>{if(nT(u)){const S=y(c,u.config,u.validated);return u.validated.preprocess.getOr(In)(S)}return y(c)}),zi=zc.single,vp=zc.multiple,_1=ve(EA),Wv=Zr([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),qx=ht("factory",{sketch:In}),e2=ht("schema",[]),yp=Yt("name"),mu=Ya("pname","pname",Yh(o=>"<alloy."+Do(o.name)+">"),al()),hh=vl("schema",()=>[Fr("preprocess")]),Kx=ht("defaults",ve({})),t2=ht("overrides",ve({})),pD=ps([qx,e2,yp,mu,Kx,t2]),n2=ps([qx,e2,yp,Kx,t2]),oT=ps([qx,e2,yp,mu,Kx,t2]),sT=ps([qx,hh,yp,Yt("unit"),mu,Kx,t2]),o2=o=>o.fold(z.some,z.none,z.some,z.some),rT=o=>{const c=u=>u.name;return o.fold(c,c,c,c)},Yx=(o,c)=>u=>{const g=Ml("Converting part type",c,u);return o(g)},zu=Yx(Wv.required,pD),Vg=Yx(Wv.external,n2),Ug=Yx(Wv.optional,oT),Xl=Yx(Wv.group,sT),s2=ve("entirety");var fb=Object.freeze({__proto__:null,required:zu,external:Vg,optional:Ug,group:Xl,asNamedPart:o2,name:rT,asCommon:o=>o.fold(In,In,In,In),original:s2});const Xx=(o,c,u,g)=>ga(c.defaults(o,u,g),u,{uid:o.partUids[c.name]},c.overrides(o,u,g)),r2=(o,c)=>{const u={};return ft(c,g=>{o2(g).each(b=>{const y=aT(o,b.pname);u[b.name]=S=>{const T=Ml("Part: "+b.name+" in "+o,ps(b.schema),S);return{...y,config:S,validated:T}}})}),u},aT=(o,c)=>({uiType:_1(),owner:o,name:c}),uy=(o,c,u)=>({uiType:_1(),owner:o,name:c,config:u,validated:{}}),dy=o=>Mt(o,c=>c.fold(z.none,z.some,z.none,z.none).map(u=>Ir(u.name,u.schema.concat([od(s2())]))).toArray()),pb=o=>Oe(o,rT),iT=(o,c,u)=>((g,b,y)=>{const S={},T={};return ft(y,E=>{E.fold(M=>{S[M.pname]=zi(!0,(P,N,V)=>M.factory.sketch(Xx(P,M,N,V)))},M=>{const P=b.parts[M.name];T[M.name]=ve(M.factory.sketch(Xx(b,M,P[s2()]),P))},M=>{S[M.pname]=zi(!1,(P,N,V)=>M.factory.sketch(Xx(P,M,N,V)))},M=>{S[M.pname]=vp(!0,(P,N,V)=>{const G=P[M.name];return Oe(G,Q=>M.factory.sketch(ga(M.defaults(P,Q,V),Q,M.overrides(P,Q))))})})}),{internals:ve(S),externals:ve(T)}})(0,c,u),Jx=(o,c,u)=>((g,b,y,S)=>{const T=ut(S,(M,P)=>((N,V)=>{let G=!1;return{name:ve(N),required:()=>V.fold((Q,pe)=>Q,(Q,pe)=>Q),used:()=>G,replace:()=>{if(G)throw new Error("Trying to use the same placeholder more than once: "+N);return G=!0,V}}})(P,M)),E=((M,P,N,V)=>Mt(N,G=>mg(M,P,G,V)))(g,b,y,T);return Hn(T,M=>{if(M.used()===!1&&M.required())throw new Error("Placeholder: "+M.name()+` was not found in components list
Namespace: `+g.getOr("none")+`
Components: `+JSON.stringify(b.components,null,2))}),E})(z.some(o),c,c.components,u),lr=(o,c,u)=>{const g=c.partUids[u];return o.getSystem().getByUid(g).toOptional()},pc=(o,c,u)=>lr(o,c,u).getOrDie("Could not find part: "+u),Fl=(o,c,u)=>{const g={},b=c.partUids,y=o.getSystem();return ft(u,S=>{g[S]=ve(y.getByUid(b[S]))}),g},Fa=(o,c)=>{const u=o.getSystem();return ut(c.partUids,(g,b)=>ve(u.getByUid(g)))},Jl=o=>Dt(o.partUids),Jc=(o,c,u)=>{const g={},b=c.partUids,y=o.getSystem();return ft(u,S=>{g[S]=ve(y.getByUid(b[S]).getOrDie())}),g},my=(o,c)=>{const u=pb(c);return zm(Oe(u,g=>({key:g,value:o+"-"+g})))},gy=o=>Ya("partUids","partUids",Lr(c=>my(c.uid,o)),al());var cT=Object.freeze({__proto__:null,generate:r2,generateOne:uy,schemas:dy,names:pb,substitutes:iT,components:Jx,defaultUids:my,defaultUidsSchema:gy,getAllParts:Fa,getAllPartNames:Jl,getPart:lr,getPartOrDie:pc,getParts:Fl,getPartsOrDie:Jc});const lT=(o,c,u,g,b)=>{const y=((S,T)=>(S.length>0?[Ir("parts",S)]:[]).concat([Yt("uid"),ht("dom",{}),ht("components",[]),od("originalSpec"),ht("debug.sketcher",{})]).concat(T))(g,b);return Ml(o+" [SpecSchema]",rl(y.concat(c)),u)},Qx=(o,c,u,g,b)=>{const y=Ro(b),S=dy(u),T=gy(u),E=lT(o,c,y,S,[T]),M=iT(0,E,u);return g(E,Jx(o,E,M.internals()),y,M.externals())},Ro=o=>(c=>yo(c,"uid"))(o)?o:{...o,uid:Dv("uid")},fy=rl([Yt("name"),Yt("factory"),Yt("configFields"),ht("apis",{}),ht("extraApis",{})]),A1=rl([Yt("name"),Yt("factory"),Yt("configFields"),Yt("partFields"),ht("apis",{}),ht("extraApis",{})]),Gm=o=>{const c=Ml("Sketcher for "+o.name,fy,o),u=ut(c.apis,Rv),g=ut(c.extraApis,(b,y)=>Mg(b,y));return{name:c.name,configFields:c.configFields,sketch:b=>((y,S,T,E)=>{const M=Ro(E);return T(lT(y,S,M,[],[]),M)})(c.name,c.configFields,c.factory,b),...u,...g}},pm=o=>{const c=Ml("Sketcher for "+o.name,A1,o),u=r2(c.name,c.partFields),g=ut(c.apis,Rv),b=ut(c.extraApis,(y,S)=>Mg(y,S));return{name:c.name,partFields:c.partFields,configFields:c.configFields,sketch:y=>Qx(c.name,c.configFields,c.partFields,c.factory,y),parts:u,...g,...b}},Of=o=>vs("input")(o)&&Ei(o,"type")!=="radio"||vs("textarea")(o);var _A=Object.freeze({__proto__:null,getCurrent:(o,c,u)=>c.find(o)});const qm=[Yt("find")],Qr=Ra({fields:qm,name:"composing",apis:_A}),AA=["input","button","textarea","select"],Zd=(o,c,u)=>{(c.disabled()?ew:a2)(o,c)},Pl=(o,c)=>c.useNative===!0&&Le(AA,ac(o.element)),bh=o=>{ws(o.element,"disabled","disabled")},hb=o=>{Xs(o.element,"disabled")},Ad=o=>{ws(o.element,"aria-disabled","true")},uT=o=>{ws(o.element,"aria-disabled","false")},ew=(o,c,u)=>{c.disableClass.each(g=>{xn(o.element,g)}),(Pl(o,c)?bh:Ad)(o),c.onDisabled(o)},a2=(o,c,u)=>{c.disableClass.each(g=>{$o(o.element,g)}),(Pl(o,c)?hb:uT)(o),c.onEnabled(o)},i2=(o,c)=>Pl(o,c)?(u=>xu(u.element,"disabled"))(o):(u=>Ei(u.element,"aria-disabled")==="true")(o);var c2=Object.freeze({__proto__:null,enable:a2,disable:ew,isDisabled:i2,onLoad:Zd,set:(o,c,u,g)=>{(g?ew:a2)(o,c)}}),dT=Object.freeze({__proto__:null,exhibit:(o,c)=>um({classes:c.disabled()?c.disableClass.toArray():[]}),events:(o,c)=>Ja([dn(os(),(u,g)=>i2(u,o)),Yc(o,c,Zd)])}),l2=[sr("disabled",Qe),ht("useNative",!0),Fr("disableClass"),Hr("onDisabled"),Hr("onEnabled")];const hs=Ra({fields:l2,name:"disabling",active:dT,apis:c2}),mT=(o,c,u,g)=>{const b=Oc(o.element,"."+c.highlightClass);ft(b,y=>{Qt(g,S=>xt(S.element,y))||($o(y,c.highlightClass),o.getSystem().getByDom(y).each(S=>{c.onDehighlight(o,S),$s(S,_n())}))})},bb=(o,c,u,g)=>{mT(o,c,0,[g]),jv(o,c,u,g)||(xn(g.element,c.highlightClass),c.onHighlight(o,g),$s(g,Li()))},jv=(o,c,u,g)=>Ss(g.element,c.highlightClass),u2=(o,c,u)=>qs(o.element,"."+c.itemClass).bind(g=>o.getSystem().getByDom(g).toOptional()),d2=(o,c,u)=>{const g=Oc(o.element,"."+c.itemClass);return(g.length>0?z.some(g[g.length-1]):z.none()).bind(b=>o.getSystem().getByDom(b).toOptional())},tw=(o,c,u,g)=>{const b=Oc(o.element,"."+c.itemClass);return Jo(b,y=>Ss(y,c.highlightClass)).bind(y=>{const S=Ov(y,g,0,b.length-1);return o.getSystem().getByDom(b[S]).toOptional()})},m2=(o,c,u)=>{const g=Oc(o.element,"."+c.itemClass);return ma(Oe(g,b=>o.getSystem().getByDom(b).toOptional()))};var hD=Object.freeze({__proto__:null,dehighlightAll:(o,c,u)=>mT(o,c,0,[]),dehighlight:(o,c,u,g)=>{jv(o,c,u,g)&&($o(g.element,c.highlightClass),c.onDehighlight(o,g),$s(g,_n()))},highlight:bb,highlightFirst:(o,c,u)=>{u2(o,c).each(g=>{bb(o,c,u,g)})},highlightLast:(o,c,u)=>{d2(o,c).each(g=>{bb(o,c,u,g)})},highlightAt:(o,c,u,g)=>{((b,y,S,T)=>{const E=Oc(b.element,"."+y.itemClass);return z.from(E[T]).fold(()=>vr.error(new Error("No element found with index "+T)),b.getSystem().getByDom)})(o,c,0,g).fold(b=>{throw b},b=>{bb(o,c,u,b)})},highlightBy:(o,c,u,g)=>{const b=m2(o,c);Y(b,g).each(y=>{bb(o,c,u,y)})},isHighlighted:jv,getHighlighted:(o,c,u)=>qs(o.element,"."+c.highlightClass).bind(g=>o.getSystem().getByDom(g).toOptional()),getFirst:u2,getLast:d2,getPrevious:(o,c,u)=>tw(o,c,0,-1),getNext:(o,c,u)=>tw(o,c,0,1),getCandidates:m2}),nw=[Yt("highlightClass"),Yt("itemClass"),Hr("onHighlight"),Hr("onDehighlight")];const xa=Ra({fields:nw,name:"highlighting",apis:hD}),bD=[8],vb=[9],Df=[13],g2=[27],hm=[32],Au=[37],Zv=[38],ow=[39],O1=[40],f2=(o,c,u)=>{const g=Nt(o.slice(0,c)),b=Nt(o.slice(c+1));return Y(g.concat(b),u)},py=(o,c,u)=>{const g=Nt(o.slice(0,c));return Y(g,u)},vD=(o,c,u)=>{const g=o.slice(0,c),b=o.slice(c+1);return Y(b.concat(g),u)},hy=(o,c,u)=>{const g=o.slice(c+1);return Y(g,u)},Gr=o=>c=>{const u=c.raw;return Le(o,u.which)},Gd=o=>c=>Pn(o,u=>u(c)),yb=o=>o.raw.shiftKey===!0,OA=o=>o.raw.ctrlKey===!0,Gv=rn(yb),sa=(o,c)=>({matches:o,classification:c}),gT=(o,c,u)=>{c.exists(g=>u.exists(b=>xt(b,g)))||Uo(o,Rg(),{prevFocus:c,newFocus:u})},by=()=>{const o=c=>du(c.element);return{get:o,set:(c,u)=>{const g=o(c);c.getSystem().triggerFocus(u,c.element);const b=o(c);gT(c,g,b)}}},yD=()=>{const o=c=>xa.getHighlighted(c).map(u=>u.element);return{get:o,set:(c,u)=>{const g=o(c);c.getSystem().getByDom(u).fold(Ue,y=>{xa.highlight(c,y)});const b=o(c);gT(c,g,b)}}};var D1;(function(o){o.OnFocusMode="onFocus",o.OnEnterOrSpaceMode="onEnterOrSpace",o.OnApiMode="onApi"})(D1||(D1={}));const R1=(o,c,u,g,b)=>{const y=(T,E,M,P,N)=>{return(V=M(T,E,P,N),G=E.event,Y(V,Q=>Q.matches(G)).map(Q=>Q.classification)).bind(Q=>Q(T,E,P,N));var V,G},S={schema:()=>o.concat([ht("focusManager",by()),Ji("focusInside","onFocus",th(T=>Le(["onFocus","onEnterOrSpace","onApi"],T)?vr.value(T):vr.error("Invalid value for focusInside"))),$a("handler",S),$a("state",c),$a("sendFocusIn",b)]),processKey:y,toEvents:(T,E)=>{const M=T.focusInside!==D1.OnFocusMode?z.none():b(T).map(N=>tn(Og(),(V,G)=>{N(V,T,E),G.stop()})),P=[tn(Xa(),(N,V)=>{y(N,V,u,T,E).fold(()=>{((G,Q)=>{const pe=Gr(hm.concat(Df))(Q.event);T.focusInside===D1.OnEnterOrSpaceMode&&pe&&yd(G,Q)&&b(T).each(he=>{he(G,T,E),Q.stop()})})(N,V)},G=>{V.stop()})}),tn(Bu(),(N,V)=>{y(N,V,g,T,E).each(G=>{V.stop()})})];return Ja(M.toArray().concat(P))}};return S},fT=o=>{const c=[Fr("onEscape"),Fr("onEnter"),ht("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ht("firstTabstop",0),ht("useTabstopAt",Be),Fr("visibilitySelector")].concat([o]),u=(P,N)=>{const V=P.visibilitySelector.bind(G=>gm(N,G)).getOr(N);return oi(V)>0},g=(P,N)=>N.focusManager.get(P).bind(V=>gm(V,N.selector)),b=(P,N,V)=>{((G,Q)=>{const pe=Oc(G.element,Q.selector),he=Bt(pe,xe=>u(Q,xe));return z.from(he[Q.firstTabstop])})(P,N).each(G=>{N.focusManager.set(P,G)})},y=(P,N,V,G)=>{const Q=Oc(P.element,V.selector);return g(P,V).bind(pe=>Jo(Q,re(xt,pe)).bind(he=>((xe,ie,ae,Ce,ke)=>ke(ie,ae,Re=>((Ye,vt)=>u(Ye,vt)&&Ye.useTabstopAt(vt))(Ce,Re)).fold(()=>Ce.cyclic?z.some(!0):z.none(),Re=>(Ce.focusManager.set(xe,Re),z.some(!0))))(P,Q,he,V,G)))},S=(P,N,V)=>{const G=V.cyclic?f2:py;return y(P,0,V,G)},T=(P,N,V)=>{const G=V.cyclic?vD:hy;return y(P,0,V,G)},E=ve([sa(Gd([yb,Gr(vb)]),S),sa(Gr(vb),T),sa(Gd([Gv,Gr(Df)]),(P,N,V)=>V.onEnter.bind(G=>G(P,N)))]),M=ve([sa(Gr(g2),(P,N,V)=>V.onEscape.bind(G=>G(P,N))),sa(Gr(vb),(P,N,V)=>g(P,V).filter(G=>!V.useTabstopAt(G)).bind(G=>((Q=>(pe=>xo(pe))(Q).bind(hr).exists(pe=>xt(pe,Q)))(G)?S:T)(P,N,V)))]);return R1(c,fa.init,E,M,()=>z.some(b))};var p2=fT(vl("cyclic",Qe)),vy=fT(vl("cyclic",Be));const qv=(o,c,u)=>Of(u)&&Gr(hm)(c.event)?z.none():((g,b,y)=>(sh(g,y,os()),z.some(!0)))(o,0,u),yy=(o,c)=>z.some(!0),h2=[ht("execute",qv),ht("useSpace",!1),ht("useEnter",!0),ht("useControlEnter",!1),ht("useDown",!1)],sw=(o,c,u)=>u.execute(o,c,o.element);var Rf=R1(h2,fa.init,(o,c,u,g)=>{const b=u.useSpace&&!Of(o.element)?hm:[],y=u.useEnter?Df:[],S=u.useDown?O1:[],T=b.concat(y).concat(S);return[sa(Gr(T),sw)].concat(u.useControlEnter?[sa(Gd([OA,Gr(Df)]),sw)]:[])},(o,c,u,g)=>u.useSpace&&!Of(o.element)?[sa(Gr(hm),yy)]:[],()=>z.none());const rw=()=>{const o=Br();return wd({readState:()=>o.get().map(c=>({numRows:String(c.numRows),numColumns:String(c.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(c,u)=>{o.set({numRows:c,numColumns:u})},getNumRows:()=>o.get().map(c=>c.numRows),getNumColumns:()=>o.get().map(c=>c.numColumns)})};var b2=Object.freeze({__proto__:null,flatgrid:rw,init:o=>o.state(o)});const v2=o=>(c,u,g,b)=>{const y=o(c.element);return DA(y,c,u,g,b)},Vu=(o,c)=>{const u=Pg(o,c);return v2(u)},xp=(o,c)=>{const u=Pg(c,o);return v2(u)},vh=o=>(c,u,g,b)=>DA(o,c,u,g,b),DA=(o,c,u,g,b)=>g.focusManager.get(c).bind(y=>o(c.element,y,g,b)).map(y=>(g.focusManager.set(c,y),!0)),xb=vh,aw=vh,y2=vh,RA=o=>!(c=>c.offsetWidth<=0&&c.offsetHeight<=0)(o.dom),pT=(o,c,u)=>{const g=Oc(o,u);return((b,y)=>Jo(b,S=>xt(S,c)).map(S=>({index:S,candidates:b})))(Bt(g,RA))},Kv=(o,c)=>Jo(o,u=>xt(c,u)),hT=(o,c,u,g)=>g(Math.floor(c/u),c%u).bind(b=>{const y=b.row*u+b.column;return y>=0&&y<o.length?z.some(o[y]):z.none()}),MA=(o,c,u,g,b)=>hT(o,c,g,(y,S)=>{const T=y===u-1?o.length-y*g:g,E=Ov(S,b,0,T-1);return z.some({row:y,column:E})}),xy=(o,c,u,g,b)=>hT(o,c,g,(y,S)=>{const T=Ov(y,b,0,u-1),E=T===u-1?o.length-T*g:g,M=Ng(S,0,E-1);return z.some({row:T,column:M})}),bT=[Yt("selector"),ht("execute",qv),dm("onEscape"),ht("captureTab",!1),Wd()],xD=(o,c,u)=>{qs(o.element,c.selector).each(g=>{c.focusManager.set(o,g)})},iw=o=>(c,u,g,b)=>pT(c,u,g.selector).bind(y=>o(y.candidates,y.index,b.getNumRows().getOr(g.initSize.numRows),b.getNumColumns().getOr(g.initSize.numColumns))),vT=(o,c,u)=>u.captureTab?z.some(!0):z.none(),x2=iw((o,c,u,g)=>MA(o,c,u,g,-1)),wD=iw((o,c,u,g)=>MA(o,c,u,g,1)),wy=iw((o,c,u,g)=>xy(o,c,u,g,-1)),NA=iw((o,c,u,g)=>xy(o,c,u,g,1)),yT=ve([sa(Gr(Au),Vu(x2,wD)),sa(Gr(ow),xp(x2,wD)),sa(Gr(Zv),xb(wy)),sa(Gr(O1),aw(NA)),sa(Gd([yb,Gr(vb)]),vT),sa(Gd([Gv,Gr(vb)]),vT),sa(Gr(hm.concat(Df)),(o,c,u,g)=>((b,y)=>y.focusManager.get(b).bind(S=>gm(S,y.selector)))(o,u).bind(b=>u.execute(o,c,b)))]),xT=ve([sa(Gr(g2),(o,c,u)=>u.onEscape(o,c)),sa(Gr(hm),yy)]);var w2=R1(bT,rw,yT,xT,()=>z.some(xD));const BA=(o,c,u,g,b)=>{const y=(S,T,E)=>b(S,T,g,0,E.length-1,E[T],M=>{return P=E[M],ac(P)==="button"&&Ei(P,"disabled")==="disabled"?y(S,M,E):z.from(E[M]);var P});return pT(o,u,c).bind(S=>{const T=S.index,E=S.candidates;return y(T,T,E)})},wT=(o,c,u,g)=>BA(o,c,u,g,(b,y,S,T,E,M,P)=>{const N=Ng(y+S,T,E);return N===b?z.from(M):P(N)}),CT=(o,c,u,g)=>BA(o,c,u,g,(b,y,S,T,E,M,P)=>{const N=Ov(y,S,T,E);return N===b?z.none():P(N)}),Yv=[Yt("selector"),ht("getInitial",z.none),ht("execute",qv),dm("onEscape"),ht("executeOnMove",!1),ht("allowVertical",!0),ht("allowHorizontal",!0),ht("cycles",!0)],Cy=(o,c,u)=>((g,b)=>b.focusManager.get(g).bind(y=>gm(y,b.selector)))(o,u).bind(g=>u.execute(o,c,g)),Sy=(o,c,u)=>{c.getInitial(o).orThunk(()=>qs(o.element,c.selector)).each(g=>{c.focusManager.set(o,g)})},ky=(o,c,u)=>(u.cycles?CT:wT)(o,u.selector,c,-1),IA=(o,c,u)=>(u.cycles?CT:wT)(o,u.selector,c,1),ST=o=>(c,u,g,b)=>o(c,u,g,b).bind(()=>g.executeOnMove?Cy(c,u,g):z.some(!0)),CD=ve([sa(Gr(hm),yy),sa(Gr(g2),(o,c,u)=>u.onEscape(o,c))]);var kB=R1(Yv,fa.init,(o,c,u,g)=>{const b=[...u.allowHorizontal?Au:[]].concat(u.allowVertical?Zv:[]),y=[...u.allowHorizontal?ow:[]].concat(u.allowVertical?O1:[]);return[sa(Gr(b),ST(Vu(ky,IA))),sa(Gr(y),ST(xp(ky,IA))),sa(Gr(Df),Cy),sa(Gr(hm),Cy)]},CD,()=>z.some(Sy));const M1=(o,c,u)=>z.from(o[c]).bind(g=>z.from(g[u]).map(b=>({rowIndex:c,columnIndex:u,cell:b}))),C2=(o,c,u,g)=>{const b=o[c].length,y=Ov(u,g,0,b-1);return M1(o,c,y)},kT=(o,c,u,g)=>{const b=Ov(u,g,0,o.length-1),y=o[b].length,S=Ng(c,0,y-1);return M1(o,b,S)},S2=(o,c,u,g)=>{const b=o[c].length,y=Ng(u+g,0,b-1);return M1(o,c,y)},TT=(o,c,u,g)=>{const b=Ng(u+g,0,o.length-1),y=o[b].length,S=Ng(c,0,y-1);return M1(o,b,S)},SD=[Ir("selectors",[Yt("row"),Yt("cell")]),ht("cycles",!0),ht("previousSelector",z.none),ht("execute",qv)],kD=(o,c,u)=>{c.previousSelector(o).orThunk(()=>{const g=c.selectors;return qs(o.element,g.cell)}).each(g=>{c.focusManager.set(o,g)})},N1=(o,c)=>(u,g,b)=>{const y=b.cycles?o:c;return gm(g,b.selectors.row).bind(S=>{const T=Oc(S,b.selectors.cell);return Kv(T,g).bind(E=>{const M=Oc(u,b.selectors.row);return Kv(M,S).bind(P=>{const N=((V,G)=>Oe(V,Q=>Oc(Q,G.selectors.cell)))(M,b);return y(N,P,E).map(V=>V.cell)})})})},Xv=N1((o,c,u)=>C2(o,c,u,-1),(o,c,u)=>S2(o,c,u,-1)),Ty=N1((o,c,u)=>C2(o,c,u,1),(o,c,u)=>S2(o,c,u,1)),ET=N1((o,c,u)=>kT(o,u,c,-1),(o,c,u)=>TT(o,u,c,-1)),k2=N1((o,c,u)=>kT(o,u,c,1),(o,c,u)=>TT(o,u,c,1)),_T=ve([sa(Gr(Au),Vu(Xv,Ty)),sa(Gr(ow),xp(Xv,Ty)),sa(Gr(Zv),xb(ET)),sa(Gr(O1),aw(k2)),sa(Gr(hm.concat(Df)),(o,c,u)=>du(o.element).bind(g=>u.execute(o,c,g)))]),AT=ve([sa(Gr(hm),yy)]);var TD=R1(SD,fa.init,_T,AT,()=>z.some(kD));const T2=[Yt("selector"),ht("execute",qv),ht("moveOnTab",!1)],Ey=(o,c,u)=>u.focusManager.get(o).bind(g=>u.execute(o,c,g)),FA=(o,c,u)=>{qs(o.element,c.selector).each(g=>{c.focusManager.set(o,g)})},ED=(o,c,u)=>CT(o,u.selector,c,-1),Jv=(o,c,u)=>CT(o,u.selector,c,1),_y=ve([sa(Gr(Zv),y2(ED)),sa(Gr(O1),y2(Jv)),sa(Gd([yb,Gr(vb)]),(o,c,u,g)=>u.moveOnTab?y2(ED)(o,c,u,g):z.none()),sa(Gd([Gv,Gr(vb)]),(o,c,u,g)=>u.moveOnTab?y2(Jv)(o,c,u,g):z.none()),sa(Gr(Df),Ey),sa(Gr(hm),Ey)]),PA=ve([sa(Gr(hm),yy)]);var LA=R1(T2,fa.init,_y,PA,()=>z.some(FA));const qd=[dm("onSpace"),dm("onEnter"),dm("onShiftEnter"),dm("onLeft"),dm("onRight"),dm("onTab"),dm("onShiftTab"),dm("onUp"),dm("onDown"),dm("onEscape"),ht("stopSpaceKeyup",!1),Fr("focusIn")];var E2=R1(qd,fa.init,(o,c,u)=>[sa(Gr(hm),u.onSpace),sa(Gd([Gv,Gr(Df)]),u.onEnter),sa(Gd([yb,Gr(Df)]),u.onShiftEnter),sa(Gd([yb,Gr(vb)]),u.onShiftTab),sa(Gd([Gv,Gr(vb)]),u.onTab),sa(Gr(Zv),u.onUp),sa(Gr(O1),u.onDown),sa(Gr(Au),u.onLeft),sa(Gr(ow),u.onRight),sa(Gr(hm),u.onSpace)],(o,c,u)=>[...u.stopSpaceKeyup?[sa(Gr(hm),yy)]:[],sa(Gr(g2),u.onEscape)],o=>o.focusIn);const OT=p2.schema(),_D=vy.schema(),DT=kB.schema(),cw=w2.schema(),lw=TD.schema(),$A=Rf.schema(),Ay=LA.schema(),RT=E2.schema(),ts=V0({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:OT,cyclic:_D,flow:DT,flatgrid:cw,matrix:lw,execution:$A,menu:Ay,special:RT}),name:"keying",active:{events:(o,c)=>o.handler.toEvents(o,c)},apis:{focusIn:(o,c,u)=>{c.sendFocusIn(c).fold(()=>{o.getSystem().triggerFocus(o.element,o.element)},g=>{g(o,c,u)})},setGridSize:(o,c,u,g,b)=>{(y=>gr(y,"setGridSize"))(u)?u.setGridSize(g,b):console.error("Layout does not support setGridSize")}},state:b2}),MT=(o,c)=>{b1(()=>{((u,g,b)=>{const y=u.components();(E=>{ft(E.components(),M=>si(M.element)),Da(E.element),E.syncComponents()})(u);const S=b(g),T=ce(y,S);ft(T,E=>{k1(E),u.getSystem().removeFromWorld(E)}),ft(S,E=>{gh(E)?Gx(u,E):(u.getSystem().addToWorld(E),Gx(u,E),Ua(u.element)&&ry(E))}),u.syncComponents()})(o,c,()=>Oe(c,o.getSystem().build))},o.element)},Oy=(o,c)=>{b1(()=>{((u,g,b)=>{const y=u.components(),S=Mt(g,M=>on(M).toArray());ft(y,M=>{Le(S,M)||Zx(M)});const T=((M,P,N)=>Mx(M,P,(V,G)=>K0(M,G,V,N)))(o.element,c,o.getSystem().buildOrPatch),E=ce(y,T);ft(E,M=>{gh(M)&&Zx(M)}),ft(T,M=>{gh(M)||jx(u,M)}),u.syncComponents()})(o,c)},o.element)},AD=(o,c,u,g)=>{Zx(c);const b=K0(o.element,u,g,o.getSystem().buildOrPatch);jx(o,b),o.syncComponents()},Qv=(o,c,u)=>{const g=o.getSystem().build(u);_d(o,g,c)},_2=(o,c,u,g)=>{Zm(c),Qv(o,(b,y)=>((S,T,E)=>{cs(S,E).fold(()=>{Ks(S,T)},M=>{wt(M,T)})})(b,y,u),g)},wp=(o,c)=>o.components(),wb=(o,c,u,g,b)=>{const y=wp(o);return z.from(y[g]).map(S=>(b.fold(()=>Zm(S),T=>{(c.reuseDom?AD:_2)(o,S,g,T)}),S))};var yh=Object.freeze({__proto__:null,append:(o,c,u,g)=>{Qv(o,Ks,g)},prepend:(o,c,u,g)=>{Qv(o,Ko,g)},remove:(o,c,u,g)=>{const b=wp(o);Y(b,S=>xt(g.element,S.element)).each(Zm)},replaceAt:wb,replaceBy:(o,c,u,g,b)=>{const y=wp(o);return Jo(y,g).bind(S=>wb(o,c,0,S,b))},set:(o,c,u,g)=>(c.reuseDom?Oy:MT)(o,g),contents:wp});const _s=Ra({fields:[cl("reuseDom",!0)],name:"replacing",apis:yh}),Ts=(o,c)=>{const u=((g,b)=>{const y=Ja(b);return Ra({fields:[Yt("enabled")],name:g,active:{events:ve(y)}})})(o,c);return{key:o,value:{config:{},me:u,configAsRaw:ve({}),initialConfig:{},state:fa}}},xh=(o,c)=>{c.ignore||(sd(o.element),c.onFocus(o))};var Mf=Object.freeze({__proto__:null,focus:xh,blur:(o,c)=>{c.ignore||ey(o.element)},isFocused:o=>ab(o.element)}),A2=Object.freeze({__proto__:null,exhibit:(o,c)=>{const u=c.ignore?{}:{attributes:{tabindex:"-1"}};return um(u)},events:o=>Ja([tn(Og(),(c,u)=>{xh(c,o),u.stop()})].concat(o.stopMousedown?[tn(qe(),(c,u)=>{u.event.prevent()})]:[]))}),HA=[Hr("onFocus"),ht("stopMousedown",!1),ht("ignore",!1)];const Rs=Ra({fields:HA,name:"focusing",active:A2,apis:Mf}),e0=(o,c,u,g)=>{const b=u.get();u.set(g),((y,S,T)=>{S.toggleClass.each(E=>{T.get()?xn(y.element,E):$o(y.element,E)})})(o,c,u),((y,S,T)=>{const E=S.aria;E.update(y,E,T.get())})(o,c,u),b!==g&&c.onToggled(o,g)},t0=(o,c,u)=>{e0(o,c,u,!u.get())},n0=(o,c,u)=>{e0(o,c,u,c.selected)};var Dy=Object.freeze({__proto__:null,onLoad:n0,toggle:t0,isOn:(o,c,u)=>u.get(),on:(o,c,u)=>{e0(o,c,u,!0)},off:(o,c,u)=>{e0(o,c,u,!1)},set:e0}),zA=Object.freeze({__proto__:null,exhibit:()=>um({}),events:(o,c)=>{const u=(g=o,b=c,y=t0,ri(T=>{y(T,g,b)}));var g,b,y;const S=Yc(o,c,n0);return Ja(Et([o.toggleOnExecute?[u]:[],[S]]))}});const o0=(o,c,u)=>{ws(o.element,"aria-expanded",u)};var Ry=[ht("selected",!1),Fr("toggleClass"),ht("toggleOnExecute",!0),Hr("onToggled"),Ji("aria",{mode:"none"},oa("mode",{pressed:[ht("syncWithExpanded",!1),$a("update",(o,c,u)=>{ws(o.element,"aria-pressed",u),c.syncWithExpanded&&o0(o,0,u)})],checked:[$a("update",(o,c,u)=>{ws(o.element,"aria-checked",u)})],expanded:[$a("update",o0)],selected:[$a("update",(o,c,u)=>{ws(o.element,"aria-selected",u)})],none:[$a("update",Ue)]}))];const ur=Ra({fields:Ry,name:"toggling",active:zA,apis:Dy,state:{init:()=>{const o=Go(!1);return{get:()=>o.get(),set:c=>o.set(c),clear:()=>o.set(!1),readState:()=>o.get()}}}}),O2=()=>{const o=(c,u)=>{u.stop(),fc(c)};return[tn(cm(),o),tn(Dg(),o),lm(I()),lm(qe())]},Cb=o=>Ja(Et([o.map(c=>ri((u,g)=>{c(u),g.stop()})).toArray(),O2()])),Ql="alloy.item-hover",NT="alloy.item-focus",Cp="alloy.item-toggled",BT=o=>{(du(o.element).isNone()||Rs.isFocused(o))&&(Rs.isFocused(o)||Rs.focus(o),Uo(o,Ql,{item:o}))},uw=o=>{Uo(o,NT,{item:o})},s0=ve(Ql),VA=ve(NT),D2=ve(Cp),TB=o=>o.role.fold(()=>o.toggling.map(c=>c.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),In),IT=[Yt("data"),Yt("components"),Yt("dom"),ht("hasSubmenu",!1),Fr("toggling"),Fr("role"),gb("itemBehaviours",[ur,Rs,ts,go]),ht("ignoreFocus",!1),ht("domModification",{}),$a("builder",o=>({dom:o.dom,domModification:{...o.domModification,attributes:{role:TB(o),...o.domModification.attributes,"aria-haspopup":o.hasSubmenu,...o.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:ph(o.itemBehaviours,[o.toggling.fold(ur.revoke,c=>ur.config(((u,g)=>({aria:{mode:g?"selected":"checked"},...Zo(u,(b,y)=>y!=="exclusive"),onToggled:(b,y)=>{kn(u.onToggled)&&u.onToggled(b,y),((S,T)=>{Uo(S,Cp,{item:S,state:T})})(b,y)}}))(c,o.role.exists(u=>u==="option")))),Rs.config({ignore:o.ignoreFocus,stopMousedown:o.ignoreFocus,onFocus:c=>{uw(c)}}),ts.config({mode:"execution"}),go.config({store:{mode:"memory",initialValue:o.data}}),Ts("item-type-events",[...O2(),tn(Os(),BT),tn(Ju(),Rs.focus)])]),components:o.components,eventOrder:o.eventOrder})),ht("eventOrder",{})],gu=[Yt("dom"),Yt("components"),$a("builder",o=>({dom:o.dom,components:o.components,events:Ja([_x(Ju())])}))],dw=ve("item-widget"),Nf=ve([zu({name:"widget",overrides:o=>({behaviours:gn([go.config({store:{mode:"manual",getValue:c=>o.data,setValue:Ue}})])})})]),Km=[Yt("uid"),Yt("data"),Yt("components"),Yt("dom"),ht("autofocus",!1),ht("ignoreFocus",!1),gb("widgetBehaviours",[go,Rs,ts]),ht("domModification",{}),gy(Nf()),$a("builder",o=>{const c=iT(dw(),o,Nf()),u=Jx(dw(),o,c.internals()),g=y=>lr(y,o,"widget").map(S=>(ts.focusIn(S),S)),b=(y,S)=>(Of(S.event.target)||o.autofocus&&S.setSource(y.element),z.none());return{dom:o.dom,components:u,domModification:o.domModification,events:Ja([ri((y,S)=>{g(y).each(T=>{S.stop()})}),tn(Os(),BT),tn(Ju(),(y,S)=>{o.autofocus?g(y):Rs.focus(y)})]),behaviours:ph(o.widgetBehaviours,[go.config({store:{mode:"memory",initialValue:o.data}}),Rs.config({ignore:o.ignoreFocus,onFocus:y=>{uw(y)}}),ts.config({mode:"special",focusIn:o.autofocus?y=>{g(y)}:D(),onLeft:b,onRight:b,onEscape:(y,S)=>Rs.isFocused(y)||o.autofocus?(o.autofocus&&S.setSource(y.element),z.none()):(Rs.focus(y),z.some(!0))})])}})],UA=oa("type",{widget:Km,item:IT,separator:gu}),FT=ve([Xl({factory:{sketch:o=>{const c=Ml("menu.spec item",UA,o);return c.builder(c)}},name:"items",unit:"item",defaults:(o,c)=>yo(c,"uid")?c:{...c,uid:Dv("item")},overrides:(o,c)=>({type:c.type,ignoreFocus:o.fakeFocus,domModification:{classes:[o.markers.item]}})})]),R2=ve([_r("role"),Yt("value"),Yt("items"),Yt("dom"),Yt("components"),ht("eventOrder",{}),Bl("menuBehaviours",[xa,go,Qr,ts]),Ji("movement",{mode:"menu",moveOnTab:!0},oa("mode",{grid:[Wd(),$a("config",(o,c)=>({mode:"flatgrid",selector:"."+o.markers.item,initSize:{numColumns:c.initSize.numColumns,numRows:c.initSize.numRows},focusManager:o.focusManager}))],matrix:[$a("config",(o,c)=>({mode:"matrix",selectors:{row:c.rowSelector,cell:"."+o.markers.item},previousSelector:c.previousSelector,focusManager:o.focusManager})),Yt("rowSelector"),ht("previousSelector",z.none)],menu:[ht("moveOnTab",!0),$a("config",(o,c)=>({mode:"menu",selector:"."+o.markers.item,moveOnTab:c.moveOnTab,focusManager:o.focusManager}))]})),wo("markers",BC()),ht("fakeFocus",!1),ht("focusManager",by()),Hr("onHighlight"),Hr("onDehighlight"),ht("showMenuRole",!0)]),M2=ve("alloy.menu-focus"),Wg=pm({name:"Menu",configFields:R2(),partFields:FT(),factory:(o,c,u,g)=>({uid:o.uid,dom:o.dom,markers:o.markers,behaviours:Il(o.menuBehaviours,[xa.config({highlightClass:o.markers.selectedItem,itemClass:o.markers.item,onHighlight:o.onHighlight,onDehighlight:o.onDehighlight}),go.config({store:{mode:"memory",initialValue:o.value}}),Qr.config({find:z.some}),ts.config(o.movement.config(o,o.movement))]),events:Ja([tn(VA(),(b,y)=>{const S=y.event;b.getSystem().getByDom(S.target).each(T=>{xa.highlight(b,T),y.stop(),Uo(b,M2(),{menu:b,item:T})})}),tn(s0(),(b,y)=>{const S=y.event.item;xa.highlight(b,S)}),tn(D2(),(b,y)=>{const{item:S,state:T}=y.event;T&&Ei(S.element,"role")==="menuitemradio"&&((E,M)=>{const P=Oc(E.element,'[role="menuitemradio"][aria-checked="true"]');ft(P,N=>{xt(N,M.element)||E.getSystem().getByDom(N).each(V=>{ur.off(V)})})})(b,S)})]),components:c,eventOrder:o.eventOrder,...o.showMenuRole?{domModification:{attributes:{role:o.role.getOr("menu")}}}:{}})}),N2=(o,c,u,g)=>Gt(u,g).bind(b=>Gt(o,b).bind(y=>{const S=N2(o,c,u,y);return z.some([y].concat(S))})).getOr([]),Sp=o=>o.type==="prepared"?z.some(o.menu):z.none(),ad=()=>{const o=Go({}),c=Go({}),u=Go({}),g=Br(),b=Go({}),y=E=>S(E).bind(Sp),S=E=>Gt(c.get(),E),T=E=>Gt(o.get(),E);return{setMenuBuilt:(E,M)=>{c.set({...c.get(),[E]:{type:"prepared",menu:M}})},setContents:(E,M,P,N)=>{g.set(E),o.set(P),c.set(M),b.set(N);const V=((G,Q)=>{const pe={};Hn(G,(ae,Ce)=>{ft(ae,ke=>{pe[ke]=Ce})});const he=Q,xe=ot(Q,(ae,Ce)=>({k:ae,v:Ce})),ie=ut(xe,(ae,Ce)=>[Ce].concat(N2(pe,he,xe,Ce)));return ut(pe,ae=>Gt(ie,ae).getOr([ae]))})(N,P);u.set(V)},expand:E=>Gt(o.get(),E).map(M=>{const P=Gt(u.get(),E).getOr([]);return[M].concat(P)}),refresh:E=>Gt(u.get(),E),collapse:E=>Gt(u.get(),E).bind(M=>M.length>1?z.some(M.slice(1)):z.none()),lookupMenu:S,lookupItem:T,otherMenus:E=>{const M=b.get();return ce(Dt(M),E)},getPrimary:()=>g.get().bind(y),getMenus:()=>c.get(),clear:()=>{o.set({}),c.set({}),u.set({}),g.clear()},isClear:()=>g.get().isNone(),getTriggeringPath:(E,M)=>{const P=Bt(T(E).toArray(),N=>y(N).isSome());return Gt(u.get(),E).bind(N=>{const V=Nt(P.concat(N));return(G=>{const Q=[];for(let pe=0;pe<G.length;pe++){const he=G[pe];if(!he.isSome())return z.none();Q.push(he.getOrDie())}return z.some(Q)})(Mt(V,(G,Q)=>((pe,he,xe)=>y(pe).bind(ie=>(ae=>Mn(o.get(),(Ce,ke)=>Ce===ae))(pe).bind(ae=>he(ae).map(Ce=>({triggeredMenu:ie,triggeringItem:Ce,triggeringPath:xe})))))(G,M,V.slice(0,Q+1)).fold(()=>Us(g.get(),G)?[]:[z.none()],pe=>[z.some(pe)])))})}}},r0=Sp,kp=Do("tiered-menu-item-highlight"),B1=Do("tiered-menu-item-dehighlight");var Vi;(function(o){o[o.HighlightMenuAndItem=0]="HighlightMenuAndItem",o[o.HighlightJustMenu=1]="HighlightJustMenu",o[o.HighlightNone=2]="HighlightNone"})(Vi||(Vi={}));const Ou=ve("collapse-item"),kl=Gm({name:"TieredMenu",configFields:[Av("onExecute"),Av("onEscape"),up("onOpenMenu"),up("onOpenSubmenu"),Hr("onRepositionMenu"),Hr("onCollapseMenu"),ht("highlightOnOpen",Vi.HighlightMenuAndItem),Ir("data",[Yt("primary"),Yt("menus"),Yt("expansions")]),ht("fakeFocus",!1),Hr("onHighlightItem"),Hr("onDehighlightItem"),Hr("onHover"),ah(),Yt("dom"),ht("navigateOnHover",!0),ht("stayInDom",!1),Bl("tmenuBehaviours",[ts,xa,Qr,_s]),ht("eventOrder",{})],apis:{collapseMenu:(o,c)=>{o.collapseMenu(c)},highlightPrimary:(o,c)=>{o.highlightPrimary(c)},repositionMenus:(o,c)=>{o.repositionMenus(c)}},factory:(o,c)=>{const u=Br(),g=ad(),b=ae=>go.getValue(ae).value,y=ae=>ut(o.data.menus,(Ce,ke)=>Mt(Ce.items,Re=>Re.type==="separator"?[]:[Re.data.value])),S=xa.highlight,T=(ae,Ce)=>{S(ae,Ce),xa.getHighlighted(Ce).orThunk(()=>xa.getFirst(Ce)).each(ke=>{o.fakeFocus?xa.highlight(Ce,ke):sh(ae,ke.element,Ju())})},E=(ae,Ce)=>ma(Oe(Ce,ke=>ae.lookupMenu(ke).bind(Re=>Re.type==="prepared"?z.some(Re.menu):z.none()))),M=(ae,Ce,ke)=>{const Re=E(Ce,Ce.otherMenus(ke));ft(Re,Ye=>{Pr(Ye.element,[o.markers.backgroundMenu]),o.stayInDom||_s.remove(ae,Ye)})},P=(ae,Ce)=>{const ke=(Re=>u.get().getOrThunk(()=>{const Ye={},vt=Oc(Re.element,`.${o.markers.item}`),en=Bt(vt,jt=>Ei(jt,"aria-haspopup")==="true");return ft(en,jt=>{Re.getSystem().getByDom(jt).each(cn=>{const Dn=b(cn);Ye[Dn]=cn})}),u.set(Ye),Ye}))(ae);Hn(ke,(Re,Ye)=>{const vt=Le(Ce,Ye);ws(Re.element,"aria-expanded",vt)})},N=(ae,Ce,ke)=>z.from(ke[0]).bind(Re=>Ce.lookupMenu(Re).bind(Ye=>{if(Ye.type==="notbuilt")return z.none();{const vt=Ye.menu,en=E(Ce,ke.slice(1));return ft(en,jt=>{xn(jt.element,o.markers.backgroundMenu)}),Ua(vt.element)||_s.append(ae,Wm(vt)),Pr(vt.element,[o.markers.backgroundMenu]),T(ae,vt),M(ae,Ce,ke),z.some(vt)}}));let V;(function(ae){ae[ae.HighlightSubmenu=0]="HighlightSubmenu",ae[ae.HighlightParent=1]="HighlightParent"})(V||(V={}));const G=(ae,Ce,ke=V.HighlightSubmenu)=>{if(Ce.hasConfigured(hs)&&hs.isDisabled(Ce))return z.some(Ce);{const Re=b(Ce);return g.expand(Re).bind(Ye=>(P(ae,Ye),z.from(Ye[0]).bind(vt=>g.lookupMenu(vt).bind(en=>{const jt=((cn,Dn,fo)=>{if(fo.type==="notbuilt"){const jo=cn.getSystem().build(fo.nbMenu());return g.setMenuBuilt(Dn,jo),jo}return fo.menu})(ae,vt,en);return Ua(jt.element)||_s.append(ae,Wm(jt)),o.onOpenSubmenu(ae,Ce,jt,Nt(Ye)),ke===V.HighlightSubmenu?(xa.highlightFirst(jt),N(ae,g,Ye)):(xa.dehighlightAll(jt),z.some(Ce))}))))}},Q=(ae,Ce)=>{const ke=b(Ce);return g.collapse(ke).bind(Re=>(P(ae,Re),N(ae,g,Re).map(Ye=>(o.onCollapseMenu(ae,Ce,Ye),Ye))))},pe=ae=>(Ce,ke)=>gm(ke.getSource(),`.${o.markers.item}`).bind(Re=>Ce.getSystem().getByDom(Re).toOptional().bind(Ye=>ae(Ce,Ye).map(Be))),he=Ja([tn(M2(),(ae,Ce)=>{const ke=Ce.event.item;g.lookupItem(b(ke)).each(()=>{const Re=Ce.event.menu;xa.highlight(ae,Re);const Ye=b(Ce.event.item);g.refresh(Ye).each(vt=>M(ae,g,vt))})}),ri((ae,Ce)=>{const ke=Ce.event.target;ae.getSystem().getByDom(ke).each(Re=>{b(Re).indexOf("collapse-item")===0&&Q(ae,Re),G(ae,Re,V.HighlightSubmenu).fold(()=>{o.onExecute(ae,Re)},Ue)})}),Cs((ae,Ce)=>{(ke=>{const Re=((vt,en,jt)=>ut(jt,(cn,Dn)=>{const fo=()=>Wg.sketch({...cn,value:Dn,markers:o.markers,fakeFocus:o.fakeFocus,onHighlight:(jo,ls)=>{Uo(jo,kp,{menuComp:jo,itemComp:ls})},onDehighlight:(jo,ls)=>{Uo(jo,B1,{menuComp:jo,itemComp:ls})},focusManager:o.fakeFocus?yD():by()});return Dn===en?{type:"prepared",menu:vt.getSystem().build(fo())}:{type:"notbuilt",nbMenu:fo}}))(ke,o.data.primary,o.data.menus),Ye=y();return g.setContents(o.data.primary,Re,o.data.expansions,Ye),g.getPrimary()})(ae).each(ke=>{_s.append(ae,Wm(ke)),o.onOpenMenu(ae,ke),o.highlightOnOpen===Vi.HighlightMenuAndItem?T(ae,ke):o.highlightOnOpen===Vi.HighlightJustMenu&&S(ae,ke)})}),tn(kp,(ae,Ce)=>{o.onHighlightItem(ae,Ce.event.menuComp,Ce.event.itemComp)}),tn(B1,(ae,Ce)=>{o.onDehighlightItem(ae,Ce.event.menuComp,Ce.event.itemComp)}),...o.navigateOnHover?[tn(s0(),(ae,Ce)=>{const ke=Ce.event.item;((Re,Ye)=>{const vt=b(Ye);g.refresh(vt).bind(en=>(P(Re,en),N(Re,g,en)))})(ae,ke),G(ae,ke,V.HighlightParent),o.onHover(ae,ke)})]:[]]),xe=ae=>xa.getHighlighted(ae).bind(xa.getHighlighted),ie={collapseMenu:ae=>{xe(ae).each(Ce=>{Q(ae,Ce)})},highlightPrimary:ae=>{g.getPrimary().each(Ce=>{T(ae,Ce)})},repositionMenus:ae=>{g.getPrimary().bind(ke=>xe(ae).bind(Re=>{const Ye=b(Re),vt=No(g.getMenus()),en=ma(Oe(vt,r0));return g.getTriggeringPath(Ye,jt=>((cn,Dn,fo)=>it(Dn,jo=>{if(!jo.getSystem().isConnected())return z.none();const ls=xa.getCandidates(jo);return Y(ls,As=>b(As)===fo)}))(0,en,jt))}).map(Re=>({primary:ke,triggeringPath:Re}))).fold(()=>{(ke=>z.from(ke.components()[0]).filter(Re=>Ei(Re.element,"role")==="menu"))(ae).each(ke=>{o.onRepositionMenu(ae,ke,[])})},({primary:ke,triggeringPath:Re})=>{o.onRepositionMenu(ae,ke,Re)})}};return{uid:o.uid,dom:o.dom,markers:o.markers,behaviours:Il(o.tmenuBehaviours,[ts.config({mode:"special",onRight:pe((ae,Ce)=>Of(Ce.element)?z.none():G(ae,Ce,V.HighlightSubmenu)),onLeft:pe((ae,Ce)=>Of(Ce.element)?z.none():Q(ae,Ce)),onEscape:pe((ae,Ce)=>Q(ae,Ce).orThunk(()=>o.onEscape(ae,Ce).map(()=>ae))),focusIn:(ae,Ce)=>{g.getPrimary().each(ke=>{sh(ae,ke.element,Ju())})}}),xa.config({highlightClass:o.markers.selectedMenu,itemClass:o.markers.menu}),Qr.config({find:ae=>xa.getHighlighted(ae)}),_s.config({})]),eventOrder:o.eventOrder,apis:ie,events:he}},extraApis:{tieredData:(o,c,u)=>({primary:o,menus:c,expansions:u}),singleData:(o,c)=>({primary:o,menus:Su(o,c),expansions:{}}),collapseItem:o=>({value:Do(Ou()),meta:{text:o}})}}),Ma=Gm({name:"InlineView",configFields:[Yt("lazySink"),Hr("onShow"),Hr("onHide"),il("onEscape"),Bl("inlineBehaviours",[Jr,go,Td]),gc("fireDismissalEventInstead",[ht("event",Fu())]),gc("fireRepositionEventInstead",[ht("event",n1())]),ht("getRelated",z.none),ht("isExtraPart",Qe),ht("eventOrder",z.none)],factory:(o,c)=>{const u=(S,T,E,M)=>{const P=o.lazySink(S).getOrDie();Jr.openWhileCloaked(S,T,()=>$u.positionWithinBounds(P,S,E,M())),go.setValue(S,z.some({mode:"position",config:E,getBounds:M}))},g=(S,T,E,M)=>{const P=((N,V,G,Q,pe)=>{const he=()=>N.lazySink(V),xe=Q.type==="horizontal"?{layouts:{onLtr:()=>J0(),onRtl:()=>Q0()}}:{},ie=ae=>(Ce=>Ce.length===2)(ae)?xe:{};return kl.sketch({dom:{tag:"div"},data:Q.data,markers:Q.menu.markers,highlightOnOpen:Q.menu.highlightOnOpen,fakeFocus:Q.menu.fakeFocus,onEscape:()=>(Jr.close(V),N.onEscape.map(ae=>ae(V)),z.some(!0)),onExecute:()=>z.some(!0),onOpenMenu:(ae,Ce)=>{$u.positionWithinBounds(he().getOrDie(),Ce,G,pe())},onOpenSubmenu:(ae,Ce,ke,Re)=>{const Ye=he().getOrDie();$u.position(Ye,ke,{anchor:{type:"submenu",item:Ce,...ie(Re)}})},onRepositionMenu:(ae,Ce,ke)=>{const Re=he().getOrDie();$u.positionWithinBounds(Re,Ce,G,pe()),ft(ke,Ye=>{const vt=ie(Ye.triggeringPath);$u.position(Re,Ye.triggeredMenu,{anchor:{type:"submenu",item:Ye.triggeringItem,...vt}})})}})})(o,S,T,E,M);Jr.open(S,P),go.setValue(S,z.some({mode:"menu",menu:P}))},b=S=>{Jr.isOpen(S)&&go.getValue(S).each(T=>{switch(T.mode){case"menu":Jr.getState(S).each(kl.repositionMenus);break;case"position":const E=o.lazySink(S).getOrDie();$u.positionWithinBounds(E,S,T.config,T.getBounds())}})},y={setContent:(S,T)=>{Jr.setContent(S,T)},showAt:(S,T,E)=>{const M=z.none;u(S,T,E,M)},showWithinBounds:u,showMenuAt:(S,T,E)=>{g(S,T,E,z.none)},showMenuWithinBounds:g,hide:S=>{Jr.isOpen(S)&&(go.setValue(S,z.none()),Jr.close(S))},getContent:S=>Jr.getState(S),reposition:b,isOpen:Jr.isOpen};return{uid:o.uid,dom:o.dom,behaviours:Il(o.inlineBehaviours,[Jr.config({isPartOf:(S,T,E)=>Sf(T,E)||((M,P)=>o.getRelated(M).exists(N=>Sf(N,P)))(S,E),getAttachPoint:S=>o.lazySink(S).getOrDie(),onOpen:S=>{o.onShow(S)},onClose:S=>{o.onHide(S)}}),go.config({store:{mode:"memory",initialValue:z.none()}}),Td.config({channels:{...Qk({isExtraPart:c.isExtraPart,...o.fireDismissalEventInstead.map(S=>({fireEventInstead:{event:S.event}})).getOr({})}),...iy({...o.fireRepositionEventInstead.map(S=>({fireEventInstead:{event:S.event}})).getOr({}),doReposition:b})}})]),eventOrder:o.eventOrder,apis:y}},apis:{showAt:(o,c,u,g)=>{o.showAt(c,u,g)},showWithinBounds:(o,c,u,g,b)=>{o.showWithinBounds(c,u,g,b)},showMenuAt:(o,c,u,g)=>{o.showMenuAt(c,u,g)},showMenuWithinBounds:(o,c,u,g,b)=>{o.showMenuWithinBounds(c,u,g,b)},hide:(o,c)=>{o.hide(c)},isOpen:(o,c)=>o.isOpen(c),getContent:(o,c)=>o.getContent(c),setContent:(o,c,u)=>{o.setContent(c,u)},reposition:(o,c)=>{o.reposition(c)}}});var bm,Od,wh=tinymce.util.Tools.resolve("tinymce.util.Delay"),mw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),WA=tinymce.util.Tools.resolve("tinymce.EditorManager"),Bf=tinymce.util.Tools.resolve("tinymce.Env");(function(o){o.default="wrap",o.floating="floating",o.sliding="sliding",o.scrolling="scrolling"})(bm||(bm={})),function(o){o.auto="auto",o.top="top",o.bottom="bottom"}(Od||(Od={}));const Ha=o=>c=>c.options.get(o),My=o=>c=>z.from(o(c)),gw=o=>{const c=Bf.deviceType.isPhone(),u=Bf.deviceType.isTablet()||c,g=o.options.register,b=S=>wn(S)||S===!1,y=S=>wn(S)||zn(S);g("skin",{processor:S=>wn(S)||S===!1,default:"oxide"}),g("skin_url",{processor:"string"}),g("height",{processor:y,default:Math.max(o.getElement().offsetHeight,400)}),g("width",{processor:y,default:mw.DOM.getStyle(o.getElement(),"width")}),g("min_height",{processor:"number",default:100}),g("min_width",{processor:"number"}),g("max_height",{processor:"number"}),g("max_width",{processor:"number"}),g("style_formats",{processor:"object[]"}),g("style_formats_merge",{processor:"boolean",default:!1}),g("style_formats_autohide",{processor:"boolean",default:!1}),g("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),g("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),g("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),g("font_size_input_default_unit",{processor:"string",default:"pt"}),g("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),g("content_langs",{processor:"object[]"}),g("removed_menuitems",{processor:"string",default:""}),g("menubar",{processor:S=>wn(S)||ss(S),default:!c}),g("menu",{processor:"object",default:{}}),g("toolbar",{processor:S=>ss(S)||wn(S)||Fn(S)?{value:S,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),mn(9,S=>{g("toolbar"+(S+1),{processor:"string"})}),g("toolbar_mode",{processor:"string",default:u?"scrolling":"floating"}),g("toolbar_groups",{processor:"object",default:{}}),g("toolbar_location",{processor:"string",default:Od.auto}),g("toolbar_persist",{processor:"boolean",default:!1}),g("toolbar_sticky",{processor:"boolean",default:o.inline}),g("toolbar_sticky_offset",{processor:"number",default:0}),g("fixed_toolbar_container",{processor:"string",default:""}),g("fixed_toolbar_container_target",{processor:"object"}),g("ui_mode",{processor:"string",default:"combined"}),g("file_picker_callback",{processor:"function"}),g("file_picker_validator_handler",{processor:"function"}),g("file_picker_types",{processor:"string"}),g("typeahead_urls",{processor:"boolean",default:!0}),g("anchor_top",{processor:b,default:"#top"}),g("anchor_bottom",{processor:b,default:"#bottom"}),g("draggable_modal",{processor:"boolean",default:!1}),g("statusbar",{processor:"boolean",default:!0}),g("elementpath",{processor:"boolean",default:!0}),g("branding",{processor:"boolean",default:!0}),g("promotion",{processor:"boolean",default:!0}),g("resize",{processor:S=>S==="both"||ss(S),default:!Bf.deviceType.isTouch()}),g("sidebar_show",{processor:"string"}),g("help_accessibility",{processor:"boolean",default:o.hasPlugin("help")}),g("default_font_stack",{processor:"string[]",default:[]})},PT=Ha("readonly"),I1=Ha("disabled"),LT=Ha("height"),B2=Ha("width"),$T=My(Ha("min_width")),HT=My(Ha("min_height")),F1=My(Ha("max_width")),Ny=My(Ha("max_height")),I2=My(Ha("style_formats")),jA=Ha("style_formats_merge"),qr=Ha("style_formats_autohide"),Ch=Ha("content_langs"),P1=Ha("removed_menuitems"),Sb=Ha("toolbar_mode"),ZA=Ha("toolbar_groups"),Dd=Ha("toolbar_location"),EB=Ha("fixed_toolbar_container"),a0=Ha("fixed_toolbar_container_target"),Sh=Ha("toolbar_persist"),fw=Ha("toolbar_sticky_offset"),zT=Ha("menubar"),pw=Ha("toolbar"),By=Ha("file_picker_callback"),GA=Ha("file_picker_validator_handler"),qA=Ha("font_size_input_default_unit"),hw=Ha("file_picker_types"),L1=Ha("typeahead_urls"),Iy=Ha("anchor_top"),bw=Ha("anchor_bottom"),OD=Ha("draggable_modal"),VT=Ha("statusbar"),$1=Ha("elementpath"),vw=Ha("branding"),F2=Ha("resize"),yw=Ha("paste_as_text"),If=Ha("sidebar_show"),UT=Ha("promotion"),Fy=Ha("help_accessibility"),Py=Ha("default_font_stack"),KA=Ha("skin"),P2=o=>o.options.get("skin")===!1,L2=o=>o.options.get("menubar")!==!1,YA=o=>{const c=o.options.get("skin_url");if(P2(o))return c;if(c)return o.documentBaseURI.toAbsolute(c);{const u=o.options.get("skin");return WA.baseURL+"/skins/ui/"+u}},WT=o=>o.options.get("line_height_formats").split(" "),kb=o=>{const c=pw(o),u=wn(c),g=Fn(c)&&c.length>0;return!ao(o)&&(g||u||c===!0)},xw=o=>{const c=mn(9,g=>o.options.get("toolbar"+(g+1))),u=Bt(c,wn);return vn(u.length>0,u)},ao=o=>xw(o).fold(()=>{const c=pw(o);return Vt(c,wn)&&c.length>0},Be),Ll=o=>Dd(o)===Od.bottom,Ly=o=>{var c;if(!o.inline)return z.none();const u=(c=EB(o))!==null&&c!==void 0?c:"";if(u.length>0)return qs(Ti(),u);const g=a0(o);return Vn(g)?z.some(yt(g)):z.none()},nc=o=>o.inline&&Ly(o).isSome(),vm=o=>Ly(o).getOrThunk(()=>Bs(La(yt(o.getElement())))),$y=o=>o.inline&&!L2(o)&&!kb(o)&&!ao(o),Ff=o=>(o.options.get("toolbar_sticky")||o.inline)&&!nc(o)&&!$y(o),Tp=o=>!nc(o)&&o.options.get("ui_mode")==="split",Hy=o=>{const c=o.options.get("menu");return ut(c,u=>({...u,items:u.items}))};var jT=Object.freeze({__proto__:null,get ToolbarMode(){return bm},get ToolbarLocation(){return Od},register:gw,getSkinUrl:YA,getSkinUrlOption:o=>z.from(o.options.get("skin_url")),isReadOnly:PT,isDisabled:I1,getSkin:KA,isSkinDisabled:P2,getHeightOption:LT,getWidthOption:B2,getMinWidthOption:$T,getMinHeightOption:HT,getMaxWidthOption:F1,getMaxHeightOption:Ny,getUserStyleFormats:I2,shouldMergeStyleFormats:jA,shouldAutoHideStyleFormats:qr,getLineHeightFormats:WT,getContentLanguages:Ch,getRemovedMenuItems:P1,isMenubarEnabled:L2,isMultipleToolbars:ao,isToolbarEnabled:kb,isToolbarPersist:Sh,getMultipleToolbarsOption:xw,getUiContainer:vm,useFixedContainer:nc,isSplitUiMode:Tp,getToolbarMode:Sb,isDraggableModal:OD,isDistractionFree:$y,isStickyToolbar:Ff,getStickyToolbarOffset:fw,getToolbarLocation:Dd,isToolbarLocationBottom:Ll,getToolbarGroups:ZA,getMenus:Hy,getMenubar:zT,getToolbar:pw,getFilePickerCallback:By,getFilePickerTypes:hw,useTypeaheadUrls:L1,getAnchorTop:Iy,getAnchorBottom:bw,getFilePickerValidatorHandler:GA,getFontSizeInputDefaultUnit:qA,useStatusBar:VT,useElementPath:$1,promotionEnabled:UT,useBranding:vw,getResize:F2,getPasteAsText:yw,getSidebarShow:If,useHelpAccessibility:Fy,getDefaultFontStack:Py});const XA=["visible","hidden","clip"],JA=o=>Er(o).length>0&&!Le(XA,o),Ep=o=>{if(Ve(o)){const c=Wa(o,"overflow-x"),u=Wa(o,"overflow-y");return JA(c)||JA(u)}return!1},QA=o=>o.plugins.fullscreen&&o.plugins.fullscreen.isFullscreen(),gg=(o,c)=>Tp(o)?((u,g)=>{const b=S1(g,Ep),y=b.length===0?er(g).map(ar).map(S=>S1(S,Ep)).getOr([]):b;return At(y).map(S=>({element:S,others:y.slice(1),isFullscreen:()=>QA(u)}))})(o,c):z.none(),eu=o=>{const c=[...Oe(o.others,_i),Ic()];return o.isFullscreen()?Ic():((u,g)=>pt(g,(b,y)=>Fm(b,y),u))(_i(o.element),c)},wa=Gm({name:"Button",factory:o=>{const c=Cb(o.action),u=o.dom.tag,g=b=>Gt(o.dom,"attributes").bind(y=>Gt(y,b));return{uid:o.uid,dom:o.dom,components:o.components,events:c,behaviours:ph(o.buttonBehaviours,[Rs.config({}),ts.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:u==="button"?{type:g("type").getOr("button"),...g("role").map(b=>({role:b})).getOr({})}:{role:o.role.getOr(g("role").getOr("button"))}},eventOrder:o.eventOrder}},configFields:[ht("uid",void 0),Yt("dom"),ht("components",[]),gb("buttonBehaviours",[Rs,ts]),Fr("action"),Fr("role"),ht("eventOrder",{})]}),Pf=o=>{const c=Aa(o),u=Vo(c),g=(S=>{const T=S.dom.attributes!==void 0?S.dom.attributes:[];return pt(T,(E,M)=>M.name==="class"?E:{...E,[M.name]:M.value},{})})(c),b=(S=>Array.prototype.slice.call(S.dom.classList,0))(c),y=u.length===0?{}:{innerHtml:Ik(c)};return{tag:ac(c),classes:b,attributes:g,...y}},ir=o=>{const c=(u=>u.uid!==void 0)(o)&&gr(o,"uid")?o.uid:Dv("memento");return{get:u=>u.getSystem().getByUid(c).getOrDie(),getOpt:u=>u.getSystem().getByUid(c).toOptional(),asSpec:()=>({...o,uid:c})}};var Tb=Object.freeze({__proto__:null,exhibit:(o,c)=>um({attributes:zm([{key:c.tabAttr,value:"true"}])})}),ww=[ht("tabAttr","data-alloy-tabstop")];const Na=Ra({fields:ww,name:"tabstopping",active:Tb}),i0=Do("tooltip.exclusive"),Eb=Do("tooltip.show"),_b=Do("tooltip.hide"),Cw=Do("tooltip.immediateHide"),Sw=Do("tooltip.immediateShow"),ZT=(o,c,u)=>{o.getSystem().broadcastOn([i0],{})};var eO=Object.freeze({__proto__:null,hideAllExclusive:ZT,immediateOpenClose:(o,c,u,g)=>$s(o,g?Sw:Cw),isEnabled:(o,c,u)=>u.isEnabled(),setComponents:(o,c,u,g)=>{u.getTooltip().each(b=>{b.getSystem().isConnected()&&_s.set(b,g)})},setEnabled:(o,c,u,g)=>u.setEnabled(g)}),tO=Object.freeze({__proto__:null,events:(o,c)=>{const u=y=>{c.getTooltip().each(S=>{S.getSystem().isConnected()&&(Zm(S),o.onHide(y,S),c.clearTooltip())}),c.clearTimer()},g=y=>{if(!c.isShowing()&&c.isEnabled()){ZT(y);const S=o.lazySink(y).getOrDie(),T=y.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:Ja(o.mode==="normal"?[tn(Os(),E=>{$s(y,Eb)}),tn(as(),E=>{$s(y,_b)})]:[]),behaviours:gn([_s.config({})])});c.setTooltip(T),zv(S,T),o.onShow(y,T),$u.position(S,T,{anchor:o.anchor(y)})}},b=y=>{c.getTooltip().each(S=>{const T=o.lazySink(y).getOrDie();$u.position(T,S,{anchor:o.anchor(y)})})};return Ja(Et([[s1(y=>{o.onSetup(y)}),tn(Eb,y=>{c.resetTimer(()=>{g(y)},o.delayForShow())}),tn(_b,y=>{c.resetTimer(()=>{u(y)},o.delayForHide())}),tn(Sw,y=>{c.resetTimer(()=>{g(y)},0)}),tn(Cw,y=>{c.resetTimer(()=>{u(y)},0)}),tn(Pc(),(y,S)=>{const T=S;T.universal||Le(T.channels,i0)&&u(y)}),ku(y=>{u(y)})],(()=>{switch(o.mode){case"normal":return[tn(_o(),y=>{$s(y,Sw)}),tn(wc(),y=>{$s(y,Cw)}),tn(Os(),y=>{$s(y,Eb)}),tn(as(),y=>{$s(y,_b)})];case"follow-highlight":return[tn(Li(),(y,S)=>{$s(y,Eb)}),tn(_n(),y=>{$s(y,_b)})];case"children-normal":return[tn(_o(),(y,S)=>{du(y.element).each(T=>{Fs(S.event.target,"[data-mce-tooltip]")&&c.getTooltip().fold(()=>{$s(y,Sw)},E=>{c.isShowing()&&(o.onShow(y,E),b(y))})})}),tn(wc(),y=>{du(y.element).fold(()=>{$s(y,Cw)},Ue)}),tn(Os(),y=>{qs(y.element,"[data-mce-tooltip]:hover").each(S=>{c.getTooltip().fold(()=>{$s(y,Eb)},T=>{c.isShowing()&&(o.onShow(y,T),b(y))})})}),tn(as(),y=>{qs(y.element,"[data-mce-tooltip]:hover").fold(()=>{$s(y,_b)},Ue)})];default:return[tn(_o(),(y,S)=>{du(y.element).each(T=>{Fs(S.event.target,"[data-mce-tooltip]")&&c.getTooltip().fold(()=>{$s(y,Sw)},E=>{c.isShowing()&&(o.onShow(y,E),b(y))})})}),tn(wc(),y=>{du(y.element).fold(()=>{$s(y,Cw)},Ue)})]}})()]))}}),$2=[Yt("lazySink"),Yt("tooltipDom"),ht("exclusive",!0),ht("tooltipComponents",[]),sr("delayForShow",ve(300)),sr("delayForHide",ve(300)),sr("onSetup",Ue),va("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ht("anchor",o=>({type:"hotspot",hotspot:o,layouts:{onLtr:ve([kc,Hc,Sc,Cl,wl,Ac]),onRtl:ve([kc,Hc,Sc,Cl,wl,Ac])},bubble:jm(0,-2,{})})),Hr("onHide"),Hr("onShow")],nO=Object.freeze({__proto__:null,init:()=>{const o=Go(!0),c=Br(),u=Br(),g=()=>{c.on(clearTimeout)},b=ve("not-implemented");return wd({getTooltip:u.get,isShowing:u.isSet,setTooltip:u.set,clearTooltip:u.clear,clearTimer:g,resetTimer:(y,S)=>{g(),c.set(setTimeout(y,S))},readState:b,isEnabled:()=>o.get(),setEnabled:y=>o.set(y)})}});const Ri=Ra({fields:$2,name:"tooltipping",active:tO,state:nO,apis:eO}),{entries:Du,setPrototypeOf:fg,isFrozen:ym,getPrototypeOf:kw,getOwnPropertyDescriptor:Ab}=Object;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */let{freeze:Uu,seal:jg,create:GT}=Object,{apply:Tw,construct:oO}=typeof Reflect<"u"&&Reflect;Uu||(Uu=function(o){return o}),jg||(jg=function(o){return o}),Tw||(Tw=function(o,c,u){return o.apply(c,u)}),oO||(oO=function(o,c){return new o(...c)});const zy=Gg(Array.prototype.forEach),sO=Gg(Array.prototype.pop),Vy=Gg(Array.prototype.push),Uy=Gg(String.prototype.toLowerCase),Ew=Gg(String.prototype.toString),ii=Gg(String.prototype.match),id=Gg(String.prototype.replace),qT=Gg(String.prototype.indexOf),KT=Gg(String.prototype.trim),Zg=Gg(Object.prototype.hasOwnProperty),Rd=Gg(RegExp.prototype.test),kh=(_w=TypeError,function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return oO(_w,c)});var _w;function Gg(o){return function(c){for(var u=arguments.length,g=new Array(u>1?u-1:0),b=1;b<u;b++)g[b-1]=arguments[b];return Tw(o,c,g)}}function Qa(o,c){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uy;fg&&fg(o,null);let g=c.length;for(;g--;){let b=c[g];if(typeof b=="string"){const y=u(b);y!==b&&(ym(c)||(c[g]=y),b=y)}o[b]=!0}return o}function H2(o){for(let c=0;c<o.length;c++)Zg(o,c)||(o[c]=null);return o}function c0(o){const c=GT(null);for(const[u,g]of Du(o))Zg(o,u)&&(Array.isArray(g)?c[u]=H2(g):g&&typeof g=="object"&&g.constructor===Object?c[u]=c0(g):c[u]=g);return c}function Ob(o,c){for(;o!==null;){const u=Ab(o,c);if(u){if(u.get)return Gg(u.get);if(typeof u.value=="function")return Gg(u.value)}o=kw(o)}return function(){return null}}const YT=Uu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),z2=Uu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),XT=Uu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Db=Uu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),H1=Uu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ym=Uu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cd=Uu(["#text"]),l0=Uu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),rO=Uu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aO=Uu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V2=Uu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Kr=jg(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Aw=jg(/<%[\w\W]*|[\w\W]*%>/gm),JT=jg(/\${[\w\W]*}/gm),iO=jg(/^data-[\-\w.\u00B7-\uFFFF]/),DD=jg(/^aria-[\-\w]+$/),cO=jg(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lO=jg(/^(?:\w+script|data):/i),RD=jg(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uO=jg(/^html$/i),MD=jg(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ow=Object.freeze({__proto__:null,MUSTACHE_EXPR:Kr,ERB_EXPR:Aw,TMPLIT_EXPR:JT,DATA_ATTR:iO,ARIA_ATTR:DD,IS_ALLOWED_URI:cO,IS_SCRIPT_OR_DATA:lO,ATTR_WHITESPACE:RD,DOCTYPE_NAME:uO,CUSTOM_ELEMENT:MD});const Dw=function(){return typeof window>"u"?null:window};var Rw=function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dw();const u=_t=>o(_t);if(u.version="3.1.7",u.removed=[],!c||!c.document||c.document.nodeType!==9)return u.isSupported=!1,u;let{document:g}=c;const b=g,y=b.currentScript,{DocumentFragment:S,HTMLTemplateElement:T,Node:E,Element:M,NodeFilter:P,NamedNodeMap:N=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:V,DOMParser:G,trustedTypes:Q}=c,pe=M.prototype,he=Ob(pe,"cloneNode"),xe=Ob(pe,"remove"),ie=Ob(pe,"nextSibling"),ae=Ob(pe,"childNodes"),Ce=Ob(pe,"parentNode");if(typeof T=="function"){const _t=g.createElement("template");_t.content&&_t.content.ownerDocument&&(g=_t.content.ownerDocument)}let ke,Re="";const{implementation:Ye,createNodeIterator:vt,createDocumentFragment:en,getElementsByTagName:jt}=g,{importNode:cn}=b;let Dn={};u.isSupported=typeof Du=="function"&&typeof Ce=="function"&&Ye&&Ye.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:fo,ERB_EXPR:jo,TMPLIT_EXPR:ls,DATA_ATTR:As,ARIA_ATTR:pr,IS_SCRIPT_OR_DATA:fi,ATTR_WHITESPACE:Zi,CUSTOM_ELEMENT:ca}=Ow;let{IS_ALLOWED_URI:ta}=Ow,ys=null;const ti=Qa({},[...YT,...z2,...XT,...H1,...cd]);let ja=null;const dd=Qa({},[...l0,...rO,...aO,...V2]);let pi=Object.seal(GT(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ml=null,zl=null,R0=!0,TC=!0,km=!1,E4=!0,av=!1,M0=!0,Hh=!1,fk=!1,EC=!1,iv=!1,pk=!1,_C=!1,L_=!0,hk=!1,bk=!0,N0=!1,jp={},wr=null;const Jf=Qa({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let af=null;const $_=Qa({},["audio","video","img","source","image","track"]);let vk=null;const yk=Qa({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_4="http://www.w3.org/1998/Math/MathML",H_="http://www.w3.org/2000/svg",cv="http://www.w3.org/1999/xhtml";let xk=cv,A4=!1,WN=null;const qL=Qa({},[_4,H_,cv],Ew);let z_=null;const fP=["application/xhtml+xml","text/html"];let Pd=null,AC=null;const q7=g.createElement("form"),pP=function(_t){return _t instanceof RegExp||_t instanceof Function},hP=function(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!AC||AC!==_t){if(_t&&typeof _t=="object"||(_t={}),_t=c0(_t),z_=fP.indexOf(_t.PARSER_MEDIA_TYPE)===-1?"text/html":_t.PARSER_MEDIA_TYPE,Pd=z_==="application/xhtml+xml"?Ew:Uy,ys=Zg(_t,"ALLOWED_TAGS")?Qa({},_t.ALLOWED_TAGS,Pd):ti,ja=Zg(_t,"ALLOWED_ATTR")?Qa({},_t.ALLOWED_ATTR,Pd):dd,WN=Zg(_t,"ALLOWED_NAMESPACES")?Qa({},_t.ALLOWED_NAMESPACES,Ew):qL,vk=Zg(_t,"ADD_URI_SAFE_ATTR")?Qa(c0(yk),_t.ADD_URI_SAFE_ATTR,Pd):yk,af=Zg(_t,"ADD_DATA_URI_TAGS")?Qa(c0($_),_t.ADD_DATA_URI_TAGS,Pd):$_,wr=Zg(_t,"FORBID_CONTENTS")?Qa({},_t.FORBID_CONTENTS,Pd):Jf,ml=Zg(_t,"FORBID_TAGS")?Qa({},_t.FORBID_TAGS,Pd):{},zl=Zg(_t,"FORBID_ATTR")?Qa({},_t.FORBID_ATTR,Pd):{},jp=!!Zg(_t,"USE_PROFILES")&&_t.USE_PROFILES,R0=_t.ALLOW_ARIA_ATTR!==!1,TC=_t.ALLOW_DATA_ATTR!==!1,km=_t.ALLOW_UNKNOWN_PROTOCOLS||!1,E4=_t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,av=_t.SAFE_FOR_TEMPLATES||!1,M0=_t.SAFE_FOR_XML!==!1,Hh=_t.WHOLE_DOCUMENT||!1,iv=_t.RETURN_DOM||!1,pk=_t.RETURN_DOM_FRAGMENT||!1,_C=_t.RETURN_TRUSTED_TYPE||!1,EC=_t.FORCE_BODY||!1,L_=_t.SANITIZE_DOM!==!1,hk=_t.SANITIZE_NAMED_PROPS||!1,bk=_t.KEEP_CONTENT!==!1,N0=_t.IN_PLACE||!1,ta=_t.ALLOWED_URI_REGEXP||cO,xk=_t.NAMESPACE||cv,pi=_t.CUSTOM_ELEMENT_HANDLING||{},_t.CUSTOM_ELEMENT_HANDLING&&pP(_t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pi.tagNameCheck=_t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_t.CUSTOM_ELEMENT_HANDLING&&pP(_t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pi.attributeNameCheck=_t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_t.CUSTOM_ELEMENT_HANDLING&&typeof _t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pi.allowCustomizedBuiltInElements=_t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),av&&(TC=!1),pk&&(iv=!0),jp&&(ys=Qa({},cd),ja=[],jp.html===!0&&(Qa(ys,YT),Qa(ja,l0)),jp.svg===!0&&(Qa(ys,z2),Qa(ja,rO),Qa(ja,V2)),jp.svgFilters===!0&&(Qa(ys,XT),Qa(ja,rO),Qa(ja,V2)),jp.mathMl===!0&&(Qa(ys,H1),Qa(ja,aO),Qa(ja,V2))),_t.ADD_TAGS&&(ys===ti&&(ys=c0(ys)),Qa(ys,_t.ADD_TAGS,Pd)),_t.ADD_ATTR&&(ja===dd&&(ja=c0(ja)),Qa(ja,_t.ADD_ATTR,Pd)),_t.ADD_URI_SAFE_ATTR&&Qa(vk,_t.ADD_URI_SAFE_ATTR,Pd),_t.FORBID_CONTENTS&&(wr===Jf&&(wr=c0(wr)),Qa(wr,_t.FORBID_CONTENTS,Pd)),bk&&(ys["#text"]=!0),Hh&&Qa(ys,["html","head","body"]),ys.table&&(Qa(ys,["tbody"]),delete ml.tbody),_t.TRUSTED_TYPES_POLICY){if(typeof _t.TRUSTED_TYPES_POLICY.createHTML!="function")throw kh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ke=_t.TRUSTED_TYPES_POLICY,Re=ke.createHTML("")}else ke===void 0&&(ke=function(Cr,Zs){if(typeof Cr!="object"||typeof Cr.createPolicy!="function")return null;let oc=null;const bc="data-tt-policy-suffix";Zs&&Zs.hasAttribute(bc)&&(oc=Zs.getAttribute(bc));const Si="dompurify"+(oc?"#"+oc:"");try{return Cr.createPolicy(Si,{createHTML:Qd=>Qd,createScriptURL:Qd=>Qd})}catch{return console.warn("TrustedTypes policy "+Si+" could not be created."),null}}(Q,y)),ke!==null&&typeof Re=="string"&&(Re=ke.createHTML(""));Uu&&Uu(_t),AC=_t}},bP=Qa({},["mi","mo","mn","ms","mtext"]),js=Qa({},["annotation-xml"]),O4=Qa({},["title","style","font","a","script"]),jN=Qa({},[...z2,...XT,...Db]),ZN=Qa({},[...H1,...Ym]),lv=function(_t){Vy(u.removed,{element:_t});try{Ce(_t).removeChild(_t)}catch{xe(_t)}},wk=function(_t,Cr){try{Vy(u.removed,{attribute:Cr.getAttributeNode(_t),from:Cr})}catch{Vy(u.removed,{attribute:null,from:Cr})}if(Cr.removeAttribute(_t),_t==="is"&&!ja[_t])if(iv||pk)try{lv(Cr)}catch{}else try{Cr.setAttribute(_t,"")}catch{}},Tm=function(_t){let Cr=null,Zs=null;if(EC)_t="<remove></remove>"+_t;else{const Si=ii(_t,/^[\r\n\t ]+/);Zs=Si&&Si[0]}z_==="application/xhtml+xml"&&xk===cv&&(_t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_t+"</body></html>");const oc=ke?ke.createHTML(_t):_t;if(xk===cv)try{Cr=new G().parseFromString(oc,z_)}catch{}if(!Cr||!Cr.documentElement){Cr=Ye.createDocument(xk,"template",null);try{Cr.documentElement.innerHTML=A4?Re:oc}catch{}}const bc=Cr.body||Cr.documentElement;return _t&&Zs&&bc.insertBefore(g.createTextNode(Zs),bc.childNodes[0]||null),xk===cv?jt.call(Cr,Hh?"html":"body")[0]:Hh?Cr.documentElement:bc},vP=function(_t){return vt.call(_t.ownerDocument||_t,_t,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT|P.SHOW_PROCESSING_INSTRUCTION|P.SHOW_CDATA_SECTION,null)},uv=function(_t){return _t instanceof V&&(typeof _t.nodeName!="string"||typeof _t.textContent!="string"||typeof _t.removeChild!="function"||!(_t.attributes instanceof N)||typeof _t.removeAttribute!="function"||typeof _t.setAttribute!="function"||typeof _t.namespaceURI!="string"||typeof _t.insertBefore!="function"||typeof _t.hasChildNodes!="function")},yP=function(_t){return typeof E=="function"&&_t instanceof E},Gb=function(_t,Cr,Zs){Dn[_t]&&zy(Dn[_t],oc=>{oc.call(u,Cr,Zs,AC)})},GN=function(_t){let Cr=null;if(Gb("beforeSanitizeElements",_t,null),uv(_t))return lv(_t),!0;const Zs=Pd(_t.nodeName);if(Gb("uponSanitizeElement",_t,{tagName:Zs,allowedTags:ys}),_t.hasChildNodes()&&!yP(_t.firstElementChild)&&Rd(/<[/\w]/g,_t.innerHTML)&&Rd(/<[/\w]/g,_t.textContent)||_t.nodeType===7||M0&&_t.nodeType===8&&Rd(/<[/\w]/g,_t.data))return lv(_t),!0;if(!ys[Zs]||ml[Zs]){if(!ml[Zs]&&D4(Zs)&&(pi.tagNameCheck instanceof RegExp&&Rd(pi.tagNameCheck,Zs)||pi.tagNameCheck instanceof Function&&pi.tagNameCheck(Zs)))return!1;if(bk&&!wr[Zs]){const oc=Ce(_t)||_t.parentNode,bc=ae(_t)||_t.childNodes;if(bc&&oc)for(let Si=bc.length-1;Si>=0;--Si){const Qd=he(bc[Si],!0);Qd.__removalCount=(_t.__removalCount||0)+1,oc.insertBefore(Qd,ie(_t))}}return lv(_t),!0}return _t instanceof M&&!function(oc){let bc=Ce(oc);bc&&bc.tagName||(bc={namespaceURI:xk,tagName:"template"});const Si=Uy(oc.tagName),Qd=Uy(bc.tagName);return!!WN[oc.namespaceURI]&&(oc.namespaceURI===H_?bc.namespaceURI===cv?Si==="svg":bc.namespaceURI===_4?Si==="svg"&&(Qd==="annotation-xml"||bP[Qd]):!!jN[Si]:oc.namespaceURI===_4?bc.namespaceURI===cv?Si==="math":bc.namespaceURI===H_?Si==="math"&&js[Qd]:!!ZN[Si]:oc.namespaceURI===cv?!(bc.namespaceURI===H_&&!js[Qd])&&!(bc.namespaceURI===_4&&!bP[Qd])&&!ZN[Si]&&(O4[Si]||!jN[Si]):!(z_!=="application/xhtml+xml"||!WN[oc.namespaceURI]))}(_t)?(lv(_t),!0):Zs!=="noscript"&&Zs!=="noembed"&&Zs!=="noframes"||!Rd(/<\/no(script|embed|frames)/i,_t.innerHTML)?(av&&_t.nodeType===3&&(Cr=_t.textContent,zy([fo,jo,ls],oc=>{Cr=id(Cr,oc," ")}),_t.textContent!==Cr&&(Vy(u.removed,{element:_t.cloneNode()}),_t.textContent=Cr)),Gb("afterSanitizeElements",_t,null),!1):(lv(_t),!0)},qN=function(_t,Cr,Zs){if(L_&&(Cr==="id"||Cr==="name")&&(Zs in g||Zs in q7))return!1;if(!(TC&&!zl[Cr]&&Rd(As,Cr))){if(!(R0&&Rd(pr,Cr))){if(!ja[Cr]||zl[Cr]){if(!(D4(_t)&&(pi.tagNameCheck instanceof RegExp&&Rd(pi.tagNameCheck,_t)||pi.tagNameCheck instanceof Function&&pi.tagNameCheck(_t))&&(pi.attributeNameCheck instanceof RegExp&&Rd(pi.attributeNameCheck,Cr)||pi.attributeNameCheck instanceof Function&&pi.attributeNameCheck(Cr))||Cr==="is"&&pi.allowCustomizedBuiltInElements&&(pi.tagNameCheck instanceof RegExp&&Rd(pi.tagNameCheck,Zs)||pi.tagNameCheck instanceof Function&&pi.tagNameCheck(Zs))))return!1}else if(!vk[Cr]){if(!Rd(ta,id(Zs,Zi,""))){if((Cr!=="src"&&Cr!=="xlink:href"&&Cr!=="href"||_t==="script"||qT(Zs,"data:")!==0||!af[_t])&&!(km&&!Rd(fi,id(Zs,Zi,"")))){if(Zs)return!1}}}}}return!0},D4=function(_t){return _t!=="annotation-xml"&&ii(_t,ca)},R4=function(_t){Gb("beforeSanitizeAttributes",_t,null);const{attributes:Cr}=_t;if(!Cr)return;const Zs={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ja};let oc=Cr.length;for(;oc--;){const bc=Cr[oc],{name:Si,namespaceURI:Qd,value:vx}=bc,dv=Pd(Si);let Em=Si==="value"?vx:KT(vx);const K7=Em;if(Zs.attrName=dv,Zs.attrValue=Em,Zs.keepAttr=!0,Zs.forceKeepAttr=void 0,Gb("uponSanitizeAttribute",_t,Zs),Em=Zs.attrValue,Zs.forceKeepAttr)continue;if(!Zs.keepAttr){wk(Si,_t);continue}if(!E4&&Rd(/\/>/i,Em)){wk(Si,_t);continue}av&&zy([fo,jo,ls],xP=>{Em=id(Em,xP," ")});const YN=Pd(_t.nodeName);if(qN(YN,dv,Em))if(!hk||dv!=="id"&&dv!=="name"||(wk(Si,_t),Em="user-content-"+Em),M0&&Rd(/((--!?|])>)|<\/(style|title)/i,Em))wk(Si,_t);else{if(ke&&typeof Q=="object"&&typeof Q.getAttributeType=="function"&&!Qd)switch(Q.getAttributeType(YN,dv)){case"TrustedHTML":Em=ke.createHTML(Em);break;case"TrustedScriptURL":Em=ke.createScriptURL(Em)}if(Em!==K7)try{Qd?_t.setAttributeNS(Qd,Si,Em):_t.setAttribute(Si,Em),uv(_t)?lv(_t):sO(u.removed)}catch{}}else wk(Si,_t)}Gb("afterSanitizeAttributes",_t,null)},KN=function _t(Cr){let Zs=null;const oc=vP(Cr);for(Gb("beforeSanitizeShadowDOM",Cr,null);Zs=oc.nextNode();)Gb("uponSanitizeShadowNode",Zs,null),GN(Zs)||(Zs.content instanceof S&&_t(Zs.content),R4(Zs));Gb("afterSanitizeShadowDOM",Cr,null)};return u.sanitize=function(_t){let Cr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zs=null,oc=null,bc=null,Si=null;if(A4=!_t,A4&&(_t="<!-->"),typeof _t!="string"&&!yP(_t)){if(typeof _t.toString!="function")throw kh("toString is not a function");if(typeof(_t=_t.toString())!="string")throw kh("dirty is not a string, aborting")}if(!u.isSupported)return _t;if(fk||hP(Cr),u.removed=[],typeof _t=="string"&&(N0=!1),N0){if(_t.nodeName){const dv=Pd(_t.nodeName);if(!ys[dv]||ml[dv])throw kh("root node is forbidden and cannot be sanitized in-place")}}else if(_t instanceof E)Zs=Tm("<!---->"),oc=Zs.ownerDocument.importNode(_t,!0),oc.nodeType===1&&oc.nodeName==="BODY"||oc.nodeName==="HTML"?Zs=oc:Zs.appendChild(oc);else{if(!iv&&!av&&!Hh&&_t.indexOf("<")===-1)return ke&&_C?ke.createHTML(_t):_t;if(Zs=Tm(_t),!Zs)return iv?null:_C?Re:""}Zs&&EC&&lv(Zs.firstChild);const Qd=vP(N0?_t:Zs);for(;bc=Qd.nextNode();)GN(bc)||(bc.content instanceof S&&KN(bc.content),R4(bc));if(N0)return _t;if(iv){if(pk)for(Si=en.call(Zs.ownerDocument);Zs.firstChild;)Si.appendChild(Zs.firstChild);else Si=Zs;return(ja.shadowroot||ja.shadowrootmode)&&(Si=cn.call(b,Si,!0)),Si}let vx=Hh?Zs.outerHTML:Zs.innerHTML;return Hh&&ys["!doctype"]&&Zs.ownerDocument&&Zs.ownerDocument.doctype&&Zs.ownerDocument.doctype.name&&Rd(uO,Zs.ownerDocument.doctype.name)&&(vx="<!DOCTYPE "+Zs.ownerDocument.doctype.name+`>
`+vx),av&&zy([fo,jo,ls],dv=>{vx=id(vx,dv," ")}),ke&&_C?ke.createHTML(vx):vx},u.setConfig=function(){hP(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),fk=!0},u.clearConfig=function(){AC=null,fk=!1},u.isValidAttribute=function(_t,Cr,Zs){AC||hP({});const oc=Pd(_t),bc=Pd(Cr);return qN(oc,bc,Zs)},u.addHook=function(_t,Cr){typeof Cr=="function"&&(Dn[_t]=Dn[_t]||[],Vy(Dn[_t],Cr))},u.removeHook=function(_t){if(Dn[_t])return sO(Dn[_t])},u.removeHooks=function(_t){Dn[_t]&&(Dn[_t]=[])},u.removeAllHooks=function(){Dn={}},u}();const QT=o=>Rw().sanitize(o);var qg=tinymce.util.Tools.resolve("tinymce.util.I18n");const W6={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},dO="temporary-placeholder",eE=o=>()=>Gt(o,dO).getOr("!not found!"),tE=(o,c)=>{const u=o.toLowerCase();if(qg.isRtl()){const g=((b,y)=>hi(b,y)?b:((S,T)=>S+T)(b,y))(u,"-rtl");return yo(c,g)?g:u}return u},Wo=(o,c)=>Gt(c,tE(o,c)),m=(o,c)=>{const u=c();return Wo(o,u).getOrThunk(eE(u))},h=()=>Ts("add-focusable",[Cs(o=>{Lk(o.element,"svg").each(c=>ws(c,"focusable","false"))})]),C=(o,c,u,g)=>{var b,y;const S=(E=>!!qg.isRtl()&&yo(W6,E))(c)?["tox-icon--flip"]:[],T=Gt(u,tE(c,u)).or(g).getOrThunk(eE(u));return{dom:{tag:o.tag,attributes:(b=o.attributes)!==null&&b!==void 0?b:{},classes:o.classes.concat(S),innerHtml:T},behaviours:gn([...(y=o.behaviours)!==null&&y!==void 0?y:[],h()])}},_=(o,c,u,g=z.none())=>C(c,o,u(),g),L={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},U=Gm({name:"Notification",factory:o=>{const c=Do("notification-text"),u=ir({dom:Pf(`<p id=${c}>${QT(o.backstageProvider.translate(o.text))}</p>`),behaviours:gn([_s.config({})])}),g=N=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${N}%`}}}),b=N=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${N}%`}}),y=ir({dom:{tag:"div",classes:o.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[g(0)]},b(0)],behaviours:gn([_s.config({})])}),S={updateProgress:(N,V)=>{N.getSystem().isConnected()&&y.getOpt(N).each(G=>{_s.set(G,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[g(V)]},b(V)])})},updateText:(N,V)=>{if(N.getSystem().isConnected()){const G=u.get(N);_s.set(G,[tc(V)])}}},T=Et([o.icon.toArray(),o.level.toArray(),o.level.bind(N=>z.from(L[N])).toArray()]),E=ir(wa.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":o.backstageProvider.translate("Close")}},components:[_("close",{tag:"span",classes:["tox-icon"]},o.iconProvider)],buttonBehaviours:gn([Na.config({}),Ri.config({...o.backstageProvider.tooltips.getConfig({tooltipText:o.backstageProvider.translate("Close")})})]),action:N=>{o.onAction(N)}})),M=((N,V,G)=>{const Q=G(),pe=Y(N,he=>yo(Q,tE(he,Q)));return C({tag:"div",classes:["tox-notification__icon"]},pe.getOr(dO),Q,z.none())})(T,0,o.iconProvider),P=[M,{dom:{tag:"div",classes:["tox-notification__body"]},components:[u.asSpec()],behaviours:gn([_s.config({})])}];return{uid:o.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":c},classes:o.level.map(N=>["tox-notification","tox-notification--in",`tox-notification--${N}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:gn([Na.config({}),Rs.config({}),ts.config({mode:"special",onEscape:N=>(o.onAction(N),z.some(!0))})]),components:P.concat(o.progress?[y.asSpec()]:[]).concat([E.asSpec()]),apis:S}},configFields:[Fr("level"),Yt("progress"),Fr("icon"),Yt("onAction"),Yt("text"),Yt("iconProvider"),Yt("backstageProvider")],apis:{updateProgress:(o,c,u)=>{o.updateProgress(c,u)},updateText:(o,c,u)=>{o.updateText(c,u)}}});var ee=(o,c,u,g)=>{const b=c.backstage.shared,y=()=>yt(o.queryCommandValue("ToggleView")===""?o.getContentAreaContainer():o.getContainer()),S=()=>{const E=_i(y());return z.some(E)},T=E=>{S().each(M=>{ft(E,P=>{or(P.element,"width"),Je(P.element)>M.width&&fs(P.element,"width",M.width+"px")})})};return{open:(E,M,P)=>{const N=()=>{g.on(Q=>{M();const pe=P();(he=>{_s.remove(he,V),G()})(Q),((he,xe)=>{Vo(he.element).length===0?((ie,ae)=>{Ma.hide(ie),g.clear(),ae&&o.focus()})(he,xe):((ie,ae)=>{ae&&ts.focusIn(ie)})(he,xe)})(Q,pe)})},V=Tu(U.sketch({text:E.text,level:Le(["success","error","warning","warn","info"],E.type)?E.type:void 0,progress:E.progressBar===!0,icon:E.icon,onAction:N,iconProvider:b.providers.icons,backstageProvider:b.providers}));if(g.isSet()){const Q=Wm(V);g.on(pe=>{_s.append(pe,Q),Ma.reposition(pe),ec.refresh(pe),T(pe.components())})}else{const Q=Tu(Ma.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:b.getSink,fireDismissalEventInstead:{},...b.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gn([ts.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),_s.config({}),...Ff(o)&&!b.header.isPositionedAtTop()?[]:[ec.config({contextual:{lazyContext:()=>z.some(_i(y())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ie=>gg(o,ie.element).map(ae=>({bounds:eu(ae),optScrollEnv:z.some({currentScrollTop:ae.element.dom.scrollTop,scrollElmTop:ol(ae.element).top})})).getOrThunk(()=>({bounds:Ic(),optScrollEnv:z.none()}))})]])})),pe=Wm(V),he={maxHeightFunction:x1()},xe={...b.anchors.banner(),overrides:he};g.set(Q),u.add(Q),Ma.showWithinBounds(Q,pe,{anchor:xe},S)}zn(E.timeout)&&E.timeout>0&&wh.setEditorTimeout(o,()=>{N()},E.timeout);const G=()=>{g.on(Q=>{Ma.reposition(Q),ec.refresh(Q),T(Q.components())})};return{close:N,reposition:G,text:Q=>{U.updateText(V,Q)},settings:E,getEl:()=>V.element.dom,progressBar:{value:Q=>{U.updateProgress(V,Q)}}}},close:E=>{E.close()},getArgs:E=>E.settings}},me;(function(o){o[o.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",o[o.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(me||(me={}));var Ee=me;const Ke="tox-menu-nav__js",kt="tox-collection__item",Bn="tox-swatch",co={normal:Ke,color:Bn},Qn="tox-collection__item--enabled",jn="tox-collection__item-icon",Ho="tox-collection__item-label",On="tox-collection__item-caret",ds="tox-collection__item--active",rr="tox-collection__item-container",Cn="tox-collection__item-container--row",_a=o=>Gt(co,o).getOr(Ke),ea=o=>o==="color"?"tox-swatches":"tox-menu",zr=o=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:ea(o),tieredMenu:"tox-tiered-menu"}),Ui=o=>{const c=zr(o);return{backgroundMenu:c.backgroundMenu,selectedMenu:c.selectedMenu,menu:c.menu,selectedItem:c.selectedItem,item:_a(o)}},hc=(o,c,u)=>{const g=zr(u);return{tag:"div",classes:Et([[g.menu,`tox-menu-${c}-column`],o?[g.hasIcons]:[]])}},Lf=[Wg.parts.items({})],Xm=(o,c,u)=>{const g=zr(u);return{dom:{tag:"div",classes:Et([[g.tieredMenu]])},markers:Ui(u)}},Kg=ve([yi("type","text"),Fr("data"),ht("inputAttributes",{}),ht("inputStyles",{}),ht("tag","input"),ht("inputClasses",[]),Hr("onSetValue"),sr("fromInputValue",In),sr("toInputValue",In),ht("styles",{}),ht("eventOrder",{}),Bl("inputBehaviours",[go,Rs]),ht("selectOnFocus",!0)]),Ca=o=>gn([Rs.config({onFocus:o.selectOnFocus?c=>{const u=c.element,g=Cd(u);o.type!=="range"&&u.dom.setSelectionRange(0,g.length)}:Ue})]),eo=o=>({...Ca(o),...Il(o.inputBehaviours,[go.config({store:{mode:"manual",...o.data.map(c=>({initialValue:c})).getOr({}),getValue:c=>o.fromInputValue(Cd(c.element)),setValue:(c,u)=>{Cd(c.element)!==u&&d1(c.element,o.toInputValue(u))}},onSetValue:o.onSetValue})])}),$l=o=>({tag:o.tag,attributes:{type:o.type,...o.inputAttributes},styles:o.inputStyles,classes:o.inputClasses}),ld=Gm({name:"Input",configFields:Kg(),factory:(o,c)=>({uid:o.uid,dom:$l(o),components:[],behaviours:eo(o),eventOrder:o.eventOrder})}),Jm=Do("refetch-trigger-event"),fr=Do("redirect-menu-item-interaction"),Tc="tox-menu__searcher",$f=o=>qs(o.element,`.${Tc}`).bind(c=>o.getSystem().getByDom(c).toOptional()),u0=$f,Qm=o=>({fetchPattern:go.getValue(o),selectionStart:o.element.dom.selectionStart,selectionEnd:o.element.dom.selectionEnd}),Js=o=>{const c=(b,y)=>(y.cut(),z.none()),u=(b,y)=>{const S={interactionEvent:y.event,eventType:y.event.raw.type};return Uo(b,fr,S),z.some(!0)},g="searcher-events";return{dom:{tag:"div",classes:[kt]},components:[ld.sketch({inputClasses:[Tc,"tox-textfield"],inputAttributes:{...o.placeholder.map(b=>({placeholder:o.i18n(b)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:gn([Ts(g,[tn(Iu(),b=>{$s(b,Jm)}),tn(Xa(),(b,y)=>{y.event.raw.key==="Escape"&&y.stop()})]),ts.config({mode:"special",onLeft:c,onRight:c,onSpace:c,onEnter:u,onEscape:u,onUp:u,onDown:u})]),eventOrder:{keydown:[g,ts.name()]}})]}},Mw="tox-collection--results__js",Nw=o=>{var c;return o.dom?{...o,dom:{...o.dom,attributes:{...(c=o.dom.attributes)!==null&&c!==void 0?c:{},id:Do("aria-item-search-result-id"),"aria-selected":"false"}}}:o},Rb=(o,c)=>u=>{const g=Se(u,c);return Oe(g,b=>({dom:o,components:b}))},nE=(o,c)=>{const u=[];let g=[];return ft(o,(b,y)=>{c(b,y)?(g.length>0&&u.push(g),g=[],(yo(b.dom,"innerHtml")||b.components&&b.components.length>0)&&g.push(b)):g.push(b)}),g.length>0&&u.push(g),Oe(u,b=>({dom:{tag:"div",classes:["tox-collection__group"]},components:b}))},Mb=(o,c,u)=>Wg.parts.items({preprocess:g=>{const b=Oe(g,u);return o!=="auto"&&o>1?Rb({tag:"div",classes:["tox-collection__group"]},o)(b):nE(b,(y,S)=>c[S].type==="separator")}}),Th=(o,c,u=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(o===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Mb(o,c,In)]}),Bw=o=>Qt(o,c=>"icon"in c&&c.icon!==void 0),Yg=o=>(console.error(Yu(o)),console.log(o),z.none()),j6=(o,c,u,g,b)=>{const y=(S=u,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Wg.parts.items({preprocess:T=>nE(T,(E,M)=>S[M].type==="separator")})]});var S;return{value:o,dom:y.dom,components:y.components,items:u}},ND=(o,c,u,g,b)=>{if(b.menuType==="color"){const y=(S=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Wg.parts.items({preprocess:S!=="auto"?Rb({tag:"div",classes:["tox-swatches__row"]},S):In})]}]}))(g);return{value:o,dom:y.dom,components:y.components,items:u}}if(b.menuType==="normal"&&g==="auto"){const y=Th(g,u);return{value:o,dom:y.dom,components:y.components,items:u}}if(b.menuType==="normal"||b.menuType==="searchable"){const y=b.menuType!=="searchable"?Th(g,u):b.searchMode.searchMode==="search-with-field"?((S,T,E)=>{const M=Do("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(S===1?["tox-collection--list"]:["tox-collection--grid"])},components:[Js({i18n:qg.translate,placeholder:E.placeholder}),{dom:{tag:"div",classes:[...S===1?["tox-collection--list"]:["tox-collection--grid"],Mw],attributes:{id:M}},components:[Mb(S,T,Nw)]}]}})(g,u,b.searchMode):((S,T,E=!0)=>{const M=Do("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Mw].concat(S===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:M}},components:[Mb(S,T,Nw)]}})(g,u);return{value:o,dom:y.dom,components:y.components,items:u}}if(b.menuType==="listpreview"&&g!=="auto"){const y=(S=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Wg.parts.items({preprocess:Rb({tag:"div",classes:["tox-collection__group"]},S)})]}))(g);return{value:o,dom:y.dom,components:y.components,items:u}}return{value:o,dom:hc(c,g,b.menuType),components:Lf,items:u}},Dc=yc("type"),Nb=yc("name"),BD=yc("label"),Bb=yc("text"),_B=yc("title"),mO=yc("icon"),oE=yc("value"),AB=mc("fetch"),Z6=mc("getSubmenuItems"),Wy=mc("onAction"),OB=mc("onItemAction"),z1=sr("onSetup",()=>Ue),ID=_r("name"),V1=_r("text"),FD=_r("role"),Hf=_r("icon"),U2=_r("tooltip"),jy=_r("label"),gO=_r("shortcut"),sE=il("select"),Iw=cl("active",!1),rE=cl("borderless",!1),Kd=cl("enabled",!0),fO=cl("primary",!1),PD=o=>ht("columns",o),pO=ht("meta",{}),hO=sr("onAction",Ue),W2=o=>yi("type",o),DB=o=>Ya("name","name",Yh(()=>Do(`${o}-name`)),Fc),G6=ps([Dc,V1]),q6=ps([W2("autocompleteitem"),Iw,Kd,pO,oE,V1,Hf]),aE=[Kd,U2,Hf,V1,z1,yi("context","mode:design")],LD=ps([Dc,Wy,gO].concat(aE)),RB=o=>Ai("toolbarbutton",LD,o),j2=[Iw].concat(aE),MB=ps(j2.concat([Dc,Wy,gO])),$D=o=>Ai("ToggleButton",MB,o),iE=[sr("predicate",Qe),va("scope","node",["node","editor"]),va("position","selection",["node","selection","line"])],NB=aE.concat([W2("contextformbutton"),yi("align","end"),fO,Wy,vl("original",In)]),BB=j2.concat([W2("contextformbutton"),yi("align","end"),fO,Wy,vl("original",In)]),IB=aE.concat([W2("contextformbutton")]),K6=j2.concat([W2("contextformtogglebutton")]),bO=[jy,ql("commands",oa("type",{contextformbutton:NB,contextformtogglebutton:BB})),sm("launch",oa("type",{contextformbutton:IB,contextformtogglebutton:K6})),sr("onInput",Ue),sr("onSetup",Ue)],Y6=[...iE,...bO,Gl("type",["contextform"]),sr("initValue",ve("")),_r("placeholder")],vO=[...iE,...bO,Gl("type",["contextsliderform"]),sr("initValue",ve(0)),sr("min",ve(0)),sr("max",ve(100))],HD=[...iE,...bO,Gl("type",["contextsizeinputform"]),sr("initValue",ve({width:"",height:""}))],cE=oa("type",{contextform:Y6,contextsliderform:vO,contextsizeinputform:HD}),FB=ps([W2("contexttoolbar"),wo("items",gf([Fc,om([_r("name"),_r("label"),ql("items",Fc)])]))].concat(iE)),X6=o=>({name:o.name.getOrUndefined(),label:o.label.getOrUndefined(),items:o.items}),zD=[Dc,yc("src"),_r("alt"),vd("classes",[],Fc)],J6=ps(zD),PB=[Dc,Bb,ID,vd("classes",["tox-collection__item-label"],Fc)],LB=ps(PB),Fw=eh(()=>Eg("type",{cardimage:J6,cardtext:LB,cardcontainer:$B})),$B=ps([Dc,yi("direction","horizontal"),yi("align","left"),yi("valign","middle"),ql("items",Fw)]),Pw=[Kd,V1,FD,gO,Ya("value","value",Yh(()=>Do("menuitem-value")),al()),pO,yi("context","mode:design")],HB=ps([Dc,jy,ql("items",Fw),z1,hO].concat(Pw)),zB=ps([Dc,Iw,Hf].concat(Pw)),Z2=[Dc,yc("fancytype"),hO],VB=[ht("initData",{})].concat(Z2),UB=[il("select"),rm("initData",{},[cl("allowCustomColors",!0),yi("storageKey","default"),Cu("colors",al())])].concat(Z2),WB=oa("fancytype",{inserttable:VB,colorswatch:UB}),yO=ps([Dc,z1,hO,Hf].concat(Pw)),Q6=ps([Dc,Z6,z1,Hf].concat(Pw)),xO=ps([Dc,Hf,Iw,z1,Wy].concat(Pw)),VD=(o,c,u)=>{const g=Oc(o.element,"."+u);if(g.length>0){const b=Jo(g,y=>{const S=y.dom.getBoundingClientRect().top,T=g[0].dom.getBoundingClientRect().top;return Math.abs(S-T)>c}).getOr(g.length);return z.some({numColumns:b,numRows:Math.ceil(g.length/b)})}return z.none()},G2=o=>((c,u)=>gn([Ts(c,u)]))(Do("unnamed-events"),o),xm=o=>hs.config({disabled:o,disableClass:"tox-collection__item--state-disabled"}),lE=o=>hs.config({disabled:o}),UD=o=>hs.config({disabled:o,disableClass:"tox-tbtn--disabled"}),uE=o=>hs.config({disabled:o,disableClass:"tox-tbtn--disabled",useNative:!1}),wO=(o,c)=>{const u=o.getApi(c);return g=>{g(u)}},Eh=(o,c)=>Cs(u=>{kn(o.onBeforeSetup)&&o.onBeforeSetup(u),wO(o,u)(g=>{const b=o.onSetup(g);kn(b)&&c.set(b)})}),_h=(o,c)=>ku(u=>wO(o,u)(c.get())),jB="silver.uistate",Zy="setDisabled",WD="init",ZB=["switchmode",WD],q2=(o,c)=>{const u=o.mainUi.outerContainer,g=[o.mainUi.mothership,...o.uiMotherships];c===Zy&&ft(g,b=>{b.broadcastOn([E1()],{target:u.element})}),ft(g,b=>{b.broadcastOn([jB],c)})},GB=(o,c)=>{o.on("init SwitchMode",u=>{q2(c,u.type)}),o.on("DisabledStateChange",u=>{if(!u.isDefaultPrevented()){const g=u.state?Zy:WD;q2(c,g),u.state||o.nodeChanged()}}),o.on("NodeChange",u=>{const g=o.ui.isEnabled()?u.type:Zy;q2(c,g)}),PT(o)&&o.mode.set("readonly")},Tl=o=>Td.config({channels:{[jB]:{onReceive:(c,u)=>{if(u===Zy||u==="setEnabled")return void hs.set(c,u===Zy);const{contextType:g,shouldDisable:b}=o();(g!=="mode"||Le(ZB,u))&&hs.set(c,b)}}}}),qB=(o,c)=>ri((u,g)=>{wO(o,u)(o.onAction),o.triggersSubmenu||c!==Ee.CLOSE_ON_EXECUTE||(u.getSystem().isConnected()&&$s(u,Sv()),g.stop())}),KB={[os()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Lw=ma,$w=(o,c,u,g)=>{const b=Go(Ue);return{type:"item",dom:c.dom,components:Lw(c.optComponents),data:o.data,eventOrder:KB,hasSubmenu:o.triggersSubmenu,itemBehaviours:gn([Ts("item-events",[qB(o,u),Eh(o,b),_h(o,b)]),xm(()=>!o.enabled||g.checkUiComponentContext(o.context).shouldDisable),Tl(()=>g.checkUiComponentContext(o.context)),_s.config({})].concat(o.itemBehaviours))}},K2=o=>({value:o.value,meta:{text:o.text.getOr(""),...o.meta}}),CO=o=>{const c=Bf.os.isMacOS()||Bf.os.isiOS(),u=c?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=o.split("+"),b=Oe(g,y=>{const S=y.toLowerCase().trim();return yo(u,S)?u[S]:y});return c?b.join(""):b.join("+")},SO=(o,c,u=[jn])=>_(o,{tag:"div",classes:u},c),jD=o=>({dom:{tag:"div",classes:[Ho]},components:[tc(qg.translate(o))]}),ZD=(o,c)=>({dom:{tag:"div",classes:c,innerHtml:o}}),Gy=(o,c)=>({dom:{tag:"div",classes:[Ho]},components:[{dom:{tag:o.tag,styles:o.styles},components:[tc(qg.translate(c))]}]}),YB=o=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[tc(CO(o))]}),GD=o=>SO("checkmark",o,["tox-collection__item-checkmark"]),qD=o=>{const c=o.map(u=>({attributes:{id:Do("menu-item"),"aria-label":qg.translate(u)}})).getOr({});return{tag:"div",classes:[Ke,kt],...c}},dE=(o,c,u,g=z.none())=>o.presets==="color"?((b,y,S)=>{const T=b.value,E=b.iconContent.map(P=>((N,V,G)=>{const Q=V();return Wo(N,Q).or(G).getOrThunk(eE(Q))})(P,y.icons,S)),M=b.ariaLabel.map(P=>({"aria-label":y.translate(P),"data-mce-name":P})).getOr({});return{dom:(()=>{const P=Bn,N=E.getOr(""),V={tag:"div",attributes:M,classes:[P]};return T==="custom"?{...V,tag:"button",classes:[...V.classes,"tox-swatches__picker-btn"],innerHtml:N}:T==="remove"?{...V,classes:[...V.classes,"tox-swatch--remove"],innerHtml:N}:Vn(T)?{...V,attributes:{...V.attributes,"data-mce-color":T},styles:{"background-color":T},innerHtml:N}:V})(),optComponents:[]}})(o,c,g):((b,y,S,T)=>{const E={tag:"div",classes:[jn]},M=S?b.iconContent.map(G=>_(G,E,y.icons,T)).orThunk(()=>z.some({dom:E})):z.none(),P=b.checkMark,N=z.from(b.meta).fold(()=>jD,G=>yo(G,"style")?re(Gy,G.style):jD),V=b.htmlContent.fold(()=>b.textContent.map(N),G=>z.some(ZD(G,[Ho])));return{dom:qD(b.ariaLabel),optComponents:[M,V,b.shortcutContent.map(YB),P,b.caret]}})(o,c,u,g),Hw=(o,c,u)=>Gt(o,"tooltipWorker").map(g=>[Ri.config({lazySink:c.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:b=>({type:"submenu",item:b,overrides:{maxHeightFunction:x1}}),mode:"follow-highlight",onShow:(b,y)=>{g(S=>{Ri.setComponents(b,[m1({element:yt(S)})])})}})]).getOrThunk(()=>u.map(g=>[Ri.config({...c.providers.tooltips.getConfig({tooltipText:g}),mode:"follow-highlight"})]).getOr([])),XB=(o,c)=>{const u=(g=>mw.DOM.encode(g))(qg.translate(o));if(c.length>0){const g=new RegExp((b=>b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(c),"gi");return u.replace(g,b=>`<span class="tox-autocompleter-highlight">${b}</span>`)}return u},JB=(o,c)=>Oe(o,u=>{switch(u.type){case"cardcontainer":return((y,S)=>{const T=y.direction==="vertical"?"tox-collection__item-container--column":Cn,E=y.align==="left"?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[rr,T,E,(()=>{switch(y.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:S}})(u,JB(u.items,c));case"cardimage":return((y,S,T)=>({dom:{tag:"img",classes:S,attributes:{src:y,alt:T.getOr("")}}}))(u.src,u.classes,u.alt);case"cardtext":const g=u.name.exists(y=>Le(c.cardText.highlightOn,y)),b=g?z.from(c.cardText.matchText).getOr(""):"";return ZD(XB(u.text,b),u.classes)}}),KD=r2(dw(),Nf()),QB=o=>({value:kO(o)}),eI=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,tI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,YD=o=>eI.test(o)||tI.test(o),kO=o=>Ba(o,"#").toUpperCase(),mE=o=>{const c=o.toString(16);return(c.length===1?"0"+c:c).toUpperCase()},gE=o=>{const c=mE(o.red)+mE(o.green)+mE(o.blue);return QB(c)},d0=Math.min,rs=Math.max,Y2=Math.round,nI=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,e8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,_p=(o,c,u,g)=>({red:o,green:c,blue:u,alpha:g}),zw=o=>{const c=parseInt(o,10);return c.toString()===o&&c>=0&&c<=255},XD=o=>{let c,u,g;const b=(o.hue||0)%360;let y=o.saturation/100,S=o.value/100;if(y=rs(0,d0(y,1)),S=rs(0,d0(S,1)),y===0)return c=u=g=Y2(255*S),_p(c,u,g,1);const T=b/60,E=S*y,M=E*(1-Math.abs(T%2-1)),P=S-E;switch(Math.floor(T)){case 0:c=E,u=M,g=0;break;case 1:c=M,u=E,g=0;break;case 2:c=0,u=E,g=M;break;case 3:c=0,u=M,g=E;break;case 4:c=M,u=0,g=E;break;case 5:c=E,u=0,g=M;break;default:c=u=g=0}return c=Y2(255*(c+P)),u=Y2(255*(u+P)),g=Y2(255*(g+P)),_p(c,u,g,1)},Vw=o=>{const c=(y=>{const S=(E=>({value:E.value.replace(eI,(P,N,V,G)=>N+N+V+V+G+G)}))(y),T=tI.exec(S.value);return T===null?["FFFFFF","FF","FF","FF"]:T})(o),u=parseInt(c[1],16),g=parseInt(c[2],16),b=parseInt(c[3],16);return _p(u,g,b,1)},m0=(o,c,u,g)=>{const b=parseInt(o,10),y=parseInt(c,10),S=parseInt(u,10),T=parseFloat(g);return _p(b,y,S,T)},U1=o=>{const c=nI.exec(o);if(c!==null)return z.some(m0(c[1],c[2],c[3],"1"));const u=e8.exec(o);return u!==null?z.some(m0(u[1],u[2],u[3],u[4])):z.none()},fE=o=>`rgba(${o.red},${o.green},${o.blue},${o.alpha})`,JD=_p(255,0,0,1),QD=(o,c)=>{o.dispatch("ResizeContent",c)},W1=(o,c)=>{o.dispatch("TextColorChange",c)},Hs=(o,c)=>o.dispatch("ResolveName",{name:c.nodeName.toLowerCase(),target:c}),oI=o=>{o.dispatch("ContextToolbarClose")},zs=(o,c)=>()=>{o(),c()},Md=o=>qy(o,"NodeChange",c=>{c.setEnabled(o.selection.isEditable())}),TO=(o,c)=>u=>{const g=Md(o)(u),b=((y,S)=>T=>{const E=Hd(),M=()=>{T.setActive(y.formatter.match(S));const P=y.formatter.formatChanged(S,T.setActive);E.set(P)};return y.initialized?M():y.once("init",M),()=>{y.off("init",M),E.clear()}})(o,c)(u);return()=>{g(),b()}},qy=(o,c,u)=>g=>{const b=()=>u(g),y=()=>{u(g),o.on(c,b)};return o.initialized?y():o.once("init",y),()=>{o.off("init",y),o.off(c,b)}},eR=o=>c=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("mceToggleFormat",!1,c.format)})},zf=(o,c)=>()=>o.execCommand(c);var X2=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const sI={},pE=o=>Gt(sI,o).getOrThunk(()=>{const c=`tinymce-custom-colors-${o}`,u=X2.getItem(c);if(es(u)){const b=X2.getItem("tinymce-custom-colors");X2.setItem(c,Vn(b)?b:"[]")}const g=((b,y=10)=>{const S=X2.getItem(b),T=wn(S)?JSON.parse(S):[],E=y-(M=T).length<0?M.slice(0,y):M;var M;const P=N=>{E.splice(N,1)};return{add:N=>{((V,G)=>{const Q=Jt(V,G);return Q===-1?z.none():z.some(Q)})(E,N).each(P),E.unshift(N),E.length>y&&E.pop(),X2.setItem(b,JSON.stringify(E))},state:()=>E.slice(0)}})(c,10);return sI[o]=g,g}),Ms=(o,c)=>{pE(o).add(c)},Ky=(o,c,u)=>({hue:o,saturation:c,value:u}),EO=o=>{let c=0,u=0,g=0;const b=o.red/255,y=o.green/255,S=o.blue/255,T=Math.min(b,Math.min(y,S)),E=Math.max(b,Math.max(y,S));return T===E?(g=T,Ky(0,0,100*g)):(c=b===T?3:S===T?1:5,c=60*(c-(b===T?y-S:S===T?b-y:S-b)/(E-T)),u=(E-T)/E,g=E,Ky(Math.round(c),Math.round(100*u),Math.round(100*g)))},rI=o=>gE(XD(o)),Yy="forecolor",hE="hilitecolor",tR=o=>{const c=[];for(let u=0;u<o.length;u+=2)c.push({text:o[u+1],value:o[u],icon:"checkmark",type:"choiceitem"});return c},Ah=o=>c=>c.options.get(o),nR="#000000",Uw=(o,c)=>c===Yy&&o.options.isSet("color_map_foreground")?Ah("color_map_foreground")(o):c===hE&&o.options.isSet("color_map_background")?Ah("color_map_background")(o):o.options.isSet("color_map_raw")?Ah("color_map_raw")(o):Ah("color_map")(o),oR=(o,c="default")=>Math.max(5,Math.ceil(Math.sqrt(Uw(o,c).length))),t8=(o,c)=>{const u=Ah("color_cols")(o),g=oR(o,c);return u===oR(o)?g:u},n8=(o,c="default")=>Math.round(c===Yy?Ah("color_cols_foreground")(o):c===hE?Ah("color_cols_background")(o):Ah("color_cols")(o)),aI=Ah("custom_colors"),iI=Ah("color_default_foreground"),o8=Ah("color_default_background"),cI=(o,c)=>{const u=yt(o.selection.getStart()),g=c==="hilitecolor"?am(u,b=>{if(Pe(b)){const y=Wa(b,"background-color");return vn(U1(y).exists(S=>S.alpha!==0),y)}return z.none()}).getOr("rgba(0, 0, 0, 0)"):Wa(u,"color");return U1(g).map(b=>"#"+gE(b).value)},_O=o=>{const c="choiceitem",u={type:c,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return o?[u,{type:c,text:"Custom color",icon:"color-picker",value:"custom"}]:[u]},Ww=(o,c,u,g)=>{u==="custom"?lI(o)(b=>{b.each(y=>{Ms(c,y),o.execCommand("mceApplyTextcolor",c,y),g(y)})},cI(o,c).getOr(nR)):u==="remove"?(g(""),o.execCommand("mceRemoveTextcolor",c)):(g(u),o.execCommand("mceApplyTextcolor",c,u))},dr=(o,c,u)=>o.concat((g=>Oe(pE(g).state(),b=>({type:"choiceitem",text:b,icon:"checkmark",value:b})))(c).concat(_O(u))),jw=(o,c,u)=>g=>{g(dr(o,c,u))},Xy=(o,c,u)=>{const g=c==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";o.setIconFill(g,u)},AO=(o,c)=>{o.setTooltip(c)},OO=(o,c)=>u=>{const g=cI(o,c);return Us(g,u.toUpperCase())},DO=(o,c,u)=>{if(Bi(u))return c==="forecolor"?"Text color":"Background color";const g=c==="forecolor"?"Text color {0}":"Background color {0}",b=dr(Uw(o,c),c,!1),y=Y(b,S=>S.value===u).getOr({text:""}).text;return o.translate([g,o.translate(y)])},sR=(o,c,u,g)=>{o.ui.registry.addSplitButton(c,{tooltip:DO(o,u,g.get()),presets:"color",icon:c==="forecolor"?"text-color":"highlight-bg-color",select:OO(o,u),columns:n8(o,u),fetch:jw(Uw(o,u),u,aI(o)),onAction:b=>{Ww(o,u,g.get(),Ue)},onItemAction:(b,y)=>{Ww(o,u,y,S=>{g.set(S),W1(o,{name:c,color:S})})},onSetup:b=>{Xy(b,c,g.get());const y=S=>{S.name===c&&(Xy(b,S.name,S.color),AO(b,DO(o,u,S.color)))};return o.on("TextColorChange",y),zs(Md(o)(b),()=>{o.off("TextColorChange",y)})}})},RO=(o,c,u,g,b)=>{o.ui.registry.addNestedMenuItem(c,{text:g,icon:c==="forecolor"?"text-color":"highlight-bg-color",onSetup:y=>(AO(y,DO(o,u,b.get())),Xy(y,c,b.get()),Md(o)(y)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:OO(o,u),initData:{storageKey:u},onAction:y=>{Ww(o,u,y.value,S=>{b.set(S),W1(o,{name:c,color:S})})}}]})},lI=o=>(c,u)=>{let g=!1;const b={colorpicker:u};o.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:(y,S)=>{S.name==="hex-valid"&&(g=S.value)},onSubmit:y=>{const S=y.getData().colorpicker;g?(c(z.from(S)),y.close()):o.windowManager.alert(o.translate(["Invalid hex color code: {0}",S]))},onClose:Ue,onCancel:()=>{c(z.none())}})},bE=(o,c,u,g,b,y,S,T)=>{const E=Bw(c),M=s8(c,u,g,b!=="color"?"normal":"color",y,S,T);return ND(o,E,M,g,{menuType:b})},s8=(o,c,u,g,b,y,S)=>ma(Oe(o,T=>{return T.type==="choiceitem"?(E=T,Ai("choicemenuitem",zB,E)).fold(Yg,M=>z.some(((P,N,V,G,Q,pe,he,xe=!0)=>{const ie=dE({presets:V,textContent:N?P.text:z.none(),htmlContent:z.none(),ariaLabel:P.text,iconContent:P.icon,shortcutContent:N?P.shortcut:z.none(),checkMark:N?z.some(GD(he.icons)):z.none(),caret:z.none(),value:P.value},he,xe),ae=P.text.filter(ve(!N)).map(Ce=>Ri.config(he.tooltips.getConfig({tooltipText:he.translate(Ce)})));return ga($w({context:P.context,data:K2(P),enabled:P.enabled,getApi:Ce=>({setActive:ke=>{ur.set(Ce,ke)},isActive:()=>ur.isOn(Ce),isEnabled:()=>!hs.isDisabled(Ce),setEnabled:ke=>hs.set(Ce,!ke)}),onAction:Ce=>G(P.value),onSetup:Ce=>(Ce.setActive(Q),Ue),triggersSubmenu:!1,itemBehaviours:[...ae.toArray()]},ie,pe,he),{toggling:{toggleClass:Qn,toggleOnExecute:!1,selected:P.active,exclusive:!0}})})(M,u===1,g,c,y(M.value),b,S,Bw(o)))):z.none();var E})),MO=(o,c)=>{const u=Ui(c);return o===1?{mode:"menu",moveOnTab:!0}:o==="auto"?{mode:"grid",selector:"."+u.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(c==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:g=>c==="color"?qs(g.element,"[aria-checked=true]"):z.none()}},rR=Do("cell-over"),vE=Do("cell-execute"),aR=(o,c,u)=>{const g=y=>Uo(y,vE,{row:o,col:c}),b=(y,S)=>{S.stop(),g(y)};return Tu({dom:{tag:"div",attributes:{role:"button","aria-label":u}},behaviours:gn([Ts("insert-table-picker-cell",[tn(Os(),Rs.focus),tn(os(),g),tn(cm(),b),tn(Dg(),b)]),ur.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Rs.config({onFocus:y=>Uo(y,rR,{row:o,col:c})})])})},iR=o=>Mt(o,c=>Oe(c,Wm)),uI=(o,c)=>tc(`${c}x${o}`),r8={inserttable:(o,c)=>{const u=(S=>(T,E)=>S.shared.providers.translate(["{0} columns, {1} rows",E,T]))(c),g=((S,T,E)=>{const M=[];for(let P=0;P<10;P++){const N=[];for(let V=0;V<10;V++){const G=S(P+1,V+1);N.push(aR(P,V,G))}M.push(N)}return M})(u),b=uI(0,0),y=ir({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[b],behaviours:gn([_s.config({})])});return{type:"widget",data:{value:Do("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[KD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:iR(g).concat(y.asSpec()),behaviours:gn([Ts("insert-table-picker",[Cs(S=>{_s.set(y.get(S),[b])}),kv(rR,(S,T,E)=>{const{row:M,col:P}=E.event;((N,V,G,Q,pe)=>{for(let he=0;he<10;he++)for(let xe=0;xe<10;xe++)ur.set(N[he][xe],he<=V&&xe<=G)})(g,M,P),_s.set(y.get(S),[uI(M+1,P+1)])}),kv(vE,(S,T,E)=>{const{row:M,col:P}=E.event;$s(S,Sv()),o.onAction({numRows:M+1,numColumns:P+1})})]),ts.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(o,c)=>{const u=((S,T)=>{const E=S.initData.allowCustomColors&&T.colorinput.hasCustomColors();return S.initData.colors.fold(()=>dr(T.colorinput.getColors(S.initData.storageKey),S.initData.storageKey,E),M=>M.concat(_O(E)))})(o,c),g=c.colorinput.getColorCols(o.initData.storageKey),b="color",y={...bE(Do("menu-value"),u,S=>{o.onAction({value:S})},g,b,Ee.CLOSE_ON_EXECUTE,o.select.getOr(Qe),c.shared.providers),markers:Ui(b),movement:MO(g,b),showMenuRole:!1};return{type:"widget",data:{value:Do("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[KD.widget(Wg.sketch(y))]}}},NO=o=>({type:"separator",dom:{tag:"div",classes:[kt,"tox-collection__group-heading"]},components:o.text.map(tc).toArray()});var cR=Object.freeze({__proto__:null,getCoupled:(o,c,u,g)=>u.getOrCreate(o,c,g),getExistingCoupled:(o,c,u,g)=>u.getExisting(o,c,g)}),dI=[wo("others",wv(vr.value,al()))],mI=Object.freeze({__proto__:null,init:()=>{const o={},c=(g,b)=>{if(Dt(g.others).length===0)throw new Error("Cannot find any known coupled components");return Gt(o,b)},u=ve({});return wd({readState:u,getExisting:(g,b,y)=>c(b,y).orThunk(()=>(Gt(b.others,y).getOrDie("No information found for coupled component: "+y),z.none())),getOrCreate:(g,b,y)=>c(b,y).getOrThunk(()=>{const S=Gt(b.others,y).getOrDie("No information found for coupled component: "+y)(g),T=g.getSystem().build(S);return o[y]=T,T})})}});const Qc=Ra({fields:dI,name:"coupling",apis:cR,state:mI}),lR=o=>{let c=z.none(),u=[];const g=S=>{b()?y(S):u.push(S)},b=()=>c.isSome(),y=S=>{c.each(T=>{setTimeout(()=>{S(T)},0)})};return o(S=>{b()||(c=z.some(S),ft(u,y),u=[])}),{get:g,map:S=>lR(T=>{g(E=>{T(S(E))})}),isReady:b}},a8={nu:lR,pure:o=>lR(c=>{c(o)})},i8=o=>{setTimeout(()=>{throw o},0)},J2=o=>{const c=u=>{o().then(u,i8)};return{map:u=>J2(()=>o().then(u)),bind:u=>J2(()=>o().then(g=>u(g).toPromise())),anonBind:u=>J2(()=>o().then(()=>u.toPromise())),toLazy:()=>a8.nu(c),toCached:()=>{let u=null;return J2(()=>(u===null&&(u=o()),u))},toPromise:o,get:c}},Jy=o=>J2(()=>new Promise(o)),Ib=o=>J2(()=>Promise.resolve(o)),gI=ve("sink"),fI=ve(Ug({name:gI(),overrides:ve({dom:{tag:"div"},behaviours:gn([$u.config({useFixed:Be})]),events:Ja([lm(Xa()),lm(qe()),lm(cm())])})})),Qy=(o,c)=>{const u=o.getHotspot(c).getOr(c),g="hotspot",b=o.getAnchorOverrides();return o.layouts.fold(()=>({type:g,hotspot:u,overrides:b}),y=>({type:g,hotspot:u,overrides:b,layouts:y}))},BO=(o,c,u,g,b,y,S)=>((E,M,P,N,V,G,Q)=>{const pe=((xe,ie,ae)=>(0,xe.fetch)(ae).map(ie))(E,M,N),he=hI(N,E);return pe.map(xe=>xe.bind(ie=>{const ae=ie.menus[ie.primary];return z.from(ae).each(Ce=>{E.listRole.each(ke=>{Ce.role=ke})}),z.from(kl.sketch({...G.menu(),uid:Dv(""),data:ie,highlightOnOpen:Q,onOpenMenu:(Ce,ke)=>{const Re=he().getOrDie();$u.position(Re,ke,{anchor:P}),Jr.decloak(V)},onOpenSubmenu:(Ce,ke,Re)=>{const Ye=he().getOrDie();$u.position(Ye,Re,{anchor:{type:"submenu",item:ke}}),Jr.decloak(V)},onRepositionMenu:(Ce,ke,Re)=>{const Ye=he().getOrDie();$u.position(Ye,ke,{anchor:P}),ft(Re,vt=>{$u.position(Ye,vt.triggeredMenu,{anchor:{type:"submenu",item:vt.triggeringItem}})})},onEscape:()=>(Rs.focus(N),Jr.close(V),z.some(!0))}))}))})(o,c,Qy(o,u),u,g,b,S).map(E=>(E.fold(()=>{Jr.isOpen(g)&&Jr.close(g)},M=>{Jr.cloak(g),Jr.open(g,M),y(g)}),g)),pI=(o,c,u,g,b,y,S)=>(Jr.close(g),Ib(g)),g0=(o,c,u,g,b,y)=>{const S=Qc.getCoupled(u,"sandbox");return(Jr.isOpen(S)?pI:BO)(o,c,u,S,g,b,y)},hI=(o,c)=>o.getSystem().getByUid(c.uid+"-"+gI()).map(u=>()=>vr.value(u)).getOrThunk(()=>c.lazySink.fold(()=>()=>vr.error(new Error("No internal sink is specified, nor could an external sink be found")),u=>()=>u(o))),uR=o=>{Jr.getState(o).each(c=>{kl.repositionMenus(c)})},j1=(o,c,u)=>{const g=Bv(),b=hI(c,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:g.id}},behaviours:ph(o.sandboxBehaviours,[go.config({store:{mode:"memory",initialValue:c}}),Jr.config({onOpen:(y,S)=>{const T=Qy(o,c);g.link(c.element),o.matchWidth&&((E,M,P)=>{const N=Qr.getCurrent(M).getOr(M),V=Je(E.element);P?fs(N.element,"min-width",V+"px"):((G,Q)=>{He.set(G,Q)})(N.element,V)})(T.hotspot,S,o.useMinWidth),o.onOpen(T,y,S),u!==void 0&&u.onOpen!==void 0&&u.onOpen(y,S)},onClose:(y,S)=>{g.unlink(c.element),b().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),u!==void 0&&u.onClose!==void 0&&u.onClose(y,S)},isPartOf:(y,S,T)=>Sf(S,T)||Sf(c,T),getAttachPoint:()=>b().getOrDie()}),Qr.config({find:y=>Jr.getState(y).bind(S=>Qr.getCurrent(S))}),Td.config({channels:{...Qk({isExtraPart:Qe}),...iy({doReposition:uR})}})])}},IO=o=>{const c=Qc.getCoupled(o,"sandbox");uR(c)},FO=()=>[ht("sandboxClasses",[]),gb("sandboxBehaviours",[Qr,Td,Jr,go])],fu=ve([Yt("dom"),Yt("fetch"),Hr("onOpen"),dm("onExecute"),ht("getHotspot",z.some),ht("getAnchorOverrides",ve({})),Nl(),Bl("dropdownBehaviours",[ur,Qc,ts,Rs]),Yt("toggleClass"),ht("eventOrder",{}),Fr("lazySink"),ht("matchWidth",!1),ht("useMinWidth",!1),Fr("role"),Fr("listRole")].concat(FO())),c8=ve([Vg({schema:[ah(),ht("fakeFocus",!1)],name:"menu",defaults:o=>({onExecute:o.onExecute})}),fI()]),Vf=pm({name:"Dropdown",configFields:fu(),partFields:c8(),factory:(o,c,u,g)=>{const b=E=>{Jr.getState(E).each(M=>{kl.highlightPrimary(M)})},y=(E,M,P)=>g0(o,In,E,g,M,P),S={expand:E=>{ur.isOn(E)||y(E,Ue,Vi.HighlightNone).get(Ue)},open:E=>{ur.isOn(E)||y(E,Ue,Vi.HighlightMenuAndItem).get(Ue)},refetch:E=>Qc.getExistingCoupled(E,"sandbox").fold(()=>y(E,Ue,Vi.HighlightMenuAndItem).map(Ue),M=>BO(o,In,E,M,g,Ue,Vi.HighlightMenuAndItem).map(Ue)),isOpen:ur.isOn,close:E=>{ur.isOn(E)&&y(E,Ue,Vi.HighlightMenuAndItem).get(Ue)},repositionMenus:E=>{ur.isOn(E)&&IO(E)}},T=(E,M)=>(fc(E),z.some(!0));return{uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.dropdownBehaviours,[ur.config({toggleClass:o.toggleClass,aria:{mode:"expanded"}}),Qc.config({others:{sandbox:E=>j1(o,E,{onOpen:()=>ur.on(E),onClose:()=>ur.off(E)})}}),ts.config({mode:"special",onSpace:T,onEnter:T,onDown:(E,M)=>{if(Vf.isOpen(E)){const P=Qc.getCoupled(E,"sandbox");b(P)}else Vf.open(E);return z.some(!0)},onEscape:(E,M)=>Vf.isOpen(E)?(Vf.close(E),z.some(!0)):z.none()}),Rs.config({})]),events:Cb(z.some(E=>{y(E,b,Vi.HighlightMenuAndItem).get(Ue)})),eventOrder:{...o.eventOrder,[os()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":o.listRole.getOr("true"),...o.role.fold(()=>({}),E=>({role:E})),...o.dom.tag==="button"?{type:Gt(o.dom,"attributes").bind(E=>Gt(E,"type")).getOr("button")}:{}}}}},apis:{open:(o,c)=>o.open(c),refetch:(o,c)=>o.refetch(c),expand:(o,c)=>o.expand(c),close:(o,c)=>o.close(c),isOpen:(o,c)=>o.isOpen(c),repositionMenus:(o,c)=>o.repositionMenus(c)}}),Uf=(o,c,u)=>{u0(o).each(g=>{var b;((y,S)=>{Es(S.element,"id").each(T=>ws(y.element,"aria-activedescendant",T))})(g,u),(Ss((b=c).element,Mw)?z.some(b.element):qs(b.element,"."+Mw)).each(y=>{Es(y,"id").each(S=>ws(g.element,"aria-controls",S))})}),ws(u.element,"aria-selected","true")},bI=(o,c,u)=>{ws(u.element,"aria-selected","false")},vI=o=>Qc.getExistingCoupled(o,"sandbox").bind($f).map(Qm).map(c=>c.fetchPattern).getOr("");var Fb;(function(o){o[o.ContentFocus=0]="ContentFocus",o[o.UiFocus=1]="UiFocus"})(Fb||(Fb={}));const l8=(o,c,u,g,b)=>{const y=u.shared.providers,S=E=>b?{...E,shortcut:z.none(),icon:E.text.isSome()?z.none():E.icon}:E;switch(o.type){case"menuitem":return(T=o,Ai("menuitem",yO,T)).fold(Yg,E=>z.some(((M,P,N,V=!0)=>{const G=dE({presets:"normal",iconContent:M.icon,textContent:M.text,htmlContent:z.none(),ariaLabel:M.text,caret:z.none(),checkMark:z.none(),shortcutContent:M.shortcut},N,V);return $w({context:M.context,data:K2(M),getApi:Q=>({isEnabled:()=>!hs.isDisabled(Q),setEnabled:pe=>hs.set(Q,!pe)}),enabled:M.enabled,onAction:M.onAction,onSetup:M.onSetup,triggersSubmenu:!1,itemBehaviours:[]},G,P,N)})(S(E),c,y,g)));case"nestedmenuitem":return(E=>Ai("nestedmenuitem",Q6,E))(o).fold(Yg,E=>z.some(((M,P,N,V=!0,G=!1)=>{const Q=G?(pe=N.icons,SO("chevron-down",pe,[On])):(xe=>SO("chevron-right",xe,[On]))(N.icons);var pe;const he=dE({presets:"normal",iconContent:M.icon,textContent:M.text,htmlContent:z.none(),ariaLabel:M.text,caret:z.some(Q),checkMark:z.none(),shortcutContent:M.shortcut},N,V);return $w({context:M.context,data:K2(M),getApi:xe=>({isEnabled:()=>!hs.isDisabled(xe),setEnabled:ie=>hs.set(xe,!ie),setIconFill:(ie,ae)=>{qs(xe.element,`svg path[class="${ie}"], rect[class="${ie}"]`).each(Ce=>{ws(Ce,"fill",ae)})},setTooltip:ie=>{const ae=N.translate(ie);ws(xe.element,"aria-label",ae)}}),enabled:M.enabled,onAction:Ue,onSetup:M.onSetup,triggersSubmenu:!0,itemBehaviours:[]},he,P,N)})(S(E),c,y,g,b)));case"togglemenuitem":return(E=>Ai("togglemenuitem",xO,E))(o).fold(Yg,E=>z.some(((M,P,N,V=!0)=>{const G=dE({iconContent:M.icon,textContent:M.text,htmlContent:z.none(),ariaLabel:M.text,checkMark:z.some(GD(N.icons)),caret:z.none(),shortcutContent:M.shortcut,presets:"normal",meta:M.meta},N,V);return ga($w({context:M.context,data:K2(M),enabled:M.enabled,getApi:Q=>({setActive:pe=>{ur.set(Q,pe)},isActive:()=>ur.isOn(Q),isEnabled:()=>!hs.isDisabled(Q),setEnabled:pe=>hs.set(Q,!pe)}),onAction:M.onAction,onSetup:M.onSetup,triggersSubmenu:!1,itemBehaviours:[]},G,P,N),{toggling:{toggleClass:Qn,toggleOnExecute:!1,selected:M.active},role:M.role.getOrUndefined()})})(S(E),c,y,g)));case"separator":return(E=>Ai("separatormenuitem",G6,E))(o).fold(Yg,E=>z.some(NO(E)));case"fancymenuitem":return(E=>Ai("fancymenuitem",WB,E))(o).fold(Yg,E=>((M,P)=>Gt(r8,M.fancytype).map(N=>N(M,P)))(E,u));default:return console.error("Unknown item in general menu",o),z.none()}var T},PO=(o,c,u,g,b,y,S)=>{const T=g===1,E=!T||Bw(o);return ma(Oe(o,M=>{switch(M.type){case"separator":return(P=M,Ai("Autocompleter.Separator",G6,P)).fold(Yg,N=>z.some(NO(N)));case"cardmenuitem":return(N=>Ai("cardmenuitem",HB,N))(M).fold(Yg,N=>z.some(((V,G,Q,pe)=>{const he={dom:qD(V.label),optComponents:[z.some({dom:{tag:"div",classes:[rr,Cn]},components:JB(V.items,pe)})]};return $w({context:"mode:design",data:K2({text:z.none(),...V}),enabled:V.enabled,getApi:xe=>({isEnabled:()=>!hs.isDisabled(xe),setEnabled:ie=>{hs.set(xe,!ie),ft(Oc(xe.element,"*"),ae=>{xe.getSystem().getByDom(ae).each(Ce=>{Ce.hasConfigured(hs)&&hs.set(Ce,!ie)})})}}),onAction:V.onAction,onSetup:V.onSetup,triggersSubmenu:!1,itemBehaviours:z.from(pe.itemBehaviours).getOr([])},he,G,Q.providers)})({...N,onAction:V=>{N.onAction(V),u(N.value,N.meta)}},b,y,{itemBehaviours:Hw(N.meta,y,z.none()),cardText:{matchText:c,highlightOn:S}})));default:return(N=>Ai("Autocompleter.Item",q6,N))(M).fold(Yg,N=>z.some(((V,G,Q,pe,he,xe,ie,ae=!0)=>{const Ce=dE({presets:pe,textContent:z.none(),htmlContent:Q?V.text.map(Re=>XB(Re,G)):z.none(),ariaLabel:V.text,iconContent:V.icon,shortcutContent:z.none(),checkMark:z.none(),caret:z.none(),value:V.value},ie.providers,ae,V.icon),ke=V.text.filter(Re=>!Q&&Re!=="");return $w({context:"mode:design",data:K2(V),enabled:V.enabled,getApi:ve({}),onAction:Re=>he(V.value,V.meta),onSetup:ve(Ue),triggersSubmenu:!1,itemBehaviours:Hw(V,ie,ke)},Ce,xe,ie.providers)})(N,c,T,"normal",u,b,y,E)))}var P}))},cc=(o,c,u,g,b,y)=>{const S=Bw(c),T=ma(Oe(c,M=>{const P=N=>l8(N,u,g,(V=>b?!yo(V,"text"):S)(N),b);return M.type==="nestedmenuitem"&&M.getSubmenuItems().length<=0?P({...M,enabled:!1}):P(M)})),E=(M=>M.searchMode==="no-search"?{menuType:"normal"}:{menuType:"searchable",searchMode:M})(y);return(b?j6:ND)(o,S,T,1,E)},Q2=o=>kl.singleData(o.value,o),yE=o=>ub(yt(o.startContainer),o.startOffset,yt(o.endContainer),o.endOffset),LO=(o,c)=>{const u=Do("autocompleter"),g=Go(!1),b=Go(!1),y=Br(),S=Tu(Ma.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:u}},components:[],fireDismissalEventInstead:{},inlineBehaviours:gn([Ts("dismissAutocompleter",[tn(Fu(),()=>N()),tn(Li(),(Q,pe)=>{Es(pe.event.target,"id").each(he=>ws(yt(o.getBody()),"aria-activedescendant",he))})])]),lazySink:c.getSink})),T=()=>Ma.isOpen(S),E=b.get,M=()=>{if(T()){Ma.hide(S),o.dom.remove(u,!1);const Q=yt(o.getBody());Es(Q,"aria-owns").filter(pe=>pe===u).each(()=>{Xs(Q,"aria-owns"),Xs(Q,"aria-activedescendant")})}},P=()=>Ma.getContent(S).bind(Q=>ct(Q.components(),0)),N=()=>o.execCommand("mceAutocompleterClose"),V=Q=>{const pe=(he=>{const xe=it(he,ie=>z.from(ie.columns)).getOr(1);return Mt(he,ie=>{const ae=ie.items;return PO(ae,ie.matchText,(Ce,ke)=>{const Re={hide:()=>N(),reload:Ye=>{M(),o.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ye})}};o.execCommand("mceAutocompleterRefreshActiveRange"),y.get().each(Ye=>{g.set(!0),ie.onAction(Re,Ye,Ce,ke),g.set(!1)})},xe,Ee.BUBBLE_TO_SANDBOX,c,ie.highlightOn)})})(Q);pe.length>0?(((he,xe)=>{const ie=it(he,ae=>z.from(ae.columns)).getOr(1);Ma.showMenuAt(S,{anchor:{type:"selection",getSelection:()=>y.get().map(yE),root:yt(o.getBody())}},((ae,Ce,ke,Re)=>{const Ye=MO(Ce,Re),vt=Ui(Re);return{data:Q2({...ae,movement:Ye,menuBehaviours:G2(Ce!=="auto"?[]:[Cs((en,jt)=>{VD(en,4,vt.item).each(({numColumns:cn,numRows:Dn})=>{ts.setGridSize(en,Dn,cn)})})])}),menu:{markers:Ui(Re),fakeFocus:ke===Fb.ContentFocus}}})(ND("autocompleter-value",!0,xe,ie,{menuType:"normal"}),ie,Fb.ContentFocus,"normal")),P().each(xa.highlightFirst)})(Q,pe),ws(yt(o.getBody()),"aria-owns",u),o.inline||G()):M()},G=()=>{o.dom.get(u)&&o.dom.remove(u,!1);const Q=o.getDoc().documentElement,pe=o.selection.getNode(),he=(xe=>c1(xe,!0))(S.element);li(he,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${pe.offsetTop}px`,left:`${pe.offsetLeft}px`}),o.dom.add(Q,he.dom),qs(he,'[role="menu"]').each(xe=>{or(xe,"position"),or(xe,"max-height")})};o.on("AutocompleterStart",({lookupData:Q})=>{b.set(!0),g.set(!1),V(Q)}),o.on("AutocompleterUpdate",({lookupData:Q})=>V(Q)),o.on("AutocompleterUpdateActiveRange",({range:Q})=>y.set(Q)),o.on("AutocompleterEnd",()=>{M(),b.set(!1),g.set(!1),y.clear()}),((Q,pe)=>{const he=(ie,ae)=>{Uo(ie,Xa(),{raw:ae})},xe=()=>Q.getMenu().bind(xa.getHighlighted);pe.on("keydown",ie=>{const ae=ie.which;Q.isActive()&&(Q.isMenuOpen()?ae===13?(xe().each(fc),ie.preventDefault()):ae===40?(xe().fold(()=>{Q.getMenu().each(xa.highlightFirst)},Ce=>{he(Ce,ie)}),ie.preventDefault(),ie.stopImmediatePropagation()):ae!==37&&ae!==38&&ae!==39||xe().each(Ce=>{he(Ce,ie),ie.preventDefault(),ie.stopImmediatePropagation()}):ae!==13&&ae!==38&&ae!==40||Q.cancelIfNecessary())}),pe.on("NodeChange",()=>{!Q.isActive()||Q.isProcessingAction()||pe.queryCommandState("mceAutoCompleterInRange")||Q.cancelIfNecessary()})})({cancelIfNecessary:N,isMenuOpen:T,isActive:E,isProcessingAction:g.get,getMenu:P},o)},Oh=(o,c,u)=>gm(o,c,u).isSome(),Xg=(o,c)=>{let u=null;return{cancel:()=>{u!==null&&(clearTimeout(u),u=null)},schedule:(...g)=>{u=setTimeout(()=>{o.apply(null,g),u=null},c)}}},Zw=o=>{const c=o.raw;return c.touches===void 0||c.touches.length!==1?z.none():z.some(c.touches[0])},ei=(o,c)=>{const u={stopBackspace:!0,...c},g=(N=>{const V=Br(),G=Go(!1),Q=Xg(he=>{N.triggerEvent(e1(),he),G.set(!0)},400),pe=zm([{key:I(),value:he=>(Zw(he).each(xe=>{Q.cancel();const ie={x:xe.clientX,y:xe.clientY,target:he.target};Q.schedule(he),G.set(!1),V.set(ie)}),z.none())},{key:j(),value:he=>(Q.cancel(),Zw(he).each(xe=>{V.on(ie=>{((ae,Ce)=>{const ke=Math.abs(ae.clientX-Ce.x),Re=Math.abs(ae.clientY-Ce.y);return ke>5||Re>5})(xe,ie)&&V.clear()})}),z.none())},{key:ne(),value:he=>(Q.cancel(),V.get().filter(xe=>xt(xe.target,he.target)).map(xe=>G.get()?(he.prevent(),!1):N.triggerEvent(Dg(),he)))}]);return{fireIfReady:(he,xe)=>Gt(pe,xe).bind(ie=>ie(he))}})(u),b=Oe(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),N=>Ed(o,N,V=>{g.fireIfReady(V,N).each(G=>{G&&V.kill()}),u.triggerEvent(N,V)&&V.kill()})),y=Br(),S=Ed(o,"paste",N=>{g.fireIfReady(N,"paste").each(V=>{V&&N.kill()}),u.triggerEvent("paste",N)&&N.kill(),y.set(setTimeout(()=>{u.triggerEvent(Cv(),N)},0))}),T=Ed(o,"keydown",N=>{u.triggerEvent("keydown",N)?N.kill():u.stopBackspace&&(V=>V.raw.which===bD[0]&&!Le(["input","textarea"],ac(V.target))&&!Oh(V.target,'[contenteditable="true"]'))(N)&&N.prevent()}),E=Ed(o,"focusin",N=>{u.triggerEvent("focusin",N)&&N.kill()}),M=Br(),P=Ed(o,"focusout",N=>{u.triggerEvent("focusout",N)&&N.kill(),M.set(setTimeout(()=>{u.triggerEvent(wc(),N)},0))});return{unbind:()=>{ft(b,N=>{N.unbind()}),T.unbind(),E.unbind(),P.unbind(),S.unbind(),y.on(clearTimeout),M.on(clearTimeout)}}},eS=(o,c)=>{const u=Gt(o,"target").getOr(c);return Go(u)},ex=Zr([{stopped:[]},{resume:["element"]},{complete:[]}]),$O=(o,c,u,g,b,y)=>{const S=o(c,g),T=((E,M)=>{const P=Go(!1),N=Go(!1);return{stop:()=>{P.set(!0)},cut:()=>{N.set(!0)},isStopped:P.get,isCut:N.get,event:E,setSource:M.set,getSource:M.get}})(u,b);return S.fold(()=>(y.logEventNoHandlers(c,g),ex.complete()),E=>{const M=E.descHandler;return G0(M)(T),T.isStopped()?(y.logEventStopped(c,E.element,M.purpose),ex.stopped()):T.isCut()?(y.logEventCut(c,E.element,M.purpose),ex.complete()):xo(E.element).fold(()=>(y.logNoParent(c,E.element,M.purpose),ex.complete()),P=>(y.logEventResponse(c,E.element,M.purpose),ex.resume(P)))})},xE=(o,c,u,g,b,y)=>$O(o,c,u,g,b,y).fold(Be,S=>xE(o,c,u,S,b,y),Qe),HO=(o,c,u,g,b)=>{const y=eS(u,g);return xE(o,c,u,g,y,b)},dR=()=>{const o=(()=>{const g={};return{registerId:(b,y,S)=>{Hn(S,(T,E)=>{const M=g[E]!==void 0?g[E]:{};M[y]=((P,N)=>({cHandler:re.apply(void 0,[P.handler].concat(N)),purpose:P.purpose}))(T,b),g[E]=M})},unregisterId:b=>{Hn(g,(y,S)=>{yo(y,b)&&delete y[b]})},filterByType:b=>Gt(g,b).map(y=>Co(y,(S,T)=>((E,M)=>({id:E,descHandler:M}))(T,S))).getOr([]),find:(b,y,S)=>Gt(g,y).bind(T=>am(S,E=>((M,P)=>sb(P).bind(N=>Gt(M,N)).map(N=>((V,G)=>({element:V,descHandler:G}))(P,N)))(T,E),b))}})(),c={},u=g=>{sb(g.element).each(b=>{delete c[b],o.unregisterId(b)})};return{find:(g,b,y)=>o.find(g,b,y),filter:g=>o.filterByType(g),register:g=>{const b=(S=>{const T=S.element;return sb(T).getOrThunk(()=>((E,M)=>{const P=Do(qo+"uid-");return j0(M,P),P})(0,S.element))})(g);gr(c,b)&&((S,T)=>{const E=c[T];if(E!==S)throw new Error('The tagId "'+T+'" is already used by: '+nb(E.element)+`
Cannot use it for: `+nb(S.element)+`
The conflicting element is`+(Ua(E.element)?" ":" not ")+"already in the DOM");u(S)})(g,b);const y=[g];o.registerId(y,b,g.events),c[b]=g},unregister:u,getById:g=>Gt(c,g)}},Jg=Gm({name:"Container",factory:o=>{const{attributes:c,...u}=o.dom;return{uid:o.uid,dom:{tag:"div",attributes:{role:"presentation",...c},...u},components:o.components,behaviours:tT(o.containerBehaviours),events:o.events,domModification:o.domModification,eventOrder:o.eventOrder}},configFields:[ht("components",[]),Bl("containerBehaviours",[]),ht("events",{}),ht("domModification",{}),ht("eventOrder",{})]}),wE=o=>{const c=he=>xo(o.element).fold(Be,xe=>xt(he,xe)),u=dR(),g=(he,xe)=>u.find(c,he,xe),b=ei(o.element,{triggerEvent:(he,xe)=>rh(he,xe.target,ie=>((ae,Ce,ke,Re)=>HO(ae,Ce,ke,ke.target,Re))(g,he,xe,ie))}),y={debugInfo:ve("real"),triggerEvent:(he,xe,ie)=>{rh(he,xe,ae=>HO(g,he,ie,xe,ae))},triggerFocus:(he,xe)=>{sb(he).fold(()=>{sd(he)},ie=>{rh(Og(),he,ae=>(((Ce,ke,Re,Ye,vt)=>{const en=eS(Re,Ye);$O(Ce,ke,Re,Ye,en,vt)})(g,Og(),{originator:xe,kill:Ue,prevent:Ue,target:he},he,ae),!1))})},triggerEscape:(he,xe)=>{y.triggerEvent("keydown",he.element,xe.event)},getByUid:he=>Q(he),getByDom:he=>pe(he),build:Tu,buildOrPatch:ih,addToGui:he=>{E(he)},removeFromGui:he=>{M(he)},addToWorld:he=>{S(he)},removeFromWorld:he=>{T(he)},broadcast:he=>{N(he)},broadcastOn:(he,xe)=>{V(he,xe)},broadcastEvent:(he,xe)=>{G(he,xe)},isConnected:Be},S=he=>{he.connect(y),Rt(he.element)||(u.register(he),ft(he.components(),S),y.triggerEvent(Ud(),he.element,{target:he.element}))},T=he=>{Rt(he.element)||(ft(he.components(),T),u.unregister(he)),he.disconnect()},E=he=>{zv(o,he)},M=he=>{Zm(he)},P=he=>{const xe=u.filter(Pc());ft(xe,ie=>{const ae=ie.descHandler;G0(ae)(he)})},N=he=>{P({universal:!0,data:he})},V=(he,xe)=>{P({universal:!1,channels:he,data:xe})},G=(he,xe)=>((ie,ae,Ce)=>{const ke=(Re=>{const Ye=Go(!1);return{stop:()=>{Ye.set(!0)},cut:Ue,isStopped:Ye.get,isCut:Qe,event:Re,setSource:oo("Cannot set source of a broadcasted event"),getSource:oo("Cannot get source of a broadcasted event")}})(ae);return ft(ie,Re=>{const Ye=Re.descHandler;G0(Ye)(ke)}),ke.isStopped()})(u.filter(he),xe),Q=he=>u.getById(he).fold(()=>vr.error(new Error('Could not find component with uid: "'+he+'" in system.')),vr.value),pe=he=>{const xe=sb(he).getOr("not found");return Q(xe)};return S(o),{root:o,element:o.element,destroy:()=>{b.unbind(),si(o.element)},add:E,remove:M,getByUid:Q,getByDom:pe,addToWorld:S,removeFromWorld:T,broadcast:N,broadcastOn:V,broadcastEvent:G}},tx=ve([ht("prefix","form-field"),Bl("fieldBehaviours",[Qr,go])]),tS=ve([Ug({schema:[Yt("dom")],name:"label"}),Ug({factory:{sketch:o=>({uid:o.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:o.text}})},schema:[Yt("text")],name:"aria-descriptor"}),zu({factory:{sketch:o=>{const c=((u,g)=>{const b={};return Hn(u,(y,S)=>{Le(g,S)||(b[S]=y)}),b})(o,["factory"]);return o.factory.sketch(c)}},schema:[Yt("factory")],name:"field"})]),Yr=pm({name:"FormField",configFields:tx(),partFields:tS(),factory:(o,c,u,g)=>{const b=Il(o.fieldBehaviours,[Qr.config({find:T=>lr(T,o,"field")}),go.config({store:{mode:"manual",getValue:T=>Qr.getCurrent(T).bind(go.getValue),setValue:(T,E)=>{Qr.getCurrent(T).each(M=>{go.setValue(M,E)})}}})]),y=Ja([Cs((T,E)=>{const M=Fl(T,o,["label","field","aria-descriptor"]);M.field().each(P=>{const N=Do(o.prefix);M.label().each(V=>{ws(V.element,"for",N),ws(P.element,"id",N)}),M["aria-descriptor"]().each(V=>{const G=Do(o.prefix);ws(V.element,"id",G),ws(P.element,"aria-describedby",G)})})})]),S={getField:T=>lr(T,o,"field"),getLabel:T=>lr(T,o,"label")};return{uid:o.uid,dom:o.dom,components:c,behaviours:b,events:y,apis:S}},apis:{getField:(o,c)=>o.getField(c),getLabel:(o,c)=>o.getLabel(c)}});var mR=tinymce.util.Tools.resolve("tinymce.html.Entities");const nS=(o,c,u,g)=>{const b=yI(o,c,u,g);return Yr.sketch(b)},yI=(o,c,u,g)=>({dom:gR(u),components:o.toArray().concat([c]),fieldBehaviours:gn(g)}),gR=o=>({tag:"div",classes:["tox-form__group"].concat(o)}),Ap=(o,c)=>Yr.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tc(c.translate(o))]}),Yd=Do("form-component-change"),CE=Do("form-component-input"),oS=Do("form-close"),Z1=Do("form-cancel"),Pb=Do("form-action"),Gw=Do("form-submit"),zO=Do("form-block"),sS=Do("form-unblock"),fR=Do("form-tabchange"),VO=Do("form-resize"),xI=(o,c,u)=>{const g=o.label.map(N=>Ap(N,c)),b=c.icons(),y=N=>(V,G)=>{gm(G.event.target,"[data-collection-item-value]").each(Q=>{N(V,G,Q,Ei(Q,"data-collection-item-value"))})},S=y((N,V,G,Q)=>{V.stop(),c.checkUiComponentContext("mode:design").shouldDisable||c.isDisabled()||Uo(N,Pb,{name:o.name,value:Q})}),T=[tn(Os(),y((N,V,G)=>{sd(G,!0)})),tn(cm(),S),tn(Dg(),S),tn(_o(),y((N,V,G)=>{qs(N.element,"."+ds).each(Q=>{$o(Q,ds)}),xn(G,ds)})),tn(Oi(),y(N=>{qs(N.element,"."+ds).each(V=>{$o(V,ds),ey(V)})})),ri(y((N,V,G,Q)=>{Uo(N,Pb,{name:o.name,value:Q})}))],E=(N,V)=>Oe(Oc(N.element,".tox-collection__item"),V),M=Yr.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(o.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:In},behaviours:gn([hs.config({disabled:()=>c.checkUiComponentContext(o.context).shouldDisable,onDisabled:N=>{E(N,V=>{xn(V,"tox-collection__item--state-disabled"),ws(V,"aria-disabled",!0)})},onEnabled:N=>{E(N,V=>{$o(V,"tox-collection__item--state-disabled"),Xs(V,"aria-disabled")})}}),Tl(()=>c.checkUiComponentContext(o.context)),_s.config({}),Ri.config({...c.tooltips.getConfig({tooltipText:"",onShow:N=>{qs(N.element,"."+ds+"[data-mce-tooltip]").each(V=>{Es(V,"data-mce-tooltip").each(G=>{Ri.setComponents(N,c.tooltips.getComponents({tooltipText:G}))})})}}),mode:"children-keyboard-focus",anchor:N=>({type:"node",node:qs(N.element,"."+ds).orThunk(()=>fn(".tox-collection__item")),root:N.element,layouts:{onLtr:ve([kc,Hc,Sc,Cl,wl,Ac]),onRtl:ve([kc,Hc,Sc,Cl,wl,Ac])},bubble:jm(0,-2,{})})}),go.config({store:{mode:"memory",initialValue:u.getOr([])},onSetValue:(N,V)=>{((G,Q)=>{const pe=c.checkUiComponentContext("mode:design").shouldDisable||c.isDisabled()?" tox-collection__item--state-disabled":"",he=Oe(Q,ae=>{const Ce=qg.translate(ae.text),ke=o.columns===1?`<div class="tox-collection__item-label">${Ce}</div>`:"",Re=`<div class="tox-collection__item-icon">${(en=>{var jt;return(jt=b[en])!==null&&jt!==void 0?jt:en})(ae.icon)}</div>`,Ye={_:" "," - ":" ","-":" "},vt=Ce.replace(/\_| \- |\-/g,en=>Ye[en]);return`<div data-mce-tooltip="${vt}" class="tox-collection__item${pe}" tabindex="-1" data-collection-item-value="${mR.encodeAllRaw(ae.value)}" aria-label="${vt}">${Re}${ke}</div>`}),xe=o.columns!=="auto"&&o.columns>1?Se(he,o.columns):[he],ie=Oe(xe,ae=>`<div class="tox-collection__group">${ae.join("")}</div>`);cp(G.element,ie.join(""))})(N,V),o.columns==="auto"&&VD(N,5,"tox-collection__item").each(({numRows:G,numColumns:Q})=>{ts.setGridSize(N,G,Q)}),$s(N,VO)}}),Na.config({}),ts.config((P=o.columns,P===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:P==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${kt}`}})),Ts("collection-events",T)]),eventOrder:{[os()]:["disabling","alloy.base.behaviour","collection-events"],[_o()]:["collection-events","tooltipping"]}});var P;return nS(g,M,["tox-form__group--collection"],[])},wI=["input","textarea"],SE=o=>{const c=ac(o);return Le(wI,c)},UO=(o,c)=>{const u=c.getRoot(o).getOr(o.element);$o(u,c.invalidClass),c.notify.each(g=>{SE(o.element)&&ws(o.element,"aria-invalid",!1),g.getContainer(o).each(b=>{cp(b,g.validHtml)}),g.onValid(o)})},WO=(o,c,u,g)=>{const b=c.getRoot(o).getOr(o.element);xn(b,c.invalidClass),c.notify.each(y=>{SE(o.element)&&ws(o.element,"aria-invalid",!0),y.getContainer(o).each(S=>{cp(S,g)}),y.onInvalid(o,g)})},pR=(o,c,u)=>c.validator.fold(()=>Ib(vr.value(!0)),g=>g.validate(o)),rS=(o,c,u)=>(c.notify.each(g=>{g.onValidate(o)}),pR(o,c).map(g=>o.getSystem().isConnected()?g.fold(b=>(WO(o,c,0,b),vr.error(b)),b=>(UO(o,c),vr.value(b))):vr.error("No longer in system")));var CI=Object.freeze({__proto__:null,markValid:UO,markInvalid:WO,query:pR,run:rS,isInvalid:(o,c)=>{const u=c.getRoot(o).getOr(o.element);return Ss(u,c.invalidClass)}}),hR=Object.freeze({__proto__:null,events:(o,c)=>o.validator.map(u=>Ja([tn(u.onEvent,g=>{rS(g,o).get(In)})].concat(u.validateOnLoad?[Cs(g=>{rS(g,o).get(Ue)})]:[]))).getOr({})}),SI=[Yt("invalidClass"),ht("getRoot",z.none),gc("notify",[ht("aria","alert"),ht("getContainer",z.none),ht("validHtml",""),Hr("onValid"),Hr("onInvalid"),Hr("onValidate")]),gc("validator",[Yt("validate"),ht("onEvent","input"),ht("validateOnLoad",!0)])];const Lb=Ra({fields:SI,name:"invalidating",active:hR,apis:CI,extra:{validation:o=>c=>{const u=go.getValue(c);return Ib(o(u))}}}),aS=Ra({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Ja([dn(NC(),Be)]),exhibit:()=>um({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),jO=Do("color-input-change"),kE=Do("color-swatch-change"),bR=Do("color-picker-cancel"),TE=Ug({schema:[Yt("dom")],name:"label"}),G1=o=>Ug({name:o+"-edge",overrides:c=>c.model.manager.edgeActions[o].fold(()=>({}),u=>({events:Ja([qc(I(),(g,b,y)=>u(g,y),[c]),qc(qe(),(g,b,y)=>u(g,y),[c]),qc(Sn(),(g,b,y)=>{y.mouseIsDown.get()&&u(g,y)},[c])])}))}),ZO=G1("top-left"),kI=G1("top"),u8=G1("top-right"),TI=G1("right"),GO=G1("bottom-right"),qO=G1("bottom"),EE=G1("bottom-left"),vR=G1("left"),KO=zu({name:"thumb",defaults:ve({dom:{styles:{position:"absolute"}}}),overrides:o=>({events:Ja([ed(I(),o,"spectrum"),ed(j(),o,"spectrum"),ed(ne(),o,"spectrum"),ed(qe(),o,"spectrum"),ed(Sn(),o,"spectrum"),ed(Ys(),o,"spectrum")])})}),Qg=o=>yb(o.event);var yR=[TE,vR,TI,kI,qO,ZO,u8,EE,GO,KO,zu({schema:[vl("mouseIsDown",()=>Go(!1))],name:"spectrum",overrides:o=>{const c=o.model.manager,u=(g,b)=>c.getValueFromEvent(b).map(y=>c.setValueFrom(g,o,y));return{behaviours:gn([ts.config({mode:"special",onLeft:(g,b)=>c.onLeft(g,o,Qg(b)),onRight:(g,b)=>c.onRight(g,o,Qg(b)),onUp:(g,b)=>c.onUp(g,o,Qg(b)),onDown:(g,b)=>c.onDown(g,o,Qg(b))}),Na.config({}),Rs.config({})]),events:Ja([tn(I(),u),tn(j(),u),tn(qe(),u),tn(Sn(),(g,b)=>{o.mouseIsDown.get()&&u(g,b)})])}}})];const qw=ve("slider.change.value"),q1=o=>{const c=o.event.raw;if((u=>u.type.indexOf("touch")!==-1)(c)){const u=c;return u.touches!==void 0&&u.touches.length===1?z.some(u.touches[0]).map(g=>Wr(g.clientX,g.clientY)):z.none()}{const u=c;return u.clientX!==void 0?z.some(u).map(g=>Wr(g.clientX,g.clientY)):z.none()}},ef=o=>o.model.minX,nx=o=>o.model.minY,YO=o=>o.model.minX-1,_E=o=>o.model.minY-1,ox=o=>o.model.maxX,f0=o=>o.model.maxY,iS=o=>o.model.maxX+1,cS=o=>o.model.maxY+1,p0=(o,c,u)=>c(o)-u(o),K1=o=>p0(o,ox,ef),EI=o=>p0(o,f0,nx),Hl=o=>K1(o)/2,_I=o=>EI(o)/2,lS=(o,c)=>c?o.stepSize*o.speedMultiplier:o.stepSize,Dh=o=>o.snapToGrid,da=o=>o.snapStart,d8=o=>o.rounded,uS=(o,c)=>o[c+"-edge"]!==void 0,AI=o=>uS(o,"left"),Wi=o=>uS(o,"right"),AE=o=>uS(o,"top"),dS=o=>uS(o,"bottom"),Op=o=>o.model.value.get(),Rh=(o,c)=>({x:o,y:c}),pg=(o,c)=>{Uo(o,qw(),{value:c})},XO=(o,c,u,g)=>o<c?o:o>u?u:o===c?c-1:Math.max(c,o-g),OI=(o,c,u,g)=>o>u?o:o<c?c:o===u?u+1:Math.min(u,o+g),m8=(o,c,u)=>Math.max(c,Math.min(u,o)),g8=o=>{const{min:c,max:u,range:g,value:b,step:y,snap:S,snapStart:T,rounded:E,hasMinEdge:M,hasMaxEdge:P,minBound:N,maxBound:V,screenRange:G}=o,Q=M?c-1:c,pe=P?u+1:u;if(b<N)return Q;if(b>V)return pe;{const he=((ie,ae,Ce)=>Math.min(Ce,Math.max(ie,ae))-ae)(b,N,V),xe=m8(he/G*g+c,Q,pe);return S&&xe>=c&&xe<=u?((ie,ae,Ce,ke,Re)=>Re.fold(()=>{const Ye=ie-ae,vt=Math.round(Ye/ke)*ke;return m8(ae+vt,ae-1,Ce+1)},Ye=>{const vt=(ie-Ye)%ke,en=Math.round(vt/ke),jt=Math.floor((ie-Ye)/ke),cn=Math.floor((Ce-Ye)/ke),Dn=Ye+Math.min(cn,jt+en)*ke;return Math.max(Ye,Dn)}))(xe,c,u,y,T):E?Math.round(xe):xe}},f8=o=>{const{min:c,max:u,range:g,value:b,hasMinEdge:y,hasMaxEdge:S,maxBound:T,maxOffset:E,centerMinEdge:M,centerMaxEdge:P}=o;return b<c?y?0:M:b>u?S?T:P:(b-c)/g*E},xR="top",p8="right",DI="bottom",OE="left",h0=o=>o.element.dom.getBoundingClientRect(),Mh=(o,c)=>o[c],lc=o=>{const c=h0(o);return Mh(c,OE)},JO=o=>{const c=h0(o);return Mh(c,p8)},DE=o=>{const c=h0(o);return Mh(c,xR)},RI=o=>{const c=h0(o);return Mh(c,DI)},MI=o=>{const c=h0(o);return Mh(c,"width")},NI=o=>{const c=h0(o);return Mh(c,"height")},hg=(o,c,u)=>(o+c)/2-u,Dp=(o,c)=>{const u=h0(o),g=h0(c),b=Mh(u,OE),y=Mh(u,p8),S=Mh(g,OE);return hg(b,y,S)},RE=(o,c)=>{const u=h0(o),g=h0(c),b=Mh(u,xR),y=Mh(u,DI),S=Mh(g,xR);return hg(b,y,S)},mS=(o,c)=>{Uo(o,qw(),{value:c})},ME=(o,c,u)=>{const g={min:ef(c),max:ox(c),range:K1(c),value:u,step:lS(c),snap:Dh(c),snapStart:da(c),rounded:d8(c),hasMinEdge:AI(c),hasMaxEdge:Wi(c),minBound:lc(o),maxBound:JO(o),screenRange:MI(o)};return g8(g)},NE=o=>(c,u,g)=>((b,y,S,T)=>{const E=(b>0?OI:XO)(Op(S),ef(S),ox(S),lS(S,T));return mS(y,E),z.some(E)})(o,c,u,g).map(Be),QO=(o,c,u,g,b,y)=>{const S=((T,E,M,P,N)=>{const V=MI(T),G=P.bind(he=>z.some(Dp(he,T))).getOr(0),Q=N.bind(he=>z.some(Dp(he,T))).getOr(V),pe={min:ef(E),max:ox(E),range:K1(E),value:M,hasMinEdge:AI(E),hasMaxEdge:Wi(E),minBound:lc(T),minOffset:0,maxBound:JO(T),maxOffset:V,centerMinEdge:G,centerMaxEdge:Q};return f8(pe)})(c,y,u,g,b);return lc(c)-lc(o)+S},BE=NE(-1),e3=NE(1),wR=z.none,BI=z.none,IE={"top-left":z.none(),top:z.none(),"top-right":z.none(),right:z.some((o,c)=>{pg(o,iS(c))}),"bottom-right":z.none(),bottom:z.none(),"bottom-left":z.none(),left:z.some((o,c)=>{pg(o,YO(c))})};var h8=Object.freeze({__proto__:null,setValueFrom:(o,c,u)=>{const g=ME(o,c,u);return mS(o,g),g},setToMin:(o,c)=>{const u=ef(c);mS(o,u)},setToMax:(o,c)=>{const u=ox(c);mS(o,u)},findValueOfOffset:ME,getValueFromEvent:o=>q1(o).map(c=>c.left),findPositionOfValue:QO,setPositionFromValue:(o,c,u,g)=>{const b=Op(u),y=QO(o,g.getSpectrum(o),b,g.getLeftEdge(o),g.getRightEdge(o),u),S=Je(c.element)/2;fs(c.element,"left",y-S+"px")},onLeft:BE,onRight:e3,onUp:wR,onDown:BI,edgeActions:IE});const t3=(o,c)=>{Uo(o,qw(),{value:c})},Rp=(o,c,u)=>{const g={min:nx(c),max:f0(c),range:EI(c),value:u,step:lS(c),snap:Dh(c),snapStart:da(c),rounded:d8(c),hasMinEdge:AE(c),hasMaxEdge:dS(c),minBound:DE(o),maxBound:RI(o),screenRange:NI(o)};return g8(g)},bg=o=>(c,u,g)=>((b,y,S,T)=>{const E=(b>0?OI:XO)(Op(S),nx(S),f0(S),lS(S,T));return t3(y,E),z.some(E)})(o,c,u,g).map(Be),Y1=(o,c,u,g,b,y)=>{const S=((T,E,M,P,N)=>{const V=NI(T),G=P.bind(he=>z.some(RE(he,T))).getOr(0),Q=N.bind(he=>z.some(RE(he,T))).getOr(V),pe={min:nx(E),max:f0(E),range:EI(E),value:M,hasMinEdge:AE(E),hasMaxEdge:dS(E),minBound:DE(T),minOffset:0,maxBound:RI(T),maxOffset:V,centerMinEdge:G,centerMaxEdge:Q};return f8(pe)})(c,y,u,g,b);return DE(c)-DE(o)+S},Mp=z.none,CR=z.none,Mi=bg(-1),b8=bg(1),Kw={"top-left":z.none(),top:z.some((o,c)=>{pg(o,_E(c))}),"top-right":z.none(),right:z.none(),"bottom-right":z.none(),bottom:z.some((o,c)=>{pg(o,cS(c))}),"bottom-left":z.none(),left:z.none()};var gS=Object.freeze({__proto__:null,setValueFrom:(o,c,u)=>{const g=Rp(o,c,u);return t3(o,g),g},setToMin:(o,c)=>{const u=nx(c);t3(o,u)},setToMax:(o,c)=>{const u=f0(c);t3(o,u)},findValueOfOffset:Rp,getValueFromEvent:o=>q1(o).map(c=>c.top),findPositionOfValue:Y1,setPositionFromValue:(o,c,u,g)=>{const b=Op(u),y=Y1(o,g.getSpectrum(o),b,g.getTopEdge(o),g.getBottomEdge(o),u),S=oi(c.element)/2;fs(c.element,"top",y-S+"px")},onLeft:Mp,onRight:CR,onUp:Mi,onDown:b8,edgeActions:Kw});const FE=(o,c)=>{Uo(o,qw(),{value:c})},sx=(o,c)=>({x:o,y:c}),rx=(o,c)=>(u,g,b)=>((y,S,T,E,M)=>{const P=y>0?OI:XO,N=S?Op(E).x:P(Op(E).x,ef(E),ox(E),lS(E,M)),V=S?P(Op(E).y,nx(E),f0(E),lS(E,M)):Op(E).y;return FE(T,sx(N,V)),z.some(N)})(o,c,u,g,b).map(Be),II=rx(-1,!1),PE=rx(1,!1),n3=rx(-1,!0),SR=rx(1,!0),$b={"top-left":z.some((o,c)=>{pg(o,Rh(YO(c),_E(c)))}),top:z.some((o,c)=>{pg(o,Rh(Hl(c),_E(c)))}),"top-right":z.some((o,c)=>{pg(o,Rh(iS(c),_E(c)))}),right:z.some((o,c)=>{pg(o,Rh(iS(c),_I(c)))}),"bottom-right":z.some((o,c)=>{pg(o,Rh(iS(c),cS(c)))}),bottom:z.some((o,c)=>{pg(o,Rh(Hl(c),cS(c)))}),"bottom-left":z.some((o,c)=>{pg(o,Rh(YO(c),cS(c)))}),left:z.some((o,c)=>{pg(o,Rh(YO(c),_I(c)))})};var LE=Object.freeze({__proto__:null,setValueFrom:(o,c,u)=>{const g=ME(o,c,u.left),b=Rp(o,c,u.top),y=sx(g,b);return FE(o,y),y},setToMin:(o,c)=>{const u=ef(c),g=nx(c);FE(o,sx(u,g))},setToMax:(o,c)=>{const u=ox(c),g=f0(c);FE(o,sx(u,g))},getValueFromEvent:o=>q1(o),setPositionFromValue:(o,c,u,g)=>{const b=Op(u),y=QO(o,g.getSpectrum(o),b.x,g.getLeftEdge(o),g.getRightEdge(o),u),S=Y1(o,g.getSpectrum(o),b.y,g.getTopEdge(o),g.getBottomEdge(o),u),T=Je(c.element)/2,E=oi(c.element)/2;fs(c.element,"left",y-T+"px"),fs(c.element,"top",S-E+"px")},onLeft:II,onRight:PE,onUp:n3,onDown:SR,edgeActions:$b});const Np=pm({name:"Slider",configFields:[ht("stepSize",1),ht("speedMultiplier",10),ht("onChange",Ue),ht("onChoose",Ue),ht("onInit",Ue),ht("onDragStart",Ue),ht("onDragEnd",Ue),ht("snapToGrid",!1),ht("rounded",!0),Fr("snapStart"),wo("model",oa("mode",{x:[ht("minX",0),ht("maxX",100),vl("value",o=>Go(o.mode.minX)),Yt("getInitialValue"),$a("manager",h8)],y:[ht("minY",0),ht("maxY",100),vl("value",o=>Go(o.mode.minY)),Yt("getInitialValue"),$a("manager",gS)],xy:[ht("minX",0),ht("maxX",100),ht("minY",0),ht("maxY",100),vl("value",o=>Go({x:o.mode.minX,y:o.mode.minY})),Yt("getInitialValue"),$a("manager",LE)]})),Bl("sliderBehaviours",[ts,go]),vl("mouseIsDown",()=>Go(!1))],partFields:yR,factory:(o,c,u,g)=>{const b=ie=>pc(ie,o,"thumb"),y=ie=>pc(ie,o,"spectrum"),S=ie=>lr(ie,o,"left-edge"),T=ie=>lr(ie,o,"right-edge"),E=ie=>lr(ie,o,"top-edge"),M=ie=>lr(ie,o,"bottom-edge"),P=o.model,N=P.manager,V=(ie,ae)=>{N.setPositionFromValue(ie,ae,o,{getLeftEdge:S,getRightEdge:T,getTopEdge:E,getBottomEdge:M,getSpectrum:y})},G=(ie,ae)=>{P.value.set(ae);const Ce=b(ie);V(ie,Ce)},Q=ie=>{const ae=o.mouseIsDown.get();o.mouseIsDown.set(!1),ae&&lr(ie,o,"thumb").each(Ce=>{const ke=P.value.get();o.onChoose(ie,Ce,ke)})},pe=(ie,ae)=>{ae.stop(),o.mouseIsDown.set(!0),o.onDragStart(ie,b(ie))},he=(ie,ae)=>{ae.stop(),o.onDragEnd(ie,b(ie)),Q(ie)},xe=ie=>{lr(ie,o,"spectrum").map(ts.focusIn)};return{uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.sliderBehaviours,[ts.config({mode:"special",focusIn:xe}),go.config({store:{mode:"manual",getValue:ie=>P.value.get(),setValue:G}}),Td.config({channels:{[Jk()]:{onReceive:Q}}})]),events:Ja([tn(qw(),(ie,ae)=>{((Ce,ke)=>{G(Ce,ke);const Re=b(Ce);o.onChange(Ce,Re,ke)})(ie,ae.event.value)}),Cs((ie,ae)=>{const Ce=P.getInitialValue();P.value.set(Ce);const ke=b(ie);V(ie,ke);const Re=y(ie);o.onInit(ie,ke,Re,P.value.get())}),tn(I(),pe),tn(ne(),he),tn(qe(),(ie,ae)=>{xe(ie),pe(ie,ae)}),tn(Ys(),he)]),apis:{resetToMin:ie=>{N.setToMin(ie,o)},resetToMax:ie=>{N.setToMax(ie,o)},setValue:G,refresh:V},domModification:{styles:{position:"relative"}}}},apis:{setValue:(o,c,u)=>{o.setValue(c,u)},resetToMin:(o,c)=>{o.resetToMin(c)},resetToMax:(o,c)=>{o.resetToMax(c)},refresh:(o,c)=>{o.refresh(c)}}}),fS=Do("rgb-hex-update"),FI=Do("slider-update"),PI=Do("palette-update"),pS="form",v8=[Bl("formBehaviours",[go])],kR=o=>"<alloy.field."+o+">",o3=(o,c)=>({uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.formBehaviours,[go.config({store:{mode:"manual",getValue:u=>{const g=Fa(u,o);return ut(g,(b,y)=>b().bind(S=>{return T=Qr.getCurrent(S),E=new Error(`Cannot find a current component to extract the value from for form part '${y}': `+nb(S.element)),T.fold(()=>vr.error(E),vr.value);var T,E}).map(go.getValue))},setValue:(u,g)=>{Hn(g,(b,y)=>{lr(u,o,y).each(S=>{Qr.getCurrent(S).each(T=>{go.setValue(T,b)})})})}}})]),apis:{getField:(u,g)=>lr(u,o,g).bind(Qr.getCurrent)}}),hS={getField:Rv((o,c,u)=>o.getField(c,u)),sketch:o=>{const c=(()=>{const y=[];return{field:(S,T)=>(y.push(S),uy(pS,kR(S),T)),record:ve(y)}})(),u=o(c),g=c.record(),b=Oe(g,y=>zu({name:y,pname:kR(y)}));return Qx(pS,v8,b,o3,u)}},s3=Do("valid-input"),$E=Do("invalid-input"),LI=Do("validating-input"),HE="colorcustom.rgb.",bS={isEnabled:Be,setEnabled:Ue,immediatelyShow:Ue,immediatelyHide:Ue},y8=(o,c,u,g,b,y)=>{const S=(G,Q)=>{const pe=Q.get();G!==pe.isEnabled()&&(pe.setEnabled(G),G?pe.immediatelyShow():pe.immediatelyHide())},T=(G,Q,pe)=>Lb.config({invalidClass:c("invalid"),notify:{onValidate:he=>{Uo(he,LI,{type:G})},onValid:he=>{S(!1,pe),Uo(he,s3,{type:G,value:go.getValue(he)})},onInvalid:he=>{S(!0,pe),Uo(he,$E,{type:G,value:go.getValue(he)})}},validator:{validate:he=>{const xe=go.getValue(he),ie=Q(xe)?vr.value(!0):vr.error(o("aria.input.invalid"));return Ib(ie)},validateOnLoad:!1}}),E=(G,Q,pe,he,xe)=>{const ie=Go(bS),ae=o(HE+"range"),Ce=Yr.parts.label({dom:{tag:"label"},components:[tc(pe)]}),ke=Yr.parts.field({data:xe,factory:ld,inputAttributes:{type:"text","aria-label":he,...Q==="hex"?{"aria-live":"polite"}:{}},inputClasses:[c("textfield")],inputBehaviours:gn([T(Q,G,ie),Na.config({}),Ri.config({...b({tooltipText:"",onSetup:cn=>{ie.set({isEnabled:()=>Ri.isEnabled(cn),setEnabled:Dn=>Ri.setEnabled(cn,Dn),immediatelyShow:()=>Ri.immediateOpenClose(cn,!0),immediatelyHide:()=>Ri.immediateOpenClose(cn,!1)}),Ri.setEnabled(cn,!1)},onShow:(cn,Dn)=>{Ri.setComponents(cn,[{dom:{tag:"p",classes:[c("rgb-warning-note")]},components:[tc(o(Q==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:cn=>{Lb.isInvalid(cn)&&Lb.run(cn).get(Ue)}}),Re=Do("aria-invalid"),Ye=ir(y("invalid",z.some(Re),"warning")),vt=[Ce,ke,ir({dom:{tag:"div",classes:[c("invalid-icon")]},components:[Ye.asSpec()]}).asSpec()],en=Q!=="hex"?[Yr.parts["aria-descriptor"]({text:ae})]:[],jt=vt.concat(en);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[c("rgb-container")]},components:jt}},M=(G,Q)=>{const pe=Q.red,he=Q.green,xe=Q.blue;go.setValue(G,{red:pe,green:he,blue:xe})},P=ir({dom:{tag:"div",classes:[c("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),N=(G,Q)=>{P.getOpt(G).each(pe=>{fs(pe.element,"background-color","#"+Q.value)})};return Gm({factory:()=>{const G={red:Go(z.some(255)),green:Go(z.some(255)),blue:Go(z.some(255)),hex:Go(z.some("ffffff"))},Q=vt=>G[vt].get(),pe=(vt,en)=>{G[vt].set(en)},he=vt=>{const en=vt.red,jt=vt.green,cn=vt.blue;pe("red",z.some(en)),pe("green",z.some(jt)),pe("blue",z.some(cn))},xe=(vt,en)=>{const jt=en.event;jt.type!=="hex"?pe(jt.type,z.none()):g(vt)},ie=(vt,en)=>{const jt=en.event;(cn=>cn.type==="hex")(jt)?((cn,Dn)=>{u(cn);const fo=QB(Dn);pe("hex",z.some(fo.value));const jo=Vw(fo);M(cn,jo),he(jo),Uo(cn,fS,{hex:fo}),N(cn,fo)})(vt,jt.value):((cn,Dn,fo)=>{const jo=parseInt(fo,10);pe(Dn,z.some(jo)),Q("red").bind(ls=>Q("green").bind(As=>Q("blue").map(pr=>_p(ls,As,pr,1)))).each(ls=>{const As=((pr,fi)=>{const Zi=gE(fi);return hS.getField(pr,"hex").each(ca=>{Rs.isFocused(ca)||go.setValue(pr,{hex:Zi.value})}),Zi})(cn,ls);Uo(cn,fS,{hex:As}),N(cn,As)})})(vt,jt.type,jt.value)},ae=vt=>({label:o(HE+vt+".label"),description:o(HE+vt+".description")}),Ce=ae("red"),ke=ae("green"),Re=ae("blue"),Ye=ae("hex");return ga(hS.sketch(vt=>({dom:{tag:"form",classes:[c("rgb-form")],attributes:{"aria-label":o("aria.color.picker")}},components:[vt.field("red",Yr.sketch(E(zw,"red",Ce.label,Ce.description,255))),vt.field("green",Yr.sketch(E(zw,"green",ke.label,ke.description,255))),vt.field("blue",Yr.sketch(E(zw,"blue",Re.label,Re.description,255))),vt.field("hex",Yr.sketch(E(YD,"hex",Ye.label,Ye.description,"ffffff"))),P.asSpec()],formBehaviours:gn([Lb.config({invalidClass:c("form-invalid")}),Ts("rgb-form-events",[tn(s3,ie),tn($E,xe),tn(LI,xe)])])})),{apis:{updateHex:(vt,en)=>{go.setValue(vt,{hex:en.value}),((jt,cn)=>{const Dn=Vw(cn);M(jt,Dn),he(Dn)})(vt,en),N(vt,en)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(G,Q,pe)=>{G.updateHex(Q,pe)}},extraApis:{}})},$I=(o,c,u,g)=>Gm({name:"ColourPicker",configFields:[Yt("dom"),ht("onValidHex",Ue),ht("onInvalidHex",Ue)],factory:y=>{const S=y8(o,c,y.onValidHex,y.onInvalidHex,u,g),T=((xe,ie)=>{const ae=Np.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[ie("sv-palette-spectrum")]}}),Ce=Np.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[ie("sv-palette-thumb")],innerHtml:`<div class=${ie("sv-palette-inner-thumb")} role="presentation"></div>`}}),ke=(Re,Ye)=>{const{width:vt,height:en}=Re,jt=Re.getContext("2d");if(jt===null)return;jt.fillStyle=Ye,jt.fillRect(0,0,vt,en);const cn=jt.createLinearGradient(0,0,vt,0);cn.addColorStop(0,"rgba(255,255,255,1)"),cn.addColorStop(1,"rgba(255,255,255,0)"),jt.fillStyle=cn,jt.fillRect(0,0,vt,en);const Dn=jt.createLinearGradient(0,0,0,en);Dn.addColorStop(0,"rgba(0,0,0,0)"),Dn.addColorStop(1,"rgba(0,0,0,1)"),jt.fillStyle=Dn,jt.fillRect(0,0,vt,en)};return Gm({factory:Re=>{const Ye=ve({x:0,y:0}),vt=gn([Qr.config({find:z.some}),Rs.config({})]);return Np.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":xe(["Saturation {0}%, Brightness {1}%",0,0])},classes:[ie("sv-palette")]},model:{mode:"xy",getInitialValue:Ye},rounded:!1,components:[ae,Ce],onChange:(en,jt,cn)=>{zn(cn)||ws(en.element,"aria-valuetext",xe(["Saturation {0}%, Brightness {1}%",Math.floor(cn.x),Math.floor(100-cn.y)])),Uo(en,PI,{value:cn})},onInit:(en,jt,cn,Dn)=>{ke(cn.element.dom,fE(JD))},sliderBehaviours:vt})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(Re,Ye,vt)=>{((en,jt)=>{const cn=en.components()[0].element.dom,Dn=Ky(jt,100,100),fo=XD(Dn);ke(cn,fE(fo))})(Ye,vt)},setThumb:(Re,Ye,vt)=>{((en,jt)=>{const cn=EO(Vw(jt));Np.setValue(en,{x:cn.saturation,y:100-cn.value}),ws(en.element,"aria-valuetext",xe(["Saturation {0}%, Brightness {1}%",cn.saturation,cn.value]))})(Ye,vt)}},extraApis:{}})})(o,c),E={paletteRgba:Go(JD),paletteHue:Go(0)},M=ir(((xe,ie)=>{const ae=Np.parts.spectrum({dom:{tag:"div",classes:[ie("hue-slider-spectrum")],attributes:{role:"presentation"}}}),Ce=Np.parts.thumb({dom:{tag:"div",classes:[ie("hue-slider-thumb")],attributes:{role:"presentation"}}});return Np.sketch({dom:{tag:"div",classes:[ie("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ve(0)},components:[ae,Ce],sliderBehaviours:gn([Rs.config({})]),onChange:(ke,Re,Ye)=>{ws(ke.element,"aria-valuenow",Math.floor(360-3.6*Ye)),Uo(ke,FI,{value:Ye})}})})(0,c)),P=ir(T.sketch({})),N=ir(S.sketch({})),V=(xe,ie,ae)=>{P.getOpt(xe).each(Ce=>{T.setHue(Ce,ae)})},G=(xe,ie)=>{N.getOpt(xe).each(ae=>{S.updateHex(ae,ie)})},Q=(xe,ie,ae)=>{M.getOpt(xe).each(Ce=>{Np.setValue(Ce,(ke=>100-ke/360*100)(ae))})},pe=(xe,ie)=>{P.getOpt(xe).each(ae=>{T.setThumb(ae,ie)})},he=(xe,ie,ae,Ce)=>{((ke,Re)=>{const Ye=Vw(ke);E.paletteRgba.set(Ye),E.paletteHue.set(Re)})(ie,ae),ft(Ce,ke=>{ke(xe,ie,ae)})};return{uid:y.uid,dom:y.dom,components:[P.asSpec(),M.asSpec(),N.asSpec()],behaviours:gn([Ts("colour-picker-events",[tn(fS,(()=>{const xe=[V,Q,pe];return(ie,ae)=>{const Ce=ae.event.hex,ke=(Re=>EO(Vw(Re)))(Ce);he(ie,Ce,ke.hue,xe)}})()),tn(PI,(()=>{const xe=[G];return(ie,ae)=>{const Ce=ae.event.value,ke=E.paletteHue.get(),Re=Ky(ke,Ce.x,100-Ce.y),Ye=rI(Re);he(ie,Ye,ke,xe)}})()),tn(FI,(()=>{const xe=[V,G];return(ie,ae)=>{const Ce=(en=>(100-en)/100*360)(ae.event.value),ke=E.paletteRgba.get(),Re=EO(ke),Ye=Ky(Ce,Re.saturation,Re.value),vt=rI(Ye);he(ie,vt,Ce,xe)}})())]),Qr.config({find:xe=>N.getOpt(xe)}),ts.config({mode:"acyclic"})])}}}),X1=()=>Qr.config({find:z.some}),TR=o=>Qr.config({find:c=>cs(c.element,o).bind(u=>c.getSystem().getByDom(u).toOptional())}),HI=ps([ht("preprocess",In),ht("postprocess",In)]),Bp=(o,c)=>{const u=Ml("RepresentingConfigs.memento processors",HI,c);return go.config({store:{mode:"manual",getValue:g=>{const b=o.get(g),y=go.getValue(b);return u.postprocess(y)},setValue:(g,b)=>{const y=u.preprocess(b),S=o.get(g);go.setValue(S,y)}}})},Yw=(o,c,u)=>go.config({store:{mode:"manual",...o.map(g=>({initialValue:g})).getOr({}),getValue:c,setValue:u}}),ER=(o,c,u)=>Yw(o,g=>c(g.element),(g,b)=>u(g.element,b)),Xw=o=>go.config({store:{mode:"memory",initialValue:o}}),r3={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var zI=tinymce.util.Tools.resolve("tinymce.Resource");const a3=o=>yo(o,"init");var Ip=tinymce.util.Tools.resolve("tinymce.util.Tools");const i3=Do("browse.files.event"),VI=(o,c,u)=>{const g=(M,P)=>{P.stop()},b=M=>(P,N)=>{ft(M,V=>{V(P,N)})},y=ir({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:gn([Ts("input-file-events",[lm(cm()),lm(Dg())])])}),S=o.label.map(M=>Ap(M,c)),T=Yr.parts.field({factory:wa,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[tc(c.translate("Browse for an image")),y.asSpec()],action:M=>{y.get(M).element.dom.click()},buttonBehaviours:gn([X1(),Xw(u.getOr([])),Na.config({}),lE(()=>c.checkUiComponentContext(o.context).shouldDisable),Tl(()=>c.checkUiComponentContext(o.context))])}),E={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:gn([hs.config({disabled:()=>c.checkUiComponentContext(o.context).shouldDisable}),Tl(()=>c.checkUiComponentContext(o.context)),ur.config({toggleClass:"dragenter",toggleOnExecute:!1}),Ts("dropzone-events",[tn("dragenter",b([g,ur.toggle])),tn("dragleave",b([g,ur.toggle])),tn("dragover",g),tn("drop",b([g,(M,P)=>{var N;if(!hs.isDisabled(M)){const V=P.event.raw;Uo(M,i3,{files:(N=V.dataTransfer)===null||N===void 0?void 0:N.files})}}])),tn(nh(),(M,P)=>{const N=P.event.raw.target;Uo(M,i3,{files:N.files})})])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[tc(c.translate("Drop an image here"))]},T]}]};return nS(S,E,["tox-form__group--stretched"],[Ts("handle-files",[tn(i3,(M,P)=>{Yr.getField(M).each(N=>{var V,G;V=N,(G=P.event.files)&&(go.setValue(V,((Q,pe)=>{const he=Ip.explode(pe.getOption("images_file_types"));return Bt(An(Q),xe=>Qt(he,ie=>hi(xe.name.toLowerCase(),`.${ie.toLowerCase()}`)))})(G,c)),Uo(V,Yd,{name:o.name}))})})])])},c3=(o,c)=>{let u=null;const g=()=>{To(u)||(clearTimeout(u),u=null)};return{cancel:g,throttle:(...b)=>{g(),u=setTimeout(()=>{u=null,o.apply(null,b)},c)}}},vg=Do("alloy-fake-before-tabstop"),_R=Do("alloy-fake-after-tabstop"),UI=o=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:o},behaviours:gn([Rs.config({ignore:!0}),Na.config({})])}),WI=(o,c)=>({dom:{tag:"div",classes:["tox-navobj",...o.getOr([])]},components:[UI([vg]),c,UI([_R])],behaviours:gn([TR(1)])}),zE=(o,c)=>{Uo(o,Xa(),{raw:{which:9,shiftKey:c}})},jI=(o,c)=>{const u=c.element;Ss(u,vg)?zE(o,!0):Ss(u,_R)&&zE(o,!1)},VE=o=>Oh(o,["."+vg,"."+_R].join(","),Qe),l3=Do("update-dialog"),u3=Do("update-title"),Fp=Do("update-body"),vS=Do("update-footer"),Jw=Do("body-send-message"),Qw=Do("dialog-focus-shifted"),d3=ic().browser,eC=d3.isSafari(),x8=d3.isFirefox(),UE=eC||x8,AR=d3.isChromium(),ZI=({scrollTop:o,scrollHeight:c,clientHeight:u})=>Math.ceil(o)+u>=c,m3=(o,c)=>o.scrollTo(0,c==="bottom"?99999999:c),ax=(o,c,u)=>{const g=o.dom;z.from(g.contentDocument).fold(u,b=>{let y=0;const S=((E,M)=>{const P=E.body;return z.from(!/^<!DOCTYPE (html|HTML)/.test(M)&&(!AR&&!eC||Vn(P)&&(P.scrollTop!==0||Math.abs(P.scrollHeight-P.clientHeight)>1))?P:E.documentElement)})(b,c).map(E=>(y=E.scrollTop,E)).forall(ZI),T=()=>{const E=g.contentWindow;Vn(E)&&(S?m3(E,"bottom"):!S&&UE&&y!==0&&m3(E,y))};eC&&g.addEventListener("load",T,{once:!0}),b.open(),b.write(c),b.close(),eC||T()})},tC=vn(UE,eC?500:200).map(o=>((c,u)=>{let g=null,b=null;return{cancel:()=>{To(g)||(clearTimeout(g),g=null,b=null)},throttle:(...y)=>{b=y,To(g)&&(g=setTimeout(()=>{const S=b;g=null,b=null,c.apply(null,S)},u))}}})(ax,o)),WE=Do("toolbar.button.execute"),Hb=Do("common-button-display-events"),OR={[os()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Vm()]:["toolbar-button-events",Hb],[xd()]:["toolbar-button-events","dropdown-events","tooltipping"],[qe()]:["focusing","alloy.base.behaviour",Hb]},g3=o=>fs(o.element,"width",Wa(o.element,"width")),DR=(o,c,u)=>_(o,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:u},c),f3=(o,c)=>DR(o,c,[]),J1=(o,c)=>DR(o,c,[_s.config({})]),RR=(o,c,u)=>({dom:{tag:"span",classes:[`${c}__select-label`]},components:[tc(u.translate(o))],behaviours:gn([_s.config({})])}),Wf=Do("update-menu-text"),ix=Do("update-menu-icon"),yS=(o,c,u,g)=>{const b=Go(Ue),y=o.text.map(pe=>ir(RR(pe,c,u.providers))),S=o.icon.map(pe=>ir(J1(pe,u.providers.icons))),T=(pe,he)=>{const xe=go.getValue(pe);return Rs.focus(xe),Uo(xe,"keydown",{raw:he.event.raw}),Vf.close(xe),z.some(!0)},E=o.role.fold(()=>({}),pe=>({role:pe})),M=z.from(o.listRole).map(pe=>({listRole:pe})).getOr({}),P=o.ariaLabel.fold(()=>({}),pe=>({"aria-label":u.providers.translate(pe)})),N=_("chevron-down",{tag:"div",classes:[`${c}__select-chevron`]},u.providers.icons),V=Do("common-button-display-events"),G="dropdown-events";return ir(Vf.sketch({...o.uid?{uid:o.uid}:{},...E,...M,dom:{tag:"button",classes:[c,`${c}--select`].concat(Oe(o.classes,pe=>`${c}--${pe}`)),attributes:{...P,...Vn(g)?{"data-mce-name":g}:{}}},components:Lw([S.map(pe=>pe.asSpec()),y.map(pe=>pe.asSpec()),z.some(N)]),matchWidth:!0,useMinWidth:!0,onOpen:(pe,he,xe)=>{o.searchable&&(ie=>{u0(ie).each(ae=>Rs.focus(ae))})(xe)},dropdownBehaviours:gn([...o.dropdownBehaviours,lE(()=>o.disabled||u.providers.checkUiComponentContext(o.context).shouldDisable),Tl(()=>u.providers.checkUiComponentContext(o.context)),aS.config({}),_s.config({}),...o.tooltip.map(pe=>Ri.config(u.providers.tooltips.getConfig({tooltipText:u.providers.translate(pe)}))).toArray(),Ts(G,[Eh(o,b),_h(o,b)]),Ts(V,[Cs((pe,he)=>{o.listRole!=="listbox"&&g3(pe)})]),Ts("update-dropdown-width-variable",[tn(Qu(),(pe,he)=>Vf.close(pe))]),Ts("menubutton-update-display-text",[tn(Wf,(pe,he)=>{y.bind(xe=>xe.getOpt(pe)).each(xe=>{_s.set(xe,[tc(u.providers.translate(he.event.text))])})}),tn(ix,(pe,he)=>{S.bind(xe=>xe.getOpt(pe)).each(xe=>{_s.set(xe,[J1(he.event.icon,u.providers.icons)])})})])]),eventOrder:ga(OR,{[qe()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Vm()]:["toolbar-button-events",Ri.name(),G,V]}),sandboxBehaviours:gn([ts.config({mode:"special",onLeft:T,onRight:T}),Ts("dropdown-sandbox-events",[tn(Jm,(pe,he)=>{(xe=>{const ie=go.getValue(xe),ae=$f(xe).map(Qm);Vf.refetch(ie).get(()=>{const Ce=Qc.getCoupled(ie,"sandbox");ae.each(ke=>$f(Ce).each(Re=>((Ye,vt)=>{go.setValue(Ye,vt.fetchPattern),Ye.element.dom.selectionStart=vt.selectionStart,Ye.element.dom.selectionEnd=vt.selectionEnd})(Re,ke)))})})(pe),he.stop()}),tn(fr,(pe,he)=>{((xe,ie)=>{(ae=>Jr.getState(ae).bind(xa.getHighlighted).bind(xa.getHighlighted))(xe).each(ae=>{((Ce,ke,Re,Ye)=>{const vt={...Ye,target:ke};Ce.getSystem().triggerEvent(Re,ke,vt)})(xe,ae.element,ie.event.eventType,ie.event.interactionEvent)})})(pe,he),he.stop()})])]),lazySink:u.getSink,toggleClass:`${c}--active`,parts:{menu:{...Xm(0,o.columns,o.presets),fakeFocus:o.searchable,...o.listRole==="listbox"?{}:{onHighlightItem:Uf,onCollapseMenu:(pe,he,xe)=>{xa.getHighlighted(xe).each(ie=>{Uf(pe,xe,ie)})},onDehighlightItem:bI}}},getAnchorOverrides:()=>({maxHeightFunction:(pe,he)=>{Fg()(pe,he-10)}}),fetch:pe=>Jy(re(o.fetch,pe))})).asSpec()},b0=o=>o.type==="separator",GI={type:"separator"},qI=(o,c)=>{const u=((g,b)=>{const y=pt(g,(S,T)=>(E=>wn(E))(T)?T===""?S:T==="|"?S.length>0&&!b0(S[S.length-1])?S.concat([GI]):S:yo(b,T.toLowerCase())?S.concat([b[T.toLowerCase()]]):S:S.concat([T]),[]);return y.length>0&&b0(y[y.length-1])&&y.pop(),y})(wn(o)?o.split(" "):o,c);return $e(u,(g,b)=>{if((y=>yo(y,"getSubmenuItems"))(b)){const y=(T=>{const E=Gt(T,"value").getOrThunk(()=>Do("generated-menu-item"));return ga({value:E},T)})(b),S=((T,E)=>{const M=T.getSubmenuItems(),P=qI(M,E);return{item:T,menus:ga(P.menus,{[T.value]:P.items}),expansions:ga(P.expansions,{[T.value]:T.value})}})(y,c);return{menus:ga(g.menus,S.menus),items:[S.item,...g.items],expansions:ga(g.expansions,S.expansions)}}return{...g,items:[b,...g.items]}},{menus:{},expansions:{},items:[]})},Q1=(o,c,u,g)=>{const b=Do("primary-menu"),y=qI(o,u.shared.providers.menuItems());if(y.items.length===0)return z.none();const S=(N=>N.search.fold(()=>({searchMode:"no-search"}),V=>({searchMode:"search-with-field",placeholder:V.placeholder})))(g),T=cc(b,y.items,c,u,g.isHorizontalMenu,S),E=(N=>N.search.fold(()=>({searchMode:"no-search"}),V=>({searchMode:"search-with-results"})))(g),M=ut(y.menus,(N,V)=>cc(V,N,c,u,!1,E)),P=ga(M,Su(b,T));return z.from(kl.tieredData(b,P,y.expansions))},jE=o=>!yo(o,"items"),MR="data-value",KI=(o,c,u,g,b)=>Oe(u,y=>jE(y)?{type:"togglemenuitem",...b?{}:{role:"option"},text:y.text,value:y.value,active:y.value===g,onAction:()=>{go.setValue(o,y.value),Uo(o,Yd,{name:c}),Rs.focus(o)}}:{type:"nestedmenuitem",text:y.text,getSubmenuItems:()=>KI(o,c,y.items,g,b)}),p3=(o,c)=>it(o,u=>jE(u)?vn(u.value===c,u):p3(u.items,c)),YI=Gm({name:"HtmlSelect",configFields:[Yt("options"),Bl("selectBehaviours",[Rs,go]),ht("selectClasses",[]),ht("selectAttributes",{}),Fr("data")],factory:(o,c)=>{const u=Oe(o.options,b=>({dom:{tag:"option",value:b.value,innerHtml:b.text}})),g=o.data.map(b=>Su("initialValue",b)).getOr({});return{uid:o.uid,dom:{tag:"select",classes:o.selectClasses,attributes:o.selectAttributes},components:u,behaviours:Il(o.selectBehaviours,[Rs.config({}),go.config({store:{mode:"manual",getValue:b=>Cd(b.element),setValue:(b,y)=>{const S=At(o.options);Y(o.options,T=>T.value===y).isSome()?d1(b.element,y):b.element.dom.selectedIndex===-1&&y===""&&S.each(T=>d1(b.element,T.value))},...g}})])}}}),Nh=ve([ht("field1Name","field1"),ht("field2Name","field2"),up("onLockedChange"),$c(["lockClass"]),ht("locked",!1),gb("coupledFieldBehaviours",[Qr,go]),sr("onInput",Ue)]),h3=(o,c)=>zu({factory:Yr,name:o,overrides:u=>({fieldBehaviours:gn([Ts("coupled-input-behaviour",[tn(Iu(),g=>{((b,y,S)=>lr(b,y,S).bind(Qr.getCurrent))(g,u,c).each(b=>{lr(g,u,"lock").each(y=>{ur.isOn(y)&&u.onLockedChange(g,b,y),u.onInput(g)})})})])])})}),XI=ve([h3("field1","field2"),h3("field2","field1"),zu({factory:wa,schema:[Yt("dom")],name:"lock",overrides:o=>({buttonBehaviours:gn([ur.config({selected:o.locked,toggleClass:o.markers.lockClass,aria:{mode:"pressed"}})])})})]),tf=pm({name:"FormCoupledInputs",configFields:Nh(),partFields:XI(),factory:(o,c,u,g)=>({uid:o.uid,dom:o.dom,components:c,behaviours:ph(o.coupledFieldBehaviours,[Qr.config({find:z.some}),go.config({store:{mode:"manual",getValue:b=>{const y=Jc(b,o,["field1","field2"]);return{[o.field1Name]:go.getValue(y.field1()),[o.field2Name]:go.getValue(y.field2())}},setValue:(b,y)=>{const S=Jc(b,o,["field1","field2"]);gr(y,o.field1Name)&&go.setValue(S.field1(),y[o.field1Name]),gr(y,o.field2Name)&&go.setValue(S.field2(),y[o.field2Name])}}})]),apis:{getField1:b=>lr(b,o,"field1"),getField2:b=>lr(b,o,"field2"),getLock:b=>lr(b,o,"lock")}}),apis:{getField1:(o,c)=>o.getField1(c),getField2:(o,c)=>o.getField2(c),getLock:(o,c)=>o.getLock(c)}}),xS=o=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(o);if(c!==null){const u=parseFloat(c[1]),g=c[2];return vr.value({value:u,unit:g})}return vr.error(o)},NR=(o,c)=>{const u={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},g=b=>yo(u,b);return o.unit===c?z.some(o.value):g(o.unit)&&g(c)?u[o.unit]===u[c]?z.some(o.value):z.some(o.value/u[o.unit]*u[c]):z.none()},BR=o=>z.none(),wS=(o,c)=>{let u=BR;const g=Do("ratio-event"),b=xe=>_(xe,{tag:"span",classes:["tox-icon","tox-lock-icon__"+xe]},c.icons),y=()=>!o.enabled||o.context.exists(xe=>c.checkUiComponentContext(xe).shouldDisable),S=o.context.map(xe=>Tl(()=>c.checkUiComponentContext(xe))),T=o.label.getOr("Constrain proportions"),E=c.translate(T),M=tf.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":E,"data-mce-name":T}},components:[b("lock"),b("unlock")],buttonBehaviours:gn([hs.config({disabled:y}),...S.toArray(),Na.config({}),Ri.config(c.tooltips.getConfig({tooltipText:E}))])}),P=xe=>({dom:{tag:"div",classes:[o.inDialog?"tox-form__group":"tox-context-form__group"]},components:xe}),N=xe=>Yr.parts.field({factory:ld,inputClasses:o.inDialog?["tox-textfield"]:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:xe?o.width:o.height,inputBehaviours:gn([hs.config({disabled:y}),...S.toArray(),Na.config({}),Ts("size-input-events",[tn(_o(),(ie,ae)=>{Uo(ie,g,{isField1:xe})}),tn(nh(),(ie,ae)=>{o.name.each(Ce=>Uo(ie,Yd,{name:Ce}))})]),...o.onEnter.map(ie=>ts.config({mode:"special",onEnter:ie})).toArray()]),selectOnFocus:!1}),V=xe=>({dom:{tag:"label",classes:["tox-label"]},components:[tc(c.translate(xe))]}),G=tf.parts.field1(P([Yr.parts.label(V("Width")),N(!0)])),Q=tf.parts.field2(P([Yr.parts.label(V("Height")),N(!1)])),pe=Go(Ue),he=ns(o.onSetup,o.getApi,(xe,ie)=>[Eh({onSetup:xe,getApi:ie},pe),_h({getApi:ie},pe)]).getOr([]);return tf.sketch({dom:{tag:"div",classes:[o.inDialog?"tox-form__group":"tox-context-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[G,Q,P([V(" "),M])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(xe,ie,ae)=>{xS(go.getValue(xe)).each(Ce=>{u(Ce).each(ke=>{go.setValue(ie,(Re=>{const Ye={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let vt=Re.value.toFixed((en=Re.unit)in Ye?Ye[en]:1);var en;return vt.indexOf(".")!==-1&&(vt=vt.replace(/\.?0*$/,"")),vt+Re.unit})(ke))})})},onInput:xe=>$s(xe,CE),coupledFieldBehaviours:gn([hs.config({disabled:y,onDisabled:xe=>{tf.getField1(xe).bind(Yr.getField).each(hs.disable),tf.getField2(xe).bind(Yr.getField).each(hs.disable),tf.getLock(xe).each(hs.disable)},onEnabled:xe=>{tf.getField1(xe).bind(Yr.getField).each(hs.enable),tf.getField2(xe).bind(Yr.getField).each(hs.enable),tf.getLock(xe).each(hs.enable)}}),Tl(()=>c.checkUiComponentContext("mode:design")),Ts("size-input-events",[tn(g,(xe,ie)=>{const ae=ie.event.isField1,Ce=ae?tf.getField1(xe):tf.getField2(xe),ke=ae?tf.getField2(xe):tf.getField1(xe),Re=Ce.map(go.getValue).getOr(""),Ye=ke.map(go.getValue).getOr("");u=((vt,en)=>{const jt=xS(vt).toOptional(),cn=xS(en).toOptional();return ns(jt,cn,(Dn,fo)=>NR(Dn,fo.unit).map(jo=>fo.value/jo).map(jo=>{return ls=jo,As=fo.unit,pr=>NR(pr,As).map(fi=>({value:fi*ls,unit:As}));var ls,As}).getOr(BR)).getOr(BR)})(Re,Ye)}),tn(CE,xe=>{o.onInput.each(ie=>ie(xe))}),...he])])})},JI=(o,c)=>{const u=o.label.map(P=>Ap(P,c)),g=[hs.config({disabled:()=>o.disabled||c.checkUiComponentContext(o.context).shouldDisable}),Tl(()=>c.checkUiComponentContext(o.context)),ts.config({mode:"execution",useEnter:o.multiline!==!0,useControlEnter:o.multiline===!0,execute:P=>($s(P,Gw),z.some(!0))}),Ts("textfield-change",[tn(Iu(),(P,N)=>{Uo(P,Yd,{name:o.name})}),tn(Cv(),(P,N)=>{Uo(P,Yd,{name:o.name})})]),Na.config({})],b=o.validation.map(P=>Lb.config({getRoot:N=>Eo(N.element),invalidClass:"tox-invalid",validator:{validate:N=>{const V=go.getValue(N),G=P.validator(V);return Ib(G===!0?vr.value(V):vr.error(G))},validateOnLoad:P.validateOnLoad}})).toArray(),y={...o.placeholder.fold(ve({}),P=>({placeholder:c.translate(P)})),...o.inputMode.fold(ve({}),P=>({inputmode:P})),"data-mce-name":o.name},S=Yr.parts.field({tag:o.multiline===!0?"textarea":"input",...o.data.map(P=>({data:P})).getOr({}),inputAttributes:y,inputClasses:[o.classname],inputBehaviours:gn(Et([g,b])),selectOnFocus:!1,factory:ld}),T=o.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,E=(o.flex?["tox-form__group--stretched"]:[]).concat(o.maximized?["tox-form-group--maximize"]:[]),M=[hs.config({disabled:()=>o.disabled||c.checkUiComponentContext(o.context).shouldDisable,onDisabled:P=>{Yr.getField(P).each(hs.disable)},onEnabled:P=>{Yr.getField(P).each(hs.enable)}}),Tl(()=>c.checkUiComponentContext(o.context))];return nS(u,T,E,M)},CS=(o,c)=>c.getAnimationRoot.fold(()=>o.element,u=>u(o)),Bh=o=>o.dimension.property,v0=(o,c)=>o.dimension.getDimension(c),nC=(o,c)=>{const u=CS(o,c);Pr(u,[c.shrinkingClass,c.growingClass])},IR=(o,c)=>{$o(o.element,c.openClass),xn(o.element,c.closedClass),fs(o.element,Bh(c),"0px"),wu(o.element)},b3=(o,c)=>{$o(o.element,c.closedClass),xn(o.element,c.openClass),or(o.element,Bh(c))},v3=(o,c,u,g)=>{u.setCollapsed(),fs(o.element,Bh(c),v0(c,o.element)),nC(o,c),IR(o,c),c.onStartShrink(o),c.onShrunk(o)},y3=(o,c,u,g)=>{const b=g.getOrThunk(()=>v0(c,o.element));u.setCollapsed(),fs(o.element,Bh(c),b),wu(o.element);const y=CS(o,c);$o(y,c.growingClass),xn(y,c.shrinkingClass),IR(o,c),c.onStartShrink(o)},x3=(o,c,u)=>{const g=v0(c,o.element);(g==="0px"?v3:y3)(o,c,u,z.some(g))},QI=(o,c,u)=>{const g=CS(o,c),b=Ss(g,c.shrinkingClass),y=v0(c,o.element);b3(o,c);const S=v0(c,o.element);(b?()=>{fs(o.element,Bh(c),y),wu(o.element)}:()=>{IR(o,c)})(),$o(g,c.shrinkingClass),xn(g,c.growingClass),b3(o,c),fs(o.element,Bh(c),S),u.setExpanded(),c.onStartGrow(o)},eF=(o,c,u)=>{const g=CS(o,c);return Ss(g,c.growingClass)===!0},tF=(o,c,u)=>{const g=CS(o,c);return Ss(g,c.shrinkingClass)===!0};var w3=Object.freeze({__proto__:null,refresh:(o,c,u)=>{if(u.isExpanded()){or(o.element,Bh(c));const g=v0(c,o.element);fs(o.element,Bh(c),g)}},grow:(o,c,u)=>{u.isExpanded()||QI(o,c,u)},shrink:(o,c,u)=>{u.isExpanded()&&x3(o,c,u)},immediateShrink:(o,c,u)=>{u.isExpanded()&&v3(o,c,u)},hasGrown:(o,c,u)=>u.isExpanded(),hasShrunk:(o,c,u)=>u.isCollapsed(),isGrowing:eF,isShrinking:tF,isTransitioning:(o,c,u)=>eF(o,c)||tF(o,c),toggleGrow:(o,c,u)=>{(u.isExpanded()?x3:QI)(o,c,u)},disableTransitions:nC,immediateGrow:(o,c,u)=>{u.isExpanded()||(b3(o,c),fs(o.element,Bh(c),v0(c,o.element)),nC(o,c),u.setExpanded(),c.onStartGrow(o),c.onGrown(o))}}),ev=Object.freeze({__proto__:null,exhibit:(o,c,u)=>{const g=c.expanded;return um(g?{classes:[c.openClass],styles:{}}:{classes:[c.closedClass],styles:Su(c.dimension.property,"0px")})},events:(o,c)=>Ja([au(ll(),(u,g)=>{g.event.raw.propertyName===o.dimension.property&&(nC(u,o),c.isExpanded()&&or(u.element,o.dimension.property),(c.isExpanded()?o.onGrown:o.onShrunk)(u))})])}),nF=[Yt("closedClass"),Yt("openClass"),Yt("shrinkingClass"),Yt("growingClass"),Fr("getAnimationRoot"),Hr("onShrunk"),Hr("onStartShrink"),Hr("onGrown"),Hr("onStartGrow"),ht("expanded",!1),wo("dimension",oa("property",{width:[$a("property","width"),$a("getDimension",o=>Je(o)+"px")],height:[$a("property","height"),$a("getDimension",o=>oi(o)+"px")]}))];const wm=Ra({fields:nF,name:"sliding",active:ev,apis:w3,state:Object.freeze({__proto__:null,init:o=>{const c=Go(o.expanded);return wd({isExpanded:()=>c.get()===!0,isCollapsed:()=>c.get()===!1,setCollapsed:re(c.set,!1),setExpanded:re(c.set,!0),readState:()=>"expanded: "+c.get()})}})}),ul=o=>({isEnabled:()=>!hs.isDisabled(o),setEnabled:c=>hs.set(o,!c),setActive:c=>{const u=o.element;c?(xn(u,"tox-tbtn--enabled"),ws(u,"aria-pressed",!0)):($o(u,"tox-tbtn--enabled"),Xs(u,"aria-pressed"))},isActive:()=>Ss(o.element,"tox-tbtn--enabled"),setText:c=>{Uo(o,Wf,{text:c})},setIcon:c=>Uo(o,ix,{icon:c})}),oC=(o,c,u,g,b=!0,y)=>yS({text:o.text,icon:o.icon,tooltip:o.tooltip,ariaLabel:o.tooltip,searchable:o.search.isSome(),role:g,fetch:(S,T)=>{const E={pattern:o.search.isSome()?vI(S):""};o.fetch(M=>{T(Q1(M,Ee.CLOSE_ON_EXECUTE,u,{isHorizontalMenu:!1,search:o.search}))},E,ul(S))},onSetup:o.onSetup,getApi:ul,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...b?[Na.config({})]:[]],context:o.context},c,u.shared,y),FR=(o,c,u)=>{const g=y=>S=>{const T=!S.isActive();S.setActive(T),y.storage.set(T),u.shared.getSink().each(E=>{c().getOpt(E).each(M=>{sd(M.element),Uo(M,Pb,{name:y.name,value:y.storage.get()})})})},b=y=>S=>{S.setActive(y.storage.get())};return y=>{y(Oe(o,S=>{const T=S.text.fold(()=>({}),E=>({text:E}));return{type:S.type,active:!1,...T,context:S.context,onAction:g(S),onSetup:b(S)}}))}},tv=o=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":o}},components:[tc(o)]}),PR=(o,c,u)=>{o.customStateIcon.each(g=>c.push(C3(g,u.shared.providers.icons,o.customStateIconTooltip.fold(()=>[],b=>[Ri.config(u.shared.providers.tooltips.getConfig({tooltipText:b}))]),["tox-icon-custom-state"])))},LR=Do("leaf-label-event-id"),sC=({leaf:o,onLeafAction:c,visible:u,treeId:g,selectedId:b,backstage:y})=>{const S=o.menu.map(E=>oC(E,"tox-mbtn",y,z.none(),u)),T=[tv(o.title)];return PR(o,T,y),S.each(E=>T.push(E)),wa.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(u?["tox-tree--leaf__label--visible"]:[])},components:T,role:"treeitem",action:E=>{c(o.id),E.getSystem().broadcastOn([`update-active-item-${g}`],{value:o.id})},eventOrder:{[Xa()]:[LR,"keying"]},buttonBehaviours:gn([...u?[Na.config({})]:[],ur.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Td.config({channels:{[`update-active-item-${g}`]:{onReceive:(E,M)=>{(M.value===o.id?ur.on:ur.off)(E)}}}}),Ts(LR,[Cs((E,M)=>{b.each(P=>{(P===o.id?ur.on:ur.off)(E)})}),tn(Xa(),(E,M)=>{const P=M.event.raw.code==="ArrowLeft",N=M.event.raw.code==="ArrowRight";P?(rb(E.element,".tox-tree--directory").each(V=>{E.getSystem().getByDom(V).each(G=>{Lk(V,".tox-tree--directory__label").each(Q=>{G.getSystem().getByDom(Q).each(Rs.focus)})})}),M.stop()):N&&M.stop()})])])})},C3=(o,c,u,g,b)=>_(o,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(g||[]),behaviours:u,attributes:b},c),$R=Do("directory-label-event-id"),SS=({directory:o,visible:c,noChildren:u,backstage:g})=>{const b=o.menu.map(E=>oC(E,"tox-mbtn",g,z.none())),y=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(S=g.shared.providers.icons,C3("chevron-right",S,[]))]},tv(o.title)];var S;PR(o,y,g),b.each(E=>{y.push(E)});const T=E=>{rb(E.element,".tox-tree--directory").each(M=>{E.getSystem().getByDom(M).each(P=>{const N=!ur.isOn(P);ur.toggle(P),Uo(E,"expand-tree-node",{expanded:N,node:o.id})})})};return wa.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(c?["tox-tree--directory__label--visible"]:[])},components:y,action:T,eventOrder:{[Xa()]:[$R,"keying"]},buttonBehaviours:gn([...c?[Na.config({})]:[],Ts($R,[tn(Xa(),(E,M)=>{const P=M.event.raw.code==="ArrowRight",N=M.event.raw.code==="ArrowLeft";P&&u&&M.stop(),(P||N)&&rb(E.element,".tox-tree--directory").each(V=>{E.getSystem().getByDom(V).each(G=>{!ur.isOn(G)&&P||ur.isOn(G)&&N?(T(E),M.stop()):N&&!ur.isOn(G)&&(rb(G.element,".tox-tree--directory").each(Q=>{Lk(Q,".tox-tree--directory__label").each(pe=>{G.getSystem().getByDom(pe).each(Rs.focus)})}),M.stop())})})})])])})},w8=({children:o,onLeafAction:c,visible:u,treeId:g,expandedIds:b,selectedId:y,backstage:S})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:o.map(T=>T.type==="leaf"?sC({leaf:T,selectedId:y,onLeafAction:c,visible:u,treeId:g,backstage:S}):HR({directory:T,expandedIds:b,selectedId:y,onLeafAction:c,labelTabstopping:u,treeId:g,backstage:S})),behaviours:gn([wm.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:u}),_s.config({})])}),cx=Do("directory-event-id"),HR=({directory:o,onLeafAction:c,labelTabstopping:u,treeId:g,backstage:b,expandedIds:y,selectedId:S})=>{const{children:T}=o,E=Go(y),M=y.includes(o.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[SS({directory:o,visible:u,noChildren:o.children.length===0,backstage:b}),w8({children:T,expandedIds:y,selectedId:S,onLeafAction:c,visible:M,treeId:g,backstage:b})],behaviours:gn([Ts(cx,[Cs((P,N)=>{ur.set(P,M)}),tn("expand-tree-node",(P,N)=>{const{expanded:V,node:G}=N.event;E.set(V?[...E.get(),G]:E.get().filter(Q=>Q!==G))})]),ur.config({...o.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(P,N)=>{const V=P.components()[1],G=(Q=N,T.map(pe=>pe.type==="leaf"?sC({leaf:pe,selectedId:S,onLeafAction:c,visible:Q,treeId:g,backstage:b}):HR({directory:pe,expandedIds:E.get(),selectedId:S,onLeafAction:c,labelTabstopping:Q,treeId:g,backstage:b})));var Q;N?wm.grow(V):wm.shrink(V),_s.set(V,G)}})])}},lx=Do("tree-event-id");var oF=Object.freeze({__proto__:null,events:(o,c)=>{const u=o.stream.streams.setup(o,c);return Ja([tn(o.event,u),ku(()=>c.cancel())].concat(o.cancelEvent.map(g=>[tn(g,()=>c.cancel())]).getOr([])))}});const nf=o=>{const c=Go(null);return wd({readState:()=>({timer:c.get()!==null?"set":"unset"}),setTimer:u=>{c.set(u)},cancel:()=>{const u=c.get();u!==null&&u.cancel()}})};var kS=Object.freeze({__proto__:null,throttle:nf,init:o=>o.stream.streams.state(o)}),zR=[wo("stream",oa("mode",{throttle:[Yt("delay"),ht("stopEvent",!0),$a("streams",{setup:(o,c)=>{const u=o.stream,g=c3(o.onStream,u.delay);return c.setTimer(g),(b,y)=>{g.throttle(b,y),u.stopEvent&&y.stop()}},state:nf})]})),ht("event","input"),Fr("cancelEvent"),up("onStream")];const ZE=Ra({fields:zR,name:"streaming",active:oF,state:kS}),S3=(o,c,u)=>{const g=go.getValue(u);go.setValue(c,g),k3(c)},TS=(o,c)=>{const u=o.element,g=Cd(u),b=u.dom;Ei(u,"type")!=="number"&&c(b,g)},k3=o=>{TS(o,(c,u)=>c.setSelectionRange(u.length,u.length))},jf=ve("alloy.typeahead.itemexecute"),T3=ve([Fr("lazySink"),Yt("fetch"),ht("minChars",5),ht("responseTime",1e3),Hr("onOpen"),ht("getHotspot",z.some),ht("getAnchorOverrides",ve({})),ht("layouts",z.none()),ht("eventOrder",{}),rm("model",{},[ht("getDisplayText",o=>o.meta!==void 0&&o.meta.text!==void 0?o.meta.text:o.value),ht("selectsOver",!0),ht("populateFromBrowse",!0)]),Hr("onSetValue"),dm("onExecute"),Hr("onItemExecute"),ht("inputClasses",[]),ht("inputAttributes",{}),ht("inputStyles",{}),ht("matchWidth",!0),ht("useMinWidth",!1),ht("dismissOnBlur",!0),$c(["openClass"]),Fr("initialData"),Fr("listRole"),Bl("typeaheadBehaviours",[Rs,go,ZE,ts,ur,Qc]),vl("lazyTypeaheadComp",()=>Go(z.none)),vl("previewing",()=>Go(!0))].concat(Kg()).concat(FO())),sF=ve([Vg({schema:[ah()],name:"menu",overrides:o=>({fakeFocus:!0,onHighlightItem:(c,u,g)=>{o.previewing.get()?o.lazyTypeaheadComp.get().each(b=>{((y,S,T)=>{if(y.selectsOver){const E=go.getValue(S),M=y.getDisplayText(E),P=go.getValue(T);return y.getDisplayText(P).indexOf(M)===0?z.some(()=>{S3(0,S,T),((N,V)=>{TS(N,(G,Q)=>G.setSelectionRange(V,Q.length))})(S,M.length)}):z.none()}return z.none()})(o.model,b,g).fold(()=>{o.model.selectsOver?(xa.dehighlight(u,g),o.previewing.set(!0)):o.previewing.set(!1)},y=>{y(),o.previewing.set(!1)})}):o.lazyTypeaheadComp.get().each(b=>{o.model.populateFromBrowse&&S3(o.model,b,g),Es(g.element,"id").each(y=>ws(b.element,"aria-activedescendant",y))})},onExecute:(c,u)=>o.lazyTypeaheadComp.get().map(g=>(Uo(g,jf(),{item:u}),!0)),onHover:(c,u)=>{o.previewing.set(!1),o.lazyTypeaheadComp.get().each(g=>{o.model.populateFromBrowse&&S3(o.model,g,u)})}})})]),VR=pm({name:"Typeahead",configFields:T3(),partFields:sF(),factory:(o,c,u,g)=>{const b=(N,V,G)=>{o.previewing.set(!1);const Q=Qc.getCoupled(N,"sandbox");if(Jr.isOpen(Q))Qr.getCurrent(Q).each(pe=>{xa.getHighlighted(pe).fold(()=>{G(pe)},()=>{aa(Q,pe.element,"keydown",V)})});else{const pe=he=>{Qr.getCurrent(he).each(G)};BO(o,S(N),N,Q,g,pe,Vi.HighlightMenuAndItem).get(Ue)}},y=Ca(o),S=N=>V=>V.map(G=>{const Q=No(G.menus),pe=Mt(Q,he=>Bt(he.items,xe=>xe.type==="item"));return go.getState(N).update(Oe(pe,he=>he.data)),G}),T=N=>Qr.getCurrent(N),E="typeaheadevents",M=[Rs.config({}),go.config({onSetValue:o.onSetValue,store:{mode:"dataset",getDataKey:N=>Cd(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,V)=>{d1(N.element,o.model.getDisplayText(V))},...o.initialData.map(N=>Su("initialValue",N)).getOr({})}}),ZE.config({stream:{mode:"throttle",delay:o.responseTime,stopEvent:!1},onStream:(N,V)=>{const G=Qc.getCoupled(N,"sandbox");if(Rs.isFocused(N)&&Cd(N.element).length>=o.minChars){const Q=T(G).bind(he=>xa.getHighlighted(he).map(go.getValue));o.previewing.set(!0);const pe=he=>{T(G).each(xe=>{Q.fold(()=>{o.model.selectsOver&&xa.highlightFirst(xe)},ie=>{xa.highlightBy(xe,ae=>go.getValue(ae).value===ie.value),xa.getHighlighted(xe).orThunk(()=>(xa.highlightFirst(xe),z.none()))})})};BO(o,S(N),N,G,g,pe,Vi.HighlightJustMenu).get(Ue)}},cancelEvent:t1()}),ts.config({mode:"special",onDown:(N,V)=>(b(N,V,xa.highlightFirst),z.some(!0)),onEscape:N=>{const V=Qc.getCoupled(N,"sandbox");return Jr.isOpen(V)?(Jr.close(V),z.some(!0)):z.none()},onUp:(N,V)=>(b(N,V,xa.highlightLast),z.some(!0)),onEnter:N=>{const V=Qc.getCoupled(N,"sandbox"),G=Jr.isOpen(V);if(G&&!o.previewing.get())return T(V).bind(Q=>xa.getHighlighted(Q)).map(Q=>(Uo(N,jf(),{item:Q}),!0));{const Q=go.getValue(N);return $s(N,t1()),o.onExecute(V,N,Q),G&&Jr.close(V),z.some(!0)}}}),ur.config({toggleClass:o.markers.openClass,aria:{mode:"expanded"}}),Qc.config({others:{sandbox:N=>j1(o,N,{onOpen:()=>ur.on(N),onClose:()=>{o.lazyTypeaheadComp.get().each(V=>Xs(V.element,"aria-activedescendant")),ur.off(N)}})}}),Ts(E,[Cs(N=>{o.lazyTypeaheadComp.set(z.some(N))}),ku(N=>{o.lazyTypeaheadComp.set(z.none())}),ri(N=>{const V=Ue;g0(o,S(N),N,g,V,Vi.HighlightMenuAndItem).get(Ue)}),tn(jf(),(N,V)=>{const G=Qc.getCoupled(N,"sandbox");S3(o.model,N,V.event.item),$s(N,t1()),o.onItemExecute(N,G,V.event.item,go.getValue(N)),Jr.close(G),k3(N)})].concat(o.dismissOnBlur?[tn(wc(),N=>{const V=Qc.getCoupled(N,"sandbox");du(V.element).isNone()&&Jr.close(V)})]:[]))],P={[xd()]:[go.name(),ZE.name(),E],...o.eventOrder};return{uid:o.uid,dom:$l(ga(o,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...y,...Il(o.typeaheadBehaviours,M)},eventOrder:P}}}),y0=o=>({...o,toCached:()=>y0(o.toCached()),bindFuture:c=>y0(o.bind(u=>u.fold(g=>Ib(vr.error(g)),g=>c(g)))),bindResult:c=>y0(o.map(u=>u.bind(c))),mapResult:c=>y0(o.map(u=>u.map(c))),mapError:c=>y0(o.map(u=>u.mapError(c))),foldResult:(c,u)=>o.map(g=>g.fold(c,u)),withTimeout:(c,u)=>y0(Jy(g=>{let b=!1;const y=setTimeout(()=>{b=!0,g(vr.error(u()))},c);o.get(S=>{b||(clearTimeout(y),g(S))})}))}),ES=o=>y0(Jy(o)),rC=(o,c,u=[],g,b,y,S)=>{const T=c.fold(()=>({}),P=>({action:P})),E={buttonBehaviours:gn([xm(()=>!o.enabled||S.checkUiComponentContext(o.context).shouldDisable),Tl(()=>S.checkUiComponentContext(o.context)),Na.config({}),...y.map(P=>Ri.config(S.tooltips.getConfig({tooltipText:S.translate(P)}))).toArray(),Ts("button press",[ia("click")])].concat(u)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...T},M=ga(E,{dom:g});return ga(M,{components:b})},rF=(o,c,u,g=[],b)=>{const y={tag:"button",classes:["tox-tbtn"],attributes:{...o.tooltip.map(E=>({"aria-label":u.translate(E)})).getOr({}),"data-mce-name":b}},S=o.icon.map(E=>f3(E,u.icons)),T=Lw([S]);return rC(o,c,g,y,T,o.tooltip,u)},E3=o=>{switch(o){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},aF=(o,c,u,g=[],b=[])=>{const y=u.translate(o.text),S=o.icon.map(N=>f3(N,u.icons)),T=[S.getOrThunk(()=>tc(y))],E=o.buttonType.getOr(o.primary||o.borderless?"primary":"secondary"),M={tag:"button",classes:[...E3(E),...S.isSome()?["tox-button--icon"]:[],...o.borderless?["tox-button--naked"]:[],...b],attributes:{"aria-label":y,"data-mce-name":o.text}},P=o.icon.map(ve(y));return rC(o,c,g,M,T,P,u)},iF=(o,c,u,g=[],b=[])=>{const y=aF(o,z.some(c),u,g,b);return wa.sketch(y)},yg=(o,c)=>u=>{c==="custom"?Uo(u,Pb,{name:o,value:{}}):c==="submit"?$s(u,Gw):c==="cancel"?$s(u,Z1):console.error("Unknown button type: ",c)},of=(o,c,u)=>{if(((g,b)=>b==="menu")(0,c)){const g=()=>S,b=o,y={...o,type:"menubutton",search:z.none(),onSetup:T=>(T.setEnabled(o.enabled),Ue),fetch:FR(b.items,g,u)},S=ir(oC(y,"tox-tbtn",u,z.none(),!0,o.text.or(o.tooltip).getOrUndefined()));return S.asSpec()}if(((g,b)=>b==="custom"||b==="cancel"||b==="submit")(0,c)){const g=yg(o.name,c),b={...o,context:c==="cancel"?"any":o.context,borderless:!1};return iF(b,g,u.shared.providers,[])}if(((g,b)=>b==="togglebutton")(0,c))return((g,b,y)=>{var S,T;const E=g.icon.map(ae=>J1(ae,b.icons)).map(ir),M=g.buttonType.getOr(g.primary?"primary":"secondary"),P={...g,name:(S=g.name)!==null&&S!==void 0?S:"",primary:M==="primary",tooltip:g.tooltip,enabled:(T=g.enabled)!==null&&T!==void 0&&T,borderless:!1},N=P.tooltip.or(g.text).map(ae=>({"aria-label":b.translate(ae)})).getOr({}),V=E3(M??"secondary"),G=g.icon.isSome()&&g.text.isSome(),Q={tag:"button",classes:[...V.concat(g.icon.isSome()?["tox-button--icon"]:[]),...g.active?["tox-button--enabled"]:[],...G?["tox-button--icon-and-text"]:[]],attributes:{...N,...Vn(y)?{"data-mce-name":y}:{}}},pe=b.translate(g.text.getOr("")),he=tc(pe),xe=[...Lw([E.map(ae=>ae.asSpec())]),...g.text.isSome()?[he]:[]],ie=rC(P,z.some(ae=>{Uo(ae,Pb,{name:g.name,value:{setIcon:Ce=>{E.map(ke=>ke.getOpt(ae).each(Re=>{_s.set(Re,[J1(Ce,b.icons)])}))}}})}),[],Q,xe,g.tooltip,b);return wa.sketch(ie)})(o,u.shared.providers,o.text.or(o.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",c),new Error("Unknown footer button type")},_S={type:"separator"},UR=o=>({type:"menuitem",value:o.url,text:o.title,meta:{attach:o.attach},onAction:Ue}),AS=(o,c)=>({type:"menuitem",value:c,text:o,meta:{attach:void 0},onAction:Ue}),aC=(o,c)=>(u=>Oe(u,UR))(((u,g)=>Bt(g,b=>b.type===u))(o,c)),cF=o=>aC("header",o.targets),OS=o=>aC("anchor",o.targets),iC=o=>z.from(o.anchorTop).map(c=>AS("<top>",c)).toArray(),WR=o=>z.from(o.anchorBottom).map(c=>AS("<bottom>",c)).toArray(),_3=(o,c)=>{const u=o.toLowerCase();return Bt(c,g=>{var b;const y=g.meta!==void 0&&g.meta.text!==void 0?g.meta.text:g.text,S=(b=g.value)!==null&&b!==void 0?b:"";return Dr(y.toLowerCase(),u)||Dr(S.toLowerCase(),u)})},DS=Do("aria-invalid"),C8=(o,c)=>{o.dom.checked=c},S8=o=>o.dom.checked,ji=o=>(c,u,g,b,y)=>Gt(u,"name").fold(()=>o(u,b,z.none(),y),S=>c.field(S,o(u,b,Gt(g,S),y))),sf={bar:ji((o,c)=>((u,g)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Oe(u.items,g.interpreter)}))(o,c.shared)),collection:ji((o,c,u)=>xI(o,c.shared.providers,u)),alertbanner:ji((o,c)=>((u,g)=>{const b=m(u.icon,g.icons);return Jg.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${u.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:u.url?void 0:b},components:u.url?[wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:b,attributes:{title:g.translate(u.iconTooltip)}},action:y=>Uo(y,Pb,{name:"alert-banner",value:u.url}),buttonBehaviours:gn([h()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:g.translate(u.text)}}]})})(o,c.shared.providers)),input:ji((o,c,u)=>((g,b,y)=>JI({name:g.name,multiline:!1,label:g.label,inputMode:g.inputMode,placeholder:g.placeholder,flex:!1,disabled:!g.enabled,classname:"tox-textfield",validation:z.none(),maximized:g.maximized,data:y,context:g.context},b))(o,c.shared.providers,u)),textarea:ji((o,c,u)=>((g,b,y)=>JI({name:g.name,multiline:!0,label:g.label,inputMode:z.none(),placeholder:g.placeholder,flex:!0,disabled:!g.enabled,classname:"tox-textarea",validation:z.none(),maximized:g.maximized,data:y,context:g.context},b))(o,c.shared.providers,u)),label:ji((o,c,u,g)=>((b,y,S)=>{const T="tox-label",E=b.align==="center"?[`${T}--center`]:[],M=b.align==="end"?[`${T}--end`]:[],P=ir({dom:{tag:"label",classes:[T,...E,...M]},components:[tc(y.providers.translate(b.label))]}),N=Oe(b.items,y.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[P.asSpec(),...N],behaviours:gn([X1(),_s.config({}),(V=z.none(),ER(V,Ik,cp)),ts.config({mode:"acyclic"}),Ts("label",[Cs(G=>{b.for.each(Q=>{S(Q).each(pe=>{P.getOpt(G).each(he=>{var xe;const ie=(xe=Ei(pe.element,"id"))!==null&&xe!==void 0?xe:Do("form-field");ws(pe.element,"id",ie),ws(he.element,"for",ie)})})})})])])};var V})(o,c.shared,g)),iframe:(B3=(o,c,u)=>((g,b,y)=>{const S="tox-dialog__iframe",T=g.transparent?[]:[`${S}--opaque`],E=g.border?["tox-navobj-bordered"]:[],M={...g.label.map(G=>({title:G})).getOr({}),...y.map(G=>({srcdoc:G})).getOr({}),...g.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},P=((G,Q)=>{const pe=Go(G.getOr(""));return{getValue:he=>pe.get(),setValue:(he,xe)=>{if(pe.get()!==xe){const ie=he.element,ae=()=>ws(ie,"srcdoc",xe);Q?tC.fold(ve(ax),Ce=>Ce.throttle)(ie,xe,ae):ae()}pe.set(xe)}}})(y,g.streamContent),N=g.label.map(G=>Ap(G,b)),V=Yr.parts.field({factory:{sketch:G=>WI(z.from(E),{uid:G.uid,dom:{tag:"iframe",attributes:M,classes:[S,...T]},behaviours:gn([Na.config({}),Rs.config({}),Yw(y,P.getValue,P.setValue),Td.config({channels:{[Qw]:{onReceive:(Q,pe)=>{pe.newFocus.each(he=>{Eo(Q.element).each(xe=>{(xt(Q.element,he)?xn:$o)(xe,"tox-navobj-bordered-focus")})})}}}})])})}});return nS(N,V,["tox-form__group--stretched"],[])})(o,c.shared.providers,u),(o,c,u,g,b)=>{const y=ga(c,{source:"dynamic"});return ji(B3)(o,y,u,g,b)}),button:ji((o,c)=>((u,g)=>{const b=yg(u.name,"custom");return y=z.none(),S=Yr.parts.field({factory:wa,...aF(u,z.some(b),g,[Xw(""),X1()])}),nS(y,S,[],[]);var y,S})(o,c.shared.providers)),checkbox:ji((o,c,u)=>((g,b,y)=>{const S=N=>(N.element.dom.click(),z.some(!0)),T=Yr.parts.field({factory:{sketch:In},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:gn([X1(),hs.config({disabled:()=>!g.enabled||b.checkUiComponentContext(g.context).shouldDisable,onDisabled:N=>{Eo(N.element).each(V=>xn(V,"tox-checkbox--disabled"))},onEnabled:N=>{Eo(N.element).each(V=>$o(V,"tox-checkbox--disabled"))}}),Na.config({}),Rs.config({}),ER(y,S8,C8),ts.config({mode:"special",onEnter:S,onSpace:S,stopSpaceKeyup:!0}),Ts("checkbox-events",[tn(nh(),(N,V)=>{Uo(N,Yd,{name:g.name})})])])}),E=Yr.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[tc(b.translate(g.label))],behaviours:gn([aS.config({})])}),M=N=>_(N==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+N]},b.icons),P=ir({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[M("checked"),M("unchecked")]});return Yr.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[T,P.asSpec(),E],fieldBehaviours:gn([hs.config({disabled:()=>!g.enabled||b.checkUiComponentContext(g.context).shouldDisable}),Tl(()=>b.checkUiComponentContext(g.context))])})})(o,c.shared.providers,u)),colorinput:ji((o,c,u)=>((g,b,y,S)=>{const T=Yr.parts.field({factory:ld,inputClasses:["tox-textfield"],data:S,onSetValue:N=>Lb.run(N).get(Ue),inputBehaviours:gn([hs.config({disabled:()=>b.providers.isDisabled()||b.providers.checkUiComponentContext(g.context).shouldDisable}),Tl(()=>b.providers.checkUiComponentContext(g.context)),Na.config({}),Lb.config({invalidClass:"tox-textbox-field-invalid",getRoot:N=>Eo(N.element),notify:{onValid:N=>{const V=go.getValue(N);Uo(N,jO,{color:V})}},validator:{validateOnLoad:!1,validate:N=>{const V=go.getValue(N);if(V.length===0)return Ib(vr.value(!0));{const G=vi("span");fs(G,"background-color",V);const Q=ui(G,"background-color").fold(()=>vr.error("blah"),pe=>vr.value(V));return Ib(Q)}}}})]),selectOnFocus:!1}),E=g.label.map(N=>Ap(N,b.providers)),M=(N,V)=>{Uo(N,kE,{value:V})},P=ir(((N,V)=>Vf.sketch({dom:N.dom,components:N.components,toggleClass:"mce-active",dropdownBehaviours:gn([lE(()=>V.providers.isDisabled()||V.providers.checkUiComponentContext(N.context).shouldDisable),Tl(()=>V.providers.checkUiComponentContext(N.context)),aS.config({}),Na.config({})]),layouts:N.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:V.getSink,fetch:G=>Jy(Q=>N.fetch(Q)).map(Q=>z.from(Q2(ga(bE(Do("menu-value"),Q,pe=>{N.onItemAction(G,pe)},N.columns,N.presets,Ee.CLOSE_ON_EXECUTE,Qe,V.providers),{movement:MO(N.columns,N.presets)})))),parts:{menu:Xm(0,0,N.presets)}}))({dom:{tag:"span",attributes:{"aria-label":b.providers.translate("Color swatch")}},layouts:{onRtl:()=>[wl,Sc,kc],onLtr:()=>[Sc,wl,kc]},components:[],fetch:jw(y.getColors(g.storageKey),g.storageKey,y.hasCustomColors()),columns:y.getColorCols(g.storageKey),presets:"color",onItemAction:(N,V)=>{P.getOpt(N).each(G=>{V==="custom"?y.colorPicker(Q=>{Q.fold(()=>$s(G,bR),pe=>{M(G,pe),Ms(g.storageKey,pe)})},"#ffffff"):M(G,V==="remove"?"":V)})},context:g.context},b));return Yr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:E.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[T,P.asSpec()]}]),fieldBehaviours:gn([Ts("form-field-events",[tn(jO,(N,V)=>{P.getOpt(N).each(G=>{fs(G.element,"background-color",V.event.color)}),Uo(N,Yd,{name:g.name})}),tn(kE,(N,V)=>{Yr.getField(N).each(G=>{go.setValue(G,V.event.value),Qr.getCurrent(N).each(Rs.focus)})}),tn(bR,(N,V)=>{Yr.getField(N).each(G=>{Qr.getCurrent(N).each(Rs.focus)})})])])})})(o,c.shared,c.colorinput,u)),colorpicker:ji((o,c,u)=>((g,b,y)=>{const S=M=>"tox-"+M,T=$I((M=>P=>wn(P)?M.translate(r3[P]):M.translate(P))(b),S,b.tooltips.getConfig,(M,P,N=M,V=M)=>_(N,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+M],attributes:{title:b.translate(V),"aria-live":"polite",...P.fold(()=>({}),G=>({id:G}))}},b.icons)),E=ir(T.sketch({dom:{tag:"div",classes:[S("color-picker-container")],attributes:{role:"presentation"}},onValidHex:M=>{Uo(M,Pb,{name:"hex-valid",value:!0})},onInvalidHex:M=>{Uo(M,Pb,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[E.asSpec()],behaviours:gn([Yw(y,M=>{const P=E.get(M);return Qr.getCurrent(P).bind(N=>go.getValue(N).hex).map(N=>"#"+Ba(N,"#")).getOr("")},(M,P)=>{const N=z.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(P)).bind(G=>ct(G,1)),V=E.get(M);Qr.getCurrent(V).fold(()=>{console.log("Can not find form")},G=>{go.setValue(G,{hex:N.getOr("")}),hS.getField(G,"hex").each(Q=>{$s(Q,Iu())})})}),X1()])}})(0,c.shared.providers,u)),dropzone:ji((o,c,u)=>VI(o,c.shared.providers,u)),grid:ji((o,c)=>((u,g)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${u.columns}col`]},components:Oe(u.items,g.interpreter)}))(o,c.shared)),listbox:ji((o,c,u)=>((g,b,y)=>{const S=Qt(g.items,V=>!jE(V)),T=b.shared.providers,E=y.bind(V=>p3(g.items,V)).orThunk(()=>At(g.items).filter(jE)),M=g.label.map(V=>Ap(V,T)),P=Yr.parts.field({dom:{},factory:{sketch:V=>yS({context:g.context,uid:V.uid,text:E.map(G=>G.text),icon:z.none(),tooltip:z.none(),role:vn(!S,"combobox"),...S?{}:{listRole:"listbox"},ariaLabel:g.label,fetch:(G,Q)=>{const pe=KI(G,g.name,g.items,go.getValue(G),S);Q(Q1(pe,Ee.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:z.none()}))},onSetup:ve(Ue),getApi:ve({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Na.config({}),Yw(E.map(G=>G.value),G=>Ei(G.element,MR),(G,Q)=>{p3(g.items,Q).each(pe=>{ws(G.element,MR,pe.value),Uo(G,Wf,{text:pe.text})})})]},"tox-listbox",b.shared)}}),N={dom:{tag:"div",classes:["tox-listboxfield"]},components:[P]};return Yr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Et([M.toArray(),[N]]),fieldBehaviours:gn([hs.config({disabled:()=>!g.enabled||T.checkUiComponentContext(g.context).shouldDisable,onDisabled:V=>{Yr.getField(V).each(hs.disable)},onEnabled:V=>{Yr.getField(V).each(hs.enable)}})])})})(o,c,u)),selectbox:ji((o,c,u)=>((g,b,y)=>{const S=Oe(g.items,N=>({text:b.translate(N.text),value:N.value})),T=g.label.map(N=>Ap(N,b)),E=Yr.parts.field({dom:{},...y.map(N=>({data:N})).getOr({}),selectAttributes:{size:g.size},options:S,factory:YI,selectBehaviours:gn([hs.config({disabled:()=>!g.enabled||b.checkUiComponentContext(g.context).shouldDisable}),Na.config({}),Ts("selectbox-change",[tn(nh(),(N,V)=>{Uo(N,Yd,{name:g.name})})])])}),M=g.size>1?z.none():z.some(_("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},b.icons)),P={dom:{tag:"div",classes:["tox-selectfield"]},components:Et([[E],M.toArray()])};return Yr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Et([T.toArray(),[P]]),fieldBehaviours:gn([hs.config({disabled:()=>!g.enabled||b.checkUiComponentContext(g.context).shouldDisable,onDisabled:N=>{Yr.getField(N).each(hs.disable)},onEnabled:N=>{Yr.getField(N).each(hs.enable)}}),Tl(()=>b.checkUiComponentContext(g.context))])})})(o,c.shared.providers,u)),sizeinput:ji((o,c)=>((u,g)=>wS({inDialog:!0,label:u.label,enabled:u.enabled,context:z.some(u.context),name:z.some(u.name),width:"",height:"",onEnter:z.none(),onInput:z.none(),onSetup:z.none(),getApi:z.none()},g))(o,c.shared.providers)),slider:ji((o,c,u)=>((g,b,y)=>{const S=Np.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tc(b.translate(g.label))]}),T=Np.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),E=Np.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Np.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:g.min,maxX:g.max,getInitialValue:ve(y.getOrThunk(()=>(Math.abs(g.max)-Math.abs(g.min))/2))},components:[S,T,E],sliderBehaviours:gn([X1(),Rs.config({})]),onChoose:(M,P,N)=>{Uo(M,Yd,{name:g.name,value:N})},onChange:(M,P,N)=>{Uo(M,Yd,{name:g.name,value:N})}})})(o,c.shared.providers,u)),urlinput:ji((o,c,u)=>((g,b,y,S)=>{const T=b.shared.providers,E=ie=>{const ae=go.getValue(ie);y.addToHistory(ae.value,g.filetype)},M={...S.map(ie=>({initialData:ie})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":DS,type:"url"},minChars:0,responseTime:0,fetch:ie=>{const ae=((ke,Re,Ye)=>{var vt,en;const jt=go.getValue(Re),cn=(en=(vt=jt==null?void 0:jt.meta)===null||vt===void 0?void 0:vt.text)!==null&&en!==void 0?en:jt.value;return Ye.getLinkInformation().fold(()=>[],Dn=>{const fo=_3(cn,(ls=>Oe(ls,As=>AS(As,As)))(Ye.getHistory(ke)));return ke==="file"?(jo=[fo,_3(cn,cF(Dn)),_3(cn,Et([iC(Dn),OS(Dn),WR(Dn)]))],pt(jo,(ls,As)=>ls.length===0||As.length===0?ls.concat(As):ls.concat(_S,As),[])):fo;var jo})})(g.filetype,ie,y),Ce=Q1(ae,Ee.BUBBLE_TO_SANDBOX,b,{isHorizontalMenu:!1,search:z.none()});return Ib(Ce)},getHotspot:ie=>he.getOpt(ie),onSetValue:(ie,ae)=>{ie.hasConfigured(Lb)&&Lb.run(ie).get(Ue)},typeaheadBehaviours:gn([...y.getValidationHandler().map(ie=>Lb.config({getRoot:ae=>Eo(ae.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ae,Ce)=>{V.getOpt(ae).each(ke=>{ws(ke.element,"title",T.translate(Ce))})}},validator:{validate:ae=>{const Ce=go.getValue(ae);return ES(ke=>{ie({type:g.filetype,url:Ce.value},Re=>{if(Re.status==="invalid"){const Ye=vr.error(Re.message);ke(Ye)}else{const Ye=vr.value(Re.message);ke(Ye)}})})},validateOnLoad:!1}})).toArray(),hs.config({disabled:()=>!g.enabled||T.checkUiComponentContext(g.context).shouldDisable}),Na.config({}),Ts("urlinput-events",[tn(Iu(),ie=>{const ae=Cd(ie.element),Ce=ae.trim();Ce!==ae&&d1(ie.element,Ce),g.filetype==="file"&&Uo(ie,Yd,{name:g.name})}),tn(nh(),ie=>{Uo(ie,Yd,{name:g.name}),E(ie)}),tn(Cv(),ie=>{Uo(ie,Yd,{name:g.name}),E(ie)})])]),eventOrder:{[Iu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ie=>ie.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:b.shared.getSink,parts:{menu:Xm(0,0,"normal")},onExecute:(ie,ae,Ce)=>{Uo(ae,Gw,{})},onItemExecute:(ie,ae,Ce,ke)=>{E(ie),Uo(ie,Yd,{name:g.name})}},P=Yr.parts.field({...M,factory:VR}),N=g.label.map(ie=>Ap(ie,T)),V=ir(((ie,ae,Ce=ie,ke=ie)=>_(Ce,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ie],attributes:{title:T.translate(ke),"aria-live":"polite",...ae.fold(()=>({}),Re=>({id:Re}))}},T.icons))("invalid",z.some(DS),"warning")),G=ir({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[V.asSpec()]}),Q=y.getUrlPicker(g.filetype),pe=Do("browser.url.event"),he=ir({dom:{tag:"div",classes:["tox-control-wrap"]},components:[P,G.asSpec()],behaviours:gn([hs.config({disabled:()=>!g.enabled||T.checkUiComponentContext(g.context).shouldDisable})])}),xe=ir(iF({context:g.context,name:g.name,icon:z.some("browse"),text:g.picker_text.or(g.label).getOr(""),enabled:g.enabled,primary:!1,buttonType:z.none(),borderless:!0},ie=>$s(ie,pe),T,[],["tox-browse-url"]));return Yr.sketch({dom:gR([]),components:N.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Et([[he.asSpec()],Q.map(()=>xe.asSpec()).toArray()])}]),fieldBehaviours:gn([hs.config({disabled:()=>!g.enabled||T.checkUiComponentContext(g.context).shouldDisable,onDisabled:ie=>{Yr.getField(ie).each(hs.disable),xe.getOpt(ie).each(hs.disable)},onEnabled:ie=>{Yr.getField(ie).each(hs.enable),xe.getOpt(ie).each(hs.enable)}}),Tl(()=>T.checkUiComponentContext(g.context)),Ts("url-input-events",[tn(pe,ie=>{Qr.getCurrent(ie).each(ae=>{const Ce=go.getValue(ae),ke={fieldname:g.name,...Ce};Q.each(Re=>{Re(ke).get(Ye=>{go.setValue(ae,Ye),Uo(ie,Yd,{name:g.name})})})})})])])})})(o,c,c.urlinput,u)),customeditor:ji(o=>{const c=Br(),u=ir({dom:{tag:o.tag}}),g=Br(),b=!a3(o)&&o.onFocus.isSome()?[Rs.config({onFocus:y=>{o.onFocus.each(S=>{S(y.element.dom)})}}),Na.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:gn([Ts("custom-editor-events",[Cs(y=>{u.getOpt(y).each(S=>{(a3(o)?o.init(S.element.dom):zI.load(o.scriptId,o.scriptUrl).then(T=>T(S.element.dom,o.settings))).then(T=>{g.on(E=>{T.setValue(E)}),g.clear(),c.set(T)})})})]),Yw(z.none(),()=>c.get().fold(()=>g.get().getOr(""),y=>y.getValue()),(y,S)=>{c.get().fold(()=>g.set(S),T=>T.setValue(S))}),X1()].concat(b)),components:[u.asSpec()]}}),htmlpanel:ji((o,c)=>((u,g)=>{const b=["tox-form__group",...u.stretched?["tox-form__group--stretched"]:[]],y=Ts("htmlpanel",[Cs(S=>{u.onInit(S.element.dom)})]);return u.presets==="presentation"?Jg.sketch({dom:{tag:"div",classes:b,innerHtml:u.html},containerBehaviours:gn([Ri.config({...g.tooltips.getConfig({tooltipText:"",onShow:S=>{qs(S.element,"[data-mce-tooltip]:hover").orThunk(()=>du(S.element)).each(T=>{Es(T,"data-mce-tooltip").each(E=>{Ri.setComponents(S,g.tooltips.getComponents({tooltipText:E}))})})}}),mode:"children-normal",anchor:S=>({type:"node",node:qs(S.element,"[data-mce-tooltip]:hover").orThunk(()=>du(S.element).filter(T=>Es(T,"data-mce-tooltip").isSome())),root:S.element,layouts:{onLtr:ve([kc,Hc,Sc,Cl,wl,Ac]),onRtl:ve([kc,Hc,Sc,Cl,wl,Ac])},bubble:jm(0,-2,{})})}),y])}):Jg.sketch({dom:{tag:"div",classes:b,innerHtml:u.html,attributes:{role:"document"}},containerBehaviours:gn([Na.config({}),Rs.config({}),y])})})(o,c.shared.providers)),imagepreview:ji((o,c,u)=>((g,b)=>{const y=Go(b.getOr({url:""})),S=ir({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:b.map(P=>({src:P.url})).getOr({})}}),T=ir({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[S.asSpec()]}),E={};g.height.each(P=>E.height=P);const M=b.map(P=>({url:P.url,zoom:z.from(P.zoom),cachedWidth:z.from(P.cachedWidth),cachedHeight:z.from(P.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:E,attributes:{role:"presentation"}},components:[T.asSpec()],behaviours:gn([X1(),Yw(M,()=>y.get(),(P,N)=>{const V={url:N.url};N.zoom.each(Q=>V.zoom=Q),N.cachedWidth.each(Q=>V.cachedWidth=Q),N.cachedHeight.each(Q=>V.cachedHeight=Q),y.set(V);const G=()=>{const{cachedWidth:Q,cachedHeight:pe,zoom:he}=V;if(!st(Q)&&!st(pe)){if(st(he)){const ie=((ae,Ce,ke)=>{const Re=Je(ae),Ye=oi(ae);return Math.min(Re/Ce,Ye/ke,1)})(P.element,Q,pe);V.zoom=ie}const xe=((ie,ae,Ce,ke,Re)=>{const Ye=Ce*Re,vt=ke*Re,en=Math.max(0,ie/2-Ye/2),jt=Math.max(0,ae/2-vt/2);return{left:en.toString()+"px",top:jt.toString()+"px",width:Ye.toString()+"px",height:vt.toString()+"px"}})(Je(P.element),oi(P.element),Q,pe,V.zoom);T.getOpt(P).each(ie=>{li(ie.element,xe)})}};S.getOpt(P).each(Q=>{const pe=Q.element;var he;N.url!==Ei(pe,"src")&&(ws(pe,"src",N.url),$o(P.element,"tox-imagepreview__loaded")),G(),(he=pe,new Promise((xe,ie)=>{const ae=()=>{ke(),xe(he)},Ce=[Ed(he,"load",ae),Ed(he,"error",()=>{ke(),ie("Unable to load data from image: "+he.dom.src)})],ke=()=>ft(Ce,Re=>Re.unbind());he.dom.complete&&ae()})).then(xe=>{P.getSystem().isConnected()&&(xn(P.element,"tox-imagepreview__loaded"),V.cachedWidth=xe.dom.naturalWidth,V.cachedHeight=xe.dom.naturalHeight,G())})})})])}})(o,u)),table:ji((o,c)=>((u,g)=>{const b=T=>({dom:{tag:"td",innerHtml:g.translate(T)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(S=u.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Oe(S,T=>({dom:{tag:"th",innerHtml:g.translate(T)}}))}]}),(y=u.cells,{dom:{tag:"tbody"},components:Oe(y,T=>({dom:{tag:"tr"},components:Oe(T,b)}))})],behaviours:gn([Na.config({}),Rs.config({})])};var y,S})(o,c.shared.providers)),tree:ji((o,c)=>((u,g)=>{const b=u.onLeafAction.getOr(Ue),y=u.onToggleExpand.getOr(Ue),S=u.defaultExpandedIds,T=Go(S),E=Go(u.defaultSelectedId),M=Do("tree-id"),P=(N,V)=>u.items.map(G=>G.type==="leaf"?sC({leaf:G,selectedId:N,onLeafAction:b,visible:!0,treeId:M,backstage:g}):HR({directory:G,selectedId:N,onLeafAction:b,expandedIds:V,labelTabstopping:!0,treeId:M,backstage:g}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:P(E.get(),T.get()),behaviours:gn([ts.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Ts(lx,[tn("expand-tree-node",(N,V)=>{const{expanded:G,node:Q}=V.event;T.set(G?[...T.get(),Q]:T.get().filter(pe=>pe!==Q)),y(T.get(),{expanded:G,node:Q})})]),Td.config({channels:{[`update-active-item-${M}`]:{onReceive:(N,V)=>{E.set(z.some(V.value)),_s.set(N,P(z.some(V.value),T.get()))}}}}),_s.config({})])}})(o,c)),panel:ji((o,c)=>((u,g)=>({dom:{tag:"div",classes:u.classes},components:Oe(u.items,g.shared.interpreter)}))(o,c))},GE={field:(o,c)=>c,record:ve([])},Zf=(o,c,u,g,b)=>{const y=ga(g,{shared:{interpreter:S=>jR(o,S,u,y,b)}});return jR(o,c,u,y,b)},jR=(o,c,u,g,b)=>Gt(sf,c.type).fold(()=>(console.error(`Unknown factory type "${c.type}", defaulting to container: `,c),c),y=>y(o,c,u,g,b)),Ci=(o,c,u,g)=>jR(GE,o,c,u,g),ux="layout-inset",x0=o=>o.x,RS=(o,c)=>o.x+o.width/2-c.width/2,A3=(o,c)=>o.x+o.width-c.width,qE=o=>o.y,KE=(o,c)=>o.y+o.height-c.height,lF=(o,c)=>o.y+o.height/2-c.height/2,MS=(o,c,u)=>uu(A3(o,c),KE(o,c),u.insetSouthwest(),Hi(),"southwest",Yl(o,{right:0,bottom:3}),ux),YE=(o,c,u)=>uu(x0(o),KE(o,c),u.insetSoutheast(),Bg(),"southeast",Yl(o,{left:1,bottom:3}),ux),NS=(o,c,u)=>uu(A3(o,c),qE(o),u.insetNorthwest(),Cc(),"northwest",Yl(o,{right:0,top:2}),ux),zb=(o,c,u)=>uu(x0(o),qE(o),u.insetNortheast(),zC(),"northeast",Yl(o,{left:1,top:2}),ux),Gf=(o,c,u)=>uu(RS(o,c),qE(o),u.insetNorth(),VC(),"north",Yl(o,{top:2}),ux),BS=(o,c,u)=>uu(RS(o,c),KE(o,c),u.insetSouth(),kd(),"south",Yl(o,{bottom:3}),ux),XE=(o,c,u)=>uu(A3(o,c),lF(o,c),u.insetEast(),kf(),"east",Yl(o,{right:0}),ux),uF=(o,c,u)=>uu(x0(o),lF(o,c),u.insetWest(),Iv(),"west",Yl(o,{left:1}),ux),dF=o=>{switch(o){case"north":return Gf;case"northeast":return zb;case"northwest":return NS;case"south":return BS;case"southeast":return YE;case"southwest":return MS;case"east":return XE;case"west":return uF}},mF=(o,c,u,g,b)=>Pv(g).map(dF).getOr(Gf)(o,c,u,g,b),k8=o=>{switch(o){case"north":return BS;case"northeast":return YE;case"northwest":return MS;case"south":return Gf;case"southeast":return zb;case"southwest":return NS;case"east":return uF;case"west":return XE}},T8=(o,c,u,g,b)=>Pv(g).map(k8).getOr(Gf)(o,c,u,g,b),IS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},E8=(o,c,u)=>{const g={maxHeightFunction:x1()};return()=>u()?{type:"node",root:Bs(La(o())),node:z.from(o()),bubble:jm(12,12,IS),layouts:{onRtl:()=>[zb],onLtr:()=>[NS]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:jm(-12,12,IS),layouts:{onRtl:()=>[Sc,wl,kc],onLtr:()=>[wl,Sc,kc]},overrides:g}},_8=(o,c,u,g)=>{const b={maxHeightFunction:x1()};return()=>g()?{type:"node",root:Bs(La(c())),node:z.from(c()),bubble:jm(12,12,IS),layouts:{onRtl:()=>[Gf],onLtr:()=>[Gf]},overrides:b}:o?{type:"node",root:Bs(La(c())),node:z.from(c()),bubble:jm(0,-qa(c()),IS),layouts:{onRtl:()=>[Hc],onLtr:()=>[Hc]},overrides:b}:{type:"hotspot",hotspot:u(),bubble:jm(0,0,IS),layouts:{onRtl:()=>[Hc],onLtr:()=>[Hc]},overrides:b}},gF=(o,c,u)=>()=>u()?{type:"node",root:Bs(La(o())),node:z.from(o()),layouts:{onRtl:()=>[Gf],onLtr:()=>[Gf]}}:{type:"hotspot",hotspot:c(),layouts:{onRtl:()=>[kc],onLtr:()=>[kc]}},A8=(o,c)=>()=>({type:"selection",root:c(),getSelection:()=>{const u=o.selection.getRng(),g=o.model.table.getSelectedCells();if(g.length>1){const b=g[0],y=g[g.length-1],S={firstCell:yt(b),lastCell:yt(y)};return z.some(S)}return z.some($v.range(yt(u.startContainer),u.startOffset,yt(u.endContainer),u.endOffset))}}),fF=o=>c=>({type:"node",root:o(),node:c}),JE=(o,c,u,g)=>{const b=nc(o),y=()=>yt(o.getBody()),S=()=>yt(o.getContentAreaContainer()),T=()=>b||!g();return{inlineDialog:E8(S,c,T),inlineBottomDialog:_8(o.inline,S,u,T),banner:gF(S,c,T),cursor:A8(o,y),node:fF(y)}},ZR=o=>(c,u)=>{lI(o)(c,u)},pF=o=>()=>aI(o),O8=o=>c=>Uw(o,c),cC=o=>c=>n8(o,c),hF=o=>()=>OD(o),D8=o=>gr(o,"items"),R8=o=>gr(o,"format"),M8=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],N8=o=>pt(o,(c,u)=>{if(yo(u,"items")){const g=N8(u.items);return{customFormats:c.customFormats.concat(g.customFormats),formats:c.formats.concat([{title:u.title,items:g.formats}])}}if(yo(u,"inline")||(g=>yo(g,"block"))(u)||(g=>yo(g,"selector"))(u)){const g=`custom-${wn(u.name)?u.name:u.title.toLowerCase()}`;return{customFormats:c.customFormats.concat([{name:g,format:u}]),formats:c.formats.concat([{title:u.title,format:g,icon:u.icon}])}}return{...c,formats:c.formats.concat(u)}},{customFormats:[],formats:[]}),qf=o=>I2(o).map(c=>{const u=((g,b)=>{const y=N8(b),S=T=>{ft(T,E=>{g.formatter.has(E.name)||g.formatter.register(E.name,E.format)})};return g.formatter?S(y.customFormats):g.on("init",()=>{S(y.customFormats)}),y.formats})(o,c);return jA(o)?M8.concat(u):u}).getOr(M8),QE=(o,c,u)=>({...o,type:"formatter",isSelected:c(o.format),getStylePreview:u(o.format)}),Pp=(o,c,u,g)=>{const b=y=>Oe(y,S=>D8(S)?(T=>{const E=b(T.items);return{...T,type:"submenu",getStyleItems:ve(E)}})(S):R8(S)?(T=>QE(T,u,g))(S):(T=>{const E=Dt(T);return E.length===1&&Le(E,"title")})(S)?{...S,type:"separator"}:(T=>{const E=wn(T.name)?T.name:Do(T.title),M=`custom-${E}`,P={...T,type:"formatter",format:M,isSelected:u(M),getStylePreview:g(M)};return o.formatter.register(E,P),P})(S));return b(c)},Wu=o=>{let c=0;const u=g=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[tc(g.tooltipText)]}];return{getConfig:g=>({delayForShow:()=>c>0?60:300,delayForHide:ve(300),exclusive:!0,lazySink:o,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:u(g),onShow:(b,y)=>{c++,g.onShow&&g.onShow(b,y)},onHide:(b,y)=>{c--,g.onHide&&g.onHide(b,y)},onSetup:g.onSetup}),getComponents:u}},bF=Ip.trim,dx=o=>c=>!!((u=>Vn(u)&&u.nodeType===1)(c)&&(c.contentEditable===o||c.getAttribute("data-mce-contenteditable")===o)),vF=dx("true"),GR=dx("false"),B8=(o,c,u,g,b)=>({type:o,title:c,url:u,level:g,attach:b}),qR=o=>o.innerText||o.textContent,FS=o=>(c=>c&&c.nodeName==="A"&&(c.id||c.name)!==void 0)(o)&&dl(o),O3=o=>o&&/^(H[1-6])$/.test(o.nodeName),dl=o=>(c=>{let u=c;for(;u=u.parentNode;){const g=u.contentEditable;if(g&&g!=="inherit")return vF(u)}return!1})(o)&&!GR(o),I8=o=>O3(o)&&dl(o),F8=o=>{var c;const u=(g=>g.id?g.id:Do("h"))(o);return B8("header",(c=qR(o))!==null&&c!==void 0?c:"","#"+u,(g=>O3(g)?parseInt(g.nodeName.substr(1),10):0)(o),()=>{o.id=u})},PS=o=>{const c=o.id||o.name,u=qR(o);return B8("anchor",u||"#"+c,"#"+c,0,Ue)},LS=o=>bF(o.title).length>0,$S=o=>{const c=(u=>Oe(Oc(yt(u),"h1,h2,h3,h4,h5,h6,a:not([href])"),b=>b.dom))(o);return Bt((u=>Oe(Bt(u,I8),F8))(c).concat((u=>Oe(Bt(u,FS),PS))(c)),LS)},HS="tinymce-url-history",e_=o=>wn(o)&&/^https?/.test(o),D3=o=>no(o)&&Mn(o,c=>{return!(Fn(u=c)&&u.length<=5&&Pn(u,e_));var u}).isNone(),R3=()=>{const o=X2.getItem(HS);if(o===null)return{};let c;try{c=JSON.parse(o)}catch(u){if(u instanceof SyntaxError)return console.log("Local storage "+HS+" was not valid JSON",u),{};throw u}return D3(c)?c:(console.log("Local storage "+HS+" was not valid format",c),{})},P8=o=>{const c=R3();return Gt(c,o).getOr([])},L8=(o,c)=>{if(!e_(o))return;const u=R3(),g=Gt(u,c).getOr([]),b=Bt(g,y=>y!==o);u[c]=[o].concat(b).slice(0,5),(y=>{if(!D3(y))throw new Error(`Bad format for history:
`+JSON.stringify(y));X2.setItem(HS,JSON.stringify(y))})(u)},KR=o=>!!o,zS=o=>ut(Ip.makeMap(o,/[, ]/),KR),YR=o=>z.from(By(o)),XR=o=>z.from(o).filter(wn).getOrUndefined(),yF=o=>({getHistory:P8,addToHistory:L8,getLinkInformation:()=>(c=>L1(c)?z.some({targets:$S(c.getBody()),anchorTop:XR(Iy(c)),anchorBottom:XR(bw(c))}):z.none())(o),getValidationHandler:()=>(c=>z.from(GA(c)))(o),getUrlPicker:c=>((u,g)=>((b,y)=>{const S=(T=>{const E=z.from(hw(T)).filter(KR).map(zS);return YR(T).fold(Qe,M=>E.fold(Be,P=>Dt(P).length>0&&P))})(b);return ss(S)?S?YR(b):z.none():S[y]?YR(b):z.none()})(u,g).map(b=>y=>Jy(S=>{const T={filetype:g,fieldname:y.fieldname,...z.from(y.meta).getOr({})};b.call(u,(E,M)=>{if(!wn(E))throw new Error("Expected value to be string");if(M!==void 0&&!no(M))throw new Error("Expected meta to be a object");S({value:E,meta:M})},y.value,T)})))(o,c)}),pu=cT,Ih=fb,JR=ve([ht("shell",!1),Yt("makeItem"),ht("setupItem",Ue),gb("listBehaviours",[_s])]),lC=Ug({name:"items",overrides:()=>({behaviours:gn([_s.config({})])})}),M3=ve([lC]),QR=pm({name:ve("CustomList")(),configFields:JR(),partFields:M3(),factory:(o,c,u,g)=>{const b=o.shell?{behaviours:[_s.config({})],components:[]}:{behaviours:[],components:c};return{uid:o.uid,dom:o.dom,components:b.components,behaviours:Il(o.listBehaviours,b.behaviours),apis:{setItems:(y,S)=>{var T;(T=y,o.shell?z.some(T):lr(T,o,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const M=_s.contents(E),P=S.length,N=P-M.length,V=N>0?mn(N,()=>o.makeItem()):[],G=M.slice(P);ft(G,pe=>_s.remove(E,pe)),ft(V,pe=>_s.append(E,pe));const Q=_s.contents(E);ft(Q,(pe,he)=>{o.setupItem(y,pe,S[he],he)})})}}}},apis:{setItems:(o,c,u)=>{o.setItems(c,u)}}}),uC=ve([Yt("dom"),ht("shell",!0),Bl("toolbarBehaviours",[_s])]),xF=ve([Ug({name:"groups",overrides:()=>({behaviours:gn([_s.config({})])})})]),Fh=pm({name:"Toolbar",configFields:uC(),partFields:xF(),factory:(o,c,u,g)=>{const b=o.shell?{behaviours:[_s.config({})],components:[]}:{behaviours:[],components:c};return{uid:o.uid,dom:o.dom,components:b.components,behaviours:Il(o.toolbarBehaviours,b.behaviours),apis:{setGroups:(y,S)=>{var T;(T=y,o.shell?z.some(T):lr(T,o,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{_s.set(E,S)})},refresh:Ue},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,c,u)=>{o.setGroups(c,u)}}}),$8=Ue,H8=Qe,N3=ve([]);var B3,eM=Object.freeze({__proto__:null,setup:$8,isDocked:H8,getBehaviours:N3});const I3=ve(Do("toolbar-height-change")),Vb={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},tM="tox-tinymce--toolbar-sticky-on",wF="tox-tinymce--toolbar-sticky-off",F3=(o,c)=>Le(ec.getModes(o),c),nM=o=>{const c=o.element;Eo(c).each(u=>{const g="padding-"+ec.getModes(o)[0];if(ec.isDocked(o)){const b=Je(u);fs(c,"width",b+"px"),fs(u,g,(y=>qa(y)+(parseInt(Wa(y,"margin-top"),10)||0)+(parseInt(Wa(y,"margin-bottom"),10)||0))(c)+"px")}else or(c,"width"),or(u,g)})},P3=(o,c)=>{c?($o(o,Vb.fadeOutClass),ua(o,[Vb.transitionClass,Vb.fadeInClass])):($o(o,Vb.fadeInClass),ua(o,[Vb.fadeOutClass,Vb.transitionClass]))},VS=(o,c)=>{const u=yt(o.getContainer());c?(xn(u,tM),$o(u,wF)):(xn(u,wF),$o(u,tM))},oM=(o,c)=>{const u=Br(),g=c.getSink,b=T=>{g().each(E=>T(E.element))},y=T=>{o.inline||nM(T),VS(o,ec.isDocked(T)),T.getSystem().broadcastOn([Uv()],{}),g().each(E=>E.getSystem().broadcastOn([Uv()],{}))},S=o.inline?[]:[Td.config({channels:{[I3()]:{onReceive:nM}}})];return[Rs.config({}),ec.config({contextual:{lazyContext:T=>{const E=qa(T.element),M=o.inline?o.getContentAreaContainer():o.getContainer();return z.from(M).map(P=>{const N=_i(yt(P));return gg(o,T.element).fold(()=>{const V=N.height-E,G=N.y+(F3(T,"top")?0:E);return tr(N.x,G,N.width,V)},V=>{const G=Fm(N,eu(V)),Q=F3(T,"top")?G.y:G.y+E;return tr(G.x,Q,G.width,G.height-E)})})},onShow:()=>{b(T=>P3(T,!0))},onShown:T=>{b(E=>Pr(E,[Vb.transitionClass,Vb.fadeInClass])),u.get().each(E=>{((M,P)=>{const N=Ge(P);h1(N).filter(V=>!xt(P,V)).filter(V=>xt(V,yt(N.dom.body))||We(M,V)).each(()=>sd(P))})(T.element,E),u.clear()})},onHide:T=>{((E,M)=>du(E).orThunk(()=>M().toOptional().bind(P=>du(P.element))))(T.element,g).fold(u.clear,u.set),b(E=>P3(E,!1))},onHidden:()=>{b(T=>Pr(T,[Vb.transitionClass]))},...Vb},lazyViewport:T=>gg(o,T.element).fold(()=>{const E=Ic(),M=fw(o),P=E.y+(F3(T,"top")&&!QA(o)?M:0),N=E.height-(F3(T,"bottom")?M:0);return{bounds:tr(E.x,P,E.width,N),optScrollEnv:z.none()}},E=>({bounds:eu(E),optScrollEnv:z.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:ol(E.element).top})})),modes:[c.header.getDockingMode()],onDocked:y,onUndocked:y}),...S]};var CF=Object.freeze({__proto__:null,setup:(o,c,u)=>{o.inline||(c.header.isPositionedAtTop()||o.on("ResizeEditor",()=>{u().each(ec.reset)}),o.on("ResizeWindow ResizeEditor",()=>{u().each(nM)}),o.on("SkinLoaded",()=>{u().each(g=>{ec.isDocked(g)?ec.reset(g):ec.refresh(g)})}),o.on("FullscreenStateChanged",()=>{u().each(ec.reset)})),o.on("AfterScrollIntoView",g=>{u().each(b=>{ec.refresh(b);const y=b.element;RA(y)&&((S,T)=>{const E=Ge(T),M=Xn(T).dom.innerHeight,P=Fi(E),N=yt(S.elm),V=Im(N),G=oi(N),Q=V.y,pe=Q+G,he=ol(T),xe=oi(T),ie=he.top,ae=ie+xe,Ce=Math.abs(ie-P.top)<2,ke=Math.abs(ae-(P.top+M))<2;if(Ce&&Q<ae)Ol(P.left,Q-xe,E);else if(ke&&pe>ie){const Re=Q-M+G+xe;Ol(P.left,Re,E)}})(g,y)})}),o.on("PostRender",()=>{VS(o,!1)})},isDocked:o=>o().map(ec.isDocked).getOr(!1),getBehaviours:oM});const L3=ps([Dc,wo("items",gf([om([Nb,ql("items",Fc)]),Fc]))].concat(aE)),SF=[_r("text"),_r("tooltip"),_r("icon"),Ji("search",!1,gf([ff,ps([_r("placeholder")])],o=>ss(o)?o?z.some({placeholder:z.none()}):z.none():z.some(o))),mc("fetch"),sr("onSetup",()=>Ue),yi("context","mode:design")],kF=ps([Dc,...SF]),mx=o=>Ai("menubutton",kF,o),sM=ps([Dc,U2,Hf,V1,sE,AB,z1,va("presets","normal",["normal","color","listpreview"]),PD(1),Wy,OB,yi("context","mode:design")]);var $3=Gm({factory:(o,c)=>{const u={focus:ts.focusIn,setMenus:(g,b)=>{const y=Oe(b,S=>{const T={type:"menubutton",text:S.text,fetch:M=>{M(S.getItems())},context:"any"},E=mx(T).mapError(M=>Yu(M)).getOrDie();return oC(E,"tox-mbtn",c.backstage,z.some("menuitem"))});_s.set(g,y)}};return{uid:o.uid,dom:o.dom,components:[],behaviours:gn([_s.config({}),Ts("menubar-events",[Cs(g=>{o.onSetup(g)}),tn(Os(),(g,b)=>{qs(g.element,".tox-mbtn--active").each(y=>{gm(b.event.target,".tox-mbtn").each(S=>{xt(y,S)||g.getSystem().getByDom(y).each(T=>{g.getSystem().getByDom(S).each(E=>{Vf.expand(E),Vf.close(T),Rs.focus(E)})})})})}),tn(Rg(),(g,b)=>{b.event.prevFocus.bind(y=>g.getSystem().getByDom(y).toOptional()).each(y=>{b.event.newFocus.bind(S=>g.getSystem().getByDom(S).toOptional()).each(S=>{Vf.isOpen(y)&&(Vf.expand(S),Vf.close(y))})})})]),ts.config({mode:"flow",selector:".tox-mbtn",onEscape:g=>(o.onEscape(g),z.some(!0))}),Na.config({})]),apis:u,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Yt("dom"),Yt("uid"),Yt("onEscape"),Yt("backstage"),ht("onSetup",Ue)],apis:{focus:(o,c)=>{o.focus(c)},setMenus:(o,c,u)=>{o.setMenus(c,u)}}});const US="container",t_=[Bl("slotBehaviours",[])],n_=o=>"<alloy.field."+o+">",TF=(o,c)=>{const u=P=>Jl(o),g=(P,N)=>(V,G)=>lr(V,o,G).map(Q=>P(Q,G)).getOr(N),b=(P,N)=>Ei(P.element,"aria-hidden")!=="true",y=g(b,!1),S=g((P,N)=>{if(b(P)){const V=P.element;fs(V,"display","none"),ws(V,"aria-hidden","true"),Uo(P,ap(),{name:N,visible:!1})}}),T=(P=>(N,V)=>{ft(V,G=>P(N,G))})(S),E=g((P,N)=>{if(!b(P)){const V=P.element;or(V,"display"),Xs(V,"aria-hidden"),Uo(P,ap(),{name:N,visible:!0})}}),M={getSlotNames:u,getSlot:(P,N)=>lr(P,o,N),isShowing:y,hideSlot:S,hideAllSlots:P=>T(P,u()),showSlot:E};return{uid:o.uid,dom:o.dom,components:c,behaviours:tT(o.slotBehaviours),apis:M}},Nd={...ut({getSlotNames:(o,c)=>o.getSlotNames(c),getSlot:(o,c,u)=>o.getSlot(c,u),isShowing:(o,c,u)=>o.isShowing(c,u),hideSlot:(o,c,u)=>o.hideSlot(c,u),hideAllSlots:(o,c)=>o.hideAllSlots(c),showSlot:(o,c,u)=>o.showSlot(c,u)},o=>Rv(o)),sketch:o=>{const c=(()=>{const y=[];return{slot:(S,T)=>(y.push(S),uy(US,n_(S),T)),record:ve(y)}})(),u=o(c),g=c.record(),b=Oe(g,y=>zu({name:y,pname:n_(y)}));return Qx(US,t_,b,TF,u)}},z8=ps([Hf,U2,sr("onShow",Ue),sr("onHide",Ue),z1]),V8=o=>({element:()=>o.element.dom}),U8=(o,c)=>{const u=Oe(Dt(c),g=>{const b=c[g],y=Zl((S=>Ai("sidebar",z8,S))(b));return{name:g,getApi:V8,onSetup:y.onSetup,onShow:y.onShow,onHide:y.onHide}});return Oe(u,g=>{const b=Go(Ue);return o.slot(g.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:G2([Eh(g,b),_h(g,b),tn(ap(),(y,S)=>{const T=S.event;Y(u,M=>M.name===T.name).each(M=>{(T.visible?M.onShow:M.onHide)(M.getApi(y))})})])})})},rM=o=>Nd.sketch(c=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:U8(c,o),slotBehaviours:G2([Cs(u=>Nd.hideAllSlots(u))])})),WS=(o,c)=>{ws(o,"role",c)},aM=o=>Qr.getCurrent(o).bind(c=>wm.isGrowing(c)||wm.hasGrown(c)?Qr.getCurrent(c).bind(u=>Y(Nd.getSlotNames(u),g=>Nd.isShowing(u,g))):z.none()),H3=Do("FixSizeEvent"),iM=Do("AutoSizeEvent");var EF=Object.freeze({__proto__:null,block:(o,c,u,g)=>{ws(o.element,"aria-busy",!0);const b=c.getRoot(o).getOr(o),y=gn([ts.config({mode:"special",onTab:()=>z.some(!0),onShiftTab:()=>z.some(!0)}),Rs.config({})]),S=g(b,y),T=b.getSystem().build(S);_s.append(b,Wm(T)),T.hasConfigured(ts)&&c.focus&&ts.focusIn(T),u.isBlocked()||c.onBlock(o),u.blockWith(()=>_s.remove(b,T))},unblock:(o,c,u)=>{Xs(o.element,"aria-busy"),u.isBlocked()&&c.onUnblock(o),u.clear()},isBlocked:(o,c,u)=>u.isBlocked()}),W8=[sr("getRoot",z.none),cl("focus",!0),Hr("onBlock"),Hr("onUnblock")];const Ub=Ra({fields:W8,name:"blocking",apis:EF,state:Object.freeze({__proto__:null,init:()=>{const o=og(c=>c.destroy());return wd({readState:o.isSet,blockWith:c=>{o.set({destroy:c})},clear:o.clear,isBlocked:o.isSet})}})}),_F=o=>Qr.getCurrent(o).each(c=>sd(c.element,!0)),j8=(o,c,u)=>{const g=Go(!1),b=Br(),y=T=>{var E;g.get()&&(!(M=>M.type==="focusin")(E=T)||!(E.composed?At(E.composedPath()):z.from(E.target)).map(yt).filter(Pe).exists(M=>Ss(M,"mce-pastebin")))&&(T.preventDefault(),_F(c()),o.editorManager.setActive(o))};o.inline||o.on("PreInit",()=>{o.dom.bind(o.getWin(),"focusin",y),o.on("BeforeExecCommand",T=>{T.command.toLowerCase()==="mcefocus"&&T.value!==!0&&y(T)})});const S=T=>{T!==g.get()&&(g.set(T),((E,M,P,N)=>{const V=M.element;if(((G,Q)=>{const pe="tabindex",he=`data-mce-${pe}`;z.from(G.iframeElement).map(yt).each(xe=>{Q?(Es(xe,pe).each(ie=>ws(xe,he,ie)),ws(xe,pe,-1)):(Xs(xe,pe),Es(xe,he).each(ie=>{ws(xe,pe,ie),Xs(xe,he)}))})})(E,P),P)Ub.block(M,(G=>(Q,pe)=>({dom:{tag:"div",attributes:{"aria-label":G.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(N)),or(V,"display"),Xs(V,"aria-hidden"),E.hasFocus()&&_F(M);else{const G=Qr.getCurrent(M).exists(Q=>ab(Q.element));Ub.unblock(M),fs(V,"display","none"),ws(V,"aria-hidden","true"),G&&E.focus()}})(o,c(),T,u.providers),((E,M)=>{E.dispatch("AfterProgressState",{state:M})})(o,T))};o.on("ProgressState",T=>{if(b.on(clearTimeout),zn(T.time)){const E=wh.setEditorTimeout(o,()=>S(T.state),T.time);b.set(E)}else S(T.state),b.clear()})},cM=(o,c,u)=>({within:o,extra:c,withinWidth:u}),AF=(o,c,u)=>{const g=pt(o,(S,T)=>((E,M)=>{const P=u(E);return z.some({element:E,start:M,finish:M+P,width:P})})(T,S.len).fold(ve(S),E=>({len:E.finish,list:S.list.concat([E])})),{len:0,list:[]}).list,b=Bt(g,S=>S.finish<=c),y=$e(b,(S,T)=>S+T.width,0);return{within:b,extra:g.slice(b.length),withinWidth:y}},z3=o=>Oe(o,c=>c.element),OF=(o,c)=>{const u=Oe(c,g=>Wm(g));Fh.setGroups(o,u)},lM=(o,c,u)=>{const g=c.builtGroups.get();if(g.length===0)return;const b=pc(o,c,"primary"),y=Qc.getCoupled(o,"overflowGroup");fs(b.element,"visibility","hidden");const S=g.concat([y]),T=it(S,M=>du(M.element).bind(P=>M.getSystem().getByDom(P).toOptional()));u([]),OF(b,S);const E=((M,P,N,V)=>{const G=((xe,ie,ae)=>{const Ce=AF(ie,xe,ae);return Ce.extra.length===0?z.some(Ce):z.none()})(M,P,N).getOrThunk(()=>AF(P,M-N(V),N)),Q=G.within,pe=G.extra,he=G.withinWidth;return pe.length===1&&pe[0].width<=N(V)?((xe,ie,ae)=>{const Ce=z3(xe.concat(ie));return cM(Ce,[],ae)})(Q,pe,he):pe.length>=1?((xe,ie,ae,Ce)=>{const ke=z3(xe).concat([ae]);return cM(ke,z3(ie),Ce)})(Q,pe,V,he):((xe,ie,ae)=>cM(z3(xe),[],ae))(Q,0,he)})(Je(b.element),c.builtGroups.get(),M=>Math.ceil(M.element.dom.getBoundingClientRect().width),y);E.extra.length===0?(_s.remove(b,y),u([])):(OF(b,E.within),u(E.extra)),or(b.element,"visibility"),wu(b.element),T.each(Rs.focus)},DF=ve([Bl("splitToolbarBehaviours",[Qc]),vl("builtGroups",()=>Go([]))]),dC=ve([$c(["overflowToggledClass"]),il("getOverflowBounds"),Yt("lazySink"),vl("overflowGroups",()=>Go([])),Hr("onOpened"),Hr("onClosed")].concat(DF())),Bd=ve([zu({factory:Fh,schema:uC(),name:"primary"}),Vg({schema:uC(),name:"overflow"}),Vg({name:"overflow-button"}),Vg({name:"overflow-group"})]),o_=ve((o,c)=>{((u,g)=>{const b=He.max(u,g,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);fs(u,"max-width",b+"px")})(o,Math.floor(c))}),s_=ve([$c(["toggledClass"]),Yt("lazySink"),mc("fetch"),il("getBounds"),gc("fireDismissalEventInstead",[ht("event",Fu())]),Nl(),Hr("onToggled")]),mC=ve([Vg({name:"button",overrides:o=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:gn([ur.config({toggleClass:o.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:o.onToggled})])})}),Vg({factory:Fh,schema:uC(),name:"toolbar",overrides:o=>({toolbarBehaviours:gn([ts.config({mode:"cyclic",onEscape:c=>(lr(c,o,"button").each(Rs.focus),z.none())})])})})]),r_=Br(),Xd=(o,c)=>{const u=Qc.getCoupled(o,"toolbarSandbox");Jr.isOpen(u)?Jr.close(u):Jr.open(u,c.toolbar())},Wb=(o,c,u,g)=>{const b=u.getBounds.map(S=>S()),y=u.lazySink(o).getOrDie();$u.positionWithinBounds(y,c,{anchor:{type:"hotspot",hotspot:o,layouts:g,overrides:{maxWidthFunction:o_()}}},b)},jS=(o,c,u,g,b)=>{Fh.setGroups(c,b),Wb(o,c,u,g),ur.on(o)},w0=pm({name:"FloatingToolbarButton",factory:(o,c,u,g)=>({...wa.sketch({...g.button(),action:b=>{Xd(b,g)},buttonBehaviours:ph({dump:g.button().buttonBehaviours},[Qc.config({others:{toolbarSandbox:b=>((y,S,T)=>{const E=Bv();return{dom:{tag:"div",attributes:{id:E.id}},behaviours:gn([ts.config({mode:"special",onEscape:M=>(Jr.close(M),z.some(!0))}),Jr.config({onOpen:(M,P)=>{const N=r_.get().getOr(!1);T.fetch().get(V=>{jS(y,P,T,S.layouts,V),E.link(y.element),N||ts.focusIn(P)})},onClose:()=>{ur.off(y),r_.get().getOr(!1)||Rs.focus(y),E.unlink(y.element)},isPartOf:(M,P,N)=>Sf(P,N)||Sf(y,N),getAttachPoint:()=>T.lazySink(y).getOrDie()}),Td.config({channels:{...Qk({isExtraPart:Qe,...T.fireDismissalEventInstead.map(M=>({fireEventInstead:{event:M.event}})).getOr({})}),...iy({doReposition:()=>{Jr.getState(Qc.getCoupled(y,"toolbarSandbox")).each(M=>{Wb(y,M,T,S.layouts)})}})}})])}})(b,u,o)}})])}),apis:{setGroups:(b,y)=>{Jr.getState(Qc.getCoupled(b,"toolbarSandbox")).each(S=>{jS(b,S,o,u.layouts,y)})},reposition:b=>{Jr.getState(Qc.getCoupled(b,"toolbarSandbox")).each(y=>{Wb(b,y,o,u.layouts)})},toggle:b=>{Xd(b,g)},toggleWithoutFocusing:b=>{((y,S)=>{r_.set(!0),Xd(y,S),r_.clear()})(b,g)},getToolbar:b=>Jr.getState(Qc.getCoupled(b,"toolbarSandbox")),isOpen:b=>Jr.isOpen(Qc.getCoupled(b,"toolbarSandbox"))}}),configFields:s_(),partFields:mC(),apis:{setGroups:(o,c,u)=>{o.setGroups(c,u)},reposition:(o,c)=>{o.reposition(c)},toggle:(o,c)=>{o.toggle(c)},toggleWithoutFocusing:(o,c)=>{o.toggleWithoutFocusing(c)},getToolbar:(o,c)=>o.getToolbar(c),isOpen:(o,c)=>o.isOpen(c)}}),RF=ve([Yt("items"),$c(["itemSelector"]),Bl("tgroupBehaviours",[ts])]),Z8=ve([Xl({name:"items",unit:"item"})]),a_=pm({name:"ToolbarGroup",configFields:RF(),partFields:Z8(),factory:(o,c,u,g)=>({uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.tgroupBehaviours,[ts.config({mode:"flow",selector:o.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),ZS=o=>Oe(o,c=>Wm(c)),V3=(o,c,u)=>{lM(o,u,g=>{u.overflowGroups.set(g),c.getOpt(o).each(b=>{w0.setGroups(b,ZS(g))})})},MF=pm({name:"SplitFloatingToolbar",configFields:dC(),partFields:Bd(),factory:(o,c,u,g)=>{const b=ir(w0.sketch({fetch:()=>Jy(y=>{y(ZS(o.overflowGroups.get()))}),layouts:{onLtr:()=>[wl,Sc],onRtl:()=>[Sc,wl],onBottomLtr:()=>[Ac,Cl],onBottomRtl:()=>[Cl,Ac]},getBounds:u.getOverflowBounds,lazySink:o.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:o.markers.overflowToggledClass},parts:{button:g["overflow-button"](),toolbar:g.overflow()},onToggled:(y,S)=>o[S?"onOpened":"onClosed"](y)}));return{uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.splitToolbarBehaviours,[Qc.config({others:{overflowGroup:()=>a_.sketch({...g["overflow-group"](),items:[b.asSpec()]})}})]),apis:{setGroups:(y,S)=>{o.builtGroups.set(Oe(S,y.getSystem().build)),V3(y,b,o)},refresh:y=>V3(y,b,o),toggle:y=>{b.getOpt(y).each(S=>{w0.toggle(S)})},toggleWithoutFocusing:y=>{b.getOpt(y).each(w0.toggleWithoutFocusing)},isOpen:y=>b.getOpt(y).map(w0.isOpen).getOr(!1),reposition:y=>{b.getOpt(y).each(S=>{w0.reposition(S)})},getOverflow:y=>b.getOpt(y).bind(w0.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,c,u)=>{o.setGroups(c,u)},refresh:(o,c)=>{o.refresh(c)},reposition:(o,c)=>{o.reposition(c)},toggle:(o,c)=>{o.toggle(c)},toggleWithoutFocusing:(o,c)=>{o.toggle(c)},isOpen:(o,c)=>o.isOpen(c),getOverflow:(o,c)=>o.getOverflow(c)}}),NF=ve([$c(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Hr("onOpened"),Hr("onClosed")].concat(DF())),G8=ve([zu({factory:Fh,schema:uC(),name:"primary"}),zu({factory:Fh,schema:uC(),name:"overflow",overrides:o=>({toolbarBehaviours:gn([wm.config({dimension:{property:"height"},closedClass:o.markers.closedClass,openClass:o.markers.openClass,shrinkingClass:o.markers.shrinkingClass,growingClass:o.markers.growingClass,onShrunk:c=>{lr(c,o,"overflow-button").each(u=>{ur.off(u)}),o.onClosed(c)},onGrown:c=>{o.onOpened(c)},onStartGrow:c=>{lr(c,o,"overflow-button").each(ur.on)}}),ts.config({mode:"acyclic",onEscape:c=>(lr(c,o,"overflow-button").each(Rs.focus),z.some(!0))})])})}),Vg({name:"overflow-button",overrides:o=>({buttonBehaviours:gn([ur.config({toggleClass:o.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Vg({name:"overflow-group"})]),i_=(o,c,u)=>{lr(o,c,"overflow-button").each(g=>{lr(o,c,"overflow").each(b=>{if(c_(o,c),wm.hasShrunk(b)){const y=c.onOpened;c.onOpened=S=>{u||ts.focusIn(b),y(S),c.onOpened=y}}else{const y=c.onClosed;c.onClosed=S=>{u||Rs.focus(g),y(S),c.onClosed=y}}wm.toggleGrow(b)})})},c_=(o,c)=>{lr(o,c,"overflow").each(u=>{lM(o,c,g=>{const b=Oe(g,y=>Wm(y));Fh.setGroups(u,b)}),lr(o,c,"overflow-button").each(g=>{wm.hasGrown(u)&&ur.on(g)}),wm.refresh(u)})},uM=pm({name:"SplitSlidingToolbar",configFields:NF(),partFields:G8(),factory:(o,c,u,g)=>{const b="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:c,behaviours:Il(o.splitToolbarBehaviours,[Qc.config({others:{overflowGroup:y=>a_.sketch({...g["overflow-group"](),items:[wa.sketch({...g["overflow-button"](),action:S=>{$s(y,b)}})]})}}),Ts("toolbar-toggle-events",[tn(b,y=>{i_(y,o,!1)})])]),apis:{setGroups:(y,S)=>{((T,E)=>{const M=Oe(E,T.getSystem().build);o.builtGroups.set(M)})(y,S),c_(y,o)},refresh:y=>c_(y,o),toggle:y=>{i_(y,o,!1)},toggleWithoutFocusing:y=>{i_(y,o,!0)},isOpen:y=>((S,T)=>lr(S,T,"overflow").map(wm.hasGrown).getOr(!1))(y,o)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,c,u)=>{o.setGroups(c,u)},refresh:(o,c)=>{o.refresh(c)},toggle:(o,c)=>{o.toggle(c)},isOpen:(o,c)=>o.isOpen(c)}}),BF=o=>{const c=o.label.isNone()?o.title.fold(()=>({}),u=>({attributes:{title:u}})):o.label.fold(()=>({}),u=>({attributes:{"aria-label":u}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(o.label.isSome()?["tox-toolbar__group_with_label"]:[]),...c},components:[...o.label.map(u=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[tc(u)]})).toArray(),a_.parts.items({})],items:o.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:gn([Na.config({}),Rs.config({})])}},l_=o=>a_.sketch(BF(o)),Lp=(o,c)=>{const u=Cs(g=>{const b=Oe(o.initGroups,l_);Fh.setGroups(g,b)});return gn([uE(()=>o.providers.checkUiComponentContext("any").shouldDisable),Tl(()=>o.providers.checkUiComponentContext("any")),ts.config({mode:c,onEscape:o.onEscape,selector:".tox-toolbar__group"}),Ts("toolbar-events",[u])])},U3=o=>{const c=o.cyclicKeying?"cyclic":"acyclic";return{uid:o.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":BF({title:z.none(),label:z.none(),items:[]}),"overflow-button":rF({context:"any",name:"more",icon:z.some("more-drawer"),enabled:!0,tooltip:z.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:z.none(),borderless:!1},z.none(),o.providers,[],"overflow-button")},splitToolbarBehaviours:Lp(o,c)}},q8=o=>{const c=U3(o),u=MF.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return MF.sketch({...c,lazySink:o.getSink,getOverflowBounds:()=>{const g=o.moreDrawerData.lazyHeader().element,b=Im(g),y=Tn(g),S=Im(y),T=Math.max(y.dom.scrollHeight,S.height);return tr(b.x+4,S.y,b.width-8,T)},parts:{...c.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o.attributes}}},components:[u],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:g=>o.onToggled(g,!0),onClosed:g=>o.onToggled(g,!1)})},$p=o=>{const c=uM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),u=uM.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),g=U3(o);return uM.sketch({...g,components:[c,u],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:b=>{b.getSystem().broadcastOn([I3()],{type:"opened"}),o.onToggled(b,!0)},onClosed:b=>{b.getSystem().broadcastOn([I3()],{type:"closed"}),o.onToggled(b,!1)}})},u_=o=>{const c=o.cyclicKeying?"cyclic":"acyclic";return Fh.sketch({uid:o.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(o.type===bm.scrolling?["tox-toolbar--scrolling"]:[])},components:[Fh.parts.groups({})],toolbarBehaviours:Lp(o,c)})},dM=[V1,Hf,_r("tooltip"),va("buttonType","secondary",["primary","secondary"]),cl("borderless",!1),mc("onAction"),yi("context","mode:design")],d_={button:[...dM,Bb,Gl("type",["button"])],togglebutton:[...dM,cl("active",!1),Gl("type",["togglebutton"])]},hu=[Gl("type",["group"]),vd("buttons",[],oa("type",d_))],K8=oa("type",{...d_,group:hu}),Y8=ps([vd("buttons",[],K8),mc("onShow"),mc("onHide")]),IF=(o,c)=>((u,g)=>{var b,y;const S=u.type==="togglebutton",T=u.icon.map(ie=>J1(ie,g.icons)).map(ir),E={...u,name:S?u.text.getOr(u.icon.getOr("")):(b=u.text)!==null&&b!==void 0?b:u.icon.getOr(""),primary:u.buttonType==="primary",buttonType:z.from(u.buttonType),tooltip:u.tooltip,icon:u.icon,enabled:!0,borderless:u.borderless},M=E3((y=u.buttonType)!==null&&y!==void 0?y:"secondary"),P=S?u.text.map(g.translate):z.some(g.translate(u.text)),N=P.map(tc),V=E.tooltip.or(P).map(ie=>({"aria-label":g.translate(ie)})).getOr({}),G=T.map(ie=>ie.asSpec()),Q=Lw([G,N]),pe=u.icon.isSome()&&N.isSome(),he={tag:"button",classes:M.concat(...u.icon.isSome()&&!pe?["tox-button--icon"]:[]).concat(...pe?["tox-button--icon-and-text"]:[]).concat(...u.borderless?["tox-button--naked"]:[]).concat(...u.type==="togglebutton"&&u.active?["tox-button--enabled"]:[]),attributes:V},xe=rC(E,z.some(ie=>{const ae=Ce=>{T.map(ke=>ke.getOpt(ie).each(Re=>{_s.set(Re,[J1(Ce,g.icons)])}))};return S?u.onAction({setIcon:ae,setActive:Ce=>{const ke=ie.element;Ce?(xn(ke,"tox-button--enabled"),ws(ke,"aria-pressed",!0)):($o(ke,"tox-button--enabled"),Xs(ke,"aria-pressed"))},isActive:()=>Ss(ie.element,"tox-button--enabled"),focus:()=>sd(ie.element)}):u.type==="button"?u.onAction({setIcon:ae}):void 0}),[],he,Q,u.tooltip,g);return wa.sketch(xe)})(o,c),FF=ic().deviceType,X8=FF.isPhone(),PF=FF.isTablet();var GS=pm({name:"silver.View",configFields:[Yt("viewConfig")],partFields:[Ug({factory:{sketch:o=>{let c=!1;const u=Oe(o.buttons,g=>g.type==="group"?(c=!0,((b,y)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Oe(b.buttons,S=>IF(S,y))}))(g,o.providers)):IF(g,o.providers));return{uid:o.uid,dom:{tag:"div",classes:[c?"tox-view__toolbar":"tox-view__header",...X8||PF?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:gn([Rs.config({}),ts.config({mode:"flow",selector:"button, .tox-button",focusInside:D1.OnEnterOrSpaceMode})]),components:c?u:[Jg.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Jg.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:u})]}}},schema:[Yt("buttons"),Yt("providers")],name:"header"}),Ug({factory:{sketch:o=>({uid:o.uid,behaviours:gn([Rs.config({}),Na.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(o,c,u,g)=>{const b={getPane:y=>pu.getPart(y,o,"pane"),getOnShow:y=>o.viewConfig.onShow,getOnHide:y=>o.viewConfig.onHide};return{uid:o.uid,dom:o.dom,components:c,behaviours:gn([Rs.config({}),ts.config({mode:"cyclic",focusInside:D1.OnEnterOrSpaceMode})]),apis:b}},apis:{getPane:(o,c)=>o.getPane(c),getOnShow:(o,c)=>o.getOnShow(c),getOnHide:(o,c)=>o.getOnHide(c)}});const J8=(o,c,u)=>Co(c,(g,b)=>{const y=Zl(Ai("view",Y8,g));return o.slot(b,GS.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:y,components:[...y.buttons.length>0?[GS.parts.header({buttons:y.buttons,providers:u})]:[],GS.parts.pane({})]}))}),Q8=(o,c)=>Nd.sketch(u=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:J8(u,o,c),slotBehaviours:G2([Cs(g=>Nd.hideAllSlots(g))])})),mM=o=>Y(Nd.getSlotNames(o),c=>Nd.isShowing(o,c)),W3=(o,c,u)=>{Nd.getSlot(o,c).each(g=>{GS.getPane(g).each(b=>{var y;u(g)((y=b.element.dom,{getContainer:ve(y)}))})})};var qS=Gm({factory:(o,c)=>{const u={setViews:(g,b)=>{_s.set(g,[Q8(b,c.backstage.shared.providers)])},whichView:g=>Qr.getCurrent(g).bind(mM),toggleView:(g,b,y,S)=>Qr.getCurrent(g).exists(T=>{const E=mM(T),M=E.exists(N=>S===N),P=Nd.getSlot(T,S).isSome();return P&&(Nd.hideAllSlots(T),M?((N=>{const V=N.element;fs(V,"display","none"),ws(V,"aria-hidden","true")})(g),b()):(y(),(N=>{const V=N.element;or(V,"display"),Xs(V,"aria-hidden")})(g),Nd.showSlot(T,S),((N,V)=>{W3(N,V,GS.getOnShow)})(T,S)),E.each(N=>((V,G)=>W3(V,G,GS.getOnHide))(T,N))),P})};return{uid:o.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:gn([_s.config({}),Qr.config({find:g=>{const b=_s.contents(g);return At(b)}})]),apis:u}},name:"silver.ViewWrapper",configFields:[Yt("backstage")],apis:{setViews:(o,c,u)=>o.setViews(c,u),toggleView:(o,c,u,g,b)=>o.toggleView(c,u,g,b),whichView:(o,c)=>o.whichView(c)}});const LF=Ih.optional({factory:$3,name:"menubar",schema:[Yt("backstage")]}),gM=Ih.optional({factory:{sketch:o=>QR.sketch({uid:o.uid,dom:o.dom,listBehaviours:gn([ts.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>u_({type:o.type,uid:Do("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:o.providers,onEscape:()=>(o.onEscape(),z.some(!0))}),setupItem:(c,u,g,b)=>{Fh.setGroups(u,g)},shell:!0})},name:"multiple-toolbar",schema:[Yt("dom"),Yt("onEscape")]}),$F=Ih.optional({factory:{sketch:o=>(u=>u.type===bm.sliding?$p:u.type===bm.floating?q8:u_)(o)({type:o.type,uid:o.uid,onEscape:()=>(o.onEscape(),z.some(!0)),onToggled:(u,g)=>o.onToolbarToggled(g),cyclicKeying:!1,initGroups:[],getSink:o.getSink,providers:o.providers,moreDrawerData:{lazyToolbar:o.lazyToolbar,lazyMoreButton:o.lazyMoreButton,lazyHeader:o.lazyHeader},attributes:o.attributes})},name:"toolbar",schema:[Yt("dom"),Yt("onEscape"),Yt("getSink")]}),HF=Ih.optional({factory:{sketch:o=>{const c=o.editor,u=o.sticky?oM:N3;return{uid:o.uid,dom:o.dom,components:o.components,behaviours:gn(u(c,o.sharedBackstage))}}},name:"header",schema:[Yt("dom")]}),fM=Ih.optional({factory:{sketch:o=>({uid:o.uid,dom:o.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"⚡️Upgrade"}}]})},name:"promotion",schema:[Yt("dom")]}),zF=Ih.optional({name:"socket",schema:[Yt("dom")]}),VF=Ih.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:gn([Na.config({}),Rs.config({}),wm.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:c=>{Qr.getCurrent(c).each(Nd.hideAllSlots),$s(c,iM)},onGrown:c=>{$s(c,iM)},onStartGrow:c=>{Uo(c,H3,{width:ui(c.element,"width").getOr("")})},onStartShrink:c=>{Uo(c,H3,{width:Je(c.element)+"px"})}}),_s.config({}),Qr.config({find:c=>{const u=_s.contents(c);return At(u)}})])}],behaviours:gn([TR(0),Ts("sidebar-sliding-events",[tn(H3,(c,u)=>{fs(c.element,"width",u.event.width)}),tn(iM,(c,u)=>{or(c.element,"width")})])])})},name:"sidebar",schema:[Yt("dom")]}),UF=Ih.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:gn([_s.config({}),Ub.config({focus:!1}),Qr.config({find:c=>At(c.components())})]),components:[]})},name:"throbber",schema:[Yt("dom")]}),eL=Ih.optional({factory:qS,name:"viewWrapper",schema:[Yt("backstage")]}),pM=Ih.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:o.components})},name:"editorContainer",schema:[]});var Ni=pm({name:"OuterContainer",factory:(o,c,u)=>{let g=!1;const b=S=>{Bx(S,".tox-statusbar").each(T=>{Wa(T,"display")==="none"&&Ei(T,"aria-hidden")==="true"?(or(T,"display"),Xs(T,"aria-hidden")):(fs(T,"display","none"),ws(T,"aria-hidden","true"))})},y={getSocket:S=>pu.getPart(S,o,"socket"),setSidebar:(S,T,E)=>{pu.getPart(S,o,"sidebar").each(M=>((P,N,V)=>{Qr.getCurrent(P).each(G=>{_s.set(G,[rM(N)]);const Q=V==null?void 0:V.toLowerCase();wn(Q)&&yo(N,Q)&&Qr.getCurrent(G).each(pe=>{Nd.showSlot(pe,Q),wm.immediateGrow(G),or(G.element,"width"),WS(P.element,"region")})})})(M,T,E))},toggleSidebar:(S,T)=>{pu.getPart(S,o,"sidebar").each(E=>((M,P)=>{Qr.getCurrent(M).each(N=>{Qr.getCurrent(N).each(V=>{wm.hasGrown(N)?Nd.isShowing(V,P)?(wm.shrink(N),WS(M.element,"presentation")):(Nd.hideAllSlots(V),Nd.showSlot(V,P),WS(M.element,"region")):(Nd.hideAllSlots(V),Nd.showSlot(V,P),wm.grow(N),WS(M.element,"region"))})})})(E,T))},whichSidebar:S=>pu.getPart(S,o,"sidebar").bind(aM).getOrNull(),getHeader:S=>pu.getPart(S,o,"header"),getToolbar:S=>pu.getPart(S,o,"toolbar"),setToolbar:(S,T)=>{pu.getPart(S,o,"toolbar").each(E=>{const M=Oe(T,l_);E.getApis().setGroups(E,M)})},setToolbars:(S,T)=>{pu.getPart(S,o,"multiple-toolbar").each(E=>{const M=Oe(T,P=>Oe(P,l_));QR.setItems(E,M)})},refreshToolbar:S=>{pu.getPart(S,o,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:S=>{pu.getPart(S,o,"toolbar").each(T=>{Pa(T.getApis().toggle,E=>E(T))})},toggleToolbarDrawerWithoutFocusing:S=>{pu.getPart(S,o,"toolbar").each(T=>{Pa(T.getApis().toggleWithoutFocusing,E=>E(T))})},isToolbarDrawerToggled:S=>pu.getPart(S,o,"toolbar").bind(T=>z.from(T.getApis().isOpen).map(E=>E(T))).getOr(!1),getThrobber:S=>pu.getPart(S,o,"throbber"),focusToolbar:S=>{pu.getPart(S,o,"toolbar").orThunk(()=>pu.getPart(S,o,"multiple-toolbar")).each(T=>{ts.focusIn(T)})},setMenubar:(S,T)=>{pu.getPart(S,o,"menubar").each(E=>{$3.setMenus(E,T)})},focusMenubar:S=>{pu.getPart(S,o,"menubar").each(T=>{$3.focus(T)})},setViews:(S,T)=>{pu.getPart(S,o,"viewWrapper").each(E=>{qS.setViews(E,T)})},toggleView:(S,T)=>pu.getPart(S,o,"viewWrapper").exists(E=>qS.toggleView(E,()=>y.showMainView(S),()=>y.hideMainView(S),T)),whichView:S=>pu.getPart(S,o,"viewWrapper").bind(qS.whichView).getOrNull(),hideMainView:S=>{g=y.isToolbarDrawerToggled(S),g&&y.toggleToolbarDrawer(S),pu.getPart(S,o,"editorContainer").each(T=>{const E=T.element;b(E),fs(E,"display","none"),ws(E,"aria-hidden","true")})},showMainView:S=>{g&&y.toggleToolbarDrawer(S),pu.getPart(S,o,"editorContainer").each(T=>{const E=T.element;b(E),or(E,"display"),Xs(E,"aria-hidden")})}};return{uid:o.uid,dom:o.dom,components:c,apis:y,behaviours:o.behaviours}},configFields:[Yt("dom"),Yt("behaviours")],partFields:[HF,LF,$F,gM,zF,VF,fM,UF,eL,pM],apis:{getSocket:(o,c)=>o.getSocket(c),setSidebar:(o,c,u,g)=>{o.setSidebar(c,u,g)},toggleSidebar:(o,c,u)=>{o.toggleSidebar(c,u)},whichSidebar:(o,c)=>o.whichSidebar(c),getHeader:(o,c)=>o.getHeader(c),getToolbar:(o,c)=>o.getToolbar(c),setToolbar:(o,c,u)=>{o.setToolbar(c,u)},setToolbars:(o,c,u)=>{o.setToolbars(c,u)},refreshToolbar:(o,c)=>o.refreshToolbar(c),toggleToolbarDrawer:(o,c)=>{o.toggleToolbarDrawer(c)},toggleToolbarDrawerWithoutFocusing:(o,c)=>{o.toggleToolbarDrawerWithoutFocusing(c)},isToolbarDrawerToggled:(o,c)=>o.isToolbarDrawerToggled(c),getThrobber:(o,c)=>o.getThrobber(c),setMenubar:(o,c,u)=>{o.setMenubar(c,u)},focusMenubar:(o,c)=>{o.focusMenubar(c)},focusToolbar:(o,c)=>{o.focusToolbar(c)},setViews:(o,c,u)=>{o.setViews(c,u)},toggleView:(o,c,u)=>o.toggleView(c,u),whichView:(o,c)=>o.whichView(c)}});const m_={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},hM=o=>o.split(" "),bM=(o,c)=>{const u={...m_,...c.menus},g=Dt(c.menus).length>0,b=c.menubar===void 0||c.menubar===!0?hM("file edit view insert format tools table help"):hM(c.menubar===!1?"":c.menubar),y=Bt(b,T=>{const E=yo(m_,T);return g?E||Gt(c.menus,T).exists(M=>yo(M,"items")):E}),S=Oe(y,T=>{const E=u[T];return((M,P,N)=>{const V=P1(N).split(/[ ,]/);return{text:M.title,getItems:()=>Mt(M.items,G=>{const Q=G.toLowerCase();return Q.trim().length===0||Qt(V,pe=>pe===Q)?[]:Q==="separator"||Q==="|"?[{type:"separator"}]:P.menuItems[Q]?[P.menuItems[Q]]:[]})}})({title:E.title,items:hM(E.items)},c,o)});return Bt(S,T=>T.getItems().length>0&&Qt(T.getItems(),E=>wn(E)||E.type!=="separator"))},WF=(o,c,u)=>(o.on("remove",()=>u.unload(c)),u.load(c)),KS=(o,c,u,g)=>(o.on("remove",()=>g.unloadRawCss(c)),g.loadRawCss(c,u)),jF=o=>z.from(tinymce.Resource.get(o)).filter(wn),vM=(o,c,u="")=>{const g=(y=>{const S=KA(y);return S?z.from(S):z.none()})(o).map(y=>((S,T)=>"ui/"+S+"/"+T)(y,`${c}.css`)),b=g.bind(jF);return ns(g,b,(y,S)=>({_kind:"load-raw",key:y,css:S})).getOrThunk(()=>{const y=o.editorManager.suffix;return{_kind:"load-stylesheet",url:u+`/${c}${y}.css`}})},tL=(o,c)=>{const u=o.ui.styleSheetLoader,g=vM(o,"skin",c);switch(g._kind){case"load-raw":const{key:b,css:y}=g;return KS(o,b,y,u),Promise.resolve();case"load-stylesheet":const{url:S}=g;return WF(o,S,u);default:return Promise.resolve()}},ZF=(o,c)=>{var u;if(u=yt(o.getElement()),!er(u).isSome())return Promise.resolve();{const g=mw.DOM.styleSheetLoader,b=vM(o,"skin.shadowdom",c);switch(b._kind){case"load-raw":const{key:y,css:S}=b;return KS(o,y,S,g),Promise.resolve();case"load-stylesheet":const{url:T}=b;return WF(o,T,g);default:return Promise.resolve()}}},GF=(o,c)=>(async(u,g)=>{const b=YA(g);if(await((y,S,T)=>{const E=vM(y,S?"content.inline":"content",T);switch(E._kind){case"load-raw":const{key:M,css:P}=E;return S?KS(y,M,P,y.ui.styleSheetLoader):y.on("PostRender",()=>{KS(y,M,P,y.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:N}=E;return T&&y.contentCSS.push(N),Promise.resolve();default:return Promise.resolve()}})(g,u,b),!P2(g)&&wn(b))return Promise.all([tL(g,b),ZF(g,b)]).then()})(o,c).then((u=>{const g=()=>{u._skinLoaded=!0,(b=>{b.dispatch("SkinLoaded")})(u)};return()=>{u.initialized?g():u.on("init",g)}})(c),((u,g)=>()=>((b,y)=>{b.dispatch("SkinLoadError",y)})(u,{message:"Skin could not be loaded"}))(c)),nL=re(GF,!1),qF=re(GF,!0),g_=(o,c,u)=>Bi(u)?o.translate(c):o.translate([c,o.translate(u)]),KF=(o,c)=>{const u=(y,S,T,E)=>{const M=o.shared.providers.translate(y.title);if(y.type==="separator")return z.some({type:"separator",text:M});if(y.type==="submenu"){const P=Mt(y.getStyleItems(),N=>g(N,S,E));return S===0&&P.length<=0?z.none():z.some({type:"nestedmenuitem",text:M,enabled:P.length>0,getSubmenuItems:()=>Mt(y.getStyleItems(),N=>g(N,S,E))})}return z.some({type:"togglemenuitem",text:M,icon:y.icon,active:y.isSelected(E),enabled:!T,onAction:c.onAction(y),...y.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},g=(y,S,T)=>{const E=y.type==="formatter"&&c.isInvalid(y);return S===0?E?[]:u(y,S,!1,T).toArray():u(y,S,E,T).toArray()},b=y=>{const S=c.getCurrentValue(),T=c.shouldHide?0:1;return Mt(y,E=>g(E,T,S))};return{validateItems:b,getFetch:(y,S)=>(T,E)=>{const M=S(),P=b(M);E(Q1(P,Ee.CLOSE_ON_EXECUTE,y,{isHorizontalMenu:!1,search:z.none()}))}}},YS=(o,c)=>{const u=c.dataset,g=u.type==="basic"?()=>Oe(u.data,b=>QE(b,c.isSelectedFor,c.getPreviewFor)):u.getData;return{items:KF(o,c),getStyleItems:g}},XS=(o,c,u,g,b,y)=>{const{items:S,getStyleItems:T}=YS(c,u),E=Go(u.tooltip);return yS({context:"mode:design",text:u.icon.isSome()?z.none():u.text,icon:u.icon,ariaLabel:z.some(u.tooltip),tooltip:z.none(),role:z.none(),fetch:S.getFetch(c,T),onSetup:M=>{const P=N=>M.setTooltip(g_(o,g(N.value),N.value));return o.on(b,P),zs(qy(o,"NodeChange",N=>{const V=N.getComponent();u.updateText(V),hs.set(N.getComponent(),!o.selection.isEditable())})(M),()=>o.off(b,P))},getApi:M=>({getComponent:ve(M),setTooltip:P=>{const N=c.shared.providers.translate(P);ws(M.element,"aria-label",N),E.set(P)}}),columns:1,presets:"normal",classes:u.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Ri.config({...c.shared.providers.tooltips.getConfig({tooltipText:c.shared.providers.translate(u.tooltip),onShow:M=>{if(u.tooltip!==E.get()){const P=c.shared.providers.translate(E.get());Ri.setComponents(M,c.shared.providers.tooltips.getComponents({tooltipText:P}))}}})})]},"tox-tbtn",c.shared,y)};var JS;(function(o){o[o.SemiColon=0]="SemiColon",o[o.Space=1]="Space"})(JS||(JS={}));const j3=(o,c,u)=>{const g=(b=((y,S)=>S===JS.SemiColon?y.replace(/;$/,"").split(";"):y.split(" "))(o.options.get(c),u),Oe(b,y=>{let S=y,T=y;const E=y.split("=");return E.length>1&&(S=E[0],T=E[1]),{title:S,format:T}}));var b;return{type:"basic",data:g}},YF=ve("Alignment {0}"),XF="left",Z3=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],JF=o=>{const c={type:"basic",data:Z3};return{tooltip:g_(o,YF(),XF),text:z.none(),icon:z.some("align-left"),isSelectedFor:u=>()=>o.formatter.match(u),getCurrentValue:z.none,getPreviewFor:u=>z.none,onAction:u=>()=>Y(Z3,g=>g.format===u.format).each(g=>o.execCommand(g.command)),updateText:u=>{const g=Y(Z3,b=>o.formatter.match(b.format)).fold(ve(XF),b=>b.title.toLowerCase());Uo(u,ix,{icon:`align-${g}`}),((b,y)=>{b.dispatch("AlignTextUpdate",y)})(o,{value:g})},dataset:c,shouldHide:!1,isInvalid:u=>!o.formatter.canApply(u.format)}},QF=(o,c)=>{const u=c(),g=Oe(u,b=>b.format);return z.from(o.formatter.closest(g)).bind(b=>Y(u,y=>y.format===b))},e5=ve("Block {0}"),yM="Paragraph",t5=o=>{const c=j3(o,"block_formats",JS.SemiColon);return{tooltip:g_(o,e5(),yM),text:z.some(yM),icon:z.none(),isSelectedFor:u=>()=>o.formatter.match(u),getCurrentValue:z.none,getPreviewFor:u=>()=>{const g=o.formatter.get(u);return g?z.some({tag:g.length>0&&(g[0].inline||g[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(u))}):z.none()},onAction:eR(o),updateText:u=>{const g=QF(o,()=>c.data).fold(ve(yM),b=>b.title);Uo(u,Wf,{text:g}),((b,y)=>{b.dispatch("BlocksTextUpdate",y)})(o,{value:g})},dataset:c,shouldHide:!1,isInvalid:u=>!o.formatter.canApply(u.format)}},oL=ve("Font {0}"),n5="System Font",sL=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],o5=o=>{const c=o.split(/\s*,\s*/);return Oe(c,u=>u.replace(/^['"]+|['"]+$/g,""))},rL=(o,c)=>c.length>0&&Pn(c,u=>o.indexOf(u.toLowerCase())>-1),xM=o=>{const c=()=>{const g=M=>M?o5(M)[0]:"",b=o.queryCommandValue("FontName"),y=u.data,S=b?b.toLowerCase():"",T=Py(o);return{matchOpt:Y(y,M=>{const P=M.format;return P.toLowerCase()===S||g(P).toLowerCase()===g(S).toLowerCase()}).orThunk(()=>vn(((M,P)=>{if(M.indexOf("-apple-system")===0||P.length>0){const N=o5(M.toLowerCase());return rL(N,sL)||rL(N,P)}return!1})(S,T),{title:n5,format:S})),font:b}},u=j3(o,"font_family_formats",JS.SemiColon);return{tooltip:g_(o,oL(),n5),text:z.some(n5),icon:z.none(),isSelectedFor:g=>b=>b.exists(y=>y.format===g),getCurrentValue:()=>{const{matchOpt:g}=c();return g},getPreviewFor:g=>()=>z.some({tag:"div",styles:g.indexOf("dings")===-1?{"font-family":g}:{}}),onAction:g=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("FontName",!1,g.format)})},updateText:g=>{const{matchOpt:b,font:y}=c(),S=b.fold(ve(y),T=>T.title);Uo(g,Wf,{text:S}),((T,E)=>{T.dispatch("FontFamilyTextUpdate",E)})(o,{value:S})},dataset:u,shouldHide:!1,isInvalid:Qe}},el={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},wM=(()=>{const o="[0-9]+",c="[eE][+-]?"+o,u=b=>`(?:${b})?`,g=["Infinity",o+"\\."+u(o)+u(c),"\\."+o+u(c),o+u(c)].join("|");return new RegExp(`^([+-]?(?:${g}))(.*)$`)})(),CM=(o,c)=>z.from(wM.exec(o)).bind(u=>{const g=Number(u[1]),b=u[2];return((y,S)=>Qt(S,T=>Qt(el[T],E=>y===E)))(b,c)?z.some({value:g,unit:b}):z.none()}),s5={tab:ve(9),escape:ve(27),enter:ve(13),backspace:ve(8),delete:ve(46),left:ve(37),up:ve(38),right:ve(39),down:ve(40),space:ve(32),home:ve(36),end:ve(35),pageUp:ve(33),pageDown:ve(34)},r5=ve("Font size {0}"),C0="12pt",W7={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},j7={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Id=(o,c)=>/[0-9.]+px$/.test(o)?((u,g)=>{const b=Math.pow(10,g);return Math.round(u*b)/b})(72*parseInt(o,10)/96,c||0)+"pt":Gt(j7,o).getOr(o),SM=o=>Gt(W7,o).getOr(""),G3=o=>{const c=()=>{let b=z.none();const y=g.data,S=o.queryCommandValue("FontSize");if(S)for(let T=3;b.isNone()&&T>=0;T--){const E=Id(S,T),M=SM(E);b=Y(y,P=>P.format===S||P.format===E||P.format===M)}return{matchOpt:b,size:S}},u=ve(z.none),g=j3(o,"font_size_formats",JS.Space);return{tooltip:g_(o,r5(),C0),text:z.some(C0),icon:z.none(),isSelectedFor:b=>y=>y.exists(S=>S.format===b),getPreviewFor:u,getCurrentValue:()=>{const{matchOpt:b}=c();return b},onAction:b=>()=>{o.undoManager.transact(()=>{o.focus(),o.execCommand("FontSize",!1,b.format)})},updateText:b=>{const{matchOpt:y,size:S}=c(),T=y.fold(ve(S),E=>E.title);Uo(b,Wf,{text:T}),((E,M)=>{E.dispatch("FontSizeTextUpdate",M)})(o,{value:T})},dataset:g,shouldHide:!1,isInvalid:Qe}},kM=o=>Bi(o)?"Formats":"Format {0}",a5=(o,c)=>{const u="Formats";return{tooltip:g_(o,kM(""),""),text:z.some(u),icon:z.none(),isSelectedFor:g=>()=>o.formatter.match(g),getCurrentValue:z.none,getPreviewFor:g=>()=>{const b=o.formatter.get(g);return b!==void 0?z.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(g))}):z.none()},onAction:eR(o),updateText:g=>{const b=T=>D8(T)?Mt(T.items,b):R8(T)?[{title:T.title,format:T.format}]:[],y=Mt(qf(o),b),S=QF(o,ve(y)).fold(ve({title:u,tooltipLabel:""}),T=>({title:T.title,tooltipLabel:T.title}));Uo(g,Wf,{text:S.title}),((T,E)=>{T.dispatch("StylesTextUpdate",E)})(o,{value:S.tooltipLabel})},shouldHide:qr(o),isInvalid:g=>!o.formatter.canApply(g.format),dataset:c}},i5=ve([Yt("toggleClass"),Yt("fetch"),up("onExecute"),ht("getHotspot",z.some),ht("getAnchorOverrides",ve({})),Nl(),up("onItemExecute"),Fr("lazySink"),Yt("dom"),Hr("onOpen"),Bl("splitDropdownBehaviours",[Qc,ts,Rs]),ht("matchWidth",!1),ht("useMinWidth",!1),ht("eventOrder",{}),Fr("role"),Fr("listRole")].concat(FO())),q3=zu({factory:wa,schema:[Yt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:gn([Rs.revoke()])}),overrides:o=>({dom:{tag:"span",attributes:{role:"presentation"}},action:c=>{c.getSystem().getByUid(o.uid).each(fc)},buttonBehaviours:gn([ur.config({toggleOnExecute:!1,toggleClass:o.toggleClass})])})}),aL=zu({factory:wa,schema:[Yt("dom")],name:"button",defaults:()=>({buttonBehaviours:gn([Rs.revoke()])}),overrides:o=>({dom:{tag:"span",attributes:{role:"presentation"}},action:c=>{c.getSystem().getByUid(o.uid).each(u=>{o.onExecute(u,c)})}})}),TM=ve([q3,aL,Ug({factory:{sketch:o=>({uid:o.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:o.text}})},schema:[Yt("text")],name:"aria-descriptor"}),Vg({schema:[ah()],name:"menu",defaults:o=>({onExecute:(c,u)=>{c.getSystem().getByUid(o.uid).each(g=>{o.onItemExecute(g,c,u)})}})}),fI()]),K3=pm({name:"SplitDropdown",configFields:i5(),partFields:TM(),factory:(o,c,u,g)=>{const b=M=>{Qr.getCurrent(M).each(P=>{xa.highlightFirst(P),ts.focusIn(P)})},y=M=>{g0(o,In,M,g,b,Vi.HighlightMenuAndItem).get(Ue)},S=M=>{const P=pc(M,o,"button");return fc(P),z.some(!0)},T={...Ja([Cs((M,P)=>{lr(M,o,"aria-descriptor").each(N=>{const V=Do("aria");ws(N.element,"id",V),ws(M.element,"aria-describedby",V)})})]),...Cb(z.some(y))},E={repositionMenus:M=>{ur.isOn(M)&&IO(M)}};return{uid:o.uid,dom:o.dom,components:c,apis:E,eventOrder:{...o.eventOrder,[os()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Il(o.splitDropdownBehaviours,[Qc.config({others:{sandbox:M=>{const P=pc(M,o,"arrow");return j1(o,M,{onOpen:()=>{ur.on(P),ur.on(M)},onClose:()=>{ur.off(P),ur.off(M)}})}}}),ts.config({mode:"special",onSpace:S,onEnter:S,onDown:M=>(y(M),z.some(!0))}),Rs.config({}),ur.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(o,c)=>o.repositionMenus(c)}}),EM=o=>({isEnabled:()=>!hs.isDisabled(o),setEnabled:c=>hs.set(o,!c),setText:c=>Uo(o,Wf,{text:c}),setIcon:c=>Uo(o,ix,{icon:c})}),c5=o=>({setActive:c=>{ur.set(o,c)},isActive:()=>ur.isOn(o),isEnabled:()=>!hs.isDisabled(o),setEnabled:c=>hs.set(o,!c),setText:c=>Uo(o,Wf,{text:c}),setIcon:c=>Uo(o,ix,{icon:c})}),gC=(o,c)=>o.map(u=>({"aria-label":c.translate(u)})).getOr({}),_M=Do("focus-button"),gx=(o,c,u,g,b,y,S)=>{const T=c.map(M=>ir(RR(M,"tox-tbtn",b))),E=o.map(M=>ir(J1(M,b.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(c.isSome()?["tox-tbtn--select"]:[]),attributes:{...gC(u,b),...Vn(S)?{"data-mce-name":S}:{}}},components:Lw([E.map(M=>M.asSpec()),T.map(M=>M.asSpec())]),eventOrder:{[qe()]:["focusing","alloy.base.behaviour",Hb],[Vm()]:[Hb,"toolbar-group-button-events"],[xd()]:[Hb,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:gn([uE(()=>b.checkUiComponentContext(y).shouldDisable),Tl(()=>b.checkUiComponentContext(y)),Ts(Hb,[Cs((M,P)=>g3(M)),tn(Wf,(M,P)=>{T.bind(N=>N.getOpt(M)).each(N=>{_s.set(N,[tc(b.translate(P.event.text))])})}),tn(ix,(M,P)=>{E.bind(N=>N.getOpt(M)).each(N=>{_s.set(N,[J1(P.event.icon,b.icons)])})}),tn(qe(),(M,P)=>{P.event.prevent(),$s(M,_M)})])].concat(g.getOr([])))}},l5=(o,c,u,g)=>{var b;const y=Go(Ue),S=gx(o.icon,o.text,o.tooltip,z.none(),u,o.context,g);return wa.sketch({dom:S.dom,components:S.components,eventOrder:OR,buttonBehaviours:{...gn([Ts("toolbar-button-events",[(T={onAction:o.onAction,getApi:c.getApi},ri((E,M)=>{wO(T,E)(P=>{Uo(E,WE,{buttonApi:P}),T.onAction(P)})})),Eh(c,y),_h(c,y)]),...o.tooltip.map(E=>Ri.config(u.tooltips.getConfig({tooltipText:u.translate(E)+o.shortcut.map(M=>` (${CO(M)})`).getOr("")}))).toArray(),uE(()=>!o.enabled||u.checkUiComponentContext(o.context).shouldDisable),Tl(()=>u.checkUiComponentContext(o.context))].concat(c.toolbarButtonBehaviours)),[Hb]:(b=S.buttonBehaviours)===null||b===void 0?void 0:b[Hb]}});var T},u5=(o,c,u,g)=>l5(o,{toolbarButtonBehaviours:u.length>0?[Ts("toolbarButtonWith",u)]:[],getApi:EM,onSetup:o.onSetup},c,g),d5=(o,c,u,g)=>l5(o,{toolbarButtonBehaviours:[_s.config({}),ur.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(u.length>0?[Ts("toolbarToggleButtonWith",u)]:[]),getApi:c5,onSetup:o.onSetup},c,g),Kf=(o,c,u)=>g=>Jy(b=>c.fetch(b)).map(b=>z.from(Q2(ga(bE(Do("menu-value"),b,y=>{c.onItemAction(o(g),y)},c.columns,c.presets,Ee.CLOSE_ON_EXECUTE,c.select.getOr(Qe),u),{movement:MO(c.columns,c.presets),menuBehaviours:G2(c.columns!=="auto"?[]:[Cs((y,S)=>{VD(y,4,_a(c.presets)).each(({numRows:T,numColumns:E})=>{ts.setGridSize(y,T,E)})})])})))),Z7=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],fx=(o,c)=>(u,g,b,y)=>{const S=o(u).mapError(T=>Yu(T)).getOrDie();return c(S,g,b,y)},QS={button:fx(RB,(o,c,u,g)=>((b,y,S)=>u5(b,y,[],S))(o,c.shared.providers,g)),togglebutton:fx($D,(o,c,u,g)=>((b,y,S)=>d5(b,y,[],S))(o,c.shared.providers,g)),menubutton:fx(mx,(o,c,u,g)=>oC(o,"tox-tbtn",c,z.none(),!1,g)),splitbutton:fx(o=>Ai("SplitButton",sM,o),(o,c,u,g)=>((b,y,S)=>{const T=Go(b.tooltip.getOr("")),E=N=>({isEnabled:()=>!hs.isDisabled(N),setEnabled:V=>hs.set(N,!V),setIconFill:(V,G)=>{qs(N.element,`svg path[class="${V}"], rect[class="${V}"]`).each(Q=>{ws(Q,"fill",G)})},setActive:V=>{ws(N.element,"aria-pressed",V),qs(N.element,"span").each(G=>{N.getSystem().getByDom(G).each(Q=>ur.set(Q,V))})},isActive:()=>qs(N.element,"span").exists(V=>N.getSystem().getByDom(V).exists(ur.isOn)),setText:V=>qs(N.element,"span").each(G=>N.getSystem().getByDom(G).each(Q=>Uo(Q,Wf,{text:V}))),setIcon:V=>qs(N.element,"span").each(G=>N.getSystem().getByDom(G).each(Q=>Uo(Q,ix,{icon:V}))),setTooltip:V=>{const G=y.providers.translate(V);ws(N.element,"aria-label",G),T.set(V)}}),M=Go(Ue),P={getApi:E,onSetup:b.onSetup};return K3.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...gC(b.tooltip,y.providers),...Vn(S)?{"data-mce-name":S}:{}}},onExecute:N=>{const V=E(N);V.isEnabled()&&b.onAction(V)},onItemExecute:(N,V,G)=>{},splitDropdownBehaviours:gn([Ts("split-dropdown-events",[Cs((N,V)=>g3(N)),tn(_M,Rs.focus),Eh(P,M),_h(P,M)]),UD(()=>y.providers.isDisabled()||y.providers.checkUiComponentContext(b.context).shouldDisable),Tl(()=>y.providers.checkUiComponentContext(b.context)),aS.config({}),...b.tooltip.map(N=>Ri.config({...y.providers.tooltips.getConfig({tooltipText:y.providers.translate(N),onShow:V=>{if(T.get()!==N){const G=y.providers.translate(T.get());Ri.setComponents(V,y.providers.tooltips.getComponents({tooltipText:G}))}}})})).toArray()]),eventOrder:{[Vm()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[xd()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:y.getSink,fetch:Kf(E,b,y.providers),parts:{menu:Xm(0,b.columns,b.presets)},components:[K3.parts.button(gx(b.icon,b.text,z.none(),z.some([ur.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),uE(Qe),Tl(ve({contextType:"any",shouldDisable:!1}))]),y.providers,b.context)),K3.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:m("chevron-down",y.providers.icons)},buttonBehaviours:gn([UD(Qe),Tl(ve({contextType:"any",shouldDisable:!1}))])}),K3.parts["aria-descriptor"]({text:y.providers.translate("To open the popup, press Shift+Enter")})]})})(o,c.shared,g)),grouptoolbarbutton:fx(o=>Ai("GroupToolbarButton",L3,o),(o,c,u,g)=>{const b=u.ui.registry.getAll().buttons,y={[Sl]:c.shared.header.isPositionedAtTop()?lh.TopToBottom:lh.BottomToTop};if(Sb(u)===bm.floating)return((S,T,E,M,P)=>{const N=T.shared,V=Go(Ue),G={toolbarButtonBehaviours:[],getApi:EM,onSetup:S.onSetup},Q=[Ts("toolbar-group-button-events",[Eh(G,V),_h(G,V)]),...S.tooltip.map(pe=>Ri.config(T.shared.providers.tooltips.getConfig({tooltipText:T.shared.providers.translate(pe)}))).toArray()];return w0.sketch({lazySink:N.getSink,fetch:()=>Jy(pe=>{pe(Oe(E(S.items),l_))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:gx(S.icon,S.text,S.tooltip,z.some(Q),N.providers,S.context,P),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:M}}}})})(o,c,S=>f_(u,{buttons:b,toolbar:S,allowToolbarGroups:!1},c,z.none()),y,g);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},AM={styles:(o,c)=>{const u={type:"advanced",...c.styles};return XS(o,c,a5(o,u),kM,"StylesTextUpdate","styles")},fontsize:(o,c)=>XS(o,c,G3(o),r5,"FontSizeTextUpdate","fontsize"),fontsizeinput:(o,c)=>((u,g,b,y)=>{let S=z.none();const T=qy(u,"NodeChange SwitchMode DisabledStateChange",Ce=>{const ke=Ce.getComponent();S=z.some(ke),b.updateInputValue(ke),hs.set(ke,!u.selection.isEditable()||I1(u))}),E=Ce=>({getComponent:ve(Ce)}),M=Go(Ue),P=Do("custom-number-input-events"),N=(Ce,ke,Re)=>{const Ye=S.map(Dn=>go.getValue(Dn)).getOr(""),vt=b.getNewValue(Ye,Ce),en=Ye.length-`${vt}`.length,jt=S.map(Dn=>Dn.element.dom.selectionStart-en),cn=S.map(Dn=>Dn.element.dom.selectionEnd-en);b.onAction(vt,Re),S.each(Dn=>{go.setValue(Dn,vt),ke&&(jt.each(fo=>Dn.element.dom.selectionStart=fo),cn.each(fo=>Dn.element.dom.selectionEnd=fo))})},V=(Ce,ke)=>N((Re,Ye)=>Re-Ye,Ce,ke),G=(Ce,ke)=>N((Re,Ye)=>Re+Ye,Ce,ke),Q=Ce=>Eo(Ce.element).fold(z.none,ke=>(sd(ke),z.some(!0))),pe=Ce=>ab(Ce.element)?(hr(Ce.element).each(ke=>sd(ke)),z.some(!0)):z.none(),he=(Ce,ke,Re,Ye)=>{const vt=Go(Ue),en=g.shared.providers.translate(Re),jt=Do("altExecuting"),cn=qy(u,"NodeChange SwitchMode DisabledStateChange",fo=>{hs.set(fo.getComponent(),!u.selection.isEditable()||I1(u))}),Dn=fo=>{hs.isDisabled(fo)||Ce(!0)};return wa.sketch({dom:{tag:"button",attributes:{"aria-label":en,"data-mce-name":ke},classes:Ye.concat(ke)},components:[f3(ke,g.shared.providers.icons)],buttonBehaviours:gn([hs.config({}),Ri.config(g.shared.providers.tooltips.getConfig({tooltipText:en})),Ts(jt,[Eh({onSetup:cn,getApi:E},vt),_h({getApi:E},vt),tn(Xa(),(fo,jo)=>{jo.event.raw.keyCode!==s5.space()&&jo.event.raw.keyCode!==s5.enter()||hs.isDisabled(fo)||Ce(!1)}),tn(cm(),Dn),tn(ne(),Dn)])]),eventOrder:{[Xa()]:[jt,"keying"],[cm()]:[jt,"alloy.base.behaviour"],[ne()]:[jt,"alloy.base.behaviour"],[Vm()]:["alloy.base.behaviour",jt,"tooltipping"],[xd()]:[jt,"tooltipping"]}})},xe=ir(he(Ce=>V(!1,Ce),"minus","Decrease font size",[])),ie=ir(he(Ce=>G(!1,Ce),"plus","Increase font size",[])),ae=ir({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ld.sketch({inputBehaviours:gn([hs.config({}),Ts(P,[Eh({onSetup:T,getApi:E},M),_h({getApi:E},M)]),Ts("input-update-display-text",[tn(Wf,(Ce,ke)=>{go.setValue(Ce,ke.event.text)}),tn(Oi(),Ce=>{b.onAction(go.getValue(Ce))}),tn(nh(),Ce=>{b.onAction(go.getValue(Ce))})]),ts.config({mode:"special",onEnter:Ce=>(N(In,!0,!0),z.some(!0)),onEscape:Q,onUp:Ce=>(G(!0,!1),z.some(!0)),onDown:Ce=>(V(!0,!1),z.some(!0)),onLeft:(Ce,ke)=>(ke.cut(),z.none()),onRight:(Ce,ke)=>(ke.cut(),z.none())})])})],behaviours:gn([Rs.config({}),ts.config({mode:"special",onEnter:pe,onSpace:pe,onEscape:Q}),Ts("input-wrapper-events",[tn(Os(),Ce=>{ft([xe,ie],ke=>{const Re=yt(ke.get(Ce).element.dom);ab(Re)&&ey(Re)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Vn(y)?{"data-mce-name":y}:{}}},components:[xe.asSpec(),ae.asSpec(),ie.asSpec()],behaviours:gn([Rs.config({}),ts.config({mode:"flow",focusInside:D1.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ce=>ab(Ce.element)?z.none():(sd(Ce.element),z.some(!0))})])}})(o,c,(u=>{const g=()=>u.queryCommandValue("FontSize");return{updateInputValue:b=>Uo(b,Wf,{text:g()}),onAction:(b,y)=>u.execCommand("FontSize",!1,b,{skip_focus:!y}),getNewValue:(b,y)=>{CM(b,["unsupportedLength","empty"]);const S=g(),T=CM(b,["unsupportedLength","empty"]).or(CM(S,["unsupportedLength","empty"])),E=T.map(G=>G.value).getOr(16),M=qA(u),P=T.map(G=>G.unit).filter(G=>G!=="").getOr(M),N=y(E,(G=>{var Q;return(Q={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[G])!==null&&Q!==void 0?Q:{step:1}})(P).step),V=`${(G=>G>=0)(N)?N:E}${P}`;return V!==S&&((G,Q)=>{G.dispatch("FontSizeInputTextUpdate",Q)})(u,{value:V}),V}}})(o),"fontsizeinput"),fontfamily:(o,c)=>XS(o,c,xM(o),oL,"FontFamilyTextUpdate","fontfamily"),blocks:(o,c)=>XS(o,c,t5(o),e5,"BlocksTextUpdate","blocks"),align:(o,c)=>XS(o,c,JF(o),YF,"AlignTextUpdate","align")},f_=(o,c,u,g)=>{const b=(S=>{const T=S.toolbar,E=S.buttons;return T===!1?[]:T===void 0||T===!0?(M=>{const P=Oe(Z7,N=>{const V=Bt(N.items,G=>yo(M,G)||yo(AM,G));return{name:N.name,items:V}});return Bt(P,N=>N.items.length>0)})(E):wn(T)?(M=>{const P=M.split("|");return Oe(P,N=>({items:N.trim().split(" ")}))})(T):(M=>Vt(M,P=>(yo(P,"name")||yo(P,"label"))&&yo(P,"items")))(T)?T:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(c),y=Oe(b,S=>{const T=Mt(S.items,E=>E.trim().length===0?[]:((M,P,N,V,G,Q)=>Gt(P,N.toLowerCase()).orThunk(()=>Q.bind(pe=>it(pe,he=>Gt(P,he+N.toLowerCase())))).fold(()=>Gt(AM,N.toLowerCase()).map(pe=>pe(M,G)),pe=>pe.type!=="grouptoolbarbutton"||V?((he,xe,ie,ae)=>Gt(QS,he.type).fold(()=>(console.error("skipping button defined by",he),z.none()),Ce=>z.some(Ce(he,xe,ie,ae))))(pe,G,M,N.toLowerCase()):(console.warn(`Ignoring the '${N}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),z.none())))(o,c.buttons,E,c.allowToolbarGroups,u,g).toArray());return{title:z.from(o.translate(S.name)),label:vn(S.label!==void 0,o.translate(S.label)),items:T}});return Bt(y,S=>S.items.length>0)},OM=(o,c,u,g)=>{const b=c.mainUi.outerContainer,y=u.toolbar,S=u.buttons;if(Vt(y,wn)){const T=y.map(E=>{const M={toolbar:E,buttons:S,allowToolbarGroups:u.allowToolbarGroups};return f_(o,M,g,z.none())});Ni.setToolbars(b,T)}else Ni.setToolbar(b,f_(o,u,g,z.none()))},m5=ic(),iL=m5.os.isiOS()&&m5.os.version.major<=12;var cL=Object.freeze({__proto__:null,render:(o,c,u,g,b)=>{const{mainUi:y,uiMotherships:S}=c,T=Go(0),E=y.outerContainer;nL(o);const M=yt(b.targetNode),P=Bs(La(M));Af(M,y.mothership),((Q,pe,he)=>{Tp(Q)&&Af(he.mainUi.mothership.element,he.popupUi.mothership),fh(pe,he.dialogUi.mothership)})(o,P,c),o.on("PostRender",()=>{Ni.setSidebar(E,u.sidebar,If(o))}),o.on("SkinLoaded",()=>{OM(o,c,u,g),T.set(o.getWin().innerWidth),Ni.setMenubar(E,bM(o,u)),Ni.setViews(E,u.views),((Q,pe)=>{const{uiMotherships:he}=pe,xe=Q.dom;let ie=Q.getWin();const ae=Q.getDoc().documentElement,Ce=Go(Wr(ie.innerWidth,ie.innerHeight)),ke=Go(Wr(ae.offsetWidth,ae.offsetHeight)),Re=()=>{const jt=Ce.get();jt.left===ie.innerWidth&&jt.top===ie.innerHeight||(Ce.set(Wr(ie.innerWidth,ie.innerHeight)),QD(Q))},Ye=()=>{const jt=Q.getDoc().documentElement,cn=ke.get();cn.left===jt.offsetWidth&&cn.top===jt.offsetHeight||(ke.set(Wr(jt.offsetWidth,jt.offsetHeight)),QD(Q))},vt=jt=>{((cn,Dn)=>{cn.dispatch("ScrollContent",Dn)})(Q,jt)};xe.bind(ie,"resize",Re),xe.bind(ie,"scroll",vt);const en=Eu(yt(Q.getBody()),"load",Ye);Q.on("hide",()=>{ft(he,jt=>{fs(jt.element,"display","none")})}),Q.on("show",()=>{ft(he,jt=>{or(jt.element,"display")})}),Q.on("NodeChange",Ye),Q.on("remove",()=>{en.unbind(),xe.unbind(ie,"resize",Re),xe.unbind(ie,"scroll",vt),ie=null})})(o,c)});const N=Ni.getSocket(E).getOrDie("Could not find expected socket element");if(iL){li(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Q=((he,xe)=>{let ie=null;return{cancel:()=>{To(ie)||(clearTimeout(ie),ie=null)},throttle:(...ae)=>{To(ie)&&(ie=setTimeout(()=>{ie=null,he.apply(null,ae)},20))}}})(()=>{o.dispatch("ScrollContent")}),pe=Ed(N.element,"scroll",Q.throttle);o.on("remove",pe.unbind)}GB(o,c),o.addCommand("ToggleSidebar",(Q,pe)=>{Ni.toggleSidebar(E,pe),(he=>{he.dispatch("ToggleSidebar")})(o)}),o.addQueryValueHandler("ToggleSidebar",()=>{var Q;return(Q=Ni.whichSidebar(E))!==null&&Q!==void 0?Q:""}),o.addCommand("ToggleView",(Q,pe)=>{if(Ni.toggleView(E,pe)){const he=E.element;y.mothership.broadcastOn([E1()],{target:he}),ft(S,xe=>{xe.broadcastOn([E1()],{target:he})}),To(Ni.whichView(E))&&(o.focus(),o.nodeChanged(),Ni.refreshToolbar(E)),(xe=>{xe.dispatch("ToggleView")})(o)}}),o.addQueryValueHandler("ToggleView",()=>{var Q;return(Q=Ni.whichView(E))!==null&&Q!==void 0?Q:""});const V=Sb(o);V!==bm.sliding&&V!==bm.floating||o.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Q=o.getWin().innerWidth;Q!==T.get()&&(Ni.refreshToolbar(c.mainUi.outerContainer),T.set(Q))});const G={setEnabled:Q=>{q2(c,Q?"setEnabled":"setDisabled")},isEnabled:()=>!hs.isDisabled(E)};return{iframeContainer:N.element.dom,editorContainer:E.element.dom,api:G}}});const p_=o=>/^[0-9\.]+(|px)$/i.test(""+o)?z.some(parseInt(""+o,10)):z.none(),DM=o=>zn(o)?o+"px":o,Y3=(o,c,u)=>{const g=c.filter(y=>o<y),b=u.filter(y=>o>y);return g.or(b).getOr(o)},RM=o=>{const c=B2(o),u=$T(o),g=F1(o);return p_(c).map(b=>Y3(b,u,g))},{ToolbarLocation:h_,ToolbarMode:g5}=jT,lL=(o,c,u,g,b)=>{const{mainUi:y,uiMotherships:S}=u,T=mw.DOM,E=nc(o),M=Ff(o),P=F1(o).or(RM(o)),N=g.shared.header,V=N.isPositionedAtTop,G=Sb(o),Q=G===g5.sliding||G===g5.floating,pe=Go(!1),he=()=>pe.get()&&!o.removed,xe=ke=>Q?ke.fold(ve(0),Re=>Re.components().length>1?oi(Re.components()[1].element):0):0,ie=()=>{ft(S,ke=>{ke.broadcastOn([Uv()],{})})},ae=ke=>{if(!he())return;E||b.on(vt=>{const en=P.getOrThunk(()=>Pi().width-le(c).left-10);fs(vt.element,"max-width",en+"px")});const Re=Fi(),Ye=!(E||E||!(ol(y.outerContainer.element).left+Pt(y.outerContainer.element)>=window.innerWidth-40||ui(y.outerContainer.element,"width").isSome())||(fs(y.outerContainer.element,"position","absolute"),fs(y.outerContainer.element,"left","0px"),or(y.outerContainer.element,"width"),0));if(Q&&Ni.refreshToolbar(y.outerContainer),!E){const vt=Fi(),en=vn(Re.left!==vt.left,Re);((jt,cn)=>{b.on(Dn=>{const fo=Ni.getToolbar(y.outerContainer),jo=xe(fo),ls=_i(c),As=((ca,ta)=>Tp(ca)?iu(ta):z.none())(o,y.outerContainer.element),pr=As.fold(()=>ls.x,ca=>{const ta=_i(ca);return xt(ca,Ti())?ls.x:ls.x-ta.x}),fi=vn(jt,Math.ceil(y.outerContainer.element.dom.getBoundingClientRect().width)).filter(ca=>ca>150).map(ca=>{const ta=cn.getOr(Fi()),ys=window.innerWidth-(pr-ta.left),ti=Math.max(Math.min(ca,ys),150);return ys<ca&&fs(y.outerContainer.element,"width",ti+"px"),{width:ti+"px"}}).getOr({width:"max-content"}),Zi={position:"absolute",left:Math.round(pr)+"px",top:As.fold(()=>V()?Math.max(ls.y-oi(Dn.element)+jo,0):ls.bottom,ca=>{var ta;const ys=_i(ca),ti=(ta=ca.dom.scrollTop)!==null&&ta!==void 0?ta:0,ja=xt(ca,Ti())?Math.max(ls.y-oi(Dn.element)+jo,0):ls.y-ys.y+ti-oi(Dn.element)+jo;return V()?ja:ls.bottom})+"px"};li(y.outerContainer.element,{...Zi,...fi})})})(Ye,en),en.each(jt=>{Ol(jt.left,vt.top)})}M&&b.on(ke),ie()},Ce=()=>!(E||!M||!he())&&b.get().exists(ke=>{const Re=N.getDockingMode(),Ye=(en=>{switch(Dd(o)){case h_.auto:const jt=Ni.getToolbar(y.outerContainer),cn=xe(jt),Dn=oi(en.element)-cn,fo=_i(c);if(fo.y>Dn)return"top";{const jo=Tn(c),ls=Math.max(jo.dom.scrollHeight,oi(jo));return fo.bottom<ls-Dn||Ic().bottom<fo.bottom-Dn?"bottom":"top"}case h_.bottom:return"bottom";case h_.top:default:return"top"}})(ke);return Ye!==Re&&(vt=Ye,b.on(en=>{ec.setModes(en,[vt]),N.setDockingMode(vt);const jt=V()?lh.TopToBottom:lh.BottomToTop;ws(en.element,Sl,jt)}),!0);var vt});return{isVisible:he,isPositionedAtTop:V,show:()=>{pe.set(!0),fs(y.outerContainer.element,"display","flex"),T.addClass(o.getBody(),"mce-edit-focus"),ft(S,ke=>{or(ke.element,"display")}),Ce(),Tp(o)?ae(ke=>ec.isDocked(ke)?ec.reset(ke):ec.refresh(ke)):ae(ec.refresh)},hide:()=>{pe.set(!1),fs(y.outerContainer.element,"display","none"),T.removeClass(o.getBody(),"mce-edit-focus"),ft(S,ke=>{fs(ke.element,"display","none")})},update:ae,updateMode:()=>{Ce()&&ae(ec.reset)},repositionPopups:ie}},f5=(o,c)=>{const u=_i(o);return{pos:c?u.y:u.bottom,bounds:u}};var ek=Object.freeze({__proto__:null,render:(o,c,u,g,b)=>{const{mainUi:y}=c,S=Br(),T=yt(b.targetNode),E=lL(o,T,c,g,S),M=Sh(o);qF(o);const P=()=>{if(S.isSet())return void E.show();S.set(Ni.getHeader(y.outerContainer).getOrDie());const V=vm(o);Tp(o)?(Af(T,y.mothership),Af(T,c.popupUi.mothership)):fh(V,y.mothership),fh(V,c.dialogUi.mothership);const G=()=>{OM(o,c,u,g),Ni.setMenubar(y.outerContainer,bM(o,u)),E.show(),((Q,pe,he,xe)=>{const ie=Go(f5(pe,he.isPositionedAtTop())),ae=Ye=>{const{pos:vt,bounds:en}=f5(pe,he.isPositionedAtTop()),{pos:jt,bounds:cn}=ie.get(),Dn=en.height!==cn.height||en.width!==cn.width;ie.set({pos:vt,bounds:en}),Dn&&QD(Q,Ye),he.isVisible()&&(jt!==vt?he.update(ec.reset):Dn&&(he.updateMode(),he.repositionPopups()))};xe||(Q.on("activate",he.show),Q.on("deactivate",he.hide)),Q.on("SkinLoaded ResizeWindow",()=>he.update(ec.reset)),Q.on("NodeChange keydown",Ye=>{requestAnimationFrame(()=>ae(Ye))});let Ce=0;const ke=c3(()=>he.update(ec.refresh),33);Q.on("ScrollWindow",()=>{const Ye=Fi().left;Ye!==Ce&&(Ce=Ye,ke.throttle()),he.updateMode()}),Tp(Q)&&Q.on("ElementScroll",Ye=>{he.update(ec.refresh)});const Re=Hd();Re.set(Eu(yt(Q.getBody()),"load",Ye=>ae(Ye.raw))),Q.on("remove",()=>{Re.clear()})})(o,T,E,M),o.nodeChanged()};M?o.once("SkinLoaded",G):G()};o.on("show",P),o.on("hide",E.hide),M||(o.on("focus",P),o.on("blur",E.hide)),o.on("init",()=>{(o.hasFocus()||M)&&P()}),GB(o,c);const N={show:P,hide:E.hide,setEnabled:V=>{q2(c,V?"setEnabled":"setDisabled")},isEnabled:()=>!hs.isDisabled(y.outerContainer)};return{editorContainer:y.outerContainer.element.dom,api:N}}});const Ph="contexttoolbar-hide",X3=o=>{Ma.getContent(o).each(c=>{qs(c.element,".tox-toolbar-slider__input,.tox-toolbar-textfield").fold(()=>ts.focusIn(c),sd)})},J3=o=>du(o.element).each(c=>{rb(c,'[tabindex="-1"]').each(u=>{sd(u)})}),MM=Do("forward-slide"),fC=Do("backward-slide"),NM=Do("change-slide-event"),pC="tox-pop--resizing",Hp=o=>{const c=Br();return{setInputEnabled:u=>{u||J3(o),hs.set(o,!u)},isInputEnabled:()=>!hs.isDisabled(o),hide:()=>{c.isSet()||c.set(go.getValue(o)),$s(o,Sv())},back:()=>{c.isSet()||c.set(go.getValue(o)),$s(o,fC)},getValue:()=>c.get().getOrThunk(()=>go.getValue(o)),setValue:u=>{c.isSet()?c.set(u):go.setValue(o,u)}}},p5=(o,c)=>tn(WE,(u,g)=>{const b=o.get(u),y=Hp(b);c.onAction(y,g.event.buttonApi)}),BM=(o,c,u)=>{const g=Oe(c,b=>ir(((y,S,T)=>(E=>E.type==="contextformtogglebutton")(S)?((E,M,P)=>{const{primary:N,...V}=M.original,G=Zl($D({...V,type:"togglebutton",onAction:Ue}));return d5(G,P,[p5(E,M)])})(y,S,T):((E,M,P)=>{const{primary:N,...V}=M.original,G=Zl(RB({...V,type:"button",onAction:Ue}));return u5(G,P,[p5(E,M)])})(y,S,T))(o,b,u)));return{asSpecs:()=>Oe(g,b=>b.asSpec()),findPrimary:b=>it(c,(y,S)=>y.primary?z.from(g[S]).bind(T=>T.getOpt(b)).filter(rn(hs.isDisabled)):z.none())}},uL=(o,c,u)=>{const{width:g,height:b}=o.initValue();return wS({inDialog:!1,label:o.label,enabled:!0,context:z.none(),name:z.none(),width:g,height:b,onEnter:z.some(u),onInput:z.some(y=>o.onInput(Hp(y))),onSetup:z.some(o.onSetup),getApi:z.some(Hp)},c)},h5=(o,c,u)=>Yr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...o.toArray(),c],fieldBehaviours:gn([hs.config({disabled:()=>u.checkUiComponentContext("mode:design").shouldDisable,onDisabled:g=>{J3(g),Yr.getField(g).each(hs.disable)},onEnabled:g=>{Yr.getField(g).each(hs.enable)}})])}),b_=(o,c,u)=>{const g=Go(Ue),b=o.label.map(S=>Yr.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tc(c.translate(S))]})),y=Yr.parts.field({factory:ld,type:"range",inputClasses:["tox-toolbar-slider__input"],inputAttributes:{min:String(o.min()),max:String(o.max())},data:o.initValue().toString(),fromInputValue:S=>(T=>{const E=parseFloat(T);return isNaN(E)?z.none():z.some(E)})(S).getOr(o.min()),toInputValue:S=>String(S),inputBehaviours:gn([hs.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable}),Tl(()=>c.checkUiComponentContext("mode:design")),ts.config({mode:"special",onEnter:u,onLeft:(S,T)=>(T.cut(),z.none()),onRight:(S,T)=>(T.cut(),z.none())}),Ts("slider-events",[Eh({onSetup:o.onSetup,getApi:Hp,onBeforeSetup:ts.focusIn},g),_h({getApi:Hp},g),tn(Iu(),S=>{o.onInput(Hp(S))})])])});return h5(b,y,c)},b5=(o,c,u)=>{const g=Go(Ue),b=o.label.map(T=>Yr.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[tc(c.translate(T))]})),y={...o.placeholder.map(T=>({placeholder:c.translate(T)})).getOr({})},S=Yr.parts.field({factory:ld,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],inputAttributes:y,data:o.initValue(),selectOnFocus:!0,inputBehaviours:gn([hs.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable}),Tl(()=>c.checkUiComponentContext("mode:design")),ts.config({mode:"special",onEnter:u,onLeft:(T,E)=>(E.cut(),z.none()),onRight:(T,E)=>(E.cut(),z.none())}),Ts("input-events",[Eh({onSetup:o.onSetup,getApi:Hp,onBeforeSetup:ts.focusIn},g),_h({getApi:Hp},g),tn(Iu(),T=>{o.onInput(Hp(T))})])])});return h5(b,S,c)},hC=(o,c,u)=>{const g=ir(o(u,T=>y.findPrimary(T).orThunk(()=>S.findPrimary(T)).map(E=>(fc(E),!0)))),b=tt(c.commands,T=>T.align==="start"),y=BM(g,b.pass,u),S=BM(g,b.fail,u);return Bt([{title:z.none(),label:z.none(),items:y.asSpecs()},{title:z.none(),label:z.none(),items:[g.asSpec()]},{title:z.none(),label:z.none(),items:S.asSpecs()}],T=>T.items.length>0)},dL=(o,c)=>{switch(o.type){case"contextform":return hC(re(b5,o),o,c);case"contextsliderform":return hC(re(b_,o),o,c);case"contextsizeinputform":return hC(re(uL,o),o,c)}},Q3=(o,c,u)=>c.bottom-o.y>=u&&o.bottom-c.y>=u,IM=o=>{const c=(u=>{const g=u.getBoundingClientRect();if(g.height<=0&&g.width<=0){const b=Ur(yt(u.startContainer),u.startOffset).element;return(Rt(b)?xo(b):z.some(b)).filter(Pe).map(y=>y.dom.getBoundingClientRect()).getOr(g)}return g})(o.selection.getRng());if(o.inline){const u=Fi();return tr(u.left+c.left,u.top+c.top,c.width,c.height)}{const u=Im(yt(o.getBody()));return tr(u.x+c.left,u.y+c.top,c.width,c.height)}},FM=(o,c,u,g=0)=>{const b=Pi(window),y=_i(yt(o.getContentAreaContainer())),S=L2(o)||kb(o)||ao(o),{x:T,width:E}=((M,P,N)=>{const V=Math.max(M.x+N,P.x);return{x:V,width:Math.min(M.right-N,P.right)-V}})(y,b,g);if(o.inline&&!S)return tr(T,b.y,E,b.height);{const M=c.header.isPositionedAtTop(),{y:P,bottom:N}=((V,G,Q,pe,he,xe)=>{const ie=yt(V.getContainer()),ae=qs(ie,".tox-editor-header").getOr(ie),Ce=_i(ae),ke=Ce.y>=G.bottom,Re=pe&&!ke;if(V.inline&&Re)return{y:Math.max(Ce.bottom+xe,Q.y),bottom:Q.bottom};if(V.inline&&!Re)return{y:Q.y,bottom:Math.min(Ce.y-xe,Q.bottom)};const Ye=he==="line"?_i(ie):G;return Re?{y:Math.max(Ce.bottom+xe,Q.y),bottom:Math.min(Ye.bottom-xe,Q.bottom)}:{y:Math.max(Ye.y+xe,Q.y),bottom:Math.min(Ce.y-xe,Q.bottom)}})(o,y,b,M,u,g);return tr(T,P,E,N-P)}},PM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},LM={maxHeightFunction:x1(),maxWidthFunction:o_()},$M=o=>o==="node",S0=(o,c,u,g,b)=>{const y=IM(o),S=g.lastElement().exists(T=>xt(u,T));return((T,E)=>{const M=T.selection.getRng(),P=Ur(yt(M.startContainer),M.startOffset);return M.startContainer===M.endContainer&&M.startOffset===M.endOffset-1&&xt(P.element,E)})(o,u)?S?mF:Gf:S?((T,E,M)=>{const P=ui(T,"position");fs(T,"position",E);const N=Q3(y,_i(c),-20)&&!g.isReposition()?T8:mF;return P.each(V=>fs(T,"position",V)),N})(c,g.getMode()):(g.getMode()==="fixed"?b.y+Fi().top:b.y)+(oi(c)+12)<=y.y?Gf:BS},tk=(o,c,u,g)=>{const b=S=>(T,E,M,P,N)=>({...S0(o,P,S,u,N)({...T,y:N.y,height:N.height},E,M,P,N),alwaysFit:!0}),y=S=>$M(g)?[b(S)]:[];return c?{onLtr:S=>[kc,Sc,wl,Cl,Ac,Hc].concat(y(S)),onRtl:S=>[kc,wl,Sc,Ac,Cl,Hc].concat(y(S))}:{onLtr:S=>[Hc,kc,Cl,Sc,Ac,wl].concat(y(S)),onRtl:S=>[Hc,kc,Ac,wl,Cl,Sc].concat(y(S))}},zp=(o,c)=>{const u=Bt(c,y=>y.predicate(o.dom)),{pass:g,fail:b}=tt(u,y=>y.type==="contexttoolbar");return{contextToolbars:g,contextForms:b}},HM=(o,c)=>{const u={},g=[],b=[],y={},S={},T=Dt(o);return ft(T,E=>{const M=o[E];M.type==="contextform"||M.type==="contextsliderform"||M.type==="contextsizeinputform"?((P,N)=>{const V=Zl(Ai("ContextForm",cE,N));u[P]=V,V.launch.map(G=>{y["form:"+P]={...N.launch,type:G.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{c(V)}}}),V.scope==="editor"?b.push(V):g.push(V),S[P]=V})(E,M):M.type==="contexttoolbar"&&((P,N)=>{var V;(V=N,Ai("ContextToolbar",FB,V)).each(G=>{N.scope==="editor"?b.push(G):g.push(G),S[P]=G})})(E,M)}),{forms:u,inNodeScope:g,inEditorScope:b,lookupTable:S,formNavigators:y}},e4="tox-pop--transition",mL=(o,c,u,g)=>{const b=g.backstage,y=b.shared,S=ic().deviceType.isTouch,T=Br(),E=Br(),M=Br(),P=Tu((Re=>{const Ye=Go([]);return Ma.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:vt=>{Ye.set([]),Ma.getContent(vt).each(en=>{or(en.element,"visibility")}),$o(vt.element,pC),or(vt.element,"width")},onHide:()=>{Re.onHide()},inlineBehaviours:gn([Ts("context-toolbar-events",[au(ll(),(vt,en)=>{en.event.raw.propertyName==="width"&&($o(vt.element,pC),or(vt.element,"width"))}),tn(NM,(vt,en)=>{const jt=vt.element;or(jt,"width");const cn=Je(jt);or(jt,"left"),or(jt,"right"),or(jt,"max-width"),Ma.setContent(vt,en.event.contents),xn(jt,pC);const Dn=Je(jt);fs(jt,"transition","none"),Ma.reposition(vt),or(jt,"transition"),fs(jt,"width",cn+"px"),en.event.focus.fold(()=>X3(vt),fo=>{sd(fo),du(jt).isNone()&&X3(vt)}),setTimeout(()=>{fs(vt.element,"width",Dn+"px")},0)}),tn(MM,(vt,en)=>{Ma.getContent(vt).each(jt=>{Ye.set(Ye.get().concat([{bar:jt,focus:h1(La(vt.element))}]))}),Uo(vt,NM,{contents:en.event.forwardContents,focus:z.none()})}),tn(fC,(vt,en)=>{Re.onBack(),dt(Ye.get()).each(jt=>{Ye.set(Ye.get().slice(0,Ye.get().length-1)),Uo(vt,NM,{contents:Wm(jt.bar),focus:jt.focus})})})]),ts.config({mode:"special",onEscape:vt=>dt(Ye.get()).fold(()=>Re.onEscape(),en=>($s(vt,fC),z.some(!0)))})]),lazySink:()=>vr.value(Re.sink)})})({sink:u,onEscape:()=>(o.focus(),oI(o),z.some(!0)),onHide:()=>{oI(o)},onBack:()=>{(Re=>{Re.dispatch("ContextFormSlideBack")})(o)}})),N=()=>{const Re=M.get().getOr("node"),Ye=$M(Re)?1:0;return FM(o,y,Re,Ye)},V=()=>!(o.removed||S()&&b.isContextMenuOpen()),G=()=>{if(V()){const Re=N(),Ye=Us(M.get(),"node")?((vt,en)=>en.filter(jt=>Ua(jt)&&Ve(jt)).map(Im).getOrThunk(()=>IM(vt)))(o,T.get()):IM(o);return Re.height<=0||!Q3(Ye,Re,.01)}return!0},Q=()=>{T.clear(),E.clear(),M.clear(),Ma.hide(P)},pe=()=>{if(Ma.isOpen(P)){const Re=P.element;or(Re,"display"),G()?fs(Re,"display","none"):(E.set(0),Ma.reposition(P))}},he=Re=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Re],behaviours:gn([ts.config({mode:"acyclic"}),Ts("pop-dialog-wrap-events",[Cs(Ye=>{o.shortcuts.add("ctrl+F9","focus statusbar",()=>ts.focusIn(Ye))}),ku(Ye=>{o.shortcuts.remove("ctrl+F9")})])])}),xe=Nn(()=>HM(c,Re=>{const Ye=ie([Re]);Uo(P,MM,{forwardContents:he(Ye)})})),ie=Re=>{const{buttons:Ye}=o.ui.registry.getAll(),vt={...Ye,...xe().formNavigators},en=Sb(o)===bm.scrolling?bm.scrolling:bm.default,jt=Et(Oe(Re,cn=>{return cn.type==="contexttoolbar"?((fo,jo)=>f_(o,{buttons:fo,toolbar:jo.items,allowToolbarGroups:!1},g.backstage,z.some(["form:"])))(vt,(Dn=cn,{...Dn,items:wn(Dn.items)?Dn.items:Oe(Dn.items,X6)})):((fo,jo)=>dL(fo,jo))(cn,y.providers);var Dn}));return u_({type:en,uid:Do("context-toolbar"),initGroups:jt,onEscape:z.none,cyclicKeying:!0,providers:y.providers})},ae=(Re,Ye)=>{if(ke.cancel(),!V())return;const vt=ie(Re),en=Re[0].position,jt=((Dn,fo)=>{const jo=Dn==="node"?y.anchors.node(fo):y.anchors.cursor(),ls=((As,pr,fi,Zi)=>pr==="line"?{bubble:jm(12,0,PM),layouts:{onLtr:()=>[fp],onRtl:()=>[Ef]},overrides:LM}:{bubble:jm(0,12,PM,1/12),layouts:tk(As,fi,Zi,pr),overrides:LM})(o,Dn,S(),{lastElement:T.get,isReposition:()=>Us(E.get(),0),getMode:()=>$u.getMode(u)});return ga(jo,ls)})(en,Ye);M.set(en),E.set(1);const cn=P.element;or(cn,"display"),(Dn=>Us(ns(Dn,T.get(),xt),!0))(Ye)||($o(cn,e4),$u.reset(u,P)),Ma.showWithinBounds(P,he(vt),{anchor:jt,transition:{classes:[e4],mode:"placement"}},()=>z.some(N())),Ye.fold(T.clear,T.set),G()&&fs(cn,"display","none")};let Ce=!1;const ke=c3(()=>{!o.hasFocus()||o.removed||Ce||(Ss(P.element,e4)?ke.throttle():((Re,Ye)=>{const vt=yt(Ye.getBody()),en=cn=>xt(cn,vt),jt=yt(Ye.selection.getNode());return(cn=>!en(cn)&&!We(vt,cn))(jt)?z.none():((cn,Dn,fo)=>{const jo=zp(cn,Dn);if(jo.contextForms.length>0)return z.some({elem:cn,toolbars:[jo.contextForms[0]]});{const ls=zp(cn,fo);if(ls.contextForms.length>0)return z.some({elem:cn,toolbars:[ls.contextForms[0]]});if(jo.contextToolbars.length>0||ls.contextToolbars.length>0){const As=(pr=>{if(pr.length<=1)return pr;{const fi=ys=>Qt(pr,ti=>ti.position===ys),Zi=ys=>Bt(pr,ti=>ti.position===ys),ca=fi("selection"),ta=fi("node");if(ca||ta){if(ta&&ca){const ys=Zi("node"),ti=Oe(Zi("selection"),ja=>({...ja,position:"node"}));return ys.concat(ti)}return Zi(ca?"selection":"node")}return Zi("line")}})(jo.contextToolbars.concat(ls.contextToolbars));return z.some({elem:cn,toolbars:As})}return z.none()}})(jt,Re.inNodeScope,Re.inEditorScope).orThunk(()=>((cn,Dn,fo)=>cn(Dn)?z.none():mi(Dn,jo=>{if(Pe(jo)){const{contextToolbars:ls,contextForms:As}=zp(jo,fo.inNodeScope),pr=As.length>0?As:(fi=>{if(fi.length<=1)return fi;{const Zi=ca=>Y(fi,ta=>ta.position===ca);return Zi("selection").orThunk(()=>Zi("node")).orThunk(()=>Zi("line")).map(ca=>ca.position).fold(()=>[],ca=>Bt(fi,ta=>ta.position===ca))}})(ls);return pr.length>0?z.some({elem:jo,toolbars:pr}):z.none()}return z.none()},cn))(en,jt,Re))})(xe(),o).fold(Q,Re=>{ae(Re.toolbars,z.some(Re.elem))}))},17);o.on("init",()=>{o.on("remove",Q),o.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",pe),o.on("click keyup focus SetContent",ke.throttle),o.on(Ph,Q),o.on("contexttoolbar-show",Re=>{const Ye=xe();Gt(Ye.lookupTable,Re.toolbarKey).each(vt=>{ae([vt],vn(Re.target!==o,Re.target)),X3(P)})}),o.on("focusout",Re=>{wh.setEditorTimeout(o,()=>{du(u.element).isNone()&&du(P.element).isNone()&&Q()},0)}),o.on("SwitchMode",()=>{o.mode.isReadOnly()&&Q()}),o.on("DisabledStateChange",Re=>{Re.state&&Q()}),o.on("ExecCommand",({command:Re})=>{Re.toLowerCase()==="toggleview"&&Q()}),o.on("AfterProgressState",Re=>{Re.state?Q():o.hasFocus()&&ke.throttle()}),o.on("dragstart",()=>{Ce=!0}),o.on("dragend drop",()=>{Ce=!1}),o.on("NodeChange",Re=>{du(P.element).fold(ke.throttle,Ue)})})},zM=(o,c)=>{const u=()=>{const g=c.getOptions(o),b=c.getCurrent(o).map(c.hash),y=Br();return Oe(g,S=>({type:"togglemenuitem",text:c.display(S),onSetup:T=>{const E=P=>{P&&(y.on(N=>N.setActive(!1)),y.set(T)),T.setActive(P)};E(Us(b,c.hash(S)));const M=c.watcher(o,S,E);return()=>{y.clear(),M()}},onAction:()=>c.setCurrent(o,S)}))};o.ui.registry.addMenuButton(c.name,{tooltip:c.text,icon:c.icon,fetch:g=>g(u()),onSetup:c.onToolbarSetup}),o.ui.registry.addNestedMenuItem(c.name,{type:"nestedmenuitem",text:c.text,getSubmenuItems:u,onSetup:c.onMenuSetup})},gL=o=>{zM(o,(c=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:WT,hash:u=>((g,b)=>CM(g,["fixed","relative","empty"]).map(({value:y,unit:S})=>y+S))(u).getOr(u),display:In,watcher:(u,g,b)=>u.formatter.formatChanged("lineheight",b,!1,{value:g}).unbind,getCurrent:u=>z.from(u.queryCommandValue("LineHeight")),setCurrent:(u,g)=>u.execCommand("LineHeight",!1,g),onToolbarSetup:Md(c),onMenuSetup:Md(c)}))(o)),(c=>z.from(Ch(c)).map(u=>({name:"language",text:"Language",icon:"language",getOptions:ve(u),hash:g=>st(g.customCode)?g.code:`${g.code}/${g.customCode}`,display:g=>g.title,watcher:(g,b,y)=>{var S;return g.formatter.formatChanged("lang",y,!1,{value:b.code,customValue:(S=b.customCode)!==null&&S!==void 0?S:null}).unbind},getCurrent:g=>{const b=yt(g.selection.getNode());return am(b,y=>z.some(y).filter(Pe).bind(S=>Es(S,"lang").map(T=>({code:T,customCode:Es(S,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(g,b)=>g.execCommand("Lang",!1,b),onToolbarSetup:g=>{const b=Hd();return g.setActive(c.formatter.match("lang",{},void 0,!0)),b.set(c.formatter.formatChanged("lang",g.setActive,!0)),zs(b.clear,Md(c)(g))},onMenuSetup:Md(c)})))(o).each(c=>zM(o,c))},ra=o=>qy(o,"NodeChange",c=>{c.setEnabled(o.queryCommandState("outdent")&&o.selection.isEditable())}),v5=(o,c)=>u=>{u.setActive(c.get());const g=b=>{c.set(b.state),u.setActive(b.state)};return o.on("PastePlainTextToggle",g),zs(()=>o.off("PastePlainTextToggle",g),Md(o)(u))},bC=(o,c)=>()=>{o.execCommand("mceToggleFormat",!1,c)},fL=o=>{(c=>{(u=>{Ip.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(g,b)=>{u.ui.registry.addToggleButton(g.name,{tooltip:g.text,icon:g.icon,onSetup:TO(u,g.name),onAction:bC(u,g.name),shortcut:g.shortcut})});for(let g=1;g<=6;g++){const b="h"+g,y=`Access+${g}`;u.ui.registry.addToggleButton(b,{text:b.toUpperCase(),tooltip:"Heading "+g,onSetup:TO(u,b),onAction:bC(u,b),shortcut:y})}})(c),(u=>{Ip.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],g=>{u.ui.registry.addButton(g.name,{tooltip:g.text,icon:g.icon,onAction:zf(u,g.action),shortcut:g.shortcut,context:g.context})}),Ip.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],g=>{u.ui.registry.addButton(g.name,{tooltip:g.text,icon:g.icon,onSetup:Md(u),onAction:zf(u,g.action)})})})(c),(u=>{Ip.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],g=>{u.ui.registry.addToggleButton(g.name,{tooltip:g.text,icon:g.icon,onAction:zf(u,g.action),onSetup:TO(u,g.name)})})})(c)})(o),(c=>{Ip.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],u=>{c.ui.registry.addMenuItem(u.name,{text:u.text,icon:u.icon,shortcut:u.shortcut,onAction:zf(c,u.action),context:u.context})}),Ip.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],u=>{c.ui.registry.addMenuItem(u.name,{text:u.text,icon:u.icon,shortcut:u.shortcut,onSetup:Md(c),onAction:zf(c,u.action)})}),c.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Md(c),onAction:bC(c,"code")})})(o)},t4=(o,c)=>qy(o,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",u=>{u.setEnabled(!o.mode.isReadOnly()&&o.undoManager[c]())}),pL=o=>qy(o,"VisualAid",c=>{c.setActive(o.hasVisual)}),y5=(o,c)=>{(u=>{ft([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],g=>{u.ui.registry.addToggleButton(g.name,{tooltip:g.text,icon:g.icon,onAction:zf(u,g.cmd),onSetup:TO(u,g.name)})}),u.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Md(u),onAction:zf(u,"JustifyNone")})})(o),fL(o),((u,g)=>{((b,y)=>{const S=YS(y,JF(b));b.ui.registry.addNestedMenuItem("align",{text:y.shared.providers.translate("Align"),onSetup:Md(b),getSubmenuItems:()=>S.items.validateItems(S.getStyleItems())})})(u,g),((b,y)=>{const S=YS(y,xM(b));b.ui.registry.addNestedMenuItem("fontfamily",{text:y.shared.providers.translate("Fonts"),onSetup:Md(b),getSubmenuItems:()=>S.items.validateItems(S.getStyleItems())})})(u,g),((b,y)=>{const S={type:"advanced",...y.styles},T=YS(y,a5(b,S));b.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Md(b),getSubmenuItems:()=>T.items.validateItems(T.getStyleItems())})})(u,g),((b,y)=>{const S=YS(y,t5(b));b.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Md(b),getSubmenuItems:()=>S.items.validateItems(S.getStyleItems())})})(u,g),((b,y)=>{const S=YS(y,G3(b));b.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Md(b),getSubmenuItems:()=>S.items.validateItems(S.getStyleItems())})})(u,g)})(o,c),(u=>{(g=>{g.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:t4(g,"hasUndo"),onAction:zf(g,"undo")}),g.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:t4(g,"hasRedo"),onAction:zf(g,"redo")})})(u),(g=>{g.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:t4(g,"hasUndo"),onAction:zf(g,"undo"),shortcut:"Meta+Z"}),g.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:t4(g,"hasRedo"),onAction:zf(g,"redo"),shortcut:"Meta+Y"})})(u)})(o),(u=>{(T=>{T.addCommand("mceApplyTextcolor",(E,M)=>{((P,N,V)=>{P.undoManager.transact(()=>{P.focus(),P.formatter.apply(N,{value:V}),P.nodeChanged()})})(T,E,M)}),T.addCommand("mceRemoveTextcolor",E=>{((M,P)=>{M.undoManager.transact(()=>{M.focus(),M.formatter.remove(P,{value:null},void 0,!0),M.nodeChanged()})})(T,E)})})(u);const g=iI(u),b=o8(u),y=Go(g),S=Go(b);sR(u,"forecolor","forecolor",y),sR(u,"backcolor","hilitecolor",S),RO(u,"forecolor","forecolor","Text color",y),RO(u,"backcolor","hilitecolor","Background color",S)})(o),(u=>{(g=>{g.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:zf(g,"mceToggleVisualAid"),context:"any"})})(u),(g=>{g.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:pL(g),onAction:zf(g,"mceToggleVisualAid"),context:"any"})})(u)})(o),(u=>{(g=>{g.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:ra(g),onAction:zf(g,"outdent")}),g.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Md(g),onAction:zf(g,"indent")})})(u)})(o),gL(o),(u=>{const g=Go(yw(u)),b=()=>u.execCommand("mceTogglePlainTextPaste");u.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:b,onSetup:v5(u,g)}),u.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:b,onSetup:v5(u,g)})})(o),(u=>{u.ui.registry.addContext("editable",()=>u.selection.isEditable()),u.ui.registry.addContext("mode",g=>u.mode.get()===g),u.ui.registry.addContext("any",Be),u.ui.registry.addContext("formatting",g=>u.formatter.canApply(g)),u.ui.registry.addContext("insert",g=>u.schema.isValidChild(u.selection.getNode().tagName,g))})(o)},nv=o=>wn(o)?o.split(/[ ,]/):o,eg=o=>c=>c.options.get(o),VM=eg("contextmenu_never_use_native"),v_=eg("contextmenu_avoid_overlap"),ov=o=>{const c=o.ui.registry.getAll().contextMenus,u=o.options.get("contextmenu");return o.options.isSet("contextmenu")?u:Bt(u,g=>yo(c,g))},Yf=(o,c)=>({type:"makeshift",x:o,y:c}),nk=o=>o.type==="longpress"||o.type.indexOf("touch")===0,UM=(o,c)=>c.type==="contextmenu"||c.type==="longpress"?o.inline?(u=>{if(nk(u)){const g=u.touches[0];return Yf(g.pageX,g.pageY)}return Yf(u.pageX,u.pageY)})(c):((u,g)=>{const b=mw.DOM.getPos(u);return((y,S,T)=>Yf(y.x+S,y.y+T))(g,b.x,b.y)})(o.getContentAreaContainer(),(u=>{if(nk(u)){const g=u.touches[0];return Yf(g.clientX,g.clientY)}return Yf(u.clientX,u.clientY)})(c)):y_(o),y_=o=>({type:"selection",root:yt(o.selection.getNode())}),WM=(o,c,u)=>{switch(u){case"node":return(g=>({type:"node",node:z.some(yt(g.selection.getNode())),root:yt(g.getBody())}))(o);case"point":return UM(o,c);case"selection":return y_(o)}},x5=(o,c,u,g,b,y)=>{const S=u(),T=WM(o,c,y);Q1(S,Ee.CLOSE_ON_EXECUTE,g,{isHorizontalMenu:!1,search:z.none()}).map(E=>{c.preventDefault(),Ma.showMenuAt(b,{anchor:T},{menu:{markers:Ui("normal")},data:E})})},hL={onLtr:()=>[kc,Sc,wl,Cl,Ac,Hc,Gf,BS,zb,YE,NS,MS],onRtl:()=>[kc,wl,Sc,Ac,Cl,Hc,Gf,BS,NS,MS,zb,YE]},bL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},w5=(o,c,u,g,b,y)=>{const S=ic(),T=S.os.isiOS(),E=S.os.isMacOS(),M=S.os.isAndroid(),P=S.deviceType.isTouch(),N=()=>{const V=u();((G,Q,pe,he,xe,ie,ae)=>{const Ce=((ke,Re,Ye)=>{const vt=WM(ke,Re,Ye);return{bubble:jm(0,Ye==="point"?12:0,bL),layouts:hL,overrides:{maxWidthFunction:o_(),maxHeightFunction:x1()},...vt}})(G,Q,ie);Q1(pe,Ee.CLOSE_ON_EXECUTE,he,{isHorizontalMenu:!0,search:z.none()}).map(ke=>{Q.preventDefault();const Re=ae?Vi.HighlightMenuAndItem:Vi.HighlightNone;Ma.showMenuWithinBounds(xe,{anchor:Ce},{menu:{markers:Ui("normal"),highlightOnOpen:Re},data:ke,type:"horizontal"},()=>z.some(FM(G,he.shared,ie==="node"?"node":"selection"))),G.dispatch(Ph)})})(o,c,V,g,b,y,!(M||T||E&&P))};if((E||T)&&y!=="node"){const V=()=>{(G=>{const Q=G.selection.getRng(),pe=()=>{wh.setEditorTimeout(G,()=>{G.selection.setRng(Q)},10),ie()};G.once("touchend",pe);const he=ae=>{ae.preventDefault(),ae.stopImmediatePropagation()};G.on("mousedown",he,!0);const xe=()=>ie();G.once("longpresscancel",xe);const ie=()=>{G.off("touchend",pe),G.off("longpresscancel",xe),G.off("mousedown",he)}})(o),N()};((G,Q)=>{const pe=G.selection;if(pe.isCollapsed()||Q.touches.length<1)return!1;{const he=Q.touches[0],xe=pe.getRng();return Ao(G.getWin(),$v.domRange(xe)).exists(ie=>ie.left<=he.clientX&&ie.right>=he.clientX&&ie.top<=he.clientY&&ie.bottom>=he.clientY)}})(o,c)?V():(o.once("selectionchange",V),o.once("touchend",()=>o.off("selectionchange",V)))}else N()},n4=o=>wn(o)?o==="|":o.type==="separator",x_={type:"separator"},jM=o=>{const c=u=>({text:u.text,icon:u.icon,enabled:u.enabled,shortcut:u.shortcut});if(wn(o))return o;switch(o.type){case"separator":return x_;case"submenu":return{type:"nestedmenuitem",...c(o),getSubmenuItems:()=>{const g=o.getSubmenuItems();return wn(g)?g:Oe(g,jM)}};default:const u=o;return{type:"menuitem",...c(u),onAction:at(u.onAction)}}},o4=(o,c)=>{if(c.length===0)return o;const u=dt(o).filter(g=>!n4(g)).fold(()=>[],g=>[x_]);return o.concat(u).concat(c).concat([x_])},vL=(o,c)=>!(u=>u.type==="longpress"||yo(u,"touches"))(c)&&(c.button!==2||c.target===o.getBody()&&c.pointerType===""),C5=(o,c)=>vL(o,c)?o.selection.getStart(!0):c.target,G7=(o,c,u)=>{const g=ic().deviceType.isTouch,b=Tu(Ma.sketch({dom:{tag:"div"},lazySink:c,onEscape:()=>o.focus(),onShow:()=>u.setContextMenuState(!0),onHide:()=>u.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:gn([Ts("dismissContextMenu",[tn(Fu(),(T,E)=>{Jr.close(T),o.focus()})])])})),y=()=>Ma.hide(b),S=T=>{if(VM(o)&&T.preventDefault(),((M,P)=>P.ctrlKey&&!VM(M))(o,T)||(M=>ov(M).length===0)(o))return;const E=((M,P)=>{const N=v_(M),V=vL(M,P)?"selection":"point";if(bi(N)){const G=C5(M,P);return Oh(yt(G),N)?"node":V}return V})(o,T);(g()?w5:x5)(o,T,()=>{const M=C5(o,T),P=o.ui.registry.getAll(),N=ov(o);return((V,G,Q)=>{const pe=pt(G,(he,xe)=>Gt(V,xe.toLowerCase()).map(ie=>{const ae=ie.update(Q);if(wn(ae)&&bi(Er(ae)))return o4(he,ae.split(" "));if(Fn(ae)&&ae.length>0){const Ce=Oe(ae,jM);return o4(he,Ce)}return he}).getOrThunk(()=>he.concat([xe])),[]);return pe.length>0&&n4(pe[pe.length-1])&&pe.pop(),pe})(P.contextMenus,N,M)},u,b,E)};o.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(g()?"":" ResizeWindow");o.on(T,y),o.on("longpress contextmenu",S)})},s4=Zr([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),k0=o=>c=>c.translate(-o.left,-o.top),Vp=o=>c=>c.translate(o.left,o.top),px=o=>(c,u)=>pt(o,(g,b)=>b(g),Wr(c,u)),ZM=(o,c,u)=>o.fold(px([Vp(u),k0(c)]),px([k0(c)]),px([])),T0=(o,c,u)=>o.fold(px([Vp(u)]),px([]),px([Vp(c)])),Cm=(o,c,u)=>o.fold(px([]),px([k0(u)]),px([Vp(c),k0(u)])),r4=(o,c,u)=>{const g=o.fold((b,y)=>({position:z.some("absolute"),left:z.some(b+"px"),top:z.some(y+"px")}),(b,y)=>({position:z.some("absolute"),left:z.some(b-u.left+"px"),top:z.some(y-u.top+"px")}),(b,y)=>({position:z.some("fixed"),left:z.some(b+"px"),top:z.some(y+"px")}));return{right:z.none(),bottom:z.none(),...g}},w_=(o,c,u,g)=>{const b=(y,S)=>(T,E)=>{const M=y(c,u,g);return S(T.getOr(M.left),E.getOr(M.top))};return o.fold(b(Cm,C_),b(T0,E0),b(ZM,vC))},C_=s4.offset,E0=s4.absolute,vC=s4.fixed,S5=(o,c)=>{const u=Ei(o,c);return st(u)?NaN:parseInt(u,10)},_0=(o,c,u,g,b,y)=>{const S=((M,P,N,V)=>((G,Q)=>{const pe=G.element,he=S5(pe,Q.leftAttr),xe=S5(pe,Q.topAttr);return isNaN(he)||isNaN(xe)?z.none():z.some(Wr(he,xe))})(M,P).fold(()=>N,G=>vC(G.left+V.left,G.top+V.top)))(o,c,u,g),T=c.mustSnap?yL(o,c,S,b,y):xL(o,c,S,b,y),E=ZM(S,b,y);return((M,P,N)=>{const V=M.element;ws(V,P.leftAttr,N.left+"px"),ws(V,P.topAttr,N.top+"px")})(o,c,E),T.fold(()=>({coord:vC(E.left,E.top),extra:z.none()}),M=>({coord:M.output,extra:M.extra}))},GM=(o,c,u,g)=>it(o,b=>{const y=b.sensor;return((T,E,M,P,N,V)=>{const G=T0(T,N,V),Q=T0(E,N,V);return Math.abs(G.left-Q.left)<=M&&Math.abs(G.top-Q.top)<=P})(c,y,b.range.left,b.range.top,u,g)?z.some({output:w_(b.output,c,u,g),extra:b.extra}):z.none()}),yL=(o,c,u,g,b)=>{const y=c.getSnapPoints(o);return GM(y,u,g,b).orThunk(()=>pt(y,(T,E)=>{const M=E.sensor,P=((N,V,G,Q,pe,he)=>{const xe=T0(N,pe,he),ie=T0(V,pe,he),ae=Math.abs(xe.left-ie.left),Ce=Math.abs(xe.top-ie.top);return Wr(ae,Ce)})(u,M,E.range.left,E.range.top,g,b);return T.deltas.fold(()=>({deltas:z.some(P),snap:z.some(E)}),N=>(P.left+P.top)/2<=(N.left+N.top)/2?{deltas:z.some(P),snap:z.some(E)}:T)},{deltas:z.none(),snap:z.none()}).snap.map(T=>({output:w_(T.output,u,g,b),extra:T.extra})))},xL=(o,c,u,g,b)=>{const y=c.getSnapPoints(o);return GM(y,u,g,b)};var k5=Object.freeze({__proto__:null,snapTo:(o,c,u,g)=>{const b=c.getTarget(o.element);if(c.repositionTarget){const y=Ge(o.element),S=Fi(y),T=Um(b),E=((P,N,V)=>({coord:w_(P.output,P.output,N,V),extra:P.extra}))(g,S,T),M=r4(E.coord,0,T);Ld(b,M)}}});const qM="data-initial-z-index",KM=(o,c)=>{o.getSystem().addToGui(c),(u=>{xo(u.element).filter(Pe).each(g=>{ui(g,"z-index").each(b=>{ws(g,qM,b)}),fs(g,"z-index",Wa(u.element,"z-index"))})})(c)},T5=o=>{(c=>{xo(c.element).filter(Pe).each(u=>{Es(u,qM).fold(()=>or(u,"z-index"),g=>fs(u,"z-index",g)),Xs(u,qM)})})(o),o.getSystem().removeFromGui(o)},YM=(o,c,u)=>o.getSystem().build(Jg.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[c]},events:u}));var wL=gc("snaps",[Yt("getSnapPoints"),Hr("onSensor"),Yt("leftAttr"),Yt("topAttr"),ht("lazyViewport",Ic),ht("mustSnap",!1)]);const ok=[ht("useFixed",Qe),Yt("blockerClass"),ht("getTarget",In),ht("onDrag",Ue),ht("repositionTarget",!0),ht("onDrop",Ue),sr("getBounds",Ic),wL],CL=o=>{return(c=ui(o,"left"),u=ui(o,"top"),g=ui(o,"position"),c.isSome()&&u.isSome()&&g.isSome()?z.some(((b,y,S)=>(S==="fixed"?vC:C_)(parseInt(b,10),parseInt(y,10)))(c.getOrDie(),u.getOrDie(),g.getOrDie())):z.none()).getOrThunk(()=>{const b=ol(o);return E0(b.left,b.top)});var c,u,g},E5=(o,c)=>({bounds:o.getBounds(),height:qa(c.element),width:Pt(c.element)}),_5=(o,c,u,g,b)=>{const y=u.update(g,b),S=u.getStartData().getOrThunk(()=>E5(c,o));y.each(T=>{((E,M,P,N)=>{const V=M.getTarget(E.element);if(M.repositionTarget){const G=Ge(E.element),Q=Fi(G),pe=Um(V),he=CL(V),xe=((ae,Ce,ke,Re,Ye,vt,en)=>((jt,cn,Dn,fo,jo)=>{const ls=jo.bounds,As=T0(cn,Dn,fo),pr=Ng(As.left,ls.x,ls.x+ls.width-jo.width),fi=Ng(As.top,ls.y,ls.y+ls.height-jo.height),Zi=E0(pr,fi);return cn.fold(()=>{const ca=Cm(Zi,Dn,fo);return C_(ca.left,ca.top)},ve(Zi),()=>{const ca=ZM(Zi,Dn,fo);return vC(ca.left,ca.top)})})(0,Ce.fold(()=>{const jt=(cn=ke,Dn=vt.left,fo=vt.top,cn.fold((ls,As)=>C_(ls+Dn,As+fo),(ls,As)=>E0(ls+Dn,As+fo),(ls,As)=>vC(ls+Dn,As+fo)));var cn,Dn,fo;const jo=ZM(jt,Re,Ye);return vC(jo.left,jo.top)},jt=>{const cn=_0(ae,jt,ke,vt,Re,Ye);return cn.extra.each(Dn=>{jt.onSensor(ae,Dn)}),cn.coord}),Re,Ye,en))(E,M.snaps,he,Q,pe,N,P),ie=r4(xe,0,pe);Ld(V,ie)}M.onDrag(E,V,N)})(o,c,S,T)})},sk=(o,c,u,g)=>{c.each(T5),u.snaps.each(y=>{((S,T)=>{((E,M)=>{const P=E.element;Xs(P,M.leftAttr),Xs(P,M.topAttr)})(S,T)})(o,y)});const b=u.getTarget(o.element);g.reset(),u.onDrop(o,b)},S_=o=>(c,u)=>{const g=b=>{u.setStartData(E5(c,b))};return Ja([tn(so(),b=>{u.getStartData().each(()=>g(b))}),...o(c,u,g)])};var XM=Object.freeze({__proto__:null,getData:o=>z.from(Wr(o.x,o.y)),getDelta:(o,c)=>Wr(c.left-o.left,c.top-o.top)});const A5=(o,c,u)=>[tn(qe(),(g,b)=>{if(b.event.raw.button!==0)return;b.stop();const y=()=>sk(g,z.some(E),o,c),S=Xg(y,200),T={drop:y,delayDrop:S.schedule,forceDrop:y,move:M=>{S.cancel(),_5(g,o,c,XM,M)}},E=YM(g,o.blockerClass,(M=>Ja([tn(qe(),M.forceDrop),tn(Ys(),M.drop),tn(Sn(),(P,N)=>{M.move(N.event)}),tn(as(),M.delayDrop)]))(T));u(g),KM(g,E)})],O5=[...ok,$a("dragger",{handlers:S_(A5)})];var D5=Object.freeze({__proto__:null,getData:o=>{const c=o.raw.touches;return c.length===1?(u=>{const g=u[0];return z.some(Wr(g.clientX,g.clientY))})(c):z.none()},getDelta:(o,c)=>Wr(c.left-o.left,c.top-o.top)});const R5=(o,c,u)=>{const g=Br(),b=y=>{sk(y,g.get(),o,c),g.clear()};return[tn(I(),(y,S)=>{S.stop();const T=()=>b(y),E={drop:T,delayDrop:Ue,forceDrop:T,move:P=>{_5(y,o,c,D5,P)}},M=YM(y,o.blockerClass,(P=>Ja([tn(I(),P.forceDrop),tn(ne(),P.drop),tn(ze(),P.drop),tn(j(),(N,V)=>{P.move(V.event)})]))(E));g.set(M),u(y),KM(y,M)}),tn(j(),(y,S)=>{S.stop(),_5(y,o,c,D5,S.event)}),tn(ne(),(y,S)=>{S.stop(),b(y)}),tn(ze(),b)]},yC=O5,xC=[...ok,$a("dragger",{handlers:S_(R5)})],a4=[...ok,$a("dragger",{handlers:S_((o,c,u)=>[...A5(o,c,u),...R5(o,c,u)])})];var i4=Object.freeze({__proto__:null,mouse:yC,touch:xC,mouseOrTouch:a4}),wC=Object.freeze({__proto__:null,init:()=>{let o=z.none(),c=z.none();const u=ve({});return wd({readState:u,reset:()=>{o=z.none(),c=z.none()},update:(g,b)=>g.getData(b).bind(y=>((S,T)=>{const E=o.map(M=>S.getDelta(M,T));return o=z.some(T),E})(g,y)),getStartData:()=>c,setStartData:g=>{c=z.some(g)}})}});const Xf=V0({branchKey:"mode",branches:i4,name:"dragging",active:{events:(o,c)=>o.dragger.handlers(o,c)},extra:{snap:o=>({sensor:o.sensor,range:o.range,output:o.output,extra:z.from(o.extra)})},state:wC,apis:k5}),rk=(o,c,u,g,b,y)=>o.fold(()=>Xf.snap({sensor:E0(u-20,g-20),range:Wr(b,y),output:E0(z.some(u),z.some(g)),extra:{td:c}}),S=>{const T=u-20,E=g-20,M=S.element.dom.getBoundingClientRect();return Xf.snap({sensor:E0(T,E),range:Wr(40,40),output:E0(z.some(u-M.width/2),z.some(g-M.height/2)),extra:{td:c}})}),k_=(o,c,u)=>({getSnapPoints:o,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(g,b)=>{const y=b.td;((S,T)=>S.exists(E=>xt(E,T)))(c.get(),y)||(c.set(y),u(y))},mustSnap:!0}),JM=o=>ir(wa.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:gn([Xf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:o}),aS.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),QM=(o,c)=>{const u=Go([]),g=Go([]),b=Go(!1),y=Br(),S=Br(),T=ie=>{const ae=Im(ie);return rk(N.getOpt(c),ie,ae.x,ae.y,ae.width,ae.height)},E=ie=>{const ae=Im(ie);return rk(V.getOpt(c),ie,ae.right,ae.bottom,ae.width,ae.height)},M=k_(()=>Oe(u.get(),ie=>T(ie)),y,ie=>{S.get().each(ae=>{o.dispatch("TableSelectorChange",{start:ie,finish:ae})})}),P=k_(()=>Oe(g.get(),ie=>E(ie)),S,ie=>{y.get().each(ae=>{o.dispatch("TableSelectorChange",{start:ae,finish:ie})})}),N=JM(M),V=JM(P),G=Tu(N.asSpec()),Q=Tu(V.asSpec()),pe=(ie,ae,Ce,ke)=>{const Re=Ce(ae);Xf.snapTo(ie,Re),((Ye,vt,en,jt)=>{const cn=vt.dom.getBoundingClientRect();or(Ye.element,"display");const Dn=Xn(yt(o.getBody())).dom.innerHeight,fo=cn[ke]<0,jo=((ls,As)=>ls[ke]>As)(cn,Dn);(fo||jo)&&fs(Ye.element,"display","none")})(ie,ae)},he=ie=>pe(G,ie,T,"top"),xe=ie=>pe(Q,ie,E,"bottom");if(ic().deviceType.isTouch()){const ie=ae=>Oe(ae,yt);o.on("TableSelectionChange",ae=>{b.get()||(zv(c,G),zv(c,Q),b.set(!0));const Ce=yt(ae.start),ke=yt(ae.finish);y.set(Ce),S.set(ke),z.from(ae.otherCells).each(Re=>{u.set(ie(Re.upOrLeftCells)),g.set(ie(Re.downOrRightCells)),he(Ce),xe(ke)})}),o.on("ResizeEditor ResizeWindow ScrollContent",()=>{y.get().each(he),S.get().each(xe)}),o.on("TableSelectionClear",()=>{b.get()&&(Zm(G),Zm(Q),b.set(!1)),y.clear(),S.clear()})}},eN=(o,c,u)=>{var g;const b=(g=c.delimiter)!==null&&g!==void 0?g:"›";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:gn([ts.config({mode:"flow",selector:"div[role=button]"}),hs.config({disabled:u.isDisabled}),Tl(()=>u.checkUiComponentContext("any")),Na.config({}),_s.config({}),Ts("elementPathEvents",[Cs((y,S)=>{o.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ts.focusIn(y)),o.on("NodeChange",T=>{const E=(P=>{const N=[];let V=P.length;for(;V-- >0;){const Q=P[V];if(Q.nodeType===1&&(G=Q).nodeName!=="BR"&&!G.getAttribute("data-mce-bogus")&&G.getAttribute("data-mce-type")!=="bookmark"){const pe=Hs(o,Q);if(pe.isDefaultPrevented()||N.push({name:pe.name,element:Q}),pe.isPropagationStopped())break}}var G;return N})(T.parents),M=E.length>0?pt(E,(P,N,V)=>{const G=((Q,pe,he)=>wa.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":he}},components:[tc(Q)],action:xe=>{o.focus(),o.selection.select(pe),o.nodeChanged()},buttonBehaviours:gn([Ri.config({...u.tooltips.getConfig({tooltipText:u.translate(["Select the {0} element",pe.nodeName.toLowerCase()]),onShow:(xe,ie)=>{((ae,Ce)=>{const ke=z.from(Ei(ae,"id")).getOrThunk(()=>{const Re=Do("aria");return ws(Ce,"id",Re),Re});ws(ae,"aria-describedby",ke)})(xe.element,ie.element)},onHide:xe=>{var ie;ie=xe.element,Xs(ie,"aria-describedby")}})}),lE(u.isDisabled),Tl(()=>u.checkUiComponentContext("any"))])}))(N.name,N.element,V);return V===0?P.concat([G]):P.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[tc(` ${b} `)]},G])},[]):[];_s.set(y,M)})})])]),components:[]}};var A0;(function(o){o[o.None=0]="None",o[o.Both=1]="Both",o[o.Vertical=2]="Vertical"})(A0||(A0={}));const tN=(o,c,u)=>{const g=yt(o.getContainer()),b=((y,S,T,E,M)=>{const P={height:Y3(E+S.top,HT(y),Ny(y))};return T===A0.Both&&(P.width=Y3(M+S.left,$T(y),F1(y))),P})(o,c,u,oi(g),Je(g));Hn(b,(y,S)=>{zn(y)&&fs(g,S,DM(y))}),(y=>{y.dispatch("ResizeEditor")})(o)},sv=(o,c,u,g)=>{const b=Wr(20*u,20*g);return tN(o,b,c),z.some(!0)},nN=(o,c)=>{const u=()=>{const g=[],b=Fy(o),y=$1(o),S=vw(o)||o.hasPlugin("wordcount");return y&&g.push(eN(o,{},c)),b&&g.push((()=>{const T=CO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[tc(qg.translate(["Press {0} for help",T]))]}})()),S&&g.push((()=>{const T=[];return o.hasPlugin("wordcount")&&T.push(((E,M)=>{const P=(N,V,G)=>_s.set(N,[tc(M.translate(["{0} "+G,V[G]]))]);return wa.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:gn([lE(M.isDisabled),Tl(()=>M.checkUiComponentContext("any")),Na.config({}),_s.config({}),go.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Ts("wordcount-events",[ri(N=>{const V=go.getValue(N),G=V.mode==="words"?"characters":"words";go.setValue(N,{mode:G,count:V.count}),P(N,V.count,G)}),Cs(N=>{E.on("wordCountUpdate",V=>{const{mode:G}=go.getValue(N);go.setValue(N,{mode:G,count:V.wordCount}),P(N,V.wordCount,G)})})])]),eventOrder:{[os()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(o,c)),vw(o)&&T.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":o.translate(["Build with {0}","TinyMCE"])},innerHtml:o.translate(["Build with {0}",`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`.trim()])},behaviours:gn([Rs.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:T}})()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const T="tox-statusbar__text-container--flex-start",E="tox-statusbar__text-container--flex-end";if(b){const M="tox-statusbar__text-container-3-cols";return S||y?S&&!y?[M,E]:[M,T]:[M,"tox-statusbar__text-container--space-around"]}return[S&&!y?E:T]})()]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=u(),b=((y,S)=>{const T=(M=>{const P=F2(M);return P===!1?A0.None:P==="both"?A0.Both:A0.Vertical})(y);if(T===A0.None)return z.none();const E=T===A0.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return z.some(_("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":S.translate(E),"data-mce-name":"resize-handle"},behaviours:[Xf.config({mode:"mouse",repositionTarget:!1,onDrag:(M,P,N)=>tN(y,N,T),blockerClass:"tox-blocker"}),ts.config({mode:"special",onLeft:()=>sv(y,T,-1,0),onRight:()=>sv(y,T,1,0),onUp:()=>sv(y,T,0,-1),onDown:()=>sv(y,T,0,1)}),Na.config({}),Rs.config({}),Ri.config(S.tooltips.getConfig({tooltipText:S.translate("Resize")}))]},S.icons))})(o,c);return g.concat(b.toArray())})()}},c4=(o,c)=>c.get().getOrDie(`UI for ${o} has not been rendered`),l4=(o,c)=>{const u=o.inline,g=u?ek:cL,b=Ff(o)?CF:eM,y=(()=>{const Re=Br(),Ye=Br(),vt=Br();return{dialogUi:Re,popupUi:Ye,mainUi:vt,getUiMotherships:()=>{const en=Re.get().map(cn=>cn.mothership),jt=Ye.get().map(cn=>cn.mothership);return en.fold(()=>jt.toArray(),cn=>jt.fold(()=>[cn],Dn=>xt(cn.element,Dn.element)?[cn]:[cn,Dn]))},lazyGetInOuterOrDie:(en,jt)=>()=>vt.get().bind(cn=>jt(cn.outerContainer)).getOrDie(`Could not find ${en} element in OuterContainer`)}})(),S=Br(),T=Br(),E=Br(),M=ic().deviceType.isTouch()?["tox-platform-touch"]:[],P=Ll(o),N=Sb(o),V=ir({dom:{tag:"div",classes:["tox-anchorbar"]}}),G=ir({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Q=()=>y.mainUi.get().map(Re=>Re.outerContainer).bind(Ni.getHeader),pe=y.lazyGetInOuterOrDie("anchor bar",V.getOpt),he=y.lazyGetInOuterOrDie("bottom anchor bar",G.getOpt),xe=y.lazyGetInOuterOrDie("toolbar",Ni.getToolbar),ie=y.lazyGetInOuterOrDie("throbber",Ni.getThrobber),ae=((Re,Ye,vt,en)=>{const jt=Go(!1),cn=(ta=>{const ys=Go(Ll(ta)?"bottom":"top");return{isPositionedAtTop:()=>ys.get()==="top",getDockingMode:ys.get,setDockingMode:ys.set}})(Ye),Dn={icons:()=>Ye.ui.registry.getAll().icons,menuItems:()=>Ye.ui.registry.getAll().menuItems,translate:qg.translate,isDisabled:()=>!Ye.ui.isEnabled(),getOption:Ye.options.get,tooltips:Wu(Re.dialog),checkUiComponentContext:ta=>{if(I1(Ye))return{contextType:"disabled",shouldDisable:!0};const[ys,ti=""]=ta.split(":"),ja=Ye.ui.registry.getAll().contexts;return{contextType:ys,shouldDisable:!Gt(ja,ys).fold(()=>Gt(ja,"mode").map(dd=>dd("design")).getOr(!1),dd=>ti.charAt(0)==="!"?!dd(ti.slice(1)):dd(ti))}}},fo=yF(Ye),jo=(ta=>{const ys=ml=>()=>ta.formatter.match(ml),ti=ml=>()=>{const zl=ta.formatter.get(ml);return zl!==void 0?z.some({tag:zl.length>0&&(zl[0].inline||zl[0].block)||"div",styles:ta.dom.parseStyle(ta.formatter.getCssText(ml))}):z.none()},ja=Go([]),dd=Go([]),pi=Go(!1);return ta.on("PreInit",ml=>{const zl=qf(ta),R0=Pp(ta,zl,ys,ti);ja.set(R0)}),ta.on("addStyleModifications",ml=>{const zl=Pp(ta,ml.items,ys,ti);dd.set(zl),pi.set(ml.replace)}),{getData:()=>{const ml=pi.get()?[]:ja.get(),zl=dd.get();return ml.concat(zl)}}})(Ye),ls=(ta=>({colorPicker:ZR(ta),hasCustomColors:pF(ta),getColors:O8(ta),getColorCols:cC(ta)}))(Ye),As=(ta=>({isDraggableModal:hF(ta)}))(Ye),pr={shared:{providers:Dn,anchors:JE(Ye,vt,en,cn.isPositionedAtTop),header:cn},urlinput:fo,styles:jo,colorinput:ls,dialog:As,isContextMenuOpen:()=>jt.get(),setContextMenuState:ta=>jt.set(ta)},fi=ta=>z.none(),Zi={...pr,shared:{...pr.shared,interpreter:ta=>Ci(ta,{},Zi,fi),getSink:Re.popup}},ca={...pr,shared:{...pr.shared,interpreter:ta=>Ci(ta,{},ca,fi),getSink:Re.dialog}};return{popup:Zi,dialog:ca}})({popup:()=>vr.fromOption(y.popupUi.get().map(Re=>Re.sink),"(popup) UI has not been rendered"),dialog:()=>vr.fromOption(y.dialogUi.get().map(Re=>Re.sink),"UI has not been rendered")},o,pe,he),Ce=()=>{const Re=(()=>{const pr={attributes:{[Sl]:P?lh.BottomToTop:lh.TopToBottom}},fi=Ni.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ae.popup,onEscape:()=>{o.focus()}}),Zi=Ni.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ae.popup.shared.getSink,providers:ae.popup.shared.providers,onEscape:()=>{o.focus()},onToolbarToggled:zl=>{((R0,TC)=>{R0.dispatch("ToggleToolbarDrawer",{state:TC})})(o,zl)},type:N,lazyToolbar:xe,lazyHeader:()=>Q().getOrDie("Could not find header element"),...pr}),ca=Ni.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ae.popup.shared.providers,onEscape:()=>{o.focus()},type:N}),ta=ao(o),ys=kb(o),ti=L2(o),ja=UT(o),dd=Ni.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),pi=ta||ys||ti,ml=ja?[dd,fi]:[fi];return Ni.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(pi?[]:["tox-editor-header--empty"]),...pr},components:Et([ti?ml:[],ta?[ca]:ys?[Zi]:[],nc(o)?[]:[V.asSpec()]]),sticky:Ff(o),editor:o,sharedBackstage:ae.popup.shared})})(),Ye={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ni.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Ni.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},vt=Ni.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ae.popup}),en=Ni.parts.viewWrapper({backstage:ae.popup}),jt=VT(o)&&!u?z.some(nN(o,ae.popup.shared.providers)):z.none(),cn=Et([P?[]:[Re],u?[]:[Ye],P?[Re]:[]]),Dn=Ni.parts.editorContainer({components:Et([cn,u?[]:[G.asSpec()]])}),fo=$y(o),jo={role:"application",...qg.isRtl()?{dir:"rtl"}:{},...fo?{"aria-hidden":"true"}:{}},ls=Tu(Ni.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(u?["tox-tinymce-inline"]:[]).concat(P?["tox-tinymce--toolbar-bottom"]:[]).concat(M),styles:{visibility:"hidden",...fo?{opacity:"0",border:"0"}:{}},attributes:jo},components:[Dn,...u?[]:[en,...jt.toArray()],vt],behaviours:gn([Tl(()=>ae.popup.shared.providers.checkUiComponentContext("any")),hs.config({disableClass:"tox-tinymce--disabled"}),ts.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),As=wE(ls);return S.set(As),{mothership:As,outerContainer:ls}},ke=Re=>{const Ye=DM((en=>(cn=>{const Dn=LT(cn),fo=HT(cn),jo=Ny(cn);return p_(Dn).map(ls=>Y3(ls,fo,jo))})(en).getOr(LT(en)))(o)),vt=DM((en=>RM(en).getOr(B2(en)))(o));return o.inline||(qi("div","width",vt)&&fs(Re.element,"width",vt),qi("div","height",Ye)?fs(Re.element,"height",Ye):fs(Re.element,"height","400px")),Ye};return{popups:{backstage:ae.popup,getMothership:()=>c4("popups",E)},dialogs:{backstage:ae.dialog,getMothership:()=>c4("dialogs",T)},renderUI:()=>{const Re=Ce(),Ye=(()=>{const en=vm(o),jt=xt(Ti(),en)&&Wa(en,"display")==="grid",cn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(M),attributes:{...qg.isRtl()?{dir:"rtl"}:{}}},behaviours:gn([$u.config({useFixed:()=>b.isDocked(Q)})])},Dn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ja([tn(Qu(),ls=>{fs(ls.element,"width",document.body.clientWidth+"px")})])},fo=Tu(ga(cn,jt?Dn:{})),jo=wE(fo);return T.set(jo),{sink:fo,mothership:jo}})(),vt=Tp(o)?(()=>{const en={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(M),attributes:{...qg.isRtl()?{dir:"rtl"}:{}}},behaviours:gn([$u.config({useFixed:()=>b.isDocked(Q),getBounds:()=>c.getPopupSinkBounds()})])},jt=Tu(en),cn=wE(jt);return E.set(cn),{sink:jt,mothership:cn}})():(en=>(E.set(en.mothership),en))(Ye);return y.dialogUi.set(Ye),y.popupUi.set(vt),y.mainUi.set(Re),(en=>{const{mainUi:jt,popupUi:cn,uiMotherships:Dn}=en;ut(ZA(o),(ys,ti)=>{o.ui.registry.addGroupToolbarButton(ti,ys)});const{buttons:fo,menuItems:jo,contextToolbars:ls,sidebars:As,views:pr}=o.ui.registry.getAll(),fi=xw(o),Zi={menuItems:jo,menus:Hy(o),menubar:zT(o),toolbar:fi.getOrThunk(()=>pw(o)),allowToolbarGroups:N===bm.floating,buttons:fo,sidebar:As,views:pr};var ca;ca=jt.outerContainer,o.addShortcut("alt+F9","focus menubar",()=>{Ni.focusMenubar(ca)}),o.addShortcut("alt+F10","focus toolbar",()=>{Ni.focusToolbar(ca)}),o.addCommand("ToggleToolbarDrawer",(ys,ti)=>{ti!=null&&ti.skipFocus?Ni.toggleToolbarDrawerWithoutFocusing(ca):Ni.toggleToolbarDrawer(ca)}),o.addQueryStateHandler("ToggleToolbarDrawer",()=>Ni.isToolbarDrawerToggled(ca)),((ys,ti,ja)=>{const dd=(wr,Jf)=>{ft([ti,...ja],af=>{af.broadcastEvent(wr,Jf)})},pi=(wr,Jf)=>{ft([ti,...ja],af=>{af.broadcastOn([wr],Jf)})},ml=wr=>pi(E1(),{target:wr.target}),zl=dc(),R0=Ed(zl,"touchstart",ml),TC=Ed(zl,"touchmove",wr=>dd(vf(),wr)),km=Ed(zl,"touchend",wr=>dd(oh(),wr)),E4=Ed(zl,"mousedown",ml),av=Ed(zl,"mouseup",wr=>{wr.raw.button===0&&pi(Jk(),{target:wr.target})}),M0=wr=>pi(E1(),{target:yt(wr.target)}),Hh=wr=>{wr.button===0&&pi(Jk(),{target:yt(wr.target)})},fk=()=>{ft(ys.editorManager.get(),wr=>{ys!==wr&&wr.dispatch("DismissPopups",{relatedTarget:ys})})},EC=wr=>dd(so(),uA(wr)),iv=wr=>{pi(Uv(),{}),dd(Qu(),uA(wr))},pk=La(yt(ys.getElement())),_C=Eu(pk,"scroll",wr=>{requestAnimationFrame(()=>{if(ys.getContainer()!=null){const Jf=gg(ys,ti.element).map(af=>[af.element,...af.others]).getOr([]);Qt(Jf,af=>xt(af,wr.target))&&(ys.dispatch("ElementScroll",{target:wr.target.dom}),dd(o1(),wr))}})}),L_=()=>pi(Uv(),{}),hk=wr=>{wr.state&&pi(E1(),{target:yt(ys.getContainer())})},bk=wr=>{pi(E1(),{target:yt(wr.relatedTarget.getContainer())})},N0=wr=>ys.dispatch("focusin",wr),jp=wr=>ys.dispatch("focusout",wr);ys.on("PostRender",()=>{ys.on("click",M0),ys.on("tap",M0),ys.on("mouseup",Hh),ys.on("mousedown",fk),ys.on("ScrollWindow",EC),ys.on("ResizeWindow",iv),ys.on("ResizeEditor",L_),ys.on("AfterProgressState",hk),ys.on("DismissPopups",bk),ft([ti,...ja],wr=>{wr.element.dom.addEventListener("focusin",N0),wr.element.dom.addEventListener("focusout",jp)})}),ys.on("remove",()=>{ys.off("click",M0),ys.off("tap",M0),ys.off("mouseup",Hh),ys.off("mousedown",fk),ys.off("ScrollWindow",EC),ys.off("ResizeWindow",iv),ys.off("ResizeEditor",L_),ys.off("AfterProgressState",hk),ys.off("DismissPopups",bk),ft([ti,...ja],wr=>{wr.element.dom.removeEventListener("focusin",N0),wr.element.dom.removeEventListener("focusout",jp)}),E4.unbind(),R0.unbind(),TC.unbind(),km.unbind(),av.unbind(),_C.unbind()}),ys.on("detach",()=>{ft([ti,...ja],Xt),ft([ti,...ja],wr=>wr.destroy())})})(o,jt.mothership,Dn),b.setup(o,ae.popup.shared,Q),y5(o,ae.popup),G7(o,ae.popup.shared.getSink,ae.popup),(ys=>{const{sidebars:ti}=ys.ui.registry.getAll();ft(Dt(ti),ja=>{const dd=ti[ja],pi=()=>Us(z.from(ys.queryCommandValue("ToggleSidebar")),ja);ys.ui.registry.addToggleButton(ja,{icon:dd.icon,tooltip:dd.tooltip,onAction:ml=>{ys.execCommand("ToggleSidebar",!1,ja),ml.setActive(pi())},onSetup:ml=>{ml.setActive(pi());const zl=()=>ml.setActive(pi());return ys.on("ToggleSidebar",zl),()=>{ys.off("ToggleSidebar",zl)}},context:"any"})})})(o),j8(o,ie,ae.popup.shared),mL(o,ls,cn.sink,{backstage:ae.popup}),QM(o,cn.sink);const ta={targetNode:o.getElement(),height:ke(jt.outerContainer)};return g.render(o,en,Zi,ae.popup,ta)})({popupUi:vt,dialogUi:Ye,mainUi:Re,uiMotherships:y.getUiMotherships()})}}},u4=ve([Yt("lazySink"),Fr("dragBlockClass"),sr("getBounds",Ic),ht("useTabstopAt",Be),ht("firstTabstop",0),ht("eventOrder",{}),Bl("modalBehaviours",[ts]),dm("onExecute"),Av("onEscape")]),T_={sketch:In},M5=ve([Ug({name:"draghandle",overrides:(o,c)=>({behaviours:gn([Xf.config({mode:"mouse",getTarget:u=>rb(u,'[role="dialog"]').getOr(u),blockerClass:o.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(c,null,2)).message),getBounds:o.getDragBounds})])})}),zu({schema:[Yt("dom")],name:"title"}),zu({factory:T_,schema:[Yt("dom")],name:"close"}),zu({factory:T_,schema:[Yt("dom")],name:"body"}),Ug({factory:T_,schema:[Yt("dom")],name:"footer"}),Vg({factory:{sketch:(o,c)=>({...o,dom:c.dom,components:c.components})},schema:[ht("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ht("components",[])],name:"blocker"})]),tu=pm({name:"ModalDialog",configFields:u4(),partFields:M5(),factory:(o,c,u,g)=>{const b=Br(),y=Do("modal-events"),S={...o.eventOrder,[Vm()]:[y].concat(o.eventOrder["alloy.system.attached"]||[])},T=ic();return{uid:o.uid,dom:o.dom,components:c,apis:{show:E=>{b.set(E);const M=o.lazySink(E).getOrDie(),P=g.blocker(),N=M.getSystem().build({...P,components:P.components.concat([Wm(E)]),behaviours:gn([Rs.config({}),Ts("dialog-blocker-events",[au(_o(),()=>{Ub.isBlocked(E)||ts.focusIn(E)})])])});zv(M,N),ts.focusIn(E)},hide:E=>{b.clear(),xo(E.element).each(M=>{E.getSystem().getByDom(M).each(P=>{Zm(P)})})},getBody:E=>pc(E,o,"body"),getFooter:E=>lr(E,o,"footer"),setIdle:E=>{Ub.unblock(E)},setBusy:(E,M)=>{Ub.block(E,M)}},eventOrder:S,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Il(o.modalBehaviours,[_s.config({}),ts.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt,firstTabstop:o.firstTabstop}),Ub.config({getRoot:b.get}),Ts(y,[Cs(E=>{const M=pc(E,o,"title").element,P=(N=>N.dom.textContent)(M);T.os.isMacOS()&&Vn(P)?ws(E.element,"aria-label",P):((N,V)=>{const G=Es(N,"id").fold(()=>{const Q=Do("dialog-label");return ws(V,"id",Q),Q},In);ws(N,"aria-labelledby",G)})(E.element,M)})])])}},apis:{show:(o,c)=>{o.show(c)},hide:(o,c)=>{o.hide(c)},getBody:(o,c)=>o.getBody(c),getFooter:(o,c)=>o.getFooter(c),setBusy:(o,c,u)=>{o.setBusy(c,u)},setIdle:(o,c)=>{o.setIdle(c)}}}),N5=ps([Dc,Nb].concat(Pw)),O0=ff,Lh=[DB("button"),Hf,va("align","end",["start","end"]),fO,Kd,_g("buttonType",["primary","secondary"]),yi("context","mode:design")],ud=[...Lh,Bb],oN=[Gl("type",["submit","cancel","custom"]),...ud],E_=[Gl("type",["menu"]),V1,U2,Hf,ql("items",N5),...Lh],SL=[...Lh,Gl("type",["togglebutton"]),U2,Hf,V1,cl("active",!1)],sN=oa("type",{submit:oN,cancel:oN,custom:oN,menu:E_,togglebutton:SL}),kL=[Dc,Bb,Gl("level",["info","warn","error","success"]),mO,ht("url","")],TL=ps(kL),EL=[Dc,Bb,Kd,DB("button"),Hf,rE,_g("buttonType",["primary","secondary","toolbar"]),fO,yi("context","mode:design")],B5=ps(EL),ak=[Dc,Nb],Up=ak.concat([jy]),rN=ak.concat([BD,Kd,yi("context","mode:design")]),aN=ps(rN),iN=ff,xg=Up.concat([PD("auto"),yi("context","mode:design")]),I5=ps(xg),_L=om([oE,Bb,mO]),F5=Up.concat([yi("storageKey","default"),yi("context","mode:design")]),cN=ps(F5),P5=Fc,lN=ps(Up),L5=Fc,$5=ak.concat([yi("tag","textarea"),yc("scriptId"),yc("scriptUrl"),il("onFocus"),Ji("settings",void 0,$0)]),uN=ak.concat([yi("tag","textarea"),mc("init")]),AL=th(o=>Ai("customeditor.old",rl(uN),o).orThunk(()=>Ai("customeditor.new",rl($5),o))),OL=Fc,jb=Up.concat([yi("context","mode:design")]),$h=ps(jb),d4=Dl(mf),H5=o=>[Dc,wo("columns",Hm),o],__=[Dc,yc("html"),va("presets","presentation",["presentation","document"]),sr("onInit",Ue),cl("stretched",!1)],m4=ps(__),dN=Up.concat([cl("border",!1),cl("sandboxed",!0),cl("streamContent",!1),cl("transparent",!0)]),mN=ps(dN),gN=Fc,fN=ps(ak.concat([_r("height")])),g4=ps([yc("url"),Ws("zoom"),Ws("cachedWidth"),Ws("cachedHeight")]),f4=Up.concat([_r("inputMode"),_r("placeholder"),cl("maximized",!1),Kd,yi("context","mode:design")]),A_=ps(f4),ik=Fc,z5=o=>[Dc,BD,o,va("align","start",["start","center","end"]),_r("for")],V5=[Bb,oE],U5=[Bb,ql("items",jc(0,()=>pN))],pN=gf([ps(V5),ps(U5)]),DL=Up.concat([ql("items",pN),Kd,yi("context","mode:design")]),p4=ps(DL),hN=Fc,RL=Up.concat([bf("items",[Bb,oE]),Xu("size",1),Kd,yi("context","mode:design")]),W5=ps(RL),j5=Fc,bN=Up.concat([cl("constrain",!0),Kd,yi("context","mode:design")]),Z5=ps(bN),Sm=ps([yc("width"),yc("height")]),G5=ak.concat([BD,Xu("min",0),Xu("max",0)]),h4=ps(G5),vN=Hm,q5=[Dc,ql("header",Fc),ql("cells",Dl(Fc))],ML=ps(q5),NL=Up.concat([_r("placeholder"),cl("maximized",!1),Kd,yi("context","mode:design")]),BL=ps(NL),yN=Fc,Zb=[Gl("type",["directory","leaf"]),_B,yc("id"),sm("menu",kF),_r("customStateIcon"),_r("customStateIconTooltip")],b4=ps(Zb),v4=Zb.concat([ql("children",jc(0,()=>Eg("type",{directory:O_,leaf:b4})))]),O_=ps(v4),xN=Eg("type",{directory:O_,leaf:b4}),IL=[Dc,ql("items",xN),il("onLeafAction"),il("onToggleExpand"),vd("defaultExpandedIds",[],Fc),_r("defaultSelectedId")],FL=ps(IL),PL=Up.concat([va("filetype","file",["image","media","file"]),Kd,_r("picker_text"),yi("context","mode:design")]),LL=ps(PL),$L=ps([oE,pO]),ck=o=>Ya("items","items",{tag:"required",process:{}},Dl(th(c=>Ai(`Checking item of ${o}`,lk,c).fold(u=>vr.error(Yu(u)),u=>vr.value(u))))),lk=eh(()=>{return Eg("type",{alertbanner:TL,bar:ps((o=ck("bar"),[Dc,o])),button:B5,checkbox:aN,colorinput:cN,colorpicker:lN,dropzone:$h,grid:ps(H5(ck("grid"))),iframe:mN,input:A_,listbox:p4,selectbox:W5,sizeinput:Z5,slider:h4,textarea:BL,urlinput:LL,customeditor:AL,htmlpanel:m4,imagepreview:fN,collection:I5,label:ps(z5(ck("label"))),table:ML,tree:FL,panel:Y5});var o}),K5=[Dc,ht("classes",[]),ql("items",lk)],Y5=ps(K5),Wp=[DB("tab"),_B,ql("items",lk)],y4=[Dc,bf("tabs",Wp)],HL=ps(y4),zL=ud,X5=sN,J5=ps([yc("title"),wo("body",Eg("type",{panel:Y5,tabpanel:HL})),yi("size","normal"),vd("buttons",[],X5),ht("initialData",{}),sr("onAction",Ue),sr("onChange",Ue),sr("onSubmit",Ue),sr("onClose",Ue),sr("onCancel",Ue),sr("onTabChange",Ue)]),wN=ps([Gl("type",["cancel","custom"]),...zL]),x4=ps([yc("title"),yc("url"),Ws("height"),Ws("width"),Cu("buttons",wN),sr("onAction",Ue),sr("onCancel",Ue),sr("onClose",Ue),sr("onMessage",Ue)]),CC=o=>no(o)?[o].concat(Mt(No(o),CC)):Fn(o)?Mt(o,CC):[],D_=o=>wn(o.type)&&wn(o.name),Q5={checkbox:iN,colorinput:P5,colorpicker:L5,dropzone:d4,input:ik,iframe:gN,imagepreview:g4,selectbox:j5,sizeinput:Sm,slider:vN,listbox:hN,size:Sm,textarea:yN,urlinput:$L,customeditor:OL,collection:_L,togglemenuitem:O0},eP=o=>{const c=(g=>Bt(CC(g),D_))(o),u=Mt(c,g=>(b=>z.from(Q5[b.type]))(g).fold(()=>[],b=>[wo(g.name,b)]));return ps(u)},tP=o=>{var c;return{internalDialog:Zl(Ai("dialog",J5,o)),dataValidator:eP(o),initialData:(c=o.initialData)!==null&&c!==void 0?c:{}}},Jd={open:(o,c)=>{const u=tP(c);return o(u.internalDialog,u.initialData,u.dataValidator)},openUrl:(o,c)=>o(Zl(Ai("dialog",x4,c))),redial:o=>tP(o)};var CN=Object.freeze({__proto__:null,events:(o,c)=>{const u=(g,b)=>{o.updateState.each(y=>{const S=y(g,b);c.set(S)}),o.renderComponents.each(y=>{const S=y(b,c.get());(o.reuseDom?Oy:MT)(g,S)})};return Ja([tn(Pc(),(g,b)=>{const y=b;if(!y.universal){const S=o.channel;Le(y.channels,S)&&u(g,y.data)}}),Cs((g,b)=>{o.initialData.each(y=>{u(g,y)})})])}}),nP=Object.freeze({__proto__:null,getState:(o,c,u)=>u}),oP=[Yt("channel"),Fr("renderComponents"),Fr("updateState"),Fr("initialData"),cl("reuseDom",!0)];const rf=Ra({fields:oP,name:"reflecting",active:CN,apis:nP,state:Object.freeze({__proto__:null,init:()=>{const o=Go(z.none());return{readState:()=>o.get().getOr("none"),get:o.get,set:o.set,clear:()=>o.set(z.none())}}})}),SN=o=>{const c=[],u={};return Hn(o,(g,b)=>{g.fold(()=>{c.push(b)},y=>{u[b]=y})}),c.length>0?vr.error(c):vr.value(u)},sP=(o,c,u,g)=>{const b=ir(hS.sketch(S=>({dom:{tag:"div",classes:["tox-form"].concat(o.classes)},components:Oe(o.items,T=>Zf(S,T,c,u,g))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[b.asSpec()]}],behaviours:gn([ts.config({mode:"acyclic",useTabstopAt:rn(VE)}),(y=b,Qr.config({find:y.getOpt})),Bp(b,{postprocess:S=>SN(S).fold(T=>(console.error(T),{}),In)}),Ts("dialog-body-panel",[tn(_o(),(S,T)=>{S.getSystem().broadcastOn([Qw],{newFocus:z.some(T.event.target)})})])])};var y},kN=Gm({name:"TabButton",configFields:[ht("uid",void 0),Yt("value"),Ya("dom","dom",Lr(()=>({attributes:{role:"tab",id:Do("aria"),"aria-selected":"false"}})),al()),Fr("action"),ht("domModification",{}),Bl("tabButtonBehaviours",[Rs,ts,go]),Yt("view")],factory:(o,c)=>({uid:o.uid,dom:o.dom,components:o.components,events:Cb(o.action),behaviours:Il(o.tabButtonBehaviours,[Rs.config({}),ts.config({mode:"execution",useSpace:!0,useEnter:!0}),go.config({store:{mode:"memory",initialValue:o.value}})]),domModification:o.domModification})}),VL=ve([Yt("tabs"),Yt("dom"),ht("clickToDismiss",!1),Bl("tabbarBehaviours",[xa,ts]),$c(["tabClass","selectedClass"])]),rP=Xl({factory:kN,name:"tabs",unit:"tab",overrides:o=>{const c=(g,b)=>{xa.dehighlight(g,b),Uo(g,Ex(),{tabbar:g,button:b})},u=(g,b)=>{xa.highlight(g,b),Uo(g,rg(),{tabbar:g,button:b})};return{action:g=>{const b=g.getSystem().getByUid(o.uid).getOrDie(),y=xa.isHighlighted(b,g);(y&&o.clickToDismiss?c:y?Ue:u)(b,g)},domModification:{classes:[o.markers.tabClass]}}}}),UL=ve([rP]),hx=pm({name:"Tabbar",configFields:VL(),partFields:UL(),factory:(o,c,u,g)=>({uid:o.uid,dom:o.dom,components:c,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Il(o.tabbarBehaviours,[xa.config({highlightClass:o.markers.selectedClass,itemClass:o.markers.tabClass,onHighlight:(b,y)=>{ws(y.element,"aria-selected","true")},onDehighlight:(b,y)=>{ws(y.element,"aria-selected","false")}}),ts.config({mode:"flow",getInitial:b=>xa.getHighlighted(b).map(y=>y.element),selector:"."+o.markers.tabClass,executeOnMove:!0})])})}),uk=Gm({name:"Tabview",configFields:[Bl("tabviewBehaviours",[_s])],factory:(o,c)=>({uid:o.uid,dom:o.dom,behaviours:Il(o.tabviewBehaviours,[_s.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),aP=ve([ht("selectFirst",!0),Hr("onChangeTab"),Hr("onDismissTab"),ht("tabs",[]),Bl("tabSectionBehaviours",[])]),TN=zu({factory:hx,schema:[Yt("dom"),Ir("markers",[Yt("tabClass"),Yt("selectedClass")])],name:"tabbar",defaults:o=>({tabs:o.tabs})}),EN=zu({factory:uk,name:"tabview"}),WL=ve([TN,EN]),dk=pm({name:"TabSection",configFields:aP(),partFields:WL(),factory:(o,c,u,g)=>{const b=(y,S)=>{lr(y,o,"tabbar").each(T=>{S(T).each(fc)})};return{uid:o.uid,dom:o.dom,components:c,behaviours:tT(o.tabSectionBehaviours),events:Ja(Et([o.selectFirst?[Cs((y,S)=>{b(y,xa.getFirst)})]:[],[tn(rg(),(y,S)=>{(T=>{const E=go.getValue(T);lr(T,o,"tabview").each(M=>{Y(o.tabs,P=>P.value===E).each(P=>{const N=P.view();Es(T.element,"id").each(V=>{ws(M.element,"aria-labelledby",V)}),_s.set(M,N),o.onChangeTab(M,T,N)})})})(S.event.button)}),tn(Ex(),(y,S)=>{const T=S.event.button;o.onDismissTab(y,T)})]])),apis:{getViewItems:y=>lr(y,o,"tabview").map(S=>_s.contents(S)).getOr([]),showTab:(y,S)=>{b(y,T=>{const E=xa.getCandidates(T);return Y(E,M=>go.getValue(M)===S).filter(M=>!xa.isHighlighted(T,M))})}}}},apis:{getViewItems:(o,c)=>o.getViewItems(c),showTab:(o,c,u)=>{o.showTab(c,u)}}}),iP=(o,c)=>{fs(o,"height",c+"px"),fs(o,"flex-basis",c+"px")},R_=(o,c,u)=>{rb(o,'[role="dialog"]').each(g=>{qs(g,'[role="tablist"]').each(b=>{u.get().map(y=>(fs(c,"height","0"),fs(c,"flex-basis","0"),Math.min(y,((S,T,E)=>{const M=Tn(S).dom,P=rb(S,".tox-dialog-wrap").getOr(S);let N;N=Wa(P,"position")==="fixed"?Math.max(M.clientHeight,window.innerHeight):Math.max(M.offsetHeight,M.scrollHeight);const V=oi(T),G=T.dom.offsetLeft>=E.dom.offsetLeft+Je(E)?Math.max(oi(E),V):V,Q=parseInt(Wa(S,"margin-top"),10)||0,pe=parseInt(Wa(S,"margin-bottom"),10)||0;return N-(oi(S)+Q+pe-G)})(g,c,b)))).each(y=>{iP(c,y)})})})},cP=o=>qs(o,'[role="tabpanel"]'),lP="send-data-to-section",_N="send-data-to-view",Fd=(o,c,u,g)=>{const b=Go({}),y=P=>{const N=go.getValue(P),V=SN(N).getOr({}),G=b.get(),Q=ga(G,V);b.set(Q)},S=P=>{const N=b.get();go.setValue(P,N)},T=Go(null),E=Oe(o.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[tc(u.shared.providers.translate(P.title))],view:()=>[hS.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:Oe(P.items,V=>Zf(N,V,c,u,g)),formBehaviours:gn([ts.config({mode:"acyclic",useTabstopAt:rn(VE)}),Ts("TabView.form.events",[Cs(S),ku(y)]),Td.config({channels:zm([{key:lP,value:{onReceive:y}},{key:_N,value:{onReceive:S}}])})])}))]})),M=(P=>{const N=Br();return{extraEvents:[Cs(G=>{const Q=G.element;cP(Q).each(pe=>{fs(pe,"visibility","hidden"),G.getSystem().getByDom(pe).toOptional().each(he=>{const xe=((ae,Ce,ke)=>Oe(ae,(Re,Ye)=>{_s.set(ke,ae[Ye].view());const vt=Ce.dom.getBoundingClientRect();return _s.set(ke,[]),vt.height}))(P,pe,he);(ae=>At(oe(ae,(Ce,ke)=>Ce>ke?-1:Ce<ke?1:0)))(xe).fold(N.clear,N.set)}),R_(Q,pe,N),or(pe,"visibility"),((he,xe)=>{At(he).each(ie=>dk.showTab(xe,ie.value))})(P,G),requestAnimationFrame(()=>{R_(Q,pe,N)})})}),tn(Qu(),G=>{const Q=G.element;cP(Q).each(pe=>{R_(Q,pe,N)})}),tn(VO,(G,Q)=>{const pe=G.element;cP(pe).each(he=>{const xe=h1(La(he));fs(he,"visibility","hidden");const ie=ui(he,"height").map(Ce=>parseInt(Ce,10));or(he,"height"),or(he,"flex-basis");const ae=he.dom.getBoundingClientRect().height;ie.forall(Ce=>ae>Ce)?(N.set(ae),R_(pe,he,N)):ie.each(Ce=>{iP(he,Ce)}),or(he,"visibility"),xe.each(sd)})})],selectFirst:!1}})(E);return dk.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,N,V)=>{const G=go.getValue(N);Uo(P,fR,{name:G,oldName:T.get()}),T.set(G)},tabs:E,components:[dk.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[hx.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:gn([Na.config({})])}),dk.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:M.selectFirst,tabSectionBehaviours:gn([Ts("tabpanel",M.extraEvents),ts.config({mode:"acyclic"}),Qr.config({find:P=>At(dk.getViewItems(P))}),Yw(z.none(),P=>(P.getSystem().broadcastOn([lP],{}),b.get()),(P,N)=>{b.set(N),P.getSystem().broadcastOn([_N],{})})])})},w4=(o,c,u,g,b,y)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...u.map(S=>({id:S})).getOr({}),...b?{"aria-live":"polite"}:{}}},components:[],behaviours:gn([TR(0),rf.config({channel:`${Fp}-${c}`,updateState:(S,T)=>z.some({isTabPanel:()=>T.body.type==="tabpanel"}),renderComponents:S=>{const T=S.body;return T.type==="tabpanel"?[Fd(T,S.initialData,g,y)]:[sP(T,S.initialData,g,y)]},initialData:o})])}),uP=Bf.deviceType.isTouch(),D0=(o,c)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[o,c]}),M_=(o,c)=>tu.parts.close(wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":c.translate("Close")}},action:o,buttonBehaviours:gn([Na.config({})])})),AN=()=>tu.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),bx=(o,c)=>tu.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Pf(`<p>${QT(c.translate(o))}</p>`)}]}]}),ON=o=>tu.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:o}),DN=(o,c)=>[Jg.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:o}),Jg.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:c})],RN=o=>{const c="tox-dialog",u=c+"-wrap",g=u+"__backdrop",b=c+"__disable-scroll";return tu.sketch({lazySink:o.lazySink,onEscape:y=>(o.onEscape(y),z.some(!0)),useTabstopAt:y=>!VE(y),firstTabstop:o.firstTabstop,dom:{tag:"div",classes:[c].concat(o.extraClasses),styles:{position:"relative",...o.extraStyles}},components:[o.header,o.body,...o.footer.toArray()],parts:{blocker:{dom:Pf(`<div class="${u}"></div>`),components:[{dom:{tag:"div",classes:uP?[g,g+"--opaque"]:[g]}}]}},dragBlockClass:u,modalBehaviours:gn([Rs.config({}),Ts("dialog-events",o.dialogEvents.concat([au(_o(),(y,S)=>{Ub.isBlocked(y)||ts.focusIn(y)}),tn(Rg(),(y,S)=>{y.getSystem().broadcastOn([Qw],{newFocus:S.event.newFocus})})])),Ts("scroll-lock",[Cs(()=>{xn(Ti(),b)}),ku(()=>{$o(Ti(),b)})]),...o.extraBehaviours]),eventOrder:{[os()]:["dialog-events"],[Vm()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[xd()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...o.eventOrder}})},dP=o=>wa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":o.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:gn([Na.config({}),Ri.config(o.tooltips.getConfig({tooltipText:o.translate("Close")}))]),components:[_("close",{tag:"span",classes:["tox-icon"]},o.icons)],action:c=>{$s(c,Z1)}}),MN=(o,c,u,g)=>({dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...u.map(b=>({id:b})).getOr({})}},components:[],behaviours:gn([rf.config({channel:`${u3}-${c}`,initialData:o,renderComponents:b=>[tc(g.translate(b.title))]})])}),mP=()=>({dom:Pf('<div class="tox-dialog__draghandle"></div>')}),rv=(o,c,u)=>((g,b,y)=>{const S=tu.parts.title(MN(g,b,z.none(),y)),T=tu.parts.draghandle(mP()),E=tu.parts.close(dP(y)),M=[S].concat(g.draggable?[T]:[]).concat([E]);return Jg.sketch({dom:Pf('<div class="tox-dialog__header"></div>'),components:M})})({title:u.shared.providers.translate(o),draggable:u.dialog.isDraggableModal()},c,u.shared.providers),N_=(o,c,u,g)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":u.translate(o)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${g.getOr(0)}px`,position:"absolute"}},behaviours:c,components:[{dom:Pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),NN=(o,c,u)=>({onClose:()=>u.closeWindow(),onBlock:g=>{const b=qs(o().element,".tox-dialog__header").map(y=>oi(y));tu.setBusy(o(),(y,S)=>N_(g.message,S,c,b))},onUnblock:()=>{tu.setIdle(o())}}),gP="tox-dialog--fullscreen",BN="tox-dialog--width-lg",IN="tox-dialog--width-md",SC=o=>{switch(o){case"large":return z.some(BN);case"medium":return z.some(IN);default:return z.none()}},C4=(o,c)=>{const u=yt(c.element.dom);Ss(u,gP)||(Pr(u,[BN,IN]),SC(o).each(g=>xn(u,g)))},S4=(o,c)=>{const u=yt(o.element.dom),g=gi(u),b=Y(g,y=>y===BN||y===IN).or(SC(c));((y,S)=>{ft(S,T=>{((E,M)=>{te(E)?E.dom.classList.toggle(M):((P,N)=>Le(ye(P),N)?an(P,N):et(P,N))(E,M),Fo(E)})(y,T)})})(u,[gP,...b.toArray()])},B_=(o,c,u)=>Tu(RN({...o,firstTabstop:1,lazySink:u.shared.getSink,extraBehaviours:[Xw({}),...o.extraBehaviours],onEscape:g=>{$s(g,Z1)},dialogEvents:c,eventOrder:{[Pc()]:[rf.name(),Td.name()],[Vm()]:["scroll-lock",rf.name(),"messages","dialog-events","alloy.base.behaviour"],[xd()]:["alloy.base.behaviour","dialog-events","messages",rf.name(),"scroll-lock"]}})),I_=(o,c={})=>Oe(o,u=>u.type==="menu"?(g=>{const b=Oe(g.items,y=>{const S=Gt(c,y.name).getOr(Go(!1));return{...y,storage:S}});return{...g,items:b}})(u):u),FN=o=>pt(o,(c,u)=>u.type==="menu"?pt(u.items,(g,b)=>(g[b.name]=b.storage,g),c):c,{}),PN=(o,c)=>[kv(_o(),jI),o(oS,(u,g,b,y)=>{ab(y.element)&&h1(La(y.element)).each(ey),c.onClose(),g.onClose()}),o(Z1,(u,g,b,y)=>{g.onCancel(u),$s(y,oS)}),tn(sS,(u,g)=>c.onUnblock()),tn(zO,(u,g)=>c.onBlock(g.event))],k4=(o,c,u)=>{const g=(y,S)=>tn(y,(T,E)=>{b(T,(M,P)=>{S(o(),M,E.event,T)})}),b=(y,S)=>{rf.getState(y).get().each(T=>{S(T.internalDialog,y)})};return[...PN(g,c),g(Gw,(y,S)=>S.onSubmit(y)),g(Yd,(y,S,T)=>{S.onChange(y,{name:T.name})}),g(Pb,(y,S,T,E)=>{const M=()=>E.getSystem().isConnected()?ts.focusIn(E):void 0,P=G=>xu(G,"disabled")||Es(G,"aria-disabled").exists(Q=>Q==="true"),N=La(E.element),V=h1(N);S.onAction(y,{name:T.name,value:T.value}),h1(N).fold(M,G=>{P(G)||V.exists(Q=>We(G,Q)&&P(Q))?M():u().toOptional().filter(Q=>!We(Q.element,G)).each(M)})}),g(fR,(y,S,T)=>{S.onTabChange(y,{newTabName:T.name,oldTabName:T.oldName})}),ku(y=>{const S=o();go.setValue(y,S.getData())})]},F_=(o,c)=>{const u=c.map(y=>y.footerButtons).getOr([]),g=tt(u,y=>y.align==="start"),b=(y,S)=>Jg.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:Oe(S,T=>T.memento.asSpec())});return[b("start",g.pass),b("end",g.fail)]},mk=(o,c,u)=>({dom:Pf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:gn([rf.config({channel:`${vS}-${c}`,initialData:o,updateState:(g,b)=>{const y=Oe(b.buttons,S=>{const T=ir(((E,M)=>of(E,E.type,M))(S,u));return{name:S.name,align:S.align,memento:T}});return z.some({lookupByName:S=>((T,E,M)=>Y(E,P=>P.name===M).bind(P=>P.memento.getOpt(T)))(g,y,S),footerButtons:y})},renderComponents:F_})])}),LN=(o,c,u)=>tu.parts.footer(mk(o,c,u)),P_=(o,c)=>{if(o.getRoot().getSystem().isConnected()){const u=Qr.getCurrent(o.getFormWrapper()).getOr(o.getFormWrapper());return hS.getField(u,c).orThunk(()=>o.getFooter().bind(b=>rf.getState(b).get()).bind(b=>b.lookupByName(c)))}return z.none()},$N=(o,c,u)=>{const g=y=>{const S=o.getRoot();S.getSystem().isConnected()&&y(S)},b={getData:()=>{const y=o.getRoot(),S=y.getSystem().isConnected()?o.getFormWrapper():y;return{...go.getValue(S),...ut(u,T=>T.get())}},setData:y=>{g(S=>{const T=b.getData(),E=ga(T,y),M=((N,V)=>{const G=N.getRoot();return rf.getState(G).get().map(Q=>Zl(Ai("data",Q.dataValidator,V))).getOr(V)})(o,E),P=o.getFormWrapper();go.setValue(P,M),Hn(u,(N,V)=>{yo(E,V)&&N.set(E[V])})})},setEnabled:(y,S)=>{P_(o,y).each(S?hs.enable:hs.disable)},focus:y=>{P_(o,y).each(Rs.focus)},block:y=>{if(!wn(y))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");g(S=>{Uo(S,zO,{message:y})})},unblock:()=>{g(y=>{$s(y,sS)})},showTab:y=>{g(S=>{const T=o.getBody();rf.getState(T).get().exists(E=>E.isTabPanel())&&Qr.getCurrent(T).each(E=>{dk.showTab(E,y)})})},redial:y=>{g(S=>{const T=o.getId(),E=c(y),M=I_(E.internalDialog.buttons,u);S.getSystem().broadcastOn([`${l3}-${T}`],E),S.getSystem().broadcastOn([`${u3}-${T}`],E.internalDialog),S.getSystem().broadcastOn([`${Fp}-${T}`],E.internalDialog),S.getSystem().broadcastOn([`${vS}-${T}`],{...E.internalDialog,buttons:M}),b.setData(E.initialData)})},close:()=>{g(y=>{$s(y,oS)})},toggleFullscreen:o.toggleFullscreen};return b},T4=(o,c,u,g=!1,b)=>{const y=Do("dialog"),S=Do("dialog-label"),T=Do("dialog-content"),E=o.internalDialog,M=Go(E.size),P=SC(M.get()).toArray(),N=ir(((ke,Re,Ye,vt)=>Jg.sketch({dom:Pf('<div class="tox-dialog__header"></div>'),components:[MN(ke,Re,z.some(Ye),vt),mP(),dP(vt)],containerBehaviours:gn([Xf.config({mode:"mouse",blockerClass:"blocker",getTarget:en=>gm(en,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:E.title,draggable:!0},y,S,u.shared.providers)),V=ir(((ke,Re,Ye,vt,en,jt)=>w4(ke,Re,z.some(Ye),vt,en,jt))({body:E.body,initialData:E.initialData},y,T,u,g,ke=>P_(ae,ke))),G=I_(E.buttons),Q=FN(G),pe=vn(G.length!==0,ir(((ke,Re,Ye)=>mk(ke,Re,Ye))({buttons:G},y,u))),he=k4(()=>Ce,{onBlock:ke=>{Ub.block(ie,(Re,Ye)=>{const vt=N.getOpt(ie).map(en=>oi(en.element));return N_(ke.message,Ye,u.shared.providers,vt)})},onUnblock:()=>{Ub.unblock(ie)},onClose:()=>c.closeWindow()},u.shared.getSink),xe=ic().os,ie=Tu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...P],attributes:{role:"dialog",...xe.isMacOS()?{"aria-label":E.title}:{"aria-labelledby":S}}},eventOrder:{[Pc()]:[rf.name(),Td.name()],[os()]:["execute-on-form"],[Vm()]:["reflecting","execute-on-form"]},behaviours:gn([ts.config({mode:"cyclic",onEscape:ke=>($s(ke,oS),z.some(!0)),useTabstopAt:ke=>!VE(ke)&&(ac(ke)!=="button"||Ei(ke,"disabled")!=="disabled"),firstTabstop:1}),rf.config({channel:`${l3}-${y}`,updateState:(ke,Re)=>(M.set(Re.internalDialog.size),C4(Re.internalDialog.size,ke),b(),z.some(Re)),initialData:o}),Rs.config({}),Ts("execute-on-form",he.concat([au(_o(),(ke,Re)=>{ts.focusIn(ke)}),tn(Rg(),(ke,Re)=>{ke.getSystem().broadcastOn([Qw],{newFocus:Re.event.newFocus})})])),Ub.config({getRoot:()=>z.some(ie)}),_s.config({}),Xw({})]),components:[N.asSpec(),V.asSpec(),...pe.map(ke=>ke.asSpec()).toArray()]}),ae={getId:ve(y),getRoot:ve(ie),getFooter:()=>pe.map(ke=>ke.get(ie)),getBody:()=>V.get(ie),getFormWrapper:()=>{const ke=V.get(ie);return Qr.getCurrent(ke).getOr(ke)},toggleFullscreen:()=>{S4(ie,M.get())}},Ce=$N(ae,c.redial,Q);return{dialog:ie,instanceApi:Ce}};var kC=tinymce.util.Tools.resolve("tinymce.util.URI");const HN=["insertContent","setContent","execCommand","close","block","unblock"],gk=o=>no(o)&&HN.indexOf(o.mceAction)!==-1,jL=(o,c,u,g)=>{const b=Do("dialog"),y=rv(o.title,b,g),S=(xe=>{const ie={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[WI(z.none(),{dom:{tag:"iframe",attributes:{src:xe.url}},behaviours:gn([Na.config({}),Rs.config({})])})]}],behaviours:gn([ts.config({mode:"acyclic",useTabstopAt:rn(VE)})])};return tu.parts.body(ie)})(o),T=o.buttons.bind(xe=>xe.length===0?z.none():z.some(LN({buttons:xe},b,g))),E=((xe,ie)=>{const ae=(ke,Re)=>tn(ke,(Ye,vt)=>{Ce(Ye,(en,jt)=>{Re(he,en,vt.event,Ye)})}),Ce=(ke,Re)=>{rf.getState(ke).get().each(Ye=>{Re(Ye,ke)})};return[...PN(ae,ie),ae(Pb,(ke,Re,Ye)=>{Re.onAction(ke,{name:Ye.name})})]})(0,NN(()=>pe,g.shared.providers,c)),M={...o.height.fold(()=>({}),xe=>({height:xe+"px","max-height":xe+"px"})),...o.width.fold(()=>({}),xe=>({width:xe+"px","max-width":xe+"px"}))},P=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],N=new kC(o.url,{base_uri:new kC(window.location.href)}),V=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,G=Hd(),Q=[rf.config({channel:`${l3}-${b}`,updateState:(xe,ie)=>z.some(ie),initialData:o}),Ts("messages",[Cs(()=>{const xe=Ed(yt(window),"message",ie=>{if(N.isSameOrigin(new kC(ie.raw.origin))){const ae=ie.raw.data;gk(ae)?((Ce,ke,Re)=>{switch(Re.mceAction){case"insertContent":Ce.insertContent(Re.content);break;case"setContent":Ce.setContent(Re.content);break;case"execCommand":const Ye=!!ss(Re.ui)&&Re.ui;Ce.execCommand(Re.cmd,Ye,Re.value);break;case"close":ke.close();break;case"block":ke.block(Re.message);break;case"unblock":ke.unblock()}})(u,he,ae):(Ce=>!gk(Ce)&&no(Ce)&&yo(Ce,"mceAction"))(ae)&&o.onMessage(he,ae)}});G.set(xe)}),ku(G.clear)]),Td.config({channels:{[Jw]:{onReceive:(xe,ie)=>{qs(xe.element,"iframe").each(ae=>{const Ce=ae.dom.contentWindow;Vn(Ce)&&Ce.postMessage(ie,V)})}}}})],pe=B_({id:b,header:y,body:S,footer:T,extraClasses:P,extraBehaviours:Q,extraStyles:M},E,g),he=(xe=>{const ie=ae=>{xe.getSystem().isConnected()&&ae(xe)};return{block:ae=>{if(!wn(ae))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");ie(Ce=>{Uo(Ce,zO,{message:ae})})},unblock:()=>{ie(ae=>{$s(ae,sS)})},close:()=>{ie(ae=>{$s(ae,oS)})},sendMessage:ae=>{ie(Ce=>{Ce.getSystem().broadcastOn([Jw],ae)})}}})(pe);return{dialog:pe,instanceApi:he}},zN=(o,c)=>Zl(Ai("data",c,o)),VN=o=>Oh(o,".tox-alert-dialog")||Oh(o,".tox-confirm-dialog"),ZL=(o,c,u)=>c&&u?[]:[ec.config({contextual:{lazyContext:()=>z.some(_i(yt(o.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:g=>gg(o,g.element).map(b=>({bounds:eu(b),optScrollEnv:z.some({currentScrollTop:b.element.dom.scrollTop,scrollElmTop:ol(b.element).top})})).getOrThunk(()=>({bounds:Ic(),optScrollEnv:z.none()}))})],UN=o=>{const c=o.editor,u=Ff(c),g=(E=>{const M=E.shared;return{open:(P,N)=>{const V=()=>{tu.hide(he),N()},G=ir(of({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"cancel",E)),Q=AN(),pe=M_(V,M.providers),he=Tu(RN({lazySink:()=>M.getSink(),header:D0(Q,pe),body:bx(P,M.providers),footer:z.some(ON(DN([],[G.asSpec()]))),onEscape:V,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[tn(Z1,V)],eventOrder:{}}));tu.show(he);const xe=G.get(he);Rs.focus(xe)}}})(o.backstages.dialog),b=(E=>{const M=E.shared;return{open:(P,N)=>{const V=ae=>{tu.hide(xe),N(ae)},G=ir(of({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"submit",E)),Q=of({context:"any",name:"no",text:"No",primary:!1,buttonType:z.some("secondary"),align:"end",enabled:!0,icon:z.none()},"cancel",E),pe=AN(),he=M_(()=>V(!1),M.providers),xe=Tu(RN({lazySink:()=>M.getSink(),header:D0(pe,he),body:bx(P,M.providers),footer:z.some(ON(DN([],[Q,G.asSpec()]))),onEscape:()=>V(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[tn(Z1,()=>V(!1)),tn(Gw,()=>V(!0))],eventOrder:{}}));tu.show(xe);const ie=G.get(xe);Rs.focus(ie)}}})(o.backstages.dialog),y=(E,M)=>Jd.open((P,N,V)=>{const G=N,Q=((pe,he,xe)=>{const ie=Do("dialog"),ae=pe.internalDialog,Ce=rv(ae.title,ie,xe),ke=Go(ae.size),Re=SC(ke.get()).toArray(),Ye=((As,pr,fi,Zi)=>{const ca=w4(As,pr,z.none(),fi,!1,Zi);return tu.parts.body(ca)})({body:ae.body,initialData:ae.initialData},ie,xe,As=>P_(jo,As)),vt=I_(ae.buttons),en=FN(vt),jt=vn(vt.length!==0,LN({buttons:vt},ie,xe)),cn=k4(()=>ls,NN(()=>fo,xe.shared.providers,he),xe.shared.getSink),Dn={id:ie,header:Ce,body:Ye,footer:jt,extraClasses:Re,extraBehaviours:[rf.config({channel:`${l3}-${ie}`,updateState:(As,pr)=>(ke.set(pr.internalDialog.size),C4(pr.internalDialog.size,As),z.some(pr)),initialData:pe})],extraStyles:{}},fo=B_(Dn,cn,xe),jo={getId:ve(ie),getRoot:ve(fo),getBody:()=>tu.getBody(fo),getFooter:()=>tu.getFooter(fo),getFormWrapper:()=>{const As=tu.getBody(fo);return Qr.getCurrent(As).getOr(As)},toggleFullscreen:()=>{S4(fo,ke.get())}},ls=$N(jo,he.redial,en);return{dialog:fo,instanceApi:ls}})({dataValidator:V,initialData:G,internalDialog:P},{redial:Jd.redial,closeWindow:()=>{tu.hide(Q.dialog),M(Q.instanceApi)}},o.backstages.dialog);return tu.show(Q.dialog),Q.instanceApi.setData(G),Q.instanceApi},E),S=(E,M,P,N)=>Jd.open((V,G,Q)=>{const pe=zN(G,Q),he=Br(),xe=o.backstages.popup.shared.header.isPositionedAtTop(),ie=()=>he.on(ke=>{Ma.reposition(ke),u&&xe||ec.refresh(ke)}),ae=T4({dataValidator:Q,initialData:pe,internalDialog:V},{redial:Jd.redial,closeWindow:()=>{he.on(Ma.hide),c.off("ResizeEditor",ie),he.clear(),P(ae.instanceApi)}},o.backstages.popup,N.ariaAttrs,ie),Ce=Tu(Ma.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:N.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gn([Ts("window-manager-inline-events",[tn(Fu(),(ke,Re)=>{$s(ae.dialog,Z1)})]),...ZL(c,u,xe)]),isExtraPart:(ke,Re)=>VN(Re)}));return he.set(Ce),Ma.showWithinBounds(Ce,Wm(ae.dialog),{anchor:M},()=>{const ke=c.inline?Ti():yt(c.getContainer()),Re=_i(ke);return z.some(Re)}),u&&xe||(ec.refresh(Ce),c.on("ResizeEditor",ie)),ae.instanceApi.setData(pe),ts.focusIn(ae.dialog),ae.instanceApi},E),T=(E,M,P,N)=>Jd.open((V,G,Q)=>{const pe=zN(G,Q),he=Br(),xe=o.backstages.popup.shared.header.isPositionedAtTop(),ie=()=>he.on(ke=>{Ma.reposition(ke),ec.refresh(ke)}),ae=T4({dataValidator:Q,initialData:pe,internalDialog:V},{redial:Jd.redial,closeWindow:()=>{he.on(Ma.hide),c.off("ResizeEditor ScrollWindow ElementScroll",ie),he.clear(),P(ae.instanceApi)}},o.backstages.popup,N.ariaAttrs,ie),Ce=Tu(Ma.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:N.persistent?{event:"doNotDismissYet"}:{},...xe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gn([Ts("window-manager-inline-events",[tn(Fu(),(ke,Re)=>{$s(ae.dialog,Z1)})]),ec.config({contextual:{lazyContext:()=>z.some(_i(yt(c.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ke=>gg(c,ke.element).map(Re=>({bounds:eu(Re),optScrollEnv:z.some({currentScrollTop:Re.element.dom.scrollTop,scrollElmTop:ol(Re.element).top})})).getOrThunk(()=>({bounds:Ic(),optScrollEnv:z.none()}))})]),isExtraPart:(ke,Re)=>VN(Re)}));return he.set(Ce),Ma.showWithinBounds(Ce,Wm(ae.dialog),{anchor:M},()=>o.backstages.popup.shared.getSink().toOptional().bind(ke=>{const Re=gg(c,ke.element).map(en=>eu(en)).getOr(Ic()),Ye=_i(yt(c.getContentAreaContainer())),vt=Fm(Ye,Re);return z.some(tr(vt.x,vt.y,vt.width,vt.height-15))})),ec.refresh(Ce),c.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",ie),ae.instanceApi.setData(pe),ts.focusIn(ae.dialog),ae.instanceApi},E);return{open:(E,M,P)=>{if(!st(M)){if(M.inline==="toolbar")return S(E,o.backstages.popup.shared.anchors.inlineDialog(),P,M);if(M.inline==="bottom")return T(E,o.backstages.popup.shared.anchors.inlineBottomDialog(),P,M);if(M.inline==="cursor")return S(E,o.backstages.popup.shared.anchors.cursor(),P,M)}return y(E,P)},openUrl:(E,M)=>((P,N)=>Jd.openUrl(V=>{const G=jL(V,{closeWindow:()=>{tu.hide(G.dialog),N(G.instanceApi)}},c,o.backstages.dialog);return tu.show(G.dialog),G.instanceApi},P))(E,M),alert:(E,M)=>{g.open(E,M)},close:E=>{E.close()},confirm:(E,M)=>{b.open(E,M)}}},GL=o=>{gw(o),(c=>{const u=c.options.register,g=y=>{return Vt(y,wn)?{value:(S=y,tR(S.map((T,E)=>E%2==0?"#"+(M=>{return(P=M,YD(P)?z.some({value:kO(P)}):z.none()).orThunk(()=>U1(M).map(gE)).getOrThunk(()=>{const N=document.createElement("canvas");N.height=1,N.width=1;const V=N.getContext("2d");V.clearRect(0,0,N.width,N.height),V.fillStyle="#FFFFFF",V.fillStyle=M,V.fillRect(0,0,1,1);const G=V.getImageData(0,0,1,1).data,Q=G[0],pe=G[1],he=G[2],xe=G[3];return gE(_p(Q,pe,he,xe))});var P})(T).value:T))),valid:!0}:{valid:!1,message:"Must be an array of strings."};var S},b=y=>zn(y)&&y>0?{value:y,valid:!0}:{valid:!1,message:"Must be a positive number."};u("color_map",{processor:g,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),u("color_map_raw",{processor:y=>Vt(y,wn)?{value:tR(y),valid:!0}:{valid:!1,message:"Must be an array of strings."}}),u("color_map_background",{processor:g}),u("color_map_foreground",{processor:g}),u("color_cols",{processor:b,default:oR(c)}),u("color_cols_foreground",{processor:b,default:t8(c,Yy)}),u("color_cols_background",{processor:b,default:t8(c,hE)}),u("custom_colors",{processor:"boolean",default:!0}),u("color_default_foreground",{processor:"string",default:nR}),u("color_default_background",{processor:"string",default:nR})})(o),(c=>{const u=c.options.register;u("contextmenu_avoid_overlap",{processor:"string",default:""}),u("contextmenu_never_use_native",{processor:"boolean",default:!1}),u("contextmenu",{processor:g=>g===!1?{value:[],valid:!0}:wn(g)||Vt(g,wn)?{value:nv(g),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(o)};su.add("silver",o=>{GL(o);let c=()=>Ic();const{dialogs:u,popups:g,renderUI:b}=l4(o,{getPopupSinkBounds:()=>c()});LO(o,g.backstage.shared);const y=UN({editor:o,backstages:{popup:g.backstage,dialog:u.backstage}}),S=Br();return{renderUI:()=>{const T=b();return gg(o,g.getMothership().element).each(E=>{c=()=>eu(E)}),T},getWindowManagerImpl:ve(y),getNotificationManagerImpl:()=>ee(o,{backstage:g.backstage},g.getMothership(),S)}})})();const dY=iq({name:"UEditor",__name:"index",props:{tinymceHtml:String},emits:["changeEditorValue"],setup($n,{emit:Xo}){const mo=qh(""),vo={selector:"#tinymce",height:500,browser_spellcheck:!1,width:"100%",menubar:!1,branding:!1,paste_data_images:!0,language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",content_css:"tinymce/skins/ui/oxide/skin.min.css",skin_url:"/tinymce/skins/ui/oxide",zIndex:9999,paste_as_text:!1,plugins:"lists advlist importcss image code table advlist fullscreen link lists  ",fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",toolbar:["undo redo  | fontselect fontsizeselect fontfamily fontsize fontname bold italic underline strikethrough  h2 h3 |forecolor backcolor | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist |  image | codesample | fullscreen | preview "],image_advtab:!0,file_picker_types:"image",toolbar_mode:"sliding",elementpath:!1,statusbar:!1,setup(wn){wn.on("change",()=>{console.log(wn.getContent(),"text"),mo.value=wn.getContent(),ko("changeEditorValue",wn.getContent())})},images_upload_handler:(wn,no,Tt)=>{}},ko=Xo;return cq(()=>{KK.init({})}),(wn,no)=>(Uc(),qu(ro(uY),{id:"tinymce",modelValue:ro(mo),"onUpdate:modelValue":no[0]||(no[0]=Tt=>U7(mo)?mo.value=Tt:null),init:vo},null,8,["modelValue"]))}}),mY=pK(dY,[["__scopeId","data-v-c47e48b5"]]),yv=$n=>(LK("data-v-5fb94578"),$n=$n(),$K(),$n),gY={style:{display:"flex","justify-content":"space-between"},class:"card-header"},fY=yv(()=>Rc("div",{style:{height:"32px","line-height":"32px"}},"基础设置",-1)),pY={style:{float:"left"}},hY={style:{float:"right",color:"#fb6868","font-size":"13px"}},bY=yv(()=>Rc("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),vY={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},yY=yv(()=>Rc("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),xY=yv(()=>Rc("br",null,null,-1)),wY=yv(()=>Rc("div",{style:{"margin-top":"4px"}}," 若链接后缀不是[uid]，那可能无法校验通过呦~ ",-1)),CY=yv(()=>Rc("div",{class:"card-header"},[Rc("span",null,"其他设置")],-1)),SY={style:{display:"flex","justify-content":"space-between"},class:"card-header"},kY=yv(()=>Rc("span",null,"描述配额",-1)),TY={key:0},EY=yv(()=>Rc("div",{class:"el-upload__text"},"上传",-1)),_Y={class:"el-upload__tip"},AY=["src"],OY=yv(()=>Rc("div",{class:"card-header"},"配置信息",-1)),DY=yv(()=>Rc("div",{class:"card-header"},"安全信息",-1)),RY=yv(()=>Rc("div",null,[vu("小时"),Rc("span",{class:"red"},"准入"),vu("量")],-1)),MY=yv(()=>Rc("div",null,[vu("小时"),Rc("span",{class:"blue"},"完成"),vu("量")],-1)),NY=yv(()=>Rc("div",null,"开启：ip和随机id都可以重复",-1)),BY=yv(()=>Rc("div",null,"关闭：ip和随机id都不可以重复",-1)),IY={class:"right"},FY={class:"dialog-footer"},fK="例：https://www.xxxx.com/8994343?uid=[uid]",PY=iq({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},emits:["sync-project"],setup($n,{expose:Xo,emit:mo}){const vo=BK(),ko=qh(!1),wn=[{label:"美元",value:"USD"},{label:"人民币",value:"CNY"}],no=qh(null),Tt=IK();HK();const Fn=WK(),To=$n,ss=mo,st=qh(To.leftTab),es=cK("validateTopTabs"),Vn=cK("currentProjectTimeline"),kn=qh("basicSettings"),zn=qh(),Vt=qh(),Ue=qh(!To.tabIndex),at="https://saas-api.surveysaas.com/api/project/uploadQiniu";let ue=qh({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(ot,rt){const nn=await Tt.getB2BTypeItemChildren(ot.data.id)||[];rt(nn)}}},editProps:{id:"",countryId:"",visible:!1,row:""}});const qt=lK({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属区域",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],currencyType:[{required:!0,message:"请选择币种",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(ot,rt,nn)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(st.value.uidUrl)||nn(new Error("请输入合法网址")),st.value.uidUrl.includes("[uid]")||nn(new Error("格式不正确,请查看例子")),nn()},trigger:"blur"}],releaseTime:[{validator:(ot,rt,nn)=>{new Date(st.value.releaseTime).getTime()<Date.now()&&nn(new Error("发布时间早于当前时间")),nn()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入项目价",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入0以上的正整数",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],ir:[{required:!0,message:"请输入ir",trigger:"blur"},{pattern:/^(100|[1-9]?[0-9])$/,message:"请输入0到100之间的正整数",trigger:"blur"}],exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}]});st.value.clientId?no.value=1:vo.originalExchangeRate&&(no.value=vo.originalExchangeRate,st.value.exchangeRate=vo.originalExchangeRate),st.value.clientId||vo.currencyType&&(st.value.currencyType=vo.currencyType===1?"USD":"CNY");const re=ot=>{ot.key==="."&&ot.preventDefault()},rn=ot=>ot.getTime()<Date.now()-864e5;function oo(){if(new Date(st.value.releaseTime)*1e3/1e3<Date.now()){const nn=new Date,Zo=nn.getFullYear(),Co=rt(nn.getMonth()+1),Mn=rt(nn.getDate()),No=rt(nn.getHours()),Gt=rt(nn.getMinutes()),yo=rt(nn.getSeconds());st.value.releaseTime=`${Zo}-${Co}-${Mn} ${No}:${Gt}:${yo}`}function rt(nn){return(nn<10?"0":"")+nn}st.value.releaseTime&&Vn(st.value.releaseTime)}const qn=ot=>{const rt=ue.value.basicSettings.customerList.find(nn=>nn.tenantCustomerId===ot);st.value.isProfile=rt.antecedentQuestionnaire===2?1:2},Qe=()=>{st.value.countryIdList=[],ue.value.checked&&ue.value.basicSettings.countryList.map(ot=>{st.value.countryIdList.push(ot.id)})};qh(),VK({locale:UK});const Be=ot=>{st.value.richText=ot};function z(){ss("sync-project")}function $t(){Ue.value=!Ue.value}const Kt=qh(""),B=qh(!1),Jt=qh([]),Le=ot=>{const rt=ot.name.substring(ot.name.lastIndexOf(".")+1);return["jpg","jpeg","png","gif"].indexOf(rt)===-1},Qt=ot=>{const rt=Le(ot);return rt&&H7.warning({message:"只能上传图片文件JPG，JPEG，PNG，GIF",center:!0}),!rt},mn=async(ot,rt)=>{if(st.value.descriptionUrl=rt.map(nn=>nn.name),!Le(ot)){const{status:nn}=await uK.delete({fileName:ot.name});nn===1&&H7.success({message:"删除成功",center:!0})}},Se=(ot,rt)=>{st.value.descriptionUrl.push(ot.data.qiNiuUrl)},Oe=async(ot,rt)=>{H7.warning({message:"最多可上传10个",center:!0})},ft=ot=>{Kt.value=ot.url,B.value=!0},tt=async ot=>{ot.length&&ot.forEach(async rt=>{if(rt){const nn=await uK.detail({fileName:rt});Jt.value.push({name:rt,url:nn.data.fileUrl})}})},Bt=ot=>{st.value.isOnline=ot===2?2:1},$e=ot=>{ot===2&&(st.value.projectQuotaInfoList=[])},pt=()=>{st.value.data.configurationInformation.configurationCountryList=null,ue.value.checked=st.value.countryIdList.length===Tt.country.length},Y=()=>{st.value.data.configurationInformation.projectCategoryList=null,st.value.data.configurationInformation.initialProblem.projectProblemCategoryId="",Jo()},Jo=ot=>{st.value.data.configurationInformation.initialProblem.projectProblemId=null,st.value.data.configurationInformation.ProjectProblemInfoList=null,ot||(st.value.projectQuotaInfoList=[])},Et=async(ot,rt)=>{ot==="configurationInformation"&&!st.value.data.configurationInformation.configurationCountryList&&zn.value.validateField(["countryIdList"],async nn=>{if(nn){Jo(rt||!1);const Zo=await V7.getProjectCountryList({countryIdList:st.value.countryIdList});st.value.data.configurationInformation.configurationCountryList=Zo.data.getProjectCountryListInfoList,Zo.data.getProjectCountryListInfoList.length===1&&(st.value.data.configurationInformation.initialProblem.countryId=Zo.data.getProjectCountryListInfoList[0].countryId),st.value.data.configurationInformation.initialProblem||(st.value.data.configurationInformation.initialProblem=z7(Fn.initialProblem)),st.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=z7(Zo.data.projectQuotaQuestionType)}else kn.value="basicSettings",LV(()=>{setTimeout(()=>{zn.value.scrollToField("countryIdList")}),H7.warning({message:"请先选择所属区域",center:!0})})})},Mt=async()=>{if(st.value.data.configurationInformation.initialProblem.countryId){if(!st.value.data.configurationInformation.projectCategoryList){const ot={countryId:st.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:st.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},rt=await V7.getProjectCategoryList(ot);st.value.data.configurationInformation.projectCategoryList=rt.data.getProjectCategoryInfoList.filter(nn=>nn.status===1)}}else H7.warning({message:"请先选择配置信息下的区域",center:!0})},Pn=async(ot,rt)=>{ot?setTimeout(async()=>{const{projectProblemCategoryName:nn,...Zo}=st.value.data.configurationInformation.projectCategoryList.find(Mn=>Mn.projectProblemCategoryId===ot),Co=await V7.getProjectProblemList(Zo);if(st.value.data.configurationInformation.ProjectProblemInfoList=Co.data.getProjectProblemInfoList.map(Mn=>({...Mn,getProjectAnswerInfoList:Mn.getProjectAnswerInfoList.sort((No,Gt)=>No.answerValue.replace(/^[a-zA-Z]+/,"")-Gt.answerValue.replace(/^[a-zA-Z]+/,""))})),!rt){st.value.projectQuotaInfoList=[];for(let Mn=0;Mn<st.value.data.configurationInformation.ProjectProblemInfoList.length;Mn++){const No=z7(st.value.data.configurationInformation.initialProblem);No.projectProblemId=st.value.data.configurationInformation.ProjectProblemInfoList[Mn].id,No.keyValue=st.value.data.configurationInformation.ProjectProblemInfoList[Mn].question,No.questionType=st.value.data.configurationInformation.ProjectProblemInfoList[Mn].questionType,No.projectProblemCategoryId=ot,st.value.projectQuotaInfoList.push(No)}}}):Jo()},Nt=(ot,rt)=>{let nn=st.value.projectQuotaInfoList[rt].projectAnswerIdList;const Co=st.value.data.configurationInformation.ProjectProblemInfoList[rt].getProjectAnswerInfoList.filter(Mn=>nn.includes(Mn.id));st.value.projectQuotaInfoList[rt].answerValueList=Co.map(Mn=>Mn.anotherName)},ce=async()=>{const ot=await zK.getCustomerList({});ue.value.basicSettings.customerList=ot.data.getTenantCustomerAccordInfoList},De=()=>{Vt.value.showEdit()},Ne=async()=>{await ce(),ue.value.basicSettings.countryList=await Tt.getCountry(),ue.value.basicSettings.B2BTypeList=await Tt.getB2BType()},oe=async()=>{st.value.projectQuotaInfoList.length&&(st.value.data.configurationInformation.initialProblem.countryId=st.value.projectQuotaInfoList[0].countryId,st.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=st.value.projectQuotaInfoList[0].projectQuotaQuestionType,st.value.data.configurationInformation.initialProblem.projectProblemCategoryId=st.value.projectQuotaInfoList[0].projectProblemCategoryId,await Et("configurationInformation",!0),await Mt(),setTimeout(async()=>{await Pn(st.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},ct=(ot,rt)=>({get(){return st.value.projectQuotaInfoList[rt].id===ot?st.value.projectQuotaInfoList[rt].projectAnswerIdList:st.value.projectQuotaInfoList.find(Zo=>Zo.projectProblemId===ot).projectAnswerIdList},set(nn){if(st.value.projectQuotaInfoList[rt].id===ot)st.value.projectQuotaInfoList[rt].projectAnswerIdList=nn;else{const Zo=st.value.projectQuotaInfoList.find(Co=>Co.projectProblemId===ot);Zo.projectAnswerIdList=nn}}}),At=qh(),dt=qh({exchangeRate:null}),An=lK({exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入一个有效的数字，不能小于0，最多保留两位小数",trigger:"blur"}]}),it=()=>{ko.value=!0},Dt=async()=>{await At.value.validate(),st.value.exchangeRate=dt.value.exchangeRate,(await ZK.updateWebConfig(dt.value)).data.flag&&(await vo.getCurrencyType(),no.value=vo.originalExchangeRate,st.value.exchangeRate=vo.originalExchangeRate,st.value.currencyType=vo.currencyType===1?"USD":"CNY",vo.currencyType!==1&&(st.value.exchangeRate=Math.floor(1/vo.originalExchangeRate*100)/100,no.value=st.value.exchangeRate),ko.value=!1)},hn=async ot=>{const rt={beforeCurrency:"",oldCurrency:ot,exchangeRate:""};ot==="USD"?rt.beforeCurrency="CNY":ot==="CNY"&&(rt.beforeCurrency="USD"),rt.exchangeRate=no.value;const nn=await V7.updateExchangeRate(rt);nn.data&&(no.value=Math.floor(nn.data.exchangeRate*100)/100,st.value.exchangeRate=Math.floor(nn.data.exchangeRate*100)/100)};PV(()=>To.leftTab,(ot,rt)=>{st.value=ot},{deep:!0}),cq(async()=>{Jt.value=[],await Ne(),await oe()}),Xo({getUpLoad:tt}),LV(()=>{es(zn.value)});const Hn=()=>{ue.value.editProps.id="",ue.value.editProps.countryId="",ue.value.editProps.row="",ue.value.editProps.visible=!0},ut=async()=>{const ot=await V7.getProjectCountryList({countryIdList:st.value.countryIdList});st.value.data.configurationInformation.configurationCountryList=ot.data.getProjectCountryListInfoList,ot.data.getProjectCountryListInfoList.length===1&&(st.value.data.configurationInformation.initialProblem.countryId=ot.data.getProjectCountryListInfoList[0].countryId),st.value.data.configurationInformation.initialProblem||(st.value.data.configurationInformation.initialProblem=z7(Fn.initialProblem)),st.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=z7(ot.data.projectQuotaQuestionType)};return(ot,rt)=>{const nn=pd("el-button"),Zo=pd("el-switch"),Co=pd("el-input"),Mn=pd("el-form-item"),No=pd("el-col"),Gt=pd("el-option"),yo=pd("el-select"),gr=pd("el-checkbox"),Us=pd("ElOption"),ma=pd("ElSelect"),ns=pd("el-text"),Pa=pd("el-row"),vn=PK,Ls=pd("el-tooltip"),Ba=pd("el-card"),Dr=pd("el-date-picker"),Gi=pd("el-cascader"),hi=pd("el-icon"),Er=pd("el-upload"),bi=pd("el-dialog"),Bi=pd("el-tab-pane"),kr=pd("el-checkbox-group"),Lo=pd("el-input-number"),Aa=pd("el-tabs"),vi=pd("el-form"),nu=pd("ElForm");return Uc(),qu(nu,{"label-width":"100px",rules:ro(qt),ref_key:"formRef",ref:zn,model:ro(st),"label-position":"top"},{default:Yn(()=>[uo(Aa,{modelValue:ro(kn),"onUpdate:modelValue":rt[29]||(rt[29]=yt=>U7(kn)?kn.value=yt:null),onTabChange:Et},{default:Yn(()=>[uo(Bi,{label:"基础设置",name:"basicSettings"},{default:Yn(()=>[uo(Ba,{"body-style":""},{header:Yn(()=>[Rc("div",gY,[fY,Rc("div",null,[To.tabIndex>0?(Uc(),qu(nn,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:z},{default:Yn(()=>[vu(" 同步数据 ")]),_:1})):Gh("",!0),uo(Zo,{modelValue:ro(st).required,"onUpdate:modelValue":rt[0]||(rt[0]=yt=>ro(st).required=yt),"active-value":!0,"inactive-value":!1,class:"ml-2"},null,8,["modelValue"]),vu(" 只看必填 ")])])]),default:Yn(()=>[uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"项目名称",prop:"name"},{default:Yn(()=>[uo(Co,{modelValue:ro(st).name,"onUpdate:modelValue":rt[1]||(rt[1]=yt=>ro(st).name=yt),modelModifiers:{trim:!0},disabled:ro(st).projectType===2,clearable:"",maxlength:50},null,8,["modelValue","disabled"])]),_:1})]),_:1}),ro(st).projectType!==2?(Uc(),qu(No,{key:0,span:6},{default:Yn(()=>[uo(Mn,{label:"项目标识",prop:"projectIdentification"},{default:Yn(()=>[uo(Co,{clearable:"",modelValue:ro(st).projectIdentification,"onUpdate:modelValue":rt[2]||(rt[2]=yt=>ro(st).projectIdentification=yt),modelModifiers:{trim:!0},maxlength:100},null,8,["modelValue"])]),_:1})]),_:1})):Gh("",!0),ro(st).projectType!==2?(Uc(),qu(No,{key:1,span:6},{default:Yn(()=>[uo(Mn,{label:"所属客户",prop:"clientId"},{default:Yn(()=>[uo(yo,{class:"placeholderColor",placeholder:"Select",modelValue:ro(st).clientId,"onUpdate:modelValue":rt[3]||(rt[3]=yt=>ro(st).clientId=yt),disabled:ro(st).projectType===2,clearable:"",onChange:qn},{empty:Yn(()=>[Rc("div",vY,[vu(" 暂无数据 "),uo(nn,{type:"primary",link:"",size:"small",onClick:De},{default:Yn(()=>[vu(" 快捷新增 "),yY]),_:1})])]),default:Yn(()=>[(Uc(!0),oD(CB,null,wB(ro(ue).basicSettings.customerList,yt=>(Uc(),qu(Gt,{key:yt.tenantCustomerId,value:yt.tenantCustomerId,label:yt.customerAccord,disabled:yt.isReveal===1||yt.turnover&&yt.practiceTurnover&&yt.turnover<yt.practiceTurnover},{default:Yn(()=>[Rc("span",pY,sD(yt.customerAccord),1),sq(Rc("span",hY,[sq(Rc("span",null," 营业额超限 ",512),[[rq,yt.practiceTurnover>yt.turnover]]),sq(Rc("span",null," 审核率不合格 ",512),[[rq,yt.rateAudit>yt.practiceRateAudit]])],512),[[rq,yt.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128)),uo(nn,{size:"small",class:"buttonClass",onClick:De},{default:Yn(()=>[vu(" 快捷新增 "),bY]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):Gh("",!0),uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"所属区域",prop:"countryIdList"},{default:Yn(()=>[uo(ma,{class:"placeholderColor",modelValue:ro(st).countryIdList,"onUpdate:modelValue":rt[5]||(rt[5]=yt=>ro(st).countryIdList=yt),disabled:ro(st).projectType===2,placeholder:"区域",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:pt},{header:Yn(()=>[uo(gr,{modelValue:ro(ue).checked,"onUpdate:modelValue":rt[4]||(rt[4]=yt=>ro(ue).checked=yt),onChange:Qe,style:{display:"flex",height:"unset"}},{default:Yn(()=>[vu("全球")]),_:1},8,["modelValue"])]),default:Yn(()=>[(Uc(!0),oD(CB,null,wB(ro(ue).basicSettings.countryList,yt=>(Uc(),qu(Us,{label:yt.chineseName,value:yt.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"币种",prop:"currencyType"},{default:Yn(()=>[ro(vo).originalExchangeRate?(Uc(),qu(yo,{key:1,modelValue:ro(st).currencyType,"onUpdate:modelValue":rt[6]||(rt[6]=yt=>ro(st).currencyType=yt),disabled:!!ro(st).projectId,"value-key":"",style:{width:"22.4375rem"},placeholder:"请选择币种",filterable:"",onChange:hn},{default:Yn(()=>[(Uc(),oD(CB,null,wB(wn,yt=>uo(Gt,{key:yt.value,label:yt.label,value:yt.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])):(Uc(),qu(nn,{key:0,type:"primary",link:"",onClick:it},{default:Yn(()=>[vu("未设置汇率，点击设置>>")]),_:1}))]),_:1})]),_:1}),uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"汇率",prop:""},{default:Yn(()=>[ro(no)!==null?(Uc(),qu(ns,{key:0},{default:Yn(()=>[vu(sD(ro(st).currencyType==="USD"?"1美元":"1人民币")+" = "+sD(ro(st).exchangeRate?ro(st).exchangeRate:ro(no))+sD(ro(st).currencyType==="USD"?"人民币":"美元"),1)]),_:1})):Gh("",!0)]),_:1})]),_:1})]),_:1}),uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"项目价",prop:"doMoneyPrice"},{default:Yn(()=>[uo(Co,{style:{height:"2rem"},modelValue:ro(st).doMoneyPrice,"onUpdate:modelValue":rt[7]||(rt[7]=yt=>ro(st).doMoneyPrice=yt),"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"配额",prop:"num"},{default:Yn(()=>[uo(Co,{style:{height:"2rem"},modelValue:ro(st).num,"onUpdate:modelValue":rt[8]||(rt[8]=yt=>ro(st).num=yt),size:"large",onKeydown:re},null,8,["modelValue"])]),_:1})]),_:1}),uo(No,{style:{position:"relative"},span:6},{default:Yn(()=>[uo(Mn,{prop:"minimumDuration"},{label:Yn(()=>[Rc("div",null,[vu(" 最小分长"),uo(Ls,{class:"tooltips",content:"该问卷最少要做多少分钟才被识别为合格",placement:"top"},{default:Yn(()=>[uo(vn,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:Yn(()=>[uo(Co,{style:{height:"2rem",width:"100%"},modelValue:ro(st).minimumDuration,"onUpdate:modelValue":rt[9]||(rt[9]=yt=>ro(st).minimumDuration=yt),modelModifiers:{number:!0},min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:re},{append:Yn(()=>[vu(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"IR",prop:"ir"},{default:Yn(()=>[uo(Co,{modelValue:ro(st).ir,"onUpdate:modelValue":rt[10]||(rt[10]=yt=>ro(st).ir=yt)},{append:Yn(()=>[vu(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:12},{default:Yn(()=>[uo(Mn,{prop:"uidUrl"},{label:Yn(()=>[Rc("div",null,[vu(" URL"),uo(Ls,{class:"tooltips",placement:"top"},{content:Yn(()=>[Rc("div",null,[Rc("div",null,[vu("请参考如下链接"),xY,vu(sD(fK))]),wY])]),default:Yn(()=>[uo(vn,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:Yn(()=>[uo(Co,{clearable:"",modelValue:ro(st).uidUrl,"onUpdate:modelValue":rt[11]||(rt[11]=yt=>ro(st).uidUrl=yt),modelModifiers:{trim:!0},disabled:ro(st).projectType===2},null,8,["modelValue","disabled"]),uo(ns,{class:"mx-1"},{default:Yn(()=>[vu(sD(fK))]),_:1})]),_:1})]),_:1}),ro(st).mutualExclusion===1&&!ro(st).required?(Uc(),qu(No,{key:0,span:12},{default:Yn(()=>[uo(Mn,{label:"互斥ID"},{default:Yn(()=>[uo(Co,{clearable:"",modelValue:ro(st).mutualExclusionId,"onUpdate:modelValue":rt[12]||(rt[12]=yt=>ro(st).mutualExclusionId=yt),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})):Gh("",!0)]),_:1})]),_:1}),ro(st).required?Gh("",!0):(Uc(),qu(Ba,{key:0},{header:Yn(()=>[CY]),default:Yn(()=>[uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:5},{default:Yn(()=>[uo(Mn,{label:"定时发布",class:"flex"},{default:Yn(()=>[uo(Zo,{"active-value":2,"inactive-value":1,modelValue:ro(st).isTimeReleases,"onUpdate:modelValue":rt[13]||(rt[13]=yt=>ro(st).isTimeReleases=yt),disabled:ro(st).projectType===2,onChange:Bt},null,8,["modelValue","disabled"])]),_:1})]),_:1}),uo(No,{span:5},{default:Yn(()=>[uo(Mn,{label:"B2B",class:"flex"},{default:Yn(()=>[uo(Zo,{"active-value":2,"inactive-value":1,modelValue:ro(st).isB2b,"onUpdate:modelValue":rt[14]||(rt[14]=yt=>ro(st).isB2b=yt),disabled:ro(st).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1}),uo(No,{span:5},{default:Yn(()=>[uo(Mn,{label:"在线",class:"flex"},{default:Yn(()=>[uo(Zo,{"active-value":1,"inactive-value":2,disabled:ro(st).isTimeReleases===2||ro(st).projectType===2,modelValue:ro(st).isOnline,"onUpdate:modelValue":rt[15]||(rt[15]=yt=>ro(st).isOnline=yt)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),uo(No,{span:5},{default:Yn(()=>[uo(Mn,{label:"前置问卷",class:"flex"},{default:Yn(()=>[uo(Zo,{"active-value":1,"inactive-value":2,modelValue:ro(st).isProfile,"onUpdate:modelValue":rt[16]||(rt[16]=yt=>ro(st).isProfile=yt),disabled:ro(st).projectType===2,onChange:$e},null,8,["modelValue","disabled"])]),_:1})]),_:1}),uo(No,{span:4},{default:Yn(()=>[uo(Mn,{label:"置顶",class:"flex"},{default:Yn(()=>[uo(Zo,{"active-value":1,"inactive-value":2,modelValue:ro(st).isPinned,"onUpdate:modelValue":rt[17]||(rt[17]=yt=>ro(st).isPinned=yt),disabled:ro(st).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),uo(Pa,{gutter:20},{default:Yn(()=>[ro(st).isTimeReleases===2?(Uc(),qu(No,{key:0,span:5},{default:Yn(()=>[uo(Mn,{label:"发布时间",prop:"releaseTime"},{default:Yn(()=>[uo(Dr,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:ro(st).releaseTime,"onUpdate:modelValue":rt[18]||(rt[18]=yt=>ro(st).releaseTime=yt),placeholder:"请选择时间",disabledDate:rn,onChange:oo},null,8,["modelValue"])]),_:1})]),_:1})):Gh("",!0),ro(st).isB2b===2&&ro(st).projectType!==2?(Uc(),qu(No,{key:1,span:5},{default:Yn(()=>[uo(Mn,{label:"项目类型"},{default:Yn(()=>[uo(Gi,{"show-all-levels":!1,modelValue:ro(st).projectType,"onUpdate:modelValue":rt[19]||(rt[19]=yt=>ro(st).projectType=yt),props:ro(ue).basicSettings.B2BTypeProps,options:ro(ue).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):Gh("",!0)]),_:1}),uo(Pa,null,{default:Yn(()=>[uo(No,{span:24},{default:Yn(()=>[uo(Mn,{label:"备注"},{default:Yn(()=>[uo(Co,{maxlength:"200","show-word-limit":"",type:"textarea",rows:5,modelValue:ro(st).remark,"onUpdate:modelValue":rt[20]||(rt[20]=yt=>ro(st).remark=yt)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),ro(st).required?Gh("",!0):(Uc(),qu(Ba,{key:1},{header:Yn(()=>[Rc("div",SY,[kY,uo(nn,{type:"primary",link:"",size:"default",onClick:$t},{default:Yn(()=>[vu(sD(ro(Ue)?"收起":"展开"),1)]),_:1})])]),default:Yn(()=>[ro(Ue)?(Uc(),oD("div",TY,[uo(Mn,{label:"上传图片"},{default:Yn(()=>[uo(Er,{"file-list":ro(Jt),"onUpdate:fileList":rt[21]||(rt[21]=yt=>U7(Jt)?Jt.value=yt:null),action:at,"list-type":"picture-card",drag:!0,limit:10,accept:".png, .jpg, .jpeg, .gif","before-upload":Qt,"on-preview":ft,"on-remove":mn,"on-success":Se,"on-exceed":Oe},{tip:Yn(()=>[Rc("div",_Y,[uo(ns,{type:"primary",size:"small"},{default:Yn(()=>[vu(" 支持上传JPG/JPEG/PNG图片，小于10MB ")]),_:1})])]),default:Yn(()=>[uo(hi,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:Yn(()=>[uo(ro(FK))]),_:1}),EY]),_:1},8,["file-list"]),uo(bi,{modelValue:ro(B),"onUpdate:modelValue":rt[22]||(rt[22]=yt=>U7(B)?B.value=yt:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:Yn(()=>[Rc("img",{"w-full":"",src:ro(Kt),alt:"Preview Image"},null,8,AY)]),_:1},8,["modelValue"])]),_:1}),uo(Pa,null,{default:Yn(()=>[uo(No,{span:24},{default:Yn(()=>[uo(Mn,{label:"项目描述"},{default:Yn(()=>[uo(mY,{style:{width:"100%"},modelValue:ro(st).richText,"onUpdate:modelValue":rt[23]||(rt[23]=yt=>ro(st).richText=yt),onChangeEditorValue:Be},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])):Gh("",!0)]),_:1}))]),_:1}),ro(st).isProfile===1&&!ro(st).required&&ro(st).projectType!==2?(Uc(),qu(Bi,{key:0,label:"配置信息",name:"configurationInformation"},{default:Yn(()=>[ro(st).data?(Uc(),qu(Ba,{key:0},{header:Yn(()=>[OY]),default:Yn(()=>[uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:6},{default:Yn(()=>[uo(Mn,{label:"选择区域"},{default:Yn(()=>[uo(yo,{modelValue:ro(st).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":rt[24]||(rt[24]=yt=>ro(st).data.configurationInformation.initialProblem.countryId=yt),filterable:"",clearable:"",placeholder:"Select",disabled:ro(st).projectType===2,onChange:Y},{empty:Yn(()=>[Rc("div",null,[uo(nn,{type:"primary",link:"",class:"buttonClass",size:"small",onClick:Hn},{default:Yn(()=>[vu(" 快捷新增 "),uo(vn,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"0.125rem",margin:"0 0.125rem"}})]),_:1})])]),default:Yn(()=>[(Uc(!0),oD(CB,null,wB(ro(st).data.configurationInformation.configurationCountryList,yt=>(Uc(),qu(Us,{label:yt.countryName,value:yt.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),ro(st).data.configurationInformation.initialProblem.countryId?(Uc(),qu(No,{key:0,span:6},{default:Yn(()=>[uo(Mn,{label:"问卷名称"},{default:Yn(()=>[uo(yo,{modelValue:ro(st).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":rt[25]||(rt[25]=yt=>ro(st).data.configurationInformation.initialProblem.projectProblemCategoryId=yt),clearable:"",placeholder:"Select",disabled:ro(st).projectType===2,onFocus:Mt,onChange:Pn},{default:Yn(()=>[(Uc(!0),oD(CB,null,wB(ro(st).data.configurationInformation.projectCategoryList,yt=>(Uc(),qu(Gt,{key:yt.projectProblemCategoryId,label:yt.projectProblemCategoryName,value:yt.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):Gh("",!0)]),_:1}),ro(st).data.configurationInformation.ProjectProblemInfoList&&ro(st).data.configurationInformation.ProjectProblemInfoList.length&&ro(st).projectQuotaInfoList.length?(Uc(!0),oD(CB,{key:0},wB(ro(st).data.configurationInformation.ProjectProblemInfoList,(yt,Xr)=>(Uc(),qu(Pa,{class:"allocation",gutter:20},{default:Yn(()=>[uo(No,{span:20},{default:Yn(()=>[vu(" 问题："+sD(yt.question),1)]),_:2},1024),uo(No,{span:20},{default:Yn(()=>[uo(Mn,null,{default:Yn(()=>[yt.questionType===1?(Uc(),qu(Co,{key:0,disabled:"",placeholder:"输入框无法设置"})):(Uc(),qu(kr,{key:1,modelValue:ct(yt.id,Xr).get(),"onUpdate:modelValue":Oa=>ct(yt.id,Xr).set(Oa),onChange:Oa=>Nt(3,Xr)},{default:Yn(()=>[(Uc(!0),oD(CB,null,wB(yt.getProjectAnswerInfoList,Oa=>(Uc(),qu(gr,{label:Oa.anotherName,value:Oa.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):Gh("",!0)]),_:1})):Gh("",!0)]),_:1})):Gh("",!0),ro(st).required?Gh("",!0):(Uc(),qu(Bi,{key:1,label:"安全信息",name:"securityInformation"},{default:Yn(()=>[uo(Ba,null,{header:Yn(()=>[DY]),default:Yn(()=>[uo(Pa,{gutter:20},{default:Yn(()=>[uo(No,{span:6},{default:Yn(()=>[uo(Mn,null,{label:Yn(()=>[RY]),default:Yn(()=>[uo(Lo,{style:{height:"2rem"},modelValue:ro(st).preNum,"onUpdate:modelValue":rt[26]||(rt[26]=yt=>ro(st).preNum=yt),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:re},null,8,["modelValue"])]),_:1})]),_:1}),uo(No,{span:1}),uo(No,{span:6},{default:Yn(()=>[uo(Mn,null,{label:Yn(()=>[MY]),default:Yn(()=>[uo(Lo,{style:{height:"2rem"},modelValue:ro(st).limitedQuantity,"onUpdate:modelValue":rt[27]||(rt[27]=yt=>ro(st).limitedQuantity=yt),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:re},null,8,["modelValue"])]),_:1})]),_:1}),uo(No,{span:1}),uo(No,{span:4,class:"flex"},{default:Yn(()=>[uo(Mn,{label:"",class:"flex m-0"},{label:Yn(()=>[Rc("div",null,[vu(" 允许重复参与"),uo(Ls,{class:"tooltips",placement:"top"},{content:Yn(()=>[NY,BY]),default:Yn(()=>[uo(vn,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:Yn(()=>[uo(Zo,{modelValue:ro(st).ipDifferenceDetection,"onUpdate:modelValue":rt[28]||(rt[28]=yt=>ro(st).ipDifferenceDetection=yt),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"]),uo(bi,{modelValue:ro(ko),"onUpdate:modelValue":rt[32]||(rt[32]=yt=>U7(ko)?ko.value=yt:null),title:"设置汇率",width:"500"},{footer:Yn(()=>[Rc("div",FY,[uo(nn,{type:"primary",onClick:Dt},{default:Yn(()=>[vu(" 确认 ")]),_:1}),uo(nn,{onClick:rt[31]||(rt[31]=yt=>ko.value=!1)},{default:Yn(()=>[vu(" 关闭 ")]),_:1})])]),default:Yn(()=>[uo(vi,{model:ro(dt),ref_key:"exchangeRateRef",ref:At,rules:ro(An),"label-width":"90px",inline:!1},{default:Yn(()=>[uo(Mn,{label:"美元汇率",prop:"exchangeRate"},{default:Yn(()=>[Rc("div",IY,[uo(Co,{modelValue:ro(dt).exchangeRate,"onUpdate:modelValue":rt[30]||(rt[30]=yt=>ro(dt).exchangeRate=yt),placeholder:"请输入数值",clearable:""},{prefix:Yn(()=>[uo(ns,{style:{color:"#333"}},{default:Yn(()=>[vu(" 1 美元 (USD)     = ")]),_:1})]),suffix:Yn(()=>[uo(ns,{style:{color:"#333"}},{default:Yn(()=>[vu(" 人民币 (CNY) ")]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),uo(jK,{ref_key:"editRef",ref:Vt,onFetchData:ce},null,512),ro(ue).editProps.visible?(Uc(),qu(GK,{key:0,id:ro(ue).editProps.id,countryId:ro(ue).editProps.countryId,modelValue:ro(ue).editProps.visible,"onUpdate:modelValue":rt[33]||(rt[33]=yt=>ro(ue).editProps.visible=yt),row:ro(ue).editProps.row,onSuccess:ut},null,8,["id","countryId","modelValue","row"])):Gh("",!0)]),_:1},8,["rules","model"])}}}),uX=pK(PY,[["__scopeId","data-v-5fb94578"]]);export{uX as default};
