
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,ae as P,az as F,aL as O,r as b,s as j,F as L,o as G,a3 as g,b as d,j as r,g as p,w as c,f as n,i as e,t as l,B as _,a8 as D,O as $,P as N,k as y,c as v,aM as S,a4 as Q,aG as J,Q as U,ao as K,z as W,an as z}from"./index-BnVk3aZr.js";import X from"./notification-news-CwiJaUIN.js";import Y from"./notification-cooperation-BuCrTccx.js";import"./department-DUOSvPzD.js";import"./index-BHROzPme.js";import"./index-DhGFn38n.js";import"./index-DhY7K8iM.js";import"./clipboard-Dol0gqP4.js";import"./index-Cdyehhba.js";import"./configuration_site_setting-CvH6dB5w.js";const Z={class:"absolute-container"},ee={class:"flex-c"},te={class:"left"},ae={class:"custom-tab-label"},se={class:"buttons"},oe=["onClick"],ne={class:"info"},ie={class:"time"},le={key:0,class:"new"},de={class:"auditType"},re={class:"time"},ce={class:"data"},ue={class:"custom-tab-label"},fe={class:"buttons"},pe=["onClick"],_e={class:"info"},ye={class:"time"},me={key:0,class:"new"},ve={class:"auditType"},be={class:"time"},ge={class:"data"},he={key:0,class:"right"},M=H({name:"personalNotification",__name:"notification",setup(ke){const{t:u}=P();F();const s=O(),h=b(),k=b(),f=j(),t=b({tabs:"",selectId:"",ReadAlready:1});function w(a){t.value.selectId=a.id,U(()=>{var i;(i=k.value)==null||i.showEdit(a)})}function A(a){t.value.selectId=a.id,U(()=>{h.value.showEdit(a)})}const B=async()=>{t.value.selectId="",t.value.ReadAlready=1,t.value.tabs==="news"?await s.getUnreadMessage():t.value.tabs==="cooperation"&&await s.getUnreadTodo()};async function R(){t.value.selectId=""}const m=async a=>{t.value.ReadAlready=a,t.value.tabs==="news"?await s.getUnreadMessage():t.value.tabs==="cooperation"&&await s.getUnreadTodo()},C=L(()=>t.value.ReadAlready===1?s.messageList.filter(a=>a.isReadAlready===t.value.ReadAlready):s.readAlreadyMessageList.filter(a=>a.isReadAlready!==1)),T=L(()=>t.value.ReadAlready===1?s.todoList.filter(a=>a.auditStatus===1):s.readAlreadyList.filter(a=>a.auditStatus!==1));return G(()=>{if(s.isItConnected(),t.value.tabs=f.query.type==2?"cooperation":"news",f.query.id){if(Number(f.query.type)===1){const a=s.messageList.find(i=>i.id===f.query.id);a&&w(a)}else if(Number(f.query.type)===2){const a=s.todoList.find(i=>i.id===f.query.id);a&&A(a)}}}),(a,i)=>{const I=g("el-empty"),x=g("el-tab-pane"),q=g("el-tabs"),E=K;return d(),r("div",Z,[p(E,null,{default:c(()=>[n("div",ee,[n("div",te,[p(q,{modelValue:e(t).tabs,"onUpdate:modelValue":i[4]||(i[4]=o=>e(t).tabs=o),onTabChange:B},{default:c(()=>[p(x,{label:"消息",name:"news"},{label:c(()=>[n("span",ae,l(e(u)("notification.message")),1)]),default:c(()=>[n("div",se,[n("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:i[0]||(i[0]=o=>m(1)),style:{height:"28px","font-size":"14px"}},l(e(u)("notification.unread"))+l(e(s).message<100?`(${e(s).message})`:"99+"),3),n("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:i[1]||(i[1]=o=>m(2)),style:{height:"28px","font-size":"14px"}},l(e(u)("notification.read"))+l(e(s).readAlreadyMessageUnread<100?`(${e(s).readAlreadyMessageUnread})`:"99+"),3)]),p(e(D),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:c(()=>[e(C).length?(d(!0),r($,{key:0},N(e(C),o=>(d(),r("div",{class:_({item:"item",select:o.id===e(t).selectId}),onClick:V=>w(o)},[n("div",ne,[n("div",ie,[o.isReadAlready===1?(d(),r("span",le)):y("",!0),n("span",de,l(e(s).auditTypeList[o.auditType-1]||""),1),n("span",re,l(o.createTime),1)]),n("div",ce,l(o.messageContent),1)])],10,oe))),256)):(d(),v(I,{key:1,image:e(S),"image-size":300},null,8,["image"]))]),_:1})]),_:1}),p(x,{label:"代办",name:"cooperation"},{label:c(()=>[n("span",ue,l(e(u)("notification.waitToBeDone")),1)]),default:c(()=>[n("div",fe,[n("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:i[2]||(i[2]=o=>m(1)),style:{height:"28px","font-size":"14px"}},l(e(u)("notification.waitToBeDone"))+l(e(s).todo<100?`(${e(s).todo})`:"99+"),3),n("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:i[3]||(i[3]=o=>m(2)),style:{height:"28px","font-size":"14px"}},l(e(u)("notification.haveDone"))+l(e(s).readAlreadyUnread<100?`(${e(s).readAlreadyUnread})`:"99+"),3)]),p(e(D),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:c(()=>[e(T).length?(d(!0),r($,{key:0},N(e(T),o=>(d(),r("div",{class:_({item:"item",select:o.id===e(t).selectId}),onClick:V=>A(o)},[n("div",_e,[n("div",ye,[o.isReadAlready===1?(d(),r("span",me)):y("",!0),n("span",ve,l(e(s).auditTypeList[o.auditType-1]||""),1),n("span",be,l(o.createTime),1)]),n("div",ge," 您好，我是"+l(o.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(o.phoneOrEmail)+"。 ",1)])],10,pe))),256)):(d(),v(I,{key:1,image:e(S),"image-size":300},null,8,["image"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(t).selectId?Q((d(),r("div",he,[e(t).tabs==="news"?(d(),v(X,{key:0,ref_key:"newsRef",ref:k,onDelSelectId:R},null,512)):y("",!0),e(t).tabs==="cooperation"?(d(),v(Y,{key:1,ref_key:"cooperationRef",ref:h,onDelSelectId:R},null,512)):y("",!0)],512)),[[J,e(t).selectId]]):y("",!0)])]),_:1})])}}});typeof z=="function"&&z(M);const Ne=W(M,[["__scopeId","data-v-1038b6eb"]]);export{Ne as default};
