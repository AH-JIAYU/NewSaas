
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as V}from"./index-DP8IuCLz.js";import{a as w}from"./user_cooperation-D5MkEgaF.js";import{d as x,r as f,o as I,a3 as h,b as n,j as l,g as r,w as m,f as u,h as c,i as a,t as i,O as y,P as b,k as v,l as D,z as C}from"./index-D3JQ81m5.js";import"./index-1FaGR_2D.js";import"./clipboard-BjMDEG42.js";const z={style:{height:"21.875rem",overflow:"auto"}},E={key:0,class:"idList"},j={key:1,class:"idList"},B={key:2,class:"idList"},A={style:{flex:"auto"}},q=x({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(F,{expose:N,emit:H}){const L=f(!1),_=f(!1);f();const e=f({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),S=async p=>{const{data:o}=await w.getTenantSupplierMemberNameInfo(p);return o},T=async p=>{e.value.supplierList=[],e.value.memberList=[],e.value.tenantList=[];for(let o of p.type){const d=await S({projectId:p.projectId,type:o});e.value.results.push({type:o,getTenantSupplierMemberNameList:d.getTenantSupplierMemberNameList}),e.value.results.forEach(s=>{s.type==2&&(e.value.supplierList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[]),s.type==3&&(e.value.memberList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[]),s.type==4&&(e.value.tenantList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[])})}};async function k(p){try{L.value=!0,T(p),L.value=!1,_.value=!0}catch{}finally{L.value=!1}}function g(){_.value=!1}return I(async()=>{}),N({showEdit:k}),(p,o)=>{const d=h("el-button"),s=V,M=h("el-dialog");return n(),l("div",null,[r(M,{modelValue:a(_),"onUpdate:modelValue":o[0]||(o[0]=t=>D(_)?_.value=t:null),title:"分配",width:"700","before-close":g},{footer:m(()=>[u("div",A,[r(d,{onClick:g},{default:m(()=>[c(" 关闭 ")]),_:1})])]),default:m(()=>[u("div",z,[a(e).supplierList.length!=0?(n(),l("div",E,[r(d,{size:"small",type:"danger"},{default:m(()=>[c("供应商 "+i(a(e).supplierList>1?a(e).supplierList:""),1)]),_:1}),(n(!0),l(y,null,b(a(e).supplierList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):v("",!0),a(e).memberList.length!=0?(n(),l("div",j,[r(d,{size:"small",type:"success"},{default:m(()=>[c("内部站 "+i(a(e).memberList>1?a(e).memberList:""),1)]),_:1}),(n(!0),l(y,null,b(a(e).memberList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):v("",!0),a(e).tenantList.length!=0?(n(),l("div",B,[r(d,{size:"small",type:"primary"},{default:m(()=>[c("合作商 "+i(a(e).tenantList>1?a(e).tenantList:""),1)]),_:1}),(n(!0),l(y,null,b(a(e).tenantList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):v("",!0)])]),_:1},8,["modelValue"])])}}}),J=C(q,[["__scopeId","data-v-cec51b18"]]);export{J as default};
