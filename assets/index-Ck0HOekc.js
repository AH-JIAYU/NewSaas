
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as I,T as M}from"./index-B0K2KK6O.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-Cob8vLkA.js";import{d as S,r as s,a3 as z,a2 as E,a as m,o as d,b,f as p,w as c,g as _,F as $,n as F,e as T,l as y,I as P,R as U,j as q,an as g,_ as G}from"./index-fuY6ctZR.js";import"./index-C8cHQ_M6.js";import"./index-DFJLODe7.js";import"./apiLoading-3YAmOqA8.js";import"./otherFunctions_basicDictionary-D3X8j4Bd.js";import"./basicDictionary-DrcJ1yKq.js";import"./user_customer-DDO7eHSM.js";import"./user_customer-CTTJ1hJ1.js";const H={style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},J=S({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array},emits:["validate"],setup(h,{expose:x,emit:k}){const j=I(),n=h,C=k,V=s(),A=s(),e=s(n.leftTabsData),L=s(n.validateTopTabs);e.value.forEach((t,a)=>{const i=s(null);z(`formRef${a}`,i)});const f=s(0),l=s(0);function R(){const t=g(e.value[0]);e.value.splice(l.value,1,t)}function D(){l.value=++f.value;const t=g(j.initialTopTabsData);e.value.push(t)}function w(t){e.value.splice(t,1),L.value.splice(t,1),l.value>=e.value.length&&(l.value=Math.max(0,e.value.length-1),f.value=Math.max(0,e.value.length-1))}function B(t){e.value.forEach(a=>{a.client=t}),V.value=t}return E(()=>l.value,(t,a)=>{n.validateAll.reduce((u,v,o)=>(v==="rejected"&&u.push(o),u),[]).includes(a)&&C("validate")}),x({activeLeftTab:l}),(t,a)=>{const i=m("el-button"),u=m("el-tab-pane"),v=m("el-tabs");return d(),b("div",null,[p(i,{class:"button",disabled:e.value.length>29,onClick:a[0]||(a[0]=o=>D())},{default:c(()=>[_(" 新增 ")]),_:1},8,["disabled"]),p(v,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value=o),"tab-position":"left",onTabRemove:w},{default:c(()=>[(d(!0),b($,null,F(e.value,(o,r)=>(d(),T(u,{key:r,style:{position:"relative"},closable:e.value.length!==1,name:r},{label:c(()=>[y("div",{class:U(n.validateAll[r]&&n.validateAll[r]==="rejected"?"validateRejected":"")},P(o.name||"项目名称"),3)]),default:c(()=>[y("div",H,[l.value>0?(d(),T(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:R},{default:c(()=>[_(" 同步数据 ")]),_:1})):q("",!0)]),p(M,{"left-tab":o,"tab-index":r,onSetClient:B},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),p(N,{ref_key:"settingsRef",ref:A},null,512)]),_:1},8,["modelValue"])])}}}),le=G(J,[["__scopeId","data-v-41526d26"]]);export{le as default};
