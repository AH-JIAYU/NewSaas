
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ce,r as s,aN as pe,a3 as de,k as me,a as n,l as _e,n as B,o as p,b as F,f as e,w as t,F as fe,q as ge,g as u,D as L,e as f,j as b,i as g,Q as ve,L as be,aP as he,aQ as ke,aq as Ce,aJ as ye,aK as we,p as Se,P as ze}from"./index-DntGxMRg.js";import{_ as Ee}from"./index.vue_vue_type_style_index_0_lang-BhZ3tXeU.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-CAyl2sez.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-BFtqMd3m.js";import{u as Ie}from"./user_customer-DoTNFGiG.js";import{a as Le}from"./position_manage-CxQ8V4MC.js";import"./user_customer-CABfpEt5.js";const xe=v=>(ye("data-v-01a8a086"),v=v(),we(),v),Ue=xe(()=>Se("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Pe=ce({name:"position_manage",__name:"list",setup(v){const H=Ie(),N=s([]),{pagination:d,onSizeChange:A,onCurrentChange:O,onSortChange:Re}=pe(),q=s(""),x=s([]),h=s(!0),k=s(),C=s(!1),c=s([]),y=s(!0);s(!1);const w=s("default"),S=s(!1),Q=s([]),j=[{lable:"启用",value:1},{lable:"禁用",value:2}],z=s([{label:"职位ID",prop:"id",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"name",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"count",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),i=de({page:1,limit:10,id:null,name:"",active:null});function J(){k.value.showEdit()}function M(o){k.value.showEdit(JSON.stringify(o))}function T(o){Q.value=o}function K(){Object.assign(i,{page:1,limit:10,id:null,name:"",active:null}),_()}function G(o){A(o).then(()=>_())}function E(o=1){O(o).then(()=>_())}async function _(){h.value=!0,N.value=await H.getCustomerList();const{data:o}=await Le.list(i);x.value=o.data,d.value.total=parseInt(o.total)||0,h.value=!1}return me(()=>{z.value.forEach(o=>{o.checked&&c.value.push(o.prop)}),_()}),(o,l)=>{const U=n("el-input"),D=n("el-form-item"),W=n("ElOption"),X=n("el-select"),P=be,V=n("ElButton"),Y=n("ElFormItem"),Z=n("el-form"),ee=De,te=n("ElDivider"),I=n("el-button"),le=Ee,ae=he,oe=ke,ne=n("el-row"),m=n("el-table-column"),se=n("el-empty"),ie=n("el-table"),re=n("ElPagination"),ue=Ce,R=_e("loading");return B((p(),F("div",{class:ve({"absolute-container":C.value})},[e(ue,null,{default:t(()=>[e(ee,{"show-toggle":!1},{default:t(({fold:a,toggle:$})=>[e(Z,{model:i.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(D,{label:""},{default:t(()=>[e(U,{modelValue:i.id,"onUpdate:modelValue":l[0]||(l[0]=r=>i.id=r),placeholder:"职位ID",clearable:""},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(U,{modelValue:i.name,"onUpdate:modelValue":l[1]||(l[1]=r=>i.name=r),placeholder:"职位名称",clearable:""},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:t(()=>[e(X,{modelValue:i.active,"onUpdate:modelValue":l[2]||(l[2]=r=>i.active=r),placeholder:"状态",clearable:"",filterable:""},{default:t(()=>[(p(),F(fe,null,ge(j,r=>e(W,{label:r.lable,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(Y,null,{default:t(()=>[e(V,{type:"primary",onClick:l[3]||(l[3]=r=>E())},{icon:t(()=>[e(P,{name:"i-ep:search"})]),default:t(()=>[u(" 筛选 ")]),_:1}),e(V,{onClick:K},{icon:t(()=>[Ue]),default:t(()=>[u(" 重置 ")]),_:1}),e(V,{disabled:"",link:"",onClick:$},{icon:t(()=>[e(P,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[u(" "+L(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,{gutter:24},{default:t(()=>[e(le,null,{default:t(()=>[e(I,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:J},{default:t(()=>[u(" 新增职位 ")]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(I,{size:"default",onClick:l[4]||(l[4]=()=>{})},{default:t(()=>[u(" 导出 ")]),_:1}),e(ae,{border:y.value,"onUpdate:border":l[5]||(l[5]=a=>y.value=a),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":l[6]||(l[6]=a=>C.value=a),checkList:c.value,"onUpdate:checkList":l[7]||(l[7]=a=>c.value=a),columns:z.value,"onUpdate:columns":l[8]||(l[8]=a=>z.value=a),"line-height":w.value,"onUpdate:lineHeight":l[9]||(l[9]=a=>w.value=a),stripe:S.value,"onUpdate:stripe":l[10]||(l[10]=a=>S.value=a),style:{"margin-left":"12px"},onQueryData:E},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),B((p(),f(ie,{ref_key:"tableSortRef",ref:q,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:y.value,size:w.value,stripe:S.value,onSelectionChange:T},{empty:t(()=>[e(se,{description:"暂无数据"})]),default:t(()=>[e(m,{align:"center",type:"selection"}),c.value.includes("id")?(p(),f(m,{key:0,prop:"id","show-overflow-tooltip":"",align:"center",label:"职位ID"})):b("",!0),c.value.includes("name")?(p(),f(m,{key:1,prop:"name","show-overflow-tooltip":"",align:"center",label:"职位名称"})):b("",!0),c.value.includes("count")?(p(),f(m,{key:2,prop:"count","show-overflow-tooltip":"",align:"center",label:"账户数"},{default:t(({row:a})=>[u(L(a.count?a.count:"-"),1)]),_:1})):b("",!0),c.value.includes("remark")?(p(),f(m,{key:3,prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"},{default:t(({row:a})=>[u(L(a.remark?a.remark:"-"),1)]),_:1})):b("",!0),e(m,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e(I,{size:"small",plain:"",type:"primary",onClick:$=>M(a)},{default:t(()=>[u(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[R,!1]]),e(re,{"current-page":g(d).page,total:g(d).total,"page-size":g(d).size,"page-sizes":g(d).sizes,layout:g(d).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:E,onSizeChange:G},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ve,{onSuccess:_,ref_key:"editRef",ref:k},null,512)]),_:1})],2)),[[R,h.value]])}}}),qe=ze(Pe,[["__scopeId","data-v-01a8a086"]]);export{qe as default};
