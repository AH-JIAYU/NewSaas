
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ie,aN as ue,r,a5 as ce,k as pe,a as l,p as de,o as i,b as B,f as e,w as t,F as me,t as _e,e as m,i as f,g as n,H as b,q as fe,j as v,s as H,S as ge,N as be,aP as ve,aQ as he,aq as ke,aJ as ye,aK as we,R as Se}from"./index-lihZnDlK.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-C_U_0l5r.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-D1-X45eC.js";import{u as Ce,e as Ie,a as Ne}from"./index-Y9yQYXC1.js";import"./index.vue_vue_type_script_setup_true_lang-BUBtggTa.js";const Ve=k=>(ye("data-v-8e66c3fa"),k=k(),we(),k),De=Ve(()=>H("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),xe=ie({name:"outsource",__name:"list",setup(k){const D=Ce(),{pagination:g,getParams:R,onSizeChange:$,onCurrentChange:A}=ue(),M=r(""),y=r(!0),w=r(!0),x=r(),S=r(!1),u=r([]),z=r("default"),j=r(!1),C=r([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),c=ce({tenantId:"",tenantName:"",projectStatus:""}),E=r([]);function q(s){x.value.showEdit(s)}function O(s){$(s).then(()=>h())}function I(s=1){A(s).then(()=>h())}function Q(){Object.assign(c,{tenantId:"",tenantName:"",projectStatus:""}),h()}async function h(){y.value=!0;const s={...R(),...c},a=await Ne.list(s);E.value=a.data.projectAllocationInfoList,g.value.total=a.data.total,y.value=!1}return pe(()=>{C.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),h()}),(s,a)=>{const L=l("el-input"),N=l("el-form-item"),T=l("el-option"),J=l("el-select"),P=be,V=l("ElButton"),K=l("ElFormItem"),G=l("el-form"),W=je,X=l("ElDivider"),Y=ze,U=l("el-button"),Z=ve,ee=he,te=l("el-row"),p=l("el-table-column"),_=l("el-text"),ae=l("el-empty"),oe=l("el-table"),le=l("ElPagination"),ne=ke,se=de("loading");return i(),B("div",{class:ge({"absolute-container":S.value})},[e(ne,null,{default:t(()=>[e(W,{"show-toggle":!1},{default:t(({fold:o,toggle:F})=>[e(G,{model:c.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(N,{label:""},{default:t(()=>[e(L,{modelValue:c.tenantId,"onUpdate:modelValue":a[0]||(a[0]=d=>c.tenantId=d),clearable:"",placeholder:"租户id"},null,8,["modelValue"])]),_:1}),e(N,{label:""},{default:t(()=>[e(L,{modelValue:c.tenantName,"onUpdate:modelValue":a[1]||(a[1]=d=>c.tenantName=d),clearable:"",placeholder:"租户名称"},null,8,["modelValue"])]),_:1}),e(N,{label:""},{default:t(()=>[e(J,{modelValue:c.projectStatus,"onUpdate:modelValue":a[2]||(a[2]=d=>c.projectStatus=d),clearable:"",placeholder:"项目状态"},{default:t(()=>[(i(!0),B(me,null,_e(f(D).projectStatusList,(d,re)=>(i(),m(T,{label:d,value:re+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(K,null,{default:t(()=>[e(V,{type:"primary",onClick:a[3]||(a[3]=d=>I())},{icon:t(()=>[e(P,{name:"i-ep:search"})]),default:t(()=>[n(" 筛选 ")]),_:1}),e(V,{onClick:Q},{icon:t(()=>[De]),default:t(()=>[n(" 重置 ")]),_:1}),e(V,{disabled:"",link:"",onClick:F},{icon:t(()=>[e(P,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[n(" "+b(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(X,{"border-style":"dashed"}),e(te,{gutter:24},{default:t(()=>[e(Y),e(ee,null,{default:t(()=>[e(U,{size:"default",onClick:a[4]||(a[4]=()=>{})},{default:t(()=>[n(" 导出 ")]),_:1}),e(Z,{border:w.value,"onUpdate:border":a[5]||(a[5]=o=>w.value=o),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":a[6]||(a[6]=o=>S.value=o),checkList:u.value,"onUpdate:checkList":a[7]||(a[7]=o=>u.value=o),columns:C.value,"onUpdate:columns":a[8]||(a[8]=o=>C.value=o),"line-height":z.value,"onUpdate:lineHeight":a[9]||(a[9]=o=>z.value=o),stripe:j.value,"onUpdate:stripe":a[10]||(a[10]=o=>j.value=o),style:{"margin-left":"12px"},onQueryData:I},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),fe((i(),m(oe,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:E.value,border:w.value,size:z.value,stripe:j.value},{empty:t(()=>[e(ae,{description:"暂无数据"})]),default:t(()=>[e(p,{align:"center",type:"selection"}),u.value.includes("tenantId")?(i(),m(p,{key:0,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"})):v("",!0),u.value.includes("tenantName")?(i(),m(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):v("",!0),u.value.includes("projectId")?(i(),m(p,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"})):v("",!0),u.value.includes("projectName")?(i(),m(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):v("",!0),u.value.includes("participationNumber")?(i(),m(p,{key:4,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:o})=>[e(_,{size:"large"},{default:t(()=>[n(b(o.participationNumber||0),1)]),_:2},1024),e(_,{size:"large"},{default:t(()=>[n(" / ")]),_:1}),e(_,{type:"success",size:"large"},{default:t(()=>[n(b(o.doneNumber||0),1)]),_:2},1024),e(_,{size:"large"},{default:t(()=>[n(" / ")]),_:1}),e(_,{type:"warning",size:"large"},{default:t(()=>[n(b(o.num||0),1)]),_:2},1024),e(_,{size:"large"},{default:t(()=>[n(" / ")]),_:1}),e(_,{size:"large"},{default:t(()=>[n(b(o.limitedQuantity||0),1)]),_:2},1024)]),_:1})):v("",!0),u.value.includes("projectStatus")?(i(),m(p,{key:5,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:t(({row:o})=>[H("span",null,b(f(D).projectStatusList[o.projectStatus-1]),1)]),_:1})):v("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:o})=>[e(U,{type:"primary",plain:"",size:"small",onClick:F=>q(o)},{default:t(()=>[n(" 测查 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[se,y.value]]),e(le,{"current-page":f(g).page,total:f(g).total,"page-size":f(g).size,"page-sizes":f(g).sizes,layout:f(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:I},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ie,{ref_key:"editRef",ref:x,onFetchData:h},null,512)]),_:1})],2)}}}),Be=Se(xe,[["__scopeId","data-v-8e66c3fa"]]);export{Be as default};
