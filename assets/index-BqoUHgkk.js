
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as S}from"./index-n-8eFwxe.js";/* empty css              */import{a as E}from"./survey_myProjeck-CzpHSO7p.js";import{f as M,D as $}from"./download-DymZvW1b.js";import{d as q,r as s,a as n,q as J,s as O,o,b as u,f as p,w as h,j as x,F as P,t as Q,v as w,g as R,A as Z,O as G,e as N,i as D,aN as H,aI as K,aJ as W,M as X}from"./index-DZ7Gqds7.js";import{w as V,x as b,p as Y}from"./pdf-BhHCHn5I.js";import"./index-Bmb2yTfB.js";const j=m=>(K("data-v-a839411e"),m=m(),W(),m),ee={key:0,class:"titleClass"},ae={key:1,class:"demo-image__preview",style:{display:"flex","flex-wrap":"wrap"}},te={class:"image-info"},le=j(()=>w("div",{class:"i-f7:doc-text w-1rem h-1rem"},null,-1)),se=j(()=>w("div",{class:"titleClass"},"描述",-1)),oe={class:"radius flex gap-2 p-2"},ie=q({__name:"index",setup(m,{expose:T}){const v=s(!1),y=s(""),e=s({}),k=s([]),_=s([]),U=s([]),f=s(!1),r=t=>{const a=t.match(/\.([a-zA-Z0-9]+)$/);return a?a[1]:""};async function z(t){try{if(v.value=!0,y.value="项目详情",t){f.value=!0;const a=await E.getQuotaProjectInfo({projectId:t.projectId});if(e.value=a.data,e.value.descriptionUrl){const g=e.value.descriptionUrl.split(",");_.value=g;const i={doc:V,docx:V,xls:b,xlsx:b,pdf:Y};for(let l of g){const c=await M.detail({fileName:l});let C={src:i[r(l)]?i[r(l)]:c.data.fileUrl,src1:c.data.fileUrl,name:r(l)};U.value.push(C),k.value.push(i[r(l)]?i[r(l)]:c.data.fileUrl)}}_.value=k.value,f.value=!1}}catch{}finally{f.value=!1}}async function A(t){if(t){const a=decodeURIComponent(t.split("/").pop().split("?")[0]);await $(t,a)}}function B(){y.value="",e.value={},k.value=[],_.value=[],U.value=[],v.value=!1}return T({showEdit:z}),(t,a)=>{const g=n("el-image"),i=n("el-link"),l=n("el-col"),c=n("el-row"),C=n("el-empty"),F=n("el-dialog"),L=J("loading");return O((o(),u("div",null,[p(F,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=d=>v.value=d),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:y.value,draggable:"",width:"50%",onClose:B},{default:h(()=>[e.value.descriptionUrl?(o(),u("div",ee,"图片/文件")):x("",!0),e.value.descriptionUrl?(o(),u("div",ae,[(o(!0),u(P,null,Q(U.value,(d,I)=>(o(),u("div",{key:I,style:{"margin-bottom":".8125rem"}},[p(g,{style:{width:"6.25rem",height:"6.25rem","margin-right":"15px"},src:d.src,"preview-src-list":_.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":I,fit:"cover"},null,8,["src","preview-src-list","initial-index"]),w("div",te,[le,p(i,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:ne=>A(d.src1)},{default:h(()=>[R(Z(d.name)+"下载",1)]),_:2},1032,["onClick"])])]))),128))])):x("",!0),p(c,{gutter:20,class:G({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:h(()=>[p(l,{span:24},{default:h(()=>[se,w("div",oe,[e.value.richText?(o(),N(D(S),{key:0,value:e.value.richText},null,8,["value"])):x("",!0)])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(o(),N(C,{key:2,image:D(H),"image-size":300},null,8,["image"])):x("",!0)]),_:1},8,["modelValue","title"])])),[[L,f.value]])}}}),_e=X(ie,[["__scopeId","data-v-a839411e"]]);export{_e as default};
