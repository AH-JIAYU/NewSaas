
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ee,aK as Ve,r as c,a5 as xe,k as Ie,a as r,p as ze,o as i,b as O,f as e,w as o,i as a,q as N,g as m,H as U,I as k,e as p,j as d,F as Ne,t as Ue,S as Ae,E as J,aL as Le,l as De,N as Fe,aM as $e,aN as Qe,ba as Re,ap as Te,aG as Be,aH as He,s as Me,aq as T,R as Pe}from"./index-BrOEW0VG.js";import{_ as qe}from"./index.vue_vue_type_style_index_0_lang-D5L1beP9.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-rg0t9q6-.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-BLcITsP7.js";import Ke from"./index-D11Fx0tr.js";import{s as W}from"./apiLoading-CyUIpXQQ.js";import{u as Oe}from"./user_customer-C0_H2As4.js";import{a as B}from"./user_customer-DOeBK8Nw.js";import"./index.vue_vue_type_script_setup_true_lang-BBX4uipT.js";import"./index-BL7FXgbf.js";import"./index-DzwV05uk.js";import"./department-DjAP9eCB.js";import"./position_manage-Bj72A6DA.js";import"./department-pTLSyrYr.js";import"./tenant_role-CcrPWtg8.js";import"./configuration_role-9X5RiLSA.js";import"./configuration_manager-68aHwp0y.js";import"./stagedData-BI0rxlVx.js";import"./index.vue_vue_type_script_setup_true_lang-JDGBfSle.js";const Je=w=>(Be("data-v-06f6612c"),w=w(),He(),w),We=Je(()=>Me("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe=Ee({name:"customer",__name:"index",setup(w){const X=Oe(),{pagination:h,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=Ve(),H=c([]),S=c(!1),M=c([]),A=c(),P=c(),te=c(),E=c(!0),V=c(!1),x=c(!1),I=c("default"),u=c([]),z=c([{label:"客户编码",checked:!0,sortable:!0,prop:"tenantCustomerId"},{label:"客户名称",checked:!0,sortable:!0,prop:"customerAccord"},{label:"客户简称",checked:!0,sortable:!0,prop:"customerShortName"},{label:"负责人",checked:!0,sortable:!0,prop:"chargeName"},{label:"客户状态",checked:!0,sortable:!0,prop:"customerStatus"},{label:"前置问卷",checked:!0,sortable:!0,prop:"antecedentQuestionnaire"},{label:"风险控制",checked:!0,sortable:!0,prop:"riskControl"},{label:"客户营业限额/月",checked:!0,sortable:!0,prop:"turnover"},{label:"审核率Min值",checked:!0,sortable:!0,prop:"rateAudit"}]);function oe(){A.value.showEdit()}function ae(l){A.value.showEdit(l)}async function L(l,n,v){const F={status:l,operationalType:n,tenantCustomerId:v},{status:C}=await W(B.changestatus(F));C===1&&J.success({message:"修改成功"}),X.customer=null,g()}function ne(l){P.value.showEdit(l)}function le(l){Le.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:n}=await W(B.delete({tenantCustomerId:l.tenantCustomerId}));n===1&&J.success({message:"删除成功"}),g()}).catch(()=>{})}const _=xe({customerShortName:"",customerStatus:null,antecedentQuestionnaire:null}),se=async()=>{const{data:l}=await De.getTenantStaffList();H.value=l};function re(l){Z(l).then(()=>D())}function q(l=1){ee(l).then(()=>D())}function ie(){Object.assign(_,{customerShortName:"",customerStatus:null,antecedentQuestionnaire:null}),g()}function g(){h.value.page=1,D()}async function D(){try{S.value=!0;const l={...Y(),..._},{data:n}=await B.list(l);M.value=n.getTenantCustomerInfoList,h.value.total=Number(n.total),S.value=!1}catch{}finally{S.value=!1}}function ue(l){te.value=l}return Ie(async()=>{await se(),z.value.forEach(l=>{l.checked&&u.value.push(l.prop)}),g()}),(l,n)=>{const v=r("el-option"),F=r("el-input"),C=r("el-form-item"),j=r("el-select"),G=Fe,$=r("ElButton"),ce=r("ElFormItem"),pe=r("ElForm"),me=je,de=r("ElDivider"),y=r("el-button"),_e=qe,fe=$e,he=Qe,ge=r("el-row"),f=r("el-table-column"),ve=Re,K=r("el-text"),Q=r("ElSwitch"),R=r("ElTableColumn"),be=r("ElSpace"),ke=r("el-empty"),Ce=r("el-table"),ye=r("ElPagination"),we=Te,Se=ze("loading");return i(),O("div",{class:Ae({"absolute-container":a(x)})},[e(we,null,{default:o(()=>[e(me,{"show-toggle":!1},{default:o(({fold:t,toggle:s})=>[e(pe,{model:a(_).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[N(e(C,null,{default:o(()=>[e(F,{modelValue:a(_).customerShortName,"onUpdate:modelValue":n[0]||(n[0]=b=>a(_).customerShortName=b),clearable:"",placeholder:"客户简称"},{default:o(()=>[e(v,{label:"name",value:"name"})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),N(e(C,null,{default:o(()=>[e(j,{modelValue:a(_).customerStatus,"onUpdate:modelValue":n[1]||(n[1]=b=>a(_).customerStatus=b),clearable:"",placeholder:"客户状态"},{default:o(()=>[e(v,{label:"禁用",value:1}),e(v,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),N(e(C,null,{default:o(()=>[e(j,{modelValue:a(_).antecedentQuestionnaire,"onUpdate:modelValue":n[2]||(n[2]=b=>a(_).antecedentQuestionnaire=b),clearable:"",placeholder:"前置问卷"},{default:o(()=>[e(v,{label:"禁用",value:1}),e(v,{label:"启用",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),e(ce,null,{default:o(()=>[e($,{type:"primary",onClick:n[3]||(n[3]=b=>q())},{icon:o(()=>[e(G,{name:"i-ep:search"})]),default:o(()=>[m(" 筛选 ")]),_:1}),e($,{onClick:ie},{icon:o(()=>[We]),default:o(()=>[m(" 重置 ")]),_:1}),e($,{disabled:"",link:"",onClick:s},{icon:o(()=>[e(G,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[m(" "+U(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(de,{"border-style":"dashed"}),e(ge,null,{default:o(()=>[e(_e,null,{default:o(()=>[e(y,{type:"primary",size:"default",onClick:oe},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),e(he,null,{default:o(()=>[e(y,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),e(fe,{border:a(E),"onUpdate:border":n[4]||(n[4]=t=>k(E)?E.value=t:null),tableAutoHeight:a(x),"onUpdate:tableAutoHeight":n[5]||(n[5]=t=>k(x)?x.value=t:null),checkList:a(u),"onUpdate:checkList":n[6]||(n[6]=t=>k(u)?u.value=t:null),columns:a(z),"onUpdate:columns":n[7]||(n[7]=t=>k(z)?z.value=t:null),"line-height":a(I),"onUpdate:lineHeight":n[8]||(n[8]=t=>k(I)?I.value=t:null),stripe:a(V),"onUpdate:stripe":n[9]||(n[9]=t=>k(V)?V.value=t:null),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),N((i(),p(Ce,{border:a(E),data:a(M),size:a(I),stripe:a(V),onSelectionChange:ue},{empty:o(()=>[e(ke,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(f,{align:"center",type:"selection"}),a(u).includes("tenantCustomerId")?(i(),p(f,{key:0,align:"center",prop:"tenantCustomerId",width:"180","show-overflow-tooltip":"",label:"客户编码"})):d("",!0),a(u).includes("customerAccord")?(i(),p(f,{key:1,align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"})):d("",!0),a(u).includes("customerShortName")?(i(),p(f,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"})):d("",!0),a(u).includes("turnover")?(i(),p(f,{key:3,align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额/月"},{default:o(({row:t})=>[e(ve),m(U(t.turnover||0),1)]),_:1})):d("",!0),a(u).includes("rateAudit")?(i(),p(f,{key:4,align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"},{default:o(({row:t})=>[m(U(t.rateAudit?t.rateAudit:"-"),1)]),_:1})):d("",!0),a(u).includes("chargeName")?(i(),p(f,{key:5,align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"},{default:o(({row:t})=>[(i(!0),O(Ne,null,Ue(a(H),s=>(i(),p(K,{key:s.id},{default:o(()=>[s.id===t.chargeId?(i(),p(K,{key:0},{default:o(()=>[m(U(s.name),1)]),_:2},1024)):d("",!0)]),_:2},1024))),128))]),_:1})):d("",!0),a(u).includes("customerStatus")?(i(),p(R,{key:6,align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:o(({row:t})=>[e(Q,{modelValue:t.customerStatus,"onUpdate:modelValue":s=>t.customerStatus=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,1,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),a(u).includes("antecedentQuestionnaire")?(i(),p(R,{key:7,align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:o(({row:t})=>[e(Q,{modelValue:t.antecedentQuestionnaire,"onUpdate:modelValue":s=>t.antecedentQuestionnaire=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,2,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),a(u).includes("riskControl")?(i(),p(R,{key:8,align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:o(({row:t})=>[e(Q,{modelValue:t.riskControl,"onUpdate:modelValue":s=>t.riskControl=s,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:s=>L(s,3,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),e(f,{align:"center",fixed:"right",prop:"i",label:"操作","show-overflow-tooltip":"",width:"200"},{default:o(({row:t})=>[e(be,null,{default:o(()=>[e(y,{size:"small",plain:"",type:"primary",onClick:s=>ae(t)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),e(y,{type:"primary",plain:"",size:"small",onClick:s=>ne(t)},{default:o(()=>[m(" 详情 ")]),_:2},1032,["onClick"]),e(y,{type:"danger",plain:"",size:"small",onClick:s=>le(t)},{default:o(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Se,a(S)]]),e(ye,{"current-page":a(h).page,total:a(h).total,"page-size":a(h).size,"page-sizes":a(h).sizes,layout:a(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:q},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Ge,{ref_key:"editRef",ref:A,onFetchData:g},null,512),e(Ke,{ref_key:"checkRef",ref:P,onFetchData:g},null,512)]),_:1})],2)}}}),gt=Pe(Xe,[["__scopeId","data-v-06f6612c"]]);export{gt as default};
