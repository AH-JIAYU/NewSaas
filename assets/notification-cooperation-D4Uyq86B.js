
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as M,aL as O,r as p,a as c,o as v,b as N,y as i,z as g,i as l,f as o,w as a,g as s,j as V,e as G,A as J,b8 as y,_ as Q,aH as W,aI as X,L as Y}from"./index-CgGiKMhT.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-CElZmdO1.js";import"./department-DMxm4WQF.js";const h=u=>(W("data-v-d70261c8"),u=u(),X(),u),ee={class:"news p-4"},te=h(()=>i("div",{class:"type"},[i("span"),s(" 合作邀约")],-1)),oe={class:"news-content"},ae={class:"content"},ne={class:"time"},le={key:0,class:"footer"},se={style:{display:"flex"},class:"inviteDialog"},re={slot:"label",style:{"margin-right":"15px"}},ie=h(()=>i("span",{style:{color:"#f56c6c"}},"*",-1)),ce={slot:"label",style:{"margin-right":"15px"}},de=h(()=>i("span",{style:{color:"#f56c6c"}},"*",-1)),pe=M({name:"PersonalNotificationCooperation",__name:"notification-cooperation",emits:["delSelectId"],setup(u,{expose:S,emit:R}){const T=R,f=O(),e=p({}),d=p(!1);p([]);const b=p(),w={priceRatio:[{required:!0,message:"请输入价格比例",trigger:"blur"}],sendProjectType:[{required:!0,message:"请选择发送项目",trigger:"change"}],receiveProjectType:[{required:!0,message:"请选择接收项目",trigger:"change"}]},A=async t=>{e.value=t,E()},E=async()=>{const t={id:e.value.id,type:1};await y.updateTenantAudit(t),await f.getUnreadTodo()},B=async()=>{const t={id:e.value.id,type:2};T("delSelectId"),await y.updateTenantAudit(t),await f.getUnreadTodo()},D=async()=>{b.value.validate(async t=>{if(t){const n={id:e.value.id,beInvitationChargeUserId:e.value.beInvitationChargeUserId,beInvitationChargeUserName:e.value.beInvitationChargeUserName,priceRatio:e.value.priceRatio,type:3,chargeUserId:e.value.chargeUserId,invitationType:e.value.invitationType,chargeUserName:e.value.chargeUserName,sendProjectType:e.value.sendProjectType.length[0],receiveProjectType:e.value.receiveProjectType[0]};T("delSelectId"),await y.updateTenantAudit(n),await f.getUnreadTodo()}})},U=p();function q(){U.value.showEdit()}function F(t){e.value.chargeUserId=t.chargeUserId,e.value.invitationType=t.invitationType,e.value.chargeUserName=t.chargeUserName}const $=t=>{Array.isArray(t)&&t.length>1&&(e.value.sendProjectType=[t[t.length-1]])},z=t=>{Array.isArray(t)&&t.length>1&&(e.value.receiveProjectType=[t[t.length-1]])},K=t=>{t.preventDefault()};return S({showEdit:A}),(t,n)=>{const I=c("el-button"),k=c("el-input"),m=c("el-form-item"),C=Q,P=c("el-tooltip"),_=c("el-checkbox"),j=c("el-checkbox-group"),L=c("ElForm"),x=c("ElButton"),H=c("el-dialog");return v(),N("div",ee,[te,i("div",oe,[i("div",ae,"尊贵的"+g(l(e).beInvitedName),1),i("div",ne," 您好，我是"+g(l(e).invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+g(l(e).phoneOrEmail)+"。 ",1),l(e).auditStatus===1?(v(),N("div",le,[o(I,{onClick:B},{default:a(()=>[s("拒绝合作")]),_:1}),o(I,{type:"primary",onClick:n[0]||(n[0]=r=>d.value=!0)},{default:a(()=>[s(" 同意合作 ")]),_:1})])):V("",!0)]),o(H,{modelValue:l(d),"onUpdate:modelValue":n[6]||(n[6]=r=>J(d)?d.value=r:null),title:"添加PM"},{footer:a(()=>[o(x,{size:"large",onClick:n[5]||(n[5]=r=>d.value=!1)},{default:a(()=>[s(" 取消 ")]),_:1}),o(x,{type:"primary",size:"large",onClick:D},{default:a(()=>[s(" 确定 ")]),_:1})]),default:a(()=>[o(L,{ref_key:"FormRef",ref:b,rules:w,model:l(e),"label-width":"7rem",labelPosition:"left"},{default:a(()=>[o(m,{label:"价格比例",prop:"priceRatio"},{default:a(()=>[o(k,{modelValue:l(e).priceRatio,"onUpdate:modelValue":n[1]||(n[1]=r=>l(e).priceRatio=r),clearable:""},{append:a(()=>[s("%")]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"项目分配方式","label-width":"7rem"}),i("div",se,[o(m,{prop:"sendProjectType"},{default:a(()=>[i("span",re,[o(P,{effect:"dark",content:"1111111",placement:"top-start"},{default:a(()=>[o(C,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1}),ie,s(" 发送项目 ")]),o(j,{modelValue:l(e).sendProjectType,"onUpdate:modelValue":n[2]||(n[2]=r=>l(e).sendProjectType=r),onChange:$},{default:a(()=>[o(_,{value:1},{default:a(()=>[s(" 自动 ")]),_:1}),o(_,{value:2},{default:a(()=>[s(" 手动 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{prop:"receiveProjectType",style:{"margin-left":"40px"}},{default:a(()=>[i("span",ce,[o(P,{effect:"dark",content:"1111111",placement:"top-start"},{default:a(()=>[o(C,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1}),de,s(" 接收项目 ")]),o(j,{modelValue:l(e).receiveProjectType,"onUpdate:modelValue":n[3]||(n[3]=r=>l(e).receiveProjectType=r),onChange:z},{default:a(()=>[o(_,{value:1},{default:a(()=>[s(" 自动 ")]),_:1}),o(_,{value:2},{default:a(()=>[s(" 手动 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),l(e).receiveProjectType&&l(e).receiveProjectType[0]==1?(v(),G(k,{key:0,placeholder:"请选择接收项目负责人",onKeydown:K,onClick:q,modelValue:l(e).chargeUserName,"onUpdate:modelValue":n[4]||(n[4]=r=>l(e).chargeUserName=r)},null,8,["modelValue"])):V("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(Z,{ref_key:"userRef",ref:U,onUserData:F},null,512)])}}}),fe=Y(pe,[["__scopeId","data-v-d70261c8"]]);export{fe as default};
