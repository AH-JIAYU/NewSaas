
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ae,az as ne,ae as re,ac as ue,a6 as oe,r as S,E as d,M as j,o as se,P as pe,a2 as i,a as b,i as L,f as e,w as l,h as u,bc as ie,b as c,t as f,N as I,O as N,g as w,c as x,j as U,_ as de,aH as me,aI as ce,y as be}from"./index-5r5nO7Oz.js";import fe from"./index-SjyZ5A7l.js";import{U as ve}from"./user_supplier-B_sYGelI.js";import{u as _e}from"./configuration_supplierLevel-BrynHd2K.js";import{u as ye}from"./user_customer-BN03v_iJ.js";import"./apiLoading-Da57QBR1.js";import"./user_supplier-BdVLTeDR.js";import"./user_customer-VCJJObCK.js";const h=V=>(me("data-v-af216444"),V=V(),ce(),V),ge={class:"card-header"},Te={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},we=h(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Ve=h(()=>c("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Se={class:"card-header"},xe=h(()=>c("br",null,null,-1)),Ce=ae({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(V){const E=ne(),{t}=re(),Y=ve(),O=_e(),$=ye(),F=ue(),Q=oe("validateTopTabs"),A=S(),a=V,k=S(null);S({});const Z=[{label:d(()=>t("supplier.new.company")),value:"company"},{label:d(()=>t("supplier.new.personal")),value:"personal"}];d(()=>t("supplier.new.USD")),d(()=>t("supplier.new.CNY"));const v=j({supplierAccord:[{required:!0,message:d(()=>t("supplier.new.enterSuppllierName")),trigger:"blur"},{min:2,max:50,message:d(()=>t("supplier.new.2to50")),trigger:"blur"}],memberLevelId:[{required:!0,message:d(()=>t("supplier.new.memberLevelSelect")),trigger:"change"}],subordinateCountryId:[{required:!0,message:d(()=>t("supplier.new.areaSelect")),trigger:"change"}],supplierLevelId:[{required:!0,message:d(()=>t("supplier.new.supplierLevelSelect")),trigger:"change"}],type:[{required:!0,message:d(()=>t("supplier.new.supplierTypeSelect")),trigger:"change"}]}),H=(m,r,p)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.leftTab.supplierPhone)?p():p(new Error(t("supplier.new.legalPhoneNumber")))},G=(m,r,p)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.leftTab.emailAddress)?p():p(new Error(t("supplier.new.legalEmail")))},P=m=>{m&&(a.leftTab.countryType=m==="343"?1:2,m==="343"?(a.leftTab.tenantSupplierId||(a.leftTab.currencyType=E.currencyType===1?"USD":"CNY"),v.emailAddress&&delete v.emailAddress,v.supplierPhone=[{required:!0,message:d(()=>t("supplier.new.enterPhoneNumber")),trigger:"blur"},{validator:H,trigger:"blur"}]):(a.leftTab.tenantSupplierId||(a.leftTab.currencyType=E.currencyType===1?"USD":"CNY"),v.supplierPhone&&delete v.supplierPhone,v.emailAddress=[{required:!0,message:d(()=>t("supplier.new.enterEmail")),trigger:"blur"},{validator:G,trigger:"blur"}]))};a.leftTab.relevanceCountryIdList||(a.leftTab.relevanceCountryIdList=[]);const D=()=>{A.value.showEdit()},y=j({checked:!1,relatedCustomers:[],payMethod:Y.payMethod,countryList:[],supplierLevelList:[]}),q=S("basicSettings"),B=async()=>{y.supplierLevelList=await O.getLevelNameList(),P(a.leftTab.subordinateCountryId)},z=S([]),J=(m,r)=>m?r.label&&r.label.toLowerCase().includes(m.toLowerCase()):!0,K=m=>{m.forEach(r=>{z.value.push({label:r.chineseName,key:r.id,initial:r.code})})};return se(async()=>{y.relatedCustomers=await $.getCustomerList(),y.countryList=await F.getCountry(),await B(),K(y.countryList)}),pe(()=>{Q(k.value)}),(m,r)=>{const p=i("el-option"),g=i("el-select"),o=i("el-form-item"),s=i("el-col"),_=i("el-input"),M=i("el-button"),T=i("el-row"),R=i("el-card"),C=i("ElSwitch"),W=de,X=i("el-tooltip"),ee=i("el-transfer"),le=i("el-tab-pane"),te=i("el-tabs");return b(),L("div",null,[e(te,{modelValue:q.value,"onUpdate:modelValue":r[16]||(r[16]=n=>q.value=n)},{default:l(()=>[e(le,{label:u(t)("supplier.new.basicSettings"),name:"basicSettings"},{default:l(()=>[e(u(ie),{ref_key:"formRef",ref:k,rules:u(v),model:a.leftTab,"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(R,{class:"box-card"},{header:l(()=>[c("div",ge,[c("span",null,f(u(t)("supplier.new.basicInformation")),1)])]),default:l(()=>[e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.supplierType"),prop:"type"},{default:l(()=>[e(g,{modelValue:a.leftTab.type,"onUpdate:modelValue":r[0]||(r[0]=n=>a.leftTab.type=n),"value-key":"",placeholder:"",clearable:"",filterable:""},{default:l(()=>[(b(),L(I,null,N(Z,n=>e(p,{key:n.value,label:"item.label",value:n.value},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.supplierAccord"),prop:"supplierAccord"},{default:l(()=>[e(_,{modelValue:a.leftTab.supplierAccord,"onUpdate:modelValue":r[1]||(r[1]=n=>a.leftTab.supplierAccord=n),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.supplierLevel"),prop:"supplierLevelId"},{default:l(()=>[e(g,{clearable:"",filterable:"",modelValue:a.leftTab.supplierLevelId,"onUpdate:modelValue":r[2]||(r[2]=n=>a.leftTab.supplierLevelId=n)},{empty:l(()=>[c("div",Te,[w(f(u(t)("supplier.new.nodata"))+" ",1),e(M,{type:"primary",link:"",size:"small",onClick:D},{default:l(()=>[w(f(u(t)("supplier.new.quickAdd"))+" ",1),we]),_:1})])]),default:l(()=>[(b(!0),L(I,null,N(u(y).supplierLevelList,n=>(b(),x(p,{key:n.tenantSupplierLevelId,value:n.tenantSupplierLevelId,label:n.levelNameOrAdditionRatio},null,8,["value","label"]))),128)),e(M,{size:"small",class:"buttonClass",onClick:D},{default:l(()=>[w(f(u(t)("supplier.new.quickAdd"))+" ",1),Ve]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.area"),prop:"subordinateCountryId"},{default:l(()=>[e(g,{clearable:"",filterable:"",modelValue:a.leftTab.subordinateCountryId,"onUpdate:modelValue":r[3]||(r[3]=n=>a.leftTab.subordinateCountryId=n),onChange:P},{default:l(()=>[(b(!0),L(I,null,N(u(y).countryList,n=>(b(),x(p,{key:n.id,value:n.id,label:n.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.supplierName")},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.supplierName,"onUpdate:modelValue":r[4]||(r[4]=n=>a.leftTab.supplierName=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.supplierPhone"),prop:"supplierPhone"},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.supplierPhone,"onUpdate:modelValue":r[5]||(r[5]=n=>a.leftTab.supplierPhone=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.emailAddress"),prop:"emailAddress"},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.emailAddress,"onUpdate:modelValue":r[6]||(r[6]=n=>a.leftTab.emailAddress=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[e(o,{label:u(t)("supplier.new.settlementCycle")},{default:l(()=>[e(g,{modelValue:a.leftTab.settlementCycle,"onUpdate:modelValue":r[7]||(r[7]=n=>a.leftTab.settlementCycle=n)},{default:l(()=>[e(p,{label:"net 30",value:30}),e(p,{label:"net 60",value:60}),e(p,{label:"net 90",value:90}),e(p,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(s,{span:8},{default:l(()=>[a.leftTab.type==="company"?(b(),x(o,{key:0,label:u(t)("supplier.new.companyName")},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.companyName,"onUpdate:modelValue":r[8]||(r[8]=n=>a.leftTab.companyName=n)},null,8,["modelValue"])]),_:1},8,["label"])):U("",!0)]),_:1})]),_:1}),e(T,{gutter:10},{default:l(()=>[e(s,{span:8},{default:l(()=>[a.leftTab.type==="company"?(b(),x(o,{key:0,label:u(t)("supplier.new.legalPersonName"),prop:""},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.legalPersonName,"onUpdate:modelValue":r[9]||(r[9]=n=>a.leftTab.legalPersonName=n)},null,8,["modelValue"])]),_:1},8,["label"])):U("",!0)]),_:1}),e(s,{span:8},{default:l(()=>[a.leftTab.type==="company"?(b(),x(o,{key:0,label:u(t)("supplier.new.taxID"),prop:""},{default:l(()=>[e(_,{clearable:"",modelValue:a.leftTab.taxID,"onUpdate:modelValue":r[10]||(r[10]=n=>a.leftTab.taxID=n)},null,8,["modelValue"])]),_:1},8,["label"])):U("",!0)]),_:1})]),_:1})]),_:1}),e(R,{class:"box-card"},{header:l(()=>[c("div",Se,[c("span",null,f(u(t)("supplier.new.permissionInformation")),1)])]),default:l(()=>[e(T,{gutter:10},{default:l(()=>[e(s,{span:3},{default:l(()=>[e(o,{label:u(t)("supplier.new.surveySystem")},{default:l(()=>[e(C,{modelValue:a.leftTab.surveySystem,"onUpdate:modelValue":r[11]||(r[11]=n=>a.leftTab.surveySystem=n),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":u(t)("common.enable"),"inactive-text":u(t)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1}),e(s,{span:3},{default:l(()=>[e(o,{label:"B2B"},{default:l(()=>[e(C,{modelValue:a.leftTab.b2bStatus,"onUpdate:modelValue":r[12]||(r[12]=n=>a.leftTab.b2bStatus=n),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":u(t)("common.enable"),"inactive-text":u(t)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1})]),_:1}),e(s,{span:4},{default:l(()=>[e(o,{label:"B2C"},{default:l(()=>[e(C,{modelValue:a.leftTab.b2cStatus,"onUpdate:modelValue":r[13]||(r[13]=n=>a.leftTab.b2cStatus=n),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":u(t)("common.enable"),"inactive-text":u(t)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1})]),_:1}),e(s,{span:3},{default:l(()=>[e(o,{label:u(t)("supplier.new.surveyStatus")},{default:l(()=>[e(C,{modelValue:a.leftTab.supplierStatus,"onUpdate:modelValue":r[14]||(r[14]=n=>a.leftTab.supplierStatus=n),"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":u(t)("common.enable"),"inactive-text":u(t)("common.disable")},null,8,["modelValue","active-text","inactive-text"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:20},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(o,null,{label:l(()=>[c("div",null,[e(X,{class:"tooltips",placement:"top"},{content:l(()=>[c("div",null,[w(f(u(t)("supplier.new.tips1")),1),xe,w(" "+f(u(t)("supplier.new.example")),1)])]),default:l(()=>[e(W,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1}),w(" "+f(u(t)("supplier.new.authorizationArea")),1)])]),default:l(()=>[e(ee,{modelValue:a.leftTab.relevanceCountryIdList,"onUpdate:modelValue":r[15]||(r[15]=n=>a.leftTab.relevanceCountryIdList=n),filterable:"","filter-method":J,"filter-placeholder":u(t)("supplier.new.enterQueryCountry"),data:z.value,titles:[u(t)("supplier.new.unselectedCountry"),u(t)("supplier.new.selectedCountries")]},null,8,["modelValue","filter-placeholder","data","titles"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),e(fe,{ref_key:"EditRef",ref:A,onQueryData:B},null,512)])}}}),Pe=be(Ce,[["__scopeId","data-v-af216444"]]);export{Pe as default};
