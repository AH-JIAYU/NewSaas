
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as p,d as I,a5 as S,l as _,b as m,o as y,e as b,g as f,w as i,j as l,h as w,f as k,k as E,an as D,aE as h}from"./index-C-pApz5G.js";/* empty css                      */const A={list:r=>p.post("callback/getProjectSurveyScreenList",r),childList:r=>p.post("callback/getProjectScreenMemberChildList",r),getDetail:r=>p.post("callback/getProjectSurveyScreenDetailList",r)},V=I({__name:"index",setup(r,{expose:C}){const s=S({visible:!1,survey:null}),g=c=>{let e=[];return c.forEach(o=>{if(o.projectCorrectAnswerId.includes(",")){const a=o.projectCorrectAnswerId.split(",").map(n=>n.trim());e=e.concat(a)}else e.push(o.projectCorrectAnswerId.trim())}),e},j=async c=>{const e=await A.getDetail({id:c.id}),o=D(JSON.parse(e.data.projectJson));o.pages.forEach(n=>{n.elements.forEach(t=>{t.readOnly=!0;const v=e.data.projectSurveyScreenDetailInfoList.find(d=>d.projectProblemId===t.surveyId);if(v&&t.type==="radiogroup"){const d=t.choices.filter(u=>v.projectAnswerId.includes(u.surveyId));t.defaultValue=d.map(u=>u.value)}})}),s.survey=new h.Model(JSON.stringify(o)),s.survey.showNavigationButtons=!1;const a=g(e.data.projectSurveyScreenDetailInfoList);s.survey.onUpdateChoiceItemCss.add(function(n,t){a.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),s.visible=!0};return _(async()=>{}),C({showEdit:j}),(c,e)=>{const o=m("SurveyComponent"),a=m("ElButton"),n=m("ElDrawer");return y(),b("div",null,[f(n,{modelValue:l(s).visible,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).visible=t),title:"查看",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{footer:i(()=>[f(a,{size:"large",onClick:e[0]||(e[0]=t=>l(s).visible=!1)},{default:i(()=>[w(" 取消 ")]),_:1}),f(a,{type:"primary",size:"large",onClick:e[1]||(e[1]=t=>l(s).visible=!1)},{default:i(()=>[w(" 确定 ")]),_:1})]),default:i(()=>[l(s).survey?(y(),k(o,{key:0,model:l(s).survey,style:{width:"100%"}},null,8,["model"])):E("",!0)]),_:1},8,["modelValue"])])}}});export{V as _,A as a};
