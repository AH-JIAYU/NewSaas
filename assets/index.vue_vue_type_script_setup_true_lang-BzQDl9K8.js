
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as M,l as Q,$ as H,r as v,a3 as I,a4 as J,n as K,a as u,o as c,b as V,f as e,w as l,i as t,ar as W,F as k,t as C,e as A,y as f,g as U,A as X,_ as Y}from"./index-BeWhji_N.js";import{u as ee,v as le}from"./index-BKVyONIy.js";import{u as ae}from"./survey_vipGroup-DgM81eQr.js";import{a as te}from"./department-xzeEhQzW.js";const oe=f("div",{class:"card-header"},[f("span",null,"基本信息")],-1),ne=f("div",{class:"card-header"},[f("span",null,"权限信息")],-1),re={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},me=M({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(T){const P=Q(),B=ee();ae();const R=H("validateTopTabs"),h=T,_=v("basicSettings"),y=v(),p=I({vipLevelList:[],vipGroupList:[],countryList:[]}),m=I({memberNickname:[{required:!0,message:"请输入会员昵称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择区域",trigger:"change"}]}),q=(i,n,d)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(o.value.memberPhone)?d():d(new Error("请输入合法手机号"))},$=(i,n,d)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.value.emailAddress)?d():d(new Error("请输入合法邮箱"))},L=i=>{i&&(o.value.countryType=i==="343"?1:2,i==="343"?(m.emailAddress&&delete m.emailAddress,m.memberPhone=[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:q,trigger:"blur"}]):(m.memberPhone&&delete m.memberPhone,m.emailAddress=[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:$,trigger:"blur"}]))},x=async()=>{p.vipLevelList=await B.getLevelNameList()},j=async()=>{await x();const i=await te.list({name:""});p.departmentList=i.data,p.countryList=await P.getCountry()},S=v(null),o=v(h.leftTab);J(()=>{R(S.value)});const z=()=>{y.value.showEdit()};return K(async()=>{await j(),L(o.value.subordinateCountryId)}),(i,n)=>{const d=u("el-input"),r=u("el-form-item"),s=u("el-col"),w=u("el-option"),N=u("el-select"),g=u("el-row"),E=u("el-card"),b=u("el-switch"),D=u("el-divider"),F=Y,G=u("el-button"),O=u("el-tab-pane"),Z=u("el-tabs");return c(),V("div",null,[e(Z,{modelValue:t(_),"onUpdate:modelValue":n[11]||(n[11]=a=>X(_)?_.value=a:null)},{default:l(()=>[e(O,{label:"会员信息",name:"basicSettings"},{default:l(()=>[e(t(W),{ref_key:"formRef",ref:S,model:t(o),rules:t(m),"label-width":"100px","validate-on-rule-change":!1},{default:l(()=>[e(E,{class:"box-card"},{header:l(()=>[oe]),default:l(()=>[e(g,{gutter:24},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(r,{label:"会员名称",prop:"memberNickname"},{default:l(()=>[e(d,{modelValue:t(o).memberNickname,"onUpdate:modelValue":n[0]||(n[0]=a=>t(o).memberNickname=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"所属区域",prop:"subordinateCountryId"},{default:l(()=>[e(N,{clearable:"",filterable:"",modelValue:t(o).subordinateCountryId,"onUpdate:modelValue":n[1]||(n[1]=a=>t(o).subordinateCountryId=a),onChange:L},{default:l(()=>[(c(!0),V(k,null,C(t(p).countryList,a=>(c(),A(w,{key:a.id,value:a.id,label:a.chineseName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"会员姓名"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).memberName,"onUpdate:modelValue":n[2]||(n[2]=a=>t(o).memberName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"手机号码",prop:"memberPhone"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).memberPhone,"onUpdate:modelValue":n[3]||(n[3]=a=>t(o).memberPhone=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"电子邮箱",prop:"emailAddress"},{default:l(()=>[e(d,{clearable:"",modelValue:t(o).emailAddress,"onUpdate:modelValue":n[4]||(n[4]=a=>t(o).emailAddress=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"初始密码"},{default:l(()=>[e(d,{clearable:"",value:"123456",disabled:""})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"box-card"},{header:l(()=>[ne]),default:l(()=>[e(g,{gutter:20},{default:l(()=>[e(s,{span:4},{default:l(()=>[e(r,{label:"会员状态"},{default:l(()=>[e(b,{"active-value":2,"inactive-value":1,modelValue:t(o).memberStatus,"onUpdate:modelValue":n[5]||(n[5]=a=>t(o).memberStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:l(()=>[e(r,{label:"B2B"},{default:l(()=>[e(b,{"active-value":2,"inactive-value":1,modelValue:t(o).b2bStatus,"onUpdate:modelValue":n[6]||(n[6]=a=>t(o).b2bStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:l(()=>[e(r,{label:"B2C"},{default:l(()=>[e(b,{"active-value":2,"inactive-value":1,modelValue:t(o).b2cStatus,"onUpdate:modelValue":n[7]||(n[7]=a=>t(o).b2cStatus=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:5},{default:l(()=>[e(r,{label:"免审"},{default:l(()=>[e(b,{"active-value":2,"inactive-value":1,modelValue:t(o).exemptionTrial,"onUpdate:modelValue":n[8]||(n[8]=a=>t(o).exemptionTrial=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:4},{default:l(()=>[e(r,{label:"随机身份"},{default:l(()=>[e(b,{"active-value":2,"inactive-value":1,modelValue:t(o).randomStatus,"onUpdate:modelValue":n[9]||(n[9]=a=>t(o).randomStatus=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{"content-position":"center"}),e(g,{gutter:20},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(r,{label:"会员等级",prop:"memberLevelId"},{default:l(()=>[e(N,{clearable:"",filterable:"",modelValue:t(o).memberLevelId,"onUpdate:modelValue":n[10]||(n[10]=a=>t(o).memberLevelId=a)},{empty:l(()=>[f("div",re,[U(" 暂无数据 "),e(G,{type:"primary",link:"",onClick:z,size:"small"},{default:l(()=>[U(" 快捷新增 "),e(F,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"2px",margin:"0 2px"}})]),_:1})])]),default:l(()=>[(c(!0),V(k,null,C(t(p).vipLevelList,a=>(c(),A(w,{key:a.memberLevelId,value:a.memberLevelId,label:a.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:l(()=>[e(r,{label:"部门"})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),e(le,{ref_key:"EditRef",ref:y,onQueryData:x},null,512)])}}});export{me as _};
