
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,ae as J,r as p,o as K,a3 as r,b as m,c as b,w as e,f as c,g as a,h as i,t as s,i as n,j as V,P as Q,O as W,aj as X,z as Y}from"./index-mJqsIMw-.js";import{a as Z}from"./department-Dtv_2BGp.js";import{u as $}from"./tenant_role-BtxbcMsu.js";import{u as ee}from"./configuration_manager-DrUxDc7Q.js";import{u as ae}from"./position_manage-CBRteuHU.js";import"./configuration_role-icY-vblN.js";import"./position_manage-BxYdaog_.js";const te={class:"card-header"},le={class:"leftTitle"},oe={key:1,class:"avatar"},ne={style:{"font-size":"14px"}},se={class:"card-header"},ue={class:"leftTitle"},ie={class:"card-header"},re={class:"leftTitle"},de={class:"flex-c"},ce=H({__name:"index",emits:["fetch-data"],setup(fe,{expose:z,emit:I}){const{t:o}=J(),L=ee(),D=p([]),M=ae(),P=p(),j=$(),S=p(),x=p(),B={children:"children",label:"name"},y=p([]),h=p({}),R=I,k=p(!1),t=p();async function E(v){h.value=v,h.value.roleList=[h.value.role];const _={id:v.id},{status:u,data:N}=await X.list(_);N&&u===1&&(t.value=N.data[0]),y.value&&y.value.push(t.value.organizationalStructureId),k.value=!0}function T(){R("fetch-data"),y.value=[],k.value=!1}return K(async()=>{P.value=await M.getPositionManage(),D.value=await L.getStaff(),S.value=await j.getRole();const v=await Z.list({name:""});v.data&&(x.value=v.data,x.value.forEach(_=>{_.disabled=!0}))}),z({showEdit:E}),(v,_)=>{const u=r("el-col"),N=r("el-avatar"),w=r("el-row"),f=r("el-text"),d=r("el-form-item"),C=r("el-card"),U=r("el-checkbox"),F=r("el-checkbox-group"),O=r("el-tree"),q=r("el-form"),A=r("el-button"),G=r("el-drawer");return m(),b(G,{modelValue:k.value,"onUpdate:modelValue":_[1]||(_[1]=l=>k.value=l),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:n(o)("common.detail"),onClose:T},{footer:e(()=>[c("div",de,[a(A,{type:"primary",onClick:T},{default:e(()=>[i(s(n(o)("common.close")),1)]),_:1})])]),default:e(()=>[a(q,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(C,{class:"box-card"},{header:e(()=>[c("div",te,[c("div",le,s(n(o)("configuration.user.detail.basicInformation")),1)])]),default:e(()=>[a(w,{gutter:20},{default:e(()=>[a(u,{span:1}),a(u,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[t.value.avatar?(m(),b(N,{key:0,size:50,src:t.value.avatar},null,8,["src"])):(m(),V("div",oe,s(t.value.name),1))]),_:1}),a(u,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[c("p",null,s(t.value.userName),1),c("p",ne,[i(s(n(o)("configuration.user.detail.account")),1),c("span",null,s(t.value.userName),1)])]),_:1})]),_:1}),a(w,{gutter:24},{default:e(()=>[a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.id")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.id?t.value.id:"-"),1)]}),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.name")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.name?t.value.name:"-"),1)]}),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.phoneNumber")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.phoneNumber?t.value.phoneNumber:"-"),1)]}),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.email")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.email?t.value.email:"-"),1)]}),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.department")},{default:e(()=>[i(s(t.value.organizationalStructureName?t.value.organizationalStructureName:"-"),1)]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.position")},{default:e(()=>[a(f,null,{default:e(()=>[i(s(t.value.positionName?t.value.positionName:"-"),1)]),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.accountStatus")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.active?n(o)("common.enable"):n(o)("common.disable")),1)]}),_:1})]),_:1},8,["label"])]),_:1}),a(u,{span:6},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.createTime")},{default:e(()=>[a(f,{class:"mx-1"},{default:e(()=>{var l;return[i(s((l=t.value)!=null&&l.createTime?t.value.createTime:"-"),1)]}),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),a(C,{class:"box-card"},{header:e(()=>[c("div",se,[c("div",ue,s(n(o)("configuration.user.detail.roleInformation")),1)])]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.assignRoles")},{default:e(()=>{var l;return[(l=S.value)!=null&&l.length?(m(),b(F,{key:0,style:{"margin-left":"1.5rem"},modelValue:h.value.roleList,"onUpdate:modelValue":_[0]||(_[0]=g=>h.value.roleList=g)},{default:e(()=>[(m(!0),V(W,null,Q(S.value,g=>(m(),b(U,{key:g.id,label:g.roleName,value:g.roleName,disabled:""},{default:e(()=>[i(s(g.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(m(),b(f,{key:1},{default:e(()=>[i(s(n(o)("common.nodata")),1)]),_:1}))]}),_:1},8,["label"])]),_:1})]),_:1}),a(C,{class:"box-card"},{header:e(()=>[c("div",ie,[c("div",re,s(n(o)("configuration.user.detail.departtmentInformation")),1)])]),default:e(()=>[a(w,{gutter:24},{default:e(()=>[a(d,{label:n(o)("configuration.user.detail.assignDepartments")},{default:e(()=>[x.value.length>0?(m(),b(O,{key:0,style:{"max-width":"600px"},ref:"treeRef",disabled:!0,data:x.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":y.value,"default-expand-all":"",props:B,onCheckChange:v.handleNodeClick},null,8,["data","default-checked-keys","onCheckChange"])):(m(),b(f,{key:1},{default:e(()=>[i(s(n(o)("common.nodata")),1)]),_:1}))]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}}),xe=Y(ce,[["__scopeId","data-v-376c4afe"]]);export{xe as default};
