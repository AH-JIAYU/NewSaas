
/**
 * ç”± Fantastic-admin æä¾›æŠ€æœ¯æ”¯æŒ
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-Cr-kzr_B.js";import{k as N,d as ge,s as fe,Y as _e,Z as ve,r as i,b5 as V,aM as be,b as A,f as l,w as o,l as n,i as e,ak as $,aK as P,t as we,a as _,az as ye,aA as he,L as xe,o as E,D as h,ax as Ve,g as d,aw as z,F as ke,n as Ce,e as Z,j as O,ai as Ee,K as Se,_ as Ue,p as T}from"./index-Cw-g3-rV.js";import Fe from"./index-XTsBlV7a.js";const B={sendSms:c=>N.post("user/sendSms",{phoneNumber:c}),sendEmail:c=>N.post("user/sendEmail",{email:c}),register:c=>N.post("user/register",c)},k=c=>(ye("data-v-4741c092"),c=c(),he(),c),Re=k(()=>n("div",{class:"bg-banner"},null,-1)),Ie={id:"login-box"},qe={class:"login-banner"},Le=["src"],Ne=["src"],$e={class:"title-container"},Pe={class:"title"},ze={class:"flex-bar"},Be={class:"sub-link"},De=k(()=>n("span",{class:"text"},"è¿˜æ²¡æœ‰å¸å·?",-1)),Ke={style:{"margin-top":"20px","margin-bottom":"-20px","text-align":"center"}},Me=k(()=>n("div",{class:"title-container"},[n("h3",{class:"title"},"æŽ¢ç´¢ä»Žè¿™é‡Œå¼€å§‹! ðŸš€")],-1)),Ae={class:"sub-link"},Ze=k(()=>n("span",{class:"text"},"å·²ç»æœ‰å¸å·?",-1)),Oe=k(()=>n("div",{class:"title-container"},[n("h3",{class:"title"},"å¿˜è®°å¯†ç äº†? ðŸ”’")],-1)),Te={class:"sub-link"},j=ge({name:"Login",__name:"login",setup(c){var M;const G=we(),Y=xe(),H=fe(),J=_e(),{t:f}=ve(),Q=new URL(""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,import.meta.url).href,W=new URL(""+new URL("logo-CLz_KCqM.png",import.meta.url).href,import.meta.url).href,X="Fantastic-admin ä¸“ä¸šç‰ˆ",v=i("login"),y=i(!1),ee=i(((M=G.query.redirect)==null?void 0:M.toString())??H.settings.home.fullPath),S=i(),u=i({account:V.local.get("login_account")||"",password:"",remember:V.local.has("login_account")}),le=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]});function U(){S.value&&S.value.validate(r=>{r&&(y.value=!0,J.login(u.value).then(()=>{y.value=!1,u.value.remember?V.local.set("login_account",u.value.account):V.local.remove("login_account"),Y.push(ee.value)}).catch(()=>{y.value=!1}))})}const x=i(null),F=i("èŽ·å–éªŒè¯ç "),R=i(!1),I=i(),s=i({account:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone"}),oe=[{value:"phone",label:"æ‰‹æœºå·æ³¨å†Œ"},{value:"email",label:"é‚®ç®±æ³¨å†Œ"}],te=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],email:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥é‚®ç®±"}],phoneNumber:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·ç "}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]}),ae=async()=>{if(console.log("registerForm",s.value.type),s.value.type==="phone"){const r=await B.sendSms(s.value.phoneNumber);D(),console.log("phone",r)}else{const r=await B.sendEmail(s.value.email);D(),console.log("email",r)}},D=()=>{R.value=!0;let r=60;x.value=setInterval(()=>{r>0?(r--,F.value=`è¯·åœ¨${r}såŽé‡æ–°èŽ·å–`):(clearInterval(x.value),F.value="èŽ·å–éªŒè¯ç ",x.value=null,R.value=!1)},1e3)};async function ne(){I.value&&I.value.validate(async r=>{if(r){const t=await B.register(s.value);console.log("data",t)}})}const q=i(),b=i({account:V.local.get("login_account"),code:"",newPassword:""}),se=i({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],newPassword:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]});function re(){Ee({message:"é‡ç½®å¯†ç ä»…æä¾›ç•Œé¢æ¼”ç¤ºï¼Œæ— å®žé™…åŠŸèƒ½ï¼Œéœ€å¼€å‘è€…è‡ªè¡Œæ‰©å±•",type:"info"}),q.value&&q.value.validate(r=>{})}function K(r){u.value.account=r,u.value.password="123456",U()}return be(()=>{clearInterval(x.value),x.value=null}),(r,t)=>{const p=Se,ie=ce,g=_("ElInput"),m=_("ElFormItem"),de=_("ElCheckbox"),C=_("ElLink"),w=_("ElButton"),ue=_("ElDivider"),L=_("ElForm"),pe=_("ElOption"),me=_("ElSelect");return E(),A("div",null,[Re,l(ie,{placement:"bottom-end",class:"i18n-selector"},{default:o(()=>[l(p,{name:"i-ri:translate"})]),_:1}),n("div",Ie,[n("div",qe,[n("img",{src:e(W),class:"logo"},null,8,Le),n("img",{src:e(Q),class:"banner"},null,8,Ne)]),$(l(L,{ref_key:"loginFormRef",ref:S,model:e(u),rules:e(le),class:"login-form"},{default:o(()=>[n("div",$e,[n("h3",Pe,"æ¬¢è¿Žæ¥åˆ° "+h(e(X))+" ! ðŸ‘‹ðŸ»",1)]),n("div",null,[l(m,{prop:"account"},{default:o(()=>[l(g,{modelValue:e(u).account,"onUpdate:modelValue":t[0]||(t[0]=a=>e(u).account=a),placeholder:e(f)("app.account"),type:"text",tabindex:"1"},{prefix:o(()=>[l(p,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),l(m,{prop:"password"},{default:o(()=>[l(g,{modelValue:e(u).password,"onUpdate:modelValue":t[1]||(t[1]=a=>e(u).password=a),type:"password",placeholder:e(f)("app.password"),tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:Ve(U,["enter"])},{prefix:o(()=>[l(p,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),n("div",ze,[l(de,{modelValue:e(u).remember,"onUpdate:modelValue":t[2]||(t[2]=a=>e(u).remember=a)},{default:o(()=>[d(" è®°ä½æˆ‘ ")]),_:1},8,["modelValue"]),l(C,{type:"primary",underline:!1,onClick:t[3]||(t[3]=a=>v.value="reset")},{default:o(()=>[d(" å¿˜è®°å¯†ç äº†? ")]),_:1})]),l(w,{loading:e(y),type:"primary",size:"large",style:{width:"100%"},onClick:z(U,["prevent"])},{default:o(()=>[d(h(e(f)("app.login")),1)]),_:1},8,["loading"]),n("div",Be,[De,l(C,{type:"primary",underline:!1,onClick:t[4]||(t[4]=a=>v.value="register")},{default:o(()=>[d(" åˆ›å»ºæ–°å¸å· ")]),_:1})]),n("div",Ke,[l(ue,null,{default:o(()=>[d("æ¼”ç¤ºè´¦å·ä¸€é”®ç™»å½•")]),_:1}),l(w,{type:"primary",size:"small",plain:"",onClick:t[5]||(t[5]=a=>K("admin"))},{default:o(()=>[d(" admin ")]),_:1}),l(w,{size:"small",plain:"",onClick:t[6]||(t[6]=a=>K("test"))},{default:o(()=>[d(" test ")]),_:1})])]),_:1},8,["model","rules"]),[[P,e(v)==="login"]]),$(l(L,{ref_key:"registerFormRef",ref:I,model:e(s),rules:e(te),class:"login-form","auto-complete":"on"},{default:o(()=>[Me,n("div",null,[l(m,{prop:"account"},{default:o(()=>[l(g,{modelValue:e(s).account,"onUpdate:modelValue":t[7]||(t[7]=a=>e(s).account=a),placeholder:"ç”¨æˆ·å",tabindex:"1"},{prefix:o(()=>[l(p,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),l(m,{prop:"type"},{default:o(()=>[l(me,{modelValue:e(s).type,"onUpdate:modelValue":t[8]||(t[8]=a=>e(s).type=a),placeholder:"æ³¨å†Œæ–¹å¼",tabindex:"2"},{prefix:o(()=>[l(p,{name:"i-mdi:format-list-bulleted-type"})]),default:o(()=>[(E(),A(ke,null,Ce(oe,a=>l(pe,{label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(s).type==="phone"?(E(),Z(m,{key:0,prop:"phoneNumber"},{default:o(()=>[l(g,{modelValue:e(s).phoneNumber,"onUpdate:modelValue":t[9]||(t[9]=a=>e(s).phoneNumber=a),placeholder:"æ‰‹æœºå·",tabindex:"3"},{prefix:o(()=>[l(p,{name:"i-ant-design:phone-outlined"})]),_:1},8,["modelValue"])]),_:1})):O("",!0),e(s).type==="email"?(E(),Z(m,{key:1,prop:"email"},{default:o(()=>[l(g,{modelValue:e(s).email,"onUpdate:modelValue":t[10]||(t[10]=a=>e(s).email=a),placeholder:"é‚®ç®±",tabindex:"3"},{prefix:o(()=>[l(p,{name:"i-mdi:email"})]),_:1},8,["modelValue"])]),_:1})):O("",!0),l(m,{prop:"code"},{default:o(()=>[l(g,{modelValue:e(s).code,"onUpdate:modelValue":t[11]||(t[11]=a=>e(s).code=a),placeholder:"éªŒè¯ç ",tabindex:"2"},{prefix:o(()=>[l(p,{name:"i-ic:baseline-verified-user"})]),append:o(()=>[l(w,{disabled:e(R),onClick:ae},{default:o(()=>[d(h(e(F)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(m,{prop:"password"},{default:o(()=>[l(g,{modelValue:e(s).password,"onUpdate:modelValue":t[12]||(t[12]=a=>e(s).password=a),type:"password",placeholder:"å¯†ç ",tabindex:"3","show-password":""},{prefix:o(()=>[l(p,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),l(w,{loading:e(y),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:z(ne,["prevent"])},{default:o(()=>[d(" æ³¨å†Œ ")]),_:1},8,["loading"]),n("div",Ae,[Ze,l(C,{type:"primary",underline:!1,onClick:t[13]||(t[13]=a=>v.value="login")},{default:o(()=>[d(" åŽ»ç™»å½• ")]),_:1})])]),_:1},8,["model","rules"]),[[P,e(v)==="register"]]),$(l(L,{ref_key:"resetFormRef",ref:q,model:e(b),rules:e(se),class:"login-form"},{default:o(()=>[Oe,n("div",null,[l(m,{prop:"account"},{default:o(()=>[l(g,{modelValue:e(b).account,"onUpdate:modelValue":t[14]||(t[14]=a=>e(b).account=a),placeholder:e(f)("app.account"),type:"text",tabindex:"1"},{prefix:o(()=>[l(p,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),l(m,{prop:"code"},{default:o(()=>[l(g,{modelValue:e(b).code,"onUpdate:modelValue":t[15]||(t[15]=a=>e(b).code=a),placeholder:e(f)("app.code"),type:"text",tabindex:"2"},{prefix:o(()=>[l(p,{name:"i-ic:baseline-verified-user"})]),append:o(()=>[l(w,null,{default:o(()=>[d(h(e(f)("app.sendCaptcha")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),l(m,{prop:"newPassword"},{default:o(()=>[l(g,{modelValue:e(b).newPassword,"onUpdate:modelValue":t[16]||(t[16]=a=>e(b).newPassword=a),type:"password",placeholder:e(f)("app.newPassword"),tabindex:"3","show-password":""},{prefix:o(()=>[l(p,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),l(w,{loading:e(y),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:z(re,["prevent"])},{default:o(()=>[d(h(e(f)("app.check")),1)]),_:1},8,["loading"]),n("div",Te,[l(C,{type:"primary",underline:!1,onClick:t[17]||(t[17]=a=>v.value="login")},{default:o(()=>[d(h(e(f)("app.goLogin")),1)]),_:1})])]),_:1},8,["model","rules"]),[[P,e(v)==="reset"]])]),l(Fe)])}}});typeof T=="function"&&T(j);const He=Ue(j,[["__scopeId","data-v-4741c092"]]);export{He as default};
