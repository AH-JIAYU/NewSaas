
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,aM as U,r as m,z as P,c as T,k as z,a as b,o as d,b as c,f as u,w as _,s as o,i as t,S as f,H as l,ah as A,F as L,t as N,j as p,e as v,q as F,ap as j,n as $,ao as O,R as G,an as D}from"./index-BzjzRFt1.js";import J from"./notification-news-CpYrfADy.js";import K from"./notification-cooperation-wQeK3DFd.js";const Q={class:"absolute-container"},W={class:"flex-c"},X={class:"left"},Y={class:"buttons"},Z=["onClick"],ee={class:"info"},te={class:"time"},se={key:0,class:"new"},ae={class:"auditType"},oe={class:"time"},ne={class:"data"},ie={class:"buttons"},de=["onClick"],le={class:"info"},ce={class:"time"},re={key:0,class:"new"},ue={class:"auditType"},_e={class:"time"},fe={class:"data"},pe={key:0,class:"right"},S=H({name:"PersonalNotification",__name:"notification",setup(ye){const n=U(),h=m(),k=m(),r=P(),e=m({tabs:"",selectId:"",ReadAlready:1});function g(a){e.value.selectId=a.id,$(()=>{var i;(i=k.value)==null||i.showEdit(a)})}function w(a){e.value.selectId=a.id,$(()=>{h.value.showEdit(a)})}const q=async()=>{console.log("data.value.tabs",e.value.tabs),e.value.selectId="",e.value.ReadAlready=1,e.value.tabs==="news"?await n.getUnreadMessage():e.value.tabs==="cooperation"&&await n.getUnreadTodo()};async function R(){e.value.selectId=""}const y=async a=>{e.value.ReadAlready=a,e.value.tabs==="news"?await n.getUnreadMessage():e.value.tabs==="cooperation"&&await n.getUnreadTodo()},x=T(()=>n.messageList.filter(a=>a.isReadAlready===e.value.ReadAlready)),E=T(()=>n.todoList.filter(a=>a.isReadAlready===e.value.ReadAlready));return z(()=>{if(n.isItConnected(),e.value.tabs=r.query.type==2?"cooperation":"news",r.query.id){if(Number(r.query.type)===1){const a=n.messageList.find(i=>i.id===r.query.id);a&&g(a)}else if(Number(r.query.type)===2){const a=n.todoList.find(i=>i.id===r.query.id);a&&w(a)}}}),(a,i)=>{const C=b("el-empty"),I=b("el-tab-pane"),M=b("el-tabs"),V=O;return d(),c("div",Q,[u(V,null,{default:_(()=>[o("div",W,[o("div",X,[u(M,{modelValue:t(e).tabs,"onUpdate:modelValue":i[4]||(i[4]=s=>t(e).tabs=s),onTabChange:q},{default:_(()=>[u(I,{label:"消息",name:"news"},{default:_(()=>[o("div",Y,[o("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:i[0]||(i[0]=s=>y(1))},"未读"+l(t(n).message<100?`(${t(n).message})`:"99+"),3),o("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:i[1]||(i[1]=s=>y(2))},"已读",2)]),u(t(A),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(n).messageList.length?(d(!0),c(L,{key:0},N(t(x),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>g(s)},[o("div",ee,[o("div",te,[s.isReadAlready===1?(d(),c("span",se)):p("",!0),o("span",ae,l(t(n).auditTypeList[s.auditType-1]||""),1),o("span",oe,l(s.createTime),1)]),o("div",ne,l(s.messageContent),1)])],10,Z))),256)):(d(),v(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1}),u(I,{label:"代办",name:"cooperation"},{default:_(()=>[o("div",ie,[o("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:i[2]||(i[2]=s=>y(1))},"未读"+l(t(n).todo<100?`(${t(n).todo})`:"99+"),3),o("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:i[3]||(i[3]=s=>y(2))},"已读",2)]),u(t(A),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(n).todoList.length?(d(!0),c(L,{key:0},N(t(E),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>w(s)},[o("div",le,[o("div",ce,[s.isReadAlready===1?(d(),c("span",re)):p("",!0),o("span",ue,l(t(n).auditTypeList[s.auditType-1]||""),1),o("span",_e,l(s.createTime),1)]),o("div",fe," 您好，我是"+l(s.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(s.phoneOrEmail)+"。 ",1)])],10,de))),256)):(d(),v(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e).selectId?F((d(),c("div",pe,[t(e).tabs==="news"?(d(),v(J,{key:0,ref_key:"newsRef",ref:k,onDelSelectId:R},null,512)):p("",!0),t(e).tabs==="cooperation"?(d(),v(K,{key:1,ref_key:"cooperationRef",ref:h,onDelSelectId:R},null,512)):p("",!0)],512)),[[j,t(e).selectId]]):p("",!0)])]),_:1})])}}});typeof D=="function"&&D(S);const he=G(S,[["__scopeId","data-v-e4b5c54d"]]);export{he as default};
