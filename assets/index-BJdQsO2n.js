
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./tenantDictionary-CJtKUiIc.js";import{d as M,m as N,u as q,c as F,r as f,k as L,a as m,o as R,e as S,w as d,f as a,g as E,i as o,E as k,R as z}from"./index-DmgRXF6j.js";const A=M({__name:"index",props:N({catalogueId:{default:""},parentId:{default:""},id:{default:""},tree:{},dataList:{},row:{},level:{default:1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:N(["success"],["update:modelValue"]),setup(V,{emit:y}){const s=V,g=y,v=q(V,"modelValue"),w=F(()=>s.id===""?"新增字典项":"编辑字典项"),i=f(),b=f([]),e=f({id:s.id,parentId:s.parentId,catalogueId:s.catalogueId,englishName:"",chineseName:"",code:"",remark:"",level:s.level}),C=f({catalogueId:[{required:!0,message:"请选择所属字典"}],chineseName:[{required:!0,message:"请输入字典项名称"}],englishName:[{required:!0,message:"请输入字典项英文名称"}],code:[{required:!0,message:"请输入字典项键值"}]}),x=n=>{if(n){const l=b.value.find(u=>u.id===n);e.value.level=Number(l.level)+1}else e.value.level=1};function U(){e.value.id===""?i.value&&i.value.validate(n=>{n&&_.itemcreate(e.value).then(()=>{k.success({message:"新增成功",center:!0}),g("success"),c()})}):i.value&&i.value.validate(n=>{n&&_.itemedit(e.value).then(()=>{k.success({message:"编辑成功",center:!0}),g("success"),c()})})}function c(){v.value=!1}const h=n=>n.reduce((l,u)=>Array.isArray(u)?l.concat(h(u)):l.concat(u),[]);return L(()=>{s.id!==""&&s.row&&(e.value=JSON.parse(s.row)),b.value=h(s.dataList)}),(n,l)=>{const u=m("ElCascader"),r=m("ElFormItem"),p=m("ElInput"),B=m("ElForm"),I=m("ElButton"),D=m("ElDialog");return R(),S(D,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=t=>v.value=t),title:o(w),width:"400px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:c},{footer:d(()=>[a(I,{size:"large",onClick:c},{default:d(()=>[E(" 取消 ")]),_:1}),a(I,{type:"primary",size:"large",onClick:U},{default:d(()=>[E(" 确定 ")]),_:1})]),default:d(()=>[a(B,{ref_key:"formRef",ref:i,model:o(e),rules:o(C),"label-width":"100px"},{default:d(()=>[a(r,{label:"所属字典"},{default:d(()=>[a(u,{modelValue:o(e).catalogueId,"onUpdate:modelValue":l[0]||(l[0]=t=>o(e).catalogueId=t),options:s.tree,clearable:"",props:{value:"id",label:"chineseName",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择所属字典"},null,8,["modelValue","options"])]),_:1}),a(r,{label:"选择父级"},{default:d(()=>[a(u,{modelValue:o(e).parentId,"onUpdate:modelValue":l[1]||(l[1]=t=>o(e).parentId=t),options:s.dataList,clearable:"",props:{value:"id",label:"chineseName",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择所属父级",onChange:x},null,8,["modelValue","options"])]),_:1}),a(r,{label:"中文名称",prop:"chineseName"},{default:d(()=>[a(p,{modelValue:o(e).chineseName,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).chineseName=t),placeholder:"请输入中文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"英文名称",prop:"englishName"},{default:d(()=>[a(p,{modelValue:o(e).englishName,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).englishName=t),placeholder:"请输入英文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"字典项键值",prop:"code"},{default:d(()=>[a(p,{modelValue:o(e).code,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).code=t),placeholder:"请输入字典项键值",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"备注"},{default:d(()=>[a(p,{modelValue:o(e).remark,"onUpdate:modelValue":l[5]||(l[5]=t=>o(e).remark=t),placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),O=z(A,[["__scopeId","data-v-a79bca57"]]);export{O as default};
