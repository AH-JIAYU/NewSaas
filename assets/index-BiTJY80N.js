
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as E}from"./index-cCotfIW1.js";import"./index-iJRjh0Y-.js";import{a as F}from"./survey_myProjeck-J-dy2F_S.js";import{f as M,D as P}from"./download-cs4Swt4h.js";import{d as $,r as s,a3 as n,al as H,a4 as O,b as o,j as u,g as p,w as h,k as x,O as Q,P as R,f as w,h as Z,t as q,B as G,c as D,i as N,aM as J,aH as K,aI as W,z as X}from"./index-CZbucr5m.js";import{w as V,x as b,p as Y}from"./pdf-BhHCHn5I.js";const j=m=>(K("data-v-c29a5f12"),m=m(),W(),m),ee={key:0,class:"titleClass"},ae={key:1,class:"demo-image__preview",style:{display:"flex","flex-wrap":"wrap"}},te={class:"image-info"},le=j(()=>w("div",{class:"i-f7:doc-text w-1rem h-1rem"},null,-1)),se=j(()=>w("div",{class:"titleClass"},"描述",-1)),oe={class:"radius flex gap-2 p-2"},ie=$({__name:"index",setup(m,{expose:z}){const v=s(!1),y=s(""),e=s({}),k=s([]),f=s([]),U=s([]),_=s(!1),r=t=>{const a=t.match(/\.([a-zA-Z0-9]+)$/);return a?a[1]:""};async function B(t){try{if(v.value=!0,y.value="项目详情",t){_.value=!0;const a=await F.getQuotaProjectInfo({projectId:t.projectId});if(e.value=a.data,e.value.descriptionUrl!==""){const g=e.value.descriptionUrl.split(",");f.value=g;const i={doc:V,docx:V,xls:b,xlsx:b,pdf:Y};for(let l of g){const c=await M.detail({fileName:l});let C={src:i[r(l)]?i[r(l)]:c.data.fileUrl,src1:c.data.fileUrl,name:r(l)};U.value.push(C),k.value.push(i[r(l)]?i[r(l)]:c.data.fileUrl)}}f.value=k.value,_.value=!1}}catch{}finally{_.value=!1}}async function T(t){if(t){const a=decodeURIComponent(t.split("/").pop().split("?")[0]);await P(t,a)}}function L(){y.value="",e.value={},k.value=[],f.value=[],U.value=[],v.value=!1}return z({showEdit:B}),(t,a)=>{const g=n("el-image"),i=n("el-link"),l=n("el-col"),c=n("el-row"),C=n("el-empty"),S=n("el-dialog"),A=H("loading");return O((o(),u("div",null,[p(S,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=d=>v.value=d),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:y.value,draggable:"",width:"50%",onClose:L},{default:h(()=>[e.value.descriptionUrl?(o(),u("div",ee,"图片/文件")):x("",!0),e.value.descriptionUrl?(o(),u("div",ae,[(o(!0),u(Q,null,R(U.value,(d,I)=>(o(),u("div",{key:I,style:{"margin-bottom":".8125rem"}},[p(g,{style:{width:"6.25rem",height:"6.25rem","margin-right":"15px"},src:d.src,"preview-src-list":f.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":I,fit:"cover"},null,8,["src","preview-src-list","initial-index"]),w("div",te,[le,p(i,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:ne=>T(d.src1)},{default:h(()=>[Z(q(d.name)+"下载",1)]),_:2},1032,["onClick"])])]))),128))])):x("",!0),p(c,{gutter:20,class:G({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:h(()=>[p(l,{span:24},{default:h(()=>[se,w("div",oe,[e.value.richText?(o(),D(N(E),{key:0,value:e.value.richText},null,8,["value"])):x("",!0)])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(o(),D(C,{key:2,image:N(J),"image-size":300},null,8,["image"])):x("",!0)]),_:1},8,["modelValue","title"])])),[[A,_.value]])}}}),ve=X(ie,[["__scopeId","data-v-c29a5f12"]]);export{ve as default};
