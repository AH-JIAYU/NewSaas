
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as g}from"./apiLoading-d16gIlRY.js";import{u as S,a as V}from"./survey_vipLevel-D7FwKkrC.js";import{d as D,r as c,Z as E,a as r,o as T,e as U,w as l,f as s,g as _,i as a,A as B,ao as y,E as x,L as F}from"./index-ooHtBFCv.js";const M=D({__name:"index",emits:["queryData"],setup(A,{expose:L,emit:N}){const R=S(),k=N,n=c(!1),f=c(""),e=c(),p=c(),C=E({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入0以上的正整数",trigger:"blur"}]});async function q(o,t){if(!o)f.value="新增",e.value={};else if(f.value="编辑",o.memberId){const u=y(o),{additionRatio:m,memberLevelId:v,memberLevelName:d}=u;e.value={additionRatio:m,memberLevelId:v,levelName:d}}else e.value=y(o);n.value=!0}function b(){p.value.resetFields(),n.value=!1}function w(){p.value.validate(async o=>{if(o){if(e.value.memberLevelId){const{status:t}=await g(V.edit(e.value));t===1&&x.success({message:"编辑成功",center:!0})}else{const{status:t}=await g(V.create(e.value));t===1&&x.success({message:"新增成功",center:!0})}R.LevelNameList=null,k("queryData"),b()}})}return L({showEdit:q}),(o,t)=>{const u=r("el-input"),m=r("el-form-item"),v=r("el-form"),d=r("el-button"),I=r("el-dialog");return T(),U(I,{modelValue:a(n),"onUpdate:modelValue":t[2]||(t[2]=i=>B(n)?n.value=i:null),title:a(f),width:"600"},{footer:l(()=>[s(d,{onClick:b},{default:l(()=>[_(" 取消 ")]),_:1}),s(d,{type:"primary",onClick:w},{default:l(()=>[_(" 确定 ")]),_:1})]),default:l(()=>[s(v,{ref_key:"formRef",ref:p,model:a(e),rules:a(C),"label-width":"7rem",inline:!1},{default:l(()=>[s(m,{label:"等级名称",prop:"levelName"},{default:l(()=>[s(u,{modelValue:a(e).levelName,"onUpdate:modelValue":t[0]||(t[0]=i=>a(e).levelName=i),maxlength:"100"},null,8,["modelValue"])]),_:1}),s(m,{label:"价格比例",prop:"additionRatio"},{default:l(()=>[s(u,{modelValue:a(e).additionRatio,"onUpdate:modelValue":t[1]||(t[1]=i=>a(e).additionRatio=i),modelModifiers:{number:!0},min:1,max:100,type:"number"},{append:l(()=>[_(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),j=F(M,[["__scopeId","data-v-9c039949"]]);export{j as default};
