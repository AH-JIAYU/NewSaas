
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as F}from"./apiLoading-BhJI3t5Q.js";import{u as T}from"./survey_vipLevel-DFLWB83O.js";import{a as _}from"./survey_vip-CQ9OpLzR.js";import{d as h,r as m,$ as b,a as s,o as c,e as L,w as a,f as i,g,i as o,b as D,t as M,F as U,B as A,E as O,M as $}from"./index-BDq3fI5e.js";const j=h({__name:"index",emits:["queryData"],setup(z,{expose:y,emit:V}){const I=T(),w=V,n=m(!1),u=m(""),e=m(),d=m(),k=b({memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}]}),f=b({vipLevelList:[]}),x=async()=>{f.vipLevelList=await I.getLevelNameList()};async function C(r){if(!r)u.value="新增",e.value={};else{await x(),u.value="编辑";const{data:t}=await _.detail({memberId:r.memberId});e.value=t,e.value.countryType=e.value.subordinateCountryId==="343"?1:2}n.value=!0}function v(){d.value.resetFields(),n.value=!1}function N(){d.value.validate(async r=>{if(r){const{status:t}=await F(_.edit(e.value));t===1&&O.success({message:"修改成功",center:!0}),w("queryData"),v()}})}return y({showEdit:C}),(r,t)=>{const B=s("el-option"),E=s("el-select"),R=s("el-form-item"),S=s("el-form"),p=s("el-button"),q=s("el-dialog");return c(),L(q,{modelValue:o(n),"onUpdate:modelValue":t[1]||(t[1]=l=>A(n)?n.value=l:null),title:o(u),width:"600"},{footer:a(()=>[i(p,{onClick:v},{default:a(()=>[g(" 取消 ")]),_:1}),i(p,{type:"primary",onClick:N},{default:a(()=>[g(" 确定 ")]),_:1})]),default:a(()=>[i(S,{ref_key:"formRef",ref:d,model:o(e),rules:o(k),"label-width":"7rem",inline:!1},{default:a(()=>[i(R,{label:"会员等级",prop:"memberLevelId"},{default:a(()=>[i(E,{clearable:"",filterable:"",modelValue:o(e).memberLevelId,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).memberLevelId=l)},{default:a(()=>[(c(!0),D(U,null,M(o(f).vipLevelList,l=>(c(),L(B,{key:l.memberLevelId,value:l.memberLevelId,label:l.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),P=$(j,[["__scopeId","data-v-7230a38c"]]);export{P as default};
