
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,l as Ne,aN as we,r as c,a3 as je,c as Le,n as Se,a as f,q as xe,o as a,b as k,f as l,w as o,i as t,g as s,A as v,s as Pe,e as i,aM as ze,y as N,z as p,N as D,j as d,F as J,t as Re,bf as Be,b9 as Ee,ba as Te,be as Ae,ap as De,L as Ue}from"./index-D2mxR2r5.js";import{_ as Me}from"./index-XuqAS12h.js";import{_ as Oe}from"./index.vue_vue_type_style_index_0_lang-C0vzMHfe.js";import{_ as Fe}from"./index-CWIEFZtu.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-CbZeosJG.js";import He from"./index-hQBaYOT_.js";import Ve from"./index-CjJKsHdT.js";import qe from"./index-CJzvX7Ne.js";import{a as Ge}from"./survey_myProjeck-B9ZHMiOk.js";import{u as Qe}from"./user_customer-Bu4rrrb5.js";import"./clipboard-DBO2OsF4.js";import"./index-BRnTwaka.js";import"./index.vue_vue_type_script_setup_true_lang-Bv8T-XcW.js";import"./sortable.esm-C0-Qcoum.js";import"./index-METx0D4y.js";import"./file-zIvVqmrS.js";import"./download-C8PHVIy1.js";import"./apiLoading-BdheNruk.js";import"./index-DAZmmV0s.js";import"./projectManagement-CgDo_3CW.js";import"./survey_vip_department-2awe2Skm.js";import"./survey_vipGroup-a3jUjSoP.js";import"./survey_vipGroup-DCfdH-Tn.js";import"./user_customer-D1iExjz3.js";const Je={key:0,class:"hoverSvg"},Ke={class:"fineSize"},We={key:0,class:"crudeTop"},Xe={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},Ye={class:"fineBom"},Ze={class:"hoverSvg"},et={class:"withoutUrlSize"},tt={class:"parameter oneLine"},ot=Ie({name:"myProjeck",__name:"list",setup(lt){const{format:K}=Be(),U=Ne(),W=Qe(),{pagination:h,getParams:X,onSizeChange:Y,onCurrentChange:Z,onSortChange:nt}=we(),M=c([]),O=c([]),F=c(),ee=c(""),$=c(),w=c(!0),te=c(),H=c(),j=c(!1),u=c([]),L=c(!1),V=c(),oe=c("formSearch-myProjeck"),S=c("default"),x=c(!1),P=c([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortabel:!0,checked:!0},{prop:"countryNameList",label:"区域",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=je({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),q=c([]),B=c();function le(n){$.value.showEdit(n)}function ne(n){H.value.showEdit(n)}function ae(n){B.value.showEdit(n,"distribution")}function ie(n){B.value.showEdit(n,"reassign")}function re(n){Y(n).then(()=>C())}function E(n=1){Z(n).then(()=>C())}function ce(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),C()}async function C(){try{w.value=!0;const n={...X(),..._};_.time&&_.time.length&&(n.beginTime=_.time[0]||"",n.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?n.countryId=[_.countryId]:n.countryId=[];const r=await Ge.list(n);F.value=r.data.currencyType,q.value=r.data.getMemberProjectListInfoList,h.value.total=r.data.total,w.value=!1}catch{}finally{w.value=!1}}const T=c();function se(n){T.value=n.projectId}const z=Le(()=>n=>M.value.filter(I=>n==null?void 0:n.includes(I.id)).map(I=>I.chineseName));Se(async()=>{P.value.forEach(n=>{n.checked&&u.value.push(n.prop)}),M.value=await U.getCountry(),O.value=await W.getCustomerList(),C(),V.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"区域地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const ue={clientId:()=>O.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(n,r)=>{const I=Fe,pe=f("ElDivider"),de=Oe,R=f("el-button"),me=Ee,fe=Te,_e=f("el-row"),m=f("el-table-column"),G=Me,A=f("el-tooltip"),y=f("el-text"),ye=Ae,Q=f("el-link"),b=f("el-tag"),he=f("ElSpace"),be=f("el-empty"),ge=f("el-table"),ke=f("ElPagination"),ve=De,Ce=xe("loading");return a(),k("div",{class:D({"absolute-container":t(L)})},[l(ve,null,{default:o(()=>[l(I,{formSearchList:t(V),formSearchName:t(oe),onCurrentChange:E,onOnReset:ce,model:t(_),formOption:ue},null,8,["formSearchList","formSearchName","model"]),l(pe,{"border-style":"dashed"}),l(_e,{gutter:24},{default:o(()=>[l(de),l(fe,null,{default:o(()=>[l(R,{size:"default",onClick:r[0]||(r[0]=()=>{})},{default:o(()=>[s(" 导出 ")]),_:1}),l(me,{border:t(j),"onUpdate:border":r[1]||(r[1]=e=>v(j)?j.value=e:null),tableAutoHeight:t(L),"onUpdate:tableAutoHeight":r[2]||(r[2]=e=>v(L)?L.value=e:null),checkList:t(u),"onUpdate:checkList":r[3]||(r[3]=e=>v(u)?u.value=e:null),columns:t(P),"onUpdate:columns":r[4]||(r[4]=e=>v(P)?P.value=e:null),"line-height":t(S),"onUpdate:lineHeight":r[5]||(r[5]=e=>v(S)?S.value=e:null),stripe:t(x),"onUpdate:stripe":r[6]||(r[6]=e=>v(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:E},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Pe((a(),i(ge,{ref_key:"tableSortRef",ref:ee,style:{"margin-top":"10px"},"row-key":"id",data:t(q),border:t(j),size:t(S),stripe:t(x),onCurrentChange:se,"highlight-current-row":""},{empty:o(()=>[l(be,{image:t(ze),"image-size":300},null,8,["image"])]),default:o(()=>[l(m,{align:"left",type:"selection"}),t(u).includes("project")?(a(),i(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:o(({row:e})=>[t(u).includes("projectId")?(a(),k("div",Je,[N("p",Ke,p(e.projectId),1),l(G,{content:e.projectId,class:D({rowCopy:"rowCopy",current:e.projectId===t(T)})},null,8,["content","class"])])):d("",!0)]),_:1})):d("",!0),t(u).includes("projectIdentificationOrClientName")?(a(),i(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"200",align:"left",label:"名称/标识"},{default:o(({row:e})=>[t(u).includes("projectName")?(a(),k("p",We,p(e.projectName),1)):d("",!0),t(u).includes("projectIdentification")?(a(),k("p",Xe,[N("span",Ye,p(e.projectIdentification),1)])):d("",!0)]),_:1})):d("",!0),t(u).includes("withoutUrl")?(a(),i(m,{key:2,width:"260",prop:"withoutUrl",align:"left",label:"URL"},{default:o(({row:e})=>[l(A,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:o(()=>[N("div",Ze,[N("p",et,p(e.withoutUrl),1),l(G,{content:e.withoutUrl,class:D({rowCopy:"rowCopy",current:e.projectId===t(T)})},null,8,["content","class"])])]),_:2},1032,["content"])]),_:1})):d("",!0),t(u).includes("participation")?(a(),i(m,{key:3,"show-overflow-tooltip":"",width:"180",align:"left",label:"参数"},{default:o(({row:e})=>[N("p",tt,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:o(()=>[s("参与："+p(e.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:o(()=>[s("完成："+p(e.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:o(()=>[s("配额："+p(e.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:o(()=>[s("限量："+p(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):d("",!0),t(u).includes("doMoneyPrice")?(a(),i(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"项目价"},{default:o(({row:e})=>[t(F)===3?(a(),i(y,{key:0,class:"mx-1"},{default:o(()=>[s("暂无数据")]),_:1})):(a(),i(y,{key:1,class:"mx-1"},{default:o(()=>[l(y,{style:{color:"#FD8989"}},{default:o(()=>[l(ye)]),_:1}),l(y,{style:{color:"#333333","font-family":"DINPro-Medium"}},{default:o(()=>[s(p(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):d("",!0),t(u).includes("memberPrice")?(a(),i(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"成本价(会员)",width:"130"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(a(),i(Q,{key:0,size:"small",plain:"",type:"primary",onClick:g=>ne(e)},{default:o(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(a(),i(y,{key:1},{default:o(()=>[s(" - ")]),_:1}))]),_:1})):d("",!0),t(u).includes("countryNameList")?(a(),i(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"区域"},{default:o(({row:e})=>[e.countryNameList?(a(),k(J,{key:0},[e.countryNameList.length===t(U).country.length?(a(),i(b,{key:0,type:"primary"},{default:o(()=>[s("全球")]),_:1})):t(z)(e.countryNameList).length>1?(a(),i(A,{key:1,class:"box-item",effect:"dark",content:t(z)(e.countryNameList).join(","),placement:"top"},{default:o(()=>[l(Q,{type:"primary"},{default:o(()=>[l(b,{type:"primary"},{default:o(()=>[s("x"+p(t(z)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(a(!0),k(J,{key:2},Re(t(z)(e.countryNameList),g=>(a(),i(b,{key:g,type:"primary"},{default:o(()=>[s(p(g),1)]),_:2},1024))),128))],64)):d("",!0)]),_:1})):d("",!0),t(u).includes("ir")?(a(),i(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:o(({row:e})=>[l(y,{style:{color:"#333333","font-family":"DINPro-Medium"}},{default:o(()=>[s(p(e.ir?e.ir:"-")+" / "+p(e.nir?e.nir:0),1)]),_:2},1024)]),_:1})):d("",!0),t(u).includes("memberStatus")?(a(),i(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配",width:"90"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(a(),i(b,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:o(()=>[s(" 部门 ")]),_:1})):(a(),i(b,{key:1,effect:"plain",type:"info"},{default:o(()=>[s(" 未分配 ")]),_:1}))]),_:1})):d("",!0),t(u).includes("createTime")?(a(),i(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间",width:"110"},{default:o(({row:e})=>[l(A,{content:e.createTime,placement:"top"},{default:o(()=>[l(b,{effect:"plain",type:"info"},{default:o(()=>[s(p(t(K)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):d("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:o(({row:e})=>[l(he,null,{default:o(()=>[e.allocationStatus===1?(a(),i(R,{key:0,type:"primary",disabled:e.isOnline===2,plain:"",size:"small",onClick:g=>ae(e)},{default:o(()=>[s(" 分配 ")]),_:2},1032,["disabled","onClick"])):(a(),i(R,{key:1,plain:"",type:"primary",disabled:e.isOnline===2,size:"small",onClick:g=>ie(e)},{default:o(()=>[s(" 重新分配 ")]),_:2},1032,["disabled","onClick"])),l(R,{size:"small",plain:"",type:"warning",onClick:g=>le(e)},{default:o(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ce,t(w)]]),l(ke,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l($e,{ref_key:"CheckEditRef",ref:te},null,512),l(He,{ref_key:"detailRef",ref:$},null,512),l(Ve,{ref_key:"checkMembershipPriceRef",ref:H},null,512),l(qe,{ref_key:"addAllocationEditRef",ref:B,onFetchData:C},null,512)],2)}}}),xt=Ue(ot,[["__scopeId","data-v-50f39767"]]);export{xt as default};
