
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ue,r as f,aO as ze,a5 as Pe,k as Te,a as u,p as De,o as i,b as F,f as t,w as l,i as a,q as V,g as c,H as v,I as S,e as p,j as b,F as Ne,t as Re,S as Be,bb as Me,E as X,N as $e,aQ as Fe,aR as He,ba as Oe,ao as Ye,aJ as qe,aK as je,s as I,ap as N,R as Je}from"./index-D5QRSD_b.js";import{_ as Qe}from"./index.vue_vue_type_style_index_0_lang-QxdiXMoY.js";import{_ as Ke}from"./index.vue_vue_type_script_setup_true_lang-CGGHSz_8.js";import{_ as Ge}from"./index.vue_vue_type_script_setup_true_lang-DMlASfqh.js";import We from"./index-_x6x3Xdg.js";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang-Da1lX8j2.js";import{u as Ze}from"./index-BY9ySHl2.js";import{s as et}from"./apiLoading-CByygUCz.js";import{a as R}from"./user_supplier-CwNKiVgx.js";import{U as tt}from"./user_supplier-DDfMRqSz.js";import"./index.vue_vue_type_script_setup_true_lang-CVolMbIN.js";import"./index.vue_vue_type_script_setup_true_lang-BSSYYPyi.js";import"./user_customer-Ap1owZIN.js";import"./user_customer-CEI2dDKv.js";import"./stagedData-BGajnSJz.js";import"./index.vue_vue_type_script_setup_true_lang-Ud3ZEoHe.js";const E=L=>(qe("data-v-b112d31a"),L=L(),je(),L),lt=E(()=>I("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),at=["value"],nt=E(()=>I("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),ot=E(()=>I("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),it=E(()=>I("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),st=E(()=>I("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),rt=Ue({name:"supplier",__name:"index",setup(L){const Z=tt(),{format:ee}=Me(),te=Ze(),H=f([]),{pagination:y,getParams:le,onSizeChange:ae,onCurrentChange:ne}=ze(),A=f(!1),O=f([]),oe=f(),B=f(),Y=f(),q=f(),x=f(!0),U=f(!1),z=f("default"),d=f([]),P=f(!1),T=f([{label:"供应商ID",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"国家",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"可用余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"b2bStatus"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),s=Pe({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ie(){B.value.showEdit()}function se(o){B.value.showEdit(o)}function re(o){Y.value.showEdit(o)}async function ue(o){const{data:n}=await R.detail({tenantSupplierId:o.tenantSupplierId});if(n.remark!==o.remark){n.countryType=n.subordinateCountryId==="343"?1:2,n.remark=o.remark;const{status:h}=await R.edit(n);h===1&&X.success({message:"更新备注",center:!0}),D()}}async function j(o,n){const h={status:o,tenantSupplierId:n},{status:g}=await et(R.changestatus(h));g===1&&X.success({message:"修改成功"}),D(),Z.TenantSupplierList=null}function D(){y.value.page=1,k()}function pe(){Object.assign(s,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),k()}function ce(o){q.value.showEdit(JSON.stringify(o))}function de(o){ae(o).then(()=>k())}function J(o=1){ne(o).then(()=>k())}async function k(){try{A.value=!0;const o={...le(),...s};s.time&&s.time.length&&(o.beginTime=s.time[0]||"",o.endTime=s.time[1]||"");const{data:n}=await R.list(o);O.value=n.getTenantSupplierInfoList,y.value.total=n.total,A.value=!1}catch{}finally{A.value=!1}}function me(o){oe.value=o}return Te(async()=>{T.value.forEach(o=>{o.checked&&d.value.push(o.prop)}),H.value=await te.getLevelNameList(),D()}),(o,n)=>{const h=u("el-input"),g=u("el-form-item"),M=u("el-option"),fe=u("el-select"),_e=u("el-date-picker"),Q=$e,$=u("ElButton"),be=u("ElFormItem"),he=u("ElForm"),ge=Ke,ve=u("ElDivider"),C=u("el-button"),ye=Qe,ke=Fe,Se=He,Ce=u("el-row"),_=u("el-table-column"),K=u("el-tag"),G=Oe,w=u("el-text"),W=u("ElSwitch"),we=u("ElTableColumn"),Ve=u("ElSpace"),Ie=u("el-empty"),Ee=u("el-table"),Le=u("ElPagination"),Ae=Ye,xe=De("loading");return i(),F("div",{class:Be({"absolute-container":a(P)})},[t(Ae,null,{default:l(()=>[t(ge,{"show-toggle":!1},{default:l(({fold:e,toggle:r})=>[t(he,{model:a(s),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(g,{label:""},{default:l(()=>[t(h,{modelValue:a(s).tenantSupplierId,"onUpdate:modelValue":n[0]||(n[0]=m=>a(s).tenantSupplierId=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(g,{label:""},{default:l(()=>[t(h,{modelValue:a(s).supplierAccord,"onUpdate:modelValue":n[1]||(n[1]=m=>a(s).supplierAccord=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),t(g,{label:""},{default:l(()=>[t(h,{modelValue:a(s).supplierPhone,"onUpdate:modelValue":n[2]||(n[2]=m=>a(s).supplierPhone=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码"},null,8,["modelValue"])]),_:1}),V(t(g,{label:""},{default:l(()=>[t(h,{modelValue:a(s).accountName,"onUpdate:modelValue":n[3]||(n[3]=m=>a(s).accountName=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(g,{label:""},{default:l(()=>[t(h,{modelValue:a(s).emailAddress,"onUpdate:modelValue":n[4]||(n[4]=m=>a(s).emailAddress=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(g,{label:""},{default:l(()=>[t(fe,{modelValue:a(s).supplierStatus,"onUpdate:modelValue":n[5]||(n[5]=m=>a(s).supplierStatus=m),clearable:"",placeholder:"供应商状态"},{default:l(()=>[t(M,{label:"开启",value:2}),t(M,{label:"关闭",value:1}),t(M,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(g,{label:""},{default:l(()=>[t(_e,{modelValue:a(s).time,"onUpdate:modelValue":n[6]||(n[6]=m=>a(s).time=m),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),t(be,null,{default:l(()=>[t($,{type:"primary",onClick:n[7]||(n[7]=m=>J())},{icon:l(()=>[t(Q,{name:"i-ep:search"})]),default:l(()=>[c(" 筛选 ")]),_:1}),t($,{onClick:pe},{icon:l(()=>[lt]),default:l(()=>[c(" 重置 ")]),_:1}),t($,{link:"",onClick:r},{icon:l(()=>[t(Q,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[c(" "+v(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ve,{"border-style":"dashed"}),t(Ce,null,{default:l(()=>[t(ye,null,{default:l(()=>[t(C,{type:"primary",size:"default",onClick:ie},{default:l(()=>[c(" 新增 ")]),_:1})]),_:1}),t(Se,null,{default:l(()=>[t(C,{size:"default"},{default:l(()=>[c(" 导出 ")]),_:1}),t(ke,{border:a(x),"onUpdate:border":n[8]||(n[8]=e=>S(x)?x.value=e:null),tableAutoHeight:a(P),"onUpdate:tableAutoHeight":n[9]||(n[9]=e=>S(P)?P.value=e:null),checkList:a(d),"onUpdate:checkList":n[10]||(n[10]=e=>S(d)?d.value=e:null),columns:a(T),"onUpdate:columns":n[11]||(n[11]=e=>S(T)?T.value=e:null),"line-height":a(z),"onUpdate:lineHeight":n[12]||(n[12]=e=>S(z)?z.value=e:null),stripe:a(U),"onUpdate:stripe":n[13]||(n[13]=e=>S(U)?U.value=e:null),style:{"margin-left":"12px"},onQueryData:D},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),V((i(),p(Ee,{border:a(x),data:a(O),size:a(z),stripe:a(U),onSelectionChange:me},{empty:l(()=>[t(Ie,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[t(_,{align:"center",type:"selection"}),a(d).includes("tenantSupplierId")?(i(),p(_,{key:0,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"})):b("",!0),a(d).includes("supplierAccord")?(i(),p(_,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:l(({row:e})=>[c(v(e.supplierAccord),1)]),_:1})):b("",!0),a(d).includes("countryAffiliationName")?(i(),p(_,{key:2,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"},{default:l(({row:e})=>[t(K,{type:"primary"},{default:l(()=>[c(v(e.countryAffiliationName),1)]),_:2},1024)]),_:1})):b("",!0),a(d).includes("balanceHumanLife")?(i(),p(_,{key:3,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:l(({row:e})=>[t(G),c(v(e.balanceHumanLife||0),1)]),_:1})):b("",!0),a(d).includes("amountPendingTrial")?(i(),p(_,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:l(({row:e})=>[t(G),c(v(e.amountPendingTrial||0),1)]),_:1})):b("",!0),a(d).includes("supplierLevelId")?(i(),p(_,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:l(({row:e})=>[(i(!0),F(Ne,null,Re(a(H),r=>(i(),F("div",{key:r.tenantSupplierLevelId,value:r.levelNameOrAdditionRatio},[r.tenantSupplierLevelId===e.supplierLevelId?(i(),p(w,{key:0,class:"mx-1"},{default:l(()=>[c(v(r.levelNameOrAdditionRatio),1)]),_:2},1024)):b("",!0)],8,at))),128))]),_:1})):b("",!0),a(d).includes("b2bStatus")?(i(),p(_,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:l(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(i(),p(w,{key:0,class:"mx-1"},{default:l(()=>[nt]),_:1})):(i(),p(w,{key:1,class:"mx-1"},{default:l(()=>[ot]),_:1})),c(" | "),e.b2cStatus&&e.b2cStatus===2?(i(),p(w,{key:2,class:"mx-1"},{default:l(()=>[it]),_:1})):(i(),p(w,{key:3,class:"mx-1"},{default:l(()=>[st]),_:1}))]),_:1})):b("",!0),a(d).includes("settlementCycle")?(i(),p(_,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:l(({row:e})=>[c(v(e.settlementCycle?e.settlementCycle+"天":"-"),1)]),_:1})):b("",!0),a(d).includes("supplierStatus")?(i(),p(we,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:l(({row:e})=>[e.supplierStatus===3?(i(),p(W,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":r=>e.supplierStatus=r,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:r=>j(r,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(i(),p(W,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":r=>e.supplierStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:r=>j(r,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):b("",!0),a(d).includes("createTime")?(i(),p(_,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:l(({row:e})=>[t(K,{effect:"plain",type:"info"},{default:l(()=>[c(v(a(ee)(e.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),a(d).includes("remark")?(i(),p(_,{key:10,align:"center",prop:"remark",width:"180",label:"备注"},{default:l(({row:e})=>[t(h,{modelValue:e.remark,"onUpdate:modelValue":r=>e.remark=r,onBlur:r=>ue(e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):b("",!0),t(_,{align:"center",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"250"},{default:l(({row:e})=>[t(Ve,null,{default:l(()=>[t(C,{size:"small",plain:"",type:"primary",onClick:r=>ce(e)},{default:l(()=>[c(" 加减款 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:r=>se(e)},{default:l(()=>[c(" 编辑 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:r=>re(e)},{default:l(()=>[c(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[xe,a(A)]]),t(Le,{"current-page":a(y).page,total:a(y).total,"page-size":a(y).size,"page-sizes":a(y).sizes,layout:a(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:de,onCurrentChange:J},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Ge,{ref_key:"editRef",ref:B,onFetchData:k},null,512),t(We,{ref_key:"checkRef",ref:Y,onFetchData:k},null,512),t(Xe,{ref_key:"plusMinusPaymentsRef",ref:q,onFetchData:k},null,512)],2)}}}),Vt=Je(rt,[["__scopeId","data-v-b112d31a"]]);export{Vt as default};
