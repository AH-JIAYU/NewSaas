
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as ye,d as ve,aO as ge,r as f,a5 as H,k as he,a as m,p as Ie,o as n,b as E,f as o,w as l,i as t,q as I,F as A,t as q,e as s,g as i,H as _,I as k,j as c,S as ke,N as Se,aQ as we,aR as Ce,ao as Ne,aJ as Ve,aK as Le,s as je,ap as N,R as Te}from"./index-OReB-nn0.js";import{_ as xe}from"./index.vue_vue_type_script_setup_true_lang-e03cvunF.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-kcXY7iOP.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-ChNhNpBi.js";import{u as Ee}from"./user_customer-BUwoHLQd.js";import"./user_customer-C0btxwKv.js";const Ue={list:v=>ye.post("callback/getMemberSurveyRecord",v)},Pe=v=>(Ve("data-v-2cb0068a"),v=v(),Le(),v),Be=Pe(()=>je("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Re=ve({name:"investigation_records",__name:"list",setup(v){const G=Ee(),{getParams:O,pagination:g,onSizeChange:Q,onCurrentChange:J}=ge(),V=f(!1),U=f([]),K=f(""),p=f([]),L=f(!0),j=f(!1),T=f("default"),x=f(!1),W=f(),z=f([{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"原价/会员价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),u=H({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),h=H({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function X(){u.pageNo=1,S()}function Y(d){Q(d).then(()=>S())}function P(d=1){J(d).then(()=>S())}async function S(){try{V.value=!0;const d={...O(),...u},{data:a}=await Ue.list(d);U.value=a.memberSurveyRecordInfoList,W.value=a.currencyType,g.value.total=a.total,V.value=!1}catch{}finally{V.value=!1}}function Z(d){K.value=d}function ee(){Object.assign(u,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),S()}return he(async()=>{h.customerList=await G.getCustomerList(),z.value.forEach(d=>{d.checked&&p.value.push(d.prop)}),S()}),(d,a)=>{const w=m("el-input"),y=m("el-form-item"),B=m("el-option"),R=m("el-select"),F=Se,D=m("ElButton"),te=m("ElFormItem"),le=m("ElForm"),oe=De,ae=m("ElDivider"),ne=ze,re=m("el-button"),se=we,ue=Ce,ie=m("el-row"),b=m("el-table-column"),M=xe,C=m("el-text"),$=m("ElTableColumn"),ce=m("el-empty"),pe=m("el-table"),me=m("ElPagination"),de=Ne,be=Ie("loading");return n(),E("div",{class:ke({"absolute-container":t(x)})},[o(de,null,{default:l(()=>[o(oe,{"show-toggle":!1},{default:l(({fold:e,toggle:_e})=>[o(le,{model:t(u),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[o(y,{label:""},{default:l(()=>[o(w,{modelValue:t(u).memberId,"onUpdate:modelValue":a[0]||(a[0]=r=>t(u).memberId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),I(o(y,{label:""},{default:l(()=>[o(w,{modelValue:t(u).randomIdentityId,"onUpdate:modelValue":a[1]||(a[1]=r=>t(u).randomIdentityId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),o(y,{label:""},{default:l(()=>[o(w,{modelValue:t(u).projectId,"onUpdate:modelValue":a[2]||(a[2]=r=>t(u).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),I(o(y,{label:""},{default:l(()=>[o(w,{modelValue:t(u).name,"onUpdate:modelValue":a[3]||(a[3]=r=>t(u).name=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),I(o(y,{label:""},{default:l(()=>[o(R,{modelValue:t(u).projectName,"onUpdate:modelValue":a[4]||(a[4]=r=>t(u).projectName=r),clearable:"",placeholder:"客户简称"},{default:l(()=>[(n(!0),E(A,null,q(t(h).customerList,r=>(n(),s(B,{key:r.tenantCustomerId,value:r.tenantCustomerId,label:r.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[N,!e]]),I(o(y,{label:""},{default:l(()=>[o(w,{modelValue:t(u).ip,"onUpdate:modelValue":a[5]||(a[5]=r=>t(u).ip=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),I(o(y,{label:""},{default:l(()=>[o(R,{modelValue:t(u).surveyStatus,"onUpdate:modelValue":a[6]||(a[6]=r=>t(u).surveyStatus=r),clearable:"",placeholder:"调查状态"},{default:l(()=>[(n(!0),E(A,null,q(t(h).surveyStatusList,(r,fe)=>(n(),s(B,{label:r,value:fe+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[N,!e]]),o(te,null,{default:l(()=>[o(D,{type:"primary",onClick:a[7]||(a[7]=r=>P())},{icon:l(()=>[o(F,{name:"i-ep:search"})]),default:l(()=>[i(" 筛选 ")]),_:1}),o(D,{onClick:ee},{icon:l(()=>[Be]),default:l(()=>[i(" 重置 ")]),_:1}),o(D,{link:"",onClick:_e},{icon:l(()=>[o(F,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[i(" "+_(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(ae,{"border-style":"dashed"}),o(ie,null,{default:l(()=>[o(ne),o(ue,null,{default:l(()=>[o(re,{size:"default"},{default:l(()=>[i(" 导出 ")]),_:1}),o(se,{border:t(L),"onUpdate:border":a[8]||(a[8]=e=>k(L)?L.value=e:null),tableAutoHeight:t(x),"onUpdate:tableAutoHeight":a[9]||(a[9]=e=>k(x)?x.value=e:null),checkList:t(p),"onUpdate:checkList":a[10]||(a[10]=e=>k(p)?p.value=e:null),columns:t(z),"onUpdate:columns":a[11]||(a[11]=e=>k(z)?z.value=e:null),"line-height":t(T),"onUpdate:lineHeight":a[12]||(a[12]=e=>k(T)?T.value=e:null),stripe:t(j),"onUpdate:stripe":a[13]||(a[13]=e=>k(j)?j.value=e:null),style:{"margin-left":"12px"},onQueryData:X},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((n(),s(pe,{border:t(L),data:t(U),size:t(T),stripe:t(j),onSelectionChange:Z},{empty:l(()=>[o(ce,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[o(b,{align:"center",type:"selection"}),t(p).includes("memberId")?(n(),s(b,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",width:"180",label:"会员ID"})):c("",!0),t(p).includes("randomIdentityId")?(n(),s(b,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[i(_(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):c("",!0),t(p).includes("memberName")?(n(),s(b,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"},{default:l(({row:e})=>[i(_(e.memberName?e.memberName:"-"),1)]),_:1})):c("",!0),t(p).includes("projectId")?(n(),s(b,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):c("",!0),t(p).includes("projectName")?(n(),s(b,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:l(({row:e})=>[i(_(e.projectName?e.projectName:"-"),1)]),_:1})):c("",!0),t(p).includes("customerShortName")?(n(),s(b,{key:5,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"},{default:l(({row:e})=>[i(_(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):c("",!0),t(p).includes("allocationType")?(n(),s(b,{key:6,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:l(({row:e})=>[i(_(t(h).allocationTypeList[e.allocationType-1]),1)]),_:1})):c("",!0),t(p).includes("price")?(n(),s(b,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"原价/会员价"},{default:l(({row:e})=>[o(M),i(_(e.doMoneyPrice||0)+" / ",1),o(M),i(_(e.memberPrice||0),1)]),_:1})):c("",!0),t(p).includes("ipBelong")?(n(),s(b,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):c("",!0),t(p).includes("surveyTime")?(n(),s(b,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:l(({row:e})=>[i(_(e.surveyTime?e.surveyTime+"min":0)+"/ "+_(e.projectTime?e.projectTime+"min":0),1)]),_:1})):c("",!0),t(p).includes("surveyStatus")?(n(),s($,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"调查状态"},{default:l(({row:e})=>[e.surveyStatus===3?(n(),s(C,{key:0,class:"mx-1",type:"primary"},{default:l(()=>[i("配额满")]),_:1})):c("",!0),e.surveyStatus===1?(n(),s(C,{key:1,class:"mx-1",type:"success"},{default:l(()=>[i("完成")]),_:1})):c("",!0),e.surveyStatus===2?(n(),s(C,{key:2,class:"mx-1",type:"danger"},{default:l(()=>[i("被甄别")]),_:1})):c("",!0),e.surveyStatus===4?(n(),s(C,{key:3,class:"mx-1",type:"warning"},{default:l(()=>[i("安全终止")]),_:1})):c("",!0),e.surveyStatus===5?(n(),s(C,{key:4,class:"mx-1",type:"info"},{default:l(()=>[i("未完成")]),_:1})):c("",!0)]),_:1})):c("",!0),t(p).includes("viceStatus")?(n(),s($,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:l(({row:e})=>[i(_(t(h).viceStatusList[e.viceStatus-1]?t(h).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):c("",!0)]),_:1},8,["border","data","size","stripe"])),[[be,t(V)]]),o(me,{"current-page":t(g).page,total:t(g).total,"page-size":t(g).size,"page-sizes":t(g).sizes,layout:t(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:P},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ge=Te(Re,[["__scopeId","data-v-2cb0068a"]]);export{Ge as default};
