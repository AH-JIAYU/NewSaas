
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as oe,r as v,l as ne,c as z,n as re,a as _,o as m,b as g,f as e,aF as ie,i as l,w as t,b7 as C,b8 as T,O as S,A as i,B as o,g as n,e as x,F as N,p as U,j as I,C as ce,E as M,aJ as ue,aK as de,N as fe}from"./index-6I3CLwp1.js";import{g as me,v as pe,a as _e}from"./index-B-4Jrrr7.js";import{f as ye}from"./file-D2RoY7bS.js";import{o as ge}from"./apiLoading-DHs_wC_G.js";import{a as B}from"./projectManagement-CZ6HRgu4.js";import{_ as be}from"./index.vue_vue_type_script_setup_true_lang-CsxYnuGH.js";import{D as Se}from"./download-C8PHVIy1.js";import{u as he}from"./user_customer-BR8K_xh6.js";import"./user_customer-ATrInXKQ.js";const h=P=>(ue("data-v-fbe90a16"),P=P(),de(),P),ve={style:{"margin-left":"25.5%"}},xe=h(()=>i("span",{style:{"margin-left":"19.5%"}},"操作员",-1)),je=h(()=>i("span",{style:{"margin-left":"12.5%"}},"操作员",-1)),Ie=h(()=>i("span",{style:{"margin-left":"8.5%"}},"操作员",-1)),Le=h(()=>i("span",{style:{"margin-left":"28.5%"}},"操作员",-1)),we={class:"card-header"},ke={class:"leftTitle"},Ce={class:"m-4 spanStatus"},Ne={class:"rightStatus"},Pe=h(()=>i("div",{class:"card-header"},[i("span",null,"其他设置")],-1)),De={class:"peizjo-header"},Qe=h(()=>i("span",null,"配置信息",-1)),Te={key:0,style:{"margin-left":"50px"}},Ue={key:1,style:{"margin-left":"30px"}},Ve=h(()=>i("div",{class:"card-header"},[i("span",null,"安全信息")],-1)),Oe=h(()=>i("div",{class:"card-header"},[i("span",null,"描述配额")],-1)),Be={class:"radius p-2 flex gap-2"},Ee=h(()=>i("div",{class:"card-header"},[i("span",null,"操作日志")],-1)),Fe=oe({name:"ProjectDetails",__name:"index",setup(P,{expose:$}){const A=he(),E=v([]),q=ne();v("# Fantastic-admin");const F=v(),V=v(1),a=v({form:{},imgUrl:[],isOnline:"",allocationStatus:"",srcList:[],countryList:[]}),D=v();me({locale:_e});const H=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function J(d){F.value.showEdit(d)}const L=v(!1);async function K(d){a.value.isOnline=d.isOnline,a.value.allocationStatus=d.allocationStatus;const p=await ge(B.detail({projectId:d.projectId}));a.value.form=p.data,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((u,y)=>(u.find(b=>b.settlementStatus===y.settlementStatus)||u.push(y),u),[]),D.value=a.value.form.descriptionUrl.split(","),D.value.length&&D.value.forEach(async u=>{const y=await ye.detail({fileName:u});a.value.imgUrl.push(y.data.fileUrl),a.value.srcList.push(y.data.fileUrl)}),G(),L.value=!0}const G=async()=>{if(a.value.form.projectQuotaInfoList.length){const d=await B.getProjectCountryList({countryIdList:a.value.form.countryIdList}),p={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},u=await B.getProjectCategoryList(p),y=R(d.data.getProjectCountryListInfoList,"countryId",p.countryId),s=R(u.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=y.countryName,a.value.form.projectProblemCategoryName=s.projectProblemCategoryName}},R=(d,p,u)=>d.find(y=>y[p]===u),Q=z(()=>d=>a.value.countryList.filter(u=>d.includes(u.id)).map(u=>u.chineseName));async function W(d){try{await navigator.clipboard.writeText(d),M.success({message:"已复制文本",center:!0})}catch{M.warning({message:"复制失败,请重试",center:!0})}}async function X(d,p){await Se(a.value.imgUrl[p],d)}function O(){a.value.srcList=[],L.value=!1}const Y=z(()=>E.value.find(d=>d.tenantCustomerId===a.value.form.clientId));return re(async()=>{a.value.countryList=await q.getCountry(),E.value=await A.getCustomerList()}),$({showEdit:K}),(d,p)=>{const u=_("el-step"),y=_("el-steps"),s=_("el-col"),b=_("el-row"),r=_("el-text"),c=_("el-form-item"),Z=_("el-link"),w=_("el-button"),j=_("el-card"),ee=_("el-image"),k=_("el-table-column"),te=_("el-table"),ae=_("ElForm"),le=_("el-drawer");return m(),g("div",null,[e(le,{modelValue:l(L),"onUpdate:modelValue":p[1]||(p[1]=f=>ce(L)?L.value=f:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",onClose:O,size:"55%",title:"项目详情"},ie({footer:t(()=>[e(w,{onClick:O},{default:t(()=>[n(" 取消 ")]),_:1}),e(w,{type:"primary",onClick:O},{default:t(()=>[n(" 确定 ")]),_:1})]),default:t(()=>[e(ae,{"label-width":"120px"},{default:t(()=>[e(j,{class:"box-card"},{header:t(()=>[i("div",we,[i("div",ke,[n(" 基本信息 "),i("span",Ce,o(l(a).allocationStatus===1?"未分配":"已分配"),1)]),i("div",Ne,[i("div",{class:S(l(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},o(l(a).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[e(b,{gutter:10},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(c,{label:"项目ID :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.projectId?l(a).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"项目名称 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.name?l(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.projectIdentification?l(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"所属客户 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(Y).customerAccord),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"所属国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[l(Q)(l(a).form.countryIdList).length>4?(m(),x(Z,{key:0,type:"primary"},{default:t(()=>[n(o(l(Q)(l(a).form.countryIdList).length===185?"全球":l(Q)(l(a).form.countryIdList).length),1)]),_:1})):(m(!0),g(N,{key:1},U(l(Q)(l(a).form.countryIdList),f=>(m(),g("span",{key:f},o(f)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"原价 :"},{default:t(()=>[l(a).form.currencyType===1?(m(),x(r,{key:0,class:"mx-1"},{default:t(()=>[n(o(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):I("",!0),l(a).form.currencyType===2?(m(),x(r,{key:1,class:"mx-1"},{default:t(()=>[n(o(l(a).form.doMoneyPrice?l(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):I("",!0)]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"配额 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.num?l(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"最小时长 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.minimumDuration?l(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"IR/NIR :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.ir?l(a).form.ir+"%":l(a).form.ir)+" / "+o(l(a).form.nir?l(a).form.nir+"%":l(a).form.nir),1)]),_:1})]),_:1})]),_:1}),e(s,{span:12},{default:t(()=>[e(c,{label:"URL :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.uidUrl?l(a).form.uidUrl:"-"),1)]),_:1}),e(w,{type:"primary",style:{"margin-left":"auto"},onClick:p[0]||(p[0]=f=>W(l(a).form.uidUrl)),link:""},{default:t(()=>[n(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{class:"box-card"},{header:t(()=>[Pe]),default:t(()=>[e(b,{gutter:10},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(c,{label:"置顶 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"在线 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"资料 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"B2B :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o()+" "+o(l(a).form.isPinned===1?l(a).form.projectType.join(","):"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"定时发布 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"备注 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).formNaNpxark?l(a).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{class:"box-card"},{header:t(()=>[i("div",De,[Qe,l(a).form.countryName?(m(),g("span",Te,"国家："+o(l(a).form.countryName),1)):I("",!0),l(a).form.projectProblemCategoryName?(m(),g("span",Ue,"问卷："+o(l(a).form.projectProblemCategoryName),1)):I("",!0)])]),default:t(()=>[e(b,{gutter:10,class:S(l(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[e(s,{span:8}),e(s,{span:8}),(m(!0),g(N,null,U(l(a).form.projectQuotaInfoList,f=>(m(),x(s,{span:24,class:S({isNone:!l(a).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[e(c,{"label-width":"200px",label:f.keyValue+" :"},{default:t(()=>[f.answerValueList&&f.answerValueList[0]!=="null"?(m(),x(r,{key:0,class:"mx-1"},{default:t(()=>[n(o(f.answerValueList.join(", ")),1)]),_:2},1024)):(m(),x(r,{key:1,class:"mx-1"},{default:t(()=>[n(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1}),e(j,{class:"box-card"},{header:t(()=>[Ve]),default:t(()=>[e(b,{gutter:20},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(c,{label:"小时准入量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.preNum?l(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"小时完成量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.limitedQuantity?l(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(c,{label:"重复参与:"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[n(o(l(a).form.ipDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(a).form.descriptionUrl?(m(),x(j,{key:0,class:"box-card"},{header:t(()=>[Oe]),default:t(()=>[l(a).form.descriptionUrl?(m(),g(N,{key:0},[(m(!0),g(N,null,U(l(a).srcList,f=>(m(),g("div",{key:f,class:"demo-image__preview"},[e(ee,{style:{width:"6.25rem",height:"6.25rem"},src:f,"preview-src-list":f,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]))),128)),(m(!0),g(N,null,U(l(D),(f,se)=>(m(),g("p",{key:f},[e(w,{style:{padding:"0"},type:"primary",text:"",onClick:Re=>X(f,se)},{default:t(()=>[n(o(f)+" 下载 ",1)]),_:2},1032,["onClick"])]))),128))],64)):I("",!0),e(b,{class:S({isNone:!l(a).form.descriptionUrl}),gutter:20},{default:t(()=>[e(s,{span:24},{default:t(()=>[i("div",Be,[e(l(pe),{value:l(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):I("",!0),e(j,{class:"box-card"},{header:t(()=>[Ee]),default:t(()=>[e(te,{data:H,border:"",style:{width:"100%"}},{default:t(()=>[e(k,{align:"center",type:"index",width:"80",label:"序号"}),e(k,{align:"center",prop:"a",label:"操作时间"}),e(k,{align:"center",prop:"b",label:"操作人"}),e(k,{align:"center",prop:"c",label:"操作事项"}),e(k,{align:"center",prop:"d",label:"详情"},{default:t(()=>[e(w,{text:"",type:"primary",size:"default",onClick:J},{default:t(()=>[n(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},[l(a).form.projectSettlementStatusSet&&l(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:t(()=>[e(b,{gutter:20},{default:t(()=>[e(s,{span:24},{default:t(()=>[e(y,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:l(a).form.projectSettlementStatusSet[0].settlementStatus},{default:t(()=>[e(u,{title:"待审核",description:"2021-09-09 11:11:11",icon:l(C)},null,8,["icon"]),e(u,{title:"已审核",description:l(a).form.projectSettlementStatusSet[0].operationTime,icon:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2?l(C):l(T)},null,8,["description","icon"]),e(u,{title:"已开票",description:"2021-09-09 11:11:11",icon:l(V)>=3?l(C):l(T)},null,8,["icon"]),e(u,{title:"已结算",description:"2021-09-09 11:11:11",icon:l(V)>=4?l(C):l(T)},null,8,["icon"]),e(u,{title:"已冻结",description:"2021-09-09 11:11:11",icon:l(V)>=5?l(C):l(T)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(b,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:t(()=>[e(s,{span:1}),e(s,{class:S({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=1}),span:5},{default:t(()=>[i("span",ve,o(l(a).form.projectSettlementStatusSet[0].operationName),1)]),_:1},8,["class"]),e(s,{class:S({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=2}),span:5},{default:t(()=>[xe]),_:1},8,["class"]),e(s,{class:S({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=3}),span:5},{default:t(()=>[je]),_:1},8,["class"]),e(s,{class:S({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=4}),span:4},{default:t(()=>[Ie]),_:1},8,["class"]),e(s,{class:S({colorgreen:l(a).form.projectSettlementStatusSet[0].settlementStatus>=5}),span:4},{default:t(()=>[Le]),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),e(be,{ref_key:"logDetailsRef",ref:F},null,512)])}}}),We=fe(Fe,[["__scopeId","data-v-fbe90a16"]]);export{We as default};
