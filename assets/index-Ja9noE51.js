
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as E}from"./configuration_supplierLevel-Dce8o-cO.js";import{a as _}from"./user_supplier-C3fJmuy5.js";import{d as h,r as y,l as q,b as s,o as i,e as V,j as l,f as u,w as o,g as r,h as L,k as n,F as N,v as U,E as R,R as B}from"./index-CsUB5yuN.js";const j=h({name:"ProjeckEdit",__name:"index",emits:["fetch-data"],setup(M,{expose:k,emit:D}){const I=E(),C=D,f=y(),e=y({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},supplierLevelList:[],rules:{supplierAccord:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择国家",trigger:"change"}],supplierLevelId:[{required:!0,message:"请选择供应商等级",trigger:"change"}],type:[{required:!0,message:"请选择供应商类型",trigger:"change"}]}}),w={supplierAccord:"供应商名称",supplierLevelId:"供应商等级",settlementCycle:"结算周期",remark:"备注"};async function x(d,a){e.value.title=w[a],e.value.type=a,e.value.dialogTableVisible=!0,e.value.loading=!0;const p=await _.detail({tenantSupplierId:d.tenantSupplierId});e.value.formData=p.data,e.value.formData.countryType=e.value.formData.subordinateCountryId==="343"?1:2,e.value.loading=!1}async function S(){e.value.loading=!0,f.value.validate(async d=>{if(d){const{status:a}=await _.edit(e.value.formData);a===1&&R.success({message:"编辑成功",center:!0}),C("fetch-data"),g()}e.value.loading=!1})}function g(){e.value.dialogTableVisible=!1,e.value.formData={}}return q(async()=>{e.value.supplierLevelList=await I.getLevelNameList()}),k({showEdit:x}),(d,a)=>{const p=s("el-input"),m=s("el-form-item"),c=s("el-option"),v=s("el-select"),T=s("el-form"),b=s("el-button"),A=s("el-dialog");return i(),V("div",null,[l(e).dialogTableVisible?(i(),u(A,{key:0,modelValue:l(e).dialogTableVisible,"onUpdate:modelValue":a[4]||(a[4]=t=>l(e).dialogTableVisible=t),title:l(e).title+"编辑",draggable:""},{footer:o(()=>[r(b,{onClick:g,disabled:l(e).loading},{default:o(()=>[L(" 取消 ")]),_:1},8,["disabled"]),r(b,{type:"primary",onClick:S,disabled:l(e).loading},{default:o(()=>[L(" 确定 ")]),_:1},8,["disabled"])]),default:o(()=>[r(T,{ref_key:"formRef",ref:f,model:l(e).formData,rules:l(e).rules,"label-width":"100","label-position":"right"},{default:o(()=>[l(e).type==="supplierAccord"?(i(),u(m,{key:0,label:"供应商名称",prop:"supplierAccord"},{default:o(()=>[r(p,{modelValue:l(e).formData.supplierAccord,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).formData.supplierAccord=t),clearable:""},null,8,["modelValue"])]),_:1})):n("",!0),l(e).type==="supplierLevelId"?(i(),u(m,{key:1,label:"供应商等级",prop:"supplierLevelId"},{default:o(()=>[r(v,{clearable:"",filterable:"",modelValue:l(e).formData.supplierLevelId,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).formData.supplierLevelId=t)},{default:o(()=>[(i(!0),V(N,null,U(l(e).supplierLevelList,t=>(i(),u(c,{key:t.tenantSupplierLevelId,value:t.tenantSupplierLevelId,label:t.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):n("",!0),l(e).type==="settlementCycle"?(i(),u(m,{key:2,label:"结算周期"},{default:o(()=>[r(v,{modelValue:l(e).formData.settlementCycle,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).formData.settlementCycle=t)},{default:o(()=>[r(c,{label:"net 30",value:30}),r(c,{label:"net 60",value:60})]),_:1},8,["modelValue"])]),_:1})):n("",!0),l(e).type==="remark"?(i(),u(m,{key:3,label:"备注"},{default:o(()=>[r(p,{maxlength:"200","show-word-limit":"",style:{width:"100%"},type:"textarea",rows:5,modelValue:l(e).formData.remark,"onUpdate:modelValue":a[3]||(a[3]=t=>l(e).formData.remark=t)},null,8,["modelValue"])]),_:1})):n("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):n("",!0)])}}}),P=B(j,[["__scopeId","data-v-4af867d2"]]);export{P as default};
