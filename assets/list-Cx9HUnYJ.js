
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as le,aO as ne,r as f,a5 as se,l as ie,b as g,q as re,o as u,e as ue,g as t,w as o,h as l,s as K,f as p,j as c,aN as W,t as d,H as n,k as _,S as pe,aQ as ce,aR as de,ap as me,R as fe}from"./index-Bj5WHarE.js";import{_ as _e}from"./index-BytIOJ5n.js";import{_ as ge}from"./index.vue_vue_type_style_index_0_lang-B-0ToeXq.js";import{_ as ve}from"./index-nMK6ljeh.js";import{u as be,o as he,a as X}from"./index-CStxizMQ.js";import"./index-C0SaVYlt.js";import"./index.vue_vue_type_script_setup_true_lang-HB95EawC.js";import"./sortable.esm-C0-Qcoum.js";const ye={class:"tableBig"},ke={class:"tableBig"},Ne={class:"copyId tableSmall"},Se={class:"id oneLine"},Ie={class:"tableBig"},je={class:"copyId tableSmall"},we={class:"id oneLine"},Le={class:"tableBig"},Ce={class:"tableBig"},ze={class:"copyId tableSmall"},De={class:"id oneLine"},xe={class:"tableBig"},Ue={class:"copyId tableSmall"},He={class:"id oneLine"},Re=le({name:"outsource",__name:"list",setup(Be){const D=be(),{pagination:m,getParams:Y,onSizeChange:Z,onCurrentChange:ee}=ne(),U=f(""),I=f(!0),h=f(!0),H=f(),j=f(!1),s=f([]),x=f(),R=f("formSearch-outsource"),y=f("default"),k=f(!1),w=f([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),v=se({tenantId:"",tenantName:"",projectStatus:"",type:2}),L=f([]);function B(r){H.value.showEdit(r,v.type===2?1:0)}function A(r){Z(r).then(()=>S())}function N(r=1){ee(r).then(()=>S())}function P(){Object.assign(v,{tenantId:"",tenantName:"",projectStatus:"",type:2}),S()}async function S(){try{I.value=!0;const r={...Y(),...v};if(v.type===1){const a=await X.list(r);L.value=a.data.projectAllocationInfoList,m.value.total=a.data.total}else{const a=await X.meList(r);L.value=a.data.projectMeAllocationInfoList,m.value.total=a.data.total}I.value=!1}catch{}finally{I.value=!1}}return ie(()=>{w.value.forEach(r=>{r.checked&&s.value.push(r.prop)}),S(),x.value=[{index:1,show:!0,type:"input",modelName:"tenantId",placeholder:"租户id"},{index:2,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:3,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:D.projectStatusList.map((r,a)=>({label:r,value:a+1})),optionLabel:"label",optionValue:"value"}]}),(r,a)=>{const V=ve,E=g("ElDivider"),O=ge,C=g("el-button"),F=ce,M=de,Q=g("el-row"),i=g("el-table-column"),z=_e,b=g("el-text"),$=g("el-empty"),T=g("el-table"),q=g("ElPagination"),G=g("el-tab-pane"),te=g("el-tabs"),ae=me,J=re("loading");return u(),ue("div",{class:pe({"absolute-container":j.value})},[t(ae,null,{default:o(()=>[t(te,{modelValue:v.type,"onUpdate:modelValue":a[14]||(a[14]=e=>v.type=e),onTabChange:S},{default:o(()=>[t(G,{label:"外包项目",name:2},{default:o(()=>[t(V,{formSearchList:x.value,formSearchName:R.value,onCurrentChange:N,onOnReset:P,model:v},null,8,["formSearchList","formSearchName","model"]),t(E,{"border-style":"dashed"}),t(Q,{gutter:24},{default:o(()=>[t(O),t(M,null,{default:o(()=>[t(C,{size:"default",onClick:a[0]||(a[0]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(F,{border:h.value,"onUpdate:border":a[1]||(a[1]=e=>h.value=e),tableAutoHeight:j.value,"onUpdate:tableAutoHeight":a[2]||(a[2]=e=>j.value=e),checkList:s.value,"onUpdate:checkList":a[3]||(a[3]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[4]||(a[4]=e=>w.value=e),"line-height":y.value,"onUpdate:lineHeight":a[5]||(a[5]=e=>y.value=e),stripe:k.value,"onUpdate:stripe":a[6]||(a[6]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:N},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((u(),p(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:h.value,size:y.value,stripe:k.value},{empty:o(()=>[t($,{image:c(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(i,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(u(),p(i,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[d("span",ye,n(c(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):_("",!0),s.value.includes("tenantName")?(u(),p(i,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[d("div",ke,n(e.tenantName),1)]),_:1})):_("",!0),s.value.includes("tenantId")?(u(),p(i,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[d("div",Ne,[d("div",Se,"ID: "+n(e.tenantId),1),t(z,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("projectName")?(u(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[d("div",Ie,n(e.projectName),1)]),_:1})):_("",!0),s.value.includes("projectId")?(u(),p(i,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",je,[d("div",we,"ID: "+n(e.projectId),1),t(z,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("participationNumber")?(u(),p(i,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(b,{class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(C,{type:"primary",plain:"",size:"small",onClick:oe=>B(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,I.value]]),t(q,{"current-page":c(m).page,total:c(m).total,"page-size":c(m).size,"page-sizes":c(m).sizes,layout:c(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(G,{label:"接收项目",name:1},{default:o(()=>[t(V,{formSearchList:x.value,formSearchName:R.value,onCurrentChange:N,onOnReset:P,model:v},null,8,["formSearchList","formSearchName","model"]),t(E,{"border-style":"dashed"}),t(Q,{gutter:24},{default:o(()=>[t(O),t(M,null,{default:o(()=>[t(C,{size:"default",onClick:a[7]||(a[7]=()=>{})},{default:o(()=>[l(" 导出 ")]),_:1}),t(F,{border:h.value,"onUpdate:border":a[8]||(a[8]=e=>h.value=e),tableAutoHeight:j.value,"onUpdate:tableAutoHeight":a[9]||(a[9]=e=>j.value=e),checkList:s.value,"onUpdate:checkList":a[10]||(a[10]=e=>s.value=e),columns:w.value,"onUpdate:columns":a[11]||(a[11]=e=>w.value=e),"line-height":y.value,"onUpdate:lineHeight":a[12]||(a[12]=e=>y.value=e),stripe:k.value,"onUpdate:stripe":a[13]||(a[13]=e=>k.value=e),style:{"margin-left":"12px"},onQueryData:N},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),K((u(),p(T,{ref_key:"tableSortRef",ref:U,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:h.value,size:y.value,stripe:k.value},{empty:o(()=>[t($,{image:c(W),"image-size":300},null,8,["image"])]),default:o(()=>[t(i,{align:"left",type:"selection"}),s.value.includes("projectStatus")?(u(),p(i,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态"},{default:o(({row:e})=>[d("span",Le,n(c(D).projectStatusList[e.projectStatus-1]),1)]),_:1})):_("",!0),s.value.includes("tenantName")?(u(),p(i,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:o(({row:e})=>[d("div",Ce,n(e.tenantName),1)]),_:1})):_("",!0),s.value.includes("tenantId")?(u(),p(i,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID"},{default:o(({row:e})=>[d("div",ze,[d("div",De,"ID: "+n(e.tenantId),1),t(z,{class:"copy",content:e.tenantId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("projectName")?(u(),p(i,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:o(({row:e})=>[d("div",xe,n(e.projectName),1)]),_:1})):_("",!0),s.value.includes("projectId")?(u(),p(i,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:o(({row:e})=>[d("div",Ue,[d("div",He,"ID: "+n(e.projectId),1),t(z,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),s.value.includes("participationNumber")?(u(),p(i,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:o(({row:e})=>[t(b,{class:"oneLine",type:"danger"},{default:o(()=>[l("参与: "+n(e.participationNumber||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"success"},{default:o(()=>[l("完成: "+n(e.doneNumber||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"warning"},{default:o(()=>[l("配额: "+n(e.num||0),1)]),_:2},1024),l("   "),t(b,{class:"oneLine",type:"info"},{default:o(()=>[l("限量: "+n(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"170"},{default:o(({row:e})=>[t(C,{type:"primary",plain:"",size:"small",onClick:oe=>B(e)},{default:o(()=>[l(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[J,I.value]]),t(q,{"current-page":c(m).page,total:c(m).total,"page-size":c(m).size,"page-sizes":c(m).sizes,layout:c(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:A,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(he,{ref_key:"editRef",ref:H,onFetchData:S},null,512)]),_:1})],2)}}}),$e=fe(Re,[["__scopeId","data-v-56375b2a"]]);export{$e as default};
