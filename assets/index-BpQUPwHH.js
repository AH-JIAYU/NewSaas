
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as re,aM as se,aj as ie,r as u,c as t,$ as ue,n as pe,a as h,q as de,o as p,b as be,f as d,w as n,i as e,g as i,A as r,B as _,s as me,e as b,aN as ke,j as k,v as x,O as he,aP as fe,aQ as ge,ao as _e,aI as ve,aJ as ye,M as Ie}from"./index-FOy5HeQJ.js";import{_ as Se}from"./index.vue_vue_type_style_index_0_lang-CQ-Kr45H.js";import{_ as Ce}from"./index-CyF4BycE.js";import{a as H}from"./record_callback-BpsziOHq.js";import"./index.vue_vue_type_script_setup_true_lang-DXxXvmC5.js";import"./sortable.esm-C0-Qcoum.js";const T=y=>(ve("data-v-8cc3cbf8"),y=y(),ye(),y),Ne=T(()=>x("br",null,null,-1)),je=T(()=>x("br",null,null,-1)),Ue=T(()=>x("br",null,null,-1)),we=re({name:"callback",__name:"index",setup(y){const{pagination:f,getParams:Q,onSizeChange:R,onCurrentChange:E}=se(),{t:l}=ie(),I=u(!1),L=u([]),O=u(""),s=u([]),S=u(!0),C=u(!0),N=u("default"),j=u(!1),z=u(),A=u("formSearch-callback"),U=u([{prop:"projectQuestionnaireClickId",label:t(()=>l("callback.clickID")),sortable:!0,checked:!0},{label:t(()=>l("callback.vipType")),prop:"surveySource",sortable:!0,checked:!0},{label:t(()=>l("callback.clientID")),prop:"clientId",sortable:!0,checked:!0},{prop:"customerShortName",label:t(()=>l("callback.customerAbbreviation")),sortable:!0,checked:!0},{prop:"memberChildId",label:t(()=>l("callback.vipSubVipId")),sortable:!0,checked:!0},{prop:"projectId",label:t(()=>l("callback.projectID")),sortable:!0,checked:!0},{prop:"projectName",label:t(()=>l("callback.projectName")),sortable:!0,checked:!0},{prop:"callbackUrl",label:t(()=>l("callback.callbackUrl")),sortable:!0,checked:!0},{prop:"subordinateUrl",label:t(()=>l("callback.subordinateUrl")),sortable:!0,checked:!0},{prop:"sourceUrl",label:t(()=>l("callback.source")),sortable:!0,checked:!0},{prop:"callbackTime",label:t(()=>l("callback.callbackTime")),sortable:!0,checked:!0},{prop:"callbackStatus",label:t(()=>l("callback.callbackStatus")),sortable:!0,checked:!0}]),V=[{label:t(()=>l("callback.internalVip")),value:1},{label:t(()=>l("callback.externalVip")),value:2}],w=[{label:l("callback.all"),value:0,type:"info"},{label:l("callback.success"),value:1,type:"success"},{label:l("callback.idWrong"),value:2,type:"warning"},{label:l("callback.hashWrong"),value:3,type:"danger"}],g=ue({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",clientId:"",callbackStatus:0});function B(c){R(c).then(()=>v())}function P(c=1){E(c).then(()=>v())}function F(){f.value.page=1,v()}const D=[],M=async()=>{D.length=0;const c=await H.getCustomerCooperation({});c.data&&c.data.getCustomerInfoLists&&c.data.getCustomerInfoLists.forEach(o=>{D.push({label:o.customerName,value:o.customerId})})};async function v(){try{I.value=!0;const c={...Q(),...g};g.time&&g.time.length&&(c.beginTime=g.time[0]||"",c.endTime=g.time[1]||""),delete c.time;const o=await H.list(c);L.value=o.data.customerCallbackRecordInfoList,f.value.total=o.data.total,I.value=!1}catch{}finally{I.value=!1}}function $(){Object.assign(g,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:"",callbackStatus:0,clientId:""}),v()}function q(c){O.value=c}pe(async()=>{U.value.forEach(c=>{c.checked&&s.value.push(c.prop)}),M(),v(),z.value=[{index:3,show:!0,type:"input",modelName:"projectQuestionnaireClickId",placeholder:t(()=>l("callback.clickID"))},{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:t(()=>l("callback.supplierID"))},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:t(()=>l("callback.projectID"))},{index:3,show:!0,type:"select",modelName:"clientId",placeholder:t(()=>l("callback.clientID")),option:"clientIdOptions",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"select",modelName:"surveySource",placeholder:t(()=>l("callback.vipType")),option:"surveySource",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"input",modelName:"projectName",placeholder:t(()=>l("callback.projectName"))},{index:6,show:!0,type:"input",modelName:"memberChildId",placeholder:t(()=>l("callback.vipSubVipId"))},{index:7,show:!0,type:"select",modelName:"callbackStatus",placeholder:t(()=>l("callback.callbackStatus")),option:"callbackStatus",optionLabel:"label",optionValue:"value"},{index:8,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:t(()=>l("callback.startDate")),endPlaceHolder:t(()=>l("callback.endDate"))}]});const W={surveySource:()=>V,callbackStatus:()=>w,clientIdOptions:()=>D};return(c,o)=>{const J=Ce,G=h("ElDivider"),K=Se,X=h("el-button"),Y=fe,Z=ge,ee=h("el-row"),m=h("el-table-column"),le=h("el-tag"),ae=h("el-empty"),te=h("el-table"),ce=h("ElPagination"),oe=_e,ne=de("loading");return p(),be("div",{class:he({"absolute-container":e(j)})},[d(oe,null,{default:n(()=>[d(J,{formSearchList:e(z),formSearchName:e(A),onCurrentChange:P,onOnReset:$,model:e(g),formOption:W},null,8,["formSearchList","formSearchName","model"]),d(G,{"border-style":"dashed"}),d(ee,null,{default:n(()=>[d(K),d(Z,null,{default:n(()=>[d(X,{size:"default"},{default:n(()=>[i(r(e(l)("callback.export")),1)]),_:1}),d(Y,{border:e(S),"onUpdate:border":o[0]||(o[0]=a=>_(S)?S.value=a:null),tableAutoHeight:e(j),"onUpdate:tableAutoHeight":o[1]||(o[1]=a=>_(j)?j.value=a:null),checkList:e(s),"onUpdate:checkList":o[2]||(o[2]=a=>_(s)?s.value=a:null),columns:e(U),"onUpdate:columns":o[3]||(o[3]=a=>_(U)?U.value=a:null),"line-height":e(N),"onUpdate:lineHeight":o[4]||(o[4]=a=>_(N)?N.value=a:null),stripe:e(C),"onUpdate:stripe":o[5]||(o[5]=a=>_(C)?C.value=a:null),style:{"margin-left":"12px"},onQueryData:F},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((p(),b(te,{border:e(S),data:e(L),size:e(N),stripe:e(C),onSelectionChange:q},{empty:n(()=>[d(ae,{image:e(ke),"image-size":300},null,8,["image"])]),default:n(()=>[e(s).includes("projectQuestionnaireClickId")?(p(),b(m,{key:0,align:"left",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:e(l)("callback.clickID")},{default:n(({row:a})=>[i(r(a.projectQuestionnaireClickId?a.projectQuestionnaireClickId:"-"),1)]),_:1},8,["label"])):k("",!0),d(m,{label:e(l)("callback.project"),width:"300",align:"center"},{default:n(({row:a})=>[i(r(a.customerShortName)+" ",1),Ne,i(" "+r(a.projectName)+" ",1),je,i(" "+r(a.projectId),1)]),_:1},8,["label"]),e(s).includes("memberChildId")?(p(),b(m,{key:1,align:"center","show-overflow-tooltip":"",label:e(l)("callback.vipSubVipId")},{default:n(({row:a})=>[x("p",null,r(V[a.surveySource-1].label),1),i(" "+r(a.memberChildId)+" ",1),Ue,i(" "+r(a.randomIdentityId),1)]),_:1},8,["label"])):k("",!0),e(s).includes("clientId")?(p(),b(m,{key:2,align:"center","show-overflow-tooltip":"",label:e(l)("callback.clientID")},{default:n(({row:a})=>[i(r(a.clientId),1)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackUrl")?(p(),b(m,{key:3,align:"left",prop:"callbackUrl",label:e(l)("callback.callbackUrl")},null,8,["label"])):k("",!0),e(s).includes("subordinateUrl")?(p(),b(m,{key:4,align:"left",prop:"subordinateUrl",label:e(l)("callback.subordinateUrl")},{default:n(({row:a})=>[i(r(a.subordinateUrl?a.subordinateUrl:"-"),1)]),_:1},8,["label"])):k("",!0),e(s).includes("sourceUrl")?(p(),b(m,{key:5,align:"left",prop:"sourceUrl",label:e(l)("callback.source")},{default:n(({row:a})=>[i(r(a.sourceUrl?a.sourceUrl:"-"),1)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackTime")?(p(),b(m,{key:6,align:"left",prop:"callbackTime","show-overflow-tooltip":"",label:e(l)("callback.callbackTime"),width:"200"},{default:n(({row:a})=>[i(r(a.callbackTime?a.callbackTime:"-"),1)]),_:1},8,["label"])):k("",!0),e(s).includes("callbackStatus")?(p(),b(m,{key:7,align:"left",prop:"callbackStatus","show-overflow-tooltip":"",label:e(l)("callback.callbackStatus")},{default:n(({row:a})=>[a.callbackStatus&&w[a.callbackStatus]?(p(),b(le,{key:0,type:w[a.callbackStatus].type},{default:n(()=>[i(r(w[a.callbackStatus].label),1)]),_:2},1032,["type"])):k("",!0)]),_:1},8,["label"])):k("",!0)]),_:1},8,["border","data","size","stripe"])),[[ne,e(I)]]),d(ce,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:B,onCurrentChange:P},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Pe=Ie(we,[["__scopeId","data-v-8cc3cbf8"]]);export{Pe as default};
