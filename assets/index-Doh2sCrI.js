
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as V}from"./index-CiQvlMcM.js";import{a as x}from"./user_cooperation-Q42SquhP.js";import{d as w,r as _,n as I,a as h,o as s,b as l,f as r,w as m,y as p,g as c,i as a,z as i,F as y,t as b,j as g,A as D,L as C}from"./index-BWHsH9Pt.js";import"./index-COtPvyuN.js";import"./clipboard-CZ5BstvE.js";const z={key:0,class:"idList"},E={key:1,class:"idList"},j={key:2,class:"idList"},A={style:{flex:"auto"}},B=w({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(F,{expose:N,emit:q}){const L=_(!1),f=_(!1);_();const e=_({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),S=async u=>{const{data:o}=await x.getTenantSupplierMemberNameInfo(u);return o},T=async u=>{for(let o of u.type){const d=await S({projectId:u.projectId,type:o});e.value.results.push({type:o,getTenantSupplierMemberNameList:d.getTenantSupplierMemberNameList}),e.value.results.forEach(n=>{n.type==2&&(e.value.supplierList=n.getTenantSupplierMemberNameList?n.getTenantSupplierMemberNameList:[]),n.type==3&&(e.value.memberList=n.getTenantSupplierMemberNameList?n.getTenantSupplierMemberNameList:[]),n.type==4&&(e.value.tenantList=n.getTenantSupplierMemberNameList?n.getTenantSupplierMemberNameList:[])})}};async function M(u){try{L.value=!0,T(u),L.value=!1,f.value=!0}catch{}finally{L.value=!1}}function v(){f.value=!1}return I(async()=>{}),N({showEdit:M}),(u,o)=>{const d=h("el-button"),n=V,k=h("el-dialog");return s(),l("div",null,[r(k,{modelValue:a(f),"onUpdate:modelValue":o[0]||(o[0]=t=>D(f)?f.value=t:null),title:"分配",width:"700","before-close":v},{footer:m(()=>[p("div",A,[r(d,{onClick:v},{default:m(()=>[c(" 关闭 ")]),_:1})])]),default:m(()=>[a(e).supplierList.length!=0?(s(),l("div",z,[r(d,{size:"small",type:"danger"},{default:m(()=>[c("供应商 "+i(a(e).supplierList>1?a(e).supplierList:""),1)]),_:1}),(s(!0),l(y,null,b(a(e).supplierList,t=>(s(),l("div",{class:"item",key:t.id},[p("b",null,i(t.name),1),c("   "),p("span",null,"ID: "+i(t.id),1),r(n,{content:t.id},null,8,["content"])]))),128))])):g("",!0),a(e).memberList.length!=0?(s(),l("div",E,[r(d,{size:"small",type:"success"},{default:m(()=>[c("会员组 "+i(a(e).memberList>1?a(e).memberList:""),1)]),_:1}),(s(!0),l(y,null,b(a(e).memberList,t=>(s(),l("div",{class:"item",key:t.id},[p("b",null,i(t.name),1),c("   "),p("span",null,"ID: "+i(t.id),1),r(n,{content:t.id},null,8,["content"])]))),128))])):g("",!0),a(e).tenantList.length!=0?(s(),l("div",j,[r(d,{size:"small",type:"primary"},{default:m(()=>[c("合作商 "+i(a(e).tenantList>1?a(e).tenantList:""),1)]),_:1}),(s(!0),l(y,null,b(a(e).tenantList,t=>(s(),l("div",{class:"item",key:t.id},[p("b",null,i(t.name),1),c("   "),p("span",null,"ID: "+i(t.id),1),r(n,{content:t.id},null,8,["content"])]))),128))])):g("",!0)]),_:1},8,["modelValue"])])}}}),K=C(B,[["__scopeId","data-v-b333f0d0"]]);export{K as default};
