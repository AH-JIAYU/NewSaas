
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as U,d as M,r as g,l as S,E as V,a as s,al as $,am as B,o as D,b as T,f as e,w as a,g as p,at as z,ak as Q,P as Z}from"./index-B4ooH8ql.js";import{C as H}from"./clipboard-ClqrsoML.js";const k={list:()=>U.post("supplier-config/get/getSupplierConfig"),create:b=>U.post("supplier-config/insert/insertSupplierConfig",b),edit:b=>U.post("/supplier-config/update/updateSupplierConfig",b)},I=M({name:"site_setting",__name:"list",setup(b){const R=g("基本设置"),m=g(!1),c=g(),l=g({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:"",defaultPriceRatio:"",taxRate:"",minimumAmount:"",fixedPrice:""}),P=(n,t,i)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(l.value.phone)?i():i(new Error("请输入合法手机号"))},C=(n,t,i)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(l.value.email)?i():i(new Error("请输入合法邮箱"))},E=()=>{l.value.phone=[{required:!0,trigger:"blur",message:"请输入手机号/邮箱"},{validator:P,trigger:"blur"}],l.value.email=[{required:!0,trigger:"blur",message:"请输入手机号/邮箱"},{validator:C,trigger:"blur"}]},h=g({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}],phone:[{required:!1,trigger:"blur",message:"请输入手机号"}],email:[{required:!1,trigger:"blur",message:"请输入邮箱"}]});S(()=>{y()});async function y(){m.value=!0;const{data:n}=await k.list();l.value=n||l.value,m.value=!1}const w=new H(".copy");w.on("success",function(n){V.success({message:"复制成功",center:!0}),n.clearSelection(),w.destroy()}),w.on("error",function(){V.error({message:"复制失败",center:!0})});function W(){l.value.id===""?c.value&&c.value.validate(n=>{n&&(m.value=!0,delete l.value.id,k.create(l.value).then(()=>{m.value=!1,y(),V.success({message:"新增成功",center:!0})}))}):c.value&&c.value.validate(n=>{if(n)try{let{id:t,keyWords:i,registerExamineOffOrOn:f,registerOffOrOn:r,supplierURL:d,webName:u,defaultPriceRatio:x,taxRate:v,minimumAmount:O}=l.value;const _={id:t,keyWords:i,registerExamineOffOrOn:f,registerOffOrOn:r,supplierURL:d,webName:u,defaultPriceRatio:x,taxRate:v,minimumAmount:O};m.value=!0,k.edit(_).then(()=>{m.value=!1,y(),V.success({message:"修改成功",center:!0})})}catch{}})}return(n,t)=>{const i=z,f=s("el-switch"),r=s("el-form-item"),d=s("el-col"),u=s("el-input"),x=s("el-text"),v=s("el-button"),O=s("el-row"),_=s("el-tab-pane"),L=s("el-form"),N=s("el-tabs"),A=Q,q=$("loading");return B((D(),T("div",null,[e(i,{title:"站点设置管理"}),e(A,null,{default:a(()=>[e(N,{modelValue:R.value,"onUpdate:modelValue":t[12]||(t[12]=o=>R.value=o)},{default:a(()=>[e(L,{ref_key:"formRef",ref:c,model:l.value,rules:h.value,"label-width":"140px",inline:!1,"label-position":"left"},{default:a(()=>[e(_,{label:"基本设置",name:"基本设置"},{default:a(()=>[e(O,{gutter:20,style:{margin:"0"}},{default:a(()=>[e(d,{span:3},{default:a(()=>[e(r,{label:"注册开关"},{default:a(()=>[e(f,{modelValue:l.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:6},{default:a(()=>[e(r,{label:"注册审核"},{default:a(()=>[e(f,{modelValue:l.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:24},{default:a(()=>[e(r,{label:"网站名称",prop:"webName"},{default:a(()=>[e(u,{modelValue:l.value.webName,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.webName=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:24},{default:a(()=>[e(r,{label:"keyWords"},{default:a(()=>[e(u,{modelValue:l.value.keyWords,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.keyWords=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:24},{default:a(()=>[e(r,{label:"站点系统域名",prop:"supplierURL"},{default:a(()=>[e(u,{modelValue:l.value.supplierURL,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.supplierURL=o),style:{width:"8rem"}},null,8,["modelValue"]),e(x,{class:"mx-1"},{default:a(()=>[p(".front-supplier.surveyssaas.com")]),_:1}),e(v,{class:"copy","data-clipboard-text":`${l.value.supplierURL}.front-supplier.surveyssaas.com`,type:"primary",link:""},{default:a(()=>[p("复制")]),_:1},8,["data-clipboard-text"])]),_:1})]),_:1}),e(d,{span:24},{default:a(()=>[e(r,null,{default:a(()=>[e(v,{type:"primary",onClick:W},{default:a(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{label:"高级设置",name:"高级设置"},{default:a(()=>[e(r,{label:"默认供应商价格比例",prop:""},{default:a(()=>[e(u,{modelValue:l.value.defaultPriceRatio,"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.defaultPriceRatio=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:a(()=>[p("%")]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"最低结算金额",prop:""},{default:a(()=>[e(u,{modelValue:l.value.minimumAmount,"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.minimumAmount=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"供应商税点",prop:""},{default:a(()=>[e(u,{modelValue:l.value.taxRate,"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.taxRate=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:a(()=>[p("%")]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(v,{type:"primary",onClick:W},{default:a(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1}),e(_,{label:"联系我们",name:"联系我们"},{default:a(()=>[e(r,{label:"电子邮箱",prop:"email"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.keyWords=o),placeholder:"",onBlur:E},null,8,["modelValue"])]),_:1}),e(r,{label:"手机号码",prop:"phone"},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.keyWords=o),placeholder:"",onBlur:E},null,8,["modelValue"])]),_:1}),e(r,{label:"QQ号码",prop:""},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,{label:"公司地址",prop:""},{default:a(()=>[e(u,{style:{width:"18rem"},modelValue:l.value.keyWords,"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(v,{type:"primary"},{default:a(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])),[[q,m.value]])}}}),F=Z(I,[["__scopeId","data-v-6ae256fd"]]);export{F as default};
