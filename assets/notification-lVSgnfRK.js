
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as H,aM as U,r as m,z as P,c as A,k as z,a as b,o as d,b as c,f as u,w as _,s as a,i as t,S as f,H as l,ah as I,F as L,t as N,j as p,e as v,q as F,ap as j,n as $,ao as O,R as G,an as D}from"./index-DAXVbWbf.js";import J from"./notification-news-F2HPEZI6.js";import K from"./notification-cooperation-B77p4qHG.js";const Q={class:"absolute-container"},W={class:"flex-c"},X={class:"left"},Y={class:"buttons"},Z=["onClick"],ee={class:"info"},te={class:"time"},se={key:0,class:"new"},ae={class:"auditType"},oe={class:"time"},ne={class:"data"},ie={class:"buttons"},de=["onClick"],le={class:"info"},ce={class:"time"},re={key:0,class:"new"},ue={class:"auditType"},_e={class:"time"},fe={class:"data"},pe={key:0,class:"right"},S=H({name:"PersonalNotification",__name:"notification",setup(ye){const n=U(),h=m(),k=m(),r=P(),e=m({tabs:"",selectId:"",ReadAlready:1});function g(i){e.value.selectId=i.id,$(()=>{var o;(o=k.value)==null||o.showEdit(i)})}function w(i){e.value.selectId=i.id,$(()=>{h.value.showEdit(i)})}const q=async()=>{console.log("data.value.tabs",e.value.tabs),e.value.selectId="",e.value.ReadAlready=1,e.value.tabs==="news"?await n.getUnreadMessage():e.value.tabs==="cooperation"&&await n.getUnreadTodo()};async function R(){e.value.selectId=""}const y=async i=>{e.value.ReadAlready=i,e.value.tabs==="news"?await n.getUnreadMessage():e.value.tabs==="cooperation"&&await n.getUnreadTodo()},x=A(()=>n.messageList.filter(i=>i.isReadAlready===e.value.ReadAlready)),E=A(()=>n.todoList.filter(i=>i.isReadAlready===e.value.ReadAlready));return z(()=>{if(e.value.tabs=r.query.type==2?"cooperation":"news",r.query.id){if(Number(r.query.type)===1){const i=n.messageList.find(o=>o.id===r.query.id);g(i)}else if(Number(r.query.type)===2){const i=n.todoList.find(o=>o.id===r.query.id);w(i)}}}),(i,o)=>{const C=b("el-empty"),T=b("el-tab-pane"),M=b("el-tabs"),V=O;return d(),c("div",Q,[u(V,null,{default:_(()=>[a("div",W,[a("div",X,[u(M,{modelValue:t(e).tabs,"onUpdate:modelValue":o[4]||(o[4]=s=>t(e).tabs=s),onTabChange:q},{default:_(()=>[u(T,{label:"消息",name:"news"},{default:_(()=>[a("div",Y,[a("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:o[0]||(o[0]=s=>y(1))},"未读"+l(t(n).message<100?`(${t(n).message})`:"99+"),3),a("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:o[1]||(o[1]=s=>y(2))},"已读",2)]),u(t(I),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(n).messageList.length?(d(!0),c(L,{key:0},N(t(x),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>g(s)},[a("div",ee,[a("div",te,[s.isReadAlready===1?(d(),c("span",se)):p("",!0),a("span",ae,l(t(n).auditTypeList[s.auditType-1]||""),1),a("span",oe,l(s.createTime),1)]),a("div",ne,l(s.messageContent),1)])],10,Z))),256)):(d(),v(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1}),u(T,{label:"代办",name:"cooperation"},{default:_(()=>[a("div",ie,[a("button",{class:f(t(e).ReadAlready===1?"unread":""),onClick:o[2]||(o[2]=s=>y(1))},"未读"+l(t(n).todo<100?`(${t(n).todo})`:"99+"),3),a("button",{class:f(t(e).ReadAlready===2?"read":""),read:"",onClick:o[3]||(o[3]=s=>y(2))},"已读",2)]),u(t(I),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[t(n).todoList.length?(d(!0),c(L,{key:0},N(t(E),s=>(d(),c("div",{class:f({item:"item",select:s.id===t(e).selectId}),onClick:B=>w(s)},[a("div",le,[a("div",ce,[s.isReadAlready===1?(d(),c("span",re)):p("",!0),a("span",ue,l(t(n).auditTypeList[s.auditType-1]||""),1),a("span",_e,l(s.createTime),1)]),a("div",fe," 您好，我是"+l(s.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(s.phoneOrEmail)+"。 ",1)])],10,de))),256)):(d(),v(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e).selectId?F((d(),c("div",pe,[t(e).tabs==="news"?(d(),v(J,{key:0,ref_key:"newsRef",ref:k,onDelSelectId:R},null,512)):p("",!0),t(e).tabs==="cooperation"?(d(),v(K,{key:1,ref_key:"cooperationRef",ref:h,onDelSelectId:R},null,512)):p("",!0)],512)),[[j,t(e).selectId]]):p("",!0)])]),_:1})])}}});typeof D=="function"&&D(S);const he=G(S,[["__scopeId","data-v-347a3666"]]);export{he as default};
