
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Y,r as S,c as q,o as h,b as V,i as a,ak as x,aG as M,aC as J,z as A,j as C,l as g,f as n,P as O,K as Z,_ as ee,aH as Ce,B as ke,$ as Q,a as f,aj as Ee,w as d,g as w,D as G,aw as j,e as P,E as De,aI as W,ai as U,ar as $e,az as Ie,aA as Ve,p as X}from"./index-DA0dbiYf.js";import Le from"./index-CJXdvu_C.js";import ze from"./index-Dn4XT39o.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-BauhDfZ1.js";import{a as I}from"./dictionary-CTcUvkbS.js";const xe={class:"flex-container"},Ne={class:"main"},Be={key:0,class:"left-side-icon absolute top-1/2 z-1 h-6 w-6 flex-center cursor-pointer rounded-1/2 bg-[var(--g-container-bg)] -left-3"},Te={key:1,class:"right-side-icon absolute top-1/2 z-1 h-6 w-6 flex-center cursor-pointer rounded-1/2 bg-[var(--g-container-bg)] -right-3"},Re={class:"main-container"},Pe=Y({name:"ListLayout",__name:"index",props:{enableLeftSide:{type:Boolean,default:!0},enableRightSide:{type:Boolean,default:!0},leftSideWidth:{default:300},rightSideWidth:{default:300},hideLeftSideToggle:{type:Boolean,default:!1},hideRightSideToggle:{type:Boolean,default:!1}},setup(k){const L=k,i=S(!0),c=S(!0),N=q(()=>L.enableLeftSide&&!!O().leftSide),B=q(()=>L.enableRightSide&&!!O().rightSide);return(u,E)=>{const T=Z;return h(),V("div",xe,[a(N)?x((h(),V("div",{key:0,class:"left-side",style:J({width:typeof u.leftSideWidth=="number"?`${u.leftSideWidth}px`:u.leftSideWidth})},[A(u.$slots,"leftSide",{},void 0,!0)],4)),[[M,a(i)]]):C("",!0),g("div",Ne,[a(N)&&!u.hideLeftSideToggle?(h(),V("div",Be,[n(T,{name:a(i)?"i-ep:caret-left":"i-ep:caret-right",class:"op-30 transition-opacity hover:op-100",onClick:E[0]||(E[0]=l=>i.value=!a(i))},null,8,["name"])])):C("",!0),a(B)&&!u.hideRightSideToggle?(h(),V("div",Te,[n(T,{name:a(c)?"i-ep:caret-right":"i-ep:caret-left",class:"op-30 transition-opacity hover:op-100",onClick:E[1]||(E[1]=l=>c.value=!a(c))},null,8,["name"])])):C("",!0),g("div",Re,[A(u.$slots,"default",{},void 0,!0)])]),a(B)?x((h(),V("div",{key:1,class:"right-side",style:J({width:typeof u.rightSideWidth=="number"?`${u.rightSideWidth}px`:u.rightSideWidth})},[A(u.$slots,"rightSide",{},void 0,!0)],4)),[[M,a(c)]]):C("",!0)])}}}),We=ee(Pe,[["__scopeId","data-v-19e18cc4"]]),Ue=k=>(Ie("data-v-7cff0191"),k=k(),Ve(),k),Me={class:"absolute-container"},Ae={class:"page-main"},Ge={class:"custom-tree-node"},je=["title"],He={class:"code"},Fe={class:"actions"},Ke={class:"dictionary-container"},qe={class:"dictionary-container"},Je=Ue(()=>g("div",{class:"empty"}," 请在左侧新增或选择一个字典 ",-1)),Oe=[Je],te=Y({name:"PagesExampleDictionary",__name:"index",setup(k){const L=S(),i=S({search:"",tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""}}),{pagination:c,getParams:N,onSizeChange:B,onCurrentChange:u,onSortChange:E}=Ce();c.value.size=20,c.value.sizes=[20,50,100];const T=S(),l=S({loading:!1,search:{dictionaryId:"",title:""},dataList:[],selectionDataList:[],dialog:{visible:!1,id:""}});function H(){l.value.search.dictionaryId="",I.list().then(e=>{i.value.tree=e.data})}ke(()=>{H()}),Q(()=>i.value.search,e=>{L.value.filter(e)});function ie(e,t){return e?t.label.includes(e):!0}function F(e){i.value.currentData=e,i.value.dialog.parentId=(e==null?void 0:e.id)??"",i.value.dialog.id="",i.value.dialog.visible=!0}function ae(e,t){i.value.currentNode=e,i.value.currentData=t,i.value.dialog.parentId=e.parent.data.id??"",i.value.dialog.id=t.id,i.value.dialog.visible=!0}function ne(e,t){W.confirm(`确认删除「${t.label}」吗？`,"确认信息").then(()=>{I.delete(t.id).then(()=>{U.success({message:"模拟删除成功",center:!0});const s=e.parent,p=s.data.children||s.data,r=p.findIndex(m=>m.id===t.id);p.splice(r,1),i.value.tree=[...i.value.tree]})})}function le(e){i.value.currentData?(i.value.currentData.children||(i.value.currentData.children=[]),i.value.currentData.children.push({id:e.id,label:e.label,code:e.code})):i.value.tree.push({id:e.id,label:e.label,code:e.code})}function oe(e,t){if(i.value.currentNode&&i.value.currentData)if((i.value.currentNode.parent.data.id??"")===t)i.value.currentData.label=e.label,i.value.currentData.code=e.code;else{const s=i.value.currentNode.parent,p=s.data.children||s.data,r=p.findIndex(m=>m.id===e.id);if(p[r].label=e.label,p[r].code=e.code,t){const m=(y,R)=>{for(const $ in y){if(y[$].id===R)return y[$];if(y[$].children){const _=m(y[$].children,R);if(_)return _}}},D=m(i.value.tree,t);D.children||(D.children=[]),D.children.push(p[r])}else i.value.tree.push(p[r]);p.splice(r,1)}}function de(e){c.value.page=1,l.value.search.dictionaryId=e.id}Q(()=>l.value.search.dictionaryId,()=>{v()});function v(){l.value.loading=!0;const e={...N(),dictionary_id:l.value.search.dictionaryId,...l.value.search.title&&{title:l.value.search.title}};I.itemList(e).then(t=>{l.value.loading=!1,l.value.dataList=t.data.list,l.value.dataList.forEach(s=>{s.enableLoading=!1}),c.value.total=t.data.total})}function se(e){return new Promise(t=>{W.confirm(`确认${e.enable?"禁用":"启用"}「${e.name}」吗？`,"确认信息").then(()=>{e.enableLoading=!0,I.itemChangeEnable({id:e.id,enable:!e.enable}).then(()=>(e.enableLoading=!1,U.success({message:`模拟${e.enable?"禁用":"启用"}成功`,center:!0}),t(!0))).catch(()=>(e.enableLoading=!1,t(!1)))}).catch(()=>t(!1))})}function re(e){B(e).then(()=>v())}function ce(e=1){u(e).then(()=>v())}function ue({prop:e,order:t}){E(e,t).then(()=>v())}function pe(){l.value.dialog.id="",l.value.dialog.visible=!0}function fe(e){l.value.dialog.id=e.id,l.value.dialog.visible=!0}function ge(e){W.confirm(`确认删除「${e.name}」吗？`,"确认信息").then(()=>{I.itemDelete(e.id).then(()=>{v(),U.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function he(e){W.confirm(`确认删除选中的 ${e.length} 条数据吗？`,"确认信息").then(()=>{I.itemDelete(e.map(t=>t.id)).then(()=>{v(),U.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}const z=S(!1);return(e,t)=>{const s=f("ElButton"),p=$e,r=Z,m=f("ElButtonGroup"),D=f("ElInput"),y=f("ElTree"),R=f("ElScrollbar"),$=f("ElSpace"),_=f("ElTableColumn"),me=f("ElTag"),ve=f("ElSwitch"),_e=f("ElTable"),be=f("ElPagination"),ye=We,Se=Ee("loading");return h(),V("div",Me,[n(p,{title:"字典管理",content:"页面数据为 Mock 示例数据，非真实数据。"},{default:d(()=>[n(s,{onClick:t[0]||(t[0]=o=>z.value=!0)},{default:d(()=>[w(" 使用示例 ")]),_:1})]),_:1}),g("div",Ae,[n(ye,{"hide-left-side-toggle":""},{leftSide:d(()=>[n(m,{class:"btns"},{default:d(()=>[n(s,{type:"primary",class:"add",onClick:t[1]||(t[1]=o=>F())},{default:d(()=>[w(" 新增字典 ")]),_:1}),n(s,{onClick:H},{icon:d(()=>[n(r,{name:"i-ep:refresh"})]),_:1})]),_:1}),n(D,{modelValue:a(i).search,"onUpdate:modelValue":t[2]||(t[2]=o=>a(i).search=o),placeholder:"请输入关键词筛选字典",clearable:"",class:"search"},null,8,["modelValue"]),n(R,{class:"tree"},{default:d(()=>[n(y,{ref_key:"dictionaryRef",ref:L,data:a(i).tree,"filter-node-method":ie,"default-expand-all":"",onNodeClick:de},{default:d(({node:o,data:b})=>[g("div",Ge,[g("div",{class:"label",title:o.label},G(o.label),9,je),g("div",He,G(b.code),1),g("div",Fe,[n(m,null,{default:d(()=>[n(s,{type:"primary",plain:"",size:"default",onClick:j(K=>F(b),["stop"])},{icon:d(()=>[n(r,{name:"i-ep:plus"})]),_:2},1032,["onClick"]),n(s,{type:"info",plain:"",size:"default",onClick:j(K=>ae(o,b),["stop"])},{icon:d(()=>[n(r,{name:"i-ep:edit"})]),_:2},1032,["onClick"]),n(s,{type:"danger",plain:"",size:"default",onClick:j(K=>ne(o,b),["stop"])},{icon:d(()=>[n(r,{name:"i-ep:delete"})]),_:2},1032,["onClick"])]),_:2},1024)])])]),_:1},8,["data","filter-node-method"])]),_:1})]),default:d(()=>[x(g("div",Ke,[n($,{wrap:""},{default:d(()=>[n(s,{type:"primary",onClick:pe},{icon:d(()=>[n(r,{name:"i-ep:plus"})]),_:1}),n(s,{type:"danger",disabled:!a(l).selectionDataList.length,onClick:t[3]||(t[3]=o=>he(a(l).selectionDataList))},{icon:d(()=>[n(r,{name:"i-ep:delete"})]),_:1},8,["disabled"]),n(D,{modelValue:a(l).search.title,"onUpdate:modelValue":t[4]||(t[4]=o=>a(l).search.title=o),placeholder:"请输入关键词筛选字典项",clearable:"",style:{width:"200px"}},null,8,["modelValue"]),n(s,{onClick:v},{icon:d(()=>[n(r,{name:"i-ep:search"})]),_:1})]),_:1}),x((h(),P(_e,{ref_key:"dictionaryItemRef",ref:T,data:a(l).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:ue,onSelectionChange:t[5]||(t[5]=o=>a(l).selectionDataList=o)},{default:d(()=>[n(_,{type:"selection",align:"center",fixed:""}),n(_,{prop:"name",label:"名称"}),n(_,{label:"键值",align:"center",width:"150"},{default:d(o=>[n(me,{type:"info"},{default:d(()=>[w(G(o.row.value),1)]),_:2},1024)]),_:1}),n(_,{label:"状态",width:"100",align:"center"},{default:d(o=>[n(ve,{modelValue:o.row.enable,"onUpdate:modelValue":b=>o.row.enable=b,loading:o.row.enableLoading,"inline-prompt":"","active-text":"启用","inactive-text":"禁用","before-change":()=>se(o.row)},null,8,["modelValue","onUpdate:modelValue","loading","before-change"])]),_:1}),n(_,{label:"操作",width:"200",align:"center"},{default:d(o=>[n(s,{type:"primary",size:"small",plain:"",onClick:b=>fe(o.row)},{default:d(()=>[w(" 编辑 ")]),_:2},1032,["onClick"]),n(s,{type:"danger",size:"small",plain:"",onClick:b=>ge(o.row)},{default:d(()=>[w(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Se,a(l).loading]]),n(be,{"current-page":a(c).page,total:a(c).total,"page-size":a(c).size,"page-sizes":a(c).sizes,layout:a(c).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:ce},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[M,a(l).search.dictionaryId]]),x(g("div",qe,Oe,512),[[M,!a(l).search.dictionaryId]])]),_:1}),a(i).dialog.visible?(h(),P(Le,{key:0,id:a(i).dialog.id,modelValue:a(i).dialog.visible,"onUpdate:modelValue":t[6]||(t[6]=o=>a(i).dialog.visible=o),"parent-id":a(i).dialog.parentId,tree:a(i).tree,onAddNode:le,onEditNode:oe},null,8,["id","modelValue","parent-id","tree"])):C("",!0),a(l).dialog.visible?(h(),P(ze,{key:1,id:a(l).dialog.id,modelValue:a(l).dialog.visible,"onUpdate:modelValue":t[7]||(t[7]=o=>a(l).dialog.visible=o),"dictionary-id":a(l).search.dictionaryId,tree:a(i).tree,onSuccess:v},null,8,["id","modelValue","dictionary-id","tree"])):C("",!0),a(z)?(h(),P(we,{key:2,modelValue:a(z),"onUpdate:modelValue":t[8]||(t[8]=o=>De(z)?z.value=o:null)},null,8,["modelValue"])):C("",!0)])])}}});typeof X=="function"&&X(te);const tt=ee(te,[["__scopeId","data-v-7cff0191"]]);export{tt as default};
