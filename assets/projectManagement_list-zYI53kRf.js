
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{af as g,l as L,r as h}from"./index-BEkVhh-P.js";import{u as P}from"./user_customer-h2UNGDes.js";const w=g("projectManagementList",()=>{const p=L(),m=P(),y=h([]),f={required:!1,name:"",projectIdentification:"",clientId:null,countryIdList:[],doMoneyPrice:null,num:null,minimumDuration:null,ir:null,uidUrl:"",mutualExclusion:1,mutualExclusionId:"",remark:"",isPinned:2,isOnline:1,isProfile:2,isB2b:1,projectType:[],projectRemark:"",isTimeReleases:1,releaseTime:"",descriptionUrl:[],richText:"",projectQuotaInfoList:[],timeDifferenceDetection:2,ipDifferenceDetection:2,ipConsistency:2,limitedQuantity:null,preNum:null,data:{configurationInformation:{initialProblem:{countryId:null,projectProblemCategoryId:null,projectQuotaQuestionType:null,projectProblemId:null,keyValue:"",questionType:null,answerValueList:[],projectAnswerIdList:[]},configurationCountryList:null,projectCategoryList:null,ProjectProblemInfoList:[]}}},a={name:{val:"项目名称"},projectIdentification:{val:"项目标识"},clientId:{val:"所属客户"},countryIdList:{val:"所属区域"},doMoneyPrice:{val:"原价"},num:{val:"配额"},minimumDuration:{val:"最小时长"},ir:{val:"ir"},uidUrl:{val:"url"},mutualExclusion:{val:"填写互斥ID",type:"switch",1:"开启",2:"关闭"},mutualExclusionId:{val:"互斥id"},remark:{val:"备注"},isPinned:{val:"置顶",type:"switch",1:"开启",2:"关闭"},isOnline:{type:"switch",val:"在线",1:"开启",2:"关闭"},isProfile:{val:"前置问卷",type:"switch",1:"开启",2:"关闭"},isB2b:{val:"b2b",type:"switch",2:"开启",1:"关闭"},projectType:{val:"项目类型"},isTimeReleases:{val:"定时发布",type:"switch",2:"开启",1:"关闭"},releaseTime:{val:"发布时间"},limitedQuantity:{val:"小时完成量"},preNum:{val:"小时准入量"},ipDifferenceDetection:{val:"允许重复参与",type:"switch",1:"开启",2:"关闭"}},I={countryId:null,projectProblemCategoryId:null,projectQuotaQuestionType:null,projectProblemId:null,keyValue:"",questionType:null,answerValueList:[],projectAnswerIdList:[]},v={1:"自动分配",2:"供应商",3:"会员组"},j=async(c,l)=>{const s=c.reduce((i,o)=>(i[o.projectId]=o,i),{});return await l.forEach(async i=>{const o=s[i.projectId];if(o){const t=[];for(const e in i)if(a.hasOwnProperty(e)){let n=i[e],r=o[e];if(JSON.stringify(n)!==JSON.stringify(r)){Array.isArray(n)&&!n.length&&(n=n.toString()),Array.isArray(r)&&!r.length&&(r=r.toString()),(e==="clientId"||e==="countryIdList")&&(r=await u(e,r),n=await u(e,n));const d=a[e].val||e;a[e].type==="switch"?t.push(`${d}「${a[e][r]}」更改为「${a[e][n]}」`):t.push(`${d}「${r||"null"}」更改为「${n||"null"}」`)}}t.length>0&&(i.projectLogList=t)}}),l},u=async(c,l)=>{let s;if(c==="clientId")s=(await m.getCustomerList()).find(t=>t.tenantCustomerId===l).customerAccord;else if(c==="countryIdList"){const o=(await p.getCountry()).reduce((t,e)=>(t[e.id]=e.chineseName,t),{});s=l.map(t=>o[t]).filter(t=>t!==void 0)}return s};return{initialTopTabsData:f,initialProblem:I,allocationTypeList:v,dataBeforeEditing:y,compareProjectData:j}}),b=w;export{b as u};
