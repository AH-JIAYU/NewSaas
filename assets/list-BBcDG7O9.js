
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as le,aO as ne,r as s,a5 as se,l as ie,b as u,q as re,o as n,e as pe,g as a,w as t,h as i,s as ce,f as r,j as _,aN as ue,t as d,k as f,H as m,S as de,bd as me,aP as fe,E as _e,aQ as ge,aR as he,bc as ye,ap as ve,R as be}from"./index-DWyrlM-a.js";import{_ as ke}from"./index-DOU_B5SV.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-D-de_Ks8.js";import{_ as Se}from"./index-DawvdVcP.js";import{_ as Ne}from"./index.vue_vue_type_script_setup_true_lang-CSAf8Zww.js";import{a as P}from"./projectManagement_scheduling-BQwR6HGi.js";import"./index-iVF_fuvi.js";import"./index.vue_vue_type_script_setup_true_lang-DvSyiaoy.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-yC3iUFop.js";const Ce={class:"tableBig"},je={class:"tableBig"},we={class:"copyId tableSmall"},ze={class:"id oneLine"},De={class:"tableBig"},Le={class:"tableBig"},Te={class:"specifyTheTarget"},xe={class:"tableBig"},Pe={class:"id tableSmall"},Ee=le({name:"scheduling",__name:"list",setup(Be){const{format:E}=me(),{pagination:g,getParams:B,onSizeChange:R,onCurrentChange:M}=ne(),$=s(""),v=s(!1),b=s(!0),k=s(),I=s(!1),p=s([]),z=s(),G=s("formSearch-scheduling"),S=s("default"),N=s(!1),C=s([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"原价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定会员组",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),j=se({dispatchType:"",projectId:"",projectName:""}),D=s([]);function H(){k.value.showEdit()}function U(l){k.value.showEdit(l)}function F(l){fe.confirm(`确认删除「${l.projectName}」吗？`,"确认信息").then(()=>{P.delete({projectDispatchId:l.projectDispatchId}).then(o=>{h(),_e.success({message:"删除成功",center:!0})})}).catch(()=>{})}function V(l){R(l).then(()=>h())}function w(l=1){M(l).then(()=>h())}function A(){Object.assign(j,{dispatchType:"",projectId:"",projectName:""}),h()}async function h(){try{v.value=!0;const l={...B(),...j},o=await P.list(l);D.value=o.data.getProjectDispatchInfoList,g.value.total=o.data.total,v.value=!1}catch{}finally{v.value=!1}}return ie(()=>{C.value.forEach(l=>{l.checked&&p.value.push(l.prop)}),h(),z.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:"全部类型",option:[{label:"指定关闭",value:1},{label:"指定价格",value:2}],optionLabel:"label",optionValue:"value"}]}),(l,o)=>{const O=Se,q=u("ElDivider"),y=u("el-button"),Q=Ie,J=ge,K=he,W=u("el-row"),c=u("el-table-column"),L=u("el-text"),T=ke,x=ye,X=u("el-tag"),Y=u("el-empty"),Z=u("el-table"),ee=u("ElPagination"),te=ve,ae=re("loading");return n(),pe("div",{class:de({"absolute-container":I.value})},[a(te,null,{default:t(()=>[a(O,{formSearchList:z.value,formSearchName:G.value,onCurrentChange:w,onOnReset:A,model:j},null,8,["formSearchList","formSearchName","model"]),a(q,{"border-style":"dashed"}),a(W,{gutter:24},{default:t(()=>[a(Q,null,{default:t(()=>[a(y,{type:"primary",size:"default",onClick:H},{default:t(()=>[i(" 新增 ")]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(y,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:t(()=>[i(" 导出 ")]),_:1}),a(J,{border:b.value,"onUpdate:border":o[1]||(o[1]=e=>b.value=e),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>I.value=e),checkList:p.value,"onUpdate:checkList":o[3]||(o[3]=e=>p.value=e),columns:C.value,"onUpdate:columns":o[4]||(o[4]=e=>C.value=e),"line-height":S.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>S.value=e),stripe:N.value,"onUpdate:stripe":o[6]||(o[6]=e=>N.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((n(),r(Z,{ref_key:"tableSortRef",ref:$,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:b.value,size:S.value,stripe:N.value},{empty:t(()=>[a(Y,{image:_(ue),"image-size":300},null,8,["image"])]),default:t(()=>[a(c,{align:"left",type:"selection"}),p.value.includes("dispatchType")?(n(),r(c,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:"类型"},{default:t(({row:e})=>[d("div",Ce,[e.dispatchType===1?(n(),r(L,{key:0,class:"mx-1",type:"primary"},{default:t(()=>[i("指定关闭")]),_:1})):(n(),r(L,{key:1,class:"mx-1",type:"danger"},{default:t(()=>[i("指定价格")]),_:1}))])]),_:1})):f("",!0),p.value.includes("projectName")?(n(),r(c,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目"},{default:t(({row:e})=>[d("div",je,m(e.projectName),1)]),_:1})):f("",!0),p.value.includes("projectId")?(n(),r(c,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"180",label:"项目ID"},{default:t(({row:e})=>[d("div",we,[d("div",ze,"ID: "+m(e.projectId),1),a(T,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):f("",!0),p.value.includes("moneyPrice")?(n(),r(c,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:"原价"},{default:t(({row:e})=>[d("div",De,[a(x),i(m(e.moneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("doMoneyPrice")?(n(),r(c,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:"指定价格"},{default:t(({row:e})=>[d("div",Le,[a(x),i(m(e.doMoneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("Supplier")?(n(),r(c,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:"指定目标",width:"350"},{default:t(({row:e})=>[d("div",Te,[e.dataType==2?(n(),r(y,{key:0,style:{width:"46px"},type:"primary",size:"small",class:"p-1"},{default:t(()=>[i(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"会员组"),1)]),_:2},1024)):e.dataType===1?(n(),r(y,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[i(m(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):f("",!0),d("b",xe,m(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),i("  "),d("span",Pe,"ID: "+m(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),a(T,{class:"copy",content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId},null,8,["content"])])]),_:1})):f("",!0),p.value.includes("createTime")?(n(),r(c,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:t(({row:e})=>[a(X,{effect:"plain",type:"info"},{default:t(()=>[i(m(_(E)(e.createTime)),1)]),_:2},1024)]),_:1})):f("",!0),a(c,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(y,{type:"primary",plain:"",size:"small",onClick:oe=>U(e)},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),a(y,{type:"danger",plain:"",size:"small",onClick:oe=>F(e)},{default:t(()=>[i(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ae,v.value]]),a(ee,{"current-page":_(g).page,total:_(g).total,"page-size":_(g).size,"page-sizes":_(g).sizes,layout:_(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:V,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"]),a(Ne,{ref_key:"editRef",ref:k,onFetchData:h},null,512)]),_:1})],2)}}}),qe=be(Ee,[["__scopeId","data-v-2525f74f"]]);export{qe as default};
