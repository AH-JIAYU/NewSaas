
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aN as oe,r as s,o as se,P as R,a2 as r,al as $,a as u,i as ie,f as o,w as l,a3 as k,c as d,g as m,h as t,k as f,aM as re,b as T,t as x,j as L,A as ue,aS as pe,ai as ce,aP as de,aQ as fe,_ as me,ao as _e,y as ge}from"./index-C9fHoe7f.js";import{_ as ve}from"./index.vue_vue_type_style_index_0_lang-CxlmCd0n.js";import{s as he}from"./apiLoading-CSIr09ew.js";import{S as be}from"./sortable.esm-C0-Qcoum.js";import ye from"./index-DSuzhPiZ.js";import{u as Ce,a as A}from"./configuration_supplierLevel-CH0A0HeB.js";import{columns as S}from"./index-CODNa_6b.js";const ke={class:"tableBig"},Le={class:"fontC-System"},Se={class:"fontC-System"},we=ne({name:"supplierLevel",__name:"index",setup(ze){const B=Ce(),{pagination:p,getParams:H,onSizeChange:Q,onCurrentChange:U}=oe(),_=s(!1),w=s(),D=s([]),c=s([]),g=s(!1),v=s(!1),h=s("default"),b=s(!1),N=s();function I(){w.value.showEdit()}function M(n){w.value.showEdit(n)}function V(n){pe.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:a}=await he(A.delete({tenantSupplierLevelId:n.tenantSupplierLevelId}));a===1&&ce.success({message:"删除成功",center:!0}),B.LevelNameList=null,z()}).catch(()=>{})}function z(){p.value.page=1,y()}function q(n){Q(n).then(()=>y())}function F(n=1){U(n).then(()=>y())}async function y(){try{_.value=!0;const n={...H()},{data:a,status:i}=await A.list(n);a&&i===1&&(D.value=a.getTenantSupplierLevelInfoList,p.value.total=a.total),_.value=!1}catch{}finally{_.value=!1}}function P(){const n=N.value.$el.querySelector(".el-table__body-wrapper tbody");be.create(n,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:a,oldIndex:i})=>{a===void 0||i===void 0||R(()=>P())}})}return se(()=>{S.forEach(n=>{n.checked&&c.value.push(n.prop)}),y(),R(()=>{P()})}),(n,a)=>{const i=r("el-button"),j=ve,G=de,J=fe,K=r("el-row"),O=me,W=r("ElTag"),X=r("ElTableColumn"),C=r("el-table-column"),Y=r("el-empty"),Z=r("el-table"),ee=r("ElPagination"),te=_e,E=$("auth"),ae=$("loading");return u(),ie("div",{class:ue({"absolute-container":t(b)})},[o(te,null,{default:l(()=>[o(K,null,{default:l(()=>[o(j,null,{default:l(()=>[k((u(),d(i,{size:"default",type:"primary",onClick:I},{default:l(()=>[m(" 新增 ")]),_:1})),[[E,"supplierLevel-get-addTenantSupplierLevel"]])]),_:1}),o(J,null,{default:l(()=>[o(i,{size:"default"},{default:l(()=>[m(" 导出 ")]),_:1}),o(G,{border:t(g),"onUpdate:border":a[0]||(a[0]=e=>f(g)?g.value=e:null),tableAutoHeight:t(b),"onUpdate:tableAutoHeight":a[1]||(a[1]=e=>f(b)?b.value=e:null),checkList:t(c),"onUpdate:checkList":a[2]||(a[2]=e=>f(c)?c.value=e:null),columns:t(S),"onUpdate:columns":a[3]||(a[3]=e=>f(S)?S.value=e:null),"line-height":t(h),"onUpdate:lineHeight":a[4]||(a[4]=e=>f(h)?h.value=e:null),stripe:t(v),"onUpdate:stripe":a[5]||(a[5]=e=>f(v)?v.value=e:null),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),k((u(),d(Z,{ref_key:"elTableRef",ref:N,"row-key":"id",border:t(g),data:t(D),size:t(h),stripe:t(v),fit:""},{empty:l(()=>[o(Y,{image:t(re),"image-size":300},null,8,["image"])]),default:l(()=>[o(X,{width:"80",align:"left",fixed:""},{header:l(()=>[m(" 排序 ")]),default:l(()=>[o(W,{type:"info",class:"sortable"},{default:l(()=>[o(O,{name:"i-ep:d-caret"})]),_:1})]),_:1}),t(c).includes("levelName")?(u(),d(C,{key:0,align:"left",prop:"levelName","show-overflow-tooltip":"",label:"等级名称"},{default:l(({row:e})=>[T("div",ke,x(e.levelName),1)]),_:1})):L("",!0),t(c).includes("additionRatio")?(u(),d(C,{key:1,align:"left",prop:"additionRatio","show-overflow-tooltip":"",label:"价格比例"},{default:l(({row:e})=>[T("div",Le,x(e.additionRatio)+"%",1)]),_:1})):L("",!0),t(c).includes("memberQuantity")?(u(),d(C,{key:2,align:"left",prop:"memberQuantity","show-overflow-tooltip":"",label:"成员数量"},{default:l(({row:e})=>[T("div",Se,x(e.memberQuantity),1)]),_:1})):L("",!0),o(C,{align:"left",fixed:"right","show-overflow-tooltip":"",label:"操作"},{default:l(({row:e})=>[k((u(),d(i,{size:"small",plain:"",type:"primary",onClick:le=>M(e)},{default:l(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])),[[E,"supplierLevel-update-updateTenantSupplierLevel"]]),e.isDelete===1?k((u(),d(i,{key:0,size:"small",plain:"",type:"danger",onClick:le=>V(e)},{default:l(()=>[m(" 删除 ")]),_:2},1032,["onClick"])),[[E,"supplierLevel-delete-deleteTenantSupplierLevel"]]):L("",!0)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ae,t(_)]]),o(ee,{"current-page":t(p).page,total:t(p).total,"page-size":t(p).size,"page-sizes":t(p).sizes,layout:t(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:F},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(ye,{ref_key:"EditRef",ref:w,onQueryData:z},null,512)],2)}}}),$e=ge(we,[["__scopeId","data-v-5b1e62a9"]]);export{$e as default};
