
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as G}from"./index-CJ95okTh.js";import{d as J,r as i,a3 as K,a as n,o as d,b as f,f as s,w as o,y as r,g as _,i as a,e as V,F as C,t as S,z as j,A as k,j as U,p as O,aH as Q,aI as W,L as X}from"./index-CDcFrPzE.js";import Y from"./index-B-uVH8GK.js";import"./index-B1BSnhPY.js";import"./department-C4UdYaqe.js";import"./position_manage-BxBBKxVo.js";import"./configuration_role-C9O3TVMj.js";import"./tenant_role-CramahWu.js";import"./configuration_manager-DIbVN_R6.js";const w=v=>(Q("data-v-e76665e4"),v=v(),W(),v),Z={key:0,style:{"margin-top":"-2.1875rem"}},ee=w(()=>r("span",{class:"project-name"},"项目",-1)),te={class:"project-content"},le={style:{display:"flex"}},ae={style:{"font-weight":"500"}},oe={style:{"margin-left":"10px"}},se=w(()=>r("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ne={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},re=w(()=>r("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ie={class:"flex-c"},de=J({__name:"index",emits:["userData"],setup(v,{expose:N,emit:D}){const u=i(!1),L=i([]);i([]),i();const e=i({type:1,tenantStaffList:[],roleList:[],title:"",project:[],form:{chargeUserId:null,chargeUserName:""}}),T=K({chargeUserId:[{required:!0,message:"请选择PM",trigger:"change"}]}),m=i(!1);async function F(c,l,p){await x(),e.value.type=1,u.value=!0,L.value=[],e.value.title=l,e.value.invitationType=1,p&&(e.value.project=p)}const x=async()=>{const c=await O.getTenantStaffList();e.value.tenantStaffList=c.data};function B(){u.value=!1,h.value.resetFields()}N({showEdit:F});const E=D,h=i();function z(){h.value.validate(c=>{if(c){let l="";l=e.value.tenantStaffList.find(b=>b.id===e.value.form.chargeUserId).userName;let I={chargeUserId:e.value.form.chargeUserId,chargeUserName:l,invitationType:e.value.invitationType};u.value=!1,E("userData",I)}})}const g=i([]),M=c=>{g.value=c};return(c,l)=>{const p=n("el-badge"),I=G,b=n("el-collapse-item"),P=n("el-collapse"),R=n("el-option"),y=n("el-button"),$=n("el-select"),q=n("el-form-item"),A=n("ElForm"),H=n("el-dialog");return d(),f("div",null,[s(H,{modelValue:a(u),"onUpdate:modelValue":l[5]||(l[5]=t=>k(u)?u.value=t:null),"close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"30%",title:a(e).title,class:"userClass"},{footer:o(()=>[r("div",ie,[s(y,{onClick:B},{default:o(()=>[_(" 取消 ")]),_:1}),s(y,{type:"primary",onClick:z},{default:o(()=>[_(" 确认 ")]),_:1})])]),default:o(()=>[a(e).project.length!=0?(d(),f("div",Z,[a(e).project.length>1?(d(),V(P,{key:0,modelValue:a(g),"onUpdate:modelValue":l[0]||(l[0]=t=>k(g)?g.value=t:null),onChange:M},{default:o(()=>[s(b,{name:"1"},{title:o(()=>[ee,s(p,{value:a(e).project.length,max:99,class:"item"},null,8,["value"])]),default:o(()=>[r("div",te,[(d(!0),f(C,null,S(a(e).project,t=>(d(),f("div",{key:t.id},[r("div",le,[r("span",ae,j(t.tenantName),1),r("span",oe,"ID:"+j(t.tenantId),1),s(I,{content:t.tenantId},null,8,["content"])])]))),128))])]),_:1})]),_:1},8,["modelValue"])):U("",!0)])):U("",!0),s(A,{ref_key:"formRef",ref:h,rules:a(T),model:a(e).form,"label-width":"100px"},{default:o(()=>[s(q,{label:"PM",prop:"chargeUserId"},{default:o(()=>[s($,{modelValue:a(e).form.chargeUserId,"onUpdate:modelValue":l[3]||(l[3]=t=>a(e).form.chargeUserId=t),"value-key":"",placeholder:"请选择PM",clearable:"",filterable:""},{empty:o(()=>[r("div",ne,[_(" 暂无数据 "),s(y,{type:"primary",link:"",onClick:l[2]||(l[2]=t=>m.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),re]),_:1})])]),default:o(()=>[(d(!0),f(C,null,S(a(e).tenantStaffList,t=>(d(),V(R,{key:t.id,label:t.userName,value:t.id},null,8,["label","value"]))),128)),s(y,{class:"buttonClass",onClick:l[1]||(l[1]=t=>m.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),se]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),a(m)?(d(),V(Y,{key:1,modelValue:a(m),"onUpdate:modelValue":l[4]||(l[4]=t=>k(m)?m.value=t:null),onSuccess:x},null,8,["modelValue"])):U("",!0)]),_:1},8,["modelValue","title"])])}}}),he=X(de,[["__scopeId","data-v-e76665e4"]]);export{he as default};
