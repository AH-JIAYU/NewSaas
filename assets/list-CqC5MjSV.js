
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ve,aN as he,r as d,a3 as be,n as ke,a as v,q as je,o as n,b as we,f as a,w as t,e as s,j as p,g as o,s as le,i as _,aM as oe,y as m,z as c,N as L,b9 as Ie,ba as Se,be as Ne,ap as Ce,aH as ze,aI as Le,L as xe}from"./index-CNsz2S3y.js";import{_ as De}from"./index-DfSUVUf1.js";import{_ as Be}from"./index.vue_vue_type_style_index_0_lang-C-EkqmDm.js";import{_ as Re}from"./index-BHYnH0c-.js";import{u as Ae,o as Ue,a as ne}from"./index-BwR1w4B5.js";import Ee from"./index-NHyo5NrT.js";import{_ as He}from"./index.vue_vue_type_script_setup_true_lang-DzMLeBLj.js";import"./index-B0lhduUU.js";import"./index.vue_vue_type_script_setup_true_lang-Bjm93QuL.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-qY9zf6_U.js";import"./projectManagement-B301Vn8b.js";import"./user_cooperation-DHCn0J43.js";import"./survey_vip_department-Bm3b-40M.js";import"./user_supplier-DdbLyeUA.js";import"./user_supplier-FZ57dZXI.js";import"./survey_vipGroup-CllDJuNY.js";import"./survey_vipGroup-BHYSaK4s.js";import"./department-CJePYmqm.js";const Pe=x=>(ze("data-v-3b3ddd3a"),x=x(),Le(),x),Te={class:"tableBig"},Ve={class:"tableBig"},Me={class:"copyId tableSmall"},$e={class:"id oneLine projectId"},Fe={class:"tableBig oneLine"},Oe={class:"copyId tableSmall"},Qe={class:"id oneLine projectId"},qe={class:"tableBig"},Ge=Pe(()=>m("span",{class:"tableBig"},"接收状态 ",-1)),Je={class:"tableBig"},Ke={class:"copyId tableSmall"},We={class:"id oneLine projectId"},Xe={class:"tableBig"},Ye={class:"copyId tableSmall"},Ze={class:"id oneLine projectId"},et={class:"tableBig"},tt=ve({name:"outsource",__name:"list",setup(x){const U=Ae(),{pagination:y,getParams:se,onSizeChange:ie,onCurrentChange:re}=he(),ue=d(""),pe=d(""),ce=d(),N=d(!0),k=d(!1),E=d(),C=d(!1),i=d([]),H=d(),P=d(),T=d("formSearch-outsource"),j=d("default"),w=d(!1),z=d([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"分配",prop:"allocationType"},{sotrtable:!0,checked:!0,label:"项目价",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),h=be({projectId:"",tenantId:"",tenantName:"",projectStatus:"",type:2}),D=d([]);function V(u){E.value.showEdit(u,h.type===2?1:0)}function M(u){ie(u).then(()=>b())}function I(u=1){re(u).then(()=>b())}function $(){Object.assign(h,{tenantId:"",tenantName:"",projectStatus:"",type:2}),b()}async function b(){try{N.value=!0;const u={...se(),...h};if(h.type===1){const l=await ne.list(u);D.value=l.data.projectAllocationInfoList,y.value.total=l.data.total}else{const l=await ne.meList(u);D.value=l.data.projectMeAllocationInfoList,y.value.total=l.data.total}N.value=!1}catch{}finally{N.value=!1}}ke(()=>{z.value.forEach(u=>{u.checked&&i.value.push(u.prop)}),b(),H.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"tenantId",placeholder:"租户ID"},{index:3,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:4,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}],P.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"tenantId",placeholder:"租户ID"},{index:3,show:!0,type:"input",modelName:"tenantName",placeholder:"租户名称"},{index:4,show:!0,type:"select",modelName:"projectStatus",placeholder:"项目状态",option:"projectStatus",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"select",modelName:"projectStatus",placeholder:"接收状态",option:"projectStatus",optionLabel:"label",optionValue:"value"}]});const F={projectStatus:()=>U.projectStatusList.map((u,l)=>({label:u,value:l+1}))},S=d();function O(u){u?S.value=u.projectId:S.value=""}const R=d();function de(){R.value.showEdit()}function me(){}function fe(){R.value.showEdit()}function at(u){}return(u,l)=>{const Q=Re,q=v("ElDivider"),G=Be,f=v("el-button"),J=Ie,K=Se,W=v("el-row"),r=v("el-table-column"),g=v("el-text"),B=De,X=v("el-tooltip"),Y=v("el-empty"),Z=v("el-table"),ee=v("ElPagination"),te=v("el-tab-pane"),_e=Ne,ye=v("el-tabs"),ge=Ce,ae=je("loading");return n(),we("div",{class:L({"absolute-container":C.value})},[a(ge,null,{default:t(()=>[a(ye,{modelValue:h.type,"onUpdate:modelValue":l[15]||(l[15]=e=>h.type=e),onTabChange:b},{default:t(()=>[a(te,{label:"外包项目",name:2},{default:t(()=>[h.type===2?(n(),s(Q,{key:0,formSearchList:H.value,formSearchName:T.value,onCurrentChange:I,onOnReset:$,model:h,formOption:F},null,8,["formSearchList","formSearchName","model"])):p("",!0),a(q,{"border-style":"dashed"}),a(W,{gutter:24},{default:t(()=>[a(G),a(K,null,{default:t(()=>[a(f,{size:"default",onClick:l[0]||(l[0]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),a(J,{border:k.value,"onUpdate:border":l[1]||(l[1]=e=>k.value=e),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":l[2]||(l[2]=e=>C.value=e),checkList:i.value,"onUpdate:checkList":l[3]||(l[3]=e=>i.value=e),columns:z.value,"onUpdate:columns":l[4]||(l[4]=e=>z.value=e),"line-height":j.value,"onUpdate:lineHeight":l[5]||(l[5]=e=>j.value=e),stripe:w.value,"onUpdate:stripe":l[6]||(l[6]=e=>w.value=e),style:{"margin-left":"12px"},onQueryData:I},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),le((n(),s(Z,{ref_key:"tableSortRef",ref:ue,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:j.value,stripe:w.value,"highlight-current-row":"",onCurrentChange:O},{empty:t(()=>[a(Y,{image:_(oe),"image-size":300},null,8,["image"])]),default:t(()=>[a(r,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(r,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",width:"140",label:"状态"},{default:t(({row:e})=>[m("span",Te,[e.projectStatus===1?(n(),s(g,{key:0,type:"primary"},{default:t(()=>[o(" 进行中(在线)")]),_:1})):e.projectStatus===2?(n(),s(g,{key:1,type:"warning"},{default:t(()=>[o(" 已完成(审核通过)")]),_:1})):e.projectStatus===3?(n(),s(g,{key:2,type:"info"},{default:t(()=>[o(" 离线")]),_:1})):p("",!0)])]),_:1})):p("",!0),i.value.includes("tenantName")?(n(),s(r,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称"},{default:t(({row:e})=>[m("div",Ve,c(e.tenantName),1)]),_:1})):p("",!0),i.value.includes("tenantId")?(n(),s(r,{key:2,"show-overflow-tooltip":"",prop:"tenantId",align:"left",width:"280",label:"租户ID"},{default:t(({row:e})=>[m("div",Me,[m("div",$e,c(e.tenantId),1),a(B,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):p("",!0),i.value.includes("projectName")?(n(),s(r,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:t(({row:e})=>[m("div",Fe,c(e.projectName),1)]),_:1})):p("",!0),i.value.includes("projectId")?(n(),s(r,{key:4,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[m("div",Oe,[m("div",Qe,[a(X,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[o(c(e.projectId),1)]),_:2},1032,["content"])]),a(B,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):p("",!0),i.value.includes("participationNumber")?(n(),s(r,{key:5,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[o("参与: "+c(e.participationNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[o("完成: "+c(e.doneNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[o("配额: "+c(e.num||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[o("限量: "+c(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):p("",!0),a(r,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[a(f,{type:"primary",plain:"",size:"small",onClick:A=>V(e)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ae,N.value]]),a(ee,{"current-page":_(y).page,total:_(y).total,"page-size":_(y).size,"page-sizes":_(y).sizes,layout:_(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:I},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(te,{label:"接收项目",name:1},{default:t(()=>[h.type===1?(n(),s(Q,{key:0,formSearchList:P.value,formSearchName:T.value,onCurrentChange:I,onOnReset:$,model:h,formOption:F},null,8,["formSearchList","formSearchName","model"])):p("",!0),a(q,{"border-style":"dashed"}),a(W,{gutter:24},{default:t(()=>[a(G,null,{default:t(()=>[a(f,{type:"primary",size:"default",onClick:de},{default:t(()=>[o(" 接收 ")]),_:1}),a(f,{type:"primary",size:"default",onClick:me},{default:t(()=>[o(" 取消接收 ")]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(f,{size:"default",onClick:l[7]||(l[7]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),a(J,{border:k.value,"onUpdate:border":l[8]||(l[8]=e=>k.value=e),tableAutoHeight:C.value,"onUpdate:tableAutoHeight":l[9]||(l[9]=e=>C.value=e),checkList:i.value,"onUpdate:checkList":l[10]||(l[10]=e=>i.value=e),columns:z.value,"onUpdate:columns":l[11]||(l[11]=e=>z.value=e),"line-height":j.value,"onUpdate:lineHeight":l[12]||(l[12]=e=>j.value=e),stripe:w.value,"onUpdate:stripe":l[13]||(l[13]=e=>w.value=e),style:{"margin-left":"12px"},onQueryData:I},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),le((n(),s(Z,{ref_key:"tableSortRef2",ref:pe,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:j.value,"highlight-current-row":"",stripe:w.value,onCurrentChange:O},{empty:t(()=>[a(Y,{image:_(oe),"image-size":300},null,8,["image"])]),default:t(()=>[a(r,{align:"left",type:"selection"}),i.value.includes("projectStatus")?(n(),s(r,{key:0,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"状态",width:"140"},{default:t(({row:e})=>[m("span",qe,c(_(U).projectStatusList[e.projectStatus-1]),1)]),_:1})):p("",!0),i.value.includes("projectStatus")?(n(),s(r,{key:1,"show-overflow-tooltip":"",prop:"projectStatus",align:"left",label:"接收状态",width:"140"},{default:t(({row:e})=>[Ge]),_:1})):p("",!0),i.value.includes("tenantName")?(n(),s(r,{key:2,"show-overflow-tooltip":"",prop:"tenantName",align:"left",label:"租户名称",width:"200"},{default:t(({row:e})=>[m("div",Je,c(e.tenantName),1)]),_:1})):p("",!0),i.value.includes("tenantId")?(n(),s(r,{key:3,"show-overflow-tooltip":"",prop:"tenantId",align:"left",label:"租户ID",width:"280"},{default:t(({row:e})=>[m("div",Ke,[m("div",We,c(e.tenantId),1),a(B,{content:e.tenantId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):p("",!0),i.value.includes("allocationType")?(n(),s(r,{key:4,align:"left",label:"分配",width:"120"},{default:t(({row:e})=>[e.allocationType===1?(n(),s(f,{key:0,class:"tableBut",size:"small",type:"danger",plain:""},{default:t(()=>[o("自动分配")]),_:1})):e.allocationType===2?(n(),s(f,{key:1,class:"tableBut",size:"small",type:"danger"},{default:t(()=>[o("供应商")]),_:1})):e.allocationType===3?(n(),s(f,{key:2,class:"tableBut",size:"small",type:"success"},{default:t(()=>[o("部门")]),_:1})):e.allocationType===4?(n(),s(f,{key:3,class:"tableBut",size:"small",type:"primary"},{default:t(()=>[o("租户")]),_:1})):(n(),s(f,{key:4,size:"small",class:"tableBut"},{default:t(()=>[o(" 未分配")]),_:1}))]),_:1})):p("",!0),i.value.includes("doMoneyPrice")?(n(),s(r,{key:5,"show-overflow-tooltip":"",align:"left",label:"项目价",width:"120"},{default:t(({row:e})=>[m("div",null,[a(_e),o(c(e.doMoneyPrice||0),1)])]),_:1})):p("",!0),i.value.includes("projectName")?(n(),s(r,{key:6,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称",width:"200"},{default:t(({row:e})=>[m("div",Xe,c(e.projectName),1)]),_:1})):p("",!0),i.value.includes("projectId")?(n(),s(r,{key:7,"show-overflow-tooltip":"",prop:"projectId",align:"left",width:"280",label:"项目ID"},{default:t(({row:e})=>[m("div",Ye,[m("div",Ze,[a(X,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[o(c(e.projectId),1)]),_:2},1032,["content"])]),a(B,{content:e.projectId,class:L({rowCopy:"rowCopy",current:e.projectId===S.value})},null,8,["content","class"])])]),_:1})):p("",!0),i.value.includes("participationNumber")?(n(),s(r,{key:8,"show-overflow-tooltip":"",prop:"participationNumber",align:"left",label:"参数",width:"300"},{default:t(({row:e})=>[a(g,{style:{color:"rgb(251, 104, 104)"},class:"oneLine",type:"danger"},{default:t(()=>[o("参与: "+c(e.participationNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(3, 194, 57)"},class:"oneLine",type:"success"},{default:t(()=>[o("完成: "+c(e.doneNumber||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(255, 172, 84)"},class:"oneLine",type:"warning"},{default:t(()=>[o("配额: "+c(e.num||0),1)]),_:2},1024),o("   "),a(g,{style:{color:"rgb(170, 170, 170)"},class:"oneLine",type:"info"},{default:t(()=>[o("限量: "+c(e.limitedQuantity||"-"),1)]),_:2},1024)]),_:1})):p("",!0),i.value.includes("projectName")?(n(),s(r,{key:9,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"负责部门/人",width:"200",fixed:"right"},{default:t(({row:e})=>[m("div",et,c(e.projectName),1)]),_:1})):p("",!0),a(r,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[e.allocationStatus===1?(n(),s(f,{key:0,plain:"",type:"primary",size:"small",onClick:l[14]||(l[14]=A=>fe())},{default:t(()=>[o(" 接收 ")]),_:1})):(n(),s(f,{key:1,plain:"",type:"primary",size:"small",onClick:A=>void 0},{default:t(()=>[o(" 取消接收 ")]),_:2},1032,["onClick"])),a(f,{type:"primary",plain:"",size:"small",onClick:A=>V(e)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ae,N.value]]),a(ee,{"current-page":_(y).page,total:_(y).total,"page-size":_(y).size,"page-sizes":_(y).sizes,layout:_(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:I},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),a(Ee,{ref_key:"addAllocationEditRef",ref:ce,onFetchData:b},null,512),a(Ue,{ref_key:"editRef",ref:E,onFetchData:b},null,512)]),_:1}),a(He,{ref_key:"userRef",ref:R},null,512)],2)}}}),jt=xe(tt,[["__scopeId","data-v-3b3ddd3a"]]);export{jt as default};
