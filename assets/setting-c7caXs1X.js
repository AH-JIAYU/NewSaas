
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as j,m as z,u as F,r as b,a as i,o as w,b as E,f as l,w as o,e as B,l as m,aA as v,aw as x,ak as O,aK as R,i as t,j as M,ai as q,K as A,_ as N,L as K,g as y,p as L,aD as H,aE as G,q as T}from"./index-JVwiYWif.js";const J={class:"upload-container"},Q={key:1,class:"image"},W={class:"mask"},X={class:"actions"},Y={key:0,class:"el-upload__tip"},Z={style:{display:"inline-block"}},ee=j({name:"ImageUpload",__name:"index",props:z({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:""},modelModifiers:{}}),emits:z(["onSuccess"],["update:modelValue"]),setup(h,{emit:k}){const a=h,g=k,u=F(h,"modelValue"),d=b({imageViewerVisible:!1,progress:{preview:"",percent:0}});function V(){d.value.imageViewerVisible=!0}function $(){d.value.imageViewerVisible=!1}function _(){u.value=""}const s=e=>{const p=e.name.split(".").at(-1)??"",c=a.ext.includes(p),f=e.size/1024/1024<a.size;return c||q.error(`上传图片只支持 ${a.ext.join(" / ")} 格式！`),f||q.error(`上传图片大小不能超过 ${a.size}MB！`),c&&f&&(d.value.progress.preview=URL.createObjectURL(e)),c&&f},I=e=>{d.value.progress.percent=~~e.percent},r=e=>{d.value.progress.preview="",d.value.progress.percent=0,g("onSuccess",e)};return(e,U)=>{const p=A,c=i("ElImage"),f=i("ElProgress"),S=i("ElUpload"),C=i("ElAlert"),n=i("ElImageViewer");return w(),E("div",J,[l(S,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":s,"on-progress":I,"on-success":r,drag:"",class:"image-upload"},{default:o(()=>[u.value===""?(w(),B(c,{key:0,src:u.value===""?e.placeholder:u.value,style:v(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},{error:o(()=>[m("div",{class:"image-slot",style:v(`width:${e.width}px;height:${e.height}px;`)},[l(p,{name:"i-ep:plus",class:"icon"})],4)]),_:1},8,["src","style"])):(w(),E("div",Q,[l(c,{src:u.value,style:v(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),m("div",W,[m("div",X,[m("span",{title:"预览",onClick:x(V,["stop"])},[l(p,{name:"i-ep:zoom-in",class:"icon"})]),m("span",{title:"移除",onClick:x(_,["stop"])},[l(p,{name:"i-ep:delete",class:"icon"})])])])])),O(m("div",{class:"progress",style:v(`width:${e.width}px;height:${e.height}px;`)},[l(c,{src:t(d).progress.preview,style:v(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),l(f,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:t(d).progress.percent},null,8,["width","percentage"])],4),[[R,u.value===""&&t(d).progress.percent]])]),_:1},8,["headers","action","data","name"]),e.notip?M("",!0):(w(),E("div",Y,[m("div",Z,[l(C,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，且图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),t(d).imageViewerVisible?(w(),B(n,{key:1,"url-list":[u.value],teleported:"",onClose:$},null,8,["url-list"])):M("",!0)])}}}),le=N(ee,[["__scopeId","data-v-bde0ed46"]]),P=h=>(H("data-v-f6dde60a"),h=h(),G(),h),ae=P(()=>m("h2",null,"个人信息",-1)),te=P(()=>m("h2",{style:{"margin-bottom":"30px"}},"账户管理",-1)),D=j({name:"personalSetting",__name:"setting",setup(h,{expose:k}){K();const a=b({headimg:"",mobile:"",name:"",qq:"",wechat:"",country:""}),g=b(!1);b(),b([]);function u(){}async function d(_){g.value=!0}function V(){g.value=!1}function $(_){_.error===""?a.value.headimg=_.data.path:q.warning(_.error)}return k({showEdit:d}),(_,s)=>{const I=le,r=i("ElFormItem"),e=i("ElInput"),U=i("el-select"),p=i("ElButton"),c=i("ElForm"),f=i("ElTabPane"),S=i("ElTabs"),C=i("el-dialog");return w(),E("div",null,[l(C,{modelValue:t(g),"onUpdate:modelValue":s[8]||(s[8]=n=>L(g)?g.value=n:null),title:"修改用户信息",direction:"rtl","before-close":V,style:{height:"600px"},size:"30%"},{default:o(()=>[l(S,{"tab-position":"left",style:{height:"31.25rem"}},{default:o(()=>[l(f,{label:"个人信息",class:"basic"},{default:o(()=>[ae,l(c,{model:t(a),"label-width":"120px","label-suffix":"："},{default:o(()=>[l(r,{style:{display:"flex","justify-content":"center","align-items":"center"},label:"头像"},{default:o(()=>[l(I,{url:t(a).headimg,"onUpdate:url":s[0]||(s[0]=n=>t(a).headimg=n),action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKD628431923530324"},notip:"",class:"headimg-upload",onOnSuccess:$},null,8,["url"])]),_:1}),l(r,{label:"用户名"},{default:o(()=>[l(e,{modelValue:t(a).name,"onUpdate:modelValue":s[1]||(s[1]=n=>t(a).name=n),placeholder:"请输入你的用户名"},null,8,["modelValue"])]),_:1}),l(r,{label:"国家"},{default:o(()=>[l(U,{modelValue:t(a).country,"onUpdate:modelValue":s[2]||(s[2]=n=>t(a).country=n),placeholder:"请选择国家"},null,8,["modelValue"])]),_:1}),l(r,{label:"手机号码"},{default:o(()=>[l(e,{modelValue:t(a).qq,"onUpdate:modelValue":s[3]||(s[3]=n=>t(a).qq=n),placeholder:"请输入你的手机号码"},null,8,["modelValue"])]),_:1}),l(r,{label:"电子邮箱"},{default:o(()=>[l(e,{modelValue:t(a).wechat,"onUpdate:modelValue":s[4]||(s[4]=n=>t(a).wechat=n),placeholder:"请输入你的电子邮箱"},null,8,["modelValue"])]),_:1}),l(r,null,{default:o(()=>[l(p,{onClick:u,type:"primary"},{default:o(()=>[y(" 保存 ")]),_:1}),l(p,{onClick:V,type:"primary"},{default:o(()=>[y(" 取消 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(f,{label:"账户管理",class:"security"},{default:o(()=>[te,l(c,{model:t(a),"label-width":"120px","label-suffix":"："},{default:o(()=>[l(r,{label:"旧密码"},{default:o(()=>[l(e,{modelValue:t(a).name,"onUpdate:modelValue":s[5]||(s[5]=n=>t(a).name=n),placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),l(r,{label:"新密码"},{default:o(()=>[l(e,{modelValue:t(a).qq,"onUpdate:modelValue":s[6]||(s[6]=n=>t(a).qq=n),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(r,{label:"确认新密码"},{default:o(()=>[l(e,{modelValue:t(a).wechat,"onUpdate:modelValue":s[7]||(s[7]=n=>t(a).wechat=n),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(r,null,{default:o(()=>[l(p,{onClick:u,type:"primary"},{default:o(()=>[y(" 保存 ")]),_:1}),l(p,{onClick:V,type:"primary"},{default:o(()=>[y(" 取消 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});typeof T=="function"&&T(D);const se=N(D,[["__scopeId","data-v-f6dde60a"]]);export{se as default};
