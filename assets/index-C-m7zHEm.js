
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as pe}from"./index-BwHKEwVN.js";import{d as _e,r as x,l as ye,c as H,n as ge,a as h,o as n,b as u,f as o,aJ as ve,i as e,w as t,bo as C,bp as N,N as k,y as i,z as r,g as m,e as S,j as b,F as T,t as V,A as he,E as W,aH as Se,aI as ke,L as be}from"./index-B9P-dBk8.js";import{v as je}from"./index-CSaG3oAO.js";import{g as xe,a as Ie}from"./zh_Hans-WQSzYhW9.js";import{f as we}from"./file-BWJUy3Xa.js";import{o as Le}from"./apiLoading-vkZ3a4Wj.js";import{a as B}from"./projectManagement-DnrBj_Dk.js";import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-CW8BqUWd.js";import{D as Ce}from"./download-C8PHVIy1.js";import{u as Ne}from"./user_customer-CVKESfHn.js";import"./index-D78aPnpZ.js";import"./clipboard-BehVwPiJ.js";import"./user_customer-DIUlfGa_.js";const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMpJREFUOE/NkrFpw1AYhO9kPVuV8ABpMoFXUJFBXLgz6NkIQ0YIBJE8QcqABkmhFTSBmwwQVMmSeOdKRYIIwpWvPPj+/w6OuFG8kcOdgJ21b77vP1bGLDpptyqK099Kk1F7azMvPYFsKVXLonD/guftNnqI4wxkJOAZ0iDyPQB+wrrOWVXDeODXRyVJOGw2mQfWlA4gQwIvkNrvpskfy7KdBEezS1MrMoEUBeSXcS6f1fGSpq/w/lPeD4Ex+6Vzx1ngnFHcyQDmRL0C0uVHD8d5KiAAAAAASUVORK5CYII=",D=P=>(Se("data-v-c465883f"),P=P(),ke(),P),De={style:{"margin-left":"25.5%"}},Pe={style:{"margin-left":"19.5%"}},Oe={style:{"margin-left":"12.5%"}},Qe={style:{"margin-left":"8.5%"}},Ve={style:{"margin-left":"28.5%"}},Ue={class:"card-header"},Be={class:"leftTitle"},Fe={class:"m-4 spanStatus"},Re={class:"rightStatus"},Ee={class:"copyId"},ze=D(()=>i("div",{class:"card-header"},[i("span",null,"其他设置")],-1)),Me={key:0,class:"open"},Ke={key:1,class:"close"},Je={key:0,class:"open"},Xe={key:1,class:"close"},qe={key:0,class:"open"},Ye={key:1,class:"close"},Ge={key:0,class:"open"},$e={key:1,class:"close"},He={key:0,class:"open"},We={key:1,class:"close"},Ze={class:"peizjo-header"},et=D(()=>i("span",null,"配置信息",-1)),tt={key:0,style:{"margin-left":"50px","font-weight":"700","margin-right":"10px"}},at={class:"quotaInfoDiv"},ot=["src"],st={class:"tableBig"},lt={key:0,class:"answer"},nt=D(()=>i("div",{class:"card-header"},[i("span",null,"安全信息")],-1)),rt={key:0,class:"open"},it={key:1,class:"close"},ct=D(()=>i("div",{class:"card-header"},[i("span",null,"描述配额")],-1)),ut={class:"radius p-2 flex gap-2"},dt=D(()=>i("div",{class:"card-header"},[i("span",null,"操作日志")],-1)),mt={class:"flex-c"},ft=_e({name:"ProjectDetails",__name:"index",setup(P,{expose:Z}){const ee=Ne(),F=x([]),R=ye();x("# Fantastic-admin");const E=x(),d=x(1),a=x({form:{},imgUrl:[],isOnline:"",allocationStatus:"",projectType:1,srcList:[],countryList:[]}),O=x();xe({locale:Ie});const te=["新增","编辑","分配","调度"];function ae(_){E.value.showEdit(_)}const w=x(!1);async function oe(_,g){a.value.projectType=g,a.value.isOnline=_.isOnline,a.value.allocationStatus=_.allocationStatus;const y=await Le(B.detail({projectId:_.projectId}));a.value.form=y.data,d.value=y.data.projectSettlementStatusSet.length>0?y.data.projectSettlementStatusSet[0].settlementStatus:0,a.value.form.projectSettlementStatusSet=a.value.form.projectSettlementStatusSet.reduce((v,l)=>(v.find(c=>c.settlementStatus===l.settlementStatus)||v.push(l),v),[]).sort((v,l)=>v.settlementStatus-l.settlementStatus),O.value=a.value.form.descriptionUrl.split(","),O.value.length&&O.value.forEach(async v=>{if(v){const l=await we.detail({fileName:v});a.value.imgUrl.push(l.data.fileUrl),a.value.srcList.push(l.data.fileUrl)}}),se(),w.value=!0}const se=async()=>{if(a.value.form.projectQuotaInfoList.length){const _=await B.getProjectCountryList({countryIdList:a.value.form.countryIdList}),g={countryId:a.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:a.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},y=await B.getProjectCategoryList(g),v=z(_.data.getProjectCountryListInfoList,"countryId",g.countryId),l=z(y.data.getProjectCategoryInfoList,"projectProblemCategoryId",a.value.form.projectQuotaInfoList[0].projectProblemCategoryId);a.value.form.countryName=v.countryName,a.value.form.projectProblemCategoryName=l.projectProblemCategoryName}},z=(_,g,y)=>_.find(v=>v[g]===y),Q=H(()=>_=>a.value.countryList.filter(y=>_.includes(y.id)).map(y=>y.chineseName));async function le(_){try{await navigator.clipboard.writeText(_),W.success({message:"已复制文本",center:!0})}catch{W.warning({message:"复制失败,请重试",center:!0})}}async function ne(_,g){await Ce(a.value.imgUrl[g],_)}function M(){a.value.srcList=[],w.value=!1}const re=H(()=>F.value.find(_=>_.tenantCustomerId===a.value.form.clientId));return ge(async()=>{a.value.countryList=await R.getCountry(),F.value=await ee.getCustomerList()}),Z({showEdit:oe}),(_,g)=>{const y=h("el-step"),v=h("el-steps"),l=h("el-col"),j=h("el-row"),c=h("el-text"),ie=pe,p=h("el-form-item"),ce=h("el-link"),L=h("el-button"),I=h("el-card"),ue=h("el-image"),A=h("el-table-column"),de=h("el-table"),me=h("ElForm"),fe=h("el-drawer");return n(),u("div",null,[o(fe,{modelValue:e(w),"onUpdate:modelValue":g[1]||(g[1]=s=>he(w)?w.value=s:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",onClose:M,size:"55%",title:"项目详情"},ve({footer:t(()=>[i("div",mt,[o(L,{type:"primary",onClick:M},{default:t(()=>[m(" 关闭 ")]),_:1})])]),default:t(()=>[o(me,null,{default:t(()=>[o(I,{class:"box-card"},{header:t(()=>[i("div",Ue,[i("div",Be,[m(" 基本信息 "),i("span",Fe,r(e(a).allocationStatus===1?"未分配":"已分配"),1)]),i("div",Re,[i("span",{class:k(e(a).isOnline===1?"isOnlineSpanTrue":"isOnlineSpanFalse")},null,2),i("div",{class:k(e(a).isOnline===1?"isOnlineTrue":"isOnlineFalse")},r(e(a).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[o(j,{gutter:10},{default:t(()=>[o(l,{span:8},{default:t(()=>[o(p,{label:"项目ID :"},{default:t(()=>[i("div",Ee,[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.projectId?e(a).form.projectId:"-"),1)]),_:1}),o(ie,{class:"copy",content:e(a).form.projectId},null,8,["content"])])]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"项目名称 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.name?e(a).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.projectIdentification?e(a).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(n(),S(l,{key:0,span:8},{default:t(()=>[o(p,{label:"所属客户 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>{var s;return[m(r((s=e(re))==null?void 0:s.customerAccord),1)]}),_:1})]),_:1})]),_:1})):b("",!0),o(l,{span:8},{default:t(()=>[o(p,{label:"所属区域 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(Q)(e(a).form.countryIdList).length>4?(n(),S(ce,{key:0,type:"primary"},{default:t(()=>[m(r(e(Q)(e(a).form.countryIdList).length===e(R).country.length?"全球":e(Q)(e(a).form.countryIdList).length),1)]),_:1})):(n(!0),u(T,{key:1},V(e(Q)(e(a).form.countryIdList),s=>(n(),u("span",{key:s},r(s)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(n(),S(l,{key:1,span:8},{default:t(()=>[o(p,{label:"项目价 :"},{default:t(()=>[e(a).form.currencyType===1?(n(),S(c,{key:0,class:"mx-1"},{default:t(()=>[m(r(e(a).form.doMoneyPrice?e(a).form.doMoneyPrice+"$":"-"),1)]),_:1})):b("",!0),e(a).form.currencyType===2?(n(),S(c,{key:1,class:"mx-1"},{default:t(()=>[m(r(e(a).form.doMoneyPrice?e(a).form.doMoneyPrice+"￥":"-"),1)]),_:1})):b("",!0)]),_:1})]),_:1})):b("",!0),o(l,{span:8},{default:t(()=>[o(p,{label:"配额 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.num?e(a).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"最小时长 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.minimumDuration?e(a).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"IR/NIR :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.ir?e(a).form.ir+"%":e(a).form.ir)+" / "+r(e(a).form.nir?e(a).form.nir+"%":e(a).form.nir),1)]),_:1})]),_:1})]),_:1}),o(l,{span:12},{default:t(()=>[o(p,{label:"URL :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.uidUrl?e(a).form.uidUrl:"-")+" ",1),o(L,{type:"primary",style:{"margin-left":"auto"},onClick:g[0]||(g[0]=s=>le(e(a).form.uidUrl)),link:""},{default:t(()=>[m(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(I,{class:"box-card"},{header:t(()=>[ze]),default:t(()=>[o(j,{gutter:10},{default:t(()=>[o(l,{span:8},{default:t(()=>[o(p,{label:"置顶 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isPinned===1?(n(),u("div",Me,"开启")):(n(),u("div",Ke,"关闭"))]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"在线 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isOnline===1?(n(),u("div",Je,"开启")):(n(),u("div",Xe,"关闭"))]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"资料 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isProfile===2?(n(),u("div",qe,"开启")):(n(),u("div",Ye,"关闭"))]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"B2B :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isPinned===1?(n(),u("div",Ge,r(e(a).form.projectType.join(",")),1)):(n(),u("div",$e,"关闭"))]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"定时发布 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.isTimeReleases===2?(n(),u("div",He," 开 ")):(n(),u("div",We,"关闭"))]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"备注 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.remark?e(a).form.remark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(a).projectType===1?(n(),S(I,{key:0,class:"box-card"},{header:t(()=>[i("div",Ze,[et,e(a).form.projectProblemCategoryName?(n(),u("span",tt,"问卷名称："+r(e(a).form.projectProblemCategoryName),1)):b("",!0),e(a).form.countryName?(n(),S(L,{key:1,type:"primary",plain:"",size:"small"},{default:t(()=>[m(r(e(a).form.countryName),1)]),_:1})):b("",!0)])]),default:t(()=>[o(j,{gutter:10,class:k(e(a).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[o(l,{span:8}),o(l,{span:8}),(n(!0),u(T,null,V(e(a).form.projectQuotaInfoList,s=>(n(),S(l,{span:24,class:k({isNone:!e(a).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[i("div",at,[i("div",{class:k({bottom:!s.answerValueList})},[i("img",{src:e(Te)},null,8,ot),i("span",st,r(s.keyValue),1)],2),s.answerValueList&&s.answerValueList[0]!=="null"?(n(),u("div",lt,r(s.answerValueList.join(", ")),1)):b("",!0)])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1})):b("",!0),o(I,{class:"box-card"},{header:t(()=>[nt]),default:t(()=>[o(j,{gutter:20},{default:t(()=>[o(l,{span:8},{default:t(()=>[o(p,{label:"小时准入量 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.preNum?e(a).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"小时完成量 :"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[m(r(e(a).form.limitedQuantity?e(a).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),o(l,{span:8},{default:t(()=>[o(p,{label:"重复参与:"},{default:t(()=>[o(c,{class:"mx-1"},{default:t(()=>[e(a).form.ipDifferenceDetection===1?(n(),u("div",rt," 开 ")):(n(),u("div",it,"关"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(a).form.descriptionUrl?(n(),S(I,{key:1,class:"box-card"},{header:t(()=>[ct]),default:t(()=>[e(a).form.descriptionUrl?(n(),u(T,{key:0},[(n(!0),u(T,null,V(e(a).srcList,s=>(n(),u("div",{key:s,class:"demo-image__preview"},[o(ue,{style:{width:"6.25rem",height:"6.25rem"},src:s,"preview-src-list":s,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]))),128)),(n(!0),u(T,null,V(e(O),(s,f)=>(n(),u("p",{key:s},[o(L,{style:{padding:"0"},type:"primary",text:"",onClick:U=>ne(s,f)},{default:t(()=>[m(r(s)+" 下载 ",1)]),_:2},1032,["onClick"])]))),128))],64)):b("",!0),o(j,{class:k({isNone:!e(a).form.descriptionUrl}),gutter:20},{default:t(()=>[o(l,{span:24},{default:t(()=>[i("div",ut,[o(e(je),{value:e(a).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):b("",!0),e(a).projectType===1?(n(),S(I,{key:2,class:"box-card"},{header:t(()=>[dt]),default:t(()=>[o(de,{data:e(a).form.projectOperationInfoList,style:{width:"100%"}},{default:t(()=>[o(A,{align:"left",type:"index",width:"80",label:"序号"}),o(A,{align:"left",prop:"operationTime",label:"操作时间"}),o(A,{align:"left",prop:"operationName",label:"操作人"}),o(A,{align:"left",prop:"operationType",label:"操作事项"},{default:t(({row:s})=>[m(r(te[s.operationType-1]),1)]),_:1}),o(A,{align:"left",label:"详情"},{default:t(({row:s})=>[s.operationType!==1?(n(),S(L,{key:0,type:"primary",link:"",onClick:f=>ae(s)},{default:t(()=>[m(" 详情 ")]),_:2},1032,["onClick"])):(n(),S(c,{key:1},{default:t(()=>[m("-")]),_:1}))]),_:1})]),_:1},8,["data"])]),_:1})):b("",!0)]),_:1})]),_:2},[e(a).form.projectSettlementStatusSet&&e(a).form.projectSettlementStatusSet.length!==0?{name:"header",fn:t(()=>[o(j,{gutter:20},{default:t(()=>[o(l,{span:24},{default:t(()=>[o(v,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:e(d)},{default:t(()=>{var s,f,U,K,J,X,q,Y,G,$;return[o(y,{title:"待审核",description:e(d)>=1?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.pendReviewTime:"-",icon:e(d)>=1?e(C):e(N)},null,8,["description","icon"]),o(y,{title:"已审核",description:e(d)>=2?(K=(U=e(a).form)==null?void 0:U.projectSettlementStatusSet[0])==null?void 0:K.reviewTime:"-",icon:e(d)>=2?e(C):e(N)},null,8,["description","icon"]),o(y,{title:"已开票",description:e(d)>=3?(X=(J=e(a).form)==null?void 0:J.projectSettlementStatusSet[0])==null?void 0:X.invoicedOutTime:"-",icon:e(d)>=3?e(C):e(N)},null,8,["description","icon"]),o(y,{title:"已结算",description:e(d)>=4?(Y=(q=e(a).form)==null?void 0:q.projectSettlementStatusSet[0])==null?void 0:Y.settledTime:"-",icon:e(d)>=4?e(C):e(N)},null,8,["description","icon"]),o(y,{title:"已冻结",description:e(d)>=5?($=(G=e(a).form)==null?void 0:G.projectSettlementStatusSet[0])==null?void 0:$.frozenTime:"-",icon:e(d)>=5?e(C):e(N)},null,8,["description","icon"])]}),_:1},8,["active"])]),_:1}),o(j,{style:{width:"100%","margin-top":"0","font-size":"14px"},gutter:20},{default:t(()=>[o(l,{span:1}),o(l,{class:k({colorgreen:e(d)>=1}),span:5},{default:t(()=>{var s,f;return[i("span",De,r(e(d)>=1?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.operationName:""),1)]}),_:1},8,["class"]),o(l,{class:k({colorgreen:e(d)>=2}),span:5},{default:t(()=>{var s,f;return[i("span",Pe,r(e(d)>=2?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.operationName:""),1)]}),_:1},8,["class"]),o(l,{class:k({colorgreen:e(d)>=3}),span:5},{default:t(()=>{var s,f;return[i("span",Oe,r(e(d)>=3?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.operationName:""),1)]}),_:1},8,["class"]),o(l,{class:k({colorgreen:e(d)>=4}),span:4},{default:t(()=>{var s,f;return[i("span",Qe,r(e(d)>=4?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.operationName:""),1)]}),_:1},8,["class"]),o(l,{class:k({colorgreen:e(d)>=5}),span:4},{default:t(()=>{var s,f;return[i("span",Ve,r(e(d)>=5?(f=(s=e(a).form)==null?void 0:s.projectSettlementStatusSet[0])==null?void 0:f.operationName:""),1)]}),_:1},8,["class"])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue"]),o(Ae,{ref_key:"logDetailsRef",ref:E},null,512)])}}}),Lt=be(ft,[["__scopeId","data-v-c465883f"]]);export{Lt as default};
