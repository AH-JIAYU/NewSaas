
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ee,r as I,c as te,l as ae,a as d,o as _,b as L,f as e,w as t,i as a,b8 as le,b9 as U,ba as D,g as s,D as c,G as n,Q as N,e as j,F as Q,n as B,j as E,p as oe,E as F,aK as se,aL as ne,P as re}from"./index-CWfNE84P.js";import{g as ie,v as ce,a as de}from"./index-CpF7Xi-T.js";import{f as ue}from"./file-e3tl1ejx.js";import{o as fe}from"./apiLoading-Co-fM2aJ.js";import{a as S}from"./projectManagement-DcLCsOK4.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-D2HJYP76.js";import{D as _e}from"./download-C8PHVIy1.js";import{u as pe}from"./otherFunctions_basicDictionary-BT9S_2Dy.js";import"./basicDictionary-cR0OZGe9.js";const w=C=>(se("data-v-ce61f8b1"),C=C(),ne(),C),ye={class:"card-header"},be={class:"leftTitle"},ge={class:"m-4 spanStatus"},xe={class:"rightStatus"},ve=w(()=>c("div",{class:"card-header"},[c("span",null,"其他设置")],-1)),he=w(()=>c("div",{class:"card-header"},[c("span",null,"配置信息")],-1)),Ie=w(()=>c("div",{class:"card-header"},[c("span",null,"安全信息")],-1)),Le=w(()=>c("div",{class:"card-header"},[c("span",null,"描述及配额")],-1)),je={class:"demo-image__preview"},we={class:"radius p-2 flex gap-2"},Ce=w(()=>c("div",{class:"card-header"},[c("span",null,"操作日志")],-1)),ke=ee({name:"ProjectDetails",__name:"index",setup(C,{expose:R}){const z=pe();I("# Fantastic-admin");const T=I(),k=I(1),l=I({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});ie({locale:de});const M=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function $(u){T.value.showEdit(u)}const g=I(!1);async function q(u){l.value.isOnline=u.isOnline,l.value.allocationStatus=u.allocationStatus;const f=await fe(S.detail({projectId:u.projectId}));l.value.form=f.data;const o=await ue.detail({fileName:l.value.form.descriptionUrl});l.value.imgUrl=o.data.fileUrl,l.value.srcList=[o.data.fileUrl],A(),g.value=!0}const A=async()=>{if(l.value.form.projectQuotaInfoList.length){const u=await S.getProjectCountryList({countryIdList:l.value.form.countryIdList}),f={countryId:l.value.form.projectQuotaInfoList[0].countryId,projectQuotaQuestionType:l.value.form.projectQuotaInfoList[0].projectQuotaQuestionType},o=await S.getProjectCategoryList(f),p=V(u.data.getProjectCountryListInfoList,"countryId",f.countryId),P=V(o.data.getProjectCategoryInfoList,"projectProblemCategoryId",l.value.form.projectQuotaInfoList[0].projectProblemCategoryId);l.value.form.countryName=p.countryName,l.value.form.projectProblemCategoryName=P.projectProblemCategoryName}},V=(u,f,o)=>u.find(p=>p[f]===o),x=te(()=>u=>l.value.countryList.filter(o=>u.includes(o.id)).map(o=>o.chineseName));async function G(u){try{await navigator.clipboard.writeText(u),F.success({message:"已复制文本",center:!0})}catch{F.warning({message:"复制失败,请重试",center:!0})}}async function H(){await _e(l.value.imgUrl,l.value.form.descriptionUrl)}function O(){g.value=!1}return ae(async()=>{l.value.countryList=await z.getCountry()}),R({showEdit:q}),(u,f)=>{const o=d("el-col"),p=d("el-step"),P=d("el-steps"),y=d("el-row"),r=d("el-text"),i=d("el-form-item"),K=d("el-link"),J=d("el-tooltip"),v=d("el-button"),b=d("el-card"),W=d("el-image"),h=d("el-table-column"),X=d("el-table"),Y=d("ElForm"),Z=d("el-drawer");return _(),L("div",null,[e(Z,{modelValue:a(g),"onUpdate:modelValue":f[1]||(f[1]=m=>oe(g)?g.value=m:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},{header:t(()=>[e(y,{gutter:20},{default:t(()=>[e(o,{span:2}),e(o,{span:20},{default:t(()=>[e(P,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:a(k)},{default:t(()=>[e(p,{title:"已开始",description:"2021-09-09 11:11:11",icon:a(le)},null,8,["icon"]),e(p,{title:"已确认",description:"2021-09-09 11:11:11",icon:a(k)>=2?a(U):a(D)},null,8,["icon"]),e(p,{title:"已开票",description:"2021-09-09 11:11:11",icon:a(k)>=3?a(U):a(D)},null,8,["icon"]),e(p,{title:"已完结",description:"2021-09-09 11:11:11",icon:a(k)>=4?a(U):a(D)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(o,{span:2})]),_:1})]),footer:t(()=>[e(v,{onClick:O},{default:t(()=>[s(" 取消 ")]),_:1}),e(v,{type:"primary",onClick:O},{default:t(()=>[s(" 确定 ")]),_:1})]),default:t(()=>[e(Y,{"label-width":"120px"},{default:t(()=>[e(b,{class:"box-card"},{header:t(()=>[c("div",ye,[c("div",be,[s(" 基本信息 "),c("span",ge,n(a(l).allocationStatus===1?"未分配":"已分配"),1)]),c("div",xe,[c("div",{class:N(a(l).isOnline===1?"isOnlineTrue":"isOnlineFalse")},n(a(l).isOnline===1?"在线":"离线"),3)])])]),default:t(()=>[e(y,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"项目ID :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.projectId?a(l).form.projectId:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"项目名称 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.name?a(l).form.name:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"项目标识 :",prop:"client_pid"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.projectIdentification?a(l).form.projectIdentification:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"所属客户 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.clientId?a(l).form.clientId:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"所属国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[a(x)(a(l).form.countryIdList).length>4?(_(),j(J,{key:0,class:"box-item",effect:"dark",content:a(x)(a(l).form.countryIdList).join(","),placement:"top"},{default:t(()=>[e(K,{type:"primary"},{default:t(()=>[s(n(a(x)(a(l).form.countryIdList).length===185?"全球":a(x)(a(l).form.countryIdList).length),1)]),_:1})]),_:1},8,["content"])):(_(!0),L(Q,{key:1},B(a(x)(a(l).form.countryIdList),m=>(_(),L("span",{key:m},n(m)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"原价 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.doMoneyPrice?a(l).form.doMoneyPrice:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"配额 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.num?a(l).form.num:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"最小时长 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.minimumDuration?a(l).form.minimumDuration+"min":"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"IR :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.ir?a(l).form.ir:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:12},{default:t(()=>[e(i,{label:"URL :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.uidUrl?a(l).form.uidUrl:"-"),1)]),_:1}),e(v,{type:"primary",style:{"margin-left":"auto"},onClick:f[0]||(f[0]=m=>G(a(l).form.uidUrl)),link:""},{default:t(()=>[s(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"box-card"},{header:t(()=>[ve]),default:t(()=>[e(y,{gutter:10},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"置顶 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"在线 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"资料 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"B2B :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n()+" "+n(a(l).form.isPinned===1?a(l).form.projectType.join(","):"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"定时发布 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"备注 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).formNaNpxark?a(l).formNaNpxark:"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"box-card"},{header:t(()=>[he]),default:t(()=>[e(y,{gutter:10,class:N(a(l).form.projectQuotaInfoList.length?"toConfigure":"isNone")},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"国家 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.countryName?a(l).form.countryName:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"问卷 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.projectProblemCategoryName?a(l).form.projectProblemCategoryName:"-"),1)]),_:1})]),_:1})]),_:1}),(_(!0),L(Q,null,B(a(l).form.projectQuotaInfoList,m=>(_(),j(o,{span:24,class:N({isNone:!a(l).form.projectQuotaInfoList.length}),gutter:10},{default:t(()=>[e(i,{"label-width":"200px",label:m.keyValue+" :"},{default:t(()=>[m.answerValueList&&m.answerValueList[0]!=="null"?(_(),j(r,{key:0,class:"mx-1"},{default:t(()=>[s(n(m.answerValueList.join(", ")),1)]),_:2},1024)):(_(),j(r,{key:1,class:"mx-1"},{default:t(()=>[s(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1032,["class"]))),256))]),_:1},8,["class"])]),_:1}),e(b,{class:"box-card"},{header:t(()=>[Ie]),default:t(()=>[e(y,{gutter:20},{default:t(()=>[e(o,{span:8},{default:t(()=>[e(i,{label:"小时准入量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.preNum?a(l).form.preNum:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"小时完成量 :"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.limitedQuantity?a(l).form.limitedQuantity:"-"),1)]),_:1})]),_:1})]),_:1}),e(o,{span:8},{default:t(()=>[e(i,{label:"IP一致性检测:"},{default:t(()=>[e(r,{class:"mx-1"},{default:t(()=>[s(n(a(l).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(l).form.descriptionUrl?(_(),j(b,{key:0,class:"box-card"},{header:t(()=>[Le]),default:t(()=>[a(l).form.descriptionUrl?(_(),L(Q,{key:0},[c("div",je,[e(W,{style:{width:"6.25rem",height:"6.25rem"},src:a(l).imgUrl,"preview-src-list":a(l).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),e(v,{style:{padding:"0"},type:"primary",text:"",onClick:H},{default:t(()=>[s(n(a(l).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):E("",!0),e(y,{class:N({isNone:!a(l).form.descriptionUrl}),gutter:20},{default:t(()=>[e(o,{span:24},{default:t(()=>[c("div",we,[e(a(ce),{value:a(l).form.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"])]),_:1})):E("",!0),e(b,{class:"box-card"},{header:t(()=>[Ce]),default:t(()=>[e(X,{data:M,border:"",style:{width:"100%"}},{default:t(()=>[e(h,{align:"center",type:"index",width:"80",label:"序号"}),e(h,{align:"center",prop:"a",label:"操作时间"}),e(h,{align:"center",prop:"b",label:"操作人"}),e(h,{align:"center",prop:"c",label:"操作事项"}),e(h,{align:"center",prop:"d",label:"详情"},{default:t(()=>[e(v,{text:"",type:"primary",size:"default",onClick:$},{default:t(()=>[s(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(me,{ref_key:"logDetailsRef",ref:T},null,512)])}}}),Be=re(ke,[["__scopeId","data-v-ce61f8b1"]]);export{Be as default};
