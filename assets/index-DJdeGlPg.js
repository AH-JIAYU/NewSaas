
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as O,r as f,n as Q,a as u,o,e as _,w as e,y as i,f as a,g as s,b as h,z as d,t as N,j as C,F as V,p as W,aH as X,aI as Y,L as Z}from"./index-C3BA-dDE.js";import{a as $}from"./department-CLRZxpZB.js";import{u as ee}from"./department-DG97JglX.js";import{u as ae}from"./tenant_role-B8DcqqVX.js";import{u as te}from"./configuration_manager-D7U_MH06.js";import{u as le}from"./position_manage-fvfmDeeT.js";import"./configuration_role-D_YP5zDa.js";import"./position_manage-DMocecTd.js";const L=x=>(X("data-v-ba563d4a"),x=x(),Y(),x),oe=L(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"基本信息")],-1)),se={key:1,class:"avatar"},ne={style:{"font-size":"14px"}},ue=L(()=>i("div",{class:"card-header"},[i("div",{class:"leftTitle"},"角色信息")],-1)),de={class:"card-header"},re={class:"leftTitle"},ce={key:0,style:{"margin-left":"20px","font-size":"14px"}},ie={class:"flex-c"},_e=O({__name:"index",emits:["fetch-data"],setup(x,{expose:M,emit:P}){const B=te(),I=f([]),j=le(),z=f(),R=ae(),T=f();ee();const k=f(),U={children:"children",label:"name"},b=f([]),v=f({}),E=P,y=f(!1),l=f();async function F(p){v.value=p;const m={id:p.id},{status:n,data:w}=await W.list(m);l.value=w.data[0],b.value&&b.value.push(l.value.organizationalStructureId),y.value=!0}function D(){E("fetch-data"),b.value=[],y.value=!1}return Q(async()=>{z.value=await j.getPositionManage(),I.value=await B.getStaff(),T.value=await R.getRole();const p=await $.list({name:""});p.data&&(k.value=p.data)}),M({showEdit:F}),(p,m)=>{const n=u("el-col"),w=u("el-avatar"),g=u("el-row"),r=u("el-text"),c=u("el-form-item"),S=u("el-card"),H=u("el-radio"),q=u("el-radio-group"),A=u("el-tree"),G=u("el-form"),J=u("el-button"),K=u("el-drawer");return o(),_(K,{modelValue:y.value,"onUpdate:modelValue":m[1]||(m[1]=t=>y.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:D},{footer:e(()=>[i("div",ie,[a(J,{type:"primary",onClick:D},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(G,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(S,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[a(g,{gutter:20},{default:e(()=>[a(n,{span:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(o(),_(w,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(o(),h("div",se,d(l.value.name),1))]),_:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[i("p",null,d(l.value.userName),1),i("p",ne,[s("账号:"),i("span",null,d(l.value.userName),1)])]),_:1})]),_:1}),a(g,{gutter:24},{default:e(()=>[a(n,{span:6},{default:e(()=>[a(c,{label:"员工ID:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"姓名:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"手机号:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.phoneNumber?l.value.phoneNumber:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"邮箱:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"部门:"},{default:e(()=>[s(d(l.value.organizationalStructureName?l.value.organizationalStructureName:"-"),1)]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"职位:"},{default:e(()=>[(o(!0),h(V,null,N(z.value,t=>(o(),_(r,null,{default:e(()=>[l.value.positionId===t.id?(o(),_(r,{key:0},{default:e(()=>[s(d(t.name?t.name:"-"),1)]),_:2},1024)):C("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"帐号状态:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,{label:"创建时间:"},{default:e(()=>[a(r,{class:"mx-1"},{default:e(()=>{var t;return[s(d((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(S,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(c,{label:"分配角色:"},{default:e(()=>[a(q,{modelValue:v.value.role,"onUpdate:modelValue":m[0]||(m[0]=t=>v.value.role=t)},{default:e(()=>[(o(!0),h(V,null,N(T.value,t=>(o(),_(H,{key:t.id,value:t.roleName,label:t.roleName,disabled:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(S,{class:"box-card"},{header:e(()=>[i("div",de,[i("div",re,[s(" 部门信息"),v.value.enableChargePerson?(o(),h("span",ce,[s("负责人:"),(o(!0),h(V,null,N(I.value,t=>(o(),_(r,{key:t.id},{default:e(()=>[t.id===v.value.id?(o(),_(r,{key:0},{default:e(()=>[s(d(t.name),1)]),_:2},1024)):C("",!0)]),_:2},1024))),128))])):C("",!0)])])]),default:e(()=>[a(g,{gutter:24},{default:e(()=>[a(c,{label:"分配部门:"},{default:e(()=>[k.value.length>0?(o(),_(A,{key:0,style:{"max-width":"600px"},ref:"treeRef",disabled:!0,data:k.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":b.value,"default-expand-all":"",props:U,onCheckChange:p.handleNodeClick},null,8,["data","default-checked-keys","onCheckChange"])):(o(),_(r,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ge=Z(_e,[["__scopeId","data-v-ba563d4a"]]);export{ge as default};
