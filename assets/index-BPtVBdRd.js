
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as E}from"./apiLoading-CgIj6Hz1.js";import{u as T}from"./survey_vipLevel-CgD3S9j7.js";import{a as _}from"./survey_vip-wzcVyiBM.js";import{d as D,r as m,N as b,a3 as s,b as c,c as L,w as a,g as i,h as g,i as o,j as F,P as O,O as U,l as j,ai as z,z as A}from"./index-D3JQ81m5.js";const M=D({__name:"index",emits:["queryData"],setup(P,{expose:y,emit:V}){const I=T(),w=V,n=m(!1),u=m(""),e=m(),d=m(),k=b({memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}]}),v=b({vipLevelList:[]}),x=async()=>{v.vipLevelList=await I.getLevelNameList()};async function C(r){if(!r)u.value="新增",e.value={};else{await x(),u.value="编辑";const{data:t}=await _.detail({memberId:r.memberId});e.value=t,e.value.countryType=e.value.subordinateCountryId==="343"?1:2}n.value=!0}function f(){d.value.resetFields(),n.value=!1}function N(){d.value.validate(async r=>{if(r){const{status:t}=await E(_.edit(e.value));t===1&&z.success({message:"修改成功",center:!0}),w("queryData"),f()}})}return y({showEdit:C}),(r,t)=>{const R=s("el-option"),S=s("el-select"),h=s("el-form-item"),q=s("el-form"),p=s("el-button"),B=s("el-dialog");return c(),L(B,{modelValue:o(n),"onUpdate:modelValue":t[1]||(t[1]=l=>j(n)?n.value=l:null),title:o(u),width:"600"},{footer:a(()=>[i(p,{onClick:f},{default:a(()=>[g(" 取消 ")]),_:1}),i(p,{type:"primary",onClick:N},{default:a(()=>[g(" 确定 ")]),_:1})]),default:a(()=>[i(q,{ref_key:"formRef",ref:d,model:o(e),rules:o(k),"label-width":"7rem",inline:!1},{default:a(()=>[i(h,{label:"会员等级",prop:"memberLevelId"},{default:a(()=>[i(S,{clearable:"",filterable:"",modelValue:o(e).memberLevelId,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).memberLevelId=l)},{default:a(()=>[(c(!0),F(U,null,O(o(v).vipLevelList,l=>(c(),L(R,{key:l.memberLevelId,value:l.memberLevelId,label:l.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),Q=A(M,[["__scopeId","data-v-7230a38c"]]);export{Q as default};
