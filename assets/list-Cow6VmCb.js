
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,aK as Be,r as v,a5 as O,k as xe,a as i,p as Ee,o as n,b as H,f as a,w as t,az as j,F as J,t as Q,e as r,q as A,g as d,H as g,j as b,i as k,S as ze,bb as Ge,E as Ue,N as $e,aM as De,aN as Te,ba as Me,ap as Pe,aG as Fe,aH as Re,s as w,aq as W,R as He}from"./index-Cvjxswu7.js";import{_ as Ae}from"./index.vue_vue_type_style_index_0_lang-75uNCsPH.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-BhEZijzn.js";import{_ as Ke}from"./index.vue_vue_type_script_setup_true_lang-Boj6Hmut.js";import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang-D6QRbSCL.js";import{s as Oe}from"./apiLoading-Bl9mYt8-.js";import{a as X}from"./survey_vip-BXqP7C4j.js";import{u as je}from"./index-BicpjT_e.js";import{u as Je}from"./survey_vipGroup-BF8EtGkj.js";import{u as Qe}from"./survey_vip-MjriVHE7.js";import"./index.vue_vue_type_script_setup_true_lang-D7Iz-20w.js";import"./index.vue_vue_type_script_setup_true_lang-Dt1a7Vcj.js";import"./stagedData-CyI1arUM.js";import"./survey_vipGroup-RM0XiPyq.js";const N=V=>(Fe("data-v-f1f0c98a"),V=V(),Re(),V),We=N(()=>w("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe=N(()=>w("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),Ze=N(()=>w("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),et=N(()=>w("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),tt=N(()=>w("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),lt=Ie({name:"vip",__name:"list",setup(V){const Z=je(),ee=Je(),te=Qe(),{pagination:h,getParams:le,onSizeChange:ae,onCurrentChange:oe}=Be(),{format:ne}=Ge(),C=v(!1),y=O({list:[],vipLevelList:[],vipGroupList:[]}),re=v(),z=v(),q=v(),G=v(!0),U=v(!1),$=v("default"),u=v([]),D=v(!1),T=v([{prop:"memberId",label:"会员ID",checked:!0,sprtable:!0},{prop:"memberNickname",label:"会员名称",checked:!0,sprtable:!0},{label:"会员姓名",checked:!0,sortable:!0,prop:"memberName"},{label:"可用余额",checked:!0,sortable:!0,prop:"availableBalance"},{label:"待审金额",checked:!0,sortable:!0,prop:"pendingBalance"},{prop:"memberName",label:"会员姓名",checked:!0,sprtable:!0},{prop:"memberLevelName",label:"会员等级",checked:!0,sprtable:!0},{prop:"memberGroupName",label:"会员组",checked:!0,sprtable:!0},{prop:"B2B|B2C",label:"B2B|B2C",checked:!0,sprtable:!0},{prop:"memberStatus",label:"会员状态",checked:!0,sprtable:!0},{prop:"randomStatus",label:"随机身份",checked:!0,sprtable:!0},{prop:"createName",label:"创建人",checked:!0,sprtable:!0},{prop:"createTime",label:"创建日期",checked:!0,sprtable:!0}]),m=O({memberId:null,memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]});function se(){z.value.showEdit()}function me(s){z.value.showEdit(s)}const ie=s=>{q.value.showEdit(JSON.stringify(s))};async function M(s,l){const I={memberId:l,memberStatus:s},{status:_}=await Oe(X.changestatus(I));_===1&&Ue.success({message:"修改成功"}),te.NickNameList=null,S()}function S(){h.value.page=1,L()}function ue(s){ae(s).then(()=>L())}function f(s=1){oe(s).then(()=>L())}async function L(){try{C.value=!0;const s={...le(),...m};m.time&&m.time.length&&(s.beginTime=m.time[0]||"",s.endTime=m.time[1]||"");const l=await X.list(s);y.list=l.data.getMemberInfoList,h.value.total=l.data.total,C.value=!1}catch{}finally{C.value=!1}}function pe(){Object.assign(m,{memberId:null,memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]}),S()}function de(s){re.value=s}return xe(async()=>{T.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),L(),y.vipLevelList=await Z.getLevelNameList(),y.vipGroupList=await ee.getGroupNameList()}),(s,l)=>{const I=i("el-input"),_=i("el-form-item"),B=i("el-option"),P=i("el-select"),ce=i("el-date-picker"),K=$e,F=i("ElButton"),be=i("ElFormItem"),ve=i("ElForm"),fe=qe,_e=i("ElDivider"),x=i("el-button"),ge=Ae,he=De,ye=Te,ke=i("el-row"),c=i("el-table-column"),Y=Me,E=i("el-text"),R=i("ElSwitch"),Se=i("el-tag"),we=i("el-empty"),Ne=i("el-table"),Ve=i("ElPagination"),Ce=Pe,Le=Ee("loading");return n(),H("div",{class:ze({"absolute-container":D.value})},[a(Ce,null,{default:t(()=>[a(fe,{"show-toggle":!1},{default:t(({fold:e,toggle:p})=>[a(ve,{model:m,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[a(_,{label:""},{default:t(()=>[a(I,{modelValue:m.memberId,"onUpdate:modelValue":l[0]||(l[0]=o=>m.memberId=o),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID",onKeydown:l[1]||(l[1]=j(o=>f(),["enter"]))},null,8,["modelValue"])]),_:1}),a(_,{label:""},{default:t(()=>[a(I,{modelValue:m.memberName,"onUpdate:modelValue":l[2]||(l[2]=o=>m.memberName=o),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员名称",onKeydown:l[3]||(l[3]=j(o=>f(),["enter"]))},null,8,["modelValue"])]),_:1}),a(_,{label:""},{default:t(()=>[a(P,{modelValue:m.memberLevelId,"onUpdate:modelValue":l[4]||(l[4]=o=>m.memberLevelId=o),clearable:"",placeholder:"会员等级",onChange:l[5]||(l[5]=o=>f())},{default:t(()=>[(n(!0),H(J,null,Q(y.vipLevelList,o=>(n(),r(B,{key:o.memberLevelId,label:o.levelNameOrAdditionRatio,value:o.memberLevelId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{label:""},{default:t(()=>[a(P,{modelValue:m.memberStatus,"onUpdate:modelValue":l[6]||(l[6]=o=>m.memberStatus=o),clearable:"",placeholder:"会员状态",onChange:l[7]||(l[7]=o=>f())},{default:t(()=>[a(B,{label:"关闭",value:1}),a(B,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:1}),A(a(_,{label:""},{default:t(()=>[a(P,{modelValue:m.memberGroupId,"onUpdate:modelValue":l[8]||(l[8]=o=>m.memberGroupId=o),clearable:"",placeholder:"所属会员组",onChange:l[9]||(l[9]=o=>f())},{default:t(()=>[(n(!0),H(J,null,Q(y.vipGroupList,o=>(n(),r(B,{key:o.memberGroupId,label:o.memberGroupName,value:o.memberGroupId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[W,!e]]),A(a(_,null,{default:t(()=>[a(ce,{modelValue:m.time,"onUpdate:modelValue":l[10]||(l[10]=o=>m.time=o),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",onChange:l[11]||(l[11]=o=>f())},null,8,["modelValue"])]),_:2},1536),[[W,!e]]),a(be,null,{default:t(()=>[a(F,{type:"primary",onClick:l[12]||(l[12]=o=>f())},{icon:t(()=>[a(K,{name:"i-ep:search"})]),default:t(()=>[d(" 筛选 ")]),_:1}),a(F,{onClick:pe},{icon:t(()=>[We]),default:t(()=>[d(" 重置 ")]),_:1}),a(F,{link:"",onClick:p},{icon:t(()=>[a(K,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[d(" "+g(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(_e,{"border-style":"dashed"}),a(ke,null,{default:t(()=>[a(ge,null,{default:t(()=>[a(x,{type:"primary",size:"default",onClick:se},{default:t(()=>[d(" 新增 ")]),_:1})]),_:1}),a(ye,null,{default:t(()=>[a(x,{size:"default"},{default:t(()=>[d(" 导出 ")]),_:1}),a(he,{border:G.value,"onUpdate:border":l[13]||(l[13]=e=>G.value=e),tableAutoHeight:D.value,"onUpdate:tableAutoHeight":l[14]||(l[14]=e=>D.value=e),checkList:u.value,"onUpdate:checkList":l[15]||(l[15]=e=>u.value=e),columns:T.value,"onUpdate:columns":l[16]||(l[16]=e=>T.value=e),"line-height":$.value,"onUpdate:lineHeight":l[17]||(l[17]=e=>$.value=e),stripe:U.value,"onUpdate:stripe":l[18]||(l[18]=e=>U.value=e),style:{"margin-left":"12px"},onQueryData:S},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),A((n(),r(Ne,{border:G.value,data:y.list,size:$.value,stripe:U.value,onSelectionChange:de},{empty:t(()=>[a(we,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[a(c,{align:"center",type:"selection"}),u.value.includes("memberId")?(n(),r(c,{key:0,align:"center",prop:"memberId",width:"180","show-overflow-tooltip":"",label:"会员ID"})):b("",!0),u.value.includes("memberNickname")?(n(),r(c,{key:1,align:"center",prop:"memberNickname","show-overflow-tooltip":"",label:"会员名称"})):b("",!0),u.value.includes("memberName")?(n(),r(c,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"会员姓名"},{default:t(({row:e})=>[d(g(e.memberName?e.memberName:"-"),1)]),_:1})):b("",!0),u.value.includes("availableBalance")?(n(),r(c,{key:3,align:"center",prop:"availableBalance","show-overflow-tooltip":"",label:"可用余额"},{default:t(({row:e})=>[a(Y),d(g(e.availableBalance||0),1)]),_:1})):b("",!0),u.value.includes("pendingBalance")?(n(),r(c,{key:4,align:"center",prop:"pendingBalance","show-overflow-tooltip":"",label:"待审金额"},{default:t(({row:e})=>[a(Y),d(g(e.pendingBalance||0),1)]),_:1})):b("",!0),u.value.includes("memberLevelName")?(n(),r(c,{key:5,align:"center",prop:"memberLevelName","show-overflow-tooltip":"",label:"会员等级"},{default:t(({row:e})=>[d(g(e.memberLevelName?e.memberLevelName:"-"),1)]),_:1})):b("",!0),u.value.includes("memberGroupName")?(n(),r(c,{key:6,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组"},{default:t(({row:e})=>[d(g(e.memberGroupName?e.memberGroupName:"-"),1)]),_:1})):b("",!0),u.value.includes("B2B|B2C")?(n(),r(c,{key:7,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:t(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(n(),r(E,{key:0,class:"mx-1"},{default:t(()=>[Xe]),_:1})):(n(),r(E,{key:1,class:"mx-1"},{default:t(()=>[Ze]),_:1})),d(" | "),e.b2cStatus&&e.b2cStatus===2?(n(),r(E,{key:2,class:"mx-1"},{default:t(()=>[et]),_:1})):(n(),r(E,{key:3,class:"mx-1"},{default:t(()=>[tt]),_:1}))]),_:1})):b("",!0),u.value.includes("memberStatus")?(n(),r(c,{key:8,align:"center","show-overflow-tooltip":"",label:"会员状态"},{default:t(({row:e})=>[e.memberStatus===3?(n(),r(R,{key:0,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:p=>M(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(n(),r(R,{key:1,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>M(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):b("",!0),u.value.includes("randomStatus")?(n(),r(c,{key:9,align:"center","show-overflow-tooltip":"",label:"随机身份"},{default:t(({row:e})=>[a(R,{modelValue:e.randomStatus,"onUpdate:modelValue":p=>e.randomStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>M(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):b("",!0),u.value.includes("createName")?(n(),r(c,{key:10,align:"center",prop:"createName","show-overflow-tooltip":"",label:"创建人"},{default:t(({row:e})=>[d(g(e.createName?e.createName:"-"),1)]),_:1})):b("",!0),u.value.includes("createTime")?(n(),r(c,{key:11,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:t(({row:e})=>[a(Se,{effect:"plain",type:"info"},{default:t(()=>[d(g(k(ne)(e.createTime)),1)]),_:2},1024)]),_:1})):b("",!0),a(c,{align:"center",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:t(({row:e})=>[a(x,{size:"small",plain:"",type:"primary",onClick:p=>me(e)},{default:t(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),a(x,{size:"small",plain:"",type:"primary",onClick:p=>ie(e)},{default:t(()=>[d(" 加减款 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Le,C.value]]),a(Ve,{"current-page":k(h).page,total:k(h).total,"page-size":k(h).size,"page-sizes":k(h).sizes,layout:k(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ue,onCurrentChange:f},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(Ke,{ref_key:"editRef",ref:z,onFetchData:S},null,512),a(Ye,{ref_key:"vipPlusMinusPaymentsRef",ref:q,onFetchData:S},null,512)],2)}}}),_t=He(lt,[["__scopeId","data-v-f1f0c98a"]]);export{_t as default};
