
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as K,r as w,c as W,G as X,a as r,o as p,b as k,f as e,w as a,i as t,b3 as Y,b4 as D,b5 as j,g as o,l as d,I as n,e as C,F as V,n as P,j as Z,p as ee,ak as B,aF as ae,aG as te,_ as le}from"./index-IzvFu4ZI.js";import{g as se,v as oe,a as ne}from"./index-DI1-eyd0.js";import{f as ce}from"./file-yD1tMUbm.js";import{o as ie}from"./apiLoading-BLQjYJHm.js";import{a as de}from"./projectManagement-BWZhdD4E.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_lang-DpMRx4YT.js";import{u as ue}from"./otherFunctions_basicDictionary-sDOxbIfs.js";import"./basicDictionary-CqbHnyDx.js";const y=L=>(ae("data-v-b84740e1"),L=L(),te(),L),fe={class:"card-header"},_e={class:"m-4",style:{background:"var(--el-color-primary)",color:"var(--el-color-white)",padding:"0 0.5rem"}},me={class:"status"},pe=y(()=>d("div",{class:"i-ph:seal-light w-1em h-1em"},null,-1)),be=y(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),xe=y(()=>d("div",{class:"card-header"},[d("span",null,"配置信息")],-1)),ye=y(()=>d("div",{class:"card-header"},[d("span",null,"安全信息")],-1)),he=y(()=>d("div",{class:"card-header"},[d("span",null,"描述及配额")],-1)),ge={class:"demo-image__preview"},ve={class:"radius p-2 flex gap-2"},we=y(()=>d("div",{class:"card-header"},[d("span",null,"操作日志")],-1)),ke=K({name:"ProjectDetails",__name:"index",setup(L,{expose:E}){const N=ue();w("# Fantastic-admin");const R=w(),I=w(1),l=w({form:{},imgUrl:"",isOnline:"",allocationStatus:"",srcList:[],countryList:[]});se({locale:ne});const O=[{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1},{a:1,b:2,c:3,id:1}];function T(u){R.value.showEdit(u)}const h=w(!1);async function F(u){l.value.isOnline=u.isOnline,l.value.allocationStatus=u.allocationStatus;const f=await ie(de.detail({projectId:u.projectId}));l.value.form=f.data;const s=await ce.detail({fileName:l.value.form.descriptionUrl});l.value.imgUrl=s.data.fileUrl,l.value.srcList=[s.data.fileUrl],h.value=!0}const U=W(()=>u=>l.value.countryList.filter(s=>u.includes(s.id)).map(s=>s.chineseName));async function z(u){try{await navigator.clipboard.writeText(u),B.success({message:"已复制文本",center:!0})}catch{B.warning({message:"复制失败,请重试",center:!0})}}async function M(){const f=await(await fetch(l.value.imgUrl)).blob(),s=URL.createObjectURL(f),_=document.createElement("a");_.href=s,_.download=l.value.form.descriptionUrl,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(s)}function S(){h.value=!1}return X(async()=>{l.value.countryList=await N.getCountry()}),E({showEdit:F}),(u,f)=>{const s=r("el-col"),_=r("el-step"),G=r("el-steps"),b=r("el-row"),c=r("el-text"),i=r("el-form-item"),Q=r("el-link"),$=r("el-tooltip"),g=r("el-button"),x=r("el-card"),A=r("el-image"),v=r("el-table-column"),H=r("el-table"),q=r("ElForm"),J=r("el-drawer");return p(),k("div",null,[e(J,{modelValue:t(h),"onUpdate:modelValue":f[1]||(f[1]=m=>ee(h)?h.value=m:null),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"55%",title:"项目详情"},{header:a(()=>[e(b,{gutter:20},{default:a(()=>[e(s,{span:2}),e(s,{span:20},{default:a(()=>[e(G,{style:{"max-width":"100%"},"finish-status":"success","align-center":"",active:t(I)},{default:a(()=>[e(_,{title:"已开始",description:"2021-09-09 11:11:11",icon:t(Y)},null,8,["icon"]),e(_,{title:"已确认",description:"2021-09-09 11:11:11",icon:t(I)>=2?t(D):t(j)},null,8,["icon"]),e(_,{title:"已开票",description:"2021-09-09 11:11:11",icon:t(I)>=3?t(D):t(j)},null,8,["icon"]),e(_,{title:"已完结",description:"2021-09-09 11:11:11",icon:t(I)>=4?t(D):t(j)},null,8,["icon"])]),_:1},8,["active"])]),_:1}),e(s,{span:2})]),_:1})]),footer:a(()=>[e(g,{onClick:S},{default:a(()=>[o(" 取消 ")]),_:1}),e(g,{type:"primary",onClick:S},{default:a(()=>[o(" 确定 ")]),_:1})]),default:a(()=>[e(q,{"label-width":"100px"},{default:a(()=>[e(x,{class:"box-card"},{header:a(()=>[d("div",fe,[d("div",null,[o(" 基本信息 "),d("span",_e,n(t(l).allocationStatus===1?"未分配":"已分配"),1)]),d("div",me,[pe,d("div",null,n(t(l).isOnline===1?"在线":"离线"),1)])])]),default:a(()=>[e(b,{gutter:10},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(i,{label:"项目ID"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.projectId),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"项目名称"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.name),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"项目标识",prop:"client_pid"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.projectIdentification),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"所属客户"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.clientId),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"所属国家"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[t(U)(t(l).form.countryIdList).length>4?(p(),C($,{key:0,class:"box-item",effect:"dark",content:t(U)(t(l).form.countryIdList).join(","),placement:"top"},{default:a(()=>[e(Q,{type:"primary"},{default:a(()=>[o(n(t(U)(t(l).form.countryIdList).length),1)]),_:1})]),_:1},8,["content"])):(p(!0),k(V,{key:1},P(t(U)(t(l).form.countryIdList),m=>(p(),k("span",{key:m},n(m)+"  ",1))),128))]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"原价"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.doMoneyPrice),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"配额"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.num),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"最小时长"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.minimumDuration),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"IR"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ir),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"URL"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.uidUrl),1)]),_:1}),e(g,{type:"primary",style:{"margin-left":"auto"},onClick:f[0]||(f[0]=m=>z(t(l).form.uidUrl))},{default:a(()=>[o(" 复制 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[be]),default:a(()=>[e(b,{gutter:10},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(i,{label:"置顶"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"在线"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isOnline===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"资料"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isProfile===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"B2B"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isPinned===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"定时发布"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.isTimeReleases===2?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"备注"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.remark),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[xe]),default:a(()=>[e(b,{gutter:10},{default:a(()=>[(p(!0),k(V,null,P(t(l).form.projectQuotaInfoList,m=>(p(),C(s,{span:8},{default:a(()=>[e(i,{label:m.keyValue},{default:a(()=>[m.answerValueList&&m.answerValueList[0]!=="null"?(p(),C(c,{key:0,class:"mx-1"},{default:a(()=>[o(n(m.answerValueList.join(", ")),1)]),_:2},1024)):(p(),C(c,{key:1,class:"mx-1"},{default:a(()=>[o(" - ")]),_:1}))]),_:2},1032,["label"])]),_:2},1024))),256))]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[ye]),default:a(()=>[e(b,{gutter:20},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(i,{label:"小时准入量"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.preNum),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"小时完成量"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.limitedQuantity),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"时差检测"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.timeDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"重复IP检测"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ipDifferenceDetection===1?"开":"关"),1)]),_:1})]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"IP一致性检测"},{default:a(()=>[e(c,{class:"mx-1"},{default:a(()=>[o(n(t(l).form.ipConsistency===1?"开":"关"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[he]),default:a(()=>[t(l).form.descriptionUrl?(p(),k(V,{key:0},[d("div",ge,[e(A,{style:{width:"100px",height:"100px"},src:t(l).imgUrl,"preview-src-list":t(l).srcList,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"])]),e(g,{style:{padding:"0"},type:"primary",text:"",onClick:M},{default:a(()=>[o(n(t(l).form.descriptionUrl)+" 下载 ",1)]),_:1})],64)):Z("",!0),e(b,{gutter:20},{default:a(()=>[e(s,{span:24},{default:a(()=>[d("div",ve,[e(t(oe),{value:t(l).form.richText},null,8,["value"])])]),_:1})]),_:1})]),_:1}),e(x,{class:"box-card"},{header:a(()=>[we]),default:a(()=>[e(H,{data:O,border:"",style:{width:"100%"}},{default:a(()=>[e(v,{align:"center",type:"index",width:"80",label:"序号"}),e(v,{align:"center",prop:"a",label:"操作时间"}),e(v,{align:"center",prop:"b",label:"操作人"}),e(v,{align:"center",prop:"c",label:"操作事项"}),e(v,{align:"center",prop:"d",label:"详情"},{default:a(()=>[e(g,{text:"",type:"primary",size:"default",onClick:T},{default:a(()=>[o(" 详情 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(re,{ref_key:"logDetailsRef",ref:R},null,512)])}}}),Se=le(ke,[["__scopeId","data-v-b84740e1"]]);export{Se as default};
