
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as me,aK as ye,r as p,a5 as _e,k as ve,l as be,a as u,p as ge,q as N,o as l,b as T,f as a,w as t,F as P,t as $,g as n,H as S,e as r,j as s,i as v,S as ke,bb as he,N as Te,aM as Se,aN as xe,ap as Ce,aG as Ie,aH as Ve,s as Ue,R as ze}from"./index-DX1UQaE6.js";import{_ as De}from"./index.vue_vue_type_style_index_0_lang-DLG5k5IZ.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-upJU2LN5.js";import{E as Re,a as Le}from"./index-DflptZe9.js";import we from"./index-B6R7_w5O.js";const Be=h=>(Ie("data-v-d6f486f1"),h=h(),Ve(),h),He=Be(()=>Ue("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=me({name:"alter",__name:"list",setup(h){const{format:j}=he(),{pagination:_,onSizeChange:A,onCurrentChange:M}=ye(),q=p(""),E=p([]),b=p(!0),R=p(),O=p(),x=p(!1),d=p([]),C=p(!0);p(!1);const I=p("default"),V=p(!1),G=p([]),K=[{label:"完成",value:"1,0"},{label:"审核通过",value:"1,7"},{label:"审核失败",value:"1,8"},{label:"数据冻结",value:"1,9"},{label:"被甄别",value:"2,null"},{label:"配额满",value:"3,null"}],U=p([{prop:"projectClickId",label:"点击ID",sortable:!0,checked:!0},{prop:"beforeType",label:"变更前",sortable:!0,checked:!0},{prop:"afterType",label:"变更后",sortable:!0,checked:!0},{prop:"createTime",label:"创建时间",sortable:!0,checked:!0},{prop:"remark",label:"备注",sortable:!0,checked:!0},{prop:"createUserId",label:"操作人",sortable:!0,checked:!0}]),f=_e({page:1,limit:10,type:null,createUserId:""}),L=p([]);function Q(){R.value.showEdit()}function J(c){G.value=c}function W(){Object.assign(f,{type:null,createUserId:""}),g()}function X(c){A(c).then(()=>{f.limit=c,g()})}function z(c=1){M(c).then(()=>{f.page=c,g()})}async function g(){try{b.value=!0;const{data:c}=await Le.list(f);L.value=c.tenantUpdateRecordVOBuilders,_.value.total=+c.total,b.value=!1}catch{}finally{b.value=!1}}return ve(async()=>{const{data:c}=await be.getTenantStaffListData({});E.value=c,U.value.forEach(o=>{o.checked&&d.value.push(o.prop)}),g()}),(c,o)=>{const Y=u("el-input"),w=u("el-form-item"),Z=u("el-option"),ee=u("el-select"),B=Te,D=u("ElButton"),te=u("ElFormItem"),ae=u("el-form"),le=Ee,oe=u("ElDivider"),H=u("el-button"),ne=De,re=Se,se=xe,ue=u("el-row"),y=u("el-table-column"),i=u("el-text"),ie=u("el-tag"),ce=u("el-empty"),pe=u("el-table"),de=u("ElPagination"),fe=Ce,F=ge("loading");return N((l(),T("div",{class:ke({"absolute-container":x.value})},[a(fe,null,{default:t(()=>[a(le,{"show-toggle":!1},{default:t(({fold:e,toggle:k})=>[a(ae,{model:f,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[a(w,{label:""},{default:t(()=>[a(Y,{modelValue:f.createUserId,"onUpdate:modelValue":o[0]||(o[0]=m=>f.createUserId=m),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"操作人ID"},null,8,["modelValue"])]),_:1}),a(w,{label:""},{default:t(()=>[a(ee,{modelValue:f.type,"onUpdate:modelValue":o[1]||(o[1]=m=>f.type=m),"value-key":"",placeholder:"变更状态",clearable:"",filterable:""},{default:t(()=>[(l(),T(P,null,$(K,m=>a(Z,{key:m.value,label:m.label,value:m.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(te,null,{default:t(()=>[a(D,{type:"primary",onClick:o[2]||(o[2]=m=>z())},{icon:t(()=>[a(B,{name:"i-ep:search"})]),default:t(()=>[n(" 筛选 ")]),_:1}),a(D,{onClick:W},{icon:t(()=>[He]),default:t(()=>[n(" 重置 ")]),_:1}),a(D,{link:"",disabled:"",onClick:k},{icon:t(()=>[a(B,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[n(" "+S(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(oe,{"border-style":"dashed"}),a(ue,{gutter:24},{default:t(()=>[a(ne,null,{default:t(()=>[a(H,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:Q},{default:t(()=>[n(" 新增 ")]),_:1})]),_:1}),a(se,null,{default:t(()=>[a(H,{size:"default",onClick:o[3]||(o[3]=()=>{})},{default:t(()=>[n(" 导出 ")]),_:1}),a(re,{border:C.value,"onUpdate:border":o[4]||(o[4]=e=>C.value=e),tableAutoHeight:x.value,"onUpdate:tableAutoHeight":o[5]||(o[5]=e=>x.value=e),checkList:d.value,"onUpdate:checkList":o[6]||(o[6]=e=>d.value=e),columns:U.value,"onUpdate:columns":o[7]||(o[7]=e=>U.value=e),"line-height":I.value,"onUpdate:lineHeight":o[8]||(o[8]=e=>I.value=e),stripe:V.value,"onUpdate:stripe":o[9]||(o[9]=e=>V.value=e),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),N((l(),r(pe,{ref_key:"tableSortRef",ref:q,style:{"margin-top":"10px"},"row-key":"id",data:L.value,border:C.value,size:I.value,stripe:V.value,onSelectionChange:J},{empty:t(()=>[a(ce,{description:"暂无数据"})]),default:t(()=>[a(y,{align:"center",type:"selection"}),d.value.includes("projectClickId")?(l(),r(y,{key:0,prop:"projectClickId","show-overflow-tooltip":"",align:"center",label:"点击ID"})):s("",!0),d.value.includes("beforeType")?(l(),r(y,{key:1,prop:"beforeType","show-overflow-tooltip":"",align:"center",label:"变更前"},{default:t(({row:e})=>[e.beforeSurveyType===5&&e.beforeViceType===0?(l(),r(i,{key:0,type:"info",class:"mx-1"},{default:t(()=>[n("未完成")]),_:1})):s("",!0),e.beforeSurveyType===1&&e.beforeViceType===0?(l(),r(i,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):s("",!0),e.beforeSurveyType===1&&e.beforeViceType===7?(l(),r(i,{key:2,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):s("",!0),e.beforeSurveyType===1&&e.beforeViceType===8?(l(),r(i,{key:3,type:"warning",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):s("",!0),e.beforeSurveyType===1&&e.beforeViceType===9?(l(),r(i,{key:4,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):s("",!0),e.beforeSurveyType===2?(l(),r(i,{key:5,type:"danger",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):s("",!0),e.beforeSurveyType===3?(l(),r(i,{key:6,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):s("",!0),e.beforeViceType===13?(l(),r(i,{key:7,type:"success",class:"mx-1"},{default:t(()=>[n("和解")]),_:1})):s("",!0)]),_:1})):s("",!0),d.value.includes("afterType")?(l(),r(y,{key:2,prop:"afterType","show-overflow-tooltip":"",align:"center",label:"变更后"},{default:t(({row:e})=>[e.afterSurveyType===1&&e.afterViceType===0?(l(),r(i,{key:0,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):s("",!0),e.afterSurveyType===1&&e.afterViceType===7?(l(),r(i,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):s("",!0),e.afterSurveyType===1&&e.afterViceType===8?(l(),r(i,{key:2,type:"warning",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):s("",!0),e.afterSurveyType===1&&e.afterViceType===9?(l(),r(i,{key:3,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):s("",!0),e.afterSurveyType===2?(l(),r(i,{key:4,type:"danger",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):s("",!0),e.afterSurveyType===3?(l(),r(i,{key:5,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):s("",!0)]),_:1})):s("",!0),d.value.includes("createTime")?(l(),r(y,{key:3,prop:"createTime","show-overflow-tooltip":"",align:"center",label:"创建时间"},{default:t(({row:e})=>[a(ie,{effect:"plain",type:"info"},{default:t(()=>[n(S(v(j)(e.createTime)),1)]),_:2},1024)]),_:1})):s("",!0),d.value.includes("remark")?(l(),r(y,{key:4,prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"},{default:t(({row:e})=>[n(S(e.remark?e.remark:"-"),1)]),_:1})):s("",!0),d.value.includes("createUserId")?(l(),r(y,{key:5,prop:"createUserId","show-overflow-tooltip":"",align:"center",label:"操作人"},{default:t(({row:e})=>[(l(!0),T(P,null,$(E.value,k=>(l(),T("div",{key:k.id},[k.id===e.createUserId?(l(),r(i,{key:0},{default:t(()=>[n(S(k.name),1)]),_:2},1024)):s("",!0)]))),128))]),_:1})):s("",!0)]),_:1},8,["data","border","size","stripe"])),[[F,b.value]]),a(de,{"current-page":v(_).page,total:v(_).total,"page-size":v(_).size,"page-sizes":v(_).sizes,layout:v(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"]),a(Re,{onSuccess:g,ref_key:"editRef",ref:R},null,512),a(we,{ref_key:"detailRef",ref:O},null,512)]),_:1})],2)),[[F,b.value]])}}}),Me=ze(Fe,[["__scopeId","data-v-d6f486f1"]]);export{Me as default};
