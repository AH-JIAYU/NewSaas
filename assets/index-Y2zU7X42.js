
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as y,d as j,$ as b,n as h,a as m,o as g,b as C,f as u,w as r,v as n,g as f,i,e as E,j as k,ap as D,E as x,br as V,_ as A,aI as B,aJ as J,M as L}from"./index-Cjx6Hppb.js";/* empty css                      */const N={list:o=>y.post("callback/getProjectSurveyScreenList",o),childList:o=>y.post("callback/getProjectScreenMemberChildList",o),getDetail:o=>y.post("callback/getProjectSurveyScreenDetailList",o)},M=o=>(B("data-v-faa1ac1d"),o=o(),J(),o),O={class:"heade"},P={class:"title"},$=M(()=>n("div",{class:"tooltip"},[n("div",null,[n("div",{class:"label"},[n("span",{class:"red"},"红色")]),f(" : 正确答案 ")]),n("div",null,[n("div",{class:"label"},[n("span",{class:"spot"})]),f(" : 所选答案 ")])],-1)),z=j({__name:"index",setup(o,{expose:I}){const a=b({visible:!1,survey:null}),S=v=>{let e=[];return v.forEach(s=>{if(s.projectCorrectAnswerId.includes(",")){const d=s.projectCorrectAnswerId.split(",").map(c=>c.trim());e=e.concat(d)}else e.push(s.projectCorrectAnswerId.trim())}),e},w=async v=>{const e=await N.getDetail({id:v.id}),s=D(JSON.parse(e.data.projectJson));if(console.log(s,"projectJson"),!s)x.warning({message:"无详情数据",center:!0});else{console.log(s.pages,"projectJson.pages"),s.pages.forEach(c=>{c.elements.forEach(t=>{t.readOnly=!0;const p=e.data.projectSurveyScreenDetailInfoList.find(l=>l.projectProblemId===t.surveyId);if(p){if(t.type==="radiogroup"){const l=t.choices.filter(_=>p.projectAnswerId.includes(_.surveyId));t.defaultValue=l.map(_=>_.value)}t.type=="text"&&(t.defaultValue=p.answerValue)}})}),a.survey=new V.Model(JSON.stringify(s)),a.survey.showNavigationButtons=!1;const d=S(e.data.projectSurveyScreenDetailInfoList);a.survey.onUpdateChoiceItemCss.add(function(c,t){d.includes(t.item.jsonObj.surveyId)&&(t.css+=" choicesItemRed")}),a.visible=!0}};return h(async()=>{}),I({showEdit:w}),(v,e)=>{const s=A,d=m("el-tooltip"),c=m("SurveyComponent"),t=m("ElButton"),p=m("ElDrawer");return g(),C("div",null,[u(p,{modelValue:i(a).visible,"onUpdate:modelValue":e[2]||(e[2]=l=>i(a).visible=l),title:"",size:"80%","close-on-click-modal":!1,"destroy-on-close":""},{header:r(()=>[n("div",O,[n("div",P,[f(" 查看 "),u(d,{class:"tooltips",content:"",placement:"top",effect:"light"},{content:r(()=>[$]),default:r(()=>[u(s,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])])]),footer:r(()=>[u(t,{size:"large",onClick:e[0]||(e[0]=l=>i(a).visible=!1)},{default:r(()=>[f(" 取消 ")]),_:1}),u(t,{type:"primary",size:"large",onClick:e[1]||(e[1]=l=>i(a).visible=!1)},{default:r(()=>[f(" 确定 ")]),_:1})]),default:r(()=>[i(a).survey?(g(),E(c,{key:0,model:i(a).survey,style:{width:"100%"}},null,8,["model"])):k("",!0)]),_:1},8,["modelValue"])])}}}),q=L(z,[["__scopeId","data-v-faa1ac1d"]]),U=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{N as a,U as i,q};
