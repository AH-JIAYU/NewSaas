
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aK as ve,r as u,a5 as he,k as ke,a as n,p as ye,o as p,b as we,f as t,w as o,az as U,q as $,g as d,H as S,e as c,j as v,i as h,S as Ce,bb as Ne,E as Se,N as Ve,aM as Ge,aN as Ie,ap as Ee,aG as De,aH as Me,s as ze,aq as B,R as Le}from"./index-DntS7RPX.js";import{_ as Ue}from"./index.vue_vue_type_style_index_0_lang-DwqpRb3a.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-B1cVpbQK.js";import{s as xe}from"./apiLoading-I6-YY1Ko.js";import Fe from"./index-Bky-rjuT.js";import Te from"./index-DNWlbOuw.js";import{a as P}from"./survey_vipGroup-BQUM5pWP.js";import{u as He}from"./survey_vipGroup-BYmt5u-I.js";import"./survey_vip-BJUN3WOA.js";import"./survey_vip-oZAzKB_D.js";const Be=w=>(De("data-v-911d3d5d"),w=w(),Me(),w),Pe=Be(()=>ze("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Re=_e({name:"vipGroup",__name:"list",setup(w){const R=He(),{pagination:f,getParams:j,onSizeChange:A,onCurrentChange:K}=ve(),{format:q}=Ne(),C=u(!1),x=u([]);u();const V=u(),F=u(),G=u(!0),I=u(!1),E=u("default"),i=u([]),D=u(!1),M=u([{label:"会员组ID",prop:"memberGroupId",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组名称",prop:"memberGroupName",sortable:!0,disableCheck:!1,checked:!0},{label:"组长名称(ID)",prop:"groupLeaderMemberName",sortable:!0,disableCheck:!1,checked:!0},{label:"成员",prop:"memberNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"项目数",prop:"projectNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"创建时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0},{label:"组状态",prop:"groupStatus",sortable:!0,disableCheck:!1,checked:!0}]),r=he({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function Y(){V.value.showEdit()}function O(a){V.value.showEdit(a)}function Q(a){F.value.showEdit(a)}function k(){f.value.page=1,N()}function J(a){A(a).then(()=>N())}function b(a=1){K(a).then(()=>N())}async function N(){try{C.value=!0;const a={...j(),...r};r.time&&r.time.length&&(a.beginTime=r.time[0]||"",a.endTime=r.time[1]||"");const{data:e}=await P.list(a);x.value=e.getMemberGroupInfoList,f.value.total=e.total,C.value=!1}catch{}finally{C.value=!1}}function W(){Object.assign(r,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),N()}async function X(a,e){const y={memberGroupId:e,groupStatus:a},{status:g}=await xe(P.changestatus(y));g===1&&Se.success({message:"修改成功"}),R.GroupNameList=null,k()}return ke(()=>{M.value.forEach(a=>{a.checked&&i.value.push(a.prop)}),k()}),(a,e)=>{const y=n("el-input"),g=n("el-form-item"),T=n("el-option"),Z=n("el-select"),ee=n("el-date-picker"),H=Ve,z=n("ElButton"),te=n("ElFormItem"),oe=n("ElForm"),le=$e,ae=n("ElDivider"),L=n("el-button"),ne=Ue,re=Ge,se=Ie,ue=n("el-row"),m=n("el-table-column"),ie=n("el-link"),me=n("el-tag"),pe=n("ElSwitch"),de=n("el-empty"),ce=n("el-table"),fe=n("ElPagination"),be=Ee,ge=ye("loading");return p(),we("div",{class:Ce({"absolute-container":D.value})},[t(be,null,{default:o(()=>[t(le,{"show-toggle":!1},{default:o(({fold:l,toggle:_})=>[t(oe,{model:r,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[t(g,{label:""},{default:o(()=>[t(y,{modelValue:r.memberGroupId,"onUpdate:modelValue":e[0]||(e[0]=s=>r.memberGroupId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID",onKeydown:e[1]||(e[1]=U(s=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(g,{label:""},{default:o(()=>[t(y,{modelValue:r.memberGroupName,"onUpdate:modelValue":e[2]||(e[2]=s=>r.memberGroupName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称",onKeydown:e[3]||(e[3]=U(s=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),t(g,{label:""},{default:o(()=>[t(y,{modelValue:r.groupLeaderMemberName,"onUpdate:modelValue":e[4]||(e[4]=s=>r.groupLeaderMemberName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称",onKeydown:e[5]||(e[5]=U(s=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),$(t(g,{label:""},{default:o(()=>[t(Z,{modelValue:r.groupStatus,"onUpdate:modelValue":e[6]||(e[6]=s=>r.groupStatus=s),clearable:"",placeholder:"会员组状态",onChange:e[7]||(e[7]=s=>b())},{default:o(()=>[t(T,{label:"关闭",value:1}),t(T,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[B,!l]]),$(t(g,null,{default:o(()=>[t(ee,{modelValue:r.time,"onUpdate:modelValue":e[8]||(e[8]=s=>r.time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",onChange:e[9]||(e[9]=s=>b())},null,8,["modelValue"])]),_:2},1536),[[B,!l]]),t(te,null,{default:o(()=>[t(z,{type:"primary",onClick:e[10]||(e[10]=s=>b())},{icon:o(()=>[t(H,{name:"i-ep:search"})]),default:o(()=>[d(" 筛选 ")]),_:1}),t(z,{onClick:W},{icon:o(()=>[Pe]),default:o(()=>[d(" 重置 ")]),_:1}),t(z,{link:"",onClick:_},{icon:o(()=>[t(H,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[d(" "+S(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ae,{"border-style":"dashed"}),t(ue,null,{default:o(()=>[t(ne,null,{default:o(()=>[t(L,{type:"primary",size:"default",onClick:Y},{default:o(()=>[d(" 新增 ")]),_:1})]),_:1}),t(se,null,{default:o(()=>[t(L,{size:"default"},{default:o(()=>[d(" 导出 ")]),_:1}),t(re,{border:G.value,"onUpdate:border":e[11]||(e[11]=l=>G.value=l),tableAutoHeight:D.value,"onUpdate:tableAutoHeight":e[12]||(e[12]=l=>D.value=l),checkList:i.value,"onUpdate:checkList":e[13]||(e[13]=l=>i.value=l),columns:M.value,"onUpdate:columns":e[14]||(e[14]=l=>M.value=l),"line-height":E.value,"onUpdate:lineHeight":e[15]||(e[15]=l=>E.value=l),stripe:I.value,"onUpdate:stripe":e[16]||(e[16]=l=>I.value=l),style:{"margin-left":"12px"},onQueryData:k},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),$((p(),c(ce,{border:G.value,data:x.value,size:E.value,stripe:I.value},{empty:o(()=>[t(de,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[t(m,{align:"center",type:"selection"}),i.value.includes("memberGroupId")?(p(),c(m,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):v("",!0),i.value.includes("memberGroupName")?(p(),c(m,{key:1,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"})):v("",!0),i.value.includes("groupLeaderMemberName")?(p(),c(m,{key:2,align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:o(({row:l})=>[d(S(l.groupLeaderMemberName?l.groupLeaderMemberName:"-"),1)]),_:1})):v("",!0),i.value.includes("memberNumber")?(p(),c(m,{key:3,align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"})):v("",!0),i.value.includes("projectNumber")?(p(),c(m,{key:4,align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:o(({row:l})=>[t(ie,{type:"primary",onClick:_=>Q(l)},{default:o(()=>[d(S(l.projectNumber),1)]),_:2},1032,["onClick"])]),_:1})):v("",!0),i.value.includes("createTime")?(p(),c(m,{key:5,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:o(({row:l})=>[t(me,{effect:"plain",type:"info"},{default:o(()=>[d(S(h(q)(l.createTime)),1)]),_:2},1024)]),_:1})):v("",!0),i.value.includes("groupStatus")?(p(),c(m,{key:6,align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:o(({row:l})=>[t(pe,{modelValue:l.groupStatus,"onUpdate:modelValue":_=>l.groupStatus=_,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:_=>X(_,l.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):v("",!0),t(m,{align:"center",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:o(({row:l})=>[t(L,{size:"small",plain:"",type:"primary",onClick:_=>O(l)},{default:o(()=>[d(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ge,C.value]]),t(fe,{"current-page":h(f).page,total:h(f).total,"page-size":h(f).size,"page-sizes":h(f).sizes,layout:h(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Fe,{ref_key:"editRef",ref:V,onFetchData:k},null,512),t(Te,{ref_key:"checkRef",ref:F,onFetchData:k},null,512)],2)}}}),Ze=Le(Re,[["__scopeId","data-v-911d3d5d"]]);export{Ze as default};
