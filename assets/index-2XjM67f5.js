
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as Se,d as Ce,am as xe,aO as Ve,r as I,a5 as O,l as we,b as y,q as Le,o,e as v,g as n,w as t,j as a,az as C,s as x,F as Q,v as G,f as r,h as d,H as f,I as L,aN as De,t as p,k as s,S as Be,N as Ee,aQ as je,aR as Te,bc as Fe,ap as $e,aI as Ne,aJ as Pe,aq as D,R as Ue}from"./index-ClxkxBuo.js";import{_ as ze}from"./index-CUumA1gp.js";import{_ as Me}from"./index.vue_vue_type_style_index_0_lang-xYOpFn_y.js";import{_ as Re}from"./index.vue_vue_type_script_setup_true_lang-B4398pD_.js";import{u as Ke}from"./user_customer-BkziUpIB.js";import"./index-QM5dk693.js";import"./user_customer-CqORQ7BD.js";const He={list:V=>Se.post("callback/getMemberChildSurveyRecord",V)},J=V=>(Ne("data-v-1d32ac24"),V=V(),Pe(),V),Ae=J(()=>p("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),qe={class:"copyId tableSmall"},Oe={class:"id oneLine"},Qe={class:"copyId tableSmall"},Ge={class:"id oneLine"},Je={class:"tableBig oneLine"},Ze={class:"copyId tableSmall"},We={class:"id oneLine"},Xe={class:"copyId tableSmall"},Ye={key:0,class:"id oneLine"},et={key:1,class:"id"},tt={class:"copyId tableSmall"},lt={key:0,class:"id oneLine"},ot={key:1,class:"id"},at={class:"copyId tableSmall"},nt={key:0,class:"id oneLine"},rt={key:1,class:"id"},st={class:"copyId tableBig"},dt={class:"copyId tableSmall"},it={class:"id oneLine"},ut={class:"tableBig"},ct={class:"tableBig"},pt={class:"flex-c"},mt={style:{"margin-right":"4px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},yt=J(()=>p("g",{id:"Time (æ¶é´)"},[p("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),p("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ft=[yt],bt={key:0},_t=Ce({name:"memberSurveyRecords",__name:"index",setup(V){const Z=xe(),W=Ke(),{getParams:X,pagination:w,onSizeChange:Y,onCurrentChange:ee}=Ve(),E=I(!1),K=I([]),te=I(""),m=I([]),j=I(!0),T=I(!1),F=I("default"),$=I(!1),le=I(),N=I([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortable:!0,checked:!0},{prop:"supplierPrice",label:"供应商价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),c=O({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),P=O({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function oe(){c.pageNo=1,B()}function ae(_){Y(_).then(()=>B())}function b(_=1){ee(_).then(()=>B())}async function B(){try{E.value=!0;const _={...X(),...c},{data:l}=await He.list(_);K.value=l.memberChildSurveyRecordInfoList,le.value=l.currencyType,w.value.total=l.total,E.value=!1}catch{}finally{E.value=!1}}function ne(_){te.value=_}function re(){Object.assign(c,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),B()}return we(async()=>{P.customerList=await W.getCustomerList(),P.country=await Z.getCountry(),N.value.forEach(_=>{_.checked&&m.value.push(_.prop)}),B()}),(_,l)=>{const h=y("el-input"),g=y("el-form-item"),U=y("el-option"),z=y("el-select"),H=Ee,M=y("ElButton"),se=y("ElFormItem"),de=y("ElForm"),ie=Re,ue=y("ElDivider"),ce=Me,pe=y("el-button"),me=je,ye=Te,fe=y("el-row"),k=y("el-table-column"),S=ze,u=y("el-tag"),A=Fe,q=y("ElTableColumn"),be=y("el-text"),_e=y("el-empty"),ke=y("el-table"),ve=y("ElPagination"),ge=$e,Ie=Le("loading");return o(),v("div",{class:Be({"absolute-container":a($)})},[n(ge,null,{default:t(()=>[n(ie,{"show-toggle":!1},{default:t(({fold:e,toggle:he})=>[n(de,{model:a(c),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).projectId,"onUpdate:modelValue":l[0]||(l[0]=i=>a(c).projectId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:l[1]||(l[1]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).projectName,"onUpdate:modelValue":l[2]||(l[2]=i=>a(c).projectName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:l[3]||(l[3]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),n(g,{label:""},{default:t(()=>[n(z,{modelValue:a(c).surveySource,"onUpdate:modelValue":l[4]||(l[4]=i=>a(c).surveySource=i),clearable:"",filterable:"",placeholder:"会员类型",onChange:l[5]||(l[5]=i=>b())},{default:t(()=>[n(U,{label:"内部会员",value:1}),n(U,{label:"外部会员",value:2})]),_:1},8,["modelValue"])]),_:1}),n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).memberId,"onUpdate:modelValue":l[6]||(l[6]=i=>a(c).memberId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID",onKeydown:l[7]||(l[7]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),x(n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).memberChildId,"onUpdate:modelValue":l[8]||(l[8]=i=>a(c).memberChildId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID",onKeydown:l[9]||(l[9]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),x(n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).randomIdentityId,"onUpdate:modelValue":l[10]||(l[10]=i=>a(c).randomIdentityId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份",onKeydown:l[11]||(l[11]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),x(n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).tenantSupplierId,"onUpdate:modelValue":l[12]||(l[12]=i=>a(c).tenantSupplierId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:l[13]||(l[13]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),x(n(g,{label:""},{default:t(()=>[n(h,{modelValue:a(c).ip,"onUpdate:modelValue":l[14]||(l[14]=i=>a(c).ip=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址",onKeydown:l[15]||(l[15]=C(i=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),x(n(g,{label:""},{default:t(()=>[n(z,{modelValue:a(c).surveyStatus,"onUpdate:modelValue":l[16]||(l[16]=i=>a(c).surveyStatus=i),clearable:"",filterable:"",placeholder:"调查状态",onChange:l[17]||(l[17]=i=>b())},{default:t(()=>[(o(!0),v(Q,null,G(a(P).surveyStatusList,(i,R)=>(o(),r(U,{label:i,value:R+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),x(n(g,{label:""},{default:t(()=>[n(z,{modelValue:a(c).viceStatus,"onUpdate:modelValue":l[18]||(l[18]=i=>a(c).viceStatus=i),clearable:"",placeholder:"副状态",onChange:l[19]||(l[19]=i=>b())},{default:t(()=>[(o(!0),v(Q,null,G(a(P).viceStatusList,(i,R)=>(o(),r(U,{label:i,value:R+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),n(se,null,{default:t(()=>[n(M,{type:"primary",onClick:l[20]||(l[20]=i=>b())},{icon:t(()=>[n(H,{name:"i-ep:search"})]),default:t(()=>[d(" 筛选 ")]),_:1}),n(M,{onClick:re},{icon:t(()=>[Ae]),default:t(()=>[d(" 重置 ")]),_:1}),n(M,{link:"",onClick:he},{icon:t(()=>[n(H,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[d(" "+f(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),n(ue,{"border-style":"dashed"}),n(fe,null,{default:t(()=>[n(ce),n(ye,null,{default:t(()=>[n(pe,{size:"default"},{default:t(()=>[d(" 导出 ")]),_:1}),n(me,{border:a(j),"onUpdate:border":l[21]||(l[21]=e=>L(j)?j.value=e:null),tableAutoHeight:a($),"onUpdate:tableAutoHeight":l[22]||(l[22]=e=>L($)?$.value=e:null),checkList:a(m),"onUpdate:checkList":l[23]||(l[23]=e=>L(m)?m.value=e:null),columns:a(N),"onUpdate:columns":l[24]||(l[24]=e=>L(N)?N.value=e:null),"line-height":a(F),"onUpdate:lineHeight":l[25]||(l[25]=e=>L(F)?F.value=e:null),stripe:a(T),"onUpdate:stripe":l[26]||(l[26]=e=>L(T)?T.value=e:null),style:{"margin-left":"12px"},onQueryData:oe},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),x((o(),r(ke,{border:a(j),data:a(K),size:a(F),stripe:a(T),onSelectionChange:ne},{empty:t(()=>[n(_e,{image:a(De),"image-size":300},null,8,["image"])]),default:t(()=>[n(k,{align:"center",type:"selection"}),a(m).includes("id")?(o(),r(k,{key:0,align:"center",prop:"id",width:"180","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:t(({row:e})=>[p("div",qe,[p("div",Oe,"ID: "+f(e.id),1),n(S,{class:"copy",content:e.id},null,8,["content"])])]),_:1})):s("",!0),a(m).includes("surveySource")?(o(),r(k,{key:1,align:"left",prop:"memberId",width:"180","show-overflow-tooltip":"",label:"会员"},{default:t(({row:e})=>[e.surveySource===1?(o(),r(u,{key:0,effect:"dark",type:"primary"},{default:t(()=>[d("内部会员")]),_:1})):(o(),r(u,{key:1,effect:"dark",type:"warning"},{default:t(()=>[d("外部会员")]),_:1})),p("div",Qe,[p("div",Ge,"ID: "+f(e.memberId),1),e.memberId?(o(),r(S,{key:0,class:"copy",content:e.memberId},null,8,["content"])):s("",!0)])]),_:1})):s("",!0),a(m).includes("projectId")?(o(),r(k,{key:2,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目"},{default:t(({row:e})=>[p("div",Je,"名称: "+f(e.projectName),1),p("div",Ze,[p("div",We,"ID: "+f(e.projectId),1),e.projectId?(o(),r(S,{key:0,class:"copy",content:e.projectId},null,8,["content"])):s("",!0)])]),_:1})):s("",!0),a(m).includes("memberChildrenId")?(o(),r(k,{key:3,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID",width:"180"},{default:t(({row:e})=>[p("div",Xe,[e.memberChildrenId?(o(),v("span",Ye," ID: "+f(e.memberChildrenId),1)):(o(),v("span",et,"-")),e.memberChildrenId?(o(),r(S,{key:2,class:"copy",content:e.memberChildrenId},null,8,["content"])):s("",!0)])]),_:1})):s("",!0),a(m).includes("tenantSupplierId")?(o(),r(k,{key:4,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",width:"180",label:"供应商ID"},{default:t(({row:e})=>[p("div",tt,[e.tenantSupplierId?(o(),v("span",lt," ID: "+f(e.tenantSupplierId),1)):(o(),v("span",ot,"-")),e.tenantSupplierId?(o(),r(S,{key:2,class:"copy",content:e.tenantSupplierId},null,8,["content"])):s("",!0)])]),_:1})):s("",!0),a(m).includes("randomIdentityId")?(o(),r(k,{key:5,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",width:"180",label:"随机身份"},{default:t(({row:e})=>[p("div",at,[e.randomIdentityId?(o(),v("span",nt," ID: "+f(e.randomIdentityId),1)):(o(),v("span",rt,"-")),e.randomIdentityId?(o(),r(S,{key:2,class:"copy",content:e.randomIdentityId},null,8,["content"])):s("",!0)])]),_:1})):s("",!0),a(m).includes("customerShortName")?(o(),r(k,{key:6,align:"center",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"},{default:t(({row:e})=>[p("div",st,f(e.customerShortName),1)]),_:1})):s("",!0),a(m).includes("ipBelong")?(o(),r(k,{key:7,align:"center",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/国家"},{default:t(({row:e})=>[n(u,{type:"primary"},{default:t(()=>[d(f(e.ipBelong.split("/")[1]),1)]),_:2},1024),p("div",dt,[p("div",it,f(e.ipBelong.split("/")[0]),1),n(S,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):s("",!0),a(m).includes("allocationType")?(o(),r(k,{key:8,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:t(({row:e})=>[e.allocationType===1?(o(),r(u,{key:0,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:t(()=>[d("未分配")]),_:1})):s("",!0),e.allocationType===2?(o(),r(u,{key:1,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[d("供应商")]),_:1})):s("",!0),e.allocationType===3?(o(),r(u,{key:2,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[d("会员组")]),_:1})):s("",!0)]),_:1})):s("",!0),a(m).includes("doMoneyPrice")?(o(),r(k,{key:9,align:"left",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"价格"},{default:t(({row:e})=>[p("div",ut,[d("原价: "),n(A),d(f(e.doMoneyPrice||0),1)]),p("div",ct,[d("供应商价格: "),n(A),d(f(e.supplierPrice||0),1)])]),_:1})):s("",!0),a(m).includes("surveyTime")?(o(),r(k,{key:10,width:"120",align:"center",fixed:"right","show-overflow-tooltip":"",label:"调查时间"},{header:t(()=>[p("span",pt,[(o(),v("svg",mt,ft)),d(" 调查时间 ")])]),default:t(({row:e})=>[n(u,{effect:"plain",type:"info"},{default:t(()=>[d(f(e.surveyTime?e.surveyTime+"min":0)+"/ "+f(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):s("",!0),a(m).includes("surveyStatus")?(o(),r(q,{key:11,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"调查状态"},{default:t(({row:e})=>[e.surveyStatus===3?(o(),r(u,{key:0,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[d("配额满")]),_:1})):s("",!0),e.surveyStatus===1?(o(),r(u,{key:1,effect:"dark",style:{"background-color":"#379AFF",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[d("完成")]),_:1})):s("",!0),e.surveyStatus===2?(o(),r(u,{key:2,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[d("被甄别")]),_:1})):s("",!0),e.surveyStatus===4?(o(),r(u,{key:3,effect:"dark",style:{"background-color":"#05C9BE",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[d("安全终止")]),_:1})):s("",!0),e.surveyStatus===5?(o(),r(u,{key:4,effect:"dark",style:{"background-color":"#E1E1E1",border:"none"},class:"mx-1"},{default:t(()=>[d("未完成")]),_:1})):s("",!0)]),_:1})):s("",!0),a(m).includes("viceStatus")?(o(),r(q,{key:12,align:"center","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:t(({row:e})=>[e.viceStatus?(o(),v("div",bt,[e.viceStatus===1?(o(),r(u,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:t(()=>[d("待审")]),_:1})):s("",!0),e.viceStatus===2?(o(),r(u,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:t(()=>[d("免审")]),_:1})):s("",!0),e.viceStatus===3?(o(),r(u,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:t(()=>[d("过IR")]),_:1})):s("",!0),e.viceStatus===4?(o(),r(u,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:t(()=>[d("时间过短")]),_:1})):s("",!0),e.viceStatus===5?(o(),r(u,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:t(()=>[d("超时完成")]),_:1})):s("",!0),e.viceStatus===6?(o(),r(u,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:t(()=>[d("超量完成")]),_:1})):s("",!0),e.viceStatus===7?(o(),r(u,{key:6,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[d("审核成功")]),_:1})):s("",!0),e.viceStatus===8?(o(),r(u,{key:7,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[d("审核失败")]),_:1})):s("",!0),e.viceStatus===9?(o(),r(u,{key:8,effect:"dark",style:{"background-color":"#FB6868",border:"none"},class:"mx-1"},{default:t(()=>[d("数据冻结")]),_:1})):s("",!0),e.viceStatus===10?(o(),r(u,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:t(()=>[d("时间段过载")]),_:1})):s("",!0),e.viceStatus===11?(o(),r(u,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:t(()=>[d("IP不一致")]),_:1})):s("",!0),e.viceStatus===12?(o(),r(u,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:t(()=>[d("ID重复参与")]),_:1})):s("",!0),e.viceStatus===13?(o(),r(u,{key:12,effect:"dark",style:{"background-color":"#03C239",border:"none"},class:"mx-1"},{default:t(()=>[d("和解")]),_:1})):s("",!0)])):(o(),r(be,{key:1},{default:t(()=>[d("-")]),_:1}))]),_:1})):s("",!0)]),_:1},8,["border","data","size","stripe"])),[[Ie,a(E)]]),n(ve,{"current-page":a(w).page,total:a(w).total,"page-size":a(w).size,"page-sizes":a(w).sizes,layout:a(w).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ae,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),xt=Ue(_t,[["__scopeId","data-v-1d32ac24"]]);export{xt as default};
