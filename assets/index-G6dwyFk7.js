
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{s as F}from"./apiLoading-CTI0D1Bj.js";import{u as T}from"./survey_vipLevel-wuVZCDti.js";import{a as _}from"./survey_vip-CR_ax4tw.js";import{d as h,r as m,Z as b,a as s,o as c,e as L,w as a,f as i,g,i as o,b as A,t as D,F as U,A as M,E as O,L as Z}from"./index-C9n1rX8T.js";const j=h({__name:"index",emits:["queryData"],setup(z,{expose:y,emit:V}){const I=T(),w=V,n=m(!1),u=m(""),e=m(),d=m(),k=b({memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}]}),f=b({vipLevelList:[]}),x=async()=>{f.vipLevelList=await I.getLevelNameList()};async function C(r){if(!r)u.value="新增",e.value={};else{await x(),u.value="编辑";const{data:t}=await _.detail({memberId:r.memberId});e.value=t,e.value.countryType=e.value.subordinateCountryId==="343"?1:2}n.value=!0}function v(){d.value.resetFields(),n.value=!1}function N(){d.value.validate(async r=>{if(r){const{status:t}=await F(_.edit(e.value));t===1&&O.success({message:"修改成功",center:!0}),w("queryData"),v()}})}return y({showEdit:C}),(r,t)=>{const E=s("el-option"),R=s("el-select"),S=s("el-form-item"),q=s("el-form"),p=s("el-button"),B=s("el-dialog");return c(),L(B,{modelValue:o(n),"onUpdate:modelValue":t[1]||(t[1]=l=>M(n)?n.value=l:null),title:o(u),width:"600"},{footer:a(()=>[i(p,{onClick:v},{default:a(()=>[g(" 取消 ")]),_:1}),i(p,{type:"primary",onClick:N},{default:a(()=>[g(" 确定 ")]),_:1})]),default:a(()=>[i(q,{ref_key:"formRef",ref:d,model:o(e),rules:o(k),"label-width":"7rem",inline:!1},{default:a(()=>[i(S,{label:"会员等级",prop:"memberLevelId"},{default:a(()=>[i(R,{clearable:"",filterable:"",modelValue:o(e).memberLevelId,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).memberLevelId=l)},{default:a(()=>[(c(!0),A(U,null,D(o(f).vipLevelList,l=>(c(),L(E,{key:l.memberLevelId,value:l.memberLevelId,label:l.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),P=Z(j,[["__scopeId","data-v-5cc70030"]]);export{P as default};
