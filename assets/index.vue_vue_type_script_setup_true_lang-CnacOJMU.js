
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as F}from"./user_supplier-B2AunQKa.js";import{d as M,r as n,a as u,q as O,s as P,o as m,b as c,f as l,w as o,g as v,z as h,F as w,t as x,E as C}from"./index-D0u_a5jY.js";const A=M({__name:"index",emits:["fetch-data"],setup(j,{expose:I,emit:T}){const D=T,i=n(!1),d=n(!1),p=n(),_=n(""),b=n(),L=[{label:"加款",value:1},{label:"减款",value:2}],S=[{label:"待审金额",value:1},{label:"可用余额",value:2}],a=n({supplierId:null,operationType:null,type:null,difference:null,remark:""}),U=n({difference:[{required:!0,message:"请输入金额",trigger:"blur"}],remark:[{required:!0,message:"请输入说明",trigger:"blur"}]});async function E(r){i.value=!0,r?(_.value="编辑",b.value=JSON.parse(r),a.value.supplierId=b.value.tenantSupplierId):_.value="新增"}function f(){Object.assign(a.value,{supplierId:null,operationType:null,type:null,difference:null,remark:""}),i.value=!1}async function q(){p.value&&p.value.validate(async r=>{if(r)try{d.value=!0,(await F.getSupplierPlusMinusPaymentsList(a.value)).status===1?(d.value=!1,D("fetch-data"),C.success({message:"操作成功",center:!0}),f()):C.warning({message:"出现错误请联系管理人员",center:!0})}catch{}finally{d.value=!1}})}return I({showEdit:E}),(r,t)=>{const s=u("el-form-item"),y=u("el-option"),g=u("el-select"),V=u("el-input"),N=u("el-form"),k=u("el-button"),R=u("el-dialog"),B=O("loading");return P((m(),c("div",null,[l(R,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),title:"加减款","append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"35%",onClose:f},{footer:o(()=>[l(k,{onClick:f},{default:o(()=>[v(" 取消 ")]),_:1}),l(k,{type:"primary",onClick:q},{default:o(()=>[v(" 确定 ")]),_:1})]),default:o(()=>[l(N,{model:a.value,rules:U.value,ref_key:"formRef",ref:p,"label-width":"6.5625rem",inline:!1},{default:o(()=>[l(s,{label:"供应商ID"},{default:o(()=>[v(h(a.value.supplierId),1)]),_:1}),l(s,{label:"加减款"},{default:o(()=>[l(g,{modelValue:a.value.operationType,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.operationType=e),"value-key":"",placeholder:"请选择加减款",clearable:"",filterable:""},{default:o(()=>[(m(),c(w,null,x(L,e=>l(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"类型"},{default:o(()=>[l(g,{modelValue:a.value.type,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.type=e),"value-key":"",placeholder:"请选择类型",clearable:"",filterable:""},{default:o(()=>[(m(),c(w,null,x(S,e=>l(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"金额",prop:"difference"},{default:o(()=>[l(V,{modelValue:a.value.difference,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.difference=e)},null,8,["modelValue"])]),_:1}),l(s,{label:"说明",prop:"remark"},{default:o(()=>[l(V,{modelValue:a.value.remark,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.remark=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])),[[B,d.value]])}}});export{A as _};
