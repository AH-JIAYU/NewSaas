
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ee}from"./index-CiXkFC33.js";import{d as te,r,a3 as U,n as ae,a as i,o as d,b as p,f as s,w as o,y as u,g as _,i as l,e as h,F as x,t as C,z,A as b,j as S,p as L,aH as le,aI as oe,L as ne}from"./index-CIMs2gPi.js";import{a as se}from"./position_manage-yH8mngBM.js";import ie from"./index-lp_LLTHd.js";import"./index-IJaXvYHN.js";import"./department-CMp3x2mX.js";import"./configuration_role-1Hya_mf5.js";import"./tenant_role-CMS-2iOq.js";import"./configuration_manager-_IqQq99m.js";const N=v=>(le("data-v-ad8cd62c"),v=v(),oe(),v),re={key:0,style:{"margin-top":"-2.1875rem"}},de=N(()=>u("span",{class:"project-name"},"项目",-1)),ue={class:"project-content"},ce={style:{display:"flex"}},me={style:{"font-weight":"500"}},pe={style:{"margin-left":"10px"}},fe=N(()=>u("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),_e={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},ve=N(()=>u("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ge={class:"flex-c"},ye=te({__name:"index",emits:["userData"],setup(v,{expose:B,emit:E}){const c=r(!1),R=r([]);r([]),r();const a=r({type:1,tenantStaffList:[],roleList:[],title:"",project:[],form:{chargeUserId:null,chargeUserName:""}}),I=r("all"),j=r([]),q=U({page:1,limit:10,id:null,name:"",active:null}),D=U({page:1,limit:10,id:"",userName:"",active:null,departmentId:null,positionId:null}),$=U({chargeUserId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),m=r(!1);async function A(n,e,f){await F(),a.value.type=1,c.value=!0,R.value=[],a.value.title=e,a.value.invitationType=1,f&&(a.value.project=f)}const H=async n=>{if(n!=="all"){D.positionId=n;const e=await L.list(D);e.data&&(a.value.tenantStaffList=e.data.data)}else{const e=await L.getTenantStaffList();e.data&&(a.value.tenantStaffList=e.data)}},F=async()=>{const n=await L.getTenantStaffList();a.value.tenantStaffList=n.data};function M(){c.value=!1,V.value.resetFields()}const P=E,V=r();function G(){V.value.validate(n=>{if(n){let e="";e=a.value.tenantStaffList.find(k=>k.id===a.value.form.chargeUserId).userName;let w={chargeUserId:a.value.form.chargeUserId,chargeUserName:e,invitationType:a.value.invitationType};c.value=!1,P("userData",w)}})}const g=r([]),J=n=>{g.value=n};return ae(async()=>{const n=await se.list(q);n.data&&(j.value=n.data.data)}),B({showEdit:A}),(n,e)=>{const f=i("el-badge"),w=ee,k=i("el-collapse-item"),K=i("el-collapse"),T=i("el-radio-button"),O=i("el-radio-group"),Q=i("el-option"),y=i("el-button"),W=i("el-select"),X=i("el-form-item"),Y=i("ElForm"),Z=i("el-dialog");return d(),p("div",null,[s(Z,{modelValue:l(c),"onUpdate:modelValue":e[6]||(e[6]=t=>b(c)?c.value=t:null),"close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"30%",title:l(a).title,class:"userClass"},{footer:o(()=>[u("div",ge,[s(y,{onClick:M},{default:o(()=>[_(" 取消 ")]),_:1}),s(y,{type:"primary",onClick:G},{default:o(()=>[_(" 确认 ")]),_:1})])]),default:o(()=>[l(a).project.length!=0?(d(),p("div",re,[l(a).project.length>1?(d(),h(K,{key:0,modelValue:l(g),"onUpdate:modelValue":e[0]||(e[0]=t=>b(g)?g.value=t:null),onChange:J},{default:o(()=>[s(k,{name:"1"},{title:o(()=>[de,s(f,{value:l(a).project.length,max:99,class:"item"},null,8,["value"])]),default:o(()=>[u("div",ue,[(d(!0),p(x,null,C(l(a).project,t=>(d(),p("div",{key:t.id},[u("div",ce,[u("span",me,z(t.tenantName),1),u("span",pe,"ID:"+z(t.tenantId),1),s(w,{content:t.tenantId},null,8,["content"])])]))),128))])]),_:1})]),_:1},8,["modelValue"])):S("",!0)])):S("",!0),s(Y,{ref_key:"formRef",ref:V,rules:l($),model:l(a).form,"label-width":"100px"},{default:o(()=>[s(X,{label:"负责人",prop:"chargeUserId"},{default:o(()=>[s(W,{modelValue:l(a).form.chargeUserId,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).form.chargeUserId=t),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{header:o(()=>[s(O,{modelValue:l(I),"onUpdate:modelValue":e[1]||(e[1]=t=>b(I)?I.value=t:null),size:"large",style:{"max-width":"34.375rem"},onChange:H},{default:o(()=>[s(T,{label:"全部",value:"all"}),(d(!0),p(x,null,C(l(j),t=>(d(),h(T,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),empty:o(()=>[u("div",_e,[_(" 暂无数据 "),s(y,{type:"primary",link:"",onClick:e[3]||(e[3]=t=>m.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),ve]),_:1})])]),default:o(()=>[(d(!0),p(x,null,C(l(a).tenantStaffList,t=>(d(),h(Q,{key:t.id,label:t.userName,value:t.id},null,8,["label","value"]))),128)),s(y,{class:"buttonClass",onClick:e[2]||(e[2]=t=>m.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),fe]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),l(m)?(d(),h(ie,{key:1,modelValue:l(m),"onUpdate:modelValue":e[5]||(e[5]=t=>b(m)?m.value=t:null),onSuccess:F},null,8,["modelValue"])):S("",!0)]),_:1},8,["modelValue","title"])])}}}),Se=ne(ye,[["__scopeId","data-v-ad8cd62c"]]);export{Se as default};
