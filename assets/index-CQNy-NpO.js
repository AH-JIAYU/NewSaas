
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as ee}from"./index-D0PKhAij.js";import{d as te,r,Z as L,n as ae,a as i,o as d,b as p,f as s,w as o,y as u,g as _,i as l,e as h,F as S,t as C,z as E,A as I,j,p as x,aH as le,aI as oe,L as ne}from"./index-Dz_36XCL.js";import{a as se}from"./position_manage-Tk4Dcghi.js";import ie from"./index-DtqzNSys.js";import"./index-DD0MsCIX.js";import"./clipboard-BFIGy_iA.js";import"./department-DbzQhBCO.js";import"./configuration_role-5S-ZA2iY.js";import"./tenant_role-Bn37hOHf.js";import"./configuration_manager-BGuQVeKt.js";const N=v=>(le("data-v-08d79167"),v=v(),oe(),v),re={key:0,style:{"margin-top":"-2.1875rem"}},de=N(()=>u("span",{class:"project-name"},"项目",-1)),ue={class:"project-content"},ce={style:{display:"flex"}},me={style:{"font-weight":"500"}},pe={style:{"margin-left":"10px"}},fe=N(()=>u("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),_e={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},ve=N(()=>u("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),ge={class:"flex-c"},ye=te({__name:"index",emits:["userData"],setup(v,{expose:R,emit:q}){const f=r(!1),O=r([]);r([]),r();const a=r({type:1,tenantStaffList:[],roleList:[],title:"",project:[],form:{chargeUserId:null,chargeUserName:""}}),b=r("all"),D=r([]),F=L({page:1,limit:10,id:null,name:"",active:null}),U=L({page:1,limit:10,id:"",userName:"",active:null,departmentId:null,positionId:null}),$=L({chargeUserId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),c=r(!1);async function A(n,e,m){a.value.form.chargeUserId=m[0].userId,await T(),a.value.type=1,f.value=!0,O.value=[],a.value.title=e,a.value.invitationType=1,m&&(a.value.project=m)}const H=async n=>{if(n!=="all"){U.positionId=n;const e=await x.list(U);e.data&&(a.value.tenantStaffList=e.data.data)}else{const e=await x.getTenantStaffList();e.data&&(a.value.tenantStaffList=e.data)}},T=async()=>{const n=await x.getTenantStaffList();a.value.tenantStaffList=n.data};function z(){f.value=!1,V.value.resetFields(),Object.assign(a.value,{type:1,tenantStaffList:[],roleList:[],title:"",project:[],form:{chargeUserId:null,chargeUserName:""}}),Object.assign(U,{page:1,limit:10,id:"",userName:"",active:null,departmentId:null,positionId:null}),Object.assign(F,{page:1,limit:10,id:null,name:"",active:null})}const M=q,V=r();function P(){V.value.validate(n=>{if(n){let e="";e=a.value.tenantStaffList.find(w=>w.id===a.value.form.chargeUserId).userName;let k={chargeUserId:a.value.form.chargeUserId,chargeUserName:e,invitationType:a.value.invitationType};z(),M("userData",k)}})}const g=r([]),Z=n=>{g.value=n};return ae(async()=>{const n=await se.list(F);n.data&&(D.value=n.data.data)}),R({showEdit:A}),(n,e)=>{const m=i("el-badge"),k=ee,w=i("el-collapse-item"),G=i("el-collapse"),B=i("el-radio-button"),J=i("el-radio-group"),K=i("el-option"),y=i("el-button"),Q=i("el-select"),W=i("el-form-item"),X=i("ElForm"),Y=i("el-dialog");return d(),p("div",null,[s(Y,{modelValue:l(f),"onUpdate:modelValue":e[6]||(e[6]=t=>I(f)?f.value=t:null),"close-on-click-modal":!1,"destroy-on-close":"",draggable:"",width:"30%",title:l(a).title,class:"userClass"},{footer:o(()=>[u("div",ge,[s(y,{onClick:z},{default:o(()=>[_(" 取消 ")]),_:1}),s(y,{type:"primary",onClick:P},{default:o(()=>[_(" 确认 ")]),_:1})])]),default:o(()=>[l(a).project.length!=0?(d(),p("div",re,[l(a).project.length>1?(d(),h(G,{key:0,modelValue:l(g),"onUpdate:modelValue":e[0]||(e[0]=t=>I(g)?g.value=t:null),onChange:Z},{default:o(()=>[s(w,{name:"1"},{title:o(()=>[de,s(m,{value:l(a).project.length,max:99,class:"item"},null,8,["value"])]),default:o(()=>[u("div",ue,[(d(!0),p(S,null,C(l(a).project,t=>(d(),p("div",{key:t.id},[u("div",ce,[u("span",me,E(t.tenantName),1),u("span",pe,"ID:"+E(t.tenantId),1),s(k,{content:t.tenantId},null,8,["content"])])]))),128))])]),_:1})]),_:1},8,["modelValue"])):j("",!0)])):j("",!0),s(X,{ref_key:"formRef",ref:V,rules:l($),model:l(a).form,style:{"margin-top":"0.625rem"}},{default:o(()=>[s(W,{label:"负责人",prop:"chargeUserId"},{default:o(()=>[s(Q,{modelValue:l(a).form.chargeUserId,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).form.chargeUserId=t),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{header:o(()=>[s(J,{modelValue:l(b),"onUpdate:modelValue":e[1]||(e[1]=t=>I(b)?b.value=t:null),size:"large",style:{"max-width":"34.375rem"},onChange:H},{default:o(()=>[s(B,{label:"全部",value:"all"}),(d(!0),p(S,null,C(l(D),t=>(d(),h(B,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),empty:o(()=>[u("div",_e,[_(" 暂无数据 "),s(y,{type:"primary",link:"",onClick:e[3]||(e[3]=t=>c.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),ve]),_:1})])]),default:o(()=>[(d(!0),p(S,null,C(l(a).tenantStaffList,t=>(d(),h(K,{key:t.id,label:t.userName,value:t.id},null,8,["label","value"]))),128)),s(y,{class:"buttonClass",onClick:e[2]||(e[2]=t=>c.value=!0),size:"small"},{default:o(()=>[_(" 快捷新增 "),fe]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),l(c)?(d(),h(ie,{key:1,modelValue:l(c),"onUpdate:modelValue":e[5]||(e[5]=t=>I(c)?c.value=t:null),onSuccess:T},null,8,["modelValue"])):j("",!0)]),_:1},8,["modelValue","title"])])}}}),je=ne(ye,[["__scopeId","data-v-08d79167"]]);export{je as default};
