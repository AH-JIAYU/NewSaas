
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as B,$ as M,r as n,X as N,n as $,a2 as P,a as b,o as u,b as h,f as _,w as f,g as z,N as T,e as g,F as E,t as F,y,j,z as H,an as x,_ as G,aG as X,aH as q,L as J}from"./index-Cz5UE9vN.js";import K from"./index-BMSHk078.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-G_isgKsi.js";import{u as Q}from"./projectManagement_list-C3sHqkDv.js";import"./user_customer-B7fbLmR8.js";import"./user_customer-CTsyL78Z.js";import"./file-M6hYfa0N.js";import"./index-Bti7ZvB5.js";import"./zh_Hans-6qcXd-ZR.js";import"./zh_Hans-B39mJ-rS.js";import"./projectManagement-Dypg3-u3.js";import"./index.vue_vue_type_script_setup_true_lang-DAjGnpwg.js";import"./index.vue_vue_type_script_setup_true_lang-3rLi8agS.js";import"./index-DUVIFTfS.js";import"./index-DzXv437s.js";import"./department-BrwL_seQ.js";import"./position_manage-CsgAeDSs.js";import"./configuration_role-BOiAkjfC.js";import"./tenant_role-BIWVdrHC.js";import"./configuration_manager-RgytX7IH.js";import"./configuration_siteSetting-B9v6M4ET.js";import"./configuration_site_setting-BgFJHKzH.js";import"./apiLoading-BAvYL5Y_.js";import"./stagedData-CWMXFie1.js";const W=r=>(X("data-v-43719580"),r=r(),q(),r),Y=W(()=>y("div",{style:{float:"right",position:"sticky",top:"19px",width:"70%","z-index":"1000",display:"flex","justify-content":"start","align-items":"start"}},null,-1)),Z=B({__name:"index",props:{leftTabsData:Array,validateTopTabs:Array,validateAll:Array,title:String},emits:["validate"],setup(r,{expose:L,emit:k}){const S=Q(),s=r,R=k,A=M("currentProjectTimeline"),V=n(),e=n(s.leftTabsData),C=n(s.validateTopTabs),d=n(),I=n(0),t=n(0);function w(){const{projectId:a,parentId:o,name:p,projectIdentification:c,clientId:m,countryIdList:v,uidUrl:i,...l}=x(e.value[0]);e.value[t.value].projectId&&(l.projectId=e.value[t.value].projectId,l.parentId=e.value[t.value].parentId),d.value[t.value].getUpLoad(l.descriptionUrl),e.value.splice(t.value,1,l)}function D(){t.value=++I.value;const{projectId:a,...o}=x(S.initialTopTabsData);e.value.push(o)}function U(a){e.value.splice(a,1),C.value.splice(a,1),t.value>=e.value.length&&(t.value=Math.max(0,e.value.length-1),I.value=Math.max(0,e.value.length-1))}return N(()=>t.value,(a,o)=>{s.validateAll.reduce((c,m,v)=>(m==="rejected"&&c.push(v),c),[]).includes(o)&&R("validate"),A(e.value[t.value].releaseTime)}),$(()=>{for(let a=0;a<d.value.length;a++)d.value[a].getUpLoad(e.value[a].descriptionUrl)}),e.value.forEach((a,o)=>{const p=n(null);P(`formRef${o}`,p)}),L({activeLeftTab:t}),(a,o)=>{const p=b("el-button"),c=G,m=b("el-tab-pane"),v=b("el-tabs");return u(),h("div",null,[_(p,{class:T((s.title==="新增","button")),disabled:e.value.length>29||s.title==="编辑"&&e.value[0].parentId!=="0",onClick:o[0]||(o[0]=i=>D())},{default:f(()=>[z(" 新增 ")]),_:1},8,["class","disabled"]),e.value.length?(u(),g(v,{key:0,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=i=>t.value=i),"tab-position":"left",onTabRemove:U,class:T(s.title==="新增"?"":"editHideCloseButton")},{default:f(()=>[(u(!0),h(E,null,F(e.value,(i,l)=>(u(),g(m,{key:l,style:{position:"relative"},closable:e.value.length!==1,name:l},{label:f(()=>[y("div",{class:T(["flex-c",s.validateAll[l]&&s.validateAll[l]==="rejected"?"validateRejected":""])},[l==0?(u(),g(c,{key:0,style:{"margin-right":"5px"},name:"main"})):j("",!0),y("span",null,H(i.name||"项目名称"),1)],2)]),default:f(()=>[Y,_(K,{ref_for:!0,ref_key:"topTabsRef",ref:d,"left-tab":i,"tab-index":l,onSyncProject:w},null,8,["left-tab","tab-index"])]),_:2},1032,["closable","name"]))),128)),_(O,{ref_key:"settingsRef",ref:V},null,512)]),_:1},8,["modelValue","class"])):j("",!0)])}}}),xe=J(Z,[["__scopeId","data-v-43719580"]]);export{xe as default};
