
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{e as R}from"./index-CTvaxTKF.js";import{g as q,a as M}from"./zh_Hans-CvuM5HT7.js";import{z as U}from"./zh_Hans-B39mJ-rS.js";import{x as p,d as j,r as m,k as B,E as v,a as r,p as I,q as L,i as t,o as _,b,f as a,w as u,F as O,t as P,R as S}from"./index-DNJfIwMj.js";const g={list:o=>p.post("notice/getNotice",o),create:o=>p.post("notice/insertNotice",o),edit:o=>p.post("notice/updateNotice",o),delete:o=>p.post("notice/deleteNotice",o)},H=j({__name:"index",props:["id","row"],setup(o,{expose:x}){const f=o,y=[{label:"公告",value:1},{label:"常见问题",value:2},{label:"帮助",value:3}],s=m(!1),i=m(),e=m({id:f.id,title:"",type:"",text:"",top:!1}),V=m({title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),h=[q({locale:M})];function k(d){e.value.text=d}B(()=>{e.value.id!==""&&w()});function w(){s.value=!0,e.value=f.row,s.value=!1}return x({submit(){return new Promise(d=>{e.value.id===""?i.value&&i.value.validate(l=>{l&&(delete e.value.id,s.value=!0,g.create(e.value).then(()=>{s.value=!1,v.success({message:"新增成功",center:!0}),d()}))}):i.value&&i.value.validate(l=>{l&&(s.value=!0,g.edit(e.value).then(()=>{s.value=!1,v.success({message:"编辑成功",center:!0}),d()}))})})}}),(d,l)=>{const C=r("el-input"),c=r("el-form-item"),E=r("el-option"),F=r("el-select"),N=r("el-checkbox"),z=r("ElForm"),D=I("loading");return L((_(),b("div",null,[a(z,{ref_key:"formRef",ref:i,model:t(e),rules:t(V),"label-width":"120px","label-suffix":"："},{default:u(()=>[a(c,{label:"标题",prop:"title"},{default:u(()=>[a(C,{modelValue:t(e).title,"onUpdate:modelValue":l[0]||(l[0]=n=>t(e).title=n),placeholder:"请输入标题",clearable:"",onChange:l[1]||(l[1]=()=>{})},null,8,["modelValue"])]),_:1}),a(c,{label:"类型",prop:"type"},{default:u(()=>[a(F,{modelValue:t(e).type,"onUpdate:modelValue":l[2]||(l[2]=n=>t(e).type=n),"value-key":"",placeholder:"类型",clearable:"",filterable:""},{default:u(()=>[(_(),b(O,null,P(y,n=>a(E,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"内容"},{default:u(()=>[a(t(R),{class:"editor",value:t(e).text,plugins:h,locale:t(U),onChange:k},null,8,["value","locale"])]),_:1}),a(c,{label:""},{default:u(()=>[a(N,{modelValue:t(e).top,"onUpdate:modelValue":l[3]||(l[3]=n=>t(e).top=n),label:"置顶",size:"large"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,t(s)]])}}}),T=S(H,[["__scopeId","data-v-bb02a4df"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{T as D,g as a,K as i};
