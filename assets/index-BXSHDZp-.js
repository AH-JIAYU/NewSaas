
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aN as ve,r as I,a3 as q,l as ye,a as m,al as Ie,o as u,b as L,f as o,w as t,i as l,am as v,F as E,n as z,e as i,g as p,D as s,G as k,j as c,Q as ge,L as Se,aP as he,aQ as Ve,ak as ke,aK as Ce,aL as Le,C as Pe,aE as g,P as Ue}from"./index-QP0aXqDP.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-D4iYxxn_.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-oSrk-yCR.js";import{a as Te}from"./record_memberSurveyRecords-ofjP2PQi.js";import{u as we}from"./user_customer-CJkfH7U5.js";import"./user_customer-BS2pTYOm.js";const Ne=P=>(Ce("data-v-45079e08"),P=P(),Le(),P),Me=Ne(()=>Pe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=_e({name:"RecordSurveyIndex",__name:"index",setup(P){const G=we(),{getParams:K,pagination:V,onSizeChange:O,onCurrentChange:J}=ve(),x=I(!1),$=I([]),W=I(""),d=I([]),U=I(!0),j=I(!1),D=I("default"),T=I(!1),B=I(),w=I([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),n=q({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),S=q({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function X(){n.pageNo=1,C()}function Y(_){O(_).then(()=>C())}function R(_=1){J(_).then(()=>C())}async function C(){x.value=!0;const _={...K(),...n},{data:a}=await Te.list(_);$.value=a.memberChildSurveyRecordInfoList,B.value=a.currencyType,V.value.total=a.total,x.value=!1}function Z(_){W.value=_}function ee(){Object.assign(n,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),C()}return ye(async()=>{S.customerList=await G.getCustomerList(),w.value.forEach(_=>{_.checked&&d.value.push(_.prop)}),C()}),(_,a)=>{const y=m("el-input"),b=m("el-form-item"),N=m("el-option"),M=m("el-select"),H=Se,F=m("ElButton"),le=m("ElFormItem"),te=m("ElForm"),ae=De,oe=m("ElDivider"),re=je,ne=m("el-button"),ue=he,ie=Ve,se=m("el-row"),f=m("el-table-column"),A=m("el-text"),Q=m("ElTableColumn"),de=m("el-empty"),pe=m("el-table"),me=m("ElPagination"),ce=ke,be=Ie("loading");return u(),L("div",{class:ge({"absolute-container":l(T)})},[o(ce,null,{default:t(()=>[o(ae,{"show-toggle":!1},{default:t(({fold:e,toggle:fe})=>[o(te,{model:l(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).projectId,"onUpdate:modelValue":a[0]||(a[0]=r=>l(n).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).projectName,"onUpdate:modelValue":a[1]||(a[1]=r=>l(n).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),v(o(b,{label:""},{default:t(()=>[o(M,{modelValue:l(n).surveyStatus,"onUpdate:modelValue":a[2]||(a[2]=r=>l(n).surveyStatus=r),clearable:"",placeholder:"会员类型"},{default:t(()=>[(u(!0),L(E,null,z(l(S).memberType,(r,h)=>(u(),i(N,{label:r,value:h+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[g,!e]]),o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).memberId,"onUpdate:modelValue":a[3]||(a[3]=r=>l(n).memberId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).memberChildId,"onUpdate:modelValue":a[4]||(a[4]=r=>l(n).memberChildId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).randomIdentityId,"onUpdate:modelValue":a[5]||(a[5]=r=>l(n).randomIdentityId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).memberId,"onUpdate:modelValue":a[6]||(a[6]=r=>l(n).memberId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"点击ID"},null,8,["modelValue"])]),_:1}),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).tenantSupplierId,"onUpdate:modelValue":a[7]||(a[7]=r=>l(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).tenantSupplierId,"onUpdate:modelValue":a[8]||(a[8]=r=>l(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"客户简称"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(M,{modelValue:l(n).surveyStatus,"onUpdate:modelValue":a[9]||(a[9]=r=>l(n).surveyStatus=r),clearable:"",placeholder:"分配类型"},{default:t(()=>[(u(!0),L(E,null,z(l(S).allocationTypeList,(r,h)=>(u(),i(N,{label:r,value:h+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).ip,"onUpdate:modelValue":a[10]||(a[10]=r=>l(n).ip=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(y,{modelValue:l(n).tenantSupplierId,"onUpdate:modelValue":a[11]||(a[11]=r=>l(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"所属国家"},null,8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(M,{modelValue:l(n).surveyStatus,"onUpdate:modelValue":a[12]||(a[12]=r=>l(n).surveyStatus=r),clearable:"",placeholder:"调查状态"},{default:t(()=>[(u(!0),L(E,null,z(l(S).surveyStatusList,(r,h)=>(u(),i(N,{label:r,value:h+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[g,!e]]),v(o(b,{label:""},{default:t(()=>[o(M,{modelValue:l(n).surveyStatus,"onUpdate:modelValue":a[13]||(a[13]=r=>l(n).surveyStatus=r),clearable:"",placeholder:"副状态"},{default:t(()=>[(u(!0),L(E,null,z(l(S).surveyStatusList,(r,h)=>(u(),i(N,{label:r,value:h+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[g,!e]]),o(le,null,{default:t(()=>[o(F,{type:"primary",onClick:a[14]||(a[14]=r=>R())},{icon:t(()=>[o(H,{name:"i-ep:search"})]),default:t(()=>[p(" 筛选 ")]),_:1}),o(F,{onClick:ee},{icon:t(()=>[Me]),default:t(()=>[p(" 重置 ")]),_:1}),o(F,{link:"",onClick:fe},{icon:t(()=>[o(H,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[p(" "+s(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(oe,{"border-style":"dashed"}),o(se,null,{default:t(()=>[o(re),o(ie,null,{default:t(()=>[o(ne,{size:"default"},{default:t(()=>[p(" 导出 ")]),_:1}),o(ue,{border:l(U),"onUpdate:border":a[15]||(a[15]=e=>k(U)?U.value=e:null),tableAutoHeight:l(T),"onUpdate:tableAutoHeight":a[16]||(a[16]=e=>k(T)?T.value=e:null),checkList:l(d),"onUpdate:checkList":a[17]||(a[17]=e=>k(d)?d.value=e:null),columns:l(w),"onUpdate:columns":a[18]||(a[18]=e=>k(w)?w.value=e:null),"line-height":l(D),"onUpdate:lineHeight":a[19]||(a[19]=e=>k(D)?D.value=e:null),stripe:l(j),"onUpdate:stripe":a[20]||(a[20]=e=>k(j)?j.value=e:null),style:{"margin-left":"12px"},onQueryData:X},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),v((u(),i(pe,{border:l(U),data:l($),size:l(D),stripe:l(j),onSelectionChange:Z},{empty:t(()=>[o(de,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[o(f,{align:"center",type:"selection"}),l(d).includes("id")?(u(),i(f,{key:0,align:"center",prop:"id","show-overflow-tooltip":"",label:"点击ID"},{default:t(({row:e})=>[p(s(e.id?e.id:"-"),1)]),_:1})):c("",!0),l(d).includes("surveySource")?(u(),i(f,{key:1,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员类型"},{default:t(({row:e})=>[p(s(e.surveySource===1?"内部会员":"外部会员"),1)]),_:1})):c("",!0),l(d).includes("memberChildrenId")?(u(),i(f,{key:2,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID"},{default:t(({row:e})=>[p(s(e.memberChildrenId?e.memberChildrenId:"-"),1)]),_:1})):c("",!0),l(d).includes("memberId")?(u(),i(f,{key:3,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"},{default:t(({row:e})=>[p(s(e.memberId?e.memberId:"-"),1)]),_:1})):c("",!0),l(d).includes("randomIdentityId")?(u(),i(f,{key:4,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:t(({row:e})=>[p(s(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):c("",!0),l(d).includes("tenantSupplierId")?(u(),i(f,{key:5,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:t(({row:e})=>[p(s(e.tenantSupplierId?e.tenantSupplierId:"-"),1)]),_:1})):c("",!0),l(d).includes("projectId")?(u(),i(f,{key:6,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):c("",!0),l(d).includes("projectName")?(u(),i(f,{key:7,align:"center",prop:"projectName",label:"项目名称/客户简称"},{default:t(({row:e})=>[p(s(e.projectName?e.projectName:"-")+"/"+s(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):c("",!0),l(d).includes("allocationType")?(u(),i(f,{key:8,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:t(({row:e})=>[p(s(l(S).allocationTypeList[e.allocationType-1]),1)]),_:1})):c("",!0),l(d).includes("price")?(u(),i(f,{key:9,align:"center",prop:"h","show-overflow-tooltip":"",label:"子会员价/供应商价/原价"},{default:t(({row:e})=>[l(B)===1?(u(),i(A,{key:0},{default:t(()=>[p(s(e.memberChildPrice?e.memberChildPrice+"$":0)+"/ "+s(e.supplierPrice?e.supplierPrice+"$":0)+"/ "+s(e.doMoneyPrice?e.doMoneyPrice+"$":0),1)]),_:2},1024)):c("",!0),l(B)===2?(u(),i(A,{key:1},{default:t(()=>[p(s(e.memberChildPrice?e.memberChildPrice+"￥":0)+"/ "+s(e.supplierPrice?e.supplierPrice+"￥":0)+"/ "+s(e.doMoneyPrice?e.doMoneyPrice+"￥":0),1)]),_:2},1024)):c("",!0)]),_:1})):c("",!0),l(d).includes("ipBelong")?(u(),i(f,{key:10,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):c("",!0),l(d).includes("surveyTime")?(u(),i(f,{key:11,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:t(({row:e})=>[p(s(e.surveyTime?e.surveyTime+"min":0)+"/ "+s(e.projectTime?e.projectTime+"min":0),1)]),_:1})):c("",!0),l(d).includes("surveyStatus")?(u(),i(Q,{key:12,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:t(({row:e})=>[p(s(l(S).surveyStatusList[e.surveyStatus-1]),1)]),_:1})):c("",!0),l(d).includes("viceStatus")?(u(),i(Q,{key:13,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:t(({row:e})=>[p(s(l(S).viceStatusList[e.viceStatus-1]?l(S).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):c("",!0)]),_:1},8,["border","data","size","stripe"])),[[be,l(x)]]),o(me,{"current-page":l(V).page,total:l(V).total,"page-size":l(V).size,"page-sizes":l(V).sizes,layout:l(V).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=Ue(Ee,[["__scopeId","data-v-45079e08"]]);export{He as default};
