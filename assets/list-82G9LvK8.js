
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aK as ve,r as _,a1 as H,n as ye,a as c,an as ge,o as r,b as U,f as a,w as l,i as t,ak as h,F as A,p as G,e as i,g as d,B as p,C as I,j as m,O as he,J as Ie,aM as ke,aN as Se,aj as Ce,aH as Ne,aI as Ve,A as Le,al as C,N as je}from"./index-YllKKoVL.js";import{_ as Pe}from"./index.vue_vue_type_style_index_0_lang-CrFHFB6L.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-IRDuukXw.js";import{a as Te}from"./record_memberSurveyRecords-Cvtgpgvs.js";import{u as ze}from"./user_customer-CyNc_Rtk.js";import"./user_customer-Cr8CFRF1.js";const Ee=N=>(Ne("data-v-f3317e2f"),N=N(),Ve(),N),Ue=Ee(()=>Le("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),De=_e({name:"RecordSurveyIndex",__name:"list",setup(N){const q=ze(),{getParams:O,pagination:g,onSizeChange:J,onCurrentChange:K}=ve(),T=_(!1),D=_([]),Q=_(""),u=_([]),V=_(!0),L=_(!1),j=_("default"),P=_(!1),z=_(),w=_([{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),s=H({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),v=H({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function W(){s.pageNo=1,k()}function X(b){J(b).then(()=>k())}function M(b=1){K(b).then(()=>k())}async function k(){T.value=!0;const b={...O(),...s},{data:o}=await Te.list(b);D.value=o.memberChildSurveyRecordInfoList,z.value=o.currencyType,g.value.total=o.total,T.value=!1}function Y(b){Q.value=b}function Z(){Object.assign(s,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),k()}return ye(async()=>{v.customerList=await q.getCustomerList(),w.value.forEach(b=>{b.checked&&u.value.push(b.prop)}),k()}),(b,o)=>{const S=c("el-input"),y=c("el-form-item"),B=c("el-option"),x=c("el-select"),F=Ie,E=c("ElButton"),ee=c("ElFormItem"),te=c("ElForm"),le=we,oe=c("ElDivider"),ae=Pe,ne=c("el-button"),re=ke,se=Se,ie=c("el-row"),f=c("el-table-column"),$=c("el-text"),R=c("ElTableColumn"),ue=c("el-empty"),ce=c("el-table"),pe=c("ElPagination"),de=Ce,me=ge("loading");return r(),U("div",{class:he({"absolute-container":t(P)})},[a(de,null,{default:l(()=>[a(le,{"show-toggle":!1},{default:l(({fold:e,toggle:be})=>[a(te,{model:t(s),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[a(y,{label:""},{default:l(()=>[a(S,{modelValue:t(s).memberId,"onUpdate:modelValue":o[0]||(o[0]=n=>t(s).memberId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),h(a(y,{label:""},{default:l(()=>[a(S,{modelValue:t(s).randomIdentityId,"onUpdate:modelValue":o[1]||(o[1]=n=>t(s).randomIdentityId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),a(y,{label:""},{default:l(()=>[a(S,{modelValue:t(s).projectId,"onUpdate:modelValue":o[2]||(o[2]=n=>t(s).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),h(a(y,{label:""},{default:l(()=>[a(S,{modelValue:t(s).name,"onUpdate:modelValue":o[3]||(o[3]=n=>t(s).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(x,{modelValue:t(s).projectName,"onUpdate:modelValue":o[4]||(o[4]=n=>t(s).projectName=n),clearable:"",placeholder:"客户简称"},{default:l(()=>[(r(!0),U(A,null,G(t(v).customerList,n=>(r(),i(B,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(S,{modelValue:t(s).ip,"onUpdate:modelValue":o[5]||(o[5]=n=>t(s).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),h(a(y,{label:""},{default:l(()=>[a(x,{modelValue:t(s).surveyStatus,"onUpdate:modelValue":o[6]||(o[6]=n=>t(s).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:l(()=>[(r(!0),U(A,null,G(t(v).surveyStatusList,(n,fe)=>(r(),i(B,{label:n,value:fe+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!e]]),a(ee,null,{default:l(()=>[a(E,{type:"primary",onClick:o[7]||(o[7]=n=>M())},{icon:l(()=>[a(F,{name:"i-ep:search"})]),default:l(()=>[d(" 筛选 ")]),_:1}),a(E,{onClick:Z},{icon:l(()=>[Ue]),default:l(()=>[d(" 重置 ")]),_:1}),a(E,{link:"",onClick:be},{icon:l(()=>[a(F,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[d(" "+p(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(oe,{"border-style":"dashed"}),a(ie,null,{default:l(()=>[a(ae),a(se,null,{default:l(()=>[a(ne,{size:"default"},{default:l(()=>[d(" 导出 ")]),_:1}),a(re,{border:t(V),"onUpdate:border":o[8]||(o[8]=e=>I(V)?V.value=e:null),tableAutoHeight:t(P),"onUpdate:tableAutoHeight":o[9]||(o[9]=e=>I(P)?P.value=e:null),checkList:t(u),"onUpdate:checkList":o[10]||(o[10]=e=>I(u)?u.value=e:null),columns:t(w),"onUpdate:columns":o[11]||(o[11]=e=>I(w)?w.value=e:null),"line-height":t(j),"onUpdate:lineHeight":o[12]||(o[12]=e=>I(j)?j.value=e:null),stripe:t(L),"onUpdate:stripe":o[13]||(o[13]=e=>I(L)?L.value=e:null),style:{"margin-left":"12px"},onQueryData:W},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),h((r(),i(ce,{border:t(V),data:t(D),size:t(j),stripe:t(L),onSelectionChange:Y},{empty:l(()=>[a(ue,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[a(f,{align:"center",type:"selection"}),t(u).includes("memberId")?(r(),i(f,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"})):m("",!0),t(u).includes("randomIdentityId")?(r(),i(f,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[d(p(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):m("",!0),t(u).includes("memberName")?(r(),i(f,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"},{default:l(({row:e})=>[d(p(e.memberName?e.memberName:"-"),1)]),_:1})):m("",!0),t(u).includes("projectId")?(r(),i(f,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):m("",!0),t(u).includes("projectName")?(r(),i(f,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:l(({row:e})=>[d(p(e.projectName?e.projectName:"-"),1)]),_:1})):m("",!0),t(u).includes("projectName")?(r(),i(f,{key:5,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"},{default:l(({row:e})=>[d(p(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):m("",!0),t(u).includes("allocationType")?(r(),i(f,{key:6,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:l(({row:e})=>[d(p(t(v).allocationTypeList[e.allocationType-1]),1)]),_:1})):m("",!0),t(u).includes("price")?(r(),i(f,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"会员价/供应商价/原价"},{default:l(({row:e})=>[t(z)===1?(r(),i($,{key:0},{default:l(()=>[d(p(e.memberChildPrice?e.memberChildPrice+"$":0)+"/ "+p(e.supplierPrice?e.supplierPrice+"$":0)+"/ "+p(e.doMoneyPrice?e.doMoneyPrice+"$":0),1)]),_:2},1024)):m("",!0),t(z)===2?(r(),i($,{key:1},{default:l(()=>[d(p(e.memberChildPrice?e.memberChildPrice+"￥":0)+"/ "+p(e.supplierPrice?e.supplierPrice+"￥":0)+"/ "+p(e.doMoneyPrice?e.doMoneyPrice+"￥":0),1)]),_:2},1024)):m("",!0)]),_:1})):m("",!0),t(u).includes("ipBelong")?(r(),i(f,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):m("",!0),t(u).includes("surveyTime")?(r(),i(f,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:l(({row:e})=>[d(p(e.surveyTime?e.surveyTime+"min":0)+"/ "+p(e.projectTime?e.projectTime+"min":0),1)]),_:1})):m("",!0),t(u).includes("surveyStatus")?(r(),i(R,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:l(({row:e})=>[d(p(t(v).surveyStatusList[e.surveyStatus-1]),1)]),_:1})):m("",!0),t(u).includes("viceStatus")?(r(),i(R,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:l(({row:e})=>[d(p(t(v).viceStatusList[e.viceStatus-1]?t(v).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):m("",!0)]),_:1},8,["border","data","size","stripe"])),[[me,t(T)]]),a(pe,{"current-page":t(g).page,total:t(g).total,"page-size":t(g).size,"page-sizes":t(g).sizes,layout:t(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:M},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=je(De,[["__scopeId","data-v-f3317e2f"]]);export{He as default};
