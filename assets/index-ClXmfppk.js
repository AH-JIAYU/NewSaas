
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ce,d as de,aK as me,r as c,n as _e,a as i,an as fe,o as p,b as x,f as t,w as a,i as e,F as be,p as ge,ak as j,g as _,B as h,C as I,e as m,j as f,O as ve,b6 as he,J as Ie,aM as ye,aN as ke,aj as we,aH as Se,aI as Ce,A as De,al as B,N as Ve}from"./index-Dwl3mMDh.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-C0eGlkFr.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-BVorMHpy.js";const ze={list:g=>ce.post("callback/getProjectTerminationScreenDetail",g)},Be=g=>(Se("data-v-05755c48"),g=g(),Ce(),g),Ne=Be(()=>De("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=de({name:"termination",__name:"index",setup(g){const{getParams:F,pagination:b,onSizeChange:M,onCurrentChange:L}=me(),{format:H}=he(),T=c(!1),N=c([]),$=c(""),u=c([]),k=c(!0),w=c(!1),S=c("default"),C=c(!1),D=c([{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID/子会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),E=[{label:"内部",value:1},{label:"外部",value:2}],n=c({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function A(){b.value.page=1,y()}function R(s){M(s).then(()=>y())}function U(s=1){L(s).then(()=>y())}async function y(){T.value=!0;const s={...F(),...n.value};n.value.time&&n.value.time.length&&(s.beginTime=n.value.time[0]||"",s.endTime=n.value.time[1]||"");const l=await ze.list(s);N.value=l.data.projectTerminationScreenDetailInfoList,b.value.total=l.data.total,T.value=!1}function Y(){Object.assign(n.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""}),y()}function q(s){$.value=s}return _e(()=>{D.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),y()}),(s,l)=>{const V=i("el-input"),v=i("el-form-item"),O=i("el-option"),J=i("el-select"),K=i("el-date-picker"),P=Ie,z=i("ElButton"),Q=i("ElFormItem"),G=i("ElForm"),W=Te,X=i("ElDivider"),Z=je,ee=i("el-button"),te=ye,le=ke,oe=i("el-row"),d=i("el-table-column"),ae=i("el-tag"),ne=i("el-empty"),re=i("el-table"),ie=i("ElPagination"),se=we,ue=fe("loading");return p(),x("div",{class:ve({"absolute-container":e(C)})},[t(se,null,{default:a(()=>[t(W,{"show-toggle":!1},{default:a(({fold:o,toggle:pe})=>[t(G,{model:e(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(v,{label:""},{default:a(()=>[t(V,{modelValue:e(n).tenantSupplierId,"onUpdate:modelValue":l[0]||(l[0]=r=>e(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(V,{modelValue:e(n).projectId,"onUpdate:modelValue":l[1]||(l[1]=r=>e(n).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(J,{modelValue:e(n).surveySource,"onUpdate:modelValue":l[2]||(l[2]=r=>e(n).surveySource=r),"value-key":"",placeholder:"会员类型",clearable:"",filterable:""},{default:a(()=>[(p(),x(be,null,ge(E,r=>t(O,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),j(t(v,{label:""},{default:a(()=>[t(V,{modelValue:e(n).projectName,"onUpdate:modelValue":l[3]||(l[3]=r=>e(n).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),j(t(v,{label:""},{default:a(()=>[t(V,{modelValue:e(n).ipBelong,"onUpdate:modelValue":l[4]||(l[4]=r=>e(n).ipBelong=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP/所属国"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),j(t(v,{label:""},{default:a(()=>[t(K,{modelValue:e(n).time,"onUpdate:modelValue":l[5]||(l[5]=r=>e(n).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),t(Q,null,{default:a(()=>[t(z,{type:"primary",onClick:l[6]||(l[6]=r=>U())},{icon:a(()=>[t(P,{name:"i-ep:search"})]),default:a(()=>[_(" 筛选 ")]),_:1}),t(z,{onClick:Y},{icon:a(()=>[Ne]),default:a(()=>[_(" 重置 ")]),_:1}),t(z,{link:"",onClick:pe},{icon:a(()=>[t(P,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[_(" "+h(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(X,{"border-style":"dashed"}),t(oe,null,{default:a(()=>[t(Z),t(le,null,{default:a(()=>[t(ee,{size:"default"},{default:a(()=>[_(" 导出 ")]),_:1}),t(te,{border:e(k),"onUpdate:border":l[7]||(l[7]=o=>I(k)?k.value=o:null),tableAutoHeight:e(C),"onUpdate:tableAutoHeight":l[8]||(l[8]=o=>I(C)?C.value=o:null),checkList:e(u),"onUpdate:checkList":l[9]||(l[9]=o=>I(u)?u.value=o:null),columns:e(D),"onUpdate:columns":l[10]||(l[10]=o=>I(D)?D.value=o:null),"line-height":e(S),"onUpdate:lineHeight":l[11]||(l[11]=o=>I(S)?S.value=o:null),stripe:e(w),"onUpdate:stripe":l[12]||(l[12]=o=>I(w)?w.value=o:null),style:{"margin-left":"12px"},onQueryData:A},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),j((p(),m(re,{border:e(k),data:e(N),size:e(S),stripe:e(w),onSelectionChange:q},{empty:a(()=>[t(ne,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[t(d,{align:"center",type:"selection"}),e(u).includes("surveySource")?(p(),m(d,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",width:"100",label:"会员类型"},{default:a(({row:o})=>[_(h(E[o.surveySource-1].label),1)]),_:1})):f("",!0),e(u).includes("memberChildId")?(p(),m(d,{key:1,align:"center",prop:"memberChildId","show-overflow-tooltip":"",label:"会员ID/子会员ID"},{default:a(({row:o})=>[_(h(o.peopleType===1?"会员":"子会员")+"："+h(o.memberChildId),1)]),_:1})):f("",!0),e(u).includes("tenantSupplierId")?(p(),m(d,{key:2,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:a(({row:o})=>[_(h(o.tenantSupplierId?o.tenantSupplierId:"-"),1)]),_:1})):f("",!0),e(u).includes("projectId")?(p(),m(d,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):f("",!0),e(u).includes("projectName")?(p(),m(d,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):f("",!0),e(u).includes("ipBelong")?(p(),m(d,{key:5,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):f("",!0),e(u).includes("notes")?(p(),m(d,{key:6,align:"center",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"})):f("",!0),e(u).includes("terminationTime")?(p(),m(d,{key:7,align:"center",prop:"terminationTime","show-overflow-tooltip":"",label:"终止时间"},{default:a(({row:o})=>[t(ae,{effect:"plain",type:"info"},{default:a(()=>[_(h(e(H)(o.terminationTime)),1)]),_:2},1024)]),_:1})):f("",!0)]),_:1},8,["border","data","size","stripe"])),[[ue,e(T)]]),t(ie,{"current-page":e(b).page,total:e(b).total,"page-size":e(b).size,"page-sizes":e(b).sizes,layout:e(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:U},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Fe=Ve(Ee,[["__scopeId","data-v-05755c48"]]);export{Fe as default};
