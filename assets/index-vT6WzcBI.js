
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as me,d as ye,l as fe,aN as be,r as b,a3 as U,n as _e,a as _,q as he,o as t,b as p,f as d,w as l,i as a,g as r,A as S,s as ve,e as s,aM as ke,j as o,y as m,z as y,N as v,F as V,b9 as ge,ba as Se,bd as Ie,ap as xe,L as Ce}from"./index-DJn7V0Dv.js";import{_ as Le}from"./index-BH-T_K7i.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-BKNb2XuL.js";import{_ as we}from"./index-CFGo-gen.js";import{u as De}from"./user_customer-CahF1cuh.js";import"./index-CNT2l1Pp.js";import"./index.vue_vue_type_script_setup_true_lang-3h3PP1Yc.js";import"./sortable.esm-C0-Qcoum.js";import"./user_customer-BCw6Vqw1.js";const Pe={list:j=>me.post("callback/getMemberChildSurveyRecord",j)},Te={class:"copyId flex-s tableSmall"},je={class:"id oneLine idFont"},ze={key:0,class:"copyId flex-s tableSmall"},Be={class:"oneLine"},Re={key:0,class:"id oneLine"},Fe={key:1,class:"id"},Ee={key:0},Me={key:0},Ue={class:"copyId tableSmall flex-s"},Ve={class:"id oneLine idFont"},He={key:1,class:"id"},Ae={key:0},$e={key:0},qe={class:"copyId tableSmall flex-s"},Oe={class:"id oneLine idFont"},Ge={key:1,class:"id"},Qe={key:0,class:"copyId tableSmall flex-s"},Je={class:"oneLine"},Ke={key:0,class:"id oneLine idFont"},We={key:1,class:"id"},Xe={class:"tableBig oneLine"},Ye={class:"copyId tableSmall flex-s"},Ze={class:"id oneLine"},et={class:"tableBig"},tt={class:"copyId tableSmall flex-s"},ot={class:"id oneLine"},lt={class:"tableBig"},at={class:"tableBig",style:{color:"#fd8989"}},st={key:0,style:{color:"#4797fb"},class:"i-healthicons:yes w-1.3em h-1.3em"},rt={key:1,style:{color:"#f1756c"},class:"i-healthicons:no w-1.3em h-1.3em"},nt={key:0},ct=ye({name:"memberSurveyRecords",__name:"index",setup(j){const H=fe(),A=De(),{getParams:$,pagination:g,onSizeChange:q,onCurrentChange:O}=be(),x=b(!1),z=b([]),G=b(""),u=b([]),C=b(!1),L=b(!1),N=b("default"),w=b(!1),Q=b(),B=b(),J=b("formSearch-memberSurveyRecords"),D=b([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID",sortable:!0,checked:!0},{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortable:!0,checked:!0},{prop:"memberPrice",label:"成本价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),P=U({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),T=U({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function K(){P.pageNo=1,I()}function W(i){q(i).then(()=>I())}function R(i=1){O(i).then(()=>I())}async function I(){try{x.value=!0;const i={...$(),...P},{data:c}=await Pe.list(i);z.value=c.memberChildSurveyRecordInfoList,Q.value=c.currencyType,g.value.total=c.total,x.value=!1}catch{}finally{x.value=!1}}function X(i){G.value=i}function Y(){Object.assign(P,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),I()}_e(async()=>{T.customerList=await A.getCustomerList(),T.country=await H.getCountry(),D.value.forEach(i=>{i.checked&&u.value.push(i.prop)}),I(),B.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"memberId",placeholder:"会员ID"},{index:5,show:!0,type:"input",modelName:"memberChildId",placeholder:"子会员ID"},{index:6,show:!0,type:"input",modelName:"randomIdentityId",placeholder:"随机身份"},{index:7,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:8,show:!0,type:"input",modelName:"ip",placeholder:"IP地址"},{index:9,show:!0,type:"select",modelName:"surveyStatus",placeholder:"调查状态",option:"surveyStatus",optionLabel:"label",optionValue:"value"},{index:10,show:!0,type:"select",modelName:"viceStatus",placeholder:"副状态",option:"viceStatus",optionLabel:"label",optionValue:"value"}]});const Z={surveySource:()=>[{label:"内部会员",value:1},{label:"外部会员",value:2}],surveyStatus:()=>T.surveyStatusList.map((i,c)=>({label:i,value:c+1})),viceStatus:()=>T.viceStatusList.map((i,c)=>({label:i,value:c+1}))},h=b();function ee(i){i?h.value=i.id:h.value=""}return(i,c)=>{const te=we,oe=_("ElDivider"),le=Ne,ae=_("el-button"),se=ge,re=Se,ne=_("el-row"),f=_("el-table-column"),n=_("el-tag"),k=Le,F=Ie,E=_("el-text"),M=_("ElTableColumn"),ce=_("el-empty"),ie=_("el-table"),de=_("ElPagination"),ue=xe,pe=he("loading");return t(),p("div",{class:v({"absolute-container":a(w)})},[d(ue,null,{default:l(()=>[d(te,{formSearchList:a(B),formSearchName:a(J),onCurrentChange:R,onOnReset:Y,model:a(P),formOption:Z},null,8,["formSearchList","formSearchName","model"]),d(oe,{"border-style":"dashed"}),d(ne,null,{default:l(()=>[d(le),d(re,null,{default:l(()=>[d(ae,{size:"default"},{default:l(()=>[r(" 导出 ")]),_:1}),d(se,{border:a(C),"onUpdate:border":c[0]||(c[0]=e=>S(C)?C.value=e:null),tableAutoHeight:a(w),"onUpdate:tableAutoHeight":c[1]||(c[1]=e=>S(w)?w.value=e:null),checkList:a(u),"onUpdate:checkList":c[2]||(c[2]=e=>S(u)?u.value=e:null),columns:a(D),"onUpdate:columns":c[3]||(c[3]=e=>S(D)?D.value=e:null),"line-height":a(N),"onUpdate:lineHeight":c[4]||(c[4]=e=>S(N)?N.value=e:null),stripe:a(L),"onUpdate:stripe":c[5]||(c[5]=e=>S(L)?L.value=e:null),style:{"margin-left":"12px"},onQueryData:K},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ve((t(),s(ie,{border:a(C),data:a(z),size:a(N),stripe:a(L),"highlight-current-row":"",onSelectionChange:X,onCurrentChange:ee},{empty:l(()=>[d(ce,{image:a(ke),"image-size":300},null,8,["image"])]),default:l(()=>[d(f,{align:"left",type:"selection"}),a(u).includes("id")?(t(),s(f,{key:0,align:"left",prop:"id","show-overflow-tooltip":"",fixed:"left",label:"点击ID"},{default:l(({row:e})=>[e.surveySource===2?(t(),s(n,{key:0,effect:"dark",type:"warning"},{default:l(()=>[r("外部人员")]),_:1})):o("",!0),m("div",Te,[m("div",je,y(e.id),1),d(k,{content:e.id,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])])]),_:1})):o("",!0),a(u).includes("randomIdentityId")?(t(),s(f,{key:1,align:"left",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[e.surveySource===1?(t(),p("div",ze,[m("div",Be,[e.randomIdentityId?(t(),p("span",Re,y(e.randomIdentityId),1)):(t(),p("span",Fe))]),e.randomIdentityId?(t(),s(k,{key:0,content:e.randomIdentityId,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])):o("",!0)])):o("",!0)]),_:1})):o("",!0),a(u).includes("surveySource")?(t(),s(f,{key:2,align:"left",prop:"memberId","show-overflow-tooltip":"",label:"会员"},{default:l(({row:e})=>[e.surveySource===1?(t(),p("div",Ee,[e.memberId?(t(),p("div",Me,[m("div",Ue,[m("div",Ve,y(e.memberId),1),d(k,{content:e.memberId,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])])])):(t(),p("span",He))])):o("",!0)]),_:1})):o("",!0),a(u).includes("memberChildId")?(t(),s(f,{key:3,align:"left",prop:"memberChildId","show-overflow-tooltip":"",label:"子会员ID"},{default:l(({row:e})=>[e.surveySource===1?(t(),p("div",Ae,[e.memberChildId?(t(),p("div",$e,[m("div",qe,[m("div",Oe,y(e.memberChildId),1),d(k,{content:e.memberChildId,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])])])):(t(),p("span",Ge))])):o("",!0)]),_:1})):o("",!0),a(u).includes("tenantSupplierId")?(t(),s(f,{key:4,align:"left",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:l(({row:e})=>[e.surveySource===1?(t(),p("div",Qe,[m("div",Je,[e.tenantSupplierId?(t(),p("span",Ke,y(e.tenantSupplierId),1)):(t(),p("span",We))]),e.tenantSupplierId?(t(),s(k,{key:0,content:e.tenantSupplierId,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])):o("",!0)])):o("",!0)]),_:1})):o("",!0),a(u).includes("projectId")?(t(),s(f,{key:5,align:"left",prop:"projectId","show-overflow-tooltip":"",label:"项目"},{default:l(({row:e})=>[m("div",Xe,"名称: "+y(e.projectName),1),m("div",Ye,[m("div",Ze,y(e.projectId),1),e.projectId?(t(),s(k,{key:0,content:e.projectId,class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])):o("",!0)])]),_:1})):o("",!0),a(u).includes("customerShortName")?(t(),s(f,{key:6,align:"left",prop:"customerShortName","show-overflow-tooltip":"",width:"100",label:"客户简称"},{default:l(({row:e})=>[m("div",et,y(e.customerShortName),1)]),_:1})):o("",!0),a(u).includes("ipBelong")?(t(),s(f,{key:7,align:"left",prop:"ipBelong","show-overflow-tooltip":"",width:"150",label:"IP/区域"},{default:l(({row:e})=>[d(n,{type:"primary"},{default:l(()=>[r(y(e.ipBelong.split("/")[1]),1)]),_:2},1024),m("div",tt,[m("div",ot,y(e.ipBelong.split("/")[0]),1),d(k,{content:e.ipBelong.split("/")[0],class:v({rowCopy:"rowCopy",current:e.id===a(h)})},null,8,["content","class"])])]),_:1})):o("",!0),a(u).includes("allocationType")?(t(),s(f,{key:8,align:"left","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:l(({row:e})=>[e.allocationType===1?(t(),s(n,{key:0,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:l(()=>[r("未分配")]),_:1})):o("",!0),e.allocationType===2?(t(),s(n,{key:1,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:l(()=>[r("供应商")]),_:1})):o("",!0),e.allocationType===3?(t(),s(n,{key:2,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:l(()=>[r("会员组")]),_:1})):o("",!0)]),_:1})):o("",!0),a(u).includes("doMoneyPrice")?(t(),s(f,{key:9,align:"left",prop:"doMoneyPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"项目价"},{default:l(({row:e})=>[m("div",lt,[d(F),r(y(e.doMoneyPrice||0),1)])]),_:1})):o("",!0),a(u).includes("memberPrice")?(t(),s(f,{key:10,align:"left",prop:"memberPrice","show-overflow-tooltip":"",width:"120",fixed:"right",label:"成本价"},{default:l(({row:e})=>[m("div",at,[d(F),e.memberId?(t(),p(V,{key:0},[r(y(e.memberPrice||0),1)],64)):(t(),p(V,{key:1},[r(y(e.supplierPrice||0),1)],64))])]),_:1})):o("",!0),a(u).includes("surveyTime")?(t(),s(f,{key:11,width:"120",align:"left",fixed:"right","show-overflow-tooltip":"",label:"调查时间"},{default:l(({row:e})=>[d(n,{effect:"plain",type:"info"},{default:l(()=>[r(y(e.surveyTime?e.surveyTime+"min":0)+"/ "+y(e.projectTime?e.projectTime+"min":0),1)]),_:2},1024)]),_:1})):o("",!0),a(u).includes("surveyStatus")?(t(),s(M,{key:12,align:"left","show-overflow-tooltip":"",fixed:"right",width:"130",prop:"",label:"调查状态"},{default:l(({row:e})=>[e.surveyStatus===3?(t(),s(n,{key:0,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"primary"},{default:l(()=>[r("配额满")]),_:1})):o("",!0),e.surveyStatus===1?(t(),s(n,{key:1,effect:"dark",style:{"background-color":"#379aff",border:"none"},class:"mx-1",type:"success"},{default:l(()=>[r("完成")]),_:1})):o("",!0),e.surveyStatus===2?(t(),s(n,{key:2,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1",type:"danger"},{default:l(()=>[r("被甄别")]),_:1})):o("",!0),e.surveyStatus===4?(t(),s(n,{key:3,effect:"dark",style:{"background-color":"#05c9be",border:"none"},class:"mx-1",type:"warning"},{default:l(()=>[r("安全终止")]),_:1})):o("",!0),e.surveyStatus===5?(t(),s(n,{key:4,effect:"dark",style:{"background-color":"#e1e1e1",border:"none"},class:"mx-1"},{default:l(()=>[r("未完成")]),_:1})):o("",!0),e.surveyStatus?(t(),s(E,{key:5},{default:l(()=>[e.surveyStatus===1?(t(),p("div",st)):o("",!0),e.surveyStatus===2?(t(),p("div",rt)):o("",!0)]),_:2},1024)):o("",!0)]),_:1})):o("",!0),a(u).includes("viceStatus")?(t(),s(M,{key:13,align:"left","show-overflow-tooltip":"",fixed:"right",width:"100",prop:"",label:"副状态"},{default:l(({row:e})=>[e.viceStatus?(t(),p("div",nt,[e.viceStatus===1?(t(),s(n,{key:0,effect:"dark",style:{"background-color":"#74868b",border:"none"},class:"mx-1",type:"success"},{default:l(()=>[r("待审")]),_:1})):o("",!0),e.viceStatus===2?(t(),s(n,{key:1,effect:"dark",style:{"background-color":"#475061",border:"none"},class:"mx-1",type:"danger"},{default:l(()=>[r("免审")]),_:1})):o("",!0),e.viceStatus===3?(t(),s(n,{key:2,effect:"dark",style:{"background-color":"#3e5c78",border:"none"},class:"mx-1",type:"primary"},{default:l(()=>[r("过IR")]),_:1})):o("",!0),e.viceStatus===4?(t(),s(n,{key:3,effect:"dark",style:{"background-color":"#c8c7bc",border:"none"},class:"mx-1",type:"warning"},{default:l(()=>[r("时间过短")]),_:1})):o("",!0),e.viceStatus===5?(t(),s(n,{key:4,effect:"dark",style:{"background-color":"#bcc8b8",border:"none"},class:"mx-1"},{default:l(()=>[r("超时完成")]),_:1})):o("",!0),e.viceStatus===6?(t(),s(n,{key:5,effect:"dark",style:{"background-color":"#ded6cb",border:"none"},class:"mx-1"},{default:l(()=>[r("超量完成")]),_:1})):o("",!0),e.viceStatus===7?(t(),s(n,{key:6,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:l(()=>[r("审核成功")]),_:1})):o("",!0),e.viceStatus===8?(t(),s(n,{key:7,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:l(()=>[r("审核失败")]),_:1})):o("",!0),e.viceStatus===9?(t(),s(n,{key:8,effect:"dark",style:{"background-color":"#fb6868",border:"none"},class:"mx-1"},{default:l(()=>[r("数据冻结")]),_:1})):o("",!0),e.viceStatus===10?(t(),s(n,{key:9,effect:"dark",style:{"background-color":"#6683a2",border:"none"},class:"mx-1"},{default:l(()=>[r("时间段过载")]),_:1})):o("",!0),e.viceStatus===11?(t(),s(n,{key:10,effect:"dark",style:{"background-color":"#638d93",border:"none"},class:"mx-1"},{default:l(()=>[r("IP不一致")]),_:1})):o("",!0),e.viceStatus===12?(t(),s(n,{key:11,effect:"dark",style:{"background-color":"#626a73",border:"none"},class:"mx-1"},{default:l(()=>[r("ID重复参与")]),_:1})):o("",!0),e.viceStatus===13?(t(),s(n,{key:12,effect:"dark",style:{"background-color":"#03c239",border:"none"},class:"mx-1"},{default:l(()=>[r("和解")]),_:1})):o("",!0)])):(t(),s(E,{key:1}))]),_:1})):o("",!0)]),_:1},8,["border","data","size","stripe"])),[[pe,a(x)]]),d(de,{"current-page":a(g).page,total:a(g).total,"page-size":a(g).size,"page-sizes":a(g).sizes,layout:a(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),ht=Ce(ct,[["__scopeId","data-v-52e0b6ea"]]);export{ht as default};
