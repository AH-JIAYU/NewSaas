
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ae,r as f,aK as Be,a1 as Ue,n as xe,a as u,an as ze,o as i,b as F,f as t,w as a,i as l,ak as V,g as m,B as y,C as S,e as p,j as b,F as Pe,p as Ne,O as Te,E as W,J as De,aM as Me,aN as Re,aj as $e,aH as Fe,aI as He,A as I,al as N,N as Oe}from"./index-C-YnF30x.js";import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang-BGf16_fj.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-DSHbF8JP.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-CjHEmTpl.js";import{_ as Je}from"./index.vue_vue_type_script_setup_true_lang-CV8715hp.js";import Ke from"./index-B5-c9ymA.js";import{_ as Qe}from"./index.vue_vue_type_script_setup_true_lang-BhZzdirb.js";import{u as Ge}from"./configuration_supplierLevel-gCWglfpU.js";import{s as We}from"./apiLoading-B0zuSkgR.js";import{a as T}from"./user_supplier-DMHS0NcD.js";import{U as Xe}from"./user_supplier-C1oglEiR.js";import"./index.vue_vue_type_script_setup_true_lang-DZOtFQKr.js";import"./index.vue_vue_type_script_setup_true_lang-E5Wea2Zc.js";import"./user_customer-Ced5Fcn2.js";import"./user_customer-BCSYcchn.js";import"./stagedData-nrj8PoeK.js";import"./index.vue_vue_type_script_setup_true_lang-CAII5Sf2.js";const L=E=>(Fe("data-v-76d347a0"),E=E(),He(),E),Ze=L(()=>I("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),et=["value"],tt=L(()=>I("div",{class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),lt=L(()=>I("div",{class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),at=L(()=>I("div",{class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),nt=L(()=>I("div",{class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),ot=Ae({name:"supplier",__name:"index",setup(E){const X=Xe(),Z=Ge(),H=f([]),{pagination:g,getParams:ee,onSizeChange:te,onCurrentChange:le}=Be(),D=f(!1),O=f([]),ae=f(),M=f(),Y=f(),j=f(),A=f(!0),B=f(!1),U=f("default"),c=f([]),x=f(!1),z=f([{label:"供应商id",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称+所属国",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"所属国",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"余额-人民币",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"供应商等级id",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"B2B|B2C"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),s=Ue({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ne(){M.value.showEdit()}function oe(o){M.value.showEdit(o)}function ie(o){Y.value.showEdit(o)}async function se(o){const{data:n}=await T.detail({tenantSupplierId:o.tenantSupplierId});if(n.remark!==o.remark){n.countryType=n.subordinateCountryId==="343"?1:2,n.remark=o.remark;const{status:h}=await T.edit(n);h===1&&W.success({message:"更新备注",center:!0}),P()}}async function q(o,n){const h={status:o,tenantSupplierId:n},{status:v}=await We(T.changestatus(h));v===1&&W.success({message:"修改成功"}),P(),X.TenantSupplierList=null}function P(){g.value.page=1,k()}function re(){Object.assign(s,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),k()}function ue(o){j.value.showEdit(JSON.stringify(o))}function pe(o){te(o).then(()=>k())}function J(o=1){le(o).then(()=>k())}async function k(){D.value=!0;const o={...ee(),...s};s.time&&s.time.length&&(o.beginTime=s.time[0]||"",o.endTime=s.time[1]||"");const{data:n}=await T.list(o);O.value=n.getTenantSupplierInfoList,g.value.total=n.total,D.value=!1}function ce(o){ae.value=o}return xe(async()=>{z.value.forEach(o=>{o.checked&&c.value.push(o.prop)}),H.value=await Z.getLevelNameList(),P()}),(o,n)=>{const h=u("el-input"),v=u("el-form-item"),R=u("el-option"),de=u("el-select"),me=u("el-date-picker"),K=De,$=u("ElButton"),fe=u("ElFormItem"),_e=u("ElForm"),be=qe,he=u("ElDivider"),C=u("el-button"),ve=je,ge=Me,ke=Re,ye=u("el-row"),_=u("el-table-column"),Q=Ye,w=u("el-text"),G=u("ElSwitch"),Se=u("ElTableColumn"),Ce=u("ElSpace"),we=u("el-empty"),Ve=u("el-table"),Ie=u("ElPagination"),Le=$e,Ee=ze("loading");return i(),F("div",{class:Te({"absolute-container":l(x)})},[t(Le,null,{default:a(()=>[t(be,{"show-toggle":!1},{default:a(({fold:e,toggle:r})=>[t(_e,{model:l(s),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(s).tenantSupplierId,"onUpdate:modelValue":n[0]||(n[0]=d=>l(s).tenantSupplierId=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(s).supplierAccord,"onUpdate:modelValue":n[1]||(n[1]=d=>l(s).supplierAccord=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(s).supplierPhone,"onUpdate:modelValue":n[2]||(n[2]=d=>l(s).supplierPhone=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码"},null,8,["modelValue"])]),_:1}),V(t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(s).accountName,"onUpdate:modelValue":n[3]||(n[3]=d=>l(s).accountName=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(v,{label:""},{default:a(()=>[t(h,{modelValue:l(s).emailAddress,"onUpdate:modelValue":n[4]||(n[4]=d=>l(s).emailAddress=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(v,{label:""},{default:a(()=>[t(de,{modelValue:l(s).supplierStatus,"onUpdate:modelValue":n[5]||(n[5]=d=>l(s).supplierStatus=d),clearable:"",placeholder:"供应商状态"},{default:a(()=>[t(R,{label:"开启",value:2}),t(R,{label:"关闭",value:1}),t(R,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[N,!e]]),V(t(v,{label:""},{default:a(()=>[t(me,{modelValue:l(s).time,"onUpdate:modelValue":n[6]||(n[6]=d=>l(s).time=d),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[N,!e]]),t(fe,null,{default:a(()=>[t($,{type:"primary",onClick:n[7]||(n[7]=d=>J())},{icon:a(()=>[t(K,{name:"i-ep:search"})]),default:a(()=>[m(" 筛选 ")]),_:1}),t($,{onClick:re},{icon:a(()=>[Ze]),default:a(()=>[m(" 重置 ")]),_:1}),t($,{link:"",onClick:r},{icon:a(()=>[t(K,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[m(" "+y(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(he,{"border-style":"dashed"}),t(ye,null,{default:a(()=>[t(ve,null,{default:a(()=>[t(C,{type:"primary",size:"default",onClick:ne},{default:a(()=>[m(" 新增 ")]),_:1})]),_:1}),t(ke,null,{default:a(()=>[t(C,{size:"default"},{default:a(()=>[m(" 导出 ")]),_:1}),t(ge,{border:l(A),"onUpdate:border":n[8]||(n[8]=e=>S(A)?A.value=e:null),tableAutoHeight:l(x),"onUpdate:tableAutoHeight":n[9]||(n[9]=e=>S(x)?x.value=e:null),checkList:l(c),"onUpdate:checkList":n[10]||(n[10]=e=>S(c)?c.value=e:null),columns:l(z),"onUpdate:columns":n[11]||(n[11]=e=>S(z)?z.value=e:null),"line-height":l(U),"onUpdate:lineHeight":n[12]||(n[12]=e=>S(U)?U.value=e:null),stripe:l(B),"onUpdate:stripe":n[13]||(n[13]=e=>S(B)?B.value=e:null),style:{"margin-left":"12px"},onQueryData:P},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),V((i(),p(Ve,{border:l(A),data:l(O),size:l(U),stripe:l(B),onSelectionChange:ce},{empty:a(()=>[t(we,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[t(_,{align:"center",type:"selection"}),l(c).includes("tenantSupplierId")?(i(),p(_,{key:0,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):b("",!0),l(c).includes("supplierAccord")?(i(),p(_,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:a(({row:e})=>[m(y(e.supplierAccord),1)]),_:1})):b("",!0),l(c).includes("countryAffiliationName")?(i(),p(_,{key:2,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"})):b("",!0),l(c).includes("balanceHumanLife")?(i(),p(_,{key:3,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:a(({row:e})=>[m(y(e.balanceHumanLife||0),1),t(Q)]),_:1})):b("",!0),l(c).includes("amountPendingTrial")?(i(),p(_,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:a(({row:e})=>[m(y(e.amountPendingTrial||0),1),t(Q)]),_:1})):b("",!0),l(c).includes("supplierLevelId")?(i(),p(_,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:a(({row:e})=>[(i(!0),F(Pe,null,Ne(l(H),r=>(i(),F("div",{key:r.tenantSupplierLevelId,value:r.levelNameOrAdditionRatio},[r.tenantSupplierLevelId===e.supplierLevelId?(i(),p(w,{key:0,class:"mx-1"},{default:a(()=>[m(y(r.levelNameOrAdditionRatio),1)]),_:2},1024)):b("",!0)],8,et))),128))]),_:1})):b("",!0),l(c).includes("B2B|B2C")?(i(),p(_,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:a(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(i(),p(w,{key:0,class:"mx-1"},{default:a(()=>[tt]),_:1})):(i(),p(w,{key:1,class:"mx-1"},{default:a(()=>[lt]),_:1})),m(" | "),e.b2cStatus&&e.b2cStatus===2?(i(),p(w,{key:2,class:"mx-1"},{default:a(()=>[at]),_:1})):(i(),p(w,{key:3,class:"mx-1"},{default:a(()=>[nt]),_:1}))]),_:1})):b("",!0),l(c).includes("settlementCycle")?(i(),p(_,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:a(({row:e})=>[m(y(e.settlementCycle?e.settlementCycle+"天":"-"),1)]),_:1})):b("",!0),l(c).includes("supplierStatus")?(i(),p(Se,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:a(({row:e})=>[e.supplierStatus===3?(i(),p(G,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":r=>e.supplierStatus=r,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:r=>q(r,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(i(),p(G,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":r=>e.supplierStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:r=>q(r,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):b("",!0),l(c).includes("createTime")?(i(),p(_,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):b("",!0),l(c).includes("remark")?(i(),p(_,{key:10,align:"center",prop:"remark","show-overflow-tooltip":"",label:"备注"},{default:a(({row:e})=>[t(h,{modelValue:e.remark,"onUpdate:modelValue":r=>e.remark=r,onBlur:r=>se(e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):b("",!0),t(_,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"250"},{default:a(({row:e})=>[t(Ce,null,{default:a(()=>[t(C,{size:"small",plain:"",type:"primary",onClick:r=>ue(e)},{default:a(()=>[m(" 加减款 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:r=>oe(e)},{default:a(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:r=>ie(e)},{default:a(()=>[m(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ee,l(D)]]),t(Ie,{"current-page":l(g).page,total:l(g).total,"page-size":l(g).size,"page-sizes":l(g).sizes,layout:l(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:pe,onCurrentChange:J},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Je,{ref_key:"editRef",ref:M,onFetchData:k},null,512),t(Ke,{ref_key:"checkRef",ref:Y,onFetchData:k},null,512),t(Qe,{ref_key:"plusMinusPaymentsRef",ref:j,onFetchData:k},null,512)],2)}}}),Ct=Oe(ot,[["__scopeId","data-v-76d347a0"]]);export{Ct as default};
