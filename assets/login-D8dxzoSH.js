
/**
 * ç”± Fantastic-admin æä¾›æŠ€æœ¯æ”¯æŒ
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as Ce}from"./index.vue_vue_type_script_setup_true_lang-Bbi9mmek.js";import{k as W,d as ke,t as Te,a0 as Ue,a1 as Re,r as d,b7 as w,b8 as X,aO as qe,a2 as Se,b as Y,f as o,w as t,l as u,am as M,aB as D,i as e,v as Fe,a as g,aG as Ie,aH as Le,O as Ne,b9 as Ae,o as h,p as Pe,aC as $e,g as c,I as E,e as C,az as ee,j as O,ay as G,F as ze,n as Be,ak as I,N as Ke,_ as Ze,q as ae}from"./index-Gn8OeSh9.js";import Me from"./index-BI7t2mE1.js";import{s as De,o as oe}from"./apiLoading-DzAzrVg3.js";import{u as Oe}from"./otherFunctions_basicDictionary-2Uee-v4P.js";import"./basicDictionary-BVq5gCxy.js";const L={sendCode:_=>W.post("user/sendCode",_),register:_=>W.post("user/register",_)},R=_=>(Ie("data-v-1695f4c7"),_=_(),Le(),_),Ge=R(()=>u("div",{class:"bg-banner"},null,-1)),He={id:"login-box"},je=R(()=>u("div",{class:"login-banner"},[u("h1",{style:{"font-size":"50px","font-weight":"normal"}},"æ¬¢è¿ !"),u("h3",{h1:"",style:{"font-size":"30px","font-weight":"normal"}}," æ¥åˆ°ç§Ÿæˆ·ç³»ç»Ÿ ! ğŸ‘‹ğŸ» ")],-1)),Je={class:"title-container"},Qe={class:"fx-c"},We={class:"flex-bar",style:{margin:"0",width:"100%"}},Xe={class:"flex-bar"},Ye={class:"sub-link"},ea=R(()=>u("span",{class:"text"},"è¿˜ä¸æ˜¯ä¼šå‘˜?",-1)),aa={class:"flex-bar",style:{margin:"0"}},oa={class:"sub-link"},ta=R(()=>u("span",{class:"text"},"å·²ç»æœ‰å¸å·?",-1)),la=R(()=>u("div",{class:"title-container"},[u("h3",{class:"title"},"å¿˜è®°å¯†ç äº†? ğŸ”’")],-1)),ra={class:"sub-link"},te=ke({name:"Login",__name:"login",setup(_){var J;const le=Oe(),re=Fe(),ne=Ne(),se=Te(),ie=Ue(),{t:f}=Re();new URL(""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,import.meta.url).href,new URL(""+new URL("logo-CLz_KCqM.png",import.meta.url).href,import.meta.url).href;const v=d("login"),V=d(!1),ue=d(((J=re.query.redirect)==null?void 0:J.toString())??se.settings.home.fullPath),k=d(),b=d("code"),N=d("è·å–éªŒè¯ç "),A=d(!1),i=d({account:w.local.get("login_account")||"",remember:w.local.has("login_account"),agreeToTheAgreement:!1}),de=(n,a,r)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(i.value.account)?r():r(new Error("è¯·è¾“å…¥åˆæ³•æ‰‹æœºå·"))},pe=(n,a,r)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i.value.account)?r():r(new Error("è¯·è¾“å…¥åˆæ³•é‚®ç®±"))},q=d({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}],agreeToTheAgreement:[{required:!0,validator:(n,a)=>a===!0,message:"è¯·é˜…è¯»å¹¶å‹¾é€‰åè®®",trigger:"change"}]}),ce=()=>{i.value.account.includes("@")?q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"},{validator:pe,trigger:"blur"}]:q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"},{validator:de,trigger:"blur"}]};async function me(){k.value.validateField("account",async n=>{if(n){let a;i.value.account.includes("@")?a={email:i.value.account,type:"login_email"}:a={phone:i.value.account,type:"login_phone_number"};const{status:r}=await L.sendCode(a);r===1&&I.success({message:"å·²å‘é€"})}}),ge()}const ge=()=>{A.value=!0;let n=60;y.value=setInterval(()=>{n>0?(n--,N.value=`è¯·åœ¨${n}såé‡æ–°è·å–`):(clearInterval(y.value),N.value="è·å–éªŒè¯ç ",y.value=null,A.value=!1)},1e3)},P=X(()=>{k.value&&k.value.validate(n=>{if(n){let a={...i.value};b.value==="password"?a.type=1:i.value.account.includes("@")?a.type=3:a.type=2,V.value=!0,ie.login(a).then(()=>{V.value=!1,i.value.remember?w.local.set("login_account",i.value.account):w.local.remove("login_account"),ne.push(ue.value)}).catch(()=>{V.value=!1})}})},3e3),y=d(null),$=d("è·å–éªŒè¯ç "),z=d(!1),S=d(),H=d([]),s=d({account:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone",agreeToTheAgreement:!1}),fe=d({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],email:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥é‚®ç®±"},{validator:(n,a,r)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.value.email)?r():r(new Error("è¯·è¾“å…¥åˆæ³•é‚®ç®±"))},trigger:"blur"}],phoneNumber:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·ç "},{validator:(n,a,r)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(s.value.phoneNumber)?r():r(new Error("è¯·è¾“å…¥åˆæ³•æ‰‹æœºå·"))},trigger:"blur"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],country:[{required:!0,trigger:"change",message:"è¯·é€‰æ‹©å›½å®¶"}],password:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}],agreeToTheAgreement:[{required:!0,validator:(n,a)=>a===!0,message:"è¯·é˜…è¯»å¹¶å‹¾é€‰åè®®",trigger:"change"}]}),ve=async()=>{const n={type:"register_phone_number",email:s.value.email,phone:s.value.phoneNumber};if(s.value.country==="343"){const{status:a}=await oe(L.sendCode(n));a===1&&I.success({message:"å·²å‘é€"})}else{n.type="register_email";const{status:a}=await oe(L.sendCode(n));a===1&&I.success({message:"å·²å‘é€"})}_e()},_e=()=>{z.value=!0;let n=60;y.value=setInterval(()=>{n>0?(n--,$.value=`è¯·åœ¨${n}såé‡æ–°è·å–`):(clearInterval(y.value),$.value="è·å–éªŒè¯ç ",y.value=null,z.value=!1)},1e3)},be=X(async()=>{S.value&&S.value.validate(async n=>{if(n){s.value.type=s.value.country==="343"?"phone":"email";const{status:a}=await De(L.register(s.value));a===1&&Ae({type:"success",dangerouslyUseHTMLString:!0,duration:5e3,message:'<span>æ³¨å†ŒæˆåŠŸ,è·³è½¬è‡³<span id="ElNotification-goLogin" style="color:var(--el-color-primary);cursor:pointer;">ç™»å½•</span></span>',onClick(r){r.target.id&&r.target.id==="ElNotification-goLogin"&&(v.value="login")}})}})},3e3),B=d(),x=d({account:w.local.get("login_account"),code:"",newPassword:""}),ye=d({account:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥ç”¨æˆ·å"}],code:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥éªŒè¯ç "}],newPassword:[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,max:18,trigger:"blur",message:"å¯†ç é•¿åº¦ä¸º6åˆ°18ä½"}]});function he(){I({message:"é‡ç½®å¯†ç ä»…æä¾›ç•Œé¢æ¼”ç¤ºï¼Œæ— å®é™…åŠŸèƒ½ï¼Œéœ€å¼€å‘è€…è‡ªè¡Œæ‰©å±•",type:"info"}),B.value&&B.value.validate(n=>{})}qe(()=>{clearInterval(y.value),y.value=null});const j=()=>{q.value.account=[{required:!0,trigger:"blur",message:"è¯·è¾“å…¥æ‰‹æœºå·/é‚®ç®±"}],k.value.resetFields()};return Se(()=>v.value,async n=>{switch(n){case"login":j(),i.value={account:w.local.get("login_account")||"",remember:w.local.has("login_account")};break;case"register":S.value.resetFields(),s.value={account:"",password:"",email:"",phoneNumber:"",code:"",country:"",type:"phone"};break}n==="register"&&(H.value=await le.getCountry())}),(n,a)=>{const r=Ke,T=Ce,Q=g("el-radio-button"),xe=g("el-radio-group"),we=g("el-button"),m=g("ElInput"),p=g("ElFormItem"),K=g("ElCheckbox"),F=g("ElLink"),U=g("ElButton"),Z=g("ElForm"),Ve=g("ElOption"),Ee=g("ElSelect");return h(),Y("div",null,[Ge,o(T,{placement:"bottom-end",class:"i18n-selector"},{default:t(()=>[o(r,{name:"i-ri:translate"})]),_:1}),u("div",He,[je,M(o(Z,{ref_key:"loginFormRef",ref:k,model:e(i),rules:e(q),class:"login-form","validate-on-rule-change":!1},{default:t(()=>[u("div",Je,[u("div",Qe,[o(xe,{modelValue:e(b),"onUpdate:modelValue":a[0]||(a[0]=l=>Pe(b)?b.value=l:null),size:"large",onChange:j},{default:t(()=>[o(Q,{label:"éªŒè¯ç ç™»å½•",value:"code"}),o(Q,{label:"å¯†ç ç™»å½•",value:"password"})]),_:1},8,["modelValue"])])]),u("div",null,[o(p,{prop:"account"},{default:t(()=>[o(m,{modelValue:e(i).account,"onUpdate:modelValue":a[1]||(a[1]=l=>e(i).account=l),placeholder:e(f)("app.account"),type:"text",tabindex:"1",onBlur:ce},$e({prefix:t(()=>[o(r,{name:"i-ri:user-3-fill"})]),_:2},[e(b)==="code"?{name:"append",fn:t(()=>[o(we,{type:"primary",disabled:e(A),onClick:me},{default:t(()=>[c(E(e(N)),1)]),_:1},8,["disabled"])]),key:"0"}:void 0]),1032,["modelValue","placeholder"])]),_:1}),e(b)==="password"?(h(),C(p,{key:0,prop:"password"},{default:t(()=>[o(m,{modelValue:e(i).password,"onUpdate:modelValue":a[2]||(a[2]=l=>e(i).password=l),type:"password",placeholder:e(f)("app.password"),tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:ee(e(P),["enter"])},{prefix:t(()=>[o(r,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder","onKeyup"])]),_:1})):O("",!0),e(b)==="code"?(h(),C(p,{key:1,prop:"code"},{default:t(()=>[o(m,{modelValue:e(i).code,"onUpdate:modelValue":a[3]||(a[3]=l=>e(i).code=l),type:"text",placeholder:e(f)("app.captcha"),tabindex:"2",onKeyup:ee(e(P),["enter"])},{prefix:t(()=>[o(r,{name:"i-ep:message"})]),_:1},8,["modelValue","placeholder","onKeyup"])]),_:1})):O("",!0),o(p,{prop:"agreeToTheAgreement"},{default:t(()=>[u("div",We,[o(K,{modelValue:e(i).agreeToTheAgreement,"onUpdate:modelValue":a[4]||(a[4]=l=>e(i).agreeToTheAgreement=l),tabindex:"3","true-value":!0,"false-value":!1},{default:t(()=>[c("æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxxåè®®ã€‹ ")]),_:1},8,["modelValue"]),e(b)==="password"?(h(),C(F,{key:0,type:"primary",underline:!1,onClick:a[5]||(a[5]=l=>v.value="reset")},{default:t(()=>[c(" å¿˜è®°å¯†ç äº†? ")]),_:1})):O("",!0)])]),_:1})]),u("div",Xe,[o(K,{modelValue:e(i).remember,"onUpdate:modelValue":a[6]||(a[6]=l=>e(i).remember=l),tabindex:"4"},{default:t(()=>[c(" ä¿æŒç™»å½• ")]),_:1},8,["modelValue"])]),o(U,{loading:e(V),type:"primary",size:"large",style:{width:"100%"},onClick:G(e(P),["prevent"]),tabindex:"5"},{default:t(()=>[c(E(e(f)("app.login")),1)]),_:1},8,["loading","onClick"]),u("div",Ye,[ea,o(F,{type:"primary",underline:!1,onClick:a[7]||(a[7]=l=>v.value="register")},{default:t(()=>[c(" ç«‹å³æ³¨å†Œ ")]),_:1})])]),_:1},8,["model","rules"]),[[D,e(v)==="login"]]),M(o(Z,{ref_key:"registerFormRef",ref:S,model:e(s),rules:e(fe),class:"login-form","auto-complete":"on"},{default:t(()=>[u("div",null,[o(p,{prop:"account"},{default:t(()=>[o(m,{modelValue:e(s).account,"onUpdate:modelValue":a[8]||(a[8]=l=>e(s).account=l),placeholder:"ç”¨æˆ·å",tabindex:"1"},{prefix:t(()=>[o(r,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"country"},{default:t(()=>[o(Ee,{modelValue:e(s).country,"onUpdate:modelValue":a[9]||(a[9]=l=>e(s).country=l),placeholder:"å›½å®¶",clearable:"",filterable:"",tabindex:"2"},{prefix:t(()=>[o(r,{name:"i-mdi:format-list-bulleted-type"})]),default:t(()=>[(h(!0),Y(ze,null,Be(e(H),l=>(h(),C(Ve,{label:l.chineseName,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(s).country==="343"?(h(),C(p,{key:0,prop:"phoneNumber"},{default:t(()=>[o(m,{modelValue:e(s).phoneNumber,"onUpdate:modelValue":a[10]||(a[10]=l=>e(s).phoneNumber=l),placeholder:"æ‰‹æœºå·",tabindex:"3"},{prefix:t(()=>[o(r,{name:"i-ant-design:phone-outlined"})]),_:1},8,["modelValue"])]),_:1})):(h(),C(p,{key:1,prop:"email"},{default:t(()=>[o(m,{modelValue:e(s).email,"onUpdate:modelValue":a[11]||(a[11]=l=>e(s).email=l),placeholder:"é‚®ç®±",tabindex:"3"},{prefix:t(()=>[o(r,{name:"i-mdi:email"})]),_:1},8,["modelValue"])]),_:1})),o(p,{prop:"code"},{default:t(()=>[o(m,{modelValue:e(s).code,"onUpdate:modelValue":a[12]||(a[12]=l=>e(s).code=l),placeholder:"éªŒè¯ç ",tabindex:"4"},{prefix:t(()=>[o(r,{name:"i-ic:baseline-verified-user"})]),append:t(()=>[o(U,{disabled:e(z),onClick:ve},{default:t(()=>[c(E(e($)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"password"},{default:t(()=>[o(m,{modelValue:e(s).password,"onUpdate:modelValue":a[13]||(a[13]=l=>e(s).password=l),type:"password",placeholder:"å¯†ç ",tabindex:"5","show-password":""},{prefix:t(()=>[o(r,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),o(p,{prop:"agreeToTheAgreement"},{default:t(()=>[u("div",aa,[o(K,{modelValue:e(s).agreeToTheAgreement,"onUpdate:modelValue":a[14]||(a[14]=l=>e(s).agreeToTheAgreement=l),tabindex:"6"},{default:t(()=>[c(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ã€Šxxxxåè®®ã€‹ ")]),_:1},8,["modelValue"])])]),_:1})]),o(U,{tabindex:"7",loading:e(V),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:G(e(be),["prevent"])},{default:t(()=>[c(" æ³¨å†Œ ")]),_:1},8,["loading","onClick"]),u("div",oa,[ta,o(F,{type:"primary",underline:!1,onClick:a[15]||(a[15]=l=>v.value="login")},{default:t(()=>[c(" å»ç™»å½• ")]),_:1})])]),_:1},8,["model","rules"]),[[D,e(v)==="register"]]),M(o(Z,{ref_key:"resetFormRef",ref:B,model:e(x),rules:e(ye),class:"login-form"},{default:t(()=>[la,u("div",null,[o(p,{prop:"account"},{default:t(()=>[o(m,{modelValue:e(x).account,"onUpdate:modelValue":a[16]||(a[16]=l=>e(x).account=l),placeholder:e(f)("app.account"),type:"text",tabindex:"1"},{prefix:t(()=>[o(r,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(p,{prop:"code"},{default:t(()=>[o(m,{modelValue:e(x).code,"onUpdate:modelValue":a[17]||(a[17]=l=>e(x).code=l),placeholder:e(f)("app.code"),type:"text",tabindex:"2"},{prefix:t(()=>[o(r,{name:"i-ic:baseline-verified-user"})]),append:t(()=>[o(U,null,{default:t(()=>[c(E(e(f)("app.sendCaptcha")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(p,{prop:"newPassword"},{default:t(()=>[o(m,{modelValue:e(x).newPassword,"onUpdate:modelValue":a[18]||(a[18]=l=>e(x).newPassword=l),type:"password",placeholder:e(f)("app.newPassword"),tabindex:"3","show-password":""},{prefix:t(()=>[o(r,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue","placeholder"])]),_:1})]),o(U,{loading:e(V),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:G(he,["prevent"])},{default:t(()=>[c(E(e(f)("app.check")),1)]),_:1},8,["loading"]),u("div",ra,[o(F,{type:"primary",underline:!1,onClick:a[19]||(a[19]=l=>v.value="login")},{default:t(()=>[c(E(e(f)("app.goLogin")),1)]),_:1})])]),_:1},8,["model","rules"]),[[D,e(v)==="reset"]])]),o(Me)])}}});typeof ae=="function"&&ae(te);const ga=Ze(te,[["__scopeId","data-v-1695f4c7"]]);export{ga as default};
