
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as me,d as be,aK as _e,r as b,a5 as fe,k as ge,a as i,p as ke,o as c,b as x,f as l,w as a,i as e,F as he,t as ve,q as D,g as p,H as k,I as v,e as m,j as _,S as Ie,bb as ye,N as Ce,aM as we,aN as Se,ap as Ue,aG as Ve,aH as je,s as F,aq as z,R as De}from"./index-DX1UQaE6.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-DLG5k5IZ.js";import{_ as ze}from"./index.vue_vue_type_script_setup_true_lang-upJU2LN5.js";const Te={list:h=>me.post("callback/getCustomerCallbackRecordList",h)},H=h=>(Ve("data-v-5e752723"),h=h(),je(),h),Le=H(()=>F("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=H(()=>F("br",null,null,-1)),Re=be({name:"callback",__name:"index",setup(h){const{pagination:f,getParams:M,onSizeChange:Q,onCurrentChange:B}=_e(),{format:P}=ye(),C=b(!1),T=b([]),$=b(""),u=b([]),w=b(!0),S=b(!1),U=b("default"),V=b(!1),j=b([{prop:"projectQuestionnaireClickId",label:"点击ID",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"memberChildId",label:"子会员ID/会员ID",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"callbackUrl",label:"回调URL",sortable:!0,checked:!0},{prop:"subordinateUrl",label:"下级URL",sortable:!0,checked:!0},{prop:"callbackTime",label:"回调时间",sortable:!0,checked:!0}]),L=[{label:"内部",value:1},{label:"外部",value:2}],n=fe({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""});function q(s){Q(s).then(()=>I())}function E(s=1){B(s).then(()=>I())}function A(){f.value.page=1,I()}async function I(){try{C.value=!0;const s={...M(),...n};n.time&&n.time.length&&(s.beginTime=n.time[0]||"",s.endTime=n.time[1]||"");const t=await Te.list(s);T.value=t.data.customerCallbackRecordInfoList,f.value.total=t.data.total,C.value=!1}catch{}finally{C.value=!1}}function G(){Object.assign(n,{time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",projectName:"",memberChildId:"",tenantSupplierId:""}),I()}function K(s){$.value=s}return ge(async()=>{j.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),I()}),(s,t)=>{const y=i("el-input"),g=i("el-form-item"),O=i("el-option"),J=i("el-select"),W=i("el-date-picker"),R=Ce,N=i("ElButton"),X=i("ElFormItem"),Y=i("ElForm"),Z=ze,ee=i("ElDivider"),le=Ne,te=i("el-button"),oe=we,ae=Se,ne=i("el-row"),d=i("el-table-column"),re=i("el-tag"),ie=i("el-empty"),se=i("el-table"),ue=i("ElPagination"),ce=Ue,de=ke("loading");return c(),x("div",{class:Ie({"absolute-container":e(V)})},[l(ce,null,{default:a(()=>[l(Z,{"show-toggle":!1},{default:a(({fold:o,toggle:pe})=>[l(Y,{model:e(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(g,{label:""},{default:a(()=>[l(y,{modelValue:e(n).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=r=>e(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:a(()=>[l(y,{modelValue:e(n).projectId,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:a(()=>[l(y,{modelValue:e(n).projectQuestionnaireClickId,"onUpdate:modelValue":t[2]||(t[2]=r=>e(n).projectQuestionnaireClickId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"点击ID"},null,8,["modelValue"])]),_:1}),l(g,{label:""},{default:a(()=>[l(J,{modelValue:e(n).surveySource,"onUpdate:modelValue":t[3]||(t[3]=r=>e(n).surveySource=r),"value-key":"",placeholder:"会员类型",clearable:"",filterable:""},{default:a(()=>[(c(),x(he,null,ve(L,r=>l(O,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),D(l(g,{label:""},{default:a(()=>[l(y,{modelValue:e(n).projectName,"onUpdate:modelValue":t[4]||(t[4]=r=>e(n).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[z,!o]]),D(l(g,{label:""},{default:a(()=>[l(y,{modelValue:e(n).memberChildId,"onUpdate:modelValue":t[5]||(t[5]=r=>e(n).memberChildId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID/会员ID"},null,8,["modelValue"])]),_:2},1536),[[z,!o]]),D(l(g,{label:""},{default:a(()=>[l(W,{modelValue:e(n).time,"onUpdate:modelValue":t[6]||(t[6]=r=>e(n).time=r),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[z,!o]]),l(X,null,{default:a(()=>[l(N,{type:"primary",onClick:t[7]||(t[7]=r=>E())},{icon:a(()=>[l(R,{name:"i-ep:search"})]),default:a(()=>[p(" 筛选 ")]),_:1}),l(N,{onClick:G},{icon:a(()=>[Le]),default:a(()=>[p(" 重置 ")]),_:1}),l(N,{link:"",onClick:pe},{icon:a(()=>[l(R,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[p(" "+k(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(ee,{"border-style":"dashed"}),l(ne,null,{default:a(()=>[l(le),l(ae,null,{default:a(()=>[l(te,{size:"default"},{default:a(()=>[p(" 导出 ")]),_:1}),l(oe,{border:e(w),"onUpdate:border":t[8]||(t[8]=o=>v(w)?w.value=o:null),tableAutoHeight:e(V),"onUpdate:tableAutoHeight":t[9]||(t[9]=o=>v(V)?V.value=o:null),checkList:e(u),"onUpdate:checkList":t[10]||(t[10]=o=>v(u)?u.value=o:null),columns:e(j),"onUpdate:columns":t[11]||(t[11]=o=>v(j)?j.value=o:null),"line-height":e(U),"onUpdate:lineHeight":t[12]||(t[12]=o=>v(U)?U.value=o:null),stripe:e(S),"onUpdate:stripe":t[13]||(t[13]=o=>v(S)?S.value=o:null),style:{"margin-left":"12px"},onQueryData:A},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),D((c(),m(se,{border:e(w),data:e(T),size:e(U),stripe:e(S),onSelectionChange:K},{empty:a(()=>[l(ie,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(d,{align:"center",type:"selection"}),e(u).includes("projectQuestionnaireClickId")?(c(),m(d,{key:0,align:"center",prop:"projectQuestionnaireClickId","show-overflow-tooltip":"",label:"点击ID"},{default:a(({row:o})=>[p(k(o.projectQuestionnaireClickId?o.projectQuestionnaireClickId:"-"),1)]),_:1})):_("",!0),e(u).includes("customerShortName")?(c(),m(d,{key:1,align:"center",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型",width:"100"},{default:a(({row:o})=>[p(k(L[o.surveySource-1].label),1)]),_:1})):_("",!0),e(u).includes("customerShortName")?(c(),m(d,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):_("",!0),e(u).includes("memberChildId")?(c(),m(d,{key:3,align:"center","show-overflow-tooltip":"",label:"子会员ID/会员ID"},{default:a(({row:o})=>[p(k(o.memberChildId)+" ",1),Ee,p(" "+k(o.randomIdentityId),1)]),_:1})):_("",!0),e(u).includes("projectId")?(c(),m(d,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):_("",!0),e(u).includes("projectName")?(c(),m(d,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"})):_("",!0),e(u).includes("callbackUrl")?(c(),m(d,{key:6,align:"center",prop:"callbackUrl",label:"回调URL"})):_("",!0),e(u).includes("subordinateUrl")?(c(),m(d,{key:7,align:"center",prop:"subordinateUrl",label:"下级URL"},{default:a(({row:o})=>[p(k(o.subordinateUrl?o.subordinateUrl:"-"),1)]),_:1})):_("",!0),e(u).includes("callbackTime")?(c(),m(d,{key:8,align:"center",prop:"callbackTime","show-overflow-tooltip":"",label:"回调时间"},{default:a(({row:o})=>[l(re,{effect:"plain",type:"info"},{default:a(()=>[p(k(e(P)(o.callbackTime)),1)]),_:2},1024)]),_:1})):_("",!0)]),_:1},8,["border","data","size","stripe"])),[[de,e(C)]]),l(ue,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Me=De(Re,[["__scopeId","data-v-5e752723"]]);export{Me as default};
