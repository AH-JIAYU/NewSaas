
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as c,d as j,r as s,D as q,a as i,al as H,am as z,o as p,b as _,f as t,w as o,F as G,g as x,a3 as I,a4 as U,e as J,ak as K}from"./index-DbPEKLOm.js";const M={list:d=>c.post("tenant-invoice/get/getTenantInvoices",d),create:d=>c.post("tenant-invoice/insert/insertTenantInvoice",d),edit:d=>c.post("tenant-invoice/update/updateById",d),delete:d=>c.post("tenant-invoice/delete/deleteById",d)},P={style:{flex:"auto"}},W=j({name:"Edit",__name:"index",emits:["success"],setup(d,{expose:T,emit:Y}){const R=Y,V=s(""),f=s(),b=s(!1),y=s([]),v=s(),m=s(!1),B=[{lable:"未收款",value:1},{lable:"部分收款",value:2},{lable:"已完结",value:3},{lable:"坏账",value:4}],l=s({tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""}),E=s({invoiceCode:[{required:!0,trigger:"blur",message:"请输入姓名"}]});function S(){v.value&&v.value.validate(async n=>{n&&(b.value=!0,l.value.id?M.edit(l.value):M.create(l.value),R("success"),b.value=!1,K.success({message:l.value.id?"修改成功":"新增成功",center:!0}),C())})}async function A(n,a){n!=null&&n.id&&(l.value=n),V.value=n!=null&&n.id?"编辑":"新增",y.value=a,m.value=!0}function C(){v.value.resetFields(),Object.assign(l.value,{tenantCustomerId:"",invoiceCode:"",invoiceAmount:null,invoiceTax:null,actualReceipts:null,invoiceStatus:null,invoiceDate:"",paymentDate:"",remark:""}),m.value=!1}return q(async()=>{f.value=new Date}),T({showEdit:A}),(n,a)=>{const F=i("el-option"),g=i("el-select"),u=i("el-form-item"),r=i("el-input"),L=i("ElOption"),D=i("el-date-picker"),N=i("el-form"),k=i("el-button"),O=i("el-dialog"),$=H("loading");return z((p(),_("div",null,[t(O,{modelValue:m.value,"onUpdate:modelValue":a[10]||(a[10]=e=>m.value=e),title:V.value,width:"700","before-close":C},{footer:o(()=>[G("div",P,[t(k,{type:"primary",onClick:S},{default:o(()=>[x(" 确定 ")]),_:1}),t(k,{type:"",onClick:a[9]||(a[9]=e=>m.value=!1)},{default:o(()=>[x(" 取消 ")]),_:1})])]),default:o(()=>[t(N,{ref_key:"formRef",ref:v,"label-width":"80px",model:l.value,rules:E.value,inline:!1},{default:o(()=>[t(u,{label:"客户简称"},{default:o(()=>[t(g,{modelValue:l.value.tenantCustomerId,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.tenantCustomerId=e),placeholder:"请选择客户",clearable:"",filterable:""},{default:o(()=>[(p(!0),_(I,null,U(y.value,e=>(p(),J(F,{key:e.tenantCustomerId,value:e.tenantCustomerId,label:e.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{prop:"invoiceCode",label:"发票编号"},{default:o(()=>[t(r,{modelValue:l.value.invoiceCode,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.invoiceCode=e),placeholder:"请输入发票编号",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"发票金额"},{default:o(()=>[t(r,{modelValue:l.value.invoiceAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.invoiceAmount=e),modelModifiers:{number:!0},placeholder:"请输入发票金额",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"手续费(税)"},{default:o(()=>[t(r,{modelValue:l.value.invoiceTax,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.invoiceTax=e),modelModifiers:{number:!0},placeholder:"请输入手续费",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"实际收款"},{default:o(()=>[t(r,{modelValue:l.value.actualReceipts,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.actualReceipts=e),modelModifiers:{number:!0},placeholder:"请输入实际收款",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"发票状态"},{default:o(()=>[t(g,{modelValue:l.value.invoiceStatus,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.invoiceStatus=e),placeholder:"请选择发票状态",clearable:"",filterable:""},{default:o(()=>[(p(),_(I,null,U(B,e=>t(L,{label:e.lable,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(u,{style:{width:"100%"},label:"开票日期"},{default:o(()=>[t(D,{modelValue:l.value.invoiceDate,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.invoiceDate=e),"default-time":f.value,type:"datetime",placeholder:"请选择开票日期","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(u,{label:"收款日期"},{default:o(()=>[t(D,{modelValue:l.value.paymentDate,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.paymentDate=e),"default-time":f.value,type:"datetime",placeholder:"请选择收款日期","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),t(u,{label:"备注"},{default:o(()=>[t(r,{modelValue:l.value.remark,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.remark=e),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[$,b.value]])}}});export{W as _,M as a};
