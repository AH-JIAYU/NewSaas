
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as H}from"./group_team-Bn4narWM.js";import{a as K}from"./department-Ce-uyImh.js";import{u as U}from"./department-DwfCYJYn.js";import{u as A}from"./configuration_manager-DayU_B8g.js";import{u as G}from"./position_manage-BjCdtvET.js";import{d as Q,aO as W,r as o,k as X,a as p,p as Y,q as Z,o as l,b as _,f as n,w as e,s as L,g as u,e as s,H as c,F as w,t as I,j as k,aJ as ee,aK as te,R as ae}from"./index-CbxE907u.js";import"./position_manage-CFM3ODNi.js";const le=v=>(ee("data-v-ce10097c"),v=v(),te(),v),oe=le(()=>L("div",{class:"card-header"},[L("span",null,"组成员")],-1)),ne={style:{flex:"auto"}},se=Q({name:"Edit",__name:"index",emits:["success"],setup(v,{expose:M,emit:re}){W();const O=o(),x=G(),E=o(),R=U(),m=o(),j=A(),S=o([]),B=o(""),F=o(),g=o(!1),b=o(!1),D=o([]),J=o([]),N=o(),V=o({groupId:null,userInfo:[],menuId:[]});async function P(T){try{g.value=!0,B.value="详情";const d=JSON.parse(T);V.value.groupId=d.id,N.value=d.departmentId;const i={page:1,limit:10,groupId:d.id},a=await H.list(i);a!=null&&a.data.data&&a.data.data.forEach(f=>{var y,h;(h=(y=V.value)==null?void 0:y.menuId)==null||h.push(f.id),D.value.push(f)});const C=await K.createEvery();m.value=C.data.result,m.value=m.value.filter(f=>f.id===N.value),g.value=!1,b.value=!0}catch{}finally{g.value=!1}}X(async()=>{E.value=await(x==null?void 0:x.getPositionManage())||[],m.value=await R.getDepartment(),S.value=await j.getStaff(),F.value=new Date});const $=()=>{Object.assign(V.value,{groupId:null,userInfo:[],menuId:[]}),J.value=[],D.value=[]};return M({showEdit:P}),(T,d)=>{const i=p("el-table-column"),a=p("el-text"),C=p("el-empty"),f=p("el-table"),y=p("el-card"),h=p("el-button"),q=p("el-drawer"),z=Y("loading");return Z((l(),_("div",null,[n(q,{modelValue:b.value,"onUpdate:modelValue":d[1]||(d[1]=t=>b.value=t),title:B.value,onClose:$,size:"60%"},{footer:e(()=>[L("div",ne,[n(h,{type:"",onClick:d[0]||(d[0]=t=>b.value=!1)},{default:e(()=>[u(" 取消 ")]),_:1})])]),default:e(()=>[n(y,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[n(f,{ref_key:"tableRef",ref:O,data:D.value,border:""},{empty:e(()=>[n(C,{description:"暂无数据"})]),default:e(()=>[n(i,{align:"center",type:"index",label:"序号",width:"80"}),n(i,{align:"center","show-overflow-tooltip":"",prop:"memberId",label:"员工ID"},{default:e(({row:t})=>[t.memberId?(l(),s(a,{key:0},{default:e(()=>[u(c(t.memberId),1)]),_:2},1024)):(l(),s(a,{key:1},{default:e(()=>[u(c(t.id),1)]),_:2},1024))]),_:1}),n(i,{align:"center","show-overflow-tooltip":"",prop:"userName",label:"用户名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},I(S.value,r=>(l(),s(a,null,{default:e(()=>[t.id===r.id?(l(),s(a,{key:0},{default:e(()=>[u(c(r.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[u(c(t.userName?t.userName:"-"),1)]),_:2},1024))]),_:1}),n(i,{align:"center","show-overflow-tooltip":"",prop:"name",label:"姓名"},{default:e(({row:t})=>[t.id?(l(!0),_(w,{key:0},I(S.value,r=>(l(),s(a,null,{default:e(()=>[t.id===r.id?(l(),s(a,{key:0},{default:e(()=>[u(c(r.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256)):(l(),s(a,{key:1},{default:e(()=>[u(c(t.name),1)]),_:2},1024))]),_:1}),n(i,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"职位"},{default:e(({row:t})=>[(l(!0),_(w,null,I(E.value,r=>(l(),s(a,null,{default:e(()=>[t.positionId===r.id?(l(),s(a,{key:0},{default:e(()=>[u(c(r.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256))]),_:1}),n(i,{align:"center","show-overflow-tooltip":"",prop:"lable",label:"部门"},{default:e(({row:t})=>[(l(!0),_(w,null,I(m.value,r=>(l(),s(a,null,{default:e(()=>[N.value===r.id?(l(),s(a,{key:0},{default:e(()=>[u(c(r.name),1)]),_:2},1024)):k("",!0)]),_:2},1024))),256))]),_:1}),n(i,{align:"center",width:"200",fixed:"right","show-overflow-tooltip":"",label:"提成比例"},{default:e(({row:t})=>[u(c(t.commission?t.commission+"%":"-"),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","title"])])),[[z,g.value]])}}}),_e=ae(se,[["__scopeId","data-v-ce10097c"]]);export{_e as default};
