
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,l as Ne,aM as je,r as s,a3 as we,c as Le,n as Se,a as f,q as xe,o as n,b as h,f as l,w as o,i as t,g as r,A as v,s as Pe,e as i,aL as ze,z as p,j as d,y as N,N as D,F as J,t as Re,be as Be,b8 as Te,b9 as Ee,bd as Ae,ap as De,L as Ue}from"./index-DWHuUoGG.js";import{_ as Me}from"./index-CqM88yVD.js";import{_ as Oe}from"./index.vue_vue_type_style_index_0_lang-BfgBXdAm.js";import{_ as Fe}from"./index-0SeD4Zdc.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-DgL6s-Ju.js";import He from"./index-BUubeqrQ.js";import Ve from"./index-BgzTyAjH.js";import qe from"./index-CdRzCwrO.js";import{a as Ge}from"./survey_myProjeck-CmCcVYGO.js";import{u as Qe}from"./user_customer-Ba7dwLCn.js";import"./clipboard-wjfoT7Ti.js";import"./index-B-Keeb-q.js";import"./index.vue_vue_type_script_setup_true_lang-C-q8vkmg.js";import"./sortable.esm-C0-Qcoum.js";import"./index-Ce_Tz2ZM.js";import"./file-BSS6Q78b.js";import"./download-C8PHVIy1.js";import"./apiLoading-CAl_T4Wm.js";import"./index-CWEGytWA.js";import"./projectManagement-C1zj5yAJ.js";import"./survey_vip_department-Dex1VsPx.js";import"./survey_vipGroup--0y05B6s.js";import"./survey_vipGroup-C3Y81BX-.js";import"./user_customer-wQncLTaL.js";const Je={key:0,class:"crudeTop"},Ke={key:1,class:"hoverSvg"},We={class:"fineSize"},Xe={key:0,class:"crudeTop"},Ye={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},Ze={class:"fineBom"},et={class:"hoverSvg"},tt={class:"withoutUrlSize"},ot={class:"parameter oneLine"},lt=Ie({name:"myProjeck",__name:"list",setup(nt){const{format:K}=Be(),U=Ne(),W=Qe(),{pagination:b,getParams:X,onSizeChange:Y,onCurrentChange:Z,onSortChange:at}=je(),M=s([]),O=s([]),F=s(),ee=s(""),$=s(),j=s(!0),te=s(),H=s(),w=s(!1),u=s([]),L=s(!1),V=s(),oe=s("formSearch-myProjeck"),S=s("default"),x=s(!1),P=s([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"项目价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"成本价(会员)",sortabel:!0,checked:!0},{prop:"countryNameList",label:"区域",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),_=we({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),q=s([]),B=s();function le(a){$.value.showEdit(a)}function ne(a){H.value.showEdit(a)}function ae(a){B.value.showEdit(a,"distribution")}function ie(a){B.value.showEdit(a,"reassign")}function re(a){Y(a).then(()=>C())}function T(a=1){Z(a).then(()=>C())}function ce(){Object.assign(_,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),C()}async function C(){try{j.value=!0;const a={...X(),..._};_.time&&_.time.length&&(a.beginTime=_.time[0]||"",a.endTime=_.time[1]||""),!Array.isArray(_.countryId)&&_.countryId?a.countryId=[_.countryId]:a.countryId=[];const c=await Ge.list(a);F.value=c.data.currencyType,q.value=c.data.getMemberProjectListInfoList,b.value.total=c.data.total,j.value=!1}catch{}finally{j.value=!1}}const E=s();function se(a){E.value=a.projectId}const z=Le(()=>a=>M.value.filter(I=>a==null?void 0:a.includes(I.id)).map(I=>I.chineseName));Se(async()=>{P.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),M.value=await U.getCountry(),O.value=await W.getCustomerList(),C(),V.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"input",modelName:"projectIdentification",placeholder:"项目标识"},{index:4,show:!0,type:"select",modelName:"countryId",placeholder:"区域地区",option:"global",optionLabel:"chineseName",optionValue:"id"},{index:5,show:!0,type:"select",modelName:"clientId",placeholder:"客户简称",option:"clientId",optionLabel:"customerAccord",optionValue:"tenantCustomerId"},{index:6,show:!0,type:"select",modelName:"b2bOrB2cStatus",placeholder:"B2B/B2C",option:"b2bOrB2cStatus",optionLabel:"label",optionValue:"value"},{index:7,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const ue={clientId:()=>O.value,b2bOrB2cStatus:()=>[{label:"B2B",value:1},{label:"B2C",value:2}]};return(a,c)=>{const I=Fe,pe=f("ElDivider"),de=Oe,R=f("el-button"),me=Te,fe=Ee,_e=f("el-row"),m=f("el-table-column"),G=Me,A=f("el-tooltip"),y=f("el-text"),ye=Ae,Q=f("el-link"),g=f("el-tag"),he=f("ElSpace"),be=f("el-empty"),ge=f("el-table"),ke=f("ElPagination"),ve=De,Ce=xe("loading");return n(),h("div",{class:D({"absolute-container":t(L)})},[l(ve,null,{default:o(()=>[l(I,{formSearchList:t(V),formSearchName:t(oe),onCurrentChange:T,onOnReset:ce,model:t(_),formOption:ue},null,8,["formSearchList","formSearchName","model"]),l(pe,{"border-style":"dashed"}),l(_e,{gutter:24},{default:o(()=>[l(de),l(fe,null,{default:o(()=>[l(R,{size:"default",onClick:c[0]||(c[0]=()=>{})},{default:o(()=>[r(" 导出 ")]),_:1}),l(me,{border:t(w),"onUpdate:border":c[1]||(c[1]=e=>v(w)?w.value=e:null),tableAutoHeight:t(L),"onUpdate:tableAutoHeight":c[2]||(c[2]=e=>v(L)?L.value=e:null),checkList:t(u),"onUpdate:checkList":c[3]||(c[3]=e=>v(u)?u.value=e:null),columns:t(P),"onUpdate:columns":c[4]||(c[4]=e=>v(P)?P.value=e:null),"line-height":t(S),"onUpdate:lineHeight":c[5]||(c[5]=e=>v(S)?S.value=e:null),stripe:t(x),"onUpdate:stripe":c[6]||(c[6]=e=>v(x)?x.value=e:null),style:{"margin-left":"12px"},onQueryData:T},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),Pe((n(),i(ge,{ref_key:"tableSortRef",ref:ee,style:{"margin-top":"10px"},"row-key":"id",data:t(q),border:t(w),size:t(S),stripe:t(x),onCurrentChange:se,"highlight-current-row":""},{empty:o(()=>[l(be,{image:t(ze),"image-size":300},null,8,["image"])]),default:o(()=>[l(m,{align:"left",type:"selection"}),t(u).includes("project")?(n(),i(m,{key:0,"show-overflow-tooltip":"",align:"left",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:o(({row:e})=>[t(u).includes("projectName")?(n(),h("p",Je,"名称："+p(e.projectName),1)):d("",!0),t(u).includes("projectId")?(n(),h("div",Ke,[N("p",We,p(e.projectId),1),l(G,{content:e.projectId,class:D({rowCopy:"rowCopy",current:e.projectId===t(E)})},null,8,["content","class"])])):d("",!0)]),_:1})):d("",!0),t(u).includes("projectIdentificationOrClientName")?(n(),i(m,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"left",label:"名称/标识"},{default:o(({row:e})=>[t(u).includes("projectIdentification")?(n(),h("p",Xe," 名称："+p(e.projectIdentification),1)):d("",!0),t(u).includes("projectIdClientName")?(n(),h("p",Ye,[r("标："),N("span",Ze,p(e.clientName),1)])):d("",!0)]),_:1})):d("",!0),t(u).includes("withoutUrl")?(n(),i(m,{key:2,width:"150",prop:"withoutUrl",align:"left",label:"URL"},{default:o(({row:e})=>[l(A,{class:"box-item",effect:"dark",content:e.withoutUrl,placement:"top"},{default:o(()=>[N("div",et,[N("p",tt,p(e.withoutUrl),1),l(G,{content:e.withoutUrl,class:D({rowCopy:"rowCopy",current:e.projectId===t(E)})},null,8,["content","class"])])]),_:2},1032,["content"])]),_:1})):d("",!0),t(u).includes("participation")?(n(),i(m,{key:3,"show-overflow-tooltip":"",width:"200",align:"left",label:"参数"},{default:o(({row:e})=>[N("p",ot,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:o(()=>[r("参与："+p(e.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:o(()=>[r("完成："+p(e.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:o(()=>[r("配额："+p(e.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:o(()=>[r("限量："+p(e.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):d("",!0),t(u).includes("doMoneyPrice")?(n(),i(m,{key:4,"show-overflow-tooltip":"",align:"left",label:"项目价"},{default:o(({row:e})=>[t(F)===3?(n(),i(y,{key:0,class:"mx-1"},{default:o(()=>[r("暂无数据")]),_:1})):(n(),i(y,{key:1,class:"mx-1"},{default:o(()=>[l(y,{style:{color:"#FD8989"}},{default:o(()=>[l(ye)]),_:1}),l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[r(p(e.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):d("",!0),t(u).includes("memberPrice")?(n(),i(m,{key:5,"show-overflow-tooltip":"",align:"left",label:"成本价(会员)"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),i(Q,{key:0,size:"small",plain:"",type:"primary",onClick:k=>ne(e)},{default:o(()=>[r(" 查看 ")]),_:2},1032,["onClick"])):(n(),i(y,{key:1},{default:o(()=>[r(" - ")]),_:1}))]),_:1})):d("",!0),t(u).includes("countryNameList")?(n(),i(m,{key:6,"show-overflow-tooltip":"",align:"left",label:"区域"},{default:o(({row:e})=>[e.countryNameList?(n(),h(J,{key:0},[e.countryNameList.length===t(U).country.length?(n(),i(g,{key:0,type:"primary"},{default:o(()=>[r("全球")]),_:1})):t(z)(e.countryNameList).length>1?(n(),i(A,{key:1,class:"box-item",effect:"dark",content:t(z)(e.countryNameList).join(","),placement:"top"},{default:o(()=>[l(Q,{type:"primary"},{default:o(()=>[l(g,{type:"primary"},{default:o(()=>[r("x"+p(t(z)(e.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),h(J,{key:2},Re(t(z)(e.countryNameList),k=>(n(),i(g,{key:k,type:"primary"},{default:o(()=>[r(p(k),1)]),_:2},1024))),128))],64)):d("",!0)]),_:1})):d("",!0),t(u).includes("ir")?(n(),i(m,{key:7,"show-overflow-tooltip":"",align:"left",label:"IR/NIR"},{default:o(({row:e})=>[l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:o(()=>[r(p(e.ir?e.ir:"-")+" / "+p(e.nir?e.nir:0),1)]),_:2},1024)]),_:1})):d("",!0),t(u).includes("memberStatus")?(n(),i(m,{key:8,"show-overflow-tooltip":"",align:"left",label:"分配"},{default:o(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),i(g,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:o(()=>[r(" 部门 ")]),_:1})):(n(),i(g,{key:1,effect:"plain",type:"info"},{default:o(()=>[r(" 未分配 ")]),_:1}))]),_:1})):d("",!0),t(u).includes("createTime")?(n(),i(m,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建时间"},{default:o(({row:e})=>[l(A,{content:e.createTime,placement:"top"},{default:o(()=>[l(g,{effect:"plain",type:"info"},{default:o(()=>[r(p(t(K)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):d("",!0),l(m,{align:"left",fixed:"right",label:"操作",width:"200"},{default:o(({row:e})=>[l(he,null,{default:o(()=>[e.allocationStatus===1?(n(),i(R,{key:0,type:"primary",disabled:e.isOnline===2,plain:"",size:"small",onClick:k=>ae(e)},{default:o(()=>[r(" 分配 ")]),_:2},1032,["disabled","onClick"])):(n(),i(R,{key:1,plain:"",type:"primary",disabled:e.isOnline===2,size:"small",onClick:k=>ie(e)},{default:o(()=>[r(" 重新分配 ")]),_:2},1032,["disabled","onClick"])),l(R,{size:"small",plain:"",type:"warning",onClick:k=>le(e)},{default:o(()=>[r(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ce,t(j)]]),l(ke,{"current-page":t(b).page,total:t(b).total,"page-size":t(b).size,"page-sizes":t(b).sizes,layout:t(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:re,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l($e,{ref_key:"CheckEditRef",ref:te},null,512),l(He,{ref_key:"detailRef",ref:$},null,512),l(Ve,{ref_key:"checkMembershipPriceRef",ref:H},null,512),l(qe,{ref_key:"addAllocationEditRef",ref:B,onFetchData:C},null,512)],2)}}}),Pt=Ue(lt,[["__scopeId","data-v-29a030db"]]);export{Pt as default};
