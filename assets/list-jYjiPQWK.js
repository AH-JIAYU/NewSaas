
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as O,d as h,r as c,G as S,a as s,al as E,am as W,o as $,b as D,f as e,w as a,g as w,ak as b,at as M,s as j,_ as q}from"./index-BLvcgQu2.js";const y={list:()=>O.post("supplier-config/get/getSupplierConfig"),create:d=>O.post("supplier-config/insert/insertSupplierConfig",d),edit:d=>O.post("/supplier-config/update/updateSupplierConfig",d)},B=h({name:"SettingSiteSettingList",__name:"list",setup(d){const i=c(!1),u=c(),t=c({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:""}),V=c({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}]});S(()=>{_()});async function _(){i.value=!0;const{data:r}=await y.list();t.value=r||t.value,i.value=!1}const k=async()=>{const r=`https://${t.value.supplierURL}ah-jiayu.github.io/NewControl/`;try{await navigator.clipboard.writeText(r),b.success({message:"复制成功",center:!0})}catch(l){console.error(l)}};function U(){t.value.id===""?u.value&&u.value.validate(r=>{r&&(i.value=!0,delete t.value.id,y.create(t.value).then(()=>{i.value=!1,_(),b.success({message:"新增成功",center:!0})}))}):u.value&&u.value.validate(r=>{if(r)try{let{id:l,keyWords:v,registerExamineOffOrOn:m,registerOffOrOn:n,supplierURL:f,webName:g}=t.value;const p={id:l,keyWords:v,registerExamineOffOrOn:m,registerOffOrOn:n,supplierURL:f,webName:g};i.value=!0,y.edit(p).then(()=>{i.value=!1,_(),b.success({message:"修改成功",center:!0})})}catch{}})}return(r,l)=>{const v=M,m=s("el-switch"),n=s("el-form-item"),f=s("el-col"),g=s("el-row"),p=s("el-input"),C=s("el-text"),x=s("el-button"),N=s("el-form"),R=j,L=E("loading");return W(($(),D("div",null,[e(v,{title:"站点设置管理"}),e(R,null,{default:a(()=>[e(N,{ref_key:"formRef",ref:u,model:t.value,rules:V.value,"label-width":"100px",inline:!1},{default:a(()=>[e(g,{gutter:20},{default:a(()=>[e(f,{span:3},{default:a(()=>[e(n,{label:"注册开关"},{default:a(()=>[e(m,{modelValue:t.value.registerOffOrOn,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:6},{default:a(()=>[e(n,{label:"注册审核"},{default:a(()=>[e(m,{modelValue:t.value.registerExamineOffOrOn,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{label:"网站名称",prop:"webName"},{default:a(()=>[e(p,{modelValue:t.value.webName,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.webName=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(n,{label:"keyWords"},{default:a(()=>[e(p,{modelValue:t.value.keyWords,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.keyWords=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(n,{label:"供应商网址",prop:"supplierURL"},{default:a(()=>[e(p,{modelValue:t.value.supplierURL,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.supplierURL=o),style:{width:"8rem"}},null,8,["modelValue"]),e(C,{class:"mx-1"},{default:a(()=>[w("ah-jiayu.github.io/NewControl/")]),_:1}),e(x,{type:"primary",link:"",onClick:k},{default:a(()=>[w("复制")]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(x,{type:"primary",onClick:U},{default:a(()=>[w(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])),[[L,i.value]])}}}),T=q(B,[["__scopeId","data-v-22edd7ee"]]);export{T as default};
