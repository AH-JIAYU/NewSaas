
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Le,aK as je,r as d,a2 as we,c as Se,D as Ve,a as c,al as Pe,o as n,b as h,f as l,w as t,i as o,am as I,a3 as B,a4 as $,e as r,g as u,G as _,l as v,j as b,P as ze,L as Ee,aM as Me,aN as Be,p as $e,aI as De,aJ as Re,F as xe,aD as D,_ as Ue}from"./index-gu6-sLbe.js";import{_ as Ge}from"./index.vue_vue_type_style_index_0_lang-DCSyOcGP.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-Dl9s2I1e.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-CIiShkjn.js";import{c as Fe,a as Ae}from"./index-CqVqMhr_.js";import He from"./index-B7pGZrFA.js";import{u as Qe}from"./otherFunctions_basicDictionary-Clp5NXJg.js";import{u as qe}from"./user_customer-BcQFbCdj.js";import"./apiLoading-C3ygyJBQ.js";import"./projectManagement-DL_jJ9kF.js";import"./survey_vipGroup-CjkRT1rc.js";import"./survey_vipGroup-LD229NOa.js";import"./basicDictionary-C9J3_07Q.js";import"./user_customer-CQdDZ6s2.js";const Je=C=>(De("data-v-e64bb26d"),C=C(),Re(),C),Ke=Je(()=>xe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),We=Le({name:"SurveyMyProjeckList",__name:"list",setup(C){const K=Qe(),W=qe(),{pagination:y,getParams:Xe,onSizeChange:X,onCurrentChange:Y,onSortChange:Ye}=je(),T=d([]),O=d([]),Z=d(""),R=d(!0),ee=d(),F=d(),N=d(!0),m=d([]),L=d(!1),j=d("default"),w=d(!1),S=d([{prop:"projectId",label:"项目Id",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"项目标识",sortabel:!0,checked:!0},{prop:"participation",label:"参与/完成/配额/限量",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家地区",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配状态",sortabel:!0,checked:!0},{prop:"memberGroupName",label:"分配目标",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),i=we({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),A=d([]),H=d();function te(p){console.log("详情")}function le(p){F.value.showEdit(p)}function oe(p){console.log("测查")}function ae(p){console.log("分配"),H.value.showEdit(p)}function ne(p){X(p)}function Q(p=1){Y(p)}function re(){Object.assign(i,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:0,time:[],beginTime:"",endTime:""}),V()}const ie=Se(()=>A.value.slice((y.value.page-1)*y.value.size,y.value.page*y.value.size));async function V(){R.value=!0;const p={...i};i.time&&i.time.length&&(p.beginTime=i.time[0]||"",p.endTime=i.time[1]||"");const a=await Ae.list(p);A.value=a.data.getMemberProjectListInfoList,y.value.total=a.data.getMemberProjectListInfoList.length,R.value=!1}return Ve(async()=>{S.value.forEach(p=>{p.checked&&m.value.push(p.prop)}),T.value=await K.getCountry(),O.value=await W.getCustomerList(),V()}),(p,a)=>{const x=c("el-input"),k=c("el-form-item"),se=c("ElOption"),U=c("el-select"),P=c("el-option"),ce=c("el-date-picker"),q=Ee,G=c("ElButton"),ue=c("ElFormItem"),pe=c("el-form"),me=Te,de=c("ElDivider"),fe=Ge,z=c("el-button"),_e=Me,be=Be,ge=c("el-row"),f=c("el-table-column"),E=c("el-text"),M=c("el-link"),J=c("el-tooltip"),ye=c("el-tag"),ke=c("ElSpace"),he=c("el-empty"),ve=c("el-table"),Ie=c("ElPagination"),Ce=$e,Ne=Pe("loading");return n(),h("div",{class:ze({"absolute-container":o(L)})},[l(Ce,null,{default:t(()=>[l(me,{"show-toggle":!1},{default:t(({fold:e,toggle:g})=>[l(pe,{model:o(i).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[l(k,{label:""},{default:t(()=>[l(x,{modelValue:o(i).projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>o(i).projectId=s),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:t(()=>[l(x,{clearable:"",modelValue:o(i).projectName,"onUpdate:modelValue":a[1]||(a[1]=s=>o(i).projectName=s),placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:t(()=>[l(x,{modelValue:o(i).projectIdentification,"onUpdate:modelValue":a[2]||(a[2]=s=>o(i).projectIdentification=s),clearable:"",placeholder:"项目标识"},null,8,["modelValue"])]),_:1}),I(l(k,{label:""},{default:t(()=>[l(U,{placeholder:"国家地区",modelValue:o(i).countryId,"onUpdate:modelValue":a[3]||(a[3]=s=>o(i).countryId=s),clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:t(()=>[(n(!0),h(B,null,$(o(T),s=>(n(),r(se,{label:s.chineseName,value:s.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),I(l(k,{label:""},{default:t(()=>[l(U,{placeholder:"客户简称",modelValue:o(i).clientId,"onUpdate:modelValue":a[4]||(a[4]=s=>o(i).clientId=s)},{default:t(()=>[(n(!0),h(B,null,$(o(O),s=>(n(),r(P,{key:s.tenantCustomerId,value:s.tenantCustomerId,label:s.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),I(l(k,{label:""},{default:t(()=>[l(U,{placeholder:"B2B/B2C",modelValue:o(i).b2bOrB2cStatus,"onUpdate:modelValue":a[5]||(a[5]=s=>o(i).b2bOrB2cStatus=s)},{default:t(()=>[l(P,{label:"全部",value:""}),l(P,{label:"B2B",value:"1"}),l(P,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[D,!e]]),I(l(k,null,{default:t(()=>[l(ce,{modelValue:o(i).time,"onUpdate:modelValue":a[6]||(a[6]=s=>o(i).time=s),type:"daterange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[D,!e]]),l(ue,null,{default:t(()=>[l(G,{type:"primary",onClick:a[7]||(a[7]=s=>V())},{icon:t(()=>[l(q,{name:"i-ep:search"})]),default:t(()=>[u(" 筛选 ")]),_:1}),l(G,{onClick:re},{icon:t(()=>[Ke]),default:t(()=>[u(" 重置 ")]),_:1}),l(G,{link:"",onClick:g},{icon:t(()=>[l(q,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[u(" "+_(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(de,{"border-style":"dashed"}),l(ge,{gutter:24},{default:t(()=>[l(fe),l(be,null,{default:t(()=>[l(z,{size:"default",onClick:a[8]||(a[8]=()=>{})},{default:t(()=>[u(" 导出 ")]),_:1}),l(_e,{border:o(N),"onUpdate:border":a[9]||(a[9]=e=>v(N)?N.value=e:null),tableAutoHeight:o(L),"onUpdate:tableAutoHeight":a[10]||(a[10]=e=>v(L)?L.value=e:null),checkList:o(m),"onUpdate:checkList":a[11]||(a[11]=e=>v(m)?m.value=e:null),columns:o(S),"onUpdate:columns":a[12]||(a[12]=e=>v(S)?S.value=e:null),"line-height":o(j),"onUpdate:lineHeight":a[13]||(a[13]=e=>v(j)?j.value=e:null),stripe:o(w),"onUpdate:stripe":a[14]||(a[14]=e=>v(w)?w.value=e:null),style:{"margin-left":"12px"},onQueryData:Q},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((n(),r(ve,{ref_key:"tableSortRef",ref:Z,style:{"margin-top":"10px"},"row-key":"id",data:o(ie),border:o(N),size:o(j),stripe:o(w)},{empty:t(()=>[l(he,{description:"暂无数据"})]),default:t(()=>[l(f,{type:"selection"}),o(m).includes("projectId")?(n(),r(f,{key:0,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):b("",!0),o(m).includes("projectName")?(n(),r(f,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),o(m).includes("projectIdentificationOrClientName")?(n(),r(f,{key:2,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",align:"center",label:"客户简称/标识"})):b("",!0),o(m).includes("participation")?(n(),r(f,{key:3,"show-overflow-tooltip":"",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:e})=>[u(_(e.participation)+"/ "+_(e.complete)+"/ "+_(e.num)+"/ "+_(e.limitedQuantity),1)]),_:1})):b("",!0),o(m).includes("doMoneyPrice")?(n(),r(f,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:t(({row:e})=>[l(E,{class:"mx-1"},{default:t(()=>[u(_(e.countryNameList.includes("中国")?`${e.memberPrice?`￥${e.memberPrice}`:"暂无数据"}`:`${e.doMoneyPrice?`$${e.doMoneyPrice}`:"暂无数据"}`),1)]),_:2},1024)]),_:1})):b("",!0),o(m).includes("memberPrice")?(n(),r(f,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(M,{key:0,size:"small",plain:"",type:"primary",onClick:g=>le(e)},{default:t(()=>[u(" 查看 ")]),_:2},1032,["onClick"])):(n(),r(E,{key:1},{default:t(()=>[u(" - ")]),_:1}))]),_:1})):b("",!0),o(m).includes("ir")?(n(),r(f,{key:6,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:t(({row:e})=>[u(_(e.ir)+"/ "+_(e.nir),1)]),_:1})):b("",!0),o(m).includes("countryNameList")?(n(),r(f,{key:7,"show-overflow-tooltip":"",align:"center",label:"国家地区"},{default:t(({row:e})=>[e.countryNameList.length>4?(n(),r(J,{key:0,class:"box-item",effect:"dark",content:e.countryNameList.join(","),placement:"top"},{default:t(()=>[l(M,{type:"primary"},{default:t(()=>[u(_(e.countryNameList.length),1)]),_:2},1024)]),_:2},1032,["content"])):(n(!0),h(B,{key:1},$(e.countryNameList,g=>(n(),r(ye,{key:g,type:"primary"},{default:t(()=>[u(_(g),1)]),_:2},1024))),128))]),_:1})):b("",!0),o(m).includes("memberStatus")?(n(),r(f,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配状态"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(E,{key:0,type:"primary"},{default:t(()=>[u(" 已分配 ")]),_:1})):(n(),r(E,{key:1},{default:t(()=>[u(" 未分配 ")]),_:1}))]),_:1})):b("",!0),o(m).includes("memberGroupName")?(n(),r(f,{key:9,"show-overflow-tooltip":"",align:"center",label:"分配目标"},{default:t(({row:e})=>[e.getMemberGroupNameInfoList.length?(n(),r(J,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:t(()=>[(n(!0),h(B,null,$(e.getMemberGroupNameInfoList,g=>(n(),h("div",null,_(g.memberGroupName)+"-"+_(g.memberGroupId),1))),256))]),default:t(()=>[l(M,{type:"primary"},{default:t(()=>[u(_(e.getMemberGroupNameInfoList.length),1)]),_:2},1024)]),_:2},1024)):(n(),r(M,{key:1},{default:t(()=>[u("-")]),_:1}))]),_:1})):b("",!0),o(m).includes("createTime")?(n(),r(f,{key:10,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"})):b("",!0),l(f,{align:"center",label:"操作",width:"200"},{default:t(({row:e})=>[l(ke,null,{default:t(()=>[e.getMemberGroupNameInfoList.length?b("",!0):(n(),r(z,{key:0,type:"primary",plain:"",size:"small",onClick:g=>ae(e)},{default:t(()=>[u(" 分配 ")]),_:2},1032,["onClick"])),l(z,{type:"primary",plain:"",size:"small",onClick:g=>oe(e)},{default:t(()=>[u(" 测查 ")]),_:2},1032,["onClick"]),l(z,{size:"small",plain:"",type:"primary",onClick:g=>te(e)},{default:t(()=>[u(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Ne,o(R)]]),l(Ie,{"current-page":o(y).page,total:o(y).total,"page-size":o(y).size,"page-sizes":o(y).sizes,layout:o(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ne,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(Oe,{ref_key:"CheckEditRef",ref:ee},null,512),l(Fe,{ref_key:"checkMembershipPriceRef",ref:F},null,512),l(He,{ref_key:"addAllocationEditRef",ref:H,onFetchData:V},null,512)],2)}}}),dt=Ue(We,[["__scopeId","data-v-e64bb26d"]]);export{dt as default};
