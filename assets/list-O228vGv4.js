
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aO as ge,r as s,a5 as ve,k as he,a as n,p as ke,o as p,b as ye,f as e,w as t,q as z,g as c,H as N,e as d,j as g,i as v,S as Ce,ba as we,E as Ne,N as Se,aQ as Ve,aR as Ge,ao as Ie,aJ as Ee,aK as De,s as Le,ap as $,R as Me}from"./index-dvAgep4p.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-Ctd8CtDI.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-D4xHj0Oa.js";import{s as xe}from"./apiLoading-B6ztFsDI.js";import Fe from"./index-BJvna8tA.js";import Te from"./index-BAwM9IWi.js";import{a as B}from"./survey_vipGroup-DPtMnE2Y.js";import{u as Re}from"./survey_vipGroup-BrtrIWs-.js";import"./survey_vip-Bbcvz08D.js";import"./survey_vip-ZqeFV5JJ.js";const $e=y=>(Ee("data-v-14c1380f"),y=y(),De(),y),Be=$e(()=>Le("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),He=_e({name:"vipGroup",__name:"list",setup(y){const H=Re(),{pagination:f,getParams:P,onSizeChange:j,onCurrentChange:A}=ge(),{format:Y}=we(),C=s(!1),U=s([]);s();const S=s(),x=s(),V=s(!0),G=s(!1),I=s("default"),u=s([]),E=s(!1),D=s([{label:"会员组ID",prop:"memberGroupId",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组名称",prop:"memberGroupName",sortable:!0,disableCheck:!1,checked:!0},{label:"组长名称(ID)",prop:"groupLeaderMemberName",sortable:!0,disableCheck:!1,checked:!0},{label:"成员",prop:"memberNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"项目数",prop:"projectNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"创建时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0},{label:"组状态",prop:"groupStatus",sortable:!0,disableCheck:!1,checked:!0}]),r=ve({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function q(){S.value.showEdit()}function O(l){S.value.showEdit(l)}function Q(l){x.value.showEdit(l)}function h(){f.value.page=1,w()}function J(l){j(l).then(()=>w())}function F(l=1){A(l).then(()=>w())}async function w(){try{C.value=!0;const l={...P(),...r};r.time&&r.time.length&&(l.beginTime=r.time[0]||"",l.endTime=r.time[1]||"");const{data:o}=await B.list(l);U.value=o.getMemberGroupInfoList,f.value.total=o.total,C.value=!1}catch{}finally{C.value=!1}}function K(){Object.assign(r,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),w()}async function W(l,o){const k={memberGroupId:o,groupStatus:l},{status:b}=await xe(B.changestatus(k));b===1&&Ne.success({message:"修改成功"}),H.GroupNameList=null,h()}return he(()=>{D.value.forEach(l=>{l.checked&&u.value.push(l.prop)}),h()}),(l,o)=>{const k=n("el-input"),b=n("el-form-item"),T=n("el-option"),X=n("el-select"),Z=n("el-date-picker"),R=Se,L=n("ElButton"),ee=n("ElFormItem"),te=n("ElForm"),ae=Ue,oe=n("ElDivider"),M=n("el-button"),le=ze,ne=Ve,re=Ge,se=n("el-row"),m=n("el-table-column"),ue=n("el-link"),ie=n("el-tag"),me=n("ElSwitch"),pe=n("el-empty"),ce=n("el-table"),de=n("ElPagination"),fe=Ie,be=ke("loading");return p(),ye("div",{class:Ce({"absolute-container":E.value})},[e(fe,null,{default:t(()=>[e(ae,{"show-toggle":!1},{default:t(({fold:a,toggle:_})=>[e(te,{model:r,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(b,{label:""},{default:t(()=>[e(k,{modelValue:r.memberGroupId,"onUpdate:modelValue":o[0]||(o[0]=i=>r.memberGroupId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID"},null,8,["modelValue"])]),_:1}),e(b,{label:""},{default:t(()=>[e(k,{modelValue:r.memberGroupName,"onUpdate:modelValue":o[1]||(o[1]=i=>r.memberGroupName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称"},null,8,["modelValue"])]),_:1}),e(b,{label:""},{default:t(()=>[e(k,{modelValue:r.groupLeaderMemberName,"onUpdate:modelValue":o[2]||(o[2]=i=>r.groupLeaderMemberName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称"},null,8,["modelValue"])]),_:1}),z(e(b,{label:""},{default:t(()=>[e(X,{modelValue:r.groupStatus,"onUpdate:modelValue":o[3]||(o[3]=i=>r.groupStatus=i),clearable:"",placeholder:"会员组状态"},{default:t(()=>[e(T,{label:"关闭",value:1}),e(T,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!a]]),z(e(b,null,{default:t(()=>[e(Z,{modelValue:r.time,"onUpdate:modelValue":o[4]||(o[4]=i=>r.time=i),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[$,!a]]),e(ee,null,{default:t(()=>[e(L,{type:"primary",onClick:o[5]||(o[5]=i=>F())},{icon:t(()=>[e(R,{name:"i-ep:search"})]),default:t(()=>[c(" 筛选 ")]),_:1}),e(L,{onClick:K},{icon:t(()=>[Be]),default:t(()=>[c(" 重置 ")]),_:1}),e(L,{link:"",onClick:_},{icon:t(()=>[e(R,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[c(" "+N(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(oe,{"border-style":"dashed"}),e(se,null,{default:t(()=>[e(le,null,{default:t(()=>[e(M,{type:"primary",size:"default",onClick:q},{default:t(()=>[c(" 新增 ")]),_:1})]),_:1}),e(re,null,{default:t(()=>[e(M,{size:"default"},{default:t(()=>[c(" 导出 ")]),_:1}),e(ne,{border:V.value,"onUpdate:border":o[6]||(o[6]=a=>V.value=a),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[7]||(o[7]=a=>E.value=a),checkList:u.value,"onUpdate:checkList":o[8]||(o[8]=a=>u.value=a),columns:D.value,"onUpdate:columns":o[9]||(o[9]=a=>D.value=a),"line-height":I.value,"onUpdate:lineHeight":o[10]||(o[10]=a=>I.value=a),stripe:G.value,"onUpdate:stripe":o[11]||(o[11]=a=>G.value=a),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),z((p(),d(ce,{border:V.value,data:U.value,size:I.value,stripe:G.value},{empty:t(()=>[e(pe,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(m,{align:"center",type:"selection"}),u.value.includes("memberGroupId")?(p(),d(m,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):g("",!0),u.value.includes("memberGroupName")?(p(),d(m,{key:1,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"})):g("",!0),u.value.includes("groupLeaderMemberName")?(p(),d(m,{key:2,align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:t(({row:a})=>[c(N(a.groupLeaderMemberName?a.groupLeaderMemberName:"-"),1)]),_:1})):g("",!0),u.value.includes("memberNumber")?(p(),d(m,{key:3,align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"})):g("",!0),u.value.includes("projectNumber")?(p(),d(m,{key:4,align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:t(({row:a})=>[e(ue,{type:"primary",onClick:_=>Q(a)},{default:t(()=>[c(N(a.projectNumber),1)]),_:2},1032,["onClick"])]),_:1})):g("",!0),u.value.includes("createTime")?(p(),d(m,{key:5,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:t(({row:a})=>[e(ie,{effect:"plain",type:"info"},{default:t(()=>[c(N(v(Y)(a.createTime)),1)]),_:2},1024)]),_:1})):g("",!0),u.value.includes("groupStatus")?(p(),d(m,{key:6,align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:t(({row:a})=>[e(me,{modelValue:a.groupStatus,"onUpdate:modelValue":_=>a.groupStatus=_,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:_=>W(_,a.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):g("",!0),e(m,{align:"center",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:t(({row:a})=>[e(M,{size:"small",plain:"",type:"primary",onClick:_=>O(a)},{default:t(()=>[c(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[be,C.value]]),e(de,{"current-page":v(f).page,total:v(f).total,"page-size":v(f).size,"page-sizes":v(f).sizes,layout:v(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:F},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Fe,{ref_key:"editRef",ref:S,onFetchData:h},null,512),e(Te,{ref_key:"checkRef",ref:x,onFetchData:h},null,512)],2)}}}),Xe=Me(He,[["__scopeId","data-v-14c1380f"]]);export{Xe as default};
