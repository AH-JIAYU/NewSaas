
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ge,aO as _e,r as v,a5 as be,k as ve,a as u,p as ye,o as r,b as $,f as e,w as t,F as ne,t as re,e as d,i as m,g as o,H as _,q as ie,j as b,s as A,S as ke,N as he,aQ as we,aR as ze,ao as je,aJ as Ce,aK as Se,R as Ie}from"./index-DcwR6RNz.js";import{_ as Ne}from"./index.vue_vue_type_style_index_0_lang-OH0K3u4D.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-Cya7gTeA.js";import{u as Ue,e as Le,a as se}from"./index-VBPXwX-J.js";const ue=U=>(Ce("data-v-461b088f"),U=U(),Se(),U),xe=ue(()=>A("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),De=ue(()=>A("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ee=ge({name:"outsource",__name:"list",setup(U){const L=Ue(),{pagination:g,getParams:pe,onSizeChange:de,onCurrentChange:ce}=_e(),F=v(""),S=v(!0),y=v(!0),P=v(),I=v(!1),i=v([]),k=v("default"),h=v(!1),N=v([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),n=be({tenantId:"",tenantName:"",projectStatus:"",type:2}),x=v([]);function B(f){P.value.showEdit(f,n.type===2?1:0)}function M(f){de(f).then(()=>z())}function w(f=1){ce(f).then(()=>z())}function Q(){Object.assign(n,{tenantId:"",tenantName:"",projectStatus:"",type:2}),z()}async function z(){try{S.value=!0;const f={...pe(),...n};if(n.type===1){const l=await se.list(f);x.value=l.data.projectAllocationInfoList,g.value.total=l.data.total}else{const l=await se.meList(f);x.value=l.data.projectMeAllocationInfoList,g.value.total=l.data.total}S.value=!1}catch{}finally{S.value=!1}}return ve(()=>{N.value.forEach(f=>{f.checked&&i.value.push(f.prop)}),z()}),(f,l)=>{const D=u("el-input"),j=u("el-form-item"),O=u("el-option"),T=u("el-select"),E=he,C=u("ElButton"),q=u("ElFormItem"),J=u("el-form"),K=Ve,G=u("ElDivider"),W=Ne,H=u("el-button"),X=we,Y=ze,Z=u("el-row"),p=u("el-table-column"),c=u("el-text"),ee=u("el-empty"),te=u("el-table"),le=u("ElPagination"),ae=u("el-tab-pane"),me=u("el-tabs"),fe=je,oe=ye("loading");return r(),$("div",{class:ke({"absolute-container":I.value})},[e(fe,null,{default:t(()=>[e(me,{modelValue:n.type,"onUpdate:modelValue":l[22]||(l[22]=a=>n.type=a),onTabChange:z},{default:t(()=>[e(ae,{label:"外包项目",name:2},{default:t(()=>[e(K,{"show-toggle":!1},{default:t(({fold:a,toggle:V})=>[e(J,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(j,{label:""},{default:t(()=>[e(D,{modelValue:n.tenantId,"onUpdate:modelValue":l[0]||(l[0]=s=>n.tenantId=s),clearable:"",placeholder:"租户id"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(D,{modelValue:n.tenantName,"onUpdate:modelValue":l[1]||(l[1]=s=>n.tenantName=s),clearable:"",placeholder:"租户名称"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(T,{modelValue:n.projectStatus,"onUpdate:modelValue":l[2]||(l[2]=s=>n.projectStatus=s),clearable:"",placeholder:"项目状态"},{default:t(()=>[(r(!0),$(ne,null,re(m(L).projectStatusList,(s,R)=>(r(),d(O,{label:s,value:R+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(q,null,{default:t(()=>[e(C,{type:"primary",onClick:l[3]||(l[3]=s=>w())},{icon:t(()=>[e(E,{name:"i-ep:search"})]),default:t(()=>[o(" 筛选 ")]),_:1}),e(C,{onClick:Q},{icon:t(()=>[xe]),default:t(()=>[o(" 重置 ")]),_:1}),e(C,{disabled:"",link:"",onClick:V},{icon:t(()=>[e(E,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[o(" "+_(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(G,{"border-style":"dashed"}),e(Z,{gutter:24},{default:t(()=>[e(W),e(Y,null,{default:t(()=>[e(H,{size:"default",onClick:l[4]||(l[4]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),e(X,{border:y.value,"onUpdate:border":l[5]||(l[5]=a=>y.value=a),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":l[6]||(l[6]=a=>I.value=a),checkList:i.value,"onUpdate:checkList":l[7]||(l[7]=a=>i.value=a),columns:N.value,"onUpdate:columns":l[8]||(l[8]=a=>N.value=a),"line-height":k.value,"onUpdate:lineHeight":l[9]||(l[9]=a=>k.value=a),stripe:h.value,"onUpdate:stripe":l[10]||(l[10]=a=>h.value=a),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ie((r(),d(te,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:y.value,size:k.value,stripe:h.value},{empty:t(()=>[e(ee,{description:"暂无数据"})]),default:t(()=>[e(p,{align:"center",type:"selection"}),i.value.includes("tenantId")?(r(),d(p,{key:0,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"})):b("",!0),i.value.includes("tenantName")?(r(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):b("",!0),i.value.includes("projectId")?(r(),d(p,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"})):b("",!0),i.value.includes("projectName")?(r(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),i.value.includes("participationNumber")?(r(),d(p,{key:4,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:a})=>[e(c,{size:"large"},{default:t(()=>[o(_(a.participationNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"success",size:"large"},{default:t(()=>[o(_(a.doneNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"warning",size:"large"},{default:t(()=>[o(_(a.num||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{size:"large"},{default:t(()=>[o(_(a.limitedQuantity||0),1)]),_:2},1024)]),_:1})):b("",!0),i.value.includes("projectStatus")?(r(),d(p,{key:5,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:t(({row:a})=>[A("span",null,_(m(L).projectStatusList[a.projectStatus-1]),1)]),_:1})):b("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e(H,{type:"primary",plain:"",size:"small",onClick:V=>B(a)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[oe,S.value]]),e(le,{"current-page":m(g).page,total:m(g).total,"page-size":m(g).size,"page-sizes":m(g).sizes,layout:m(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(ae,{label:"接收项目",name:1},{default:t(()=>[e(K,{"show-toggle":!1},{default:t(({fold:a,toggle:V})=>[e(J,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(j,{label:""},{default:t(()=>[e(D,{modelValue:n.tenantId,"onUpdate:modelValue":l[11]||(l[11]=s=>n.tenantId=s),clearable:"",placeholder:"租户id"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(D,{modelValue:n.tenantName,"onUpdate:modelValue":l[12]||(l[12]=s=>n.tenantName=s),clearable:"",placeholder:"租户名称"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(T,{modelValue:n.projectStatus,"onUpdate:modelValue":l[13]||(l[13]=s=>n.projectStatus=s),clearable:"",placeholder:"项目状态"},{default:t(()=>[(r(!0),$(ne,null,re(m(L).projectStatusList,(s,R)=>(r(),d(O,{label:s,value:R+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(q,null,{default:t(()=>[e(C,{type:"primary",onClick:l[14]||(l[14]=s=>w())},{icon:t(()=>[e(E,{name:"i-ep:search"})]),default:t(()=>[o(" 筛选 ")]),_:1}),e(C,{onClick:Q},{icon:t(()=>[De]),default:t(()=>[o(" 重置 ")]),_:1}),e(C,{disabled:"",link:"",onClick:V},{icon:t(()=>[e(E,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[o(" "+_(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(G,{"border-style":"dashed"}),e(Z,{gutter:24},{default:t(()=>[e(W),e(Y,null,{default:t(()=>[e(H,{size:"default",onClick:l[15]||(l[15]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),e(X,{border:y.value,"onUpdate:border":l[16]||(l[16]=a=>y.value=a),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":l[17]||(l[17]=a=>I.value=a),checkList:i.value,"onUpdate:checkList":l[18]||(l[18]=a=>i.value=a),columns:N.value,"onUpdate:columns":l[19]||(l[19]=a=>N.value=a),"line-height":k.value,"onUpdate:lineHeight":l[20]||(l[20]=a=>k.value=a),stripe:h.value,"onUpdate:stripe":l[21]||(l[21]=a=>h.value=a),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ie((r(),d(te,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:y.value,size:k.value,stripe:h.value},{empty:t(()=>[e(ee,{description:"暂无数据"})]),default:t(()=>[e(p,{align:"center",type:"selection"}),i.value.includes("tenantId")?(r(),d(p,{key:0,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"})):b("",!0),i.value.includes("tenantName")?(r(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):b("",!0),i.value.includes("projectId")?(r(),d(p,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"})):b("",!0),i.value.includes("projectName")?(r(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),i.value.includes("participationNumber")?(r(),d(p,{key:4,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:a})=>[e(c,{size:"large"},{default:t(()=>[o(_(a.participationNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"success",size:"large"},{default:t(()=>[o(_(a.doneNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"warning",size:"large"},{default:t(()=>[o(_(a.num||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{size:"large"},{default:t(()=>[o(_(a.limitedQuantity||0),1)]),_:2},1024)]),_:1})):b("",!0),i.value.includes("projectStatus")?(r(),d(p,{key:5,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:t(({row:a})=>[A("span",null,_(m(L).projectStatusList[a.projectStatus-1]),1)]),_:1})):b("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e(H,{type:"primary",plain:"",size:"small",onClick:V=>B(a)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[oe,S.value]]),e(le,{"current-page":m(g).page,total:m(g).total,"page-size":m(g).size,"page-sizes":m(g).sizes,layout:m(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),e(Le,{ref_key:"editRef",ref:P,onFetchData:z},null,512)]),_:1})],2)}}}),Fe=Ie(Ee,[["__scopeId","data-v-461b088f"]]);export{Fe as default};
