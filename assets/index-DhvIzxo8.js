
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ie,r as m,aK as Le,a2 as Ee,D as Ue,a as s,al as Be,o as u,b as R,f as e,w as o,i as t,am as C,g,G as z,l as y,e as c,j as _,a3 as ze,a4 as Pe,P as xe,ak as G,L as Ae,aM as De,aN as Te,p as Me,aI as Re,aJ as Fe,F as Ne,aD as P,_ as $e}from"./index-0ArysPfv.js";import{_ as He}from"./index.vue_vue_type_style_index_0_lang-CkNYq9vp.js";import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang-CNd1armE.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-DeFFuPFD.js";import je from"./index-CNpDUVrW.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang-CcB0A1an.js";import{u as Ge}from"./configuration_supplierLevel-B_Rn0k-b.js";import{s as Je}from"./apiLoading-pkDrSo-a.js";import{a as x}from"./user_supplier-C5jMljds.js";import{u as Ke}from"./user_supplier-CsEdkVmD.js";import"./index.vue_vue_type_script_setup_true_lang-DMxh81Bp.js";import"./index.vue_vue_type_script_setup_true_lang-BKO0rrWW.js";import"./user_customer-RQJ1u5Qg.js";import"./user_customer-DNW_8OrZ.js";import"./otherFunctions_basicDictionary-DKMNnqdN.js";import"./basicDictionary-CNk_RKv9.js";import"./stagedData-BTaHu-O2.js";import"./index.vue_vue_type_script_setup_true_lang-DIAgb9a0.js";const Qe=w=>(Re("data-v-d9727e06"),w=w(),Fe(),w),We=Qe(()=>Ne("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Xe=["value"],Ze=Ie({name:"UserSupplierIndex",__name:"index",setup(w){const J=Ke(),K=Ge(),F=m([]),{pagination:h,getParams:Q,onSizeChange:W,onCurrentChange:X}=Le(),A=m(!1),N=m([]),Z=m(),D=m(),$=m(),H=m(),V=m(!0),I=m(!1),L=m("default"),p=m([]),E=m(!1),U=m([{label:"供应商id",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称+所属国",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"余额-美元",checked:!0,sortable:!0,prop:"balanceUs"},{label:"余额-人民币",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级id",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"B2B|B2C"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),i=Ee({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ee(){D.value.showEdit()}function te(n){D.value.showEdit(n)}function le(n){$.value.showEdit(n)}async function ae(n){const{data:a}=await x.detail({tenantSupplierId:n.tenantSupplierId});if(a.remark!==n.remark){a.countryType=a.subordinateCountryId==="343"?1:2,a.remark=n.remark;const{status:b}=await x.edit(a);b===1&&G.success({message:"更新备注",center:!0}),B()}}async function Y(n,a){const b={status:n,tenantSupplierId:a},{status:v}=await Je(x.changestatus(b));v===1&&G.success({message:"修改成功"}),B(),J.TenantSupplierList=null}function B(){h.value.page=1,k()}function oe(){Object.assign(i,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),k()}function ne(n){H.value.showEdit(n)}function ie(n){W(n).then(()=>k())}function O(n=1){X(n).then(()=>k())}async function k(){A.value=!0;const n={...Q(),...i};i.time&&i.time.length&&(n.beginTime=i.time[0]||"",n.endTime=i.time[1]||"");const{data:a}=await x.list(n);N.value=a.getTenantSupplierInfoList,h.value.total=a.total,A.value=!1}function re(n){Z.value=n}return Ue(async()=>{U.value.forEach(n=>{n.checked&&p.value.push(n.prop)}),F.value=await K.getLevelNameList(),B()}),(n,a)=>{const b=s("el-input"),v=s("el-form-item"),T=s("el-option"),se=s("el-select"),ue=s("el-date-picker"),j=Ae,M=s("ElButton"),pe=s("ElFormItem"),ce=s("ElForm"),de=Ye,me=s("ElDivider"),S=s("el-button"),fe=He,_e=De,be=Te,ge=s("el-row"),f=s("el-table-column"),ve=s("el-text"),q=s("ElSwitch"),he=s("ElTableColumn"),ke=s("ElSpace"),ye=s("el-empty"),Se=s("el-table"),Ce=s("ElPagination"),we=Me,Ve=Be("loading");return u(),R("div",{class:xe({"absolute-container":t(E)})},[e(we,null,{default:o(()=>[e(de,{"show-toggle":!1},{default:o(({fold:l,toggle:r})=>[e(ce,{model:t(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(v,{label:""},{default:o(()=>[e(b,{modelValue:t(i).tenantSupplierId,"onUpdate:modelValue":a[0]||(a[0]=d=>t(i).tenantSupplierId=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),e(v,{label:""},{default:o(()=>[e(b,{modelValue:t(i).supplierAccord,"onUpdate:modelValue":a[1]||(a[1]=d=>t(i).supplierAccord=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),e(v,{label:""},{default:o(()=>[e(b,{modelValue:t(i).supplierPhone,"onUpdate:modelValue":a[2]||(a[2]=d=>t(i).supplierPhone=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码"},null,8,["modelValue"])]),_:1}),C(e(v,{label:""},{default:o(()=>[e(b,{modelValue:t(i).accountName,"onUpdate:modelValue":a[3]||(a[3]=d=>t(i).accountName=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称"},null,8,["modelValue"])]),_:2},1536),[[P,!l]]),C(e(v,{label:""},{default:o(()=>[e(b,{modelValue:t(i).emailAddress,"onUpdate:modelValue":a[4]||(a[4]=d=>t(i).emailAddress=d),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱"},null,8,["modelValue"])]),_:2},1536),[[P,!l]]),C(e(v,{label:""},{default:o(()=>[e(se,{modelValue:t(i).supplierStatus,"onUpdate:modelValue":a[5]||(a[5]=d=>t(i).supplierStatus=d),clearable:"",placeholder:"供应商状态"},{default:o(()=>[e(T,{label:"开启",value:2}),e(T,{label:"关闭",value:1}),e(T,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[P,!l]]),C(e(v,{label:""},{default:o(()=>[e(ue,{modelValue:t(i).time,"onUpdate:modelValue":a[6]||(a[6]=d=>t(i).time=d),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true"},null,8,["modelValue"])]),_:2},1536),[[P,!l]]),e(pe,null,{default:o(()=>[e(M,{type:"primary",onClick:a[7]||(a[7]=d=>O())},{icon:o(()=>[e(j,{name:"i-ep:search"})]),default:o(()=>[g(" 筛选 ")]),_:1}),e(M,{onClick:oe},{icon:o(()=>[We]),default:o(()=>[g(" 重置 ")]),_:1}),e(M,{link:"",onClick:r},{icon:o(()=>[e(j,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[g(" "+z(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(me,{"border-style":"dashed"}),e(ge,null,{default:o(()=>[e(fe,null,{default:o(()=>[e(S,{type:"primary",size:"default",onClick:ee},{default:o(()=>[g(" 新增 ")]),_:1})]),_:1}),e(be,null,{default:o(()=>[e(S,{size:"default"},{default:o(()=>[g(" 导出 ")]),_:1}),e(_e,{border:t(V),"onUpdate:border":a[8]||(a[8]=l=>y(V)?V.value=l:null),tableAutoHeight:t(E),"onUpdate:tableAutoHeight":a[9]||(a[9]=l=>y(E)?E.value=l:null),checkList:t(p),"onUpdate:checkList":a[10]||(a[10]=l=>y(p)?p.value=l:null),columns:t(U),"onUpdate:columns":a[11]||(a[11]=l=>y(U)?U.value=l:null),"line-height":t(L),"onUpdate:lineHeight":a[12]||(a[12]=l=>y(L)?L.value=l:null),stripe:t(I),"onUpdate:stripe":a[13]||(a[13]=l=>y(I)?I.value=l:null),style:{"margin-left":"12px"},onQueryData:B},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((u(),c(Se,{border:t(V),data:t(N),size:t(L),stripe:t(I),onSelectionChange:re},{empty:o(()=>[e(ye,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[e(f,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),t(p).includes("tenantSupplierId")?(u(),c(f,{key:0,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):_("",!0),t(p).includes("supplierAccord")?(u(),c(f,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称(所属国家)"})):_("",!0),t(p).includes("balanceUs")?(u(),c(f,{key:2,align:"center",prop:"balanceUs","show-overflow-tooltip":"",label:"余额($)"})):_("",!0),t(p).includes("balanceHumanLife")?(u(),c(f,{key:3,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"余额(￥)"})):_("",!0),t(p).includes("amountPendingTrial")?(u(),c(f,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"})):_("",!0),t(p).includes("supplierLevelId")?(u(),c(f,{key:5,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:o(({row:l})=>[(u(!0),R(ze,null,Pe(t(F),r=>(u(),R("div",{key:r.tenantSupplierLevelId,value:r.levelNameOrAdditionRatio},[r.tenantSupplierLevelId===l.supplierLevelId?(u(),c(ve,{key:0,class:"mx-1"},{default:o(()=>[g(z(r.levelNameOrAdditionRatio),1)]),_:2},1024)):_("",!0)],8,Xe))),128))]),_:1})):_("",!0),t(p).includes("B2B|B2C")?(u(),c(f,{key:6,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:o(({row:l})=>[g(z(l.b2bStatus&&l.b2bStatus===2?"√":"×")+" | "+z(l.b2cStatus&&l.b2cStatus===2?"√":"×"),1)]),_:1})):_("",!0),t(p).includes("settlementCycle")?(u(),c(f,{key:7,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"})):_("",!0),t(p).includes("supplierStatus")?(u(),c(he,{key:8,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:o(({row:l})=>[l.supplierStatus===3?(u(),c(q,{key:0,modelValue:l.supplierStatus,"onUpdate:modelValue":r=>l.supplierStatus=r,"inline-prompt":"","inactive-value":2,"active-value":3,"inactive-text":"启用","active-text":"待审核",onChange:r=>Y(r,l.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(u(),c(q,{key:1,modelValue:l.supplierStatus,"onUpdate:modelValue":r=>l.supplierStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:r=>Y(r,l.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):_("",!0),t(p).includes("createTime")?(u(),c(f,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):_("",!0),t(p).includes("remark")?(u(),c(f,{key:10,align:"center",prop:"remark","show-overflow-tooltip":"",label:"备注"},{default:o(({row:l})=>[e(b,{modelValue:l.remark,"onUpdate:modelValue":r=>l.remark=r,onBlur:r=>ae(l)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1})):_("",!0),e(f,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"250"},{default:o(({row:l})=>[e(ke,null,{default:o(()=>[e(S,{size:"small",plain:"",type:"primary",onClick:ne},{default:o(()=>[g(" 加减款 ")]),_:1}),e(S,{size:"small",plain:"",type:"primary",onClick:r=>te(l)},{default:o(()=>[g(" 编辑 ")]),_:2},1032,["onClick"]),e(S,{size:"small",plain:"",type:"primary",onClick:r=>le(l)},{default:o(()=>[g(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Ve,t(A)]]),e(Ce,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:ie,onCurrentChange:O},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Oe,{ref_key:"editRef",ref:D,onFetchData:k},null,512),e(je,{ref_key:"checkRef",ref:$,onFetchData:k},null,512),e(qe,{ref_key:"plusMinusPaymentsRef",ref:H,onFetchData:k},null,512)],2)}}}),vt=$e(Ze,[["__scopeId","data-v-d9727e06"]]);export{vt as default};
