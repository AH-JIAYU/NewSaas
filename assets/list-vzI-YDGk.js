
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as se,aM as ie,r,l as ue,a as n,al as ce,o as c,b as pe,f as e,w as l,g as b,G as de,am as me,e as p,j as d,i as v,Q as _e,L as fe,aO as be,aP as ve,ak as ge,aK as he,aL as ke,D as Ie,P as Ce}from"./index-DTbZy0mB.js";import{_ as ye}from"./index.vue_vue_type_style_index_0_lang-BJvy7ZvK.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-Pwy1xTsL.js";import{_ as je}from"./index.vue_vue_type_script_setup_true_lang-Y8calTK_.js";import{_ as De,a as ze}from"./index.vue_vue_type_script_setup_true_lang-DVhRw9L7.js";import"./file-CsVARK9L.js";import"./download-C8PHVIy1.js";const Ve=g=>(he("data-v-25271597"),g=g(),ke(),g),Ee=Ve(()=>Ie("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ne=se({name:"ProjectManagementMaterialsIndex",__name:"list",setup(g){const{getParams:L,pagination:m,onSizeChange:B,onCurrentChange:F}=ie(),H=r(""),N=r(!0),h=r(!0),S=r(),P=r(),k=r(!1),s=r([]),I=r("default"),C=r(!1),R=r([]),y=r([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"客户简称/标识",prop:"customerIdentification",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),i=r({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),U=r([]);function M(a){R.value.length||P.value.showEdit(a)}function T(a){S.value.showEdit(a)}function A(a){R.value=a}function G(a){B(a).then(()=>_())}function w(a=1){F(a).then(()=>_())}function O(){Object.assign(i.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),_()}async function _(){N.value=!0;const a={...L(),...i.value},t=await ze.list(a);U.value=t.data.projectMaterialInfoList,m.value.total=t.data.total,N.value=!1}return ue(()=>{y.value.forEach(a=>{a.checked&&s.value.push(a.prop)}),_()}),(a,t)=>{const $=n("el-tab-pane"),Q=n("el-tabs"),j=n("el-input"),D=n("el-form-item"),x=fe,z=n("ElButton"),q=n("ElFormItem"),K=n("el-form"),J=we,W=n("ElDivider"),X=ye,V=n("el-button"),Y=be,Z=ve,ee=n("el-row"),u=n("el-table-column"),te=n("ElSpace"),le=n("el-empty"),oe=n("el-table"),ae=n("ElPagination"),ne=ge,re=ce("loading");return c(),pe("div",{class:_e({"absolute-container":k.value})},[e(ne,null,{default:l(()=>[e(Q,{modelValue:i.value.type,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value.type=o),class:"demo-tabs",onTabChange:_},{default:l(()=>[e($,{label:"子会员素材",name:1}),e($,{label:"会员素材",name:2})]),_:1},8,["modelValue"]),e(J,{"show-toggle":!1},{default:l(({fold:o,toggle:E})=>[e(K,{model:i.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[e(D,{label:""},{default:l(()=>[e(j,{modelValue:i.value.memberChildId,"onUpdate:modelValue":t[1]||(t[1]=f=>i.value.memberChildId=f),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:l(()=>[e(j,{modelValue:i.value.projectId,"onUpdate:modelValue":t[2]||(t[2]=f=>i.value.projectId=f),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),e(D,{label:""},{default:l(()=>[e(j,{modelValue:i.value.projectName,"onUpdate:modelValue":t[3]||(t[3]=f=>i.value.projectName=f),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),e(q,null,{default:l(()=>[e(z,{type:"primary",onClick:t[4]||(t[4]=f=>w())},{icon:l(()=>[e(x,{name:"i-ep:search"})]),default:l(()=>[b(" 筛选 ")]),_:1}),e(z,{onClick:O},{icon:l(()=>[Ee]),default:l(()=>[b(" 重置 ")]),_:1}),e(z,{link:"",onClick:E,disabled:""},{icon:l(()=>[e(x,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[b(" "+de(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(W,{"border-style":"dashed"}),e(ee,{gutter:24},{default:l(()=>[e(X),e(Z,null,{default:l(()=>[e(V,{size:"default",onClick:t[5]||(t[5]=()=>{})},{default:l(()=>[b(" 导出 ")]),_:1}),e(Y,{border:h.value,"onUpdate:border":t[6]||(t[6]=o=>h.value=o),tableAutoHeight:k.value,"onUpdate:tableAutoHeight":t[7]||(t[7]=o=>k.value=o),checkList:s.value,"onUpdate:checkList":t[8]||(t[8]=o=>s.value=o),columns:y.value,"onUpdate:columns":t[9]||(t[9]=o=>y.value=o),"line-height":I.value,"onUpdate:lineHeight":t[10]||(t[10]=o=>I.value=o),stripe:C.value,"onUpdate:stripe":t[11]||(t[11]=o=>C.value=o),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),me((c(),p(oe,{ref_key:"tableSortRef",ref:H,style:{"margin-top":"10px"},"row-key":"id",data:U.value,border:h.value,size:I.value,stripe:C.value,onSelectionChange:A},{empty:l(()=>[e(le,{description:"暂无数据"})]),default:l(()=>[e(u,{type:"selection"}),s.value.includes("memberChildId")?(c(),p(u,{key:0,"show-overflow-tooltip":"",prop:"memberChildId",align:"center",label:"会员ID"})):d("",!0),s.value.includes("memberChildName")?(c(),p(u,{key:1,"show-overflow-tooltip":"",prop:"memberChildName",align:"center",label:"会员名称"})):d("",!0),s.value.includes("memberChildGroupId")?(c(),p(u,{key:2,"show-overflow-tooltip":"",prop:"memberChildGroupId",align:"center",label:"会员组ID"})):d("",!0),s.value.includes("projectId")?(c(),p(u,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"center",label:"项目ID"})):d("",!0),s.value.includes("projectName")?(c(),p(u,{key:4,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):d("",!0),s.value.includes("customerIdentification")?(c(),p(u,{key:5,"show-overflow-tooltip":"",prop:"customerIdentification",align:"center",label:"客户简称/标识"})):d("",!0),s.value.includes("instructions")?(c(),p(u,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"center",label:"说明"})):d("",!0),s.value.includes("createTime")?(c(),p(u,{key:7,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"})):d("",!0),e(u,{align:"center",label:"操作",width:"240"},{default:l(({row:o})=>[e(te,null,{default:l(()=>[e(V,{type:"primary",plain:"",size:"small",onClick:E=>M(o)},{default:l(()=>[b(" 查看 ")]),_:2},1032,["onClick"]),e(V,{type:"danger",plain:"",size:"small",onClick:E=>T(o)},{default:l(()=>[b(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[re,!1]]),e(ae,{"current-page":v(m).page,total:v(m).total,"page-size":v(m).size,"page-sizes":v(m).sizes,layout:v(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"]),e(je,{ref_key:"deleteRef",ref:S},null,512),e(De,{ref_key:"detailsRef",ref:P,onFetchData:_},null,512)]),_:1})],2)}}}),Be=Ce(Ne,[["__scopeId","data-v-25271597"]]);export{Be as default};
