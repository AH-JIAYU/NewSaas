
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as A}from"./index-DfQoqQIn.js";import"./index-iJRjh0Y-.js";import{a as E}from"./survey_myProjeck-BMZ9lPkl.js";import{f as M,D as $}from"./download-DI4LymLn.js";import{d as q,r as s,a as n,q as H,s as P,o,b as u,f as p,w as h,j as x,F as Q,t as R,y,g as Z,z as G,N as J,e as N,i as D,aM as K,aH as O,aI as W,L as X}from"./index-DFGdtBQB.js";import{w as V,x as b,p as Y}from"./pdf-BhHCHn5I.js";const j=m=>(O("data-v-d94c7a2a"),m=m(),W(),m),ee={key:0,class:"titleClass"},ae={key:1,class:"demo-image__preview",style:{display:"flex"}},te={class:"image-info"},le=j(()=>y("div",{class:"i-f7:doc-text w-1rem h-1rem"},null,-1)),se=j(()=>y("div",{class:"titleClass"},"描述",-1)),oe={class:"radius flex gap-2 p-2"},ie=q({__name:"index",setup(m,{expose:z}){const v=s(!1),w=s(""),e=s({}),k=s([]),_=s([]),U=s([]),f=s(!1),c=t=>{const a=t.match(/\.([a-zA-Z0-9]+)$/);return a?a[1]:""};async function L(t){try{if(v.value=!0,w.value="项目详情",t){f.value=!0;const a=await E.getQuotaProjectInfo({projectId:t.projectId});if(e.value=a.data,e.value.descriptionUrl!==""){const g=e.value.descriptionUrl.split(",");_.value=g;const i={doc:V,docx:V,xls:b,xlsx:b,pdf:Y};g.map(async l=>{const r=await M.detail({fileName:l});let C={src:i[c(l)]?i[c(l)]:r.data.fileUrl,src1:r.data.fileUrl,name:c(l)};U.value.push(C),k.value.push(i[c(l)]?i[c(l)]:r.data.fileUrl)})}_.value=k.value,f.value=!1}}catch{}finally{f.value=!1}}async function T(t){if(t){const a=decodeURIComponent(t.split("/").pop().split("?")[0]);await $(t,a)}}function B(){w.value="",e.value={},k.value=[],_.value=[],U.value=[],v.value=!1}return z({showEdit:L}),(t,a)=>{const g=n("el-image"),i=n("el-link"),l=n("el-col"),r=n("el-row"),C=n("el-empty"),F=n("el-dialog"),S=H("loading");return P((o(),u("div",null,[p(F,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=d=>v.value=d),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:w.value,draggable:"",width:"50%",onClose:B},{default:h(()=>[e.value.descriptionUrl?(o(),u("div",ee,"图片/文件")):x("",!0),e.value.descriptionUrl?(o(),u("div",ae,[(o(!0),u(Q,null,R(U.value,(d,I)=>(o(),u("div",{key:I},[p(g,{style:{width:"6.25rem",height:"6.25rem","margin-right":"15px"},src:d.src,"preview-src-list":_.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":I,fit:"cover"},null,8,["src","preview-src-list","initial-index"]),y("div",te,[le,p(i,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:ne=>T(d.src1)},{default:h(()=>[Z(G(d.name)+"下载",1)]),_:2},1032,["onClick"])])]))),128))])):x("",!0),p(r,{gutter:20,class:J({isNone:!e.value.descriptionUrl&&!e.value.richText})},{default:h(()=>[p(l,{span:24},{default:h(()=>[se,y("div",oe,[e.value.richText?(o(),N(D(A),{key:0,value:e.value.richText},null,8,["value"])):x("",!0)])]),_:1})]),_:1},8,["class"]),!e.value.descriptionUrl&&!e.value.richText?(o(),N(C,{key:2,image:D(K),"image-size":300},null,8,["image"])):x("",!0)]),_:1},8,["modelValue","title"])])),[[S,f.value]])}}}),ve=X(ie,[["__scopeId","data-v-d94c7a2a"]]);export{ve as default};
