
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as X,O as Y,aO as Z,r as _,l as ee,G as L,J as te,b as f,q as ae,o as c,e as oe,g as a,w as o,s as $,j as t,f as u,aN as x,k as p,h as s,H as B,S as ne,E as N,aP as le,aB as ie,ap as se,N as re,R as de}from"./index-CSh8ixW9.js";import{_ as ce}from"./index-PGoaeIYZ.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-H_cWkHx7.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-_VkyPd9W.js";import{a as b}from"./configuration_homepageSetting-8f-7fk_K.js";import"./index.vue_vue_type_script_setup_true_lang-CP242Szf.js";import"./sortable.esm-C0-Qcoum.js";import"./index-iAva8saU.js";const fe=X({name:"TenantTenantHomepageSettingList",__name:"list",setup(pe){Y();const{pagination:g,getParams:T,onSizeChange:H,onCurrentChange:R,onSortChange:V}=Z(),v=_(),y=_(),O=_("formSearch-TenantTenantHomepageSettingList"),e=_({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,row:"",id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],controlDataList:[]});function r(){try{e.value.loading=!0;const n={...T(),...e.value.search.title&&{title:e.value.search.title}};b.list(n).then(i=>{e.value.loading=!1,e.value.controlDataList=i.data.controlData,e.value.dataList=i.data.data,g.value.total=Number(i.data.total)})}catch{}finally{e.value.loading=!1}}function G(n){H(n).then(()=>r())}function C(n=1){R(n).then(()=>r())}function S({prop:n,order:i}){V(n,i).then(()=>r())}function I(){e.value.formModeProps.id="",e.value.formModeProps.row="",e.value.formModeProps.visible=!0}function j(n){e.value.formModeProps.id=n.id,e.value.formModeProps.row=JSON.stringify(n),e.value.formModeProps.visible=!0}function k(n,i="编辑"){v.value.showEdit(n,i)}async function w(n){(await b.setHomePageTemplate({templateId:n.id})).status===1&&N.success({message:"设置成功",center:!0}),r()}function A(n){le.confirm(`确认删除「${n.title}」吗？`,"确认信息").then(()=>{b.del({id:n.id}).then(i=>{i.status===1&&N.success({message:"删除成功",center:!0}),r()})}).catch(()=>{})}function F(){Object.assign(e.value.search,{title:""}),r()}return ee(()=>{r(),e.value.formMode==="router"&&L.on("get-data-list",()=>{r()}),y.value=[{index:1,show:!0,type:"input",modelName:"title",placeholder:"请输入标题，支持模糊查询"}]}),te(()=>{e.value.formMode==="router"&&L.off("get-data-list")}),(n,i)=>{const P=ie,m=f("ElTableColumn"),d=f("ElButton"),z=f("el-empty"),M=f("ElTable"),E=se,J=ce,U=f("ElDivider"),q=re,K=f("ElButtonGroup"),Q=f("ElSpace"),W=f("ElPagination"),D=ae("loading");return c(),oe("div",{class:ne({"absolute-container":t(e).tableAutoHeight})},[a(E,null,{default:o(()=>[a(P,{title:"通用模板"}),$((c(),u(M,{class:"my-4",data:t(e).controlDataList,stripe:"","highlight-current-row":"",height:"100%",onSortChange:S,onSelectionChange:i[0]||(i[0]=l=>t(e).batch.selectionDataList=l)},{empty:o(()=>[a(z,{image:t(x),"image-size":300},null,8,["image"])]),default:o(()=>[t(e).batch.enable?(c(),u(m,{key:0,type:"selection",align:"left",fixed:""})):p("",!0),a(m,{prop:"title",label:"标题"}),a(m,{prop:"isSet",align:"left",width:"100",label:"是否默认"},{default:o(({row:l})=>[s(B(l.isSet?"是":"否"),1)]),_:1}),a(m,{label:"操作",width:"250",align:"left",fixed:"right"},{default:o(l=>[l.row.isSet?p("",!0):(c(),u(d,{key:0,type:"primary",size:"small",plain:"",onClick:h=>w(l.row)},{default:o(()=>[s(" 设置为主页 ")]),_:2},1032,["onClick"])),a(d,{type:"primary",size:"small",plain:"",onClick:h=>k(l.row,"查看")},{default:o(()=>[s(" 查看 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,t(e).loading]])]),_:1}),a(E,null,{default:o(()=>[a(P,{title:"自定义模板"}),a(J,{formSearchList:t(y),formSearchName:t(O),onCurrentChange:C,onOnReset:F,model:t(e).search},null,8,["formSearchList","formSearchName","model"]),a(U,{"border-style":"dashed"}),a(Q,{wrap:""},{default:o(()=>[a(d,{type:"primary",size:"default",onClick:I},{icon:o(()=>[a(q,{name:"i-ep:plus"})]),default:o(()=>[s(" 新增首页设置 ")]),_:1}),t(e).batch.enable?(c(),u(d,{key:0,size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[s(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):p("",!0),t(e).batch.enable?(c(),u(K,{key:1},{default:o(()=>[a(d,{size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[s(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),a(d,{size:"default",disabled:!t(e).batch.selectionDataList.length},{default:o(()=>[s(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):p("",!0)]),_:1}),$((c(),u(M,{class:"my-4",data:t(e).dataList,stripe:"","highlight-current-row":"",height:"100%",onSortChange:S,onSelectionChange:i[1]||(i[1]=l=>t(e).batch.selectionDataList=l)},{empty:o(()=>[a(z,{image:t(x),"image-size":300},null,8,["image"])]),default:o(()=>[t(e).batch.enable?(c(),u(m,{key:0,type:"selection",align:"left",fixed:""})):p("",!0),a(m,{prop:"title",label:"标题"}),a(m,{prop:"isSet",align:"left",width:"100",label:"是否默认"},{default:o(({row:l})=>[s(B(l.isSet?"是":"否"),1)]),_:1}),a(m,{label:"操作",width:"350",align:"left",fixed:"right"},{default:o(l=>[l.row.isSet?p("",!0):(c(),u(d,{key:0,type:"primary",size:"small",plain:"",onClick:h=>w(l.row)},{default:o(()=>[s(" 设置为主页 ")]),_:2},1032,["onClick"])),a(d,{type:"primary",size:"small",plain:"",onClick:h=>j(l.row)},{default:o(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),a(d,{type:"primary",size:"small",plain:"",onClick:h=>k(l.row)},{default:o(()=>[s(" 设计主页 ")]),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",plain:"",onClick:h=>A(l.row)},{default:o(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,t(e).loading]]),a(W,{"current-page":t(g).page,total:t(g).total,"page-size":t(g).size,"page-sizes":t(g).sizes,layout:t(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:C},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(e).formMode==="dialog"||t(e).formMode==="drawer"?(c(),u(ue,{key:0,id:t(e).formModeProps.id,row:t(e).formModeProps.row,modelValue:t(e).formModeProps.visible,"onUpdate:modelValue":i[2]||(i[2]=l=>t(e).formModeProps.visible=l),mode:t(e).formMode,onSuccess:r},null,8,["id","row","modelValue","mode"])):p("",!0),a(me,{ref_key:"homePageRef",ref:v,onFetchData:r},null,512)],2)}}}),ke=de(fe,[["__scopeId","data-v-6d7cfd32"]]);export{ke as default};
