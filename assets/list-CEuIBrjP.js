
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as De,am as Me,aO as Te,r as m,a5 as $e,c as Ae,l as Fe,b as p,q as Oe,o as a,e as h,g as l,w as e,j as o,az as H,s as S,F as M,v as K,f as c,h as s,H as _,I as L,aN as He,k as f,t as k,S as Ke,bd as Ye,E as qe,N as Ge,aQ as Qe,aR as Je,bc as Ze,ap as We,aI as Xe,aJ as et,aq as T,R as tt}from"./index-BsB66SGI.js";import{_ as ot}from"./index-Du8kc-Gh.js";import{_ as lt}from"./index.vue_vue_type_style_index_0_lang-DXbUG3tz.js";import{_ as nt}from"./index.vue_vue_type_script_setup_true_lang-BZmY8XhD.js";import{_ as at}from"./index.vue_vue_type_script_setup_true_lang-CGJiU6sv.js";import rt from"./index-CfNidBp-.js";import it from"./index-Bqy1bQ7s.js";import st from"./index-D41OKTtE.js";import{a as ct}from"./survey_myProjeck-C2FdUL5d.js";import{u as ut}from"./user_customer-C1k1xBFM.js";import{u as pt}from"./index-HP-lo919.js";import"./index-AnJqlWBp.js";import"./index-Daphr313.js";import"./file-DZmEEzKQ.js";import"./download-C8PHVIy1.js";import"./apiLoading-CdB0CUk8.js";import"./clipboard-NGlzv4ar.js";import"./projectManagement-CbAV1WG9.js";import"./survey_vipGroup-BIOPy_eh.js";import"./survey_vipGroup-C3TWfcuc.js";import"./user_customer-Q2RhPuuo.js";const oe=V=>(Xe("data-v-c6dbeb0b"),V=V(),et(),V),dt=oe(()=>k("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),mt={key:0,class:"crudeTop"},ft={key:1,class:"hoverSvg"},_t={class:"fineSize"},bt={key:0,class:"crudeTop"},yt={key:1,style:{"text-align":"left !important","font-weight":"700",color:"#777"}},gt={class:"fineBom"},ht={class:"parameter oneLine"},kt=oe(()=>k("span",{class:"headerIcon"},[k("svg",{class:"timeSvg",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[k("g",{id:"Time (æ¶é´)"},[k("path",{id:"Vector",d:"M7.9987 14.6666C11.6806 14.6666 14.6654 11.6818 14.6654 7.99992C14.6654 4.31802 11.6806 1.33325 7.9987 1.33325C4.3168 1.33325 1.33203 4.31802 1.33203 7.99992C1.33203 11.6818 4.3168 14.6666 7.9987 14.6666Z",fill:"#409EFF"}),k("path",{id:"Vector_2",d:"M8.00431 4L8.00391 8.00293L10.8304 10.8294",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])]),s(" 创建时间 ")],-1)),vt=De({name:"myProjeck",__name:"list",setup(V){const{format:le}=Ye(),{toClipboard:ne}=pt(),Y=Me(),ae=ut(),{pagination:w,getParams:re,onSizeChange:ie,onCurrentChange:se,onSortChange:Ct}=Te(),$=m([]),q=m([]),G=m(),ce=m(""),Q=m(),E=m(!0),ue=m(),J=m(),x=m(!0),d=m([]),B=m(!1),U=m("default"),z=m(!1),R=m([{prop:"project",label:"项目",sortabel:!0,checked:!0},{prop:"projectId",label:"项目ID",sortabel:!0,checked:!0},{prop:"projectName",label:"项目名称",sortabel:!0,checked:!0},{prop:"projectIdentificationOrClientName",label:"名称/标识",sortabel:!0,checked:!0},{prop:"projectIdentification",label:"名称",sortabel:!0,checked:!0},{prop:"projectIdClientName",label:"标识",sortabel:!0,checked:!0},{prop:"withoutUrl",label:"URL",sortabel:!0,checked:!0},{prop:"participation",label:"参数",sortabel:!0,checked:!0},{prop:"doMoneyPrice",label:"原价",sortabel:!0,checked:!0},{prop:"memberPrice",label:"会员价",sortabel:!0,checked:!0},{prop:"countryNameList",label:"国家",sortabel:!0,checked:!0},{prop:"ir",label:"IR/NIR",sortabel:!0,checked:!0},{prop:"memberStatus",label:"分配",sortabel:!0,checked:!0},{prop:"createTime",label:"创建时间",sortabel:!0,checked:!0}]),u=$e({projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:"",time:[],beginTime:"",endTime:""}),Z=m([]),W=m();function pe(i){Q.value.showEdit(i)}function de(i){J.value.showEdit(i)}function me(i){W.value.showEdit(i)}function fe(i){ie(i).then(()=>j())}function g(i=1){se(i).then(()=>j())}function _e(){Object.assign(u,{projectId:"",projectName:"",projectIdentification:"",clientId:"",countryId:[],b2bOrB2cStatus:null,time:[],beginTime:"",endTime:""}),j()}async function j(){try{E.value=!0;const i={...re(),...u};u.time&&u.time.length&&(i.beginTime=u.time[0]||"",i.endTime=u.time[1]||"");const n=await ct.list(i);G.value=n.data.currencyType,Z.value=n.data.getMemberProjectListInfoList,w.value.total=n.data.total,E.value=!1}catch{}finally{E.value=!1}}const be=i=>{ne(i),qe({type:"success",message:"复制成功"})},ye=m();function ge(i){ye.value=i.projectId}const P=Ae(()=>i=>$.value.filter(C=>i==null?void 0:i.includes(C.id)).map(C=>C.chineseName));return Fe(async()=>{R.value.forEach(i=>{i.checked&&d.value.push(i.prop)}),$.value=await Y.getCountry(),q.value=await ae.getCustomerList(),j()}),(i,n)=>{const C=p("el-input"),I=p("el-form-item"),he=p("ElOption"),A=p("el-select"),F=p("el-option"),ke=p("el-date-picker"),X=Ge,O=p("ElButton"),ve=p("ElFormItem"),Ce=p("el-form"),Ie=nt,we=p("ElDivider"),je=lt,D=p("el-button"),Ne=Qe,Le=Je,Se=p("el-row"),b=p("el-table-column"),Ve=ot,ee=p("el-tooltip"),y=p("el-text"),Ee=Ze,te=p("el-link"),N=p("el-tag"),xe=p("ElSpace"),Be=p("el-empty"),Ue=p("el-table"),ze=p("ElPagination"),Re=We,Pe=Oe("loading");return a(),h("div",{class:Ke({"absolute-container":o(B)})},[l(Re,null,{default:e(()=>[l(Ie,{"show-toggle":!1},{default:e(({fold:t,toggle:v})=>[l(Ce,{model:o(u).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:e(()=>[l(I,{label:""},{default:e(()=>[l(C,{modelValue:o(u).projectId,"onUpdate:modelValue":n[0]||(n[0]=r=>o(u).projectId=r),clearable:"",placeholder:"项目ID",onKeydown:n[1]||(n[1]=H(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),l(I,{label:""},{default:e(()=>[l(C,{clearable:"",modelValue:o(u).projectName,"onUpdate:modelValue":n[2]||(n[2]=r=>o(u).projectName=r),placeholder:"项目名称",onKeydown:n[3]||(n[3]=H(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),l(I,{label:""},{default:e(()=>[l(C,{modelValue:o(u).projectIdentification,"onUpdate:modelValue":n[4]||(n[4]=r=>o(u).projectIdentification=r),clearable:"",placeholder:"项目标识",onKeydown:n[5]||(n[5]=H(r=>g(),["enter"]))},null,8,["modelValue"])]),_:1}),S(l(I,{label:""},{default:e(()=>[l(A,{placeholder:"国家地区",modelValue:o(u).countryId,"onUpdate:modelValue":n[6]||(n[6]=r=>o(u).countryId=r),clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:n[7]||(n[7]=r=>g())},{default:e(()=>[(a(!0),h(M,null,K(o($),r=>(a(),c(he,{label:r.chineseName,value:r.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),S(l(I,{label:""},{default:e(()=>[l(A,{placeholder:"客户简称",clearable:"",filterable:"",modelValue:o(u).clientId,"onUpdate:modelValue":n[8]||(n[8]=r=>o(u).clientId=r),onChange:n[9]||(n[9]=r=>g())},{default:e(()=>[(a(!0),h(M,null,K(o(q),r=>(a(),c(F,{key:r.tenantCustomerId,value:r.tenantCustomerId,label:r.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),S(l(I,{label:""},{default:e(()=>[l(A,{placeholder:"B2B/B2C",clearable:"",filterable:"",modelValue:o(u).b2bOrB2cStatus,"onUpdate:modelValue":n[10]||(n[10]=r=>o(u).b2bOrB2cStatus=r),onChange:n[11]||(n[11]=r=>g())},{default:e(()=>[l(F,{label:"B2B",value:"1"}),l(F,{label:"B2C",value:"2"})]),_:1},8,["modelValue"])]),_:2},1536),[[T,!t]]),S(l(I,null,{default:e(()=>[l(ke,{modelValue:o(u).time,"onUpdate:modelValue":n[12]||(n[12]=r=>o(u).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期",size:"default","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"192px"},"clear-icon":"true",onChange:n[13]||(n[13]=r=>g())},null,8,["modelValue"])]),_:2},1536),[[T,!t]]),l(ve,null,{default:e(()=>[l(O,{type:"primary",onClick:n[14]||(n[14]=r=>j())},{icon:e(()=>[l(X,{name:"i-ep:search"})]),default:e(()=>[s(" 筛选 ")]),_:1}),l(O,{onClick:_e},{icon:e(()=>[dt]),default:e(()=>[s(" 重置 ")]),_:1}),l(O,{link:"",onClick:v},{icon:e(()=>[l(X,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:e(()=>[s(" "+_(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(we,{"border-style":"dashed"}),l(Se,{gutter:24},{default:e(()=>[l(je),l(Le,null,{default:e(()=>[l(D,{size:"default",onClick:n[15]||(n[15]=()=>{})},{default:e(()=>[s(" 导出 ")]),_:1}),l(Ne,{border:o(x),"onUpdate:border":n[16]||(n[16]=t=>L(x)?x.value=t:null),tableAutoHeight:o(B),"onUpdate:tableAutoHeight":n[17]||(n[17]=t=>L(B)?B.value=t:null),checkList:o(d),"onUpdate:checkList":n[18]||(n[18]=t=>L(d)?d.value=t:null),columns:o(R),"onUpdate:columns":n[19]||(n[19]=t=>L(R)?R.value=t:null),"line-height":o(U),"onUpdate:lineHeight":n[20]||(n[20]=t=>L(U)?U.value=t:null),stripe:o(z),"onUpdate:stripe":n[21]||(n[21]=t=>L(z)?z.value=t:null),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((a(),c(Ue,{ref_key:"tableSortRef",ref:ce,style:{"margin-top":"10px"},"row-key":"id",data:o(Z),border:o(x),size:o(U),stripe:o(z),onCurrentChange:ge},{empty:e(()=>[l(Be,{image:o(He),"image-size":300},null,8,["image"])]),default:e(()=>[l(b,{align:"center",type:"selection"}),o(d).includes("project")?(a(),c(b,{key:0,"show-overflow-tooltip":"",align:"center",prop:"projectIdentificationOrClientName",width:"200",label:"项目"},{default:e(({row:t})=>[o(d).includes("projectName")?(a(),h("p",mt,"名称："+_(t.projectName),1)):f("",!0),o(d).includes("projectId")?(a(),h("div",ft,[k("p",_t,"ID："+_(t.projectId),1),l(Ve,{class:"copy",content:t.projectId},null,8,["content"])])):f("",!0)]),_:1})):f("",!0),o(d).includes("projectIdentificationOrClientName")?(a(),c(b,{key:1,"show-overflow-tooltip":"",prop:"projectIdentificationOrClientName",width:"180",align:"center",label:"名称/标识"},{default:e(({row:t})=>[o(d).includes("projectIdentification")?(a(),h("p",bt," 名称："+_(t.projectIdentification),1)):f("",!0),o(d).includes("projectIdClientName")?(a(),h("p",yt,[s("标："),k("span",gt,_(t.clientName),1)])):f("",!0)]),_:1})):f("",!0),o(d).includes("withoutUrl")?(a(),c(b,{key:2,prop:"withoutUrl",align:"center",label:"URL"},{default:e(({row:t})=>[l(ee,{class:"box-item",effect:"dark",content:t.withoutUrl,placement:"top"},{default:e(()=>[l(D,{link:"",type:"primary",onClick:v=>be(t.withoutUrl)},{default:e(()=>[s("复制")]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1})):f("",!0),o(d).includes("participation")?(a(),c(b,{key:3,"show-overflow-tooltip":"",width:"180",align:"center",label:"参数"},{default:e(({row:t})=>[k("p",ht,[l(y,{class:"mx-1 oneLine",style:{color:"#FB6868"},type:"danger"},{default:e(()=>[s("参与："+_(t.participation||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#03C239"},type:"success"},{default:e(()=>[s("完成："+_(t.complete||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#FFAC54"},type:"warning"},{default:e(()=>[s("配额："+_(t.num||0),1)]),_:2},1024),l(y,{class:"mx-1 oneLine",style:{color:"#AAAAAA"},type:"info"},{default:e(()=>[s("限量："+_(t.limitedQuantity||0),1)]),_:2},1024)])]),_:1})):f("",!0),o(d).includes("doMoneyPrice")?(a(),c(b,{key:4,"show-overflow-tooltip":"",align:"center",label:"原价"},{default:e(({row:t})=>[o(G)===3?(a(),c(y,{key:0,class:"mx-1"},{default:e(()=>[s("暂无数据")]),_:1})):(a(),c(y,{key:1,class:"mx-1"},{default:e(()=>[l(y,{style:{color:"#FD8989"}},{default:e(()=>[l(Ee)]),_:1}),l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:e(()=>[s(_(t.doMoneyPrice||0),1)]),_:2},1024)]),_:2},1024))]),_:1})):f("",!0),o(d).includes("memberPrice")?(a(),c(b,{key:5,"show-overflow-tooltip":"",align:"center",label:"会员价"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),c(te,{key:0,size:"small",plain:"",type:"primary",onClick:v=>de(t)},{default:e(()=>[s(" 查看 ")]),_:2},1032,["onClick"])):(a(),c(y,{key:1},{default:e(()=>[s(" - ")]),_:1}))]),_:1})):f("",!0),o(d).includes("countryNameList")?(a(),c(b,{key:6,"show-overflow-tooltip":"",align:"center",label:"国家"},{default:e(({row:t})=>[t.countryNameList?(a(),h(M,{key:0},[t.countryNameList.length===o(Y).country.length?(a(),c(N,{key:0,type:"primary"},{default:e(()=>[s("全球")]),_:1})):o(P)(t.countryNameList).length>1?(a(),c(ee,{key:1,class:"box-item",effect:"dark",content:o(P)(t.countryNameList).join(","),placement:"top"},{default:e(()=>[l(te,{type:"primary"},{default:e(()=>[l(N,{type:"primary"},{default:e(()=>[s("x"+_(o(P)(t.countryNameList).length),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["content"])):(a(!0),h(M,{key:2},K(o(P)(t.countryNameList),v=>(a(),c(N,{key:v,type:"primary"},{default:e(()=>[s(_(v),1)]),_:2},1024))),128))],64)):f("",!0)]),_:1})):f("",!0),o(d).includes("ir")?(a(),c(b,{key:7,"show-overflow-tooltip":"",align:"center",label:"IR/NIR"},{default:e(({row:t})=>[l(y,{style:{color:"#333333","font-weight":"700","font-family":"DINPro-Medium"}},{default:e(()=>[s(_(t.ir?t.ir:"-")+" / "+_(t.nir?t.nir:"-"),1)]),_:2},1024)]),_:1})):f("",!0),o(d).includes("memberStatus")?(a(),c(b,{key:8,"show-overflow-tooltip":"",align:"center",label:"分配"},{default:e(({row:t})=>[t.getMemberGroupNameInfoList.length?(a(),c(N,{key:0,style:{"background-color":"#05C9BE",color:"#fff"}},{default:e(()=>[s(" 会员组 ")]),_:1})):(a(),c(N,{key:1,effect:"plain",type:"info"},{default:e(()=>[s(" 未分配 ")]),_:1}))]),_:1})):f("",!0),o(d).includes("createTime")?(a(),c(b,{key:9,"show-overflow-tooltip":"",prop:"createTime",align:"center",label:"创建时间"},{header:e(()=>[kt]),default:e(({row:t})=>[l(N,{effect:"plain",type:"info"},{default:e(()=>[s(_(o(le)(t.createTime)),1)]),_:2},1024)]),_:1})):f("",!0),l(b,{align:"center",fixed:"right",label:"操作",width:"200"},{default:e(({row:t})=>[l(xe,null,{default:e(()=>[t.getMemberGroupNameInfoList.length?f("",!0):(a(),c(D,{key:0,type:"primary",plain:"",size:"small",onClick:v=>me(t)},{default:e(()=>[s(" 分配 ")]),_:2},1032,["onClick"])),l(D,{size:"small",plain:"",type:"warning",onClick:v=>pe(t)},{default:e(()=>[s(" 配额 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[Pe,o(E)]]),l(ze,{"current-page":o(w).page,total:o(w).total,"page-size":o(w).size,"page-sizes":o(w).sizes,layout:o(w).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:fe,onCurrentChange:g},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(at,{ref_key:"CheckEditRef",ref:ue},null,512),l(rt,{ref_key:"detailRef",ref:Q},null,512),l(it,{ref_key:"checkMembershipPriceRef",ref:J},null,512),l(st,{ref_key:"addAllocationEditRef",ref:W,onFetchData:j},null,512)],2)}}}),Ht=tt(vt,[["__scopeId","data-v-c6dbeb0b"]]);export{Ht as default};
