
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as j,m as B,u as F,r as E,a as i,o as w,b as k,f as e,w as s,e as z,l as c,aD as y,ay as M,am as R,aB as A,i as o,j as T,ak as x,N as H,_ as O,O as L,g as v,p as G,aG as K,aH as J,q as N}from"./index-Q_OhXZcn.js";const Q={class:"upload-container"},W={key:1,class:"image"},X={class:"mask"},Y={class:"actions"},Z={key:0,class:"el-upload__tip"},ee={style:{display:"inline-block"}},le=j({name:"ImageUpload",__name:"index",props:B({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:""},modelModifiers:{}}),emits:B(["onSuccess"],["update:modelValue"]),setup(g,{emit:U}){const l=g,_=U,m=F(g,"modelValue"),u=E({imageViewerVisible:!1,progress:{preview:"",percent:0}});function b(){u.value.imageViewerVisible=!0}function $(){u.value.imageViewerVisible=!1}function V(){m.value=""}const t=a=>{const f=a.name.split(".").at(-1)??"",r=l.ext.includes(f),h=a.size/1024/1024<l.size;return r||x.error(`上传图片只支持 ${l.ext.join(" / ")} 格式！`),h||x.error(`上传图片大小不能超过 ${l.size}MB！`),r&&h&&(u.value.progress.preview=URL.createObjectURL(a)),r&&h},I=a=>{u.value.progress.percent=~~a.percent},d=a=>{u.value.progress.preview="",u.value.progress.percent=0,_("onSuccess",a)};return(a,p)=>{const f=H,r=i("ElImage"),h=i("ElProgress"),q=i("ElUpload"),S=i("ElAlert"),C=i("ElImageViewer");return w(),k("div",Q,[e(q,{"show-file-list":!1,headers:a.headers,action:a.action,data:a.data,name:a.name,"before-upload":t,"on-progress":I,"on-success":d,drag:"",class:"image-upload"},{default:s(()=>[m.value===""?(w(),z(r,{key:0,src:m.value===""?a.placeholder:m.value,style:y(`width:${a.width}px;height:${a.height}px;`),fit:"fill"},{error:s(()=>[c("div",{class:"image-slot",style:y(`width:${a.width}px;height:${a.height}px;`)},[e(f,{name:"i-ep:plus",class:"icon"})],4)]),_:1},8,["src","style"])):(w(),k("div",W,[e(r,{src:m.value,style:y(`width:${a.width}px;height:${a.height}px;`),fit:"fill"},null,8,["src","style"]),c("div",X,[c("div",Y,[c("span",{title:"预览",onClick:M(b,["stop"])},[e(f,{name:"i-ep:zoom-in",class:"icon"})]),c("span",{title:"移除",onClick:M(V,["stop"])},[e(f,{name:"i-ep:delete",class:"icon"})])])])])),R(c("div",{class:"progress",style:y(`width:${a.width}px;height:${a.height}px;`)},[e(r,{src:o(u).progress.preview,style:y(`width:${a.width}px;height:${a.height}px;`),fit:"fill"},null,8,["src","style"]),e(h,{type:"circle",width:Math.min(a.width,a.height)*.8,percentage:o(u).progress.percent},null,8,["width","percentage"])],4),[[A,m.value===""&&o(u).progress.percent]])]),_:1},8,["headers","action","data","name"]),a.notip?T("",!0):(w(),k("div",Z,[c("div",ee,[e(S,{title:`上传图片支持 ${a.ext.join(" / ")} 格式，且图片大小不超过 ${a.size}MB，建议图片尺寸为 ${a.width}*${a.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),o(u).imageViewerVisible?(w(),z(C,{key:1,"url-list":[m.value],teleported:"",onClose:$},null,8,["url-list"])):T("",!0)])}}}),ae=O(le,[["__scopeId","data-v-bde0ed46"]]),P=g=>(K("data-v-027dfd57"),g=g(),J(),g),oe=P(()=>c("h2",null,"个人信息",-1)),te=P(()=>c("h2",{style:{"margin-bottom":"30px"}},"账户管理",-1)),D=j({name:"personalSetting",__name:"setting",setup(g,{expose:U}){L();const l=E({headimg:"",mobile:"",name:"",qq:"",wechat:"",country:""}),_=E(!1);E(),E([]);function m(){}async function u(V){_.value=!0}function b(){_.value=!1}function $(V){V.error===""?l.value.headimg=V.data.path:x.warning(V.error)}return U({showEdit:u}),(V,t)=>{const I=ae,d=i("ElFormItem"),a=i("el-text"),p=i("ElInput"),f=i("el-select"),r=i("ElButton"),h=i("ElForm"),q=i("ElTabPane"),S=i("ElTabs"),C=i("el-drawer");return w(),k("div",null,[e(C,{modelValue:o(_),"onUpdate:modelValue":t[12]||(t[12]=n=>G(_)?_.value=n:null),title:"修改用户信息",direction:"rtl","before-close":b,style:{height:"100%"},size:"40%"},{default:s(()=>[e(S,{"tab-position":"left"},{default:s(()=>[e(q,{label:"个人信息",class:"basic"},{default:s(()=>[oe,e(h,{model:o(l),"label-width":"120px","label-suffix":"："},{default:s(()=>[e(d,{style:{display:"flex","justify-content":"center","align-items":"center"},label:"头像"},{default:s(()=>[e(I,{url:o(l).headimg,"onUpdate:url":t[0]||(t[0]=n=>o(l).headimg=n),action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKD628431923530324"},notip:"",class:"headimg-upload",onOnSuccess:$},null,8,["url"])]),_:1}),e(d,{label:"账户类型"},{default:s(()=>[e(a,{class:"mx-1"},{default:s(()=>[v("个人")]),_:1})]),_:1}),e(d,{label:"用户名"},{default:s(()=>[e(p,{modelValue:o(l).name,"onUpdate:modelValue":t[1]||(t[1]=n=>o(l).name=n),placeholder:"请输入你的用户名"},null,8,["modelValue"])]),_:1}),e(d,{label:"国家"},{default:s(()=>[e(f,{modelValue:o(l).country,"onUpdate:modelValue":t[2]||(t[2]=n=>o(l).country=n),placeholder:"请选择国家"},null,8,["modelValue"])]),_:1}),e(d,{label:"货币类型"},{default:s(()=>[e(f,{modelValue:o(l).country,"onUpdate:modelValue":t[3]||(t[3]=n=>o(l).country=n),placeholder:"请选择货币类型"},null,8,["modelValue"])]),_:1}),e(d,{label:"公司名称"},{default:s(()=>[e(p,{modelValue:o(l).qq,"onUpdate:modelValue":t[4]||(t[4]=n=>o(l).qq=n),placeholder:"请输入你的公司名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"公司税号"},{default:s(()=>[e(p,{modelValue:o(l).qq,"onUpdate:modelValue":t[5]||(t[5]=n=>o(l).qq=n),placeholder:"请输入你的公司税号"},null,8,["modelValue"])]),_:1}),e(d,{label:"法人姓名"},{default:s(()=>[e(p,{modelValue:o(l).qq,"onUpdate:modelValue":t[6]||(t[6]=n=>o(l).qq=n),placeholder:"请输入你的法人姓名"},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:s(()=>[e(p,{modelValue:o(l).qq,"onUpdate:modelValue":t[7]||(t[7]=n=>o(l).qq=n),placeholder:"请输入你的手机号码"},null,8,["modelValue"])]),_:1}),e(d,{label:"电子邮箱"},{default:s(()=>[e(p,{modelValue:o(l).wechat,"onUpdate:modelValue":t[8]||(t[8]=n=>o(l).wechat=n),placeholder:"请输入你的电子邮箱"},null,8,["modelValue"])]),_:1}),e(d,null,{default:s(()=>[e(r,{onClick:m,type:"primary"},{default:s(()=>[v(" 保存 ")]),_:1}),e(r,{onClick:b,type:"primary"},{default:s(()=>[v(" 取消 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(q,{label:"账户管理",class:"security"},{default:s(()=>[te,e(h,{model:o(l),"label-width":"120px","label-suffix":"："},{default:s(()=>[e(d,{label:"旧密码"},{default:s(()=>[e(p,{modelValue:o(l).name,"onUpdate:modelValue":t[9]||(t[9]=n=>o(l).name=n),placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),e(d,{label:"新密码"},{default:s(()=>[e(p,{modelValue:o(l).qq,"onUpdate:modelValue":t[10]||(t[10]=n=>o(l).qq=n),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),e(d,{label:"确认新密码"},{default:s(()=>[e(p,{modelValue:o(l).wechat,"onUpdate:modelValue":t[11]||(t[11]=n=>o(l).wechat=n),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),e(d,null,{default:s(()=>[e(r,{onClick:m,type:"primary"},{default:s(()=>[v(" 保存 ")]),_:1}),e(r,{onClick:b,type:"primary"},{default:s(()=>[v(" 取消 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});typeof N=="function"&&N(D);const ne=O(D,[["__scopeId","data-v-027dfd57"]]);export{ne as default};
