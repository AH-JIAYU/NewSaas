
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./tenantDictionary-DbD6MEwu.js";import{d as M,m as h,u as F,c as R,r as c,l as q,b as u,o as L,f as S,w as s,g as a,h as E,j as o,E as C,R as z}from"./index-BRhMh313.js";const A=M({__name:"index",props:h({parentId:{default:""},id:{default:""},tree:{},row:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:h(["getList"],["update:modelValue"]),setup(V,{emit:y}){const r=V,w=y,p=F(V,"modelValue"),I=R(()=>r.id===""?"新增字典":"编辑字典"),f=c(),v=c([]),l=c({tenantCatalogueId:r.parentId,id:r.id,englishName:"",chineseName:"",code:"",remark:"",level:1}),k=c({chineseName:[{required:!0,message:"请输入中文名称"}],englishName:[{required:!0,message:"请输入英文名称"}],code:[{required:!0,message:"请输入编码"}]}),x=d=>{const e=v.value.find(n=>n.id===d);l.value.level=Number(e.level)+1};async function U(){f.value&&f.value.validate(async d=>{if(d){if(l.value.id===""){const{status:e}=await _.create(l.value);e===1&&C.success({message:"新增成功",center:!0})}else{const{status:e}=await _.edit(l.value);e===1&&C.success({message:"编辑成功",center:!0})}await w("getList"),g()}})}function g(){p.value=!1}const b=d=>d.reduce((e,n)=>Array.isArray(n)?e.concat(b(n)):e.concat(n),[]);return q(()=>{if(r.id!==""){const{id:d,englishName:e,chineseName:n}=JSON.parse(r.row);l.value.id=d,l.value.chineseName=n,l.value.englishName=e}v.value=b(r.tree)}),(d,e)=>{const n=u("ElCascader"),m=u("ElFormItem"),i=u("ElInput"),B=u("ElForm"),N=u("ElButton"),D=u("ElDialog");return L(),S(D,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=t=>p.value=t),title:o(I),width:"25rem","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:g},{footer:s(()=>[a(N,{size:"large",onClick:g},{default:s(()=>[E(" 取消 ")]),_:1}),a(N,{type:"primary",size:"large",onClick:U},{default:s(()=>[E(" 确定 ")]),_:1})]),default:s(()=>[a(B,{ref_key:"formRef",ref:f,model:o(l),rules:o(k),"label-width":"7rem"},{default:s(()=>[a(m,{label:"所属字典",prop:"parentId"},{default:s(()=>[a(n,{modelValue:o(l).tenantCatalogueId,"onUpdate:modelValue":e[0]||(e[0]=t=>o(l).tenantCatalogueId=t),options:r.tree,props:{value:"id",label:"name",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择父级字典，默认为根字典",clearable:"",onChange:x},null,8,["modelValue","options"])]),_:1}),a(m,{label:"中文",prop:"chineseName"},{default:s(()=>[a(i,{modelValue:o(l).chineseName,"onUpdate:modelValue":e[1]||(e[1]=t=>o(l).chineseName=t),placeholder:"请输入中文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"英文",prop:"englishName"},{default:s(()=>[a(i,{modelValue:o(l).englishName,"onUpdate:modelValue":e[2]||(e[2]=t=>o(l).englishName=t),placeholder:"请输入英文名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"字典编码",prop:"code"},{default:s(()=>[a(i,{modelValue:o(l).code,"onUpdate:modelValue":e[3]||(e[3]=t=>o(l).code=t),placeholder:"请输入字典编码",clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"备注"},{default:s(()=>[a(i,{modelValue:o(l).remark,"onUpdate:modelValue":e[4]||(e[4]=t=>o(l).remark=t),placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),O=z(A,[["__scopeId","data-v-76ba2f43"]]);export{O as default};
