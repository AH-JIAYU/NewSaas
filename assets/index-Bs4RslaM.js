
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{ag as G,r as f,d as J,n as K,a as n,o as _,e as v,w as e,y as c,f as a,g as o,b as I,z as u,t as Q,F as W,p as X,aH as Y,aI as Z,L as ee}from"./index-DpYtDcrd.js";import{a as L}from"./department-B_ZqQbm8.js";import{u as ae}from"./tenant_role-83bjsPSd.js";import{u as te}from"./configuration_manager-DP7UBBth.js";import{u as le}from"./position_manage-Bg3IBCz7.js";const oe=G("department",()=>{const i=f(null);return{department:i,getDepartment:async()=>{if(i.value)return i.value;const{data:p}=await L.list({name:""});return i.value=(p==null?void 0:p.data)||[],p==null?void 0:p.data}}}),se=oe,T=i=>(Y("data-v-bf67296d"),i=i(),Z(),i),ne=T(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"},"基本信息")],-1)),ue={key:1,class:"avatar"},de={style:{"font-size":"14px"}},re=T(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"},"角色信息")],-1)),ce=T(()=>c("div",{class:"card-header"},[c("div",{class:"leftTitle"}," 部门信息 ")],-1)),ie={class:"flex-c"},_e=J({__name:"index",emits:["fetch-data"],setup(i,{expose:V,emit:p}){const M=te(),C=f([]),P=le(),j=f(),B=ae(),S=f();se();const E={children:"children",label:"name"},h=f(),g=f({}),R=p,y=f(!1),w=f([]),l=f();async function U(x){g.value=x;const m={id:x.id},{status:s,data:N}=await X.list(m);l.value=N.data[0],g.value.roleList=[l.value.role],w.value&&w.value.push(l.value.organizationalStructureId),y.value=!0}function z(){R("fetch-data"),y.value=!1}return K(async()=>{j.value=await P.getPositionManage(),C.value=await M.getStaff(),S.value=await B.getRole();const x=await L.list({name:""});x.data&&(h.value=x.data,h.value.forEach(m=>{m.disabled=!0}))}),V({showEdit:U}),(x,m)=>{const s=n("el-col"),N=n("el-avatar"),k=n("el-row"),d=n("el-text"),r=n("el-form-item"),D=n("el-card"),F=n("el-checkbox"),O=n("el-checkbox-group"),H=n("el-tree"),$=n("el-form"),q=n("el-button"),A=n("el-drawer");return _(),v(A,{modelValue:y.value,"onUpdate:modelValue":m[1]||(m[1]=t=>y.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:z},{footer:e(()=>[c("div",ie,[a(q,{type:"primary",onClick:z},{default:e(()=>[o(" 关闭 ")]),_:1})])]),default:e(()=>[a($,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(D,{class:"box-card"},{header:e(()=>[ne]),default:e(()=>[a(k,{gutter:20},{default:e(()=>[a(s,{span:1}),a(s,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(_(),v(N,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(_(),I("div",ue,u(l.value.name),1))]),_:1}),a(s,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[c("p",null,u(l.value.userName),1),c("p",de,[o("账号:"),c("span",null,u(l.value.userName),1)])]),_:1})]),_:1}),a(k,{gutter:24},{default:e(()=>[a(s,{span:6},{default:e(()=>[a(r,{label:"员工ID:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"姓名:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"手机号:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.phone?l.value.phone:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"邮箱:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"部门:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.organizationalStructureName?l.value.organizationalStructureName:"-"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"职位:"},{default:e(()=>[a(d,null,{default:e(()=>[o(u(l.value.positionName?l.value.positionName:"-"),1)]),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"帐号状态:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(s,{span:6},{default:e(()=>[a(r,{label:"创建时间:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[o(u((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{class:"box-card"},{header:e(()=>[re]),default:e(()=>[a(k,{gutter:24},{default:e(()=>[a(r,{label:"分配角色:"},{default:e(()=>{var t;return[(t=S.value)!=null&&t.length?(_(),v(O,{key:0,style:{"margin-left":"1.5rem"},modelValue:g.value.roleList,"onUpdate:modelValue":m[0]||(m[0]=b=>g.value.roleList=b)},{default:e(()=>[(_(!0),I(W,null,Q(S.value,b=>(_(),v(F,{key:b.id,label:b.roleName,value:b.roleName,disabled:""},{default:e(()=>[o(u(b.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(_(),v(d,{key:1},{default:e(()=>[o("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(D,{class:"box-card"},{header:e(()=>[ce]),default:e(()=>[a(k,{gutter:24},{default:e(()=>[a(r,{label:"分配部门:"},{default:e(()=>[h.value.length>0?(_(),v(H,{key:0,style:{"max-width":"600px"},ref:"treeRef",data:h.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":w.value,"default-expand-all":"",props:E},null,8,["data","default-checked-keys"])):(_(),v(d,{key:1},{default:e(()=>[o("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),fe=ee(_e,[["__scopeId","data-v-bf67296d"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"}));export{fe as D,he as i,se as u};
