
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ue,r as I,c as _t,W as Re,n as Ee,bn as ht,o as c,b as S,s as ie,a9 as It,y as d,i as a,N as Pt,aP as jt,aH as De,aI as Qe,E as M,L as Ne,aC as Lt,l as wt,ab as Ce,Z as Te,$ as ke,a as y,e as b,w as t,f as l,g as f,j,t as D,z as U,aG as fe,F as Q,A as ne,bB as Vt,ao as W,_ as xt}from"./index-DvH_mzfZ.js";import{u as Ct}from"./user_customer-BrnwNvv6.js";import{a as Tt}from"./user_customer-NHLyeIsX.js";import{f as re}from"./file-DY74s1X8.js";import{g as kt,a as St}from"./zh_Hans-CrfEz-Jr.js";import"./index-iJRjh0Y-.js";import{a as X}from"./projectManagement-C1f4KQeX.js";import{u as Ut}from"./projectManagement_list-CZ95vOFe.js";import Rt from"./index-BhDMuOf4.js";import{a as Et}from"./configuration_site_setting-c9Z4oZOZ.js";import{_ as Dt}from"./index.vue_vue_type_script_setup_true_lang-D9HkmQgE.js";import"./index.vue_vue_type_script_setup_true_lang-Bt5FrXVL.js";import"./index-BiI-DBHZ.js";import"./index-D3I7oV2e.js";import"./index-BkqZR1L-.js";import"./clipboard-BrJ0ZuMm.js";import"./index-Dz_wbXlD.js";import"./department-CwBglFAy.js";import"./position_manage-kBf9d4Ib.js";import"./configuration_role-BsNSh_ec.js";import"./tenant_role-CyUxG6Hr.js";import"./configuration_manager-BPKlwFHo.js";import"./configuration_siteSetting-D4Cl3unB.js";import"./apiLoading-D-GOytTr.js";import"./stagedData-BLlpCJnC.js";import"./otherFunctions_screenLibrary-CLwjp5Fq.js";const Qt=["advlist  autolink autosave code codesample colorpicker colorpicker contextmenu directionality  fullscreen hr image  lists  nonbreaking noneditable paste  print save  spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],Nt=["fontsizeselect fontselect fontfamily fontsize fontname  bold italic underline strikethrough alignleft aligncenter alignright outdent indent  e undo redo  hr bullist numlist  image      table  forecolor backcolor fullscreen"];let B=[];function qt(){return window.tinymce}const $t=(P,z)=>{const x=document.getElementById(P),m=z||function(){};if(!x){const g=document.createElement("script");g.src=P,g.id=P,document.body.appendChild(g),B.push(m),("onload"in g?V:N)(g)}x&&m&&(qt()?m(null,x):B.push(m));function V(g){g.onload=function(){this.onerror=this.onload=null;for(const C of B)C(null,g);B=null},g.onerror=function(){this.onerror=this.onload=null,m(new Error("Failed to load "+P),g)}}function N(g){g.onreadystatechange=function(){if(!(this.readyState!=="complete"&&this.readyState!=="loaded")){this.onreadystatechange=null;for(const C of B)C(null,g);B=null}}}},At=P=>(De("data-v-c1d151e0"),P=P(),Qe(),P),Bt=["id"],Mt=At(()=>d("div",{class:"editor-custom-btn-container"},null,-1)),zt="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",Ft=Ue({__name:"index",props:{tinymceHtml:{type:String},id:{type:String,default:()=>"vue-tinymce-"+ +new Date+((Math.random()*1e3).toFixed(0)+"")},value:{type:String,default:""},toolbar:{type:Array,default:()=>[]},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],default:360},width:{type:[Number,String],default:"auto"}},emits:["changeEditorValue"],setup(P,{emit:z}){const x=I(""),m=P;m&&(x.value=m.tinymceHtml);const V=m.id,N=I(!1);I(!1);const g=I(!1),C={en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"},ee=_t(()=>{const _=m.width;return/^[\d]+(\.[\d]+)?$/.test(_)?`${_}px`:_}),q=z,te=()=>{window.tinymce.init({selector:`#${V}`,language:C.zh,height:m.height,body_class:"panel-body ",object_resizing:!1,branding:!1,paste_data_images:!0,toolbar:m.toolbar.length>0?m.toolbar:Nt,menubar:m.menubar,plugins:Qt,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",init_instance_callback(_){m.value&&_.setContent(m.value),g.value=!0,_.on("change",()=>{const L=_.getContent();x.value=L,q("changeEditorValue",L)})},images_upload_handler:(_,L,k,F)=>{const H=_.blob(),$=10*1024*1024;if(H.size>$)return M({message:"上传文件大小不得超过200M 当前文件10MB ",type:"error",duration:5*1e3}),!1;{const ae=new FormData;ae.append("file",H),re.upload(ae).then(p=>{var se,ue;p&&((se=p.data)!=null&&se.qiNiuUrl)?re.detail({fileName:(ue=p.data)==null?void 0:ue.qiNiuUrl}).then(Y=>{var R;Y&&((R=Y.data)!=null&&R.fileUrl)&&L(Y.data.fileUrl)}):k("上传失败")}).catch(p=>{k("上传失败: "+p.error)})}},setup(_){_.on("FullscreenStateChanged",L=>{N.value=L.state})}})},e=()=>{$t(zt,_=>{_||te()})};return Re(()=>m.value,_=>{if(_!==x.value&&g.value){const L=window.tinymce.get(V);L&&L.setContent(_)}}),Ee(()=>{e()}),ht(()=>{g.value||te()}),(_,L)=>(c(),S("div",{class:Pt([{fullscreen:N.value},"tinymce-container"]),style:jt({width:ee.value})},[ie(d("textarea",{id:a(V),"onUpdate:modelValue":L[0]||(L[0]=k=>x.value=k),class:"tinymce-textarea"},null,8,Bt),[[It,x.value]]),Mt],6))}}),Ht=Ne(Ft,[["__scopeId","data-v-c1d151e0"]]),w=P=>(De("data-v-ac1050d7"),P=P(),Qe(),P),Yt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},Ot=w(()=>d("div",{style:{height:"32px","line-height":"32px"}},"基础设置",-1)),Gt={style:{float:"left"}},Zt={style:{float:"right",color:"#fb6868","font-size":"13px"}},Jt=w(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Kt={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},Wt=w(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Xt=w(()=>d("br",null,null,-1)),ea=w(()=>d("div",{style:{"margin-top":"4px"}}," 若链接后缀不是[uid]，那可能无法校验通过呦~ ",-1)),ta=w(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),aa={style:{display:"flex","justify-content":"space-between"},class:"card-header"},la=w(()=>d("span",null,"描述配额",-1)),oa={key:0},na=w(()=>d("div",{class:"el-upload__text"},"上传",-1)),ia={class:"el-upload__tip"},ra=["src"],sa=w(()=>d("div",{class:"card-header"},"配置信息",-1)),ua=w(()=>d("div",{class:"card-header"},"安全信息",-1)),da=w(()=>d("div",null,[f("小时"),d("span",{class:"red"},"准入"),f("量")],-1)),ca=w(()=>d("div",null,[f("小时"),d("span",{class:"blue"},"完成"),f("量")],-1)),ma=w(()=>d("div",null,"开启：ip和随机id都可以重复",-1)),pa=w(()=>d("div",null,"关闭：ip和随机id都不可以重复",-1)),fa={class:"right"},ga={class:"dialog-footer"},Se="例：https://www.xxxx.com/8994343?uid=[uid]",ya=Ue({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},emits:["sync-project"],setup(P,{expose:z,emit:x}){const m=Lt(),V=I(!1),N=[{label:"美元",value:"USD"},{label:"人民币",value:"CNY"}],g=I(null),C=wt();Ct();const ee=Ut(),q=P,te=x,e=I(q.leftTab),_=Ce("validateTopTabs"),L=Ce("currentProjectTimeline"),k=I("basicSettings"),F=I(),H=I(),$=I(!q.tabIndex),ae="https://saas-api.surveysaas.com/api/project/uploadQiniu";let p=I({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(i,o){const r=await C.getB2BTypeItemChildren(i.data.id)||[];o(r)}}},editProps:{id:"",countryId:"",visible:!1,row:""}});const Y=Te({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属区域",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],currencyType:[{required:!0,message:"请选择币种",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(i,o,r)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e.value.uidUrl)||r(new Error("请输入合法网址")),e.value.uidUrl.includes("[uid]")||r(new Error("格式不正确,请查看例子")),r()},trigger:"blur"}],releaseTime:[{validator:(i,o,r)=>{new Date(e.value.releaseTime).getTime()<Date.now()&&r(new Error("发布时间早于当前时间")),r()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入项目价",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入0以上的正整数",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],ir:[{required:!0,message:"请输入ir",trigger:"blur"},{pattern:/^(100|[1-9]?[0-9])$/,message:"请输入0到100之间的正整数",trigger:"blur"}],exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}]});e.value.clientId?g.value=1:m.originalExchangeRate&&(g.value=m.originalExchangeRate,e.value.exchangeRate=m.originalExchangeRate),e.value.clientId||m.currencyType&&(e.value.currencyType=m.currencyType===1?"USD":"CNY");const R=i=>{i.key==="."&&i.preventDefault()},qe=i=>i.getTime()<Date.now()-864e5;function $e(){if(new Date(e.value.releaseTime)*1e3/1e3<Date.now()){const r=new Date,v=r.getFullYear(),h=o(r.getMonth()+1),s=o(r.getDate()),u=o(r.getHours()),E=o(r.getMinutes()),A=o(r.getSeconds());e.value.releaseTime=`${v}-${h}-${s} ${u}:${E}:${A}`}function o(r){return(r<10?"0":"")+r}e.value.releaseTime&&L(e.value.releaseTime)}const Ae=i=>{const o=p.value.basicSettings.customerList.find(r=>r.tenantCustomerId===i);e.value.isProfile=o.antecedentQuestionnaire===2?1:2},Be=()=>{e.value.countryIdList=[],p.value.checked&&p.value.basicSettings.countryList.map(i=>{e.value.countryIdList.push(i.id)})};I(),kt({locale:St});const Me=i=>{e.value.richText=i};function ze(){te("sync-project")}function Fe(){$.value=!$.value}const ge=I(""),le=I(!1),O=I([]),ye=i=>{const o=i.name.substring(i.name.lastIndexOf(".")+1);return["jpg","jpeg","png","gif"].indexOf(o)===-1},He=i=>{const o=ye(i);return o&&M.warning({message:"只能上传图片文件JPG，JPEG，PNG，GIF",center:!0}),!o},Ye=async(i,o)=>{if(e.value.descriptionUrl=o.map(r=>r.name),!ye(i)){const{status:r}=await re.delete({fileName:i.name});r===1&&M.success({message:"删除成功",center:!0})}},Oe=(i,o)=>{e.value.descriptionUrl.push(i.data.qiNiuUrl)},Ge=async(i,o)=>{M.warning({message:"最多可上传10个",center:!0})},Ze=i=>{ge.value=i.url,le.value=!0},Je=async i=>{i.length&&i.forEach(async o=>{if(o){const r=await re.detail({fileName:o});O.value.push({name:o,url:r.data.fileUrl})}})},Ke=i=>{e.value.isOnline=i===2?2:1},We=i=>{i===2&&(e.value.projectQuotaInfoList=[])},Xe=()=>{e.value.data.configurationInformation.configurationCountryList=null,p.value.checked=e.value.countryIdList.length===C.country.length},et=()=>{e.value.data.configurationInformation.projectCategoryList=null,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId="",de()},de=i=>{e.value.data.configurationInformation.initialProblem.projectProblemId=null,e.value.data.configurationInformation.ProjectProblemInfoList=null,i||(e.value.projectQuotaInfoList=[])},be=async(i,o)=>{i==="configurationInformation"&&!e.value.data.configurationInformation.configurationCountryList&&F.value.validateField(["countryIdList"],async r=>{if(r){de(o||!1);const v=await X.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=v.data.getProjectCountryListInfoList,v.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=v.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=W(ee.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=W(v.data.projectQuotaQuestionType)}else k.value="basicSettings",ke(()=>{setTimeout(()=>{F.value.scrollToField("countryIdList")}),M.warning({message:"请先选择所属区域",center:!0})})})},ve=async()=>{if(e.value.data.configurationInformation.initialProblem.countryId){if(!e.value.data.configurationInformation.projectCategoryList){const i={countryId:e.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},o=await X.getProjectCategoryList(i);e.value.data.configurationInformation.projectCategoryList=o.data.getProjectCategoryInfoList.filter(r=>r.status===1)}}else M.warning({message:"请先选择配置信息下的区域",center:!0})},_e=async(i,o)=>{i?setTimeout(async()=>{const{projectProblemCategoryName:r,...v}=e.value.data.configurationInformation.projectCategoryList.find(s=>s.projectProblemCategoryId===i),h=await X.getProjectProblemList(v);if(e.value.data.configurationInformation.ProjectProblemInfoList=h.data.getProjectProblemInfoList.map(s=>({...s,getProjectAnswerInfoList:s.getProjectAnswerInfoList.sort((u,E)=>u.answerValue.replace(/^[a-zA-Z]+/,"")-E.answerValue.replace(/^[a-zA-Z]+/,""))})),!o){e.value.projectQuotaInfoList=[];for(let s=0;s<e.value.data.configurationInformation.ProjectProblemInfoList.length;s++){const u=W(e.value.data.configurationInformation.initialProblem);u.projectProblemId=e.value.data.configurationInformation.ProjectProblemInfoList[s].id,u.keyValue=e.value.data.configurationInformation.ProjectProblemInfoList[s].question,u.questionType=e.value.data.configurationInformation.ProjectProblemInfoList[s].questionType,u.projectProblemCategoryId=i,e.value.projectQuotaInfoList.push(u)}}}):de()},tt=(i,o)=>{let r=e.value.projectQuotaInfoList[o].projectAnswerIdList;const h=e.value.data.configurationInformation.ProjectProblemInfoList[o].getProjectAnswerInfoList.filter(s=>r.includes(s.id));e.value.projectQuotaInfoList[o].answerValueList=h.map(s=>s.anotherName)},he=async()=>{const i=await Tt.getCustomerList({});p.value.basicSettings.customerList=i.data.getTenantCustomerAccordInfoList},Ie=()=>{H.value.showEdit()},at=async()=>{await he(),p.value.basicSettings.countryList=await C.getCountry(),p.value.basicSettings.B2BTypeList=await C.getB2BType()},lt=async()=>{e.value.projectQuotaInfoList.length&&(e.value.data.configurationInformation.initialProblem.countryId=e.value.projectQuotaInfoList[0].countryId,e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=e.value.projectQuotaInfoList[0].projectQuotaQuestionType,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId=e.value.projectQuotaInfoList[0].projectProblemCategoryId,await be("configurationInformation",!0),await ve(),setTimeout(async()=>{await _e(e.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},Pe=(i,o)=>({get(){return e.value.projectQuotaInfoList[o].id===i?e.value.projectQuotaInfoList[o].projectAnswerIdList:e.value.projectQuotaInfoList.find(v=>v.projectProblemId===i).projectAnswerIdList},set(r){if(e.value.projectQuotaInfoList[o].id===i)e.value.projectQuotaInfoList[o].projectAnswerIdList=r;else{const v=e.value.projectQuotaInfoList.find(h=>h.projectProblemId===i);v.projectAnswerIdList=r}}}),je=I(),G=I({exchangeRate:null}),ot=Te({exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入一个有效的数字，不能小于0，最多保留两位小数",trigger:"blur"}]}),nt=()=>{V.value=!0},it=async()=>{await je.value.validate(),e.value.exchangeRate=G.value.exchangeRate,(await Et.updateWebConfig(G.value)).data.flag&&(await m.getCurrencyType(),g.value=m.originalExchangeRate,e.value.exchangeRate=m.originalExchangeRate,e.value.currencyType=m.currencyType===1?"USD":"CNY",m.currencyType!==1&&(e.value.exchangeRate=Math.floor(1/m.originalExchangeRate*100)/100,g.value=e.value.exchangeRate),V.value=!1)},rt=async i=>{const o={beforeCurrency:"",oldCurrency:i,exchangeRate:""};i==="USD"?o.beforeCurrency="CNY":i==="CNY"&&(o.beforeCurrency="USD"),o.exchangeRate=g.value;const r=await X.updateExchangeRate(o);r.data&&(g.value=Math.floor(r.data.exchangeRate*100)/100,e.value.exchangeRate=Math.floor(r.data.exchangeRate*100)/100)};Re(()=>q.leftTab,(i,o)=>{e.value=i},{deep:!0}),Ee(async()=>{O.value=[],await at(),await lt()}),z({getUpLoad:Je}),ke(()=>{_(F.value)});const st=()=>{p.value.editProps.id="",p.value.editProps.countryId="",p.value.editProps.row="",p.value.editProps.visible=!0},ut=async()=>{const i=await X.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=i.data.getProjectCountryListInfoList,i.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=i.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=W(ee.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=W(i.data.projectQuotaQuestionType)};return(i,o)=>{const r=y("el-button"),v=y("el-switch"),h=y("el-input"),s=y("el-form-item"),u=y("el-col"),E=y("el-option"),A=y("el-select"),Le=y("el-checkbox"),we=y("ElOption"),dt=y("ElSelect"),Z=y("el-text"),T=y("el-row"),oe=xt,ce=y("el-tooltip"),J=y("el-card"),ct=y("el-date-picker"),mt=y("el-cascader"),pt=y("el-icon"),ft=y("el-upload"),Ve=y("el-dialog"),me=y("el-tab-pane"),gt=y("el-checkbox-group"),xe=y("el-input-number"),yt=y("el-tabs"),bt=y("el-form"),vt=y("ElForm");return c(),b(vt,{"label-width":"100px",rules:a(Y),ref_key:"formRef",ref:F,model:a(e),"label-position":"top"},{default:t(()=>[l(yt,{modelValue:a(k),"onUpdate:modelValue":o[28]||(o[28]=n=>ne(k)?k.value=n:null),onTabChange:be},{default:t(()=>[l(me,{label:"基础设置",name:"basicSettings"},{default:t(()=>[l(J,{"body-style":""},{header:t(()=>[d("div",Yt,[Ot,d("div",null,[q.tabIndex>0?(c(),b(r,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:ze},{default:t(()=>[f(" 同步数据 ")]),_:1})):j("",!0),l(v,{modelValue:a(e).required,"onUpdate:modelValue":o[0]||(o[0]=n=>a(e).required=n),"active-value":!0,"inactive-value":!1,class:"ml-2"},null,8,["modelValue"]),f(" 只看必填 ")])])]),default:t(()=>[l(T,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"项目名称",prop:"name"},{default:t(()=>[l(h,{modelValue:a(e).name,"onUpdate:modelValue":o[1]||(o[1]=n=>a(e).name=n),modelModifiers:{trim:!0},disabled:a(e).projectType===2,clearable:"",maxlength:50},null,8,["modelValue","disabled"])]),_:1})]),_:1}),a(e).projectType!==2?(c(),b(u,{key:0,span:6},{default:t(()=>[l(s,{label:"项目标识",prop:"projectIdentification"},{default:t(()=>[l(h,{clearable:"",modelValue:a(e).projectIdentification,"onUpdate:modelValue":o[2]||(o[2]=n=>a(e).projectIdentification=n),modelModifiers:{trim:!0},maxlength:100},null,8,["modelValue"])]),_:1})]),_:1})):j("",!0),a(e).projectType!==2?(c(),b(u,{key:1,span:6},{default:t(()=>[l(s,{label:"所属客户",prop:"clientId"},{default:t(()=>[l(A,{class:"placeholderColor",placeholder:"Select",modelValue:a(e).clientId,"onUpdate:modelValue":o[3]||(o[3]=n=>a(e).clientId=n),disabled:a(e).projectType===2,clearable:"",onChange:Ae},{empty:t(()=>[d("div",Kt,[f(" 暂无数据 "),l(r,{type:"primary",link:"",size:"small",onClick:Ie},{default:t(()=>[f(" 快捷新增 "),Wt]),_:1})])]),default:t(()=>[(c(!0),S(Q,null,D(a(p).basicSettings.customerList,n=>(c(),b(E,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord,disabled:n.isReveal===1||n.turnover&&n.practiceTurnover&&n.turnover<n.practiceTurnover},{default:t(()=>[d("span",Gt,U(n.customerAccord),1),ie(d("span",Zt,[ie(d("span",null," 营业额超限 ",512),[[fe,n.practiceTurnover>n.turnover]]),ie(d("span",null," 审核率不合格 ",512),[[fe,n.rateAudit>n.practiceRateAudit]])],512),[[fe,n.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128)),l(r,{size:"small",class:"buttonClass",onClick:Ie},{default:t(()=>[f(" 快捷新增 "),Jt]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):j("",!0),l(u,{span:6},{default:t(()=>[l(s,{label:"所属区域",prop:"countryIdList"},{default:t(()=>[l(dt,{class:"placeholderColor",modelValue:a(e).countryIdList,"onUpdate:modelValue":o[5]||(o[5]=n=>a(e).countryIdList=n),disabled:a(e).projectType===2,placeholder:"区域",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:Xe},{header:t(()=>[l(Le,{modelValue:a(p).checked,"onUpdate:modelValue":o[4]||(o[4]=n=>a(p).checked=n),onChange:Be,style:{display:"flex",height:"unset"}},{default:t(()=>[f("全球")]),_:1},8,["modelValue"])]),default:t(()=>[(c(!0),S(Q,null,D(a(p).basicSettings.countryList,n=>(c(),b(we,{label:n.chineseName,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"币种",prop:"currencyType"},{default:t(()=>[a(m).originalExchangeRate?(c(),b(A,{key:1,modelValue:a(e).currencyType,"onUpdate:modelValue":o[6]||(o[6]=n=>a(e).currencyType=n),disabled:!!a(e).projectId,"value-key":"",style:{width:"22.4375rem"},placeholder:"请选择币种",filterable:"",onChange:rt},{default:t(()=>[(c(),S(Q,null,D(N,n=>l(E,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])):(c(),b(r,{key:0,type:"primary",link:"",onClick:nt},{default:t(()=>[f("未设置汇率，点击设置>>")]),_:1}))]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"汇率",prop:""},{default:t(()=>[a(g)!==null?(c(),b(Z,{key:0},{default:t(()=>[f(U(a(e).currencyType==="USD"?"1美元":"1人民币")+" = "+U(a(e).exchangeRate?a(e).exchangeRate:a(g))+U(a(e).currencyType==="USD"?"人民币":"美元"),1)]),_:1})):j("",!0)]),_:1})]),_:1})]),_:1}),l(T,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"项目价",prop:"doMoneyPrice"},{default:t(()=>[l(h,{style:{height:"2rem"},modelValue:a(e).doMoneyPrice,"onUpdate:modelValue":o[7]||(o[7]=n=>a(e).doMoneyPrice=n),"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"配额",prop:"num"},{default:t(()=>[l(h,{style:{height:"2rem"},modelValue:a(e).num,"onUpdate:modelValue":o[8]||(o[8]=n=>a(e).num=n),size:"large",onKeydown:R},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{style:{position:"relative"},span:6},{default:t(()=>[l(s,{prop:"minimumDuration"},{label:t(()=>[d("div",null,[f(" 最小分长"),l(ce,{class:"tooltips",content:"该问卷最少要做多少分钟才被识别为合格",placement:"top"},{default:t(()=>[l(oe,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(h,{style:{height:"2rem",width:"100%"},modelValue:a(e).minimumDuration,"onUpdate:modelValue":o[9]||(o[9]=n=>a(e).minimumDuration=n),modelModifiers:{number:!0},min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:R},{append:t(()=>[f(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"IR",prop:"ir"},{default:t(()=>[l(h,{modelValue:a(e).ir,"onUpdate:modelValue":o[10]||(o[10]=n=>a(e).ir=n)},{append:t(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(T,{gutter:20},{default:t(()=>[l(u,{span:12},{default:t(()=>[l(s,{prop:"uidUrl"},{label:t(()=>[d("div",null,[f(" URL"),l(ce,{class:"tooltips",placement:"top"},{content:t(()=>[d("div",null,[d("div",null,[f("请参考如下链接"),Xt,f(U(Se))]),ea])]),default:t(()=>[l(oe,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(h,{clearable:"",modelValue:a(e).uidUrl,"onUpdate:modelValue":o[11]||(o[11]=n=>a(e).uidUrl=n),modelModifiers:{trim:!0},disabled:a(e).projectType===2},null,8,["modelValue","disabled"]),l(Z,{class:"mx-1"},{default:t(()=>[f(U(Se))]),_:1})]),_:1})]),_:1}),a(e).mutualExclusion===1&&!a(e).required?(c(),b(u,{key:0,span:12},{default:t(()=>[l(s,{label:"互斥ID"},{default:t(()=>[l(h,{clearable:"",modelValue:a(e).mutualExclusionId,"onUpdate:modelValue":o[12]||(o[12]=n=>a(e).mutualExclusionId=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})):j("",!0)]),_:1})]),_:1}),a(e).required?j("",!0):(c(),b(J,{key:0},{header:t(()=>[ta]),default:t(()=>[l(T,{gutter:20},{default:t(()=>[l(u,{span:5},{default:t(()=>[l(s,{label:"定时发布",class:"flex"},{default:t(()=>[l(v,{"active-value":2,"inactive-value":1,modelValue:a(e).isTimeReleases,"onUpdate:modelValue":o[13]||(o[13]=n=>a(e).isTimeReleases=n),disabled:a(e).projectType===2,onChange:Ke},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"B2B",class:"flex"},{default:t(()=>[l(v,{"active-value":2,"inactive-value":1,modelValue:a(e).isB2b,"onUpdate:modelValue":o[14]||(o[14]=n=>a(e).isB2b=n),disabled:a(e).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"在线",class:"flex"},{default:t(()=>[l(v,{"active-value":1,"inactive-value":2,disabled:a(e).isTimeReleases===2||a(e).projectType===2,modelValue:a(e).isOnline,"onUpdate:modelValue":o[15]||(o[15]=n=>a(e).isOnline=n)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"前置问卷",class:"flex"},{default:t(()=>[l(v,{"active-value":1,"inactive-value":2,modelValue:a(e).isProfile,"onUpdate:modelValue":o[16]||(o[16]=n=>a(e).isProfile=n),disabled:a(e).projectType===2,onChange:We},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:4},{default:t(()=>[l(s,{label:"置顶",class:"flex"},{default:t(()=>[l(v,{"active-value":1,"inactive-value":2,modelValue:a(e).isPinned,"onUpdate:modelValue":o[17]||(o[17]=n=>a(e).isPinned=n),disabled:a(e).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),l(T,{gutter:20},{default:t(()=>[a(e).isTimeReleases===2?(c(),b(u,{key:0,span:5},{default:t(()=>[l(s,{label:"发布时间",prop:"releaseTime"},{default:t(()=>[l(ct,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:a(e).releaseTime,"onUpdate:modelValue":o[18]||(o[18]=n=>a(e).releaseTime=n),placeholder:"请选择时间",disabledDate:qe,onChange:$e},null,8,["modelValue"])]),_:1})]),_:1})):j("",!0),a(e).isB2b===2&&a(e).projectType!==2?(c(),b(u,{key:1,span:5},{default:t(()=>[l(s,{label:"项目类型"},{default:t(()=>[l(mt,{"show-all-levels":!1,modelValue:a(e).projectType,"onUpdate:modelValue":o[19]||(o[19]=n=>a(e).projectType=n),props:a(p).basicSettings.B2BTypeProps,options:a(p).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):j("",!0)]),_:1}),l(T,null,{default:t(()=>[l(u,{span:24},{default:t(()=>[l(s,{label:"备注"},{default:t(()=>[l(h,{maxlength:"200","show-word-limit":"",type:"textarea",rows:5,modelValue:a(e).remark,"onUpdate:modelValue":o[20]||(o[20]=n=>a(e).remark=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),a(e).required?j("",!0):(c(),b(J,{key:1},{header:t(()=>[d("div",aa,[la,l(r,{type:"primary",link:"",size:"default",onClick:Fe},{default:t(()=>[f(U(a($)?"收起":"展开"),1)]),_:1})])]),default:t(()=>[a($)?(c(),S("div",oa,[l(s,{label:"上传图片"},{default:t(()=>[l(ft,{"file-list":a(O),"onUpdate:fileList":o[21]||(o[21]=n=>ne(O)?O.value=n:null),action:ae,"list-type":"picture-card",drag:!0,limit:10,accept:".png, .jpg, .jpeg, .gif","before-upload":He,"on-preview":Ze,"on-remove":Ye,"on-success":Oe,"on-exceed":Ge},{tip:t(()=>[d("div",ia,[l(Z,{type:"primary",size:"small"},{default:t(()=>[f(" 支持上传JPG/JPEG/PNG图片，小于10MB ")]),_:1})])]),default:t(()=>[l(pt,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:t(()=>[l(a(Vt))]),_:1}),na]),_:1},8,["file-list"]),l(Ve,{modelValue:a(le),"onUpdate:modelValue":o[22]||(o[22]=n=>ne(le)?le.value=n:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:t(()=>[d("img",{"w-full":"",src:a(ge),alt:"Preview Image"},null,8,ra)]),_:1},8,["modelValue"])]),_:1}),l(T,null,{default:t(()=>[l(u,{span:24},{default:t(()=>[l(s,{label:"项目描述"},{default:t(()=>[l(Ht,{style:{width:"100%"},tinymceHtml:a(e).richText,onChangeEditorValue:Me},null,8,["tinymceHtml"])]),_:1})]),_:1})]),_:1})])):j("",!0)]),_:1}))]),_:1}),a(e).isProfile===1&&!a(e).required&&a(e).projectType!==2?(c(),b(me,{key:0,label:"配置信息",name:"configurationInformation"},{default:t(()=>[a(e).data?(c(),b(J,{key:0},{header:t(()=>[sa]),default:t(()=>[l(T,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"选择区域"},{default:t(()=>[l(A,{modelValue:a(e).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":o[23]||(o[23]=n=>a(e).data.configurationInformation.initialProblem.countryId=n),filterable:"",clearable:"",placeholder:"Select",disabled:a(e).projectType===2,onChange:et},{empty:t(()=>[d("div",null,[l(r,{type:"primary",link:"",class:"buttonClass",size:"small",onClick:st},{default:t(()=>[f(" 快捷新增 "),l(oe,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"0.125rem",margin:"0 0.125rem"}})]),_:1})])]),default:t(()=>[(c(!0),S(Q,null,D(a(e).data.configurationInformation.configurationCountryList,n=>(c(),b(we,{label:n.countryName,value:n.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),a(e).data.configurationInformation.initialProblem.countryId?(c(),b(u,{key:0,span:6},{default:t(()=>[l(s,{label:"问卷名称"},{default:t(()=>[l(A,{modelValue:a(e).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":o[24]||(o[24]=n=>a(e).data.configurationInformation.initialProblem.projectProblemCategoryId=n),clearable:"",placeholder:"Select",disabled:a(e).projectType===2,onFocus:ve,onChange:_e},{default:t(()=>[(c(!0),S(Q,null,D(a(e).data.configurationInformation.projectCategoryList,n=>(c(),b(E,{key:n.projectProblemCategoryId,label:n.projectProblemCategoryName,value:n.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):j("",!0)]),_:1}),a(e).data.configurationInformation.ProjectProblemInfoList&&a(e).data.configurationInformation.ProjectProblemInfoList.length&&a(e).projectQuotaInfoList.length?(c(!0),S(Q,{key:0},D(a(e).data.configurationInformation.ProjectProblemInfoList,(n,pe)=>(c(),b(T,{class:"allocation",gutter:20},{default:t(()=>[l(u,{span:20},{default:t(()=>[f(" 问题："+U(n.question),1)]),_:2},1024),l(u,{span:20},{default:t(()=>[l(s,null,{default:t(()=>[n.questionType===1?(c(),b(h,{key:0,disabled:"",placeholder:"输入框无法设置"})):(c(),b(gt,{key:1,modelValue:Pe(n.id,pe).get(),"onUpdate:modelValue":K=>Pe(n.id,pe).set(K),onChange:K=>tt(3,pe)},{default:t(()=>[(c(!0),S(Q,null,D(n.getProjectAnswerInfoList,K=>(c(),b(Le,{label:K.anotherName,value:K.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):j("",!0)]),_:1})):j("",!0)]),_:1})):j("",!0),a(e).required?j("",!0):(c(),b(me,{key:1,label:"安全信息",name:"securityInformation"},{default:t(()=>[l(J,null,{header:t(()=>[ua]),default:t(()=>[l(T,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,null,{label:t(()=>[da]),default:t(()=>[l(xe,{style:{height:"2rem"},modelValue:a(e).preNum,"onUpdate:modelValue":o[25]||(o[25]=n=>a(e).preNum=n),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:R},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:1}),l(u,{span:6},{default:t(()=>[l(s,null,{label:t(()=>[ca]),default:t(()=>[l(xe,{style:{height:"2rem"},modelValue:a(e).limitedQuantity,"onUpdate:modelValue":o[26]||(o[26]=n=>a(e).limitedQuantity=n),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:R},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:1}),l(u,{span:4,class:"flex"},{default:t(()=>[l(s,{label:"",class:"flex m-0"},{label:t(()=>[d("div",null,[f(" 允许重复参与"),l(ce,{class:"tooltips",placement:"top"},{content:t(()=>[ma,pa]),default:t(()=>[l(oe,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(v,{modelValue:a(e).ipDifferenceDetection,"onUpdate:modelValue":o[27]||(o[27]=n=>a(e).ipDifferenceDetection=n),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"]),l(Ve,{modelValue:a(V),"onUpdate:modelValue":o[31]||(o[31]=n=>ne(V)?V.value=n:null),title:"设置汇率",width:"500"},{footer:t(()=>[d("div",ga,[l(r,{type:"primary",onClick:it},{default:t(()=>[f(" 确认 ")]),_:1}),l(r,{onClick:o[30]||(o[30]=n=>V.value=!1)},{default:t(()=>[f(" 关闭 ")]),_:1})])]),default:t(()=>[l(bt,{model:a(G),ref_key:"exchangeRateRef",ref:je,rules:a(ot),"label-width":"90px",inline:!1},{default:t(()=>[l(s,{label:"美元汇率",prop:"exchangeRate"},{default:t(()=>[d("div",fa,[l(h,{modelValue:a(G).exchangeRate,"onUpdate:modelValue":o[29]||(o[29]=n=>a(G).exchangeRate=n),placeholder:"请输入数值",clearable:""},{prefix:t(()=>[l(Z,{style:{color:"#333"}},{default:t(()=>[f(" 1 美元 (USD)     = ")]),_:1})]),suffix:t(()=>[l(Z,{style:{color:"#333"}},{default:t(()=>[f(" 人民币 (CNY) ")]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(Rt,{ref_key:"editRef",ref:H,onFetchData:he},null,512),a(p).editProps.visible?(c(),b(Dt,{key:0,id:a(p).editProps.id,countryId:a(p).editProps.countryId,modelValue:a(p).editProps.visible,"onUpdate:modelValue":o[32]||(o[32]=n=>a(p).editProps.visible=n),row:a(p).editProps.row,onSuccess:ut},null,8,["id","countryId","modelValue","row"])):j("",!0)]),_:1},8,["rules","model"])}}}),za=Ne(ya,[["__scopeId","data-v-ac1050d7"]]);export{za as default};
