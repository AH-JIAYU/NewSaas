
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as z,aL as $,r as u,a as d,o as f,b as P,y as i,z as g,i as r,f as t,w as a,g as s,j as w,e as L,A as M,b8 as y,aH as H,aI as O,L as G}from"./index-ChQqcNbm.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-SxHCfjyr.js";import"./department-htT9pOTR.js";const h=p=>(H("data-v-3a43d23f"),p=p(),O(),p),K={class:"news p-4"},Q=h(()=>i("div",{class:"type"},[i("span"),s(" 合作邀约")],-1)),W={class:"news-content"},X={class:"content"},Y={class:"time"},Z={key:0,class:"footer"},ee={style:{display:"flex","justify-items":"center"}},te=h(()=>i("span",{style:{"margin-right":"15px"}},"发送项目",-1)),ae={style:{display:"flex","justify-items":"center"}},oe=h(()=>i("span",{style:{"margin-right":"15px"}},"接收项目",-1)),re=z({name:"PersonalNotificationCooperation",__name:"notification-cooperation",emits:["delSelectId"],setup(p,{expose:C,emit:k}){const U=k,_=$(),e=u({}),c=u(!1);u([]);const I=u(),x={priceRatio:[{required:!0,message:"请输入价格比例",trigger:"blur"}],sendProjectType:[{required:!0,message:"请选择发送项目",trigger:"change"}],receiveProjectType:[{required:!0,message:"请选择接收项目",trigger:"change"}]},R=async l=>{e.value=l,S()},S=async()=>{const l={id:e.value.id,type:1};await y.updateTenantAudit(l),await _.getUnreadTodo()},E=async()=>{const l={id:e.value.id,type:2};U("delSelectId"),await y.updateTenantAudit(l),await _.getUnreadTodo()},B=async()=>{I.value.validate(async l=>{if(l){e.value.receiveProjectType==2&&(e.value.chargeUserId=null,e.value.chargeUserName="",e.value.departmentId="");const o={id:e.value.id,beInvitationChargeUserId:e.value.beInvitationChargeUserId,beInvitationChargeUserName:e.value.beInvitationChargeUserName,priceRatio:e.value.priceRatio,type:3,chargeUserId:e.value.chargeUserId,departmentId:e.value.departmentId,chargeUserName:e.value.chargeUserName,sendProjectType:e.value.sendProjectType,receiveProjectType:e.value.receiveProjectType};U("delSelectId"),await y.updateTenantAudit(o),await _.getUnreadTodo()}})},T=u();function F(){T.value.showEdit()}function A(l){e.value.chargeUserId=l.chargeUserId,e.value.departmentId=l.departmentId,e.value.chargeUserName=l.chargeUserName,e.value.name=(l.departmentName?l.departmentName:"")+(e.value.form.chargeUserName?e.value.form.chargeUserName:"")}return C({showEdit:R}),(l,o)=>{const V=d("el-button"),N=d("el-input"),v=d("el-form-item"),m=d("el-radio"),b=d("el-radio-group"),D=d("ElForm"),j=d("ElButton"),q=d("el-dialog");return f(),P("div",K,[Q,i("div",W,[i("div",X,"尊贵的"+g(r(e).beInvitedName),1),i("div",Y," 您好，我是"+g(r(e).invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+g(r(e).phoneOrEmail)+"。 ",1),r(e).auditStatus===1?(f(),P("div",Z,[t(V,{onClick:E},{default:a(()=>[s("拒绝合作")]),_:1}),t(V,{type:"primary",onClick:o[0]||(o[0]=n=>c.value=!0)},{default:a(()=>[s(" 同意合作 ")]),_:1})])):w("",!0)]),t(q,{modelValue:r(c),"onUpdate:modelValue":o[6]||(o[6]=n=>M(c)?c.value=n:null),title:"添加PM"},{footer:a(()=>[t(j,{size:"large",onClick:o[5]||(o[5]=n=>c.value=!1)},{default:a(()=>[s(" 取消 ")]),_:1}),t(j,{type:"primary",size:"large",onClick:B},{default:a(()=>[s(" 确定 ")]),_:1})]),default:a(()=>[t(D,{ref_key:"FormRef",ref:I,rules:x,model:r(e),"label-width":"7rem"},{default:a(()=>[t(v,{label:"价格比例",prop:"priceRatio"},{default:a(()=>[t(N,{modelValue:r(e).priceRatio,"onUpdate:modelValue":o[1]||(o[1]=n=>r(e).priceRatio=n),clearable:""},{append:a(()=>[s("%")]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"项目分配方式",prop:"sendProjectType","label-width":"7rem"},{default:a(()=>[i("div",ee,[te,t(b,{modelValue:r(e).sendProjectType,"onUpdate:modelValue":o[2]||(o[2]=n=>r(e).sendProjectType=n)},{default:a(()=>[t(m,{value:1},{default:a(()=>[s("自动")]),_:1}),t(m,{value:2},{default:a(()=>[s("手动")]),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(v,{prop:"receiveProjectType"},{default:a(()=>[i("div",ae,[oe,t(b,{modelValue:r(e).receiveProjectType,"onUpdate:modelValue":o[3]||(o[3]=n=>r(e).receiveProjectType=n)},{default:a(()=>[t(m,{value:1},{default:a(()=>[s("自动")]),_:1}),t(m,{value:2},{default:a(()=>[s("手动")]),_:1})]),_:1},8,["modelValue"])]),r(e).receiveProjectType==1?(f(),L(N,{key:0,placeholder:"请选择负责部门/PM",clearable:"",style:{width:"200px","margin-left":"25px"},onClick:F,modelValue:r(e).name,"onUpdate:modelValue":o[4]||(o[4]=n=>r(e).name=n)},null,8,["modelValue"])):w("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(J,{ref_key:"userRef",ref:T,onUserData:A},null,512)])}}}),ie=G(re,[["__scopeId","data-v-3a43d23f"]]);export{ie as default};
