
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as N,M as R,aM as V,p as $,r as z,l as H,B as b,H as I,a as r,al as A,o as u,b as U,f as o,w as n,g as p,am as j,i as t,e as f,j as v,Q as J,aN as O,E as Q,L as q,ak as F,P as G}from"./index-pHZL677A.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-Bh5FPxyY.js";import{a as M}from"./configuration_role-Ccs3OMdG.js";import{u as W}from"./useTabbar-DwULBobD.js";import"./index-I83iDT1g.js";const X=N({name:"SettingRoleList",__name:"list",setup(Y){const _=R(),{pagination:h,onSortChange:C}=V(),g=W(),m=$(),e=z({loading:!1,tableAutoHeight:!1,formMode:"drawer",formModeProps:{visible:!1,id:"",row:{}},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});H(()=>{i(),e.value.formMode==="router"&&b.on("get-data-list",()=>{i()})}),I(()=>{e.value.formMode==="router"&&b.off("get-data-list")});function i(){e.value.loading=!0,M.list().then(a=>{e.value.loading=!1,e.value.dataList=a.data,h.value.total=a.data.length})}function y({prop:a,order:l}){C(a,l).then(()=>i())}function E(){e.value.formMode==="router"?m.settings.tabbar.enable&&m.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleCreate"}):_.push({name:"multilevel_menu_exampleRoleCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function P(a){e.value.formMode==="router"?m.settings.tabbar.enable&&m.settings.tabbar.mergeTabsBy!=="activeMenu"?g.open({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):_.push({name:"multilevel_menu_exampleRoleEdit",params:{id:a.id}}):(e.value.formModeProps.id=a.id,e.value.formModeProps.row=JSON.stringify(a),e.value.formModeProps.visible=!0)}function w(a){O.confirm(`确认删除「${a.roleName}」吗？`,"确认信息").then(()=>{M.delete({id:a.id}).then(()=>{i(),Q.success({message:"删除成功",center:!0})})}).catch(()=>{})}return(a,l)=>{const x=q,c=r("ElButton"),S=r("ElSpace"),d=r("ElTableColumn"),k=r("el-empty"),B=r("ElTable"),L=F,T=A("loading");return u(),U("div",{class:J({"absolute-container":t(e).tableAutoHeight})},[o(L,null,{default:n(()=>[o(S,{wrap:""},{default:n(()=>[o(c,{type:"primary",size:"default",onClick:E},{icon:n(()=>[o(x,{name:"i-ep:plus"})]),default:n(()=>[p(" 新增角色管理 ")]),_:1})]),_:1}),j((u(),f(B,{class:"my-4",data:t(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:y,onSelectionChange:l[0]||(l[0]=s=>t(e).batch.selectionDataList=s)},{empty:n(()=>[o(k,{description:"暂无数据"})]),default:n(()=>[t(e).batch.enable?(u(),f(d,{key:0,type:"selection",align:"center",fixed:""})):v("",!0),o(d,{prop:"id",width:"200",align:"center",label:"ID"}),o(d,{prop:"roleName",align:"center",label:"角色码"}),o(d,{label:"操作",width:"250",align:"center",fixed:"right"},{default:n(s=>[o(c,{type:"primary",size:"small",plain:"",onClick:D=>P(s.row)},{default:n(()=>[p(" 编辑 ")]),_:2},1032,["onClick"]),o(c,{type:"danger",size:"small",plain:"",onClick:D=>w(s.row)},{default:n(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,t(e).loading]])]),_:1}),t(e).formMode==="dialog"||t(e).formMode==="drawer"?(u(),f(K,{key:0,id:t(e).formModeProps.id,modelValue:t(e).formModeProps.visible,"onUpdate:modelValue":l[1]||(l[1]=s=>t(e).formModeProps.visible=s),row:t(e).formModeProps.row,mode:t(e).formMode,onSuccess:i},null,8,["id","modelValue","row","mode"])):v("",!0)],2)}}}),ne=G(X,[["__scopeId","data-v-b284a2e7"]]);export{ne as default};
