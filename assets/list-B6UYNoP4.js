
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ne,aN as se,r as u,a3 as ue,n as ie,p as pe,a as c,q as ce,s as E,o as a,b as z,f as i,w as t,g as n,e as l,i as m,aM as fe,j as o,z as U,F as ye,t as de,N as me,bf as _e,b9 as ve,ba as be,ap as ge,L as ke}from"./index-DK9KDSNt.js";import{_ as he}from"./index.vue_vue_type_style_index_0_lang-CD6ERy58.js";import{_ as Te}from"./index-C9pOhvDo.js";import{E as Se,a as xe}from"./index-ebT80IlV.js";import Ce from"./index-DJpAfu_c.js";import"./index.vue_vue_type_script_setup_true_lang-C_ecb7J-.js";import"./sortable.esm-C0-Qcoum.js";const ze=ne({name:"alter",__name:"list",setup(Ue){const{format:F}=_e(),{pagination:_,onSizeChange:H,onCurrentChange:P}=se(),j=u(""),V=u([]),v=u(!0),L=u(),w=u(),g=u(!1),f=u([]),k=u(!1);u(!1);const h=u("default"),T=u(!1),A=u([]),N=u(),B=u("formSearch-alter"),O=[{label:"完成",value:"1,0"},{label:"审核通过",value:"1,7"},{label:"审核失败",value:"1,8"},{label:"数据冻结",value:"1,9"},{label:"被甄别",value:"2,null"},{label:"配额满",value:"3,null"}],S=u([{prop:"projectClickId",label:"点击ID",sortable:!0,checked:!0},{prop:"beforeType",label:"变更前",sortable:!0,checked:!0},{prop:"afterType",label:"变更后",sortable:!0,checked:!0},{prop:"createTime",label:"创建时间",sortable:!0,checked:!0},{prop:"remark",label:"备注",sortable:!0,checked:!0},{prop:"createUserId",label:"操作人",sortable:!0,checked:!0}]),y=ue({page:1,limit:10,type:null,createUserName:"",surveyType:null,viceType:null}),D=u([]);function M(){L.value.showEdit()}function $(s){A.value=s}function q(){Object.assign(y,{type:null,createUserName:"",surveyType:null,viceType:null}),b()}function Q(s){H(s).then(()=>{y.limit=s,b()})}function x(s=1){P(s).then(()=>{y.page=s,b()})}async function b(){try{if(v.value=!0,y.type){const r=y.type.split(",");y.surveyType=r[0],y.viceType=r[1]}const{data:s}=await xe.list(y);D.value=s.tenantUpdateRecordVOBuilders,_.value.total=+s.total,v.value=!1}catch{}finally{v.value=!1}}ie(async()=>{const{data:s}=await pe.getTenantStaffListData({});V.value=s,S.value.forEach(r=>{r.checked&&f.value.push(r.prop)}),b(),N.value=[{index:1,show:!0,type:"input",modelName:"createUserName",placeholder:"操作人"},{index:2,show:!0,type:"select",modelName:"type",placeholder:"变更状态",option:"type",optionLabel:"label",optionValue:"value"}]});const G={type:()=>O.map(s=>({label:s.label,value:s.value}))};return(s,r)=>{const J=Te,K=c("ElDivider"),R=c("el-button"),W=he,X=ve,Y=be,Z=c("el-row"),d=c("el-table-column"),p=c("el-text"),ee=c("el-tag"),te=c("el-tooltip"),ae=c("el-empty"),le=c("el-table"),oe=c("ElPagination"),re=ge,I=ce("loading");return E((a(),z("div",{class:me({"absolute-container":g.value})},[i(re,null,{default:t(()=>[i(J,{formSearchList:N.value,formSearchName:B.value,onCurrentChange:x,onOnReset:q,model:y,formOption:G},null,8,["formSearchList","formSearchName","model"]),i(K,{"border-style":"dashed"}),i(Z,{gutter:24},{default:t(()=>[i(W,null,{default:t(()=>[i(R,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:M},{default:t(()=>[n(" 新增 ")]),_:1})]),_:1}),i(Y,null,{default:t(()=>[i(R,{size:"default",onClick:r[0]||(r[0]=()=>{})},{default:t(()=>[n(" 导出 ")]),_:1}),i(X,{border:k.value,"onUpdate:border":r[1]||(r[1]=e=>k.value=e),tableAutoHeight:g.value,"onUpdate:tableAutoHeight":r[2]||(r[2]=e=>g.value=e),checkList:f.value,"onUpdate:checkList":r[3]||(r[3]=e=>f.value=e),columns:S.value,"onUpdate:columns":r[4]||(r[4]=e=>S.value=e),"line-height":h.value,"onUpdate:lineHeight":r[5]||(r[5]=e=>h.value=e),stripe:T.value,"onUpdate:stripe":r[6]||(r[6]=e=>T.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),E((a(),l(le,{ref_key:"tableSortRef",ref:j,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:h.value,stripe:T.value,onSelectionChange:$},{empty:t(()=>[i(ae,{image:m(fe),"image-size":300},null,8,["image"])]),default:t(()=>[i(d,{align:"left",type:"selection"}),f.value.includes("projectClickId")?(a(),l(d,{key:0,prop:"projectClickId","show-overflow-tooltip":"",align:"left",label:"点击ID"})):o("",!0),f.value.includes("beforeType")?(a(),l(d,{key:1,prop:"beforeType","show-overflow-tooltip":"",align:"left",label:"变更前"},{default:t(({row:e})=>[e.beforeSurveyType===5&&e.beforeViceType===0?(a(),l(p,{key:0,type:"info",class:"mx-1"},{default:t(()=>[n("未完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===0?(a(),l(p,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===7?(a(),l(p,{key:2,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===8?(a(),l(p,{key:3,type:"danger",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):o("",!0),e.beforeSurveyType===1&&e.beforeViceType===9?(a(),l(p,{key:4,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):o("",!0),e.beforeSurveyType===2?(a(),l(p,{key:5,type:"warning",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):o("",!0),e.beforeSurveyType===3?(a(),l(p,{key:6,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):o("",!0),e.beforeViceType===13?(a(),l(p,{key:7,type:"success",class:"mx-1"},{default:t(()=>[n("和解")]),_:1})):o("",!0)]),_:1})):o("",!0),f.value.includes("afterType")?(a(),l(d,{key:2,prop:"afterType","show-overflow-tooltip":"",align:"left",label:"变更后"},{default:t(({row:e})=>[e.afterSurveyType===1&&e.afterViceType===0?(a(),l(p,{key:0,type:"success",class:"mx-1"},{default:t(()=>[n("完成")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===7?(a(),l(p,{key:1,type:"success",class:"mx-1"},{default:t(()=>[n("审核通过")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===8?(a(),l(p,{key:2,type:"danger",class:"mx-1"},{default:t(()=>[n("审核失败")]),_:1})):o("",!0),e.afterSurveyType===1&&e.afterViceType===9?(a(),l(p,{key:3,class:"mx-1"},{default:t(()=>[n("数据冻结")]),_:1})):o("",!0),e.afterSurveyType===2?(a(),l(p,{key:4,type:"warning",class:"mx-1"},{default:t(()=>[n("被甄别")]),_:1})):o("",!0),e.afterSurveyType===3?(a(),l(p,{key:5,type:"primary",class:"mx-1"},{default:t(()=>[n("配额满")]),_:1})):o("",!0)]),_:1})):o("",!0),f.value.includes("createTime")?(a(),l(d,{key:3,prop:"createTime","show-overflow-tooltip":"",align:"left",label:"创建时间"},{default:t(({row:e})=>[i(te,{content:e.createTime,placement:"top"},{default:t(()=>[i(ee,{effect:"plain",type:"info"},{default:t(()=>[n(U(m(F)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):o("",!0),f.value.includes("remark")?(a(),l(d,{key:4,prop:"remark","show-overflow-tooltip":"",align:"left",label:"备注"},{default:t(({row:e})=>[n(U(e.remark?e.remark:"-"),1)]),_:1})):o("",!0),f.value.includes("createUserId")?(a(),l(d,{key:5,prop:"createUserId","show-overflow-tooltip":"",align:"left",label:"操作人"},{default:t(({row:e})=>[(a(!0),z(ye,null,de(V.value,C=>(a(),z("div",{key:C.id},[C.id===e.createUserId?(a(),l(p,{key:0},{default:t(()=>[n(U(C.name),1)]),_:2},1024)):o("",!0)]))),128))]),_:1})):o("",!0)]),_:1},8,["data","border","size","stripe"])),[[I,v.value]]),i(oe,{"current-page":m(_).page,total:m(_).total,"page-size":m(_).size,"page-sizes":m(_).sizes,layout:m(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Q,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"]),i(Se,{onSuccess:b,ref_key:"editRef",ref:L},null,512),i(Ce,{ref_key:"detailRef",ref:w},null,512)]),_:1})],2)),[[I,v.value]])}}}),Fe=ke(ze,[["__scopeId","data-v-af666a12"]]);export{Fe as default};
