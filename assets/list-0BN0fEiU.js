
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ye,ae as _e,aN as ve,r as p,E as m,M as be,o as ge,aj as he,a2 as y,al as P,a3 as I,a as r,i as N,f,w as a,c as o,g as i,t as c,h as l,aM as ke,b as w,A as H,j as n,N as Te,O as Se,aO as Ce,aP as xe,aQ as ze,ao as Re,y as Ue}from"./index-JYvP5qSa.js";import{_ as Ve}from"./index-kU6dpmrd.js";import{_ as Ie}from"./index.vue_vue_type_style_index_0_lang-lycQhDr5.js";import{_ as Ne}from"./index-KLXQMhzo.js";import{E as Le,a as De}from"./index-BhiodjrJ.js";import Fe from"./index-ebnx2ToP.js";import"./index-C7vei4re.js";import"./clipboard-DSudtVPY.js";import"./index.vue_vue_type_script_setup_true_lang-BBlaOlzn.js";import"./sortable.esm-C0-Qcoum.js";const Ee={class:"copyId tableSmall"},je={class:"id oneLine projectId"},Ae=ye({name:"alter",__name:"list",setup(Pe){const{t}=_e(),{format:O}=Ce(),{pagination:b,onSizeChange:B,onCurrentChange:q}=ve(),M=p(""),L=p([]),h=p(!0),D=p(),$=p(),T=p(!1),_=p([]),S=p(!1);p(!1);const C=p("default"),x=p(!1),Q=p([]),F=p(),G=p("formSearch-alter"),J=[{label:m(()=>t("alter.complete")),value:"1,0"},{label:m(()=>t("alter.passTheAudit")),value:"1,7"},{label:m(()=>t("alter.auditFailure")),value:"1,8"},{label:m(()=>t("alter.dataFreezing")),value:"1,9"},{label:m(()=>t("alter.beScreened")),value:"2,null"},{label:m(()=>t("alter.quotaReached")),value:"3,null"}],z=p([{prop:"projectClickId",label:m(()=>t("alter.clickID")),sortable:!0,checked:!0},{prop:"beforeType",label:m(()=>t("alter.beforeChange")),sortable:!0,checked:!0},{prop:"afterType",label:m(()=>t("alter.afterChange")),sortable:!0,checked:!0},{prop:"createTime",label:m(()=>t("alter.createTime")),sortable:!0,checked:!0},{prop:"remark",label:m(()=>t("alter.remark")),sortable:!0,checked:!0},{prop:"createUserId",label:m(()=>t("alter.operator")),sortable:!0,checked:!0}]),v=be({page:1,limit:10,type:null,createUserName:"",surveyType:null,viceType:null}),E=p([]);function K(){D.value.showEdit()}function W(s){Q.value=s}function X(){Object.assign(v,{type:null,createUserName:"",surveyType:null,viceType:null}),k()}function Y(s){B(s).then(()=>{v.limit=s,k()})}function R(s=1){q(s).then(()=>{v.page=s,k()})}async function k(){try{if(h.value=!0,v.type){const u=v.type.split(",");v.surveyType=u[0],v.viceType=u[1]}const{data:s}=await De.list(v);E.value=s.tenantUpdateRecordVOBuilders,b.value.total=+s.total,h.value=!1}catch{}finally{h.value=!1}}ge(async()=>{const{data:s}=await he.getTenantStaffListData({});L.value=s,z.value.forEach(u=>{u.checked&&_.value.push(u.prop)}),k(),F.value=[{index:1,show:!0,type:"input",modelName:"createUserName",placeholder:m(()=>t("alter.operator"))},{index:2,show:!0,type:"select",modelName:"type",placeholder:m(()=>t("alter.changeStatus")),option:"type",optionLabel:"label",optionValue:"value"}]});const Z={type:()=>J.map(s=>({label:s.label,value:s.value}))},U=p();function ee(s){s?U.value=s.id:U.value=""}return(s,u)=>{const te=Ne,ae=y("ElDivider"),j=y("el-button"),le=Ie,re=xe,oe=ze,ne=y("el-row"),se=Ve,g=y("el-table-column"),d=y("el-text"),ue=y("el-tag"),ce=y("el-tooltip"),ie=y("el-empty"),pe=y("el-table"),de=y("ElPagination"),fe=Re,me=P("auth"),A=P("loading");return I((r(),N("div",{class:H({"absolute-container":T.value})},[f(fe,null,{default:a(()=>[f(te,{formSearchList:F.value,formSearchName:G.value,onCurrentChange:R,onOnReset:X,model:v,formOption:Z},null,8,["formSearchList","formSearchName","model"]),f(ae,{"border-style":"dashed"}),f(ne,{gutter:24},{default:a(()=>[f(le,null,{default:a(()=>[I((r(),o(j,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:K},{default:a(()=>[i(c(l(t)("alter.new")),1)]),_:1})),[[me,"alter-update-updateTenantUpdateRecord"]])]),_:1}),f(oe,null,{default:a(()=>[f(j,{size:"default",onClick:u[0]||(u[0]=()=>{})},{default:a(()=>[i(c(l(t)("alter.export")),1)]),_:1}),f(re,{border:S.value,"onUpdate:border":u[1]||(u[1]=e=>S.value=e),tableAutoHeight:T.value,"onUpdate:tableAutoHeight":u[2]||(u[2]=e=>T.value=e),checkList:_.value,"onUpdate:checkList":u[3]||(u[3]=e=>_.value=e),columns:z.value,"onUpdate:columns":u[4]||(u[4]=e=>z.value=e),"line-height":C.value,"onUpdate:lineHeight":u[5]||(u[5]=e=>C.value=e),stripe:x.value,"onUpdate:stripe":u[6]||(u[6]=e=>x.value=e),style:{"margin-left":"12px"},onQueryData:R},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),I((r(),o(pe,{ref_key:"tableSortRef",ref:M,style:{"margin-top":"10px"},"row-key":"id",data:E.value,border:S.value,size:C.value,stripe:x.value,onSelectionChange:W,"highlight-current-row":"",onCurrentChange:ee},{empty:a(()=>[f(ie,{image:l(ke),"image-size":300},null,8,["image"])]),default:a(()=>[_.value.includes("projectClickId")?(r(),o(g,{key:0,prop:"projectClickId","show-overflow-tooltip":"",align:"left",label:l(t)("alter.clickID")},{default:a(({row:e})=>[w("div",Ee,[w("div",je,c(e.projectClickId),1),f(se,{content:e.projectClickId,class:H({rowCopy:"rowCopy",current:e.id===U.value})},null,8,["content","class"])])]),_:1},8,["label"])):n("",!0),_.value.includes("beforeType")?(r(),o(g,{key:1,prop:"beforeType","show-overflow-tooltip":"",align:"left",label:l(t)("alter.beforeChange")},{default:a(({row:e})=>[e.beforeSurveyType===5&&e.beforeViceType===0?(r(),o(d,{key:0,type:"info",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.uncompleted")),1)]),_:1})):n("",!0),e.beforeSurveyType===1&&e.beforeViceType===0?(r(),o(d,{key:1,type:"success",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.complete")),1)]),_:1})):n("",!0),e.beforeSurveyType===1&&e.beforeViceType===7?(r(),o(d,{key:2,type:"success",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.passTheAudit")),1)]),_:1})):n("",!0),e.beforeSurveyType===1&&e.beforeViceType===8?(r(),o(d,{key:3,type:"danger",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.auditFailure")),1)]),_:1})):n("",!0),e.beforeSurveyType===1&&e.beforeViceType===9?(r(),o(d,{key:4,class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.dataFreezing")),1)]),_:1})):n("",!0),e.beforeSurveyType===2?(r(),o(d,{key:5,type:"warning",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.beScreened")),1)]),_:1})):n("",!0),e.beforeSurveyType===3?(r(),o(d,{key:6,type:"primary",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.quotaReached")),1)]),_:1})):n("",!0),e.beforeViceType===13?(r(),o(d,{key:7,type:"success",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.reconciliation")),1)]),_:1})):n("",!0)]),_:1},8,["label"])):n("",!0),_.value.includes("afterType")?(r(),o(g,{key:2,prop:"afterType","show-overflow-tooltip":"",align:"left",label:l(t)("alter.afterChange")},{default:a(({row:e})=>[e.afterSurveyType===1&&e.afterViceType===0?(r(),o(d,{key:0,type:"success",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.complete")),1)]),_:1})):n("",!0),e.afterSurveyType===1&&e.afterViceType===7?(r(),o(d,{key:1,type:"success",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.passTheAudit")),1)]),_:1})):n("",!0),e.afterSurveyType===1&&e.afterViceType===8?(r(),o(d,{key:2,type:"danger",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.auditFailure")),1)]),_:1})):n("",!0),e.afterSurveyType===1&&e.afterViceType===9?(r(),o(d,{key:3,class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.dataFreezing")),1)]),_:1})):n("",!0),e.afterSurveyType===2?(r(),o(d,{key:4,type:"warning",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.beScreened")),1)]),_:1})):n("",!0),e.afterSurveyType===3?(r(),o(d,{key:5,type:"primary",class:"mx-1"},{default:a(()=>[i(c(l(t)("alter.quotaReached")),1)]),_:1})):n("",!0)]),_:1},8,["label"])):n("",!0),_.value.includes("createTime")?(r(),o(g,{key:3,prop:"createTime","show-overflow-tooltip":"",align:"left",label:l(t)("alter.createTime")},{default:a(({row:e})=>[f(ce,{content:e.createTime,placement:"top"},{default:a(()=>[f(ue,{effect:"plain",type:"info"},{default:a(()=>[i(c(l(O)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1},8,["label"])):n("",!0),_.value.includes("remark")?(r(),o(g,{key:4,prop:"remark","show-overflow-tooltip":"",align:"left",label:l(t)("alter.remark")},{default:a(({row:e})=>[i(c(e.remark?e.remark:"-"),1)]),_:1},8,["label"])):n("",!0),_.value.includes("createUserId")?(r(),o(g,{key:5,prop:"createUserId","show-overflow-tooltip":"",align:"left",label:l(t)("alter.operator")},{default:a(({row:e})=>[(r(!0),N(Te,null,Se(L.value,V=>(r(),N("div",{key:V.id},[V.id===e.createUserId?(r(),o(d,{key:0},{default:a(()=>[i(c(V.userName),1)]),_:2},1024)):n("",!0)]))),128))]),_:1},8,["label"])):n("",!0)]),_:1},8,["data","border","size","stripe"])),[[A,h.value]]),f(de,{"current-page":l(b).page,total:l(b).total,"page-size":l(b).size,"page-sizes":l(b).sizes,layout:l(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:R},null,8,["current-page","total","page-size","page-sizes","layout"]),f(Le,{onSuccess:k,ref_key:"editRef",ref:D},null,512),f(Fe,{ref_key:"detailRef",ref:$},null,512)]),_:1})],2)),[[A,h.value]])}}}),Ke=Ue(Ae,[["__scopeId","data-v-6ac8be8e"]]);export{Ke as default};
