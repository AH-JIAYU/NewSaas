
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as re}from"./index-D0AeM6Vj.js";import{d as se,aM as de,r as m,k as ue,a2 as D,a as i,l as ce,o as y,b as pe,p as c,f as t,w as n,az as k,n as C,e as N,G as H,ao as U,g,i as f,j as me,aN as ge,M as ve,aO as he,aH as fe,aI as _e,Q as be,am as R}from"./index-BQjh9Koe.js";import ye from"./index-DVvzD0UG.js";import ke from"./index-VDdrVKfQ.js";import{a as T}from"./tenantDictionary-VgiQj6rN.js";const Ce=_=>(fe("data-v-c06a9ed6"),_=_(),_e(),_),Ie={class:"absolute-container"},we={class:"page-main"},Ne={class:"custom-tree-node"},Ve=["title"],Ee={class:"code"},Le={class:"dictionary-container"},xe={class:"dictionary-container"},Se=Ce(()=>c("div",{class:"empty"},"请在左侧选择一个部门",-1)),ze=[Se],B=se({name:"user",__name:"index",setup(_){const{pagination:u,getParams:A,onSizeChange:M,onCurrentChange:j,onSortChange:K}=de(),V=m([{label:"项目ID",prop:"projectOrMemberGroupId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectOrMemberGroupName",sortable:!0,checked:!0},{label:"项目IR",prop:"ir",sortable:!0,checked:!0},{label:"项目实际IR",prop:"projectIr",sortable:!0,checked:!0}]),E=m(),L=m(),s=m({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),P=m(),e=m({loading:!1,tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],search:{catalogueId:"",chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}});async function I(){s.value.loading=!0,e.value.search.catalogueId="";const l={...s.value.search},a=await T.list(l);s.value.tree=a.data,s.value.loading=!1}ue(()=>{I()}),D(()=>s.value.search,l=>{E.value.filter(l)});function O(l,a){return l?a.label.includes(l):!0}function $(l){u.value.page=1,e.value.search.catalogueId=l.id}D(()=>e.value.search.catalogueId,()=>{d()});async function d(){e.value.loading=!0;const l={...A(),...e.value.search},a=await T.itemlist(l);e.value.loading=!1,e.value.dataList=a.data,e.value.dataList.forEach(v=>{v.enableLoading=!1}),u.value.total=a.data.length}function G(l){M(l).then(()=>d())}function x(l=1){j(l).then(()=>d())}function Q({prop:l,order:a}){K(l,a).then(()=>d())}function F(l){e.value.dialog.id="",e.value.dialog.visible=!0,e.value.dialog.level=1,l&&(e.value.dialog.parentId=l.id,e.value.dialog.level=Number(l.level)+1)}function J(l){ge.confirm(`确认将「${l.name}」的密码重置为 “123456” 吗？`,"确认信息").then(()=>{}).catch(()=>{})}function q(l){e.value.row=JSON.stringify(l),e.value.dialog.id=l.id,e.value.dialog.parentId=l.parentId,e.value.dialog.visible=!0}function W(l){L.value.showEdit(l)}return(l,a)=>{const v=ve,h=i("ElButton"),b=i("ElInput"),X=i("ElTree"),Y=i("ElScrollbar"),Z=i("ElSpace"),w=i("el-button"),S=i("el-col"),ee=he,ae=i("el-row"),r=i("ElTableColumn"),te=i("el-switch"),le=i("el-empty"),oe=i("ElTable"),ne=i("ElPagination"),ie=re,z=ce("loading");return y(),pe("div",Ie,[c("div",we,[t(ie,{"hide-left-side-toggle":""},{leftSide:n(()=>[t(b,{modelValue:s.value.search.chineseName,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.search.chineseName=o),placeholder:"请输入关键词筛选",clearable:"",class:"search",onKeydown:k(I,["enter"])},{append:n(()=>[t(h,{onClick:I},{default:n(()=>[t(v,{name:"i-ep:search"})]),_:1})]),_:1},8,["modelValue"]),t(Y,{class:"tree"},{default:n(()=>[C((y(),N(X,{ref_key:"dictionaryRef",ref:E,data:s.value.tree,"filter-node-method":O,"default-expand-all":"",onNodeClick:$},{default:n(({node:o,data:p})=>[c("div",Ne,[c("div",{class:"label",title:o.label},H(p.chineseName),9,Ve),c("div",Ee,H(p.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[z,s.value.loading]])]),_:1})]),default:n(()=>[C(c("div",Le,[t(Z,{wrap:""},{default:n(()=>[t(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.search.chineseName=o),placeholder:"员工ID",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),t(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.search.chineseName=o),placeholder:"用户名",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),t(b,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.search.chineseName=o),placeholder:"状态",clearable:"",style:{width:"200px"},onKeydown:k(d,["enter"])},null,8,["modelValue"]),t(h,{type:"primary",onClick:d},{icon:n(()=>[t(v,{name:"i-ep:search"})]),_:1}),t(h,{onClick:d},{icon:n(()=>[t(v,{name:"i-ep:refresh"})]),_:1})]),_:1}),t(ae,{style:{"margin-bottom":"5px"},gutter:24},{default:n(()=>[t(S,{span:10},{default:n(()=>[t(w,{type:"primary",size:"default",onClick:F},{default:n(()=>[g(" 新增 ")]),_:1}),t(w,{size:"default",onClick:J},{default:n(()=>[g(" 重置密码 ")]),_:1})]),_:1}),t(S,{style:{display:"flex","justify-content":"flex-end"},span:14},{default:n(()=>[t(w,{size:"default",onClick:a[4]||(a[4]=()=>{})},{default:n(()=>[g(" 导出 ")]),_:1}),t(ee,{border:e.value.border,"onUpdate:border":a[5]||(a[5]=o=>e.value.border=o),tableAutoHeight:e.value.tableAutoHeight,"onUpdate:tableAutoHeight":a[6]||(a[6]=o=>e.value.tableAutoHeight=o),checkList:e.value.checkList,"onUpdate:checkList":a[7]||(a[7]=o=>e.value.checkList=o),columns:V.value,"onUpdate:columns":a[8]||(a[8]=o=>V.value=o),"line-height":e.value.lineHeight,"onUpdate:lineHeight":a[9]||(a[9]=o=>e.value.lineHeight=o),stripe:e.value.stripe,"onUpdate:stripe":a[10]||(a[10]=o=>e.value.stripe=o),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),C((y(),N(oe,{ref_key:"dictionaryItemRef",ref:P,data:e.value.dataList,border:e.value.border,size:e.value.lineHeight,stripe:e.value.stripe,"highlight-current-row":"",height:"100%",onSortChange:Q,onSelectionChange:a[12]||(a[12]=o=>e.value.selectionDataList=o),"row-key":"id","default-expand-all":""},{empty:n(()=>[t(le,{description:"暂无数据"})]),default:n(()=>[t(r,{type:"selection",align:"center",fixed:""}),t(r,{align:"center",prop:"chineseName",label:"员工ID"}),t(r,{align:"center",prop:"englishName",label:"用户名"}),t(r,{align:"center",prop:"remark",label:"姓名"}),t(r,{align:"center",prop:"remark",label:"电话号码"}),t(r,{align:"center",prop:"remark",label:"邮箱"}),t(r,{align:"center",prop:"remark",label:"部门"}),g(' align="center" '),t(r,{align:"center",prop:"remark",label:"职位"}),t(r,{align:"center",prop:"remark",label:"小组"}),t(r,{align:"center",prop:"remark",label:"状态"},{default:n(({row:o})=>[t(te,{modelValue:e.value.search.chineseName,"onUpdate:modelValue":a[11]||(a[11]=p=>e.value.search.chineseName=p),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),t(r,{label:"操作",width:"150",align:"center"},{default:n(o=>[t(h,{type:"primary",size:"small",plain:"",onClick:p=>q(o.row)},{default:n(()=>[g(" 编辑 ")]),_:2},1032,["onClick"]),t(h,{type:"primary",size:"small",plain:"",onClick:p=>W(o.row)},{default:n(()=>[g(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[z,e.value.loading]]),t(ne,{"current-page":f(u).page,total:f(u).total,"page-size":f(u).size,"page-sizes":f(u).sizes,layout:f(u).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:G,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[U,e.value.search.catalogueId]]),C(c("div",xe,ze,512),[[U,!e.value.search.catalogueId]])]),_:1}),e.value.dialog.visible?(y(),N(ye,{key:0,id:e.value.dialog.id,modelValue:e.value.dialog.visible,"onUpdate:modelValue":a[13]||(a[13]=o=>e.value.dialog.visible=o),"catalogue-id":e.value.search.catalogueId,"parent-id":e.value.dialog.parentId,level:e.value.dialog.level,tree:s.value.tree,dataList:e.value.dataList,row:e.value.row,onSuccess:d},null,8,["id","modelValue","catalogue-id","parent-id","level","tree","dataList","row"])):me("",!0),t(ke,{ref_key:"detailRef",ref:L},null,512)])])}}});typeof R=="function"&&R(B);const Be=be(B,[["__scopeId","data-v-c06a9ed6"]]);export{Be as default};
