
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as P,d as N,r as f,k as R,a as m,p as $,q as D,o as S,b as T,f as e,w as l,g as h,E as U,ap as z,R as B}from"./index-CHlyMxym.js";import"./clipboard-Dwjk1jnD.js";const E={list:()=>P.post("member-config/getMemberConfig"),create:v=>P.post("member-config/insertMemberConfig",v),edit:v=>P.post("member-config/updateMemberConfig",v)},L=N({name:"setting",__name:"list",setup(v){const q=f("基本设置"),u=f(!1),p=f(),a=f({webName:"",keyWords:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,priceProportion:null,taxPointsProportion:null,minimumAmount:null,fixedPrice:null,externalSite:"",phone:"",email:"",qqCode:"",address:""}),b=f({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],memberURL:[{required:!0,message:"请输入会员网址",trigger:"blur"}],phone:[{required:!1,trigger:"blur",message:"请输入手机号"},{validator:(s,t,i)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.value.phone)?i():i(new Error("请输入合法手机号"))},trigger:"blur"}],email:[{required:!1,trigger:"blur",message:"请输入邮箱"},{validator:(s,t,i)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.value.email)?i():i(new Error("请输入合法邮箱"))},trigger:"blur"}]});R(()=>{V()});async function V(){try{u.value=!0;const{data:s}=await E.list();a.value=s||a.value,u.value=!1}catch{}finally{u.value=!1}}function C(){a.value.email===""&&(b.value.email=[],p.value.clearValidate("email")),a.value.phone===""&&(b.value.phone=[],p.value.clearValidate("phone")),a.value.id?p.value&&p.value.validate(s=>{if(s)try{let{id:t,keyWords:i,registerExamineOffOrOn:r,registerOffOrOn:n,webName:d,priceProportion:c,taxPointsProportion:_,minimumAmount:g,fixedPrice:x,externalSite:w,phone:O,email:y,qqCode:o,address:M}=a.value;const k={id:t,keyWords:i,registerExamineOffOrOn:r,registerOffOrOn:n,webName:d,priceProportion:c,taxPointsProportion:_,minimumAmount:g,fixedPrice:x,externalSite:w,phone:O,email:y,qqCode:o,address:M};u.value=!0,E.edit(k).then(A=>{u.value=!1,A.status===1&&(V(),U.success({message:"修改成功",center:!0}))})}catch{}finally{u.value=!1}}):p.value&&p.value.validate(s=>{if(s)try{u.value=!0,E.create(a.value).then(()=>{u.value=!1,V(),U.success({message:"新增成功",center:!0})})}catch{}finally{u.value=!1}})}return(s,t)=>{const i=m("el-switch"),r=m("el-form-item"),n=m("el-col"),d=m("el-input"),c=m("el-row"),_=m("el-button"),g=m("el-tab-pane"),x=m("el-form"),w=m("el-tabs"),O=z,y=$("loading");return D((S(),T("div",null,[e(O,null,{default:l(()=>[e(w,{modelValue:q.value,"onUpdate:modelValue":t[9]||(t[9]=o=>q.value=o)},{default:l(()=>[e(x,{ref_key:"formRef",ref:p,model:a.value,rules:b.value,"label-position":"right","label-width":"140px",style:{width:"500px"}},{default:l(()=>[e(g,{label:"基础设置",name:"基本设置"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(n,{span:7},{default:l(()=>[e(r,{label:"注册开关"},{default:l(()=>[e(i,{modelValue:a.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:6},{default:l(()=>[e(r,{label:"注册审核"},{default:l(()=>[e(i,{modelValue:a.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"最低结算金额",prop:"confirmPassword"},{default:l(()=>[e(d,{modelValue:a.value.minimumAmount,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.minimumAmount=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"会员税点",prop:"confirmPassword"},{default:l(()=>[e(d,{modelValue:a.value.taxPointsProportion,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.taxPointsProportion=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[h("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"调查限价",prop:"confirmPassword"},{default:l(()=>[e(d,{modelValue:a.value.fixedPrice,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.fixedPrice=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(_,{type:"primary",onClick:C},{default:l(()=>[h(" 确认 ")]),_:1})]),_:1})]),_:1}),e(g,{label:"联系我们",name:"联系我们"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(n,{span:24},{default:l(()=>[e(r,{label:"电子邮箱",prop:"email"},{default:l(()=>[e(d,{style:{width:"18rem"},modelValue:a.value.email,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.email=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"手机号码",prop:"phone"},{default:l(()=>[e(d,{style:{width:"18rem"},modelValue:a.value.phone,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.phone=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"QQ号码",prop:""},{default:l(()=>[e(d,{style:{width:"18rem"},modelValue:a.value.qqCode,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.qqCode=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,{label:"公司地址",prop:""},{default:l(()=>[e(d,{style:{width:"18rem"},modelValue:a.value.address,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.address=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:l(()=>[e(r,null,{default:l(()=>[e(_,{type:"primary",onClick:C},{default:l(()=>[h(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])),[[y,u.value]])}}}),j=B(L,[["__scopeId","data-v-fb1556dd"]]);export{j as default};
