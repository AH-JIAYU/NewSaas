
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ue,r as m,aN as De,a5 as Ne,c as Re,l as Be,b as p,q as Me,o as i,e as Fe,g as l,w as a,j as n,az as x,s as E,h,H as y,I as V,f as s,k as f,t as _,S as A,bc as He,E as je,N as Ke,aP as qe,aQ as Qe,bb as Ye,ap as Oe,aI as Je,aJ as Ge,aq as F,R as We}from"./index-ODJju0Ft.js";import{_ as Xe}from"./index-BYfRF3bi.js";import{_ as Ze}from"./index.vue_vue_type_style_index_0_lang-DyusMtqv.js";import{_ as et}from"./index.vue_vue_type_script_setup_true_lang-C8DtHRKN.js";import{_ as tt}from"./index.vue_vue_type_script_setup_true_lang-BZU5zdlc.js";import lt from"./index-CKI1cDZq.js";import{_ as nt}from"./index.vue_vue_type_script_setup_true_lang-CSg3pRRk.js";import at from"./index-DRTRecbz.js";import{u as ot}from"./configuration_supplierLevel-Cpf8n7kY.js";import{s as it}from"./apiLoading-Ca8a6kov.js";import{a as te}from"./user_supplier-DfwU2KO6.js";import{U as st}from"./user_supplier-DkDs3rXN.js";import"./index-D6HNRVp6.js";import"./index.vue_vue_type_script_setup_true_lang-DEuX-d-I.js";import"./index.vue_vue_type_script_setup_true_lang-Bwgvj2BG.js";import"./index-CLOLdcJd.js";import"./user_customer-D_Y98Xi0.js";import"./user_customer-Ce_oDVjQ.js";import"./stagedData-GYRp71Au.js";import"./index.vue_vue_type_script_setup_true_lang-CeG6vxrK.js";const $=z=>(Je("data-v-92c281ea"),z=z(),Ge(),z),rt=$(()=>_("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),ut={class:"flex-c"},pt={class:"oneLine",style:{width:"calc(100% - 20px)"}},ct={class:"copyId"},dt={class:"id oneLine"},mt={class:"flex-c"},ft={class:"oneLine",style:{width:"calc(100% - 20px)"}},_t=$(()=>_("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),vt=$(()=>_("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),ht=$(()=>_("div",{style:{color:"#15d36a"},class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),yt=$(()=>_("div",{style:{color:"#e74032"},class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),bt={class:"flex-c"},gt={class:"oneLine",style:{width:"calc(100% - 20px)"}},kt={class:"flex-c"},St={class:"oneLine",style:{width:"calc(100% - 20px)"}},Ct=Ue({name:"supplier",__name:"index",setup(z){const le=st(),{format:ne}=He(),ae=ot(),Q=m([]),{pagination:C,getParams:oe,onSizeChange:ie,onCurrentChange:se}=De(),P=m(!1),Y=m([]),re=m(),H=m(),O=m(),J=m(),G=m(),T=m(!0),U=m(!1),D=m("default"),d=m([]),N=m(!1),R=m([{label:"供应商ID",checked:!0,sortable:!0,prop:"tenantSupplierId"},{label:"供应商名称",checked:!0,sortable:!0,prop:"supplierAccord"},{label:"国家",checked:!0,sortable:!0,prop:"countryAffiliationName"},{label:"可用余额",checked:!0,sortable:!0,prop:"balanceHumanLife"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{label:"供应商等级",checked:!0,sortable:!0,prop:"supplierLevelId"},{label:"B2B|B2C",checked:!0,sortable:!0,prop:"b2bStatus"},{label:"结算周期",checked:!0,sortable:!0,prop:"settlementCycle"},{label:"供应商状态",checked:!0,sortable:!0,prop:"supplierStatus"},{label:"创建时间",checked:!0,sortable:!0,prop:"createTime"},{label:"备注",checked:!0,sortable:!0,prop:"remark"}]),r=Ne({tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]});function ue(){H.value.showEdit()}function pe(o){H.value.showEdit(o)}function ce(o){O.value.showEdit(o)}const I=m();function de(o){o?I.value=o.tenantSupplierId:I.value=""}function B(o,t){J.value.showEdit(o,t)}async function W(o,t){const g={status:o,tenantSupplierId:t},{status:k}=await it(te.changestatus(g));k===1&&je.success({message:"修改成功"}),j(),le.TenantSupplierList=null}function j(){C.value.page=1,S()}function me(){Object.assign(r,{tenantSupplierId:"",supplierPhone:"",supplierAccord:"",emailAddress:"",accountName:"",supplierStatus:"",time:[]}),S()}function fe(o){G.value.showEdit(JSON.stringify(o))}function _e(o){ie(o).then(()=>S())}function b(o=1){se(o).then(()=>S())}async function S(){try{P.value=!0;const o={...oe(),...r};r.time&&r.time.length&&(o.beginTime=r.time[0]||"",o.endTime=r.time[1]||"");const{data:t}=await te.list(o);Y.value=t.getTenantSupplierInfoList,C.value.total=t.total,P.value=!1}catch{}finally{P.value=!1}}function ve(o){re.value=o}const he=Re(()=>o=>{const t=Q.value.find(g=>g.tenantSupplierLevelId===o);return t==null?void 0:t.levelNameOrAdditionRatio});return Be(async()=>{R.value.forEach(o=>{o.checked&&d.value.push(o.prop)}),Q.value=await ae.getLevelNameList(),j()}),(o,t)=>{const g=p("el-input"),k=p("el-form-item"),K=p("el-option"),ye=p("el-select"),be=p("el-date-picker"),w=Ke,q=p("ElButton"),ge=p("ElFormItem"),ke=p("ElForm"),Se=et,Ce=p("ElDivider"),L=p("el-button"),Ie=Ze,we=qe,Ve=Qe,Le=p("el-row"),v=p("el-table-column"),X=p("ElSwitch"),xe=Xe,Z=Ye,ee=p("el-tag"),M=p("el-text"),Ee=p("ElSpace"),Ae=p("el-empty"),$e=p("el-table"),ze=p("ElPagination"),Pe=Oe,Te=Me("loading");return i(),Fe("div",{class:A({"absolute-container":n(N)})},[l(Pe,null,{default:a(()=>[l(Se,{"show-toggle":!1},{default:a(({fold:e,toggle:c})=>[l(ke,{model:n(r),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[l(k,{label:""},{default:a(()=>[l(g,{modelValue:n(r).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=u=>n(r).tenantSupplierId=u),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID",onKeydown:t[1]||(t[1]=x(u=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:a(()=>[l(g,{modelValue:n(r).supplierAccord,"onUpdate:modelValue":t[2]||(t[2]=u=>n(r).supplierAccord=u),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商名称",onKeydown:t[3]||(t[3]=x(u=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),l(k,{label:""},{default:a(()=>[l(g,{modelValue:n(r).supplierPhone,"onUpdate:modelValue":t[4]||(t[4]=u=>n(r).supplierPhone=u),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"手机号码",onKeydown:t[5]||(t[5]=x(u=>b(),["enter"]))},null,8,["modelValue"])]),_:1}),E(l(k,{label:""},{default:a(()=>[l(g,{modelValue:n(r).accountName,"onUpdate:modelValue":t[6]||(t[6]=u=>n(r).accountName=u),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"账号名称",onKeydown:t[7]||(t[7]=x(u=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[F,!e]]),E(l(k,{label:""},{default:a(()=>[l(g,{modelValue:n(r).emailAddress,"onUpdate:modelValue":t[8]||(t[8]=u=>n(r).emailAddress=u),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"邮箱",onKeydown:t[9]||(t[9]=x(u=>b(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[F,!e]]),E(l(k,{label:""},{default:a(()=>[l(ye,{modelValue:n(r).supplierStatus,"onUpdate:modelValue":t[10]||(t[10]=u=>n(r).supplierStatus=u),clearable:"",placeholder:"供应商状态",onChange:t[11]||(t[11]=u=>b())},{default:a(()=>[l(K,{label:"开启",value:2}),l(K,{label:"关闭",value:1}),l(K,{label:"待审批",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[F,!e]]),E(l(k,{label:""},{default:a(()=>[l(be,{modelValue:n(r).time,"onUpdate:modelValue":t[12]||(t[12]=u=>n(r).time=u),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default",style:{width:"192px"},"clear-icon":"true",onChange:t[13]||(t[13]=u=>b())},null,8,["modelValue"])]),_:2},1536),[[F,!e]]),l(ge,null,{default:a(()=>[l(q,{type:"primary",onClick:t[14]||(t[14]=u=>b())},{icon:a(()=>[l(w,{name:"i-ep:search"})]),default:a(()=>[h(" 筛选 ")]),_:1}),l(q,{onClick:me},{icon:a(()=>[rt]),default:a(()=>[h(" 重置 ")]),_:1}),l(q,{link:"",onClick:c},{icon:a(()=>[l(w,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[h(" "+y(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(Ce,{"border-style":"dashed"}),l(Le,null,{default:a(()=>[l(Ie,null,{default:a(()=>[l(L,{type:"primary",size:"default",onClick:ue},{default:a(()=>[h(" 新增 ")]),_:1})]),_:1}),l(Ve,null,{default:a(()=>[l(L,{size:"default"},{default:a(()=>[h(" 导出 ")]),_:1}),l(we,{border:n(T),"onUpdate:border":t[15]||(t[15]=e=>V(T)?T.value=e:null),tableAutoHeight:n(N),"onUpdate:tableAutoHeight":t[16]||(t[16]=e=>V(N)?N.value=e:null),checkList:n(d),"onUpdate:checkList":t[17]||(t[17]=e=>V(d)?d.value=e:null),columns:n(R),"onUpdate:columns":t[18]||(t[18]=e=>V(R)?R.value=e:null),"line-height":n(D),"onUpdate:lineHeight":t[19]||(t[19]=e=>V(D)?D.value=e:null),stripe:n(U),"onUpdate:stripe":t[20]||(t[20]=e=>V(U)?U.value=e:null),style:{"margin-left":"12px"},onQueryData:j},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),E((i(),s($e,{border:n(T),data:n(Y),size:n(D),stripe:n(U),onSelectionChange:ve,"highlight-current-row":"",onCurrentChange:de},{empty:a(()=>[l(Ae,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[l(v,{align:"center",type:"selection"}),n(d).includes("supplierStatus")?(i(),s(v,{key:0,align:"center","show-overflow-tooltip":"",label:"供应商状态"},{default:a(({row:e})=>[e.supplierStatus===3?(i(),s(X,{key:0,modelValue:e.supplierStatus,"onUpdate:modelValue":c=>e.supplierStatus=c,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:c=>W(c,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(i(),s(X,{key:1,modelValue:e.supplierStatus,"onUpdate:modelValue":c=>e.supplierStatus=c,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:c=>W(c,e.tenantSupplierId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):f("",!0),n(d).includes("supplierAccord")?(i(),s(v,{key:1,align:"center",prop:"supplierAccord","show-overflow-tooltip":"",label:"供应商名称"},{default:a(({row:e})=>[_("div",ut,[_("div",pt,y(e.supplierAccord),1),e.projectType!==2?(i(),s(w,{key:0,onClick:c=>B(e,"supplierAccord"),class:A({edit:"edit",current:e.tenantSupplierId===n(I)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):f("",!0)])]),_:1})):f("",!0),n(d).includes("tenantSupplierId")?(i(),s(v,{key:2,align:"center",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:a(({row:e})=>[_("div",ct,[_("div",dt,"ID: "+y(e.tenantSupplierId),1),l(xe,{class:"copy",content:e.tenantSupplierId},null,8,["content"])])]),_:1})):f("",!0),n(d).includes("supplierLevelId")?(i(),s(v,{key:3,align:"center",prop:"supplierLevelId","show-overflow-tooltip":"",label:"供应商等级"},{default:a(({row:e})=>[_("div",mt,[_("div",ft,y(n(he)(e.supplierLevelId)),1),e.projectType!==2?(i(),s(w,{key:0,onClick:c=>B(e,"supplierLevelId"),class:A({edit:"edit",current:e.tenantSupplierId===n(I)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):f("",!0)])]),_:1})):f("",!0),n(d).includes("balanceHumanLife")?(i(),s(v,{key:4,align:"center",prop:"balanceHumanLife","show-overflow-tooltip":"",label:"可用余额"},{default:a(({row:e})=>[l(Z),h(y(e.balanceHumanLife||0),1)]),_:1})):f("",!0),n(d).includes("amountPendingTrial")?(i(),s(v,{key:5,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"},{default:a(({row:e})=>[l(Z),h(y(e.amountPendingTrial||0),1)]),_:1})):f("",!0),n(d).includes("countryAffiliationName")?(i(),s(v,{key:6,align:"center",prop:"countryAffiliationName","show-overflow-tooltip":"",label:"国家"},{default:a(({row:e})=>[l(ee,{type:"primary"},{default:a(()=>[h(y(e.countryAffiliationName),1)]),_:2},1024)]),_:1})):f("",!0),n(d).includes("b2bStatus")?(i(),s(v,{key:7,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:a(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(i(),s(M,{key:0,class:"mx-1"},{default:a(()=>[_t]),_:1})):(i(),s(M,{key:1,class:"mx-1"},{default:a(()=>[vt]),_:1})),h(" | "),e.b2cStatus&&e.b2cStatus===2?(i(),s(M,{key:2,class:"mx-1"},{default:a(()=>[ht]),_:1})):(i(),s(M,{key:3,class:"mx-1"},{default:a(()=>[yt]),_:1}))]),_:1})):f("",!0),n(d).includes("settlementCycle")?(i(),s(v,{key:8,align:"center",prop:"settlementCycle","show-overflow-tooltip":"",label:"结算周期"},{default:a(({row:e})=>[_("div",bt,[_("div",gt,y(e.settlementCycle?e.settlementCycle+"天":"-"),1),e.projectType!==2?(i(),s(w,{key:0,onClick:c=>B(e,"settlementCycle"),class:A({edit:"edit",current:e.tenantSupplierId===n(I)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):f("",!0)])]),_:1})):f("",!0),n(d).includes("createTime")?(i(),s(v,{key:9,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建"},{default:a(({row:e})=>[l(ee,{effect:"plain",type:"info"},{default:a(()=>[h(y(n(ne)(e.createTime)),1)]),_:2},1024)]),_:1})):f("",!0),n(d).includes("remark")?(i(),s(v,{key:10,align:"center",prop:"remark",width:"180",label:"备注"},{default:a(({row:e})=>[_("div",kt,[_("div",St,y(e.remark),1),e.projectType!==2?(i(),s(w,{key:0,onClick:c=>B(e,"remark"),class:A({edit:"edit",current:e.tenantSupplierId===n(I)}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):f("",!0)])]),_:1})):f("",!0),l(v,{align:"center",prop:"i",label:"操作",fixed:"right",width:"250"},{default:a(({row:e})=>[l(Ee,null,{default:a(()=>[l(L,{size:"small",plain:"",type:"primary",onClick:c=>fe(e)},{default:a(()=>[h(" 加减款 ")]),_:2},1032,["onClick"]),l(L,{size:"small",plain:"",type:"primary",onClick:c=>pe(e)},{default:a(()=>[h(" 编辑 ")]),_:2},1032,["onClick"]),l(L,{size:"small",plain:"",type:"primary",onClick:c=>ce(e)},{default:a(()=>[h(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[Te,n(P)]]),l(ze,{"current-page":n(C).page,total:n(C).total,"page-size":n(C).size,"page-sizes":n(C).sizes,layout:n(C).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:_e,onCurrentChange:b},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),l(tt,{ref_key:"editRef",ref:H,onFetchData:S},null,512),l(lt,{ref_key:"checkRef",ref:O,onFetchData:S},null,512),l(at,{ref_key:"QuickEditRef",ref:J,onFetchData:S},null,512),l(nt,{ref_key:"plusMinusPaymentsRef",ref:G,onFetchData:S},null,512)],2)}}}),Kt=We(Ct,[["__scopeId","data-v-92c281ea"]]);export{Kt as default};
