
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,aN as me,r,Z as fe,n as _e,a as c,q as F,o as n,b as he,f as o,w as t,s as k,e as s,g as i,i as _,aM as ge,y as u,j as f,z as d,N as D,be as ye,aO as ve,E as be,ba as ke,bb as Ie,bd as Ce,an as Se,L as je}from"./index-C6oMP_bv.js";import{_ as Ne}from"./index-ab918WXI.js";import{_ as we}from"./index.vue_vue_type_style_index_0_lang-B_ERkAdH.js";import{_ as Te}from"./index-DP_hjuNK.js";import ze from"./index-IXvyJFEg.js";import{a as G}from"./projectManagement_scheduling-GWOIH0qc.js";import"./index-NsvfyZqc.js";import"./clipboard-CVtjbCdh.js";import"./index.vue_vue_type_script_setup_true_lang-CbN9fAel.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-DuckWEgj.js";const Le={class:"fontC-System"},De={class:"tableBig oneLine"},Pe={class:"copyId tableSmall projectId"},xe={class:"id oneLine"},Ee={class:"fontC-System"},Me={class:"fontC-System"},$e={class:"specifyTheTarget"},Be={class:"tableBig"},Fe={class:"id tableSmall",style:{"font-size":"14px"}},Ge=de({name:"scheduling",__name:"list",setup(Re){const{format:R}=ye(),{pagination:h,getParams:H,onSizeChange:U,onCurrentChange:A}=me(),V=r(""),v=r(!1),I=r(!1),C=r(),S=r(!1),p=r([]),P=r(),O=r("formSearch-scheduling"),j=r("default"),N=r(!1),w=r([{sotrtable:!0,checked:!0,label:"类型",prop:"dispatchType"},{sotrtable:!0,checked:!0,label:"项目ID",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"项目价",prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:"指定价格",prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:"指定供应商",prop:"Supplier"},{sotrtable:!0,checked:!0,label:"指定部门",prop:"group"},{sotrtable:!0,checked:!0,label:"创建时间",prop:"createTime"}]),T=fe({dispatchType:"",projectId:"",projectName:""}),x=r([]);function q(){C.value.showEdit()}function Q(a){C.value.showEdit(a)}function Z(a){ve.confirm(`确认删除「${a.projectName}」吗？`,"确认信息").then(()=>{G.delete({projectDispatchId:a.projectDispatchId}).then(l=>{g(),be.success({message:"删除成功",center:!0})})}).catch(()=>{})}function J(a){U(a).then(()=>g())}const b=r();function K(a){a?b.value=a.projectId:b.value=""}function z(a=1){A(a).then(()=>g())}function W(){Object.assign(T,{dispatchType:"",projectId:"",projectName:""}),g()}async function g(){try{v.value=!0;const a={...H(),...T},l=await G.list(a);x.value=l.data.getProjectDispatchInfoList,h.value.total=l.data.total,v.value=!1}catch{}finally{v.value=!1}}_e(()=>{w.value.forEach(a=>{a.checked&&p.value.push(a.prop)}),g(),P.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:"全部类型",option:"dispatchType",optionLabel:"label",optionValue:"value"}]});const X={dispatchType:()=>[{label:"指定关闭",value:1},{label:"指定价格",value:2}]};return(a,l)=>{const Y=Te,ee=c("ElDivider"),y=c("el-button"),te=we,oe=ke,ae=Ie,le=c("el-row"),E=c("el-text"),m=c("el-table-column"),M=c("el-tooltip"),$=Ne,B=Ce,ne=c("el-tag"),se=c("el-empty"),re=c("el-table"),ie=c("ElPagination"),pe=Se,L=F("auth"),ce=F("loading");return n(),he("div",{class:D({"absolute-container":S.value})},[o(pe,null,{default:t(()=>[o(Y,{formSearchList:P.value,formSearchName:O.value,onCurrentChange:z,onOnReset:W,model:T,formOption:X},null,8,["formSearchList","formSearchName","model"]),o(ee,{"border-style":"dashed"}),o(le,{gutter:24},{default:t(()=>[o(te,null,{default:t(()=>[k((n(),s(y,{type:"primary",size:"default",onClick:q},{default:t(()=>[i(" 新增 ")]),_:1})),[[L,"scheduling-get-addProjectDispatch"]])]),_:1}),o(ae,null,{default:t(()=>[o(y,{size:"default",onClick:l[0]||(l[0]=()=>{})},{default:t(()=>[i(" 导出 ")]),_:1}),o(oe,{border:I.value,"onUpdate:border":l[1]||(l[1]=e=>I.value=e),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":l[2]||(l[2]=e=>S.value=e),checkList:p.value,"onUpdate:checkList":l[3]||(l[3]=e=>p.value=e),columns:w.value,"onUpdate:columns":l[4]||(l[4]=e=>w.value=e),"line-height":j.value,"onUpdate:lineHeight":l[5]||(l[5]=e=>j.value=e),stripe:N.value,"onUpdate:stripe":l[6]||(l[6]=e=>N.value=e),style:{"margin-left":"12px"},onQueryData:z},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),k((n(),s(re,{ref_key:"tableSortRef",ref:V,style:{"margin-top":"10px"},"row-key":"id",data:x.value,border:I.value,size:j.value,stripe:N.value,"highlight-current-row":"",onCurrentChange:K},{empty:t(()=>[o(se,{image:_(ge),"image-size":300},null,8,["image"])]),default:t(()=>[p.value.includes("dispatchType")?(n(),s(m,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:"类型"},{default:t(({row:e})=>[u("div",Le,[e.dispatchType===1?(n(),s(E,{key:0,type:"primary",style:{"font-weight":"700"}},{default:t(()=>[i("指定关闭")]),_:1})):(n(),s(E,{key:1,type:"danger",style:{"font-weight":"700"}},{default:t(()=>[i("指定价格")]),_:1}))])]),_:1})):f("",!0),p.value.includes("projectName")?(n(),s(m,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目"},{default:t(({row:e})=>[u("div",De,d(e.projectName),1)]),_:1})):f("",!0),p.value.includes("projectId")?(n(),s(m,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID",width:"200"},{default:t(({row:e})=>[u("div",Pe,[u("div",xe,[o(M,{effect:"dark",content:e.projectId,placement:"top-start"},{default:t(()=>[i(d(e.projectId),1)]),_:2},1032,["content"])]),o($,{content:e.projectId,class:D({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("moneyPrice")?(n(),s(m,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:"项目价"},{default:t(({row:e})=>[u("div",Ee,[o(B),i(d(e.moneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("doMoneyPrice")?(n(),s(m,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:"指定价格"},{default:t(({row:e})=>[u("div",Me,[o(B),i(d(e.doMoneyPrice||0),1)])]),_:1})):f("",!0),p.value.includes("Supplier")?(n(),s(m,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:"指定目标",width:"400"},{default:t(({row:e})=>[u("div",$e,[e.dataType==2?(n(),s(y,{key:0,style:{width:"46px","background-color":"#FFAC54"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[i(d(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"部门"),1)]),_:2},1024)):e.dataType===1?(n(),s(y,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:t(()=>[i(d(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:"供应商"),1)]),_:2},1024)):f("",!0),u("b",Be,d(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),u("span",Fe,d(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1),o($,{content:e.getGroupSupplierIdNameInfoList[0].groupSupplierId,class:D({rowCopy:"rowCopy",current:e.projectId===b.value})},null,8,["content","class"])])]),_:1})):f("",!0),p.value.includes("createTime")?(n(),s(m,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:t(({row:e})=>[o(M,{content:e.createTime,placement:"top"},{default:t(()=>[o(ne,{effect:"plain",type:"info"},{default:t(()=>[i(d(_(R)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):f("",!0),o(m,{align:"left",fixed:"right",label:"操作",width:"170"},{default:t(({row:e})=>[k((n(),s(y,{type:"primary",plain:"",size:"small",onClick:ue=>Q(e)},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[L,"scheduling-update-updateProjectDispatch"]]),k((n(),s(y,{type:"danger",plain:"",size:"small",onClick:ue=>Z(e)},{default:t(()=>[i(" 删除 ")]),_:2},1032,["onClick"])),[[L,"scheduling-delete-deleteProjectDispatch"]])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ce,v.value]]),o(ie,{"current-page":_(h).page,total:_(h).total,"page-size":_(h).size,"page-sizes":_(h).sizes,layout:_(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"]),o(ze,{ref_key:"editRef",ref:C,onFetchData:g},null,512)]),_:1})],2)}}}),Xe=je(Ge,[["__scopeId","data-v-b7e3789f"]]);export{Xe as default};
