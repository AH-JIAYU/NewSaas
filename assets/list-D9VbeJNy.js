
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aK as be,r as v,a5 as ve,k as ye,a as u,p as ke,o as s,b as F,f as e,w as t,az as ne,F as re,t as se,e as d,i as m,g as o,H as _,q as ie,j as b,s as E,S as he,N as we,aM as ze,aN as je,ap as Ce,aG as Se,aH as Ie,R as Ne}from"./index-BooDzcUr.js";import{_ as Ve}from"./index.vue_vue_type_style_index_0_lang-DlrrPHGq.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-C23CIBB1.js";import{u as Le,o as De,a as ue}from"./index-CLU_hlx0.js";const pe=U=>(Se("data-v-6668f1cc"),U=U(),Ie(),U),xe=pe(()=>E("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),He=pe(()=>E("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),$e=_e({name:"outsource",__name:"list",setup(U){const L=Le(),{pagination:g,getParams:de,onSizeChange:ce,onCurrentChange:me}=be(),P=v(""),S=v(!0),k=v(!0),R=v(),I=v(!1),i=v([]),h=v("default"),w=v(!1),N=v([{sotrtable:!0,checked:!0,label:"租户ID",prop:"tenantId"},{sotrtable:!0,checked:!0,label:"租户名称",prop:"tenantName"},{sotrtable:!0,checked:!0,label:"项目id",prop:"projectId"},{sotrtable:!0,checked:!0,label:"项目名称",prop:"projectName"},{sotrtable:!0,checked:!0,label:"参与/完成/配额/限量",prop:"participationNumber"},{sotrtable:!0,checked:!0,label:"状态",prop:"projectStatus"}]),n=ve({tenantId:"",tenantName:"",projectStatus:"",type:2}),D=v([]);function B(f){R.value.showEdit(f,n.type===2?1:0)}function M(f){ce(f).then(()=>z())}function y(f=1){me(f).then(()=>z())}function K(){Object.assign(n,{tenantId:"",tenantName:"",projectStatus:"",type:2}),z()}async function z(){try{S.value=!0;const f={...de(),...n};if(n.type===1){const l=await ue.list(f);D.value=l.data.projectAllocationInfoList,g.value.total=l.data.total}else{const l=await ue.meList(f);D.value=l.data.projectMeAllocationInfoList,g.value.total=l.data.total}S.value=!1}catch{}finally{S.value=!1}}return ye(()=>{N.value.forEach(f=>{f.checked&&i.value.push(f.prop)}),z()}),(f,l)=>{const x=u("el-input"),j=u("el-form-item"),Q=u("el-option"),O=u("el-select"),H=we,C=u("ElButton"),T=u("ElFormItem"),q=u("el-form"),G=Ue,J=u("ElDivider"),W=Ve,$=u("el-button"),X=ze,Y=je,Z=u("el-row"),p=u("el-table-column"),c=u("el-text"),ee=u("el-empty"),te=u("el-table"),le=u("ElPagination"),ae=u("el-tab-pane"),fe=u("el-tabs"),ge=Ce,oe=ke("loading");return s(),F("div",{class:he({"absolute-container":I.value})},[e(ge,null,{default:t(()=>[e(fe,{modelValue:n.type,"onUpdate:modelValue":l[25]||(l[25]=a=>n.type=a),onTabChange:z},{default:t(()=>[e(ae,{label:"外包项目",name:2},{default:t(()=>[e(G,{"show-toggle":!1},{default:t(({fold:a,toggle:V})=>[e(q,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(j,{label:""},{default:t(()=>[e(x,{modelValue:n.tenantId,"onUpdate:modelValue":l[0]||(l[0]=r=>n.tenantId=r),clearable:"",placeholder:"租户id",onKeydown:l[1]||(l[1]=ne(r=>y(),["enter"]))},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(x,{modelValue:n.tenantName,"onUpdate:modelValue":l[2]||(l[2]=r=>n.tenantName=r),clearable:"",placeholder:"租户名称",onKeydown:l[3]||(l[3]=ne(r=>y(),["enter"]))},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(O,{modelValue:n.projectStatus,"onUpdate:modelValue":l[4]||(l[4]=r=>n.projectStatus=r),clearable:"",placeholder:"项目状态",onChange:l[5]||(l[5]=r=>y())},{default:t(()=>[(s(!0),F(re,null,se(m(L).projectStatusList,(r,A)=>(s(),d(Q,{label:r,value:A+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(C,{type:"primary",onClick:l[6]||(l[6]=r=>y())},{icon:t(()=>[e(H,{name:"i-ep:search"})]),default:t(()=>[o(" 筛选 ")]),_:1}),e(C,{onClick:K},{icon:t(()=>[xe]),default:t(()=>[o(" 重置 ")]),_:1}),e(C,{disabled:"",link:"",onClick:V},{icon:t(()=>[e(H,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[o(" "+_(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(J,{"border-style":"dashed"}),e(Z,{gutter:24},{default:t(()=>[e(W),e(Y,null,{default:t(()=>[e($,{size:"default",onClick:l[7]||(l[7]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),e(X,{border:k.value,"onUpdate:border":l[8]||(l[8]=a=>k.value=a),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":l[9]||(l[9]=a=>I.value=a),checkList:i.value,"onUpdate:checkList":l[10]||(l[10]=a=>i.value=a),columns:N.value,"onUpdate:columns":l[11]||(l[11]=a=>N.value=a),"line-height":h.value,"onUpdate:lineHeight":l[12]||(l[12]=a=>h.value=a),stripe:w.value,"onUpdate:stripe":l[13]||(l[13]=a=>w.value=a),style:{"margin-left":"12px"},onQueryData:y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ie((s(),d(te,{ref_key:"tableSortRef",ref:P,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:h.value,stripe:w.value},{empty:t(()=>[e(ee,{description:"暂无数据"})]),default:t(()=>[e(p,{align:"center",type:"selection"}),i.value.includes("tenantId")?(s(),d(p,{key:0,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"})):b("",!0),i.value.includes("tenantName")?(s(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):b("",!0),i.value.includes("projectId")?(s(),d(p,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"})):b("",!0),i.value.includes("projectName")?(s(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),i.value.includes("participationNumber")?(s(),d(p,{key:4,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:a})=>[e(c,{size:"large"},{default:t(()=>[o(_(a.participationNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"success",size:"large"},{default:t(()=>[o(_(a.doneNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"warning",size:"large"},{default:t(()=>[o(_(a.num||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{size:"large"},{default:t(()=>[o(_(a.limitedQuantity||0),1)]),_:2},1024)]),_:1})):b("",!0),i.value.includes("projectStatus")?(s(),d(p,{key:5,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:t(({row:a})=>[E("span",null,_(m(L).projectStatusList[a.projectStatus-1]),1)]),_:1})):b("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e($,{type:"primary",plain:"",size:"small",onClick:V=>B(a)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[oe,S.value]]),e(le,{"current-page":m(g).page,total:m(g).total,"page-size":m(g).size,"page-sizes":m(g).sizes,layout:m(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(ae,{label:"接收项目",name:1},{default:t(()=>[e(G,{"show-toggle":!1},{default:t(({fold:a,toggle:V})=>[e(q,{model:n.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(j,{label:""},{default:t(()=>[e(x,{modelValue:n.tenantId,"onUpdate:modelValue":l[14]||(l[14]=r=>n.tenantId=r),clearable:"",placeholder:"租户ID"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(x,{modelValue:n.tenantName,"onUpdate:modelValue":l[15]||(l[15]=r=>n.tenantName=r),clearable:"",placeholder:"租户名称"},null,8,["modelValue"])]),_:1}),e(j,{label:""},{default:t(()=>[e(O,{modelValue:n.projectStatus,"onUpdate:modelValue":l[16]||(l[16]=r=>n.projectStatus=r),clearable:"",placeholder:"项目状态"},{default:t(()=>[(s(!0),F(re,null,se(m(L).projectStatusList,(r,A)=>(s(),d(Q,{label:r,value:A+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(C,{type:"primary",onClick:l[17]||(l[17]=r=>y())},{icon:t(()=>[e(H,{name:"i-ep:search"})]),default:t(()=>[o(" 筛选 ")]),_:1}),e(C,{onClick:K},{icon:t(()=>[He]),default:t(()=>[o(" 重置 ")]),_:1}),e(C,{disabled:"",link:"",onClick:V},{icon:t(()=>[e(H,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[o(" "+_(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(J,{"border-style":"dashed"}),e(Z,{gutter:24},{default:t(()=>[e(W),e(Y,null,{default:t(()=>[e($,{size:"default",onClick:l[18]||(l[18]=()=>{})},{default:t(()=>[o(" 导出 ")]),_:1}),e(X,{border:k.value,"onUpdate:border":l[19]||(l[19]=a=>k.value=a),tableAutoHeight:I.value,"onUpdate:tableAutoHeight":l[20]||(l[20]=a=>I.value=a),checkList:i.value,"onUpdate:checkList":l[21]||(l[21]=a=>i.value=a),columns:N.value,"onUpdate:columns":l[22]||(l[22]=a=>N.value=a),"line-height":h.value,"onUpdate:lineHeight":l[23]||(l[23]=a=>h.value=a),stripe:w.value,"onUpdate:stripe":l[24]||(l[24]=a=>w.value=a),style:{"margin-left":"12px"},onQueryData:y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ie((s(),d(te,{ref_key:"tableSortRef",ref:P,style:{"margin-top":"10px"},"row-key":"id",data:D.value,border:k.value,size:h.value,stripe:w.value},{empty:t(()=>[e(ee,{description:"暂无数据"})]),default:t(()=>[e(p,{align:"center",type:"selection"}),i.value.includes("tenantId")?(s(),d(p,{key:0,"show-overflow-tooltip":"",prop:"tenantId",align:"center",label:"租户ID"})):b("",!0),i.value.includes("tenantName")?(s(),d(p,{key:1,"show-overflow-tooltip":"",prop:"tenantName",align:"center",label:"租户名称"})):b("",!0),i.value.includes("projectId")?(s(),d(p,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"center",width:"180",label:"项目ID"})):b("",!0),i.value.includes("projectName")?(s(),d(p,{key:3,"show-overflow-tooltip":"",prop:"projectName",align:"center",label:"项目名称"})):b("",!0),i.value.includes("participationNumber")?(s(),d(p,{key:4,"show-overflow-tooltip":"",prop:"participationNumber",align:"center",label:"参与/完成/配额/限量"},{default:t(({row:a})=>[e(c,{size:"large"},{default:t(()=>[o(_(a.participationNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"success",size:"large"},{default:t(()=>[o(_(a.doneNumber||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{type:"warning",size:"large"},{default:t(()=>[o(_(a.num||0),1)]),_:2},1024),e(c,{size:"large"},{default:t(()=>[o(" / ")]),_:1}),e(c,{size:"large"},{default:t(()=>[o(_(a.limitedQuantity||0),1)]),_:2},1024)]),_:1})):b("",!0),i.value.includes("projectStatus")?(s(),d(p,{key:5,"show-overflow-tooltip":"",prop:"projectStatus",align:"center",label:"状态"},{default:t(({row:a})=>[E("span",null,_(m(L).projectStatusList[a.projectStatus-1]),1)]),_:1})):b("",!0),e(p,{align:"center",fixed:"right",label:"操作",width:"170"},{default:t(({row:a})=>[e($,{type:"primary",plain:"",size:"small",onClick:V=>B(a)},{default:t(()=>[o(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[oe,S.value]]),e(le,{"current-page":m(g).page,total:m(g).total,"page-size":m(g).size,"page-sizes":m(g).sizes,layout:m(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),e(De,{ref_key:"editRef",ref:R,onFetchData:z},null,512)]),_:1})],2)}}}),Re=Ne($e,[["__scopeId","data-v-6668f1cc"]]);export{Re as default};
