
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k,d as N,r as c,l as A,E as y,a as i,al as q,am as $,o as B,b as D,f as e,w as l,g as p,ak as T,P as z}from"./index-JlPL0OoL.js";import{C as Q}from"./clipboard-DQkf7zXJ.js";const E={list:()=>k.post("member-config/get/getMemberConfig"),create:g=>k.post("member-config/insert/insertMemberConfig",g),edit:g=>k.post("member-config/update/updateMemberConfig",g)},Z=N({name:"SurveySettingList",__name:"list",setup(g){const W=c("基本设置"),m=c(!1),v=c(),a=c({webName:"",keyWords:"",memberURL:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,priceProportion:null,taxPointsProportion:null,minimumAmount:null,fixedPrice:null,externalSite:""}),M=(d,t,s)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.value.phone)?s():s(new Error("请输入合法手机号"))},R=(d,t,s)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.value.email)?s():s(new Error("请输入合法邮箱"))},h=()=>{a.value.phone=[{required:!0,trigger:"blur",message:"请输入手机号/邮箱"},{validator:M,trigger:"blur"}],a.value.email=[{required:!0,trigger:"blur",message:"请输入手机号/邮箱"},{validator:R,trigger:"blur"}]},C=c({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],memberURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}],phone:[{required:!1,trigger:"blur",message:"请输入手机号"}],email:[{required:!1,trigger:"blur",message:"请输入邮箱"}]});A(()=>{w()});async function w(){m.value=!0;const{data:d}=await E.list();a.value=d||a.value,m.value=!1}const x=new Q(".copy");x.on("success",function(d){y.success({message:"复制成功",center:!0}),d.clearSelection(),x.destroy()}),x.on("error",function(){y.error({message:"复制失败",center:!0})});function L(){a.value.id?v.value&&v.value.validate(d=>{if(d){let{id:t,keyWords:s,registerExamineOffOrOn:r,registerOffOrOn:u,memberURL:_,webName:n,priceProportion:P,taxPointsProportion:f,minimumAmount:b,fixedPrice:V,externalSite:O}=a.value;const U={id:t,keyWords:s,registerExamineOffOrOn:r,registerOffOrOn:u,memberURL:_,webName:n,priceProportion:P,taxPointsProportion:f,minimumAmount:b,fixedPrice:V,externalSite:O};m.value=!0,E.edit(U).then(()=>{m.value=!1,w(),y.success({message:"修改成功",center:!0})})}}):v.value&&v.value.validate(d=>{d&&(m.value=!0,E.create(a.value).then(()=>{m.value=!1,w(),y.success({message:"新增成功",center:!0})}))})}return(d,t)=>{const s=i("el-switch"),r=i("el-form-item"),u=i("el-col"),_=i("el-row"),n=i("el-input"),P=i("el-text"),f=i("el-button"),b=i("el-tab-pane"),V=i("el-form"),O=i("el-tabs"),U=T,S=q("loading");return $((B(),D("div",null,[e(U,null,{default:l(()=>[e(O,{modelValue:W.value,"onUpdate:modelValue":t[14]||(t[14]=o=>W.value=o)},{default:l(()=>[e(V,{ref_key:"formRef",ref:v,model:a.value,rules:C.value,"label-position":"right","label-width":"140px",style:{width:"500px"}},{default:l(()=>[e(b,{label:"基本设置",name:"基本设置"},{default:l(()=>[e(_,{gutter:20},{default:l(()=>[e(u,{span:7},{default:l(()=>[e(r,{label:"注册开关"},{default:l(()=>[e(s,{modelValue:a.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:l(()=>[e(r,{label:"注册审核"},{default:l(()=>[e(s,{modelValue:a.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{prop:"webName",label:"网站名称"},{default:l(()=>[e(n,{modelValue:a.value.webName,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.webName=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{label:"keyWords"},{default:l(()=>[e(n,{modelValue:a.value.keyWords,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.keyWords=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1}),e(r,{style:{width:"34rem"},label:"会员网址",prop:"memberURL"},{default:l(()=>[e(n,{modelValue:a.value.memberURL,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.memberURL=o),style:{width:"8rem"}},null,8,["modelValue"]),e(P,{class:"mx-1"},{default:l(()=>[p(".front-saas-web.surveyssaas.com")]),_:1}),e(f,{class:"copy","data-clipboard-text":`${a.value.memberURL}.front-saas-web.surveyssaas.com`,type:"primary",link:""},{default:l(()=>[p("复制")]),_:1},8,["data-clipboard-text"])]),_:1}),e(r,{style:{width:"34rem"},label:"站点系统域名"},{default:l(()=>[e(n,{modelValue:a.value.externalSite,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.externalSite=o)},null,8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[e(f,{type:"primary",onClick:L},{default:l(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1}),e(b,{label:"高级设置",name:"高级设置"},{default:l(()=>[e(_,{gutter:20},{default:l(()=>[e(u,{span:24},{default:l(()=>[e(r,{label:"默认会员价格比例",prop:"confirmPassword"},{default:l(()=>[e(n,{modelValue:a.value.priceProportion,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.priceProportion=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[p("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"最低结算金额",prop:"confirmPassword"},{default:l(()=>[e(n,{modelValue:a.value.minimumAmount,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.minimumAmount=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"会员税点",prop:"confirmPassword"},{default:l(()=>[e(n,{modelValue:a.value.taxPointsProportion,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.taxPointsProportion=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[p("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"调查限价",prop:"confirmPassword"},{default:l(()=>[e(n,{modelValue:a.value.fixedPrice,"onUpdate:modelValue":t[9]||(t[9]=o=>a.value.fixedPrice=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,null,{default:l(()=>[e(f,{type:"primary"},{default:l(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),e(V,{"label-width":"130px"},{default:l(()=>[e(b,{label:"联系我们",name:"联系我们"},{default:l(()=>[e(_,{gutter:20},{default:l(()=>[e(u,{span:24},{default:l(()=>[e(r,{label:"电子邮箱",prop:"email"},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.keyWords,"onUpdate:modelValue":t[10]||(t[10]=o=>a.value.keyWords=o),placeholder:"",onBlur:h},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"手机号码",prop:"phone"},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.keyWords,"onUpdate:modelValue":t[11]||(t[11]=o=>a.value.keyWords=o),placeholder:"",onBlur:h},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"QQ号码",prop:""},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.keyWords,"onUpdate:modelValue":t[12]||(t[12]=o=>a.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,{label:"公司地址",prop:""},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.keyWords,"onUpdate:modelValue":t[13]||(t[13]=o=>a.value.keyWords=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(r,null,{default:l(()=>[e(f,{type:"primary"},{default:l(()=>[p(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])),[[S,m.value]])}}}),j=z(Z,[["__scopeId","data-v-e18e63dd"]]);export{j as default};
