
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ve,aN as Le,r as b,a3 as O,l as Ce,a as m,al as Ne,o,b as $,f as t,w as l,F as Q,n as j,e as n,am as R,g as v,D as q,j as d,i as k,Q as Ie,E as Be,L as Ee,aP as xe,aQ as ze,ak as Ue,aK as Ge,aL as De,C as y,aE as J,P as Pe}from"./index-DYnJw9TK.js";import{_ as Fe}from"./index.vue_vue_type_style_index_0_lang-CzD6_rZN.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-B5YNGdJ0.js";import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-D6Q3-Pw9.js";import{_ as $e}from"./index.vue_vue_type_script_setup_true_lang-CPNWU2L1.js";import{s as Re}from"./apiLoading-DPCVUSf9.js";import{a as K}from"./survey_vip-B_JNe8ye.js";import{u as Ae}from"./survey_vipLevel-B1eAtBwk.js";import{u as He}from"./survey_vipGroup-CO8pKHjk.js";import{u as Ye}from"./survey_vip-CiH20Nkl.js";import"./index.vue_vue_type_script_setup_true_lang-CYbPv-fU.js";import"./index.vue_vue_type_script_setup_true_lang-BVl3x-sL.js";import"./otherFunctions_basicDictionary-7VJqabLB.js";import"./basicDictionary-Wgpwl97n.js";import"./stagedData-BeHZFcfd.js";import"./survey_vipGroup-DEbZ3RJ4.js";const S=w=>(Ge("data-v-e19e38fa"),w=w(),De(),w),Oe=S(()=>y("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Qe=S(()=>y("div",{class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),je=S(()=>y("div",{class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),qe=S(()=>y("div",{class:"i-fluent:checkmark-12-filled w-1.5em h-1.5em"},null,-1)),Je=S(()=>y("div",{class:"i-entypo:cross w-1.5em h-1.5em"},null,-1)),Ke=Ve({name:"SurveyVipList",__name:"list",setup(w){const W=Ae(),X=He(),Z=Ye(),{pagination:_,getParams:ee,onSizeChange:te,onCurrentChange:le}=Le(),I=b(!1),g=O({list:[],vipLevelList:[],vipGroupList:[]}),ae=b(),B=b(),A=b(),E=b(!0),x=b(!1),z=b("default"),u=b([]),U=b(!1),G=b([{prop:"memberId",label:"会员id",checked:!0,sprtable:!0},{prop:"memberNickname",label:"会员名称",checked:!0,sprtable:!0},{label:"余额",checked:!0,sortable:!0,prop:"availableBalance"},{label:"待审金额",checked:!0,sortable:!0,prop:"pendingBalance"},{prop:"memberName",label:"会员姓名",checked:!0,sprtable:!0},{prop:"memberLevelName",label:"会员等级",checked:!0,sprtable:!0},{prop:"memberGroupName",label:"会员组",checked:!0,sprtable:!0},{prop:"B2B|B2C",label:"B2B|B2C",checked:!0,sprtable:!0},{prop:"memberStatus",label:"会员状态",checked:!0,sprtable:!0},{prop:"createName",label:"创建人",checked:!0,sprtable:!0},{prop:"createTime",label:"创建日期",checked:!0,sprtable:!0}]),i=O({memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]});function oe(){B.value.showEdit()}function ne(r){B.value.showEdit(r)}const re=r=>{A.value.showEdit(JSON.stringify(r))};async function D(r,a){const P={memberId:a,memberStatus:r},{status:f}=await Re(K.changestatus(P));f===1&&Be.success({message:"修改成功"}),Z.NickNameList=null,h()}function h(){_.value.page=1,V()}function se(r){te(r).then(()=>V())}function H(r=1){le(r).then(()=>V())}async function V(){I.value=!0;const r={...ee(),...i};i.time&&i.time.length&&(r.beginTime=i.time[0]||"",r.endTime=i.time[1]||"");const a=await K.list(r);g.list=a.data.getMemberInfoList,_.value.total=a.data.total,I.value=!1}function ie(){Object.assign(i,{memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]}),h()}function me(r){ae.value=r}return Ce(async()=>{G.value.forEach(r=>{r.checked&&u.value.push(r.prop)}),V(),g.vipLevelList=await W.getLevelNameList(),g.vipGroupList=await X.getGroupNameList()}),(r,a)=>{const P=m("el-input"),f=m("el-form-item"),L=m("el-option"),F=m("el-select"),ue=m("el-date-picker"),Y=Ee,T=m("ElButton"),pe=m("ElFormItem"),ce=m("ElForm"),de=Te,be=m("ElDivider"),C=m("el-button"),ve=Fe,_e=xe,fe=ze,ge=m("el-row"),c=m("el-table-column"),N=m("el-text"),M=m("ElSwitch"),he=m("el-empty"),ke=m("el-table"),ye=m("ElPagination"),Se=Ue,we=Ne("loading");return o(),$("div",{class:Ie({"absolute-container":U.value})},[t(Se,null,{default:l(()=>[t(de,{"show-toggle":!1},{default:l(({fold:e,toggle:p})=>[t(ce,{model:i,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(f,{label:""},{default:l(()=>[t(P,{modelValue:i.memberName,"onUpdate:modelValue":a[0]||(a[0]=s=>i.memberName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID、会员名称、姓名"},null,8,["modelValue"])]),_:1}),t(f,{label:""},{default:l(()=>[t(F,{modelValue:i.memberLevelId,"onUpdate:modelValue":a[1]||(a[1]=s=>i.memberLevelId=s),clearable:"",placeholder:"会员等级"},{default:l(()=>[(o(!0),$(Q,null,j(g.vipLevelList,s=>(o(),n(L,{key:s.memberLevelId,label:s.levelNameOrAdditionRatio,value:s.memberLevelId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:""},{default:l(()=>[t(F,{modelValue:i.memberStatus,"onUpdate:modelValue":a[2]||(a[2]=s=>i.memberStatus=s),clearable:"",placeholder:"会员状态"},{default:l(()=>[t(L,{label:"关闭",value:1}),t(L,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:1}),R(t(f,{label:""},{default:l(()=>[t(F,{modelValue:i.memberGroupId,"onUpdate:modelValue":a[3]||(a[3]=s=>i.memberGroupId=s),clearable:"",placeholder:"所属会员组"},{default:l(()=>[(o(!0),$(Q,null,j(g.vipGroupList,s=>(o(),n(L,{key:s.memberGroupId,label:s.memberGroupName,value:s.memberGroupId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[J,!e]]),R(t(f,null,{default:l(()=>[t(ue,{modelValue:i.time,"onUpdate:modelValue":a[4]||(a[4]=s=>i.time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[J,!e]]),t(pe,null,{default:l(()=>[t(T,{type:"primary",onClick:a[5]||(a[5]=s=>H())},{icon:l(()=>[t(Y,{name:"i-ep:search"})]),default:l(()=>[v(" 筛选 ")]),_:1}),t(T,{onClick:ie},{icon:l(()=>[Oe]),default:l(()=>[v(" 重置 ")]),_:1}),t(T,{link:"",onClick:p},{icon:l(()=>[t(Y,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[v(" "+q(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(be,{"border-style":"dashed"}),t(ge,null,{default:l(()=>[t(ve,null,{default:l(()=>[t(C,{type:"primary",size:"default",onClick:oe},{default:l(()=>[v(" 新增 ")]),_:1})]),_:1}),t(fe,null,{default:l(()=>[t(C,{size:"default"},{default:l(()=>[v(" 导出 ")]),_:1}),t(_e,{border:E.value,"onUpdate:border":a[6]||(a[6]=e=>E.value=e),tableAutoHeight:U.value,"onUpdate:tableAutoHeight":a[7]||(a[7]=e=>U.value=e),checkList:u.value,"onUpdate:checkList":a[8]||(a[8]=e=>u.value=e),columns:G.value,"onUpdate:columns":a[9]||(a[9]=e=>G.value=e),"line-height":z.value,"onUpdate:lineHeight":a[10]||(a[10]=e=>z.value=e),stripe:x.value,"onUpdate:stripe":a[11]||(a[11]=e=>x.value=e),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),R((o(),n(ke,{border:E.value,data:g.list,size:z.value,stripe:x.value,onSelectionChange:me},{empty:l(()=>[t(he,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[t(c,{align:"center",type:"selection"}),u.value.includes("memberId")?(o(),n(c,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"})):d("",!0),u.value.includes("memberNickname")?(o(),n(c,{key:1,align:"center",prop:"memberNickname","show-overflow-tooltip":"",label:"会员名称"})):d("",!0),u.value.includes("memberName")?(o(),n(c,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"会员姓名"})):d("",!0),u.value.includes("availableBalance")?(o(),n(c,{key:3,align:"center",prop:"availableBalance","show-overflow-tooltip":"",label:"可用余额"})):d("",!0),u.value.includes("pendingBalance")?(o(),n(c,{key:4,align:"center",prop:"pendingBalance","show-overflow-tooltip":"",label:"待审金额"})):d("",!0),u.value.includes("memberLevelName")?(o(),n(c,{key:5,align:"center",prop:"memberLevelName","show-overflow-tooltip":"",label:"会员等级"})):d("",!0),u.value.includes("memberGroupName")?(o(),n(c,{key:6,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组"})):d("",!0),u.value.includes("B2B|B2C")?(o(),n(c,{key:7,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:l(({row:e})=>[e.b2bStatus&&e.b2bStatus===2?(o(),n(N,{key:0,class:"mx-1"},{default:l(()=>[Qe]),_:1})):(o(),n(N,{key:1,class:"mx-1"},{default:l(()=>[je]),_:1})),v(" | "),e.b2cStatus&&e.b2cStatus===2?(o(),n(N,{key:2,class:"mx-1"},{default:l(()=>[qe]),_:1})):(o(),n(N,{key:3,class:"mx-1"},{default:l(()=>[Je]),_:1}))]),_:1})):d("",!0),u.value.includes("memberStatus")?(o(),n(c,{key:8,align:"center","show-overflow-tooltip":"",label:"会员状态"},{default:l(({row:e})=>[e.memberStatus===3?(o(),n(M,{key:0,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":3,"active-value":2,"inactive-text":"待审核","active-text":"启用",onChange:p=>D(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(o(),n(M,{key:1,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>D(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):d("",!0),u.value.includes("memberStatus")?(o(),n(c,{key:9,align:"center","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[t(M,{modelValue:e.randomStatus,"onUpdate:modelValue":p=>e.randomStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>D(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),u.value.includes("createName")?(o(),n(c,{key:10,align:"center",prop:"createName","show-overflow-tooltip":"",label:"创建人"},{default:l(({row:e})=>[v(q(e.createName?e.createName:"-"),1)]),_:1})):d("",!0),u.value.includes("createTime")?(o(),n(c,{key:11,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):d("",!0),t(c,{align:"center",label:"操作","show-overflow-tooltip":"",width:"180"},{default:l(({row:e})=>[t(C,{size:"small",plain:"",type:"primary",onClick:p=>ne(e)},{default:l(()=>[v(" 编辑 ")]),_:2},1032,["onClick"]),t(C,{size:"small",plain:"",type:"primary",onClick:p=>re(e)},{default:l(()=>[v(" 加减款 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[we,I.value]]),t(ye,{"current-page":k(_).page,total:k(_).total,"page-size":k(_).size,"page-sizes":k(_).sizes,layout:k(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:se,onCurrentChange:H},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Me,{ref_key:"editRef",ref:B,onFetchData:h},null,512),t($e,{ref_key:"vipPlusMinusPaymentsRef",ref:A,onFetchData:h},null,512)],2)}}}),dt=Pe(Ke,[["__scopeId","data-v-e19e38fa"]]);export{dt as default};
