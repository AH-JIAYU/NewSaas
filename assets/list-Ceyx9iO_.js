
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k,d as N,r as b,l as A,E as y,a as d,al as M,am as S,o as $,b as W,f as e,w as l,g as m,at as D,ak as T,P as z}from"./index-BYedTeXc.js";import{C as B}from"./clipboard-Ce556A0p.js";const q={list:()=>k.post("supplier-config/get/getSupplierConfig"),create:V=>k.post("supplier-config/insert/insertSupplierConfig",V),edit:V=>k.post("/supplier-config/update/updateSupplierConfig",V)},Q=N({name:"site_setting",__name:"list",setup(V){const P=b("基本设置"),p=b(!1),_=b(),a=b({id:"",registerOffOrOn:!0,registerExamineOffOrOn:!1,keyWords:"",webName:"",supplierURL:"",defaultPriceRatio:"",taxRate:"",minimumAmount:"",fixedPrice:"",phone:"",email:"",qqCode:"",address:""}),L=b({webName:[{required:!0,message:"请输入网站名称",trigger:"blur"}],supplierURL:[{required:!0,message:"请输入供应商网址",trigger:"blur"}],phone:[{required:!1,trigger:"blur",message:"请输入手机号"},{validator:(s,t,i)=>{/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[189]))\d{8}$/.test(a.value.phone)?i():i(new Error("请输入合法手机号"))},trigger:"blur"}],email:[{required:!1,trigger:"blur",message:"请输入邮箱"},{validator:(s,t,i)=>{/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.value.email)?i():i(new Error("请输入合法邮箱"))},trigger:"blur"}]});A(()=>{w()});async function w(){p.value=!0;const{data:s}=await q.list();a.value=s||a.value,p.value=!1}const x=new B(".copy");x.on("success",function(s){y.success({message:"复制成功",center:!0}),s.clearSelection(),x.destroy()}),x.on("error",function(){y.error({message:"复制失败",center:!0})});function O(){a.value.id===""?_.value&&_.value.validate(s=>{s&&(p.value=!0,delete a.value.id,q.create(a.value).then(()=>{p.value=!1,w(),y.success({message:"新增成功",center:!0})}))}):_.value&&_.value.validate(s=>{if(s)try{let{id:t,keyWords:i,registerExamineOffOrOn:f,registerOffOrOn:u,supplierURL:r,webName:n,defaultPriceRatio:U,taxRate:v,minimumAmount:c,phone:g,email:R,qqCode:E,address:C}=a.value;const h={id:t,keyWords:i,registerExamineOffOrOn:f,registerOffOrOn:u,supplierURL:r,webName:n,defaultPriceRatio:U,taxRate:v,minimumAmount:c,phone:g,email:R,qqCode:E,address:C};p.value=!0,q.edit(h).then(o=>{p.value=!1,o.status===1&&(w(),y.success({message:"修改成功",center:!0}))})}catch{}})}return(s,t)=>{const i=D,f=d("el-switch"),u=d("el-form-item"),r=d("el-col"),n=d("el-input"),U=d("el-text"),v=d("el-button"),c=d("el-row"),g=d("el-tab-pane"),R=d("el-form"),E=d("el-tabs"),C=T,h=M("loading");return S(($(),W("div",null,[e(i,{title:"站点设置管理"}),e(C,null,{default:l(()=>[e(E,{modelValue:P.value,"onUpdate:modelValue":t[12]||(t[12]=o=>P.value=o),type:"border-card"},{default:l(()=>[e(R,{ref_key:"formRef",ref:_,model:a.value,rules:L.value,"label-width":"140px","label-position":"right",inline:!1},{default:l(()=>[e(g,{label:"基本设置",name:"基本设置"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(r,{span:3},{default:l(()=>[e(u,{label:"注册开关"},{default:l(()=>[e(f,{modelValue:a.value.registerOffOrOn,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.registerOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:6},{default:l(()=>[e(u,{label:"注册审核"},{default:l(()=>[e(f,{modelValue:a.value.registerExamineOffOrOn,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.registerExamineOffOrOn=o),"active-text":"开启","inline-prompt":"","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"网站名称",prop:"webName"},{default:l(()=>[e(n,{modelValue:a.value.webName,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.webName=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"keyWords"},{default:l(()=>[e(n,{modelValue:a.value.keyWords,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.keyWords=o),style:{width:"18rem"}},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"站点系统域名",prop:"supplierURL"},{default:l(()=>[e(n,{modelValue:a.value.supplierURL,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.supplierURL=o),style:{width:"8rem"}},null,8,["modelValue"]),e(U,{class:"mx-1"},{default:l(()=>[m(".front-supplier.surveyssaas.com")]),_:1}),e(v,{class:"copy","data-clipboard-text":`${a.value.supplierURL}.front-supplier.surveyssaas.com`,type:"primary",link:""},{default:l(()=>[m("复制")]),_:1},8,["data-clipboard-text"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,null,{default:l(()=>[e(v,{type:"primary",onClick:O},{default:l(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{label:"高级设置",name:"高级设置"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(u,{label:"默认供应商价格比例",prop:""},{default:l(()=>[e(n,{modelValue:a.value.defaultPriceRatio,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.defaultPriceRatio=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[m("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"最低结算金额",prop:""},{default:l(()=>[e(n,{modelValue:a.value.minimumAmount,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.minimumAmount=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"供应商税点",prop:""},{default:l(()=>[e(n,{modelValue:a.value.taxRate,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.taxRate=o),modelModifiers:{number:!0},style:{width:"18rem"},placeholder:""},{append:l(()=>[m("%")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,null,{default:l(()=>[e(v,{type:"primary",onClick:O},{default:l(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{label:"联系我们",name:"联系我们"},{default:l(()=>[e(c,{gutter:20},{default:l(()=>[e(r,{span:24},{default:l(()=>[e(u,{label:"电子邮箱",prop:"email"},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.email,"onUpdate:modelValue":t[8]||(t[8]=o=>a.value.email=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"手机号码",prop:"phone"},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.phone,"onUpdate:modelValue":t[9]||(t[9]=o=>a.value.phone=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"QQ号码",prop:""},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.qqCode,"onUpdate:modelValue":t[10]||(t[10]=o=>a.value.qqCode=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,{label:"公司地址",prop:""},{default:l(()=>[e(n,{style:{width:"18rem"},modelValue:a.value.address,"onUpdate:modelValue":t[11]||(t[11]=o=>a.value.address=o),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:24},{default:l(()=>[e(u,null,{default:l(()=>[e(v,{type:"primary",onClick:O},{default:l(()=>[m(" 确认 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])),[[h,p.value]])}}}),j=z(Q,[["__scopeId","data-v-8cbcd6c8"]]);export{j as default};
