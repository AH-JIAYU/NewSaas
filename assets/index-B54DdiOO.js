
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ve,d as ye,l as Ie,aK as ge,r as v,a1 as H,n as he,a as c,an as Se,o as i,b as P,f as l,w as o,i as t,ak as g,F as A,p as q,e as d,g as s,B as p,C as k,j as m,O as ke,J as Ce,aM as Ve,aN as we,aj as Le,aH as je,aI as De,A as Te,al as C,N as Ne}from"./index-CWNW1mmx.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-CAeNAUPB.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-B01w1OEm.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-D4lYCKH-.js";import{u as Be}from"./user_customer-BEiO1Gl6.js";import"./user_customer-C6URuKbK.js";const Me={list:h=>ve.post("callback/getMemberChildSurveyRecord",h)},Pe=h=>(je("data-v-48deb0ca"),h=h(),De(),h),xe=Pe(()=>Te("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Fe=ye({name:"RecordSurveyIndex",__name:"index",setup(h){const O=Ie(),G=Be(),{getParams:J,pagination:S,onSizeChange:K,onCurrentChange:Q}=ge(),U=v(!1),x=v([]),W=v(""),u=v([]),w=v(!0),L=v(!1),j=v("default"),D=v(!1),X=v(),T=v([{prop:"id",label:"点击ID",sortable:!0,checked:!0},{prop:"surveySource",label:"会员类型",sortable:!0,checked:!0},{prop:"memberChildrenId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberId",label:"会员Id",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称/客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),n=H({memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),y=H({memberType:["内部会员","外部会员"],allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],countryList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function Y(){n.pageNo=1,V()}function Z(f){K(f).then(()=>V())}function F(f=1){Q(f).then(()=>V())}async function V(){U.value=!0;const f={...J(),...n},{data:a}=await Me.list(f);x.value=a.memberChildSurveyRecordInfoList,X.value=a.currencyType,S.value.total=a.total,U.value=!1}function ee(f){W.value=f}function te(){Object.assign(n,{memberChildId:"",memberId:"",tenantSupplierId:"",surveySource:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:"",randomIdentityId:""}),V()}return he(async()=>{y.customerList=await G.getCustomerList(),y.country=await O.getCountry(),T.value.forEach(f=>{f.checked&&u.value.push(f.prop)}),V()}),(f,a)=>{const I=c("el-input"),_=c("el-form-item"),N=c("el-option"),z=c("el-select"),R=Ce,E=c("ElButton"),le=c("ElFormItem"),oe=c("ElForm"),ae=Ee,ne=c("ElDivider"),re=ze,ie=c("el-button"),ue=Ve,se=we,de=c("el-row"),b=c("el-table-column"),B=Ue,$=c("ElTableColumn"),pe=c("el-empty"),ce=c("el-table"),me=c("ElPagination"),be=Le,fe=Se("loading");return i(),P("div",{class:ke({"absolute-container":t(D)})},[l(be,null,{default:o(()=>[l(ae,{"show-toggle":!1},{default:o(({fold:e,toggle:_e})=>[l(oe,{model:t(n),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).projectId,"onUpdate:modelValue":a[0]||(a[0]=r=>t(n).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).projectName,"onUpdate:modelValue":a[1]||(a[1]=r=>t(n).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:o(()=>[l(z,{modelValue:t(n).surveySource,"onUpdate:modelValue":a[2]||(a[2]=r=>t(n).surveySource=r),clearable:"",filterable:"",placeholder:"会员类型"},{default:o(()=>[l(N,{label:"内部会员",value:1}),l(N,{label:"外部会员",value:2})]),_:1},8,["modelValue"])]),_:1}),l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).memberId,"onUpdate:modelValue":a[3]||(a[3]=r=>t(n).memberId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),g(l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).memberChildId,"onUpdate:modelValue":a[4]||(a[4]=r=>t(n).memberChildId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),g(l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).randomIdentityId,"onUpdate:modelValue":a[5]||(a[5]=r=>t(n).randomIdentityId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),g(l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).tenantSupplierId,"onUpdate:modelValue":a[6]||(a[6]=r=>t(n).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),g(l(_,{label:""},{default:o(()=>[l(I,{modelValue:t(n).ip,"onUpdate:modelValue":a[7]||(a[7]=r=>t(n).ip=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[C,!e]]),g(l(_,{label:""},{default:o(()=>[l(z,{modelValue:t(n).surveyStatus,"onUpdate:modelValue":a[8]||(a[8]=r=>t(n).surveyStatus=r),clearable:"",filterable:"",placeholder:"调查状态"},{default:o(()=>[(i(!0),P(A,null,q(t(y).surveyStatusList,(r,M)=>(i(),d(N,{label:r,value:M+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!e]]),g(l(_,{label:""},{default:o(()=>[l(z,{modelValue:t(n).viceStatus,"onUpdate:modelValue":a[9]||(a[9]=r=>t(n).viceStatus=r),clearable:"",placeholder:"副状态"},{default:o(()=>[(i(!0),P(A,null,q(t(y).viceStatusList,(r,M)=>(i(),d(N,{label:r,value:M+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[C,!e]]),l(le,null,{default:o(()=>[l(E,{type:"primary",onClick:a[10]||(a[10]=r=>F())},{icon:o(()=>[l(R,{name:"i-ep:search"})]),default:o(()=>[s(" 筛选 ")]),_:1}),l(E,{onClick:te},{icon:o(()=>[xe]),default:o(()=>[s(" 重置 ")]),_:1}),l(E,{link:"",onClick:_e},{icon:o(()=>[l(R,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[s(" "+p(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(ne,{"border-style":"dashed"}),l(de,null,{default:o(()=>[l(re),l(se,null,{default:o(()=>[l(ie,{size:"default"},{default:o(()=>[s(" 导出 ")]),_:1}),l(ue,{border:t(w),"onUpdate:border":a[11]||(a[11]=e=>k(w)?w.value=e:null),tableAutoHeight:t(D),"onUpdate:tableAutoHeight":a[12]||(a[12]=e=>k(D)?D.value=e:null),checkList:t(u),"onUpdate:checkList":a[13]||(a[13]=e=>k(u)?u.value=e:null),columns:t(T),"onUpdate:columns":a[14]||(a[14]=e=>k(T)?T.value=e:null),"line-height":t(j),"onUpdate:lineHeight":a[15]||(a[15]=e=>k(j)?j.value=e:null),stripe:t(L),"onUpdate:stripe":a[16]||(a[16]=e=>k(L)?L.value=e:null),style:{"margin-left":"12px"},onQueryData:Y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),g((i(),d(ce,{border:t(w),data:t(x),size:t(j),stripe:t(L),onSelectionChange:ee},{empty:o(()=>[l(pe,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[l(b,{align:"center",type:"selection"}),t(u).includes("id")?(i(),d(b,{key:0,align:"center",prop:"id","show-overflow-tooltip":"",label:"点击ID"},{default:o(({row:e})=>[s(p(e.id?e.id:"-"),1)]),_:1})):m("",!0),t(u).includes("surveySource")?(i(),d(b,{key:1,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员类型"},{default:o(({row:e})=>[s(p(e.surveySource===1?"内部会员":"外部会员"),1)]),_:1})):m("",!0),t(u).includes("memberChildrenId")?(i(),d(b,{key:2,align:"center",prop:"memberChildrenId","show-overflow-tooltip":"",label:"子会员ID"},{default:o(({row:e})=>[s(p(e.memberChildrenId?e.memberChildrenId:"-"),1)]),_:1})):m("",!0),t(u).includes("memberId")?(i(),d(b,{key:3,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[s(p(e.memberId?e.memberId:"-"),1)]),_:1})):m("",!0),t(u).includes("randomIdentityId")?(i(),d(b,{key:4,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:o(({row:e})=>[s(p(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):m("",!0),t(u).includes("tenantSupplierId")?(i(),d(b,{key:5,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[s(p(e.tenantSupplierId?e.tenantSupplierId:"-"),1)]),_:1})):m("",!0),t(u).includes("projectId")?(i(),d(b,{key:6,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):m("",!0),t(u).includes("projectName")?(i(),d(b,{key:7,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称/客户简称"},{default:o(({row:e})=>[s(p(e.projectName?e.projectName:"-")+"/"+p(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):m("",!0),t(u).includes("allocationType")?(i(),d(b,{key:8,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:o(({row:e})=>[s(p(t(y).allocationTypeList[e.allocationType-1]),1)]),_:1})):m("",!0),t(u).includes("price")?(i(),d(b,{key:9,align:"center",prop:"h","show-overflow-tooltip":"",label:"原价/供应商价/子会员价"},{default:o(({row:e})=>[s(p(e.doMoneyPrice||0),1),l(B),s(" / "+p(e.supplierPrice||0),1),l(B),s(" / "+p(e.memberChildPrice||0),1),l(B)]),_:1})):m("",!0),t(u).includes("ipBelong")?(i(),d(b,{key:10,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):m("",!0),t(u).includes("surveyTime")?(i(),d(b,{key:11,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:o(({row:e})=>[s(p(e.surveyTime?e.surveyTime+"min":0)+"/ "+p(e.projectTime?e.projectTime+"min":0),1)]),_:1})):m("",!0),t(u).includes("surveyStatus")?(i(),d($,{key:12,align:"center","show-overflow-tooltip":"",prop:"",label:"调查状态"},{default:o(({row:e})=>[s(p(t(y).surveyStatusList[e.surveyStatus-1]),1)]),_:1})):m("",!0),t(u).includes("viceStatus")?(i(),d($,{key:13,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:o(({row:e})=>[s(p(t(y).viceStatusList[e.viceStatus-1]?t(y).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):m("",!0)]),_:1},8,["border","data","size","stripe"])),[[fe,t(U)]]),l(me,{"current-page":t(S).page,total:t(S).total,"page-size":t(S).size,"page-sizes":t(S).sizes,layout:t(S).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:F},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ge=Ne(Fe,[["__scopeId","data-v-48deb0ca"]]);export{Ge as default};
