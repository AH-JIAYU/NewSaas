
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ue,d as pe,aN as ce,r as c,l as de,a as i,al as me,o as p,b as x,f as l,w as n,i as e,F as _e,n as fe,am as j,g as b,D as k,G as h,e as m,j as _,Q as be,L as ge,aP as ve,aQ as he,ak as Ie,aK as ke,aL as ye,C as Se,aE as B,P as we}from"./index-DBih9DQ6.js";import{_ as Ce}from"./index.vue_vue_type_style_index_0_lang-BjKVXN-C.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-Dqd5LTGV.js";const Ve={list:g=>ue.post("callback/getProjectTerminationScreenDetail",g)},je=g=>(ke("data-v-0c970644"),g=g(),ye(),g),Te=je(()=>Se("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),ze=pe({name:"RecordTerminationIndex",__name:"index",setup(g){const{getParams:L,pagination:f,onSizeChange:F,onCurrentChange:M}=ce(),T=c(!1),E=c([]),$=c(""),u=c([]),y=c(!0),S=c(!1),w=c("default"),C=c(!1),D=c([{label:"会员ID/子会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"会员类型",prop:"surveySource",sortable:!0,checked:!0},{label:"项目名称/客户简称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),P=[{label:"内部",value:1},{label:"外部",value:2}],a=c({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function H(){f.value.page=1,I()}function R(s){F(s).then(()=>I())}function N(s=1){M(s).then(()=>I())}async function I(){T.value=!0;const s={...L(),...a.value};a.value.time&&a.value.time.length&&(s.beginTime=a.value.time[0]||"",s.endTime=a.value.time[1]||"");const t=await Ve.list(s);E.value=t.data.projectTerminationScreenDetailInfoList,f.value.total=t.data.total,T.value=!1}function A(){Object.assign(a.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""}),I()}function Y(s){$.value=s}return de(()=>{D.value.forEach(s=>{s.checked&&u.value.push(s.prop)}),I()}),(s,t)=>{const V=i("el-input"),v=i("el-form-item"),Q=i("el-option"),q=i("el-select"),G=i("el-date-picker"),U=ge,z=i("ElButton"),K=i("ElFormItem"),O=i("ElForm"),J=De,W=i("ElDivider"),X=Ce,Z=i("el-button"),ee=ve,le=he,te=i("el-row"),d=i("el-table-column"),oe=i("el-empty"),ne=i("el-table"),ae=i("ElPagination"),re=Ie,ie=me("loading");return p(),x("div",{class:be({"absolute-container":e(C)})},[l(re,null,{default:n(()=>[l(J,{"show-toggle":!1},{default:n(({fold:o,toggle:se})=>[l(O,{model:e(a),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:n(()=>[l(v,{label:""},{default:n(()=>[l(V,{modelValue:e(a).tenantSupplierId,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).tenantSupplierId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:n(()=>[l(V,{modelValue:e(a).projectId,"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).projectId=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:n(()=>[l(q,{modelValue:e(a).surveySource,"onUpdate:modelValue":t[2]||(t[2]=r=>e(a).surveySource=r),"value-key":"",placeholder:"会员类型",clearable:"",filterable:""},{default:n(()=>[(p(),x(_e,null,fe(P,r=>l(Q,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),j(l(v,{label:""},{default:n(()=>[l(V,{modelValue:e(a).projectName,"onUpdate:modelValue":t[3]||(t[3]=r=>e(a).projectName=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),j(l(v,{label:""},{default:n(()=>[l(V,{modelValue:e(a).ipBelong,"onUpdate:modelValue":t[4]||(t[4]=r=>e(a).ipBelong=r),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP/所属国"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),j(l(v,{label:""},{default:n(()=>[l(G,{modelValue:e(a).time,"onUpdate:modelValue":t[5]||(t[5]=r=>e(a).time=r),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[B,!o]]),l(K,null,{default:n(()=>[l(z,{type:"primary",onClick:t[6]||(t[6]=r=>N())},{icon:n(()=>[l(U,{name:"i-ep:search"})]),default:n(()=>[b(" 筛选 ")]),_:1}),l(z,{onClick:A},{icon:n(()=>[Te]),default:n(()=>[b(" 重置 ")]),_:1}),l(z,{link:"",onClick:se},{icon:n(()=>[l(U,{name:o?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:n(()=>[b(" "+k(o?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),l(W,{"border-style":"dashed"}),l(te,null,{default:n(()=>[l(X),l(le,null,{default:n(()=>[l(Z,{size:"default"},{default:n(()=>[b(" 导出 ")]),_:1}),l(ee,{border:e(y),"onUpdate:border":t[7]||(t[7]=o=>h(y)?y.value=o:null),tableAutoHeight:e(C),"onUpdate:tableAutoHeight":t[8]||(t[8]=o=>h(C)?C.value=o:null),checkList:e(u),"onUpdate:checkList":t[9]||(t[9]=o=>h(u)?u.value=o:null),columns:e(D),"onUpdate:columns":t[10]||(t[10]=o=>h(D)?D.value=o:null),"line-height":e(w),"onUpdate:lineHeight":t[11]||(t[11]=o=>h(w)?w.value=o:null),stripe:e(S),"onUpdate:stripe":t[12]||(t[12]=o=>h(S)?S.value=o:null),style:{"margin-left":"12px"},onQueryData:H},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),j((p(),m(ne,{border:e(y),data:e(E),size:e(w),stripe:e(S),onSelectionChange:Y},{empty:n(()=>[l(oe,{class:"vab-data-empty",description:"暂无数据"})]),default:n(()=>[l(d,{align:"center",type:"selection"}),e(u).includes("surveySource")?(p(),m(d,{key:0,align:"center",prop:"surveySource","show-overflow-tooltip":"",label:"会员类型"},{default:n(({row:o})=>[b(k(P[o.surveySource-1].label),1)]),_:1})):_("",!0),e(u).includes("memberChildId")?(p(),m(d,{key:1,align:"center",prop:"memberChildId","show-overflow-tooltip":"",label:"会员ID/子会员ID"},{default:n(({row:o})=>[b(k(o.peopleType===1?"会员":"子会员")+"："+k(o.memberChildId),1)]),_:1})):_("",!0),e(u).includes("tenantSupplierId")?(p(),m(d,{key:2,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"},{default:n(({row:o})=>[b(k(o.tenantSupplierId?o.tenantSupplierId:"-"),1)]),_:1})):_("",!0),e(u).includes("projectId")?(p(),m(d,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):_("",!0),e(u).includes("projectName")?(p(),m(d,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称/客户简称"})):_("",!0),e(u).includes("ipBelong")?(p(),m(d,{key:5,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):_("",!0),e(u).includes("notes")?(p(),m(d,{key:6,align:"center",prop:"notes","show-overflow-tooltip":"",label:"说明"})):_("",!0),e(u).includes("terminationTime")?(p(),m(d,{key:7,align:"center",prop:"terminationTime","show-overflow-tooltip":"",label:"终止时间"})):_("",!0)]),_:1},8,["border","data","size","stripe"])),[[ie,e(T)]]),l(ae,{"current-page":e(f).page,total:e(f).total,"page-size":e(f).size,"page-sizes":e(f).sizes,layout:e(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:N},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ne=we(ze,[["__scopeId","data-v-0c970644"]]);export{Ne as default};
