
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{u as E}from"./configuration_supplierLevel-C8ChFqEy.js";import{a as _}from"./user_supplier-CQJm95gJ.js";import{d as q,r as y,n as N,a as u,o as i,b as V,i as l,e as s,w as o,f as r,g as L,j as d,F as U,t as h,E as B,L as R}from"./index-Cf5cKE0C.js";const j=q({name:"ProjeckEdit",__name:"index",emits:["fetch-data"],setup(M,{expose:k,emit:D}){const I=E(),C=D,c=y(),e=y({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},supplierLevelList:[],rules:{supplierAccord:[{required:!0,message:"请输入供应商名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],memberLevelId:[{required:!0,message:"请选择会员等级",trigger:"change"}],subordinateCountryId:[{required:!0,message:"请选择区域",trigger:"change"}],supplierLevelId:[{required:!0,message:"请选择供应商等级",trigger:"change"}],type:[{required:!0,message:"请选择供应商类型",trigger:"change"}]}}),w={supplierAccord:"供应商名称",supplierLevelId:"供应商等级",settlementCycle:"结算周期",remark:"备注"};async function x(p,a){e.value.title=w[a],e.value.type=a,e.value.dialogTableVisible=!0,e.value.loading=!0;const m=await _.detail({tenantSupplierId:p.tenantSupplierId});e.value.formData=m.data,e.value.formData.countryType=e.value.formData.subordinateCountryId==="343"?1:2,e.value.loading=!1}async function S(){e.value.loading=!0,c.value.validate(async p=>{if(p){const{status:a}=await _.edit(e.value.formData);a===1&&B.success({message:"编辑成功",center:!0}),C("fetch-data"),g()}e.value.loading=!1})}function g(){e.value.dialogTableVisible=!1,e.value.formData={}}return N(async()=>{e.value.supplierLevelList=await I.getLevelNameList()}),k({showEdit:x}),(p,a)=>{const m=u("el-input"),f=u("el-form-item"),n=u("el-option"),b=u("el-select"),T=u("el-form"),v=u("el-button"),A=u("el-dialog");return i(),V("div",null,[l(e).dialogTableVisible?(i(),s(A,{key:0,modelValue:l(e).dialogTableVisible,"onUpdate:modelValue":a[4]||(a[4]=t=>l(e).dialogTableVisible=t),title:l(e).title+"编辑",draggable:""},{footer:o(()=>[r(v,{onClick:g,disabled:l(e).loading},{default:o(()=>[L(" 取消 ")]),_:1},8,["disabled"]),r(v,{type:"primary",onClick:S,disabled:l(e).loading},{default:o(()=>[L(" 确定 ")]),_:1},8,["disabled"])]),default:o(()=>[r(T,{ref_key:"formRef",ref:c,model:l(e).formData,rules:l(e).rules,"label-width":"100","label-position":"right"},{default:o(()=>[l(e).type==="supplierAccord"?(i(),s(f,{key:0,label:"供应商名称",prop:"supplierAccord"},{default:o(()=>[r(m,{modelValue:l(e).formData.supplierAccord,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).formData.supplierAccord=t),clearable:""},null,8,["modelValue"])]),_:1})):d("",!0),l(e).type==="supplierLevelId"?(i(),s(f,{key:1,label:"供应商等级",prop:"supplierLevelId"},{default:o(()=>[r(b,{clearable:"",filterable:"",modelValue:l(e).formData.supplierLevelId,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).formData.supplierLevelId=t)},{default:o(()=>[(i(!0),V(U,null,h(l(e).supplierLevelList,t=>(i(),s(n,{key:t.tenantSupplierLevelId,value:t.tenantSupplierLevelId,label:t.levelNameOrAdditionRatio},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):d("",!0),l(e).type==="settlementCycle"?(i(),s(f,{key:2,label:"结算周期"},{default:o(()=>[r(b,{modelValue:l(e).formData.settlementCycle,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).formData.settlementCycle=t)},{default:o(()=>[r(n,{label:"net 30",value:30}),r(n,{label:"net 60",value:60}),r(n,{label:"net 90",value:90}),r(n,{label:"net 180",value:180})]),_:1},8,["modelValue"])]),_:1})):d("",!0),l(e).type==="remark"?(i(),s(f,{key:3,label:"备注"},{default:o(()=>[r(m,{maxlength:"200","show-word-limit":"",style:{width:"100%"},type:"textarea",rows:5,modelValue:l(e).formData.remark,"onUpdate:modelValue":a[3]||(a[3]=t=>l(e).formData.remark=t)},null,8,["modelValue"])]),_:1})):d("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):d("",!0)])}}}),P=R(j,[["__scopeId","data-v-2a43ff31"]]);export{P as default};
