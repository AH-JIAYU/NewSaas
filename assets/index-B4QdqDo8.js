
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as ne,d as ae,aO as ie,r as p,n as se,a as _,q as re,o as l,b as P,f as a,w as o,i as t,g as m,A as g,s as ce,e as n,aN as pe,j as r,y as u,z as f,N as ue,bf as de,ba as me,bb as _e,ap as fe,L as he}from"./index-DsLR48ME.js";import{_ as be}from"./index-nj4EsJi2.js";import{_ as ge}from"./index.vue_vue_type_style_index_0_lang-Bwb86qat.js";import{_ as ye}from"./index-D0xpMouI.js";import"./index-SvP_AW0L.js";import"./index.vue_vue_type_script_setup_true_lang-if0f7Cd1.js";import"./sortable.esm-C0-Qcoum.js";const ve={list:L=>ne.post("callback/getProjectTerminationScreenDetail",L)},Ie={class:"tableBig oneLine"},Se={class:"copyId tableSmall"},ke={class:"id oneLine"},we={class:"copyId tableSmall"},Ce={key:0,class:"id oneLine"},De={class:"copyId tableSmall"},Ne={class:"id oneLine"},je={class:"copyId tableSmall"},Le={class:"id oneLine"},Te={class:"copyId tableSmall"},ze={class:"id oneLine"},xe={class:"tableBig oneLine"},Be=ae({name:"termination",__name:"index",setup(L){const{getParams:H,pagination:h,onSizeChange:E,onCurrentChange:R}=ie(),{format:U}=de(),I=p(!1),T=p([]),A=p(""),c=p([]),S=p(!1),k=p(!1),w=p("default"),C=p(!1),z=p(),V=p("formSearch-termination"),D=p([{label:"会员",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),F=[{label:"内部",value:1},{label:"外部",value:2}],b=p({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function M(){h.value.page=1,y()}function O(s){E(s).then(()=>y())}function x(s=1){R(s).then(()=>y())}async function y(){try{I.value=!0;const s={...H(),...b.value};b.value.time&&b.value.time.length&&(s.beginTime=b.value.time[0]||"",s.endTime=b.value.time[1]||"");const i=await ve.list(s);T.value=i.data.projectTerminationScreenDetailInfoList,h.value.total=i.data.total,I.value=!1}catch{}finally{I.value=!1}}function $(){Object.assign(b.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),y()}function q(s){A.value=s}se(()=>{D.value.forEach(s=>{s.checked&&c.value.push(s.prop)}),y(),z.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:5,show:!0,type:"input",modelName:"ipBelong",placeholder:"IP/所属国"},{index:6,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const Q={surveySource:()=>F};return(s,i)=>{const G=ye,J=_("ElDivider"),K=ge,j=_("el-button"),W=me,X=_e,Y=_("el-row"),d=_("el-table-column"),v=be,N=_("el-text"),B=_("el-tag"),Z=_("el-empty"),ee=_("el-table"),te=_("ElPagination"),oe=fe,le=re("loading");return l(),P("div",{class:ue({"absolute-container":t(C)})},[a(oe,null,{default:o(()=>[a(G,{formSearchList:t(z),formSearchName:t(V),onCurrentChange:x,onOnReset:$,model:t(b),formOption:Q},null,8,["formSearchList","formSearchName","model"]),a(J,{"border-style":"dashed"}),a(Y,null,{default:o(()=>[a(K),a(X,null,{default:o(()=>[a(j,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),a(W,{border:t(S),"onUpdate:border":i[0]||(i[0]=e=>g(S)?S.value=e:null),tableAutoHeight:t(C),"onUpdate:tableAutoHeight":i[1]||(i[1]=e=>g(C)?C.value=e:null),checkList:t(c),"onUpdate:checkList":i[2]||(i[2]=e=>g(c)?c.value=e:null),columns:t(D),"onUpdate:columns":i[3]||(i[3]=e=>g(D)?D.value=e:null),"line-height":t(w),"onUpdate:lineHeight":i[4]||(i[4]=e=>g(w)?w.value=e:null),stripe:t(k),"onUpdate:stripe":i[5]||(i[5]=e=>g(k)?k.value=e:null),style:{"margin-left":"12px"},onQueryData:M},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((l(),n(ee,{border:t(S),data:t(T),size:t(w),stripe:t(k),onSelectionChange:q},{empty:o(()=>[a(Z,{image:t(pe),"image-size":300},null,8,["image"])]),default:o(()=>[a(d,{align:"left",type:"selection"}),t(c).includes("surveySource")?(l(),n(d,{key:0,align:"left",prop:"surveySource","show-overflow-tooltip":"",width:"120",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(l(),n(j,{key:0,class:"p-1",size:"small",type:"primary"},{default:o(()=>[m("内部会员")]),_:1})):r("",!0),e.surveySource===2?(l(),n(j,{key:1,class:"p-1",size:"small",type:"warning"},{default:o(()=>[m("外部会员")]),_:1})):r("",!0)]),_:1})):r("",!0),t(c).includes("projectName")?(l(),n(d,{key:1,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[u("div",Ie,f(e.projectName),1)]),_:1})):r("",!0),t(c).includes("projectId")?(l(),n(d,{key:2,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"},{default:o(({row:e})=>[u("div",Se,[u("div",ke,"ID: "+f(e.projectId),1),a(v,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("memberChildId")?(l(),n(d,{key:3,align:"left",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[u("div",we,[e.peopleType===1?(l(),P("div",Ce,"ID: "+f(e.memberChildId),1)):r("",!0),a(v,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("supplierMemberChildId")?(l(),n(d,{key:4,align:"left",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:o(({row:e})=>[u("div",De,[u("div",Ne,[e.peopleType!==1?(l(),n(N,{key:0},{default:o(()=>[m(" ID: "+f(e.memberChildId),1)]),_:2},1024)):(l(),n(N,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.peopleType!==1?(l(),n(v,{key:0,class:"copy",content:e.memberChildId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("tenantSupplierId")?(l(),n(d,{key:5,align:"left",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[u("div",je,[u("div",Le,[e.tenantSupplierId?(l(),n(N,{key:0},{default:o(()=>[m(" ID: "+f(e.memberChildId),1)]),_:2},1024)):(l(),n(N,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.tenantSupplierId?(l(),n(v,{key:0,class:"copy",content:e.tenantSupplierId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("ipBelong")?(l(),n(d,{key:6,align:"left",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国",width:"220"},{default:o(({row:e})=>[u("div",Te,[u("div",ze,[a(B,{type:"primary"},{default:o(()=>[m(f(e.ipBelong.split("/")[1]),1)]),_:2},1024),m(" "+f(e.ipBelong.split("/")[0]),1)]),a(v,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("terminationTime")?(l(),n(d,{key:7,label:"终止时间",align:"left",prop:"terminationTime","show-overflow-tooltip":""},{default:o(({row:e})=>[a(B,{effect:"plain",type:"info"},{default:o(()=>[m(f(t(U)(e.terminationTime)),1)]),_:2},1024)]),_:1})):r("",!0),t(c).includes("notes")?(l(),n(d,{key:8,align:"left",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"},{default:o(({row:e})=>[u("div",xe,f(e.notes),1)]),_:1})):r("",!0)]),_:1},8,["border","data","size","stripe"])),[[le,t(I)]]),a(te,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Fe=he(Be,[["__scopeId","data-v-cc3b3d08"]]);export{Fe as default};
