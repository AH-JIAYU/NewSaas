
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as rt,aD as st,r as _,l as ut,ab as fe,Z as ge,W as dt,n as ct,$ as ve,a as m,o as c,e as g,w as t,f as a,y as d,g as p,j as I,i as n,b as V,t as P,z as R,s as J,ao as K,F as j,A as $,b7 as mt,E as x,ap as Z,_ as pt,aH as ft,aI as gt,L as vt}from"./index-DblQ9bv_.js";import{u as yt}from"./user_customer-Cy9R7uwN.js";import{a as bt}from"./user_customer-Cn2_S8uF.js";import{f as ye}from"./file-B7qFtOJa.js";import{e as _t}from"./index-DlpX678-.js";import{g as It,a as ht}from"./zh_Hans-D6UzZbQM.js";import{z as Vt}from"./zh_Hans-B39mJ-rS.js";import{a as W}from"./projectManagement-BzVmr2Ch.js";import{u as Lt}from"./projectManagement_list-Cr0KSqMx.js";import Pt from"./index-BqWm9b3r.js";import{a as jt}from"./configuration_site_setting-Qx5Wg-wB.js";import"./index.vue_vue_type_script_setup_true_lang-eW2kEqb8.js";import"./index-Bn_WdWQ7.js";import"./index-C-yhvVF2.js";import"./index-C9mAI_fA.js";import"./index-ua5ETpJ7.js";import"./department-DGtbt5xG.js";import"./position_manage-D4Yht68i.js";import"./configuration_role-DjgaW6-t.js";import"./tenant_role-BB7Ubv9R.js";import"./configuration_manager-wcebkGtq.js";import"./configuration_siteSetting-Dvs2st6d.js";import"./apiLoading-bn_2S6uh.js";import"./stagedData-HblON5zR.js";const y=T=>(ft("data-v-0e2db09e"),T=T(),gt(),T),wt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},Ct=y(()=>d("div",{style:{height:"32px","line-height":"32px"}},"基础设置",-1)),xt={style:{float:"left"}},Tt={style:{float:"right",color:"#fb6868","font-size":"13px"}},Ut=y(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),kt={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},St=y(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Rt=y(()=>d("br",null,null,-1)),Qt=y(()=>d("div",{style:{"margin-top":"4px"}}," 若链接后缀不是[uid]，那可能无法校验通过呦~ ",-1)),Dt=y(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),qt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},Bt=y(()=>d("span",null,"描述配额",-1)),Et={key:0},At=y(()=>d("div",{class:"el-upload__text"},"上传",-1)),Nt={class:"el-upload__tip"},zt=["src"],Mt=y(()=>d("div",{class:"card-header"},"配置信息",-1)),$t=y(()=>d("div",{class:"card-header"},"安全信息",-1)),Ft=y(()=>d("div",null,[p("小时"),d("span",{class:"red"},"准入"),p("量")],-1)),Ot=y(()=>d("div",null,[p("小时"),d("span",{class:"blue"},"完成"),p("量")],-1)),Gt=y(()=>d("div",null,"开启：ip和随机id都可以重复",-1)),Ht=y(()=>d("div",null,"关闭：ip和随机id都不可以重复",-1)),Yt={class:"dialog-footer"},be="例：https://www.xxxx.com/8994343?uid=[uid]",Jt=rt({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},emits:["sync-project"],setup(T,{expose:_e,emit:Ie}){const X=st(),w=_(!1),he=[{label:"美元",value:"USD"},{label:"人民币",value:"CNY"}],Q=ut();yt();const Ve=Lt(),D=T,Le=Ie,e=_(D.leftTab),Pe=fe("validateTopTabs"),je=fe("currentProjectTimeline"),q=_("basicSettings"),B=_(),ee=_(),E=_(!D.tabIndex),we="https://saas-api.surveysaas.com/api/project/uploadQiniu";let b=_({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(i,l){const r=await Q.getB2BTypeItemChildren(i.data.id)||[];l(r)}}}});const Ce=ge({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属区域",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],currencyType:[{required:!0,message:"请选择币种",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(i,l,r)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e.value.uidUrl)||r(new Error("请输入合法网址")),e.value.uidUrl.includes("[uid]")||r(new Error("格式不正确,请查看例子")),r()},trigger:"blur"}],releaseTime:[{validator:(i,l,r)=>{new Date(e.value.releaseTime).getTime()<Date.now()&&r(new Error("发布时间早于当前时间")),r()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入项目价",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"}],ir:[{required:!0,message:"请输入配额",trigger:"blur"}]}),A=i=>{i.key==="."&&i.preventDefault()},xe=i=>i.getTime()<Date.now()-864e5;function Te(){if(new Date(e.value.releaseTime)*1e3/1e3<Date.now()){const r=new Date,f=r.getFullYear(),v=l(r.getMonth()+1),s=l(r.getDate()),u=l(r.getHours()),L=l(r.getMinutes()),C=l(r.getSeconds());e.value.releaseTime=`${f}-${v}-${s} ${u}:${L}:${C}`}function l(r){return(r<10?"0":"")+r}je(e.value.releaseTime)}const Ue=i=>{const l=b.value.basicSettings.customerList.find(r=>r.tenantCustomerId===i);e.value.isProfile=l.antecedentQuestionnaire===2?1:2},ke=()=>{e.value.countryIdList=[],b.value.checked&&b.value.basicSettings.countryList.map(i=>{e.value.countryIdList.push(i.id)})},Se=[It({locale:ht})];function Re(i){e.value.richText=i}function Qe(){Le("sync-project")}function De(){E.value=!E.value}const te=_(""),N=_(!1),U=_([]),ae=i=>{const l=i.name.substring(i.name.lastIndexOf(".")+1);return["jpg","jpeg","png","gif"].indexOf(l)===-1},qe=i=>{const l=ae(i);return l&&x.warning({message:"只能上传图片文件JPG，JPEG，PNG，GIF",center:!0}),!l},Be=async(i,l)=>{if(e.value.descriptionUrl=l.map(r=>r.name),!ae(i)){const{status:r}=await ye.delete({fileName:i.name});r===1&&x.success({message:"删除成功",center:!0})}},Ee=(i,l)=>{e.value.descriptionUrl.push(i.data.qiNiuUrl)},Ae=async(i,l)=>{x.warning({message:"最多可上传10个",center:!0})},Ne=i=>{te.value=i.url,N.value=!0},ze=async i=>{i.length&&i.forEach(async l=>{if(l){const r=await ye.detail({fileName:l});U.value.push({name:l,url:r.data.fileUrl})}})},Me=i=>{e.value.isOnline=i===2?2:1},$e=i=>{i===2&&(e.value.projectQuotaInfoList=[])},Fe=()=>{e.value.data.configurationInformation.configurationCountryList=null,b.value.checked=e.value.countryIdList.length===Q.country.length},Oe=()=>{e.value.data.configurationInformation.projectCategoryList=null,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId="",F()},F=i=>{e.value.data.configurationInformation.initialProblem.projectProblemId=null,e.value.data.configurationInformation.ProjectProblemInfoList=null,i||(e.value.projectQuotaInfoList=[])},le=async(i,l)=>{i==="configurationInformation"&&!e.value.data.configurationInformation.configurationCountryList&&B.value.validateField(["countryIdList"],async r=>{if(r){F(l||!1);const f=await W.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=f.data.getProjectCountryListInfoList,f.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=f.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=Z(Ve.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=Z(f.data.projectQuotaQuestionType)}else q.value="basicSettings",ve(()=>{setTimeout(()=>{B.value.scrollToField("countryIdList")}),x.warning({message:"请先选择所属区域",center:!0})})})},oe=async()=>{if(e.value.data.configurationInformation.initialProblem.countryId){if(!e.value.data.configurationInformation.projectCategoryList){const i={countryId:e.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},l=await W.getProjectCategoryList(i);e.value.data.configurationInformation.projectCategoryList=l.data.getProjectCategoryInfoList.filter(r=>r.status===1)}}else x.warning({message:"请先选择配置信息下的区域",center:!0})},ne=async(i,l)=>{i?setTimeout(async()=>{const{projectProblemCategoryName:r,...f}=e.value.data.configurationInformation.projectCategoryList.find(s=>s.projectProblemCategoryId===i),v=await W.getProjectProblemList(f);if(e.value.data.configurationInformation.ProjectProblemInfoList=v.data.getProjectProblemInfoList.map(s=>({...s,getProjectAnswerInfoList:s.getProjectAnswerInfoList.sort((u,L)=>u.answerValue.replace(/^[a-zA-Z]+/,"")-L.answerValue.replace(/^[a-zA-Z]+/,""))})),!l){e.value.projectQuotaInfoList=[];for(let s=0;s<e.value.data.configurationInformation.ProjectProblemInfoList.length;s++){const u=Z(e.value.data.configurationInformation.initialProblem);u.projectProblemId=e.value.data.configurationInformation.ProjectProblemInfoList[s].id,u.keyValue=e.value.data.configurationInformation.ProjectProblemInfoList[s].question,u.questionType=e.value.data.configurationInformation.ProjectProblemInfoList[s].questionType,u.projectProblemCategoryId=i,e.value.projectQuotaInfoList.push(u)}}}):F()},Ge=(i,l)=>{let r=e.value.projectQuotaInfoList[l].projectAnswerIdList;const v=e.value.data.configurationInformation.ProjectProblemInfoList[l].getProjectAnswerInfoList.filter(s=>r.includes(s.id));e.value.projectQuotaInfoList[l].answerValueList=v.map(s=>s.anotherName)},ie=async()=>{const i=await bt.getCustomerList({});b.value.basicSettings.customerList=i.data.getTenantCustomerAccordInfoList},re=()=>{ee.value.showEdit()},He=async()=>{await ie(),b.value.basicSettings.countryList=await Q.getCountry(),b.value.basicSettings.B2BTypeList=await Q.getB2BType()},Ye=async()=>{e.value.projectQuotaInfoList.length&&(e.value.data.configurationInformation.initialProblem.countryId=e.value.projectQuotaInfoList[0].countryId,e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=e.value.projectQuotaInfoList[0].projectQuotaQuestionType,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId=e.value.projectQuotaInfoList[0].projectProblemCategoryId,await le("configurationInformation",!0),await oe(),setTimeout(async()=>{await ne(e.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},se=(i,l)=>({get(){return e.value.projectQuotaInfoList[l].id===i?e.value.projectQuotaInfoList[l].projectAnswerIdList:e.value.projectQuotaInfoList.find(f=>f.projectProblemId===i).projectAnswerIdList},set(r){if(e.value.projectQuotaInfoList[l].id===i)e.value.projectQuotaInfoList[l].projectAnswerIdList=r;else{const f=e.value.projectQuotaInfoList.find(v=>v.projectProblemId===i);f.projectAnswerIdList=r}}}),ue=_(),z=_({exchangeRate:null}),Je=ge({exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入一个有效的数字，不能小于0，最多保留两位小数",trigger:"blur"}]}),Ke=()=>{w.value=!0},Ze=async()=>{await ue.value.validate(),(await jt.updateWebConfig(z.value)).data.flag&&(await X.getCurrencyType(),x.success({message:"修改成功",center:!0}),w.value=!1)};return dt(()=>D.leftTab,(i,l)=>{e.value=i},{deep:!0}),ct(async()=>{U.value=[],await He(),await Ye()}),_e({getUpLoad:ze}),ve(()=>{Pe(B.value)}),(i,l)=>{const r=m("el-button"),f=m("el-switch"),v=m("el-input"),s=m("el-form-item"),u=m("el-col"),L=m("el-option"),C=m("el-select"),de=m("el-checkbox"),ce=m("ElOption"),We=m("ElSelect"),h=m("el-row"),M=m("el-input-number"),O=pt,G=m("el-tooltip"),me=m("el-text"),k=m("el-card"),Xe=m("el-date-picker"),et=m("el-cascader"),tt=m("el-icon"),at=m("el-upload"),pe=m("el-dialog"),H=m("el-tab-pane"),lt=m("el-checkbox-group"),ot=m("el-tabs"),nt=m("el-form"),it=m("ElForm");return c(),g(it,{"label-width":"100px",rules:n(Ce),ref_key:"formRef",ref:B,model:n(e),"label-position":"top"},{default:t(()=>[a(ot,{modelValue:n(q),"onUpdate:modelValue":l[28]||(l[28]=o=>$(q)?q.value=o:null),onTabChange:le},{default:t(()=>[a(H,{label:"基础设置",name:"basicSettings"},{default:t(()=>[a(k,{"body-style":""},{header:t(()=>[d("div",wt,[Ct,d("div",null,[D.tabIndex>0?(c(),g(r,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:Qe},{default:t(()=>[p(" 同步数据 ")]),_:1})):I("",!0),a(f,{modelValue:n(e).required,"onUpdate:modelValue":l[0]||(l[0]=o=>n(e).required=o),"active-value":!0,"inactive-value":!1,class:"ml-2"},null,8,["modelValue"]),p(" 只看必填 ")])])]),default:t(()=>[a(h,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"项目名称",prop:"name"},{default:t(()=>[a(v,{modelValue:n(e).name,"onUpdate:modelValue":l[1]||(l[1]=o=>n(e).name=o),modelModifiers:{trim:!0},clearable:"",maxlength:50},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"项目标识",prop:"projectIdentification"},{default:t(()=>[a(v,{clearable:"",modelValue:n(e).projectIdentification,"onUpdate:modelValue":l[2]||(l[2]=o=>n(e).projectIdentification=o),modelModifiers:{trim:!0},maxlength:100},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"所属客户",prop:"clientId"},{default:t(()=>[a(C,{class:"placeholderColor",placeholder:"Select",modelValue:n(e).clientId,"onUpdate:modelValue":l[3]||(l[3]=o=>n(e).clientId=o),clearable:"",onChange:Ue},{empty:t(()=>[d("div",kt,[p(" 暂无数据 "),a(r,{type:"primary",link:"",size:"small",onClick:re},{default:t(()=>[p(" 快捷新增 "),St]),_:1})])]),default:t(()=>[(c(!0),V(j,null,P(n(b).basicSettings.customerList,o=>(c(),g(L,{key:o.tenantCustomerId,value:o.tenantCustomerId,label:o.customerAccord,disabled:o.isReveal===1||o.turnover&&o.practiceTurnover&&o.turnover<=o.practiceTurnover},{default:t(()=>[d("span",xt,R(o.customerAccord),1),J(d("span",Tt,[J(d("span",null," 营业额超限 ",512),[[K,o.practiceTurnover>o.turnover]]),J(d("span",null," 审核率不合格 ",512),[[K,o.rateAudit>o.practiceRateAudit]])],512),[[K,o.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128)),a(r,{size:"small",class:"buttonClass",onClick:re},{default:t(()=>[p(" 快捷新增 "),Ut]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"所属区域",prop:"countryIdList"},{default:t(()=>[a(We,{class:"placeholderColor",modelValue:n(e).countryIdList,"onUpdate:modelValue":l[5]||(l[5]=o=>n(e).countryIdList=o),placeholder:"区域",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:Fe},{header:t(()=>[a(de,{modelValue:n(b).checked,"onUpdate:modelValue":l[4]||(l[4]=o=>n(b).checked=o),onChange:ke,style:{display:"flex",height:"unset"}},{default:t(()=>[p("全球")]),_:1},8,["modelValue"])]),default:t(()=>[(c(!0),V(j,null,P(n(b).basicSettings.countryList,o=>(c(),g(ce,{label:o.chineseName,value:o.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"币种",prop:"currencyType"},{default:t(()=>[n(X).originalExchangeRate?(c(),g(C,{key:1,modelValue:n(e).currencyType,"onUpdate:modelValue":l[6]||(l[6]=o=>n(e).currencyType=o),disabled:!!n(e).projectId,"value-key":"",style:{width:"22.4375rem"},placeholder:"请选择币种",clearable:"",filterable:""},{default:t(()=>[(c(),V(j,null,P(he,o=>a(L,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])):(c(),g(r,{key:0,type:"primary",link:"",onClick:Ke},{default:t(()=>[p("未设置汇率，点击设置>>")]),_:1}))]),_:1})]),_:1})]),_:1}),a(h,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"项目价",prop:"doMoneyPrice"},{default:t(()=>[a(M,{style:{height:"2rem"},modelValue:n(e).doMoneyPrice,"onUpdate:modelValue":l[7]||(l[7]=o=>n(e).doMoneyPrice=o),min:1,precision:1,step:.1,"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"配额",prop:"num"},{default:t(()=>[a(M,{style:{height:"2rem"},modelValue:n(e).num,"onUpdate:modelValue":l[8]||(l[8]=o=>n(e).num=o),step:1,"step-strictly":"",min:1,max:100,"controls-position":"right",size:"large",onKeydown:A},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{style:{position:"relative"},span:6},{default:t(()=>[a(s,{prop:"minimumDuration"},{label:t(()=>[d("div",null,[p(" 最小分长"),a(G,{class:"tooltips",content:"该问卷最少要做多少分钟才被识别为合格",placement:"top"},{default:t(()=>[a(O,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(v,{style:{height:"2rem",width:"100%"},modelValue:n(e).minimumDuration,"onUpdate:modelValue":l[9]||(l[9]=o=>n(e).minimumDuration=o),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:A},{append:t(()=>[p(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"IR",prop:"ir"},{default:t(()=>[a(v,{modelValue:n(e).ir,"onUpdate:modelValue":l[10]||(l[10]=o=>n(e).ir=o),modelModifiers:{number:!0},min:1,max:100,step:"0.01",oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;value=Number(value).toFixed(1)"},{append:t(()=>[p(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(h,{gutter:20},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(s,{prop:"uidUrl"},{label:t(()=>[d("div",null,[p(" URL"),a(G,{class:"tooltips",placement:"top"},{content:t(()=>[d("div",null,[d("div",null,[p(" 请参考如下链接"),Rt,p(R(be))]),Qt])]),default:t(()=>[a(O,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(v,{clearable:"",modelValue:n(e).uidUrl,"onUpdate:modelValue":l[11]||(l[11]=o=>n(e).uidUrl=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(me,{class:"mx-1"},{default:t(()=>[p(R(be))]),_:1})]),_:1})]),_:1}),n(e).mutualExclusion===1&&!n(e).required?(c(),g(u,{key:0,span:12},{default:t(()=>[a(s,{label:"互斥ID"},{default:t(()=>[a(v,{clearable:"",modelValue:n(e).mutualExclusionId,"onUpdate:modelValue":l[12]||(l[12]=o=>n(e).mutualExclusionId=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1}),n(e).required?I("",!0):(c(),g(k,{key:0},{header:t(()=>[Dt]),default:t(()=>[a(h,{gutter:20},{default:t(()=>[a(u,{span:5},{default:t(()=>[a(s,{label:"定时发布",class:"flex"},{default:t(()=>[a(f,{"active-value":2,"inactive-value":1,modelValue:n(e).isTimeReleases,"onUpdate:modelValue":l[13]||(l[13]=o=>n(e).isTimeReleases=o),onChange:Me},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"B2B",class:"flex"},{default:t(()=>[a(f,{"active-value":2,"inactive-value":1,modelValue:n(e).isB2b,"onUpdate:modelValue":l[14]||(l[14]=o=>n(e).isB2b=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"在线",class:"flex"},{default:t(()=>[a(f,{"active-value":1,"inactive-value":2,disabled:n(e).isTimeReleases===2,modelValue:n(e).isOnline,"onUpdate:modelValue":l[15]||(l[15]=o=>n(e).isOnline=o)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"前置问卷",class:"flex"},{default:t(()=>[a(f,{"active-value":1,"inactive-value":2,modelValue:n(e).isProfile,"onUpdate:modelValue":l[16]||(l[16]=o=>n(e).isProfile=o),onChange:$e},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:4},{default:t(()=>[a(s,{label:"置顶",class:"flex"},{default:t(()=>[a(f,{"active-value":1,"inactive-value":2,modelValue:n(e).isPinned,"onUpdate:modelValue":l[17]||(l[17]=o=>n(e).isPinned=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(h,{gutter:20},{default:t(()=>[n(e).isTimeReleases===2?(c(),g(u,{key:0,span:5},{default:t(()=>[a(s,{label:"发布时间",prop:"releaseTime"},{default:t(()=>[a(Xe,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n(e).releaseTime,"onUpdate:modelValue":l[18]||(l[18]=o=>n(e).releaseTime=o),placeholder:"请选择时间",disabledDate:xe,onChange:Te},null,8,["modelValue"])]),_:1})]),_:1})):I("",!0),n(e).isB2b===2?(c(),g(u,{key:1,span:5},{default:t(()=>[a(s,{label:"项目类型"},{default:t(()=>[a(et,{"show-all-levels":!1,modelValue:n(e).projectType,"onUpdate:modelValue":l[19]||(l[19]=o=>n(e).projectType=o),props:n(b).basicSettings.B2BTypeProps,options:n(b).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):I("",!0)]),_:1}),a(h,null,{default:t(()=>[a(u,{span:24},{default:t(()=>[a(s,{label:"备注"},{default:t(()=>[a(v,{maxlength:"200","show-word-limit":"",type:"textarea",rows:5,modelValue:n(e).remark,"onUpdate:modelValue":l[20]||(l[20]=o=>n(e).remark=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),n(e).required?I("",!0):(c(),g(k,{key:1},{header:t(()=>[d("div",qt,[Bt,a(r,{type:"primary",link:"",size:"default",onClick:De},{default:t(()=>[p(R(n(E)?"收起":"展开"),1)]),_:1})])]),default:t(()=>[n(E)?(c(),V("div",Et,[a(s,{label:"上传图片"},{default:t(()=>[a(at,{"file-list":n(U),"onUpdate:fileList":l[21]||(l[21]=o=>$(U)?U.value=o:null),action:we,"list-type":"picture-card",drag:!0,limit:10,accept:".png, .jpg, .jpeg, .gif","before-upload":qe,"on-preview":Ne,"on-remove":Be,"on-success":Ee,"on-exceed":Ae},{tip:t(()=>[d("div",Nt,[a(me,{type:"primary",size:"small"},{default:t(()=>[p(" 支持上传JPG/JPEG/PNG图片，小于10MB ")]),_:1})])]),default:t(()=>[a(tt,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:t(()=>[a(n(mt))]),_:1}),At]),_:1},8,["file-list"]),a(pe,{modelValue:n(N),"onUpdate:modelValue":l[22]||(l[22]=o=>$(N)?N.value=o:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:t(()=>[d("img",{"w-full":"",src:n(te),alt:"Preview Image"},null,8,zt)]),_:1},8,["modelValue"])]),_:1}),a(h,{gutter:20},{default:t(()=>[a(u,{span:24},{default:t(()=>[a(s,{label:"项目描述"},{default:t(()=>[a(n(_t),{class:"editor",value:n(e).richText,plugins:Se,locale:n(Vt),onChange:Re},null,8,["value","locale"])]),_:1})]),_:1})]),_:1})])):I("",!0)]),_:1}))]),_:1}),n(e).isProfile===1&&!n(e).required?(c(),g(H,{key:0,label:"配置信息",name:"configurationInformation"},{default:t(()=>[n(e).data?(c(),g(k,{key:0},{header:t(()=>[Mt]),default:t(()=>[a(h,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"选择区域"},{default:t(()=>[a(C,{modelValue:n(e).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":l[23]||(l[23]=o=>n(e).data.configurationInformation.initialProblem.countryId=o),filterable:"",clearable:"",placeholder:"Select",onChange:Oe},{default:t(()=>[(c(!0),V(j,null,P(n(e).data.configurationInformation.configurationCountryList,o=>(c(),g(ce,{label:o.countryName,value:o.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"问卷名称"},{default:t(()=>[a(C,{modelValue:n(e).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":l[24]||(l[24]=o=>n(e).data.configurationInformation.initialProblem.projectProblemCategoryId=o),clearable:"",placeholder:"Select",onFocus:oe,onChange:ne},{default:t(()=>[(c(!0),V(j,null,P(n(e).data.configurationInformation.projectCategoryList,o=>(c(),g(L,{key:o.projectProblemCategoryId,label:o.projectProblemCategoryName,value:o.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(e).data.configurationInformation.ProjectProblemInfoList&&n(e).data.configurationInformation.ProjectProblemInfoList.length&&n(e).projectQuotaInfoList.length?(c(!0),V(j,{key:0},P(n(e).data.configurationInformation.ProjectProblemInfoList,(o,Y)=>(c(),g(h,{class:"allocation",gutter:20},{default:t(()=>[a(u,{span:20},{default:t(()=>[p(" 问题："+R(o.question),1)]),_:2},1024),a(u,{span:20},{default:t(()=>[a(s,null,{default:t(()=>[o.questionType===1?(c(),g(v,{key:0,disabled:"",placeholder:"输入框无法设置"})):(c(),g(lt,{key:1,modelValue:se(o.id,Y).get(),"onUpdate:modelValue":S=>se(o.id,Y).set(S),onChange:S=>Ge(3,Y)},{default:t(()=>[(c(!0),V(j,null,P(o.getProjectAnswerInfoList,S=>(c(),g(de,{label:S.anotherName,value:S.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):I("",!0)]),_:1})):I("",!0)]),_:1})):I("",!0),n(e).required?I("",!0):(c(),g(H,{key:1,label:"安全信息",name:"securityInformation"},{default:t(()=>[a(k,null,{header:t(()=>[$t]),default:t(()=>[a(h,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,null,{label:t(()=>[Ft]),default:t(()=>[a(M,{style:{height:"2rem"},modelValue:n(e).preNum,"onUpdate:modelValue":l[25]||(l[25]=o=>n(e).preNum=o),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:A},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:6},{default:t(()=>[a(s,null,{label:t(()=>[Ot]),default:t(()=>[a(M,{style:{height:"2rem"},modelValue:n(e).limitedQuantity,"onUpdate:modelValue":l[26]||(l[26]=o=>n(e).limitedQuantity=o),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:A},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:4,class:"flex"},{default:t(()=>[a(s,{label:"",class:"flex m-0"},{label:t(()=>[d("div",null,[p(" 允许重复参与"),a(G,{class:"tooltips",placement:"top"},{content:t(()=>[Gt,Ht]),default:t(()=>[a(O,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(f,{modelValue:n(e).ipDifferenceDetection,"onUpdate:modelValue":l[27]||(l[27]=o=>n(e).ipDifferenceDetection=o),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"]),a(pe,{modelValue:n(w),"onUpdate:modelValue":l[31]||(l[31]=o=>$(w)?w.value=o:null),title:"设置汇率",width:"500"},{footer:t(()=>[d("div",Yt,[a(r,{type:"primary",onClick:Ze},{default:t(()=>[p(" 确认 ")]),_:1}),a(r,{onClick:l[30]||(l[30]=o=>w.value=!1)},{default:t(()=>[p(" 关闭 ")]),_:1})])]),default:t(()=>[a(nt,{model:n(z),ref_key:"exchangeRateRef",ref:ue,rules:n(Je),"label-width":"90px",inline:!1},{default:t(()=>[a(s,{label:"美元汇率",prop:"exchangeRate"},{default:t(()=>[a(v,{modelValue:n(z).exchangeRate,"onUpdate:modelValue":l[29]||(l[29]=o=>n(z).exchangeRate=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(Pt,{ref_key:"editRef",ref:ee,onFetchData:ie},null,512)]),_:1},8,["rules","model"])}}}),Va=vt(Jt,[["__scopeId","data-v-0e2db09e"]]);export{Va as default};
