
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as je,aN as Ne,r,n as De,a as u,q as ze,o as c,b as Se,f as t,w as l,g as h,s as ce,e as d,i as p,aM as de,y as s,z as f,j as _,N as B,be as Le,b9 as xe,ba as Ee,_ as Ue,ap as Ve,aH as Te,aI as Re,L as $e}from"./index-DaCw3jny.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-C-neq0wc.js";import{_ as He}from"./index-BBRyW9gK.js";import{_ as Fe}from"./index.vue_vue_type_style_index_0_lang-C1ywGyD4.js";import{_ as Ae}from"./index-BgypLt56.js";import{_ as Pe}from"./index.vue_vue_type_script_setup_true_lang-FZ4m0fcv.js";import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-CqmePxo_.js";import qe from"./index-tvbHK2bE.js";import{a as Ge}from"./projectManagement_materials-Cns2lDV8.js";import"./index-Cc8CWEpq.js";import"./sortable.esm-C0-Qcoum.js";import"./file-B6LmX7mj.js";import"./download-C8PHVIy1.js";const Oe=S=>(Te("data-v-c144877c"),S=S(),Re(),S),Qe={class:"tableBig"},Je={class:"copyId tableSmall"},Ke={class:"id oneLine"},We={class:"tableBig"},Xe={class:"copyId tableSmall"},Ye={class:"id oneLine"},Ze={class:"flex-c tableBig"},et={class:"oneLine",style:{width:"calc(100% - 20px)"}},tt=Oe(()=>s("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),lt={class:"tableBig"},ot={class:"copyId tableSmall"},at={class:"id oneLine"},nt={class:"tableBig"},rt={class:"copyId tableSmall"},it={class:"id oneLine"},st={class:"flex-c tableBig"},ut={class:"oneLine",style:{width:"calc(100% - 20px)"}},ct=je({name:"materials",__name:"list",setup(S){const{format:H}=Le(),{getParams:pe,pagination:b,onSizeChange:me,onCurrentChange:fe}=Ne(),F=r(""),D=r(!1),I=r(!1),A=r(),P=r(),M=r(),z=r(!1),n=r([]),q=r(),_e=r("formSearch-materials"),k=r("default"),y=r(!1),G=r([]),v=r([{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}]),m=r({type:1,memberChildId:"",supplierId:"",projectId:"",projectName:""}),E=r([]),U=r();function be(a){a?U.value=a.projectId:U.value=""}const V=r();function he(a){a?V.value=a.projectId:V.value=""}function O(a){G.value.length||P.value.showEdit(a)}function Q(a){M.value.showEdit(a)}function J(a){A.value.showEdit(a)}function K(a){G.value=a}function W(a){me(a).then(()=>g())}function w(a=1){fe(a).then(()=>g())}function X(){Object.assign(m.value,{memberChildId:"",supplierId:"",projectId:"",projectName:""}),g()}async function g(){try{D.value=!0;const a={...pe(),...m.value},o=await Ge.list(a);E.value=o.data.projectMaterialInfoList,b.value.total=o.data.total,D.value=!1}catch{}finally{D.value=!1}}const ve=()=>{m.value.type===1?(n.value=[],v.value=[{label:"会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g()):(n.value=[],v.value=[{label:"子会员ID",prop:"memberChildId",sotrtable:!0,checked:!0},{label:"子会员名称",prop:"memberChildName",sotrtable:!0,checked:!0},{label:"子会员组ID",prop:"memberChildGroupId",sotrtable:!0,checked:!0},{label:"项目ID",prop:"projectId",sotrtable:!0,checked:!0},{label:"项目名称",prop:"projectName",sotrtable:!0,checked:!0},{label:"说明",prop:"instructions",sotrtable:!0,checked:!0},{label:"创建时间",prop:"createTime",sotrtable:!0,checked:!0}],v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g())};return De(()=>{v.value.forEach(a=>{a.checked&&n.value.push(a.prop)}),g(),q.value=[{index:1,show:!0,type:"input",modelName:"memberChildId",placeholder:"会员ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"}]}),(a,o)=>{const ge=Ae,Y=u("ElDivider"),Z=Fe,j=u("el-button"),ee=xe,te=Ee,le=u("el-row"),i=u("el-table-column"),L=He,oe=u("el-tag"),x=Ue,ae=u("ElSpace"),ne=u("el-empty"),re=u("el-table"),ie=u("ElPagination"),se=u("el-tab-pane"),T=u("el-input"),R=u("el-form-item"),$=u("ElButton"),Ce=u("ElFormItem"),Ie=u("el-form"),ke=Be,ye=u("el-tabs"),we=Ve,ue=ze("loading");return c(),Se("div",{class:B({"absolute-container":z.value})},[t(we,null,{default:l(()=>[t(ye,{modelValue:m.value.type,"onUpdate:modelValue":o[18]||(o[18]=e=>m.value.type=e),onTabChange:ve},{default:l(()=>[t(se,{label:"会员素材",name:1},{default:l(()=>[t(ge,{formSearchList:q.value,formSearchName:_e.value,onCurrentChange:w,onOnReset:X,model:m.value},null,8,["formSearchList","formSearchName","model"]),t(Y,{"border-style":"dashed"}),t(le,{gutter:24},{default:l(()=>[t(Z),t(te,null,{default:l(()=>[t(j,{size:"default",onClick:o[0]||(o[0]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(ee,{border:I.value,"onUpdate:border":o[1]||(o[1]=e=>I.value=e),tableAutoHeight:z.value,"onUpdate:tableAutoHeight":o[2]||(o[2]=e=>z.value=e),checkList:n.value,"onUpdate:checkList":o[3]||(o[3]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[4]||(o[4]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[5]||(o[5]=e=>k.value=e),stripe:y.value,"onUpdate:stripe":o[6]||(o[6]=e=>y.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((c(),d(re,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:E.value,border:I.value,size:k.value,stripe:y.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:be},{empty:l(()=>[t(ne,{image:p(de),"image-size":300},null,8,["image"])]),default:l(()=>[t(i,{align:"left",type:"selection"}),n.value.includes("memberChildName")?(c(),d(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"会员名称"},{default:l(({row:e})=>[s("div",Qe,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("memberChildId")?(c(),d(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"会员ID"},{default:l(({row:e})=>[s("div",Je,[s("div",Ke,"ID: "+f(e.memberChildId),1),t(L,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("projectName")?(c(),d(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[s("div",We,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(c(),d(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[s("div",Xe,[s("div",Ye,"ID: "+f(e.projectId),1),t(L,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("createTime")?(c(),d(i,{key:4,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(oe,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(H)(e.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),n.value.includes("instructions")?(c(),d(i,{key:5,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[s("div",Ze,[s("div",et,f(e.instructions?e.instructions:"-"),1),t(x,{onClick:C=>Q(e),class:B({edit:"edit",current:e.projectId===U.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ae,null,{default:l(()=>[t(j,{type:"primary",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"]),t(j,{type:"danger",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ue,D.value]]),t(ie,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(se,{label:"子会员素材",name:2},{default:l(()=>[t(ke,{"show-toggle":!1},{default:l(({fold:e,toggle:C})=>[t(Ie,{model:m.value.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(R,{label:""},{default:l(()=>[t(T,{modelValue:m.value.memberChildId,"onUpdate:modelValue":o[7]||(o[7]=N=>m.value.memberChildId=N),clearable:"",placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),t(R,{label:""},{default:l(()=>[t(T,{modelValue:m.value.projectId,"onUpdate:modelValue":o[8]||(o[8]=N=>m.value.projectId=N),clearable:"",placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),t(R,{label:""},{default:l(()=>[t(T,{modelValue:m.value.projectName,"onUpdate:modelValue":o[9]||(o[9]=N=>m.value.projectName=N),clearable:"",placeholder:"项目名称"},null,8,["modelValue"])]),_:1}),t(Ce,null,{default:l(()=>[t($,{type:"primary",onClick:o[10]||(o[10]=N=>w())},{icon:l(()=>[t(x,{name:"i-ep:search"})]),default:l(()=>[h(" 筛选 ")]),_:1}),t($,{onClick:X},{icon:l(()=>[tt]),default:l(()=>[h(" 重置 ")]),_:1}),t($,{link:"",onClick:C,disabled:""},{icon:l(()=>[t(x,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[h(" "+f(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(Y,{"border-style":"dashed"}),t(le,{gutter:24},{default:l(()=>[t(Z),t(te,null,{default:l(()=>[t(j,{size:"default",onClick:o[11]||(o[11]=()=>{})},{default:l(()=>[h(" 导出 ")]),_:1}),t(ee,{border:I.value,"onUpdate:border":o[12]||(o[12]=e=>I.value=e),tableAutoHeight:z.value,"onUpdate:tableAutoHeight":o[13]||(o[13]=e=>z.value=e),checkList:n.value,"onUpdate:checkList":o[14]||(o[14]=e=>n.value=e),columns:v.value,"onUpdate:columns":o[15]||(o[15]=e=>v.value=e),"line-height":k.value,"onUpdate:lineHeight":o[16]||(o[16]=e=>k.value=e),stripe:y.value,"onUpdate:stripe":o[17]||(o[17]=e=>y.value=e),style:{"margin-left":"12px"},onQueryData:w},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),ce((c(),d(re,{ref_key:"tableSortRef",ref:F,style:{"margin-top":"10px"},"row-key":"id",data:E.value,border:I.value,size:k.value,stripe:y.value,onSelectionChange:K,"highlight-current-row":"",onCurrentChange:he},{empty:l(()=>[t(ne,{image:p(de),"image-size":300},null,8,["image"])]),default:l(()=>[t(i,{type:"selection"}),n.value.includes("memberChildName")?(c(),d(i,{key:0,"show-overflow-tooltip":"",prop:"memberChildName",align:"left",label:"子会员名称"},{default:l(({row:e})=>[s("div",lt,f(e.memberChildName),1)]),_:1})):_("",!0),n.value.includes("memberChildId")?(c(),d(i,{key:1,"show-overflow-tooltip":"",prop:"memberChildId",align:"left",label:"子会员ID"},{default:l(({row:e})=>[s("div",ot,[s("div",at,"ID: "+f(e.memberChildId),1),t(L,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("projectName")?(c(),d(i,{key:2,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:"项目名称"},{default:l(({row:e})=>[s("div",nt,f(e.projectName),1)]),_:1})):_("",!0),n.value.includes("projectId")?(c(),d(i,{key:3,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:"项目ID"},{default:l(({row:e})=>[s("div",rt,[s("div",it,"ID: "+f(e.projectId),1),t(L,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):_("",!0),n.value.includes("customerIdentification")?(c(),d(i,{key:4,"show-overflow-tooltip":"",prop:"customerIdentification",align:"left",label:"客户简称/标识"})):_("",!0),n.value.includes("createTime")?(c(),d(i,{key:5,"show-overflow-tooltip":"",prop:"createTime",align:"left",label:"创建"},{default:l(({row:e})=>[t(oe,{effect:"plain",type:"info"},{default:l(()=>[h(f(p(H)(e.createTime)),1)]),_:2},1024)]),_:1})):_("",!0),n.value.includes("instructions")?(c(),d(i,{key:6,"show-overflow-tooltip":"",prop:"instructions",align:"left",label:"说明"},{default:l(({row:e})=>[s("div",st,[s("div",ut,f(e.instructions?e.instructions:"-"),1),t(x,{onClick:C=>Q(e),class:B({edit:"edit",current:e.projectId===V.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])])]),_:1})):_("",!0),t(i,{align:"left",fixed:"right",label:"操作",width:"240"},{default:l(({row:e})=>[t(ae,null,{default:l(()=>[t(j,{type:"primary",plain:"",size:"small",onClick:C=>O(e)},{default:l(()=>[h(" 查看 ")]),_:2},1032,["onClick"]),t(j,{type:"danger",plain:"",size:"small",onClick:C=>J(e)},{default:l(()=>[h(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","border","size","stripe"])),[[ue,D.value]]),t(ie,{"current-page":p(b).page,total:p(b).total,"page-size":p(b).size,"page-sizes":p(b).sizes,layout:p(b).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:W,onCurrentChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})]),_:1},8,["modelValue"]),t(Pe,{ref_key:"deleteRef",ref:A},null,512),t(Me,{ref_key:"detailsRef",ref:P,onFetchData:g},null,512),t(qe,{ref_key:"editsRef",ref:M,onFetchData:g},null,512)]),_:1})],2)}}}),wt=$e(ct,[["__scopeId","data-v-c144877c"]]);export{wt as default};
