
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as V}from"./index-CUmVAZCa.js";import{a as w}from"./user_cooperation-Bkg25Pda.js";import{d as x,r as f,n as I,a as h,o as n,b as l,f as r,w as m,v as u,g as c,i as a,A as i,F as y,t as v,j as b,B as D,M as C}from"./index-puGejJ6c.js";import"./index-SAQW-vwF.js";import"./clipboard-H53ocpNK.js";const B={style:{height:"21.875rem",overflow:"auto"}},E={key:0,class:"idList"},j={key:1,class:"idList"},z={key:2,class:"idList"},A={style:{flex:"auto"}},F=x({name:"AllocationEdit",__name:"index",emits:["fetch-data"],setup(q,{expose:N,emit:H}){const L=f(!1),_=f(!1);f();const e=f({list:[],type:"",typeList:["自动分配","供应商","会员组","合作商"],supplierList:[],memberList:[],tenantList:[],results:[]}),M=async p=>{const{data:o}=await w.getTenantSupplierMemberNameInfo(p);return o},S=async p=>{e.value.supplierList=[],e.value.memberList=[],e.value.tenantList=[];for(let o of p.type){const d=await M({projectId:p.projectId,type:o});e.value.results.push({type:o,getTenantSupplierMemberNameList:d.getTenantSupplierMemberNameList}),e.value.results.forEach(s=>{s.type==2&&(e.value.supplierList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[]),s.type==3&&(e.value.memberList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[]),s.type==4&&(e.value.tenantList=s.getTenantSupplierMemberNameList?s.getTenantSupplierMemberNameList:[])})}};async function T(p){try{L.value=!0,S(p),L.value=!1,_.value=!0}catch{}finally{L.value=!1}}function g(){_.value=!1}return I(async()=>{}),N({showEdit:T}),(p,o)=>{const d=h("el-button"),s=V,k=h("el-dialog");return n(),l("div",null,[r(k,{modelValue:a(_),"onUpdate:modelValue":o[0]||(o[0]=t=>D(_)?_.value=t:null),title:"分配",width:"700","before-close":g},{footer:m(()=>[u("div",A,[r(d,{onClick:g},{default:m(()=>[c(" 关闭 ")]),_:1})])]),default:m(()=>[u("div",B,[a(e).supplierList.length!=0?(n(),l("div",E,[r(d,{size:"small",type:"danger"},{default:m(()=>[c("供应商 "+i(a(e).supplierList>1?a(e).supplierList:""),1)]),_:1}),(n(!0),l(y,null,v(a(e).supplierList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):b("",!0),a(e).memberList.length!=0?(n(),l("div",j,[r(d,{size:"small",type:"success"},{default:m(()=>[c("内部站 "+i(a(e).memberList>1?a(e).memberList:""),1)]),_:1}),(n(!0),l(y,null,v(a(e).memberList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):b("",!0),a(e).tenantList.length!=0?(n(),l("div",z,[r(d,{size:"small",type:"primary"},{default:m(()=>[c("合作商 "+i(a(e).tenantList>1?a(e).tenantList:""),1)]),_:1}),(n(!0),l(y,null,v(a(e).tenantList,t=>(n(),l("div",{class:"item",key:t.id},[u("b",null,i(t.name),1),c("   "),u("span",null,"ID: "+i(t.id),1),r(s,{content:t.id},null,8,["content"])]))),128))])):b("",!0)])]),_:1},8,["modelValue"])])}}}),O=C(F,[["__scopeId","data-v-cec51b18"]]);export{O as default};
