
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-D6wc9mQ_.js";import{s as L,ae as V,d as O,r as j,a as y,o as _,b as f,f as s,w as n,p as t,g as a,F as P,q as E,Q,i,D as o,j as T,G as w,aJ as G,aK as $,P as D}from"./index-BgFpqt2S.js";const M={list:r=>L.post("tenantBind/getProjectAllocationList",r),getTenantMeasurementList:r=>L.post("tenantBind/getTenantMeasurementList",r),getQuestionnaireClickList:r=>L.post("tenantBind/getQuestionnaireClickList",r)},q=V("projectManagementOutsource",()=>({projectStatusList:["进行中(在线)","已完成(审核通过)","离线"],typeList:["租户","供应商","会员组"]})),F=q,k=r=>(G("data-v-7ecc2b9a"),r=r(),$(),r),A={class:"milestone"},H={class:"left"},J={class:"left-top-left p-4"},K={class:"project"},R={class:"projectName flex-b"},U={class:"projectId"},W={class:"price flex-b"},X={key:0,class:"left-top-right p-4"},Y={class:"type"},Z={class:"tenant"},ee={key:0,class:"left-bottom"},te=k(()=>t("div",{class:"line"},null,-1)),ne={class:"allocation"},ae=k(()=>t("div",{class:"arrow"},null,-1)),se={key:0,class:"right"},oe={style:{flex:"auto"}},re=O({name:"Edit",__name:"index",setup(r,{expose:h}){const g=F(),m=j(!1),d=j({initialTenantCurrencyType:"",currentTenantId:"",tenantMeasurementInfoList:[]});async function S(l){const p={linkId:l.linkId,projectId:l.projectId},c=await M.getTenantMeasurementList(p);d.value.initialTenantCurrencyType=c.data.tenantMeasurementInfoList[0].currencyType;const u=c.data.tenantMeasurementInfoList.findIndex(I=>I.allocationTenantId===c.data.currentTenantId);c.data.tenantMeasurementInfoList.splice(0,u),d.value.currentTenantId=c.data.currentTenantId,d.value.tenantMeasurementInfoList=c.data.tenantMeasurementInfoList,m.value=!0}async function x(l){const p={type:l.type,projectId:l.projectId,tenantId:l.tenantId,supplierId:l.type===2?l.memberGroupOrSupperId:"",memberGroupId:l.type===2?l.memberGroupId:""},c=await M.getQuestionnaireClickList(p);console.log("res",c.data.questionnaireClickInfoListz)}function v(){m.value=!1}function C(){v()}return h({showEdit:S}),(l,p)=>{const c=B,u=y("el-text"),I=y("el-button"),z=y("el-popover"),N=y("el-drawer");return _(),f("div",null,[s(N,{modelValue:i(m),"onUpdate:modelValue":p[0]||(p[0]=e=>w(m)?m.value=e:null),title:"项目测查",size:"60%","before-close":v},{footer:n(()=>[t("div",oe,[s(I,{onClick:v},{default:n(()=>[a(" 取消 ")]),_:1}),s(I,{type:"primary",onClick:C},{default:n(()=>[a(" 确定 ")]),_:1})])]),default:n(()=>[t("div",A,[(_(!0),f(P,null,E(i(d).tenantMeasurementInfoList,(e,b)=>(_(),f("div",{class:"item",key:e.allocationTenantId},[t("div",H,[t("div",{class:Q({"left-top":!0,"flex-b":!0,currentTenant:e.allocationTenantId===i(d).currentTenantId&&e.type===1})},[t("div",J,[t("div",K,[t("div",R,[t("b",null,o(e.projectName),1),t("span",null,o(i(g).projectStatusList[e.projectStatus-1]),1)]),t("div",U,o(e.projectId),1)]),t("div",W,[t("p",null,[a(" 原价： "),s(c),a(" "+o(e.doMoneyPrice),1)]),t("p",null,[a(" 参数： "),s(u,{size:"large"},{default:n(()=>[a(o(e.participationNumber||0),1)]),_:2},1024),s(u,{size:"large"},{default:n(()=>[a(" / ")]),_:1}),s(u,{type:"success",size:"large"},{default:n(()=>[a(o(e.doneNumber||0),1)]),_:2},1024),s(u,{size:"large"},{default:n(()=>[a(" / ")]),_:1}),s(u,{type:"warning",size:"large"},{default:n(()=>[a(o(e.num||0),1)]),_:2},1024),s(u,{size:"large"},{default:n(()=>[a(" / ")]),_:1}),s(u,{size:"large"},{default:n(()=>[a(o(e.limitedQuantity||0),1)]),_:2},1024)])])]),e.allocationTenantId!==i(d).currentTenantId||e.type!==1?(_(),f("div",X,[t("p",Y,o(i(g).typeList[e.type-1]),1),t("div",Z,[t("p",null,o(e.tenantName),1),t("p",null,o(e.allocationTenantId),1)])])):T("",!0)],2),i(d).tenantMeasurementInfoList.length!==b+1?(_(),f("div",ee,[te,t("div",ne,o(e.tenantName)+"-分配-"+o(i(g).typeList[i(d).tenantMeasurementInfoList[b+1].type-1]),1),ae])):T("",!0)]),e.allocationTenantId!==i(d).currentTenantId||e.type!=1?(_(),f("div",se,[s(z,{placement:"right",width:300,trigger:"click",onBeforeEnter:ce=>x(e)},{reference:n(()=>[s(I,{style:{padding:"0.5rem"},type:"primary",link:""},{default:n(()=>[a(" 》 ")]),_:1})]),default:n(()=>[a(" 1111 ")]),_:2},1032,["onBeforeEnter"])])):T("",!0)]))),128))])]),_:1},8,["modelValue"])])}}}),le=D(re,[["__scopeId","data-v-7ecc2b9a"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{M as a,le as e,ue as i,F as u};
