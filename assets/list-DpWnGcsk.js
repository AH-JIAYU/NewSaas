
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as be,r as n,aO as he,a5 as ke,l as ye,b as s,q as Ce,s as P,o as u,e as O,g as e,w as a,az as Q,F as we,v as Se,h as v,H as h,f as g,j as b,aN as Ee,t as d,k,S as A,N as ze,aQ as De,aR as Ie,ap as Ve,aI as xe,aJ as Le,R as Re}from"./index-BOglyGfo.js";import{_ as $e}from"./index-SzktXZdL.js";import{_ as Be}from"./index.vue_vue_type_style_index_0_lang-BYJHJh86.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-BxwVvGYK.js";import{_ as Fe}from"./index.vue_vue_type_script_setup_true_lang-DG1wWGkz.js";import He from"./index-7rvIp-xw.js";import{u as Ne}from"./user_customer-CrYO10im.js";import{a as Pe}from"./position_manage-DLGCcphm.js";import"./index-BKL_UtdK.js";import"./user_customer-C9h4np4x.js";const Oe=y=>(xe("data-v-d985ce0f"),y=y(),Le(),y),Qe=Oe(()=>d("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ae={class:"copyId tableSmall"},je={class:"id oneLine"},qe={class:"tableBig"},Ke={class:"tableBig"},Te={class:"flex-s"},Je={class:"oneLine tableBig",style:{width:"calc(100% - 20px)"}},Me=be({name:"position_manage",__name:"list",setup(y){const j=Ne(),q=n([]),{pagination:p,onSizeChange:K,onCurrentChange:T,onSortChange:Ge}=he(),J=n(""),U=n([]),C=n(!0),w=n(),S=n(!1),c=n([]),E=n(!1);n(!1);const z=n("default"),F=n(),D=n(),I=n(!1),M=n([]),G=[{lable:"启用",value:1},{lable:"禁用",value:2}],V=n([{label:"职位ID",prop:"id",sortable:!0,disableCheck:!1,checked:!0},{label:"职位名称",prop:"name",sortable:!0,disableCheck:!1,checked:!0},{label:"账户数",prop:"count",sortable:!0,disableCheck:!1,checked:!0},{label:"备注",prop:"remark",sortable:!0,disableCheck:!1,checked:!0}]),r=ke({page:1,limit:10,id:null,name:"",active:null});function W(){w.value.showEdit()}function X(o){w.value.showEdit(JSON.stringify(o))}function Y(o){o?D.value=o.id:D.value=""}function Z(o,t){F.value.showEdit(o,t)}function ee(o){M.value=o}function te(){Object.assign(r,{page:1,limit:10,id:null,name:"",active:null}),f()}function le(o){K(o).then(()=>{r.limit=o,f()})}function m(o=1){T(o).then(()=>{r.page=o,f()})}async function f(){try{C.value=!0,q.value=await j.getCustomerList();const{data:o}=await Pe.list(r);U.value=o.data,p.value.total=parseInt(o.total)||0,C.value=!1}catch{}finally{C.value=!1}}return ye(()=>{V.value.forEach(o=>{o.checked&&c.value.push(o.prop)}),f()}),(o,t)=>{const H=s("el-input"),x=s("el-form-item"),ae=s("ElOption"),oe=s("el-select"),L=ze,R=s("ElButton"),ne=s("ElFormItem"),se=s("el-form"),ie=Ue,re=s("ElDivider"),$=s("el-button"),ue=Be,ce=De,de=Ie,pe=s("el-row"),_=s("el-table-column"),me=$e,fe=s("el-empty"),_e=s("el-table"),ve=s("ElPagination"),ge=Ve,N=Ce("loading");return P((u(),O("div",{class:A({"absolute-container":S.value})},[e(ge,null,{default:a(()=>[e(ie,{"show-toggle":!1},{default:a(({fold:l,toggle:B})=>[e(se,{model:r.select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[e(x,{label:""},{default:a(()=>[e(H,{modelValue:r.id,"onUpdate:modelValue":t[0]||(t[0]=i=>r.id=i),placeholder:"职位ID",clearable:"",onKeydown:t[1]||(t[1]=Q(i=>m(),["enter"]))},null,8,["modelValue"])]),_:1}),e(x,{label:""},{default:a(()=>[e(H,{modelValue:r.name,"onUpdate:modelValue":t[2]||(t[2]=i=>r.name=i),placeholder:"职位名称",clearable:"",onKeydown:t[3]||(t[3]=Q(i=>m(),["enter"]))},null,8,["modelValue"])]),_:1}),e(x,{label:""},{default:a(()=>[e(oe,{modelValue:r.active,"onUpdate:modelValue":t[4]||(t[4]=i=>r.active=i),placeholder:"状态",clearable:"",filterable:"",onChange:t[5]||(t[5]=i=>m())},{default:a(()=>[(u(),O(we,null,Se(G,i=>e(ae,{label:i.lable,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(ne,null,{default:a(()=>[e(R,{type:"primary",onClick:t[6]||(t[6]=i=>m())},{icon:a(()=>[e(L,{name:"i-ep:search"})]),default:a(()=>[v(" 筛选 ")]),_:1}),e(R,{onClick:te},{icon:a(()=>[Qe]),default:a(()=>[v(" 重置 ")]),_:1}),e(R,{disabled:"",link:"",onClick:B},{icon:a(()=>[e(L,{name:l?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[v(" "+h(l?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(re,{"border-style":"dashed"}),e(pe,{gutter:24},{default:a(()=>[e(ue,null,{default:a(()=>[e($,{style:{"margin-right":"10px"},type:"primary",size:"default",onClick:W},{default:a(()=>[v(" 新增职位 ")]),_:1})]),_:1}),e(de,null,{default:a(()=>[e($,{size:"default",onClick:t[7]||(t[7]=()=>{})},{default:a(()=>[v(" 导出 ")]),_:1}),e(ce,{border:E.value,"onUpdate:border":t[8]||(t[8]=l=>E.value=l),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":t[9]||(t[9]=l=>S.value=l),checkList:c.value,"onUpdate:checkList":t[10]||(t[10]=l=>c.value=l),columns:V.value,"onUpdate:columns":t[11]||(t[11]=l=>V.value=l),"line-height":z.value,"onUpdate:lineHeight":t[12]||(t[12]=l=>z.value=l),stripe:I.value,"onUpdate:stripe":t[13]||(t[13]=l=>I.value=l),style:{"margin-left":"12px"},onQueryData:m},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),P((u(),g(_e,{ref_key:"tableSortRef",ref:J,style:{"margin-top":"10px"},"row-key":"id",data:U.value,border:E.value,size:z.value,stripe:I.value,onSelectionChange:ee,"highlight-current-row":"",onCurrentChange:Y},{empty:a(()=>[e(fe,{image:b(Ee),"image-size":300},null,8,["image"])]),default:a(()=>[e(_,{align:"center",type:"selection"}),c.value.includes("id")?(u(),g(_,{key:0,prop:"id","show-overflow-tooltip":"",align:"center",label:"职位ID"},{default:a(({row:l})=>[d("div",Ae,[d("div",je,"ID: "+h(l.id),1),e(me,{class:"copy",content:l.id},null,8,["content"])])]),_:1})):k("",!0),c.value.includes("name")?(u(),g(_,{key:1,prop:"name","show-overflow-tooltip":"",align:"center",label:"职位名称"},{default:a(({row:l})=>[d("div",qe,h(l.name),1)]),_:1})):k("",!0),c.value.includes("count")?(u(),g(_,{key:2,prop:"count","show-overflow-tooltip":"",align:"center",label:"账户数"},{default:a(({row:l})=>[d("div",Ke,h(l.count?l.count:"-"),1)]),_:1})):k("",!0),c.value.includes("remark")?(u(),g(_,{key:3,prop:"remark","show-overflow-tooltip":"",align:"center",label:"备注"},{default:a(({row:l})=>[d("div",Te,[d("div",Je,h(l.remark?l.remark:"-"),1),l.projectType!==2?(u(),g(L,{key:0,onClick:B=>Z(l,"remark"),class:A({edit:"edit",current:l.id===D.value}),name:"i-ep:edit",color:"#409eff"},null,8,["onClick","class"])):k("",!0)])]),_:1})):k("",!0),e(_,{align:"center",fixed:"right",label:"操作",width:"170"},{default:a(({row:l})=>[e($,{size:"small",plain:"",type:"primary",onClick:B=>X(l)},{default:a(()=>[v(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","border","size","stripe"])),[[N,!1]]),e(ve,{"current-page":b(p).page,total:b(p).total,"page-size":b(p).size,"page-sizes":b(p).sizes,layout:b(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:m,onSizeChange:le},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Fe,{onSuccess:f,ref_key:"editRef",ref:w},null,512),e(He,{ref_key:"QuickEditRef",ref:F,onFetchData:f},null,512)]),_:1})],2)),[[N,C.value]])}}}),st=Re(Me,[["__scopeId","data-v-d985ce0f"]]);export{st as default};
