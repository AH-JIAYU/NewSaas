
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Ze,l as Xe,r as h,$ as ue,a3 as We,X as et,n as tt,a4 as de,a as m,o as c,e as g,w as t,f as a,y as d,g as f,j as y,i as n,b as L,t as j,z as k,s as G,aq as H,F as V,A as Y,bg as at,E as S,an as J,_ as ot,aH as lt,aI as nt,L as it}from"./index-BjkRYaBU.js";import{u as rt}from"./user_customer-ClbdRGJN.js";import{c as st}from"./user_customer-DSnuYZDh.js";import{f as ce}from"./file-DBTLZcSc.js";import{e as ut}from"./index-CLHnuY6c.js";import{g as dt,a as ct}from"./zh_Hans-aTFtiRRj.js";import{z as mt}from"./zh_Hans-B39mJ-rS.js";import{a as K}from"./projectManagement-ze6KLJno.js";import{u as pt}from"./projectManagement_list-Zi7xr99M.js";import{_ as ft}from"./index.vue_vue_type_script_setup_true_lang-jx-iQldn.js";import"./index.vue_vue_type_script_setup_true_lang-Bv7Q0Bm-.js";import"./index-C2nOyFon.js";import"./index-DnHWBa9y.js";import"./index-CSqeav8D.js";import"./index-DNuTaRZr.js";import"./department-D8EKnQHe.js";import"./position_manage-laCzxXQ7.js";import"./configuration_role-5QUG7EOh.js";import"./tenant_role-Cm15ElhW.js";import"./configuration_manager-DXqptXWQ.js";import"./configuration_siteSetting-BO-X2ahR.js";import"./configuration_site_setting-qkrM9cx1.js";import"./apiLoading-B9IwO-HT.js";import"./stagedData-6HYS9cb_.js";const _=w=>(lt("data-v-82f72020"),w=w(),nt(),w),gt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},vt=_(()=>d("div",{style:{height:"32px","line-height":"32px"}},"基础设置",-1)),_t={style:{float:"left"}},bt={style:{float:"right",color:"#fb6868","font-size":"13px"}},yt=_(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),It={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},ht=_(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Lt=_(()=>d("br",null,null,-1)),Pt=_(()=>d("div",{style:{"margin-top":"4px"}}," 若链接后缀不是[uid]，那可能无法校验通过呦~ ",-1)),jt=_(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),Vt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},wt=_(()=>d("span",null,"描述配额",-1)),Ct={key:0},Tt=_(()=>d("div",{class:"el-upload__text"},"上传",-1)),xt={class:"el-upload__tip"},Ut=["src"],kt=_(()=>d("div",{class:"card-header"},"配置信息",-1)),St=_(()=>d("div",{class:"card-header"},"安全信息",-1)),Qt=_(()=>d("div",null,[f("小时"),d("span",{class:"red"},"准入"),f("量")],-1)),Dt=_(()=>d("div",null,[f("小时"),d("span",{class:"blue"},"完成"),f("量")],-1)),qt=_(()=>d("div",null,"开启：ip和随机id都可以重复",-1)),At=_(()=>d("div",null,"关闭：ip和随机id都不可以重复",-1)),me="例：https://www.xxxx.com/8994343?uid=[uid]",Bt=Ze({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},emits:["sync-project"],setup(w,{expose:pe,emit:fe}){const Q=Xe();rt();const ge=pt(),D=w,ve=fe,e=h(D.leftTab),_e=ue("validateTopTabs"),be=ue("currentProjectTimeline"),q=h("basicSettings"),A=h(),Z=h(),B=h(!D.tabIndex),ye="https://saas-api.surveysaas.com/api/project/uploadQiniu";let b=h({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(i,o){const r=await Q.getB2BTypeItemChildren(i.data.id)||[];o(r)}}}});const Ie=We({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属区域",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(i,o,r)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e.value.uidUrl)||r(new Error("请输入合法网址")),e.value.uidUrl.includes("[uid]")||r(new Error("格式不正确,请查看例子")),r()},trigger:"blur"}],releaseTime:[{validator:(i,o,r)=>{new Date(e.value.releaseTime).getTime()<Date.now()&&r(new Error("发布时间早于当前时间")),r()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入项目价",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"}],ir:[{required:!0,message:"请输入配额",trigger:"blur"}]}),E=i=>{i.key==="."&&i.preventDefault()},he=i=>i.getTime()<Date.now()-864e5;function Le(){if(new Date(e.value.releaseTime)*1e3/1e3<Date.now()){const r=new Date,p=r.getFullYear(),v=o(r.getMonth()+1),s=o(r.getDate()),u=o(r.getHours()),P=o(r.getMinutes()),T=o(r.getSeconds());e.value.releaseTime=`${p}-${v}-${s} ${u}:${P}:${T}`}function o(r){return(r<10?"0":"")+r}be(e.value.releaseTime)}const Pe=i=>{const o=b.value.basicSettings.customerList.find(r=>r.tenantCustomerId===i);e.value.isProfile=o.antecedentQuestionnaire===2?1:2},je=()=>{e.value.countryIdList=[],b.value.checked&&b.value.basicSettings.countryList.map(i=>{e.value.countryIdList.push(i.id)})},Ve=[dt({locale:ct})];function we(i){e.value.richText=i}function Ce(){ve("sync-project")}function Te(){B.value=!B.value}const X=h(""),N=h(!1),C=h([]),W=i=>{const o=i.name.substring(i.name.lastIndexOf(".")+1);return["jpg","jpeg","png","gif"].indexOf(o)===-1},xe=i=>{const o=W(i);return o&&S.warning({message:"只能上传图片文件JPG，JPEG，PNG，GIF",center:!0}),!o},Ue=async(i,o)=>{if(e.value.descriptionUrl=o.map(r=>r.name),!W(i)){const{status:r}=await ce.delete({fileName:i.name});r===1&&S.success({message:"删除成功",center:!0})}},ke=(i,o)=>{e.value.descriptionUrl.push(i.data.qiNiuUrl)},Se=async(i,o)=>{S.warning({message:"最多可上传10个",center:!0})},Qe=i=>{X.value=i.url,N.value=!0},De=async i=>{i.length&&i.forEach(async o=>{if(o){const r=await ce.detail({fileName:o});C.value.push({name:o,url:r.data.fileUrl})}})},qe=i=>{e.value.isOnline=i===2?2:1},Ae=i=>{i===2&&(e.value.projectQuotaInfoList=[])},Be=()=>{e.value.data.configurationInformation.configurationCountryList=null,b.value.checked=e.value.countryIdList.length===Q.country.length},Ee=()=>{e.value.data.configurationInformation.projectCategoryList=null,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId="",z()},z=i=>{e.value.data.configurationInformation.initialProblem.projectProblemId=null,e.value.data.configurationInformation.ProjectProblemInfoList=null,i||(e.value.projectQuotaInfoList=[])},ee=async(i,o)=>{i==="configurationInformation"&&!e.value.data.configurationInformation.configurationCountryList&&A.value.validateField(["countryIdList"],async r=>{if(r){z(o||!1);const p=await K.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=p.data.getProjectCountryListInfoList,p.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=p.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=J(ge.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=J(p.data.projectQuotaQuestionType)}else q.value="basicSettings",de(()=>{setTimeout(()=>{A.value.scrollToField("countryIdList")}),S.warning({message:"请先选择所属区域",center:!0})})})},te=async()=>{if(e.value.data.configurationInformation.initialProblem.countryId){if(!e.value.data.configurationInformation.projectCategoryList){const i={countryId:e.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},o=await K.getProjectCategoryList(i);e.value.data.configurationInformation.projectCategoryList=o.data.getProjectCategoryInfoList.filter(r=>r.status===1)}}else S.warning({message:"请先选择配置信息下的区域",center:!0})},ae=async(i,o)=>{i?setTimeout(async()=>{const{projectProblemCategoryName:r,...p}=e.value.data.configurationInformation.projectCategoryList.find(s=>s.projectProblemCategoryId===i),v=await K.getProjectProblemList(p);if(e.value.data.configurationInformation.ProjectProblemInfoList=v.data.getProjectProblemInfoList.map(s=>({...s,getProjectAnswerInfoList:s.getProjectAnswerInfoList.sort((u,P)=>u.answerValue.replace(/^[a-zA-Z]+/,"")-P.answerValue.replace(/^[a-zA-Z]+/,""))})),!o){e.value.projectQuotaInfoList=[];for(let s=0;s<e.value.data.configurationInformation.ProjectProblemInfoList.length;s++){const u=J(e.value.data.configurationInformation.initialProblem);u.projectProblemId=e.value.data.configurationInformation.ProjectProblemInfoList[s].id,u.keyValue=e.value.data.configurationInformation.ProjectProblemInfoList[s].question,u.questionType=e.value.data.configurationInformation.ProjectProblemInfoList[s].questionType,u.projectProblemCategoryId=i,e.value.projectQuotaInfoList.push(u)}}}):z()},Ne=(i,o)=>{let r=e.value.projectQuotaInfoList[o].projectAnswerIdList;const v=e.value.data.configurationInformation.ProjectProblemInfoList[o].getProjectAnswerInfoList.filter(s=>r.includes(s.id));e.value.projectQuotaInfoList[o].answerValueList=v.map(s=>s.anotherName)},oe=async()=>{const i=await st.getCustomerList({});b.value.basicSettings.customerList=i.data.getTenantCustomerAccordInfoList},le=()=>{Z.value.showEdit()},Re=async()=>{await oe(),b.value.basicSettings.countryList=await Q.getCountry(),b.value.basicSettings.B2BTypeList=await Q.getB2BType()},ze=async()=>{e.value.projectQuotaInfoList.length&&(e.value.data.configurationInformation.initialProblem.countryId=e.value.projectQuotaInfoList[0].countryId,e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=e.value.projectQuotaInfoList[0].projectQuotaQuestionType,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId=e.value.projectQuotaInfoList[0].projectProblemCategoryId,await ee("configurationInformation",!0),await te(),setTimeout(async()=>{await ae(e.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},ne=(i,o)=>({get(){return e.value.projectQuotaInfoList[o].id===i?e.value.projectQuotaInfoList[o].projectAnswerIdList:e.value.projectQuotaInfoList.find(p=>p.projectProblemId===i).projectAnswerIdList},set(r){if(e.value.projectQuotaInfoList[o].id===i)e.value.projectQuotaInfoList[o].projectAnswerIdList=r;else{const p=e.value.projectQuotaInfoList.find(v=>v.projectProblemId===i);p.projectAnswerIdList=r}}});return et(()=>D.leftTab,(i,o)=>{e.value=i},{deep:!0}),tt(async()=>{C.value=[],await Re(),await ze()}),pe({getUpLoad:De}),de(()=>{_e(A.value)}),(i,o)=>{const r=m("el-button"),p=m("el-switch"),v=m("el-input"),s=m("el-form-item"),u=m("el-col"),P=m("el-option"),T=m("el-select"),ie=m("el-checkbox"),re=m("ElOption"),Me=m("ElSelect"),I=m("el-row"),R=m("el-input-number"),M=ot,F=m("el-tooltip"),se=m("el-text"),x=m("el-card"),Fe=m("el-date-picker"),$e=m("el-cascader"),Oe=m("el-icon"),Ge=m("el-upload"),He=m("el-dialog"),$=m("el-tab-pane"),Ye=m("el-checkbox-group"),Je=m("el-tabs"),Ke=m("ElForm");return c(),g(Ke,{"label-width":"100px",rules:n(Ie),ref_key:"formRef",ref:A,model:n(e),"label-position":"top"},{default:t(()=>[a(Je,{modelValue:n(q),"onUpdate:modelValue":o[27]||(o[27]=l=>Y(q)?q.value=l:null),onTabChange:ee},{default:t(()=>[a($,{label:"基础设置",name:"basicSettings"},{default:t(()=>[a(x,{"body-style":""},{header:t(()=>[d("div",gt,[vt,d("div",null,[D.tabIndex>0?(c(),g(r,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:Ce},{default:t(()=>[f(" 同步数据 ")]),_:1})):y("",!0),a(p,{modelValue:n(e).required,"onUpdate:modelValue":o[0]||(o[0]=l=>n(e).required=l),"active-value":!0,"inactive-value":!1,class:"ml-2"},null,8,["modelValue"]),f(" 只看必填 ")])])]),default:t(()=>[a(I,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"项目名称",prop:"name"},{default:t(()=>[a(v,{modelValue:n(e).name,"onUpdate:modelValue":o[1]||(o[1]=l=>n(e).name=l),modelModifiers:{trim:!0},clearable:"",maxlength:50},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"项目标识",prop:"projectIdentification"},{default:t(()=>[a(v,{clearable:"",modelValue:n(e).projectIdentification,"onUpdate:modelValue":o[2]||(o[2]=l=>n(e).projectIdentification=l),modelModifiers:{trim:!0},maxlength:100},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"所属客户",prop:"clientId"},{default:t(()=>[a(T,{class:"placeholderColor",placeholder:"Select",modelValue:n(e).clientId,"onUpdate:modelValue":o[3]||(o[3]=l=>n(e).clientId=l),clearable:"",onChange:Pe},{empty:t(()=>[d("div",It,[f(" 暂无数据 "),a(r,{type:"primary",link:"",size:"small",onClick:le},{default:t(()=>[f(" 快捷新增 "),ht]),_:1})])]),default:t(()=>[(c(!0),L(V,null,j(n(b).basicSettings.customerList,l=>(c(),g(P,{key:l.tenantCustomerId,value:l.tenantCustomerId,label:l.customerAccord,disabled:l.isReveal===1||l.turnover&&l.practiceTurnover&&l.turnover<=l.practiceTurnover},{default:t(()=>[d("span",_t,k(l.customerAccord),1),G(d("span",bt,[G(d("span",null," 营业额超限 ",512),[[H,l.practiceTurnover>l.turnover]]),G(d("span",null," 审核率不合格 ",512),[[H,l.rateAudit>l.practiceRateAudit]])],512),[[H,l.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128)),a(r,{size:"small",class:"buttonClass",onClick:le},{default:t(()=>[f(" 快捷新增 "),yt]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"所属区域",prop:"countryIdList"},{default:t(()=>[a(Me,{class:"placeholderColor",modelValue:n(e).countryIdList,"onUpdate:modelValue":o[5]||(o[5]=l=>n(e).countryIdList=l),placeholder:"区域",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:Be},{header:t(()=>[a(ie,{modelValue:n(b).checked,"onUpdate:modelValue":o[4]||(o[4]=l=>n(b).checked=l),onChange:je,style:{display:"flex",height:"unset"}},{default:t(()=>[f("全球")]),_:1},8,["modelValue"])]),default:t(()=>[(c(!0),L(V,null,j(n(b).basicSettings.countryList,l=>(c(),g(re,{label:l.chineseName,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(I,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"项目价",prop:"doMoneyPrice"},{default:t(()=>[a(R,{style:{height:"2rem"},modelValue:n(e).doMoneyPrice,"onUpdate:modelValue":o[6]||(o[6]=l=>n(e).doMoneyPrice=l),min:1,precision:1,step:.1,"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"配额",prop:"num"},{default:t(()=>[a(R,{style:{height:"2rem"},modelValue:n(e).num,"onUpdate:modelValue":o[7]||(o[7]=l=>n(e).num=l),step:1,"step-strictly":"",min:1,max:100,"controls-position":"right",size:"large",onKeydown:E},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{style:{position:"relative"},span:6},{default:t(()=>[a(s,{prop:"minimumDuration"},{label:t(()=>[d("div",null,[f(" 最小分长"),a(F,{class:"tooltips",content:"该问卷最少要做多少分钟才被识别为合格",placement:"top"},{default:t(()=>[a(M,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(v,{style:{height:"2rem",width:"100%"},modelValue:n(e).minimumDuration,"onUpdate:modelValue":o[8]||(o[8]=l=>n(e).minimumDuration=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:E},{append:t(()=>[f(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"IR",prop:"ir"},{default:t(()=>[a(v,{modelValue:n(e).ir,"onUpdate:modelValue":o[9]||(o[9]=l=>n(e).ir=l),modelModifiers:{number:!0},min:1,max:100,step:"0.01",oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0;value=Number(value).toFixed(1)"},{append:t(()=>[f(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(I,{gutter:20},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(s,{prop:"uidUrl"},{label:t(()=>[d("div",null,[f(" URL"),a(F,{class:"tooltips",placement:"top"},{content:t(()=>[d("div",null,[d("div",null,[f(" 请参考如下链接"),Lt,f(k(me))]),Pt])]),default:t(()=>[a(M,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(v,{clearable:"",modelValue:n(e).uidUrl,"onUpdate:modelValue":o[10]||(o[10]=l=>n(e).uidUrl=l),modelModifiers:{trim:!0}},null,8,["modelValue"]),a(se,{class:"mx-1"},{default:t(()=>[f(k(me))]),_:1})]),_:1})]),_:1}),n(e).mutualExclusion===1&&!n(e).required?(c(),g(u,{key:0,span:12},{default:t(()=>[a(s,{label:"互斥ID"},{default:t(()=>[a(v,{clearable:"",modelValue:n(e).mutualExclusionId,"onUpdate:modelValue":o[11]||(o[11]=l=>n(e).mutualExclusionId=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),n(e).required?y("",!0):(c(),g(x,{key:0},{header:t(()=>[jt]),default:t(()=>[a(I,{gutter:20},{default:t(()=>[a(u,{span:5},{default:t(()=>[a(s,{label:"定时发布",class:"flex"},{default:t(()=>[a(p,{"active-value":2,"inactive-value":1,modelValue:n(e).isTimeReleases,"onUpdate:modelValue":o[12]||(o[12]=l=>n(e).isTimeReleases=l),onChange:qe},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"B2B",class:"flex"},{default:t(()=>[a(p,{"active-value":2,"inactive-value":1,modelValue:n(e).isB2b,"onUpdate:modelValue":o[13]||(o[13]=l=>n(e).isB2b=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"在线",class:"flex"},{default:t(()=>[a(p,{"active-value":1,"inactive-value":2,disabled:n(e).isTimeReleases===2,modelValue:n(e).isOnline,"onUpdate:modelValue":o[14]||(o[14]=l=>n(e).isOnline=l)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),a(u,{span:5},{default:t(()=>[a(s,{label:"前置问卷",class:"flex"},{default:t(()=>[a(p,{"active-value":1,"inactive-value":2,modelValue:n(e).isProfile,"onUpdate:modelValue":o[15]||(o[15]=l=>n(e).isProfile=l),onChange:Ae},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:4},{default:t(()=>[a(s,{label:"置顶",class:"flex"},{default:t(()=>[a(p,{"active-value":1,"inactive-value":2,modelValue:n(e).isPinned,"onUpdate:modelValue":o[16]||(o[16]=l=>n(e).isPinned=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(I,{gutter:20},{default:t(()=>[n(e).isTimeReleases===2?(c(),g(u,{key:0,span:5},{default:t(()=>[a(s,{label:"发布时间",prop:"releaseTime"},{default:t(()=>[a(Fe,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n(e).releaseTime,"onUpdate:modelValue":o[17]||(o[17]=l=>n(e).releaseTime=l),placeholder:"请选择时间",disabledDate:he,onChange:Le},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),n(e).isB2b===2?(c(),g(u,{key:1,span:5},{default:t(()=>[a(s,{label:"项目类型"},{default:t(()=>[a($e,{"show-all-levels":!1,modelValue:n(e).projectType,"onUpdate:modelValue":o[18]||(o[18]=l=>n(e).projectType=l),props:n(b).basicSettings.B2BTypeProps,options:n(b).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):y("",!0)]),_:1}),a(I,null,{default:t(()=>[a(u,{span:24},{default:t(()=>[a(s,{label:"备注"},{default:t(()=>[a(v,{maxlength:"200","show-word-limit":"",type:"textarea",rows:5,modelValue:n(e).remark,"onUpdate:modelValue":o[19]||(o[19]=l=>n(e).remark=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),n(e).required?y("",!0):(c(),g(x,{key:1},{header:t(()=>[d("div",Vt,[wt,a(r,{type:"primary",link:"",size:"default",onClick:Te},{default:t(()=>[f(k(n(B)?"收起":"展开"),1)]),_:1})])]),default:t(()=>[n(B)?(c(),L("div",Ct,[a(s,{label:"上传图片"},{default:t(()=>[a(Ge,{"file-list":n(C),"onUpdate:fileList":o[20]||(o[20]=l=>Y(C)?C.value=l:null),action:ye,"list-type":"picture-card",drag:!0,limit:10,accept:".png, .jpg, .jpeg, .gif","before-upload":xe,"on-preview":Qe,"on-remove":Ue,"on-success":ke,"on-exceed":Se},{tip:t(()=>[d("div",xt,[a(se,{type:"primary",size:"small"},{default:t(()=>[f(" 支持上传JPG/JPEG/PNG图片，小于10MB ")]),_:1})])]),default:t(()=>[a(Oe,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:t(()=>[a(n(at))]),_:1}),Tt]),_:1},8,["file-list"]),a(He,{modelValue:n(N),"onUpdate:modelValue":o[21]||(o[21]=l=>Y(N)?N.value=l:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:t(()=>[d("img",{"w-full":"",src:n(X),alt:"Preview Image"},null,8,Ut)]),_:1},8,["modelValue"])]),_:1}),a(I,{gutter:20},{default:t(()=>[a(u,{span:24},{default:t(()=>[a(s,{label:"项目描述"},{default:t(()=>[a(n(ut),{class:"editor",value:n(e).richText,plugins:Ve,locale:n(mt),onChange:we},null,8,["value","locale"])]),_:1})]),_:1})]),_:1})])):y("",!0)]),_:1}))]),_:1}),n(e).isProfile===1&&!n(e).required?(c(),g($,{key:0,label:"配置信息",name:"configurationInformation"},{default:t(()=>[n(e).data?(c(),g(x,{key:0},{header:t(()=>[kt]),default:t(()=>[a(I,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,{label:"选择区域"},{default:t(()=>[a(T,{modelValue:n(e).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":o[22]||(o[22]=l=>n(e).data.configurationInformation.initialProblem.countryId=l),filterable:"",clearable:"",placeholder:"Select",onChange:Ee},{default:t(()=>[(c(!0),L(V,null,j(n(e).data.configurationInformation.configurationCountryList,l=>(c(),g(re,{label:l.countryName,value:l.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:t(()=>[a(s,{label:"问卷名称"},{default:t(()=>[a(T,{modelValue:n(e).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":o[23]||(o[23]=l=>n(e).data.configurationInformation.initialProblem.projectProblemCategoryId=l),clearable:"",placeholder:"Select",onFocus:te,onChange:ae},{default:t(()=>[(c(!0),L(V,null,j(n(e).data.configurationInformation.projectCategoryList,l=>(c(),g(P,{key:l.projectProblemCategoryId,label:l.projectProblemCategoryName,value:l.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(e).data.configurationInformation.ProjectProblemInfoList&&n(e).data.configurationInformation.ProjectProblemInfoList.length&&n(e).projectQuotaInfoList.length?(c(!0),L(V,{key:0},j(n(e).data.configurationInformation.ProjectProblemInfoList,(l,O)=>(c(),g(I,{class:"allocation",gutter:20},{default:t(()=>[a(u,{span:20},{default:t(()=>[f(" 问题："+k(l.question),1)]),_:2},1024),a(u,{span:20},{default:t(()=>[a(s,null,{default:t(()=>[l.questionType===1?(c(),g(v,{key:0,disabled:"",placeholder:"输入框无法设置"})):(c(),g(Ye,{key:1,modelValue:ne(l.id,O).get(),"onUpdate:modelValue":U=>ne(l.id,O).set(U),onChange:U=>Ne(3,O)},{default:t(()=>[(c(!0),L(V,null,j(l.getProjectAnswerInfoList,U=>(c(),g(ie,{label:U.anotherName,value:U.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):y("",!0)]),_:1})):y("",!0)]),_:1})):y("",!0),n(e).required?y("",!0):(c(),g($,{key:1,label:"安全信息",name:"securityInformation"},{default:t(()=>[a(x,null,{header:t(()=>[St]),default:t(()=>[a(I,{gutter:20},{default:t(()=>[a(u,{span:6},{default:t(()=>[a(s,null,{label:t(()=>[Qt]),default:t(()=>[a(R,{style:{height:"2rem"},modelValue:n(e).preNum,"onUpdate:modelValue":o[24]||(o[24]=l=>n(e).preNum=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:E},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:6},{default:t(()=>[a(s,null,{label:t(()=>[Dt]),default:t(()=>[a(R,{style:{height:"2rem"},modelValue:n(e).limitedQuantity,"onUpdate:modelValue":o[25]||(o[25]=l=>n(e).limitedQuantity=l),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:E},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:1}),a(u,{span:4,class:"flex"},{default:t(()=>[a(s,{label:"",class:"flex m-0"},{label:t(()=>[d("div",null,[f(" 允许重复参与"),a(F,{class:"tooltips",placement:"top"},{content:t(()=>[qt,At]),default:t(()=>[a(M,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[a(p,{modelValue:n(e).ipDifferenceDetection,"onUpdate:modelValue":o[26]||(o[26]=l=>n(e).ipDifferenceDetection=l),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"]),a(ft,{ref_key:"editRef",ref:Z,onFetchData:oe},null,512)]),_:1},8,["rules","model"])}}}),da=it(Bt,[["__scopeId","data-v-82f72020"]]);export{da as default};
