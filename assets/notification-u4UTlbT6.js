
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as B,aM as H,r as v,z as U,c as T,k as P,a as b,o as d,b as c,f as u,w as _,s as a,i as e,S as f,H as l,ah as I,F as L,t as N,j as p,e as m,q as z,ap as F,n as $,ao as j,R as O,an as q}from"./index-B9G65lgK.js";import G from"./notification-news-UUHmwHkH.js";import J from"./notification-cooperation-GeHRS1n6.js";const K={class:"absolute-container"},Q={class:"flex-c"},W={class:"left"},X={class:"buttons"},Y=["onClick"],Z={class:"info"},ee={class:"time"},te={key:0,class:"new"},se={class:"auditType"},ae={class:"time"},oe={class:"data"},ne={class:"buttons"},ie=["onClick"],de={class:"info"},le={class:"time"},ce={key:0,class:"new"},re={class:"auditType"},ue={class:"time"},_e={class:"data"},fe={key:0,class:"right"},D=B({name:"PersonalNotification",__name:"notification",setup(pe){const n=H(),k=v(),h=v(),r=U(),t=v({tabs:"",selectId:"",ReadAlready:1});function g(i){t.value.selectId=i.id,$(()=>{var o;(o=h.value)==null||o.showEdit(i)})}function R(i){t.value.selectId=i.id,$(()=>{k.value.showEdit(i)})}async function w(){t.value.selectId="",t.value.ReadAlready=1,await n.getUnreadMessage(),await n.getUnreadTodo()}const y=async i=>{t.value.ReadAlready=i,await n.getUnreadMessage(),await n.getUnreadTodo()},S=T(()=>n.messageList.filter(i=>i.isReadAlready===t.value.ReadAlready)),x=T(()=>n.todoList.filter(i=>i.isReadAlready===t.value.ReadAlready));return P(()=>{if(t.value.tabs=r.query.type==2?"cooperation":"news",r.query.id){if(Number(r.query.type)===1){const i=n.messageList.find(o=>o.id===r.query.id);g(i)}else if(Number(r.query.type)===2){const i=n.todoList.find(o=>o.id===r.query.id);R(i)}}}),(i,o)=>{const C=b("el-empty"),A=b("el-tab-pane"),E=b("el-tabs"),M=j;return d(),c("div",K,[u(M,null,{default:_(()=>[a("div",Q,[a("div",W,[u(E,{modelValue:e(t).tabs,"onUpdate:modelValue":o[4]||(o[4]=s=>e(t).tabs=s),onTabChange:w},{default:_(()=>[u(A,{label:"消息",name:"news"},{default:_(()=>[a("div",X,[a("button",{class:f(e(t).ReadAlready===1?"unread":""),onClick:o[0]||(o[0]=s=>y(1))},"未读"+l(e(n).message<100?`(${e(n).message})`:"99+"),3),a("button",{class:f(e(t).ReadAlready===2?"read":""),read:"",onClick:o[1]||(o[1]=s=>y(2))},"已读",2)]),u(e(I),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[e(n).messageList.length?(d(!0),c(L,{key:0},N(e(S),s=>(d(),c("div",{class:f({item:"item",select:s.id===e(t).selectId}),onClick:V=>g(s)},[a("div",Z,[a("div",ee,[s.isReadAlready===1?(d(),c("span",te)):p("",!0),a("span",se,l(e(n).auditTypeList[s.auditType-1]||""),1),a("span",ae,l(s.createTime),1)]),a("div",oe,l(s.messageContent),1)])],10,Y))),256)):(d(),m(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1}),u(A,{label:"代办",name:"cooperation"},{default:_(()=>[a("div",ne,[a("button",{class:f(e(t).ReadAlready===1?"unread":""),onClick:o[2]||(o[2]=s=>y(1))},"未读"+l(e(n).todo<100?`(${e(n).todo})`:"99+"),3),a("button",{class:f(e(t).ReadAlready===2?"read":""),read:"",onClick:o[3]||(o[3]=s=>y(2))},"已读",2)]),u(e(I),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:_(()=>[e(n).todoList.length?(d(!0),c(L,{key:0},N(e(x),s=>(d(),c("div",{class:f({item:"item",select:s.id===e(t).selectId}),onClick:V=>R(s)},[a("div",de,[a("div",le,[s.isReadAlready===1?(d(),c("span",ce)):p("",!0),a("span",re,l(e(n).auditTypeList[s.auditType-1]||""),1),a("span",ue,l(s.createTime),1)]),a("div",_e," 您好，我是"+l(s.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+l(s.phoneOrEmail)+"。 ",1)])],10,ie))),256)):(d(),m(C,{key:1,description:"暂无数据"}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(t).selectId?z((d(),c("div",fe,[e(t).tabs==="news"?(d(),m(G,{key:0,ref_key:"newsRef",ref:h,onDelSelectId:w},null,512)):p("",!0),e(t).tabs==="cooperation"?(d(),m(J,{key:1,ref_key:"cooperationRef",ref:k},null,512)):p("",!0)],512)),[[F,e(t).selectId]]):p("",!0)])]),_:1})])}}});typeof q=="function"&&q(D);const be=O(D,[["__scopeId","data-v-9f596cf3"]]);export{be as default};
