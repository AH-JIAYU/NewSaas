
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as be,aI as Ce,r as u,a2 as ke,D as ye,a as s,al as we,o as c,b as Se,f as e,w as a,i as o,am as R,g as _,G as Ee,l as b,e as p,j as m,P as Ve,ak as T,aJ as Ie,L as ze,aK as xe,aL as Ue,p as Ne,aG as De,aH as Ae,F as $e,aB as j,_ as Fe}from"./index-CxuGvTiO.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-DguN4TjB.js";import{_ as Be}from"./index.vue_vue_type_script_setup_true_lang-BTyCu2s6.js";import{_ as Re}from"./index.vue_vue_type_script_setup_true_lang-B-1U7x65.js";import Pe from"./index-wBxrBqTV.js";import{s as q}from"./apiLoading-CZkvnqE8.js";import{u as He}from"./user_customer-yVatWcFo.js";import{a as P}from"./user_customer-DR6CLmlk.js";import"./index.vue_vue_type_script_setup_true_lang-6MiCtPpc.js";import"./index-CQ4msZJN.js";import"./stagedData-J5VZlTNG.js";import"./index.vue_vue_type_script_setup_true_lang-DQVULfuj.js";const Me=k=>(De("data-v-b1e6b2f4"),k=k(),Ae(),k),Qe=Me(()=>$e("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Te=be({name:"UserCustomerIndex",__name:"index",setup(k){const G=He(),{pagination:f,getParams:J,onSizeChange:K,onCurrentChange:O}=Ce(),x=u(!1),H=u([]),U=u(),M=u(),W=u(),y=u(!0),w=u(!1),S=u(!1),E=u("default"),i=u([]),V=u([{label:"客户编码",checked:!0,sortable:!0,prop:"tenantCustomerId"},{label:"客户名称",checked:!0,sortable:!0,prop:"customerAccord"},{label:"客户简称",checked:!0,sortable:!0,prop:"customerShortName"},{label:"负责人",checked:!0,sortable:!0,prop:"chargeName"},{label:"客户状态",checked:!0,sortable:!0,prop:"customerStatus"},{label:"前置问卷",checked:!0,sortable:!0,prop:"antecedentQuestionnaire"},{label:"风险控制",checked:!0,sortable:!0,prop:"riskControl"},{label:"营业限额/月",checked:!0,sortable:!0,prop:"turnover"},{label:"审核率Min值",checked:!0,sortable:!0,prop:"rateAudit"}]);function X(){U.value.showEdit()}function Y(l){U.value.showEdit(l)}async function N(l,n,v){const A={status:l,operationalType:n,tenantCustomerId:v},{status:I}=await q(P.changestatus(A));I===1&&T.success({message:"修改成功"}),G.customer=null,g()}function Z(l){M.value.showEdit(l)}function ee(l){Ie.confirm("您确定要删除当前项吗?","确认信息").then(async()=>{const{status:n}=await q(P.delete({tenantCustomerId:l.tenantCustomerId}));n===1&&T.success({message:"删除成功"}),g()}).catch(()=>{})}const h=ke({customerShortName:"",customerStatus:null});function te(l){K(l).then(()=>D())}function Q(l=1){O(l).then(()=>D())}function oe(){Object.assign(h,{customerShortName:"",customerStatus:null}),g()}function g(){f.value.page=1,D()}async function D(){x.value=!0;const l={...J(),...h},{data:n}=await P.list(l);H.value=n.getTenantCustomerInfoList,f.value.total=Number(n.total),x.value=!1}function ae(l){W.value=l}return ye(()=>{V.value.forEach(l=>{l.checked&&i.value.push(l.prop)}),g()}),(l,n)=>{const v=s("el-option"),A=s("el-input"),I=s("el-form-item"),ne=s("el-select"),$=ze,F=s("ElButton"),le=s("ElFormItem"),se=s("ElForm"),re=Be,ie=s("ElDivider"),C=s("el-button"),ue=Le,ce=xe,pe=Ue,me=s("el-row"),d=s("el-table-column"),L=s("ElSwitch"),B=s("ElTableColumn"),de=s("ElSpace"),_e=s("el-empty"),fe=s("el-table"),he=s("ElPagination"),ge=Ne,ve=we("loading");return c(),Se("div",{class:Ve({"absolute-container":o(S)})},[e(ge,null,{default:a(()=>[e(re,{"show-toggle":!1},{default:a(({fold:t,toggle:r})=>[e(se,{model:o(h).select,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:a(()=>[R(e(I,null,{default:a(()=>[e(A,{modelValue:o(h).customerShortName,"onUpdate:modelValue":n[0]||(n[0]=z=>o(h).customerShortName=z),clearable:"",placeholder:"客户简称"},{default:a(()=>[e(v,{label:"name",value:"name"})]),_:1},8,["modelValue"])]),_:2},1536),[[j,!t]]),R(e(I,null,{default:a(()=>[e(ne,{modelValue:o(h).customerStatus,"onUpdate:modelValue":n[1]||(n[1]=z=>o(h).customerStatus=z),clearable:"",placeholder:"客户状态"},{default:a(()=>[e(v,{label:"禁用",value:1}),e(v,{label:"启用",value:2}),e(v,{label:"风险暂停",value:3})]),_:1},8,["modelValue"])]),_:2},1536),[[j,!t]]),e(le,null,{default:a(()=>[e(F,{type:"primary",onClick:n[2]||(n[2]=z=>Q())},{icon:a(()=>[e($,{name:"i-ep:search"})]),default:a(()=>[_(" 筛选 ")]),_:1}),e(F,{onClick:oe},{icon:a(()=>[Qe]),default:a(()=>[_(" 重置 ")]),_:1}),e(F,{disabled:"",link:"",onClick:r},{icon:a(()=>[e($,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:a(()=>[_(" "+Ee(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(ie,{"border-style":"dashed"}),e(me,null,{default:a(()=>[e(ue,null,{default:a(()=>[e(C,{type:"primary",size:"default",onClick:X},{icon:a(()=>[e($,{name:"i-ep:plus"})]),default:a(()=>[_(" 新增 ")]),_:1})]),_:1}),e(pe,null,{default:a(()=>[e(C,{size:"default"},{default:a(()=>[_(" 导出 ")]),_:1}),e(ce,{border:o(y),"onUpdate:border":n[3]||(n[3]=t=>b(y)?y.value=t:null),tableAutoHeight:o(S),"onUpdate:tableAutoHeight":n[4]||(n[4]=t=>b(S)?S.value=t:null),checkList:o(i),"onUpdate:checkList":n[5]||(n[5]=t=>b(i)?i.value=t:null),columns:o(V),"onUpdate:columns":n[6]||(n[6]=t=>b(V)?V.value=t:null),"line-height":o(E),"onUpdate:lineHeight":n[7]||(n[7]=t=>b(E)?E.value=t:null),stripe:o(w),"onUpdate:stripe":n[8]||(n[8]=t=>b(w)?w.value=t:null),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),R((c(),p(fe,{border:o(y),data:o(H),size:o(E),stripe:o(w),onSelectionChange:ae},{empty:a(()=>[e(_e,{class:"vab-data-empty",description:"暂无数据"})]),default:a(()=>[e(d,{align:"center","show-overflow-tooltip":"",type:"selection"}),o(i).includes("tenantCustomerId")?(c(),p(d,{key:0,align:"center",prop:"tenantCustomerId","show-overflow-tooltip":"",label:"客户编码"})):m("",!0),o(i).includes("customerAccord")?(c(),p(d,{key:1,align:"center",prop:"customerAccord","show-overflow-tooltip":"",label:"客户名称"})):m("",!0),o(i).includes("customerShortName")?(c(),p(d,{key:2,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"})):m("",!0),o(i).includes("turnover")?(c(),p(d,{key:3,align:"center",prop:"turnover","show-overflow-tooltip":"",label:"客户营业限额($/月)"})):m("",!0),o(i).includes("rateAudit")?(c(),p(d,{key:4,align:"center",prop:"rateAudit","show-overflow-tooltip":"",label:"审核率Min值"})):m("",!0),o(i).includes("chargeName")?(c(),p(d,{key:5,align:"center",prop:"chargeName","show-overflow-tooltip":"",label:"负责人"})):m("",!0),o(i).includes("customerStatus")?(c(),p(B,{key:6,align:"center","show-overflow-tooltip":"",prop:"customerStatus",label:"客户状态"},{default:a(({row:t})=>[e(L,{modelValue:t.customerStatus,"onUpdate:modelValue":r=>t.customerStatus=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>N(r,1,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):m("",!0),o(i).includes("antecedentQuestionnaire")?(c(),p(B,{key:7,align:"center","show-overflow-tooltip":"",prop:"antecedentQuestionnaire",label:"前置问卷"},{default:a(({row:t})=>[e(L,{modelValue:t.antecedentQuestionnaire,"onUpdate:modelValue":r=>t.antecedentQuestionnaire=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>N(r,2,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):m("",!0),o(i).includes("riskControl")?(c(),p(B,{key:8,align:"center","show-overflow-tooltip":"",prop:"riskControl",label:"风险控制"},{default:a(({row:t})=>[e(L,{modelValue:t.riskControl,"onUpdate:modelValue":r=>t.riskControl=r,"inline-prompt":"","inactive-value":1,"active-value":2,"active-text":"启用","inactive-text":"禁用",onChange:r=>N(r,3,t.tenantCustomerId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):m("",!0),e(d,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"200"},{default:a(({row:t})=>[e(de,null,{default:a(()=>[e(C,{size:"small",plain:"",type:"primary",onClick:r=>Y(t)},{default:a(()=>[_(" 编辑 ")]),_:2},1032,["onClick"]),e(C,{type:"primary",plain:"",size:"small",onClick:r=>Z(t)},{default:a(()=>[_(" 详情 ")]),_:2},1032,["onClick"]),e(C,{type:"danger",plain:"",size:"small",onClick:r=>ee(t)},{default:a(()=>[_(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ve,o(x)]]),e(he,{"current-page":o(f).page,total:o(f).total,"page-size":o(f).size,"page-sizes":o(f).sizes,layout:o(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:te,onCurrentChange:Q},null,8,["current-page","total","page-size","page-sizes","layout"]),e(Re,{ref_key:"editRef",ref:U,onFetchData:g},null,512),e(Pe,{ref_key:"checkRef",ref:M,onFetchData:g},null,512)]),_:1})],2)}}}),ot=Fe(Te,[["__scopeId","data-v-b1e6b2f4"]]);export{ot as default};
