
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as j}from"./index-DC_RPpvH.js";import{d as A,aK as J,r as g,k as O,a3 as w,a as l,p as Q,o as v,b as U,s as c,f as o,w as i,q as h,e as E,H as m,aq as S,g as W,i as d,bc as N,aG as X,aH as Y,R as Z}from"./index-BsojuIyX.js";const $=u=>(X("data-v-0d52aef3"),u=u(),Y(),u),ee={class:"absolute-container"},ae={class:"page-main"},te={class:"custom-tree-node"},oe=["title"],ne={class:"code"},ie={class:"dictionary-container"},se={class:"dictionary-container"},le=$(()=>c("div",{class:"empty"},"请在左侧新增或选择一个字典",-1)),ce=[le],re=A({name:"basicDictionary",__name:"index",setup(u){const{pagination:n,getParams:k,onSizeChange:z,onCurrentChange:D,onSortChange:I}=J();n.value.size=20;const y=g(),s=g({search:{chineseName:""},tree:[],currentNode:void 0,currentData:void 0,dialog:{visible:!1,parentId:"",id:""},row:"",loading:!1}),L=g(),a=g({loading:!1,search:{id:"",chineseName:""},dataList:[],selectionDataList:[],row:"",dialog:{visible:!1,id:"",parentId:"",level:1}});async function x(){try{s.value.loading=!0,a.value.search.id="";const e=await N.list();s.value.tree=e.data,s.value.loading=!1}catch{}finally{s.value.loading=!1}}O(()=>{x()}),w(()=>s.value.search,e=>{y.value.filter(e)});function T(e,t){return e?t.label.includes(e):!0}function R(e){n.value.page=1,a.value.search.id=e.id}w(()=>a.value.search.id,()=>{_()});async function _(){try{a.value.loading=!0;const e={...k(),id:a.value.search.id},t=await N.itemlist(e);a.value.loading=!1,a.value.dataList=t.data.records,a.value.dataList.forEach(f=>{f.enableLoading=!1}),n.value.total=Number(t.data.total)}catch{}finally{a.value.loading=!1}}function B(e){z(e).then(()=>_())}function P(e=1){D(e).then(()=>_())}function V({prop:e,order:t}){I(e,t).then(()=>_())}return(e,t)=>{const f=l("ElTree"),q=l("ElScrollbar"),p=l("ElTableColumn"),H=l("ElTag"),F=l("el-empty"),G=l("ElTable"),K=l("ElPagination"),M=j,b=Q("loading");return v(),U("div",ee,[c("div",ae,[o(M,{"hide-left-side-toggle":""},{leftSide:i(()=>[o(q,{class:"tree"},{default:i(()=>[h((v(),E(f,{ref_key:"dictionaryRef",ref:y,data:s.value.tree,"filter-node-method":T,"default-expand-all":"",onNodeClick:R},{default:i(({node:r,data:C})=>[c("div",te,[c("div",{class:"label",title:r.label},m(C.chineseName),9,oe),c("div",ne,m(C.englishName),1)])]),_:1},8,["data","filter-node-method"])),[[b,s.value.loading]])]),_:1})]),default:i(()=>[h(c("div",ie,[h((v(),E(G,{ref_key:"dictionaryItemRef",ref:L,data:a.value.dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:V,onSelectionChange:t[0]||(t[0]=r=>a.value.selectionDataList=r),"row-key":"id","default-expand-all":""},{empty:i(()=>[o(F,{description:"暂无数据"})]),default:i(()=>[o(p,{prop:"chineseName",label:"中文名称"}),o(p,{prop:"englishName",label:"英文名称"}),o(p,{prop:"remark",label:"备注"}),o(p,{label:"键值",align:"center",width:"150"},{default:i(r=>[o(H,{type:"info"},{default:i(()=>[W(m(r.row.code),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[b,a.value.loading]]),o(K,{"current-page":d(n).page,total:d(n).total,"page-size":d(n).size,"page-sizes":d(n).sizes,layout:d(n).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:B,onCurrentChange:P},null,8,["current-page","total","page-size","page-sizes","layout"])],512),[[S,a.value.search.id]]),h(c("div",se,ce,512),[[S,!a.value.search.id]])]),_:1})])])}}}),_e=Z(re,[["__scopeId","data-v-0d52aef3"]]);export{_e as default};
