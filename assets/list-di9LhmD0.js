
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as he,aM as ge,r as p,aj as fe,c as u,$ as _e,n as ye,a as g,q as R,o as s,b as M,f as i,w as l,s as S,e as c,g as d,A as r,i as o,aN as be,v as h,j as _,O as A,F as ve,t as Ie,aO as ke,E as je,aP as Se,aQ as Ce,be as Ne,ao as we,aI as Pe,aJ as Te,M as De}from"./index-Cjx6Hppb.js";import{_ as Le}from"./index-a4HfUiUD.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-BPO02zxt.js";import{_ as xe}from"./index-DGm2YWet.js";import Ee from"./index-xbPn0Enk.js";import{a as H}from"./projectManagement_scheduling-bHpCLef3.js";import"./index-CRTuI3qy.js";import"./clipboard-mPwZM1BJ.js";import"./index.vue_vue_type_script_setup_true_lang-DMDk-mZ9.js";import"./sortable.esm-C0-Qcoum.js";import"./apiLoading-Bw3JLAM0.js";const Me=I=>(Pe("data-v-1fb7d76b"),I=I(),Te(),I),$e={class:"fontC-System"},Be={class:"tableBig oneLine"},Fe={class:"copyId tableSmall projectId"},Ge={class:"id oneLine"},Oe={class:"fontC-System"},Re={class:"fontC-System"},Ae={class:"specifyTheTarget"},He={class:"tableBig"},Ue=Me(()=>h("br",null,null,-1)),Ve={class:"id tableSmall",style:{"font-size":"14px"}},qe=he({name:"scheduling",__name:"list",setup(I){const{pagination:y,getParams:U,onSizeChange:V,onCurrentChange:q}=ge(),Q=p(""),{t}=fe(),k=p(!1),C=p(!0),N=p(),w=p(!1),m=p([]),$=p(),J=p("formSearch-scheduling"),P=p("default"),T=p(!0),D=p([{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.type")),prop:"dispatchType"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.projectID")),prop:"projectId"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.projectName")),prop:"projectName"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.projectPrice")),prop:"moneyPrice"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.specifiedPrice")),prop:"doMoneyPrice"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.designatedSupplier")),prop:"Supplier"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.designatedDepartment")),prop:"group"},{sotrtable:!0,checked:!0,label:u(()=>t("scheduling.creationTime")),prop:"createTime"}]),L=_e({dispatchType:"",projectId:"",projectName:""}),B=p([]);function K(){N.value.showEdit()}function W(a){N.value.showEdit(a)}function X(a){ke.confirm(`确认删除「${a.projectName}」吗？`,"确认信息").then(()=>{H.delete({projectDispatchId:a.projectDispatchId}).then(n=>{b(),je.success({message:"删除成功",center:!0})})}).catch(()=>{})}function Y(a){V(a).then(()=>b())}const z=p();function Z(a){a?z.value=a.projectId:z.value=""}function x(a=1){q(a).then(()=>b())}function ee(){Object.assign(L,{dispatchType:"",projectId:"",projectName:""}),b()}async function b(){try{k.value=!0;const a={...U(),...L},n=await H.list(a);B.value=n.data.getProjectDispatchInfoList,y.value.total=n.data.total,k.value=!1}catch{}finally{k.value=!1}}ye(()=>{D.value.forEach(a=>{a.checked&&m.value.push(a.prop)}),b(),$.value=[{index:1,show:!0,type:"input",modelName:"projectId",placeholder:u(()=>t("scheduling.projectID"))},{index:2,show:!0,type:"input",modelName:"projectName",placeholder:u(()=>t("scheduling.projectName"))},{index:3,show:!0,type:"select",modelName:"dispatchType",placeholder:u(()=>t("scheduling.allTypes")),option:"dispatchType",optionLabel:"label",optionValue:"value"}]});const te={dispatchType:()=>[{label:u(()=>t("scheduling.assignmentOff")),value:1},{label:u(()=>t("scheduling.specifiedPrice")),value:2}]};return(a,n)=>{const le=xe,oe=g("ElDivider"),v=g("el-button"),ae=ze,ne=Se,se=Ce,ie=g("el-row"),F=g("el-text"),f=g("el-table-column"),G=g("el-tooltip"),re=Le,O=Ne,ce=g("el-empty"),pe=g("el-table"),ue=g("ElPagination"),de=we,E=R("auth"),me=R("loading");return s(),M("div",{class:A({"absolute-container":w.value})},[i(de,null,{default:l(()=>[i(le,{formSearchList:$.value,formSearchName:J.value,onCurrentChange:x,onOnReset:ee,model:L,formOption:te},null,8,["formSearchList","formSearchName","model"]),i(oe,{"border-style":"dashed"}),i(ie,{gutter:24},{default:l(()=>[i(ae,null,{default:l(()=>[S((s(),c(v,{type:"primary",size:"default",onClick:K},{default:l(()=>[d(r(o(t)("scheduling.add")),1)]),_:1})),[[E,"scheduling-get-addProjectDispatch"]])]),_:1}),i(se,null,{default:l(()=>[i(v,{size:"default",onClick:n[0]||(n[0]=()=>{})},{default:l(()=>[d(r(o(t)("scheduling.export")),1)]),_:1}),i(ne,{border:C.value,"onUpdate:border":n[1]||(n[1]=e=>C.value=e),tableAutoHeight:w.value,"onUpdate:tableAutoHeight":n[2]||(n[2]=e=>w.value=e),checkList:m.value,"onUpdate:checkList":n[3]||(n[3]=e=>m.value=e),columns:D.value,"onUpdate:columns":n[4]||(n[4]=e=>D.value=e),"line-height":P.value,"onUpdate:lineHeight":n[5]||(n[5]=e=>P.value=e),stripe:T.value,"onUpdate:stripe":n[6]||(n[6]=e=>T.value=e),style:{"margin-left":"12px"},onQueryData:x},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),S((s(),c(pe,{ref_key:"tableSortRef",ref:Q,style:{"margin-top":"10px"},"row-key":"id",data:B.value,border:C.value,size:P.value,stripe:T.value,"highlight-current-row":"",onCurrentChange:Z},{empty:l(()=>[i(ce,{image:o(be),"image-size":300},null,8,["image"])]),default:l(()=>[m.value.includes("dispatchType")?(s(),c(f,{key:0,"show-overflow-tooltip":"",prop:"dispatchType",align:"left",label:o(t)("scheduling.type")},{default:l(({row:e})=>[h("div",$e,[e.dispatchType===1?(s(),c(F,{key:0,type:"primary",style:{"font-weight":"700"}},{default:l(()=>[d(r(o(t)("scheduling.assignmentOff")),1)]),_:1})):(s(),c(F,{key:1,type:"danger",style:{"font-weight":"700"}},{default:l(()=>[d(r(o(t)("scheduling.specifiedPrice")),1)]),_:1}))])]),_:1},8,["label"])):_("",!0),m.value.includes("projectName")?(s(),c(f,{key:1,"show-overflow-tooltip":"",prop:"projectName",align:"left",label:o(t)("scheduling.projectName")},{default:l(({row:e})=>[h("div",Be,r(e.projectName),1)]),_:1},8,["label"])):_("",!0),m.value.includes("projectId")?(s(),c(f,{key:2,"show-overflow-tooltip":"",prop:"projectId",align:"left",label:o(t)("scheduling.projectID"),width:"200"},{default:l(({row:e})=>[h("div",Fe,[h("div",Ge,[i(G,{effect:"dark",content:e.projectId,placement:"top-start"},{default:l(()=>[d(r(e.projectId),1)]),_:2},1032,["content"])]),i(re,{content:e.projectId,class:A([{rowCopy:"rowCopy",current:e.projectId===z.value},"littleButton"])},null,8,["content","class"])])]),_:1},8,["label"])):_("",!0),m.value.includes("moneyPrice")?(s(),c(f,{key:3,"show-overflow-tooltip":"",prop:"moneyPrice",align:"left",label:o(t)("scheduling.projectPrice")},{default:l(({row:e})=>[h("div",Oe,[i(O),d(r(e.moneyPrice||0),1)])]),_:1},8,["label"])):_("",!0),m.value.includes("doMoneyPrice")?(s(),c(f,{key:4,"show-overflow-tooltip":"",prop:"doMoneyPrice",align:"left",label:o(t)("scheduling.specifiedPrice")},{default:l(({row:e})=>[h("div",Re,[i(O),d(r(e.doMoneyPrice||0),1)])]),_:1},8,["label"])):_("",!0),m.value.includes("Supplier")?(s(),c(f,{key:5,"show-overflow-tooltip":"",prop:"groupSupplierId",align:"left",label:o(t)("scheduling.targetAssignment"),width:"400"},{default:l(({row:e})=>[i(G,{effect:"dark",placement:"top-start"},{content:l(()=>[(s(!0),M(ve,null,Ie(e.getGroupSupplierIdNameInfoList,j=>(s(),M("p",null,r(j.groupSupplierId)+"-"+r(j.groupSupplierName),1))),256))]),default:l(()=>[h("div",Ae,[e.dataType==2?(s(),c(v,{key:0,style:{width:"46px","background-color":"#ffac54"},type:"warning",size:"small",class:"p-1"},{default:l(()=>[d(r(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:o(t)("scheduling.department")),1)]),_:2},1024)):e.dataType===1?(s(),c(v,{key:1,style:{width:"46px"},type:"warning",size:"small",class:"p-1"},{default:l(()=>[d(r(e.getGroupSupplierIdNameInfoList.length>1?"×"+e.getGroupSupplierIdNameInfoList.length:o(t)("scheduling.supplier")),1)]),_:2},1024)):_("",!0),h("b",He,r(e.getGroupSupplierIdNameInfoList[0].groupSupplierName),1),Ue,h("span",Ve,r(e.getGroupSupplierIdNameInfoList[0].groupSupplierId),1)])]),_:2},1024)]),_:1},8,["label"])):_("",!0),m.value.includes("createTime")?(s(),c(f,{key:6,"show-overflow-tooltip":"",prop:"createTime",align:"left",width:"180",label:o(t)("scheduling.creationTime")},{default:l(({row:e})=>[d(r(e.createTime),1)]),_:1},8,["label"])):_("",!0),i(f,{align:"left",fixed:"right",label:o(t)("scheduling.controls"),width:"170"},{default:l(({row:e})=>[S((s(),c(v,{type:"primary",plain:"",size:"small",onClick:j=>W(e)},{default:l(()=>[d(r(o(t)("scheduling.edit")),1)]),_:2},1032,["onClick"])),[[E,"scheduling-update-updateProjectDispatch"]]),S((s(),c(v,{type:"danger",plain:"",size:"small",onClick:j=>X(e)},{default:l(()=>[d(r(o(t)("scheduling.delete")),1)]),_:2},1032,["onClick"])),[[E,"scheduling-delete-deleteProjectDispatch"]])]),_:1},8,["label"])]),_:1},8,["data","border","size","stripe"])),[[me,k.value]]),i(ue,{"current-page":o(y).page,total:o(y).total,"page-size":o(y).size,"page-sizes":o(y).sizes,layout:o(y).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Y,onCurrentChange:x},null,8,["current-page","total","page-size","page-sizes","layout"]),i(Ee,{ref_key:"editRef",ref:N,onFetchData:b},null,512)]),_:1})],2)}}}),at=De(qe,[["__scopeId","data-v-1fb7d76b"]]);export{at as default};
