
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as le,M as oe,aN as ne,v as se,r as w,k as re,C as P,H as ie,a as u,l as ue,o as s,b as ce,f as o,w as l,aC as T,g as n,D as f,n as pe,e as i,j as p,i as h,Q as de,b9 as fe,L as me,aP as _e,aQ as be,aq as he,aJ as ge,aK as ve,p as ke,P as ye}from"./index-DcqAaBhZ.js";import{_ as Ce}from"./index.vue_vue_type_script_setup_true_lang-rPMsgSo_.js";import{_ as we}from"./index.vue_vue_type_style_index_0_lang-BEbU8btd.js";import{_ as Ie}from"./index.vue_vue_type_script_setup_true_lang-VkhYEOoC.js";import{a as Le}from"./financial_log-CYtoetrm.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-DpdSNbUl.js";import Te from"./index-idIcgz4-.js";import{u as Se}from"./useTabbar-B7o4ToGF.js";import"./user_supplier-DP5ALoAa.js";const Be=k=>(ge("data-v-f69f7336"),k=k(),ve(),k),De=Be(()=>ke("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),$e=le({name:"financial_log",__name:"list",setup(k){const{format:S}=fe();oe();const{pagination:g,getParams:x,onSizeChange:H,onCurrentChange:V,onSortChange:A}=ne();Se(),se();const B=w(),D=w(),I=w([{label:"供应商ID/内部调查站",prop:"typeId",sortable:!0,disableCheck:!1,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,disableCheck:!1,checked:!0},{label:"类型",prop:"type",sortable:!0,disableCheck:!1,checked:!0},{label:"说明",prop:"remark",sortable:!0,disableCheck:!1,checked:!0},{label:"变动前",prop:"beforeBalance",sortable:!0,disableCheck:!1,checked:!0},{label:"加减款",prop:"addAndSubtraction",sortable:!0,disableCheck:!1,checked:!0},{label:"变动后",prop:"afterBalance",sortable:!0,disableCheck:!1,checked:!0},{label:"时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0}]),e=w({loading:!1,activeName:"myFinancial",tableAutoHeight:!1,border:!0,stripe:!1,lineHeight:"default",checkList:[],formMode:"drawer",formModeProps:{visible:!1,id:""},search:{page:1,limit:10,supplierId:null,projectId:null,operationType:null,type:null},batch:{enable:!1,selectionDataList:[]},dataList:[]});re(()=>{m(),e.value.formMode==="router"&&P.on("get-data-list",()=>{m()}),I.value.forEach(r=>{r.checked&&e.value.checkList.push(r.prop)})}),ie(()=>{e.value.formMode==="router"&&P.off("get-data-list")});function m(){e.value.loading=!0;const r={...x(),...e.value.search};Le.list(r).then(a=>{e.value.loading=!1,e.value.dataList=a.data.tenantFinancialRecordInfoList,g.value.total=+a.data.total})}function M(r){B.value.showEdit(JSON.stringify(r))}function U(r){D.value.showEdit(r)}function j(){Object.assign(e.value.search,{page:1,limit:10,supplierId:null,projectId:null,operationType:null,type:null}),m()}function F(r){H(r).then(()=>{e.value.search.limit=r,m()})}function _(r=1){V(r).then(()=>{e.value.search.page=r,m()})}function R({prop:r,order:a}){A(r,a).then(()=>m())}return(r,a)=>{const L=u("ElInput"),y=u("ElFormItem"),$=me,v=u("ElButton"),N=u("ElForm"),K=Ie,Q=u("ElDivider"),J=we,O=u("el-button"),q=_e,G=be,W=u("el-row"),X=u("el-table-column"),d=u("ElTableColumn"),b=u("el-text"),C=Ce,z=u("el-tag"),Y=u("el-empty"),Z=u("ElTable"),ee=u("ElPagination"),te=he,ae=ue("loading");return s(),ce("div",{class:de({"absolute-container":e.value.tableAutoHeight})},[o(te,null,{default:l(()=>[o(K,{"show-toggle":!1},{default:l(({fold:t,toggle:E})=>[o(N,{model:e.value.search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[o(y,null,{default:l(()=>[o(L,{modelValue:e.value.search.supplierId,"onUpdate:modelValue":a[0]||(a[0]=c=>e.value.search.supplierId=c),placeholder:"员工ID",clearable:"",onKeydown:a[1]||(a[1]=T(c=>_(),["enter"])),onClear:a[2]||(a[2]=c=>_())},null,8,["modelValue"])]),_:1}),o(y,null,{default:l(()=>[o(L,{modelValue:e.value.search.projectId,"onUpdate:modelValue":a[3]||(a[3]=c=>e.value.search.projectId=c),placeholder:"用户名",clearable:"",onKeydown:a[4]||(a[4]=T(c=>_(),["enter"])),onClear:a[5]||(a[5]=c=>_())},null,8,["modelValue"])]),_:1}),o(y,null,{default:l(()=>[o(L,{modelValue:e.value.search.projectId,"onUpdate:modelValue":a[6]||(a[6]=c=>e.value.search.projectId=c),placeholder:"姓名",clearable:"",onKeydown:a[7]||(a[7]=T(c=>_(),["enter"])),onClear:a[8]||(a[8]=c=>_())},null,8,["modelValue"])]),_:1}),o(y,null,{default:l(()=>[o(v,{type:"primary",onClick:a[9]||(a[9]=c=>_())},{icon:l(()=>[o($,{name:"i-ep:search"})]),default:l(()=>[n(" 筛选 ")]),_:1}),o(v,{onClick:j},{icon:l(()=>[De]),default:l(()=>[n(" 重置 ")]),_:1}),o(v,{link:"",disabled:"",onClick:E},{icon:l(()=>[o($,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[n(" "+f(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(Q,{"border-style":"dashed"}),o(W,null,{default:l(()=>[o(J),o(G,null,{default:l(()=>[o(O,{size:"default"},{default:l(()=>[n(" 导出 ")]),_:1}),o(q,{border:e.value.border,"onUpdate:border":a[10]||(a[10]=t=>e.value.border=t),tableAutoHeight:e.value.tableAutoHeight,"onUpdate:tableAutoHeight":a[11]||(a[11]=t=>e.value.tableAutoHeight=t),checkList:e.value.checkList,"onUpdate:checkList":a[12]||(a[12]=t=>e.value.checkList=t),columns:I.value,"onUpdate:columns":a[13]||(a[13]=t=>I.value=t),"line-height":e.value.lineHeight,"onUpdate:lineHeight":a[14]||(a[14]=t=>e.value.lineHeight=t),stripe:e.value.stripe,"onUpdate:stripe":a[15]||(a[15]=t=>e.value.stripe=t),style:{"margin-left":"12px"},onQueryData:m},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),pe((s(),i(Z,{border:e.value.border,size:e.value.lineHeight,stripe:e.value.stripe,class:"my-4",data:e.value.dataList,"highlight-current-row":"",height:"100%",onSortChange:R,onSelectionChange:a[16]||(a[16]=t=>e.value.batch.selectionDataList=t)},{empty:l(()=>[o(Y,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[o(X,{align:"center",type:"selection"}),e.value.batch.enable?(s(),i(d,{key:0,type:"selection","show-overflow-tooltip":"",align:"center",fixed:""})):p("",!0),e.value.checkList.includes("typeId")?(s(),i(d,{key:1,"show-overflow-tooltip":"",align:"center",prop:"",width:"180",label:"员工ID"},{default:l(({row:t})=>[t.typeId==1?(s(),i(b,{key:0},{default:l(()=>[n("内部调查站")]),_:1})):(s(),i(b,{key:1},{default:l(()=>[n(f(t.typeId?t.typeId:"-"),1)]),_:2},1024))]),_:1})):p("",!0),e.value.checkList.includes("type")?(s(),i(d,{key:2,"show-overflow-tooltip":"",align:"center",prop:"",label:"用户名"},{default:l(({row:t})=>[t.type==1?(s(),i(b,{key:0},{default:l(()=>[n("待审金额")]),_:1})):p("",!0),t.type==2?(s(),i(b,{key:1},{default:l(()=>[n("可用金额")]),_:1})):p("",!0)]),_:1})):p("",!0),e.value.checkList.includes("remark")?(s(),i(d,{key:3,"show-overflow-tooltip":"",align:"center",prop:"remark",label:"姓名"},{default:l(({row:t})=>[o(b,{class:"mx-1"},{default:l(()=>[n(f(t.remark?t.remark:"-"),1)]),_:2},1024)]),_:1})):p("",!0),e.value.checkList.includes("beforeBalance")?(s(),i(d,{key:4,"show-overflow-tooltip":"",align:"center",prop:"beforeBalance",width:"150",label:"所属组"},{default:l(({row:t})=>[o(C),n(f(t.beforeBalance||0),1)]),_:1})):p("",!0),e.value.checkList.includes("addAndSubtraction")?(s(),i(d,{key:5,"show-overflow-tooltip":"",align:"center",prop:"addAndSubtraction",width:"150",label:"职位"},{default:l(({row:t})=>[t.operationType===2?(s(),i(b,{key:0,type:"danger",class:"mx-1"},{default:l(()=>[n("-"),o(C),n(f(Math.abs(t.addAndSubtraction)),1)]),_:2},1024)):(s(),i(b,{key:1,type:"success",class:"mx-1"},{default:l(()=>[n(" +"),o(C),n(f(Math.abs(t.addAndSubtraction)),1)]),_:2},1024))]),_:1})):p("",!0),e.value.checkList.includes("afterBalance")?(s(),i(d,{key:6,"show-overflow-tooltip":"",align:"center",prop:"afterBalance",width:"150",label:"总业绩"},{default:l(({row:t})=>[o(C),n(f(t.afterBalance||0),1)]),_:1})):p("",!0),e.value.checkList.includes("createTime")?(s(),i(d,{key:7,"show-overflow-tooltip":"",align:"center",prop:"createTime",label:"待审提成"},{default:l(({row:t})=>[o(z,{effect:"plain",type:"info"},{default:l(()=>[n(f(h(S)(t.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),e.value.checkList.includes("createTime")?(s(),i(d,{key:8,"show-overflow-tooltip":"",align:"center",prop:"createTime",label:"可用提成"},{default:l(({row:t})=>[o(z,{effect:"plain",type:"info"},{default:l(()=>[n(f(h(S)(t.createTime)),1)]),_:2},1024)]),_:1})):p("",!0),e.value.checkList.includes("createTime")?(s(),i(d,{key:9,align:"center",width:"200",label:"操作"},{default:l(({row:t})=>[o(v,{type:"primary",size:"small",plain:"",onClick:E=>U(t)},{default:l(()=>[n(" 财务日志 ")]),_:2},1032,["onClick"]),o(v,{type:"primary",size:"small",plain:"",onClick:E=>M(t)},{default:l(()=>[n(" 加减款 ")]),_:2},1032,["onClick"])]),_:1})):p("",!0)]),_:1},8,["border","size","stripe","data"])),[[ae,e.value.loading]]),o(ee,{"current-page":h(g).page,total:h(g).total,"page-size":h(g).size,"page-sizes":h(g).sizes,layout:h(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:F,onCurrentChange:_},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(Ee,{ref_key:"plusMinusPaymentsRef",ref:B,onFetchData:m},null,512),o(Te,{ref_key:"financeLogRef",ref:D},null,512)],2)}}}),Fe=ye($e,[["__scopeId","data-v-f69f7336"]]);export{Fe as default};
