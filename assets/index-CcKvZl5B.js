
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{e as q}from"./index-CAwtv3Rz.js";import{g as L,a as M}from"./zh_Hans-CZwS7bed.js";import{z as R}from"./zh_Hans-B39mJ-rS.js";import{k as p,d as U,r as f,n as j,E as _,a as u,q as B,s as I,i as t,o as g,b,f as o,w as i,F as O,t as P,L as S}from"./index-CLIJ1bkJ.js";const y={list:n=>p.post("notice/getNotice",n),create:n=>p.post("notice/insertNotice",n),edit:n=>p.post("notice/updateNotice",n),delete:n=>p.post("notice/deleteNotice",n)},H=U({__name:"index",props:["id","row"],setup(n,{expose:x}){const v=n,h=[{label:"公告",value:1},{label:"常见问题",value:2},{label:"帮助",value:3}],a=f(!1),c=f(),e=f({id:v.id,title:"",type:"",text:"",top:!1}),V=f({title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),k=[L({locale:M})];function w(s){e.value.text=s}j(()=>{e.value.id!==""&&C()});function C(){try{a.value=!0,e.value=v.row,a.value=!1}catch{}finally{a.value=!1}}return x({submit(){return new Promise(s=>{e.value.id===""?c.value&&c.value.validate(l=>{if(l)try{delete e.value.id,a.value=!0,y.create(e.value).then(()=>{a.value=!1,_.success({message:"新增成功",center:!0}),s()})}catch{}finally{a.value=!1}}):c.value&&c.value.validate(l=>{if(l)try{a.value=!0,y.edit(e.value).then(()=>{a.value=!1,_.success({message:"编辑成功",center:!0}),s()})}catch{}finally{a.value=!1}})})}}),(s,l)=>{const m=u("el-input"),d=u("el-form-item"),E=u("el-option"),F=u("el-select"),N=u("el-checkbox"),z=u("ElForm"),D=B("loading");return I((g(),b("div",null,[o(z,{ref_key:"formRef",ref:c,model:t(e),rules:t(V),"label-width":"120px"},{default:i(()=>[o(d,{label:"标题",prop:"title"},{default:i(()=>[o(m,{modelValue:t(e).title,"onUpdate:modelValue":l[0]||(l[0]=r=>t(e).title=r),placeholder:"请输入标题",clearable:"",onChange:l[1]||(l[1]=()=>{})},null,8,["modelValue"])]),_:1}),o(d,{label:"类型",prop:"type"},{default:i(()=>[o(F,{modelValue:t(e).type,"onUpdate:modelValue":l[2]||(l[2]=r=>t(e).type=r),"value-key":"",placeholder:"类型",clearable:"",filterable:""},{default:i(()=>[(g(),b(O,null,P(h,r=>o(E,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"内容"},{default:i(()=>[o(t(q),{class:"editor",value:t(e).text,plugins:k,locale:t(R),onChange:w},null,8,["value","locale"])]),_:1}),o(d,{label:""},{default:i(()=>[o(N,{modelValue:t(e).top,"onUpdate:modelValue":l[3]||(l[3]=r=>t(e).top=r),label:"置顶",size:"large"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,t(a)]])}}}),T=S(H,[["__scopeId","data-v-ee3968c4"]]),K=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{T as D,y as a,K as i};
