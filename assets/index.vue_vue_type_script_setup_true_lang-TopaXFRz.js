
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as C}from"./project_settlement-CQnclxsm.js";import{d as N,r as s,a as d,q as S,s as D,o as m,b as v,f as a,w as i,y as B,g as y,z as p,e as T,j as q,E as b}from"./index-Ds6ajqkj.js";const z={key:0,style:{"margin-bottom":"20px"}},H={key:1,style:{"margin-bottom":"20px"}},L={style:{flex:"auto"}},$=N({name:"InvoicingEdit",__name:"index",emits:["success"],setup(M,{expose:h,emit:x}){const j=x,c=s(!1),r=s({projectSettlementId:[],type:null}),t=s(),u=s(),l=s(!1);async function k(o,e){r.value.type=o,t.value=e,e.forEach(n=>{r.value.projectSettlementId.push(n.id)}),u.value=o===1?"开票":"结算",l.value=!0}async function I(){try{if(c.value=!0,(await C.InvoicingSettlementEdit(r.value)).status===-1)return b.warning({message:"操作失败",center:!0});j("success"),c.value=!1,b.success({message:"操作成功",center:!0}),_()}catch{}finally{c.value=!1}}function _(){Object.assign(r.value,{projectSettlementId:[],type:null}),l.value=!1}return h({showEdit:k}),(o,e)=>{const n=d("el-table-column"),w=d("el-table"),f=d("el-button"),V=d("el-dialog"),E=S("loading");return D((m(),v("div",null,[a(V,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=g=>l.value=g),title:u.value,width:"700","before-close":_},{footer:i(()=>[B("div",L,[a(f,{onClick:e[0]||(e[0]=g=>l.value=!1)},{default:i(()=>[y(" 取消 ")]),_:1}),a(f,{type:"primary",onClick:I},{default:i(()=>[y(" 确定 ")]),_:1})])]),default:i(()=>[t.value.length>1?(m(),v("div",z,"确认对以下项目进行"+p(u.value)+"操作吗?",1)):(m(),v("div",H,"确认对项目ID:"+p(t.value[0].projectId)+"+项目名称:"+p(t.value[0].projectName)+"进行"+p(u.value)+"操作吗?",1)),t.value.length>1?(m(),T(w,{key:2,data:t.value,"row-key":"id"},{default:i(()=>[a(n,{width:"80",type:"index",align:"left",label:"序号"}),a(n,{align:"left",prop:"projectId",label:"项目ID"}),a(n,{align:"left",prop:"projectName",label:"项目名称"})]),_:1},8,["data"])):q("",!0)]),_:1},8,["modelValue","title"])])),[[E,c.value]])}}});export{$ as _};
