
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{x as ve,d as ge,aK as Ie,r as _,a5 as A,k as he,a as c,p as ke,o as r,b as U,f as a,w as o,i as t,q as k,az as $,F as K,t as q,e as s,g as i,H as f,I as S,j as d,S as Se,N as we,aM as Ce,aN as Ne,ba as Ve,ap as Le,aG as je,aH as Te,s as xe,aq as V,R as ze}from"./index-O4wggHBV.js";import{_ as De}from"./index.vue_vue_type_style_index_0_lang-BUj70Ffr.js";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang-YtZwJdhz.js";import{u as Ue}from"./user_customer-BUpPiPGx.js";import"./user_customer-ByPUDGTB.js";const $e={list:g=>ve.post("callback/getMemberSurveyRecord",g)},Pe=g=>(je("data-v-d1e352eb"),g=g(),Te(),g),Be=Pe(()=>xe("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Me=ge({name:"investigation_records",__name:"list",setup(g){const G=Ue(),{getParams:O,pagination:I,onSizeChange:Q,onCurrentChange:J}=Ie(),L=_(!1),P=_([]),W=_(""),p=_([]),j=_(!0),T=_(!1),x=_("default"),z=_(!1),X=_(),D=_([{prop:"memberId",label:"会员ID",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"memberName",label:"所属组",sortable:!0,checked:!0},{prop:"projectId",label:"项目ID",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"原价/会员价",sortable:!0,checked:!0},{prop:"ipBelong",label:"IP/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),u=A({memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),h=A({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间过短","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与","和解"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function Y(){u.pageNo=1,w()}function Z(m){Q(m).then(()=>w())}function y(m=1){J(m).then(()=>w())}async function w(){try{L.value=!0;const m={...O(),...u},{data:l}=await $e.list(m);P.value=l.memberSurveyRecordInfoList,X.value=l.currencyType,I.value.total=l.total,L.value=!1}catch{}finally{L.value=!1}}function ee(m){W.value=m}function te(){Object.assign(u,{memberId:"",randomIdentityId:"",memberGroupId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),w()}return he(async()=>{h.customerList=await G.getCustomerList(),D.value.forEach(m=>{m.checked&&p.value.push(m.prop)}),w()}),(m,l)=>{const C=c("el-input"),v=c("el-form-item"),B=c("el-option"),M=c("el-select"),F=we,E=c("ElButton"),le=c("ElFormItem"),oe=c("ElForm"),ae=Ee,ne=c("ElDivider"),re=De,se=c("el-button"),ue=Ce,ie=Ne,de=c("el-row"),b=c("el-table-column"),R=Ve,N=c("el-text"),H=c("ElTableColumn"),pe=c("el-empty"),ce=c("el-table"),me=c("ElPagination"),be=Le,fe=ke("loading");return r(),U("div",{class:Se({"absolute-container":t(z)})},[a(be,null,{default:o(()=>[a(ae,{"show-toggle":!1},{default:o(({fold:e,toggle:_e})=>[a(oe,{model:t(u),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[a(v,{label:""},{default:o(()=>[a(C,{modelValue:t(u).memberId,"onUpdate:modelValue":l[0]||(l[0]=n=>t(u).memberId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID"},null,8,["modelValue"])]),_:1}),k(a(v,{label:""},{default:o(()=>[a(C,{modelValue:t(u).randomIdentityId,"onUpdate:modelValue":l[1]||(l[1]=n=>t(u).randomIdentityId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份",onKeydown:l[2]||(l[2]=$(n=>y(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!e]]),a(v,{label:""},{default:o(()=>[a(C,{modelValue:t(u).projectId,"onUpdate:modelValue":l[3]||(l[3]=n=>t(u).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID",onKeydown:l[4]||(l[4]=$(n=>y(),["enter"]))},null,8,["modelValue"])]),_:1}),k(a(v,{label:""},{default:o(()=>[a(C,{modelValue:t(u).projectName,"onUpdate:modelValue":l[5]||(l[5]=n=>t(u).projectName=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称",onKeydown:l[6]||(l[6]=$(n=>y(),["enter"]))},null,8,["modelValue"])]),_:2},1536),[[V,!e]]),k(a(v,{label:""},{default:o(()=>[a(M,{modelValue:t(u).customerId,"onUpdate:modelValue":l[7]||(l[7]=n=>t(u).customerId=n),clearable:"",filterable:"",placeholder:"客户简称",onChange:l[8]||(l[8]=n=>y())},{default:o(()=>[(r(!0),U(K,null,q(t(h).customerList,n=>(r(),s(B,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!e]]),k(a(v,{label:""},{default:o(()=>[a(C,{modelValue:t(u).ip,"onUpdate:modelValue":l[9]||(l[9]=n=>t(u).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[V,!e]]),k(a(v,{label:""},{default:o(()=>[a(M,{modelValue:t(u).surveyStatus,"onUpdate:modelValue":l[10]||(l[10]=n=>t(u).surveyStatus=n),clearable:"",filterable:"",placeholder:"调查状态",onChange:l[11]||(l[11]=n=>y())},{default:o(()=>[(r(!0),U(K,null,q(t(h).surveyStatusList,(n,ye)=>(r(),s(B,{label:n,value:ye+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!e]]),a(le,null,{default:o(()=>[a(E,{type:"primary",onClick:l[12]||(l[12]=n=>y())},{icon:o(()=>[a(F,{name:"i-ep:search"})]),default:o(()=>[i(" 筛选 ")]),_:1}),a(E,{onClick:te},{icon:o(()=>[Be]),default:o(()=>[i(" 重置 ")]),_:1}),a(E,{link:"",onClick:_e},{icon:o(()=>[a(F,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[i(" "+f(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(ne,{"border-style":"dashed"}),a(de,null,{default:o(()=>[a(re),a(ie,null,{default:o(()=>[a(se,{size:"default"},{default:o(()=>[i(" 导出 ")]),_:1}),a(ue,{border:t(j),"onUpdate:border":l[13]||(l[13]=e=>S(j)?j.value=e:null),tableAutoHeight:t(z),"onUpdate:tableAutoHeight":l[14]||(l[14]=e=>S(z)?z.value=e:null),checkList:t(p),"onUpdate:checkList":l[15]||(l[15]=e=>S(p)?p.value=e:null),columns:t(D),"onUpdate:columns":l[16]||(l[16]=e=>S(D)?D.value=e:null),"line-height":t(x),"onUpdate:lineHeight":l[17]||(l[17]=e=>S(x)?x.value=e:null),stripe:t(T),"onUpdate:stripe":l[18]||(l[18]=e=>S(T)?T.value=e:null),style:{"margin-left":"12px"},onQueryData:Y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),k((r(),s(ce,{border:t(j),data:t(P),size:t(x),stripe:t(T),onSelectionChange:ee},{empty:o(()=>[a(pe,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[a(b,{align:"center",type:"selection"}),t(p).includes("memberId")?(r(),s(b,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",width:"180",label:"会员ID"})):d("",!0),t(p).includes("randomIdentityId")?(r(),s(b,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:o(({row:e})=>[i(f(e.randomIdentityId?e.randomIdentityId:"-"),1)]),_:1})):d("",!0),t(p).includes("memberName")?(r(),s(b,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"所属组"},{default:o(({row:e})=>[i(f(e.memberName?e.memberName:"-"),1)]),_:1})):d("",!0),t(p).includes("projectId")?(r(),s(b,{key:3,align:"center",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"})):d("",!0),t(p).includes("projectName")?(r(),s(b,{key:4,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[i(f(e.projectName?e.projectName:"-"),1)]),_:1})):d("",!0),t(p).includes("customerShortName")?(r(),s(b,{key:5,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称",width:"100"},{default:o(({row:e})=>[i(f(e.customerShortName?e.customerShortName:"-"),1)]),_:1})):d("",!0),t(p).includes("allocationType")?(r(),s(b,{key:6,align:"center","show-overflow-tooltip":"",width:"100",label:"分配类型"},{default:o(({row:e})=>[i(f(t(h).allocationTypeList[e.allocationType-1]),1)]),_:1})):d("",!0),t(p).includes("price")?(r(),s(b,{key:7,align:"center",prop:"h","show-overflow-tooltip":"",label:"原价/会员价"},{default:o(({row:e})=>[a(R),i(f(e.doMoneyPrice||0)+" / ",1),a(R),i(f(e.memberPrice||0),1)]),_:1})):d("",!0),t(p).includes("ipBelong")?(r(),s(b,{key:8,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):d("",!0),t(p).includes("surveyTime")?(r(),s(b,{key:9,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:o(({row:e})=>[i(f(e.surveyTime?e.surveyTime+"min":0)+"/ "+f(e.projectTime?e.projectTime+"min":0),1)]),_:1})):d("",!0),t(p).includes("surveyStatus")?(r(),s(H,{key:10,align:"center","show-overflow-tooltip":"",prop:"",label:"调查状态"},{default:o(({row:e})=>[e.surveyStatus===3?(r(),s(N,{key:0,class:"mx-1",type:"primary"},{default:o(()=>[i("配额满")]),_:1})):d("",!0),e.surveyStatus===1?(r(),s(N,{key:1,class:"mx-1",type:"success"},{default:o(()=>[i("完成")]),_:1})):d("",!0),e.surveyStatus===2?(r(),s(N,{key:2,class:"mx-1",type:"danger"},{default:o(()=>[i("被甄别")]),_:1})):d("",!0),e.surveyStatus===4?(r(),s(N,{key:3,class:"mx-1",type:"warning"},{default:o(()=>[i("安全终止")]),_:1})):d("",!0),e.surveyStatus===5?(r(),s(N,{key:4,class:"mx-1",type:"info"},{default:o(()=>[i("未完成")]),_:1})):d("",!0)]),_:1})):d("",!0),t(p).includes("viceStatus")?(r(),s(H,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:o(({row:e})=>[i(f(t(h).viceStatusList[e.viceStatus-1]?t(h).viceStatusList[e.viceStatus-1]:"-"),1)]),_:1})):d("",!0)]),_:1},8,["border","data","size","stripe"])),[[fe,t(L)]]),a(me,{"current-page":t(I).page,total:t(I).total,"page-size":t(I).size,"page-sizes":t(I).sizes,layout:t(I).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:Z,onCurrentChange:y},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),qe=ze(Me,[["__scopeId","data-v-d1e352eb"]]);export{qe as default};
