
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as A}from"./user_customer-x4r0lsmR.js";import{d as D,r as b,A as M,a5 as Q,bd as W,l as z,n as J,a as m,o as s,b as r,f as e,w as a,F as V,t as x,e as c,j as f,g as O,s as d,i as E,at as G,aJ as H,aK as X,R as Y}from"./index-DFgFyKCJ.js";const p=C=>(H("data-v-e653452a"),C=C(),X(),C),Z=p(()=>d("div",{class:"card-header"},[d("span",null,"基本信息")],-1)),$=p(()=>d("div",{class:"card-header"},[d("span",null,"权限信息")],-1)),ee=p(()=>d("div",{class:"card-header"},[d("span",null,"重定向配置")],-1)),ae=p(()=>d("span",null," http://front-saas.surveyssaas.com/#/redirect?status=c&uid=[uid] ",-1)),te={key:0},le=p(()=>d("span",null," http://front-saas.surveyssaas.com/#/redirect?status=q&uid=[uid] ",-1)),ne={key:0},oe=p(()=>d("span",null," http://front-saas.surveyssaas.com/#/redirect?status=s&uid=[uid] ",-1)),ue={key:0},se=p(()=>d("span",null," http://front-saas.surveyssaas.com/#/redirect?status=t&uid=[uid] ",-1)),de={key:0},ie={class:"card-header"},re=p(()=>d("span",null,"服务端回调配置",-1)),me=p(()=>d("span",null,"http://47.96.98.102:9100/callback/serviceCallback?status=c&uid=[uid]",-1)),pe={key:0},fe=p(()=>d("span",null,"http://47.96.98.102:9100/callback/serviceCallback?status=q&uid=[uid]",-1)),ce={key:0},ve=p(()=>d("span",null,"http://47.96.98.102:9100/callback/serviceCallback?status=s&uid=[uid]",-1)),_e={key:0},be=p(()=>d("span",null,"http://47.96.98.102:9100/callback/serviceCallback?status=t&uid=[uid]",-1)),Ce={key:0},ge=D({__name:"index",props:{leftTab:Object,tabIndex:Number},setup(C){const K=C,U=b([]),q=M("validateTopTabs"),B=Q({customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择负责人",trigger:"change"}]}),N=b("basicSettings"),L=b(!1),y=b([]),P=v=>{if(v)t.value.tenantCustomerConfigInfoList.push({callbackWay:1,isEncryption:2,encryptionId:"",secretKey:""});else{const n=t.value.tenantCustomerConfigInfoList.findIndex(i=>i.callbackWay===1);n!==-1&&t.value.tenantCustomerConfigInfoList.splice(n,1)}},w=async(v,n)=>{if(v){const i=y.value.find(u=>u.id===v),o=await A.generateKey({type:i.name});t.value.tenantCustomerConfigInfoList[n].secretKey=o.data}};W(async()=>{const{data:v}=await z.getTenantStaffList();U.value=v,L.value=t.value.tenantCustomerConfigInfoList.length===2;const n=await A.getTenantSecretKeyConfigList();y.value=n.data});const S=b(null),t=b(K.leftTab);return J(()=>{q(S.value)}),(v,n)=>{const i=m("el-input"),o=m("el-form-item"),u=m("el-col"),_=m("el-option"),I=m("el-select"),h=m("el-row"),k=m("el-card"),g=m("el-switch"),j=m("el-input-number"),T=m("el-tab-pane"),F=m("el-checkbox"),R=m("el-tabs");return s(),r("div",null,[e(E(G),{ref_key:"formRef",ref:S,rules:E(B),model:t.value,"label-width":"100px"},{default:a(()=>[e(R,{modelValue:N.value,"onUpdate:modelValue":n[24]||(n[24]=l=>N.value=l)},{default:a(()=>[e(T,{label:"基础设置",name:"basicSettings"},{default:a(()=>[e(k,{class:"box-card"},{header:a(()=>[Z]),default:a(()=>[e(h,{gutter:24},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(o,{label:"客户名称",prop:"customerAccord"},{default:a(()=>[e(i,{modelValue:t.value.customerAccord,"onUpdate:modelValue":n[0]||(n[0]=l=>t.value.customerAccord=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"客户简称",prop:"customerShortName"},{default:a(()=>[e(i,{modelValue:t.value.customerShortName,"onUpdate:modelValue":n[1]||(n[1]=l=>t.value.customerShortName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"公司名称",prop:"companyName"},{default:a(()=>[e(i,{modelValue:t.value.companyName,"onUpdate:modelValue":n[2]||(n[2]=l=>t.value.companyName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"客户姓名",prop:"customerName"},{default:a(()=>[e(i,{modelValue:t.value.customerName,"onUpdate:modelValue":n[3]||(n[3]=l=>t.value.customerName=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"手机号码",prop:"customerPhone"},{default:a(()=>[e(i,{modelValue:t.value.customerPhone,"onUpdate:modelValue":n[4]||(n[4]=l=>t.value.customerPhone=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"电子邮箱",prop:"emailAddress"},{default:a(()=>[e(i,{modelValue:t.value.emailAddress,"onUpdate:modelValue":n[5]||(n[5]=l=>t.value.emailAddress=l),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"负责人",prop:"chargeId"},{default:a(()=>[e(I,{modelValue:t.value.chargeId,"onUpdate:modelValue":n[6]||(n[6]=l=>t.value.chargeId=l),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{default:a(()=>[(s(!0),r(V,null,x(U.value,l=>(s(),c(_,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(o,{label:"结算周期",prop:"settlementCycle"},{default:a(()=>[e(I,{modelValue:t.value.settlementCycle,"onUpdate:modelValue":n[7]||(n[7]=l=>t.value.settlementCycle=l)},{default:a(()=>[e(_,{label:"30天",value:30}),e(_,{label:"60天",value:60}),e(_,{label:"90天",value:90})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{class:"box-card"},{header:a(()=>[$]),default:a(()=>[e(h,{gutter:24},{default:a(()=>[e(u,{span:4},{default:a(()=>[e(o,{label:"客户状态"},{default:a(()=>[e(g,{modelValue:t.value.customerStatus,"onUpdate:modelValue":n[8]||(n[8]=l=>t.value.customerStatus=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:4},{default:a(()=>[e(o,{label:"前置问卷"},{default:a(()=>[e(g,{modelValue:t.value.antecedentQuestionnaire,"onUpdate:modelValue":n[9]||(n[9]=l=>t.value.antecedentQuestionnaire=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:16},{default:a(()=>[e(o,{label:"风险控制"},{default:a(()=>[e(g,{modelValue:t.value.riskControl,"onUpdate:modelValue":n[10]||(n[10]=l=>t.value.riskControl=l),"active-value":2,"inactive-value":1,"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.riskControl===2?(s(),c(u,{key:0,span:12},{default:a(()=>[e(o,{label:"营业限额/月"},{default:a(()=>[e(j,{modelValue:t.value.turnover,"onUpdate:modelValue":n[11]||(n[11]=l=>t.value.turnover=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.value.riskControl===2?(s(),c(u,{key:1,span:12},{default:a(()=>[e(o,{label:"审核率Min值"},{default:a(()=>[e(i,{modelValue:t.value.rateAudit,"onUpdate:modelValue":n[12]||(n[12]=l=>t.value.rateAudit=l),"controls-position":"right",min:1,type:"number"},{append:a(()=>[O(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),e(T,{label:"端口设置",name:"portSettings"},{default:a(()=>[e(k,{class:"box-card"},{header:a(()=>[ee]),default:a(()=>[e(h,{gutter:24},{default:a(()=>[e(u,{span:24},{default:a(()=>[e(o,{label:"加密"},{default:a(()=>[e(g,{modelValue:t.value.tenantCustomerConfigInfoList[0].isEncryption,"onUpdate:modelValue":n[13]||(n[13]=l=>t.value.tenantCustomerConfigInfoList[0].isEncryption=l),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[0].isEncryption===1?(s(),r(V,{key:0},[e(u,{span:24},{default:a(()=>[e(o,{label:"加密方式"},{default:a(()=>[e(I,{onChange:n[14]||(n[14]=l=>w(l,0)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[0].encryptionId,"onUpdate:modelValue":n[15]||(n[15]=l=>t.value.tenantCustomerConfigInfoList[0].encryptionId=l)},{default:a(()=>[(s(!0),r(V,null,x(y.value,l=>(s(),c(_,{label:l.name,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"密钥"},{default:a(()=>[e(i,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[0].secretKey,"onUpdate:modelValue":n[16]||(n[16]=l=>t.value.tenantCustomerConfigInfoList[0].secretKey=l)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),c(u,{key:1,span:24},{default:a(()=>[e(o,{label:"IP白名单"},{default:a(()=>[e(i,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[0].whitelistIp,"onUpdate:modelValue":n[17]||(n[17]=l=>t.value.tenantCustomerConfigInfoList[0].whitelistIp=l)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:a(()=>[e(o,{label:"成功重定向"},{default:a(()=>[ae,t.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",te,"&hash =[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"配额满重定向"},{default:a(()=>[le,t.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",ne,"&hash=[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"被甄别重定向"},{default:a(()=>[oe,t.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",ue,"&hash=[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"安全重定向"},{default:a(()=>[se,t.value.tenantCustomerConfigInfoList[0].encryptionId?(s(),r("span",de,"&hash=[hash]")):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{class:"box-card"},{header:a(()=>[d("div",ie,[e(F,{modelValue:L.value,"onUpdate:modelValue":n[18]||(n[18]=l=>L.value=l),size:"large",onChange:P},{default:a(()=>[re]),_:1},8,["modelValue"])])]),default:a(()=>[t.value.tenantCustomerConfigInfoList.length===2?(s(),c(h,{key:0,gutter:24},{default:a(()=>[e(u,{span:24},{default:a(()=>[e(o,{label:"加密"},{default:a(()=>[e(g,{modelValue:t.value.tenantCustomerConfigInfoList[1].isEncryption,"onUpdate:modelValue":n[19]||(n[19]=l=>t.value.tenantCustomerConfigInfoList[1].isEncryption=l),"active-value":1,"inactive-value":2,"inline-prompt":"","active-text":"加密","inactive-text":"不加密"},null,8,["modelValue"])]),_:1})]),_:1}),t.value.tenantCustomerConfigInfoList[1].isEncryption===1?(s(),r(V,{key:0},[e(u,{span:24},{default:a(()=>[e(o,{label:"加密方式"},{default:a(()=>[e(I,{onChange:n[20]||(n[20]=l=>w(l,1)),clearable:"",modelValue:t.value.tenantCustomerConfigInfoList[1].encryptionId,"onUpdate:modelValue":n[21]||(n[21]=l=>t.value.tenantCustomerConfigInfoList[1].encryptionId=l)},{default:a(()=>[(s(!0),r(V,null,x(y.value,l=>(s(),c(_,{label:l.name,value:l.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"密钥"},{default:a(()=>[e(i,{disabled:"",modelValue:t.value.tenantCustomerConfigInfoList[1].secretKey,"onUpdate:modelValue":n[22]||(n[22]=l=>t.value.tenantCustomerConfigInfoList[1].secretKey=l)},null,8,["modelValue"])]),_:1})]),_:1})],64)):(s(),c(u,{key:1,span:24},{default:a(()=>[e(o,{label:"IP白名单"},{default:a(()=>[e(i,{placeholder:"输入ip两个ip之间用,分开",modelValue:t.value.tenantCustomerConfigInfoList[1].whitelistIp,"onUpdate:modelValue":n[23]||(n[23]=l=>t.value.tenantCustomerConfigInfoList[1].whitelistIp=l)},null,8,["modelValue"])]),_:1})]),_:1})),e(u,{span:24},{default:a(()=>[e(o,{label:"成功回调"},{default:a(()=>[me,t.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",pe,"&hash=[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"配额满回调"},{default:a(()=>[fe,t.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",ce,"&hash=[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"被甄别回调"},{default:a(()=>[ve,t.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",_e,"&hash=[hash]")):f("",!0)]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(o,{label:"安全终止回调"},{default:a(()=>[be,t.value.tenantCustomerConfigInfoList[1].encryptionId?(s(),r("span",Ce,"&hash=[hash]")):f("",!0)]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","model"])])}}}),Ie=Y(ge,[["__scopeId","data-v-e653452a"]]);export{Ie as default};
