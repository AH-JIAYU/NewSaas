
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as Q,r as p,n as W,a as r,o,e as c,w as e,y as _,f as a,g as s,b,z as u,t as V,j as I,F as z,p as X,aH as Y,aI as Z,L as $}from"./index-DG8rCAXq.js";import{a as ee}from"./department-Q01yTKO4.js";import{u as ae}from"./tenant_role-CpaiBTcF.js";import{u as te}from"./configuration_manager-Bi-slSvp.js";import{u as le}from"./position_manage-CkpJcwLX.js";import"./configuration_role-97T-Z7hP.js";import"./position_manage-B-kXr2Vc.js";const M=x=>(Y("data-v-4a19db51"),x=x(),Z(),x),oe=M(()=>_("div",{class:"card-header"},[_("div",{class:"leftTitle"},"基本信息")],-1)),se={key:1,class:"avatar"},ne={style:{"font-size":"14px"}},ue=M(()=>_("div",{class:"card-header"},[_("div",{class:"leftTitle"},"角色信息")],-1)),de={class:"card-header"},re={class:"leftTitle"},ce={key:0,style:{"margin-left":"20px","font-size":"14px"}},ie={class:"flex-c"},_e=Q({__name:"index",emits:["fetch-data"],setup(x,{expose:P,emit:B}){const j=te(),L=p([]),E=le(),T=p(),R=ae(),N=p(),y=p(),U={children:"children",label:"name"},g=p([]),m=p({}),F=B,k=p(!1),l=p();async function H(v){m.value=v,m.value.roleList=[m.value.role];const f={id:v.id},{status:n,data:w}=await X.list(f);w&&n===1&&(l.value=w.data[0]),g.value&&g.value.push(l.value.organizationalStructureId),k.value=!0}function D(){F("fetch-data"),g.value=[],k.value=!1}return W(async()=>{T.value=await E.getPositionManage(),L.value=await j.getStaff(),N.value=await R.getRole();const v=await ee.list({name:""});v.data&&(y.value=v.data,y.value.forEach(f=>{f.disabled=!0}))}),P({showEdit:H}),(v,f)=>{const n=r("el-col"),w=r("el-avatar"),S=r("el-row"),d=r("el-text"),i=r("el-form-item"),C=r("el-card"),q=r("el-checkbox"),A=r("el-checkbox-group"),G=r("el-tree"),J=r("el-form"),K=r("el-button"),O=r("el-drawer");return o(),c(O,{modelValue:k.value,"onUpdate:modelValue":f[1]||(f[1]=t=>k.value=t),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",draggable:"",size:"60%",title:"详情",onClose:D},{footer:e(()=>[_("div",ie,[a(K,{type:"primary",onClick:D},{default:e(()=>[s(" 关闭 ")]),_:1})])]),default:e(()=>[a(J,{"label-width":"100px","label-position":"right"},{default:e(()=>[a(C,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[a(S,{gutter:20},{default:e(()=>[a(n,{span:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:1.5},{default:e(()=>[l.value.avatar?(o(),c(w,{key:0,size:50,src:l.value.avatar},null,8,["src"])):(o(),b("div",se,u(l.value.name),1))]),_:1}),a(n,{style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"},span:6},{default:e(()=>[_("p",null,u(l.value.userName),1),_("p",ne,[s("账号:"),_("span",null,u(l.value.userName),1)])]),_:1})]),_:1}),a(S,{gutter:24},{default:e(()=>[a(n,{span:6},{default:e(()=>[a(i,{label:"员工ID:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.id?l.value.id:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"姓名:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.name?l.value.name:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"手机号:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.phoneNumber?l.value.phoneNumber:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"邮箱:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.email?l.value.email:"-"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"部门:"},{default:e(()=>[s(u(l.value.organizationalStructureName?l.value.organizationalStructureName:"-"),1)]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"职位:"},{default:e(()=>[(o(!0),b(z,null,V(T.value,t=>(o(),c(d,null,{default:e(()=>[l.value.positionId===t.id?(o(),c(d,{key:0},{default:e(()=>[s(u(t.name?t.name:"-"),1)]),_:2},1024)):I("",!0)]),_:2},1024))),256))]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"帐号状态:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.active?"启用":"禁用"),1)]}),_:1})]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(i,{label:"创建时间:"},{default:e(()=>[a(d,{class:"mx-1"},{default:e(()=>{var t;return[s(u((t=l.value)!=null&&t.createTime?l.value.createTime:"-"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(C,{class:"box-card"},{header:e(()=>[ue]),default:e(()=>[a(S,{gutter:24},{default:e(()=>[a(i,{label:"分配角色:"},{default:e(()=>{var t;return[(t=N.value)!=null&&t.length?(o(),c(A,{key:0,style:{"margin-left":"1.5rem"},modelValue:m.value.roleList,"onUpdate:modelValue":f[0]||(f[0]=h=>m.value.roleList=h)},{default:e(()=>[(o(!0),b(z,null,V(N.value,h=>(o(),c(q,{key:h.id,label:h.roleName,value:h.roleName,disabled:""},{default:e(()=>[s(u(h.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])):(o(),c(d,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]}),_:1})]),_:1})]),_:1}),a(C,{class:"box-card"},{header:e(()=>[_("div",de,[_("div",re,[s(" 部门信息"),m.value.enableChargePerson?(o(),b("span",ce,[s("负责人:"),(o(!0),b(z,null,V(L.value,t=>(o(),c(d,{key:t.id},{default:e(()=>[t.id===m.value.id?(o(),c(d,{key:0},{default:e(()=>[s(u(t.name),1)]),_:2},1024)):I("",!0)]),_:2},1024))),128))])):I("",!0)])])]),default:e(()=>[a(S,{gutter:24},{default:e(()=>[a(i,{label:"分配部门:"},{default:e(()=>[y.value.length>0?(o(),c(G,{key:0,style:{"max-width":"600px"},ref:"treeRef",disabled:!0,data:y.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expanded-keys":[],"default-checked-keys":g.value,"default-expand-all":"",props:U,onCheckChange:v.handleNodeClick},null,8,["data","default-checked-keys","onCheckChange"])):(o(),c(d,{key:1},{default:e(()=>[s("暂无数据")]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ye=$(_e,[["__scopeId","data-v-4a19db51"]]);export{ye as default};
