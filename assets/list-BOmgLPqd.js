
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as _e,aN as ge,r as s,a5 as ve,k as he,a as l,p as ke,o as p,b as ye,f as e,w as t,q as z,g as c,H as w,e as d,j as g,i as v,S as Ce,b9 as we,E as Ne,N as Se,aP as Ve,aQ as Ge,aq as Ie,aJ as Ee,aK as De,s as Le,ar as $,R as Me}from"./index-CUMm1uz-.js";import{_ as ze}from"./index.vue_vue_type_style_index_0_lang-BdCj-Ymn.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-BLV9d9nv.js";import{s as xe}from"./apiLoading-B0e4UhoD.js";import Fe from"./index-DddY4rWG.js";import Te from"./index-CwLGlfiO.js";import{a as B}from"./survey_vipGroup-C3wup_ou.js";import{u as Pe}from"./survey_vipGroup-GweFtIGr.js";import"./survey_vip-B1qquVuP.js";import"./survey_vip-VbH58Dl-.js";const $e=y=>(Ee("data-v-fe50caa5"),y=y(),De(),y),Be=$e(()=>Le("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),He=_e({name:"vipGroup",__name:"list",setup(y){const H=Pe(),{pagination:f,getParams:R,onSizeChange:j,onCurrentChange:A}=ge(),{format:q}=we(),N=s(!1),U=s([]);s();const S=s(),x=s(),V=s(!0),G=s(!1),I=s("default"),u=s([]),E=s(!1),D=s([{label:"会员组ID",prop:"memberGroupId",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组名称",prop:"memberGroupName",sortable:!0,disableCheck:!1,checked:!0},{label:"组长名称(ID)",prop:"groupLeaderMemberName",sortable:!0,disableCheck:!1,checked:!0},{label:"成员",prop:"memberNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"项目数",prop:"projectNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"创建时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0},{label:"组状态",prop:"groupStatus",sortable:!0,disableCheck:!1,checked:!0}]),n=ve({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function Y(){S.value.showEdit()}function Q(r){S.value.showEdit(r)}function J(r){x.value.showEdit(r)}function h(){f.value.page=1,C()}function K(r){j(r).then(()=>C())}function F(r=1){A(r).then(()=>C())}async function C(){N.value=!0;const r={...R(),...n};n.time&&n.time.length&&(r.beginTime=n.time[0]||"",r.endTime=n.time[1]||"");const{data:o}=await B.list(r);U.value=o.getMemberGroupInfoList,f.value.total=o.total,N.value=!1}function O(){Object.assign(n,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),C()}async function W(r,o){const k={memberGroupId:o,groupStatus:r},{status:b}=await xe(B.changestatus(k));b===1&&Ne.success({message:"修改成功"}),H.GroupNameList=null,h()}return he(()=>{D.value.forEach(r=>{r.checked&&u.value.push(r.prop)}),h()}),(r,o)=>{const k=l("el-input"),b=l("el-form-item"),T=l("el-option"),X=l("el-select"),Z=l("el-date-picker"),P=Se,L=l("ElButton"),ee=l("ElFormItem"),te=l("ElForm"),ae=Ue,oe=l("ElDivider"),M=l("el-button"),le=ze,ne=Ve,re=Ge,se=l("el-row"),m=l("el-table-column"),ue=l("el-link"),ie=l("el-tag"),me=l("ElSwitch"),pe=l("el-empty"),ce=l("el-table"),de=l("ElPagination"),fe=Ie,be=ke("loading");return p(),ye("div",{class:Ce({"absolute-container":E.value})},[e(fe,null,{default:t(()=>[e(ae,{"show-toggle":!1},{default:t(({fold:a,toggle:_})=>[e(te,{model:n,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:t(()=>[e(b,{label:""},{default:t(()=>[e(k,{modelValue:n.memberGroupId,"onUpdate:modelValue":o[0]||(o[0]=i=>n.memberGroupId=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID"},null,8,["modelValue"])]),_:1}),e(b,{label:""},{default:t(()=>[e(k,{modelValue:n.memberGroupName,"onUpdate:modelValue":o[1]||(o[1]=i=>n.memberGroupName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称"},null,8,["modelValue"])]),_:1}),e(b,{label:""},{default:t(()=>[e(k,{modelValue:n.groupLeaderMemberName,"onUpdate:modelValue":o[2]||(o[2]=i=>n.groupLeaderMemberName=i),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称"},null,8,["modelValue"])]),_:1}),z(e(b,{label:""},{default:t(()=>[e(X,{modelValue:n.groupStatus,"onUpdate:modelValue":o[3]||(o[3]=i=>n.groupStatus=i),clearable:"",placeholder:"会员组状态"},{default:t(()=>[e(T,{label:"关闭",value:1}),e(T,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!a]]),z(e(b,null,{default:t(()=>[e(Z,{modelValue:n.time,"onUpdate:modelValue":o[4]||(o[4]=i=>n.time=i),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[$,!a]]),e(ee,null,{default:t(()=>[e(L,{type:"primary",onClick:o[5]||(o[5]=i=>F())},{icon:t(()=>[e(P,{name:"i-ep:search"})]),default:t(()=>[c(" 筛选 ")]),_:1}),e(L,{onClick:O},{icon:t(()=>[Be]),default:t(()=>[c(" 重置 ")]),_:1}),e(L,{link:"",onClick:_},{icon:t(()=>[e(P,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:t(()=>[c(" "+w(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(oe,{"border-style":"dashed"}),e(se,null,{default:t(()=>[e(le,null,{default:t(()=>[e(M,{type:"primary",size:"default",onClick:Y},{default:t(()=>[c(" 新增 ")]),_:1})]),_:1}),e(re,null,{default:t(()=>[e(M,{size:"default"},{default:t(()=>[c(" 导出 ")]),_:1}),e(ne,{border:V.value,"onUpdate:border":o[6]||(o[6]=a=>V.value=a),tableAutoHeight:E.value,"onUpdate:tableAutoHeight":o[7]||(o[7]=a=>E.value=a),checkList:u.value,"onUpdate:checkList":o[8]||(o[8]=a=>u.value=a),columns:D.value,"onUpdate:columns":o[9]||(o[9]=a=>D.value=a),"line-height":I.value,"onUpdate:lineHeight":o[10]||(o[10]=a=>I.value=a),stripe:G.value,"onUpdate:stripe":o[11]||(o[11]=a=>G.value=a),style:{"margin-left":"12px"},onQueryData:h},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),z((p(),d(ce,{border:V.value,data:U.value,size:I.value,stripe:G.value},{empty:t(()=>[e(pe,{class:"vab-data-empty",description:"暂无数据"})]),default:t(()=>[e(m,{align:"center",type:"selection"}),u.value.includes("memberGroupId")?(p(),d(m,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):g("",!0),u.value.includes("memberGroupName")?(p(),d(m,{key:1,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"})):g("",!0),u.value.includes("groupLeaderMemberName")?(p(),d(m,{key:2,align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:t(({row:a})=>[c(w(a.groupLeaderMemberName?a.groupLeaderMemberName:"-"),1)]),_:1})):g("",!0),u.value.includes("memberNumber")?(p(),d(m,{key:3,align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"})):g("",!0),u.value.includes("projectNumber")?(p(),d(m,{key:4,align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:t(({row:a})=>[e(ue,{type:"primary",onClick:_=>J(a)},{default:t(()=>[c(w(a.projectNumber),1)]),_:2},1032,["onClick"])]),_:1})):g("",!0),u.value.includes("createTime")?(p(),d(m,{key:5,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:t(({row:a})=>[e(ie,{effect:"plain",type:"info"},{default:t(()=>[c(w(v(q)(a.createTime)),1)]),_:2},1024)]),_:1})):g("",!0),u.value.includes("groupStatus")?(p(),d(m,{key:6,align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:t(({row:a})=>[e(me,{modelValue:a.groupStatus,"onUpdate:modelValue":_=>a.groupStatus=_,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:_=>W(_,a.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):g("",!0),e(m,{align:"center",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:t(({row:a})=>[e(M,{size:"small",plain:"",type:"primary",onClick:_=>Q(a)},{default:t(()=>[c(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[be,N.value]]),e(de,{"current-page":v(f).page,total:v(f).total,"page-size":v(f).size,"page-sizes":v(f).sizes,layout:v(f).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:K,onCurrentChange:F},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Fe,{ref_key:"editRef",ref:S,onFetchData:h},null,512),e(Te,{ref_key:"checkRef",ref:x,onFetchData:h},null,512)],2)}}}),Xe=Me(He,[["__scopeId","data-v-fe50caa5"]]);export{Xe as default};
