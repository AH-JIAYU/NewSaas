
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as m,d as q,r as d,a1 as D,a as r,o as S,e as T,w as a,f as s,g as c,i as o,p as U,al as j,ai as V,_ as B}from"./index-JVwiYWif.js";const x={list:l=>m.post("memberLevel/getMemberLevelList",l),create:l=>m.post("memberLevel/addMemberLevel",l),edit:l=>m.post("memberLevel/updateMemberLevel",l),delete:l=>m.post("memberLevel/deleteMemberLevel",l)},E=q({__name:"index",emits:["queryData"],setup(l,{expose:y,emit:L}){const M=L,n=d(!1),f=d(""),e=d(),p=d(),R=D({levelName:[{required:!0,message:"请输入名称",trigger:"blur"}],additionRatio:[{required:!0,message:"请输入比例",trigger:"blur"}]});async function k(i){i?(f.value="编辑",e.value=j(i)):(f.value="添加",e.value={}),n.value=!0}function v(){p.value.resetFields(),n.value=!1}function w(){p.value.validate(async i=>{if(i){if(e.value.memberLevelId){const{status:t}=await x.edit(e.value);t===1&&V.success({message:"编辑成功",center:!0})}else{const{status:t}=await x.create(e.value);t===1&&V.success({message:"新增成功",center:!0})}M("queryData"),v()}})}return y({showEdit:k}),(i,t)=>{const _=r("el-input"),b=r("el-form-item"),N=r("el-form"),g=r("el-button"),C=r("el-dialog");return S(),T(C,{modelValue:o(n),"onUpdate:modelValue":t[2]||(t[2]=u=>U(n)?n.value=u:null),title:o(f),width:"600"},{footer:a(()=>[s(g,{onClick:v},{default:a(()=>[c(" 取消 ")]),_:1}),s(g,{type:"primary",onClick:w},{default:a(()=>[c(" 确定 ")]),_:1})]),default:a(()=>[s(N,{ref_key:"formRef",ref:p,model:o(e),rules:o(R),"label-width":"80px",inline:!1},{default:a(()=>[s(b,{label:"等级名称",prop:"levelName"},{default:a(()=>[s(_,{modelValue:o(e).levelName,"onUpdate:modelValue":t[0]||(t[0]=u=>o(e).levelName=u),maxlength:"100"},null,8,["modelValue"])]),_:1}),s(b,{label:"加成比例",prop:"additionRatio"},{default:a(()=>[s(_,{modelValue:o(e).additionRatio,"onUpdate:modelValue":t[1]||(t[1]=u=>o(e).additionRatio=u),modelModifiers:{number:!0},min:1,max:100,oninput:"if(value>100)value=100;if(value.length>4)value=value.slice(0,4);if(value<0)value=0",type:"number"},{append:a(()=>[c(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),I=B(E,[["__scopeId","data-v-edbedf99"]]),h=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{x as a,I as e,h as i};
