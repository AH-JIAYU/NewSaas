
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as A}from"./user_customer-D1WCF6qX.js";import{d as C,r as b,a as r,o as s,b as _,i as a,e as u,w as o,f as i,g as V,j as d,F as E,t as I,an as U,p as q,E as B,L as j}from"./index-DY9rXM9g.js";const R=C({name:"ProjeckEdit",__name:"index",emits:["fetch-data"],setup(F,{expose:v,emit:y}){const k=y,c=b(),e=b({dialogTableVisible:!1,title:"",type:"",loading:"",formData:{},staffList:[],rules:{customerAccord:[{required:!0,message:"请输入客户名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],customerShortName:[{required:!0,message:"请输入客户简称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],chargeId:[{required:!0,message:"请选择负责人",trigger:"change"}]}}),h={customerAccord:"客户名称",customerShortName:"客户简称",chargeName:"负责人"};async function D(n,t){e.value.title=h[t],e.value.type=t,e.value.loading=!0,e.value.formData=U(n),e.value.dialogTableVisible=!0,e.value.loading=!1,N()}const N=async()=>{const n=await q.getTenantStaffList();e.value.staffList=n.data};async function x(){e.value.loading=!0,c.value.validate(async n=>{if(n){const{status:t}=await A.edit(e.value.formData);t===1&&B.success({message:"编辑成功",center:!0}),k("fetch-data"),f()}e.value.loading=!1})}function f(){e.value.dialogTableVisible=!1,e.value.formData={}}return v({showEdit:D}),(n,t)=>{const g=r("el-input"),m=r("el-form-item"),S=r("el-option"),T=r("el-select"),L=r("el-form"),p=r("el-button"),w=r("el-dialog");return s(),_("div",null,[a(e).dialogTableVisible?(s(),u(w,{key:0,modelValue:a(e).dialogTableVisible,"onUpdate:modelValue":t[3]||(t[3]=l=>a(e).dialogTableVisible=l),title:a(e).title+"编辑",draggable:""},{footer:o(()=>[i(p,{onClick:f,disabled:a(e).loading},{default:o(()=>[V(" 取消 ")]),_:1},8,["disabled"]),i(p,{type:"primary",onClick:x,disabled:a(e).loading},{default:o(()=>[V(" 确定 ")]),_:1},8,["disabled"])]),default:o(()=>[i(L,{ref_key:"formRef",ref:c,model:a(e).formData,rules:a(e).rules,"label-width":"100","label-position":"right"},{default:o(()=>[a(e).type==="customerAccord"?(s(),u(m,{key:0,label:"客户名称",prop:"customerAccord"},{default:o(()=>[i(g,{modelValue:a(e).formData.customerAccord,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).formData.customerAccord=l),clearable:""},null,8,["modelValue"])]),_:1})):d("",!0),a(e).type==="customerShortName"?(s(),u(m,{key:1,label:"客户简称",prop:"customerShortName"},{default:o(()=>[i(g,{modelValue:a(e).formData.customerShortName,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).formData.customerShortName=l),clearable:""},null,8,["modelValue"])]),_:1})):d("",!0),a(e).type==="chargeName"?(s(),u(m,{key:2,label:"负责人",prop:"chargeId"},{default:o(()=>[i(T,{modelValue:a(e).formData.chargeId,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).formData.chargeId=l),"value-key":"",placeholder:"请选择负责人",clearable:"",filterable:""},{default:o(()=>[(s(!0),_(E,null,I(a(e).staffList,l=>(s(),u(S,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):d("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):d("",!0)])}}}),P=j(R,[["__scopeId","data-v-5b78c884"]]);export{P as default};
