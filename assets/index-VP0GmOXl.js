
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{v as z}from"./index-BOYgFDZn.js";import{a as B}from"./survey_myProjeck-DUyeKcFA.js";import{f as I}from"./file-BZkEYu3n.js";import{D as A}from"./download-C8PHVIy1.js";import{d as E,r as l,a as t,q as F,s as T,o as a,b as n,f as c,w as p,F as w,t as h,e as x,j as y,g as q,z as M,N as P,y as Q,i as k,aM as S,L as G}from"./index-CIit55HQ.js";const H={key:0,class:"demo-image__preview"},J={style:{"margin-bottom":"5px"}},K={class:"radius flex gap-2 p-2"},O=E({__name:"index",setup(R,{expose:U}){const u=l(!1),v=l(""),e=l({}),d=l([]),o=l([]),m=l(!1);async function C(_){try{if(u.value=!0,v.value="项目详情",_){m.value=!0;const s=await B.getQuotaProjectInfo({projectId:_.projectId});if(e.value=s.data,e.value.descriptionUrl!==""){console.log("form.value",e.value);const i=e.value.descriptionUrl.split(",");console.log("urlArr",i),o.value=i,i.map(async f=>{const g=await I.detail({fileName:f});d.value.push(g.data.fileUrl)}),console.log("srcList.value",o.value)}m.value=!1}}catch{}finally{m.value=!1}}async function D(){await A(d.value,e.value.descriptionUrl)}function N(){v.value="",e.value={},d.value=[],o.value=[],u.value=!1}return U({showEdit:C}),(_,s)=>{const i=t("el-image"),f=t("el-link"),g=t("el-col"),V=t("el-row"),b=t("el-empty"),L=t("el-dialog"),j=F("loading");return T((a(),n("div",null,[c(L,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=r=>u.value=r),"append-to-body":"","close-on-click-modal":!1,"destroy-on-close":"",title:v.value,draggable:"",width:"50%",onClose:N},{default:p(()=>[e.value.descriptionUrl?(a(),n("div",H,[(a(!0),n(w,null,h(d.value,r=>(a(),x(i,{style:{width:"6.25rem",height:"6.25rem","margin-right":"5px"},src:r,"preview-src-list":o.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":0,fit:"cover"},null,8,["src","preview-src-list"]))),256))])):y("",!0),e.value.descriptionUrl?(a(!0),n(w,{key:1},h(o.value,r=>(a(),n("div",J,[c(f,{style:{padding:"0",margin:"0"},underline:!1,type:"primary",onClick:D},{default:p(()=>[q(M(r)+"下载",1)]),_:2},1024)]))),256)):y("",!0),c(V,{gutter:20,class:P({isNone:!e.value.descriptionUrl})},{default:p(()=>[c(g,{span:24},{default:p(()=>[Q("div",K,[c(k(z),{value:e.value.richText},null,8,["value"])])]),_:1})]),_:1},8,["class"]),e.value.descriptionUrl?y("",!0):(a(),x(b,{key:2,image:k(S),"image-size":300},null,8,["image"]))]),_:1},8,["modelValue","title"])])),[[j,m.value]])}}}),ee=G(O,[["__scopeId","data-v-0cdedd37"]]);export{ee as default};
