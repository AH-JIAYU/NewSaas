
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as ae,d as se,aO as ie,r as u,l as re,b as _,q as ce,o as l,e as P,g as a,w as o,j as t,h as m,I as y,s as pe,f as n,aN as ue,k as r,t as p,H as f,S as de,be as me,aQ as _e,aR as fe,N as he,ap as ge,aI as be,aJ as ye,R as ve}from"./index-BU8GT9R8.js";import{_ as Ie}from"./index-DGFlCWsA.js";import{_ as Se}from"./index.vue_vue_type_style_index_0_lang-BbF7SdFv.js";import{_ as ke}from"./index-CMTtNWc1.js";import"./index-Bg-EDDjJ.js";import"./index.vue_vue_type_script_setup_true_lang-ze9E5MjG.js";import"./sortable.esm-C0-Qcoum.js";const we={list:b=>ae.post("callback/getProjectTerminationScreenDetail",b)},Ce=b=>(be("data-v-026a6e51"),b=b(),ye(),b),De={class:"tableBig oneLine"},Ne={class:"copyId tableSmall"},je={class:"id oneLine"},Te={class:"copyId tableSmall"},Le={key:0,class:"id oneLine"},xe={class:"copyId tableSmall"},ze={class:"id oneLine"},Be={class:"copyId tableSmall"},Pe={class:"id oneLine"},He={class:"copyId tableSmall"},Re={class:"id oneLine"},Ee={class:"flex-s"},Ue=Ce(()=>p("span",null,"终止时间",-1)),Ve={class:"tableBig oneLine"},$e=se({name:"termination",__name:"index",setup(b){const{getParams:H,pagination:h,onSizeChange:R,onCurrentChange:E}=ie(),{format:U}=me(),S=u(!1),L=u([]),V=u(""),c=u([]),k=u(!1),w=u(!1),C=u("default"),D=u(!1),x=u(),$=u("formSearch-termination"),N=u([{label:"会员",prop:"surveySource",sortable:!0,checked:!0},{label:"会员ID",prop:"memberChildId",sortable:!0,checked:!0},{label:"子会员ID",prop:"supplierMemberChildId",sortable:!0,checked:!0},{label:"供应商ID",prop:"tenantSupplierId",sortable:!0,checked:!0},{label:"项目ID",prop:"projectId",sortable:!0,checked:!0},{label:"项目名称",prop:"projectName",sortable:!0,checked:!0},{label:"IP/所属国",prop:"ipBelong",sortable:!0,checked:!0},{label:"说明",prop:"notes",sortable:!0,checked:!0},{label:"终止时间",prop:"terminationTime",sortable:!0,checked:!0}]),A=[{label:"内部",value:1},{label:"外部",value:2}],g=u({time:[],beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:""});function F(){h.value.page=1,v()}function M(i){R(i).then(()=>v())}function z(i=1){E(i).then(()=>v())}async function v(){try{S.value=!0;const i={...H(),...g.value};g.value.time&&g.value.time.length&&(i.beginTime=g.value.time[0]||"",i.endTime=g.value.time[1]||"");const s=await we.list(i);L.value=s.data.projectTerminationScreenDetailInfoList,h.value.total=s.data.total,S.value=!1}catch{}finally{S.value=!1}}function O(){Object.assign(g.value,{beginTime:"",endTime:"",surveySource:"",projectId:"",tenantSupplierId:"",projectName:"",ipBelong:"",time:[]}),v()}function q(i){V.value=i}re(()=>{N.value.forEach(i=>{i.checked&&c.value.push(i.prop)}),v(),x.value=[{index:1,show:!0,type:"input",modelName:"tenantSupplierId",placeholder:"供应商ID"},{index:2,show:!0,type:"input",modelName:"projectId",placeholder:"项目ID"},{index:3,show:!0,type:"select",modelName:"surveySource",placeholder:"会员类型",option:"surveySource",optionLabel:"label",optionValue:"value"},{index:4,show:!0,type:"input",modelName:"projectName",placeholder:"项目名称"},{index:5,show:!0,type:"input",modelName:"ipBelong",placeholder:"IP/所属国"},{index:6,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const Q={surveySource:()=>A};return(i,s)=>{const J=ke,G=_("ElDivider"),K=Se,T=_("el-button"),W=_e,X=fe,Y=_("el-row"),d=_("el-table-column"),I=Ie,j=_("el-text"),B=_("el-tag"),Z=he,ee=_("el-empty"),te=_("el-table"),oe=_("ElPagination"),le=ge,ne=ce("loading");return l(),P("div",{class:de({"absolute-container":t(D)})},[a(le,null,{default:o(()=>[a(J,{formSearchList:t(x),formSearchName:t($),onCurrentChange:z,onOnReset:O,model:t(g),formOption:Q},null,8,["formSearchList","formSearchName","model"]),a(G,{"border-style":"dashed"}),a(Y,null,{default:o(()=>[a(K),a(X,null,{default:o(()=>[a(T,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),a(W,{border:t(k),"onUpdate:border":s[0]||(s[0]=e=>y(k)?k.value=e:null),tableAutoHeight:t(D),"onUpdate:tableAutoHeight":s[1]||(s[1]=e=>y(D)?D.value=e:null),checkList:t(c),"onUpdate:checkList":s[2]||(s[2]=e=>y(c)?c.value=e:null),columns:t(N),"onUpdate:columns":s[3]||(s[3]=e=>y(N)?N.value=e:null),"line-height":t(C),"onUpdate:lineHeight":s[4]||(s[4]=e=>y(C)?C.value=e:null),stripe:t(w),"onUpdate:stripe":s[5]||(s[5]=e=>y(w)?w.value=e:null),style:{"margin-left":"12px"},onQueryData:F},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),pe((l(),n(te,{border:t(k),data:t(L),size:t(C),stripe:t(w),onSelectionChange:q},{empty:o(()=>[a(ee,{image:t(ue),"image-size":300},null,8,["image"])]),default:o(()=>[a(d,{align:"left",type:"selection"}),t(c).includes("surveySource")?(l(),n(d,{key:0,align:"left",prop:"surveySource","show-overflow-tooltip":"",width:"120",label:"会员"},{default:o(({row:e})=>[e.surveySource===1?(l(),n(T,{key:0,class:"p-1",size:"small",type:"primary"},{default:o(()=>[m("内部会员")]),_:1})):r("",!0),e.surveySource===2?(l(),n(T,{key:1,class:"p-1",size:"small",type:"warning"},{default:o(()=>[m("外部会员")]),_:1})):r("",!0)]),_:1})):r("",!0),t(c).includes("projectName")?(l(),n(d,{key:1,align:"left",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:o(({row:e})=>[p("div",De,f(e.projectName),1)]),_:1})):r("",!0),t(c).includes("projectId")?(l(),n(d,{key:2,align:"left",prop:"projectId","show-overflow-tooltip":"",width:"180",label:"项目ID"},{default:o(({row:e})=>[p("div",Ne,[p("div",je,"ID: "+f(e.projectId),1),a(I,{class:"copy",content:e.projectId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("memberChildId")?(l(),n(d,{key:3,align:"left",prop:"",width:"180","show-overflow-tooltip":"",label:"会员ID"},{default:o(({row:e})=>[p("div",Te,[e.peopleType===1?(l(),P("div",Le,"ID: "+f(e.memberChildId),1)):r("",!0),a(I,{class:"copy",content:e.memberChildId},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("supplierMemberChildId")?(l(),n(d,{key:4,align:"left",prop:"","show-overflow-tooltip":"",width:"180",label:"子会员ID"},{default:o(({row:e})=>[p("div",xe,[p("div",ze,[e.peopleType!==1?(l(),n(j,{key:0},{default:o(()=>[m(" ID: "+f(e.memberChildId),1)]),_:2},1024)):(l(),n(j,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.peopleType!==1?(l(),n(I,{key:0,class:"copy",content:e.memberChildId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("tenantSupplierId")?(l(),n(d,{key:5,align:"left",prop:"tenantSupplierId",width:"180","show-overflow-tooltip":"",label:"供应商ID"},{default:o(({row:e})=>[p("div",Be,[p("div",Pe,[e.tenantSupplierId?(l(),n(j,{key:0},{default:o(()=>[m(" ID: "+f(e.memberChildId),1)]),_:2},1024)):(l(),n(j,{key:1},{default:o(()=>[m(" - ")]),_:1}))]),e.tenantSupplierId?(l(),n(I,{key:0,class:"copy",content:e.tenantSupplierId},null,8,["content"])):r("",!0)])]),_:1})):r("",!0),t(c).includes("ipBelong")?(l(),n(d,{key:6,align:"left",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国",width:"220"},{default:o(({row:e})=>[p("div",He,[p("div",Re,[a(B,{type:"primary"},{default:o(()=>[m(f(e.ipBelong.split("/")[1]),1)]),_:2},1024),m(" "+f(e.ipBelong.split("/")[0]),1)]),a(I,{class:"copy",content:e.ipBelong.split("/")[0]},null,8,["content"])])]),_:1})):r("",!0),t(c).includes("terminationTime")?(l(),n(d,{key:7,align:"left",prop:"terminationTime","show-overflow-tooltip":""},{header:o(()=>[p("div",Ee,[a(Z,{name:"ant-design:clock-circle-filled",color:"#45a0ff"}),Ue])]),default:o(({row:e})=>[a(B,{effect:"plain",type:"info"},{default:o(()=>[m(f(t(U)(e.terminationTime)),1)]),_:2},1024)]),_:1})):r("",!0),t(c).includes("notes")?(l(),n(d,{key:8,align:"left",prop:"notes","show-overflow-tooltip":"",width:"280",label:"说明"},{default:o(({row:e})=>[p("div",Ve,f(e.notes),1)]),_:1})):r("",!0)]),_:1},8,["border","data","size","stripe"])),[[ne,t(S)]]),a(oe,{"current-page":t(h).page,total:t(h).total,"page-size":t(h).size,"page-sizes":t(h).sizes,layout:t(h).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:M,onCurrentChange:z},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),Ge=ve($e,[["__scopeId","data-v-026a6e51"]]);export{Ge as default};
