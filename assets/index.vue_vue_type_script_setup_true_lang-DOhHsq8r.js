
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{l as d,d as q,r as f,B as y,aq as R,a as m,ai as C,aj as M,i as o,o as _,b as V,f as t,w as r,g as v,F as S,n as D,e as G}from"./index-RsT8ijpm.js";import{a as N}from"./role-CBHS9LDT.js";const b={list:a=>d.get("manager/list",{params:a,baseURL:"/mock/"}),detail:a=>d.get("manager/detail",{params:{id:a},baseURL:"/mock/"}),create:a=>d.post("manager/create",a,{baseURL:"/mock/"}),edit:a=>d.post("manager/edit",a,{baseURL:"/mock/"}),delete:a=>d.post("manager/delete",{id:a},{baseURL:"/mock/"}),passwordReset:a=>d.post("manager/password/reset",{id:a},{baseURL:"/mock/"}),changeStatus:a=>d.post("manager/change/status",a,{baseURL:"/mock/"}),check:a=>d.post("manager/check",a,{baseURL:"/mock/"})},P=q({__name:"index",props:{id:{default:""}},setup(a,{expose:k}){const x=a,E=f([]);N.allList().then(s=>{E.value=s.data.list});const g=f(!1),c=f(),e=f({id:x.id,account:"",name:"",mobile:"",sex:"2",role_id:""}),U=f({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(s,l,i)=>{const u={key:"mobile",value:l};e.value.id!==""&&(u.id=e.value.id),b.check(u).then(p=>{p.data.exist?i(new Error("手机号已存在")):i()})},trigger:"blur"}]});y(()=>{e.value.id!==""&&L()});function L(){g.value=!0,b.detail(e.value.id).then(s=>{g.value=!1,e.value.account=s.data.account,e.value.name=s.data.name,e.value.mobile=s.data.mobile})}return k({submit(){return new Promise(s=>{e.value.id===""?c.value&&c.value.validate(l=>{l&&b.create(e.value).then(()=>{R.success({message:"模拟新增成功",center:!0}),s()})}):c.value&&c.value.validate(l=>{l&&b.edit(e.value).then(()=>{R.success({message:"模拟编辑成功",center:!0}),s()})})})}}),(s,l)=>{const i=m("ElInput"),u=m("ElFormItem"),p=m("ElRadioButton"),h=m("ElRadioGroup"),w=m("ElOption"),B=m("ElSelect"),F=m("ElForm"),I=C("loading");return M((_(),V("div",null,[t(F,{ref_key:"formRef",ref:c,model:o(e),rules:o(U),"label-width":"120px","label-suffix":"："},{default:r(()=>[t(u,{label:"帐号",prop:"account"},{default:r(()=>[t(i,{modelValue:o(e).account,"onUpdate:modelValue":l[0]||(l[0]=n=>o(e).account=n),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),t(u,{label:"姓名",prop:"name"},{default:r(()=>[t(i,{modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=n=>o(e).name=n),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(u,{label:"手机号",prop:"mobile"},{default:r(()=>[t(i,{modelValue:o(e).mobile,"onUpdate:modelValue":l[2]||(l[2]=n=>o(e).mobile=n),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),t(u,{label:"性别",prop:"sex"},{default:r(()=>[t(h,{modelValue:o(e).sex,"onUpdate:modelValue":l[3]||(l[3]=n=>o(e).sex=n)},{default:r(()=>[t(p,{label:"2"},{default:r(()=>[v(" 保密 ")]),_:1}),t(p,{label:"1"},{default:r(()=>[v(" 男 ")]),_:1}),t(p,{label:"0"},{default:r(()=>[v(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"角色",prop:"role_id"},{default:r(()=>[t(B,{modelValue:o(e).role_id,"onUpdate:modelValue":l[4]||(l[4]=n=>o(e).role_id=n),placeholder:"请选择角色",clearable:""},{default:r(()=>[(_(!0),V(S,null,D(o(E),n=>(_(),G(w,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[I,o(g)]])}}});export{P as _,b as a};
