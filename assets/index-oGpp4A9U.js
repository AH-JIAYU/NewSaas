
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{E as y,r as E,Q as K,R as P,K as A,U as _,W as L,M as B,X as C,Z as q,$ as T,o as H,a0 as I,a1 as V}from"./index-JYvP5qSa.js";function S(o){var l;const e=C(o);return(l=e==null?void 0:e.$el)!=null?l:e}const M=q?window:void 0,$=q?window.document:void 0,D=q?window.navigator:void 0;function F(...o){let l,e,v,r;if(typeof o[0]=="string"||Array.isArray(o[0])?([e,v,r]=o,l=M):[l,e,v,r]=o,!l)return L;Array.isArray(e)||(e=[e]),Array.isArray(v)||(v=[v]);const s=[],u=()=>{s.forEach(d=>d()),s.length=0},a=(d,t,m,h)=>(d.addEventListener(t,m,h),()=>d.removeEventListener(t,m,h)),f=A(()=>[S(l),C(r)],([d,t])=>{if(u(),!d)return;const m=T(t)?{...t}:t;s.push(...e.flatMap(h=>v.map(b=>a(d,h,b,m))))},{immediate:!0,flush:"post"}),p=()=>{f(),u()};return _(p),p}function j(){const o=E(!1),l=V();return l&&H(()=>{o.value=!0},l),o}function k(o){const l=j();return y(()=>(l.value,!!o()))}function O(o,l={}){const{controls:e=!1,navigator:v=D}=l,r=k(()=>v&&"permissions"in v);let s;const u=typeof o=="string"?{name:o}:o,a=E(),f=()=>{s&&(a.value=s.state)},p=I(async()=>{if(r.value){if(!s)try{s=await v.permissions.query(u),F(s,"change",f),f()}catch{a.value="prompt"}return s}});return p(),e?{state:a,isSupported:r,query:p}:a}function J(o={}){const{navigator:l=D,read:e=!1,source:v,copiedDuring:r=1500,legacy:s=!1}=o,u=k(()=>l&&"clipboard"in l),a=O("clipboard-read"),f=O("clipboard-write"),p=y(()=>u.value||s),d=E(""),t=E(!1),m=K(()=>t.value=!1,r);function h(){u.value&&n(a.value)?l.clipboard.readText().then(w=>{d.value=w}):d.value=c()}p.value&&e&&F(["copy","cut"],h);async function b(w=C(v)){p.value&&w!=null&&(u.value&&n(f.value)?await l.clipboard.writeText(w):i(w),d.value=w,t.value=!0,m.start())}function i(w){const g=document.createElement("textarea");g.value=w??"",g.style.position="absolute",g.style.opacity="0",document.body.appendChild(g),g.select(),document.execCommand("copy"),g.remove()}function c(){var w,g,x;return(x=(g=(w=document==null?void 0:document.getSelection)==null?void 0:w.call(document))==null?void 0:g.toString())!=null?x:""}function n(w){return w==="granted"||w==="prompt"}return{isSupported:p,text:d,copied:t,copy:b}}function N(o,l,e={}){const{window:v=M,...r}=e;let s;const u=k(()=>v&&"ResizeObserver"in v),a=()=>{s&&(s.disconnect(),s=void 0)},f=y(()=>Array.isArray(o)?o.map(t=>S(t)):[S(o)]),p=A(f,t=>{if(a(),u.value&&v){s=new ResizeObserver(l);for(const m of t)m&&s.observe(m,r)}},{immediate:!0,flush:"post"}),d=()=>{a(),p()};return _(d),{isSupported:u,stop:d}}function Q(o,l={width:0,height:0},e={}){const{window:v=M,box:r="content-box"}=e,s=y(()=>{var t,m;return(m=(t=S(o))==null?void 0:t.namespaceURI)==null?void 0:m.includes("svg")}),u=E(l.width),a=E(l.height),{stop:f}=N(o,([t])=>{const m=r==="border-box"?t.borderBoxSize:r==="content-box"?t.contentBoxSize:t.devicePixelContentBoxSize;if(v&&s.value){const h=S(o);if(h){const b=h.getBoundingClientRect();u.value=b.width,a.value=b.height}}else if(m){const h=Array.isArray(m)?m:[m];u.value=h.reduce((b,{inlineSize:i})=>b+i,0),a.value=h.reduce((b,{blockSize:i})=>b+i,0)}else u.value=t.contentRect.width,a.value=t.contentRect.height},e);P(()=>{const t=S(o);t&&(u.value="offsetWidth"in t?t.offsetWidth:l.width,a.value="offsetHeight"in t?t.offsetHeight:l.height)});const p=A(()=>S(o),t=>{u.value=t?l.width:0,a.value=t?l.height:0});function d(){f(),p()}return{width:u,height:a,stop:d}}const W=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function X(o,l={}){const{document:e=$,autoExit:v=!1}=l,r=y(()=>{var n;return(n=S(o))!=null?n:e==null?void 0:e.querySelector("html")}),s=E(!1),u=y(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(n=>e&&n in e||r.value&&n in r.value)),a=y(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(n=>e&&n in e||r.value&&n in r.value)),f=y(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(n=>e&&n in e||r.value&&n in r.value)),p=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(n=>e&&n in e),d=k(()=>r.value&&e&&u.value!==void 0&&a.value!==void 0&&f.value!==void 0),t=()=>p?(e==null?void 0:e[p])===r.value:!1,m=()=>{if(f.value){if(e&&e[f.value]!=null)return e[f.value];{const n=r.value;if((n==null?void 0:n[f.value])!=null)return!!n[f.value]}}return!1};async function h(){if(!(!d.value||!s.value)){if(a.value)if((e==null?void 0:e[a.value])!=null)await e[a.value]();else{const n=r.value;(n==null?void 0:n[a.value])!=null&&await n[a.value]()}s.value=!1}}async function b(){if(!d.value||s.value)return;m()&&await h();const n=r.value;u.value&&(n==null?void 0:n[u.value])!=null&&(await n[u.value](),s.value=!0)}async function i(){await(s.value?h():b())}const c=()=>{const n=m();(!n||n&&t())&&(s.value=n)};return F(e,W,c,!1),F(()=>S(r),W,c,!1),v&&_(h),{isSupported:d,isFullscreen:s,enter:b,exit:h,toggle:i}}const U={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Z(o={}){const{reactive:l=!1,target:e=M,aliasMap:v=U,passive:r=!0,onEventFired:s=L}=o,u=B(new Set),a={toJSON(){return{}},current:u},f=l?B(a):a,p=new Set,d=new Set;function t(i,c){i in f&&(l?f[i]=c:f[i].value=c)}function m(){u.clear();for(const i of d)t(i,!1)}function h(i,c){var n,w;const g=(n=i.key)==null?void 0:n.toLowerCase(),z=[(w=i.code)==null?void 0:w.toLowerCase(),g].filter(Boolean);g&&(c?u.add(g):u.delete(g));for(const R of z)d.add(R),t(R,c);g==="meta"&&!c?(p.forEach(R=>{u.delete(R),t(R,!1)}),p.clear()):typeof i.getModifierState=="function"&&i.getModifierState("Meta")&&c&&[...u,...z].forEach(R=>p.add(R))}F(e,"keydown",i=>(h(i,!0),s(i)),{passive:r}),F(e,"keyup",i=>(h(i,!1),s(i)),{passive:r}),F("blur",m,{passive:!0}),F("focus",m,{passive:!0});const b=new Proxy(f,{get(i,c,n){if(typeof c!="string")return Reflect.get(i,c,n);if(c=c.toLowerCase(),c in v&&(c=v[c]),!(c in f))if(/[+_-]/.test(c)){const g=c.split(/[+_-]/g).map(x=>x.trim());f[c]=y(()=>g.every(x=>C(b[x])))}else f[c]=E(!1);const w=Reflect.get(i,c,n);return l?C(w):w}});return b}export{J as a,Q as b,Z as c,X as u};
