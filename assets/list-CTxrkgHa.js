
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as he,aM as ke,r as b,a2 as A,D as ye,a as u,al as Se,o,b as P,f as t,w as l,a3 as H,a4 as Y,e as s,am as F,g as v,G as M,j as d,i as h,P as Ve,ak as we,L as Le,aO as Ce,aP as Ie,p as Ne,aK as Ue,aL as Be,F as Ee,aE as O,_ as ze}from"./index-CpaKVi3K.js";import{_ as Ge}from"./index.vue_vue_type_style_index_0_lang-BURRU4ke.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-CTS7KJ6W.js";import{_ as Te}from"./index.vue_vue_type_script_setup_true_lang-DIhLQvym.js";import{s as xe}from"./apiLoading-B6Lmv_-i.js";import{u as Pe,a as j}from"./survey_vip-DQQf8OBp.js";import{u as Fe}from"./survey_vipLevel-Bp1uh08L.js";import{u as Me}from"./survey_vipGroup-DXVFG1fB.js";import"./index.vue_vue_type_script_setup_true_lang-BRxzShYU.js";import"./index.vue_vue_type_script_setup_true_lang-B5DEWe5b.js";import"./otherFunctions_basicDictionary-C_2rO2j2.js";import"./basicDictionary-CCCdq92K.js";import"./stagedData-Dq0CO4Q2.js";import"./survey_vipGroup-DdiurUUK.js";const $e=k=>(Ue("data-v-3872d72f"),k=k(),Be(),k),Re=$e(()=>Ee("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Ae=he({name:"SurveyVipList",__name:"list",setup(k){const q=Fe(),K=Me(),Q=Pe(),{pagination:_,getParams:J,onSizeChange:W,onCurrentChange:X}=ke(),L=b(!1),g=A({list:[],vipLevelList:[],vipGroupList:[]}),Z=b(),C=b(),I=b(!0),N=b(!1),U=b("default"),m=b([]),B=b(!1),E=b([{prop:"memberId",label:"会员id",checked:!0,sprtable:!0},{prop:"memberNickname",label:"会员名称",checked:!0,sprtable:!0},{label:"余额",checked:!0,sortable:!0,prop:"balanceUs"},{label:"待审金额",checked:!0,sortable:!0,prop:"amountPendingTrial"},{prop:"memberName",label:"会员姓名",checked:!0,sprtable:!0},{prop:"memberLevelName",label:"会员等级",checked:!0,sprtable:!0},{prop:"memberGroupName",label:"会员组",checked:!0,sprtable:!0},{prop:"B2B|B2C",label:"B2B|B2C",checked:!0,sprtable:!0},{prop:"memberStatus",label:"会员状态",checked:!0,sprtable:!0},{prop:"createName",label:"创建人",checked:!0,sprtable:!0},{prop:"createTime",label:"创建日期",checked:!0,sprtable:!0}]),r=A({memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]});function ee(){C.value.showEdit()}function te(i){C.value.showEdit(i)}async function z(i,a){const G={memberId:a,memberStatus:i},{status:f}=await xe(j.changestatus(G));f===1&&we.success({message:"修改成功"}),Q.NickNameList=null,y()}function y(){_.value.page=1,S()}function le(i){W(i).then(()=>S())}function $(i=1){X(i).then(()=>S())}async function S(){L.value=!0;const i={...J(),...r};r.time&&r.time.length&&(i.beginTime=r.time[0]||"",i.endTime=r.time[1]||"");const a=await j.list(i);g.list=a.data.getMemberInfoList,_.value.total=a.data.total,L.value=!1}function ae(){Object.assign(r,{memberName:"",memberLevelId:"",memberStatus:"",memberGroupId:"",beginTime:"",endTime:"",time:[]}),y()}function oe(i){Z.value=i}return ye(async()=>{E.value.forEach(i=>{i.checked&&m.value.push(i.prop)}),S(),g.vipLevelList=await q.getLevelNameList(),g.vipGroupList=await K.getGroupNameList()}),(i,a)=>{const G=u("el-input"),f=u("el-form-item"),V=u("el-option"),D=u("el-select"),ne=u("el-date-picker"),R=Le,T=u("ElButton"),re=u("ElFormItem"),ie=u("ElForm"),se=De,ue=u("ElDivider"),w=u("el-button"),me=Ge,pe=Ce,ce=Ie,de=u("el-row"),c=u("el-table-column"),x=u("ElSwitch"),be=u("el-empty"),ve=u("el-table"),_e=u("ElPagination"),fe=Ne,ge=Se("loading");return o(),P("div",{class:Ve({"absolute-container":B.value})},[t(fe,null,{default:l(()=>[t(se,{"show-toggle":!1},{default:l(({fold:e,toggle:p})=>[t(ie,{model:r,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[t(f,{label:""},{default:l(()=>[t(G,{modelValue:r.memberName,"onUpdate:modelValue":a[0]||(a[0]=n=>r.memberName=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员ID、会员名称、姓名"},null,8,["modelValue"])]),_:1}),t(f,{label:""},{default:l(()=>[t(D,{modelValue:r.memberLevelId,"onUpdate:modelValue":a[1]||(a[1]=n=>r.memberLevelId=n),clearable:"",placeholder:"会员等级"},{default:l(()=>[(o(!0),P(H,null,Y(g.vipLevelList,n=>(o(),s(V,{key:n.memberLevelId,label:n.levelNameOrAdditionRatio,value:n.memberLevelId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:""},{default:l(()=>[t(D,{modelValue:r.memberStatus,"onUpdate:modelValue":a[2]||(a[2]=n=>r.memberStatus=n),clearable:"",placeholder:"会员状态"},{default:l(()=>[t(V,{label:"关闭",value:1}),t(V,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:1}),F(t(f,{label:""},{default:l(()=>[t(D,{modelValue:r.memberGroupId,"onUpdate:modelValue":a[3]||(a[3]=n=>r.memberGroupId=n),clearable:"",placeholder:"所属会员组"},{default:l(()=>[(o(!0),P(H,null,Y(g.vipGroupList,n=>(o(),s(V,{key:n.memberGroupId,label:n.memberGroupName,value:n.memberGroupId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[O,!e]]),F(t(f,null,{default:l(()=>[t(ne,{modelValue:r.time,"onUpdate:modelValue":a[4]||(a[4]=n=>r.time=n),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[O,!e]]),t(re,null,{default:l(()=>[t(T,{type:"primary",onClick:a[5]||(a[5]=n=>$())},{icon:l(()=>[t(R,{name:"i-ep:search"})]),default:l(()=>[v(" 筛选 ")]),_:1}),t(T,{onClick:ae},{icon:l(()=>[Re]),default:l(()=>[v(" 重置 ")]),_:1}),t(T,{link:"",onClick:p},{icon:l(()=>[t(R,{name:e?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[v(" "+M(e?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),t(ue,{"border-style":"dashed"}),t(de,null,{default:l(()=>[t(me,null,{default:l(()=>[t(w,{type:"primary",size:"default",onClick:ee},{default:l(()=>[v(" 新增 ")]),_:1})]),_:1}),t(ce,null,{default:l(()=>[t(w,{size:"default"},{default:l(()=>[v(" 导出 ")]),_:1}),t(pe,{border:I.value,"onUpdate:border":a[6]||(a[6]=e=>I.value=e),tableAutoHeight:B.value,"onUpdate:tableAutoHeight":a[7]||(a[7]=e=>B.value=e),checkList:m.value,"onUpdate:checkList":a[8]||(a[8]=e=>m.value=e),columns:E.value,"onUpdate:columns":a[9]||(a[9]=e=>E.value=e),"line-height":U.value,"onUpdate:lineHeight":a[10]||(a[10]=e=>U.value=e),stripe:N.value,"onUpdate:stripe":a[11]||(a[11]=e=>N.value=e),style:{"margin-left":"12px"},onQueryData:y},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),F((o(),s(ve,{border:I.value,data:g.list,size:U.value,stripe:N.value,onSelectionChange:oe},{empty:l(()=>[t(be,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[m.value.includes("memberId")?(o(),s(c,{key:0,align:"center",prop:"memberId","show-overflow-tooltip":"",label:"会员ID"})):d("",!0),m.value.includes("memberNickname")?(o(),s(c,{key:1,align:"center",prop:"memberNickname","show-overflow-tooltip":"",label:"会员名称"})):d("",!0),m.value.includes("memberName")?(o(),s(c,{key:2,align:"center",prop:"memberName","show-overflow-tooltip":"",label:"会员姓名"})):d("",!0),m.value.includes("balanceUs")?(o(),s(c,{key:3,align:"center",prop:"balanceUs","show-overflow-tooltip":"",label:"余额"})):d("",!0),m.value.includes("amountPendingTrial")?(o(),s(c,{key:4,align:"center",prop:"amountPendingTrial","show-overflow-tooltip":"",label:"待审金额"})):d("",!0),m.value.includes("memberLevelName")?(o(),s(c,{key:5,align:"center",prop:"memberLevelName","show-overflow-tooltip":"",label:"会员等级"})):d("",!0),m.value.includes("memberGroupName")?(o(),s(c,{key:6,align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组"})):d("",!0),m.value.includes("B2B|B2C")?(o(),s(c,{key:7,align:"center","show-overflow-tooltip":"",label:"B2B|B2C"},{default:l(({row:e})=>[v(M(e.b2bStatus&&e.b2bStatus===2?"√":"×")+" | "+M(e.b2cStatus&&e.b2cStatus===2?"√":"×"),1)]),_:1})):d("",!0),m.value.includes("memberStatus")?(o(),s(c,{key:8,align:"center","show-overflow-tooltip":"",label:"会员状态"},{default:l(({row:e})=>[e.memberStatus===3?(o(),s(x,{key:0,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":2,"active-value":3,"inactive-text":"启用","active-text":"待审核",onChange:p=>z(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(o(),s(x,{key:1,modelValue:e.memberStatus,"onUpdate:modelValue":p=>e.memberStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>z(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:1})):d("",!0),m.value.includes("memberStatus")?(o(),s(c,{key:9,align:"center","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:e})=>[t(x,{modelValue:e.randomStatus,"onUpdate:modelValue":p=>e.randomStatus=p,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:p=>z(p,e.memberId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):d("",!0),m.value.includes("createName")?(o(),s(c,{key:10,align:"center",prop:"createName","show-overflow-tooltip":"",label:"创建人"})):d("",!0),m.value.includes("createTime")?(o(),s(c,{key:11,align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"})):d("",!0),t(c,{align:"center",label:"操作","show-overflow-tooltip":"",width:"180"},{default:l(({row:e})=>[t(w,{size:"small",plain:"",type:"primary",onClick:p=>te(e)},{default:l(()=>[v(" 编辑 ")]),_:2},1032,["onClick"]),t(w,{size:"small",plain:"",type:"primary"},{default:l(()=>[v(" 加减款 ")]),_:1})]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ge,L.value]]),t(_e,{"current-page":h(_).page,total:h(_).total,"page-size":h(_).size,"page-sizes":h(_).sizes,layout:h(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:le,onCurrentChange:$},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Te,{ref_key:"editRef",ref:C,onFetchData:y},null,512)],2)}}}),at=ze(Ae,[["__scopeId","data-v-3872d72f"]]);export{at as default};
