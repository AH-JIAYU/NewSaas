
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as ct,aC as pt,r as I,l as mt,ab as ye,Z as be,W as ft,n as gt,$ as ve,a as m,o as c,e as f,w as t,f as l,y as d,g as p,j as v,i as a,b as L,t as C,z as V,s as X,aG as ee,F as w,A as H,b7 as yt,E as q,ao as N,_ as bt,aH as vt,aI as _t,L as It}from"./index-BbpV4JLc.js";import{u as ht}from"./user_customer-Dpb20Iuu.js";import{a as Pt}from"./user_customer-DxjhXGSu.js";import{f as _e}from"./file-C73id4Ho.js";import{e as jt}from"./index-BdnFBXBo.js";import{g as Lt,a as Vt}from"./zh_Hans-Co4VUhRu.js";import{z as Tt}from"./zh_Hans-B39mJ-rS.js";import{a as B}from"./projectManagement-C5gDzowf.js";import{u as Ct}from"./projectManagement_list-YMoUDyZe.js";import wt from"./index-B_sBz-tP.js";import{a as xt}from"./configuration_site_setting-CgjpWh09.js";import{_ as Ut}from"./index.vue_vue_type_script_setup_true_lang-BepZ9oQK.js";import"./index.vue_vue_type_script_setup_true_lang-Dq8PI17G.js";import"./index-CiHwnP_M.js";import"./index-CryZo7mB.js";import"./index-55zjaIAA.js";import"./clipboard-BRAa9FLO.js";import"./index-C_3ZFB_V.js";import"./department-DW0xU9Eb.js";import"./position_manage-BYS4_bwk.js";import"./configuration_role-BZoSNsTy.js";import"./tenant_role-DA3Ot723.js";import"./configuration_manager-D6BzEjYn.js";import"./configuration_siteSetting-DMUD3B3V.js";import"./apiLoading-DiE8ArPf.js";import"./stagedData-DFpLy4k-.js";import"./otherFunctions_screenLibrary-CU2uhMwe.js";const _=R=>(vt("data-v-42249509"),R=R(),_t(),R),Rt={style:{display:"flex","justify-content":"space-between"},class:"card-header"},kt=_(()=>d("div",{style:{height:"32px","line-height":"32px"}},"基础设置",-1)),St={style:{float:"left"}},Dt={style:{float:"right",color:"#fb6868","font-size":"13px"}},Qt=_(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Et={style:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 1rem"}},qt=_(()=>d("div",{class:"i-ic:round-plus w-1.3em h-1.3em"},null,-1)),Nt=_(()=>d("br",null,null,-1)),Bt=_(()=>d("div",{style:{"margin-top":"4px"}}," 若链接后缀不是[uid]，那可能无法校验通过呦~ ",-1)),$t=_(()=>d("div",{class:"card-header"},[d("span",null,"其他设置")],-1)),At={style:{display:"flex","justify-content":"space-between"},class:"card-header"},Mt=_(()=>d("span",null,"描述配额",-1)),zt={key:0},Ft=_(()=>d("div",{class:"el-upload__text"},"上传",-1)),Yt={class:"el-upload__tip"},Gt=["src"],Ot=_(()=>d("div",{class:"card-header"},"配置信息",-1)),Ht=_(()=>d("div",{class:"card-header"},"安全信息",-1)),Jt=_(()=>d("div",null,[p("小时"),d("span",{class:"red"},"准入"),p("量")],-1)),Kt=_(()=>d("div",null,[p("小时"),d("span",{class:"blue"},"完成"),p("量")],-1)),Zt=_(()=>d("div",null,"开启：ip和随机id都可以重复",-1)),Wt=_(()=>d("div",null,"关闭：ip和随机id都不可以重复",-1)),Xt={class:"right"},ea={class:"dialog-footer"},Ie="例：https://www.xxxx.com/8994343?uid=[uid]",ta=ct({name:"SurveyTopTabs",__name:"index",props:{leftTab:Object,tabIndex:Number},emits:["sync-project"],setup(R,{expose:he,emit:Pe}){const h=pt(),x=I(!1),je=[{label:"美元",value:"USD"},{label:"人民币",value:"CNY"}],j=I(null),$=mt();ht();const te=Ct(),A=R,Le=Pe,e=I(A.leftTab),Ve=ye("validateTopTabs"),Te=ye("currentProjectTimeline"),M=I("basicSettings"),z=I(),ae=I(),F=I(!A.tabIndex),Ce="https://saas-api.surveysaas.com/api/project/uploadQiniu";let g=I({checked:!1,basicSettings:{countryList:[],customerList:[],B2BTypeList:[],B2BTypeProps:{multiple:!0,checkStrictly:!0,emitPath:!1,value:"chineseName",label:"chineseName",lazy:!0,async lazyLoad(r,o){const i=await $.getB2BTypeItemChildren(r.data.id)||[];o(i)}}},editProps:{id:"",countryId:"",visible:!1,row:""}});const we=be({name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"内容在2-50个字之间",trigger:"blur"}],projectIdentification:[{max:100,required:!0,message:"请输入项目标识",trigger:"blur"},{min:2,max:100,message:"内容在2-100个字之间",trigger:"blur"}],countryIdList:[{required:!0,message:"请选择所属区域",trigger:"change"}],clientId:[{required:!0,message:"请选择所属客户",trigger:"change"}],currencyType:[{required:!0,message:"请选择币种",trigger:"change"}],uidUrl:[{required:!0,message:"请输入URL",trigger:"blur"},{validator:(r,o,i)=>{/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/.test(e.value.uidUrl)||i(new Error("请输入合法网址")),e.value.uidUrl.includes("[uid]")||i(new Error("格式不正确,请查看例子")),i()},trigger:"blur"}],releaseTime:[{validator:(r,o,i)=>{new Date(e.value.releaseTime).getTime()<Date.now()&&i(new Error("发布时间早于当前时间")),i()},trigger:"blur"}],doMoneyPrice:[{required:!0,message:"请输入项目价",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],num:[{required:!0,message:"请输入配额",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入0以上的正整数",trigger:"blur"}],minimumDuration:[{required:!0,message:"请输入最小分长",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}],ir:[{required:!0,message:"请输入ir",trigger:"blur"},{pattern:/^(100|[1-9]?[0-9])$/,message:"请输入0到100之间的正整数",trigger:"blur"}],exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入大于0的数字，最多保留两位小数",trigger:"blur"}]});e.value.clientId?j.value=1:h.originalExchangeRate&&(j.value=h.originalExchangeRate,e.value.exchangeRate=h.originalExchangeRate),e.value.clientId||h.currencyType&&(e.value.currencyType=h.currencyType===1?"USD":"CNY");const Y=r=>{r.key==="."&&r.preventDefault()},xe=r=>r.getTime()<Date.now()-864e5;function Ue(){if(new Date(e.value.releaseTime)*1e3/1e3<Date.now()){const i=new Date,y=i.getFullYear(),b=o(i.getMonth()+1),s=o(i.getDate()),u=o(i.getHours()),T=o(i.getMinutes()),U=o(i.getSeconds());e.value.releaseTime=`${y}-${b}-${s} ${u}:${T}:${U}`}function o(i){return(i<10?"0":"")+i}e.value.releaseTime&&Te(e.value.releaseTime)}const Re=r=>{const o=g.value.basicSettings.customerList.find(i=>i.tenantCustomerId===r);e.value.isProfile=o.antecedentQuestionnaire===2?1:2},ke=()=>{e.value.countryIdList=[],g.value.checked&&g.value.basicSettings.countryList.map(r=>{e.value.countryIdList.push(r.id)})},Se=[Lt({locale:Vt})];function De(r){e.value.richText=r}function Qe(){Le("sync-project")}function Ee(){F.value=!F.value}const le=I(""),G=I(!1),k=I([]),oe=r=>{const o=r.name.substring(r.name.lastIndexOf(".")+1);return["jpg","jpeg","png","gif"].indexOf(o)===-1},qe=r=>{const o=oe(r);return o&&q.warning({message:"只能上传图片文件JPG，JPEG，PNG，GIF",center:!0}),!o},Ne=async(r,o)=>{if(e.value.descriptionUrl=o.map(i=>i.name),!oe(r)){const{status:i}=await _e.delete({fileName:r.name});i===1&&q.success({message:"删除成功",center:!0})}},Be=(r,o)=>{e.value.descriptionUrl.push(r.data.qiNiuUrl)},$e=async(r,o)=>{q.warning({message:"最多可上传10个",center:!0})},Ae=r=>{le.value=r.url,G.value=!0},Me=async r=>{r.length&&r.forEach(async o=>{if(o){const i=await _e.detail({fileName:o});k.value.push({name:o,url:i.data.fileUrl})}})},ze=r=>{e.value.isOnline=r===2?2:1},Fe=r=>{r===2&&(e.value.projectQuotaInfoList=[])},Ye=()=>{e.value.data.configurationInformation.configurationCountryList=null,g.value.checked=e.value.countryIdList.length===$.country.length},Ge=()=>{e.value.data.configurationInformation.projectCategoryList=null,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId="",J()},J=r=>{e.value.data.configurationInformation.initialProblem.projectProblemId=null,e.value.data.configurationInformation.ProjectProblemInfoList=null,r||(e.value.projectQuotaInfoList=[])},ne=async(r,o)=>{r==="configurationInformation"&&!e.value.data.configurationInformation.configurationCountryList&&z.value.validateField(["countryIdList"],async i=>{if(i){J(o||!1);const y=await B.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=y.data.getProjectCountryListInfoList,y.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=y.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=N(te.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=N(y.data.projectQuotaQuestionType)}else M.value="basicSettings",ve(()=>{setTimeout(()=>{z.value.scrollToField("countryIdList")}),q.warning({message:"请先选择所属区域",center:!0})})})},re=async()=>{if(e.value.data.configurationInformation.initialProblem.countryId){if(!e.value.data.configurationInformation.projectCategoryList){const r={countryId:e.value.data.configurationInformation.initialProblem.countryId,projectQuotaQuestionType:e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType},o=await B.getProjectCategoryList(r);e.value.data.configurationInformation.projectCategoryList=o.data.getProjectCategoryInfoList.filter(i=>i.status===1)}}else q.warning({message:"请先选择配置信息下的区域",center:!0})},ie=async(r,o)=>{r?setTimeout(async()=>{const{projectProblemCategoryName:i,...y}=e.value.data.configurationInformation.projectCategoryList.find(s=>s.projectProblemCategoryId===r),b=await B.getProjectProblemList(y);if(e.value.data.configurationInformation.ProjectProblemInfoList=b.data.getProjectProblemInfoList.map(s=>({...s,getProjectAnswerInfoList:s.getProjectAnswerInfoList.sort((u,T)=>u.answerValue.replace(/^[a-zA-Z]+/,"")-T.answerValue.replace(/^[a-zA-Z]+/,""))})),!o){e.value.projectQuotaInfoList=[];for(let s=0;s<e.value.data.configurationInformation.ProjectProblemInfoList.length;s++){const u=N(e.value.data.configurationInformation.initialProblem);u.projectProblemId=e.value.data.configurationInformation.ProjectProblemInfoList[s].id,u.keyValue=e.value.data.configurationInformation.ProjectProblemInfoList[s].question,u.questionType=e.value.data.configurationInformation.ProjectProblemInfoList[s].questionType,u.projectProblemCategoryId=r,e.value.projectQuotaInfoList.push(u)}}}):J()},Oe=(r,o)=>{let i=e.value.projectQuotaInfoList[o].projectAnswerIdList;const b=e.value.data.configurationInformation.ProjectProblemInfoList[o].getProjectAnswerInfoList.filter(s=>i.includes(s.id));e.value.projectQuotaInfoList[o].answerValueList=b.map(s=>s.anotherName)},se=async()=>{const r=await Pt.getCustomerList({});g.value.basicSettings.customerList=r.data.getTenantCustomerAccordInfoList},ue=()=>{ae.value.showEdit()},He=async()=>{await se(),g.value.basicSettings.countryList=await $.getCountry(),g.value.basicSettings.B2BTypeList=await $.getB2BType()},Je=async()=>{e.value.projectQuotaInfoList.length&&(e.value.data.configurationInformation.initialProblem.countryId=e.value.projectQuotaInfoList[0].countryId,e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=e.value.projectQuotaInfoList[0].projectQuotaQuestionType,e.value.data.configurationInformation.initialProblem.projectProblemCategoryId=e.value.projectQuotaInfoList[0].projectProblemCategoryId,await ne("configurationInformation",!0),await re(),setTimeout(async()=>{await ie(e.value.data.configurationInformation.initialProblem.projectProblemCategoryId,!0)},100))},de=(r,o)=>({get(){return e.value.projectQuotaInfoList[o].id===r?e.value.projectQuotaInfoList[o].projectAnswerIdList:e.value.projectQuotaInfoList.find(y=>y.projectProblemId===r).projectAnswerIdList},set(i){if(e.value.projectQuotaInfoList[o].id===r)e.value.projectQuotaInfoList[o].projectAnswerIdList=i;else{const y=e.value.projectQuotaInfoList.find(b=>b.projectProblemId===r);y.projectAnswerIdList=i}}}),ce=I(),S=I({exchangeRate:null}),Ke=be({exchangeRate:[{required:!0,message:"请输入汇率",trigger:"blur"},{pattern:/^(?!0(\.0+)?$)(\d+(\.\d{1,2})?)$/,message:"请输入一个有效的数字，不能小于0，最多保留两位小数",trigger:"blur"}]}),Ze=()=>{x.value=!0},We=async()=>{await ce.value.validate(),e.value.exchangeRate=S.value.exchangeRate,(await xt.updateWebConfig(S.value)).data.flag&&(await h.getCurrencyType(),j.value=h.originalExchangeRate,e.value.exchangeRate=h.originalExchangeRate,e.value.currencyType=h.currencyType===1?"USD":"CNY",h.currencyType!==1&&(e.value.exchangeRate=Math.floor(1/h.originalExchangeRate*100)/100,j.value=e.value.exchangeRate),x.value=!1)},Xe=async r=>{const o={beforeCurrency:"",oldCurrency:r,exchangeRate:""};r==="USD"?o.beforeCurrency="CNY":r==="CNY"&&(o.beforeCurrency="USD"),o.exchangeRate=j.value;const i=await B.updateExchangeRate(o);i.data&&(j.value=Math.floor(i.data.exchangeRate*100)/100,e.value.exchangeRate=Math.floor(i.data.exchangeRate*100)/100)};ft(()=>A.leftTab,(r,o)=>{e.value=r},{deep:!0}),gt(async()=>{k.value=[],await He(),await Je()}),he({getUpLoad:Me}),ve(()=>{Ve(z.value)});const et=()=>{g.value.editProps.id="",g.value.editProps.countryId="",g.value.editProps.row="",g.value.editProps.visible=!0},tt=async()=>{const r=await B.getProjectCountryList({countryIdList:e.value.countryIdList});e.value.data.configurationInformation.configurationCountryList=r.data.getProjectCountryListInfoList,r.data.getProjectCountryListInfoList.length===1&&(e.value.data.configurationInformation.initialProblem.countryId=r.data.getProjectCountryListInfoList[0].countryId),e.value.data.configurationInformation.initialProblem||(e.value.data.configurationInformation.initialProblem=N(te.initialProblem)),e.value.data.configurationInformation.initialProblem.projectQuotaQuestionType=N(r.data.projectQuotaQuestionType)};return(r,o)=>{const i=m("el-button"),y=m("el-switch"),b=m("el-input"),s=m("el-form-item"),u=m("el-col"),T=m("el-option"),U=m("el-select"),pe=m("el-checkbox"),me=m("ElOption"),at=m("ElSelect"),D=m("el-text"),P=m("el-row"),O=bt,K=m("el-tooltip"),Q=m("el-card"),lt=m("el-date-picker"),ot=m("el-cascader"),nt=m("el-icon"),rt=m("el-upload"),fe=m("el-dialog"),Z=m("el-tab-pane"),it=m("el-checkbox-group"),ge=m("el-input-number"),st=m("el-tabs"),ut=m("el-form"),dt=m("ElForm");return c(),f(dt,{"label-width":"100px",rules:a(we),ref_key:"formRef",ref:z,model:a(e),"label-position":"top"},{default:t(()=>[l(st,{modelValue:a(M),"onUpdate:modelValue":o[28]||(o[28]=n=>H(M)?M.value=n:null),onTabChange:ne},{default:t(()=>[l(Z,{label:"基础设置",name:"basicSettings"},{default:t(()=>[l(Q,{"body-style":""},{header:t(()=>[d("div",Rt,[kt,d("div",null,[A.tabIndex>0?(c(),f(i,{key:0,size:"small",type:"primary",round:"",plain:"",onClick:Qe},{default:t(()=>[p(" 同步数据 ")]),_:1})):v("",!0),l(y,{modelValue:a(e).required,"onUpdate:modelValue":o[0]||(o[0]=n=>a(e).required=n),"active-value":!0,"inactive-value":!1,class:"ml-2"},null,8,["modelValue"]),p(" 只看必填 ")])])]),default:t(()=>[l(P,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"项目名称",prop:"name"},{default:t(()=>[l(b,{modelValue:a(e).name,"onUpdate:modelValue":o[1]||(o[1]=n=>a(e).name=n),modelModifiers:{trim:!0},disabled:a(e).projectType===2,clearable:"",maxlength:50},null,8,["modelValue","disabled"])]),_:1})]),_:1}),a(e).projectType!==2?(c(),f(u,{key:0,span:6},{default:t(()=>[l(s,{label:"项目标识",prop:"projectIdentification"},{default:t(()=>[l(b,{clearable:"",modelValue:a(e).projectIdentification,"onUpdate:modelValue":o[2]||(o[2]=n=>a(e).projectIdentification=n),modelModifiers:{trim:!0},maxlength:100},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).projectType!==2?(c(),f(u,{key:1,span:6},{default:t(()=>[l(s,{label:"所属客户",prop:"clientId"},{default:t(()=>[l(U,{class:"placeholderColor",placeholder:"Select",modelValue:a(e).clientId,"onUpdate:modelValue":o[3]||(o[3]=n=>a(e).clientId=n),disabled:a(e).projectType===2,clearable:"",onChange:Re},{empty:t(()=>[d("div",Et,[p(" 暂无数据 "),l(i,{type:"primary",link:"",size:"small",onClick:ue},{default:t(()=>[p(" 快捷新增 "),qt]),_:1})])]),default:t(()=>[(c(!0),L(w,null,C(a(g).basicSettings.customerList,n=>(c(),f(T,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord,disabled:n.isReveal===1||n.turnover&&n.practiceTurnover&&n.turnover<n.practiceTurnover},{default:t(()=>[d("span",St,V(n.customerAccord),1),X(d("span",Dt,[X(d("span",null," 营业额超限 ",512),[[ee,n.practiceTurnover>n.turnover]]),X(d("span",null," 审核率不合格 ",512),[[ee,n.rateAudit>n.practiceRateAudit]])],512),[[ee,n.isReveal===1]])]),_:2},1032,["value","label","disabled"]))),128)),l(i,{size:"small",class:"buttonClass",onClick:ue},{default:t(()=>[p(" 快捷新增 "),Qt]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):v("",!0),l(u,{span:6},{default:t(()=>[l(s,{label:"所属区域",prop:"countryIdList"},{default:t(()=>[l(at,{class:"placeholderColor",modelValue:a(e).countryIdList,"onUpdate:modelValue":o[5]||(o[5]=n=>a(e).countryIdList=n),disabled:a(e).projectType===2,placeholder:"区域",clearable:"",filterable:"",multiple:"","collapse-tags":"",onChange:Ye},{header:t(()=>[l(pe,{modelValue:a(g).checked,"onUpdate:modelValue":o[4]||(o[4]=n=>a(g).checked=n),onChange:ke,style:{display:"flex",height:"unset"}},{default:t(()=>[p("全球")]),_:1},8,["modelValue"])]),default:t(()=>[(c(!0),L(w,null,C(a(g).basicSettings.countryList,n=>(c(),f(me,{label:n.chineseName,value:n.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"币种",prop:"currencyType"},{default:t(()=>[a(h).originalExchangeRate?(c(),f(U,{key:1,modelValue:a(e).currencyType,"onUpdate:modelValue":o[6]||(o[6]=n=>a(e).currencyType=n),disabled:!!a(e).projectId,"value-key":"",style:{width:"22.4375rem"},placeholder:"请选择币种",filterable:"",onChange:Xe},{default:t(()=>[(c(),L(w,null,C(je,n=>l(T,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])):(c(),f(i,{key:0,type:"primary",link:"",onClick:Ze},{default:t(()=>[p("未设置汇率，点击设置>>")]),_:1}))]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"汇率",prop:""},{default:t(()=>[a(j)!==null?(c(),f(D,{key:0},{default:t(()=>[p(V(a(e).currencyType==="USD"?"1美元":"1人民币")+" = "+V(a(e).exchangeRate?a(e).exchangeRate:a(j))+V(a(e).currencyType==="USD"?"人民币":"美元"),1)]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1}),l(P,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"项目价",prop:"doMoneyPrice"},{default:t(()=>[l(b,{style:{height:"2rem"},modelValue:a(e).doMoneyPrice,"onUpdate:modelValue":o[7]||(o[7]=n=>a(e).doMoneyPrice=n),"controls-position":"right",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"配额",prop:"num"},{default:t(()=>[l(b,{style:{height:"2rem"},modelValue:a(e).num,"onUpdate:modelValue":o[8]||(o[8]=n=>a(e).num=n),size:"large",onKeydown:Y},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{style:{position:"relative"},span:6},{default:t(()=>[l(s,{prop:"minimumDuration"},{label:t(()=>[d("div",null,[p(" 最小分长"),l(K,{class:"tooltips",content:"该问卷最少要做多少分钟才被识别为合格",placement:"top"},{default:t(()=>[l(O,{class:"SvgIcon1",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(b,{style:{height:"2rem",width:"100%"},modelValue:a(e).minimumDuration,"onUpdate:modelValue":o[9]||(o[9]=n=>a(e).minimumDuration=n),modelModifiers:{number:!0},min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:Y},{append:t(()=>[p(" min ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:6},{default:t(()=>[l(s,{label:"IR",prop:"ir"},{default:t(()=>[l(b,{modelValue:a(e).ir,"onUpdate:modelValue":o[10]||(o[10]=n=>a(e).ir=n)},{append:t(()=>[p(" % ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(P,{gutter:20},{default:t(()=>[l(u,{span:12},{default:t(()=>[l(s,{prop:"uidUrl"},{label:t(()=>[d("div",null,[p(" URL"),l(K,{class:"tooltips",placement:"top"},{content:t(()=>[d("div",null,[d("div",null,[p("请参考如下链接"),Nt,p(V(Ie))]),Bt])]),default:t(()=>[l(O,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(b,{clearable:"",modelValue:a(e).uidUrl,"onUpdate:modelValue":o[11]||(o[11]=n=>a(e).uidUrl=n),modelModifiers:{trim:!0},disabled:a(e).projectType===2},null,8,["modelValue","disabled"]),l(D,{class:"mx-1"},{default:t(()=>[p(V(Ie))]),_:1})]),_:1})]),_:1}),a(e).mutualExclusion===1&&!a(e).required?(c(),f(u,{key:0,span:12},{default:t(()=>[l(s,{label:"互斥ID"},{default:t(()=>[l(b,{clearable:"",modelValue:a(e).mutualExclusionId,"onUpdate:modelValue":o[12]||(o[12]=n=>a(e).mutualExclusionId=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1}),a(e).required?v("",!0):(c(),f(Q,{key:0},{header:t(()=>[$t]),default:t(()=>[l(P,{gutter:20},{default:t(()=>[l(u,{span:5},{default:t(()=>[l(s,{label:"定时发布",class:"flex"},{default:t(()=>[l(y,{"active-value":2,"inactive-value":1,modelValue:a(e).isTimeReleases,"onUpdate:modelValue":o[13]||(o[13]=n=>a(e).isTimeReleases=n),disabled:a(e).projectType===2,onChange:ze},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"B2B",class:"flex"},{default:t(()=>[l(y,{"active-value":2,"inactive-value":1,modelValue:a(e).isB2b,"onUpdate:modelValue":o[14]||(o[14]=n=>a(e).isB2b=n),disabled:a(e).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"在线",class:"flex"},{default:t(()=>[l(y,{"active-value":1,"inactive-value":2,disabled:a(e).isTimeReleases===2||a(e).projectType===2,modelValue:a(e).isOnline,"onUpdate:modelValue":o[15]||(o[15]=n=>a(e).isOnline=n)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),l(u,{span:5},{default:t(()=>[l(s,{label:"前置问卷",class:"flex"},{default:t(()=>[l(y,{"active-value":1,"inactive-value":2,modelValue:a(e).isProfile,"onUpdate:modelValue":o[16]||(o[16]=n=>a(e).isProfile=n),disabled:a(e).projectType===2,onChange:Fe},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{span:4},{default:t(()=>[l(s,{label:"置顶",class:"flex"},{default:t(()=>[l(y,{"active-value":1,"inactive-value":2,modelValue:a(e).isPinned,"onUpdate:modelValue":o[17]||(o[17]=n=>a(e).isPinned=n),disabled:a(e).projectType===2},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),l(P,{gutter:20},{default:t(()=>[a(e).isTimeReleases===2?(c(),f(u,{key:0,span:5},{default:t(()=>[l(s,{label:"发布时间",prop:"releaseTime"},{default:t(()=>[l(lt,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:a(e).releaseTime,"onUpdate:modelValue":o[18]||(o[18]=n=>a(e).releaseTime=n),placeholder:"请选择时间",disabledDate:xe,onChange:Ue},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).isB2b===2&&a(e).projectType!==2?(c(),f(u,{key:1,span:5},{default:t(()=>[l(s,{label:"项目类型"},{default:t(()=>[l(ot,{"show-all-levels":!1,modelValue:a(e).projectType,"onUpdate:modelValue":o[19]||(o[19]=n=>a(e).projectType=n),props:a(g).basicSettings.B2BTypeProps,options:a(g).basicSettings.B2BTypeList,"collapse-tags":!0,filterable:"",clearable:""},null,8,["modelValue","props","options"])]),_:1})]),_:1})):v("",!0)]),_:1}),l(P,null,{default:t(()=>[l(u,{span:24},{default:t(()=>[l(s,{label:"备注"},{default:t(()=>[l(b,{maxlength:"200","show-word-limit":"",type:"textarea",rows:5,modelValue:a(e).remark,"onUpdate:modelValue":o[20]||(o[20]=n=>a(e).remark=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),a(e).required?v("",!0):(c(),f(Q,{key:1},{header:t(()=>[d("div",At,[Mt,l(i,{type:"primary",link:"",size:"default",onClick:Ee},{default:t(()=>[p(V(a(F)?"收起":"展开"),1)]),_:1})])]),default:t(()=>[a(F)?(c(),L("div",zt,[l(s,{label:"上传图片"},{default:t(()=>[l(rt,{"file-list":a(k),"onUpdate:fileList":o[21]||(o[21]=n=>H(k)?k.value=n:null),action:Ce,"list-type":"picture-card",drag:!0,limit:10,accept:".png, .jpg, .jpeg, .gif","before-upload":qe,"on-preview":Ae,"on-remove":Ne,"on-success":Be,"on-exceed":$e},{tip:t(()=>[d("div",Yt,[l(D,{type:"primary",size:"small"},{default:t(()=>[p(" 支持上传JPG/JPEG/PNG图片，小于10MB ")]),_:1})])]),default:t(()=>[l(nt,{style:{"margin-bottom":"none"},class:"el-icon--upload"},{default:t(()=>[l(a(yt))]),_:1}),Ft]),_:1},8,["file-list"]),l(fe,{modelValue:a(G),"onUpdate:modelValue":o[22]||(o[22]=n=>H(G)?G.value=n:null),style:{"z-index":"1000",transform:"translate(0)",position:"relative"}},{default:t(()=>[d("img",{"w-full":"",src:a(le),alt:"Preview Image"},null,8,Gt)]),_:1},8,["modelValue"])]),_:1}),l(P,{gutter:20},{default:t(()=>[l(u,{span:24},{default:t(()=>[l(s,{label:"项目描述"},{default:t(()=>[l(a(jt),{class:"editor",value:a(e).richText,plugins:Se,locale:a(Tt),onChange:De},null,8,["value","locale"])]),_:1})]),_:1})]),_:1})])):v("",!0)]),_:1}))]),_:1}),a(e).isProfile===1&&!a(e).required&&a(e).projectType!==2?(c(),f(Z,{key:0,label:"配置信息",name:"configurationInformation"},{default:t(()=>[a(e).data?(c(),f(Q,{key:0},{header:t(()=>[Ot]),default:t(()=>[l(P,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,{label:"选择区域"},{default:t(()=>[l(U,{modelValue:a(e).data.configurationInformation.initialProblem.countryId,"onUpdate:modelValue":o[23]||(o[23]=n=>a(e).data.configurationInformation.initialProblem.countryId=n),filterable:"",clearable:"",placeholder:"Select",disabled:a(e).projectType===2,onChange:Ge},{empty:t(()=>[d("div",null,[l(i,{type:"primary",link:"",class:"buttonClass",size:"small",onClick:et},{default:t(()=>[p(" 快捷新增 "),l(O,{name:"ant-design:plus-outlined",color:"#fff",style:{"background-color":"var(--el-color-primary)","border-radius":"50%",padding:"0.125rem",margin:"0 0.125rem"}})]),_:1})])]),default:t(()=>[(c(!0),L(w,null,C(a(e).data.configurationInformation.configurationCountryList,n=>(c(),f(me,{label:n.countryName,value:n.countryId},null,8,["label","value"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),a(e).data.configurationInformation.initialProblem.countryId?(c(),f(u,{key:0,span:6},{default:t(()=>[l(s,{label:"问卷名称"},{default:t(()=>[l(U,{modelValue:a(e).data.configurationInformation.initialProblem.projectProblemCategoryId,"onUpdate:modelValue":o[24]||(o[24]=n=>a(e).data.configurationInformation.initialProblem.projectProblemCategoryId=n),clearable:"",placeholder:"Select",disabled:a(e).projectType===2,onFocus:re,onChange:ie},{default:t(()=>[(c(!0),L(w,null,C(a(e).data.configurationInformation.projectCategoryList,n=>(c(),f(T,{key:n.projectProblemCategoryId,label:n.projectProblemCategoryName,value:n.projectProblemCategoryId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})):v("",!0)]),_:1}),a(e).data.configurationInformation.ProjectProblemInfoList&&a(e).data.configurationInformation.ProjectProblemInfoList.length&&a(e).projectQuotaInfoList.length?(c(!0),L(w,{key:0},C(a(e).data.configurationInformation.ProjectProblemInfoList,(n,W)=>(c(),f(P,{class:"allocation",gutter:20},{default:t(()=>[l(u,{span:20},{default:t(()=>[p(" 问题："+V(n.question),1)]),_:2},1024),l(u,{span:20},{default:t(()=>[l(s,null,{default:t(()=>[n.questionType===1?(c(),f(b,{key:0,disabled:"",placeholder:"输入框无法设置"})):(c(),f(it,{key:1,modelValue:de(n.id,W).get(),"onUpdate:modelValue":E=>de(n.id,W).set(E),onChange:E=>Oe(3,W)},{default:t(()=>[(c(!0),L(w,null,C(n.getProjectAnswerInfoList,E=>(c(),f(pe,{label:E.anotherName,value:E.id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)):v("",!0)]),_:1})):v("",!0)]),_:1})):v("",!0),a(e).required?v("",!0):(c(),f(Z,{key:1,label:"安全信息",name:"securityInformation"},{default:t(()=>[l(Q,null,{header:t(()=>[Ht]),default:t(()=>[l(P,{gutter:20},{default:t(()=>[l(u,{span:6},{default:t(()=>[l(s,null,{label:t(()=>[Jt]),default:t(()=>[l(ge,{style:{height:"2rem"},modelValue:a(e).preNum,"onUpdate:modelValue":o[25]||(o[25]=n=>a(e).preNum=n),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:Y},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:1}),l(u,{span:6},{default:t(()=>[l(s,null,{label:t(()=>[Kt]),default:t(()=>[l(ge,{style:{height:"2rem"},modelValue:a(e).limitedQuantity,"onUpdate:modelValue":o[26]||(o[26]=n=>a(e).limitedQuantity=n),min:1,step:1,"step-strictly":"","controls-position":"right",size:"large",onKeydown:Y},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:1}),l(u,{span:4,class:"flex"},{default:t(()=>[l(s,{label:"",class:"flex m-0"},{label:t(()=>[d("div",null,[p(" 允许重复参与"),l(K,{class:"tooltips",placement:"top"},{content:t(()=>[Zt,Wt]),default:t(()=>[l(O,{class:"SvgIcon2",name:"i-ri:question-line"})]),_:1})])]),default:t(()=>[l(y,{modelValue:a(e).ipDifferenceDetection,"onUpdate:modelValue":o[27]||(o[27]=n=>a(e).ipDifferenceDetection=n),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"]),l(fe,{modelValue:a(x),"onUpdate:modelValue":o[31]||(o[31]=n=>H(x)?x.value=n:null),title:"设置汇率",width:"500"},{footer:t(()=>[d("div",ea,[l(i,{type:"primary",onClick:We},{default:t(()=>[p(" 确认 ")]),_:1}),l(i,{onClick:o[30]||(o[30]=n=>x.value=!1)},{default:t(()=>[p(" 关闭 ")]),_:1})])]),default:t(()=>[l(ut,{model:a(S),ref_key:"exchangeRateRef",ref:ce,rules:a(Ke),"label-width":"90px",inline:!1},{default:t(()=>[l(s,{label:"美元汇率",prop:"exchangeRate"},{default:t(()=>[d("div",Xt,[l(b,{modelValue:a(S).exchangeRate,"onUpdate:modelValue":o[29]||(o[29]=n=>a(S).exchangeRate=n),placeholder:"请输入数值",clearable:""},{prefix:t(()=>[l(D,{style:{color:"#333"}},{default:t(()=>[p(" 1 美元 (USD)     = ")]),_:1})]),suffix:t(()=>[l(D,{style:{color:"#333"}},{default:t(()=>[p(" 人民币 (CNY) ")]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(wt,{ref_key:"editRef",ref:ae,onFetchData:se},null,512),a(g).editProps.visible?(c(),f(Ut,{key:0,id:a(g).editProps.id,countryId:a(g).editProps.countryId,modelValue:a(g).editProps.visible,"onUpdate:modelValue":o[32]||(o[32]=n=>a(g).editProps.visible=n),row:a(g).editProps.row,onSuccess:tt},null,8,["id","countryId","modelValue","row"])):v("",!0)]),_:1},8,["rules","model"])}}}),Ra=It(ta,[["__scopeId","data-v-42249509"]]);export{Ra as default};
