
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-CY2i9-fV.js";import{s as b,ae as C,d as N,r as j,a as T,o as u,b as p,f as s,w as o,p as e,g as a,F as w,q as V,Q as O,i as l,D as n,j as g,G as B,aJ as P,aK as D,P as E}from"./index-Cc6n2BiZ.js";const $={list:c=>b.post("tenantBind/getProjectAllocationList",c),getTenantMeasurementList:c=>b.post("tenantBind/getTenantMeasurementList",c)},F=C("projectManagementOutsource",()=>({projectStatusList:["进行中(在线)","已完成(审核通过)","离线"],typeList:["租户","供应商","会员组"]})),Q=F,M=c=>(P("data-v-c78b6c60"),c=c(),D(),c),q={class:"milestone"},A={class:"left"},G={class:"left-top-left p-4"},H={class:"project"},J={class:"projectName flex-b"},K={class:"projectId"},R={class:"price flex-b"},U={key:0,class:"left-top-right p-4"},W={class:"type"},X={class:"tenant"},Y={key:0,class:"left-bottom"},Z=M(()=>e("div",{class:"line"},null,-1)),ee={class:"allocation"},te=M(()=>e("div",{class:"arrow"},null,-1)),ne={key:0,class:"right"},ae={style:{flex:"auto"}},se=N({name:"Edit",__name:"index",setup(c,{expose:h}){const I=Q(),_=j(!1),r=j({initialTenantCurrencyType:"",currentTenantId:"",tenantMeasurementInfoList:[]});async function x(v){const f={linkId:v.linkId,projectId:v.projectId},d=await $.getTenantMeasurementList(f);r.value.initialTenantCurrencyType=d.data.tenantMeasurementInfoList[0].currencyType;const i=d.data.tenantMeasurementInfoList.findIndex(m=>m.allocationTenantId===d.data.currentTenantId);d.data.tenantMeasurementInfoList.splice(0,i),r.value.currentTenantId=d.data.currentTenantId,r.value.tenantMeasurementInfoList=d.data.tenantMeasurementInfoList,_.value=!0}function y(){_.value=!1}function S(){y()}return h({showEdit:x}),(v,f)=>{const d=z,i=T("el-text"),m=T("el-button"),k=T("el-drawer");return u(),p("div",null,[s(k,{modelValue:l(_),"onUpdate:modelValue":f[0]||(f[0]=t=>B(_)?_.value=t:null),title:"项目测查",size:"60%","before-close":y},{footer:o(()=>[e("div",ae,[s(m,{onClick:y},{default:o(()=>[a(" 取消 ")]),_:1}),s(m,{type:"primary",onClick:S},{default:o(()=>[a(" 确定 ")]),_:1})])]),default:o(()=>[e("div",q,[(u(!0),p(w,null,V(l(r).tenantMeasurementInfoList,(t,L)=>(u(),p("div",{class:"item",key:t.allocationTenantId},[e("div",A,[e("div",{class:O({"left-top":!0,"flex-b":!0,currentTenant:t.allocationTenantId===l(r).currentTenantId})},[e("div",G,[e("div",H,[e("div",J,[e("b",null,n(t.projectName),1),e("span",null,n(l(I).projectStatusList[t.projectStatus-1]),1)]),e("div",K,n(t.projectId),1)]),e("div",R,[e("p",null,[a(" 原价： "),s(d),a(" "+n(t.currencyType),1)]),e("p",null,[a(" 参数： "),s(i,{size:"large"},{default:o(()=>[a(n(t.participationNumber||0),1)]),_:2},1024),s(i,{size:"large"},{default:o(()=>[a(" / ")]),_:1}),s(i,{type:"success",size:"large"},{default:o(()=>[a(n(t.doneNumber||0),1)]),_:2},1024),s(i,{size:"large"},{default:o(()=>[a(" / ")]),_:1}),s(i,{type:"warning",size:"large"},{default:o(()=>[a(n(t.num||0),1)]),_:2},1024),s(i,{size:"large"},{default:o(()=>[a(" / ")]),_:1}),s(i,{size:"large"},{default:o(()=>[a(n(t.limitedQuantity||0),1)]),_:2},1024)])])]),t.allocationTenantId!==l(r).currentTenantId?(u(),p("div",U,[e("p",W,n(l(I).typeList[t.type-1]),1),e("div",X,[e("p",null,n(t.tenantName),1),e("p",null,n(t.allocationTenantId),1)])])):g("",!0)],2),l(r).tenantMeasurementInfoList.length!==L+1?(u(),p("div",Y,[Z,e("div",ee,n(t.tenantName)+"-分配-"+n(l(I).typeList[l(r).tenantMeasurementInfoList[L+1].type-1]),1),te])):g("",!0)]),t.allocationTenantId!==l(r).currentTenantId?(u(),p("div",ne," 》 ")):g("",!0)]))),128))])]),_:1},8,["modelValue"])])}}}),oe=E(se,[["__scopeId","data-v-c78b6c60"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{$ as a,oe as e,re as i,Q as u};
