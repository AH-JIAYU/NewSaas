
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{k as _e,d as he,aM as ve,r as _,a3 as H,l as ye,a as d,al as ge,o as r,b as U,f as a,w as l,i as e,am as k,F as A,n as G,e as s,g as m,G as p,p as C,j as c,Q as Ie,L as ke,aO as Ce,aP as Se,ak as Ve,aK as we,aL as Le,D as Ne,aE as V,P as Pe}from"./index-BP3NysZD.js";import{_ as je}from"./index.vue_vue_type_style_index_0_lang-Blt03TTq.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-xIkTqDay.js";import{u as Ee}from"./user_customer-lLWhofrm.js";import"./user_customer-CRqEjwH_.js";const Te={list:y=>_e.post("callback/getMemberChildSurveyRecord",y)},Ue=y=>(we("data-v-5bde813e"),y=y(),Le(),y),ze=Ue(()=>Ne("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),Me=he({name:"RecordSurveyIndex",__name:"index",setup(y){const q=Ee(),{getParams:O,pagination:g,onSizeChange:Q,onCurrentChange:K}=ve(),D=_(!1),z=_([]),J=_(""),u=_([]),w=_(!0),L=_(!1),N=_("default"),P=_(!1),j=_([{prop:"memberChildId",label:"子会员Id",sortable:!0,checked:!0},{prop:"memberChildName",label:"所属组",sortable:!0,checked:!0},{prop:"tenantSupplierId",label:"供应商id",sortable:!0,checked:!0},{prop:"projectId",label:"项目id",sortable:!0,checked:!0},{prop:"randomIdentityId",label:"随机身份",sortable:!0,checked:!0},{prop:"projectName",label:"项目名称",sortable:!0,checked:!0},{prop:"customerShortName",label:"客户简称",sortable:!0,checked:!0},{prop:"allocationType",label:"分配类型",sortable:!0,checked:!0},{prop:"price",label:"子会员价/供应商价/原价",sortable:!0,checked:!0},{prop:"ipBelong",label:"ip/所属国",sortable:!0,checked:!0},{prop:"surveyTime",label:"调查时间",sortable:!0,checked:!0},{prop:"surveyStatus",label:"调查状态",sortable:!0,checked:!0},{prop:"viceStatus",label:"副状态",sortable:!0,checked:!0}]),i=H({memberChildId:"",randomIdentityId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),E=_(),v=H({allocationTypeList:["未分配","供应商","会员组"],surveyStatusList:["完成/待审核","被甄别","配额满","安全终止","未完成"],viceStatusList:["待审","免审","过IR","时间果断","超时完成","超量完成","审核成功","审核失败","数据冻结","时间段过载","ip不一致","id重复参与"],customerList:[],vipList:[],vipGroupList:[],tenantSupplierList:[]});function W(){i.pageNo=1,S()}function X(f){Q(f).then(()=>S())}function M(f=1){K(f).then(()=>S())}async function S(){D.value=!0;const f={...O(),...i},{data:o}=await Te.list(f);E.value=o.currencyType,z.value=o.memberChildSurveyRecordInfoList,g.value.total=o.total,D.value=!1}function Y(f){J.value=f}function Z(){Object.assign(i,{memberChildId:"",randomIdentityId:"",memberChildGroupId:"",tenantSupplierId:"",projectId:"",projectName:"",customerId:"",ip:"",surveyStatus:""}),S()}return ye(async()=>{v.customerList=await q.getCustomerList(),j.value.forEach(f=>{f.checked&&u.value.push(f.prop)}),S()}),(f,o)=>{const I=d("el-input"),h=d("el-form-item"),x=d("el-option"),B=d("el-select"),$=ke,T=d("ElButton"),ee=d("ElFormItem"),te=d("ElForm"),le=De,oe=d("ElDivider"),ae=je,ne=d("el-button"),re=Ce,ie=Se,se=d("el-row"),b=d("el-table-column"),F=d("el-text"),R=d("ElTableColumn"),ue=d("el-empty"),de=d("el-table"),pe=d("ElPagination"),ce=Ve,me=ge("loading");return r(),U("div",{class:Ie({"absolute-container":e(P)})},[a(ce,null,{default:l(()=>[a(le,{"show-toggle":!1},{default:l(({fold:t,toggle:be})=>[a(te,{model:e(i),size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).memberChildId,"onUpdate:modelValue":o[0]||(o[0]=n=>e(i).memberChildId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"子会员ID"},null,8,["modelValue"])]),_:1}),k(a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).randomIdentityId,"onUpdate:modelValue":o[1]||(o[1]=n=>e(i).randomIdentityId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"随机身份"},null,8,["modelValue"])]),_:2},1536),[[V,!t]]),a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).tenantSupplierId,"onUpdate:modelValue":o[2]||(o[2]=n=>e(i).tenantSupplierId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"供应商ID"},null,8,["modelValue"])]),_:1}),a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).projectId,"onUpdate:modelValue":o[3]||(o[3]=n=>e(i).projectId=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目ID"},null,8,["modelValue"])]),_:1}),k(a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).name,"onUpdate:modelValue":o[4]||(o[4]=n=>e(i).name=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"项目名称"},null,8,["modelValue"])]),_:2},1536),[[V,!t]]),k(a(h,{label:""},{default:l(()=>[a(B,{modelValue:e(i).projectName,"onUpdate:modelValue":o[5]||(o[5]=n=>e(i).projectName=n),clearable:"",placeholder:"客户简称"},{default:l(()=>[(r(!0),U(A,null,G(e(v).customerList,n=>(r(),s(x,{key:n.tenantCustomerId,value:n.tenantCustomerId,label:n.customerAccord},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!t]]),k(a(h,{label:""},{default:l(()=>[a(I,{modelValue:e(i).ip,"onUpdate:modelValue":o[6]||(o[6]=n=>e(i).ip=n),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"IP地址"},null,8,["modelValue"])]),_:2},1536),[[V,!t]]),k(a(h,{label:""},{default:l(()=>[a(B,{modelValue:e(i).surveyStatus,"onUpdate:modelValue":o[7]||(o[7]=n=>e(i).surveyStatus=n),clearable:"",placeholder:"调查状态"},{default:l(()=>[(r(!0),U(A,null,G(e(v).surveyStatusList,(n,fe)=>(r(),s(x,{label:n,value:fe+1},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:2},1536),[[V,!t]]),a(ee,null,{default:l(()=>[a(T,{type:"primary",onClick:o[8]||(o[8]=n=>M())},{icon:l(()=>[a($,{name:"i-ep:search"})]),default:l(()=>[m(" 筛选 ")]),_:1}),a(T,{onClick:Z},{icon:l(()=>[ze]),default:l(()=>[m(" 重置 ")]),_:1}),a(T,{link:"",onClick:be},{icon:l(()=>[a($,{name:t?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[m(" "+p(t?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(oe,{"border-style":"dashed"}),a(se,null,{default:l(()=>[a(ae),a(ie,null,{default:l(()=>[a(ne,{size:"default"},{default:l(()=>[m(" 导出 ")]),_:1}),a(re,{border:e(w),"onUpdate:border":o[9]||(o[9]=t=>C(w)?w.value=t:null),tableAutoHeight:e(P),"onUpdate:tableAutoHeight":o[10]||(o[10]=t=>C(P)?P.value=t:null),checkList:e(u),"onUpdate:checkList":o[11]||(o[11]=t=>C(u)?u.value=t:null),columns:e(j),"onUpdate:columns":o[12]||(o[12]=t=>C(j)?j.value=t:null),"line-height":e(N),"onUpdate:lineHeight":o[13]||(o[13]=t=>C(N)?N.value=t:null),stripe:e(L),"onUpdate:stripe":o[14]||(o[14]=t=>C(L)?L.value=t:null),style:{"margin-left":"12px"},onQueryData:W},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),k((r(),s(de,{border:e(w),data:e(z),size:e(N),stripe:e(L),onSelectionChange:Y},{empty:l(()=>[a(ue,{class:"vab-data-empty",description:"暂无数据"})]),default:l(()=>[a(b,{align:"center",prop:"a","show-overflow-tooltip":"",type:"selection"}),e(u).includes("memberChildId")?(r(),s(b,{key:0,align:"center",prop:"memberChildId","show-overflow-tooltip":"",label:"子会员ID"})):c("",!0),e(u).includes("randomIdentityId")?(r(),s(b,{key:1,align:"center",prop:"randomIdentityId","show-overflow-tooltip":"",label:"随机身份"},{default:l(({row:t})=>[m(p(t.randomIdentityId?t.randomIdentityId:"-"),1)]),_:1})):c("",!0),e(u).includes("memberChildName")?(r(),s(b,{key:2,align:"center",prop:"memberChildName","show-overflow-tooltip":"",label:"所属组"},{default:l(({row:t})=>[m(p(t.memberChildName?t.memberChildName:"-"),1)]),_:1})):c("",!0),e(u).includes("tenantSupplierId")?(r(),s(b,{key:3,align:"center",prop:"tenantSupplierId","show-overflow-tooltip":"",label:"供应商ID"})):c("",!0),e(u).includes("projectId")?(r(),s(b,{key:4,align:"center",prop:"projectId","show-overflow-tooltip":"",label:"项目ID"})):c("",!0),e(u).includes("projectName")?(r(),s(b,{key:5,align:"center",prop:"projectName","show-overflow-tooltip":"",label:"项目名称"},{default:l(({row:t})=>[m(p(t.projectName?t.projectName:"-"),1)]),_:1})):c("",!0),e(u).includes("projectName")?(r(),s(b,{key:6,align:"center",prop:"customerShortName","show-overflow-tooltip":"",label:"客户简称"},{default:l(({row:t})=>[m(p(t.customerShortName?t.customerShortName:"-"),1)]),_:1})):c("",!0),e(u).includes("allocationType")?(r(),s(b,{key:7,align:"center","show-overflow-tooltip":"",label:"分配类型"},{default:l(({row:t})=>[m(p(e(v).allocationTypeList[t.allocationType-1]),1)]),_:1})):c("",!0),e(u).includes("price")?(r(),s(b,{key:8,align:"center",prop:"h","show-overflow-tooltip":"",label:"子会员价/供应商价/原价"},{default:l(({row:t})=>[e(E)===1?(r(),s(F,{key:0},{default:l(()=>[m(p(t.memberChildPrice?t.memberChildPrice+"$":0)+"/ "+p(t.supplierPrice?t.supplierPrice+"$":0)+"/ "+p(t.doMoneyPrice?t.doMoneyPrice+"$":0),1)]),_:2},1024)):c("",!0),e(E)===2?(r(),s(F,{key:1},{default:l(()=>[m(p(t.memberChildPrice?t.memberChildPrice+"￥":0)+"/ "+p(t.supplierPrice?t.supplierPrice+"￥":0)+"/ "+p(t.doMoneyPrice?t.doMoneyPrice+"￥":0),1)]),_:2},1024)):c("",!0)]),_:1})):c("",!0),e(u).includes("ipBelong")?(r(),s(b,{key:9,align:"center",prop:"ipBelong","show-overflow-tooltip":"",label:"IP/所属国"})):c("",!0),e(u).includes("surveyTime")?(r(),s(b,{key:10,align:"center","show-overflow-tooltip":"",label:"调查时间"},{default:l(({row:t})=>[m(p(t.surveyTime||0)+"/ "+p(t.projectTime||0),1)]),_:1})):c("",!0),e(u).includes("surveyStatus")?(r(),s(R,{key:11,align:"center","show-overflow-tooltip":"",prop:"",label:"状态"},{default:l(({row:t})=>[m(p(e(v).surveyStatusList[t.surveyStatus-1]),1)]),_:1})):c("",!0),e(u).includes("viceStatus")?(r(),s(R,{key:12,align:"center","show-overflow-tooltip":"",prop:"",label:"副状态"},{default:l(({row:t})=>[m(p(e(v).viceStatusList[t.viceStatus-1]?e(v).viceStatusList[t.viceStatus-1]:"-"),1)]),_:1})):c("",!0)]),_:1},8,["border","data","size","stripe"])),[[me,e(D)]]),a(pe,{"current-page":e(g).page,total:e(g).total,"page-size":e(g).size,"page-sizes":e(g).sizes,layout:e(g).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:X,onCurrentChange:M},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1})],2)}}}),He=Pe(Me,[["__scopeId","data-v-5bde813e"]]);export{He as default};
