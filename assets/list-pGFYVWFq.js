
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as pe,aN as me,r,N as ce,o as de,a3 as s,al as fe,b as n,j as M,g as t,w as o,h as m,a4 as _e,c as i,i as f,aM as be,k as _,f as h,t as b,B as he,aR as ge,ai as ve,aO as ye,aP as ke,ao as Ne,z as Ce}from"./index-BnVk3aZr.js";import{_ as Se}from"./index-DhGFn38n.js";import{_ as we}from"./index.vue_vue_type_style_index_0_lang-CHjhy5dx.js";import{_ as Ge}from"./index-BspRMLJp.js";import{s as Le}from"./apiLoading-Cags_xGQ.js";import Ie from"./index-BG0h60rG.js";import xe from"./index-BP7GUwaa.js";import{a as H}from"./survey_vipGroup-DHciXMMV.js";import{u as ze}from"./survey_vipGroup-Bjoaty3J.js";import"./index-DhY7K8iM.js";import"./clipboard-Dol0gqP4.js";import"./index.vue_vue_type_script_setup_true_lang-Clie07wY.js";import"./sortable.esm-C0-Qcoum.js";import"./survey_vip-CBAOBJXj.js";import"./survey_vip-CqsuzwjG.js";const De={key:0,class:"hoverSvg"},Me={class:"fineBom"},Ee={class:"c-fx"},Ve={class:"weightColor"},Pe={key:0,class:"hoverSvg"},Te={class:"weightColor"},Be={class:"fineBom"},He={class:"c-fx"},Re=pe({name:"vipGroup",__name:"list",setup(Ue){const{pagination:c,getParams:R,onSizeChange:U,onCurrentChange:j}=me(),F=ze(),{format:$}=ge(),y=r(!1),E=r([]);r();const C=r(),V=r(),S=r(!1),w=r(!1),G=r("default"),u=r([]),L=r(!1),P=r(),A=r("formSearch-vipGroup"),I=r([{label:"组状态",prop:"groupStatus",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组ID",prop:"memberGroupId",sortable:!0,disableCheck:!1,checked:!0},{label:"会员组名称",prop:"memberGroupName",sortable:!0,disableCheck:!1,checked:!0},{label:"组长名称(ID)",prop:"groupLeaderMemberName",sortable:!0,disableCheck:!1,checked:!0},{label:"成员",prop:"memberNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"项目数",prop:"projectNumber",sortable:!0,disableCheck:!1,checked:!0},{label:"创建时间",prop:"createTime",sortable:!0,disableCheck:!1,checked:!0}]),d=ce({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function O(){C.value.showEdit()}function q(a){C.value.showEdit(a)}function Q(a){V.value.showEdit(a)}function g(){c.value.page=1,k()}function J(a){U(a).then(()=>k())}function T(a=1){j(a).then(()=>k())}async function k(){try{y.value=!0;const a={...R(),...d};d.time&&d.time.length&&(a.beginTime=d.time[0]||"",a.endTime=d.time[1]||""),delete a.time;const{data:l}=await H.list(a);E.value=l.getMemberGroupInfoList,c.value.total=l.total,y.value=!1}catch{}finally{y.value=!1}}function K(){Object.assign(d,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),k()}async function W(a,l){const x={memberGroupId:l,groupStatus:a},{status:z}=await Le(H.changestatus(x));z===1&&ve.success({message:"修改成功"}),F.GroupNameList=null,g()}de(()=>{I.value.forEach(a=>{a.checked&&u.value.push(a.prop)}),g(),P.value=[{index:1,show:!0,type:"input",modelName:"memberGroupId",placeholder:"会员组ID"},{index:2,show:!0,type:"input",modelName:"memberGroupName",placeholder:"会员组名称"},{index:3,show:!0,type:"input",modelName:"groupLeaderMemberName",placeholder:"组长ID、组长名称"},{index:4,show:!0,type:"select",modelName:"groupStatus",placeholder:"会员组状态",option:"groupStatus",optionLabel:"label",optionValue:"value"},{index:5,show:!0,type:"datetimerange",modelName:"time",startPlaceHolder:"创建开始日期",endPlaceHolder:"创建结束日期"}]});const X={groupStatus:()=>[{label:"关闭",value:1},{label:"开启",value:2}]};return(a,l)=>{const x=Ge,z=s("ElDivider"),D=s("el-button"),Y=we,Z=ye,ee=ke,te=s("el-row"),p=s("el-table-column"),oe=s("ElSwitch"),B=Se,N=s("el-text"),ae=s("el-tag"),le=s("el-tooltip"),re=s("el-empty"),ne=s("el-table"),se=s("ElPagination"),ue=Ne,ie=fe("loading");return n(),M("div",{class:he({"absolute-container":L.value})},[t(ue,null,{default:o(()=>[t(x,{formSearchList:P.value,formSearchName:A.value,onCurrentChange:T,onOnReset:K,model:d,formOption:X},null,8,["formSearchList","formSearchName","model"]),t(z,{"border-style":"dashed"}),t(te,null,{default:o(()=>[t(Y,null,{default:o(()=>[t(D,{type:"primary",size:"default",onClick:O},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),t(ee,null,{default:o(()=>[t(D,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),t(Z,{border:S.value,"onUpdate:border":l[0]||(l[0]=e=>S.value=e),tableAutoHeight:L.value,"onUpdate:tableAutoHeight":l[1]||(l[1]=e=>L.value=e),checkList:u.value,"onUpdate:checkList":l[2]||(l[2]=e=>u.value=e),columns:I.value,"onUpdate:columns":l[3]||(l[3]=e=>I.value=e),"line-height":G.value,"onUpdate:lineHeight":l[4]||(l[4]=e=>G.value=e),stripe:w.value,"onUpdate:stripe":l[5]||(l[5]=e=>w.value=e),style:{"margin-left":"12px"},onQueryData:g},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),_e((n(),i(ne,{border:S.value,data:E.value,size:G.value,stripe:w.value},{empty:o(()=>[t(re,{image:f(be),"image-size":300},null,8,["image"])]),default:o(()=>[t(p,{align:"left",type:"selection"}),u.value.includes("groupStatus")?(n(),i(p,{key:0,align:"left",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:o(({row:e})=>[t(oe,{modelValue:e.groupStatus,"onUpdate:modelValue":v=>e.groupStatus=v,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:v=>W(v,e.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})):_("",!0),u.value.includes("memberGroupId")?(n(),i(p,{key:1,width:"200",align:"left",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"},{default:o(({row:e})=>[e.memberGroupId?(n(),M("div",De,[h("p",Me,b(e.memberGroupId),1),h("span",Ee,[t(B,{class:"copy",content:e.memberGroupId},null,8,["content"])])])):(n(),i(N,{key:1},{default:o(()=>[m("-")]),_:1}))]),_:1})):_("",!0),u.value.includes("memberGroupName")?(n(),i(p,{key:2,align:"left",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"},{default:o(({row:e})=>[h("p",Ve,b(e.memberGroupName?e.memberGroupName:"-"),1)]),_:1})):_("",!0),u.value.includes("groupLeaderMemberName")?(n(),i(p,{key:3,align:"left",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:o(({row:e})=>[e.groupLeaderMemberName?(n(),M("div",Pe,[h("div",Te,b(e.groupLeaderMemberName.split("/")[0]),1),m("    "),h("p",Be,b(e.groupLeaderMemberName.split("/")[1]),1),h("span",He,[t(B,{class:"copy",content:e.groupLeaderMemberName.split("/")[1]},null,8,["content"])])])):(n(),i(N,{key:1},{default:o(()=>[m("-")]),_:1}))]),_:1})):_("",!0),u.value.includes("memberNumber")?(n(),i(p,{key:4,width:"100",align:"left",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"},{default:o(({row:e})=>[t(N,{class:"buleBorder",type:"primary"},{default:o(()=>[m(b(e.memberNumber?e.memberNumber:0),1)]),_:2},1024)]),_:1})):_("",!0),u.value.includes("projectNumber")?(n(),i(p,{key:5,width:"100",align:"left",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:o(({row:e})=>[t(N,{class:"buleBorder",type:"primary",onClick:v=>Q(e)},{default:o(()=>[m(b(e.projectNumber?e.projectNumber:0),1)]),_:2},1032,["onClick"])]),_:1})):_("",!0),u.value.includes("createTime")?(n(),i(p,{key:6,align:"left",prop:"createTime","show-overflow-tooltip":"",label:"创建时间"},{default:o(({row:e})=>[t(le,{content:e.createTime,placement:"top"},{default:o(()=>[t(ae,{effect:"plain",type:"info"},{default:o(()=>[m(b(f($)(e.createTime)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):_("",!0),t(p,{align:"left",prop:"i",label:"操作",fixed:"right","show-overflow-tooltip":"",width:"180"},{default:o(({row:e})=>[t(D,{size:"small",plain:"",type:"primary",onClick:v=>q(e)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ie,y.value]]),t(se,{"current-page":f(c).page,total:f(c).total,"page-size":f(c).size,"page-sizes":f(c).sizes,layout:f(c).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:J,onCurrentChange:T},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),t(Ie,{ref_key:"editRef",ref:C,onFetchData:g},null,512),t(xe,{ref_key:"checkRef",ref:V,onFetchData:g},null,512)],2)}}}),ot=Ce(Re,[["__scopeId","data-v-5f002207"]]);export{ot as default};
