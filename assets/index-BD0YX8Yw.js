
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as V}from"./third-BwdaWXW8.js";import{d as N,r as m,o as h,a2 as i,a as R,i as k,f as l,w as s,h as t,g as I,k as q,ai as w,y as D}from"./index-Dfh_jK84.js";const B={style:{"margin-left":"30px"}},F=N({name:"Shortmsg",__name:"index",setup(L){const f=m("first"),o=m({accessKey:"",secretKey:"",templateId:"",activeState:0,signName:""}),c=(n,e,p)=>{/[\u4e00-\u9fa5]/.test(e)?p(new Error("不能输入汉字")):p()},A=m({accessKey:[{required:!0,message:"请输入阿里云AccessKeyId",trigger:"blur"},{validator:c,trigger:"blur"}],secretKey:[{required:!0,trigger:"blur",message:"请输入阿里云AccessKeySecret"},{validator:c,trigger:"blur"}]}),C=m({appId:[{required:!0,message:"请输入腾讯云appId",trigger:"blur"},{validator:c,trigger:"blur"}],accessKey:[{required:!0,message:"请输入腾讯云AccessKeyId",trigger:"blur"},{validator:c,trigger:"blur"}],secretKey:[{required:!0,trigger:"blur",message:"请输入腾讯云AccessKeySecret"},{validator:c,trigger:"blur"}]}),r=m({appId:"",accessKey:"",secretKey:"",activeState:0,signName:""});h(()=>{y()});async function y(){try{const{data:n,status:e}=await V.smsGetConfigList();n&&e===1&&(n.aliSmsConfig&&n.aliSmsConfig!=null&&(o.value=n.aliSmsConfig),n.tencentSmsConfig&&n.tencentSmsConfig!=null&&(r.value=n.tencentSmsConfig))}catch{}finally{}}const g=m(),v=m(),E=()=>{g.value&&g.value.validate(async n=>{if(n)try{o.value.activeState=o.value.activeState==1?o.value.activeState:"0",(await V.smsUpdateAliConfig(o.value)).status===1&&(y(),w.success({message:"修改成功",center:!0}))}catch(e){console.log("error",e)}finally{}})},U=()=>{v.value&&v.value.validate(async n=>{if(n){r.value.activeState=r.value.activeState==1?r.value.activeState:"0";try{(await V.smsUpdateTencentConfig(r.value)).status===1&&(y(),w.success({message:"修改成功",center:!0}))}catch(e){console.log("error",e)}finally{}}})};return(n,e)=>{const p=i("ElSwitch"),u=i("ElFormItem"),d=i("ElInput"),_=i("ElButton"),K=i("ElForm"),b=i("el-row"),S=i("el-tab-pane"),x=i("el-tabs");return R(),k("div",B,[l(x,{modelValue:t(f),"onUpdate:modelValue":e[10]||(e[10]=a=>q(f)?f.value=a:null)},{default:s(()=>[l(S,{label:"阿里云配置",name:"first"},{default:s(()=>[l(b,{gutter:20},{default:s(()=>[l(K,{model:t(o),"label-width":"150px","label-position":"right",inline:!1,ref_key:"formRef1",ref:g,rules:t(A)},{default:s(()=>[l(u,{label:"是否启用:"},{default:s(()=>[l(p,{modelValue:t(o).activeState,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).activeState=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),l(u,{label:"AccessKeyId:",prop:"accessKey"},{default:s(()=>[l(d,{modelValue:t(o).accessKey,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).accessKey=a),placeholder:"请输入阿里云AccessKeyId",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"AccessKeySecret:",prop:"secretKey"},{default:s(()=>[l(d,{modelValue:t(o).secretKey,"onUpdate:modelValue":e[2]||(e[2]=a=>t(o).secretKey=a),placeholder:"请输入阿里云AccessKeySecret",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"templateId:"},{default:s(()=>[l(d,{modelValue:t(o).templateId,"onUpdate:modelValue":e[3]||(e[3]=a=>t(o).templateId=a),placeholder:"请输入阿里云templateId",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"短信签名:"},{default:s(()=>[l(d,{modelValue:t(o).signName,"onUpdate:modelValue":e[4]||(e[4]=a=>t(o).signName=a),placeholder:"请输入阿里云短信签名",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,null,{default:s(()=>[l(_,{type:"primary",onClick:E},{default:s(()=>[I(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1}),l(S,{label:"腾讯云配置",name:"second"},{default:s(()=>[l(b,{gutter:20},{default:s(()=>[l(K,{model:t(r),"label-width":"150px",ref_key:"formRef2",ref:v,"label-position":"right",inline:!1,rules:t(C)},{default:s(()=>[l(u,{label:"是否启用:"},{default:s(()=>[l(p,{modelValue:t(r).activeState,"onUpdate:modelValue":e[5]||(e[5]=a=>t(r).activeState=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),l(u,{label:"SKD AppID:",prop:"appId"},{default:s(()=>[l(d,{modelValue:t(r).appId,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).appId=a),placeholder:"请输入腾讯云SKD AppID",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"AccessKeyId:",prop:"accessKey"},{default:s(()=>[l(d,{modelValue:t(r).accessKey,"onUpdate:modelValue":e[7]||(e[7]=a=>t(r).accessKey=a),placeholder:"请输入腾讯云AccessKeyId",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"AccessKeySecret:",prop:"secretKey"},{default:s(()=>[l(d,{modelValue:t(r).secretKey,"onUpdate:modelValue":e[8]||(e[8]=a=>t(r).secretKey=a),placeholder:"请输入腾讯云AccessKeySecret",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,{label:"短信签名:"},{default:s(()=>[l(d,{modelValue:t(r).signName,"onUpdate:modelValue":e[9]||(e[9]=a=>t(r).signName=a),placeholder:"请输入腾讯云短信签名",style:{width:"22.4375rem"}},null,8,["modelValue"])]),_:1}),l(u,null,{default:s(()=>[l(_,{type:"primary",onClick:U},{default:s(()=>[I(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),G=D(F,[["__scopeId","data-v-c06e050f"]]);export{G as default};
