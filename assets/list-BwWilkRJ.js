
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as de,aM as _e,r as i,a2 as fe,D as ge,a as r,al as be,o as I,b as ve,f as e,w as o,am as L,g as m,G as D,e as P,j as he,i as g,P as ke,ak as we,L as ye,aO as Ce,aP as Ve,p as Se,aK as Ee,aL as Ge,F as Ne,aE as $,_ as Ie}from"./index-CpaKVi3K.js";import{_ as Le}from"./index.vue_vue_type_style_index_0_lang-BURRU4ke.js";import{_ as De}from"./index.vue_vue_type_script_setup_true_lang-CTS7KJ6W.js";import{s as ze}from"./apiLoading-B6Lmv_-i.js";import Me from"./index-wRND_oyP.js";import Ue from"./index-Rcx9v6zu.js";import{a as B}from"./survey_vipGroup-DdiurUUK.js";import{u as Fe}from"./survey_vipGroup-DXVFG1fB.js";import"./survey_vip-DQQf8OBp.js";const xe=b=>(Ee("data-v-dea197db"),b=b(),Ge(),b),Pe=xe(()=>Ne("div",{class:"i-grommet-icons:power-reset h-1em w-1em"},null,-1)),$e=de({name:"SurveyVipGroupList",__name:"list",setup(b){const H=Fe(),{pagination:p,getParams:R,onSizeChange:A,onCurrentChange:T}=_e(),k=i(!1),z=i([]);i();const w=i(),M=i(),y=i(!0),C=i(!1),V=i("default"),v=i([]),S=i(!1),E=i([{label:"等级名称",prop:"a",sortable:!0,disableCheck:!1,checked:!0}]),l=fe({memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]});function j(){w.value.showEdit()}function Y(n){w.value.showEdit(n)}function q(n){M.value.showEdit(n)}function _(){p.value.page=1,h()}function O(n){A(n).then(()=>h())}function U(n=1){T(n).then(()=>h())}async function h(){k.value=!0;const n={...R(),...l};l.time&&l.time.length&&(n.beginTime=l.time[0]||"",n.endTime=l.time[1]||"");const{data:t}=await B.list(n);z.value=t.getMemberGroupInfoList,p.value.total=t.total,k.value=!1}function K(){Object.assign(l,{memberGroupId:"",memberGroupName:"",groupLeaderMemberName:"",groupStatus:"",time:[]}),h()}async function Q(n,t){const f={memberGroupId:t,groupStatus:n},{status:c}=await ze(B.changestatus(f));c===1&&we.success({message:"修改成功"}),H.GroupNameList=null,_()}return ge(()=>{E.value.forEach(n=>{n.checked&&v.value.push(n.prop)}),_()}),(n,t)=>{const f=r("el-input"),c=r("el-form-item"),F=r("el-option"),J=r("el-select"),W=r("el-date-picker"),x=ye,G=r("ElButton"),X=r("ElFormItem"),Z=r("ElForm"),ee=De,te=r("ElDivider"),N=r("el-button"),oe=Le,ae=Ce,le=Ve,ne=r("el-row"),u=r("el-table-column"),re=r("el-link"),ie=r("ElSwitch"),se=r("el-empty"),ue=r("el-table"),me=r("ElPagination"),pe=Se,ce=be("loading");return I(),ve("div",{class:ke({"absolute-container":S.value})},[e(pe,null,{default:o(()=>[e(ee,{"show-toggle":!1},{default:o(({fold:a,toggle:d})=>[e(Z,{model:l,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:o(()=>[e(c,{label:""},{default:o(()=>[e(f,{modelValue:l.memberGroupId,"onUpdate:modelValue":t[0]||(t[0]=s=>l.memberGroupId=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组ID"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(f,{modelValue:l.memberGroupName,"onUpdate:modelValue":t[1]||(t[1]=s=>l.memberGroupName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"会员组名称"},null,8,["modelValue"])]),_:1}),e(c,{label:""},{default:o(()=>[e(f,{modelValue:l.groupLeaderMemberName,"onUpdate:modelValue":t[2]||(t[2]=s=>l.groupLeaderMemberName=s),modelModifiers:{trim:!0},clearable:"",inline:!1,placeholder:"组长ID、组长名称"},null,8,["modelValue"])]),_:1}),L(e(c,{label:""},{default:o(()=>[e(J,{modelValue:l.groupStatus,"onUpdate:modelValue":t[3]||(t[3]=s=>l.groupStatus=s),clearable:"",placeholder:"会员组状态"},{default:o(()=>[e(F,{label:"关闭",value:1}),e(F,{label:"开启",value:2})]),_:1},8,["modelValue"])]),_:2},1536),[[$,!a]]),L(e(c,null,{default:o(()=>[e(W,{modelValue:l.time,"onUpdate:modelValue":t[4]||(t[4]=s=>l.time=s),type:"datetimerange","unlink-panels":"","range-separator":"-","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","value-format":"YYYY-MM-DD hh:mm:ss",size:"default"},null,8,["modelValue"])]),_:2},1536),[[$,!a]]),e(X,null,{default:o(()=>[e(G,{type:"primary",onClick:t[5]||(t[5]=s=>U())},{icon:o(()=>[e(x,{name:"i-ep:search"})]),default:o(()=>[m(" 筛选 ")]),_:1}),e(G,{onClick:K},{icon:o(()=>[Pe]),default:o(()=>[m(" 重置 ")]),_:1}),e(G,{link:"",onClick:d},{icon:o(()=>[e(x,{name:a?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:o(()=>[m(" "+D(a?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),e(te,{"border-style":"dashed"}),e(ne,null,{default:o(()=>[e(oe,null,{default:o(()=>[e(N,{type:"primary",size:"default",onClick:j},{default:o(()=>[m(" 新增 ")]),_:1})]),_:1}),e(le,null,{default:o(()=>[e(N,{size:"default"},{default:o(()=>[m(" 导出 ")]),_:1}),e(ae,{border:y.value,"onUpdate:border":t[6]||(t[6]=a=>y.value=a),tableAutoHeight:S.value,"onUpdate:tableAutoHeight":t[7]||(t[7]=a=>S.value=a),checkList:v.value,"onUpdate:checkList":t[8]||(t[8]=a=>v.value=a),columns:E.value,"onUpdate:columns":t[9]||(t[9]=a=>E.value=a),"line-height":V.value,"onUpdate:lineHeight":t[10]||(t[10]=a=>V.value=a),stripe:C.value,"onUpdate:stripe":t[11]||(t[11]=a=>C.value=a),style:{"margin-left":"12px"},onQueryData:_},null,8,["border","tableAutoHeight","checkList","columns","line-height","stripe"])]),_:1})]),_:1}),L((I(),P(ue,{border:y.value,data:z.value,size:V.value,stripe:C.value},{empty:o(()=>[e(se,{class:"vab-data-empty",description:"暂无数据"})]),default:o(()=>[v.value.includes("a")?(I(),P(u,{key:0,align:"center",prop:"memberGroupId","show-overflow-tooltip":"",label:"会员组ID"})):he("",!0),e(u,{align:"center",prop:"memberGroupName","show-overflow-tooltip":"",label:"会员组名称"}),e(u,{align:"center",prop:"groupLeaderMemberName","show-overflow-tooltip":"",label:"组长名称(ID)"},{default:o(({row:a})=>[m(D(a.groupLeaderMemberName?a.groupLeaderMemberName:"-"),1)]),_:1}),e(u,{align:"center",prop:"memberNumber","show-overflow-tooltip":"",label:"成员"}),e(u,{align:"center",prop:"projectNumber","show-overflow-tooltip":"",label:"项目数"},{default:o(({row:a})=>[e(re,{type:"primary",onClick:d=>q(a)},{default:o(()=>[m(D(a.projectNumber),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{align:"center",prop:"createTime","show-overflow-tooltip":"",label:"创建日期"}),e(u,{align:"center",prop:"groupStatus","show-overflow-tooltip":"",label:"组状态"},{default:o(({row:a})=>[e(ie,{modelValue:a.groupStatus,"onUpdate:modelValue":d=>a.groupStatus=d,"inline-prompt":"","inactive-value":1,"active-value":2,"inactive-text":"禁用","active-text":"启用",onChange:d=>Q(d,a.memberGroupId)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{align:"center",prop:"i",label:"操作","show-overflow-tooltip":"",width:"180"},{default:o(({row:a})=>[e(N,{size:"small",plain:"",type:"primary",onClick:d=>Y(a)},{default:o(()=>[m(" 编辑 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["border","data","size","stripe"])),[[ce,k.value]]),e(me,{"current-page":g(p).page,total:g(p).total,"page-size":g(p).size,"page-sizes":g(p).sizes,layout:g(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:U},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),e(Me,{ref_key:"editRef",ref:w,onFetchData:_},null,512),e(Ue,{ref_key:"checkRef",ref:M,onFetchData:_},null,512)],2)}}}),Ke=Ie($e,[["__scopeId","data-v-dea197db"]]);export{Ke as default};
