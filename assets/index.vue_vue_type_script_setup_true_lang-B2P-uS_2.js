
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{a as _}from"./position_manage-DDA7JDz0.js";import{d as R,r as o,o as B,a2 as m,al as D,a3 as T,a as U,i as q,f as s,w as n,b as M,g,ai as V,am as P}from"./index-7OqlQ5Tf.js";const S={style:{flex:"auto"}},$=R({name:"Edit",__name:"index",emits:["success"],setup(I,{expose:b,emit:y}){const c=y,f=o(""),k=o(),t=o(!1),d=o(),u=o(!1),e=o({id:null,name:"",active:1,remark:1}),x=o({name:[{required:!0,trigger:"blur",message:"请输入职位名称"}],tenantCustomerId:[{required:!0,trigger:"change",message:"请选择客户"}]});async function h(l){try{t.value=!0,l?e.value=JSON.parse(l):e.value={id:null,name:"",active:1,remark:""},f.value=l!=null&&l.id?"编辑":"新增",t.value=!1,u.value=!0}catch{}finally{t.value=!1}}function C(){return new Promise(l=>{d.value&&d.value.validate(a=>{if(a)try{if(t.value=!0,!e.value.id)delete e.value.id,_.create(e.value).then(()=>{t.value=!1,V.success({message:"新增成功",center:!0}),c("success"),u.value=!1,l()});else{const i=P(e.value);_.edit(i).then(()=>{t.value=!1,V.success({message:"编辑成功",center:!0}),c("success"),u.value=!1,l()})}}catch{}finally{t.value=!1}})})}return B(async()=>{k.value=new Date}),b({showEdit:h}),(l,a)=>{const i=m("el-input"),v=m("el-form-item"),w=m("el-form"),p=m("el-button"),E=m("el-dialog"),N=D("loading");return T((U(),q("div",null,[s(E,{modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=r=>u.value=r),title:f.value,width:"700"},{footer:n(()=>[M("div",S,[s(p,{type:"",onClick:a[2]||(a[2]=r=>u.value=!1)},{default:n(()=>[g(" 取消 ")]),_:1}),s(p,{type:"primary",onClick:C},{default:n(()=>[g(" 确定 ")]),_:1})])]),default:n(()=>[s(w,{ref_key:"formRef",ref:d,"label-width":"7rem",model:e.value,rules:x.value,inline:!1},{default:n(()=>[s(v,{prop:"name",label:"职位名称"},{default:n(()=>[s(i,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.name=r),placeholder:"请输入职位名称",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"备注"},{default:n(()=>[s(i,{modelValue:e.value.remark,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.remark=r),placeholder:"备注说明",clearable:"",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])),[[N,t.value]])}}});export{$ as _};
