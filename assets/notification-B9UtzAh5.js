
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */

import{d as P,aL as F,r as b,H as j,c as L,n as O,a as h,o as l,b as c,f as p,w as r,y as o,i as e,N as _,z as d,ah as S,F as N,t as $,j as f,e as v,aM as z,s as G,aq as J,a4 as D,ap as K,aH as Q,aI as W,L as X,ao as q}from"./index-wp0HiV1J.js";import Y from"./notification-news-8w2JrMUa.js";import Z from"./notification-cooperation-D24TQQ8u.js";const E=y=>(Q("data-v-6c40f360"),y=y(),W(),y),ee={class:"absolute-container"},te={class:"flex-c"},se={class:"left"},ae=E(()=>o("span",{class:"custom-tab-label"},"消息",-1)),oe={class:"buttons"},ne=["onClick"],ie={class:"info"},le={class:"time"},de={key:0,class:"new"},ce={class:"auditType"},re={class:"time"},ue={class:"data"},pe=E(()=>o("span",{class:"custom-tab-label"},"代办",-1)),_e={class:"buttons"},fe=["onClick"],ye={class:"info"},me={class:"time"},ve={key:0,class:"new"},be={class:"auditType"},he={class:"time"},ge={class:"data"},ke={key:0,class:"right"},H=P({name:"PersonalNotification",__name:"notification",setup(y){const i=F(),g=b(),k=b(),u=j(),t=b({tabs:"",selectId:"",ReadAlready:1});function w(s){t.value.selectId=s.id,D(()=>{var n;(n=k.value)==null||n.showEdit(s)})}function I(s){t.value.selectId=s.id,D(()=>{g.value.showEdit(s)})}const M=async()=>{t.value.selectId="",t.value.ReadAlready=1,t.value.tabs==="news"?await i.getUnreadMessage():t.value.tabs==="cooperation"&&await i.getUnreadTodo()};async function R(){t.value.selectId=""}const m=async s=>{t.value.ReadAlready=s,t.value.tabs==="news"?await i.getUnreadMessage():t.value.tabs==="cooperation"&&await i.getUnreadTodo()},C=L(()=>i.messageList.filter(s=>s.isReadAlready===t.value.ReadAlready)),x=L(()=>t.value.ReadAlready===1?i.todoList.filter(s=>s.auditStatus===1):i.todoList.filter(s=>s.auditStatus!==1));return O(()=>{if(i.isItConnected(),t.value.tabs=u.query.type==2?"cooperation":"news",u.query.id){if(Number(u.query.type)===1){const s=i.messageList.find(n=>n.id===u.query.id);s&&w(s)}else if(Number(u.query.type)===2){const s=i.todoList.find(n=>n.id===u.query.id);s&&I(s)}}}),(s,n)=>{const T=h("el-empty"),A=h("el-tab-pane"),V=h("el-tabs"),B=K;return l(),c("div",ee,[p(B,null,{default:r(()=>[o("div",te,[o("div",se,[p(V,{modelValue:e(t).tabs,"onUpdate:modelValue":n[4]||(n[4]=a=>e(t).tabs=a),onTabChange:M},{default:r(()=>[p(A,{label:"消息",name:"news"},{label:r(()=>[ae]),default:r(()=>[o("div",oe,[o("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:n[0]||(n[0]=a=>m(1)),style:{height:"28px","font-size":"14px"}}," 未读"+d(e(i).message<100?`(${e(i).message})`:"99+"),3),o("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:n[1]||(n[1]=a=>m(2)),style:{height:"28px","font-size":"14px"}}," 已读 ",2)]),p(e(S),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:r(()=>[e(C).length?(l(!0),c(N,{key:0},$(e(C),a=>(l(),c("div",{class:_({item:"item",select:a.id===e(t).selectId}),onClick:U=>w(a)},[o("div",ie,[o("div",le,[a.isReadAlready===1?(l(),c("span",de)):f("",!0),o("span",ce,d(e(i).auditTypeList[a.auditType-1]||""),1),o("span",re,d(a.createTime),1)]),o("div",ue,d(a.messageContent),1)])],10,ne))),256)):(l(),v(T,{key:1,image:e(z),"image-size":300},null,8,["image"]))]),_:1})]),_:1}),p(A,{label:"代办",name:"cooperation"},{label:r(()=>[pe]),default:r(()=>[o("div",_e,[o("button",{class:_(e(t).ReadAlready===1?"unread":""),onClick:n[2]||(n[2]=a=>m(1)),style:{height:"28px","font-size":"14px"}}," 待办"+d(e(i).todo<100?`(${e(i).todo})`:"99+"),3),o("button",{class:_(e(t).ReadAlready===2?"read":""),read:"",onClick:n[3]||(n[3]=a=>m(2)),style:{height:"28px","font-size":"14px"}}," 已办 ",2)]),p(e(S),{options:{scrollbars:{autoHide:"leave",autoHideDelay:300}},defer:"",class:"list"},{default:r(()=>[e(x).length?(l(!0),c(N,{key:0},$(e(x),a=>(l(),c("div",{class:_({item:"item",select:a.id===e(t).selectId}),onClick:U=>I(a)},[o("div",ye,[o("div",me,[a.isReadAlready===1?(l(),c("span",ve)):f("",!0),o("span",be,d(e(i).auditTypeList[a.auditType-1]||""),1),o("span",he,d(a.createTime),1)]),o("div",ge," 您好，我是"+d(a.invitationName||"-")+"诚挚邀请您与我们一同协作共赢！若有疑问请联系"+d(a.phoneOrEmail)+"。 ",1)])],10,fe))),256)):(l(),v(T,{key:1,image:e(z),"image-size":300},null,8,["image"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(t).selectId?G((l(),c("div",ke,[e(t).tabs==="news"?(l(),v(Y,{key:0,ref_key:"newsRef",ref:k,onDelSelectId:R},null,512)):f("",!0),e(t).tabs==="cooperation"?(l(),v(Z,{key:1,ref_key:"cooperationRef",ref:g,onDelSelectId:R},null,512)):f("",!0)],512)),[[J,e(t).selectId]]):f("",!0)])]),_:1})])}}});typeof q=="function"&&q(H);const Ce=X(H,[["__scopeId","data-v-6c40f360"]]);export{Ce as default};
